"commit id","commit date","commit message"
"a770f77cb0b0ea831586f311abe863a0d163978b","2016-03-17 14:46:26+00:00","Merge 'Update Wikipedia app license link'
"
"8a9ce5c1edee74a1fd50a544b722802183096fdf","2016-03-17 15:39:15+00:00","Merge 'Groundwork for bottom sheets, part 1.'
"
"32e53d5566c29c6b82bd18fea1e6b6070970f6e0","2016-03-17 11:00:00-06:00","Add requirements.txt to scripts

The Python scripts depend on several packages. Specify dependencies in
requirements.txt as is expected.

Change-Id: I564718a8fd2a3e3728293d1947829b1164b69306
"
"7b72295a884d466e83dcfb7731dbb0b0dcb5d614","2016-03-17 18:59:36+00:00","Merge 'Add requirements.txt to scripts'
"
"4a0a2ed9eab9957f1d160996690a72607223be2b","2016-03-15 13:59:57-06:00","Hygiene: add AsyncColumns.val() for unmarshalling

Change-Id: Ibf7ce425d64d938096fa640981b9f2b7ee392d84
"
"c09c70255727ae5d4bc1be7a9e6e5957f1a2730a","2016-03-15 14:15:56-06:00","Hygiene: add DbUtil.namesCsv

Change-Id: Ia8b5be3d3e2ae6c0710c89d7b09bd2c00b169b55
"
"5d5c9fad5ed79fd3335cbfeed09dc50759e73c8c","2016-03-17 16:59:44-06:00","Update the Python interpreter to 2 for old scripts

Update the Python version for the last of the old scripts.

Change-Id: I3a4ca7283c494fcac9a08b6c4039c0b7b9ddeca3
"
"c0802284217b1dce42b729bdfd3e0dc2499f6d08","2016-03-17 23:13:03+00:00","Merge 'Add ability to specify device to pullfiles.bash'
"
"d7d78811bc8dbbcb95884ef407bd5cb0529ff631","2016-03-17 17:16:46-06:00","Upgrade Gradle to v2.12

https://docs.gradle.org/2.12/release-notes

Change-Id: I1e17e6b3c8be71a92789f0102af9e73e693cc6ed
"
"de8300761bd242311639bd813ed370d850f1917d","2016-03-17 18:28:54-06:00","Upgrade Gson to v2.6.2

https://github.com/google/gson/blob/master/CHANGELOG.md#version-262

Change-Id: I91b244c4f986d3cc20aece295fbc37204bf8b42d
"
"7eb3266d02468b225f21ae719ccb338aff519764","2016-03-17 19:12:00-06:00","Upgrade Spoon client to v1.3.2

https://github.com/square/spoon/blob/master/CHANGELOG.md#version-132-2016-02-09

Change-Id: I8d9160022391435fc055171b2eafd0b8dcff9811
"
"3c23bcdd58c753064dcfc41adfd9131fbf50955f","2016-03-17 20:59:25-04:00","Consolidate long-press handlers for button tooltips.

Also add a tooltip to the Language button in the search bar.
(Therefore not precisely a 'hygiene' patch, but no other functional
changes intended.)

Change-Id: I16698d3cb795e0ad165b6270be5bc99bf459136e
"
"2099b0f9c2ba497cac4957e008eda60bc95653bb","2016-03-18 14:41:50+00:00","Merge 'Upgrade Spoon client to v1.3.2'
"
"631cdb31a12cdc2f47db7096008b4c4d47b1ebab","2016-03-18 14:46:29+00:00","Merge 'Upgrade Gson to v2.6.2'
"
"f2f9652f2c94ede19730dc040e7a1851c075b6bc","2016-03-18 14:52:52+00:00","Merge 'Hygiene: add AsyncColumns.val() for unmarshalling'
"
"f159a0beea4ae6decd6e1dec33ecbd2b51161317","2016-03-18 14:57:17+00:00","Merge 'Hygiene: add DbUtil.namesCsv'
"
"65d580730e4c8946357baa6dafc86c39af56e3a2","2016-03-18 15:28:34+00:00","Merge 'Consolidate long-press handlers for button tooltips.'
"
"eb6a78b35fc0a51ff0cdb1af2c3f357200f3a637","2016-03-18 10:31:36-06:00","Hygiene: remove FixedViewPager workaround

We don't think the bug[0] this workaround hid is occurring any more,
probably due to Fresco. Remove the workaround.

[0] https://github.com/chrisbanes/PhotoView/issues/206

Change-Id: I798b80eff5c203d59769810fafefef45d0249049
"
"9edbfdd176235549215d9648c6268c49f3bf0b20","2016-03-16 14:33:56-04:00","Groundwork for bottom sheets, part 2.

- Expanded our ExclusiveBottomSheetHandler to be able to support regular
Dialogs, not just DialogFragments (although Dialogs won't be saved in
the activity's savedInstanceState, but that's alright).

- Made a simple descendant of BottomSheetDialog that automatically
disables dimming of the background when it's shown, which we need for
some of our bottom sheets.

- Transitioned the ReferenceDialog, PageInfoDialog, and
ShareDialog to be BottomSheetDialogs, some without dimming.

- Goodbye, old 'BottomDialog' class.

Change-Id: I444f42fa021b16b2b1112173d4934eb10b08f57d
"
"3b78b6e076d904fa674328917b9e4085bbce7b5b","2016-03-18 18:03:08+00:00","Merge 'Groundwork for bottom sheets, part 2.'
"
"0e242fe86c00f325aa7995e5afc4902af6a774e1","2016-03-22 16:38:58+01:00","Localisation updates from https://translatewiki.net.

Change-Id: Ib47412e11f970677b4851f47cf58f82a144b04ff
"
"9e64be136289f38ca9396f9a39a6054e076cef27","2016-03-24 12:51:23-06:00","Fail all outstanding sync transactions on error

• Reset outstanding sync transactions on error. Previously, only the
the active transaction was closed.

• Add helper method for the special case of failing transactions.
Previously, the client called resetTransaction().

• Fix typo in interface method.

Change-Id: I0fe21b82b055bfda3d8be46c5deb9f08b368a1df
"
"f36ec8e15a2d47d2dc706b8f84abb45534269eba","2016-03-24 13:09:36-06:00","Hygiene: add missing @Override annotations

Change-Id: I8a909c5a9c579cb1c8da3598d5c14883d7fb4ee1
"
"ccc2873e7440ef3a65869c9d09233e34b042eec7","2016-03-24 19:59:59+00:00","Merge 'Fail all outstanding sync transactions on error'
"
"298762123ee1732b2ebdb037e45917d273b74742","2016-03-16 15:25:57-04:00","Transition Wiktionary dialog to a bottom sheet.

This introduces ExtendedBottomSheetDialogFragment, which provides
functionality for optionally disabling dimming of the dialog background,
as well as setting a custom maximum width of the dialog, and whether to
start the dialog fully expanded.

Also a bit of renaming of dimens, to reflect bottom sheet nomenclature.

Change-Id: Ic1a58ff8af65f9ca8be3bd957f23871b680465f4
"
"c5ff657f3bd3003ff3b53232739a685c6b79d092","2016-03-28 17:27:42+02:00","Localisation updates from https://translatewiki.net.

Change-Id: I19f634d68d58af235491d36f1afa2a836f2ea177
"
"a6a1c6306523471b021a3d7c078c76e48d78d5e1","2016-04-02 12:22:06+03:00","[Hackathon] Improve transition between gallery images.

Change-Id: I2edb2195e507d20b31e49637dc19bc751aaee40f
"
"5c71a625e71fda3db9d8098742c4634d8a08890c","2016-04-04 17:14:04+02:00","Localisation updates from https://translatewiki.net.

Change-Id: Ic381cddbf40fc4741b5a3d2b9a0d21670b7d15f9
"
"87a7695a085be7673a4d970c0d7f0566c2fc7634","2016-04-04 15:50:07+00:00","Merge '[Hackathon] Improve transition between gallery images.'
"
"0960c0d477d84187f3b2b64af2344f2778c17785","2016-04-01 17:49:37-06:00","Hygiene: remove unnecessary Checkstyle suppression

Change-Id: I007fa5b8abce72e4cea0ac7d4416301e9919c8a6
"
"ca28bf548876f208a7a1df8825b75832ff03d1c4","2016-04-05 17:08:53+00:00","Merge 'Hygiene: remove unnecessary Checkstyle suppression'
"
"6d1eec2dfb95a9a6f9ad23e22fc525495df608f6","2016-04-04 16:08:41-04:00","Make getMobileUri() return the mobile URI

Sometimes we actually want the mobile URI, for instance when sending to
a browser to view externally.  So this updages getMobileUri() to return
it rather than duplicate getCanonicalUri().

Bug: T129266
Change-Id: I8d306301d29fb42bd4d18e135254160245cc9f7f
"
"76025c12956416af1c60d4d4b66cb4082b7ccfaa","2016-04-05 12:21:51-06:00","Hygiene: add missing generic type

Change-Id: Id2a338f185cd44cf6cc2f9621def1596df839ec8
"
"605fa357086a364e18a25f4983da9a947ef10362","2016-04-05 18:22:07+00:00","Merge 'Make getMobileUri() return the mobile URI'
"
"a4a4113cfeddf0d094d79a29921f3b5c29a44137","2016-04-05 12:30:36-06:00","Hygiene: replace ... (three dots) with … (ellipsis)

Change-Id: I5d09b4760056b530ca4b63c6599cb2f99b011a42
"
"42fb79649dfcd5b0a9d07ce3f57118da71168252","2016-04-05 18:39:04+00:00","Merge 'Hygiene: add missing generic type'
"
"bea82480dd79619c982bcfc076c04e9c3b350066","2016-04-05 21:37:06+00:00","Merge 'Hygiene: replace ... (three dots) with … (ellipsis)'
"
"6db220fa9cded67469de77be3dc6974cff1ae870","2016-03-31 17:55:32-06:00","Add empty app content provider

Create an empty ContentProvider to consolidate all other providers into.
The current implementation is unnecessarily sprawling and will benefit
from reduction. This patch just makes an empty ContentProvider skeleton.
Subsequent patches will merge all preexisting providers into the new app
provider.

Change-Id: I6fcdd27395eb57619b830c8d68cea26e08293c93
"
"73ebd8a06ce7a60565b6097f8cbf3cf5caef3a55","2016-04-06 16:20:51+00:00","Merge 'Add empty app content provider'
"
"c1e35b27b271f950f15abb655e0dd813833b6367","2016-04-01 17:48:25-06:00","Consolidate page history ContentProvider

Change-Id: Iaffc8fa8456312e1db6a357cf7ccf36275439744
"
"1da78fad6e0ecb1186235edd5cba999afa90dc9f","2016-04-02 17:44:47-06:00","Consolidate page image ContentProvider

Change-Id: I1b5939294edd93fd1386f95bcc4cdaf47ae5a09d
"
"815f5347c9ac34717ec457e5cec980b4679a1cfc","2016-04-02 18:24:28-06:00","Consolidate edit summary ContentProvider

Change-Id: I890120ad903cffea0633f8b86f054e761040fab3
"
"b941ec65223ed293f930fe85023761f0ec2e8151","2016-04-02 18:43:26-06:00","Consolidate recent search ContentProvider

Change-Id: I01e418af1676460953862255d7eb821a5840909e
"
"7100baf590cf820ae540e01f90f9112cd95feb1b","2016-04-03 12:19:34-06:00","Consolidate saved page ContentProvider

Change-Id: I209e29666c7611217929f833ddf70d28283be94e
"
"43eac584b03cb247251a3be3615609047879116c","2016-04-03 16:42:00-06:00","Consolidate user option ContentProvider

Change-Id: I3712ea14c1bce0c6f32c52c7453d6bed67e62420
"
"dc08f3020b0e53fe33299674edd2226b61b98fd1","2016-04-03 17:43:02-06:00","Remove old content provider

Change-Id: I61bde1d07c8a283b9aee3fc6316351322818e90b
"
"ba38dab8ca008f44df2542cd3b3c1638a540a5a0","2016-04-07 13:34:15+00:00","Merge 'Update the Python interpreter to 2 for old scripts'
"
"e537feb49732ef828c44a8300088dea4dfe384f7","2016-04-03 17:30:20-06:00","Close HTTP connection when downloading saved pages

Close the HTTP client connection after downloading an image. This fixes
the following scenario:

1 Tap random until a page with a lead image is shown.
2 Tap save.
3 Quickly tap random. The following message is logged:

OkHttpClient W A connection to https://upload.wikimedia.org/ was leaked. Did you forget to close a response body?

Change-Id: I300fc1e6d278356d5c28e0152a65fc69a3a8075d
"
"0bdc388e5b31cccc5f5ef43e69eaa97ff3d0a793","2016-04-02 19:09:31-06:00","Hygiene: remove dead code

• Remove dead code.
• Remedy a couple raw types.
• Add a couple Android resource annotations.
• Update a tools:context reference.

Change-Id: I34c8b9394915a700e2ef35f26b3b89fe75c0d63c
"
"2334447e9f612b69ab51e4205d68fd2534369251","2016-04-03 19:00:06-06:00","Create the first db table and upgrade

When creating or upgrading the database and a table does not exist,
create the initial table version and upgrade it instead of
short circuiting to creating the last version. Database upgrades should
always follow the same path.

See also: af070d5

Change-Id: Ia8f132ab1809a781152716f5bd607de8b2515482
"
"b3970efbc56ec02f66be540b90503d04e3468240","2016-02-16 12:56:49-05:00","Update Mapbox to 4.0.0

• Lots of API changes[0].
• I believe I've disabled Telemetry.

[0] https://github.com/mapbox/mapbox-gl-native/blob/master/platform/android/CHANGELOG.md#400

Bug: T126102
Change-Id: I5ab68630a716455e2798291bd48c9708b72d9814
"
"af7bac87399fbc358a6943f623c2192033df8931","2016-03-17 13:15:24-06:00","Add namespace and database column

Change-Id: I7836fc9ce9a0ab12104ad45ade7f714b67b82d06
"
"771204155543cd3e1ff1a8d784ac0cb4cc9da8f3","2016-04-03 19:47:10-06:00","Hygiene: move constants from model to utility

Change-Id: Ia37baf0bec3edec46017ec3f96479992907e3e4d
"
"99757bdbcb7d3215f8f23b2e418c66fc584c8fff","2016-04-03 23:01:07-06:00","Hygiene: refactor history screen's LoaderCallbacks

Refactor the HistoryFragment's LoaderCallbacks to subclass
CursorAdapterLoaderCallback.

Change-Id: I4e1bb029770ce2b2c3218124b82c95956b141747
"
"ab8e9fca45a3639222a3794b5f5c8d14f2e7be79","2016-04-06 17:23:24-04:00","Update bundled CSS

Updates bundled CSS with the latest from MobileFrontend, via
scripts/make-css-assets.bash

Change-Id: Ic6bcd344566c99b91b6a644e92cc16646fd6f950
"
"6f1e2fd5748f81a58cdc6b7b1790f2f3d9283229","2016-04-06 10:57:14-04:00","Narrow grunt jshint scope to js development folders

Currently, when running grunt, the jshint step chokes on the Grunt-
generated JavaScript in app/src/main/assets.  The check should be
confined to the folders where we actually do our JS development.

Change-Id: I8939e1b9e3b53eb084fdac18aee858e9c87805df
"
"ebe598b6ae53e5136d757e90c36f8e2042856fd9","2016-04-07 12:01:18-07:00","Improve documentation in TitleSearchTask

This patch slightly improves the documentation that handles an edge-case of a
redirect which points to a particular section of an article. The documentation
in that code right now doesn't really explain what's happening, so if you're
unfamiliar with the API then it's very confusing.

Change-Id: If8b219bdaf965d1277564a8ec64d6a87a3ab5e5b
"
"3d59241ed6e377e9941566ec098b7a2603c9907d","2016-04-08 13:38:27+00:00","Merge 'Update bundled CSS'
"
"38e5d84b548fd7e12afc41e3f617a1b9432a45b0","2016-04-08 13:38:55+00:00","Merge 'Narrow grunt jshint scope to js development folders'
"
"393c1ebc67d20c8ef2992e5b24b229e197f04973","2016-04-08 13:44:15+00:00","Merge 'Improve documentation in TitleSearchTask'
"
"9d05c5cf9b372d2490af16515ea4237de0d2bbfa","2016-04-08 11:36:55-04:00","Upgrade Gradle plugin to 2.0

Implies upgrading to Android Studio 2.0.

Change-Id: I0358ecc93f53ad026aaed6bd1513f815658f4f93
"
"3a4395aa1ff8ad081bd2ccd6345d0a1f053a2446","2016-04-08 14:59:58-04:00","Fix launching URLs in external browser for API 23.

In API 23, once an app is set as the 'default' for handing a certain Uri,
then the app will be the only one returned by the queryIntentActivities()
function, which breaks the expected behavior of this function in previous
APIs.

We fix this issue by explicitly setting a temporary Uri when querying
intent activities, to ensure that we get the default system browser
activities.

Bug: T132192
Change-Id: Ic7f2deccf6f327bf69bd240d9ceb8356cdd959c4
"
"5f608a1ced927320b099c30db11ec696db82ff23","2016-04-08 21:18:52-06:00","Hygiene: mark ApiUtil as deprecated

Change-Id: Icd5ffbd7db7d7518bdbe981cc307a6264125aca5
"
"328b5eaa400b637956a7f2ef93e5605382c90629","2016-04-08 21:22:22-06:00","Clean up CursorLoader on Fragment destruction

Change-Id: I20e8997dc5353434675200b72352dd582226041b
"
"d4a81d6bd8bff5a974162e20b0b6ae4650e76c54","2016-04-09 11:59:53-04:00","Replace erroneously removed cite styles

Generating these requires the 'cite' role in mw-vagrant, which I didn't
have before (leading to an error generating the CSS).

Thus, I removed the reference from the CSS generation script.

This puts back the needed styles.  I'll update the mobileapp role in a
follow-up patch to require the cite role.

Bug: T132253
Change-Id: I7a9c8ef804301bc81932886a2aec74fe96ba3f84
"
"869349ff7a443c65531226e49f582dedb35f9e7c","2016-04-09 10:59:51-06:00","Hygiene: add parameters to raw types

Change-Id: If5c595e6c30dbe4ce32aae4e0cc8466f9d20a1d7
"
"2d50751a0d9b508545197682a09720b0275114bc","2016-04-11 05:31:14+02:00","Localisation updates from https://translatewiki.net.

Change-Id: I7debbc7a8f818e0db81afdcb1d8c87029b82b394
"
"aaabbe764147e900e235a58c39094095a42e2d07","2016-04-11 14:18:59+00:00","Merge 'Update Mapbox to 4.0.0'
"
"e3b132729b8a7d8a18c16c0433cedfe785ffa1fd","2016-04-11 14:26:24+00:00","Merge 'Clean up CursorLoader on Fragment destruction'
"
"f17f389915a460bfa82e4a28213b1504e2fe233d","2016-04-11 14:50:42+00:00","Merge 'Hygiene: add parameters to raw types'
"
"175d4c7b5e1dd43c011712548983efb9f04415b4","2016-04-11 16:59:30+00:00","Merge 'Fix launching URLs in external browser for API 23.'
"
"8438dc085acedb028b6a4c1aafc73850e0d7a3f3","2016-04-08 18:13:09-04:00","Add MW gallery styles

This adds a gallery stylesheet module that improves presentation of
in-article image galleries, and removes some special-case CSS in
MobileApp that the gallery styles from MediaWiki render unnecessary.

To see the difference compare the images in the article 'Picasso's Blue
Period' before and after.

Depends-On: Ibbcd5abb94ce58b9a45113d3b488facac3efe2fa
Change-Id: Id043c42d8191ec8a548e2e353b3cf728321dac32
"
"f7f8a4e24c5c2e10c30331d137302e160b5f2101","2016-04-12 07:50:22+02:00","scripts/convert-icons.py clean-up

Change-Id: I290f233a0bb9cc49d793f63f3401adef87dbb892
"
"d86393d23759580a90a9f8c2e56068eeaf317d9b","2016-04-12 16:30:51+00:00","Merge 'Hygiene: mark ApiUtil as deprecated'
"
"1243e978f4f888f655b7eb11a3ba3124d176f449","2016-04-12 15:24:01-06:00","Always log SaneAsyncTask Exceptions

The SaneAsyncTask.onCatch() default implementation makes it too easy to
silently consume errors. Whether an exception ocurrs in the background
or in onFinish(), always print the error.

Change-Id: I2c02792f78324bbd28b2b67cf871c18da1a69fb5
"
"633a502cfe00b337c3a54e50813d5d461e8cbc61","2016-04-05 10:49:07-06:00","Break user option HTTP status into separate table

Change-Id: I6732ac7379e2520bb5b3771141d1216b72385150
"
"070a33c4d372be15a0a5e4d404f21c54c36676f0","2016-04-08 21:04:04-06:00","Hygiene: replace method with clearer equivalent

Replace call to SQLiteDatabase.replaceOrThrow(...,
SQLiteDatabase.CONFLICT_REPLACE) with replaceOrThrow(). These statements
are functionally equivalent.

Change-Id: I84da5eb598984b3cd7e899c9ad10eff74c4d1ea3
"
"ebd227177f96a218c8ffbf83ec6b684c5b474b7c","2016-04-13 10:06:14-06:00","Add Apache Commons Lang v3.4 and CsvColumn

• Add the Commons Lang library for CSV parsing. With this commit, the
production apk increases in size by ~21 KiB, from 19 604 432 B to
19 625 967 B.

• Add a CSV database column which abstracts the parsing needed to and
from CSV strings. Databases tables should prefer to normalize their
data but our database layers are too rigid to accomplish this well
without a signficant refactor. We will have to iterate this
shortcoming away another day.

Change-Id: I5b071c1abbf734c6d4b33038d0faac68932f01dc
"
"e84840aefffff605bdabcf476966bda2152f81cd","2016-04-09 11:16:40-06:00","Add Reading List page tables and DAO

Bug: T127708, T127704

Change-Id: Ia9cbfb5d872e63818f3afcdcc944a3af19d48c74
"
"78a42b4cab60fcce9b9fe552abb5ad350e7cdc80","2016-04-13 18:28:30+00:00","Merge 'scripts/convert-icons.py clean-up'
"
"fe68ac27e65bf196b3a0aa56dc09570d90960b12","2016-04-13 20:40:10+00:00","Merge 'Add Apache Commons Lang v3.4 and CsvColumn'
"
"a6c4a2e7d7a5a077c583187d42cf7609ae7ce66a","2016-03-17 16:39:24-04:00","User experience for Reading Lists, part 1.

- Implements the UI for viewing and managing Reading Lists, accessible
from the Nav menu.

- Implements the UI for adding an article to a reading list, by
pressing the 'bookmark' icon below the lead image.

The business logic of dealing with the actual collection of reading lists
is handled by an interface called ReadingListData. In this patch, the
interface is implemented by a static hard-coded list. In the final
implementation, it should be handled by actual DB interactions.
Additionally, in the final implementation, certain elements will probably
need to be converted to asynchronous operation.

Note: the 'Reading Lists' nav menu item will coexist with the 'Saved
Pages' item, and is feature-flagged for non-production builds. Saved Pages
will be completely removed when reading lists are fully implemented.

Bug: T127711
Bug: T129590
Change-Id: I1d8d2fd59c944522781c3bd606bacc7b49ecd820
"
"7ac0b472cdd2e141fd420d7b588b433277f6cd72","2016-04-14 18:49:08+00:00","Merge 'Add Reading List page tables and DAO'
"
"fdd4588cdc1b0f0d2d2d39431223a72148253068","2016-03-24 15:30:34-04:00","User experience for Reading Lists, part 2.

- Integrate 'add to list' into context menus and link preview menu.

The menu items still coexist with the existing 'Save Page' items. These
will be removed in the final patch that seals the fate of saved pages.

Change-Id: I04147d3b3f5939d7fb4d4b02a0a8d1899f23b98f
"
"8781aa67d48d7f4c67a2fae51378fa57c941e335","2016-04-14 19:20:32+00:00","Merge 'User experience for Reading Lists, part 1.'
"
"3709f523c5b78d9d4db3ef4f3c610b89e8672650","2016-04-14 19:27:33+00:00","Merge 'User experience for Reading Lists, part 2.'
"
"e8a8c2bf5619f1782e35a74fbb3f62c7f5c01d94","2016-03-24 16:55:19-04:00","Onboarding for Reading Lists.

Bug: T129606
Change-Id: Ia492483e69ef47b79e6372f05f53d5fca158dfaf
"
"d1fea7cc01ff8240aa90fdae63a2319a3695ce2c","2016-04-14 19:42:00+00:00","Merge 'Onboarding for Reading Lists.'
"
"bba41f0361e5528176d9c2864b40ccc0c9381ece","2016-04-14 19:50:46+00:00","Merge 'Add MW gallery styles'
"
"5de896314c6bbe107f895e0fd306513305ee1caf","2016-04-12 10:47:30-06:00","Separate Reading List 'list' and 'page' interfaces

Change-Id: I53790674dc421682f121c8c264c68aa4d33adee4
"
"0ca5470a2c102f19fe4a97e3c04f02f295e1b782","2016-04-12 10:56:23-06:00","Hygiene: fix a couple overrides

Change-Id: Idda75ce8edfe003156242a9c566bd9dbe4669752
"
"1b246c217e81b1e436efa59ff03c1fa11ce5abea","2016-04-12 11:13:19-06:00","Hygiene: remove unused code

This integration is too big. Remove nice to have but unnecessary code so
that we can focus on only what's functionally needed.

Change-Id: I83efd7783306636acbe44ce94039b286a81d5255
"
"f545900f6605626ccb7fc03cce96fec16a133c0a","2016-04-01 04:06:33-04:00","[Hackathon] 'Edit here' context button.

Bug: T119887
Change-Id: I54a2c68741851d81f4aa5ac25f7f91d4be309c31
"
"fabdb01b155cc47516a9cff3f00cdf6db46f0467","2016-04-14 20:46:38+00:00","Merge '[Hackathon] 'Edit here' context button.'
"
"d046614fca11c87ca9db3f48ac7f2ec66e7d9138","2016-04-15 11:56:46-06:00","Add filename to Reading List page disk table

Add a filename column to the Reading List page disk database table. This
column is necessary to remember where files were stored.

The previous database schema has not been published through official
channels yet so the effort to upgrade from the previous to the new
has not been made. If you have installed a dev build with the current
schema, this change will cause a crash or undefined behavior. Please
clear your data.

Change-Id: I0e2c72e1b1d632b6be75bbd870d1b03ebcb690a7
"
"2499252c946d045af662d9c28bc37a49ccef996c","2016-04-18 16:26:52+02:00","Localisation updates from https://translatewiki.net.

Change-Id: Id7003e264c6729367ac4f0cc8e784754c92a847f
"
"595aefd12046d742cb7ae34801559d11f446af2f","2016-04-18 16:04:58+00:00","Merge 'Add filename to Reading List page disk table'
"
"b5292bdd76a8445207c76a8f6ce0404d441a22a9","2016-04-13 12:31:15-04:00","Eventlogging for Reading Lists.

https://meta.wikimedia.org/wiki/Schema:MobileWikiAppReadingLists

This is still intended to coexist with saved pages, until the final patch
that tears them out.

Bug: T132735
Change-Id: I58b5cfdb21c8de66c339182e663b24d5712f8da3
"
"4306fb17bb1c6e6543cc96bc78b0561b04b00e5e","2016-04-18 16:33:26+00:00","Merge 'Eventlogging for Reading Lists.'
"
"0b40f11962d66ff3affe6a8cd636c97ec99e2827","2016-04-18 12:38:30-06:00","Flavorize test apk package ID

The test apk package ID should be different for each flavor. It wasn't
and this caused the Spoon Gradle plugin to fail in a confusing way when
testing different flavors on the same device. For each package ID, we
now use a distinct test package ID.

Change-Id: I105bc5e4bb4a72deffd68c0887597c1a68555882
"
"4f15dc4feb462fb7067c1eb8ba1da08c239f2d73","2016-04-19 00:36:24-06:00","Revert 'Flavorize test apk package ID'

This reverts commit 0b40f11962d66ff3affe6a8cd636c97ec99e2827. Android
test Java resource imports are currently flavored but shouldn't be[0].

[0] https://code.google.com/p/android/issues/detail?id=207407

Change-Id: Idca5e2ae5058b4c43c8ff1af08e24383d07636a1
"
"af3265fdc8f5dc6cb364f9c5fcac89d9cef772a3","2016-04-19 08:54:20-04:00","Update Support Library to 23.3.0.

No functional changes intended.

Release notes:
http://developer.android.com/tools/support-library/index.html
https://plus.google.com/+AndroidDevelopers/posts/iTDmFiGrVne

Change-Id: I3944bdd1c517b75b3e28c9f50678120f9d3459df
"
"b4f005c3dbc9e1807fefc451f837dfd54507360d","2016-04-19 09:09:59-04:00","Fix bug when entering Edit activity without highlighting text.

Right now, tapping the 'edit' pencil launches the Edit activity and shows
an error and 'retry' button overlaid onto the wikitext. This is due to an
exception thrown from the auto-highlighting code, trying to highlight a
null string.

The issue is that the isGraphic() function itself doesn't check for null.

Change-Id: I8bcce5ee8b9a7a9e9a065ac91733b06b5196feac
"
"0a0b34738f0708698ac2feae8671efca7bbb6c33","2016-04-19 10:02:01-04:00","Improve clickability of links in Wiktionary dialog.

The issue was that the Wiktionary dialog expects all links to start with
'/wiki/', whereas certain links start with './'. I expanded the link
parsing to support this case, as well.

In addition, the Wiktionary dialog couldn't handle links that have a
fragment in them. We'll simply ignore fragments for now.

Bug: T132397
Change-Id: I13daccdc26802f435d07b416a46154c55933dcf0
"
"c5f95368b8dd99619012d0ba80f0caad20c76b80","2016-04-19 10:57:11-04:00","Simplify tinting of drawables throughout.

Remove most instances of programmatically setting the tint on drawables,
and move them to XML.

Change-Id: Ibb62b53bd6ad50301dd4fd41a3824282d21ab61b
"
"a07afd0201ed993e48e0ce72e90319018e828625","2016-04-19 10:52:24-04:00","Introduction to vector drawables.

This is the first of a series of patches that will transition our
Drawables to be vector objects, instead of individual PNGs.

This patch converts the icons in the article menu bar to vectors
(bookmark, share, and navigate).

Bug: T128046
Change-Id: Ic7c4f417b026f6c9c14c6d3a40e652934522f4d0
"
"1bee4c84115c67d6f9440ac8896bce0f4a9ac972","2016-04-19 16:56:37-04:00","Vector drawables, part 2.

Replace most other raster icons with vector equivalents, performing a
little cleanup along the way.

The remaining raster icons are either 'custom' graphics specific to WMF,
or graphics that need to be flipped for RTL. Android vector drawables are
indeed flippable for RTL, but only for API 21+, so we'll need to keep
these for now.

Bug: T128046
Change-Id: Ie510342f0590f19e034ea5410ca58a4757ca3394
"
"523423072b861663d34218e4b6360360b61fd02b","2016-04-20 00:55:57-06:00","Hygiene: replace applicationId with suffix

It seems cleaner to only change the bit that changes across flavors. No
functional changes intended.

Change-Id: I3df9c89d0752a64906f94d88be5c055449b9bf33
"
"718b8f67116eee03867fdae871a32422b372b5bf","2016-04-20 11:04:07-04:00","Design tweaks for Reading List UI.

- A few margin and text size adjustments.
- Improved appearance in Dark mode.

Change-Id: Ie681148ca48e81629a84e529c66d6e3eb11c6140
"
"63cc0ac86d7067d8c3b877ce93e4620c89031575","2016-04-20 13:31:57-06:00","Upgrade Spoon client to v1.4.0

https://github.com/square/spoon/blob/master/CHANGELOG.md

Change-Id: Ib0ef997e6dc6c7690c23b5b2a9dc9cc318ef8070
"
"53010ec8a6b9124d2b7bad7c1b2405642e9e7fd9","2016-04-20 16:55:40-04:00","Fix duplicate Search icon for RTL in API <23

There are two places in our code where we use 'drawableStart' to insert a
drawable at the start of a TextView. The Android guidelines (as well as
the IDE) encourage us to *also* supplement it with 'drawableLeft' for
compatibility with API <17.

However, when switching to RTL under API <23, this seems to be having the
effect of rendering *both* the 'start' drawable, as well as the 'left'
drawable... whereas theoretically the 'start' drawable should override the
'left' drawable.

Anyway, it looks like it's perfectly acceptable to remove the 'left'
drawable, and suppress the IDE check for it.  On API 17+ this means that
it will use the 'start' drawable as expected, and on API <17 it still
renders the 'start' drawable, but always places it on the left, which is
also expected.

Bug: T133169
Change-Id: Ia43adf10165543a9630c086c702005f1f07fc964
"
"efa527c162abb0947dc99beefc6c83c6ebeba99b","2016-04-20 15:50:26-06:00","Hygiene: use base class to reference statics

It is more consistent to reference the statics where they are declared
instead of from a subclass. No functional changes intended.

Change-Id: I3fbb7c9e3c282a2c944de22489eee3e27b4f7108
"
"408a9c487f75e3daa372a90d2d3b89b6c7ce267d","2016-04-20 15:59:17-06:00","Add debug logging to ContentProvider queries

Defaults to disabled.

Change-Id: Ibaacbbc7c024a45e991a6f004b8f312ea1d9ff00
"
"c24aab96bcf39b91f3f232d0a5f816d7a461b2de","2016-04-20 16:22:24-06:00","Add Reading List list table

Bug: T127707
Change-Id: I72be73e67f703f78667f1cad10799c64bcf7aef8
"
"f9c2b132bc8f98015256558f59208ff24347ddbb","2016-04-20 16:25:46-06:00","Add Reading List list content provider

Change-Id: I856e49528dd4285d698bd23e87906762cd6324d7
"
"4a7983652135d3772f0435c696e13dde0ec394c0","2016-04-20 16:50:21-06:00","Fix optional table joins and unmarshalling

Several of the new table joins expect the rows of the right hand table
to be optional. This requires a _left_ join, not just a join.
Additionally, Cursors returned from join queries always have these
columns but they may be empty. Instead of checking for the presence of a
column name to determine whether the joined part exists or not, check
that a field with a nonnull constraint is nonnull.

Change-Id: I3da94a9953f880e03cac4b3ab40f9c8c73b21110
"
"c445ea3ba2f940028e656816dfb4cf2b40128826","2016-04-21 15:51:30+00:00","Merge 'Fix duplicate Search icon for RTL in API <23'
"
"c13fd8c10877717f4d0912172c44bbc12636e423","2016-04-21 12:46:37-04:00","Hygiene: Spell ostrich correctly

Change-Id: I19657493c51928f1c2344a441c16240ac8fc075a
"
"5e10b1cc696708e7ad0bcfbb9346c182f5606081","2016-04-21 16:51:49+00:00","Merge 'Add Reading List list table'
"
"1a411127564c244d7da5c2fab71d2423553529a7","2016-04-21 16:57:24+00:00","Merge 'Hygiene: Spell ostrich correctly'
"
"256ba66a9655e7ff73a4d9e73d865bcd5f80fb41","2016-04-21 17:50:11+00:00","Merge 'Add Reading List list content provider'
"
"eaafda28302ada1e57a264f62fb55715651aece0","2016-04-21 18:03:15+00:00","Merge 'Fix optional table joins and unmarshalling'
"
"77548f3098af1a1838b34f547b40318ed506016f","2016-04-21 18:07:47+00:00","Merge 'Hygiene: replace applicationId with suffix'
"
"7c7923586c28ae66f9cf2f6d6eda91c4cc38f431","2016-04-21 18:10:34+00:00","Merge 'Upgrade Spoon client to v1.4.0'
"
"4ad5005ad6b6af53581ec4e0a5e8f45c22d1c719","2016-04-21 10:46:27-06:00","Derive authority when no Reading List page lang

The Reading List page table, like all other tables in the app, does not
impose a nonnull language constraint. Check the language code and use
the appropriate Site constructor.

Change-Id: I56a36c6a5ac4754063bbe9986057033a37f89d6b
"
"02be0641d290a30b607b5c66ac98bdc6b9e0123c","2016-04-21 18:24:02-04:00","Add 'share' and 'add to list' to page overflow menu.

Bug: T131463
Change-Id: I5155138a5cad87c660f6f8c2bfd84b14cd213951
"
"338f3f971e34369d33ffcc0fb3732ffc233416ec","2016-04-22 10:11:13-06:00","Don't require JDK v1.7

Remove the forced requirement to use JDK v1.7. This requirement was
added for plugins used by java-mwapi in 23c3bc4. However, java-mwapi is
rarely built and Android N supports v1.8.

Change-Id: I5a94abfe288668067ba72c56b7189d8b880e1e66
"
"72a982d32dc2daa31604701d8c256f13fb3e2870","2016-04-22 16:42:43+00:00","Merge 'Add 'share' and 'add to list' to page overflow menu.'
"
"633f706e8e949773a23110db33ac58c7fc61fcbb","2016-04-21 16:00:42-06:00","Add Reading List list DAO and integration

Bug: T127709, T130929
Change-Id: I6b82097b12367fc8c6c03acb2e4556ba64a3a3b1
"
"4ef5ab1c10f50cdd41f6c8fabc035d82c675d67d","2016-04-22 19:43:57+00:00","Merge 'Don't require JDK v1.7'
"
"b50835e17a514341eaf741cc1971aae72142257b","2016-04-18 10:14:59-04:00","Migrate saved pages to reading lists.

Bug: T127710
Change-Id: I90f92853819c58c7b2029b52ffa0a1ccd2d82387
"
"9540b2bceaf47d1deefb2f69e061ec23c04822d4","2016-04-25 17:14:52+02:00","Localisation updates from https://translatewiki.net.

Change-Id: Ifa6b4a936a2b239c8b92cba844a4e648ef1753db
"
"ab094c4a168834d2d081f454e252e76f09024664","2016-04-25 11:55:41-06:00","Hygiene: fix class hierarchy

The super class of ReadingListPageDiskRow was
DiskRow<ReadingListPageRow>. This is incomplete as the actual disk row
contains a filename column as well. ReadingListPageDiskRow duplicated
the filename member when it should have just specified
ReadingListDiskRow as the super. No functional changes intended.

Change-Id: I452bb0a486efa44ca60117f77b5c33ca5b03d25c
"
"22299b10200da86906b7ee3189ec1272603395a5","2016-04-25 20:49:44+00:00","Merge 'Migrate saved pages to reading lists.'
"
"d30829210832790a13fbcf10229ad39cb0dcf2f0","2016-04-25 16:24:06-06:00","Fix Reading List page list membership queries

List memberships are preserved as a CSV:

key,key,key

An empty lists mean delete and should never exist in the database and a
list of one has no commas:

key

In practice, a list of three keys looks like:

ABCDEF,ABCDEFjsAdifj,SDFpodskfposk

The prior implementation intended to perform a substring query on the
CSV where the query was wrapped in delimiters to restrict matches to
whole keys and prevent portions of keys matching. In the above example,
a match for the ABCDEF key should match the first item but not the
second, which only happens to contain ABCDEF as a substring. The query
looks like:

%,ABCDEF,%

Since the first and last items of the key list won't be delimited on
both sides, the column contents should pre and postfixed with commas.
The prior implementation was confused and broken.

Change-Id: I4605e0e1d37aae873d171d637bea43467eec77b6
"
"ef738355af8d12da56f775198db17e8ba6ba497f","2016-04-26 13:06:54+00:00","Merge 'Hygiene: fix class hierarchy'
"
"da476ccb56c6b8e7bf53fee0bb97d3657bc13e3d","2016-04-26 13:18:07+00:00","Merge 'Fix Reading List page list membership queries'
"
"2f06ef5690351510a438bb26b51d51171891fdff","2016-04-24 22:07:24-04:00","Further design tweaks and fixes for reading lists.

- Make most DAO interactions synchronous, to avoid numerous subtle bugs.
- Enable proper renaming of a list (re-key all member pages).
- Improve fetching of thumbnails and descriptions for page items, and make
it interwiki.
- Update design of onboarding dialog and the reading list fragment.
- Add indicator icon that shows the offline status of each reading list.

Bug: T130929
Change-Id: I9a0cbd98a9939085c74cce4bdc766a3d8a0eb576
"
"1c6d46edca88c697b8138b6c475966ae89c06f8c","2016-04-26 10:59:09-04:00","Fix multi-list membership.

Change-Id: I276a2bea6a5e810d609b049ff30a10e13b35061a
"
"034f647c18a307ebd10083be47073ca240525625","2016-04-22 18:55:15-04:00","Reading List Page DAO interaction tweaks

1) Change DiskRow.next() so that SAVED rather than ONLINE follows
OUTDATED; otherwise pages are in ONLINE state after saving, causing
all kinds of problems

2) Upsert all rows after changing a reading list's saved state so that
the service registers the change and saves or deletes as needed

3) Add a boolean flag to ReadingList to hold the user's offline saving
preference for an empty list so that ReadingList.getSaveOffline()
doesn't fall back to true regardless of the user's preference just
because the list is empty.  The default on creation is still true.

4) Fix class name in ReadingListPageDiskTable.toContentValues() so
filename persists as expected

Change-Id: Id299e7ae0263cec752139da29772b209cc664a62
"
"a90e03ae06176be94b388048b7ce75d0076e3b8f","2016-04-26 10:57:26-06:00","Hygiene: collapse classes

ReadingListDiskRow and ReadingListPageDiskRow are nearly identical and
should be collapsed.

Change-Id: Icf2e4709fb16c82dd89c186d7ba098cf6ddb5a80
"
"5a7305a847f28d14f9a2aff2ba51d5a129aba641","2016-04-25 14:02:41-04:00","Display redirect source in search results.

Note: this patch also deprecates the 'disableFullTextSearch' remote
variable, since we're pretty sure that full-text search from the app
doesn't overload the servers.

Bug: T129958
Change-Id: I313e16aec1e6cbd93339bce5672132cb6801f412
"
"4f35821eee6a713afaed0fe764d12841a1e920b9","2016-04-26 18:09:20+00:00","Merge 'Display redirect source in search results.'
"
"e7fc86e241fafaa5fbafb3eb96586a7f41a4f497","2016-04-26 14:41:38-06:00","Fix search result tests

Update a couple of the search tests for the recent changes in
SearchResult.

Change-Id: If61ee49a5cc82c3200ffcde421a9c54374293062
"
"300c99a28327d3abfdcf9845a96a54c55657b3d7","2016-04-27 10:14:03-04:00","Upgrade Gradle plugin to 2.1

Change-Id: Ic07c0c55c9d439749c21775ad3cca87f89bfb744
"
"3b4895f473c7622e80f5ce0355b6433d6621ff1d","2016-04-27 14:55:37+00:00","Merge 'Hygiene: collapse classes'
"
"80ee3583188f648ef64d9ee4f45c0f9922b5599d","2016-04-27 15:49:26+00:00","Merge 'Upgrade Gradle plugin to 2.1'
"
"c9eb4fc274d6496818dc8cb57e9810e242a4a3cc","2016-04-27 12:03:44-04:00","Hygiene: Use TextInputEditText instead of EditText.

This switches to using the slightly more proper TextInputEditText when
nesting inside a TextInputLayout. This allows us to place the 'hint'
message in the parent TextInputLayout, instead of the EditText itself,
which works better when the IME is in 'extract' mode.  We actually give
most of our EditTexts a flag of 'flagNoExtractUi', but still, this
represents a hygienic improvement.

This also removes an annoying warning message in logcat about this issue.
No functional changes intended.

Bug: T133393
Change-Id: I57fe25fc95edbb906eb5cb186c01edbe81ce292f
"
"cf8426823fc33c900c764c35249090e40f3a4a41","2016-04-21 17:16:13-04:00","Add styles for Parsoid images

Applies styles added in the MobileApp extension to correctly center images
in Parsoid HTML when not widened and to remove an undesired margin applied
by WebKit.

Bug: T127015
Bug: T132364
Depends-On: I34bd6468b140ff2456690b6abdc1de4fb8d03ab2
Depends-On: I0e61c93d9fe2e9c9d322177cda4a375154f8f6f1
Change-Id: I26a58e480a69ac97f3467465f3d735e0bd84d7c7
"
"b37847710edec27e0be77f6f70094e1ba1bc48ff","2016-04-28 11:09:45-04:00","[facepalm] Enable Wiktionary popups in production.

http://i.imgur.com/iWKad22.jpg?fb

Change-Id: I5c7556fb504ba991ff8c3aae6ba4764282c1a86a
"
"ccf68e9e3c55c72043ad6614ad5a7dfa53e47c93","2016-04-28 11:11:36-04:00","[facepalm] Update useRestBase upon refreshing RemoteConfig.

http://i.imgur.com/Uybx5G4.png?1

Here's what currently happens:
- The app launches for the first time, and the RbSwitch singleton is
statically initialized.
- Inside its private constructor is the only place where it updates the
state of the 'useRestBase' preference.
- The RemoteConfig task, which fetches the remote variable that determines
RestBase enrollment, completes *after* RbSwitch is initialized, meaning
that the 'useRestBase' preference doesn't get updated until the current
instance of the app is terminated and restarted. This may help account
for the relatively slow uptake of RB usage.

Change-Id: I0af126e381c07c23c5f4f419604c9290d56f81dc
"
"60abeba02cf9487cbd3d50fb2d56d32adb233f7f","2016-04-28 19:45:56-06:00","Workaround NPE in platform getExternalStorageState

Work around platform bug[0,1] in Environment.getExternalStorageState().

[0] https://code.google.com/p/android/issues/detail?id=175810
[1] https://rink.hockeyapp.net/manage/apps/226649/app_versions/16/crash_reasons/115659443

Change-Id: Idc6dc06ec808f67935f62183781c4208cb3ee256
"
"8ac56ffd524e66fb206e3652ac2297f09fbbd064","2016-04-29 12:27:09+00:00","Merge 'Workaround NPE in platform getExternalStorageState'
"
"eaaa5538a3fee35afa3267c08a25a2b02a0d7d4e","2016-05-02 09:53:01-06:00","Hygiene: tabs to spaces

f38dfa3 mistakenly swapped spaces for tabs. Replace tabs with spaces. No
functional changes intended.

Change-Id: If468131f1efc3cb3200767066498eba12e489307
"
"77b4cce1ff678941269f8d5f5eb3ad3e5355df46","2016-05-02 16:19:06+00:00","Merge 'Hygiene: tabs to spaces'
"
"a1e4668f76a3c6fd2c0f70fa491aec51b295360f","2016-05-02 11:13:31-06:00","Limit JSON Lint to app files

• Limit JSON Lint to operate on app files not node_modules.
• Clean up globs.

Change-Id: Id3049749cde4bb570b2faf84f2bbc9229206c667
"
"d02917eafb4faa169030186b4673eec8c938de9c","2016-05-02 11:51:11-06:00","Hygiene: remove redundant git ignore

Change-Id: Ie68a4d5b49280cb58a977b9b540bacb1d741b590
"
"bd95c39d4a2ce7f1bdc44a676eef9c8a09a87773","2016-04-25 11:08:52-04:00","Persist filename when adding page to a saved reading list

Persist the directory in which saved page content is saved so that the
saved page sync service can find it if/when the page or list is deleted.

Moved a couple of SavedPage methods useful to reading lists to FileUtil.

Also a bit of minor cleanup.

Change-Id: Ie86617751172b67bb452b04e8314a9422527a5f1
"
"87b690ab4ca9d6ce2aa67ef7d6922bd63d39e520","2016-05-04 15:57:04+00:00","Merge 'Persist filename when adding page to a saved reading list'
"
"058ed9cb5f4b77411f113cb31820e4a8687ee11a","2016-05-09 14:46:59-04:00","Workaround: Prevent OkHttpClient from opening an HTTP/2 connection

OkHttp does not play nicely with nginx over HTTP/2 and this is causing
our connection to fail when trying to log in or make an edit.

This workaround will fix our issue while Square works on resolving
https://github.com/square/okhttp/issues/2543 .

Bug: T134758
Bug: T134759
Change-Id: Ifc2ec3eb75e2e54b4789914f43ff9104f1ca11f9
"
"b942ea00e73f192b82a90402ee3a98c62de232f3","2016-05-09 13:07:53-06:00","Bump versionCode

Change-Id: If1353b1b8d4f483ce4dcf5fdc5b17b34dbc7c7b5
"
"a9f5ee054069a2857cab6fd62894ded6c24b9a18","2016-04-22 19:19:27-04:00","Implement background saved page syncing

Kicks off a service on app startup to check with the new Reading List
pages DAO for added or deleted entries.  Handles adding or deleting
accordingly.

Bug: T126753
Change-Id: Iae8e9e19fa4d774f590a85f238b1510bb5642878
"
"e5a1d265fd8ac240e3afe837c4ad17b8f0731bc1","2016-05-09 16:49:34-06:00","Hygiene: remove redundant URI parameter

AppContentProvider defaults notify to true for observers. This flag only
needs to be used when false. Also, rename from
WikipediaApp.FROM_READING_LIST_PAGE_OBSERVER to
AppContentProviderContract.NOTIFY since it's completely generic and
concerns contractors.

Change-Id: Ibc0c091689cb5278213227ff7858a7e91b6bb105
"
"b3a0321b17c1018094670abc9174df49c0de03df","2016-05-10 00:59:58+02:00","Localisation updates from https://translatewiki.net.

Change-Id: I01b25e7fe637485d8f7e387efc446882b5127600
"
"921afab330dd408fe38e31642fa4c8d75192a878","2016-04-26 16:07:00-06:00","Remove unneeded Retrofit Response parameter in callbacks

Getting ready to move to Retrofit2. This parameter was only used for logging the URL, which
can be already dynamically accomplished using Retrofit logging interceptors.

Change-Id: I2fa627bb5f79527bfc4c94ea58f3ae2f7f3be45b
"
"d42dd8a424da45e8bf8535beec7ba3964101452a","2016-04-27 15:15:33-06:00","Replace RetrofitError with Throwable

Getting ready to move to Retrofit2. We don't use any specific Retrofit functionality
in our failure callbacks. The Retrofit callback parameters will change once we move to Retrofit2.

Change-Id: Ib4956b302f7549e7d59083f4e8cf7ab9478f7e26
"
"9ae623ca71e2901af3707a2b053778fa77fd6305","2016-05-10 13:06:18+00:00","Merge 'Limit JSON Lint to app files'
"
"b7869a39e6c74f612136598b9f0029fac0d3a79c","2016-05-10 13:11:11+00:00","Merge 'Hygiene: remove redundant git ignore'
"
"852a1a1b11b7affea1c98e8af1fe8603f8e632b9","2016-05-10 13:23:19+00:00","Merge 'Hygiene: remove redundant URI parameter'
"
"1999ce0f96ab5d3354b13e8623cdfca224966764","2016-05-10 15:55:24+00:00","Merge 'Remove unneeded Retrofit Response parameter in callbacks'
"
"c27b9351b0ee85df53c5a9974ebe1266d432c293","2016-05-10 16:43:56+00:00","Merge 'Replace RetrofitError with Throwable'
"
"c0230890d31dc461eacb565ce4d9d64c4888985f","2016-04-15 10:46:52-04:00","Remove Saved Pages.

To be merged when the UI is fully integrated with the DAO(s).
This patch leaves the Saved Pages database table intact, so it's
independent of the patch that will implement the migration path from saved
pages to reading lists.

Change-Id: I2921d3dd935fa7babb9262c5da154d8e7cb38d36
"
"9a211538433a618fcd96bd72995eb1c82033c176","2016-05-04 09:53:50-06:00","Upgrade to Retrofit 2

Note that if you use Developer Settings for RetrofitLogLevel or any of the URI patterns the vlues may have to be updated.
The base URIs now have to end with a slash. For RetrofitLogLevel see the discussion of HttpLoggingInterceptor below.

A lot has changed in Retrofit land:
* RestAdapter was renamed to Retrofit.
* Interceptors have moved to OkHttp since the HTTP connection layer has been moved to OkHttp.
* HttpLoggingInterceptor does not have the HEADERS_AND_ARGS logging level anymore. FULL got renamed to BODY.
If you used one of those log level values before you will need to set a new level or you won't get logging since default is NONE.
* Slashes have moved in URIs. Base URIs should always end with a slash. Relative URLs usually not have a slash at the beginning.
* Using Call object to encapsulate request/response pairs.
* Same service interface for synchronous and asynchronous requests. Use execute for synchronous, enqueue for asynchronous requests.
* The callback methods for responses and failures have changed.
E.g. 400 HTTP code is included in onResponse. Have to check isSuccessful() there.
The callback method onFailure() only deals with exceptions, usually IOExceptions.
* HTTP headers in OkHttp only get replaced if a headers() builder is and its set() method is used.
(Executing addHeader() on an existing header, like User-Agent does nothing.)
* MockWebServer is now part of OkHttp3 and in a different package.
It also likes to use HttpUtl instead of URL. But fortunately, there is a convenient converter to URLs.

Additional changes:
* RestAdapterFactory was renamed to RetrofitFactory to match the rename of RestAdapter to Retrofit
* Introduced a retrofit package since we also have a few more classes to support Retrofit (RetrofitException, ...)

Further info:
* https://github.com/square/okhttp/wiki/Recipes
* https://futurestud.io/blog/retrofit-2-upgrade-guide-from-1-9

Change-Id: I0fd2fd9b9b800ac49dd28911591a85e7e01b57c9
"
"4cccd5a5688aa716dd4e7287234be23b8688d42e","2016-05-10 13:55:07-06:00","Hygiene: suppress unwanted lint

Change-Id: Ida51a88f1bdaa9f1e0369b69d76f0d6d14f44975
"
"bd095ca45c1c3ad72af9e336cfc5bc3c92b4966e","2016-05-10 13:57:55-06:00","More memory for build process

Gradle wants more memory and complains if it doesn't get at least 2GB.

Change-Id: Ieb0d8cba51fbf216f21b96a69fd990b759179537
"
"118f037905b6802fe9d7b1144828d5dc3a33701d","2016-05-10 13:33:02-06:00","Upgrade Android SDK Build Tools

Not many changes advertised:

http://developer.android.com/tools/revisions/build-tools.html

Change-Id: Ifad01f04ae209b351345ed73adc5773bcd647a32
"
"b5bb3a24d68d8cff5304e0b19b10d859f340b467","2016-05-10 20:28:00+00:00","Merge 'More memory for build process'
"
"dd2f26e2d04ba3d9a9ed19d6024c633bb5c6c6ad","2016-05-10 11:40:38-06:00","Log URLs by default in dev builds

This is slightly more verbose but is relevant to many changes,
especially for the Content Service.

Change-Id: I66094f3cce1907889021f681940a6fce0d1fbd52
"
"9cff5c5928c38976b3c7a926e19c296de5f7c9ca","2016-05-11 12:02:36-06:00","Update DefaultUserOptionDataClient for Retrofit2

Bug: T134936
Change-Id: I37e60cf9d584a3ca378c409c40d69c0b0ea77b51
"
"cd5f211bebb1d54c2b0dc009c12e671c714c3e44","2016-04-22 16:06:50-06:00","Add dev setting to disable site language code

Needed to test new authmanager test endpoint.

Change-Id: Id17567beeb7d55e17ec8dd23f803addb3caa5fdc
"
"14e5cd3d2e9513389e88feefeaacf31e34253593","2016-05-10 09:10:47-06:00","Update language list and templates

Approximately:

scripts/generate_wiki_languages.py &&
scripts/make-templates.py &&
mv \
FileAliasData.java \
MainPageNameData.java \
SpecialAliasData.java \
app/src/main/java/org/wikipedia/staticdata/ &&
mv languages_list.xml app/src/main/res/values/

Change-Id: I7831d82c8def8dbf113dcd93a1208ed8469acff7
"
"15c39040598c975540259820d0b9385a0164e3b5","2016-05-10 14:07:19-06:00","Hygiene: consolidate Site code

Very tiny DRY up in Site. No functional changes intended.

Change-Id: I0bc3df50464ae92db68fc34f597c23a3968513c6
"
"c56e8822f91fc298165d282fe492de1cdecc53dc","2016-05-12 13:41:04+00:00","Merge 'Hygiene: suppress unwanted lint'
"
"3d6c3c185055fb584ed5e5c7ebc16fc306b87e9c","2016-05-12 13:55:58+00:00","Merge 'Update language list and templates'
"
"4b070cfa9f32872ff0140a2a57d0746a47ac66da","2016-05-12 14:13:54+00:00","Merge 'Hygiene: consolidate Site code'
"
"601ea2b8f05a83d6850ab58dc7224dd4133b7dee","2016-05-12 14:33:02+00:00","Merge 'Add dev setting to disable site language code'
"
"acf0318a4aa7a84f19a2f4a04e2287fc27c5a8b7","2016-05-07 15:14:12+03:00","Added: action mode counter on History multiple selection (Google guideline)

Change-Id: I05eb88f8adffe88b0f3c9896ce4275582dcb4555
"
"89f47e58959e4ecba450297adbe6d1ffe2d23ccc","2016-05-12 15:59:39+00:00","Merge 'Added: action mode counter on History multiple selection (Google guideline)'
"
"f80964f08004c02225c92edf86dd40aa246e09ce","2016-05-12 17:42:25+00:00","Merge 'Update DefaultUserOptionDataClient for Retrofit2'
"
"38703e942e397c4a4363bb971c7b45995eef39d8","2016-05-12 11:52:51-06:00","Hygiene: add @NonNull annotation

Assume an English translation exists for File, Special, and Main pages
and add @NonNull annotation to valueFor. No functional changes intended.

Change-Id: I240f218a213e4290d0270552c3946a7dc9d88cf4
"
"72f465c77fefffd0fdb5dca7ce8128611496189a","2016-05-12 16:44:02-06:00","Fix cookies and user options

• The cookie jar was only being used for old Api requests. Use the
same OkHttpClient and cookie manager everywhere.

• HttpCookie.getDomain() now seems to return a top level domain like
wikipedia.org instead of en.wikipedia.org. This appears to affect
only the user option cookie loosening around meta.wikimedia.org.
Make the check slightly looser.

• There is a race condition with obtaining the edit token used to
preserve user options. For now, catch the error and handle it like a
network issue.

Change-Id: Ibf3985f1fcf0b349c9d8ec799adf8d2587d854a0
"
"ad4648ac6b68625662619e5d9dc3d207e4bac8ad","2016-05-11 22:20:20-04:00","Improve logic for storing and updating offline pages.

Previously, each page in a reading list would be marked as OUTDATED every
time it was upserted for any reason, which would cause unnecessary network
requests and disk writes.

This patch updates the logic to write the page to disk only once (when
it's added to a list), and then update the page only when the user visits
the page again while online.

Change-Id: I3d073a7788894e51e4f43f7a0cc64993beb85ae2
"
"08663170207e5cfea5e91d38c2a12cf7b2ccbbb9","2016-05-13 16:12:28+00:00","Merge 'Add styles for Parsoid images'
"
"7ae21ce4dea5d39066d80c9f44e995d4228cf7b5","2016-04-06 10:41:48-04:00","Don't widen images on metered connections

Adds a check for ConnectivityManagerCompat.isActiveNetworkMetered, which
reports if the user is likely to be sensitive to data use.  Only widens
images if not.

Incorporates CSS changes in MobileApp to add styles to center unwidened
images in Parsoid HTML.

Bug: T127015
Change-Id: I85697989455a937720555d064fd7f80aedd41ec2
"
"dbb816d60e4364b7f488ebaa0a5136d7130aefbd","2016-05-10 16:11:59-06:00","Upgrade Butter Knife to v8.0.1

https://github.com/JakeWharton/butterknife/blob/master/CHANGELOG.md#version-801-2016-04-27

Change-Id: Idf9a2e73f128f213bc2897017e86bc206c744831
"
"9a9bda3ad9e53e0b01cd273e3b46eefdf9852c0b","2016-05-13 17:31:25+00:00","Merge 'Upgrade Butter Knife to v8.0.1'
"
"ec717e9dfa779cbcd990d2ad3e36168f1e28d8fe","2016-05-10 16:24:44-06:00","Upgrade Spoon client to v1.5.3 & plugin to v1.1.0

https://github.com/square/spoon/blob/master/CHANGELOG.md#version-153-2016-05-09
https://github.com/stanfy/spoon-gradle-plugin/releases/tag/v1.1.0

Change-Id: I0dad91a47bd92a73028944ac4796607123b6d3fe
"
"742b48d20c887a25dce827e5a121cc82755303c4","2016-05-10 16:28:56-06:00","Upgrade Android Testing Support Libraries

Upgrade Espresso to v2.2.2 and Runner/Rules to v0.5.

https://google.github.io/android-testing-support-library/downloads/release-notes/#espresso-222-runnerrules-05-2016-02-22-silent-release

Change-Id: I17292ed4608ab3dc88e6774e5043fbb0b6cf08e9
"
"adfa2a5f3474d37ec13122d331bdb5816ebf36d3","2016-05-10 16:36:49-06:00","Upgrade HockeyApp to v4.0.1

Upgrade the HockeyApp SDK[0] and enable user metrics[1].

[0] https://github.com/bitstadium/HockeySDK-Android/releases/tag/4.0.1
[1] https://www.hockeyapp.net/features/user-metrics/

Change-Id: I595e77f5f9f3c88b8c7b8762788de62f0e137867
"
"1ecf2536f0f58058c060a21d4b57f6abf538d9e0","2016-05-10 16:38:25-06:00","Upgrade Fresco to v0.10.0

Now includes GIF support as a separate dependency[0]. WebP support
dropped since we don't support it on Commons[1].

[0] https://github.com/facebook/fresco/releases/tag/v0.10.0
[1] https://commons.wikimedia.org/wiki/Commons:File_types

Change-Id: I21533cdb9e022e2c5c75e323022aa9fc88631de0
"
"3e3923d2db0ef9bd1f259bcd1a4175d3f01533a7","2016-05-10 16:41:00-06:00","Enable progressive rendering of JPEGs

I haven't actually noticed a difference but it seems like a good thing
to enable.

Change-Id: I8cf52578d6ea08dc8e3b0a508f3c5fd6686ae45b
"
"236dcf5a172f291fb724b4bf394f0559ee1c7897","2016-05-11 16:11:50-06:00","Unbind Views on Fragment destruction

Add missing unbind() call in UserOptionRowFragment. From the docs[0]:

Fragments have a different view lifecycle than activities. When
binding a fragment in onCreateView, set the views to null in
onDestroyView. Butter Knife returns an Unbinder instance when you call
bind to do this for you. Call its unbind method in the appropriate
lifecycle callback.

[0] http://jakewharton.github.io/butterknife/#reset

Change-Id: If81cea985d1d4c93ac74cc1b289bd4c1fbd149a4
"
"72f3c2f2573c0e93be289c0dafc73919397d96cc","2016-05-10 13:52:31-06:00","Hygiene: remove dead code and resources

• Remove saved pages leftovers.
• Remove app store description. We haven't used these translations in
some time.
• Miscellaneous resource cleanup for Wikipedia Zero and network
errors.

Bug: T91971
Change-Id: Ibb15681e65ae3cd8dc02977d29cb90990402c754
"
"051ffe7de8a67dfb9babdab16c5e6913cf631511","2016-05-13 19:03:43+00:00","Merge 'Unbind Views on Fragment destruction'
"
"cb9fc7095d93e0f4345c6a650f8275c2eae7a790","2016-05-13 19:11:12+00:00","Merge 'Hygiene: remove dead code and resources'
"
"8710d8e4e577a2bec52e0c3eefffd54ea5aa9097","2016-05-13 20:28:54+00:00","Merge 'Improve logic for storing and updating offline pages.'
"
"e111b8bcc152bbbd77abf7995e38f76eb82de068","2016-05-15 17:54:22+01:00","Hygiene: Remove useless parent layouts

Change-Id: I95cdb44b67c8ef232d5bc65140942fde851d586a
"
"26baa2779c38af773705ba433ced20697c235501","2016-05-16 17:30:33+02:00","Localisation updates from https://translatewiki.net.

Change-Id: I779ee3406498f06d3d248aef0b638cfa3193d424
"
"2ec0be2ffaecf94226c18ec5b13ca17db46b9e68","2016-05-16 16:07:24+00:00","Merge 'Hygiene: Remove useless parent layouts'
"
"a6ab5b248d25511e5de115d319fa832e2ce519a8","2016-05-15 17:51:20+01:00","Hygiene: Fix 'Inefficient layout weight'

Change-Id: Iabed34b71f2b4da04500eb5c8a94dda3c6d20114
"
"98d6b21adf18cf1463a56e0541c97288f9e1668b","2016-05-16 15:04:33-04:00","Zero banner design tweaks

-Makes the zero banner much smaller
-Fixes message centering (on API 17+, at least)
-Makes use of FeedbackUtil.findBestView when constructing it so that the
text is not obscured by the software buttons on M+

Bug: T135310
Change-Id: I5b537c6f989693cfa8fb2fbcc661aa31244de340
"
"b44612727bf2ba878d4d8a2df0abb995f942c314","2016-05-13 14:18:23-06:00","Upgrade Android Support libraries to v23.4.0

Notes on the upgrade[0,1].

You may have to build twice initially to download the new library
dependencies. I think it's this bug[2] in the SDK Manager plugin.

[0] http://developer.android.com/tools/support-library/index.html#rev23-4-0
[1] https://medium.com/@chrisbanes/appcompat-v23-2-age-of-the-vectors-91cbafa87c88
[2] https://github.com/JakeWharton/sdk-manager-plugin/issues/101

Change-Id: I2c966a3066b9ceb873eec4bfa7053664e95f9fca
"
"a544d7aecce7eaf3a942d7f723cf8f467de97603","2016-05-16 12:12:33-04:00","Only check Wikipedia Zero state on page load

A Zero partner recently complained that the Zero on/off banner was
popping up erratically.  We think this was most likely due to an unstable
connectivity state causing rapid Zero on/off changes, with the zeroHandler
firing a notification snackbar each time.

This patch modifies WikipediaZeroHandler to no longer receive notice of
network state change events; rather, we'll just check Zero state on page
load.  This is a sufficiently fine-grained strategy for updating the Zero
chrome and should eliminate perceived banner jitters.

Also, some refactoring:
-Added @Nullable/@NonNull annotations as appropriate
-Broke out inline header change checks into separate method
-Use L logging class rather than Log

Bug: T135309
Change-Id: I5725e884e4165f844e5663db8fa055e163e279d4
"
"10fbcadedd9dba6e8b4c9a8e890e1d1998c346e7","2016-05-17 10:50:23-06:00","Fix crash when trying to save a page with a colon

• Request namespace in the MediaWiki page query. In the Content Service
and whenever the property is unavailable, continue to derive it. For
distinct namespace (not namespace localized name) logic, use
Namespace. The previous implementation attempted to convert the
localized name to a number which failed when the article's title
contained a colon.

• Move some of the legacy namespace code into the Namespace class for
reusability.

Bug: T135523
Change-Id: I0e858b5d456bad150b2ae3313acda1369bd7abb9
"
"bf3af027244206a3b4dd6ac8523cff7f785e92e6","2016-05-17 19:04:17+00:00","Merge 'Upgrade Android Support libraries to v23.4.0'
"
"92ba98f7a240ad49e27d98290a289a2460f0bfd3","2016-05-13 14:20:53-06:00","Hygiene: break layout into separate XML files

The Reading List onboarding is a static billboard experience and quite
independent. Break the onboarding out into a separate file and include
it instead. No functional changes intended.

Change-Id: Ia934894a91d4a7618b9c0efdb0144cd0667973ba
"
"eac33161b293ec10dabe71c433974564311cfa7c","2016-05-17 19:32:40+00:00","Merge 'Fix cookies and user options'
"
"4043ef5564b4d6e496eeba469aa99638964b39b9","2016-05-17 19:35:08+00:00","Merge 'Enable progressive rendering of JPEGs'
"
"283255c15bfb9d05c26ce5030a70c2f297524466","2016-05-17 18:28:17-04:00","Update BasePageLeadTest to reflect new page protection response format

As a result of T69054, the value of a lead response's 'protection' field
for an unprotected page is now an empty object rather than an empty array.
This updates BasePageLeadTest to reflect the same.

Change-Id: I2672066fd5dc8a279a5d877e2188943bbef7fec6
"
"37ed818bc36e4b906b60aa5c4003096774cdd73b","2016-05-17 17:03:58-06:00","Reimplement AsyncTask thread pool in SaneAsyncTask

Copy the AsyncTask AOSP implementation to prevent low OEM
implementations. Test failure scenario by setting CPU_COUNT and
QUEUE_SIZE to 1.

Bug: T135572
Change-Id: I2ad6804a776a69d3a1dd2674a7ff8fbfcba71186
"
"f7354bc798c5348c892095ffde6e8ed63ed76480","2016-05-19 13:16:12-04:00","Hygiene: Remove wildcard imports

Change-Id: Ic6b82ac64cd510bc8e3f5d24baa7640bbc5687a5
"
"0c0fbbe9718b788394eee9e98643457dbb81cb55","2016-04-20 17:11:26-04:00","Update login and account creation to work with AuthManager

This updates the app's API calls to work with changes to the API
associated with the launch of AuthManager.

This does not remove any code but rather detects whether AuthManager is
enabled for the app site so that login and account creation can be handled
appropriately.  When legacy login and account creation are disabled on all
Wikipedias, the code to handle them can be removed accordingly.

Bug: T124229
Change-Id: Idcb8c8c05a8fa8321ce7bc67d3b4bea6393419f8
"
"ff1f0ac47bae2361db2e6bbb815430d46c8e40f0","2016-05-10 14:15:15-06:00","Hygiene: consolidate URL usage

Rename new Wikipedia URL constant and replace duplicate string in Prefs.
No functional changes intended.

Change-Id: I794d7e37ed415d2f6d505c255e1f76882fc9dfc2
"
"9fb09eb423ec6620e348272547207d97f9111506","2016-05-19 09:57:07-06:00","Hygiene: remove protection unmarshaller

A follow up to 283255c, the custom protection deserialization logic is
no longer needed. Remove the unmarshaller and also give some light clean
up to the related tests so they use the default app Gson instance.

Bug: T135070
Change-Id: I2e58d7f068cdaec6f72d1a4aa6e9a4fa36f8be34
"
"ad56780841a10075fa726616a0305f5c4b8c3939","2016-05-19 10:21:40-06:00","Upgrade Mapbox to v4.0.1

https://github.com/mapbox/mapbox-gl-native/blob/master/platform/android/CHANGELOG.md#401

Change-Id: Ib33854bae0aab15f7275f57863471df39b359131
"
"9066ff393fb188629026586f6fcebc1150ed64bc","2016-05-19 11:00:46-06:00","Add authmanager to dev settings hints

We're doing lots of testing with authmanager. I can't remember the URL.
Note the setting in the mediaWikiBaseUri dialog text. We can remove it
later if the server disappears.

Change-Id: I7737eabc88e27f24b185a88e9c7263bb14623337
"
"fb82fb4e13ea7756a070cea858fb9aaf43af1a2b","2016-05-19 11:41:17-06:00","Add Feed nav drawer entry and dev setting

Add Feed navigation drawer entry, a developer toggle (defaults true for
dev flavor), and TODOs for missing tie ins. Text and icon are not final.

Bug: T129078
Change-Id: Ib30623d9b6980ffa07b0ce4051e552201dfd859a
"
"9ef870e78c66476eb2acf9423fe60d73a4c92ec8","2016-05-19 13:30:35-06:00","Hygiene: move Fragment callbacks into Fragments

Fragment callbacks are often tiny interfaces and not worth distinct
files. Roll the callbacks into their Fragments:

• FragmentCallback -> CallbackFragment.Callback

• CrashReportFragmentCallback -> CrashReportFragment.Callback

No functional changes intended.

Change-Id: If3d8f6b31d3ce61b9ddcf56b1185640eea512627
"
"31c5ab5d4882b0339d4d302418a8fcb383b2e1e9","2016-05-19 17:46:04-04:00","Minor post-API change patch cleanup

-Remove methods where implementation is identical to that in superclass
-Rename flag param from 'i' to 'flags' in Parcelable.writeToParcel impl's
-Remove unused method

Change-Id: I57f775ce0e74c437c7a8a663b2bfc1a2a8bb2622
"
"5cf03f5772757c68bbb3ea8b661e1be82922cea0","2016-05-20 15:38:12+00:00","Merge 'Fix crash when trying to save a page with a colon'
"
"e6bd7de9019ffd53fdedf70a5a562110f9009d61","2016-05-20 15:38:14+00:00","Merge 'Reimplement AsyncTask thread pool in SaneAsyncTask'
"
"39c3f7eb4fd4fb15cf8696100bd37423a6e507bc","2016-05-20 17:04:34+00:00","Merge 'Minor post-API change patch cleanup'
"
"5d858d652955eac609d5f19e2d98bf941c3ca66c","2016-05-20 20:49:22+00:00","Merge 'Add Feed nav drawer entry and dev setting'
"
"eb539eeb94b22c1228d5aa87fdaf103df7d28626","2016-05-20 20:49:25+00:00","Merge 'Hygiene: move Fragment callbacks into Fragments'
"
"4af8726591f085ff5ff31912886d266a9b1d227d","2016-05-20 22:05:01+00:00","Merge 'Hygiene: remove protection unmarshaller'
"
"826736205fe5b3b845dcdd99b8f103837bf94acb","2016-05-20 22:05:03+00:00","Merge 'Upgrade Mapbox to v4.0.1'
"
"7c002620fe62abae2f2fb5719c7df579be62390c","2016-05-20 10:11:16-06:00","Abort relaunch when a crash loop is detected

Don't attempt to launch the crash report Activity when the current boot
sequence never made it to any UI. In these cases, fallback to default
Android behavior (terminate the current Activity and show the previous
Activity in the stack, if any).

Bug: T135854
Change-Id: I6276dd32ccd3b22c54f0063949ca7480eed3db33
"
"5c81538b37d55b3ddfedaf8c5178e52a0c1e5d1c","2016-05-23 18:21:29+02:00","Localisation updates from https://translatewiki.net.

Change-Id: Id45e89fc9b5e3bc984e5e14bca5e4d856a03aa8f
"
"3884abbe4f8c3d6cad79eb45b29e8717a031b0d8","2016-05-23 17:58:32+00:00","Merge 'Abort relaunch when a crash loop is detected'
"
"f6dfa6bea8ac813906a74da91764b758d3f23413","2016-05-23 12:42:35-06:00","Bump versionCode

Change-Id: Iadde693612ea984c492deec71eae89c63b08d29f
"
"8dde181434f4d79dfda3161b18816d67ad3c9fb2","2016-05-23 16:39:57-04:00","Add a small artificial delay after saving an edit.

After an edit is saved in the app, the change on the server side is not
immediate, and takes a few moments to start appearing in the response when
fetching the page content again.

Until this is fixed on the server side, we can work around it by forcing a
short delay right after a successful edit, before we attempt to read back
the updated page content.

Bug: T132803
Change-Id: I56758654aa5dd6890eb397de139140600c45bdbe
"
"2369851598d1fd29e5844ddb3917d83519803898","2016-05-23 15:35:30-06:00","Fix exception type thrown

A follow up to 72f465c, change the exception type thrown to the one
expected.

Bug: T136037
Change-Id: If1b4146731a571d2461d37850c9f27e503094b67
"
"6eda3ce004c2622480fba1709fe3ad13c1bc9ebe","2016-05-23 16:20:26-06:00","Upgrade version minor hardcodes to v2.2.x

Change-Id: Iff90b6418553e2ef12c17f2024b1ea4445e72280
"
"5eb9439ee8b68cd9eb9b2d1280a864bf6ad578cb","2016-05-23 23:06:34+00:00","Merge 'Fix exception type thrown'
"
"7a6c4bf4604247f7632a381bf1c860a18a01de26","2016-05-23 23:32:27+00:00","Merge 'Upgrade version minor hardcodes to v2.2.x'
"
"5095e5f5b68608aaad0da105ce31cc678a2718fd","2016-05-23 18:26:36-06:00","Bump versionCode

Change-Id: I596b8241c5519a9626c51688f476950b7bec06d9
"
