"commit id","commit date","commit message"
"e17e0db7ef7c507e0f9aff4e955ace0892f18ddb","2014-03-05 17:52:23-08:00","MPD: Remove null conditional, will never be null.
"
"7db0e981a1800b6406c6bdf01b6c7df0e4789c93","2014-03-06 06:06:10-08:00","MPD: Collapse redundant exception blocks.
"
"bbecd0f60e9b0084a6cc7cbfcb6b290a1c31a9ab","2014-03-06 07:04:42-08:00","MPDPlaylist: Remove invalid suppression.
"
"7831356d41b9df29a9302e4daca9b5af25e15a83","2014-03-06 08:54:39-08:00","dmix: Convert to project standard line endings.
"
"56856357a3a56be7cf3b12b0fa94adb89dc66323","2014-03-06 16:53:44-08:00","StringComparators: Removed unused conditional.
"
"1ed2713b018fb720b2a684c06b3d43d54d001c73","2014-03-06 17:59:33-08:00","MPDConnection: Create string array of correct size when using toArray().

When toArray() is called on a Collection object with a zero-length array
argument, the toArray() method has to construct a new array of the right
size using reflection, which is significantly expensive.
"
"a74a7dd6594a743364df836603c223296012e1ab","2014-03-06 18:18:46-08:00","CachedMPD: Create string array of correct size when invoking toArray().

When toArray() is called on a Collection object with a zero-length array
argument, the toArray() method has to construct a new array of the right
size using reflection, which is significantly expensive.
"
"d8beff40306269735f34995f6113691597af2537","2014-03-06 18:21:36-08:00","MPDConnectionHandler: Remove redundant toString() calls.
"
"7454d490867691da780f3fb8ecb0e9fe6784ffe3","2014-03-06 18:30:29-08:00","dmix: Use chained append() calls to *Builder rather than concatation.

Chained append calls tend to be less expensive than string concatation in a
*Builder argument.
"
"5fecdc3d549a62219d48862795a9ba29e027df8a","2014-03-06 18:44:53-08:00","dmix: Use equals() for string comparison.
"
"423661dba8059260ef7db587a1f7b421641fbffd","2014-03-06 19:11:34-08:00","MPDroid: Remove redundant 'extends Object'.
"
"dc234fa11797b15b7b7882441a1f9e4cd25fc9e4","2014-03-06 19:13:01-08:00","MPDroid: Remove unnecessary semicolons.
"
"5e13958435c41049ee2a47ed84453073a9888246","2014-03-06 19:19:28-08:00","MPDroid: Remove unnecessary returns.
"
"68420c48314536d8e49aae41e6d717c19e9206b8","2014-03-06 19:36:00-08:00","MainMenuActivity: Convert boolean return to void since it always returns true.
"
"f90a177a11f211b85288fd2e9020a0e333fa5b98","2014-03-06 20:57:20-08:00","Music: Prevent fullpath from being used before initialization.

this.fullpath was being used before initialization and construction. Pushed
some isStream() code into the file conditional, name will be named by stream
if applicable.
"
"00878e2f000c90e1d329b23031fab62d9ae9367f","2014-03-06 21:08:26-08:00","strings: Replace ... with ellipsis.
"
"163dfafcfbbb59e81a1758fe59d0a1acd2f9e59b","2014-03-06 21:14:11-08:00","Notification: Use string resources over hardcoded text.
"
"f8e0a26965454f1e3274481daf7e4cd80f8c4c32","2014-03-06 21:20:43-08:00","MPDroid: Fill in a couple of missing contentDescriptions.
"
"222ef6ba648f74caa1ec1f462c0784e51949c84f","2014-03-07 04:28:11-08:00","dmix: Remove final assignment to private methods.
"
"2dae62a4b8e5d6327670f90f8282582453bc6205","2014-03-07 04:39:24-08:00","MPDroid: Replace System.*.println with applicable Log.d entries.
"
"8c66c136f7e6f101d869ece3e1c8da89d427d32e","2014-03-07 04:58:54-08:00","MPDroid: Remove redundant casts.
"
"3bdee841b03ec7259602c6d02972fe06a121fdae","2014-03-07 06:27:12-08:00","dmix: Spelling corrections.
"
"32bb566d0d871571a4af923a78f9a0617e58a3f2","2014-03-07 06:46:17-08:00","MPD: Create string array of correct size when using toArray().

When toArray() is called on a Collection object with a zero-length array
argument, the toArray() method has to construct a new array of the right
size using reflection, which is significantly expensive.
"
"8e06abe4b066be8fddbe9733d3b1e46984a72c67","2014-03-06 05:53:57-08:00","dmix: Simplify redundant boolean conditionals.
"
"b308782b14319a4a9a478821606aae5011180527","2014-03-07 09:46:07-08:00","dmix: Fix a bunch of docbook errors.
"
"b075dbddc182975a1842d7fed29529c47fbdae4a","2014-03-06 19:21:46-08:00","dmix: Remove redundant local variables.
"
"794d12a3f4352163aae12225fd1d2025200964fa","2014-03-06 16:42:07-08:00","JMPDComm: Remove and document unused conditionals.
"
"d5f147af78401d9c387a3109eee185d1df2a72ea","2014-03-06 15:40:11-08:00","dmix: Remove redundant boolean conditionals.
"
"8ad45e483304f9446557c354a2a13674345f806a","2014-03-06 19:06:31-08:00","dmix: Remove redundant initializers.
"
"92e7e3bfb8c2a7bf3f7245ab29f4d741e79fc98c","2014-03-06 18:39:46-08:00","dmix: Remove unused imports.
"
"ef29ec6765010ad5f7ed0fec4f296968b16815d8","2014-03-07 08:27:07-08:00","MPDroid: Resource cleanup.
"
"798cbcc83e63f4098baf093087a7366366619109","2014-03-08 14:14:14+01:00","Merge pull request #491 from avuton/next

Cleanups & Fixes
"
"5042de763e38c99281b112a477218d302eb3f5df","2014-03-04 18:38:27+01:00","Fix tablet bug with small now playing fragment
"
"f70611cdddd992ab6decc5c1a631934eb0a97d2e","2014-03-08 17:10:50+01:00","Android Studio 0.5.1

Bump Gradle tools version
"
"4ce47a038f2fc17e2bba8899dbdf01675232cee7","2014-03-08 07:12:02-08:00","cover: Abstract out HTTP status code checking.

Also, AS took this opportunity to optimize imports.
"
"144f7046c6335fc7da47cbe0618bc14447bf6bb8","2014-03-08 20:15:09-08:00","AbstractWebCover: Move the URL build out of executeGetRequestWithConnection().

Obviously, AS took this opportunity to optimize the imports of CoverManager
as well.
"
"184de3ff94cd73c85400fe6fd0ce23f60545ee4e","2014-03-09 08:10:03-07:00","cover: Move HTTP connection building to it's own method.
"
"5def92021aba96680d111a519c0013a35a4d0d13","2014-03-09 08:34:46-07:00","cover: Check the status code directly after requesting it.
"
"22d6d89c9dad1e8f099e32ce20ad6012d4138d5b","2014-03-09 08:46:22-07:00","cover: Add a new method to check url status by connection, rather than status.
"
"03bd8e4ba324db2a1a9b1939edc54906c19b1eb9","2014-03-09 09:13:27-07:00","cover: Use getInputStream() inline where it makes sense.

Also, remove the inputStream.close(), this will get replaced by bis/br
close methods.
"
"3b43497b3183e914fc04a11aa7645eef77e2ce6f","2014-03-09 10:54:59-07:00","cover: Initialize the result with null, don't return early.

Avoid early returns when it makes sense, makes things easier to read and less
bug prone.
"
"da32c3a914a2f26df78f5cf44e0242538d9e7520","2014-03-09 10:58:38-07:00","AbstractWebCover: Try to close the BufferedReader in final().
"
"074204a21e8d8789073e8fb553ecd7a0b0e67667","2014-03-09 11:04:02-07:00","AbstractWebCover: Simplify while loop for reading.
"
"842d4e82f6ec5b9abf8e4e51efb80c76ceac7214","2014-03-09 14:33:58-07:00","CoverManager: Properly close resources after use.
"
"f7242d945e7690354a4259bc2427b2af93c30d48","2014-03-09 18:14:41-07:00","AbstractWebCover: Make sure httpPost/httpGet exist before isAborted().
"
"9950448705fd83e0d25c5626b93cc919363b1383","2014-03-10 09:03:56-07:00","AbstractWebCover: Move client to the method where it's used and finalize there.
"
"9cdb1a888af531e9bf88f777f5c3951bbe2c2263","2014-03-10 09:07:06-07:00","AbstractWebCover: HttpGet doesn't throw anything, refactor the method.

Despite what the documentation (old?) says, the interface doesn't say anything
about HttpGet throwing anything.
"
"f2fcd5d21f6fabf4f384621bc8b5ef436432a748","2014-03-11 11:36:06-07:00","NowPlaying*: Avoid MPDConnectionException when starting or resuming.

When starting or resuming MPD isn't connected, and when MPDroid tries
to grab the status, an MPDConnectionException is emitted. This returns
false in updateTrackInfoAsync.doInBackground() when not connected; it
gets called again after a connection is established.
"
"730f14866b6b6741192e7a2dc2824416e7b5d81a","2014-03-11 11:48:27-07:00","NowPlaying*: Clean up the doInBackground() method flow.
"
"c9b77176be0aa523a6c301eff245792ede104ff3","2014-03-11 21:27:06+01:00","Merge pull request #495 from avuton/next

Cover connection cleanup
"
"798555b10d6a64014cce2b0af8686b03598db649","2014-03-11 17:45:17-07:00","NowPlaying*Fragment: Revert the changes to NowPlaying* to fix NPE bug.
"
"26c3d237c053fa973684647d29d2fc976af1245f","2014-03-12 10:14:12+01:00","Merge pull request #496 from avuton/master

NowPlaying*Fragment: Revert the changes to NowPlaying* to fix NPE bug.
"
"4afeefae9ca91cccc819f61f163b4b37d45c236f","2014-03-12 10:14:12+01:00","Merge pull request #496 from avuton/master

NowPlaying*Fragment: Revert the changes to NowPlaying* to fix NPE bug.
"
"55029f961cca7ba0af0261982094813e69885106","2014-03-11 18:44:09-07:00","MPDStatusMonitor: Fix MPDStatusMonitor.trackChanged() for consume mode.

Turns out that MPDStatusMonitor.trackChanged() only worked when the number of
the song in relation to the current playlist queue changed (the songPos).
Without manual user intervention, the songPos will never iterate once consume
mode is entered. This patch changes the behaviour to use songId to trigger a
trackChanged() event instead. trackChanged() will continue to pass the
songPos to listeners.
"
"674331d8dedb6609bafe7abb6cb5172707226dc0","2014-03-12 08:00:04-07:00","MPDStatusMonitor: Add brackets to single line for statements.
"
"8e34de731456accf3f6dc340cc5a1b80d53bd793","2014-03-14 20:18:04-07:00","Notification/Streaming: Reformat the code.

Begin by reformatting the code. Somehow it appears Android Studio likes
tweaking the code style every so often. This will make it more coherant as
the changes come.
"
"897af7707594f42ec3d4a28b0856c5a147117a78","2014-03-18 14:28:15-07:00","NotificationService: Convert a list of conditionals into a switch statement.
"
"fd9c5b0459f5e8d42cef33471472bc8c71ac8ff1","2014-03-18 13:24:49-07:00","NotificationService: Cleanup simple threaded MPD commands.
"
"148461d7d35486b6405a301aa6fd1e9d49c89de9","2014-03-18 14:52:28-07:00","NotificationService: Use local methods rather than intents.
"
"e2770f2524c52ac2d1c38d9e714cb23bd2b15340","2014-03-18 15:55:26-07:00","NotificationService: Clean up getApplication() use.
"
"b6c8c1f12ff78a6e5068dd3f9c935da0041db31b","2014-03-14 21:58:19-07:00","MPDroid: Replace StreamingService's notification service w/NotificationService.

Add an intent to communicate from StreamingService to NotificationService about
buffering, streaming and notification. This just disables the code in
StreamingService for now. This commit should keep the same behaviours of the
old notification and removes the old code.
"
"1f380a324f7b401196d3306db8ec730f07a8acbb","2014-03-15 05:35:19-07:00","MPDroid: Remove RemoteControlClient from StreamingService.
"
"2912ca4b50667756d21a9edce91534408423229e","2014-03-15 05:38:29-07:00","MPDroid: Remove MediaButtonReceiver from StreamingService.
"
"f176d0f60683dd3221631b5b3fc0a6df1c4952b1","2014-03-29 13:56:31-07:00","StreamingService: Comment updates
"
"49d15a1141d8db5a186f70c2b1073c71106afe3a","2014-03-29 14:04:17-07:00","StreamingService: Move the END_STREAMING notification to onDestroy().
"
"14540a4e176a1263ab8c087cad58abadd93d1334","2014-03-29 14:06:54-07:00","StreamingService: Remove JMPDComm listeners onDestroy().
"
"4da110f3e619bb8270873891cbaf49dddc5c74bc","2014-03-29 14:14:00-07:00","StreamingService: Clean up getApplication use.
"
"2804ee4e8eb4de7ad1f9a8087d46e305a4a335af","2014-03-29 14:14:31-07:00","StreamingService: Add logging of each method run.
"
"e803e7fcc266cc0044e97ab52962d1ce3f94e71b","2014-03-29 14:17:26-07:00","StreamingService: Turn streamingMode off once.

It occured twice, in onDestroy() and die(), when die() was called.
"
"3372146b243e2a036fb73cb098b0d00553f90ba5","2014-03-15 06:01:31-07:00","StreamingService: Fix: 'Mediaplayer went away with unhandled events.'

Before mediaPlayer.release(), mediaPlayer.reset() is required.
"
"2ed471cd6968099f0fee98e9294c000cb93e59f6","2014-03-29 14:25:06-07:00","StreamingService: Cleanup the delayedHandler in onDestroy().
"
"f0ac40dafe6c1e2c0bfe46e9f04823c9167219a7","2014-03-16 06:16:09-07:00","StreamingService: Store and use local variable for intent.getAction().
"
"24129a2f4403abc1bcf091cd426fed43aa3d5539","2014-03-17 06:54:30-07:00","MPDroid: Move start buffering intent from StreamingService to MMA.
"
"975c0c8a2b682cc28a73d0bae14d83067bf2c2d2","2014-03-17 09:43:42-07:00","StreamingService: Remove OnBufferingUpdateListener and OnInfoListener.

OnBufferingUpdateListener never worked in our use case. From what I read in
the Android documentation, the percentage value is given on dependance of
where the stream ends. MPD's streaming should never end, thus this is
useless in our use case.

OnInfoListener is completely broken, see Android Issue #42767.

This commit also orders the implemented class declaration.
"
"9993e2b179f349d573984efa46d5e4093e8b2945","2014-03-17 09:59:20-07:00","StreamingService: Remove buffer status, replaced later.

This will be replaced later.
"
"7ad23e0d982410d9d20abfeb48dbb44128a4a72e","2014-03-18 06:19:44-07:00","StreamingService: Simplify mediaPlayer try block.

Simplify the mediaPlayer try block to what needs to be in it.
"
"e3c31850b27aefa7429289231de93a429ba9695c","2014-03-18 06:30:12-07:00","StreamingService: Remove unlikely MediaPlayer crash response.

If this is still a problem, this needs reimplementation and documenting.
"
"6073033fbedcd1519a4d63f603ab1191554d9a27","2014-03-29 15:05:39-07:00","MPDroid: Change some typed strings to static fields.
"
"6a4dc1e7c98fffeec306c6893181526ca8bec7eb","2014-03-18 10:47:24-07:00","StreamingService: Add method documentation.
"
"d70e8ca65ed7f86f4e816f9abe9e788e44a18743","2014-03-19 06:48:58-07:00","StreamingService: Remove getStreamingServiceStatus().
"
"d333d0ff2dc72f33f6e73222ce9fb6b9486f898d","2014-03-20 19:48:01-07:00","StreamingService: Add a workaround for streaming errors.

With MediaPlayer, there is a racy bug which affects, minimally, Android KitKat
and lower. If mediaPlayer.prepareAsync() is called too soon after
mediaPlayer.setDataSource(), and after a mediaPlayer.reset has been completed,
general and non-specific errors are usually emitted for the first few 100
milliseconds.

Sometimes, these errors result in nagging Log errors, sometimes these errors
result in unrecoverable errors.

This patch sets up a handler which sets up a 1.5 second delay between
mediaPlayer.setDataSource() and mediaPlayer.AsyncPrepare() whether first play
after service start or not.

This patch also removes older custom code paths to workaround this problem.
"
"07ae6a35f0067244667de5a6f81af7a84035ed9f","2014-03-22 06:12:40-07:00","StreamingService: Don't allow streamingService to be called while preparing.
"
"3d1bd950f77acc85e3675d62e851ffdc5dd45052","2014-03-22 06:14:52-07:00","StreamingService: Reset the stream onError().
"
"84f8b350e34389cc7e6880517d7d602c68eae2e4","2014-03-22 06:16:57-07:00","NowPlayingFragment: Don't control StreamingService by Intent.
"
"2eadc04c838380f43a52cc5955c4788e5f4df25f","2014-03-22 08:24:44-07:00","*Service: Privatize all methods and fields not used externally.

Because these are services, they're never going to be instantatiated. It's a good
idea to privatize all this stuff so intentions are known to readers and the
compiler.
"
"ed5aec20792861934e56dfe26598e4a2eb10c735","2014-03-22 08:27:28-07:00","StreamingService: Replace pauseStreaming() with stopStreaming().

In our use case pauseStreaming() doesn't really make sense, and would need
to be reimplemented even if it did.
"
"ad722facf9791f028a2029ad09c2bf74906b9cd7","2014-03-22 08:32:20-07:00","StreamingService: On prev and next MPD calls don't disturb stream.

The stream continues from MPD on previous and next calls. If it does not
with Icecast, or this is generally unacceptable, it should be reimplemented
as a workaround from a callback.
"
"7ca052f33b292cdba94e27f9170193926a891e1a","2014-03-22 08:39:19-07:00","StreamingService: Only stop mediaPlayer when cleaning up if not playing.
"
"522fc3d3ce887fae2bba3a2d8edcbd616b6ede70","2014-03-22 09:04:47-07:00","MPDroid: Send intent to NotificationService when buffering begins.
"
"26c35f76397c32842258580780dd8120172e34b0","2014-03-29 15:50:17-07:00","NotificationService: Remove mPreviousState.

It causes an NPE and its unused except for logs.
"
"620d8817fca3534a7f774b002aad884b783d7fee","2014-03-29 15:58:35-07:00","StreamingService: Replace stop() with stopStreaming().
"
"8617f6000176ca2b62aafc16a6eaf18fd375899d","2014-03-22 10:11:32-07:00","RemoteControlReceiver: Prevent a couple of NPEs.
"
"29b628b56e14837c7090ff4b86bea3367f6582cc","2014-03-22 18:24:39-07:00","StreamingService: Set isPlaying() dynamically.
"
"607c5db294f9d33aed64ce794a1bab10dc454707","2014-03-22 18:27:15-07:00","StreamingService: Remove unused commands to be moved to NotificationService.
"
"ae12da4b8217a397249077097047c147b1ef1780","2014-03-22 18:28:34-07:00","StreamingService: onError() don't attempt to beginStreaming if not playing.
"
"4806094339823d107d13ff91d994d0042872f424","2014-03-22 18:31:53-07:00","StreamingService: Only allow mediaPlayer.stop if mediaPlayer.isPlaying().
"
"b3562e5fdbd896ae9e1faa7499f7bbec069f7c6a","2014-03-22 19:14:49-07:00","StreamingService: Refactor onCallStateChanged().
"
"440518ec5f76e6c0aee449272fe8abdc19cc1480","2014-03-22 21:33:00-07:00","NotificationService: Remove audio focus code.
"
"fdb8a107ae9ad1897287a1c6ba66f63c032244b5","2014-03-22 22:12:30-07:00","MPDroid: Clean up intents and their final static fields.
"
"b9ca5720ecca820f3c1fc3db85c69e8a98771fcc","2014-03-23 07:15:37-07:00","StreamingService: Wind up and down resources dynamically.
"
"2096b1c9b07002485cfd31912325e1984a6c16ad","2014-03-23 08:14:20-07:00","NotificationService: Don't allow the streaming notification control to reset.
"
"cf10aff24a67c68b6fdbbbbf53722b2010bc579f","2014-03-23 14:45:09-07:00","StreamingService: More robust error handling.

It's not perfect, but one error every now and again is common, any more than
that we start spamming the Android Log and after so many die.
"
"75e4026b8dd77baffec2e972d9c52c81b24a272f","2014-03-23 15:55:52-07:00","StreamingService: Move all stream stopping to windDownResources/stopStreaming.
"
"87f04984d7b04f5543c0d3b2592a7f9104416e61","2014-03-23 16:17:21-07:00","StreamingService: onCompletion if playing, restart streaming.

If MPD is restarted, JMPDComm's listeners won't be called, but onCompletion()
will, so if we get to onCompletion() and MPD is still playing, restart the
stream.
"
"b4c19102f64d18fd2bcb7baa30b2701aef74da6e","2014-03-23 17:20:44-07:00","*Service: Documentation update.
"
"f5c22034736ede5fb0faf1b68d553a67ea6f7745","2014-03-29 16:52:34-07:00","StreamingService: Clean up beginStreaming()'s catch block.
"
"154c039233725c401b14b565d6a8c23aa9e25c77","2014-03-24 06:53:20-07:00","StreamingService: When it makes sense, use one return.
"
"b118c13628f8d87d9152ca14934f1e661e7dff51","2014-03-24 16:21:56-07:00","MainMenuActivity: Clean up the streaming intents.
"
"45f94840db95ad1d6d1ea638fa2f71b5830bd280","2014-03-24 17:09:18-07:00","StreamingService: Don't call onCreate/onDestroy service super classes.

They're empty.
"
"cd32ffb67c735b495d72b7fb65c882db04c886fc","2014-03-24 17:09:39-07:00","StreamingService: Remove die(), onDestroy works, use selfStop() from here on.
"
"833615d9d8a4dc11e3e0a78f375bedf1098a13ef","2014-03-29 19:10:52-07:00","StreamingService: Remove unused prevMpdState(s).
"
"c8b7fe361b198f08056b284545b9e8de414dfd7a","2014-03-24 19:55:29-07:00","StreamingService: No need to call stopSelf() in phoneStateListener.
"
"11b75aa1202229f1d9c8cf3fce8bf3154c2cc09c","2014-03-24 20:38:53-07:00","NotificationService: Remove many of the superfluous relaxResources calls.

All relaxResources were called just prior to stopSelf() which is a
direct call to onDestroy() which had relaxResources in it. Moved the
contents of relaxResources to onDestroy and we'll let it get called when
stopSelf() is called.
"
"1324e1c01c4f2a8fd86158622e3d42c5d655e493","2014-03-24 21:32:03-07:00","NotificationService: Make Notification main menu context item checkable.

Make NotificationService clickable. This also includes some code to disable
clicking when StreamingMode is enabled.
"
"aca6192bc5fc77fb497d8afb03665aa832239737","2014-03-25 06:27:23-07:00","NotificationService: Dead code cleanup.
"
"eb4d16a5dedb5aa671b053fe5f1f53073ec14909","2014-03-25 06:40:28-07:00","NotificationService: Remove unused EXTRA_CURRENT_MUSIC parcelable.

Remove unused EXTRA_CURRENT_MUSIC which in turn makes processUpdateInfo()
useless, remove processUpdateInfo and replace all of them with
updatePlayingInfo().
"
"8f6fe2f96fff99dc58af4a5bd0a2a92582e8f073","2014-03-25 06:52:08-07:00","NotificationService: updatePlayingInfo() cleanup.

This cleans up the updatePlayingInfo() block, including initialization of
coverArtPath, which could easily throw an exception and lack initialization. This
removes the superfluous else call, as the if has a stopSelf(). This also shrinks
the scope of the try{}catch.
"
"f3e285607fe83e4b6dc88ebbd2eb2fe096afbc7e","2014-03-25 07:03:12-07:00","NotificationService: 'this' is an acceptable substitute for Service context.

Using the 'this' keyword is already resolved and prevents getting an NPE from
getApplicationContext.
"
"bc317c5aa0541876b07f7c53d098af1d78824f47","2014-03-25 07:20:33-07:00","NotificationService: Remove mCurrentMusic from Log of updatePlayingInfo().

Remove mCurrentMusic from the Log.d of updatePlayingInfo. It can cause an NPE if
updatePlayingInfo() is called too early in the application start.
"
"7dca251c9dd3a884cd03a4ece4ee00e075126d39","2014-03-25 14:41:22-07:00","NotificationService: Fix notification startup status.
"
"888dd93522331d954c9ee10d1d73ba3ba2149840","2014-03-27 07:20:24-07:00","NotificationService: Reimplement the AudioFocusHelper.

Reimplement the AudioFocusHelper. It's very much a WIP, which doesn't take
StreamingService into account.
"
"58129c8965baa2b3dc7a8b58f72bbf8e4dfab240","2014-03-25 16:39:01-07:00","NotificationService: Clean up the StreamingService conditionals.
"
"5a2a1bff542ae1225a5f7306303ed159f7b383a0","2014-03-25 16:40:24-07:00","NotificationService: Fix the aggressive bitmap recycling.

This pushes the bitmap recycling to occur directly before the new one is
generated. It also checks to see if we're using the same cover, and if
so we don't regenerate it.
"
"bee89c9bc7ebefc72aa6d9016933d48124092e61","2014-03-25 20:18:22-07:00","NotificationService: If streamingMode is enabled, notification should persist.

This also includes a layout update, the original layout was incompatible with
the media/close buttons disappearing with View.GONE, this was fixed.
"
"c2b00fb6cb7abe3dc2fec6859405b6201bfcf080","2014-03-26 14:56:38-07:00","NotificationService: Use fuzzy dimensions for the bitmap resizing.

We absolutely, do not want to create two bitmaps to get a perfect bitmap.
"
"49abbe312b9b054213b5a7898c07ae66f851d196","2014-03-26 17:06:23-07:00","NotificationService: Break the bitmap stuff into dedicated methods.
"
"f6793abee62c6162e7291d48515c79df839e0c2f","2014-03-26 17:33:21-07:00","NotificationService: Modify updatePlayingInfo to take mpdStatus as an argument.
"
"2c674d52ab88a983931afd50e037e2983e71fb3d","2014-03-26 17:36:19-07:00","NotificationService: stopSelf() in stateChanged().

stopSelf() was originally occuring in updatePlayingInfo() which is no longer
the logical place for it.
"
"7b7a04d1f13bc2c92cb91b579993255959508fc2","2014-03-26 19:50:48-07:00","MainMenuActivity: Stop services manually before System.exit().

The parent of these services should probably call onDestroy automatically,
but System.exit() is a bit of a hard stop-kill.
"
"9c5d7c7d8c441cecabc0f22534fc0628152bdccf","2014-03-27 11:58:02-07:00","MPDroid: Fix some warnings.
"
"7a1dc1e817f386fda8ce99fc4dbb4722fccf8619","2014-03-28 05:58:03-07:00","MPDroid: Don't check if playing if sending a play command.

I see no advantage to checking for playing if sending a play command. It does
nothing at the server side.
"
"847caa79194872513891ec957f47e65374df158e","2014-03-28 07:23:46-07:00","NotificationService: Don't toggle on play pause button hit.

An updated status is available at notification update, use it rather than
calling toggle.
"
"b99ef90fb02f43988335fcb3cb931af1ac531844","2014-03-28 12:00:27-07:00","NotificationService: Build and store static pending intents.

Rather than rebuilding pending intents every update, build and store them
until next use.
"
"b31a5d8bcfbf8a2c8e764a18a55e3ea447b4cbc9","2014-03-28 12:19:17-07:00","NotificationService: Remove duplicate code from build*Notification.
"
"f0fda3bf6b471395179bd343fd8ac9cc01b8314c","2014-03-28 17:43:28-07:00","MPDroid: Remove listeners after complete.
"
"d17de94ae6e47cdc17400a660555575228441512","2014-03-30 09:02:03-07:00","NotificationLayout: Tweak the big notification text size.

This fixes issue #447.
"
"c864e40e607fb12bca7950326a1b66f9a954d624","2014-03-30 18:01:09-07:00","StreamingService: Raise the idle delay before StreamingService shutdown.

This raises the idle delay to 3.5 minutes, this is probably reasonably
long enough for anyone who wants to pause their audio and come back to
it.
"
"33bf3e09c5f75a0d94c15945916988f2d02366f2","2014-03-30 18:37:19-07:00","NotificationService: If idle for 10 minutes shut down.

This is pretty flexible, Notification is very nice to have, but it would be
kind of annoying to find it up and running if the user came back to their
device after a long period and it was still running.
"
"a05e13a1df1dbb028b8a1511713b31b406675360","2014-03-30 18:44:26-07:00","StreamingService: Remove prevMpdState, it's unused.
"
"34783438f470607cd16155882b5d9eef9fc934f3","2014-03-30 21:43:15-07:00","NotificationService: Stop occurs in onStatusChange, remove this duplicate.
"
"a228507770375c2f82ac26fdfb735622154e6612","2014-03-31 05:39:55-07:00","NotificationService: More documentation.
"
"db9a2682d63f8d7b91e104de5ca62631bbaf71c3","2014-03-31 07:20:10-07:00","NotificationService: Move the mediaButtonRegistration to onCreate().

We only need to do this once.
"
"3e17b621693bd194672da7fb8820a9b54285cd74","2014-03-31 13:47:11-07:00","NotificationService: Another updateNoitification() cleanup.

This cleanup changes updateNotification to setupNotification, to be more
representative of what it accomplishes.

This also moves more of the collapsed/expanded notification stuff to the
applicable method, along with more generalized cleanups.
"
"32d424e3364f3002d5f028d32703123b9dcfd97d","2014-03-31 16:10:14-07:00","NotificaitonService: Move more collapsed notification to a static method.
"
"eb8d5dbb7f5a29619ae0136afd941db987c7866b","2014-04-01 17:46:23-07:00","StreamingService: Improved delayed message handler handling.

With this commit this brings a third (and hopefully final) Handler object.
We now have one to stop the service after a predeterimined amount of time,
one which winds down the resources after a predetermined amount of time and
one to handle the workaround described in an earlier commit.
"
"0adabfea95b81d9f3e6037f5c424ab4d7f54fc2d","2014-04-02 08:26:36-07:00","StreamingService: Clean up beginStreaming().
"
"e7b582ee73e2c53914bc75e7bfcdeda678ae3ffe","2014-04-01 06:15:04-07:00","StreamingService: Fix interruptions errors during MediaPlayer preparation.

Fix problems introduced by MPD status change interruptions during MediaPlayer
preparation.
"
"fd09734f681d4d8e418e9467bc5b545188584d9d","2014-04-02 20:20:26-07:00","NotificationService: Reorganize the StreamingService switch.

This patch reorganizes the StreamingService switch so we can remove a bit of
duplicate code and reset the mediaPlayerServiceIsBuffering bool.
"
"1ecf361e2f12392fa69d551dedb65eeea2314e5f","2014-04-03 06:08:39-07:00","StreamingService: Retrieve the stream source dynamically.
"
"b3fde6e05e01c3537d7fba9f174b34f67f2fd9ac","2014-04-03 06:24:38-07:00","StreamingService: After stopSelf() return will never be executed.
"
"bd0091d10214e8fa8a01a584962593262bc97135","2014-04-03 17:05:04-07:00","StreamingService: Remove ConnectionListener (due to lack of use).
"
"3fd39fd238b3858281a8f9d766d4e76067965176","2014-04-03 17:21:12-07:00","Strings: Show Notification -> Notification

Apologies in advance if it's bad form to modify translations that
are not native for me, I did my best, along with Google Translate.

I think the MainMenu should say 'Notification' alone, I think it's
obvious and on my tiny phone it takes up more real estate than
necessary.
"
"a81f683c75301dc5a34583f4e2c1a435e6fa5cd7","2014-04-03 19:08:46-07:00","*Service: Make difference StreamServ sleep and stop in NotificationService.

Differentiate between StreamingService sleeping and StreamingService sending
Notification stop (in the case it was the opener).
"
"89d8ae48febe5d89e01f22090119bfcc8bdce99e","2014-04-04 07:08:07-07:00","NotificationService: Add more metadata information for RemoteControlClient.

The older version of StreamingService had more metadata which was updated into
RemoteControlClient, add all that here.
"
"d403f56fa5af1f19c8e54fa11902eedd16500d1e","2014-04-04 07:29:04-07:00","NotificationService: Add buffering and stop to the list of usable RCC states.
"
"4cf54c2c01fdab1121da85908f4a492a43a9765a","2014-04-04 07:32:13-07:00","NotificationService: If there is no title, use a filename.

Not the greatest option in the world, but it's better than /nothing/.
"
"4a4413d3295ebb916ff1992ef3d51c93aae40c3f","2014-04-05 12:45:28+02:00","Merge pull request #512 from avuton/next

Streaming and Notification Service.
"
"a368ff46b95d58831fb4315ec0842898cd67f8ca","2014-04-06 13:03:06+02:00","Fix play queue sliding pager setting wrong window title. Refs #509
"
"81bbaa0445d636dea849d65d753964c438401d09","2014-04-06 13:07:36+02:00","Pressing back from any other mode than Mode.LIBRARY brings you back to the library instead of closing the app. Fixes #514
"
"c90e5fe69973e2321d98688a1e597b7208256756","2014-04-06 13:09:17+02:00","Update korean translation
"
"e6bb03a00c40bea998334970cd96083517233422","2014-04-06 14:41:21+02:00","We now acquire a wake lock when streaming. Even if mediaplayer maybe takes one itself, it's great to have our own. Finally fixes #216
"
"72bbccbf790a311136057e9caa83eac9a989eeb2","2014-04-06 15:11:44+02:00","Hide 'Save' and 'Clear' from the now playing menu if not on the play queue
"
"a047e61cd16d5b66115d67ff3343fa9ed5427d47","2014-04-06 10:01:38-07:00","StreamingService: Wind down resources immediately after streaming.

Wind down resources immediately after streaming. A handler was set up initially
to allow the stream to come back up after a short period and to keep the
notification up for that short period but with the newer code that's
unnecessary.
"
"5d91665f07394f501e0ced9b09419e65ac5333a0","2014-04-06 20:20:07-07:00","NotificationService: onTrackChange() is never called with a blank playlist.
"
"94ccb17c8c38cc466587781ead8719015c68bf85","2014-04-06 20:21:00-07:00","NotificationService: onStatusChange(), if blank playlist stop the notification.

It makes sense to stop or hide the notification if there is nothing in the
playlist as this will require manual user interaction.
"
"bbd8d82f5d73022dd815597080f2d1eb2744bc04","2014-04-06 20:41:53-07:00","StreamingService: At playlist completion, let onCompletion() handle stream end.

If the last song ends and the playlist is going to have a length of 0,
using onStateChange() will cut the final song off early due to buffering.
Instead, now check to see if the playlist is blank on stop and if so ignore
it and it will be handled in onComletion().
"
"b0f379017084619e4ef50c71b5c9d89900c536bd","2014-04-06 20:48:57-07:00","StreamingService: We're not an instance of Activity, skip to addConnectionLock.
"
"6ac810cde0be9039f7acf9633a6ccd83ca3c2124","2014-04-06 20:50:29-07:00","StreamingService: Replace stopStreaming() with windDownResources().

stopStreaming got to a place where it was basically a call to
windDownResources()  with a intent call, and it makes sense for that intent
call to happen as an argument of windDownResources.
"
"49230d8bab3b24f57a903bafabf446192892dcfc","2014-04-07 07:36:17-07:00","StreamingService: Replace getName call with TAG.

I'm not sure why, but this call was giving AS a error/warning, probably an AS
bug, but not a big deal to replace with TAG here.
"
"ac59f0f4455a89e84e3aa32328620d723c10aece","2014-04-07 19:43:24+02:00","Merge pull request #515 from avuton/next

Some pre-beta improvements
"
"779d42a038fc51dcf946b00813f264ed7347e3ab","2014-04-07 19:48:45+02:00","Bump build tools version
"
"9049c89468f6c684815a0f028d10889a2223062d","2014-04-07 20:15:57+02:00","1.07 Beta 5
"
