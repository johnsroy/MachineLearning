"commit id","commit date","commit message"
"58eabb6a5fdafed605fcb0cd8f56dbcea8723d46","2004-12-14 22:59:00+00:00","Switched HEAD to 0.8.0-CVS (did I miss any spots?

svn-id: r16048
"
"502b279d243d79f46bb8a151ae610949d30bf757","2004-12-15 00:24:12+00:00","Patch #1081904 ITE: MAC demo support

o Endianness-aware resource loading
o Removed ys_dl_list in favor of our object implementation
o Cleanup in actor code
o Partial support for ITE Mac rereleased demo

svn-id: r16051
"
"75ac1363b36158bfab3c51a5b9aafec85ea54d4e","2004-12-15 00:25:46+00:00","Update SAGA items.

svn-id: r16052
"
"2308ba8aafcd4d9f4f1ef7c0281177455c8e3e14","2004-12-15 06:48:08+00:00","moved compacts and related static data out of the scummvm.exe into an external file
(available from www.lavosspawn.de/tmp/sky_cpt.zip)

svn-id: r16053
"
"949824ef43fb1c31a1c634c85ffb23a15eba9028","2004-12-15 09:58:21+00:00","New man page.

svn-id: r16054
"
"376ea672f175ded04b468f3f130eae138b95542e","2004-12-15 10:03:37+00:00","Make music driver section more readable.
Alphabetically order the list of drivers as well.

svn-id: r16056
"
"a15c5104aebaa9d689df1c32755ed09455406be8","2004-12-15 11:06:14+00:00","compilation fix

svn-id: r16058
"
"2bf74ffd35ff43c3e2f88d1f443791d2df770265","2004-12-15 12:12:57+00:00","Forgot to remove ys_dl_list.o

svn-id: r16059
"
"2909c8fff6febf736ebddaf11fc5f40276cc3e5d","2004-12-15 12:30:58+00:00","- Move MAXPATHLEN includes/defines into common location
- Save files are now stored in $HOME/.scummvm/ by default if no other
save path is specified on non MacOS X unices.

svn-id: r16060
"
"8ce9683bca5a6d534460540ca14586475ebd7e20","2004-12-15 20:11:39+00:00","Fix warning

svn-id: r16061
"
"eae8e5cbc753b858e514be345b382cc606806dac","2004-12-15 20:22:52+00:00","fix compilation (under mingw/gcc3.4)

svn-id: r16062
"
"c878e6cc4dedaf1ef5fc7a082ad245fcada93059","2004-12-15 20:25:50+00:00","memory leak

svn-id: r16063
"
"a1934c99c6c7dd59731dc8f6c944017cf39e9551","2004-12-15 23:52:45+00:00","Typo

svn-id: r16067
"
"69925e32814895c1b8a03f36ce94d29a353a8ed3","2004-12-16 02:19:10+00:00","fix gcc warnings

svn-id: r16068
"
"b1443df54466b87c14c409f95042b11c8790e91d","2004-12-16 03:13:00+00:00","Update HE games

svn-id: r16070
"
"8c5a1aa034edf6005aaf4e65a71c9fd5e2036dd3","2004-12-16 04:22:32+00:00","some cleanup

svn-id: r16071
"
"e7f44ab3db1e47f01c719cb01b7fe76301d45b0e","2004-12-16 05:27:10+00:00","fix for bug #897777 (Foster walks on water...) and #788858 (Walk glitch)

svn-id: r16072
"
"adbe2b8c49111e0d80a3a9e2890e7817e48ec60c","2004-12-16 06:10:11+00:00","added some debugging functions

svn-id: r16074
"
"e6ea45bd227193b39f44432c2acf2ee917313180","2004-12-16 10:06:43+00:00","fix escaping the intro on BE systems

svn-id: r16075
"
"e39bec5419e5478ecf260a2f92f8ce148f0bae81","2004-12-16 10:58:50+00:00","Removed unused variable.

svn-id: r16076
"
"55549cd3b2415b5b5d7b7a66223c39fa25446116","2004-12-16 12:49:25+00:00","Split simon.cpp more for PalmOS port.

svn-id: r16078
"
"5029e9aaae2a8d1b033f2ef38c7ad28d0e1b180f","2004-12-16 15:27:21+00:00","Fix compilation when USE_MPEG2 is undefined.

svn-id: r16081
"
"881b60a8ebb7d361e7772ec5aa485f7f0047adfb","2004-12-16 16:37:16+00:00","Added some BS1 items, but I don't know if I got them all. (E.g. there
seems to be A slight change to the scrolling. Do we want to mention that?)

svn-id: r16084
"
"ea80946978cf6406e0bf10f475788269e5ab4400","2004-12-16 19:18:17+00:00","Using errno isn't really portable; don't have time to fix this properly right now

svn-id: r16086
"
"c1810c8de24cfb05b825f45f24ca7a880dc0a375","2004-12-16 20:49:17+00:00","reorderUp and reorderDown should return new item position

svn-id: r16087
"
"af5996f99a674fd5416770f25f196fdb2f5873ad","2004-12-16 21:30:06+00:00","trying remove CRLF

svn-id: r16088
"
"13a4006b691529fc00612234e88d73bfcef8787d","2004-12-16 21:33:58+00:00","Proper fix for line endings.

svn-id: r16089
"
"642b5e703bb9373192ce64866c9d2f720cb545de","2004-12-16 22:05:45+00:00","Patch #1086705 (RISC OS cross compiling support)

svn-id: r16090
"
"a3228a435847af58fb6957361d8e314d419e55f3","2004-12-16 22:15:32+00:00","configure was using at least three different indention styles (4-tabs; 2-spaces; 4-spaces-8-tabs); tried to unify this, configure is no best viewed with tabs=4 like the rest of ScummVM

svn-id: r16091
"
"c61894ee6540d83b3a431da00cc67a624bbdf83c","2004-12-17 07:59:05+00:00","This file no longer needs to include <errno.h>, and from what I understand
we already got the appropriate include for time() through stdafx.h, so we
don't need to include <time.h> either.

svn-id: r16093
"
"28e5422fd88e91bf8005ac290d5a36e8ba6a5b19","2004-12-17 11:18:56+00:00","actors rearrangement bugfix

svn-id: r16094
"
"5f04dfe0b9b9b40aec648c9f469f6a4cfb8d1009","2004-12-17 13:14:13+00:00","Mute speech for floppy version as well.
This fixes the text speed for the floppy version after the recent Talk/Speech behaviour changes.

svn-id: r16095
"
"356b11aae7d00732856e4c6c5921bf91eeb74a44","2004-12-17 13:49:54+00:00","Don't allow the user to enable speech for non-talkie versions.

svn-id: r16097
"
"3c006a97a7885c14d0a64c4b6a8dbb3a5fdc640a","2004-12-17 13:54:17+00:00","Simplify check.

svn-id: r16099
"
"fd0569af62bb7e8f367d1e6e366cc998cd3bb2c5","2004-12-17 16:49:31+00:00","Even more paranoia, since the older ScummVM releases allowed speech_mute to be false for floppy versions.

svn-id: r16101
"
"79ce4de9423797abb768657942e6af425a2e84ea","2004-12-17 20:38:17+00:00","- all actors creates on start
- many parts renamed to proper names

regression: unexpected actor apeared while intro is played

svn-id: r16104
"
"b93dd59a44f73f744bbf3d0d60e0ce509667eccc","2004-12-17 22:27:15+00:00","Reduce code size of resource.cpp to help PalmOS port, by moving util code to a new file util.cpp and sound resource code to sound.cpp

svn-id: r16105
"
"0ceb634fd4f0ccac5012ed7db61f131b814b7a3b","2004-12-18 01:33:21+00:00","constify simon engine; turned global var vc_get_out_of_code into a member of class SimonEngine

svn-id: r16106
"
"06315c1ce1cc8fbf2d05637603d27f6dbc6c0cf2","2004-12-18 02:08:32+00:00","A little more cleanup (the Simon code really is a big mess :-)

svn-id: r16107
"
"0894f8380436a7ae5bd3b55c1d58e576fb4fd597","2004-12-18 02:33:37+00:00","Ensure that the file list in the browser is always sorted

svn-id: r16108
"
"8c34db8b9ae2ae9d992b46f72a9605f1b919893c","2004-12-18 02:37:13+00:00","oops

svn-id: r16110
"
"f344976a350f1edd6b95d80d30a4cc9146e7a7d9","2004-12-18 11:07:47+00:00","Default save path for OS X as well.

svn-id: r16112
"
"6dfb2f2dfd60fcc4beccb5013ae2bbd9eed736ad","2004-12-18 11:07:52+00:00","Fix for bug #1087439 (Volume control regression)

svn-id: r16113
"
"7a35da58404f5c9104e375470e3c57181d59bcbe","2004-12-18 11:12:33+00:00","Mixer TODOs

svn-id: r16115
"
"c195ae0e74fee2d7e22b8df68eae20073abd139b","2004-12-18 11:28:39+00:00","This is done now.

svn-id: r16116
"
"1724d009628f169ccb9bbfc94bd72e5301169fc8","2004-12-18 16:08:59+00:00","sprite loading fix in win demo

svn-id: r16119
"
"4b632e66ae3330b03799dc2b712a4c290896a03e","2004-12-18 16:38:44+00:00","Disable mouse emulation code

svn-id: r16120
"
"f33fc1d7ec21197bc74d5581ab669c0d4e2140b4","2004-12-18 17:19:56+00:00","Adding some TODOs

svn-id: r16121
"
"62224e135b8e788564ef49676b790ca651b95fcd","2004-12-18 20:33:02+00:00","- updating actors state so they can be clipped on drawing (intro now runs without artefact)
- order list now uses only in draw section
- drawList rename to drawActors

svn-id: r16122
"
"34dd84f339851e06ac8f389ba7a9621890a84bf1","2004-12-18 21:38:56+00:00","now actors will not stuck in the middle of dialog

svn-id: r16123
"
"4e057c8885ce5dfcb8a9964f9247531a391dd341","2004-12-19 02:25:11+00:00","Report unknown MD5's. I wonder, should we move the check after
initSize() and thus have possibility to show up a window with the
message?

svn-id: r16124
"
"9e4f76b180b2f369b238d618e7aebc57010f6a41","2004-12-19 09:27:08+00:00","Off by one

svn-id: r16127
"
"739828391e1d6944ff97473e585de4c0550372d2","2004-12-19 11:02:14+00:00","Correct range

svn-id: r16129
"
"ec2099a9020e341d9cc23cb2a9cb8c14e8bc8703","2004-12-19 12:19:21+00:00","Fixed regression in queen floppy version. Before doing any speech/texts synchronization, we check the voice sfx exists. See also patch #1087870

svn-id: r16131
"
"da874257a50f82150ae475c3938e3422d6fa4984","2004-12-19 12:30:40+00:00","to please PalmOS, I moved the _wiz member to ScummEngine_v70he, where it actually belongs, I don't quite like the upcasts I introduced, but I don't know how to deal without them

svn-id: r16132
"
"9d6b4c3088025a2b2a4f5635aeb996bbcc586d89","2004-12-19 12:46:12+00:00","oops

svn-id: r16133
"
"3f55bee1991d1932ab019b972bd2f128d164753a","2004-12-19 13:38:11+00:00","- implemented perspective actors calculation

TODO: decodeRLESprite must do scale

svn-id: r16135
"
"f1750f7c0436a938387793977f700081500807b5","2004-12-19 15:42:59+00:00","Patch #1087890 (README corrections)

svn-id: r16136
"
"b892b8b04e87ff6016eba198b6bf99dc0100b102","2004-12-19 16:59:01+00:00","This is done

svn-id: r16138
"
"054d341449fce06a6654c4e6a42657b320cd1619","2004-12-19 19:17:43+00:00","Fancy about dialog

svn-id: r16140
"
"b59d02baa37ac6dfdbd5230de28eb87f1d3b0b24","2004-12-19 23:50:25+00:00","_sev asked me to add myself, so I have done.

svn-id: r16141
"
"91e114c9d5b17a1c4d798d962a3e5a438db903fb","2004-12-19 23:54:35+00:00","Oops, having a bit of an identity crisis.

svn-id: r16142
"
"fdfa5346836cedfda54f182e9b20d50fff77bcd4","2004-12-20 00:00:01+00:00","Tab->Spaces.

svn-id: r16143
"
"5f2f85f573c874e5739baab1c0fa76b45fc48665","2004-12-20 00:08:38+00:00","Adding KingGuppy to about dialog, too

svn-id: r16144
"
"0e8d9b58d9c3586df5bbd2926c2485cef3054eb0","2004-12-20 00:31:17+00:00","typo

svn-id: r16145
"
"a01abe894275dd55cb121b122f6776f54977a978","2004-12-20 00:37:20+00:00","added coordinates clipping to ScummFont::drawChar(), this should make valgrind happy when displaying the about window.

svn-id: r16147
"
"59d1b6ba804f19c7b88f725e1fb017b4343883fc","2004-12-20 00:55:15+00:00","consistency

svn-id: r16149
"
"cfe94b029396c925da5eb524d4f283092bc56565","2004-12-20 01:16:31+00:00","Additional cleanup

svn-id: r16150
"
"b474062e6ea2f61cd6e1235a076fa383c5f23f18","2004-12-20 01:19:21+00:00","sync with README

svn-id: r16152
"
"0ed00210101f1e4576723b78c71e43f40602b125","2004-12-20 01:24:04+00:00","use a ref here

svn-id: r16153
"
"eeebc76f25cc74910cb0c28d19a93c2cc0ed0fe2","2004-12-20 11:48:14+00:00","Added AUTHORS file

svn-id: r16155
"
"a159f2cb76ce9d2c2050ec9291fbf4250c2dbf75","2004-12-20 12:00:21+00:00","Add AUTHORS to win32 dist

svn-id: r16159
"
"2919f4e11ed01cb8cb003aebbc47fc46ddd60c9b","2004-12-20 12:39:54+00:00","Added check to prevent queueing invalid songs, and thus reading OOB...

svn-id: r16160
"
"67f803224c0b8ecde3fa8a27fc0be3c1baf7799c","2004-12-20 16:45:17+00:00","Move this too

svn-id: r16162
"
"5950a2346eabaa6759b77cf2d2ea099e43a26a7e","2004-12-20 16:48:49+00:00","- Change mouse position on click
- Remove timimg code which slow down PalmOS port

svn-id: r16163
"
"f9d9484d7be4fc5cd14f28e866ce35ff79a2df97","2004-12-20 16:50:29+00:00","Moved to a database to save memory on PalmOS

svn-id: r16164
"
"099f5de891917f433f5cdf4304bb68a9a7f479db","2004-12-20 16:55:55+00:00","Speedup a bit PalmOS port

svn-id: r16165
"
"1184e19657ce740a22cf85c242d249580679f4ce","2004-12-20 16:59:43+00:00","Use a draw function instead of a preinit one

svn-id: r16166
"
"318631a0945db609d88bc930e99e376fa50804ba","2004-12-20 17:00:50+00:00","Use the new draw parameter instead

svn-id: r16167
"
"486082cce4fbee64f23df351fa40adcc348608b9","2004-12-20 17:05:56+00:00","- Added Sword1 and Sky constant data
- Cleanup

svn-id: r16168
"
"effc4430b3d4e1a2a1c04eb363f1d5b783489c48","2004-12-20 17:10:53+00:00","Prevent conflict with the new OSystem enum

svn-id: r16169
"
"05efaf26185e8b7cba40045cc78f9c37525ea688","2004-12-20 17:13:26+00:00","- Better ARM support
- Cleanup

svn-id: r16170
"
"93566af78c6aca465b37755af9f8166e0b60c6b7","2004-12-20 17:15:25+00:00","Forgot those files

svn-id: r16171
"
"b009d0852fb8639d7d446bc9e801ee5fd6813767","2004-12-20 17:20:37+00:00","Added Sky support

svn-id: r16172
"
"374c427c61b258cf85fbbc2ad76674c62ce2ce4e","2004-12-20 17:22:30+00:00","Cleanup

svn-id: r16173
"
"7a4f4889a907cdc3adba60b38e03a148c075e92f","2004-12-20 17:38:31+00:00","- Better ARM support

svn-id: r16174
"
"1b90a2ef6bc341373a553918dd8dbdaef5fe1a50","2004-12-20 17:40:44+00:00","Added more compilation options

svn-id: r16175
"
"6fddbdbb73f5ce01a24fdfdc850483165724885c","2004-12-20 17:42:02+00:00","Updated resource file

svn-id: r16176
"
"0fc0c8787bbdfb33aa487cbe4ff573f5de77531e","2004-12-20 19:19:50+00:00","Updated resource files

svn-id: r16188
"
"b33e42f7046fd11f25257b0c5551a39b03342eac","2004-12-20 19:22:59+00:00","Ooops

svn-id: r16189
"
"6011e305516d7b3fdeed5cc96ffcbcc6dace3dea","2004-12-20 21:06:08+00:00","Added AUTHORS in some more places

svn-id: r16192
"
"023962d1e80b34ccf9fd43fa1e1aaa3425065737","2004-12-20 21:12:54+00:00","Small tweak to get rid of a warning on systems where type uint is not equal to uint32

svn-id: r16194
"
"6142cd95db5e9e257aebfef5f3b2a78f3a6a8879","2004-12-20 22:02:20+00:00","Updated, cleaned up, and unified the credits

svn-id: r16197
"
"179e70ea9ced29b07130651a37ebad0b318e5aff","2004-12-20 22:06:03+00:00","Add in FLAC support

svn-id: r16200
"
"c6065d450ffbdf87bcdea4ae8828b6fd74fd217c","2004-12-20 22:54:20+00:00","cast fix, hopefully this helps PalmOS

svn-id: r16201
"
"3aabdeb6825690f58d8ecd0065cf734d9defb8c0","2004-12-20 23:10:54+00:00","Document default save directories.

svn-id: r16205
"
"54d0384b0e213396ca93760112d3251b60fa6ae8","2004-12-20 23:27:47+00:00","sync HEAD/0.7.0 versions of the NEWS file; mention new about dialog

svn-id: r16212
"
"347815cdaee6f7207bb40692aa8727952496ff58","2004-12-20 23:52:16+00:00","Re-add Smartphone support (sorry for the year lag :p)

svn-id: r16215
"
"38c1b61759d019cbfa6dcc55cff163a9314c12a1","2004-12-20 23:52:51+00:00","Fix assert

svn-id: r16216
"
"4e497117bd4c5a3376a6edb45a0c76f1398daa88","2004-12-20 23:55:31+00:00","Add common include needed by WinCE

svn-id: r16217
"
"c741d06504c0d02cca88eb11dec5733036d749a9","2004-12-20 23:57:21+00:00","CE workaround - skipping the movie is better than crashing if the LUT cannot be allocated

svn-id: r16218
"
"486e71117328eb6a3b9a889672ffbb33b749dbf5","2004-12-20 23:58:40+00:00","WinCE global domains are not needed anymore

svn-id: r16219
"
"1bd0c66715f4229059f2eb586455e68bff0b3128","2004-12-21 00:00:34+00:00","WinCE workaround to limit issues if the decoding is too slow

svn-id: r16220
"
"22aac69fe5c3ef2f719c5348ef85510513191eea","2004-12-21 00:31:58+00:00","Cleanup mouseclick emulation (and make the new about dialog happy)

svn-id: r16222
"
"8d2c8c9ddf46de01517e7fb57c48de3eb1391ed4","2004-12-21 00:59:40+00:00","After 0.7.0 we gotta cleanup backends/midi

svn-id: r16223
"
"c08cd03c3f8a066699222d289e20f3f72a0f76c1","2004-12-21 01:13:14+00:00","It's Mac OS X, not MacOS X (OTOH it's MacOS 9 -- yeah, a bit confusing, but that's life ;-)

svn-id: r16224
"
"c4191434884a32704b9150fdb4a0a4080c771631","2004-12-21 02:07:40+00:00","Update rescumm FAQ once 0.7.0 is out

svn-id: r16226
"
"ae21c99bad196c685ca3c8b0bbdf83984c636192","2004-12-21 02:12:58+00:00","Added Russian narration message.

svn-id: r16227
"
"accfa675aa9928d166e47d1f15323293a40e52bc","2004-12-21 04:04:17+00:00","Remove unwanted space.

svn-id: r16229
"
"4f044039e465edb6bf645920427b69b0ee69b75a","2004-12-21 04:38:26+00:00","_HEV7ActorPalette doesn't need to be saved.

svn-id: r16231
"
"3cd3ac503034c51d84640480564d14651220599c","2004-12-21 05:24:36+00:00","Missed line

svn-id: r16232
"
"4ecd5edab608eaf53614f94772349606393fb210","2004-12-21 05:55:03+00:00","Sync HE100

svn-id: r16234
"
"e81daf78403c75eb6219dee53136df91132ef01a","2004-12-21 05:57:36+00:00","Unused var

svn-id: r16235
"
"ad0b8f1de57e0c217831a60c6d0c93f2d22b2cde","2004-12-21 06:09:40+00:00","Unused includes

svn-id: r16236
"
"ea3b0d11003dbf297b99d22905363df0b24c2f85","2004-12-21 06:49:07+00:00","- rewritten actors speech engine :
1) there are three types of speech: one acor, multiple actor, non actor
2) slow speech implemented
3) uses native engine flags (async,noanimate...) instead of semaphores
- proper timings implemented

svn-id: r16237
"
"f48acb0bc63dcf88ab80171866be207c905e5859","2004-12-21 08:02:35+00:00","Added TODO item about our overly memory-hungry MPEG player.

svn-id: r16238
"
"839fc0df8398a719e46e572252021b6f16cdd93e","2004-12-21 08:03:32+00:00","Fixed warning.

svn-id: r16239
"
"412df729a2dfe0dd9f45bf024f87b91af5039dd3","2004-12-21 10:30:49+00:00","- some fixes for previous commit (incrementation of sampleResourceId)
- previous commit also introduce sound speech of first scene in ITE DOS version

svn-id: r16240
"
"418c5f847303f7d177d953e35ea64ec8ed22acf7","2004-12-21 13:26:50+00:00","Change order of close()'ing and delete'ing _driver and _parser; fixes bug #1088441

svn-id: r16241
"
"118cc4d2552844622b633223c3677a4eafd0275e","2004-12-21 16:08:14+00:00","no need to updateScreen() if there are no screen blocks marked as dirty

svn-id: r16243
"
"c6c2ed9c484ada25bad4861e52495592620718c9","2004-12-21 16:12:03+00:00","Implement sprites scaling. Though it seems too zealous for me, i.e. sprites
scale down too fast. Will compare it with original soon.

svn-id: r16244
"
"1520024586ed746e7d92d5ce8585d3b6b6bc657b","2004-12-21 16:15:11+00:00","Add another SAGA item

svn-id: r16245
"
"f3c60df7ad506245e2d0ea800035dc160b97116a","2004-12-21 23:59:51+00:00","Update CE specific FAQ

svn-id: r16248
"
"47e120f8b15d0aaa29ab40685cda66c6d6e0bc58","2004-12-22 00:05:43+00:00","Update CE related stuff a bit

svn-id: r16249
"
"e04238d364cb599cced5b1b41067b062b9972d40","2004-12-22 00:17:50+00:00","whitespace fix

svn-id: r16250
"
"9b8933dd5d92f104630e82265e22b5b057f83b83","2004-12-22 00:30:45+00:00","Add Simon todo

svn-id: r16252
"
"c8d302847e1832b110a1d88d5dd7a7a8946f1676","2004-12-22 01:07:13+00:00","Moved credits into a separate file

svn-id: r16253
"
"eaa0f3b9740b81fff59792de55f335c149344c69","2004-12-22 01:46:40+00:00","Wrote a perl script which generates AUTHORS, credits.h, and credits.inc from a single source

svn-id: r16256
"
"2fb8a8e45369b000b9f36d2433425ca48f6d9d13","2004-12-22 13:09:47+00:00","o Moved GAME_* to SagaEngine object
o Renamed GAME_ITE_* to GID_ITE_*
o Renamed GID_ITE and GID_IHNM to GType_ITE and GType_IHNM

svn-id: r16258
"
"7606a53f09a06f33fb5953c55bf3b488d6f5119a","2004-12-22 13:34:28+00:00","Now it is possible to count MD5 only for specified amount of bytes from file.
It is useful for MD5'ing hunge files.

svn-id: r16259
"
"fd09e3c71cf5bf3e14ccc01b2f21fe9d6a4982c4","2004-12-22 19:07:49+00:00","G*oe*ffringmann; word case fix

svn-id: r16261
"
"ab4734dcf60d8f06786cbdd382a7a83ca962103a","2004-12-22 19:34:41+00:00","o Fix regression with Mac versions
o Normalize GIDs and GTypes
o Introduce MD5-based game detection. Now only 2 games should be ordered.
Linux demo should go before Win32 newer demo
o Fix sound in Mac versions

svn-id: r16262
"
"3d9784f94d3bc6c425d3180e59d322ab715e6306","2004-12-22 21:04:50+00:00","- rewriten actors action handling (now uses all original flags etc)
- added some script functions (swapactors...)
- many things were renamed according scummvm covention
- resource id definintions should begin with 'RID_' prefix

- intro temporary broken - work in progress
todo:
- walking hanling also should be rewriten
- timings for speech and actor cycling should be more accurate

svn-id: r16263
"
"9942dc55d0891be4c5398c713278b884f1fda16e","2004-12-22 22:52:20+00:00","sdata.cpp not needed anymore

svn-id: r16264
"
"b4e9a4b92f971d74895473c9f6825ba3f6e24962","2004-12-23 01:15:27+00:00","Add Zone key support for Smartphones. Last commit for today

svn-id: r16266
"
"4dad8cd5ba618bf8b8c334ed529fd43973ded683","2004-12-23 03:02:09+00:00","Release is schedulde for the 24th...

svn-id: r16269
"
"929537cecb331098cb62336ee8c2573a3ed4e4da","2004-12-23 03:07:43+00:00","devtools related TODOs

svn-id: r16270
"
"88b0fb396a1c147418f4a0ce396f32e0cf86898f","2004-12-23 04:59:44+00:00","songs > 1000 are special commands which shouldn't be ignored. fixes a rather nasty regression in fotaq.

svn-id: r16272
"
"344d33c901ad98e5f00b5b1255d7c5b9011f3617","2004-12-23 07:08:22+00:00","o Lowercased all filenames for better readability
o Merged in windows demos files lists
o Added Linux CD target. Someone (erik?) please provide md5 of first
5000 bytes of that file

svn-id: r16273
"
"da3aaf55b33e45b301bdc2ce988d1d352bc526b5","2004-12-23 19:32:25+00:00","Add GPL blurb to the about dialog

svn-id: r16276
"
"f71f8aaa52b5af111c56ceabcc104f932448c3a5","2004-12-23 19:43:04+00:00","Fix LaTeX code

svn-id: r16277
"
"d7323b330da5d43df755bbdd0bd0da11e42d8794","2004-12-23 20:23:53+00:00","Done.

svn-id: r16283
"
"f6dd5125d1fd82ac01d16aeaf452881f78379dcc","2004-12-24 00:31:51+00:00","errno is defined in errno.h, not sys/errno.h (says POSIX)

svn-id: r16284
"
"da9b64e4cabd7db8706e1f04b2b476cc02da66ac","2004-12-24 00:59:56+00:00","This hack is used to create AUTHORS, credits.h, credits.inc, credits.xml

svn-id: r16285
"
"a805372acd63000b398fec2e5b889eb5131a42ad","2004-12-24 01:17:04+00:00","Started to rename our tools to be more consistent

svn-id: r16286
"
"426eeb909c02f1d2ac1e9b474736779f83108efc","2004-12-24 01:43:36+00:00","Moving convbdf and md5table into scummvm/tools/

svn-id: r16287
"
"53852dd52de16221829a888a724394d5af390fa9","2004-12-24 10:22:01+00:00","- fix of 8 to 4 direction conversion
- added sfSetActorState function

svn-id: r16288
"
"573da1e79cca48c0140e0b1a6e6463373a481715","2004-12-24 11:11:01+00:00","- opCCall* on debuglevel==9 shows script function name

svn-id: r16289
"
"241155c882248b50e7feda208d6ac7787eb7c70a","2004-12-24 12:47:16+00:00","- aninamation cycle now approach to original

svn-id: r16290
"
"6c4c66edfa7e1338b81005dd3ddc3590edbe0147","2004-12-24 12:49:52+00:00","Hrm, nobody added the MT-32 emu to the NEWS :-/. And we should agree whether to end NEWS entries with a period or not...

svn-id: r16291
"
"af0a1792f8d17c4fc75acb45d224f62a079bf665","2004-12-24 13:01:47+00:00","Implement proper game autodetection

svn-id: r16292
"
"c241041185d2475392777110ce3b83a3c07f2279","2004-12-24 13:14:23+00:00","Add FIXME to newly added actor animation code

svn-id: r16293
"
"5f5bcfc6c2c7e05cd3a5c433481fa013cfe22e6b","2004-12-24 13:17:57+00:00","Rearrange SAGA items and add couple new items

svn-id: r16294
"
"841962dcb92d1c7c315b71b978bd52774543fc6f","2004-12-24 13:42:05+00:00","-fixing second speech line cut

svn-id: r16295
"
"c8d8972dd0b6134aebd40d210c5f1c31d8435c00","2004-12-24 14:21:47+00:00","- resolved protagonist swapping problem

svn-id: r16296
"
"f0bc27f11c5fb638623108df3700b182433df947","2004-12-24 14:47:52+00:00","- fixed actors state after end of speech

svn-id: r16297
"
"2289ea371b46a0696ae54923f32c1027b73afe34","2004-12-24 20:44:39+00:00","- remove old stuff
- work on 'walking' in progress

svn-id: r16298
"
"a905d7c198216b89e2577ca1e1ee5f1beb595e38","2004-12-24 20:52:53+00:00","- SAGA scetion update

svn-id: r16299
"
"db32aebfa064745652fc2bf7dff5992f3754d66a","2004-12-24 21:16:24+00:00","- compile error fix

svn-id: r16300
"
"9b56161a3d6e0f35508dbb0da3c7c8aa3beac285","2004-12-24 22:33:49+00:00","Disabled example rules on how the md5 headesr could be rebuilt automatically (but I actually think that's not such a useful idea)

svn-id: r16301
"
"73a441de4369cc6cf309c7c1aa0c41bde9ff1865","2004-12-24 22:38:39+00:00","fix credits target

svn-id: r16302
"
"8135ed2b6bcdb154a08ff930eb0f72fb04221d23","2004-12-24 22:40:14+00:00","The script I use to build source tarballs

svn-id: r16303
"
"5a94c7b9a7a496ebe21667b6bfc2f05c3cc114d1","2004-12-24 22:57:57+00:00","Added targets md5scumm and md5simon for generating headers and web md5.inc file

svn-id: r16304
"
"385986f4b6b7d68437315395630758b039800867","2004-12-24 22:59:05+00:00","new target fixes

svn-id: r16305
"
"e474cec330f786696afd9d263328c17dd4d65273","2004-12-25 00:22:01+00:00","Simplified building of the tools -> should fix compilation problems on Windows

svn-id: r16306
"
"a8c8a7ab4ca20c8d5cdfef2191166388902f6891","2004-12-25 10:32:05+00:00","There appeared to be different DOS CD version. Also fixed DOS demo detection

svn-id: r16307
"
"a66080b80a592f0610d1e4c7e8adeefe8a30e680","2004-12-25 11:17:03+00:00","- some 'actors walk' work progression

svn-id: r16308
"
"1b82711302ee4f3d15ae28558a587dd6ef0949fe","2004-12-25 13:19:45+00:00","There is no 'max' function on some of our targets

svn-id: r16309
"
"263e8735ef73c1895bb2d8265b05b2be49e41ecb","2004-12-25 15:02:25+00:00","Done

svn-id: r16310
"
"aee60ae1eea800e36c6c08c47e3cacbb89520f1f","2004-12-25 16:03:03+00:00","Update devs with SAGA and HE engines

svn-id: r16311
"
"26a719e7242d7292ed45c879757416dc495fd8e6","2004-12-25 16:03:36+00:00","Update devs with SAGA and HE engines
Check Text::Wrap version

svn-id: r16312
"
"dbe3966624dcdb577653eb7460363fe586865d5b","2004-12-25 16:55:13+00:00","o Merge game detection and game probing in one function
o Print out message about unknown MD5s

svn-id: r16313
"
"433711be5e62a4813b3f296568dc51afb98feaf2","2004-12-25 18:22:55+00:00","Removing this dead code for now, it only leads to confusion

svn-id: r16314
"
"0d2fa6ecf02d5745db90d78c78e546b3fe62d373","2004-12-25 18:23:41+00:00","etc is an abbreviation, so a trailing period is required

svn-id: r16315
"
"fec3df209601b812034fafed53ef74b7ee732512","2004-12-25 18:34:44+00:00","Moved the softsynth midi drivers into a sound/softsynth; amongst other things, this fixes bug #1083058

svn-id: r16316
"
"2941d595bd18d9a64e33b20658e007709db9afda","2004-12-25 19:03:13+00:00","Make loading the config file explicit

svn-id: r16317
"
"d6872dba6b6b4c4dafbd411bf4b0651b7d01edce","2004-12-25 19:04:18+00:00","Get rid of g_debugLevel (this fixes bug #1091142)

svn-id: r16318
"
"63a46342ee89ab318c7101b70072c75a723eeff4","2004-12-25 19:41:02+00:00","I didn't know that our credits are sorted alphabetically. Move Andrew up.

svn-id: r16319
"
"d59a929114bf558a5f126c4a0dc07fde4f9518f2","2004-12-25 19:58:00+00:00","- fix win32 with USE_WINDBG compile error

svn-id: r16320
"
"5a38c16c278fbdb197396076c9bea313244a8a58","2004-12-25 20:59:18+00:00","speech_volume default value gets already set in gameDetector.cpp

svn-id: r16321
"
"ffbbef6f31dc79c8b0d08a860eb8d7ece714a62e","2004-12-25 21:56:26+00:00","Draw the active tab differently: remove the horizontal line at the bottom (inspired by patch #1091165)

svn-id: r16322
"
"4a0c1b86f798a83d4c8ee48f8bf4ade3363a61a3","2004-12-25 22:13:44+00:00","Make ESC key work in the launcher

svn-id: r16323
"
"02c0a25c31148b9319a194754a20bd59259db1ef","2004-12-25 22:26:28+00:00","Partial fix for bug #1091189: restore the selection after editing the games list in the launcher

svn-id: r16324
"
"509f1b040f3877638d009467bcbf6977e3c62917","2004-12-25 23:19:42+00:00","Fix warning

svn-id: r16325
"
"71051f551e831191f18734a2902559f33346d0e0","2004-12-25 23:20:37+00:00","Fix bug #1091189 (GUI: Launcher List/Edit game interaction)

svn-id: r16326
"
"65ca0a07289216d7183f86b8d3b76f0033c8d34e","2004-12-25 23:35:30+00:00","Fix warning on OSX

svn-id: r16327
"
"81b6e9e1e6119c85e8b21739fea3580183154e5d","2004-12-25 23:43:05+00:00","Get rid of the useless & troublesome master_volume

svn-id: r16328
"
"6670b2969a3669ae7bda7103407e8e5e22c2916a","2004-12-26 00:20:22+00:00","Give proper credits to Wyrmkeep folks

svn-id: r16329
"
"67b311713d8f4cfcd460a9649e0075f24278a048","2004-12-27 00:27:00+00:00","Added 'sound types' to the mixer - for now, only plain (for the premixer), SFX and music; volume is now controlled based on the sound type

svn-id: r16330
"
"f15f517bb45c9ddb06178b4127f08d04204275b0","2004-12-27 01:32:40+00:00","Add 'speech' sound type to mixer; make use of that in iMuse Digital

svn-id: r16331
"
"357eb38b49c47efdd11ea94f649ed900f505dcfd","2004-12-27 02:58:55+00:00","Allow premix channels to use a custom sound type

svn-id: r16332
"
"01fc7adffdd8f43c1646486c064e49057c47c97e","2004-12-27 03:00:36+00:00","Use the same volume ranges as most of the rest of ScummVM (i.e. 0-255)

svn-id: r16333
"
"fd57497d9e083cc9ab9d34c796c8f175718b8d33","2004-12-27 14:43:58+00:00","Add some compression tool TODOs

svn-id: r16334
"
"8290b5989fc2ffedf2e82379542c5fa3c48e0595","2004-12-27 15:04:21+00:00","Corrected size of MT-32 control ROMs.

svn-id: r16335
"
"1d44b0873fd124ddc394ec992c469cb079352e8b","2004-12-27 16:23:21+00:00","Fix volume regression my previous checkin caused

svn-id: r16337
"
"bc3b3517b286894cfe2055bdefa7ceaadc49cdac","2004-12-27 16:24:49+00:00","Merge startSfxSound into startTalkSound

svn-id: r16338
"
"e582a244db7361afa28443c2ba6d87839d46f52b","2004-12-27 16:46:24+00:00","Removed unused variable.

svn-id: r16339
"
"2269576ce99317697a6513e58da9579a374d1702","2004-12-27 16:48:07+00:00","Added MD5 sum for Linux music file.

svn-id: r16340
"
"29e367a063c6d0b3ef8a264fd856ecbfa212b922","2004-12-27 17:29:07+00:00","Don't use pointers to int. We don't know what size an 'int' is.

Also, failing the script checksum test is no longer a fatal error. There
has been a report that could mean there is a German version with incorrect
checksums. Whether or not this change will make it playable is an entirely
different matter, of course.

svn-id: r16341
"
"e9f1ff4d08ada954f964788b933fcd19d17b912f","2004-12-27 17:30:08+00:00","Reduce potential loss of precision if SysTicksPerSecond does not divide 1000

svn-id: r16342
"
"2eb17ef32241618f41bede09eade8cac13d4bd05","2004-12-27 18:50:33+00:00","update

svn-id: r16344
"
"d138a880bf8498ac6facc66ac4dbc9cddbd33891","2004-12-27 21:54:20+00:00","Fix for bug #1091748 (DIG: Starting new games takes a long time); turns out querying the debuglevel from the config-manager very often is too slow

svn-id: r16345
"
"6e32618c9a8b3a70ab92891042e457bc71b2d15a","2004-12-27 21:54:24+00:00","Done

svn-id: r16346
"
"d299f0601bd977907426d18828dacec14907b8dc","2004-12-27 22:08:20+00:00","Reducing header dependencies a bit

svn-id: r16347
"
"bc882a1af4df93feeaff82e69a4609367e373e20","2004-12-27 23:33:19+00:00","Introduced two new constants SoundMixer::kMaxChannelVolume and SoundMixer::kMaxMixerVolume, for clarity

svn-id: r16348
"
"f9b1e4118c5b3350528087f982c2fa9d34a365de","2004-12-27 23:43:40+00:00","Use the mixer to handle sound volumes

svn-id: r16349
"
"53ff19eccb567835d00d460e9d21c2b2ed1eddd0","2004-12-27 23:46:55+00:00","Use SoundMixer::kMaxMixerVolume

svn-id: r16350
"
"48e70acbaa96a8bf6fe4147a21596f2be7524794","2004-12-27 23:58:04+00:00","Use SoundMixer::kMaxMixerVolume

svn-id: r16351
"
"03ed4dd4df23b8c6962419df7212dd863ead6664","2004-12-28 03:44:07+00:00","o Fixed animation playback
o Implemented almost all animation opcodes

svn-id: r16352
"
"864b1f88c0477c65ab40612a77930f998f23c2c0","2004-12-28 04:09:10+00:00","Implement rest of animation-related opcodes.

svn-id: r16353
"
"160a28e9126dc1f7a06198f67a0dbcadb20d7047","2004-12-28 11:19:36+00:00","Fixing hasActiveChannelOfType

svn-id: r16354
"
"43c27589bbd6113ecf052c4cabf79432ad3799fe","2004-12-28 11:40:27+00:00","Fix building in an external dir

svn-id: r16355
"
"3cfbc4082bdc0233fd4440695e6eb11aacc97ece","2004-12-28 13:34:33+00:00","Partial fix for Mac intro. Sprites are still incorrect because of lack of
m68k asm knowledge :)

svn-id: r16356
"
"82303305870c470cde6604ca0be5b57d9ee1d742","2004-12-28 17:20:21+00:00","slightly less hackish Journal code

svn-id: r16357
"
"accc6897b0caafd1b83dc28e6dbffb710a0f16d9","2004-12-28 17:43:23+00:00","Added MD5 sums for IHNM so that we can watch the intro again. It seems to
have developed a few regressions though.

svn-id: r16358
"
"49393c0f414d5f5b02cf2e7ee04e3b14b1954539","2004-12-28 20:27:48+00:00","Yet another idea

svn-id: r16359
"
"b15d92e470fa09a76540b42d1ab1b6f24515ee74","2004-12-28 20:29:42+00:00","Fix running ScummVM in plugin-mode

svn-id: r16360
"
"8e42cbde2acfeb043c066058f70b3afb55f235c7","2004-12-28 21:04:58+00:00","Remove leftover debug message

svn-id: r16361
"
"a40ed29abd3c164743f2b56c2f73aa4a956b34a8","2004-12-28 21:07:34+00:00","Renamed _clickedWidget -> _dragWidget; if a drag is in process, send the mouse moved / mouse up events to the widget on which the drag is performed (this fixes at least one bug and improves the user experience)

svn-id: r16362
"
"d6a4ffc2b034aa4ee065451ce7d611e0501d305b","2004-12-28 21:27:18+00:00","- many actor walk related functions added
- implemented script functions for scriptDoors (except iso mode)
- introduced getDisplayWidth() getDisplayHeight() getStatusYOffset getPathYOffset()

svn-id: r16363
"
"cc18520fe5351e33db9e720ad6e13f1a5d876ff6","2004-12-28 21:33:46+00:00","-addition to previous

svn-id: r16364
"
"db249a8fe1a7f6e8fb69beeb3d8621e323778a78","2004-12-28 23:18:11+00:00","Fix regression with IHNM.
Add IHNM demo MD5s. demo does not work at all yet

svn-id: r16365
"
"d6547ea5362067a76ebe2fd4be799662393c4895","2004-12-29 05:01:27+00:00","Compile fix from cyx

svn-id: r16366
"
"44531e4aeea23ba4aab423d5bc1f9d6e09d0c6a0","2004-12-29 12:59:17+00:00","Fix warning. SAGA coders should fix this properly :-)

svn-id: r16367
"
"4d46b7882a42469932a89149e1fc2c6a0a3fa280","2004-12-29 14:25:20+00:00","oops... thanks wjp for pointing me this one

svn-id: r16368
"
"6b4264d3a8cb5ebd32b7510bffe781bb2f1ba8aa","2004-12-29 14:33:14+00:00","- fixed fingolfin notification

svn-id: r16369
"
"fd0efdc6546d9cddf2ae64d6fbebd33bed7f9085","2004-12-29 16:05:12+00:00","Might as well initialise this variable.

svn-id: r16370
"
"a5656fa83e17d74a7e695fcb0bd5fcabba3ca4f2","2004-12-29 16:10:53+00:00","Implemented the 'placard' functions, because they're such a nice visual
feedback that something right is happening.

svn-id: r16371
"
"904af077e39d63904c62d7b030101e8d8a0a1e68","2004-12-29 19:17:20+00:00","Let user exit at the transition, i.e. process user input

svn-id: r16372
"
"80647dd424a373ee5184d84726169c77a4c309b1","2004-12-29 19:40:59+00:00","PALETTE_FADE_DURATION -> kNormalFadeDuration

svn-id: r16373
"
"8cf04e39285216f464ca14afacb74b6b49b0a924","2004-12-29 19:45:57+00:00","Just compared with original. Correct fade durations confirmed. I just used
to our 3x slower ones :).

svn-id: r16374
"
"41a5251e28898f4a34ab51c01325d61c2510daf8","2004-12-29 21:49:25+00:00","- some work in progress

svn-id: r16375
"
"cc2f79394b3af2112c0d3f6eb5f6dddf80d736f6","2004-12-29 22:00:47+00:00","- fixing compilation

svn-id: r16376
"
"5019da43bd0b6dff9c6dad65d1565fa9426db023","2004-12-29 22:31:21+00:00","- some update

svn-id: r16377
"
"8531caf82282305e96769cea1a95aaa15ce5c57a","2004-12-29 22:50:19+00:00","- fixed canWalk bug

svn-id: r16378
"
"9581bd5691183bc9aca1f59fc80e656f1ff82239","2004-12-30 12:54:04+00:00","Fix for bug #1091801 (ALL: Possible to create corrupt config file)

svn-id: r16379
"
"246f14bb406e7408a62e98702bedb497634ae2f1","2004-12-30 14:11:00+00:00","set key modifiers for keyup events, too; use SDL_GetModState to determine mod flags, so that the modifier flags get set if e.g. the shift key is pressed alone

svn-id: r16381
"
"60deb4200b86ba4288f3205b6cd45176a3bff254","2004-12-30 14:13:14+00:00","cleanup

svn-id: r16382
"
"f0d0ce7979d89ab67cb702326f900dc721aa01a4","2004-12-30 14:21:16+00:00","Reduce time till scrolling starts inthe about dialog; pressing shift/alt now causes faster/reverse scrolling (this is an insider trick and not documented on purpose :-)

svn-id: r16383
"
"989ae4040299c87a2dcb747adb422dbe1458572e","2004-12-30 14:48:21+00:00","Swallow ctrl-alt keyup events, too

svn-id: r16384
"
"92a43e14a0a133ca7767c9f5749de1e101a342cc","2004-12-30 14:53:17+00:00","silly me, shouldn't test a variable which wasn't even set <sigh>

svn-id: r16385
"
"8ce71ebb2015320e81d4148d8136469d77f47c9c","2004-12-30 14:54:08+00:00","Fixed warning.

svn-id: r16386
"
"1a27617a956d34acf50d7702fa4bb301107517e7","2004-12-30 14:54:40+00:00","Renamed the 'placard' opcode functions. They should be reasonably bug free
now.

svn-id: r16387
"
"6fb82b2494d278049515e789059867bc2052b6eb","2004-12-30 14:55:20+00:00","Final part of the fix for bug #1091802 (GUI: Credits scroll glitch)

svn-id: r16388
"
"682dfbcaf7f44b28111e6754ea2845a33e4b3871","2004-12-30 15:30:26+00:00","cleanup

svn-id: r16389
"
"75f31d28c97492fbf73826fe6eb3f600875e8ea0","2004-12-30 18:45:48+00:00","o COde formatting
o Improved debug output
o Do not produce a lot of frameCount < 0 messages
o Okk now appears after first scene
o implemented yet another animation function
o Renamed SF_* -> sf* for functions I know are correct

svn-id: r16390
"
"acd1f910d5d5f8a8bbeb6fc953afdf5a1ece404c","2004-12-30 21:48:22+00:00","Handle SCUMMVM_SAVEPATH exactly like the command line option --savepath (but the command line option has higher priority); i.e. it's affecting the config system (see also bug #1045171)

svn-id: r16391
"
"a8f58dcaccfea90fff34dddd84372132f87ecd41","2004-12-30 23:44:44+00:00","minor correction, checked against disasm

svn-id: r16392
"
"f06348440fd2040cb8bf57849c7e6670db91caf0","2004-12-30 23:59:30+00:00","correction for previous correction :)

svn-id: r16393
"
"a44e8248159fc836f9d534872b0d55741f0c803c","2004-12-31 00:25:18+00:00","added some comments and re-indented some parts of code

svn-id: r16394
"
"c27969d5db3ad539655a22f68ae415f5de65664e","2004-12-31 17:39:57+00:00","Slight adjustment of placard text position. It's still not identical to the
original, but I don't consider that to be a problem.

svn-id: r16395
"
"cab8e3a66d65c0a53dcde6d025f4c43922da82a8","2004-12-31 17:51:45+00:00","Applied patch #1093830, with slight modifications proposed by Fingolfin.

svn-id: r16396
"
"51788228331d1a39f9b53edce0a53f554f2449d0","2005-01-01 15:10:22+00:00","Updated copyright year.

svn-id: r16397
"
"47280d9433bf09425bca13dab9ee822fb3783516","2005-01-01 16:09:25+00:00","Updated copyright

svn-id: r16398
"
"2664ca7eb10457994de0e8d4528ee3a4e0a28a74","2005-01-01 16:20:17+00:00","oops, correct copyright string

svn-id: r16399
"
"67971445688b021ec12e30e29d118bd75e6c9425","2005-01-01 16:25:56+00:00","BS2 copyright text needs to be clarified

svn-id: r16400
"
"03d4a6fa47e73ddbddc6bc096f6cef14ea7d7441","2005-01-01 17:52:17+00:00","Removing obsolete comment

svn-id: r16401
"
"f52be9df681358564991e0988bf70160970104ad","2005-01-01 18:53:47+00:00","Changed OSystem::instance() to return a reference, not a pointer (it now matches the Singleton interface)

svn-id: r16402
"
"c418282ec724d01e37b13f7372aa2d6b48f6cbe2","2005-01-01 18:56:03+00:00","One day I wanna switch to STL. Really

svn-id: r16403
"
"74bf578bda4c9adcc70ce4cda7d4617a9b95267c","2005-01-01 19:19:06+00:00","Changed the singleton code to allow for custom object factories; this allowed me to change OSystem to use the singleton base class, too

svn-id: r16404
"
"5930ba2ed80b5715f93801db06fd1006ff18272d","2005-01-01 21:00:24+00:00","Some spelling/grammar fixes.

svn-id: r16405
"
"96785897790bdf6ff1679e45c7fdf4a98bbce9b6","2005-01-02 14:30:50+00:00","The 'n_voices' field of the voice LUT was never assigned a value. So if
anyone heard any voices - I did, except under Valgrind - it was pure luck.

svn-id: r16406
"
"1bc636aaa676839c6e8fe2d8cc1405f2c3b2393c","2005-01-02 14:36:00+00:00","Fixed a few things in the IHNM intro. Most noticeably I've added an event
for starting animations, which I use to prevent the first animation frame
from being drawn too early.

svn-id: r16407
"
"5f6108052e24fbf4a309ae5c315278b992d76ede","2005-01-02 14:52:11+00:00","Changed 'sizeof x' to 'sizeof(x)' for consistency with the rest of ScummVM,
and used ARRAYSIZE() instead in two cases.

svn-id: r16408
"
"2c7f25435e479e57c8e4b5c5ce66c348fb560e96","2005-01-02 15:40:09+00:00","MT32 support was already added in 0.7.0, clarify that. Small remark: Porters are also very welcome to update the NEWS file (so our users know what great advances occured on the WinCE, PalmOS, Dreamcast, ... ports)

svn-id: r16409
"
"b944ad808bb7f596a1877838e03eb3d928324578","2005-01-02 15:45:38+00:00","Pausing an animation is done by changing its state now, not by setting a
flag. Added yet another event, and changed the ITE intro to reflect that.
(Which means the waterfalls are no longer drawn over the game title.)

svn-id: r16410
"
"080483109a893d9d02c3eb5ed65f7f5895554178","2005-01-02 15:59:01+00:00","Start intro animations with events to prevent the first frame from being
drawn too early. (Scorry still shows up too early, though.)

svn-id: r16411
"
"fc6d4e0831fbefadb1c9bd61032f7d5be2f38d92","2005-01-02 16:11:19+00:00","Use events to start the remaining animations. It's not necessary, but it's
more consistent that way.

svn-id: r16412
"
"5781d296b8d3355157d5b2a2ecd4c7d1702345db","2005-01-02 16:16:23+00:00","Removed printf() that I assume was committed by mistake.

svn-id: r16413
"
"6738870568a08788acd26a5a02ee64d07600095b","2005-01-02 17:16:44+00:00","Fix for bug #1082154 (MM V2 (German): incorrect text presentation)

svn-id: r16414
"
"63be4b64350f72463965c2716e1e0cc43ade2f98","2005-01-02 20:29:27+00:00","o Started putting all panels stuff in order. Still incomplete
o Proper detection for Mac Wyrmkeep CD
o Support for wyrmkeep logos

svn-id: r16415
"
"ab432327d89e239c077eda6d64f50253773e9d76","2005-01-03 11:33:12+00:00","Add missing control changes, patch #1094825.

svn-id: r16416
"
"9f0783e3914a45283cd09cc0d8861c8acd7c9d0e","2005-01-03 17:39:20+00:00","Fixed a regression where - I think - the last animation frame wasn't
displayed. This was most noticeable in looping animations, in particular
the spinning 'Dreamer's Guild' logo in the IHNM intro.

In the process I changed the name of 'n_frames' and 'nframes' to 'maxframe'
since that's what they are. I could, of course, have added 1 to the value
instead, but that would have introduced a subtle difference compared to the
original code. Probably not a good idea at this stage.

svn-id: r16417
"
"c0d25cbae18152997cb9890b9bb6f158d0262f80","2005-01-03 21:17:32+00:00","- script execution stops properly
- placard should work over way:
set Wait flag for thread (as in opSpeak)
remove inner loop (processInput...)

svn-id: r16418
"
"4255b146b38a88fec141407922159ffe8a99ff79","2005-01-03 22:47:14+00:00","Andreas Roever -> spell name properly with an umlaut in the HTML/XML version of the credits

svn-id: r16419
"
"702bb353dcb527f21f157c5db7d52d0a1b84c7e8","2005-01-03 23:51:16+00:00",":)

svn-id: r16420
"
"6d966a6e17900a865b3617515638f55f67031c4f","2005-01-04 15:31:30+00:00","Applied patch #1088948, with minor modifications

svn-id: r16421
"
"e733d05fefa929f131cd39aed4b1eb935dac40ef","2005-01-04 16:10:43+00:00","- added setup of followers position at start of scene

svn-id: r16423
"
"cceee73b851975435ca3bb2a342680fd6aac2321","2005-01-04 17:10:41+00:00","Update SAGA stuff

svn-id: r16424
"
"dee9b3bd870843d197678b8f6bc44b46561c5778","2005-01-04 17:15:53+00:00","o Fix regression with Win32 CD ITE at wyrmkeep logo
o Support for sprites in Mac versions
o Improvements on scene flags
o More code on proper interface modes handling. Just a tiny bit was committed
as other stuff breaks intro due to incompleteness.

svn-id: r16425
"
"b514251efe5855fb80d37791f69a7fcbbbcf4390","2005-01-04 18:54:29+00:00","- some walking addition

svn-id: r16426
"
"7b268f7d4778a9b392a755b519093db5cc8bdd3d","2005-01-04 22:55:37+00:00","Fix yet another copy&paste mistake from 0.6.1b

svn-id: r16428
"
"434d59a5d679c501e87875f81463abeb0d79a28c","2005-01-04 23:00:03+00:00","Fix uninitialized variable, fixes Hide Toolbar random failures -  thanks iKi

svn-id: r16429
"
"56656f002f1163181b0eb62888f59558e9169e35","2005-01-05 01:26:57+00:00","When computing a games MD5, only use the first 1 MB of the file (this should only affect the special mac container formats, and ensures we do not try to compute the MD5 of a 500 MB file each time the game is run)

svn-id: r16432
"
"41b914e773da70b17b83eec69bfb9c2a14ea13f8","2005-01-05 01:42:52+00:00","After adding a new game, select the new entry

svn-id: r16434
"
"935f320e1ad51f0273edfa2b94d70e45c215ebda","2005-01-05 07:13:15+00:00","Fixed bad speech/script regression.

svn-id: r16436
"
"c53c4f13d915e5365d669823dfc95a1033ec1252","2005-01-05 07:19:58+00:00","Indentation

svn-id: r16437
"
"c93c1cab8f56d5f8bebaa61a4ac837c8c7453357","2005-01-05 19:03:49+00:00","- path finding work in progress

svn-id: r16438
"
"7da6fd64e029292059dda932c3a6b60777ec306c","2005-01-06 10:48:53+00:00","Removed unused variable.

svn-id: r16439
"
"57eaf5c92504d1fbd08f0c415ec7e66fb44a6e66","2005-01-06 11:46:32+00:00","Change warning to debug

svn-id: r16440
"
"b319c322264f009b937e54a1a0a46f8f34408cbd","2005-01-06 12:30:24+00:00","Fixed typo (in comment)

svn-id: r16441
"
"19f604b6ef4170a0acf82c94322dd0940ef0bc18","2005-01-06 12:42:05+00:00","Whitespace change.

svn-id: r16442
"
"26d5810b81bfc7153db801d0f8f904eb1b54856f","2005-01-06 14:02:53+00:00","Next batch of panel-related fixes. Still wrong.
NOTE: lines which start with `;' should contain calls to not yet
implemented subsystems like Conversation subsystem

svn-id: r16443
"
"b62ae808c8236ca657844aa71bddb5fb9e1a4288","2005-01-06 14:04:09+00:00","Fix warning

svn-id: r16444
"
"c9ce4667206b3349117f08570eb97a79035b9441","2005-01-06 14:32:14+00:00","some actor walking fixes

svn-id: r16445
"
"028a8e4302f9e2895166e5984d1b481639bb1413","2005-01-06 14:49:47+00:00","Fix actor walking caused by wrong panel state

svn-id: r16446
"
"12c44e85deaf94d5169fa2a8dd7f491f240b6e85","2005-01-06 15:29:17+00:00","Fix crash in intro

svn-id: r16447
"
"27bf2ad5607145f5ebf50017b36c1c8fb1b3cc52","2005-01-06 15:50:41+00:00","Fix bug #1097022 'ALL: Build fails on non-i386 archs if nasm is installed'.
We should switch to nasm completely, though.

svn-id: r16448
"
"f974b48a41469aa3a86a1ed1ccb00d9a58656cc0","2005-01-06 15:57:12+00:00","Fixed bug #1093845 after discussing with Fingolfin.

svn-id: r16449
"
"cfe84492adc3ef69154c59d0a94c093bbb9a6609","2005-01-06 16:07:46+00:00","Placard functions are now event-driven, so the blocking palette faders are
no longer needed.

svn-id: r16450
"
"aec5da9bbb1e8033ad211324ae9b97565c46464f","2005-01-06 16:10:34+00:00","Work around bad German translation. (Joey claims he's 21 metres above the
ground instead of 120 when you first turn him on.)

svn-id: r16451
"
"9cfb8d3bb506f07b5373f4ba56a747a027778a47","2005-01-06 18:38:11+00:00","Fix getStrings to use the ScummEngine::openFile method

svn-id: r16453
"
"5d88c3954968b8eccb86363055bda55300ac2586","2005-01-06 18:38:34+00:00","Modify the singleton code once more to help overcome an issue with MSVC 7 (see also patch #1095133)

svn-id: r16454
"
"4fae197c67b8cecf5a674c710530c44f5cef814e","2005-01-06 19:09:34+00:00","Patch #1092994 (Selfscaling GUI)

svn-id: r16455
"
"00c98c519e85ee7d3f7f2a262e80a2b24b1914e0","2005-01-06 19:15:01+00:00","- implement faceTowards (script function & etc)
- implement debug actor walk path (press f6)

svn-id: r16456
"
"3b61b06aee156c1e34b2021e287ad545b5ece41f","2005-01-06 19:34:07+00:00","- remove 'extern' before OSystem::makeInstance

svn-id: r16457
"
"6cde0f1de6dcb5690db715142bdc74d21e966ad4","2005-01-06 19:35:11+00:00","turn off 'no definition for inline function' warning

svn-id: r16458
"
"f3b7c27cbdeb7f1801fa5ed34d2aa0b65454b72f","2005-01-06 20:16:42+00:00","Add reported frech 4 disks monkeyega

svn-id: r16459
"
"c6e0d31e76134fbdd3a1626aad9ed3e38f25afb3","2005-01-06 21:15:52+00:00","Added a font manager (work in progress)

svn-id: r16460
"
"8f0afd181648a5e198fdcf0322dcd28a1a225aa5","2005-01-06 21:18:46+00:00","oops

svn-id: r16461
"
"87afdf9a646d0893393dafdfe4524fa7e9a9c8bd","2005-01-06 21:46:21+00:00","oops again

svn-id: r16462
"
"5b19a79b46eb80a91fe8c27874f069eca67a9da8","2005-01-06 21:55:52+00:00","Add reported 4 disks french monkeyega

svn-id: r16463
"
"59a93737dbd9b0f60f8545b0a0a23ceb75c03ab7","2005-01-06 21:57:10+00:00","non tile mode full actor path finding - preview

svn-id: r16464
"
"198d85eecd972483dc4a9bf2b792e31ef3dc6f71","2005-01-06 22:22:20+00:00","small fixes to previous

svn-id: r16465
"
"a9d0472758f4fb43edc0ea6602f59ef7f8075ec5","2005-01-06 22:38:58+00:00","New normal/big fonts

svn-id: r16466
"
"858c6c4d5bb40a29550009b07f8d4b583d3f03cb","2005-01-06 22:48:42+00:00","Switching GUI to an alternate font; using a second, bigger, font for 640x480 games like COMI. Note: we can always easily switch back to the SCUMM font or any other font, if we want to

svn-id: r16467
"
"fa3d618fae78501272a62c02fd754a4cbecb84d3","2005-01-06 22:51:25+00:00","Distinguish left and right mouse button

svn-id: r16468
"
"37a858d6f5046fb6c0e2be347b37c8f1d61fe1fe","2005-01-06 23:02:53+00:00","- compiles debug path displaying only if ACTOR_DEBUG defined
- removed some temporary variable

svn-id: r16469
"
"310576996c48a36d5bbdeaa654d7ffd711357e21","2005-01-06 23:31:34+00:00","work around yet another MSVC problem

svn-id: r16470
"
"d5d801b01c2990f8e07e42abebd9ccbf33d39407","2005-01-07 00:08:54+00:00","Remove extra ;

svn-id: r16471
"
"1fe593995d98939c0d2e2dc2d6c6e11b647e1ca0","2005-01-07 00:57:43+00:00","o Fix for popped up actors at initial scene fade out
o Stub for new Wyrmkeep demos with substituted scenes
o Converted some script func parameters to apropriate types
o More panel fixes

svn-id: r16472
"
"060cf62839bbc391ba1edae0d2ddf966fb07af0e","2005-01-07 01:03:16+00:00","Update SAGA items

svn-id: r16473
"
"50d64c1329b4b418d8be1d05a846407861dc4e12","2005-01-07 14:14:04+00:00","Add GCC 4.x to the list of accepted GCC versions

svn-id: r16474
"
"b4d547c736d6c8718cdd1bc36aa4a2fc083b6c52","2005-01-07 14:42:05+00:00","cleanup

svn-id: r16476
"
"071b09cab4881287d702d45726438797b143f7d5","2005-01-07 14:42:51+00:00","Flag 64 bit problem in iMuse, as well as what I think might be very old regression in our code

svn-id: r16477
"
"0a89a28e4588a64e8a7b62d34f3cd621f666c0f0","2005-01-07 15:49:47+00:00","o Add reported German IHNM and ITE
o Fix IHNM. It does not have actors now (all actors in IHNM are in resources,
not hardcoded)

svn-id: r16478
"
"eb76ac619fdb9cccf0e3ba97115894d046a8f563","2005-01-07 21:13:26+00:00","o Last fixes for panels. Now they work like in original.
o Code formatting in scene.h

svn-id: r16479
"
"12b5c5f85515b3f2f837992f63040373aba167ba","2005-01-07 21:24:26+00:00","fixing scene transition

svn-id: r16480
"
"f74fce354f4aece89b45a301d0519fc67f876f5d","2005-01-07 21:56:10+00:00","Access timer.

svn-id: r16481
"
"c316ab62cfb86ff5155d03bff53926a8e68c285a","2005-01-07 22:18:53+00:00","Eliminate _scene->getMode() and use scene flags instead

svn-id: r16482
"
"7a30bbfd2a8867c5cb5b5fb3c050ba5613b083dc","2005-01-07 22:22:08+00:00","Update SAGA items

svn-id: r16483
"
"2f17c61905e2e55e6fab4607eeec3278d5bacd3d","2005-01-08 03:35:53+00:00","Fix wron Vulture male 1 animation. Thanks to salty-horse for reporting
and help with fixing.

svn-id: r16484
"
"123b4772eff2d5e75709e82f26a2aaa66a71aac8","2005-01-08 17:58:00+00:00","sync NEWS files on HEAD and branch-0-7-0

svn-id: r16486
"
"c257460bc5474da6ce87da2191ed77f4de76a764","2005-01-08 18:11:29+00:00","Fix bug #1098115 (GUI: Broken console font)

svn-id: r16488
"
"65a4044203f2d26edb26a7677dd1a6107d24adcb","2005-01-08 18:37:28+00:00","Fix bug #1097467 (COMI: cursor is invisible at 'insert CD' message)

svn-id: r16490
"
"bdb1b1eb1c21faf8dfc00ce4fb57965cdb649d8a","2005-01-08 20:30:07+00:00","begining of verb implementation
introduced getObjectName

svn-id: r16491
"
"9c7a604c8bcf6903e83787dc3e8513515489d892","2005-01-08 21:06:06+00:00","rename StringsList to StringsTable

svn-id: r16492
"
"bc44b5ec15e7d7f933e455e46c2f603e2800cd82","2005-01-09 01:41:43+00:00","Added new interface SeekableReadStream

svn-id: r16493
"
"32f0dbdcb291eef03d1bc031ba9d23b6a2fdebe6","2005-01-09 03:15:59+00:00","Moving AppendableAudioStream into SCUMM engine, as it is only used there

svn-id: r16494
"
"048ceb0c1ff9e592ff9d6a73d8be6ae8fc327198","2005-01-09 11:35:01+00:00","Update SAGA items

svn-id: r16495
"
"9d1f4ff1e6ea637518f9778b863db5bdb8683658","2005-01-09 14:57:41+00:00","Since _pos is unsigned it's always >= 0, so testing for negativity will
generate a warning in GCC.

svn-id: r16496
"
"f3b8221dd6a06f486a15aeedfd26d054a9287a18","2005-01-09 15:07:49+00:00","rewritten sprite class
- sprites decoded on first load
- some speed optimization
- actors uses kExtended flag to append spriteList

svn-id: r16497
"
"dd9335b232de2e937905773b2c795423eb052a4f","2005-01-09 15:36:54+00:00","fix warning

svn-id: r16498
"
"6563990ad2d9a60b675a51c46ffcc93e5a57c5e7","2005-01-09 15:40:34+00:00","Fix changing the scaler while GUI scaling and the console are active

svn-id: r16499
"
"0fb2bd30f44be62f2aa5204dd31abea26d2e4b3d","2005-01-09 15:48:27+00:00","cleanup

svn-id: r16500
"
"eeea238ef72083a3e32b157531abae6f4ae66ab0","2005-01-09 15:48:47+00:00","This function is currently not used...

svn-id: r16501
"
"9cea3d393f0c3657f3caef72a13dce5594581bdd","2005-01-09 15:49:43+00:00","Added shared code to load WAV(E) data from arbitrary seekable streams (files or memory)

svn-id: r16502
"
"7df70de2b1e070ed6474f81f9da782bc22f21bb1","2005-01-09 15:57:38+00:00","Mark some places which probably should use loadWAVFromStream(); maybe some of the engine maintainers can look into using it

svn-id: r16503
"
"9c0f422d0b2b432d52909ddf2a6a513fe6d69775","2005-01-09 16:06:29+00:00","Ensure the kyra legal headers match the rest of ScummVM

svn-id: r16504
"
"0423866e0acfe8f89f2114628ee42e37da6aa96e","2005-01-09 16:07:53+00:00","Ensure these headers match the rest of ScummVM

svn-id: r16505
"
"51112e49b5cdbd30c8501d1eb0896bd230c25611","2005-01-09 16:14:56+00:00","Fix legal header

svn-id: r16506
"
"47a38a9da8a7447cf2c6027787888bfca4debfc0","2005-01-09 16:43:57+00:00","o Fixed some indentation
o Now we correctly show Wyrmkeep logo in Mac demos
o Applied patch #1098971 ITE credits

svn-id: r16507
"
"0e4711cb81fc6e309719b5ed4d48494f17541568","2005-01-09 17:22:55+00:00","some disabled warning moved from .vcproj to #pragma with comments
(can anyone update .vcproj for vs2002&vs2005?)

svn-id: r16508
"
"ce9f5bd29ae2ae07091cec57a8e3bb725ede68d7","2005-01-09 21:07:19+00:00","Added proper IHNM scripts lut and run scripts, though not much to see.

svn-id: r16509
"
"7a8e1c1efd72bd5bb9aa3db8f6cbb4ca39ca8c0f","2005-01-09 21:36:20+00:00","small fixes:
- actor barrier rects
- unreachable code

svn-id: r16510
"
"31ceb0bb71d2f6446a54aa4d9c7896472e1534de","2005-01-09 23:41:22+00:00","- GameModule is gone
- structures renamed
- SagaEngine class gives all current game descriptions
regression : 'verb' is broken cause work in  progress

svn-id: r16511
"
"7f1b1b40584cef7080efe6444fe5d28f66d8e772","2005-01-09 23:45:18+00:00","saga update

svn-id: r16512
"
"358ce9100dc5a1a2d3794808c75c12803c521a07","2005-01-10 06:31:53+00:00","Add back missing items

svn-id: r16514
"
"055231181e84f46482fa91861c1fac7dd48ab0bd","2005-01-10 07:42:43+00:00","Removed unused variable.

svn-id: r16515
"
"9f3593df80ced689034354b5686eaa06afa40a1a","2005-01-10 07:56:23+00:00","Better sync between music and intro.

svn-id: r16516
"
"8619868aed2709f48480b011ae70299de742389f","2005-01-10 11:17:50+00:00","Added note about the SAGA XMIDI tempo bug.

svn-id: r16517
"
"81cf3d77ef0b696d4560c8333fd1906ac9e037f4","2005-01-10 13:16:21+00:00","Updated the SAGA XMIDI issue.

svn-id: r16518
"
"6cfe0f79686140a8962d6ef5dcf5b9e9558c71e9","2005-01-10 14:25:27+00:00","German retail IHNM patch.re_ md5 is confirmed

svn-id: r16519
"
"a6d6ec4a7768ea5de4c8bc572ba4b3bda753a5a1","2005-01-10 20:49:35+00:00","Fix alignment problem

svn-id: r16523
"
"be6a9e647d96efe1ee73d38feb885abd51952d37","2005-01-10 20:53:16+00:00","Add keys mapping option to the main option dialog for WinCE - useful for Smartphones and non Scumm games

svn-id: r16524
"
"788c828026293f59d8943634e72ce8282538db88","2005-01-10 21:06:49+00:00","yet another attempt to get makeInstance working for gcc 3.3, gcc 3.2, and MSVC (thanks to wjp for the suggestion). Works fine with GCC 3.2 and 3.3

svn-id: r16525
"
"e79458130835528ddf693fba868243cbbfb4ee9a","2005-01-10 22:04:04+00:00","Moved mutex stuff into a seperate header

svn-id: r16526
"
"cffd917165a14e981d61342458a9d054d3c14705","2005-01-10 22:06:49+00:00","system.h was being included in tons of places, without any good reason; reduced this (total dependencies on system.h went down from 193 to 85 files)

svn-id: r16527
"
"6f6668ce21ea4ac8554a0b0c9de55a8683b0d81d","2005-01-10 22:18:39+00:00","Reduce dependencies on common/savefile.h from 88 to 14

svn-id: r16528
"
"5c48717dd254d4d6348631d4a7e62f27f4ee5b40","2005-01-10 22:35:43+00:00","Remove some more header dependencies

svn-id: r16530
"
"f3f1d6be874ef032284980bd5739bd57bda48237","2005-01-10 22:43:21+00:00","Legal header

svn-id: r16531
"
"f030081647882ae537ffe6493f0b7764ce655245","2005-01-10 22:46:23+00:00","eek, we put a static RandomSource instance into every file that included fmopl.h...

svn-id: r16532
"
"df7f9eb18299b9c68c3f5ec260ede991f5724dd9","2005-01-10 22:51:01+00:00","Untested converse. Drawing isn't possible due to lack of needed information
in ITE_interface structure.

svn-id: r16533
"
"ec79a9a7688b9573da46833a3fe7277d5f6d48d1","2005-01-10 22:51:42+00:00","A little more moving around #include's (last one for today ;-)

svn-id: r16534
"
"2dd88384a17059cd418bc9a96eddf05fdae20cfa","2005-01-11 00:49:56+00:00","Maybe I added wrong include, but at least it let me compile

svn-id: r16535
"
"133ff34cb4fc6882233cccb40882fc2278558390","2005-01-11 00:51:58+00:00","o All fonts were mapped. Introduced new FONT_DONTMAP flag
o Implemented and tested converse drawing. Still some features like
arrows and hardcoded values are present, and it is not used in scripts

svn-id: r16536
"
"872a032ee9820ea3c04820d5eee318a4a21b1d25","2005-01-11 00:54:08+00:00","Update SAGA items

svn-id: r16537
"
"13e2c224c89b618df01ec1cfb2767a77bb08b8af","2005-01-11 08:06:19+00:00","This is probably not the optimal fix, but at least ScummVM compiles again.

svn-id: r16538
"
"9eecc9406dba5b7f7a16713c7802bd2bb2f3292a","2005-01-11 08:30:28+00:00","16-bit WAVs are little-endian.

svn-id: r16539
"
"c5e83de099dcffca0f5c0d791305c0189467e9d9","2005-01-11 08:32:10+00:00","Use Fingolfin's new WAV code.

svn-id: r16540
"
"4dda4eb31bbada527082b59295af0a20003d23e6","2005-01-11 13:25:02+00:00","On Fingolfin's suggestion I put back the inclusion of util.h into Rect, for
MIN() and MAX(). I then removed util.h from a bunch of files which I don't
think need it any more. (Please let me know if I got too blood-thirsty!)

This reverts some of the changes I made this morning.

svn-id: r16541
"
"d429502d2965c443b55e796d2b6a5b316c6d6667","2005-01-11 19:40:17+00:00","Make voicess.res the first IHNM voice file, since that's the one that's
used in the intro. That way, if the IHNM demo plays an intro we'll use the
first voice file both for the demo and the full game.

Eventually we'll need to implement switching between different voice files,
of course, but that can wait.

svn-id: r16542
"
"f17f5e3cae3fc70b2048ab613b9ffe28e45c9828","2005-01-11 20:02:12+00:00","last wjp suggested patch - helps reenable 'no definition for inline function' warning

svn-id: r16543
"
"f1026ce3eb0bf4ad4e68987e4952dff141ccf331","2005-01-11 20:40:10+00:00","Partial fix for bug #1100125

svn-id: r16544
"
"244b227b19b6bec659e4c00e2d7aa9596978cbe5","2005-01-11 21:10:36+00:00","- remove game.h & image.h
- all display information of current game goes to SagaEngine
- remove GameFontIds
- hide SagaEngine _gameId,_gameType & etc with methods getGameId(), getGameType()

svn-id: r16545
"
"89e6030c580f5c01446ef97a187c80516661c165","2005-01-11 21:19:53+00:00","remove game.h & image.h

svn-id: r16546
"
"2f77e27ca3b8022e3ef4149cd0ce433c975d6398","2005-01-11 22:02:05+00:00","Move 'tools' related build rules into tools/module.mk; fixed remainder of bug #1100125 (I hope...)

svn-id: r16547
"
"3f211bdc323d5f7885761ca6e3af6912e4208933","2005-01-12 11:07:56+00:00","There was a slight but noticeable pause in linked animations at the moment
it changes to the link. I'm guessing that the last frame in the animation
is identical to the first frame in the link.

The original calls SetAlarm(&deltaAlarm[i], delta->timer) between each
frame, but amends itself by calling SetAlarm(&deltaAlarm[i], 0) when the
link happens. I'm trying to simulate that effect by using 0 as frame time
instead of anim->frame_time. I think that's the right thing to do.

svn-id: r16548
"
"1e499f47f2964836e09cc00e44c583ef2c11bcbb","2005-01-12 12:51:56+00:00","Slight adjustment to previous commit.

svn-id: r16549
"
"8c708cce8e677a83b12a4360c97c668158401601","2005-01-13 07:47:04+00:00","A few subtitle-related changes:

* Added speechCoords to the SpeechData structure so that talking actors
don't drag their speech subtitles with them just because they're moving
and talking at the same time. (Could this also be useful for non-actor
speech?) If the actor has multiple strings, the coordinates are updated
for each new string.

* Made speechColor and outlineCoor arrays so that simultaneous speech (i.e.
where several actors are talking at the same time) multi-coloured. This
is completely untested, though.

* Used getBlack() to get the black colour for the text outline. The
original uses a constant, but we could always make getBlack() return
that constant, if we want to.

svn-id: r16550
"
"59abbd5cc0449a224e47184a2ac88726b45896f0","2005-01-13 15:44:37+00:00","queenrebuild was renamed to compress_queen

svn-id: r16551
"
"05662db4dc9ee29bc9c526f34bb6796275b1e63c","2005-01-13 16:28:20+00:00","Use loadWAVFromStream

svn-id: r16552
"
"e97c689f8bcbc925c02196b0596e9749a2533e88","2005-01-13 18:00:47+00:00","Removed unused stuff.

svn-id: r16553
"
"326dd0c2553db220283cda1403c77bc0870f7451","2005-01-13 22:42:49+00:00","- introduced SagaEngine::getTextString (for i18n it should route to corresponding string array)
- first step in verb implementation: proper button draw, keyboard respond 'w','l' &etc
- added comments and some fields to GameDisplayInfo

svn-id: r16554
"
"211ec4c32a779ab6a234a64e33eaedd3c64b9822","2005-01-14 00:38:54+00:00","Change SIMON to use makeWAVStream - patch #1101740

svn-id: r16555
"
"ccacf6f82e5c5e112ef165d45233359d8a654407","2005-01-14 01:17:34+00:00","o Added support for German ITE. There are also Puzzle-related messages
hardcoded, but I'll save that for later :)
o Eliminated all leftovers of previous language loader. If you'll spot another
one, just remove it silently.

svn-id: r16556
"
"4870ab61f2bc34bc3ca9877561769284a82361da","2005-01-14 08:02:17+00:00","Added helper function to queue the ITE intro dialogue.

svn-id: r16557
"
"e38b6890784f71d3a38bdc3fe0b46c059b850ea4","2005-01-14 10:10:23+00:00","Fixed the 'random branch' opcode, I hope. I haven't tested it. The first
IHNM script seems to use it, but doesn't get that far because it terminates
on an unknown script function.

svn-id: r16558
"
"b56f4fd2f620988c447064b35f2ed7ebaccd2fea","2005-01-14 11:05:12+00:00","Removed the unused i_cvar_name field from INTRO_DIALOGUE.

svn-id: r16559
"
"96d5a1c88d3a8efb82b810f9dfba11f43adf1a0d","2005-01-14 11:22:45+00:00","I've changed getTextString() slightly so that if the translated string is
NULL it'll use the English string instead. It seems unnecessary to store
the same string twice, even if it's possible that the compiler is smart
enough to eliminate the duplicates.

Either way it doesn't make much difference now, but we may want to add the
intro strings to the getTextString() mechanism eventually. In that case
most of the credits would be duplicates, for instance.

svn-id: r16560
"
"139f57a29d27a1c148563a7c8f729f7c3b3e4f3e","2005-01-15 13:41:57+00:00","Use the same hard-coded cursor image and colours as the original ITE
interpreter. Supposedly these colours will stay fairly constant throughout
the game, in which case we no longer need to repaint it with the 'best
white' colour every time the palette changes.

svn-id: r16561
"
"2f20dd57c2da6507a65811ce14cadb4bef1012ff","2005-01-15 20:12:49+00:00","some work in progress on verb stuff:
- many structers and fields renamed to proper names
- added missing functions

svn-id: r16562
"
"f7c14e04d275015b257c88ae2fb9758bcc8803a1","2005-01-15 21:33:56+00:00","Fix up/down arrows

svn-id: r16563
"
"fcad363886dd2d79bc39058ae5affe2b3098352e","2005-01-15 21:42:59+00:00","Get rid of the ConstString class

svn-id: r16564
"
"2d2cef23a02cd5cfca4246da30001f545efcd10a","2005-01-15 21:44:26+00:00","Not needed anymore

svn-id: r16565
"
"541076d8dbce579f1a47b5f181502a1e7f7708cc","2005-01-15 22:41:23+00:00","Added a convenience class 'Mutex'

svn-id: r16566
"
"aa9debccec0c30f32f63957c9f6465afadb56f84","2005-01-15 23:08:12+00:00","Forgot to commit this

svn-id: r16567
"
"fe424ed5ae36b0ac99d0f17ad563b57bed69cec5","2005-01-15 23:46:43+00:00","- added partial scene change by actor's walking (todo:entrance should be supported)

svn-id: r16568
"
"d541535ab6cdb38f8d6efba68411477adec136f5","2005-01-16 13:32:48+00:00","Cosmetic change, avoiding a hypothetical threading problem, see bug #1098864

svn-id: r16569
"
"608cfc0149178dda87bd299be1d0ccc7fbd00961","2005-01-16 13:34:43+00:00","Fix for bug #1098872 (FTDEMO: Memoryleak in SMUSH player)

svn-id: r16570
"
"34565795e86afe102c46d840e34844447c465521","2005-01-16 16:10:06+00:00","Slowed down actor movement a bit.

svn-id: r16571
"
"eb2bffd185c2d5f58c54bc77f7e974c0f1b92058","2005-01-16 17:06:40+00:00","sfPlayMusic() takes two parameters in IHNM. Since our current
implementation is only right for ITE, disable it for IHNM for now.

svn-id: r16572
"
"bf827cde1d20813253fc543039c0ed75b385c0b3","2005-01-16 17:07:27+00:00","Some more untested opcode fixes. (By the way, I was wrong the other day:
The first IHNM script does not use random branching after all.)

svn-id: r16573
"
"f9b4b2cd99000d57dfbcad9efc2927514e0f8d4e","2005-01-16 19:06:04+00:00","actors entry list implemented
test: in ITE type 'scene_change 130' at console

svn-id: r16574
"
"a230f60694c9b4cf43b263405af40c4f6adb9fec","2005-01-16 19:43:28+00:00","- some fix to previous

svn-id: r16575
"
"9d1f2b670e2bceae2cb8a608703c8549c2e59ab6","2005-01-16 20:30:57+00:00","-small pathfind fix
-pathfind speedup

svn-id: r16576
"
"d6ea15bf1f50f9167cbd228df9f99e9ed67becbb","2005-01-16 23:45:10+00:00","PocketPC issues were fixed on the 0.7.x branch, but which... ?

svn-id: r16578
"
"f8865304bde2e79d25727abebcbc33033b051598","2005-01-17 07:21:08+00:00","Initialize a few variables to fix Valgrind warnings. (I'm hoping they were
the reason the ITE intro crashed for me.) I still get read warnings in
Sprite::decodeRLEBuffer() though.

Also added a couple of hacks to keep the IHNM intro alive. Once we support
IHNM actors, we'll be able to remove them.

svn-id: r16579
"
"0b461c85062a42682b1075b9ed93572b588f4656","2005-01-17 10:57:15+00:00","Updated copyright header, as discussed on the mailing list.

svn-id: r16580
"
"46a8dd060fc471c31bd3c7d231f32a7ef02abb3a","2005-01-17 10:59:37+00:00","Updated Broken Sword 2 items.

svn-id: r16581
"
"9a31154db35f86115f15d76d6f08710da35fe4f4","2005-01-17 13:01:50+00:00","Add new SAGA issues.

svn-id: r16582
"
"8e93b45efe7f5b19143b3a6658dec8594d577089","2005-01-17 14:19:17+00:00","If the game tries to start a piece of music that happens to be playing
already, let it continue playing rather than restarting it. (I've been
meaning to make this change for some time, but now it appeared on the TODO
list as well. :-)

svn-id: r16583
"
"eea3c46049e31471a3b2291b6c8653e42e22e0f3","2005-01-17 14:21:03+00:00","Updated SAGA items.

svn-id: r16584
"
"32117397288624adb700dfdb6c6e71bbc5993cc5","2005-01-17 14:57:28+00:00","Whitespace changes

svn-id: r16585
"
"5200b8f1fa8df767cc74bc7df0f2429a6d984624","2005-01-17 18:49:00+00:00","o Proper implementation of sfPlaySound() which knows about CD<->floppy
difference
o Fix regression in Mac titles where scene LUT wasn't conversed
o Fix sound types in many games. Old Win demo is still wrong.

svn-id: r16586
"
"4cacb8d20caeb7264098845fef1329b61eec5bf6","2005-01-17 18:50:34+00:00","Add another SAGA item

svn-id: r16587
"
"dab894fdd49eef7a34f9f9f1c17c7c22741a1add","2005-01-17 20:17:06+00:00","First batch of converse implementation in scripts. To see it type
'scene_change 33' in debugger.

svn-id: r16588
"
"a5c87d3620bcc37fa7496025436b3494f3133ea5","2005-01-17 23:11:31+00:00","Now it is possible to lead a conversation with use of keys (1-4).
Things which are missing:
(a) mouse support due to incomplete interface implementation
(b) arrows do not pop up by same reason mentioned above
(c) scrolling does not work
(d) kReplyOnce flag is missing due to wrong threads memory implementation

svn-id: r16589
"
"4a55622d40fcd80184a66a030f13d3cc4deffb1c","2005-01-17 23:13:18+00:00","Update SAGA converse items

svn-id: r16590
"
"c9d0d4c840aac829d42bc5ec1b5b1e7f30b5a50c","2005-01-18 10:45:36+00:00","Initialize converse properly.

svn-id: r16591
"
"0b4fd4adbf88b1dac138e9ef55feefc7e2fd79ca","2005-01-18 11:55:31+00:00","- merged ActionMap and ObjectMap
- remove ActionMap.h & ActionMap.cpp
- ObjectMap names move to Scene::_sceneStrings as in original engine
- fix wrong StringsTable::stringsCount calculation

svn-id: r16592
"
"c1ce30b0bfa69aee3c91602536da8d2c5fa72e8b","2005-01-18 11:59:09+00:00","- remove ActionMap.h & ActionMap.cpp

svn-id: r16593
"
"b4b2e52df78fd309613d8df73f090b98e834969b","2005-01-18 15:01:21+00:00","another step in verb implementation:
- objectMap responds to mouse move  (but respond script not run well ?)

loadStrings add some special count check
- so all other LUT based resource should implement this technique

svn-id: r16594
"
"0ccf59faee053f4ea6c349d25bf39bb83e537686","2005-01-18 21:13:44+00:00","partly implemented game objects

svn-id: r16595
"
"9353d54f95baf1e0838850a181bbad8b43761d66","2005-01-18 23:15:41+00:00","implemented Sprite::hitTest
Actors & Objects can be hited

svn-id: r16596
"
"1b5e5981a62ceef659e19fa7548ca84068246f52","2005-01-19 00:02:25+00:00","fixed default verb issue

svn-id: r16597
"
"001bb7c74e0af1c407d26651f73353bfaca61684","2005-01-19 11:29:29+00:00","o Made ITEColors enum public in interface.h. Please use them. These colors
stay in each scene except intro and fade-in/fade-outs.
o Implemented status text coloring during work of auxiliary scripts.

svn-id: r16598
"
"6f565c0ad88c928e186d1e1f50281fa7c323b75e","2005-01-19 20:43:12+00:00","Fix type with BrightWhite color

svn-id: r16599
"
"ca58bfed3bb8a31bfd88b84ad376186b1ef83cce","2005-01-20 07:32:37+00:00","Fixed bug that I must have introduced during one of my cleanups. The
original code read 'LLogic.Logic_up( (*params*65536)+2);'.

I don't know where this opcode is actually used, though.

svn-id: r16600
"
"b9356bbe1485fa5744ce036bb72570b1574069d9","2005-01-20 12:56:27+00:00","Check for negative sound offset.

svn-id: r16602
"
"0228f1645f582213ef3e12f19df8e88e61891fbe","2005-01-20 13:59:12+00:00","Use the kITEColor constants for the ITE mouse cursor. Ironically, this is
one case where the original didn't use its own colour constants, so I had
to add a new one, kITEColorLightGrey, for colour 4.

svn-id: r16603
"
"58ec0f0aadd5228732a3c5915b9a94ec00e9cc53","2005-01-21 21:55:54+00:00","problems solved:
- Allow more than one script work at once
- Proper implementation of address methods

some opcodes may be broken - cause work in progress
todo: rewrite opcodes with new address functionality

svn-id: r16604
"
"ebe40f024e2c2717ad5d97fa30506f5ede97479b","2005-01-21 23:16:38+00:00","Fix compilation

svn-id: r16605
"
"e488ddc7c25a366d6cee417346b5d4f863d39e16","2005-01-21 23:18:32+00:00","Fix cursor shape.

svn-id: r16606
"
"899e476f014b608768b85af4f819268f32f9f385","2005-01-21 23:25:54+00:00","now you can try to:
- talk to someone
- look at something

svn-id: r16607
"
"1e07013f7f7b62247ce3d6af8f5d7dd09ea5c303","2005-01-21 23:35:33+00:00","Fix portability

svn-id: r16608
"
"93a64d3ebd238e7e456c87ea9d12f3042df3e59b","2005-01-21 23:44:34+00:00","some opcode fixes:
opReturnV

svn-id: r16609
"
"1942d19d07d2b817222d66bbcd092857220d4cd3","2005-01-22 01:09:51+00:00","Fix regression, bug #1107125

svn-id: r16610
"
"3b637456aad81702d8a61b7488e3d43c5d9532ea","2005-01-22 01:47:07+00:00","Set SFX volume correctly.

svn-id: r16611
"
"1d86d0599d171e34220424c8febee0532aefcc65","2005-01-22 02:01:22+00:00","Set SFX volume correctly

svn-id: r16612
"
"cde69caf63e2b24bfa7d7c45d36c5ade4b6a0bcc","2005-01-22 14:10:14+00:00","Fixed warning.

svn-id: r16613
"
"f3b62a9ed70c3161ec6af307d5b87b6df1013550","2005-01-22 14:16:00+00:00","Whitespace and indentation.

svn-id: r16614
"
"4e7d58c843680463b3c4d2cf39aa415dcfe024e5","2005-01-22 14:43:49+00:00","rewritten 15 opcodes

svn-id: r16615
"
"0030e821fe0e417d96387d52ba0c6acf56f93cfe","2005-01-22 15:28:24+00:00","another 19 opcodes

svn-id: r16616
"
"8543306e5617cd067c246f5b56a612bffc3fdfe7","2005-01-22 16:32:30+00:00","all opcodes revisited
all ITE opcodes supported (now we should go through scriptFunctions)

svn-id: r16617
"
"01a863414e6a7c795ba3367841a565f71733736c","2005-01-22 19:21:38+00:00","- removed returning value from scriptFunctions
- implement some scriptFunctions

svn-id: r16618
"
"4f68706f3ca05f882a616cb7277e1c68cd31130e","2005-01-22 21:40:54+00:00","implemented sfWaitWalk scriptFunction

svn-id: r16619
"
"81e9e0da7232bbcaad371affa9306d6338215b2d","2005-01-23 03:26:54+00:00","Fix compilation when vorbis is disabled and mpeg2 is enabled.
Pointed out by Michael Sterrett on irc.

svn-id: r16620
"
"8f51510deca23e98bf1625cd174b1dbcefa02a82","2005-01-23 14:30:59+00:00","Fix warnings

svn-id: r16622
"
"b646d63dad9fdd86fe7a989dff2e586891ee76b1","2005-01-23 17:06:15+00:00","Reenable stub for latter demos in sfScriptGotoScene()

svn-id: r16623
"
"7a1f9bc2da8c3b4c94155c6527674a9657fb84dd","2005-01-23 20:53:41+00:00","update

svn-id: r16624
"
"86dc6a3d850275de1635bc01243ec7fba3370b47","2005-01-23 21:52:43+00:00","Another spot of kReplyOnce usage. Thanks to proper memory addressing now
it is possible to implement.

svn-id: r16625
"
"212306044dbdb72ddb1b9381ef8a796b0aa93666","2005-01-23 21:55:13+00:00","Picky indentation. Main reason is to make version 1.100 :P.

svn-id: r16626
"
"ac30ac9dbd802bf781812d217e5cd8ce673bbbb9","2005-01-23 21:57:57+00:00","Update SAGA items. Now we have several things implemented :).

svn-id: r16627
"
"63ebdfa6c74f15b31f7bdd8e1c6dd15fff7ead77","2005-01-24 10:07:17+00:00","Correct sound offset size

svn-id: r16628
"
"99c00c9e5d85bc628a208f11c6197719c9e2ff1f","2005-01-24 10:10:50+00:00","*** empty log message ***

svn-id: r16630
"
"ed6408f853a53a0a7538f36107e333ca0a944aac","2005-01-24 10:22:05+00:00","Updated SAGA items.

svn-id: r16631
"
"b0c35b4d4ccabfde3d6dff645a64b260efeb9a36","2005-01-24 10:59:44+00:00","Correct aksf/akst pointer when sequence found.

svn-id: r16632
"
"b86423f8982d1e55ad43904c7809a7c1a200d983","2005-01-25 07:27:14+00:00","Added a 'value step' parameter to the Slider widget class so that clicking
beside the slider handle can move it more than one step. (When the volume
range was 0-14 or 0-16 this wasn't needed, but now it's 0-255.)

svn-id: r16633
"
"3623ca46371d6f46b9397801d61c47d18a3a79db","2005-01-25 07:55:09+00:00","Corrected the comment: the savegame filename does not include the path at
this stage. (So 128 characters is probably excessive, even if the SCUMM
engine uses 256.)

svn-id: r16634
"
"cfe996642cbc0088c4d157a712b773a26f975a58","2005-01-25 08:15:49+00:00","InfoDialog can assume the screen is 320 pixels. In games where it isn't,
the dialog will be scaled to the appropriate size and position. This should
fix bug #1107817.

svn-id: r16635
"
"8bfbc143a817730b8d9aa37c71e0638af9009b62","2005-01-25 18:16:02+00:00","The sfRand() script function was slightly wrong

Old behaviour:     0 <= random number <= param
Correct behaviour: 0 <= random number < param

svn-id: r16636
"
"6c5f3ee21a98ae911238ab7858c902765f8101c0","2005-01-25 21:24:00+00:00","update

svn-id: r16637
"
"beb5395d545233171544daf12838e80e667a0a83","2005-01-25 21:36:01+00:00","fixed volume channel in fade track

svn-id: r16638
"
"065a27daab1ef753f9b1e9c28d7d8d3c2c25e7a2","2005-01-25 22:21:26+00:00","added support for compressed bun files

svn-id: r16639
"
"284c209badda4793be651f0d3483044694419d91","2005-01-26 11:01:41+00:00","Fix bug #1109687 buffer overflow causes crash from env-var HOME and some
other places with such overflows.

svn-id: r16640
"
"55aa56dbdcdfe773ff4eb54f0dbb76b09897cda7","2005-01-26 14:11:27+00:00","fix for compressed bun sounds

svn-id: r16641
"
"4aa9f43879bb3dbbdf329212af904a7d44f31187","2005-01-26 14:14:51+00:00","Add swedish freddi

svn-id: r16642
"
"d1713410f2462ebdb7c601dab0fbf46803b2f74c","2005-01-27 12:08:09+00:00","fix for shadowed variable

svn-id: r16643
"
"5a0085a5814c3e1f518d379697e34d12ed54269e","2005-01-27 12:23:36+00:00","Fix regression with 640x480 HE games so it will not let them scale above 1x.
Though I _don't_ like this fix. It looks like a dirty hack to me. There
is something completely wrong with our logics here.

svn-id: r16644
"
"79c3049c1c95732e579aef071a8d68cac4ca19cb","2005-01-27 13:08:56+00:00","Add some HE md5s.

svn-id: r16645
"
"46c2a49e86c35edade619fe1214fa3565ce42080","2005-01-27 16:48:30+00:00","fix for shadowed variable

svn-id: r16646
"
"0523480a7068e4a04ad030e172539632f648b099","2005-01-27 20:07:04+00:00","Applied patch #1106775 'SAGA colours'. This simplifies code considerably, and
moreover getBlack() didn't always work correctly for some reason. If IHNM
uses different colors we will switch to variables, but that could be addressed
later or at least when someone will start to work on it more time than now.

svn-id: r16647
"
"c579205c622d5319111614d0fcda96c5cbe87345","2005-01-27 20:17:45+00:00","Add yet another SAGA item

svn-id: r16648
"
"87a6768009d5fda7deab0a205b9535b302b776c5","2005-01-27 21:25:57+00:00","update, fix endlines

svn-id: r16649
"
"c0c9a68fe5d5a61ec53774249e678385aef283ac","2005-01-27 21:29:29+00:00","emsvc4 need public access, hmmm...

svn-id: r16650
"
"dd2f9da1a84e722d850747756f57cd273d435a7f","2005-01-27 21:34:21+00:00","fix compilation

svn-id: r16651
"
"ad53c8c9a4f757c72a98a14cffd95afc7cf44b7a","2005-01-27 21:35:14+00:00","port change from branch

svn-id: r16652
"
"285f6a6a2bf00217d43267fc9bc643201e29fed2","2005-01-28 03:47:12+00:00","Let IHNM run again. It has 105 script functions.

svn-id: r16653
"
"7f077369e657097dc9372da2265c4e4311abd7a1","2005-01-28 10:40:59+00:00","Fix warning introduced by previous commit.

svn-id: r16654
"
"a5a02d3f43bd98b1197515403f75006fe03311c6","2005-01-28 10:58:02+00:00","clear compressed entries before restore for compatibility with old savegames

svn-id: r16655
"
"730aad6a86f4a509afe50fb324105b389917fb9a","2005-01-28 11:03:34+00:00","added support for mp3 compressed bundles

svn-id: r16656
"
"9171951cf9ca2fd26a32db35240c45253d9f17f6","2005-01-28 11:16:21+00:00","ah, forgot that

svn-id: r16657
"
"e891988298ccc9077bf802fbacabbff36cd5a9b5","2005-01-28 11:21:38+00:00","double check

svn-id: r16658
"
"ad7cc6cef492aced6d695b945a93f639a3815756","2005-01-28 11:43:25+00:00","add checks for mad and vorbis define

svn-id: r16659
"
"ac06b418946773d49341d9b7ac3404e3ec0998b4","2005-01-28 11:51:57+00:00","fixed restoration of sounds params after cross non/compressed bundles

svn-id: r16660
"
"9d64850be203804a8eb9355e707094174a245a45","2005-01-28 11:59:08+00:00","added support for mp3 compressed tracks

svn-id: r16661
"
"ff8094aad52d817f32cd0698ccf6fb38184e5752","2005-01-28 12:54:09+00:00","Combine actordata.cpp and objectdata.cpp into itedata.cpp. These are
ITE specific and from other hand IHNM has these data in resources.

svn-id: r16662
"
"912c66997797218dfc5fd332b18827288a8b4e08","2005-01-28 14:42:47+00:00","added error message for lack of library support

svn-id: r16663
"
"dcbe77c579ca9f060ab295d28208b0dcfa5934fa","2005-01-28 14:46:12+00:00","fix VC7.1 compilation

svn-id: r16664
"
"fd6c178842c9e42db6d02de847bb54233ae3e1d4","2005-01-28 14:52:45+00:00","updated

svn-id: r16665
"
"d25ac7c9515df23542e5d2739e4e52c431908a3e","2005-01-28 14:55:52+00:00","Indentation

svn-id: r16666
"
"6feb7ae90f38c11b85868c54fb5b328d50844856","2005-01-28 15:04:37+00:00","more proper checks

svn-id: r16667
"
"c0a3816e1790182b7b4b3854846f01247b00ebbe","2005-01-28 16:33:14+00:00","Began what I hope is the final major restructuring of the BS2 engine.

In this first step, I have moved all opcode functions into functions.cpp,
instead of having them scattered all over the place.

To get things to compile again, I had to rewrite the overly complicated
sound effects handling. It's much simpler now.

The next step will be to move any non-trivial code out of the opcode
functions and into the appropriate object. This, I hope, will make it
easier to create well-separated objects, instead of the current mess.

I also want to tear down the artificial boundary between the main directory
and the 'driver' directory. We already have a cross-platform layer; there's
no need to have yet another one. (Actually, the rewriting of the sound
effects code took one first step in this direction.)

At the final stage, I'd like to get rid of the 'drivers' directory
completely, but I'll probably need some help with that if I want to
preserve the CVS history of the code.

Things will probably be a bit bumpy along the way, but I seem to have
reached a point of relative stability again, which is why I'm commiting
this now.

svn-id: r16668
"
"ada210b673af7bc579c1d53864cfb9b288447e44","2005-01-28 19:09:49+00:00","updated

svn-id: r16669
"
"aeaf728dc662b80b6f6e377db67ddb3ac4f9cacb","2005-01-28 19:25:41+00:00","partialy implemented all Iso mode resource loading
todo: loadMulti - may be wrong

svn-id: r16670
"
"2f8f982f7d3c04c0607252925163bba358002af4","2005-01-28 20:46:36+00:00","Add medium quality sound for FOTAQ

svn-id: r16676
"
"1160e09fdc992439c9bfa956e9dd8a8e722ddbc9","2005-01-28 20:47:50+00:00","Fix return for HPC compiler

svn-id: r16677
"
"c62d82450b7fc4d64bf6102cb8074457e3d0cb47","2005-01-28 20:49:41+00:00","Add isalnum for HPC compiler

svn-id: r16678
"
"abd12dd1b63d9e680bdc157fd5aa1fdb579e111e","2005-01-28 22:05:51+00:00","Use class Mutex instead of MutexRef

svn-id: r16679
"
"577b04aaade063db87ce93649de77ce2fe795fcf","2005-01-28 22:10:56+00:00","Fix compilation with mpeg2 disabled

svn-id: r16680
"
"83e9ca19dfd88c6724a4b413164711613a39ef1c","2005-01-28 23:30:51+00:00","Fix mp3/vorbis detection

svn-id: r16681
"
"4b3dda61841aed720d3d104c727f7e96cd04f3c2","2005-01-28 23:41:50+00:00","Update project files. Please do not convert to Unix style carriage return as it breaks the build on my configuration :)

svn-id: r16682
"
"bf55edd72a321c2419c697a60c4a3c6d6d7908f3","2005-01-28 23:45:53+00:00","Update to latest branch fixes

svn-id: r16683
"
"259865ed46d7f4f1bac3ef5269ea3cf5eba8d777","2005-01-29 02:36:33+00:00","Fix HE Mac target names. They should be same as DOS/Win.

svn-id: r16684
"
"327e5175ff60f2745c458950994e8e98d8f8d905","2005-01-29 03:01:39+00:00","Fix typo

svn-id: r16685
"
"6b6830c688dda0fc10187fb5b049e088664acb00","2005-01-29 03:12:48+00:00","Add detection of HE Mac titles which use different naming scheme.
Committed for review/criticize. No further support by the engine, i.e.
detected games will not run, but most complex task is done. Will finish
it tomorrow unless some nasty bugs will pop up.

svn-id: r16686
"
"cd5aef92f0c92cf458bb93e1c1944352a96bf8a0","2005-01-29 03:49:15+00:00","Add a few

svn-id: r16687
"
"96750ceda37b3c4273d6abcf0ba005b1b8ba20f0","2005-01-29 04:23:46+00:00","Add a few more

svn-id: r16688
"
"98e25fb8486fa3597c0d538385a007b4140fcabe","2005-01-29 04:47:16+00:00","Add freddi's.

svn-id: r16689
"
"169599fc5d8139a8a9c881c6e411bffc204beb08","2005-01-29 05:11:30+00:00","Last few added.

svn-id: r16690
"
"b6ea4493357bd0c5bd9527979da0919b9dcda705","2005-01-29 15:49:57+00:00","Renamed _localScriptList to _localScriptOffsets for clarity

svn-id: r16691
"
"04fc9fe6e744663fc9cc27c325be0a282b72ec3c","2005-01-29 16:30:51+00:00","Started to merge the text editing code in ListWidget and EditTextWidget

svn-id: r16692
"
"66c524f0eec53790f9a8c88b58caa94dac677720","2005-01-29 17:58:47+00:00","Add support for Humongous Mac titles in native format. Please test :)

svn-id: r16693
"
"b43a53f74d0dbbd8f74ba64a2548c0005ae5442b","2005-01-29 18:04:34+00:00","Move more text editing code into class EditableWidget; ListWidget now has all the editing capabilities of EditTextWidget

svn-id: r16694
"
"24248fe79e17dde5f50a618e266d3cff615d130b","2005-01-30 00:38:18+00:00","Switch airdemo checksums, only a single HE71 version.

svn-id: r16695
"
"df3734bddb51ced21ef37e850a3572a43cb05cf9","2005-01-30 00:57:51+00:00","Only HE71 demos were on puttputt CD.

svn-id: r16696
"
"3c1934cc8ffbe3f80f7aae56dbf39c71e2cbb85e","2005-01-30 01:07:22+00:00","Singe HE71 version of freddi too.

svn-id: r16697
"
"399dcad5bdb08193e3e384ef8d999daae1dde17b","2005-01-30 02:00:24+00:00","Skip cursors in Macintosh version of HE72 games for now.
Add early Macintosh HE games.

svn-id: r16698
"
"ee3baf60ec7c960de8a416be079a669a57734a74","2005-01-30 02:06:41+00:00","Speech filename difference in Macintosh version of HE60 games.

svn-id: r16699
"
"8c1cb5ae512f6f4c61ce75b152532aca910166c6","2005-01-30 04:55:47+00:00","Add updated Cheese Chase

svn-id: r16700
"
"414e2c0a3f73568e921c10134a812198af942b6c","2005-01-30 05:00:20+00:00","HE100 difference

svn-id: r16701
"
"85f8b9bb93902d0e8b0b88335aff7c9b6961696f","2005-01-30 05:11:04+00:00","ADD HE100 version of Balloon O Rama

svn-id: r16702
"
"f23cf81ace8456ddf8a3d5aff223ffdaabe2680c","2005-01-30 05:34:04+00:00","HE100 difference

svn-id: r16703
"
"a05b4a5e2dbd540a637c022fd0d9317e0386dbe0","2005-01-30 07:00:50+00:00","Add missing cases/corrections

svn-id: r16704
"
"0199bf70fe9e5d94666b876eaa5dbab3bf5008d8","2005-01-30 09:11:38+00:00","Music regression in some HE games.

svn-id: r16705
"
"bebad400d6cbbf38f8664bc1f2a5afea5716e93b","2005-01-30 11:03:49+00:00","Check sound queue for music in HE games.
Avoid extra sound channel.

svn-id: r16706
"
"339df486e1a3d9ff5546c17e998521af504510cc","2005-01-30 11:10:50+00:00","Ooops

svn-id: r16707
"
"b9646d35d340627b47accfd1bc0f8c2da784a473","2005-01-30 20:38:54+00:00","added a basic cursor cache for win32 HE70+ games

svn-id: r16708
"
"292eaa08b0b0f0b9082c61326d89fa1f8c3b382a","2005-01-30 20:45:02+00:00","added support for *.map files version 2

svn-id: r16709
"
"a21f5b50d3b3dd11c9c3ac0b47dc56e7874eede3","2005-01-30 20:50:18+00:00","mention the fact that amiga FOTAQ isn't supported

svn-id: r16710
"
"09d0d6c26d311e7fc2620ad5d978d9b64c3bd612","2005-01-31 00:16:11+00:00","Changes for Macintosh filenames.

svn-id: r16711
"
"0c827c0fcf43a764f0e9176d23ccf4567282934a","2005-01-31 00:27:31+00:00","Add comment

svn-id: r16712
"
"c32e93672363c2b38b1a636498ce7930864d25e1","2005-01-31 03:53:35+00:00","Support for Mac cursors.

TODO:
o Allow reading from non-processed game executable. Now you need to get
.bin file out of it
o Use color versions of cursors
o Combine MacResExtractor with Win32ResExtractor. Now I just stupidly
create 2 objects and do not use new cursor caching code.

svn-id: r16713
"
"b1886d1f9a309ac6b9acc7b076dfbf34350307f7","2005-01-31 04:04:04+00:00","Remove debug output and improve error messages.

To clarify my last commit message. I _do_ work with unprocessed files.

Just I happened to have one demo with resource fork stripped from game binary.
It was told that sometimes Mac conversion programs on intel platform silently
strip it down. Now I fail with error message, but we may use some fallback.

At least we need to know a standard way of copying binary files with resources
unstripped and describe it in Mac HOWTO.

svn-id: r16714
"
"3891fbdfd58f07460385ad57ca26ba8f655b0253","2005-01-31 20:12:10+00:00","HE version correction for 'dog'. Game is fully playable, just columns' palette
is wrong.

svn-id: r16715
"
"2b8fb48833e9cc50c5971ac6f614764f0328d096","2005-01-31 21:22:15+00:00","Yet another correction to 'dog'. Kirben, please check it as you have different
version than me. It seems that the game was released on multiple engine
versions.

svn-id: r16716
"
"5178ba2104b061609353745aefd118b51250e95b","2005-02-01 04:58:14+00:00","Add HE100 version of Pajama Sam 1/ Pajama Sam's Lost & Found.

svn-id: r16717
"
"0c35b4f4fd08fcade459c69c364c144df89f77aa","2005-02-01 05:10:46+00:00","HE100 updates for lost

svn-id: r16718
"
"7897d0d93d6060265ea4bc7baeae1574a29d3513","2005-02-01 05:19:27+00:00","HE100 updates for lost

svn-id: r16719
"
"2bb2e5279b6907ce819925853a123919b6031195","2005-02-01 06:37:30+00:00","More HE100 diffs.

svn-id: r16720
"
"a0ef9b4d7888cdc354e866f16d30cb6186f8cb77","2005-02-02 00:07:39+00:00","Updated with my collection. Still some may be missing.

svn-id: r16721
"
"ff7e16dc2bad56f1cc3d2ae71754668783e5354e","2005-02-02 00:32:02+00:00","o Added few targets
* baseball2003 and Soccer2004 use Bink videos but just for intro movies and
logos, so we may add them.
* artdemo and readdemo also use Bink, but seems that additionally it uses
them in cutscenes, but since there are just few of them, not like in
full games, we may try to look at them too
* SoccerMLS is (alsmost) working. It runs the intro, shows menu, lets
to select from it but then fails at some Wiz stuff and there is no
hotspots to choose. I think it may be related to overall HE99 problem
with inventory where there is a bug preventing from item selection
o baseball2003 and Soccer2004 featured new LECF index block. Add stub for it
o SoccerMLS used kernelSetFunction 2001 in intro. add stub for it
o Alternative russian freddi3 uses badly formatted logo substitution in intro,
so error() in default case in Gdi::drawBMAPBg() was replaced with warning().

svn-id: r16722
"
"b708a196e979ef7220b0dbfe96c8bc51073a61cb","2005-02-02 00:36:36+00:00","Add some HE targets and some Russian versions.

svn-id: r16723
"
"e2678369d11d23a801cfd4d2ee9cf7496e3563fc","2005-02-02 03:45:45+00:00","These demos make use of Smacker.

svn-id: r16724
"
"46f77bdbbf59162d4e6a0659410371a6bea28bb2","2005-02-02 03:46:31+00:00","These demos make use of Smacker

svn-id: r16725
"
"291dc78d9c3f135742f6a5024d0ef469b16a8c82","2005-02-02 03:53:31+00:00","List HE games uses bink or smacker in separate files.

svn-id: r16726
"
"b88370ccbe5b86f8623597720842fce8a2fa8e51","2005-02-02 04:00:30+00:00","*** empty log message ***

svn-id: r16728
"
"f63a433c3dd7491e28deb4647ea7281dba0ff5c8","2005-02-02 11:49:58+00:00","Small correction to baseball2003

svn-id: r16729
"
"8e9b6da08d09b4e6a2062e374974353f796b858d","2005-02-02 11:52:28+00:00","Forgot to add baseball2003

svn-id: r16730
"
"cc708339eaea6dbd85ba7ca607530129381f8461","2005-02-02 12:05:00+00:00","Merge two opcode, move two opcodes back to HE70.

svn-id: r16731
"
"33adc550764b698950f2e1f70ec9525d687e27b1","2005-02-02 12:14:34+00:00","Ooops

svn-id: r16732
"
"9a44a6b33363d218e9be74f260ff178841a124fe","2005-02-02 23:24:51+00:00","correct typos

svn-id: r16733
"
"99c022d6a388987a3a7fd413d1778333cd4b7430","2005-02-03 14:43:30+00:00","Add suppoert for coloured Mac cursors. Though they're disabled at the moment.
The reason is that they use their own palette which could not match current
global one.

Now I have to turn back to that old OSystem patch and render cursor on a
separate surface and extend OSystem with yet another optional call
setCursorPalette.

svn-id: r16734
"
"b33963b452cfead1cefcdafe03b9eecc13235c0e","2005-02-04 16:34:08+00:00","Some HFS dumpinf programs write files with resource fork to .bin file.
Support that. Also support separately dumped resource forks. File name for
those has .rsrc extension.

svn-id: r16735
"
"d261e3c9d3b549cb5b2deb83a870fad8db6f69cb","2005-02-05 15:43:33+00:00","Removed unnecessary empty line.

svn-id: r16736
"
"ac72fcd63dcf0684ffbd4b8c0f133fb8767a0953","2005-02-06 10:09:37+00:00","return null if sound is not found

svn-id: r16737
"
"683e934908ac90253e25f78d3f8d299d122b136b","2005-02-06 16:51:57+00:00","Removed pointless debug calls (they just cause overhead)

svn-id: r16738
"
"8525d73e9b16546a2ceee6c12005811089ba6da2","2005-02-06 17:21:31+00:00","Configure the plugin prefix/suffix in the configure script; use that setting in plugins.cpp

svn-id: r16739
"
"04d0bfaae7435a307c5ef69e1af900f4a276275c","2005-02-06 17:27:56+00:00","Add some plugin specific TODOs

svn-id: r16740
"
"317358ea488702683082e40d3d9ee13a81c62a6d","2005-02-06 17:45:16+00:00","Need to use = instead of :=, since EXECUTABLE gets defined *after* PLUGIN_EXTRA_DEPS

svn-id: r16741
"
"028cc42f2b8e453be5d6f0dd2a65556dbf3d6911","2005-02-06 18:12:29+00:00","Moved the console font from gui to graphics

svn-id: r16742
"
"a1b058897d0fcfe1ae7a372ed6d779fdacaeeaa3","2005-02-06 18:37:23+00:00","Remove the OSX-restriction on FilesystemNode::getNodeForPath() for now (I don't like it, but until a proper solution is in place, it seems to be the best thing to do)

svn-id: r16743
"
"4e66139a4e3d33fce662ad572fca26f49a5d9de4","2005-02-06 19:00:59+00:00","Added String::hasSuffix and hasPrefix

svn-id: r16744
"
"490bba8ecb318f8fd252296b79eee853615cda2f","2005-02-06 19:01:23+00:00","Add testcases for String::hasSuffix and hasPrefix

svn-id: r16745
"
"86370fa544a0fad0d45dc938b2986c0e80add289","2005-02-06 20:31:20+00:00","BS1 specific fix for bug #1107121 (ALL/SFX: Setting the SFX volume at 256 mutes sound)

svn-id: r16746
"
"cda823ea63243df943daac5b2ee35e86fe43856c","2005-02-06 20:35:06+00:00","It's kMaxMixerVolume, not 256 (we might change it to 255 eventually)

svn-id: r16747
"
"00670e2c23e2a7e4b59f32152ebb9441089e0d47","2005-02-07 10:51:48+00:00","Fixed crash that would happen if the game tried to play music from CD1 and
CD2 at the same time. There will eventually be a better fix for this, I
hope.

svn-id: r16750
"
"cc3540a00dd5142324d634a1fd5842d6bcd06c1e","2005-02-07 10:53:03+00:00","Updated BS2 section for 0.7.1.

svn-id: r16751
"
"d6be4f03a7491530f5a2e944aa96c49855002b90","2005-02-07 14:25:04+00:00","Added getNodeForPath() so I can compile ScummVM with MinGW again. Since I
don't know where it's used, I'm not sure if it works correctly.

svn-id: r16752
"
"fe3e01a11044ded5079412680c0e0b921c1e6b80","2005-02-08 08:32:50+00:00","Now there are two file handles for the music: one for each CD. This is not
the same thing as one for each music stream. If both music streams are
playing music from the same CD, they will both take turns at using the same
file handle.

The only case where both file handles are used is when music from one CD is
fading in while music from the other CD is fading out. Which of course can
only happen if you play the game from hard disk. If the game has to ask for
the other CD, it kills the music immediately.

The reason for doing this is that there was some concern about whether
having two file handles open to the same file was portable or not. I don't
think that question was ever fully answered, so I avoid the situation.

svn-id: r16753
"
"7136b50fff46eff882dc6157216576d5faaffcdf","2005-02-08 11:17:36+00:00","Minor updates to HE100

svn-id: r16754
"
"5fd5428ccfc89427f1ad2c1aba009bc7892b5232","2005-02-08 11:21:10+00:00","*** empty log message ***

svn-id: r16755
"
"71690ef0bfa353f6001be52c355bf7b3db0fa609","2005-02-08 21:39:21+00:00","Fix bug #1118854

svn-id: r16757
"
"6fdd9e2d3139d5ef580212388cd4634ea5fc616e","2005-02-09 00:25:43+00:00","Patch from Quietust:
Add another two sounds for Amiga version of Zak McKracken

svn-id: r16758
"
"e7c6ea42aed7b2749638513803b8988c1d1cace4","2005-02-09 00:36:15+00:00","Patch from Quietust:
Add comments and misc changes to Amiga V2 player.

svn-id: r16759
"
"0da123d601a4803f90032ee429914622e4dcefe0","2005-02-09 03:26:08+00:00","Portability fixes.

svn-id: r16761
"
"a13e8a98ff506c100b014ccf7e4b077012c94b50","2005-02-09 12:17:34+00:00","spelling

svn-id: r16762
"
"ea78766c46041f9252e6b058f736503e6458f03d","2005-02-09 20:30:45+00:00","first step in ISO mode implementation - trying to draw iso scene

svn-id: r16763
"
"a9ceee26d832178f94f37b592a11e8ac24021c47","2005-02-11 03:45:10+00:00","Turned HE Mac resource filename generator into generall, whole SCUMM-purpose
method. Right now it is used to eliminate those Windows HE titles which
have different target base names.

If you want to use it, then define another entry in substDataFileNameTable[].
If your version with different base name has other features then you need
to define GF_MULTIPLE_VERSIONS for main entry and add any additional
entries to multiple_versions_md5_settings based on MD5 of the entry.

svn-id: r16764
"
"1ed02817b89cba6b5f7594cccb0329c775ebe6fc","2005-02-11 03:49:06+00:00","Renamed eliminated HE targets. Now bgbennyboy should be happy :)

svn-id: r16765
"
"b4295347f8d6b1697c08612f46a8e4628d452c09","2005-02-11 04:08:21+00:00","Few more targets eliminated. Though they never existed. Need to check this
with joostp.

svn-id: r16766
"
"5c7e688049fe5664375bf0e559cd4a909002a4a5","2005-02-11 04:10:05+00:00","Eliminated more targets and fixed couple mistakes

svn-id: r16767
"
"0851c89aa35b8ab265b81febcc8e55c87e123e9d","2005-02-11 04:17:24+00:00","Sorted multiple_versions_md5_settings[] table to ease maintenance.

svn-id: r16768
"
"7d9a5d7ffafa5eaa78cf85e0b7c3e6e43d31455b","2005-02-11 04:32:59+00:00","Update

svn-id: r16769
"
"420712fb283f5cb20471894b81f0a2392e583b56","2005-02-11 08:17:23+00:00","Added 'PuttPuttTTT' as an alias for 'putttime', since that's what my copy
of the game uses. (Unfortunately the data files do not all use the same
capitilization. Some are named 'PuttPuttTTT'-something, while others are
named 'puttputtTTT'-something.)

svn-id: r16770
"
"6565ed2871601a2954986b6c25bcad980109b35c","2005-02-11 11:14:33+00:00","Make rnc unpacker a member of Disk class so it reuses the same object, and change rnc code to only build the crc table once instead of for every unpack operation.
This should speed it up a bit.

svn-id: r16771
"
"7ea113dbb1d22dd3ac4b055e35b807734c683a9e","2005-02-11 13:29:15+00:00","Renamed substDataFileNames to substResFileNames. Just forgot to do it last
time.

svn-id: r16772
"
"9497fddcf05a22e22f614d8b88e2c6226e52cd36","2005-02-11 20:43:48+00:00","iso draw work in progress:
- try keyboard arrows on iso scene
- todo: horizontal cliping

svn-id: r16773
"
"5239c2f4777d7f06fae59dd1750d70c4e56a855c","2005-02-11 20:59:29+00:00","- fix min->MIN
- implemented horizontal tile cliping

svn-id: r16774
"
"3cdf46635e12d9145d4cfb26bec5ecfc6b81e93a","2005-02-11 21:32:32+00:00","Add HE wiz-specific item.

svn-id: r16775
"
"509d7b4d45b369814fd8d073afbeb7440d6194eb","2005-02-11 22:18:37+00:00","- smooth iso scroll

svn-id: r16776
"
"ce832686a086a320caf99624786612fe95744aad","2005-02-12 14:16:17+00:00","fixed warning

svn-id: r16777
"
"4a0887f34d3fb4a50af4dd17d45196b47dabb703","2005-02-12 14:38:42+00:00","update

svn-id: r16778
"
"ddd97c96da9e647ab80c96b2cd672d9464d75d29","2005-02-12 15:00:16+00:00","fix/workaround for bug: 1120625

svn-id: r16779
"
"a43f4bead845f499ecfe6f111850619ebe344c05","2005-02-13 06:54:03+00:00","Added new Russian HE titles.

svn-id: r16780
"
"bc206cf21fe70cd5e51935f38833b48b51e25cc7","2005-02-13 06:59:17+00:00","Add three new Russian games.

svn-id: r16781
"
"cfdde90be0a8f52c204129dce8a4c0a049402ce3","2005-02-13 07:16:44+00:00","HE version correction for russian spyfox

svn-id: r16782
"
"142a646da0dc44a40a54c6a7a92a0117c6c96d10","2005-02-13 23:32:49+00:00","Fix typo in football substitute.

svn-id: r16783
"
"40768ac29dc8c02bb5815e331f2fb72167657ea9","2005-02-14 03:12:41+00:00","Add basic support for DISK index block in later HE games.

svn-id: r16784
"
"0439ab507f7f1e58dbff164d32b1f57cb12bd8dd","2005-02-14 07:15:16+00:00","Add opcode

svn-id: r16785
"
"23d02ee03f894b5da60cb354dee3e85d16f1b49c","2005-02-14 07:21:17+00:00","Add opcode

svn-id: r16786
"
"993ae4a3e6d5ca6f195a7b2075b46f0bf6e356c3","2005-02-14 08:58:02+00:00","Add opcode for HE100

svn-id: r16787
"
"a8520f4fe60b66b8793d5f237d6cb7b40bddaa66","2005-02-14 09:00:30+00:00","*** empty log message ***

svn-id: r16788
"
"0e1a22729b168e284778b23ac72389895453438b","2005-02-14 10:02:34+00:00","Correct sound TAG for Backyard sports games
Fix memory leak.

svn-id: r16789
"
"94f76a8f05223a2fa6b89aec61f422a101472d27","2005-02-14 10:06:22+00:00","Update comment

svn-id: r16790
"
"39b83ba8cf95c3c42c3c4ca03a4b3fbde481de47","2005-02-14 13:44:19+00:00","Add addiotnal decode type in later HE games.

svn-id: r16791
"
"c49642bb8b1e674fe22812148739dc28c058b003","2005-02-14 21:19:00+00:00","o Added 5 updated Russian freddi-related titles.
o Fixed ScummEngine_v72he::o72_openFile() so autogenerated names also
checked for substitution.
o New case 0 in o100_actorOps() used by Russian updated freddicove. Number
of stack items weren't checked against disassembly

svn-id: r16792
"
"9f1b541c257e75afce4b5499a69ec92952ed51ee","2005-02-14 21:19:47+00:00","o Added 5 updated Russian freddi-related titles.

svn-id: r16793
"
"94daa9dbccecf1a89b5136898170ee753a690b5d","2005-02-14 21:34:31+00:00","o Added 5 updated Russian freddi-related titles.

svn-id: r16794
"
"32ea1644a5d140f2bd818c8c5adbb794be01fe44","2005-02-15 03:32:07+00:00","Fix crash in updated Russian freddi1.

svn-id: r16795
"
"e3ed9f7b3200709399c73d87035533f602842b0e","2005-02-15 08:15:35+00:00","This should keep ScummVM from trying to free invalid pointers. I hope.

svn-id: r16796
"
"d1f6a405830b5f55e6573637e13b6e50aa8ecfc7","2005-02-15 10:32:55+00:00","Re-phrased comment to make it sound more like the fact it is and less like
a 'FIXME'.

svn-id: r16797
"
"e78de67c54c3afd8561e9b3f28a82d6e660614d5","2005-02-15 17:56:32+00:00","- Fixed what I understand to be a check to ensure that sysex instrument data wasn't sent to the rhythm channel. It was preventing instruments from being written to part 8.
This fixes the window crashing sound in the intro of the floppy version of Indy 4, and possibly other things. Hopefully it breaks nothing.

svn-id: r16798
"
"e1323556c3ebda975e304597b1e5fcb2ca7f9d65","2005-02-17 01:22:31+00:00","Correction number of actors in a few HE games.
VAR_NUM_ACTORS doesn't always have the correct value.

svn-id: r16799
"
"78ee0bfdaf00a6d03717bc06112034bcc663c1f0","2005-02-17 23:01:00+00:00","Mouse part of big patch #1013937 (OSystem layer with bigger resolution)

svn-id: r16800
"
"def8641e1f748a193db6afe060729ef242883409","2005-02-17 23:10:33+00:00","Mention new cursor code.

svn-id: r16801
"
"bbbd3b5fbf1230e681fad01e80717bc1785e0d09","2005-02-18 00:00:00+00:00","iso mode drawing work in progress

svn-id: r16802
"
"05f4bf51510cba098d6073eddea885f903b7847d","2005-02-18 00:13:37+00:00","removing ZLIB_WINAPI from scummsys.h
ZLIB_WINAPI macro needs only than you want to
build VisualBasic compatible ZLIBWAPI.DLL with
WINAPI(STDCALL) calling convetion.

svn-id: r16803
"
"695b0fcb5fab7803340c23c27e36940ce98a886c","2005-02-18 00:28:56+00:00","Fix a small bug (wrong mouse cursor is briefly shown) in the F5 menu

svn-id: r16804
"
"663308f61f4976b0fa235ef6986d0104cea7ddbf","2005-02-18 08:04:50+00:00","after Andrew removal ZLIB_WINAPI from scummsys.h
I need that for msvc 8.

svn-id: r16805
"
"5aa2ea2d44711805b3a04028d8c767ef6b58a80e","2005-02-18 16:50:51+00:00","Forgot to check if preFetchCompSpeech() could find the speech file. Now it
will work even if the file is missing. (This only affects the cutscene
player.)

svn-id: r16806
"
"c58cc5acaccc92f5a6d5cf6c52ebe253c6f202c8","2005-02-18 22:47:32+00:00","ZLIB_WINAPI is needed for smush decompression too

svn-id: r16808
"
"ae6f40ebb64aa80c18a61500e83ab63fd21de7ef","2005-02-19 00:24:48+00:00","Make cursor code more bulletproof

svn-id: r16809
"
"d3b74919e2d3ae8ed22c0e81c31c61048c8e18b7","2005-02-19 01:02:31+00:00","Update

svn-id: r16810
"
"0de5fa2f33147529edcf4dccd24a2750b23a2867","2005-02-19 12:05:50+00:00","mp3 support is allready done, flac will never be

svn-id: r16811
"
"43cfe01f3d8d2307a23933920cce43740871f367","2005-02-19 14:02:16+00:00","This is the second part of the BS2 restructuring. There are two new
classes: Screen and Mouse. Screen handles most of the drawing, except the
mouse cursor and in-game menus.

The old Graphics class is no more.

I've also fixed some 'reverse stereo' regressions from the first part of
the restructuring.

I'm not sure what the next step will be, but hopefully it will be smaller
than this one was.

svn-id: r16812
"
"373b33b22ad060a6ac2c6df2d6c72091672a13b4","2005-02-19 15:35:05+00:00","compatible version for wince

svn-id: r16813
"
"e2753574aca02a3da52c8bce675b95eb92216a74","2005-02-19 16:00:22+00:00","compatibility fixes for wince

svn-id: r16814
"
"3184c2de34c89a1b380fffa9f9ac83f53dc062d7","2005-02-19 16:04:03+00:00","compatibility for emsvc

svn-id: r16815
"
"27469a1896f08c6d32df1778dc7e9cce28c2bec4","2005-02-20 00:17:22+00:00","Patch #1121337 (CGA rendering in early LEC titles).
Differences against patch:
o Updated documentation
o Fixed text colors
o Implemented Hercules dithering

Ditherers are based on loom ega and monkey ega, so for zak and mm they're
wrong, i.e. these games look better than with original ditherers.

TODO:
Proper ditherers for zak & MM
EGA ditherers for VGA SCUMM v5 games

svn-id: r16816
"
"45f59cc610c44335c2bd7cce7d7b7d31f90a1715","2005-02-20 01:12:20+00:00","Spelling

svn-id: r16817
"
"b4780deac60054b515d28a124710e3da39301544","2005-02-20 01:37:47+00:00","(more) correct v2 ditherers. Still suffers from some differences and
text colors are not always match.

svn-id: r16818
"
"47400c1932451009c58b07df53a53621ad655879","2005-02-20 01:50:18+00:00","Restrict CGA/EGA/Hercules dithering to PC only.

svn-id: r16819
"
"f420dd3b785157e95f0dd6255bf35f88db1ec674","2005-02-20 02:04:45+00:00","Implement OSystem method disableCursorPalette(bool disable) as mentioned
in patch #1013937 (OSystem layer with bigger resolution).

svn-id: r16820
"
"04fdd5bc52a538d6835afede9a6026c4c282f1e4","2005-02-20 10:56:59+00:00","Add WIP sprite struct for HE games, ready for functions.

svn-id: r16821
"
"6d4eec5ecdb1c4321f44714dfb01b3da05277289","2005-02-20 11:14:50+00:00","Rename opcodes, names should be correct.

svn-id: r16822
"
"e4b51cbdf2c128562dcd487ef463a821442f87a7","2005-02-20 13:07:57+00:00","Add a few sprite functions.

svn-id: r16823
"
"6abdb969813e3a2e6c7f8dfe3fda8cdeb56fb54a","2005-02-20 13:26:30+00:00","Use sprite functions

svn-id: r16824
"
"79a04349716a45e01ef4ab89aac9ab1b1ab867aa","2005-02-20 15:05:18+00:00","Sprite flags and one rename in SpriteInfo structure.

svn-id: r16825
"
"b1039bb59e76912528dcf1ad439e70f3f1485a50","2005-02-20 15:33:14+00:00","Fixed warning, hopefully without breaking anything. (GCC doesn't like
casting from 'const char *' to 'char *'.)

svn-id: r16826
"
"807b33ec29797006dd13e4627102166344cc8901","2005-02-20 15:38:48+00:00","More BS2 restructuring.

The various game settings are no longer stored in the Gui class. They are
stored in the class that use them.

Code that doesn't belong in the Gui class, e.g. the 'restart' code, has
been moved out of it.

Afterwards, the Gui class had been reduced to nothing more than a handful
of trivial methods for invoking the in-game dialogs. So the entire Gui
class has been removed.

svn-id: r16827
"
"c81fa31a5cce9e6f153ed378b2efebce6390cd2a","2005-02-20 18:33:36+00:00","fix missing speech animations. I introduced that bug when I moved the compacts out of the scummvm executable.

svn-id: r16828
"
"7c54b0af7dbe6a6f3710a738dffcdb87c13f032b","2005-02-20 18:40:32+00:00","I guess someone forgot to put paranthesis here.
Forgive me if it was really meant to be like it was... but I can't believe it. :)

svn-id: r16829
"
"b455a94e0fb2cb522a75cb1e2a98422f860de9b1","2005-02-20 18:53:30+00:00","cache datafile handles instead of opening and closing all files hundreds of times per second. I noticed that behaviour on the PS2. The cd/dvd drive was waaaay too slow for it. ;)

svn-id: r16830
"
"78533d416f63ffc236dfad3a3f838c0daca95da3","2005-02-20 19:06:09+00:00","Changed mutex usage.
It now unlocks the mutex while it's loading mp3/ogg/wave data in order to have the sound thread play normally.
The ps2's cd/dvd drive is too slow to transfer the entire file within a few millisecs, so it made the sound skip.

svn-id: r16831
"
"f1f7e6ce7a06ceaf53bd51933c71c95ad37fce7c","2005-02-20 22:16:31+00:00","some WIP HE sprites stuff

svn-id: r16832
"
"8ae3fe1ffefa4ba47428a4a4d246260e4f22de7f","2005-02-20 23:30:37+00:00","Add more sprite functions

svn-id: r16833
"
"e62d949fb6364d46df9dcd04125e110e56d49c2c","2005-02-20 23:55:11+00:00","Add sprite function

svn-id: r16834
"
"70982f556e2560eef2b8230326bc7cad7e64a6bf","2005-02-21 00:02:44+00:00","o WIP for o90_spriteInfoSet.
o kSFx -> kSF0x
o kSGFx -> kSGF0x

svn-id: r16835
"
"4f2cd36bd9c2eaebb74c7ede5367290679254cca","2005-02-21 00:25:30+00:00","More getSpriteInfo functions

svn-id: r16836
"
"7783d6596e77a3ac1b5544c45a509836c3cc4a47","2005-02-21 00:34:00+00:00","A few var renames.

svn-id: r16837
"
"291fe61a1e7d48dc4b54484c92b0829629da1f76","2005-02-21 00:36:25+00:00","Ooops

svn-id: r16838
"
"7a6b7c2a1ce9ce4312f4d361d658029f01714004","2005-02-21 00:38:13+00:00","Ooops

svn-id: r16839
"
"97688df92d0356848e0c75a319b8d030881b6a85","2005-02-21 00:59:50+00:00","WIP for o90_spriteInfoSet. Regression fix.

svn-id: r16840
"
"b1e67c4ce87210b8c240e7da65ded3562e4349aa","2005-02-21 01:08:48+00:00","Add functions for o90_getSpriteGroupInfo

svn-id: r16841
"
"6942100a940ac4ff8cf43f0c0e29f358adcf4175","2005-02-21 02:02:32+00:00","WIP for o90_spriteInfoSet

svn-id: r16842
"
"fd5a9be26e1df1171b37ae64ef7cc5ea4584793f","2005-02-21 02:29:18+00:00","removed lots of unnecessary seek()s and read()s by keeping the datafiles' index tables in memory instead of accessing them over and over again, which caused major slowdowns with cd accesses.
Also, the caching of datafiles depends on the memory usage now, not on the number of screens that the player entered in the meantime.
The old behaviour made the engine run out of memory on the PS2.

svn-id: r16843
"
"6b41feac65e5572bc8baae4a0e5e503d62086760","2005-02-21 02:37:05+00:00","Rename vars

svn-id: r16844
"
"01a7042be6db61692d45c786feefcbaf49927006","2005-02-21 04:53:34+00:00","Update HE100

svn-id: r16845
"
"df5c97246b42db392cae9f32d4a0a0f85288bc54","2005-02-21 06:31:03+00:00","Update HE100

svn-id: r16846
"
"224e0b7aa48ba8c5a68b4c8fa89e45a0cb5899c4","2005-02-21 08:15:15+00:00","Fixed warning.

svn-id: r16847
"
"8edce85e04a75907e668db286818ad868e3feed2","2005-02-21 08:16:50+00:00","Some cleanup and renaming. (It was confusing to see 'load' sometimes and
'restore' other times.) The save/restore dialog now has two separate
classes, though they both inherit from the old combined class of course.

svn-id: r16848
"
"c7dad332fa6f8cf3ae88d638cd0c990524966e14","2005-02-21 08:35:18+00:00","basically the same change as for bs1; don't keep the mutex locked while loading mp3, ogg or wave data. it blocks the playing thread for too long.
Also added index caching for the speech and music clusters to reduce seeks.

svn-id: r16849
"
"99bf57e7b8cf6e116b9dbb81941d09bba24aaf65","2005-02-21 12:43:18+00:00","Typos

svn-id: r16850
"
"6409a3c4e4317d12bcc214a27800a42884be6f5f","2005-02-21 14:27:09+00:00","Fix _heversion for Russian updated pajama2. Today I played it with kids
and found that it is actually 99, not 98.

svn-id: r16851
"
"6dd4854ba489108ff3c94eb0e103177abf138816","2005-02-22 01:16:41+00:00","cyx's WIP for sprites. Implemented spritesBlitToScreen

svn-id: r16852
"
"03804ce33faebfafdf854c6e2ebbe2ed0e4e3232","2005-02-22 01:23:15+00:00","Rename script flags as suggested.

svn-id: r16853
"
"4ff034d27c0e42e5d92ccbb67dccbf8edfcdd0bf","2005-02-22 01:25:53+00:00","Add a few sprite stubs

svn-id: r16854
"
"0835583948059df8f505dd8e97b043c35ac2daaa","2005-02-22 01:29:27+00:00","Implementation of GFX transactions. May cause some regressions in case I
missed some unusual mode switching. This implementation let us avoid two nasty
hacks in scumm.cpp.

*Now* we could return to OSystem layers.
patch.

svn-id: r16855
"
"f2dda718d322e3f4aef2d860cafe66474c05f660","2005-02-22 01:37:57+00:00","More debugs, to catch error points.

svn-id: r16856
"
"1dfc4c9881a7662a1dbcc29e262a012fc08c26bc","2005-02-22 01:51:47+00:00","Ooops

svn-id: r16857
"
"a45a0de6581ae7859ff20da58c01bacac8bc612c","2005-02-22 07:31:54+00:00","All languages

svn-id: r16858
"
"9bb141481822a6f1deef4c152e6bbb87d4136a10","2005-02-22 07:37:50+00:00","Moved some debugging stuff into the debugger class.

svn-id: r16859
"
"99f54b437d810ea527a6ca89cb387d786e6276f4","2005-02-22 13:54:38+00:00","Minor cleanup

svn-id: r16860
"
"457ee7f58252d1e86bd2404dbb823968bfbaaea7","2005-02-22 18:09:38+00:00","Fix compilation on BE systems

svn-id: r16861
"
"039b2b3a200c07963533c9db7cf6837fd77f4c9e","2005-02-22 18:11:36+00:00","Verify domain names as they are passed into the config manager (better to crash here, early, than to corrupt a user's config file)

svn-id: r16862
"
"e7b8a1eada84dc51e68bafbbf4f89903003d3c3f","2005-02-22 18:24:24+00:00","Added consts (this usually helps the compiler a bit when optimizing code)

svn-id: r16863
"
"be2049a338e68097e334547340af033f4a820358","2005-02-22 20:18:55+00:00","3 stage iso drawing implemented:
1)iso scene
2)figure
3)tiles above figure

svn-id: r16864
"
"44c6bbe4383b1893978374c7712331c187c21877","2005-02-22 21:38:44+00:00","some WIP stuff for HE sprites

svn-id: r16865
"
"26b11cb4448fff73099c35c5fb5d9dd0824a04ae","2005-02-22 22:23:10+00:00","o90_setSpriteInfo so 91

svn-id: r16866
"
"ee8f4ca1cf81e7cb438e97e45f0625bd878c4df7","2005-02-22 22:52:35+00:00","Rename classFlags functions and fix one of them.

svn-id: r16867
"
"d674eddefa68d9f639fd1974d37fa53e4cb40f34","2005-02-23 01:08:29+00:00","Add setSpriteGroupInfo stubs

svn-id: r16868
"
"b53b1963a91df93b2432a0661455992087e96a8c","2005-02-23 02:35:59+00:00","spriteInfoSet_case183 -> spriteInfoSet_resetSprite and its implementation.

svn-id: r16869
"
"dcd7d247174ceb5885e547671690de8afb57f157","2005-02-23 03:18:49+00:00","Implementation of spriteInfoSet_addImageToList. It needs review,
especially inner loop with pointer arithmetix. Cyx, remember that
x * 0x31 that's it just somewhat complicated.

svn-id: r16870
"
"a33edcf009ca58a1b743e9965f729619f3786128","2005-02-23 03:22:05+00:00","Add some setSpriteGroupInfo code.

svn-id: r16871
"
"22b8b3e8ebc2e42fae5bc575c13c675df35df45c","2005-02-23 04:05:22+00:00","More sprite functions

svn-id: r16872
"
"f278d588f32ebe242bba13c2f94038806fc935fb","2005-02-23 04:35:20+00:00","Cleanup

svn-id: r16873
"
"15b02f923217b302dc78a425a4885372c5908e59","2005-02-23 05:09:14+00:00","Another sprite function.

svn-id: r16874
"
"a890737e0e8b89b506edaba23ec74100fbab5322","2005-02-23 05:26:56+00:00","Add sprite function.
Correct sprite function (class_flags, not flags).

svn-id: r16875
"
"861e418e70b2c5e60d9f15c2681ea168b90eba5f","2005-02-23 09:23:54+00:00","freddicove adds extra SpriteInfo field.
Correction, only redraw sprite if value changed.

svn-id: r16876
"
"2c10795b487f6349c4d5a8fe6ecd93001611ea62","2005-02-23 09:55:34+00:00","Correct subOp, used in freddicove

svn-id: r16877
"
"26722043d926747babd0573dfa7d4356b76e33ad","2005-02-23 10:00:12+00:00","Ooops, order wrong.

svn-id: r16878
"
"84bc25a4269597c847ea275b764708e01c25b222","2005-02-23 10:14:52+00:00","Clear a few more fields when reseting sprite

svn-id: r16879
"
"f215c1ceae381c0546d490821f756f7d325ceabb","2005-02-23 11:15:41+00:00","Update HE100

svn-id: r16880
"
"1b7e174f884a953c5a123b6824166b08c706b79b","2005-02-23 12:04:42+00:00","Add sprite function

svn-id: r16881
"
"5ae4dde2fb905b797e7ad0b775f994e3c9627f96","2005-02-23 12:26:17+00:00","Fix spriteInfoGet_classFlags*.

svn-id: r16882
"
"a33f973be89f163e3dcf3967571a52bc0b86276b","2005-02-23 17:21:32+00:00","fix typo
warning() appends a '!', so remove the trailing '.'

svn-id: r16883
"
"23306f592101f7a1323e3444fc366ef9707c6133","2005-02-23 19:24:40+00:00","Update README to mention new BASS datafile, does this mean I just put 500 other documents out of sync?

svn-id: r16884
"
"e936c234af7b7dec0236f8d1ebba81c31aa6ecab","2005-02-23 23:28:53+00:00","implementation of spritesSortActiveSprites()

svn-id: r16885
"
"4bc6cfd469446aed8a6a468a891c3ccd8eee20ee","2005-02-24 00:48:24+00:00","Fix regression, seems like bug in pajama3 disasm.

svn-id: r16886
"
"1ad372c58942fd0d1828e403038d97aaa7ccf967","2005-02-24 04:04:17+00:00","Initial implementation of spritesProcessWiz. Also plugged it into main loop.

svn-id: r16887
"
"5787793e054bff1b7f6a8992ac75f2c7607add4f","2005-02-24 04:28:44+00:00","Fix bug in ScummEngine_v90he::spritesSortActiveSprites()

svn-id: r16888
"
"e26480aaee02f9e7849273dc2469cac06fef60d5","2005-02-24 05:11:37+00:00","This is a dirty hack which lets see HE sprites, so further debugging is
possible.

svn-id: r16889
"
"dcb22ee2161c49830b35ff79dff13decbcadafcf","2005-02-24 06:47:12+00:00","Correct SpriteInfo_setFlags*
Rename functions

svn-id: r16890
"
"88a70e46b82e528ca35dfd130d9bc2ae35fd590a","2005-02-24 07:43:29+00:00","init vars

svn-id: r16891
"
"f145d859cfe412409b6a72fe6b991097f58d0299","2005-02-24 07:51:27+00:00","ScummVM 0.7.0 does not need SKY.CPT for Beneath a Steel Sky, so I've
changed the version number in the text to 0.8.0CVS. Of course, this should
be updated again when 0.8.0 (or whatever we'll call the next version) is
released. By then we ought to include SKY.CPT in the main BASS download as
well, I think.

svn-id: r16892
"
"90a158fbf79c4b2dd2eb2e460df3f9c1361ac323","2005-02-24 07:53:02+00:00","Some syncing between the README and the LaTeX documentation. Untested since
I don't have LaTeX on this computer.

The 'Known Problems' section is still out of sync.

svn-id: r16893
"
"350ed76947bf378b40c814dabf0667465e383b65","2005-02-24 08:00:30+00:00","Update sprite calls in main loop

svn-id: r16894
"
"4f01f5e6e9c1b0891b5206cb1c39d98638139344","2005-02-24 08:03:47+00:00","I'm not quite sure if this is the correct fix, but by not calling
updateActorsScene() when _sceneNumber is -1 we avoid followers going into
that scene and being drawn (as garbage) early during the ITE intro. (Look
in the upper left corner -- that's where the garbage appeared for me.)

svn-id: r16895
"
"40771358a63e9350551f4a7fc46fd6853bae73d0","2005-02-24 08:26:58+00:00","Correct classId.

svn-id: r16896
"
"8a5918aa2e3cb864247ba0d4bafb4961d67aba9a","2005-02-24 11:22:05+00:00","Correct sprite flags in resetSprite

svn-id: r16897
"
"b16dc17f63a3e65442f2f8cf6a623fb9e9cdb178","2005-02-24 11:45:22+00:00","Add missing sprite redraw

svn-id: r16898
"
"2591151638ed41bb40895cb8d0a6cd3af2c87729","2005-02-24 11:49:07+00:00","Add stub case

svn-id: r16899
"
"976b988448ad91d2fa0987593f9b6994c305eef0","2005-02-24 12:22:14+00:00","Ooops, should be _varNumSprites

svn-id: r16900
"
"cc5e406cb533fb4552adc18382ef9ffcdbeb10c6","2005-02-24 20:20:35+00:00","defined some flags for HE wiz ; it should make the code more readable

svn-id: r16901
"
"84453d572520a2c4b27d897ce223da9e00920acf","2005-02-24 21:05:29+00:00","o Fixed sprite flags everywhere. In many cases they were wrong as they were
checked in higher byte not whole word.
o Some flags/functions renames

svn-id: r16902
"
"451527e2afef3cd37213961288a3efad159d362e","2005-02-24 23:11:50+00:00","Rename sprite flags as suggested:
kSF22 -> kSFYFlipped
kSF23 -> kSFXFlipped

svn-id: r16903
"
"685b070107feb018da8006c2005029a779ad31a9","2005-02-24 23:28:56+00:00","Rename SpriteGroup fields

svn-id: r16904
"
"cae8366844a969a3b82a6736fa77453b453cfe1a","2005-02-25 01:15:16+00:00","Add missing parts of spritesProcessWiz()

svn-id: r16905
"
"6ae017622adb28b80c9ea3e598832bb7d484c0f7","2005-02-25 01:20:46+00:00","*** empty log message ***

svn-id: r16906
"
"1f56546052c059d1a89ea89cf8e961e9dcefddc2","2005-02-25 01:23:36+00:00","*** empty log message ***

svn-id: r16907
"
"587d4da23a0ed43c6ca9230360f2a3acb7bf8230","2005-02-25 01:34:33+00:00","Init sprites

svn-id: r16908
"
"a82cff48162e446923b29b56996fd4ed363a0c37","2005-02-25 02:07:22+00:00","Correct check

svn-id: r16909
"
"51391279ccfbe064c017e1f86fae1995319151d2","2005-02-25 10:00:06+00:00","cleanup

svn-id: r16910
"
"563b271224935f3a7649642cd9505f1ebb266853","2005-02-25 11:23:27+00:00","Cleanup, reduce duplicate code.

svn-id: r16911
"
"475b1e139594cc784c9b5c91aa5af6bd919611e7","2005-02-25 11:45:25+00:00","Update WizParameters struct, to match pajama3.

svn-id: r16912
"
"7298987bbab8e1d1d04771cd6d2160d9f45071bc","2005-02-25 14:19:30+00:00","Whitespace changes.

svn-id: r16913
"
"2e60c4fbd33d5c455a894e64f9bb64a2881579c9","2005-02-25 15:19:03+00:00","Add WIP findSpriteWithClassOf() function

svn-id: r16914
"
"ed9272ac9c4d8fb2dfac0f24652d1d88d15b1a4e","2005-02-25 17:15:07+00:00","Some TODO cleanup/additions

svn-id: r16915
"
"531ca3704075b6bed56008eb60ec2e539f7b6f5c","2005-02-25 20:12:25+00:00","fixed compilation

svn-id: r16916
"
"a73906443b9aeb5a64344511895b0525b32a18fe","2005-02-25 20:15:01+00:00","fixed compilation for emsvc4

svn-id: r16917
"
"6746d89df586dba76faa2600cf7c76e0c750c9cb","2005-02-25 20:16:25+00:00","ops

svn-id: r16918
"
"1bcfa18667cad41f05a02193bc19f33d09383a1e","2005-02-25 23:37:25+00:00","More work on findSpriteWithClassOf()

svn-id: r16919
"
"574047157ae59f73d5c32eb1f843c9d3e9209af3","2005-02-26 00:35:23+00:00","Fix sprite hacks

svn-id: r16920
"
"4da8a6e1f05b9c2981465b7483fb677a84391e5f","2005-02-26 01:39:52+00:00","Fix sprite states

svn-id: r16921
"
"2689832d75095e00d7a49cf53a73b75b3fcab682","2005-02-26 03:57:11+00:00","Rename sprite function
Correct spritesResetSpriteGroup

svn-id: r16922
"
"6d7935cc6bc999975ebc0b26656f26435c775fa8","2005-02-26 04:20:47+00:00","Revert that last change, mixed functions.

svn-id: r16923
"
"1d23aada61b1415e0336495f277f4cc9c9315bc8","2005-02-26 04:53:43+00:00","Catch all invalid image resource reads

svn-id: r16924
"
"4f5589bb8b9f4a431145fd7fc931d2a0042a677f","2005-02-26 10:02:22+00:00","fix issue in spritesBlitToScreen and added some suggestions for fields/flags renaming

svn-id: r16925
"
"77b50fcce8ee3ad42d7d38cebcd042d72a55c5b5","2005-02-26 10:53:23+00:00","Typo

svn-id: r16926
"
"46844bbb7d338f28c9e53b23640965b3df4bf999","2005-02-26 10:59:50+00:00","added a missing line to findSpriteWithClassOf and updated _varNumSpriteGroups computing

svn-id: r16927
"
"e106b0a8534089c994d9d043d8c9779d1b8516c4","2005-02-26 11:02:27+00:00","Disable ditrherers for v1 games. Algorithm there is different and also
palette settings seem to be different too. So to not let people get confused
it is disabled until proper implementation.

svn-id: r16928
"
"885d58484270ccc75038b4774b59c4d6577291b8","2005-02-26 11:05:13+00:00","Rename HE sprite flag kSF31 -> kSFImageless and corresponding functions.

svn-id: r16929
"
"3abfcbc579474c5a0886e9ad50d459ac2947c9a6","2005-02-26 11:22:00+00:00","Lots of other sprite-related renames as suggested by cyx.

svn-id: r16930
"
"280003edeea4cb82504f4909ef5c15feca387fbc","2005-02-26 11:44:30+00:00","iso pathfining work in progress:
- all figures now stands in right way on iso scene startup

svn-id: r16931
"
"4a803b93c04ed5152ba5d77096451601545f4c21","2005-02-26 12:10:06+00:00","Correction to findSprite()

svn-id: r16932
"
"ca660a3512c8e7719de9d9aca7607dfe3a70914e","2005-02-26 12:12:15+00:00","Compile fix from wjp

svn-id: r16933
"
"23c2b3fc961d3dbfb6127772f4f026e0e187ad3a","2005-02-26 12:48:51+00:00","typo

svn-id: r16934
"
"343d59c9d475f932bc2dbd0088cebefca5c56bd5","2005-02-26 17:37:16+00:00","implemented iso pathfinding

glitches: some tiles draws above figures

svn-id: r16935
"
"baf72d3e94c20877609c521cdcb3f78c75396386","2005-02-26 18:06:55+00:00","fix iso mode object draw order

svn-id: r16936
"
"6665f1f9fad0ddc04a951760828fea05fed5ad77","2005-02-26 23:51:58+00:00","Update HE items

svn-id: r16937
"
"72efd4c50e95f55b757fdc50b9c36cbec7977f5d","2005-02-26 23:59:23+00:00","*** empty log message ***

svn-id: r16938
"
"cf0aac1506fbad0d71c9a50706def63127c16107","2005-02-27 00:42:52+00:00","Add more safety checks.

svn-id: r16939
"
"52989edb1c02435cb386aabde5354a298b10d9b4","2005-02-27 00:49:09+00:00","Update debug msg.

svn-id: r16940
"
"8446e7c6450cb0194c0122dad61b7ba99a509ee1","2005-02-27 01:02:46+00:00","Add a few more HE items

svn-id: r16941
"
"68581fe2e0b8c0837f68d8e831d600b08c6c0738","2005-02-27 01:20:44+00:00","Add floodState struct and rename opcode.

svn-id: r16942
"
"8560e08940c6af95f48a983f3e2d7411ee2679cb","2005-02-27 01:23:50+00:00","Ooops

svn-id: r16943
"
"4cb4f662c87144c858d6129b3a593129d777b031","2005-02-27 02:29:54+00:00","Rename vars

svn-id: r16944
"
"5eec97c24c310e4cce74caffcf7d4ebf8b300d34","2005-02-27 02:55:13+00:00","added processWizImage mode 8 ; this breaks footdemo, feel free to disable

svn-id: r16945
"
"a0347d46de528dda23c07fbcc4e20a48a86f9190","2005-02-27 03:23:16+00:00","fixed footdemo startup wizimage

svn-id: r16946
"
"decda90ffd2751a3fd989875d920e9ebf7fff341","2005-02-27 03:36:33+00:00","moved some variables to ScummEngine_v90he and renamed some SpriteInfo fields

svn-id: r16947
"
"d5d3bc8e3b04da7e02c633e0a91cafb597f443c5","2005-02-27 04:14:54+00:00","correction, WIZH tag is LE

svn-id: r16948
"
"68d15ad91d1b808838141cb8ebd57925fb20a00d","2005-02-27 05:14:24+00:00","Correction, only redraw if flags changed.

svn-id: r16949
"
"991c1859b117ebd03b6cf9c5e0214ed1157374cc","2005-02-27 06:01:11+00:00","Correct spriteGroupId checks.
Remove duplicate/pointess code.

svn-id: r16950
"
"0d8a49de37f62eb1906896e0f6d761ef18a8b342","2005-02-27 06:07:09+00:00","Revert the spriteGroupId checks.change.

svn-id: r16951
"
"a5356edb369de3dad0966b6308bb693e4f857069","2005-02-27 16:11:19+00:00","Got rid of all the .h files but one in the 'driver' directory. They were
either very small or, in the case of driver96.h, a disorganized jumbles.

svn-id: r16952
"
"f628ee836be71467dc52201474fd812470a249cb","2005-02-27 16:20:01+00:00","Restored the original values to the return codes. Since I've been removing
a bunch of them, it's better that the remaining ones keep the same value
between future releases. (Not that the user will ever get error messages,
of course. *cough* :-)

svn-id: r16953
"
"3b2fe18d2c9a05c8bce6f538ecb272650ca8c596","2005-02-28 04:17:17+00:00","Rename sprite functions

svn-id: r16954
"
"d343ba9bb904313ce9eb1d85dccb1efbb8e78ffb","2005-02-28 04:34:22+00:00","Cleanup

svn-id: r16955
"
"c840db8ab2404c050ac8b71719058eb36168e33b","2005-02-28 04:35:26+00:00","*** empty log message ***

svn-id: r16956
"
"9424c5aef252869835a296c1c497807fe6f3c0c6","2005-02-28 13:22:31+00:00","Changed a few more hard-coded text-ids to constants.

svn-id: r16957
"
"36705d43444e5e5ec668b8b895278ca9c38c0240","2005-02-28 13:23:10+00:00","Add support for script cycles used by HE90+ games.

svn-id: r16958
"
"bed897719cfde9107632fd73cac88da29db40a68","2005-02-28 13:28:02+00:00","Index the 'mouse list' from 0 instead of 1. I have no idea why it wasn't
this way to begin with.

svn-id: r16959
"
"e50aca32a843f4a28a0353b841abc339e24c7fa0","2005-02-28 13:34:52+00:00","Missed a change.

svn-id: r16960
"
"58dc309969ff0cc36a86772ea8707f2af78909e2","2005-02-28 14:03:53+00:00","And, finally, the change I meant to before I got side-tracked: Use
ScummVM's 'Rect' data type in the mouse list. The benefit of this is that
we can then use the contains() function in checkMouseList(), which makes
the code a bit less eye-watering.

svn-id: r16961
"
"991dbdf18c2c1b46c62e6127e8645490b8662275","2005-02-28 17:34:52+00:00","change division to right-shift

svn-id: r16962
"
"15bfd975a01038018dace4014f8ae5c4994c7e6d","2005-02-28 20:19:56+00:00","preliminar work on processWizImage 9 and updated wiz flags

svn-id: r16963
"
"a9e53c989cd0cae718d7e1d5812156ef5e497ffe","2005-02-28 20:20:57+00:00","Perform some validation before using GFX strip offset (see also bug #795214)

svn-id: r16964
"
"f94b10db495f026055ccfee67db10096bb1912cb","2005-02-28 22:47:05+00:00","Update HE issues

svn-id: r16965
"
"91c1c67fc5dbedd0b94175f2d8a657abbf76024b","2005-03-01 07:45:36+00:00","Fixed warning.

svn-id: r16966
"
"7dd05d6d103dc98980b23a10377c0dd364ef5828","2005-03-02 05:01:52+00:00","Fix COMI part III regression, I lost a line.

svn-id: r16967
"
"f097bcbf2bfc3ab5918c73716d15caddb16db140","2005-03-02 07:00:42+00:00","Fix string display in Buzzy games.

svn-id: r16968
"
"27bcd6e47a0978d88b6d680d303fde666c0d96e7","2005-03-02 07:11:58+00:00","When restoring older savegames, fill the script slot 'cycle' fields with
what I hope is a sensible value. This fixes a regression with a MonkeyVGA
savegame I had where none of the scripts that should have been running
were since all 'cycle' fields were 0.

svn-id: r16969
"
"e9136021001992fec4aad97975433daaceb4e242","2005-03-02 08:42:42+00:00","Fix array read from files in HE72+

svn-id: r16970
"
"9f364eaf6503ac5f0fff6f06967b83b84e2e5c5d","2005-03-02 10:53:14+00:00","Add dummy case used in airport

svn-id: r16971
"
"3cd0ff763c258b1ef24546f263265558e1bf32ea","2005-03-02 11:57:11+00:00","Fix room resource loading in Buzzy games.

svn-id: r16972
"
"ee03994a782c904120a3e2f65770cfba149ab18b","2005-03-02 20:02:59+00:00","Commit o100_paletteOps WIP based on cyx's patch. Original patch just
tends to be unappliable anymore, so that's why I decided to commit it when
it required not so much work of manual patching.

I've checked validness of it against IDB but we still have main question open:
How to plug it in properly into our palette code?

svn-id: r16973
"
"7a2a4f34dc823f04f3635fd57aaa3a23a859e563","2005-03-02 21:39:16+00:00","Make detection of v1 SCUMM games at detection stage, not resource
loading. This lets me disable hercules dithering for these games.

svn-id: r16974
"
"50f6eb740c488532e78f031f9e8b18f672fdff93","2005-03-02 21:46:51+00:00","Distinguish between green and amber hercules. Now specify it via hercGreen
and hercAmber. Updated documentation accordingly.

svn-id: r16975
"
"b6fdeff330c653685b046c3efcaa2a2c2a6c70c4","2005-03-02 21:50:37+00:00","Mnetion hercGreen/hercAmber render modes.

svn-id: r16976
"
"bad34c12cd3bdb26d6feb46daccb15cc97dd3783","2005-03-02 23:14:06+00:00","Add two more VARs for HE89+
Minor cleanup

svn-id: r16977
"
"120b3851967d3c4839b80ee64de58411078cea43","2005-03-02 23:57:20+00:00","Sync paletteOps in HE90

svn-id: r16978
"
"e85baf02d14d09eae9631697fabcfaea742b2934","2005-03-03 02:51:15+00:00","Correct palSlot range

svn-id: r16979
"
"78e3fc94155fa760819f74b038346251a35d3905","2005-03-03 03:06:30+00:00","Add missing actor redraws

svn-id: r16980
"
"ac493b31db8c3e2181141191d10962c38ce957e8","2005-03-03 04:54:23+00:00","Fix compare string.

svn-id: r16981
"
"958d68e8937e5e9e08e61dec9a2955c4e3de68c6","2005-03-03 05:09:39+00:00","Need to adjust HE7 filename for mustard too.

svn-id: r16982
"
"2f8d85e025f3a613b61c0e8950442871faa86364","2005-03-03 08:34:01+00:00","Initialise variable.

svn-id: r16983
"
"c90a3b38cf60feb76af162ffc3cb4baa68195927","2005-03-03 10:10:23+00:00","Forgot to commit. HercAmber/HercGreen documentation

svn-id: r16984
"
"14074de4b0e21e1fb33a77bf40ff7fcdb44c225e","2005-03-03 10:46:04+00:00","Correct classId value.

svn-id: r16985
"
"ff1a0c1c4e62505faeed4f58764ab6a8c7972370","2005-03-03 12:51:09+00:00","That's what may happen if you happen to have more than one local tree.
Another spot of oboslete hercules-related usage.

svn-id: r16986
"
"8825d26dbede26c92d29e105740061ed858acb2e","2005-03-03 21:42:20+00:00","big endian fixes

svn-id: r16987
"
"64be448cc59898910cc218b26360d6e083c587db","2005-03-04 05:31:22+00:00","Add more details to WizImageOps

svn-id: r16988
"
"af17a870530ad7022013af05833bd68aa65a51bf","2005-03-04 05:34:56+00:00","Add missing check

svn-id: r16989
"
"4fb6f0059ed472c948eae18fe41b3d97f571000c","2005-03-05 00:34:02+00:00","Remove invalid sprite check

svn-id: r16990
"
"2e8dee216e9fef4e58827c3028b4037eed5ae41f","2005-03-05 02:56:51+00:00","Update comments

svn-id: r16991
"
"88498dc62248179e1aa73cb3bf1984e7925f0afe","2005-03-05 23:50:50+00:00","Fix spriteAddImageToList() according to disassembly. (sbb-related)

svn-id: r16992
"
"81262457d3819ed44d5bbe7ec1506eb526a323c7","2005-03-06 00:46:13+00:00","Add extra safety checks from original games, to copyVirtScreenBuffers()

svn-id: r16993
"
"cca8d4733cb8aff3561df6d189ef6824fe82a632","2005-03-06 00:48:40+00:00","*** empty log message ***

svn-id: r16994
"
"a50ec148e82f95b7cee80e28c4a3612d604e0aa2","2005-03-06 01:41:25+00:00","Checks were in reverse.

svn-id: r16995
"
"5c650274fc4664f0c2c73c5485d2728db08ea761","2005-03-06 02:03:18+00:00","Correct class_flag checks for sprites

svn-id: r16996
"
"0f179d1f0a58b82732e3c8ad24849416db423310","2005-03-06 03:17:14+00:00","c & p type

svn-id: r16997
"
"524d3310c45e2209eb8a2fbf802103fea5e3efa8","2005-03-06 04:26:24+00:00","Ooops, reversed that.

svn-id: r16998
"
"0d3319000886bff139b02c0723f0483213640b31","2005-03-06 04:31:02+00:00","Rename sprite fields

svn-id: r16999
"
"f202b4d06da3bb3d5b67f341e7593f71f755a5ef","2005-03-06 04:49:58+00:00","Use sprite groups number, not sprite id.

svn-id: r17000
"
"c6499717543bc38fc5982e3c90b3cb64631223c2","2005-03-06 05:18:06+00:00","Update HE issues

svn-id: r17001
"
"d65d95859351cdf061c36e1e11ffa8db95a25138","2005-03-06 05:21:37+00:00","*** empty log message ***

svn-id: r17002
"
"e4bd258fd6c86b76e5f1a71a4c47d8acd3a04c52","2005-03-06 11:28:10+00:00","Fix bug which led to an endless loop if 1.5x scaler is fed with odd value.

svn-id: r17003
"
"7f5db33943bd951a32f1028cd0d14f952ab4f551","2005-03-06 13:22:53+00:00","Obsolete TODO ;-)

svn-id: r17004
"
"eb728a748f9baea4c612fcbd0f6c2ed06f9b88ad","2005-03-06 13:23:29+00:00","Name parameters properly, lest we'll all be confused...

svn-id: r17005
"
"b7c2926a0b29d4eed35ecc440270eb1f0c8eddc6","2005-03-06 13:23:39+00:00","Typo

svn-id: r17006
"
"e3105f926b1da0ffa737abcaf1bd9817743df415","2005-03-06 14:12:40+00:00","Applied patch #1155731, reducing the memory usage of the MPEG player by
about 8 MB.

svn-id: r17007
"
"e55d31ba39cab6384bfae0cac12ab4e9013a0b06","2005-03-06 14:26:17+00:00","Added notes about mine and Lavosspawn's changes to BS2, and my changes to
the MPEG player.

I'm not as sure what has changed in BS1, so I didn't write anything about
that.

svn-id: r17008
"
"a0d5debc7a8f4b24b6888de668d18fa8e0aedab9","2005-03-06 18:00:54+00:00","Added dialogs which are shown when you modify the talkspeed or music volume using hotkeys (FR #1153300)

svn-id: r17009
"
"8743ff7537c068056b8d424955957bb8ed8270c9","2005-03-06 18:02:43+00:00","Remove obsolete comment (I really should save files before commiting them ;-)

svn-id: r17010
"
"8b19b3e340bc94ad82847474a8c6ed9da86c9b1b","2005-03-06 18:08:46+00:00","Add demo detection; satisfies feature request #1154562.

svn-id: r17011
"
"e630d450ed895e2236376198ba977bc837828d51","2005-03-06 21:44:40+00:00","cleanup

svn-id: r17012
"
"89ecfa29ba3a8e68032b109a2978d1ea913424df","2005-03-06 22:35:12+00:00","Might as well return the GameSetting directly

svn-id: r17013
"
"81eadf1a35950afc0941d30ddea74dfcfbffe128","2005-03-06 23:15:57+00:00","Fix for bug #1153648 (Compressed BUN files play incorrectly on BE systems)

svn-id: r17014
"
"630bdf542d7725eb6ebde3e120031ddcfb983b81","2005-03-06 23:16:45+00:00","Oops

svn-id: r17015
"
"b5dc4960a4c5c7d76130e7c3fd4b62dec2b1ea84","2005-03-06 23:21:10+00:00","Max talkspeed is 9, not 10

svn-id: r17016
"
"68dce52387191fa3354cf439f426a106749d3413","2005-03-06 23:36:37+00:00","Fix for bug #1107815 (SAM: Conroy Bumpus' song subtitles always present)

svn-id: r17017
"
"7dd8a39ad03ab8944d9ad37ea647bf90e26c735a","2005-03-07 00:38:18+00:00","Allocate new file objects (and real new file handles) for subchunks/subfiles -- this might (or might not) help some of the odd bugs in FT... testing, esp. on Windows, is needed

svn-id: r17018
"
"07aa92063aebce928dac7a70ab61970af14b1305","2005-03-07 00:39:48+00:00","Add Amiga renderer mode for EGA games.

svn-id: r17019
"
"bf9bdd6c2ec8cf57978db3c10b30bc7d76a0907a","2005-03-07 00:53:30+00:00","Allow EGA option in Amiga/Atari ST games.
Restore correct palette after reloading saved game.

svn-id: r17020
"
"7627f75d9bb234528b1d532323d99cf34788587e","2005-03-07 00:57:38+00:00","Missed a bit

svn-id: r17021
"
"cb492e9b08363845c9727e5a9eaa606df2f10fe9","2005-03-07 01:04:07+00:00","Restriction no longer required.

svn-id: r17022
"
"1e07216b8590224efb7e38675e08e63267a4bc0b","2005-03-07 04:21:11+00:00","Cases are different.

svn-id: r17023
"
"26da9cc393ef78d223105e17e555e1678ede12e4","2005-03-07 06:06:22+00:00","Fix dup_n, billboard in circdemo works now.

svn-id: r17024
"
"8cc18e679763655f33fbd8cae7132635bf989e49","2005-03-07 06:37:56+00:00","Minor cleanup

svn-id: r17025
"
"214742783ed4d0ec3e28f2fd00f682ddcf7ffc31","2005-03-07 10:21:23+00:00","Add opcode for Spy Fox 2 mini game.

svn-id: r17026
"
"17562c097a18b6cf55e26e1dfb55f0eb4b7ec34f","2005-03-07 11:34:23+00:00","FindSprite should report the spriteId.

svn-id: r17027
"
"ef43877b6baa9da6d9684240849ab68907c85c7e","2005-03-07 11:49:59+00:00","Indentation

svn-id: r17028
"
"82d347a99adacbe517203add03083d1170dd3ac6","2005-03-07 14:08:08+00:00","Don't change mouse pos. values.

svn-id: r17029
"
"5379f74ab3224eddcfb2b68fb6ba4d45fb158d07","2005-03-07 21:58:47+00:00","Should be reverse order, sprite input works now.

svn-id: r17030
"
"2b786cdc59c9b8f668e7e2a443050ef19baef246","2005-03-08 00:44:58+00:00","Remove outdated comment

svn-id: r17031
"
"e4bfdcaeddc611ff8cf5a8fa54dcf9726b7fffa5","2005-03-08 00:48:20+00:00","Fix result value

svn-id: r17032
"
"d2dab235106851ac25ca4992a07678863011045b","2005-03-08 03:52:02+00:00","Add HE100 difference in opcode.

svn-id: r17033
"
"b9393bc819e69ccdd7428f988026f76dc2b3e812","2005-03-08 04:17:45+00:00","Script flags are different in HE100

svn-id: r17034
"
"5759e1577c3a83de79f565ef1d9f956831e15864","2005-03-08 05:56:21+00:00","Add opcode for bb2demo

svn-id: r17035
"
"213a9de6a10124aad9bae40293866eb64a177300","2005-03-08 10:59:31+00:00","Added constant for the resource number for the first IHNM scene. Actually,
I believe it's the wrong scene.

Currently we use resource 152, which run the scripts 'CampFireSetup' and
'CampFireScene'. If I use resource 151 instead it will run the scripts
'ColumnSetup' and 'ColumnScene' instead. I'm speculating that this is the
'hate' speech and the rest of the intro ('ColumnScene' is a fairly long
script, as far as I can tell), but unfortunately this causes ScummVM to
crash almost immediately.

I'll need to dissect the scripts to see if I can figure out what's wrong.

svn-id: r17036
"
"dea88ed93d3d6d605483616f5c5123d77a150664","2005-03-08 11:03:16+00:00","update

svn-id: r17037
"
"436d2181e18072431939fcc2afebd918d20fadb7","2005-03-08 12:36:32+00:00","Remove unused sprite code, unused by original games.

svn-id: r17038
"
"189492eef1a09c2685b854e64a435129777579a6","2005-03-08 15:06:57+00:00","Fixed typo.

svn-id: r17039
"
"cfe44d6053c8bcce9f9ae887726a652502276c55","2005-03-08 15:28:01+00:00","Apparently, in IHNM opcode #75 can take three parameters. Added stub to
avoid division by zero.

svn-id: r17040
"
"9cad55714926e01b8f7a65d09b6b4474feb1ceca","2005-03-08 20:27:33+00:00","corrections

svn-id: r17041
"
"913fd254d1f24cd76db280a86f894e95146c8e96","2005-03-08 23:44:07+00:00","Fix for bug #1158465 (New Volume Control Dialogue Error-Prone)

svn-id: r17042
"
"69a39e3c54b2433ca39517a34f43d3c4473ad81d","2005-03-09 01:05:08+00:00","Correct position

svn-id: r17043
"
"ebcf64df5619121684a021b6b53900968d097471","2005-03-09 05:04:14+00:00","_imagesNum should be clear in startScene()

svn-id: r17044
"
"185ed9d2bc04250b1fbed4da315978ddde06c550","2005-03-09 06:28:46+00:00","A few more safety checks

svn-id: r17045
"
"b26dfb63b45783bf68ade3e3bd5a2f3dafbea326","2005-03-09 06:29:31+00:00","*** empty log message ***

svn-id: r17046
"
"7f511a2a453bfc39b57b2e46feb8677573c4ce66","2005-03-09 07:28:49+00:00","Updated comment. (ScummVM no longer crashes if I try to run what I think is
the correct scripts.)

svn-id: r17047
"
"61faa88b93044757f50e14ceab8e73956f6e89bd","2005-03-09 07:29:15+00:00","Indentation.

svn-id: r17048
"
"eb1c999ad07e0e3b478aa40bbe7fc61b4c0e7a83","2005-03-09 13:17:05+00:00","Use _chorus, not _effect_level, as parameter to chorusLevel(). I don't
know for sure that this is correct - the MIDI device I'm using at the
moment doesn't seem to support chorus level - but the more I look at it the
more sense it makes.

And it might fix bug #1159734. ('DOTT/SAM: GM Instrument Chorus Level
Improperly Set')

svn-id: r17049
"
"f5b493d7353ecc46b073de0dc822a4272d4e39e0","2005-03-09 13:41:33+00:00","Add HE sound todos

svn-id: r17050
"
"13b8f678fc0ee6ab14e3264c58e858061fe625fd","2005-03-09 16:37:44+00:00","Fix one potential race condition between SMUSH and INSANE

svn-id: r17051
"
"0ec193b4be4113ccbc24f26f7bb4cefc3e3d6a41","2005-03-09 18:12:54+00:00","changing AudioDataType -> SoundType, so now the constant names match the name of the data type / the SoundMixer method names

svn-id: r17052
"
"d414c784682f8d470a24817dfa1db3d65366fba9","2005-03-09 21:10:16+00:00","Stricter offset verification in drawBitmap; but be more generous if we encounter a violation and just generate a warning (should fix bug #795214)

svn-id: r17053
"
"b72df416a64642d180e9b746484ce292d845fae4","2005-03-09 22:21:57+00:00","WIP of GP32 port. Now it is more correct port and compiles with current
CVS. Though it has some issues unresolved, one of them is that it crashes
right after splash screen without showing anything. Work in progress :)

svn-id: r17054
"
"7bb53f3bf10acf3b97d635b75e50b3c51b2ff862","2005-03-09 23:07:32+00:00","Patch #1013937 'OSystem layer with bigger resolution'. Now you will always
get at least 640x400 window. And finally we have means of implementing
nice looking GUI.

Also updated all backends. If your backend has ability to run with 640x400 or
640x480 resolution then read patch tracker item to find out details. Other
port maintainers shouldn't worry, as this patch doesn't affect them, they
still get their 320x200.

svn-id: r17055
"
"248bee4d2498717c328914135fd3e57958fd9a05","2005-03-10 00:46:26+00:00","Change o72_openFile to always use saved game path for writing.

svn-id: r17056
"
"f7770e3cfed15e9116c37c87280b9c484d27a4f3","2005-03-10 00:50:54+00:00","Add last change to o60_opeFile too.

svn-id: r17057
"
"ab82349dd9548b04f5af8e046cff4135acd965ed","2005-03-10 10:11:42+00:00","Add HE100 opcode difference for spyfox
Update HE issues

svn-id: r17058
"
"e21b1755b5ba3e3d57af75541e0409ba255a1c9d","2005-03-10 10:20:02+00:00","Add back some lost code from cyx, for future changes.

svn-id: r17059
"
"a913095ee017793b278a5079e224c2b23ae025d9","2005-03-10 11:06:37+00:00","Add HE specific versions of findResource/findResourceData.
Required by WizImage functions, which sometimes alter data.

svn-id: r17060
"
"dea3893ebdd7d5a718641a34fdb465eb66716bfe","2005-03-10 11:24:26+00:00","Used in displayWizComplexImage() too.

svn-id: r17061
"
"3c319749faabd3bd39321a58915290f012298870","2005-03-10 11:25:02+00:00","Update HE issues

svn-id: r17062
"
"42e6a731cb2f3288aa8598eda92fc54f9eff06b8","2005-03-10 11:34:41+00:00","Missing zero.

svn-id: r17063
"
"9928c9fdda76289b69abc6fc90cd19bc99d00f06","2005-03-10 11:40:07+00:00","Find where this flag is triggered too.

svn-id: r17064
"
"0641b05f0c4f2a08799985de7433af99b67f1c27","2005-03-10 15:43:08+00:00","Initialize some overlay-related variables, just to be safe.

svn-id: r17065
"
"cc2c2dd9313530a55aa455238c0194b316521312","2005-03-10 15:59:31+00:00","Fix bug #1160454 'ALL: Failed assertion when using 1x scaler'

svn-id: r17066
"
"3cf691e9f9d0aafad14b76272201a0cfac2e8a76","2005-03-10 16:29:08+00:00","Add --force-1x-overlay command line option as discussed in bugreport
#1160454 'ALL: Failed assertion when using 1x scaler'

svn-id: r17067
"
"154c4af8dc2d561050a5a963e2b45403cda618dc","2005-03-11 01:10:06+00:00","Mass-renamed all variables of Actor object according to our current code
formatting standards. Earlier we had half of vars named with leading
underscore and half without it.

Now code in actor.cpp is considerably more readable.

svn-id: r17068
"
"d6b8386241738a4c487aabe33932508ef327994e","2005-03-11 03:16:52+00:00","Add English HE100 versions of freddi2/maze

svn-id: r17069
"
"06a8268792ee88f1514e6e77ce3eb7af0f00a1b9","2005-03-11 03:21:43+00:00","Check for negative value

svn-id: r17070
"
"eebf5a7812b05bfc1b34aa8fdb179064cc07e77e","2005-03-11 03:29:31+00:00","Correct quit/restart

svn-id: r17071
"
"fc120343963524b2e1ec21bda0a1b812ca67baee","2005-03-11 10:19:14+00:00","Better and faster macros

svn-id: r17072
"
"28edee23808f8bda65c81d389ac25e2f054d94b4","2005-03-11 10:35:38+00:00","PalmOS too

svn-id: r17073
"
"c75753c821ae9506fcfa6ad69fcd05f28f2ddce6","2005-03-11 10:42:00+00:00","PalmOS and windows CE need to convert mouse coordinates with mouse buttons too

svn-id: r17074
"
"8e77e899d0967af3099258e4548f834edb53498b","2005-03-11 10:46:28+00:00","PalmOS : move MD5 table to a database too save memory and data segment space

svn-id: r17075
"
"a377252fbb3fc013f8101a0caafb95a830f99c2d","2005-03-11 10:51:18+00:00","Not needed any more

svn-id: r17076
"
"bb3278a08865eb7e68f5eda23b5ddb5055bde850","2005-03-11 10:55:10+00:00","PalmOS : ARM optimized unpacker

svn-id: r17077
"
"365193b4473aa0e5712ffb3b605fcde8ad10ca31","2005-03-11 10:56:24+00:00","Not needed any more

svn-id: r17078
"
"a68d6ad671a28678958d962b60578d77e9dfa30a","2005-03-11 11:01:52+00:00","PalmOS : ARM optimized OPL driver

svn-id: r17079
"
"d27f4116f488d5c6898c6a89f123d4c59e593b8e","2005-03-11 11:06:45+00:00","Cleanup

svn-id: r17080
"
"a52de03324bf07891be4ff4e161668ed59a78d6e","2005-03-11 15:30:28+00:00","Renamed variables in the MPEG animation classes to better conform with
ScummVM standard. It seems the 8-bit version of the code had decayed
slightly, but I believe it's working again now.

svn-id: r17081
"
"c39a92933d4d66f7436bbaf3b152f906d24ccfd7","2005-03-12 00:47:17+00:00","Add key to toggle speech/subtitles

svn-id: r17082
"
"77071ad956e800cdb60eb1612b1748a2e4dc6e5b","2005-03-12 00:52:53+00:00","Update

svn-id: r17083
"
"5ac7520071f6374750dcf798fb2c5eb1a387538a","2005-03-12 00:55:46+00:00","Missed file

svn-id: r17084
"
"3a7588c9833d976c3559463f69fdf14ab9a361df","2005-03-12 01:16:58+00:00","Ooops

svn-id: r17085
"
"8b484a2acfdc04da16d1739970efefd34d30c877","2005-03-12 04:05:26+00:00","Missing pop

svn-id: r17086
"
"05385e4fecc3113d195d08743db85da75c262c8a","2005-03-12 04:16:57+00:00","Missing pop

svn-id: r17087
"
"7b3b253fba3c0884d2fe9a7c5f93447fcfd0560a","2005-03-12 06:45:27+00:00","Seems to work now, maybe fixed by script cycles?

svn-id: r17088
"
"7ee1a2d4955d19010cf3520b75b0769ee3b48666","2005-03-12 11:06:07+00:00","Broke HE music looping

svn-id: r17089
"
"4493b064dd78bab03f2e7b75bf50934b9cab39a6","2005-03-12 11:34:10+00:00","Slighy modified patch #1161756 'Patch for external / non-volatile GMIDI synths'. Thanks, __tom.

svn-id: r17091
"
"4deeeec1bb225947e2db512997459a6be86c1ac3","2005-03-12 13:38:41+00:00","Leftovers

svn-id: r17094
"
"4a18a5de446dceafeaa447dc227f07a939e879ef","2005-03-12 14:32:09+00:00","Off by one.

svn-id: r17097
"
"bf984cb7f0fdd3397db2dafdd93c163536d92bae","2005-03-12 15:04:49+00:00","Fix crash that occured when disabling the GUI scaling code

svn-id: r17098
"
"1fde0d90f4d5ebc149584ad04513c9590db46b4d","2005-03-12 15:29:16+00:00","Fix popup widget in scaled GUI mode

svn-id: r17099
"
"03051c150189a22c58807090f3b0e77d64b4e6f7","2005-03-12 16:05:25+00:00","backport fix from residual imuse

svn-id: r17100
"
"6f7315d9506c66ec8ffdf7430b289d542e13f74c","2005-03-12 16:32:32+00:00","Add some paranoia checks

svn-id: r17101
"
"4b5b9bc984e78904b05d22be32796eeee4720d71","2005-03-12 16:33:03+00:00","mouse cursor palette better fits into the 'mouse' category than in the 'graphics' category (IMO)

svn-id: r17102
"
"848a6bcaea3073ab31108072cf49360957b3d47e","2005-03-12 17:03:59+00:00","Forgot to remove this

svn-id: r17103
"
"65551ca83ecac3cbaed890146c17b09f6aa05903","2005-03-12 18:02:19+00:00","clean up

svn-id: r17104
"
"8de216f3aec1dcee16fc0ab9974da4087bac5252","2005-03-12 18:54:06+00:00","some experimental changes

svn-id: r17105
"
"7cd2cb2b1700b85d48aed8898b08b49b9b46ebf8","2005-03-12 18:56:09+00:00","PlayingSoundHandle -> SoundHandle; also, turned the handle activity check into a mixer method

svn-id: r17106
"
"0e784d41d749934f89298990de92bee02e85ef67","2005-03-12 20:26:49+00:00","Simplified SoundHandle implementation

svn-id: r17107
"
"73ec1f17454504aa26f5502208b4fb3157953d42","2005-03-12 22:54:15+00:00","rand() -> _rnd.getRandomNumber() in SAGA code.

svn-id: r17108
"
"44205266e8dc5236fa6a545f9d198923b87000bc","2005-03-12 23:59:14+00:00","Add missing case for getObjectData

svn-id: r17109
"
"82c354b9d4f1c5ca15a37fde10d6be88a90679db","2005-03-13 00:04:32+00:00","A few extra bits

svn-id: r17110
"
"10c09943934d2d2cdd3e99c0f2ee3e3afe6ca7dc","2005-03-13 03:23:35+00:00","Scripts flags difference in HE100 needed in a few more opcodes.

svn-id: r17111
"
"fa2a936565d09e662d9449aa703e538ccf5d29d5","2005-03-13 04:00:59+00:00","Don't apply to HE100, it breaks credits in pajama.

svn-id: r17112
"
"c9424192c497d7e32b62aa0f51ca019f2b1207c1","2005-03-13 06:07:25+00:00","Fix spyozon regression

svn-id: r17113
"
"e19130293709c4f4e51fb01c64f7a8d6c9926ed5","2005-03-13 09:02:39+00:00","Update HE game todo and where they are needed.

svn-id: r17114
"
"45602953525ebb53284c66742031f9596671c162","2005-03-13 12:59:25+00:00","Correct sprite flags mistake.

svn-id: r17115
"
"4526328f7ca58270d8060f9d75ddb57fa5f1ab72","2005-03-13 13:10:39+00:00","Rename sprite flags/functions

svn-id: r17116
"
"c5c6bf838d9c67bd77b7a00f1b411318a0b086a9","2005-03-13 13:15:17+00:00","Fix/workaround for bug #1151924 - datafiles for the floppy version contain 'broken' string when using spanish text.

svn-id: r17117
"
"013f8b18034985c45e156e7abfba51a13ed49f2f","2005-03-13 13:25:28+00:00","Rename sprite flags/functions

svn-id: r17119
"
"f81438ff8d556943271261e0b66d4751bf6df8dd","2005-03-13 13:33:19+00:00","mention BASS bugfix

svn-id: r17121
"
"4a36c4f7b4bd0701d58884b3685c2870b18571f8","2005-03-13 14:03:54+00:00","Use same length as original, as the string is split across 2 lines it doesn't matter anyway.
this way we won't have to create a temporary buffer.

svn-id: r17122
"
"8ef36723d5aeb543dfe6608d822557c6735bbe84","2005-03-13 16:23:07+00:00","OSystem-overlay should be documented

svn-id: r17124
"
"f6d0d6bdf127b827fe1738e528a5d09481970cff","2005-03-13 16:48:53+00:00","Updated BS2 section for 0.7.1

svn-id: r17126
"
"7e256531fd1494a32ac0c5c9805082057ace88fc","2005-03-13 17:43:50+00:00","fixed wrong tile drawing above actors

svn-id: r17129
"
"e7ea46c0a3bed29d8f995072c049cfdf2dd39dd6","2005-03-13 17:59:55+00:00","The MPEG player patch has been backported to 0.7.1.

svn-id: r17131
"
"654528422dbe9174eaad34bde7bfab5b4c29739d","2005-03-13 23:18:59+00:00","Preliminary support for MM NES.

svn-id: r17133
"
"4daf4c47b890aac88f31874892fd0bae1e7efcbb","2005-03-14 08:24:39+00:00","Fix method names to comply to our coding standards

svn-id: r17134
"
"10f21cfe2c53e470ac00de11ce063d65a5cd0113","2005-03-14 11:46:10+00:00","Fixed GCC warning about unused variables.

svn-id: r17135
"
"8776504882864e2e9e558ef999733077c4ab39c8","2005-03-14 12:54:24+00:00","Rename sprite fields/functions

svn-id: r17136
"
"ef57db4105d737a5f97f107aef32aed302fa53d2","2005-03-14 21:13:35+00:00","First attempt to draw NES sprites. There are these problems:
o Position is not correct
o Colors are wrong
o No animation
o They're not wiped out correctly, maybe because of first problem

svn-id: r17137
"
"7bb8de561b9b0e114daaff12b615b2f947e757df","2005-03-15 01:19:36+00:00","Off by one.

svn-id: r17138
"
"1a26020fd207bba5cb56d919fb93efd02afde831","2005-03-15 01:22:57+00:00","Actually draw NES costumes.

svn-id: r17139
"
"a3955f150c3840cc9254a36c8fceddabdfd86731","2005-03-15 01:45:38+00:00","VAR_CUTSCENEEXIT_KEY uses different value in NES maniac

svn-id: r17140
"
"18ed547bc35708c61213c04194a0cb95c5aa5e5a","2005-03-15 02:08:53+00:00","Patch from Quietust. Fix NES sprites colors and optimize sprite drawing
routine.

svn-id: r17141
"
"9d17e9aa2499a98bb015295373de54962ca9a4b2","2005-03-15 02:23:42+00:00","Change this one too.

svn-id: r17142
"
"7c4d8d58e2b64af931071e9108cb54ef0d971563","2005-03-15 02:47:36+00:00","First (unsuccessful) attempt to make NES costume animation work.

svn-id: r17143
"
"4e39d96e9db12501ba1e0ce365ec6c4d2be0e5e5","2005-03-15 02:49:43+00:00","Update MM NES md5 due to changed index file.

svn-id: r17144
"
"6974025542bc226e3700bdd9465b07c7efba6f5d","2005-03-15 04:05:15+00:00","Patch from Quietust:
Animated costumes for NES maniac.

svn-id: r17145
"
"af87d515f5edf950e320fd25fcf50cb19d583b80","2005-03-15 04:16:25+00:00","Fix verbs position in NES maniac for now.

svn-id: r17146
"
"e00d808433b1f25b3f3de344ca193a4540fea811","2005-03-15 04:24:49+00:00","Patch from Quietust:
Fix room scrolling in NES maniac.

svn-id: r17147
"
"065710ee80ccc4646e13edd31e5bf35bb96a9ce4","2005-03-15 05:28:20+00:00","Doesn't apply to NES maniac.

svn-id: r17148
"
"dd5e5abe49609e0d8903d3a48b522f0d0a23596f","2005-03-15 08:20:22+00:00","Whitespace

svn-id: r17149
"
"b23aaf98fe39664b392b5a6682ba5d58d5b9aa8c","2005-03-15 08:21:48+00:00","fixed compilation for emsvc4

svn-id: r17150
"
"1a368f2e7ce31b2f5cbcc1133e846ad5ca41029f","2005-03-15 09:24:01+00:00","inproper hack for compilation with emsvc4. i don't know how to fix it:
''GUI::Dialog::open' : illegal call of non-static member function'

svn-id: r17151
"
"009cc66a24529eda12ac399c072ea32f20855a09","2005-03-15 09:43:38+00:00","fixed compilation for for overlay SDL latest changes, and formating code.
Wince SDL port is currently broken, it crash at NULL _screen pointer while locking SDL surface inside OSystem_SDL::clearScreen() func

svn-id: r17152
"
"adbd8f23e5af3fdbbe82e5f29983ede667068807","2005-03-15 09:53:07+00:00","fixed compilation for emsvc4

svn-id: r17153
"
"402dd115eade0a59f2fb0647bad1e1de6f953f82","2005-03-15 10:04:35+00:00","Weakened the low pass filter (thanks to tbcarey who compared it with a real PCjr)

svn-id: r17154
"
"86cd961b72455b4513a0d6575c0b65d08fd82d8d","2005-03-15 13:41:15+00:00","Fix Bug #1163202 (music never stops).  Some code cleanup.

svn-id: r17155
"
"4824af64bbfd1435f7e8750dc7fed3638d208e35","2005-03-15 17:56:50+00:00","Minor NES-related fixes
o Actors do not leave trails, though background isn't restored since
that code always uses two buffers and nes isn't. I have to switch it to
use two
o Add Swedish version of MM NES
o Code formatting fixes

svn-id: r17156
"
"088eb28c17b6c040894f9607574af617befb2be8","2005-03-15 18:10:06+00:00","Add md5's of all known MM NES versions.

svn-id: r17157
"
"968e900a0fdf825f31cdd9a89e40b55df3b76633","2005-03-15 18:46:35+00:00","oops

svn-id: r17158
"
"b8ee09d21b21cfe42a12e1b92651495826080ea2","2005-03-15 21:15:37+00:00","Properly wipe out animation trails in MM NES. It appeared that it
just uses different constants for VAR_CURRENT_LIGHTS. So now it
uses proper double buffering as well

svn-id: r17159
"
"deca1352524cfc4ba32fedf85b9863f119f70063","2005-03-15 21:20:44+00:00","Use better variable names...

svn-id: r17160
"
"6e33b3f0a7b80a5d84c277bed05ee376b4ebb517","2005-03-15 21:48:06+00:00","Some cleanup/costume code unification. Note: NES costume code probably should be using subclasses; and maybe we should add AKOSLoadedCostume and NESLoadedCostume ?

svn-id: r17161
"
"a827bb1c050ef6ca31a3e0bb80044c5ce3e55f00","2005-03-16 02:14:35+00:00","Patch from Quietust. Proper drawing of objects and fixes to inventory.

svn-id: r17162
"
"dd71f57aeb2d921e89d4409a2548bddc4280a2d3","2005-03-16 03:01:12+00:00","Actor position fix for NES maniac, from Quietust

svn-id: r17163
"
"f86768fee8aabb448152092b95a0a0b08e59eb63","2005-03-16 03:20:32+00:00","Preliminary support for NES charsets. Colors are wrong and we get glitches
caused by too narrow screen. Also text clearing doesn't work.

svn-id: r17164
"
"1febad7cc57b598299293fc5a99be5f17baeb65e","2005-03-16 03:40:25+00:00","First attempt to fix charset colors.

svn-id: r17165
"
"a9aed6ec52aad1cfdfaa441be8af8577c469cf07","2005-03-16 04:23:52+00:00","Last line of verbs work in NES maniac now.

svn-id: r17166
"
"a7d2552cfd96aff25301d82a57b8463413a48b69","2005-03-16 22:27:11+00:00","Fix head first crash. Virtual functions + one parameter added == fun :p

svn-id: r17167
"
"d99d4d09f259c1ce6e679c4e5b09eaf0e6014694","2005-03-16 22:58:42+00:00","Weird ... but fixes the second (and hopefully last) crash

svn-id: r17168
"
"1abab501239ce856f8b2986dd8126837b19de9b0","2005-03-17 02:55:20+00:00","Tile-based NES cursor for MM NES.

svn-id: r17169
"
"ed45ee5a0503b39f8612faeb762da1238c62588c","2005-03-17 03:20:25+00:00","NES cursor fixes from Quitetust. No need to use separate palette.

svn-id: r17170
"
"2c4b7dfd32d8558c8fbffc09f579c3bab1a36fc1","2005-03-17 09:28:36+00:00","Another correction to sprite flags

svn-id: r17171
"
"31c89144dc6ef8b2cf05883bbf8aea6426301e38","2005-03-17 09:42:31+00:00","Rename sprite functions

svn-id: r17172
"
"4c3d302e19e9435e3fad3ff1f71f73b541f641ae","2005-03-17 09:49:22+00:00","If a game is scaled with the 2x or 3x scaler, use the same scaler on the
cursor as well. It looks strange if the game is blocky and the cursor is
smooth.

svn-id: r17173
"
"4361ef655eb1619f91282c07c763151d1186224d","2005-03-17 10:53:29+00:00","HE72+ games use slightly different code for subtitle color.

svn-id: r17174
"
"f50af11b5d99c1a6e8327261bfe1a3b3cae51dcc","2005-03-17 11:06:43+00:00","Add HE72 version of file rename opcode

svn-id: r17175
"
"0bd4c7b8bcfa554310c5129bee45256b6410bc21","2005-03-17 11:11:00+00:00","Missed HE100

svn-id: r17176
"
"749cf8a083460e18db96c24220f756307dd0b4d0","2005-03-18 11:05:15+00:00","Apply patch #1162546 'BASS: Hanging notes fix / patch'. Thanks __tom.

svn-id: r17177
"
"47e9cc1b3a75ed24246c4e4465d619664f27c47d","2005-03-18 15:04:37+00:00","Add string height override for loom

svn-id: r17178
"
"b4ed62e1ad7ed6f3d4d68b8e34a9263229d14dad","2005-03-18 15:10:16+00:00","Some Russian Sam'n'Max releases have files renamed to RAMNMAX. So support
those. Also made file name substitution a general thing so we can
eventually get rid of monkey1 target et al.

svn-id: r17179
"
"3025db0d07c9bfa9f8cda8ff49847287230f166d","2005-03-18 17:11:37+00:00","- changescene on fair for tents
- some memory deallocation fixup

todo: fix follower stuckiness in tents

svn-id: r17180
"
"89ce70d724b05f52fdc3234d9a36735aeffcf8a6","2005-03-18 23:31:58+00:00","Applies to drawString() too.

svn-id: r17181
"
"f258c52bfc22b7ab12df57c946a6edaf24f57072","2005-03-19 00:15:55+00:00","Fix original load/save screen freezing in Loom [ega]
Sets current drive, instead of drive type.

svn-id: r17182
"
"6381320defd9300133732879d3746ae2ab89433f","2005-03-19 00:46:15+00:00","Add bug fix from cyx for:
883415 - COMI: Guybrush appears above tomb

svn-id: r17183
"
"91bfb91d778f6bdfca0aaf38235717406d474881","2005-03-19 02:40:42+00:00","These VARS are only used in Loom [CD] and scumm5 onwards.

svn-id: r17185
"
"91c666ebf94a96a4a3d8063fedf5a50bf944f95d","2005-03-19 02:54:02+00:00","VAR_TALKSTOP_KEY only set in scumm5 onwards.

svn-id: r17186
"
"9880288669414537d290aef70199e213fe868df1","2005-03-20 16:16:09+00:00","Fix bug #1166279 'BS1 & BS2: Launching game problems'.

svn-id: r17187
"
"7f83c4786045bd438ff76cea2c6189a62774798b","2005-03-20 16:24:55+00:00","Merged with latest Munt CVS.
* Added support for most of the extended capabilities of the CM-32L/LAPC-I (more rhythm timbres, more rhythm key mappings, more PCM samples).
* The control ROM is now identified by searching for matching ID strings at various locations in the file. There are now a lot of safety checks to help ensure that a bad ROM will not crash the emulator.
* Three control ROM versions are now identified and mapped out - an original MT-32 control ROM, an original CM-32L ROM, and the Blue Ridge modified MT-32 ROM.
* Now supports the expression controller properly.
* Sustain is now turned off correctly again.
* 'All Notes Off' no longer stops notes held by the sustain controller.
* Implemented 'Reset all controllers'.
* Stereo pan positions are no longer inverted.
* Volume, pitch, filter and envelopes are now more accurately calculated. Overall, the sound emulation is much more accurate.
* Waveforms are now slightly more accurate (in terms of pitch), necessitating a regeneration.
* Handling of unusual sysex messages has been improved (fixes sysex messages from Java's MIDI classes on Windows).
* Fixed a reverb bug during periods of silence.

svn-id: r17188
"
"d1e46a542000e1a73b087a3e5afd15ca55863a70","2005-03-21 00:27:39+00:00","Implement proper scene transition mode for MM NES.

svn-id: r17189
"
"11a1f9bb00b5b008417e92e4d1c3fbfa8000d96d","2005-03-21 01:15:30+00:00","NES palette fixes from Quietust.
Some fixes of gray background for NES. Though maybe proper approach
would be to add global vars instead of checking every time.

svn-id: r17190
"
"0bcb0ac2579faf061ec677e0b4ac8e37697d6dc7","2005-03-21 23:51:48+00:00","Many MM NES fixes/improvements from Quietust:
o Doesn't crash when going upstairs. Now game is playable up to
the green tentacle
o Proper subtitles colors
o Room mask is decoded but doesn't affect sprites yet
o Inventory draw issues fixed
o Fix actors position when they're facing right

svn-id: r17191
"
"097a3a0aacbeeba4a87332a2fabe3b9e38a821cb","2005-03-22 00:46:48+00:00","Cleanup

svn-id: r17192
"
"a2ac6c9796006b1eabe81cea86c8d6548f5a2b4a","2005-03-22 17:49:41+00:00","Proper check

svn-id: r17193
"
"61d0e3f02c5f75f5afa6ba843c876a7957ba7d63","2005-03-22 18:29:02+00:00","Make sure SoundHandle's are inited

svn-id: r17194
"
"30bbfc4d245bd9a1fb767f6d2537c37a32619c7a","2005-03-22 20:16:02+00:00","Add RTF as an output format, allowing the creation of a Credits.rtf file for the OSX version (currently using some Mac/Cocoa specific header stuff, mostly because I am too lazy to do look this up in the RTF specs right now)

svn-id: r17195
"
"3d3b079545dccfd4f431b6b574d00f504bf457c2","2005-03-22 20:16:27+00:00","Insert Credits.rtf into OSX bundle

svn-id: r17196
"
"6ef24ce3cb00bf29de8ba352fd66afa78dc8ad9a","2005-03-22 20:18:15+00:00","Added a small TODO comment

svn-id: r17197
"
"8102efa7a318679462e57a7adaa6d08c676b19f6","2005-03-22 20:57:14+00:00","Add three new HE sports games. Baseball is most playable now.
Add some unhandled KernelGet/SetFunctions used by new titles.

svn-id: r17198
"
"df0869f51d14ecd12d549a5d025e1db33344b479","2005-03-22 21:07:00+00:00","Patch from Quietust for MM NES
o objects now update tile colors and mask data
o mask data is drawn from the correct offset
o verbs are drawn in the correct color

svn-id: r17199
"
"8e84ee694c90c02417720eb99f45b3855607649a","2005-03-23 00:16:51+00:00","Add HE90 version of kernelGet/Set opcode and move HE90 specific cases over.

svn-id: r17200
"
"dd9ecfe1c0589db9a5e81c41d2118bc426cb5a43","2005-03-23 00:25:08+00:00","Fixed Amiga cursor for Zak & MM from Quietust.

svn-id: r17201
"
"e2f33c69ab00835f74467765b92e07a69fc76fd1","2005-03-23 04:22:11+00:00","Fix MM NES text rendering so old messages are cleared up correctly.

svn-id: r17202
"
"773ef15f4aacd257b3b518926a51be556b07ce18","2005-03-23 04:38:39+00:00","Remove unused variable.

svn-id: r17203
"
"a72a1ef827efc73030e87f451cc0f38ff51d934c","2005-03-23 05:59:24+00:00","Patch from Quietust:
-update md5 checksums for NES maniac

svn-id: r17204
"
"400d9f1ed18d943ea98ce5553e0f7d56487e48ed","2005-03-23 06:06:07+00:00","Patch from Quietust:
-give better names to player_v2a classes

svn-id: r17205
"
"de1ed636560e938494a9d41a9a48e3cefd73ba94","2005-03-23 10:17:52+00:00","Fixed compilation error. (GCC complained about a multi-line comment.)

svn-id: r17206
"
"fb87ff059d31939a72b60e77d01cfd6124000b8d","2005-03-23 14:34:22+00:00","Removed unused variable.

svn-id: r17207
"
"1826bda19483fd7ad9b30770d4bec87f167ce5ff","2005-03-23 16:19:05+00:00","Cleanup

svn-id: r17208
"
"3084724d7d37ef5f1a21236034c8896234a47dde","2005-03-23 16:41:44+00:00","To prevent race conditions, SoundMixer::isSoundHandleActive must lock the mixer mutex. That change might however cause regressions (read: dead locks) if some code calls isSoundHandleActive from within a sound callback... if you encounter any, please tell me

svn-id: r17209
"
"b0a1228c439a1fbca682af4f4f87a9cb44cdbc69","2005-03-23 21:55:11+00:00","some wiz flags renaming

svn-id: r17210
"
"9ab0962f6de96fb28dd7ee6b1589fb1b343dda7a","2005-03-24 03:22:32+00:00","Lots of MM NES changes from Quietust and me
o Swap palette entries 0x00 and 0x1D in all necessary places. This gets
rid of gray background
o added a function NES_loadCostumeSet(int n) in order to do #1 for sprites
o Widen screen to 256 pixels and center narrow rooms in it
o Partial fix for subtitle rendering, now at least first line is
rendered with identation

svn-id: r17212
"
"e9a28b5782e801ac30e965331ebe53b4419d3850","2005-03-24 03:38:51+00:00","Proper calculation of edge case with number of costume frames from Quietust

svn-id: r17213
"
"2b45b04e1ac8a5a2a2bfa174c6370477c867d5f0","2005-03-24 03:47:54+00:00","Rename sprite flags, as suggested by cyx.

svn-id: r17214
"
"0030fab85ad3bcdc39d35743dd6b8d293ed6e7d8","2005-03-24 03:59:00+00:00","cleanup

svn-id: r17215
"
"50759016b0f7cdd48238f6ecf71445351fa674ae","2005-03-24 04:15:01+00:00","Change processWizImage() to error on unknown case, to see where additional cases are required.
Update HE issues.

svn-id: r17216
"
"166e009061981c161a9abfdec548e0283caf289f","2005-03-24 04:53:28+00:00","First attempt to position NES graphics correctly on screen. Still verbs
are at wrong places.

svn-id: r17217
"
"2226aa6bc9db5e45ee72acaaf5098246d4b67193","2005-03-24 12:33:53+00:00","Add support for russian spyfox2 and spyfox3

svn-id: r17218
"
"33952c09cb7cf662c622b73d589fb731cc684c51","2005-03-24 21:34:35+00:00","Correct positioning of inventory and verbs in MM NES.
Started to tackle inventory.

svn-id: r17219
"
"99997aefc3e389928cd94078c363a49819805cb0","2005-03-24 22:04:00+00:00","Rename global tab Misc to Paths. This correctly describes its current content
and is in harmony with game-specific options. If someone ever will add some
additional 'misc' stuff in there, it could be easily renamed.

svn-id: r17220
"
"980576a4b63444d56744ec2e96496d296813196f","2005-03-25 00:37:14+00:00","Do not use (non-const) local static variables

svn-id: r17221
"
"3497e9afa41010cb3c9afa9700a2c8648a9ffa08","2005-03-25 00:40:58+00:00","cleanup

svn-id: r17222
"
"88cf4e3c293a228d9778fa5ecda61c33f9b07613","2005-03-25 00:41:59+00:00","add smush todo

svn-id: r17223
"
"7ed1c19f6c46d46cd0fae4a505887675e8338e49","2005-03-25 00:56:03+00:00","Cleanup: collect the C64 specific render data into a struct inside class Gdi

svn-id: r17224
"
"c86b18716b2bbc1b420e4811ba714e83b0c997bc","2005-03-25 01:27:28+00:00","Started some cleanup work on class Gdi (in particular, I try to limit that class to GFX decoding only, and moved the screen rendering code out of it)

svn-id: r17225
"
"47ee0ce884bc6a2c53a970c013f0a6f1d0d30a21","2005-03-25 01:52:20+00:00","Moved _roomStrips to class Gdi; put some GFX pre-room init code into the new method Gdi::roomChanged(); some more cleanup

svn-id: r17226
"
"df129b198ce75247dccb78c84b89335fa7441243","2005-03-25 01:59:47+00:00","Some more cleanup

svn-id: r17227
"
"c4261f007ab5e00dc8268d98288e5838753b4db5","2005-03-25 02:13:02+00:00","First attempt to use mask for costumes:
o Now it shows that our mask is too blocky
o Mask is always applied, i.e. even when actor is in front of masking
object
o Probably we need to shift mask up.

svn-id: r17228
"
"0089900e5ac16b71b1e76554ed8366b3960810e2","2005-03-25 14:58:18+00:00","Add missing pixel to letter 'P'

svn-id: r17229
"
"ca28c47c10ba2a70d94e4af5482d71c115a2be78","2005-03-25 17:48:17+00:00","fix wrong multitile offset calculation

svn-id: r17230
"
"9a4bc8ce16dd8e5c4a15269cdda23398f9f59684","2005-03-25 17:55:57+00:00","Patch #1117443 (Experimental plugin code revision)

svn-id: r17231
"
"a9c2e6ecbfdc6be61c86e6ac9cb05e232f7e7d43","2005-03-25 22:11:08+00:00","MM NES fixes:
o Fixed crash when in-game GUI was displayed
o Support for save/load
o Savegame version bumped

svn-id: r17232
"
"1805fe768632aaf6d838b029fe60e736345a70c5","2005-03-25 22:25:40+00:00","Accidentally commented out NES palette changing code. Fixing that.

svn-id: r17233
"
"b2288005da85892bc22c663257dee0d8c51e1586","2005-03-25 22:37:34+00:00","Enable kyra engine in static builds. Maybe someone will work on it :)

svn-id: r17234
"
"f735ee48afa1770ada4050975883b59beab70aa0","2005-03-26 03:49:06+00:00","Fixes for MM NES costume mask from Quietust.

svn-id: r17235
"
"2938c66276beb59be6db0bb4fd6ae8d37fac634b","2005-03-26 06:00:58+00:00","Rename WizParameters field.
Correct start strip in drawBMAPBg()

svn-id: r17236
"
"61aab60064882360286d1d00f801e6eeeeb5df8c","2005-03-26 09:04:33+00:00","Should fix key mapping issues

svn-id: r17238
"
"5a7c9f7d7483f7f57802f0baf3766a7ea0d752d1","2005-03-26 13:24:53+00:00","Tweak WinCE timer re-entry workaround to play Insane sequences

svn-id: r17242
"
"06ed39e0314962f7d75a14509476486ab5304dd0","2005-03-26 13:29:04+00:00","Add Insane Cheat action

svn-id: r17243
"
"8c37cd52a6ad86c2e720ef1a0e45edb9ab265620","2005-03-26 14:09:21+00:00","Quit game with 'Action key' on WinCE Smartphones

svn-id: r17246
"
"20f84037425e3cccb08473d73c75317fd5d5ff28","2005-03-26 14:35:39+00:00","Update for 0.7.1

svn-id: r17250
"
"3b871ebf9c5f3a21c728097997599b4d83921733","2005-03-26 17:56:29+00:00","Sync with 0.7.x branch

svn-id: r17251
"
"f694fd6288622fb06d1372fdba9b4d914c0615da","2005-03-26 20:36:52+00:00","Setting a release date

svn-id: r17252
"
"49ad27e845c504e626116f92999f2bfb74e7e1e0","2005-03-26 23:40:01+00:00","Gray actor palettes in flahslight mode for NES from Quietust.

svn-id: r17256
"
"446be21239727bcea559e201b77a48860fd5a34f","2005-03-27 00:23:38+00:00","Started to overhaul the costume infrastructure a bit, properly separating the NES costume code in the process (sorry if I broke stuff for the NES folks, but I figure it is better to get this done properly now before we have to untangle the mess later)

svn-id: r17257
"
"5bd26a52df502391714b539df30eb76e50c72cf7","2005-03-27 00:42:53+00:00","More costume code restructuring

svn-id: r17258
"
"abcf7bf2de88c3926843fa3fd613e50f5ea63cd5","2005-03-27 01:07:22+00:00","Tie the AKOS code into the new costume infrastructure, too

svn-id: r17259
"
"e80cdab64bc7f26a1be67d72e0b0028d767adbe8","2005-03-27 11:27:07+00:00","Patch #1171300: ListWidget + Chooser Patch

svn-id: r17260
"
"cd1a4b141e4b85ecc1b2a798b226d71421e277a0","2005-03-27 18:13:08+00:00","Updated slackware files from Robert Kelsen

svn-id: r17262
"
"03854737619f8d8fb3ae17a9d2552989bcdc806b","2005-03-27 18:14:37+00:00","Credit Robert Kelsen as Slackware packager

svn-id: r17263
"
"c9969b725baae093f7a98ab30b5175b28be6d616","2005-03-27 18:29:09+00:00","Fix doc compilation

svn-id: r17264
"
"ca8899e3c1b82cf67c6a3fd91a494931501c9f15","2005-03-27 18:35:52+00:00","Add support for the .tex credits

svn-id: r17265
"
"dbfeb393aa3aa7a0c5252450293ff28e22ca8108","2005-03-27 21:21:05+00:00","Patch from Quietust for MM NES
o Fix number of global objects
o Camera-related differences
o Proper user states
o Updated MD5 for new 00.lfl

svn-id: r17268
"
"26f41248737a056b5cf9efbaf7aae1873bb24166","2005-03-28 09:43:09+00:00","Typo

svn-id: r17269
"
"11e1e246cc4022f088a9e68bcd4d44f7d6574932","2005-03-28 10:02:22+00:00","findObject in HE72+ only checks object bounds
findObject in He70/71 only needs additional polygon check

svn-id: r17270
"
"2f2ca8ac21b778736742857b8a45741f9db47665","2005-03-28 10:14:08+00:00","HE80+ reports whole _classData value of object, if no args are given.
Fixes exit arrows in later HE games.

svn-id: r17271
"
"22affb0382ead2fed3bf44111320aa85d4d510f3","2005-03-28 11:38:04+00:00","Check class of object number, not loop.
Cleanup.

svn-id: r17272
"
"1b940f9811eba6abb143741f5442ff1f8a04c8d0","2005-03-28 13:17:46+00:00","Update HE issues

svn-id: r17273
"
"7a91277c4ec7961cd380011ee2824f22e7f05b64","2005-03-28 19:47:57+00:00","Updated credits using credits.pl

svn-id: r17274
"
"27c73db5c22727f2023e9707f9b884717360dbcf","2005-03-28 19:49:02+00:00","Fix for bug #1172037 (MANIAC v2: crash on mansion (regression))

svn-id: r17275
"
"6d62b11af70a5ed41c8f3b054314466d9337421a","2005-03-28 20:17:21+00:00","typo

svn-id: r17276
"
"c5a77afb01dcb4dc9329cecbb603beb73cfed592","2005-03-28 20:18:36+00:00","Cleaned up the object mode code; removed the friend class ScummEngine from class Gdi; moved dither code to ScummEngine

svn-id: r17277
"
"9ca1a888032be5b7ccc14b347f6a85ac8040e6c3","2005-03-28 20:27:12+00:00","Moved NES stuff in class Gdi into a struct _NES

svn-id: r17278
"
"c13f6b9cbb10fc155d84bdbf454aeb35a4041683","2005-03-28 20:34:18+00:00","Always check hasManyDirections for AKOS costumes -- this could cause regressions with HE games (or fix something, who knows?)

svn-id: r17279
"
"414fbd049183e10f70e5b77f9359333fae55bfba","2005-03-28 22:37:30+00:00","Moved ObjectClass to object.h

svn-id: r17280
"
"56a2f204a53e650cbe422ed84b2416c47d7595c2","2005-03-29 00:26:51+00:00","Limit to scumm 7+ games again, it should not be checked in HE games.

svn-id: r17281
"
"7c4b5b2a58659734e16fce30211e5c0c48fdfc57","2005-03-29 09:24:41+00:00","Should continue the main loop, not inner loop.
Fixes using sprites in circdemo

svn-id: r17282
"
"3e2be229264d2686cc6449ac836546592c64dc49","2005-03-29 09:32:43+00:00","Add temp. hack for sprite redraws

svn-id: r17283
"
"b7f5e4cff6d82f982e4f6bdb0e6874dcda05d814","2005-03-29 13:49:17+00:00","Remove unused array.

svn-id: r17284
"
"ba98e11eb1d9b89b607644e32ea102379c312cb4","2005-03-29 14:11:08+00:00","Rename sprite functions

svn-id: r17285
"
"1b4b92c0f5d876d9a149a7631383369c11fffcb8","2005-03-29 17:54:53+00:00","endScene now aborts all running threads (fixing Okk stuckiness on way out of tent)

svn-id: r17286
"
"6bc301810b59ac097afcaafffabfbad679b97f6f","2005-03-29 19:16:46+00:00","fixed gcc  ISO C++ error

svn-id: r17287
"
"0266fcbd4b8a99ca004eaf71f34bd14cfd14224b","2005-03-29 21:18:39+00:00","fixed small bug

svn-id: r17288
"
"516b1b3748ddf9e877bcab7d294472dd19168bd4","2005-03-29 22:14:20+00:00","fixed script params (some fair animals should walk now)

svn-id: r17289
"
"b1da5a46c7d921a198bc2b3ae0cc01846da1df49","2005-03-30 03:36:31+00:00","Switch warnings to errors, to make sure any use isn't missed.

svn-id: r17290
"
"bace6b5a243dcbe233a7faca1f24257dafa9d592","2005-03-30 05:47:44+00:00","Add comment

svn-id: r17291
"
"6bb533f936f7cf9cd41cdb6a83d62733935afc32","2005-03-30 11:49:53+00:00","Cleanup

svn-id: r17292
"
"41f910b5adf58f387ed491e2fbf17468ec4b3490","2005-03-30 13:34:24+00:00","Revert cleanup from scumm/gfx.cpp revision 2.348.
Clipping isn't compatible, due to negative values.

Fixes many sprite glitches, since code is used to calculating offsets for images.

svn-id: r17293
"
"b93b50809a302c994f36bea82a4178e5e9ca61dc","2005-03-30 14:12:57+00:00","Correct return values were lost in last commit.

Also revert cleanup from scumm/akos.cpp revision 1.185.
Clipping isn't compatible, due to possible negative values.

svn-id: r17294
"
"644bced723ad9820fa26e7469391e62ae25dae5c","2005-03-30 14:32:01+00:00","*** empty log message ***

svn-id: r17295
"
"b5eb59dff1c94dead763bb45e27e94cc829d6f4d","2005-03-30 14:54:23+00:00","Ooops

svn-id: r17296
"
"ebb49d5cfe23f9e20a8b88baf2f91fedd791b9df","2005-03-30 17:30:47+00:00","In V7/V8 games, just always call translateText, it'll check for the '/' prefix anyway (this allows us to perform additional magic in it, should we need to, e.g. to fix bug #1172655)

svn-id: r17297
"
"c1b948ff12c8d2e9774c17f49795fde673e85520","2005-03-30 17:37:35+00:00","This is now obsolete

svn-id: r17298
"
"63911718ee6d1c4c25d70c710d1d80e7747bb103","2005-03-30 20:20:06+00:00","Added warnings if duplicate md5s are found, as suggested in bug report #1167146

svn-id: r17299
"
"7ae3da082ebedfc76a8b2b62278d24799a31dd10","2005-03-30 21:59:12+00:00","Support for direct reading from NES ROM:
o extend MemoryReadStream with XOR facility
o implement MemoryWriteStream
o _fileHandle now is a reference to BaseScummFile class and is created on the fly
o implement ScummNESFile class which is basically extract_mm_nes utility
o update NES MM md5's due to above changes

NOTE: to run MM NES now you need to remove *.LFL files and (probably) rename
ROM to standard conventional name 'Maniac Mansion (XXX).nes'

svn-id: r17300
"
"9c772ce7d85153e4cfb44d8510569bc7fc2004d2","2005-03-30 22:01:17+00:00","Forgot to init _encbyte in MemoryReadStream.

svn-id: r17301
"
"f4c50eff957a7bdb65769fbee9e60c63e24605bf","2005-03-30 23:25:49+00:00","Switch to headerless PRG data for MM NES for better compatibility.

svn-id: r17302
"
"d9a3cb0a62a867cb70516a30e47eb88c037eba55","2005-03-31 01:16:14+00:00","Added Russian puttcirc.

svn-id: r17303
"
"5a890eedd3eeebc0ab1c37d4150cba11bb9d6138","2005-03-31 02:28:14+00:00","Add code for more o90_getPolygonOverlap() cases.

svn-id: r17304
"
"bd81feb9969f434e538f44ad2c82ea8e9e8821c9","2005-03-31 05:35:04+00:00","Playstation2 Port: initial import

svn-id: r17305
"
"861cdd9db24b07db90dae05a1bb7f4005959b3c4","2005-03-31 07:50:33+00:00","fixed headers. -_-

svn-id: r17306
"
"a78e0d0b821ab0c39f58cf0eb7951b8537e1b791","2005-03-31 09:56:14+00:00","Add some missing code.

svn-id: r17307
"
"fc59dcae3e81e0f2620ec5e225aa775904403540","2005-03-31 12:58:11+00:00","Return correct object x/y position

svn-id: r17308
"
"0fa38d12e1f0f7e27a34a7f8c6d679894f141f6f","2005-03-31 14:36:42+00:00","Fix bug #1173422 'Slight mouse cursor regression'

svn-id: r17309
"
"59331fe5352420a93aaa3ddb7066993cf484f7d8","2005-03-31 15:12:13+00:00","Add another French version

svn-id: r17310
"
"ac247c9b94ec49dac4a5febf94bab2c76e7ed114","2005-03-31 21:39:31+00:00","Started to move some resource related code into a new class ResourceManager (hypothetic goal for the future: use ResourceManager in ScummEx)

svn-id: r17311
"
"204809625fbe3c83e3f398e99fd6c8b2a6a108b6","2005-03-31 22:51:54+00:00","Rename paletteNum field for sprite in wizImages.

svn-id: r17312
"
"807b573ab253a2ab9eb2e667e346f42cb2a04064","2005-03-31 23:04:46+00:00","Fix GF_OLD256 palette size (no idea if that has an effect anywhere)

svn-id: r17313
"
"bed16296425df6def9b59ebe7df6f5ee45dcf035","2005-03-31 23:11:39+00:00","Made findResourceSmall local to resource.cpp; simplified _EPAL_offs (since we don't use it nor save it at this time, this is harmless); added a comment about _CLUT_offs ugliness

svn-id: r17314
"
"3ea3c422427b889480504588e593e40adb22ec05","2005-03-31 23:14:09+00:00","Extended comment on _CLUT_offs a bit

svn-id: r17315
"
"9c68b29a05c37752bae51c0c03e3099c3e49a495","2005-04-01 01:41:20+00:00","Normalize verb/invenotry areas in MM NES. Patch from Quietust

svn-id: r17316
"
"ebe4c1b6b6cf066dd3497057eb27f9ed3ccbbf51","2005-04-01 02:14:00+00:00","Fix regression in MM NES costumes.
Cleanup

svn-id: r17317
"
"65596240d70869900df61ece1812d080c5acd22f","2005-04-01 03:00:51+00:00","ps2: clip coordinates in copyRectToScreen, necessary for The Dig

svn-id: r17318
"
"cdd21c361b1c194a6c0b7f6ef480463d02fcc87c","2005-04-01 06:30:46+00:00","Remove resource type argument in wizImage functions, it is always rtImage.

Rename sprite flags/functions
Remove unused sprite flags
Switch sprite flags back to hex. for easier comparison

svn-id: r17319
"
"2d26bfcb4735255d67ff6ed595345adef2772faf","2005-04-01 07:30:25+00:00","Display text in Restart Yes/No Dialog for consistency with
Quit dialog.  Pointed out in part of FR #1145781.

svn-id: r17320
"
"4e3bfc6a66a73b28244ea5ab95046f6855573976","2005-04-01 07:33:39+00:00","Implement pausing using the 'p' key like the original did.
Feature request #1145781.

Convert key handling from if statements to a case statement
while here.

svn-id: r17321
"
"d80f9ccd402e7b16a72ea64c493fe2190d75f839","2005-04-01 08:51:13+00:00","Add support for clipping of wizImages.
Add support for altering wizImages.
Various renames.

svn-id: r17322
"
"b4ecd9f56ec9c3488f95f1b8ec5955748e51093b","2005-04-01 08:53:49+00:00","Update HE issues

svn-id: r17323
"
"879de392d1d1932d9e341ba2fb376444f759755d","2005-04-01 09:55:17+00:00","A random object state is possible in scumm7 too.

svn-id: r17324
"
"2eab3e51eb368122a80cba2f46e20f69c827755f","2005-04-01 12:43:13+00:00","Add bits and pieces
More renames

svn-id: r17325
"
"9f01b54bcfd7871f4a4a4fb58a9df65e96aae5d0","2005-04-01 13:05:40+00:00","Turned setupRoomObject into a virtual method

svn-id: r17326
"
"c832b858b783266ca54b53127069ad7504a7b6db","2005-04-01 14:46:58+00:00","Actor order needs to be checked too (For HE games)

svn-id: r17327
"
"ae30e1b9db8a2e54971b205102b29f1399d84d82","2005-04-01 15:33:18+00:00","Checked code against disasm., an offset of 8 is correct when rewinding san via INSANE.

svn-id: r17328
"
"58731633a50d8b92ef698de2fc2c99c76f022737","2005-04-01 21:35:44+00:00","MM NES costumes fix for MM NES. Talking animation appears now, though
there are still some glitches with sliding actors which require different
handling of actors talking.

svn-id: r17329
"
"4c50afea573c921fda973c0c376556a1c4d7bd41","2005-04-01 22:36:45+00:00","Seek from start pos, not cur pos.

svn-id: r17330
"
"5d042783a6e0cbe255b49e5fac42ea43ef80e982","2005-04-01 23:42:16+00:00","Add extra case for 3DO fbear.

svn-id: r17331
"
"eb4dce05ee864dbd2bacc3be85689532bf9c7761","2005-04-02 13:58:00+00:00","Extremely minor consistency change.

svn-id: r17332
"
"b5f281e9d8b0f2d75c03b40c2f04e1df1c0cc94c","2005-04-02 14:24:43+00:00","Cleanup

svn-id: r17333
"
"c734fc5b5c224c0aaf7233f745fc7e08a6f59d57","2005-04-02 15:45:50+00:00","Until there is a proper way of communicating pixel format, declare ugly global variable...

svn-id: r17334
"
"1f719929e9908fc27dbebb859a0291b24fd20504","2005-04-02 15:59:02+00:00","Fix sprite redraws

svn-id: r17336
"
"7b88503437b83df8fc9cc59daba390bd8ed2f220","2005-04-02 17:19:44+00:00","initial implementation of o72_arrayOps_127 and o90_sortArray

svn-id: r17337
"
"1d87cdb497dd7b7fab4933ec7748cccfce78b406","2005-04-02 17:26:18+00:00","_data is a ScummFile, not a chunk, so it should use SEEK_SET, not
seek_start. And since SEEK_SET is the default seek mode, it doesn't make
any difference anyway.

svn-id: r17338
"
"c5a48549459bf1302c2e6259a79b05ec195c045d","2005-04-02 17:29:53+00:00","forgot casts

svn-id: r17339
"
"13e2492b93de53622665fd9e479c548bef96060f","2005-04-02 20:04:39+00:00","some world map fix:
-only riff shows as small point
-change scene from world map
todo: in original  talk_to not shows for riff on world map

svn-id: r17340
"
"2e1ce57b5f72823a8ce8bce0bf8826162897822f","2005-04-03 01:42:06+00:00","Add additional case.

svn-id: r17341
"
"27cba7619ec217d541d7160bb7daa00cb9b30b83","2005-04-03 02:24:28+00:00","More sprite renames

svn-id: r17342
"
"d7b6860730a104bd85491ea90deafebd57da9d90","2005-04-03 06:27:44+00:00","Removed reinit() and replaced with offsets of zero. We only need to skip type/size.

Removed AnimHeader check in parseNextFrame() and _skipPalette, since AnimHeader is correctly skipped when required now.

svn-id: r17343
"
"994769ec1652eda82023cd342479d2df6615965d","2005-04-03 06:40:44+00:00","Still needed, mixed up block types.

svn-id: r17344
"
"f63b35381b4b8e50cefb08103498dc195e38c29b","2005-04-03 13:50:12+00:00","Enable copyArray in HE100 too.

svn-id: r17345
"
"b507231f7135f0af2a27b047f1982685736e0e7b","2005-04-03 15:06:08+00:00","ScummEngine_v4 used to be a subclass of ScummEngine_v3, now it is the other way around; added a new class ScummEngine_v3old, for GF_OLD_BUNDLE games; took advantage of the new inheritance structure and turned various methods into virtual methods which then are overriden in subclasses

svn-id: r17346
"
"8ea88c95d663fac08a1492c2d3c7138e7392dbbc","2005-04-03 15:32:04+00:00","- fixed tile doors drawing
- right mouse action fixed

svn-id: r17347
"
"2296e4e02ed7dcf915c59742ac6fe1f4a535b530","2005-04-03 17:01:07+00:00","Patch #1171304 (configure patch: detect more GCC versions)

svn-id: r17348
"
"aa50d6d7b0fbdbdbbae646eaa5aba752fc824403","2005-04-03 17:11:06+00:00","revert last change, it's too much experimental

svn-id: r17349
"
"db61624fd2317b64030f1ca1173baa239f1e1deb","2005-04-03 17:23:02+00:00","-fixed interpreter bug: on opCall now pushes additional data for compatibly
ps:doors can be opened

svn-id: r17350
"
"17aa2d6dfd5a023b1c57fcce593f71c23f3f133e","2005-04-03 18:00:13+00:00","SaveFile stuff now resides in <common/savefile.h>.

svn-id: r17351
"
"8fe07f1f3ed25beee1dd244f81f3153a2265edc7","2005-04-03 18:02:27+00:00","Added new cursorTargetScale parameter to setMouseCursor().

svn-id: r17352
"
"ac54a40ea26f43cc0051c71723d62f6aec6df920","2005-04-03 19:40:54+00:00","Added possibility to have an overlay with an alpha channel.

svn-id: r17353
"
"d2214dca9913011fb9f5f7545309d2d4042fc50c","2005-04-03 19:41:20+00:00","Use alpha channel if available.

svn-id: r17354
"
"167badf727496e35c245305742a39e0a2b555b75","2005-04-03 19:42:02+00:00","Switch overlay mode to ARGB4444.

svn-id: r17355
"
"4187ed3e113736c88fea726a57aaf14612499408","2005-04-03 20:45:26+00:00","Oops, cleared too large memory region...

svn-id: r17356
"
"c31f685e4441c773b909189a9cfaf226e89f95a0","2005-04-03 20:48:23+00:00","Added ARGB4444 case to table generation.
Maybe this should really be a single case using RGBToColor instead...

svn-id: r17357
"
"eb6301e5622a57ab29e80fa7e2ca7a0a1b90f581","2005-04-03 21:07:49+00:00","Added some overlay method comments. They could be better and explain more, but it's at least a start

svn-id: r17358
"
"359c39722b2f18b6a6c12b90952117953b95bd39","2005-04-03 21:38:39+00:00","Added some comments on how the graphics in OSystem are meant to work, based partially on a nice mail by Marcus, and adding in some information of my own. Certainly could be improved in style, language, content and everything, but once again it should be better than nothing...

svn-id: r17359
"
"e62d6773ef629e11f966e4b4c3086db8cea58a0b","2005-04-03 21:41:39+00:00","Added mouse wheel support.

svn-id: r17360
"
"eda317924ec0573d5c2a8407feaa8dafb6d4a9bc","2005-04-03 22:01:38+00:00","Committed patch #1168149 (Shared GM/MT-32 mapping) by eriktorbjorn as-is. This does the following:
- Replaces multiple identical MT-32-to-General MIDI mapping tables with a common one in MidiDriver.
- Changes Sky's GmChannel class to allow NULL instrument and velocity mapping tables, giving a 1-to-1 mapping without creating a dummy table.

svn-id: r17361
"
"1419f0d5ef32d8ae811b567616070cf916792320","2005-04-03 22:10:10+00:00","Split readResTypeList into a normal and a GF_OLD_BUNDLE version; added comments to many of the GF_ feature flags; removed GF_DRAWOBJ_OTHER_ORDER (it was only use by Sam&Max, I switched that to a direct check for Sam&Max)

svn-id: r17362
"
"3feadcac28466679ce6559877e9144f6410c6ddd","2005-04-03 22:56:02+00:00","Turned readRoomsOffsets into a virtual method

svn-id: r17363
"
"5f880737c587fffc4aaa3295e7aace8dc774b70d","2005-04-03 23:00:15+00:00","Use proper constant rtCharset instead of hardcoding '6'

svn-id: r17364
"
"398aa1a8b122bf020d158988a7576a6236e2c1a1","2005-04-03 23:10:17+00:00","loadCharset gets overloaded for small header games, so no need to check for those in here

svn-id: r17365
"
"789cad236c66cc0fc86b43c49a21894b5f1e5592","2005-04-03 23:53:34+00:00","Splitting more methods into multiple overloaded versions

svn-id: r17366
"
"5b53b4a4637f81924659aaafc499b1b46269dfce","2005-04-04 00:12:41+00:00","Cleaning up the charset loading code some more

svn-id: r17367
"
"0c1f2aa161596cddd6249e33c823b12d60a991e6","2005-04-04 00:16:58+00:00","Removed GF_SMALL_NAMES

svn-id: r17368
"
"cab1ac3016701a04fe5c818bd32028791c9ac660","2005-04-04 03:29:58+00:00","Add extra charset code used in lost/smaller.

svn-id: r17369
"
"c7ddbf7cad4b106d71499bdf925782ca69375bc9","2005-04-04 06:09:04+00:00","fixed compilation

svn-id: r17370
"
"d08068dff1ea02314d791c1248d72091d4d5d9e9","2005-04-04 07:25:21+00:00","Fixed warnings on little-endian systems.

svn-id: r17371
"
"f230fe65e8b035d3bcbf3a45317cf56ac673fdfe","2005-04-04 11:43:25+00:00","Add 8 sound channel support for HE games
-Allows sound looping to work

Added support for WAVE format musuc used in later HE100 games.

svn-id: r17372
"
"74c124628a223aeead189a623f3fbac75afda538","2005-04-04 11:47:38+00:00","Muddled ifs

svn-id: r17373
"
"172e558050b1a4ae112e184e0a682da0b4862677","2005-04-04 11:58:42+00:00","Missed a function.

svn-id: r17374
"
"f077f357d05015436999e56c517f3a7ab3c0946c","2005-04-04 14:51:42+00:00","Object width/height should be divded by 8 too.

svn-id: r17375
"
"e46a677c0ee9621cefe82031796c2337b6319d84","2005-04-04 14:57:28+00:00","Nevermind, only o_getObjectImageX/Y needed adjustment.

svn-id: r17376
"
"9e2e00881f4fcaa921e251dd237ee9aed06bf3cb","2005-04-04 17:43:00+00:00","Renamed getActiveChannelSoundID to getSoundID and fixed its semantics to avoid race conditions

svn-id: r17377
"
"d2cdbefc5ce074cb5526bb318689a7e099f05b08","2005-04-04 17:57:15+00:00","Cleanup

svn-id: r17378
"
"adf9bcf5d1c2efdb57ebf01f06dc4457122c512c","2005-04-04 17:57:40+00:00","Fix for bug #1166231 (GUI: Caret not removed when switching tabs)

svn-id: r17379
"
"581ab2ed638663c67ffd7ac08e314be603de2c8e","2005-04-04 18:42:35+00:00","Got rid of isSoundHandleActive usage; made the SmushMixer thread safe

svn-id: r17380
"
"5de9e36ff84c64a56c2ec4434d802270543dbd5f","2005-04-05 06:27:34+00:00","fix smush intialization

svn-id: r17381
"
"23e419969975d0da935498bfbb255448be7b6c2a","2005-04-05 07:53:46+00:00","Clear the text surface when loading a saved game, otherwise any text that
was displayed before loading the game will remain.

I hope this is the correct fix.

svn-id: r17382
"
"aeec229615ad2afb36ce7078448f2b1d560ca51f","2005-04-05 11:06:03+00:00","getScriptSlot() must start from slot 1, required for nukeArrays() in HE games.

svn-id: r17383
"
"101917d03fc05c64d3abe5b22e0b517b0899f4c6","2005-04-05 12:06:20+00:00","Update HE issues

svn-id: r17384
"
"0c49146b41095849de7ddb9c8eaa2077c2ce2b84","2005-04-05 12:52:43+00:00","Cleanup

svn-id: r17385
"
"eeb70bdfd26438a1c5fbf7e5a31cf1be81e0b8b3","2005-04-05 14:42:36+00:00","Writing into wizImage no longer crashes.

svn-id: r17386
"
"b399a052f1a60df4731aa15d330e1c0b759ed857","2005-04-05 14:45:02+00:00","Fixed long ago...

svn-id: r17387
"
"1758c5b211a39c29a193546348e7cc6e7bc2e8c9","2005-04-05 15:07:40+00:00","Initial checking of Gob engine

svn-id: r17388
"
"90b475f53f0c56a49d6aa8dbeb894f0b2f59e1cd","2005-04-05 15:21:18+00:00","Use correct buffer when capturing wizImage.
Puzzle in 1grademo and jokes/photo booth in pajama work now.

svn-id: r17389
"
"862e03da66facda0d19eb9c01cc03d0e49f7878a","2005-04-05 15:53:16+00:00","Updated part of headers.

svn-id: r17390
"
"f8c0d3ebf4c4c5b3065661e30d67e016eca5012b","2005-04-05 16:25:51+00:00","This looks like a mistake to me...

svn-id: r17391
"
"39ff74b40d04b318474935cdb3ede18b5b7cf77e","2005-04-05 16:28:18+00:00","Removed unused variables.

svn-id: r17392
"
"91e889dc94535733a1efba62f1392d2cfe8be600","2005-04-05 16:29:59+00:00","Fixed one warning. (Several to go.)

svn-id: r17393
"
"3eddcd5da5969a807beb63a94d543882fc24ade5","2005-04-05 16:30:44+00:00","Added .cvsignore

svn-id: r17394
"
"ed131fdad1a7d614c2d7c901fdf226fc7b6c38b9","2005-04-05 16:33:38+00:00","This change does not make sense to me, but GCC was screaming bloody murder
about not being able to find a matching call for `MAX(int16&, int)'.

svn-id: r17395
"
"6ff4dff306959ca22b1bd3a5781601f3f198fc61","2005-04-05 16:37:35+00:00","Fixed some of the warnings.

svn-id: r17396
"
"da2dea39f5025d34bd08016e8da7017690f92c23","2005-04-05 16:38:58+00:00","Removed unused variable.

svn-id: r17397
"
"72f3868c1fdfed9da5f9db4870f28bc0e4210c0b","2005-04-05 17:05:12+00:00","fix warnings

svn-id: r17398
"
"1d14278fde9225cd2e5a753c3b1bea3f86db17ef","2005-04-05 17:41:37+00:00","Fixing lots of warnings

svn-id: r17399
"
"ebdb705ffdc6c71ab51fc90934fa207bc0d8e474","2005-04-05 17:50:33+00:00","Remove useless casts

svn-id: r17400
"
"0ddbcc78452a3391a529f5b493203a77fcf6dad2","2005-04-05 18:08:02+00:00","Changed remaining file headers

svn-id: r17401
"
"97a84cb18cd03749953acecc14decf22967d1f67","2005-04-05 18:49:58+00:00","Separate game initialization and game running little more. Though probably it needs more work.

svn-id: r17402
"
"13e18e4801abe0dfae5d730ec5cce2ede247b76a","2005-04-05 23:30:35+00:00","Fix parens. Spotted by Quietust.

svn-id: r17403
"
"94e1db9ea8a4be3fa00f0cd86e9aeba4fdadc2c2","2005-04-05 23:31:40+00:00","Excess ;

svn-id: r17404
"
"21c2c603435bbd89d822352be45e0682893e53cd","2005-04-06 00:51:03+00:00","setCameraAt call not required, doesn't match original.

svn-id: r17405
"
"840a7ee846e0d72309f41b1cf6cf60a478d368f9","2005-04-06 02:11:07+00:00","Add correct fix for bug #556496

svn-id: r17406
"
"f7ae1b822d353f44772a2fe6826bda83c6bd8682","2005-04-06 02:26:47+00:00","Correction

svn-id: r17407
"
"de94c2411a908d0c216470896e113a96d53a1d1e","2005-04-06 02:59:03+00:00","Fix bug #1177489 - FM-TOWNS LOOM: Multiple text lines spacing incorrect
The string height setting is ignored in FM Towns version.

svn-id: r17408
"
"c66e6bb001f62a9c04951ffd1972dc68de3d44ef","2005-04-06 05:04:39+00:00","This section of startScene only exists in scumm5 onwards.

svn-id: r17409
"
"3554f6676433d7e862e1a2cc4197250321ed217e","2005-04-06 05:05:36+00:00","Typo

svn-id: r17410
"
"5d3dbc0d45143a965cb439fe89774b9f57dfcaa3","2005-04-06 11:39:22+00:00","some endian fixes

svn-id: r17411
"
"abe278b1edb1dbd4302799774bf44111e347855d","2005-04-06 11:59:28+00:00","more accurate palette

svn-id: r17412
"
"224b2afbf1cf6da036f6382b7fe56d2c9051a4f3","2005-04-06 12:19:15+00:00","Removed system includes.

svn-id: r17413
"
"a1769f0eae4edd6aa5367bd31105b5629b7f0215","2005-04-06 14:33:31+00:00","o Implemented pDrawLetter
o F5 now can be used to open menu
o Minor cleanup

svn-id: r17414
"
"e5b37bd2a28a0dab1acfacc21bb12a075051f46e","2005-04-06 14:34:42+00:00","Restore accidentally remove line

svn-id: r17415
"
"03be8dc46e5def303ea7e8c3c6ba6fc5abab66c4","2005-04-06 15:01:46+00:00","Add missing code for decodeScriptString cases.

svn-id: r17416
"
"8efb9961d6fa7f13993e71d11cb5d71046c02f20","2005-04-06 15:09:51+00:00","Use dirtybit

svn-id: r17417
"
"d0615eb956212ed935a1be8bef608e1ece904627","2005-04-06 15:21:32+00:00","Removed unnecessary semi-colons.

svn-id: r17418
"
"26e0ec1d240c71f5fdc34b912ee8ddf0368ab6dc","2005-04-06 17:24:18+00:00","itoa is not ANSI C and not portable. TODO: Implement the %b case

svn-id: r17419
"
"3d5b5f2ad83a5d4b463e9e78f204b132e36f770c","2005-04-06 17:31:35+00:00","Moved createResource, resourceStats, expireResources to ResourceManager

svn-id: r17420
"
"2911c2aeb88e5b8e080502afe336b9a2907c2efc","2005-04-06 17:42:39+00:00","oops

svn-id: r17421
"
"fd6b2050abf3ef97fbd090dfdeb6e49b16f67746","2005-04-06 18:57:58+00:00","Fix for bug #1172655 (DIG: incorrect subtitles are shown in german version)

svn-id: r17422
"
"60a64494d13f2266bf30c0c17633e23316cadb97","2005-04-06 19:18:08+00:00","use upper bits instead of lower bits when upscaling palette

svn-id: r17423
"
"19ff0b0085df624918ee9ab438f1c40bfec57c83","2005-04-06 23:56:50+00:00","Add hePalette function.

svn-id: r17424
"
"668c889c8e2c10511c0783aca38e6f63bfbe6a60","2005-04-07 07:29:19+00:00","Patch from Quietust

o Remove unused _system variables in player_v2a and player_v3a
o Sound player for MM NES :) Now we're playing chiptunes.

svn-id: r17425
"
"000a1f3be310e99c7f818a0e62cee165b7f6c2f7","2005-04-07 07:36:54+00:00","Excess ;

svn-id: r17426
"
"4d335349382d75081dd43c777872b3bf7db95b5d","2005-04-07 08:42:40+00:00","Applied some ScummVM formatting conventions.

svn-id: r17427
"
"d5b2582aa5597a2087a096ec9d76179effb9c724","2005-04-07 08:50:48+00:00","Missed these.

svn-id: r17428
"
"e6395f1eefbb0ef14f6feca67ed0c5498bd13bbd","2005-04-07 08:54:16+00:00","Update HE issues

svn-id: r17429
"
"49bab70dedca35a924dfbbb7bbd16a664894dc71","2005-04-07 08:57:40+00:00","Applied some ScummVM formatting conventions.

svn-id: r17430
"
"6ced0d698a9298450c00e6141bb94049e2d7cdea","2005-04-07 10:43:51+00:00","Add WIP on hePalette.

svn-id: r17431
"
"682df447a3986ff3ba0ac83b9cf4f79da0d8d64e","2005-04-07 10:54:36+00:00","The reverse actor layering only applies to pajama3

svn-id: r17432
"
"638674645009ebd014ae99e8489dfe1d62e41741","2005-04-07 10:55:53+00:00","*** empty log message ***

svn-id: r17433
"
"810861fdf593ddf0204cb7931eec15cd89983a5d","2005-04-07 11:15:10+00:00","Move hePalettes allocation to HE99.

svn-id: r17434
"
"c11827c2193f69c92e3ee851c9823231da4ef9bb","2005-04-07 11:43:38+00:00","Split readMAXS between HE versions

svn-id: r17435
"
"306034378685f6bb09f744bdef4273af9e15d887","2005-04-07 11:59:13+00:00","Original games ignored this index data.

svn-id: r17436
"
"c9dd533a2f4e84db167b616281bd082d335195f0","2005-04-07 12:08:43+00:00","Original games ignored this index data.

svn-id: r17437
"
"c7bb5eacda314f42c93f1d668e91fb54e4a48c9b","2005-04-07 12:11:35+00:00","Whitespace

svn-id: r17438
"
"9ac823cf811553198153abde9fa364ab559da3ec","2005-04-07 12:23:44+00:00","Correct palPtr

svn-id: r17439
"
"6a743ff741daa5ef2ecadc8ba1e9a69362dfba98","2005-04-07 12:33:20+00:00","Move palette functions

svn-id: r17440
"
"e83559ce1c411f8f9a875b67887f4bce273ee691","2005-04-07 13:00:56+00:00","Whitespace. (Yes, I'm bored. :-)

svn-id: r17441
"
"bac8f7a90c8f9fc5a92623a877c25062edc81607","2005-04-07 15:01:31+00:00","Ooops

svn-id: r17442
"
"ba3077ed0e06f39dd27353f0e3a6c2c9ba05791d","2005-04-07 21:13:01+00:00","Patch from Quietust:
1. properly handle costume colors in dark rooms (verified against disasm)
2. optimize NES audio generation a little bit - instead of calling a function ~80 times to get one audio sample, it calls it once and just loops ~80 times internally
3. NES audio now obeys the volume control
4. in MM NES, o2_setObjPreposition is a no-op
5. o2_lights uses new-style light values (i.e. bitfields) in MM NES
6. o2_delay, use ssPaused identifier rather than a literal '1'
7. in MM NES, o5_saveLoadGame only explicitly checks for type '1' (load), defaulting to save for any other value

svn-id: r17443
"
"59703e4a57e93858d1133702ed4261e74cb58c87","2005-04-08 00:38:12+00:00","HE99+ games store the base name is array 129, which is set on startup.

svn-id: r17444
"
"806c78655f8a088abc0e7ce396156ba20be86530","2005-04-08 01:22:39+00:00","Add missing palette cpy.

svn-id: r17445
"
"5bd6380b20babe5b949759c2527b5b5b554b1f80","2005-04-08 05:19:10+00:00","Set array data

svn-id: r17446
"
"f04f741b8bd8d3dcbd2819c945c3e9adb6a043b9","2005-04-08 06:25:57+00:00","Change from Quietust:
-Fix inventory in NES version of maniac

svn-id: r17447
"
"c2aff3bf4649325f563fff9f3521f3fdbaab26b1","2005-04-08 07:49:06+00:00","A few off by 1's.

svn-id: r17448
"
"328c588eabdc08ab6ffeee67bd1b3dbc51a35a28","2005-04-08 07:50:46+00:00","Ooops

svn-id: r17449
"
"2a5aaf9fc2154ed58421a873fec94de3afdacfa0","2005-04-08 11:10:01+00:00","Add HE70+ version of seekFilePos opcode.

svn-id: r17450
"
"3efdccee3718400fe32d7006b1673c439fa65195","2005-04-08 12:05:15+00:00","Ooops

svn-id: r17451
"
"00a7b8c1ff226db4cd4016f4a0951a29c6842ae0","2005-04-08 12:07:29+00:00","Add HE item

svn-id: r17452
"
"b8385b0af1b7e25e9d9f64c2c1fff5403a407ce7","2005-04-08 15:14:49+00:00","Patch from Quietust.
Do not let invenotry arrows in MM NES trigger inventory script

svn-id: r17453
"
"249134ede3a85f09601a962136bbffdae2eed764","2005-04-08 20:49:13+00:00","Add NES platform

svn-id: r17454
"
"2787e5aab444eb1bea989affa9021435741762e8","2005-04-08 20:51:34+00:00","Change some iMuseDigital debug messages

svn-id: r17455
"
"877d3fdad1eb6061a66fed93116c0662b1f6b5f4","2005-04-08 22:02:12+00:00","fixed warning

svn-id: r17456
"
"5826b4eb911414fcf42b020471c62205b06507bb","2005-04-08 22:27:12+00:00","fixed compilation and warnings

svn-id: r17457
"
"c30dd3e9aaf7fdbe7cf9c50aae744a1be1568618","2005-04-08 22:27:46+00:00","update

svn-id: r17458
"
"dbc4d13b3d003ac5225c9b18d7b4b86d01d8b735","2005-04-08 23:27:36+00:00","load/save sprite data in HE90+ games.

svn-id: r17459
"
"43278f9523b356b8badb0c38e8c3a31bb7215681","2005-04-08 23:32:30+00:00","Set size of sprite fields

svn-id: r17460
"
"61cfe8127827716489a4a33192699e89f55947db","2005-04-08 23:54:34+00:00","Actor layering only matches in freddicove

svn-id: r17461
"
"aff66038f3fd5b0e5af49c94c7f0a5270981f7cf","2005-04-09 01:28:16+00:00","o Put numerous debug messages to deeper level and removed others
o Occasional indentation fixes
o Fixed bug with cursor. Thanks wjp. Now even gob1demo works but final screen which is not playable in original hangs here.

svn-id: r17462
"
"24c92d00919500a725a6d4c4797b48088b56431f","2005-04-09 01:52:44+00:00","Remove usage of vsprintf in favour of vsnprintf and make
more use of STRINGBUFLEN.  Some ports may need a new stub for
this, discussed with Chrilith.

svn-id: r17463
"
"6aa5087ab0af2417e24c53b2b6a8663d62f5edc4","2005-04-09 02:44:37+00:00","I really need _substResFileNameIndex passed into ScummEngine constructor.
Put a workaround now.

svn-id: r17464
"
"fad585f5521a0b60abaa45a88c02f8591be21f49","2005-04-09 04:19:06+00:00","Add missing bit of HE code.

svn-id: r17465
"
"efa83b0dbb3818907471642e3385eb71e2ad61a0","2005-04-09 04:52:44+00:00","Correct arguments order, works now.

svn-id: r17466
"
"f623a5595cb201ab0d34e710f5c820d2719a8045","2005-04-09 05:15:51+00:00","Correct arguments order, works now.

svn-id: r17467
"
"2d40caf7adf24c3b3045563d73e10d7ad3f0c1c7","2005-04-09 06:26:12+00:00","Add opcode stub for chase

svn-id: r17468
"
"73d1d63f1502a94eb27fc3186b8e012e342de87d","2005-04-09 06:39:20+00:00","Add opcode for chase, playable now.

svn-id: r17469
"
"4f085516437369eccf22c96d84362f4d39c1448b","2005-04-09 07:25:41+00:00","Add comment to TODO
Check that string pointer exists, before reading data.
Don't attempt to play speech in soccer2004, since it uses compression.

svn-id: r17470
"
"16061e0f428db810665e16eb083374611bef0a24","2005-04-09 08:55:26+00:00","minor corrections and cleanup

svn-id: r17471
"
"cbe1437c27f22714cd730e77021f042ace34b530","2005-04-09 09:20:44+00:00","rewrite for hePalettes.

svn-id: r17472
"
"866e0c8613375f997619b051f5ed81ff94ecd2a2","2005-04-09 09:49:55+00:00","Fix check of the return value of findLocalObjectSlot() in loadFlObject()

svn-id: r17473
"
"db43946f05b299bfc480bca391106e9750f04c6a","2005-04-09 09:57:54+00:00","Add flObject lock/unlock support for HE games.

svn-id: r17474
"
"34098ae3c738b553c4b12377ba74b1d80072e41b","2005-04-09 11:59:43+00:00","Simplify the substResFileName system a bit

svn-id: r17475
"
"1566fb527f33219abd387d47609984714a0e0053","2005-04-09 13:04:12+00:00","Fixed typo in comment.

svn-id: r17476
"
"342334f23507952fce0d8b5e6ef9483f995ab9dd","2005-04-09 13:08:00+00:00","Removed unnecessary includes.

svn-id: r17477
"
"37c0af9a2d9a1814cfaa9f1f3468c4f70e1c09d6","2005-04-09 13:13:04+00:00","A common platform alias for 'Windows' is 'win'

svn-id: r17478
"
"3aba4997f4132846072a4fa395218c8723be165e","2005-04-09 13:31:47+00:00","Moved the GFX_ constants to sdl-common.h, where they belong.

svn-id: r17479
"
"b12942a8e78c4cc58b9a57514762ac1837a4cd58","2005-04-09 15:07:44+00:00","Correct stack list order.
chase/lost/smaller use correct level numbers now.

svn-id: r17480
"
"240a6f740631f87a9eb3f86949e16d8b10cddc4b","2005-04-09 15:12:26+00:00","Switch back to warning, since it is used in maze

svn-id: r17481
"
"0b5a407567ea393ca39bf54c474c960cfaf1a89d","2005-04-09 17:51:40+00:00","Init _editMode

svn-id: r17482
"
"4d626f867a8974f08d76ad25aa8f6effa2018309","2005-04-09 17:58:07+00:00","Fix crash after dropping item on screen change - thanks wjp!

svn-id: r17483
"
"6553ed4d9b4343f05e6c209d549af56b4b08cc9b","2005-04-09 18:14:01+00:00","read index as LE value

svn-id: r17484
"
"9aaff636aad78681650909f5a08decba2cd40283","2005-04-09 19:19:54+00:00","Fix legal header. Be careful when doing global search and replace! Better use full-word regex, to avoid problems like this

svn-id: r17485
"
"2efa0d17f29f015a176669d4ec4615e469b802fb","2005-04-09 19:32:29+00:00","Get rid of debug.cpp/.h -- it wasn't used anyway, and contained bad code (open/write/close to access a log file? yuck)

svn-id: r17486
"
"909aab0693a1cd966ebc50a375ccd1f9b4868f58","2005-04-09 19:49:01+00:00","Added Stefan Parviainen to credits, credited Quietust for his MM NES work

svn-id: r17487
"
"d271b58aa78875983143c07facac596cd393f9f0","2005-04-09 20:13:30+00:00","Got rid of GF_NEW_OPCODES

svn-id: r17488
"
"81e34e9110f88cd92227d451d153bd336a3902c1","2005-04-09 20:22:31+00:00","Overload getStringAddress in subclasses; moved V6-V8 specific res stuff to resource.cpp

svn-id: r17489
"
"d7c1017fe449f381059bc7d19bbfc52bf838c5d4","2005-04-09 20:26:51+00:00","Pedantic cleanup

svn-id: r17490
"
"e7786320a67210bbf998ff9b0f1bf227e4961432","2005-04-09 21:16:34+00:00","Fix for put apple bug from wjp

svn-id: r17491
"
"1ec5111b984bad12b64c254476efa2d113b623d6","2005-04-09 23:13:46+00:00","Fix jumping actor glitch. Thanks to joostp.

svn-id: r17492
"
"03616ad2c89fffcb7eb49124be060f978ae176f2","2005-04-10 00:32:11+00:00","Add some debug output to help with bug report.

svn-id: r17493
"
"78f2f279c40b9ff34b2afcd728a15399b823f57f","2005-04-10 00:33:31+00:00","Got rid of _dynamicRoomOffsets

svn-id: r17494
"
"cfe85b8618637e5d85dc183b142e0bfffc98434b","2005-04-10 00:51:47+00:00","Don't call allocateArrays from readMAXS, rather call it explicitly after calling readMAXS; init _palManipCounter in the proper place (only needed when restarting); free palManip data on exit

svn-id: r17495
"
"475ee9211744f09d7bce812a5a911a1334526a44","2005-04-10 01:23:33+00:00","Moved some room loading stuff into a new source file

svn-id: r17496
"
"b40fa83d4134f13eefb360c173044159674d687c","2005-04-10 01:25:33+00:00","Add initial rmap support for wizImages.

svn-id: r17497
"
"063fa83483b69c4e3758015ea81b0eaad8d978a5","2005-04-10 01:31:31+00:00","Init music engine within setupMusic(), even for V1 and V2 games

svn-id: r17498
"
"15fd220a8167197a1d5428c358dfc74ea37d9fbc","2005-04-10 01:42:00+00:00","Init _numObjectsInRoom in another spot

svn-id: r17499
"
"64d6c3cafae3439f6eec6aab945e627a18aa412e","2005-04-10 02:37:48+00:00","rmap suppork works now

svn-id: r17500
"
"ae69af7ecfbd4b865fddcfc3a937ce561d6fdd6f","2005-04-10 03:50:17+00:00","Pointer off by 8

svn-id: r17501
"
"02a724a619b027c4f1fbaaf148064c33c0c4fce1","2005-04-10 05:39:46+00:00","Add extra case, used by freddicove

svn-id: r17502
"
"5b802a03e5c248ae14eab01233a86132ac278db4","2005-04-10 06:17:49+00:00","Enable object lock/unlock in HE 100 too.
Add comments

svn-id: r17503
"
"82c10524b431061e0e79a8ed5eacf894109533b2","2005-04-10 09:45:05+00:00","gBitFormat TODO

svn-id: r17504
"
"582c56c236a859da23c287986e1021fa0735f197","2005-04-10 09:58:37+00:00","Do not hardcode character translation tables and verbs prepositions
in MM NES but extract it directly from ROM. Patch from Quietust

svn-id: r17505
"
"9d9a0727628939808eca1d5b0ba708fa5168a0aa","2005-04-10 11:20:55+00:00","akst/aksf pointer should be reset for each loop.

svn-id: r17506
"
"e3fbf090350f6a967cc04d9804dbb4ed64e7a1af","2005-04-10 12:32:56+00:00","fix another 'x = y' type copy/paste bug, unfortunately this still doesn't fix the jumping goblin in the first scene

svn-id: r17507
"
"871e278f8be3fc4b27fadca50922dd2193dbd409","2005-04-10 12:59:17+00:00","Reduce dependencies on scumm/util.h; modified ScummNESFile a bit so that it complies a bit better with our code formatting rules

svn-id: r17508
"
"232860bc44f6fc6706e554288992483ce0966918","2005-04-10 13:07:02+00:00","fix jumping goblin bug

svn-id: r17509
"
"0553720ca0cf56b5d755bd824a7f0afd79db3060","2005-04-10 13:16:49+00:00","Read the RNAM data (might be useful for debugging)

svn-id: r17510
"
"53a64266c8963f46be68f54fcd1fb89432a02826","2005-04-10 14:30:24+00:00","Apply 'correct handling of transp in drawSprite()' patch by wjp.
(Colour 0 should only be skipped when transp is set)
Fixes wrong colour in intro and clearing of buffer after fades.

svn-id: r17511
"
"13dc149ded691e718905049990dd0220230c500e","2005-04-10 14:33:44+00:00","Applied patch #1175374 ('FluidSynth MIDI driver'), with a few documentation
changes. There are a few things that could use a bit more work, and I've
only tested it on my Linux box. I have verified that ScummVM still compiles
when it's disabled, though, so it shouldn't break anything too badly.

svn-id: r17512
"
"d4d045b1174b4a48659f39f026ade42684b679bf","2005-04-10 14:35:11+00:00","Forgot to add files when committing patch #1175374.

svn-id: r17513
"
"3f114bb724e321dff166aafb35bf94e8f0b1805e","2005-04-10 14:49:28+00:00","Added note about the GUI for the 'soundfont' setting.

svn-id: r17514
"
"a3a8cb65c90c166f21f2ccdaeba221ca835901eb","2005-04-10 14:49:57+00:00","Fix compilation on OS X

svn-id: r17515
"
"e03861fdd4ca4cb676788c4ae4ea19647107fd6b","2005-04-10 14:54:23+00:00","Add more TODO entries

svn-id: r17516
"
"e79c168d35d9c3633e3dfb618bd05466b0efc307","2005-04-10 15:13:40+00:00","split SaveFileManager::openSavefile and class SaveFile into two, each, one for loading and one for saving

svn-id: r17517
"
"8d2e73806ac032c82590dc434a21543320296af2","2005-04-10 16:20:22+00:00","Fix for bug #1180240

svn-id: r17518
"
"9ab6b86c3a0caa08a9b8f2907638802af4ea26e5","2005-04-10 16:22:06+00:00","Initialise _currentRunList to avoid failed assertion when quitting the
game before it has been initialised the normal way.

svn-id: r17519
"
"eb10589c83c8f62c4f2c8a91af5fa2cc8602d8f7","2005-04-10 16:54:16+00:00","Add a comment which clarifies that monkeyVGA and loomCD are V5 games, but we still set _version=4 for them, because it is convenient

svn-id: r17521
"
"c9455a88069dff7d2b01366c54446d79256192d6","2005-04-10 16:55:37+00:00","oops

svn-id: r17522
"
"f35ac50111739a87aa6c639e21b55632af79796a","2005-04-10 17:13:17+00:00","Some inter_variables cleanup.

Now it should store all variables in the native endianness, instead of storing half in LE and the other half in the native endianness.
Addresses and assignments can be tracked by modifying the macros if necessary.
Also, meaningful constants can now be assigned to script variable numbers (if one were so inclined)

svn-id: r17523
"
"8df392cabe96b76d93ef922fcccb79d38cb1d622","2005-04-10 17:20:24+00:00","Fix for bug #1167146 (properly fix the monkey vs. monkey1 issue by using the substResFileNameTable table)

svn-id: r17524
"
"78f6b7a1d8f125e8d8dcd552fca515b610a3ede0","2005-04-10 17:38:09+00:00","cleanup

svn-id: r17525
"
"e7dc5a24fdf907e6216c4fc8c2ab979edbd75c94","2005-04-10 21:09:27+00:00","Get rid of posixism

svn-id: r17526
"
"ee6deedb03419e2942d7e19146f801753be86f40","2005-04-10 21:10:01+00:00","Add autodetection for WinCE (to be modified)

svn-id: r17527
"
"f4262a1bbbf8e26b913e4da717e617ded2667466","2005-04-10 21:11:02+00:00","Gobliiins tweaks

svn-id: r17528
"
"89310f047ea51bbfb346c3a05b39be6b41e72295","2005-04-10 22:43:46+00:00","Fix regression in MM NES which disabled scrolling and lead to weird crashes

svn-id: r17529
"
"270548502283ff1d892eb66b6d977e46dacc2f31","2005-04-11 01:45:26+00:00","Add md5s for NES maniac
Remove duplicate monkey/monkey1, since we check for both.
Change monkey1 target default, to monkey, since we check for both.

svn-id: r17530
"
"82da226c8ec7848a0f8f03d9b035833cf3650b70","2005-04-11 04:02:48+00:00","Re-order md5s for multiple version games.
Easier to read and update.

svn-id: r17531
"
"e36bc81511f8fb8511966f5a01c00c45db2ed38b","2005-04-11 04:07:10+00:00","Sort alternative file list again and remove duplicate.

svn-id: r17532
"
"d67cfd4be9f4d8191dca3fe5e5f69a4f46acdc27","2005-04-11 04:33:28+00:00","Ooops

svn-id: r17533
"
"e2d24f8ce204a0bb4c5be749eb6d5c23bdd6a8f0","2005-04-11 05:54:39+00:00","RNAM block is different in HE games.

svn-id: r17534
"
"140a1d7c4609251e671f442e75fd544ebc1ae809","2005-04-11 06:25:05+00:00","Initialization fix.

svn-id: r17535
"
"0c5253c1eb9182ca1af0c0f402d1dcb1f40cde9c","2005-04-11 07:40:14+00:00","Add a few extra sprite correction and functions, based off HE100.

svn-id: r17536
"
"f9f8bf30702ec0ca248757e30460bc8a5c1112c2","2005-04-11 10:55:22+00:00","convert some struct members - unfortunately we can't currently allocate memory and read the struct in 'the proper way', as the engine still addresses data beyond it

svn-id: r17537
"
"b4f0716912d62f8de93116c04f38447551395e74","2005-04-11 11:20:45+00:00","more struct conversion

svn-id: r17538
"
"79278028737250f58b1b1d166e3fbb77d8b140e1","2005-04-11 11:25:45+00:00","cleanup

svn-id: r17539
"
"4c4af584a01a9e825117fb5cb0a16fce6c0cfe47","2005-04-11 12:57:41+00:00","Enable 2x overlay in MM NES

svn-id: r17540
"
"f195d26b25ac9acf952caa30295fb736f5d3f82d","2005-04-11 14:49:42+00:00","Update debug message.

svn-id: r17541
"
"1ff6058d467846b996e1749326328198fed85440","2005-04-11 14:55:49+00:00","Update comment

svn-id: r17542
"
"549ee13d9a8f396e44b6667bb811bb0c44fb2e28","2005-04-11 14:59:32+00:00","Already working.

svn-id: r17543
"
"20aeccc383caf6506ea3664fe998dbeda4ce0818","2005-04-11 15:34:13+00:00","Slightly more informative error message. (I get this if I try to speak to
one of the faire animals. I believe it's the one the original source code
calls 'FaireRam - 65', but I haven't verified that.)

svn-id: r17544
"
"863007c5fbbc1ab2f7542da2adb72a81c4e90bf1","2005-04-11 17:59:55+00:00","added processWizImage mode 10

svn-id: r17545
"
"d602e1999172cc91370aed07200f7f9aba5c954d","2005-04-11 18:09:27+00:00","minor change, to be consistent with rest of Wiz code

svn-id: r17546
"
"14adfd3cac19efd554decb5c7979e292f2392b55","2005-04-11 18:42:57+00:00","Typo

svn-id: r17547
"
"ddecb306351046bb47dc5c8bfd3f59d802b8ee65","2005-04-11 19:34:51+00:00","Stub out some opcodes, to get the CD version go a bit further (thanks Willem)

svn-id: r17548
"
"2ff681b1e9392ec45f85485b79465874c9eb6956","2005-04-11 20:03:12+00:00","Endian fixes

svn-id: r17549
"
"fa80c6e8bafd311ba3e44a6d6a018a72049f3c3a","2005-04-11 20:04:14+00:00","cleanup

svn-id: r17550
"
"b9da94d8f166d634a34183a7d9f645dc91d779c6","2005-04-11 20:34:21+00:00","MIN() on two different datatypes not allowed...

svn-id: r17551
"
"91c533ffaee1b9ae77564a11b5bf1584cf7cfafd","2005-04-11 20:38:17+00:00","Endian fixes, getting past the 'Please wait...' loading screen now

svn-id: r17552
"
"40d7c623ccffc35bbf670fbebf51abc3ec1a39f3","2005-04-11 20:41:00+00:00","cleanup

svn-id: r17553
"
"17163ea7a50fc09d5146d27716c186882f129ed4","2005-04-11 20:44:33+00:00","no, we only check for the value being 0, so no endian conversion is needed ;-)

svn-id: r17554
"
"510fcec93de60df2363aa8f90851eefe310038b3","2005-04-11 21:44:08+00:00","Patch from wjp. Support for CD and EGA versions.

svn-id: r17555
"
"40fb3732c0e57d8ee4e1719df74ac5de4e60e9e2","2005-04-11 22:44:37+00:00","endian-convert pieces value when read, instead of when they are loaded (since I don't know how to tell how many picts there)

svn-id: r17556
"
"1f6ca5d898d7a482a52a0ace481612ff06ff573d","2005-04-11 23:01:42+00:00","add comment explaining this struct contains LE values

svn-id: r17557
"
"a0ee8f6ed6229d7275291cc784ad122d17a3cdb8","2005-04-12 00:25:27+00:00","Remove unneeded files.

svn-id: r17558
"
"e096cf83f28025233728f4e7b6cf80ee85ca6aad","2005-04-12 00:34:23+00:00","Remove reference to resource.h

svn-id: r17559
"
"dea27e2c63bbedcc1dfb51bfb1c0ace902281e2e","2005-04-12 02:29:50+00:00","Work in progress on opcodeE0 for HE games.
Cleanup.

svn-id: r17560
"
"973b4073c90f9b84c02fbf77535377a500e5c5a1","2005-04-12 02:35:59+00:00","Sync.

svn-id: r17561
"
"fefd65c33c33606da3076ce040c33266b5875154","2005-04-12 05:26:48+00:00","Use paletteNum.

svn-id: r17562
"
"03f07f7f8ab1844fd8e197d607b6e4203f4d5f3a","2005-04-12 06:06:56+00:00","Add angle change.

svn-id: r17563
"
"eed70f3dbac9cea01375b3351aa4702d510cfbe5","2005-04-12 07:52:15+00:00","Cleanup

svn-id: r17564
"
"996bbacc27d3f7202f2318bf5aeac5d7c0ae6fd0","2005-04-12 08:51:06+00:00","Removed unnecessary semi-colon.

svn-id: r17565
"
"185aa763513f2e7e3c206ade8fb0c51c24c49b55","2005-04-12 08:59:45+00:00","Add comments on CD-specific opcodes

svn-id: r17566
"
"4efa8da52a1f64796562629c286be09ea10fd624","2005-04-12 13:18:40+00:00","Not all polygons should be cleared in startScene().
A few minor corrections.

svn-id: r17567
"
"003b3a3f487500e17788590ea1c5e75b55221765","2005-04-12 13:44:06+00:00","Add missing segment

svn-id: r17568
"
"7c831c9c4c555db5d9a39d0d9abeed075a58a5fd","2005-04-12 22:41:25+00:00","Patch #1180882 'GM/GS Percussion Remapping'

svn-id: r17569
"
"3536cd0aa2d9ade01d7f5bf0c19c6a573739a398","2005-04-12 23:45:15+00:00","Patch #1181639. 'GOB: Possible inter_renewTimeInVars() fix'

svn-id: r17570
"
"bdbd56406c20dfa7425a71de22999cc92065ce77","2005-04-13 00:11:49+00:00","Patches #1164217 'Updated GS Support + Percussion Remapping Patch' and
#1181750 'Updated Native MIDI documentation'. Thanks _tom a lot.

svn-id: r17571
"
"bd9d8c6b31a7b5ecbb86ec819fec21564e0930fc","2005-04-13 00:47:17+00:00","Make VAR macros safer.

svn-id: r17572
"
"1ac6a09a9142bd06130531534f733314d6f013c4","2005-04-13 00:52:15+00:00","Fix hang in EGA version. Thanks to wjp. Be careful with that parse_printExpr()

svn-id: r17573
"
"a223723b4bf91548551dc30cc78dc8e6b0a57d34","2005-04-13 00:52:54+00:00","Mention NES platform in documentation. Just forgot it last time

svn-id: r17574
"
"e867bd9e6e49f9083d36aa49423ca37b481aa462","2005-04-13 00:55:28+00:00","Mention MM NES since it lives on our compatibility page for a while now.

svn-id: r17575
"
"4aff3f0dc81cb39fd78c9da70820d49aac195014","2005-04-13 06:17:54+00:00","Fixed typo in comment.

svn-id: r17576
"
"c9388604a339bdc560534c93901ea9984e329729","2005-04-13 06:30:02+00:00","Increased buffer size to avoid overflow when looking at the Loom help in
the 'Passport to Adventure' demo.

svn-id: r17577
"
"75f6aa850b5218692b21ef45f35ecf7540d68806","2005-04-13 06:30:41+00:00","Fixed Indy 3 fighting in the 'Passport to Adventure' demo. Apparently it
expects the same keyboard mapping as FOA does.

svn-id: r17578
"
"b8d3bec5681afb05430a070c86fb17d05919dfff","2005-04-13 06:53:38+00:00","Read/write INI entries from config file in HE games.

svn-id: r17580
"
"d3ea799f23da68077c963ef403a1dabd2ad269a7","2005-04-13 10:34:47+00:00","_stringBuffer can have mutple strings, ie in pajama2 startup.
Add safety check for buffer size.

svn-id: r17581
"
"4b7999b6faeac7fe3a824736636330c0793091fb","2005-04-13 10:40:06+00:00","Ooops, was not used.

svn-id: r17582
"
"d8467268c4a447c40d2a53342b4d60a07d488532","2005-04-13 11:03:23+00:00","Off by one.

svn-id: r17583
"
"59e96ca993a23eba56a11612dccc3bf7bb54c6a9","2005-04-13 12:36:19+00:00","Pedantic fix.

svn-id: r17584
"
"4532652b39e026ecb679d5fa42ffd84e98551ac0","2005-04-13 13:32:58+00:00","Fix bug #1182206 'Maniac Mansion (NES) doesn't run anymore after Apr 10 commit'

svn-id: r17585
"
"c908f80891f42f83478554aa500c569c11e69000","2005-04-13 13:44:31+00:00","Patch #1182233 'Updated README Native Midi Documentation'

svn-id: r17586
"
"c60678ed86b4c5bc1fb07dde269b9d853db1300c","2005-04-13 14:06:17+00:00","Since the latest change once again makes this a proper sentence, I've
reverted my previous change. This patch also replaces some tabs with
spaces.

svn-id: r17587
"
"a5993b21129b133bdbd570a3f540caf44c0c3958","2005-04-13 18:27:29+00:00","Support for Red Book audio in CD version of gob1.

svn-id: r17588
"
"839c8add38ba710654cbe304493521584e663dd7","2005-04-13 18:36:55+00:00","Get rid of errno; add some (optional) error checking facilities to SaveFile classes (they are ugly, and to simple, but better than nothing)

svn-id: r17589
"
"dbfd703d5123459fa92410f3c33b62a9840e53b3","2005-04-13 19:48:49+00:00","Updated comment

svn-id: r17590
"
"0f3ab2206ae3ed22ed190fb3e46bbccc54e432bf","2005-04-13 19:50:58+00:00","Only cache a track if it really exists, this should prevent some issues when playing with invalid compressed tracks. See also bug report #1181979.

svn-id: r17591
"
"07ed5e40a5ff9e11ee716ff2f7a89104c4949f6f","2005-04-13 20:53:36+00:00","Patch from wjp. Fix keyboard input.

svn-id: r17592
"
"8e8c2de3ff9fb2fc2913128c03e46a1df6e6a8e5","2005-04-13 22:32:59+00:00","Enable perfect timer so intro runs in sync now. Matches disassembly

svn-id: r17593
"
"50bf840b9fad86724863e0c323fc3e0d873e9acb","2005-04-14 03:26:23+00:00","Set result back to 1 for now, otherwise chase locks up.

svn-id: r17594
"
"a3882f3af779c5b5726b24734fc74a702f199be4","2005-04-14 06:06:59+00:00","Add HE7.2 difference in o_getResourceSize().
Add support for checking size of music resource.

svn-id: r17595
"
"e8a2cf1cf8fe2519ae13506b6cb2e140812f7d81","2005-04-14 06:59:46+00:00","Pass user supplied $CXXFLAGS to the compiler only once.

svn-id: r17596
"
"5b50c4e2e8342c3e87d236155d745162cd8e51ce","2005-04-14 10:00:03+00:00","Added TODO item about the insanely CPU intensive credits roll.

svn-id: r17597
"
"5ddb09fecb304526f89b8e85e5b42928d342a2be","2005-04-14 11:23:18+00:00","Add missing safety check, should only clip if rect is valid.
Fixes Eggs Away in farm

svn-id: r17598
"
"7a30956dcd083d67be77e75426939057306d2983","2005-04-14 11:33:12+00:00","Add missing safety check, needed when called directly.
Fixes assert in eggs away of farm.

svn-id: r17599
"
"1b76f9d0581c15bc9190cefddd71a7ca15d157f5","2005-04-14 12:18:42+00:00","Set remap flag

svn-id: r17600
"
"4b18be1cf74af2da60fc94e67faefb1e1dbe24e7","2005-04-14 19:23:21+00:00","Removing this casting operator. I changed the only place it was used to an 'error' a long time ago, and so far nobody reported anything about it.

svn-id: r17601
"
"bec1acac06c8fcdfcd809ded4cd2d74fe7b6af3c","2005-04-14 21:53:37+00:00","Fix from wjp for redraws and input during delays

svn-id: r17602
"
"3be91ebf6a3f56d3abb6352a8b03051100925cc2","2005-04-15 00:07:14+00:00","o Switch track on each new scene.
o Slight improvement on track time calculation.
o Stub for gob2.

svn-id: r17603
"
"4cd1104317b3b1fbb9a01a5b91aeb7091053bc27","2005-04-15 01:02:22+00:00","Checks actor costume frame.

svn-id: r17604
"
"7c2e66df0e546083d92223514befa9c475ecba30","2005-04-15 08:34:18+00:00","Got rid of scaleX and scaleY, previous code was relying on overflow and to get it right, we would have to introduce floating point numbers. Easier, yet less efficient, is just to get rid of those 2 temporary variables and do the multiplications and divisions when needed.

svn-id: r17605
"
"2618ce80fa4055f1cb124c8bc0e425b727b562ad","2005-04-15 09:55:12+00:00","Update HE todo.

svn-id: r17606
"
"97652af2259882bc48f9a8bae4cae207f4d0f9dd","2005-04-15 15:19:41+00:00","MIN/MAX were in reverse.

svn-id: r17607
"
"f6fc9c1c21da624f70ae2356759e2042977e21c2","2005-04-15 23:15:05+00:00","Fixed

svn-id: r17608
"
"df3bc8bb37fb182c7bb2a2e558c9533c4563638f","2005-04-16 01:39:51+00:00","spelling

svn-id: r17609
"
"c810139b72939048da3d9acf4e2fb97d1790459d","2005-04-16 04:56:06+00:00","use dstResNum for destination, if set.

svn-id: r17610
"
"2b6bdb6119679cef4354ad25fb1111eee268fa45","2005-04-16 05:18:59+00:00","DstResNum state is always zero.

svn-id: r17611
"
"a9ff09b06602082086207971f8c5d24ec30fe664","2005-04-16 05:36:01+00:00","Adjust for footdemo, which triggers assert.

svn-id: r17612
"
"537b8ae7e839421bab653441bfae9aea2c4656a6","2005-04-16 06:16:22+00:00","Add missing check for palette remap in drawWizImage.
Can get further in freddi4.

svn-id: r17613
"
"57711d54fe768a78abe6af54a56b579bdebad262","2005-04-16 10:16:31+00:00","puttmoon GID no longer used.

svn-id: r17614
"
"43aab9eabb89c8e9418f98be20b6f6c4d355284f","2005-04-16 10:26:49+00:00","Cleanup

svn-id: r17615
"
"6e903f684ac6c5a2e7f4e54e1c3336a089f6c5b9","2005-04-16 10:42:19+00:00","Cleanup

svn-id: r17616
"
"58298999f349831f18a3a4d33dac97215cffa334","2005-04-16 11:01:31+00:00","Error on all unknown compression types.
Remove some unused cases.

svn-id: r17617
"
"f6d87c868949771f65d3996308b4dfde2357089e","2005-04-16 11:03:34+00:00","fixed ram dialog crash
implemented: sfScriptSpecialWalk,sfScriptWalkRelative,sfScriptMoveRelative

svn-id: r17618
"
"e9be61a465874219638b204e24f74e9ffa2e8744","2005-04-16 11:31:00+00:00","Disable again, some sounds loop forever.

svn-id: r17619
"
"7aebedcc148cb4ccb9a74eb19d9cfc25f0d85455","2005-04-16 11:40:15+00:00","Patch #1183808 (GUI: Less CPU-intensive credits scroll), with some tweaks by me

svn-id: r17620
"
"ff7c1086af432ff5125c109b7ecebe5ddb1ebd40","2005-04-16 12:41:43+00:00","When recreating the canvas, do a full redraw so that all the dialogs
behind the credits show. Until we have a new canvas, don't draw any credits
text, or it too will show up on the canvas.

The latter, at the very least, was a bug in my original patch.

svn-id: r17621
"
"90217a59af11bab4ff3b8bf510a0d5274ba28053","2005-04-16 12:41:56+00:00","Improved auto-detection if MD5 is not known / MD5 support is disabled

svn-id: r17622
"
"a804152443dc4215625de52f6d81f5e394517465","2005-04-16 12:42:09+00:00","cleanup

svn-id: r17623
"
"8b73e6a7dae1326bb5a56301462e8bc70e5b072b","2005-04-16 13:09:34+00:00","_screenHasChanged == true  implies  _canvas.pixels == null; so replace it (after all, we don't want to draw text when the canvas is not yet ready, no matter whether this is due to a screen change or for any other reason)

svn-id: r17624
"
"f958556ba652f2aae4874472c08190a2d18fe434","2005-04-16 14:07:43+00:00","Small correction.

svn-id: r17625
"
"ca5bb36c115e284476ccdc2aeac378e8c26ddd18","2005-04-16 14:22:14+00:00","'unstubbed' o90_getLinesIntersectionPoint

svn-id: r17626
"
"1c6e1853e3a28d50b49ea6aa329bac4892e4e7a6","2005-04-16 14:32:32+00:00","cyx added o90_getLinesIntersectionPoint()

svn-id: r17627
"
"a117f4f832627b32ef005e9e1ff23f6d67aea68a","2005-04-16 14:36:51+00:00","Palette slots are supported, working in pajama3 at least.
Fix typo.

svn-id: r17628
"
"471a58680ddbe7a7704ae8d4a4223f8c495568d8","2005-04-16 14:45:21+00:00","Filter out extra path setting and useless setting when writing INIs details in HE games.

svn-id: r17629
"
"40c45f5408299bdb1a133379b59bea131f5a5540","2005-04-16 14:49:00+00:00","No longer seem to occur.

svn-id: r17630
"
"ee62127aceb2792cb14e28db848705b11f1ce716","2005-04-16 14:59:15+00:00","Add mouse state VAR for HE 72+ games.

svn-id: r17631
"
"1507203d93dcd6466e8840928d46fc44d00720d1","2005-04-16 15:21:19+00:00","VAR78 needs to be set in HE80+ games
Active sound channels VAR exists in HE80 too.

svn-id: r17632
"
"036a985f9439614d08bf5b3a4f34c43946d0c030","2005-04-16 15:26:19+00:00","Ooops

svn-id: r17633
"
"7b9a3b1fa73a2433201ac1c9d63952b5e9076158","2005-04-16 16:29:11+00:00","Clarified/corrected my own comment, otherwise I'll probably forget exactly
why this was necessary.

svn-id: r17634
"
"bffeb58d06f89fc49d64c349d3d8cfa4f65a0664","2005-04-16 16:55:35+00:00","fixed: sprite hittest, speech draws in screen bounds

svn-id: r17635
"
"8ef991fe4a489d0baf196d450cef7ab6edee8530","2005-04-16 16:56:16+00:00","Clarified the second comment, and removed the overlap between the two.

svn-id: r17636
"
"b31ee93c75be5b715d282a36f01502e0fe293610","2005-04-16 17:05:14+00:00","vc compile warn

svn-id: r17637
"
"caf142657dad21aa80a09387e34786591b2088ed","2005-04-16 17:53:18+00:00","setLabel should probably cause an automatic redraw...

svn-id: r17638
"
"aea451f092a90bdc28bc8bd82508ec40b9920868","2005-04-16 17:55:09+00:00","Reunify DirBrowserDialog and FileBrowserDialog; implemented file browser mode for OSX, too; fixed some memory leaks in the launcher

svn-id: r17639
"
"44acfd9467e126d324a6ac730dccedd30c916480","2005-04-16 20:59:24+00:00","Implement sfGetDeltaFrame and sfEnableZone. Fixes freeze when sanctuary
gates open and also used in world map.

Spelling and indentation fixes here and there.

svn-id: r17640
"
"08424bf6dbb97d65c15f8422d425d523d103a35d","2005-04-16 23:31:02+00:00","Hack to get the CD version to play even if no CD track is present

svn-id: r17641
"
"b05e1cd997034b98276b094a044bda9fb00a0d43","2005-04-17 01:26:41+00:00","Move HE bugs/issues to wiki (At http://wiki.scummvm.org/index.php/HE_Progress )

svn-id: r17642
"
"95c23c4cc8801fbbcbce94c5a09194eb764c81ae","2005-04-17 03:09:03+00:00","Missing brackets.

svn-id: r17643
"
"6feb1a75f69438df2d2ccd8909f34c53b09a342a","2005-04-17 07:40:40+00:00","Revert + 1 to width/height, caused invalid write.

svn-id: r17644
"
"9daddf595570e536e622f1b85274e40401da66c2","2005-04-17 09:45:38+00:00","wizImage compression type 2 uses different decode method, so disable for now.

svn-id: r17645
"
"919af98314473eadd139b1949e353342e4b6a508","2005-04-17 11:20:59+00:00","Added Dialog::wantsScaling(), to allow dialogs to turn off automatic scaling

svn-id: r17646
"
"a19ab36dff38b590ce238e295fc1cd6095610c8e","2005-04-17 11:23:55+00:00","oops

svn-id: r17647
"
"e0adf9db1701a56d5854a340cd2fd0aa612854eb","2005-04-17 11:24:42+00:00","oops, again

svn-id: r17648
"
"f4a5d245b58648e3d8fe163ea9ef46cd63407f85","2005-04-17 11:26:13+00:00","Updated TODO list

svn-id: r17649
"
"a9f700b0a31c8bf2de7c2adf78a0e2b36f4edfbc","2005-04-17 11:47:44+00:00","Allow usage of ScrollBarWidget with a non-standard width

svn-id: r17650
"
"1cce2fd366e2fdb31afc7b98f9621b7ba4c93a35","2005-04-17 11:53:25+00:00","Renamed 2 script functions which are correct.
Moved messages about missinf script functions to top level and made
them more visible

svn-id: r17651
"
"2141a2648cba0451aec05c8ef2a8ad5dd724ef16","2005-04-17 12:03:03+00:00","Use variable width scrollbar in the console dialog

svn-id: r17652
"
"caae2f00de411c7a26f5d5cd0a31fe23a017e501","2005-04-17 12:55:42+00:00","Add separate function for loading palette from choosen room.
Avoid pointer problems.

svn-id: r17653
"
"c673f5250e8f740f5520e6f7c77f410532cdeff6","2005-04-17 14:20:44+00:00","Fix buffer overflow regression.
Use same buffer sizes as original.

svn-id: r17654
"
"7d7e2a11a2b6e82b0b6a7d4d96facd86db2553a2","2005-04-17 14:27:17+00:00","Debug no longer needed.

svn-id: r17655
"
"e53cefd4b91d3d445f830c93b28c8e172d22f98d","2005-04-17 14:33:21+00:00","Doesn't exist in HE72

svn-id: r17656
"
"fe93d2d7cf2b3c57ca17428d2427181a1d2f57c0","2005-04-17 22:37:16+00:00","cleanup

svn-id: r17657
"
"adc21c1ac338489b6ef02cb54ae6642495fdbfc5","2005-04-17 22:40:45+00:00","Move _numActors to a more sensible place, and make it protected; fix confirmFOODialog() method names to comply with our guidelines

svn-id: r17658
"
"c4e7f403f8b36c4c0437b6fa911f383dfa0770ab","2005-04-17 22:59:43+00:00","Split out some index reading code into a new method readIndexBlock()

svn-id: r17659
"
"96e40213efc65644c3685ca543f6ddbc05a27d87","2005-04-17 23:19:16+00:00","New virtual method getObjectIdFromOBIM

svn-id: r17660
"
"58966d6b90cf79ad7d6ed9ffb6e44eb74d38815f","2005-04-17 23:24:31+00:00","Move stuff around

svn-id: r17661
"
"d4ba67a49793677a19680f72f9e7fb14fc6c747c","2005-04-18 07:18:33+00:00","Use correct music offsets for HE games, only a few demos use wrong tunes now.
Get all music details for HE games from one function only.

svn-id: r17662
"
"6f550d419a7d3d341f4d32598ec8b18f12859094","2005-04-18 07:30:26+00:00","Add work around for inveotry background/items in putttime/puttzoo not always been drawn.

svn-id: r17663
"
"38df53db9f20139d19e6609e4ff630044b41fa44","2005-04-18 07:39:56+00:00","Ooops

svn-id: r17664
"
"0ca8095e95b53e593b833d48fb9b3cee52f4fbbb","2005-04-18 07:41:08+00:00","Ooops

svn-id: r17665
"
"769b2fed4625828e7572f96d95727f79ad34f79e","2005-04-18 10:26:43+00:00","o Unstubbed sfPreDialog -- we have enough code for that
o Started to restore inventory functionality

svn-id: r17666
"
"8d01148b797f66af457434284b3a41bd18b86098","2005-04-18 11:19:54+00:00","Sound size should only include sound data.

svn-id: r17667
"
"d391c2f837199cfecb0c26c518bbf804d3da3d3c","2005-04-18 11:44:01+00:00","Adjust again, for sound header differences.

svn-id: r17668
"
"1143bdf96ef276997c065d6f5d80e8e81608b243","2005-04-18 15:15:27+00:00","Small correction, fixes red rose in spyfox2.

svn-id: r17669
"
"ed2ed47701b8531d153c4c4fc933543e7be24b93","2005-04-18 15:33:02+00:00","Braces for clarity, even though it *is* well-defined which 'if' the 'else'
belongs to.

svn-id: r17670
"
"3ea96a13a053e803435e93b20cf07d01d0c3d821","2005-04-18 18:02:07+00:00","If we don't want to use reverb, then at least disable it properly, not via a bad hack

svn-id: r17671
"
"d52032c75c4c3964219874d68ec9a84dc8e6f3fa","2005-04-18 20:03:14+00:00","converse support improved (still has some bugs)
fixed: now protagonist can't be target object
fixed: statusbar color
added: *mouseButtonPressed in SagaEngine

svn-id: r17672
"
"50af78f93da6766cff8a426b6574d80f82ce3bcc","2005-04-19 03:32:08+00:00","These VARS are HE95+ specific.

svn-id: r17673
"
"b916eb19759d85cff90282078a0792b8355e941f","2005-04-19 04:12:49+00:00","Add some palette different in HE80+ games.

svn-id: r17674
"
"f3129c261a9f31b0501650725c6c30415b5bd368","2005-04-19 04:16:03+00:00","Ooops

svn-id: r17675
"
"ee3b511276027f4252ed21d6be487d1042a6f051","2005-04-19 06:16:53+00:00","Add patch #1185667 - GS Fix

svn-id: r17676
"
"dfaf0145da57f30c8fb148a76522ceade453a087","2005-04-19 06:25:35+00:00","Add tempo fix for simon1demo music, from bug #1164263.

svn-id: r17677
"
"fd6c9ad9d36144c0b68447840b19ace420857656","2005-04-19 06:44:54+00:00","Add different in monkey2 FM-TOWNS

svn-id: r17678
"
"ad96d7fdb109c26474a0caefda2dba17c18ac9d6","2005-04-19 07:06:05+00:00","Actually applies to all SCUMM 5/6 games.

svn-id: r17679
"
"9a758a9479767c97a0361959cae26fb82f7102df","2005-04-19 07:28:43+00:00","Simpler check.

svn-id: r17680
"
"e5f66f38b8a06366cbc64d693e2f4dd74e00a8f5","2005-04-19 07:42:51+00:00","Remove FIXME comment, the current code is correct.
The 6/6/6 style palettes are just SCUMM 5/6 specific.

svn-id: r17681
"
"90886d950642d155f44777e8cfe0ace6e277ac4a","2005-04-19 07:44:01+00:00","Fixed warnings.

svn-id: r17682
"
"a42001697040cb0aa072f40af02a29fbd71d6f8c","2005-04-19 07:45:55+00:00","Whitespace

svn-id: r17683
"
"5076c6a231ad300ba7b3a5fb912d9b7906a470c8","2005-04-19 08:29:43+00:00","Call initCommonGFX() to set the graphics mode etc.

svn-id: r17684
"
"414def8566671f0345ac5c8f70aae02b6382bd04","2005-04-19 09:53:06+00:00","pajama2/chase should be HE95.

svn-id: r17685
"
"6783d3e3010a517ff8e7d6b0585b042097bf3066","2005-04-19 10:16:12+00:00","HACK no longer required.

svn-id: r17686
"
"0e24739de1d6b241c1089ccf32778acf1ec33c06","2005-04-19 10:19:31+00:00","HE games set camera at this point.

svn-id: r17687
"
"c3bc118dc8fa39624c960f367c48d4f9bef48469","2005-04-19 10:35:25+00:00","Add RIFF sound type.

svn-id: r17688
"
"d9bb4aae1d6227f463dccd1ae2c65d71c8abcdf9","2005-04-19 11:07:06+00:00","fixed speech lock

svn-id: r17689
"
"35c675e2d211f4f2599eff199a3a2d04d87a6863","2005-04-19 12:22:50+00:00","Whitespace

svn-id: r17690
"
"d85f6d1688910747ab55803b7d2dc6304ef94d98","2005-04-19 12:43:54+00:00","More whitespace.

svn-id: r17691
"
"7c110ef81923501e8093c0899bda12a38caea7d4","2005-04-19 17:55:09+00:00","minor cleanup

svn-id: r17692
"
"167d43d9244aa5961fafbc3760dddbc1c04cc028","2005-04-19 20:18:28+00:00","safer and consistent with remapPaletteColor

svn-id: r17693
"
"2cfb9322e2e2b59fa2ab311491445ef801d4979a","2005-04-19 20:22:50+00:00","Added new (optional) OSystem::initBackend() method; this (and its usage) fixes bugs #1160977 and #1184664

svn-id: r17694
"
"25d56525c8856a069de0762ac72d2470083226c5","2005-04-19 20:35:48+00:00","Replace OSystem::hasAlpha with a feature flag

svn-id: r17695
"
"d23878ab6c30a17bc5654dbda14e3d8a15853fb5","2005-04-19 22:18:09+00:00","Separate occaionally glued intro sentence words.

svn-id: r17696
"
"214a5da948423aba60c289a2a158d2f91424d2ee","2005-04-20 00:46:37+00:00","Correct flag value.

svn-id: r17697
"
"2009b72679837ac26aab05cad265c483a34091bd","2005-04-20 01:33:44+00:00","Replace all GF_HUMONGOUS use with _heversion.
Make HE60 specific to puttdemo, since it is unqie.
Other HE60 games changed to HE 61.

svn-id: r17698
"
"fa3688e80f569c1447fb8ddd72e4c66f887c7a22","2005-04-20 01:38:48+00:00","No longer required

svn-id: r17699
"
"ea8d2a0fd010e65cecd60effc04f4c8a838859be","2005-04-20 01:42:55+00:00","Correction to last commits.

svn-id: r17700
"
"f360102741164509ce3310f1372f17fbb708d2f6","2005-04-20 01:44:52+00:00","Update comment

svn-id: r17701
"
"a77a0656ea702075a38e03873fd619589f186f51","2005-04-20 01:49:01+00:00","Switch to uint for safety.

svn-id: r17702
"
"54f59d761c5f54c7737137187d253b141b259c3c","2005-04-20 01:59:09+00:00","Re-order to fill in the gaps.

svn-id: r17703
"
"f960d3006ebc3f4e39d4f3f1701b1f7c10b27db7","2005-04-20 03:12:53+00:00","Fix cut and paste rror.

svn-id: r17704
"
"89ca4bf716757e27152a5e368c2cdedc75d50b8c","2005-04-20 03:13:06+00:00","Since lost/smaller use default windows cursor we setup our own

svn-id: r17705
"
"94e554a6702dcb220222e3fb7dd79b7274185615","2005-04-20 05:24:02+00:00","Rename sprite field for HE games.

svn-id: r17706
"
"90509f658849a87b22ad27fe1d5acb622b634d8d","2005-04-20 06:55:30+00:00","Rename wizImage process flag for HE games.

svn-id: r17707
"
"901e76ea83ea6736c6d286f5e29c66408c968aba","2005-04-20 09:24:29+00:00","Cleanup / comments

svn-id: r17708
"
"3f08f0bfb26b99e74ea689f4c2f773e663150ab4","2005-04-20 09:32:22+00:00","Fix bug 1184616 (GUI: Mouse drawn at wrong position in overlay mode)

svn-id: r17709
"
"005efe61aabaee8a664a44de2526fb76edd861fd","2005-04-20 09:53:13+00:00","Added ScummEngine::_platform; eventually, this should replave GF_FMTOWNS, GF_AMIGA, etc. (everybody is welcome to work on this :-)

svn-id: r17710
"
"51af9cf4aabb4f82408b6f16a57bbc36a3cc329b","2005-04-20 10:33:20+00:00","Add some additional details for sprite fields.
Remove the unused sprite/spriteGroup fields.
Break old He90+ saves but they aren't stable anyway.

svn-id: r17711
"
"bb2c4e6a9e181bc460bc0661168534a382b868aa","2005-04-20 10:38:13+00:00","Update debug message.

svn-id: r17712
"
"5a930d8fe73a4f9357ebaa5f2e342482cd8754fc","2005-04-20 11:03:36+00:00","this should fix bug #1181979

svn-id: r17713
"
"8b559ff87527f1b01a4358edbcbb7d90ec93764b","2005-04-20 11:13:56+00:00","code conventions

svn-id: r17714
"
"a18d4d5c2f6dbc985c5b3628228bb6078cf781bb","2005-04-20 14:45:23+00:00","Replaced drawLine() with a shorter version described in Wikipedia. It uses
a callback to plot each point so that it doesn't need to worry about how
the caller deals with screen dirtying, etc.

My plan is to move this function into a standard class. (That's why I used
the American spelling 'color' instead of 'colour'.) I just haven't made up
my mind on which is the most appropriate one yet.

svn-id: r17715
"
"c46ea8bc407e60224500e6d6efa08d2ddd6f318e","2005-04-20 18:21:30+00:00","Replaced the platform specific GF_FOO switches (using _platform instead now)

svn-id: r17716
"
"89c0e7a69cbfe630cce2bfe9078a49abdff8e4ef","2005-04-20 19:38:04+00:00","fixed actors bug after all demo passed

svn-id: r17717
"
"d2624d8e08d1868c7f8f9b9becc46d10784024c0","2005-04-20 19:59:18+00:00","cleanup

svn-id: r17718
"
"6e3fd4527e03f4eefc5ca74b023aac4ec5b77d12","2005-04-20 20:08:39+00:00","Yet another russian freddi4. now unencrypted.

svn-id: r17719
"
"9216ca4ed5b42339a2807a07c4a13525b5943c5c","2005-04-20 20:20:31+00:00","Added FIXME for the _haveMsg hack

svn-id: r17720
"
"b724929466507929cd7284f6d418ec1ba50bd0e0","2005-04-20 20:34:44+00:00","Split initScummVars and overload it; this makes it possible to define more VARS in subclasses

svn-id: r17721
"
"c04ad861fe751503c978cd47258baaa57c22b96d","2005-04-20 23:13:11+00:00","Moved some more VARs; added comments to some of the vars which explain where they are used

svn-id: r17722
"
"7963bb4cb92345948b8f737df8414929f93db527","2005-04-20 23:33:35+00:00","Renamed _mouseButStat -> _mouseAndKeyboardStat (that's what it really is); moved _audioNames to class IMuseDigital

svn-id: r17723
"
"bd5f93cece55bf5d75fa05d5623bed0da0cb3672","2005-04-20 23:42:19+00:00","Implement inventoryItemPosition()

svn-id: r17724
"
"7b93b0e079456018fdbc59e780925103ee345ca9","2005-04-20 23:53:29+00:00","Moved v2 verb code into class ScummEngine_v2

svn-id: r17725
"
"283a9f35ac294fa10105c7d8c18b57d7a2689e19","2005-04-21 01:30:07+00:00","Add not yet correctly working save/load. Use key F7 for saving
and F8 for loading. Now works only within current scene and restores
to entrance #0 which is wrong.

svn-id: r17726
"
"261a02beec87957beec3775b930b7f53d4ba3574","2005-04-21 03:29:31+00:00","HE98+ includes extra VAR checks at this point.
Fixes salesmen freeze in freddi4.

svn-id: r17727
"
"9cbc561eda0b0622cfa9a549a5fbfe0f7ee59f63","2005-04-21 05:14:19+00:00","Correct argument order.
Fixes glitches in freddi4/spyozon.

svn-id: r17728
"
"6eee1015616d769c448cad4e888dddf3919c01db","2005-04-21 06:05:07+00:00","Add Macintosh version of puttcircus

svn-id: r17729
"
"a9f779df383eb09aacd85d2183e7a685e9b13033","2005-04-21 06:16:59+00:00","Add Macintosh version of BluesABCTimeDemo.

svn-id: r17730
"
"9b3d2b3c8c0f88924ae4c8b5a0f31c1c46d32960","2005-04-21 06:29:46+00:00","There is HE99 version of f4-demo

svn-id: r17731
"
"cca9fb4804a910f3fe92c48328c825a924ef65f8","2005-04-21 06:53:15+00:00","Initialized variable to avoid Valgrind warning.

svn-id: r17732
"
"dd046c184e03feb0d513acf45495d63b595997c0","2005-04-21 10:24:13+00:00","There are Macintosh specific versions of HE72 games.

svn-id: r17733
"
"dace543c07947f874860f945dc15a35ab8b8b05e","2005-04-21 12:25:53+00:00","Fix source clipping of rawWizImages in HE games.
Can get further in spyozon now.

svn-id: r17734
"
"f281ea4427c992c6232aa75ac012e1039facf425","2005-04-21 12:33:47+00:00","Update

svn-id: r17735
"
"098e0cce58a0c4039ac05fd7134c378ce33e1b71","2005-04-21 15:40:40+00:00","Add palette function foe He99+ games.

svn-id: r17736
"
"d7f263ff1a7b291af01004cfb8951f27617bfd52","2005-04-21 16:02:37+00:00","Add palette function for HE99+ games.

svn-id: r17737
"
"9d2578eee913090486c1e86225d9f175620ca8c5","2005-04-21 16:07:31+00:00","Sync. HE100.

svn-id: r17738
"
"97749a934ee97f229e7c111fc80042d550b34864","2005-04-21 16:10:41+00:00","Need for HE100 version of lost too.

svn-id: r17739
"
"8d768798497c22530d436f901b232b1b43a4d51c","2005-04-21 19:27:17+00:00","cleanup

svn-id: r17740
"
"7127485ebc1ef1c06be9b5914d53fb36a6c591a2","2005-04-21 19:39:15+00:00","some cleanup and added some error() calls when handling wiz images type different from 0 and 1

svn-id: r17741
"
"059d1c4d20c6926655e7b88e67ae93405b67e205","2005-04-22 00:03:25+00:00","Add HE activity pack

svn-id: r17742
"
"a81fbc04d996152399857dd01e70dfb78d4d1f02","2005-04-22 00:14:56+00:00","Move HE activity on its place

svn-id: r17743
"
"65ade039ecf14033ec114de0697ccb8cfa987673","2005-04-22 01:38:27+00:00","o Fix save/load. Now it restores game properly but still at exit #0.
o Proper background for inset rooms. Crowd is gone now.
o Draw black border around inset rooms.

svn-id: r17744
"
"45bc8afad0ef974b4ff2b83daf4a21a063d1f3be","2005-04-22 03:30:58+00:00","Fix header check when using external wizImage files.

svn-id: r17745
"
"e6bd008e30bd399ad433b36f3abb69a3fc2140b8","2005-04-22 07:12:29+00:00","Add support for reading/writing to external config file in HE games.

svn-id: r17746
"
"ff19273ae6d161f63d81561a9a73f925afa9b652","2005-04-22 08:39:51+00:00","Must call openCD to support real Audio CD tracks

svn-id: r17747
"
"cdede6caa485c8ea6f1868b1723a52d77b544c1e","2005-04-22 14:11:04+00:00","implemented inventory
todo: timeout catchup & capital 'U' & 'D' handling

svn-id: r17748
"
"2ea2b51ed54e006dea55d7b55ebab1b6ce1ad052","2005-04-22 15:26:50+00:00","Changed 'BYTE' to 'int'.

svn-id: r17749
"
"f3049a41f409942acc39b81a3ad2bee924711d86","2005-04-22 15:43:42+00:00","fixed non assigned buttons in IHNM

svn-id: r17750
"
"ca33ec4563e05b0940e44de78e0f52bbbf6bfe41","2005-04-22 16:41:44+00:00","fixes sfEnableZone  ( 'house' problem )

svn-id: r17751
"
"969ef3dac93a21d981e4cc2a8c81c0f03a834417","2005-04-22 17:40:09+00:00","* Added new virtual base class 'Stream', ReadStream and
WriteStream are now subclasses of it.
* Added new methods eos(), ioFailed(), clearIOFailed() to
all streams. This allows better error checking.
* SaveFile classes take advantage of these new standard
stream APIS
* Removed File::gets()
* Added SeekableReadStream::readLine() (replaces File::gets)
* Added WriteStream::writeString, for convenience

svn-id: r17752
"
"fa224cbb3ffcf968800de3069bea6c068c917b93","2005-04-22 18:10:02+00:00","Use class File instead of FILE (not finished)

svn-id: r17753
"
"88d0b6cc44d81d982ac30b734a8af42f5efd6a51","2005-04-22 20:04:25+00:00","Only modify gDebugLevel, not the transient config

svn-id: r17754
"
"f7402737d70a9f906c3a4bdfd6199e5380987359","2005-04-22 21:12:37+00:00","Added SDL backend TODO

svn-id: r17755
"
"94c4f0cbe73a5e5e728039a54b44606e787eca51","2005-04-22 21:13:09+00:00","We have an official PS2 port now (although its status is not clear to me)

svn-id: r17756
"
"1f3ce23da8048981749c42df04c5a04dc11f24ca","2005-04-22 21:20:22+00:00","GameDetector isn't actually used here

svn-id: r17757
"
"86752763c8c09a8f71285f55b8cf8a6e10d8cc8d","2005-04-22 21:30:07+00:00","add a comment regarding an odd hack

svn-id: r17758
"
"78030693fc3f447a955b56fe491e2ec6422300cf","2005-04-22 21:49:29+00:00","Added macros for integer options; added some explantory comments to the option parser macros

svn-id: r17759
"
"7903943019c9883cd3c83cc0c4dd1a8c25d41410","2005-04-22 21:56:32+00:00","oops

svn-id: r17760
"
"c61d834c6ea85296ceeb1df36a7be2f84247d63e","2005-04-23 01:50:42+00:00","Always set file path separately in o72_openFile() so upper and lower case filenames are checked.

svn-id: r17761
"
"24f2ca3d3470908f037112eac92b4cf3730b1d81","2005-04-23 01:57:46+00:00","Adjust for last cvs change.

svn-id: r17762
"
"789007ec67d486eb111c7b3fcf82a2e951781138","2005-04-23 09:21:41+00:00","Check for a '\' before adding slash too, otherwise starting a game in root directory will fail.

svn-id: r17763
"
"cc526f0a01012c82a32b3c146e2006a1bf74c95b","2005-04-23 09:53:56+00:00","Simpler check, since VAR_NEW_ROOM is no longer set in small header games.

svn-id: r17764
"
"760017e4620dda0cd319fb8bdef0bb1ca85b0c80","2005-04-23 11:06:17+00:00","Should be HE61 now.

svn-id: r17765
"
"40c3fdddc79f6641910f48aa0ed2009b3f71669d","2005-04-23 11:31:26+00:00","Document our tools a little bit

svn-id: r17766
"
"edad36ee601c25f15fee2b04124ebdf9fc694f12","2005-04-23 12:34:35+00:00","fixed sfDropObject implementation

svn-id: r17767
"
"e70c98fa22c193dd5077a21729771aa440edd106","2005-04-23 12:55:54+00:00","Oops. This should have been removed long ago.

svn-id: r17768
"
"8fddaada1dd6dad2302eb153892257d2020883fc","2005-04-23 13:52:27+00:00","Simplified debuglevel handling:
- it's only honored in the global level of the config file
- all checks for it go through gDebugLevel now, which is made global
- the '-d' switch is handled in a slightly saner and consistent way
- removed 'debuglevel' from the config format documentation; we do
not want to encourage the avarage user to use it

svn-id: r17769
"
"5626581da84280b9247b99be097b2c807546b24f","2005-04-23 14:00:51+00:00","These structs must be packed

svn-id: r17770
"
"78b340adfb5d49faae8042806f89bf2defae7f54","2005-04-23 14:15:00+00:00","Whitespace

svn-id: r17771
"
"29d249c696252820d61eed6c42498d0941fa1339","2005-04-23 14:28:59+00:00","Remove StringMap class from map.h (at least for now)

svn-id: r17772
"
"2cc5040a9a3801a3cda6eb144b5514ab3e8b24c9","2005-04-23 14:30:53+00:00","Added new ConfigFile class. It is not yet used anywhere. ConfigManager will be rewritten around this class. Note that it is not final yet and may be revised in many ways.

svn-id: r17773
"
"88dfc9891e9b75f9e3fbd4a5c27e06abc7f9caf8","2005-04-23 14:32:40+00:00","decompressWizImage shouldn't be called directly by charset renderer in HE games.
Fix palette issues with charset type 0 in HE games

svn-id: r17774
"
"06a313f0a8290fc943a4748b3e79734f5a4faf28","2005-04-23 14:39:15+00:00","Change the way the command line options are put into the ConfigManager

svn-id: r17775
"
"b43e1e960fadff6b900329ec96c32121406cb92b","2005-04-23 16:09:22+00:00","Map is only needed in intern.h

svn-id: r17776
"
"554ecd57cbe1bf396cda807e25bd4ed832850d0c","2005-04-23 16:52:11+00:00","Don't use Common::Map for the object table at all; rather use bsearch on a fixed size table.

svn-id: r17777
"
"ef760277e62438d2d9a8a389746b5e811c3c5264","2005-04-23 17:02:38+00:00","This code should be revised...

svn-id: r17778
"
"55947fb319edfac1563152968b97a24295f95248","2005-04-23 17:33:28+00:00","Make StringMap class (with case insensitive keys) global

svn-id: r17779
"
"a6b59c0be1514fd1a9c716f9f6995b80cef7eeb2","2005-04-23 22:28:37+00:00","Implement some missing methods

svn-id: r17780
"
"c318d82f013d13c02ae0494614f6c4dac480dced","2005-04-24 03:41:57+00:00","The last section of config file was not saved, when loading config file.
Fix all string compares.

svn-id: r17781
"
"2a14ff0a1a48b540b849ae1c80ba2008724bccc1","2005-04-24 03:52:56+00:00","Use new ConfigFile class for read/writeConfigFile in HE games.

svn-id: r17782
"
"43286fc88082dca938c240e0e629a583280016d0","2005-04-24 03:58:12+00:00","Add additional check for comments with ().
Required for map.ini file included with mustard.

svn-id: r17783
"
"637e86e5b4888e3c6ba6256c74900deac6c5313c","2005-04-24 04:51:36+00:00","Remove out dated comment.

svn-id: r17784
"
"29532320c198241d598206e182bc5cfa4c271424","2005-04-24 10:26:31+00:00","Corection a few more heversion checks, caused music regression.

svn-id: r17785
"
"6f29b92a5fa765ae3adb270035aeb104c2a9765d","2005-04-24 12:08:27+00:00","I believe this is the correct fix for the sanctuary door bug.

svn-id: r17786
"
"5553ef53f191ae190fcd6c35c430e61d665bae44","2005-04-24 12:13:03+00:00","Moved conversation stuff from Logic to Mouse.

svn-id: r17787
"
"ce3cd9b194633e97eabf693f66498335f1f7557d","2005-04-24 12:21:53+00:00","Changed the semantics of debug level 0 from off back to something more similiar to how it used to be (default debug level now is -1)

svn-id: r17788
"
"a909052c8d0f5b87c2a7602f2cc64237bd381343","2005-04-24 15:17:38+00:00","fixed object frawing
implemented sfGetObjImage, sfSetObjImage, sfSetObjName

svn-id: r17789
"
"59f6002b03c6d46a9f576b2f3e796c0665c1dc56","2005-04-24 15:35:03+00:00","Fixed warning. (Unused variables.)

svn-id: r17790
"
"4cdcb0b04915fdc9acdf913a4424169c74892751","2005-04-24 15:38:53+00:00","Don't wait for the lead-out sound to finish when playing the 'shaman'
cutscene, as it's obviously meant to blend in with the rest of the game.

svn-id: r17791
"
"da5f819cf9add621a2b55505bb4d4c0c44b111ca","2005-04-24 18:26:12+00:00","You can safely delete/free null pointers

svn-id: r17792
"
"14f56887ea94ebf077c80398bde7814c6211d9f3","2005-04-24 22:41:21+00:00","Some C++ compilers don't support the 'not' keyword, it seems

svn-id: r17793
"
"967fd877b1190c3eded1d42421977eb307079e07","2005-04-25 03:45:37+00:00","Remove excess ;

svn-id: r17794
"
"23fa40d56c89ec2b95a72be67346cc4d97eb6194","2005-04-25 04:35:42+00:00","Add misisng r.

svn-id: r17795
"
"eb3b057836ff5a88d10730ed6f9e059689364209","2005-04-25 05:14:01+00:00","This ought to fix bug #1188910

svn-id: r17796
"
"8776150321abb1d7d5f6ceb512713583e53d605e","2005-04-25 05:23:21+00:00","Better support for 'seamless' cutscenes, i.e. ones where - in theory - you
shouldn't see where the cutscene begins/ends as it's the same image as is
currently displayed by the game engine itself.

Of course, in reality you can still see the seams easily. But at least it
looks a bit beter now. I made most of this change yesterday, but it's less
hard-wired now.

svn-id: r17797
"
"93803048327377ed3a4f3966e7cf7719253a56ed","2005-04-25 05:44:12+00:00","Read index of music file in HE games at startup.
Only reliable way to always get correct music tracks.

svn-id: r17798
"
"8e3672852687902b7f6c6742341922cd833abdba","2005-04-25 05:59:01+00:00","No music file in lost/smaller.

svn-id: r17799
"
"93279ff29e82973dbcf117fe98ba325dfab5cb8d","2005-04-25 10:22:38+00:00","Minor cleanup

svn-id: r17800
"
"f08a767aa8b5c822f47b3931d7e8c71468112c94","2005-04-25 18:53:58+00:00","This one looks wrong too, but I don't think it has caused any crash for me.
Not yet, at least. And now, hopefully, it never will.

svn-id: r17801
"
"21ea71a7620bd2c29f49a940500e0de54c575dfa","2005-04-25 19:03:13+00:00","Keep track per piece whether or not it was dynamically allocated, otherwise
we'll end up trying to free invalid pointers. (Happened to me at the end of
the level where you get the voodoo doll.)

svn-id: r17802
"
"a0f56739cd7c325f927d148593b64018c59ca6d1","2005-04-26 04:22:08+00:00","Add Macintosh version of puttrace

svn-id: r17803
"
"74ae914df2b88bcb28e0fec40e9e69ed3915af41","2005-04-26 06:29:53+00:00","Make it possible to specify language at run-time, since the Gobliiins 1
support for other languages appears to work at least fairly well, and this
makes it easier to test it.

svn-id: r17804
"
"5d392d90d6219c811aac32848fc14a5ea76a848c","2005-04-26 06:34:52+00:00","We need to use unsigned chars here to be able to print accented characters,
e.g. in the German cutscenes.

svn-id: r17805
"
"2df1161e0c5f896e9bb9c2215cc4d30e0a3c12e1","2005-04-26 06:47:42+00:00","Add stubs for the two smacker related opcodes in HE games.
Makes it easier to test new titles.

svn-id: r17806
"
"e61728168d9b4eefb0626d6a81b5812a7b379737","2005-04-26 07:44:14+00:00","Always skip smacker files in HE games.

svn-id: r17807
"
"62216f9cc22dff4ca220e47fb4b085bbdc354c55","2005-04-26 07:52:37+00:00","Enable Blue's demo, for testing only.

svn-id: r17808
"
"3cc0d1b142df2f79bee4b9c93556db7985506cea","2005-04-26 09:21:54+00:00","Removed dead code

svn-id: r17809
"
"d10947dca1201b16d94e51e6bb3f1dab3aab074e","2005-04-26 10:27:53+00:00","now uses OSystem::RGBtoColor for yuv->rgb conversion tables instead of checking gBitFormat

svn-id: r17810
"
"3931115b9a6484094deb207d080139c5eb367626","2005-04-26 10:58:49+00:00","Split loadRoomSubBlocks into a 'static' part (loadRoomSubBlocks) and a 'dynamic' part (initRoomSubBlocks)

svn-id: r17811
"
"728da398d7f7f4c43567157f04d1bbf9a3acbb5a","2005-04-26 11:05:06+00:00","...and since RGBToColor() returns OverlayColor, let's use that datatype
instead of uint16. (I never realized that we could use RGBToColor() here
myself. Good job in spotting that!)

svn-id: r17812
"
"f03e73c621d92f7a4bb9013c3861a16d6bfcb6fa","2005-04-26 11:10:27+00:00","Added some comments

svn-id: r17813
"
"e811cb091b8f1e483c7c086c67b67dcfa22db667","2005-04-26 13:16:02+00:00","Perform some clipping (some old savegames had bad usage bits in the same and caused a crash for me due to lack of clipping)

svn-id: r17814
"
"5586ce3243a7f51095918c7cb1fdc009ec1e3178","2005-04-26 13:16:18+00:00","Use an intermediate variable, to ease debugging

svn-id: r17815
"
"00f73aeeca5b79035ecce00ea18a371e93dedf9b","2005-04-26 13:17:11+00:00","Reduce dependencies on saveload.h

svn-id: r17816
"
"9421c2a9b9eea44dcc7ac8d7cc1170ebc20f0e45","2005-04-26 13:22:46+00:00","Call setupVolumes in a more appropriate part of the save/load code

svn-id: r17817
"
"c9cdee2d977133cc3371fa582675f4d84bddbd9f","2005-04-26 13:33:17+00:00","Removed the ugly saveOrLoadCursorImages hack and instead properly overload ScummEngine::saveOrLoad; did the same for the V7 IMuseDigital save/load code

svn-id: r17818
"
"0ca7d3a61e713b09870f0b421a490beffd8105e0","2005-04-26 13:43:01+00:00","Added/corrected some comments; moved NES costume init code to a more appropriate place, and cleaned it up

svn-id: r17819
"
"9d07432375681bc99627a595ed4d259898a607e6","2005-04-26 13:47:47+00:00","Comment corrections

svn-id: r17820
"
"aa330e827cf3d288c6599216846df0415ec08daf","2005-04-26 14:01:38+00:00","Clean up HE save/load code, at the cost of savegame compatibility (v71he and upwards)

svn-id: r17821
"
"973cb9a281e7b2dc73b7c640172954cc5f0bacfd","2005-04-26 14:18:34+00:00","Make use of the new loadRoomSubBlocks (which only loads static room data now) in the save/load code; this also means we have to save a bit less data, and reduce code duplication

svn-id: r17822
"
"4239ac74076bb0c7024bd11a511933a3596a5c69","2005-04-26 14:24:29+00:00","Since we don't store _CLUT_offs anymore, we can clean up the code related to it now

svn-id: r17823
"
"26ace2309274a907bfc11424f05342e8b512435a","2005-04-26 15:13:04+00:00","Save addtion HE opcodes specific variables.

svn-id: r17824
"
"e88ed2908e1480f3cd6ffafe878003f276049bea","2005-04-26 15:31:51+00:00","Save _hePalettes in HE99+ games.

svn-id: r17825
"
"ab5355831540e802e838b8872e09db3c3ea97b7a","2005-04-26 15:41:15+00:00","Fixed incorrect use of kMainVirtScreen

svn-id: r17826
"
"3a4dafeaa37226d652eb2e00f92ab73d0acc517e","2005-04-26 15:42:35+00:00","desaturatePalette is V8 specific

svn-id: r17827
"
"b56b84b1459b06ba1da15c90254bc8b7aba309b3","2005-04-26 15:52:55+00:00","Use kVerbVirtScreen were appropriate; removed unused param from initVirtScreen

svn-id: r17828
"
"fc016e8e8a39e89460ec1f6d51489fca9af46872","2005-04-26 16:43:20+00:00","Added a few more comments

svn-id: r17829
"
"f28c3d14a3820fc835ac9473f55aa11640b07abc","2005-04-27 02:16:34+00:00","fixed filehandling bug

svn-id: r17830
"
"3065bab0cbc427d5f485b6ac93890a4e9630a62f","2005-04-27 04:47:02+00:00","Add some basic support for pjgames.

svn-id: r17831
"
"e05d6e833154e3dea66e1cf63d4378aca13a54b0","2005-04-27 05:05:10+00:00","Add feature flag for HE games which appear to have localized versions.
Allows accurate filtering of filename in subtitles.

svn-id: r17832
"
"b407f0040edf88090ebe76cab20191c5dcb2065b","2005-04-27 07:57:28+00:00","Fix comment (copy & paste are evil)

svn-id: r17833
"
"3a4c1f057ec070d579d0be4307dc95afbdfb3160","2005-04-27 08:43:23+00:00","Use a pointer ref for RGBtoYUV, instead of an array, so that we can choose to allocate RGBtoYUV on the heap; added a comment that tries to explain why RGBtoYUV and LUT16to32 are evil and slow and how they could be removed

svn-id: r17834
"
"7c11e68db351c9901e85cfc76ec934adc1048c7b","2005-04-27 09:15:18+00:00","Correct actor clipping in HE games.
The original games rect clipping was not as strict.

svn-id: r17835
"
"2c012197910972fc5a16a3316b21b2b4ad7d8687","2005-04-27 11:51:11+00:00","some load-save preparetion

svn-id: r17836
"
"f6971f847ce37b7c8afbbd29262a1ffed7335610","2005-04-27 13:55:55+00:00","Fix glitch when skipping AUX sequence in freddi.
Add missing bits of AUX code.

svn-id: r17837
"
"f5189c323b1ce0ae8f713d4799a7fc6b77cc1efc","2005-04-27 14:26:52+00:00","Minor clean up, HE games should always copy strings directly.

svn-id: r17838
"
"8545634aaa684847036e040401e4770dafd0c091","2005-04-27 14:30:32+00:00","Rename function.

svn-id: r17839
"
"7c3cfae122bd41fd4aa4c5573bbc38d53f337c38","2005-04-27 14:47:10+00:00","Minor cleanup.

svn-id: r17840
"
"6fb944befd6e7bc089d4e7cc309ee1f6e8d89dc7","2005-04-27 14:47:19+00:00","Call blitCursor() when changing scaler to give it the opportunity to switch
between blurry and non-blurry cursor scaling, even if the scale factor
remains unchanged.

svn-id: r17841
"
"4ec716103270459a978fe1e6c699db5bfd5ae6cc","2005-04-27 20:29:19+00:00","Patch #1186744 (Common line-drawing function)

svn-id: r17842
"
"f95e696034d038d5fc0e7cc1d4a2e795b2ed02ed","2005-04-27 21:57:13+00:00","Added eos() method.

svn-id: r17843
"
"925c69797dd0f4a76e91ed2903abee02d6e311b7","2005-04-27 21:58:21+00:00","Slightly more elegant LauncherDialog connector.

svn-id: r17844
"
"18bf7c7900b8b9acd6ebf4daa83c611b623ceddb","2005-04-28 00:22:05+00:00","Comment on some MM NES oddity, I hope somebody can explain this :-)

svn-id: r17845
"
"3ee1fe9b579dc3e822d3e1103addc2d6516fe06a","2005-04-28 00:23:08+00:00","Forgot to commit this, oops :-/

svn-id: r17846
"
"5109e82c35c027c5ab695e54666476b04734c786","2005-04-28 00:45:06+00:00","Refactor HE actor post/pre-processing code a bit (some more cleanup for HE90 could probably be done, but I'll leave that to the HE folks for now :-)

svn-id: r17847
"
"ec435855378a610ca7e40d4d8ee31bed2df494a0","2005-04-28 01:04:42+00:00","Added new handleMouseOver to allow further refactoring of the V2 specific verb code; added a TODO comment regarding the blast code

svn-id: r17848
"
"9454b63f94e0e38257ac2d42bb2eb0122d8f9c64","2005-04-28 01:31:30+00:00","Add Macintosh version of putttime.

svn-id: r17849
"
"98ed7a10d093286eca3b23226bcb45d6885630e9","2005-04-28 01:44:26+00:00","Out dated and pointless now.

svn-id: r17850
"
"589b65945ac2b257a88c15808f5c35fe4a74aff6","2005-04-28 10:34:48+00:00","This should fix a crash which could happen when placing several objects too
close to each other on the ground. (Happened to me on the first level after
destroying the voodoo doll, where I'd drop the banana, the soap and the
false nose close to each other on the ground after using them.)

Reasoning behind the change:

From what I understand, map_itemsMap[] contains information for each 'cell'
of the map about which objects are there. Each cell can contain two objects
which are stored in the upper and lower byte of a 16-bit word.

When dropping an object, it is written into map_itemsMap[], but not just to
the indicated cell but also to a few of the surrounding ones. Presumably to
make it easier to pick it up afterwards.

When writing an object to a cell, we check if one of the bytes is already
occupied. If it is, write to the other byte. Otherwise, write to that byte.
(If both bytes are occupied, one will be overwritten.)

The old code assumed that if one byte was free at position (x,y) the same
byte would automatically be the free one in the surrounding cells. This
could cause bad values in the array, since the item was added to an
existing value, rather than replacing it.

This new code makes the check for each cell that is modified. (It also gets
rid of some code duplication.)

svn-id: r17851
"
"3b1f8da4beedf60b41f5226f314bffc221965c20","2005-04-28 17:19:43+00:00","save load preparetion

svn-id: r17852
"
"b515dd1333364a6478c630fe0556a1dd7bc846d9","2005-04-28 20:59:19+00:00","Moved Stream::eos() to ReadStream::eos()

svn-id: r17853
"
"e8865cc596a19c8604f37432dd890138185b18f9","2005-04-28 21:02:43+00:00","Extract code works will any WriteStream, not just MemoryWriteStream

svn-id: r17854
"
"c5127d3c05ec1dccb8ead61d38727e3e98dce6d1","2005-04-28 22:17:23+00:00","Moved bundle based localization code to ScummEngine_v7

svn-id: r17855
"
"d03b09265902a5a8c915fb515e1fef259c9fb618","2005-04-28 22:34:56+00:00","Moved blast text/object code to ScummEngine_v6

svn-id: r17856
"
"08e115a5165ff8c3d982ba858b472588c57beae7","2005-04-29 01:08:58+00:00","pajama3 requires GF_HE_LOCALIZED
Add freddi2 specific filter for (PU1/PU2) prefix in subtitles.

svn-id: r17857
"
"4b4242e97316ff1959279d630533366c71219b2a","2005-04-29 01:10:49+00:00","Remove extra whitespace.

svn-id: r17858
"
"2f262b3c3e4425a7851f02aa3e712c1401505e79","2005-04-29 01:36:30+00:00","Add HE90 version of processActors().
Add HE71 class, for HE71+ specifics.

svn-id: r17859
"
"cbd2e319eae77eb585172fd754c0efd4a06202ec","2005-04-29 01:45:38+00:00","Ooops

svn-id: r17860
"
"f8283f3aa5871f382e6ef1583655cfb83626877c","2005-04-29 06:36:03+00:00","Add comment to NES-specifix gfx hack with virtual screens

svn-id: r17861
"
"9bd7d78199341c0698c0047eff0228f3fdc9f1a1","2005-04-29 10:07:00+00:00","Some limited - and quite possibly wrong - sound effects support. I have
assumed, given their tiny size, that the sound samples are 8-bit mono.

Looping is not implemented yet.

Some sounds are skipped since the engine asks that they be played at a
negative sample rate. (I think there is more to this than just a simple
signed/unsigned issue, because they sound wrong even if I treat the
frequency as unsigned.)

svn-id: r17862
"
"5a2d871a2b480c9237b51e910a5d71d91418dfbb","2005-04-29 15:01:03+00:00","Replaced rand()/srand() with RandomSource. Of course, util_getRandom() is a
pretty unnecessary function - we could call RandomSource directly - but
let's take this one thing at a time.

svn-id: r17863
"
"c885171c517ec1864e1969441fbddf43676cfd03","2005-04-29 15:08:31+00:00","Several HE100 games (moondemo/soccer2004) allow 1024 local scripts.

svn-id: r17864
"
"3911fc6edb6b28cf895719deb260d416130517f0","2005-04-29 15:13:21+00:00","Added comment.

svn-id: r17865
"
"ce909a35b3ba692798e5d74d113d1c5e1890a0c0","2005-04-29 15:33:07+00:00","Some sound resources in soccer2004 are compressed too.
Add Moonbase demo, as testing target only.

svn-id: r17866
"
"c20ee1e634fcf153494fb93d4932669957abe38d","2005-04-30 01:26:57+00:00","Add missing case.

svn-id: r17867
"
"a08f1b8c692dadf7545c48d8b678b0c5a4259402","2005-04-30 04:05:02+00:00","Add a few case stubs for moondemo.

svn-id: r17868
"
"7118921a2ab73d211c37d78ae4d8998755756add","2005-04-30 05:25:06+00:00","Add expanded _wizParams used by HE100 games.
Add u32 version variable.

svn-id: r17869
"
"abef7907df20bc1e60a4992919e5e6de7abd4e55","2005-04-30 05:34:31+00:00","Set sprite id & group number for wizImages.

svn-id: r17870
"
"211da446cc4937a6eb736bdcd1e9cf354bdf44ef","2005-04-30 05:47:09+00:00","Reset additional fields

svn-id: r17871
"
"ac989534a78aba7d75839493c109ada5ce0ab383","2005-04-30 11:32:18+00:00","Support for looping sounds.

svn-id: r17872
"
"13a13ae10a31603488684bcf935f3ddb3cef47dd","2005-04-30 15:04:16+00:00","cleanup

svn-id: r17873
"
"280abe9e91c164548b8f2c6692de232c9e316315","2005-04-30 20:48:59+00:00","Convert windows path separators before opening wiz files.

svn-id: r17874
"
"ed4b43df73f8051a2c35c1278041dfbd89d83527","2005-04-30 22:01:16+00:00","Only allocate the actor sorting array once

svn-id: r17875
"
"051977cd173b1b8efbba90e23d14479cec1bf2f5","2005-04-30 22:24:02+00:00","cleanup closestPtOnLine

svn-id: r17876
"
"2260447e8b7a960a7e92c6c75f0ec66c079581b6","2005-05-01 01:02:34+00:00","Add missing safety checks.

svn-id: r17877
"
"343debba1e3a097fbe47edad1ae4deb3a1a252e0","2005-05-01 01:30:19+00:00","Use correct safety check.

svn-id: r17878
"
"cb6c2b9da5b49a8ef8617766d6e4421d8e8c0150","2005-05-01 03:17:45+00:00","Add extra cases for readdemo.

svn-id: r17879
"
"c76f228f67bfd8833459e8abdcf16d26daf851f3","2005-05-01 06:54:27+00:00","VAR_NUM_SOUND_CHANNELS is 88 in HE80+ games.

svn-id: r17880
"
"2b351f73f46004fd0817a5650dd9de6b5190af3a","2005-05-01 07:16:48+00:00","VAR 78 controls platform in HE80+ games.

svn-id: r17881
"
"d6fb5517ed384a3f35d6d5915f50f661f755a225","2005-05-01 10:15:30+00:00","This should fix the negative frequency bug that caused some sound effects
to not be played, and probably fixes wrong frequency on some that were
played. It's all guesswork, though. I don't know if this is what the
original did.

svn-id: r17882
"
"d64e9d8c5cecda76b06fee720b46521cce864bb9","2005-05-01 11:09:30+00:00","Add extra cases for bb2demo.

svn-id: r17883
"
"e3b906b56967584a6dbb07c138f4dc52d1529b32","2005-05-01 11:29:14+00:00","Correction to copyHEPaletteColor()
Use checkRange(), like original.

svn-id: r17884
"
"ae14f7049e11684381503945690121a60d90e5dc","2005-05-01 12:25:30+00:00","HE80+ games store current charset numberin VAR80.
Fixes crash in bb2demo.

svn-id: r17885
"
"4e1cb7947372106efd4c496fdac5ada562b094a8","2005-05-01 14:22:00+00:00","Add feature flag for HE games with 16bit color.

svn-id: r17886
"
"a93b46c2a895592df96219454cb0c1a725fa4716","2005-05-01 14:24:42+00:00","Missed two.

svn-id: r17887
"
"777618ddf9ca3f5151e0aa6bd57125930e2c75d0","2005-05-01 17:39:38+00:00","Always check for _numDirtyRects overflow in addDirtyRect(). The 'mouseRect'
case didn't. This fixes bug #1193344.

svn-id: r17888
"
"81c84b683ebb9f107186b4f43847bc5a61fb60e8","2005-05-01 17:44:54+00:00","If the sound ends before the cutscene, fall back on same synchronizing
mechanism as in the no sound case. In particular, don't hang while waiting
for the sound to play far enough to go to the next frame.

This should fix bug #1192646.

svn-id: r17889
"
"bbe41f0d3e1ecd8f7aef8dd3d7bad47638984ace","2005-05-01 17:51:15+00:00","This bugfix might warrant a mention.

svn-id: r17890
"
"42ae68ff371c85944d80fc6e789890319d0f5881","2005-05-01 17:55:45+00:00","Whitespace

svn-id: r17891
"
"0ab38726534bec31ed5a67dc5bccb16622612bf0","2005-05-02 02:12:00+00:00","Add missing case for pajama.
Fixes music in MusicRm.

svn-id: r17892
"
"b56824d0cf0e559133f1649291cb1e02fc7fc47b","2005-05-02 05:29:50+00:00","Don't assert that 'domain' is valid. One of the cases where this function
is called is when parsing the command-line, and we can't really expect the
user to always type something sensible.

svn-id: r17893
"
"cd6e22a3b15129a6e474f2752815643a44aff07d","2005-05-02 05:41:01+00:00","Cleanup. Most of is simply moves the credits code out of Logic and into
Screen. I've also added an unused 'splash screen' function that displays
the image that used to be shown by CacheNewCluster() while copying a data
file from CD to hard disk. ScummVM doesn't do that, but it's a nice image
that I wish we could do something useful with, and it's easier to have the
code here for reference than having to dig through old revisions of the
resource manager.

svn-id: r17894
"
"6c34dcc0f2f6e3526e3fe2eee2167a1ff18b94fa","2005-05-02 07:20:44+00:00","Add work around for script bug in the first version of pajama.

svn-id: r17895
"
"c090cc5a5fa34ee7febb0ce824b00fea987a71a3","2005-05-02 07:36:23+00:00","Add temporary hack for wizImages using compression type 2 for now.

svn-id: r17896
"
"7947fa5d8a3dafa500edf206c777528f67edfae2","2005-05-02 09:20:27+00:00","Don't let drawSprite() modify the SpriteInfo struct.

svn-id: r17897
"
"2b71af3de942d46093d5d929085669d9c21dfd21","2005-05-02 18:00:05+00:00","Const correctness

svn-id: r17898
"
"f17c35682a2550d212ae1e5dffa9124966f51696","2005-05-03 02:23:16+00:00","Add a few more HE demos.

svn-id: r17899
"
"5f7b3d8cf2bd69b01258b8facdabc9b9de736555","2005-05-03 08:37:04+00:00","Use File::size() instead of stat() to find the size of a file.

svn-id: r17900
"
"f5f9da940b6071df1e921faa42fa56a501e2ab62","2005-05-03 09:00:06+00:00","More cleanup/restructuring: Moved walk-related code from Logic to Router.
(I may have to think up some better name for that class later.)

svn-id: r17901
"
"6101cfd71b8b79146a7d1de5df5d354faa029c46","2005-05-03 20:34:48+00:00","Skip wiz compression type 2 used by baseball2003

svn-id: r17902
"
"a71d60686c529cc4f0fbc19791bfd7b6420e46d7","2005-05-03 20:36:07+00:00","Moved Oki ADPCM aka VOX decoder from SAGA engine to common sound/ directory.
Implemented IMA ADPCM decoder.

svn-id: r17903
"
"575e94602c2897a168b2dc4052cdb9239596914b","2005-05-03 22:12:23+00:00","o Fixed ADPCM decoder length bug
o Plugged IMA ADPCM into SCUMM engine so latter HE titles now have speech
though it is somewhat noisy don't know why as decoder is based on ADPCM
reference implementation.

svn-id: r17904
"
"77d6a04abc496ff414e665c73367cfa437c527b1","2005-05-04 01:57:03+00:00","Switch link to web page with more detailed information on compression types.

svn-id: r17905
"
"1da2f1b6274e415b8e6c5c57e97449f922eb5113","2005-05-04 06:44:42+00:00","Whitespace

svn-id: r17906
"
"627095f1a64ecb8efbf9af014bbdea9bd8ba15cf","2005-05-04 07:32:12+00:00","The mult_playSound() function makes absolutely no sense at all to me, so
I've changed it to something that doesn't trigger assertions in the
Gobliiins demo intro.

svn-id: r17907
"
"d1234bfdee8ded9ca4cac88c738b9ec0c2d1e074","2005-05-04 11:41:07+00:00","Cleanup.

svn-id: r17908
"
"5b56b5ac016d92822554d4c4c26a79df68cc28cb","2005-05-04 23:24:03+00:00","Split VMSave into InVMSave and OutVMSave.

svn-id: r17909
"
"fc25ef24b013192353ff0660d83c918da161cf5c","2005-05-04 23:34:26+00:00","Cleanup of the cleanup code.  :-)

svn-id: r17910
"
"38c9a40c22c9017b4e43b1c5670ba569da94dee8","2005-05-04 23:38:07+00:00","Dispense with the filename field of InVMSaves.

svn-id: r17911
"
"4120ae9921cfb135777a4fb25e98545a7038e7aa","2005-05-05 03:06:32+00:00","various PS2 system changes

svn-id: r17912
"
"fd326b4ce2adc73960a7d71d5d8f3ef8faacf753","2005-05-05 11:11:49+00:00","Cleanup

svn-id: r17913
"
"f1d59b41945ba190935dcd3082e76f964daba0cb","2005-05-05 11:37:41+00:00","Applied patch #1195190. This may help the game run on 64-bit systems, but I
don't know anyone who can verify that.

svn-id: r17914
"
"54bf9bf1ad941b57c5ffd2dc0f2cf1795598b3b9","2005-05-05 11:53:43+00:00","Turned File::exists into a static method (as it should have been from the start, silly copy&paste mistake

svn-id: r17915
"
"28e40b33a7fbc70d1d882e159eadd29dfbcef0ef","2005-05-05 11:57:52+00:00","Add a comment regarding use of CoreAudio/AudioUnits v1 API

svn-id: r17916
"
"fecc4d5f8481fcd3f303cd06f0cb25c66f50326b","2005-05-05 12:03:16+00:00","Return 0 in Engine_SCUMM_create if the game isn't found (instead of computing the MD5 of non-existant files)

svn-id: r17917
"
"f5900a917c63e8f870ccfd61a9345fc7b3c83181","2005-05-05 12:03:40+00:00","Handle engine creation failure a bit more graceful

svn-id: r17918
"
"4dacf09f72a647a654c047e7340edda01023eb78","2005-05-05 13:16:50+00:00","Move to HE80

svn-id: r17919
"
"30533838db4f518fe64726858760fb5c2b319950","2005-05-05 14:30:37+00:00","HE90+ games set heap size in index.

svn-id: r17920
"
"e42ea7f20c69df1944b6271345860dec0f619245","2005-05-05 14:38:32+00:00","Oops.

svn-id: r17921
"
"c16cceafad7aa370cacf6598b2fac24bf8337794","2005-05-05 15:19:30+00:00","Get XMAP from correct resource.
Avoid regression.

svn-id: r17922
"
"d00117ec4bdc0b8c79854ba8e9fbd50ecb4acda9","2005-05-05 15:59:24+00:00","Fixed some doxygen warnings

svn-id: r17923
"
"0411be88db6a542a8b2360e1310058c7ab62f64b","2005-05-05 18:30:42+00:00","do not invoke a method on a non-existant stream

svn-id: r17924
"
"c8b17da61c84c57516025b5d250885bceee343d6","2005-05-06 03:09:53+00:00","Auto detect music and voice types, where possible.
Use correct set of MIDI tracks for MT32 in Simon the Sorcerer 2.

svn-id: r17925
"
"172b95d3476b1f69a073ec4436fa0868f237fa7b","2005-05-06 04:44:54+00:00","Check if stream exists first.

svn-id: r17926
"
"21fe989da9b54389fae71465fe0ba62382935e5e","2005-05-06 07:45:48+00:00","Fix regression in demos (Failed to find correct file to md5 checksum).

svn-id: r17927
"
"947be5edc2fa2c000ad315c19f1711eea2fb4de0","2005-05-06 08:46:45+00:00","Rename sprite field.
Cleanup

svn-id: r17928
"
"d04492a05a39a427ad5f0892a688e5122465ed3d","2005-05-06 10:07:33+00:00","Allocate all 16bit surfaces with the same bitformat as the HW surface (Fixes bug #1196374)

svn-id: r17929
"
"076e42c302dd463e42d5bbd31eedccf3463f7a61","2005-05-06 11:37:33+00:00","Use ScummVM code formatting for names.

svn-id: r17930
"
"1057d5fa696c5e1503f2d8e55bab939a0dcfa06f","2005-05-06 12:23:19+00:00","Rename sprite field.
Cleanup.

svn-id: r17931
"
"6e06194dd9820a99b3a20189a48de4375a420803","2005-05-06 12:29:37+00:00","Ooops

svn-id: r17932
"
"83d81666962ae879e969ae2879f1a3bdd0dd6307","2005-05-06 13:10:58+00:00","Fix another doyxgen warning

svn-id: r17933
"
"3cbaf48932bab13af946d23078b64a8f84d49559","2005-05-06 13:22:48+00:00","Cleanup

svn-id: r17934
"
"5c426e6908c7c34f944c2ed9576acf05fb03d30f","2005-05-06 15:59:33+00:00","Patch #1196638 'GOB: Simple 'beeper''. Thanks eriktorbjorn.

svn-id: r17935
"
"d08c307870a18d8f422f4321c54a0ac0e8721736","2005-05-06 17:04:33+00:00","Initial game detection support. I've added the MD5 sums for the games and
demos I have, except for the Woodruff game which I don't have on this
particular computer. (I'll add that one later, if no one beats me to it.)

svn-id: r17936
"
"8ce20af13714644cb2f15de481bb8ac0df870868","2005-05-07 01:52:17+00:00","Add eriktorbjorn's patch for:
#1018588 - FT: Xlib async errors in INSANE sequences

svn-id: r17937
"
"8de4c596a090c819e36990085ddc03302b482c0e","2005-05-07 07:57:59+00:00","Add missing opcode details
Fix regression (Fields not initied)

svn-id: r17938
"
"abcd44cd683c91ec52b887cacee2d4fbff7e7e4c","2005-05-07 08:10:23+00:00","Missed one section.

svn-id: r17939
"
"36d57ba378f22f796a932afb220e9ff3b0d3eed7","2005-05-07 09:39:44+00:00","More localized HE games.

svn-id: r17940
"
"873c10c16b2f4dd90b121337fc3f30f50d9dae63","2005-05-07 09:53:06+00:00","HE games need larger buffer

svn-id: r17941
"
"c4d2ac0eb7350721a9dfb223bb4760327fc48539","2005-05-07 11:07:45+00:00","Additions for funshop titles.

svn-id: r17942
"
"a0a764bb4b92bf6f0a177478e57d2f0c56cd0e96","2005-05-07 12:23:08+00:00","Filter out a few more paths.

svn-id: r17943
"
"c6abbb225e1845d5e14c756d46107b4f2ca1e572","2005-05-07 13:40:06+00:00","Added MD5 for The Bizarre Adventures of Woodruff and the Schnibble.

svn-id: r17944
"
"d6866a0314781b8263a505349859620554c3a49f","2005-05-07 14:50:59+00:00","Goblins engine is now enabled by default.

svn-id: r17945
"
"cbbd212f81f26d491eae9627b72bf05e87455a6b","2005-05-07 16:29:11+00:00","Since the gobline engine is enabled by default now, changed 'enable-gob' to 'disable-gob'

svn-id: r17946
"
"ca98d52738a23de4bdaa053e8a1bbaf6598c399c","2005-05-08 01:00:52+00:00","Add dutch Spy Fox 1/2.

svn-id: r17947
"
"d9b81f4ab8472c453607a283555ed415fe4d202e","2005-05-08 02:50:43+00:00","Fix sound regressions.

svn-id: r17948
"
"8e5bf3c0925aeef59a7dafb9fb7e42b4c0482c37","2005-05-08 03:08:11+00:00","Initial support for intensive floating point compuitations used in
Putt-Putt Race. Still incomplete.

svn-id: r17949
"
"0bcd57e87fc6437b789916edc204bf40e07c67a5","2005-05-08 04:54:08+00:00","Cleanup

svn-id: r17950
"
"169c85a19b619e85a02c9009f241a30e8c9e0f8f","2005-05-08 05:23:31+00:00","Auto detect effect file type in Simon the Sorcerer 1.

svn-id: r17951
"
"21717273b4064717275bce4b91ea27de744c381f","2005-05-08 05:56:09+00:00","No need to check for speech file in non-talkie versions.

svn-id: r17952
"
"fb41dd8284c618460e3b633c38dfb7ab7f41139f","2005-05-08 10:16:41+00:00","Add case stub for funshop titles
Add comment

svn-id: r17953
"
"79514d4747eae69ae96ddfb3e5fbb1ff2fe9c787","2005-05-08 10:26:11+00:00","Range checks off by 1.

svn-id: r17954
"
"1f8e813d84cd57e3af45fbc91263f3c1e0da308f","2005-05-08 10:59:32+00:00","One last case for funshop titles.

svn-id: r17955
"
"02df1d063c9bf127a6e5d4fddda0c1823aa5d1bf","2005-05-08 12:10:57+00:00","Add more dutch versions.
Fix duplicate subtitle setting.

svn-id: r17956
"
"33cc1176a0305864139cc7f946f4ac580bf4c656","2005-05-08 12:15:19+00:00","Ooops, out of sync.

svn-id: r17957
"
"bd8831487f9b1acb5f81986832e532f49544e5bd","2005-05-08 12:33:25+00:00","Renamed variables to match our naming conventions; added Sound::isVoiceActive() method; made some more members of class Sound private

svn-id: r17958
"
"5d5b997864bdc9d0daddf5b9b73a803122558130","2005-05-08 12:33:55+00:00","Patch #1193795 (Adding drawLine() to Surface)

svn-id: r17959
"
"d58dec471f3b087e211be6d8d560403590f49149","2005-05-08 12:36:12+00:00","Patch #1193398 (DESTDIR patch for Makefile)

svn-id: r17960
"
"196127aa044f8ec499fc5a88cb27e6ce583d4f96","2005-05-08 13:04:18+00:00","Forgot to remove this.

svn-id: r17961
"
"e39dea37e7cdb4ec5e5828549231a69639e9581e","2005-05-08 13:04:54+00:00","Quitting the game now implies that the game is done fading the screen.

svn-id: r17962
"
"781472641e32d1999660caa54c27b218c5b4298d","2005-05-08 13:05:31+00:00","Made it possible to quit while the game is asking for a CD.

svn-id: r17963
"
"a81b093e65f90ea70c5b07676a1fcc46d3e95a5e","2005-05-08 14:04:06+00:00","fixed sfSceneEq bug
fixed load actors entrance
removed some orphans

svn-id: r17964
"
"01b2f3867093cae9626126ce35bd2731a7072c6a","2005-05-08 14:31:27+00:00","HE games queue speech as sound resource 1.

svn-id: r17965
"
"f52ef27fe82698db15604b7b7d75b30ee6549e07","2005-05-08 14:38:56+00:00","Should be an error now.

svn-id: r17966
"
"e01014e971e57db9c19f9456489bb5db697c2395","2005-05-08 14:55:15+00:00","The default platform should be PC (Windows for HE70+)
Avoids issues with older config files.

svn-id: r17967
"
"9d20c7e21f98b2f8824f86ef7c297781f46a7f49","2005-05-08 16:27:16+00:00","Changed error() to warning() since it appears to be relatively harmless. Is
the 'start' field even used? Anyway, the entrance to the forest can now be
entered.

The animation code will produce an 'Anim::play: Error decoding frame 40!'
warning in addition to the previous one, but I don't see any visible errors
in the scene.

svn-id: r17968
"
"2eb868d2a3a89eb8f6d71ab6580e0a015552ccbc","2005-05-08 17:05:19+00:00","Fix doxygen warning

svn-id: r17969
"
"74f15bea74f140a1c71db12be970f25f21e315a0","2005-05-08 17:13:08+00:00","Fix doxygen warning

svn-id: r17970
"
"0dffba3c436e4645556a77b9486580a79893c756","2005-05-08 17:44:54+00:00","oops

svn-id: r17971
"
"cf936916db8375a504ec8e10ff478cd8827b059d","2005-05-08 21:18:37+00:00","Comply with our coding conventions

svn-id: r17972
"
"315943f19a3d7b9acb64e9fb8b7e1587d81c1ae5","2005-05-08 21:24:33+00:00","Added convenience methods create/free to Graphics::Surface (part of patch #1163026)

svn-id: r17973
"
"013e30eb389c40eb579cc8e3f05b8e8da80925ca","2005-05-08 21:39:05+00:00","Added two new methods to OSystem: grabPalette and grabRawScreen

svn-id: r17974
"
"cca744f69a9eb079a314c8f39af1faa4e7b1e5a6","2005-05-08 21:49:52+00:00","Comply to our coding conventions

svn-id: r17975
"
"1cddaa828cebeb9aa474505eff7a69403818a1c0","2005-05-08 22:10:09+00:00","o Fixed detection of Dutch Freddi1
o Added md5s for Mac Football2002 demo
o Added english FF5 demo

svn-id: r17976
"
"3279513b6490226d39b1f2eee03ddf7b48c4f5be","2005-05-08 22:38:29+00:00","A simple widget which renders any 16 bit graphics surface given to it (part of patch #1163026)

svn-id: r17977
"
"9b8d88a1136ba5c86498cc9367f0d4b942610c68","2005-05-08 22:54:16+00:00","Code to grab & downscale the screen content (used for thumbnail creation, part of patch #1163026)

svn-id: r17978
"
"5702c16c16dcf8c4971e9c4f0232340366dc1916","2005-05-08 23:32:31+00:00","New method InSaveFile::skip()

svn-id: r17979
"
"74aed6382b4bab2b8bfa2c9ae41a08eaac082cae","2005-05-08 23:39:37+00:00","cleanup

svn-id: r17980
"
"20c8944189941dbf0286afc28b361f7bb4e09e74","2005-05-08 23:45:17+00:00","Silly copy & paste error :-)

svn-id: r17981
"
"c33cc2ce85dea20cd0eb749a06276d12ff31956c","2005-05-09 00:09:01+00:00","Last part of patch #1163026 (Thumbnails for ScummEngine)

svn-id: r17982
"
"2f0451245d9065c0a93e081796a7c49615cd21cd","2005-05-09 00:09:49+00:00","Mention thumbnails in NEWS

svn-id: r17983
"
"2801693db51cc012b842d51158570f26048372f8","2005-05-09 00:11:08+00:00","Added LordHoto to credits

svn-id: r17984
"
"c80f61498151647e9373f7d705dcdfd0299160a1","2005-05-09 00:42:11+00:00","Add a few more md5s
Set sfxMode mode for speech in HE games again.

svn-id: r17985
"
"4b60b2f34344dd7f593b2aa33ec0e79e619e7967","2005-05-09 00:48:21+00:00","Typo

svn-id: r17986
"
"81013be66bcb9342ff34af432370e6384cdda9d8","2005-05-09 01:10:00+00:00","Restore settings.

svn-id: r17987
"
"51b92411e2dade3bcc40b619032a058b25ae3120","2005-05-09 02:30:31+00:00","Rest of PuttRace logic code. Still buggy.

svn-id: r17988
"
"69d000d2d04bf55b2c13fc9f7cc5b201385fdb87","2005-05-09 02:38:58+00:00","All SCUMM6 games use VAR_SUBTITLES, not VAR_NOSUBTITLES.
Cleanup.

svn-id: r17989
"
"cc5caba7939c6fa2a280c5998f2b4b04ce220181","2005-05-09 02:59:45+00:00","HE60/61 still VAR_NOSUBTITLES.
Typo.

svn-id: r17990
"
"4c7eb3d8544b46f6d82e04012c63e9d8b961c114","2005-05-09 06:10:17+00:00","Should be case 40.

svn-id: r17991
"
"519c023e4b4300a2483b8512f9f81ea6d9453a2d","2005-05-09 06:36:27+00:00","Fixed failed assertion when entering the Elk King's court. It looks like a
hack - perhaps it *is* a hack - but it's what the original engine did too,
as far as I can tell.

svn-id: r17992
"
"5093be8401f25431177a2f9ecfb0c876209cc88f","2005-05-09 06:59:32+00:00","Added Gobliiins MD5 sums provided by Florian Zeitz.

svn-id: r17993
"
"99b9c27f99d2bd08712cb56732ae7b244dbf9767","2005-05-09 08:47:09+00:00","Why not fix the warning if you encounter it? :-)

svn-id: r17994
"
"3c225d4a1f988365b09d9f5f26e6b044a4541a7f","2005-05-09 10:51:00+00:00","Add a surprise.

svn-id: r17995
"
"9c8041633498ae21de22d574c0476d4a16198812","2005-05-09 10:54:24+00:00","re-order

svn-id: r17996
"
"a0d6b39d9bae26f0076489373acc8934f7819fc7","2005-05-09 11:39:31+00:00","Use debugger for errors.

svn-id: r17997
"
"2f1ff2afec4a760d663508b768267309d746904b","2005-05-09 12:12:14+00:00","Use debugger for errors, where possible.

svn-id: r17998
"
"34f569108cc627d4b2b8e4bc7d6a90ee5bf8aced","2005-05-09 12:22:57+00:00","Fix doxygen comment

svn-id: r17999
"
"9bfc9281a1dfedaa6b7a7c4889c94b49b45f6944","2005-05-09 12:26:07+00:00","Fix doxygen message

svn-id: r18000
"
"a67144f72f417de8a76ad4e8a25f60106fee48aa","2005-05-09 12:27:31+00:00","Either document all params or none, anything inbetween causes Doxygen to complain loudly

svn-id: r18001
"
"e27f1456ff15187d75c8b23e7eed285ea32a1cf9","2005-05-09 13:29:04+00:00","The comment about the DOS version being sold without copy protection info
may not be correct after all, so I've removed it.

svn-id: r18002
"
"0a5e9f24f5e8633c3b83b37874f639c5bb8b34d1","2005-05-09 17:15:54+00:00","update

svn-id: r18003
"
"e774f60ec65f45ea98372b27b2bf677f5b15c479","2005-05-09 17:24:25+00:00","fixed warnings

svn-id: r18004
"
"61abb628f899e5bcaf047fd576fd7dd02978e6d1","2005-05-09 17:59:27+00:00","Forgot to commit this

svn-id: r18005
"
"c804ec2b67b7658bf7df54c0872219d50c015538","2005-05-09 18:00:38+00:00","small trick to avoid doxygen confusion (I hope...)

svn-id: r18006
"
"da06fe93a97193cfa3c077d144422c5bc47b46ff","2005-05-09 18:25:28+00:00","fixed debug areas display ; some minor cleanup

svn-id: r18007
"
"c0ec310a43ba2e321c2e267485bc9a78077bc4a4","2005-05-09 18:26:36+00:00","fixed spritesMarkDirty

svn-id: r18008
"
"302fdd3eee3f350721854c9d8234c83f97cddade","2005-05-09 18:34:55+00:00","oops

svn-id: r18009
"
"1c6788797ee3a5f4790ae1e42fa9321478f62c60","2005-05-09 18:47:39+00:00","sprite_he.cpp

svn-id: r18010
"
"52bbc867979b1453f98191718c3eca726cc9ff8e","2005-05-09 21:21:21+00:00","Patch #1181544 (AmigaOS 4 changes)

svn-id: r18011
"
"39cb499fcf7e1af3354e8ac77dac03d04a48ce79","2005-05-09 22:38:44+00:00","fixed warning

svn-id: r18012
"
"c1ce66efb6fecc30f4f26b7eecaadbd91019dd90","2005-05-09 22:39:16+00:00","fixed compilation for evc4 and vc7

svn-id: r18013
"
"52c3aa533a6f6ee36a574e09c1cdaae49b7f192f","2005-05-09 22:39:50+00:00","update

svn-id: r18014
"
"6e07c772afd06016f5f1e30a11a7d171bbb5c8fb","2005-05-09 23:45:46+00:00","Add more dutch versions.

svn-id: r18015
"
"3890d18e0cba28e4a1c1daf1ddf2a0e5c5a3ddf0","2005-05-10 00:39:59+00:00","Fix compilation

svn-id: r18016
"
"4cf368cbcb3a1944f074b079c8683eb57ddb71f3","2005-05-10 00:45:39+00:00","Fix compilation

svn-id: r18017
"
"df7e6104b6b639d0040034c45508bbe74fdec85d","2005-05-10 00:58:08+00:00","Last bit of AmigaOS4 patch. Apparently this was missed by mistake.

svn-id: r18018
"
"1a9683a8e8b19cead46b556ed924ac487103cb10","2005-05-10 01:01:45+00:00","Fixed PuttRace logic routines. Now they match thanks to ajax16384's great
tool.

svn-id: r18019
"
"25f692037113b7884a79723006080d6c1d26874a","2005-05-10 02:21:59+00:00","Catalogize all collected U32 files.

svn-id: r18020
"
"1c2a88154af7048b0f0169338adf135ad630f485","2005-05-10 02:25:17+00:00","Add Freddi's funshop

svn-id: r18021
"
"169ff06f09d77ffde8b9219ca229279f6d2d57d7","2005-05-10 02:30:19+00:00","Proper #include directive.

svn-id: r18022
"
"239e7ae062e9d54aae9524e56cb9aa09d96c7b3e","2005-05-10 03:03:28+00:00","Add heversions for dutch versions.
Add dutch freddi1

svn-id: r18023
"
"19b093145042207bb36dcd6055d8a2f47da1b9db","2005-05-10 05:34:50+00:00","Rename opcode

svn-id: r18024
"
"f1c3eb24ef34fbf4949bc2b624d1cf3a421e5e38","2005-05-10 05:42:48+00:00","Rename opcodes

svn-id: r18025
"
"4506dddbe3ef4b3ab9cccbef137aafe9e36c53da","2005-05-10 06:13:07+00:00","Restore settings again.

svn-id: r18026
"
"4c6bcd9f5aba879a085104901c0342ead779baf0","2005-05-10 06:42:31+00:00","Add code for drawPixel

svn-id: r18027
"
"bb8ca7e8abf86eae617e3614e46d027235fe050d","2005-05-10 08:42:23+00:00","Check that speech file is open.

svn-id: r18028
"
"1e9a357bf3dc128099a95c2e6b778f522cad37a6","2005-05-10 11:50:01+00:00","drawLine() fixes from Fingolfin.

svn-id: r18029
"
"fc5d0f2a9c96cdf6c356d629b937236d5be8bbcd","2005-05-10 13:56:25+00:00","Small tweak to silence yet another Doxygen complaint

svn-id: r18030
"
"74bc08970213a38fa22c96075dc6e75298eef080","2005-05-10 14:00:59+00:00","Cleaned up code a bit

svn-id: r18031
"
"249deed3b2017d3b82f7447eb74090883f69eab0","2005-05-10 14:01:54+00:00","Fix another mistake in the asm-to-C conversion

svn-id: r18032
"
"22f4b63df824e6452613b9ca75b1dc9e2739a484","2005-05-10 14:07:21+00:00","Another fix, more cleanup

svn-id: r18033
"
"ff20d8c4df491f0550595efe8b1277d6ac7fd1a2","2005-05-10 15:43:40+00:00","Fix HE regressions.

svn-id: r18034
"
"39852157fee003a66d16dfa3168e6a9bf60d29ef","2005-05-10 17:40:58+00:00","Forgot to remove debugging messages.

svn-id: r18035
"
"55c37c18ceed916eb3744666d3d10783b0cf8783","2005-05-10 22:31:48+00:00","Preparations to let LogicHE hold game-specific code. Introduced
GF_HE_985. Feel free to give it more proper name.

svn-id: r18036
"
"b75c969e666b9f262a05e0d1e54d56f7d3e45441","2005-05-10 22:56:25+00:00","Moved class File and the MD5 stuff to namespace Common

svn-id: r18037
"
"72f4c03b0b9a6918a359b967ebc400a2701981d9","2005-05-10 23:17:38+00:00","Moved (In/Out)SaveFile(Manager) and Timer to namespace Common

svn-id: r18038
"
"1a615346abab8f234c3dbd1c55e78b179bca9d87","2005-05-10 23:48:48+00:00","Moved class SoundMixer to Audio::Mixer (didn't call the namespace 'Sound' because we already have many classes with that name)

svn-id: r18039
"
"2de46dc8eb173ca06a107d5353f2209944284115","2005-05-11 00:01:44+00:00","Moved some more stuff to namespace Audio (enough for tonight)

svn-id: r18040
"
"8cf2a8abecad7ff41f1eefadb0a4b6503427ee9f","2005-05-11 00:44:31+00:00","Confirmed filenames

svn-id: r18041
"
"5e0884ae7e2058ea22557881d9938648b674c78a","2005-05-11 01:02:33+00:00","Fix compile.

svn-id: r18042
"
"088346a51c8b0eebc6d5267e4c82ff8d6a6e0d09","2005-05-11 02:38:40+00:00","Corect heversion in some Dutch demos.

svn-id: r18043
"
"9b4e45235187bff44384b046aa0982177b4b58bd","2005-05-11 06:57:44+00:00","Fixed one part of the problem with Rif's encounter with Sist. Rif no longer
disappears, but he still won't respond to commands. And he appears to be
facing in the wrong direction.

svn-id: r18044
"
"e0e27b0a094a6866f09c61a207bdb0e8b3c67c2c","2005-05-11 06:57:58+00:00","Cleanup

svn-id: r18045
"
"d0fabce0ad8facec467adbdeb25503195353122f","2005-05-11 07:31:44+00:00","some ps2 changes...

svn-id: r18046
"
"cb99df182c914bfc63d1a50850f00741685f1b71","2005-05-11 09:38:01+00:00","Extra debugs no longer required.

svn-id: r18047
"
"58562a0b7097e0c644406b69966b10441c16ee55","2005-05-11 10:09:06+00:00","Add additional logic hook in footdemo/funshops.

svn-id: r18048
"
"90b91f12b2db9f86afa40fafc61cc6e112630936","2005-05-11 13:02:40+00:00","Made Gdi::_transparentColor protected

svn-id: r18049
"
"91917913a8e1644b5587e45dba72327c2c7fb5ba","2005-05-11 14:21:07+00:00","Set number of actors by version again.

svn-id: r18050
"
"68ea884d50b1e16b3bccef1aabbd9dd6b97581b4","2005-05-11 14:32:21+00:00","Remove fixmes
Corect _numActors in HE games.

svn-id: r18051
"
"a6b445b531caa236c075c9b448325ae219200ae1","2005-05-11 14:34:19+00:00","Broke HE70 saved games too, due to activity.

svn-id: r18052
"
"2921938301638497c88fcdd437bd6b08528e00d0","2005-05-11 14:39:04+00:00","Corect _numActors in HE games.

svn-id: r18053
"
"0a8286994e901d172e232b3743fdf20a73fee85b","2005-05-11 14:42:59+00:00","Unify check in initBGBuffers and in getZPlanes

svn-id: r18054
"
"6646a6e3ac4f9d75487e6fd62735c9c69a0af06b","2005-05-11 15:55:40+00:00","Added 'FluidSynth' to the features string. We may have to start word-
wrapping it in the 'About' dialog...

svn-id: r18055
"
"868f2b3f71e0b81e397ce6593ac044233877b0d3","2005-05-11 17:20:32+00:00","Mixer is now in namespace Audio. fix compiling.

svn-id: r18056
"
"74aaa76d3827a093b41c56cc2a649d66a9d79f10","2005-05-11 18:03:58+00:00","Some TODO items

svn-id: r18057
"
"9642133cd81f17e0910816527d82b22d870417c6","2005-05-11 18:14:23+00:00","Reduce header dependencies

svn-id: r18058
"
"25404478438b60cf1bb121a79c5e083c26dc8784","2005-05-11 19:26:38+00:00","Merge loop index variables

svn-id: r18059
"
"79241d323fec0299e55bbfb420d0b4cdb4a70965","2005-05-11 19:30:30+00:00","Start work on support for 'big' widgets

svn-id: r18060
"
"cccbb52e1e5d4e972d7d2974d33034507dc772b4","2005-05-11 19:31:23+00:00","Do not autoscale about dialog, rather let it scale itself properly

svn-id: r18061
"
"65ba4df9bcaf105c2c873cfd2721d19d12aaba5f","2005-05-11 19:32:18+00:00","Simple and crude demo of the 'big' buttons -- the infrastructure for this isn't complete, but at least you can see where we are heading...

svn-id: r18062
"
"3f2b92f3f27c32f5846ded7dcd9ad0bfa31fc187","2005-05-11 21:32:58+00:00","Fix crash in puttsfunshop when trying to edit new shape.

svn-id: r18063
"
"9e13005654ccd04ca63c6ae9c18fa077a50cd39d","2005-05-11 21:35:19+00:00","Implement now spotted Logic opcode in funshops. Now need to find a place
where another one gets called.

svn-id: r18064
"
"907dec571a2165debcb68ca48deef4b896f24f1d","2005-05-12 01:21:04+00:00","Support for football/footdemo logic

svn-id: r18065
"
"f45b23b63f01188066cfc2de02b5dce99b165ea9","2005-05-12 06:30:16+00:00","Moved some more animation stuff out of the Logic class and into the
increasingly misnamed Router class. (I'll fix the naming later. Probably.)

svn-id: r18066
"
"3386b6cdd1965e86a4fee4d599d3de0575d4be39","2005-05-12 09:12:15+00:00","fixed boar king crush

svn-id: r18067
"
"d6a20a231b30242645860f453895f11d67a624e5","2005-05-12 09:12:30+00:00","Avoid HE regressions.

svn-id: r18068
"
"d34e5fc605b06c0ad8f5ac7e6ccbc6f8698ddec2","2005-05-12 13:12:15+00:00","Whitespace: '(type *)something' instead of '(type *) something', because
that's how we write it in most other places.

svn-id: r18069
"
"b3ec4726391e80be92e6faff68be5e5de495d29a","2005-05-12 13:58:23+00:00","Removed unused variables to prevent warnings.

svn-id: r18070
"
"91ff7f7a31e18a42438d08aaea515c38bb319755","2005-05-12 15:11:32+00:00","fixed interpreter bug (negative address offset - may crush system)

implemented inventory save-load

svn-id: r18071
"
"8e7c4ffa3778a3b0dba8a677b1750261b6b7bd55","2005-05-12 15:46:03+00:00","Quick fix to make button texts etc. draw at the correct position. (They
were being drawn at unscaled coordinates.) I don't know if this is the
correct fix, but the change is small and easy to revert, if need be.

svn-id: r18072
"
"93e49f22340be46b010ec1f6452df0392dad4de4","2005-05-12 17:00:08+00:00","Compilation fix.

svn-id: r18073
"
"8e91b99df879e19fef39cf7ff6aa2363859b018f","2005-05-12 18:42:59+00:00","Remove debug leftover comments.

svn-id: r18074
"
"5c228fc028e7ef61b0db0ea65ecf429c5b468a94","2005-05-12 21:12:46+00:00","Forgot to credit Ivan for his gob engine. Now fix that.

svn-id: r18075
"
"0f412efc8db49efa10a351339dcefab9b55a238b","2005-05-13 01:55:07+00:00","Cases apply to rtRoomImage in He70+ too.

svn-id: r18076
"
"5e52350ebbb3f10989efc6972ea4121296262baa","2005-05-13 06:32:01+00:00","Changed back _numActors to 30 for Sam & Max to avoid breaking savegame
compatibility.

svn-id: r18077
"
"e23b62cfdf0db260255a41e9a2e40a25358b1ccb","2005-05-13 06:32:27+00:00","Comment typo.

svn-id: r18078
"
"d987a5852962a31816c92487debf00f7bf6b3496","2005-05-13 08:37:12+00:00","Didn't need to break HE70 saved games after all.
activity/freddi (he71) only use 13 actors.

svn-id: r18079
"
"739e0640adc9ed9fd0ab2bfaaefc1d6913994278","2005-05-13 08:45:42+00:00","HE demos sometimes call music tracks that don't exist.

svn-id: r18080
"
"15a4e8a0e247bcb82a2c1c8402967e5c86b0f95f","2005-05-13 10:23:56+00:00","Check if charset is been used, before expiring the resource.

svn-id: r18081
"
"564c30a9addf297063deecb41db1e5bb13dd9e63","2005-05-13 16:56:53+00:00","Added MD5 for (another) Gobliiins 1 CD. See bug report #1201233. Made a few
other game detection-related changes, but they're mostly cosmetical at this
stage.

svn-id: r18082
"
"c4e258ed2176466283b86117ab406a1c0228594b","2005-05-13 19:51:12+00:00","fixed time().

svn-id: r18083
"
"19d238b85eba76c1f400e27966eade183335122f","2005-05-13 21:24:30+00:00","Check MD5 at runtime, so game features could be set at run time.

svn-id: r18084
"
"ca65bf09fb2a980f0b36ef10a935c03b6c365645","2005-05-14 00:32:40+00:00","More football logic opcodes.

svn-id: r18085
"
"86b7034066dd476ce02d7116c208fa48f1c39e09","2005-05-14 01:26:52+00:00","Handle default case.

svn-id: r18086
"
"7a2ab6fcd6cbea007181bdb8e648d829b851d529","2005-05-14 01:28:02+00:00","Implemented last football logic opcode.

svn-id: r18087
"
"469b74c30046fd4f2087157b39be361e706643f6","2005-05-14 01:30:00+00:00","Ooops

svn-id: r18088
"
"e3dc54dd972a99fae3d58aee5852735ec17a2174","2005-05-14 01:39:39+00:00","Yet another LogicHE opcode.

svn-id: r18089
"
"30d4f8634137787033d3a6be96673a96f0863b4f","2005-05-14 01:49:12+00:00","Opcode number correction

svn-id: r18090
"
"93be3e16d8f9e6f8edec316ec749e189b2f33cc8","2005-05-14 14:06:37+00:00","Add configure option to disable HE 70+ games.

svn-id: r18091
"
"e3362f092339e0ac52b59202a4ceaf014b926762","2005-05-14 14:18:40+00:00","Applies to HE70 too.

svn-id: r18092
"
"eda6987525e24a9916b7c30c7c43bc0e19b8ea6f","2005-05-14 15:11:27+00:00","We should document the OSystem keycodes eventually

svn-id: r18093
"
"5286121524b6723ac07fc23212fad0a31ee4706a","2005-05-14 15:33:27+00:00","Removing the last traces of the old custom new/delete operators

svn-id: r18094
"
"db123a9e7aed6c068bdc26a76ec3bcf752227f6a","2005-05-14 15:53:37+00:00","Factor out common stuff in scummsys.h a little bit

svn-id: r18095
"
"9b9e8424c12024015e0b697222ba0266b0ede5f5","2005-05-14 22:21:54+00:00","Added a TODO for file code

svn-id: r18096
"
"ef8c36554ce9f3990ee1e21455b9ad9602261457","2005-05-14 22:47:00+00:00","Made the SCUMM main dialog scale itself

svn-id: r18097
"
"0bb3024467c8eb1f74f716848366b9b8fdf6a8c5","2005-05-14 22:55:39+00:00","Merge loop limits into one)

svn-id: r18098
"
"3588b96d4fc6c1100a01f21987f34dab9c0e97bf","2005-05-14 22:56:41+00:00","Added --disable-hq and --disable-scumm-7-8 options. Also improved
DISABLE_HE so more HE-specific code gets excluded.

svn-id: r18099
"
"80ee8188d3d7fdd43c36a47fa68283ee78f9e8dd","2005-05-14 23:28:22+00:00","Improvements to --disable-* stuff. Now less ugly #ifdefs with #includes.

svn-id: r18100
"
"380f187eeba1f7e00bcf62183db26f72157aa2a9","2005-05-15 01:03:31+00:00","Disabling SCUMM7/8 games should disable HE61 games.
Split akos_processQueue() in HE61+ and SCUMM7+ versions.

svn-id: r18101
"
"75ffec581ff8eaf040bfc6292e034528923352e4","2005-05-15 09:46:34+00:00","Added AuxBlock::reset() method; moved aux related code to ScummEngine_v71he class

svn-id: r18102
"
"e5bbfe8df9e3fb291d840a3cbcdc947185bfd3fa","2005-05-15 10:02:13+00:00","Renamed costume scale tables; merged the old costume renderer's scale table with the small scale AKOS scale table (they were identical)

svn-id: r18103
"
"fb11e793876b25e47fd4f35ed0f30d3febcc84b0","2005-05-15 10:40:28+00:00","Replaced global revBitMask array with a macro

svn-id: r18104
"
"343c5152c05e8475da81e28dd7bae7b926c73127","2005-05-15 13:20:52+00:00","Added String::iterator

svn-id: r18105
"
"af462aceaac51ad82033be2c348a8b9c488950ea","2005-05-15 13:39:27+00:00","Added comment about which version of Woodruff I added an MD5 sum for.

svn-id: r18106
"
"d91c687619fc9a79c9ce0b701fe23851b47648ee","2005-05-15 13:57:58+00:00","Indentation and whitespace.

svn-id: r18107
"
"aedd11b353d125c263477835e678ee3890c451a1","2005-05-15 14:46:13+00:00","add save game chunk

svn-id: r18108
"
"4d5073b15432d30f9bd9434984ee84ae08976efb","2005-05-15 16:13:52+00:00","Added Font::wordWrapText method

svn-id: r18109
"
"1043554591d8208fc1b1cb504086216ae2aa3799","2005-05-15 16:19:43+00:00","Word wrap the 'features' string

svn-id: r18110
"
"2d40452a119fd9a0ed4b482b92c9c8df5978c917","2005-05-15 17:01:32+00:00","Unified rules that determine when a dialog shall use its 'big' mode and when its 'normal' mode; MessageDialog uses Font::wordWrapText now; MessageDialog scales itself now

svn-id: r18111
"
"2425e657a2dc1a22b3e0502b37fd9e584e3abf51","2005-05-15 17:08:44+00:00","Add a switch which allows turning off the automatic GUI scaling easily

svn-id: r18112
"
"1d31cd12233d8a98ea9288147cde946d3884c7c0","2005-05-15 17:45:59+00:00","fixed give verb
fixed occasional verbs redraw

svn-id: r18113
"
"f2646d3e531a72d7867400db9c5ef75adc9ea029","2005-05-15 17:59:27+00:00","Turn off auto scaling for now

svn-id: r18114
"
"841c600fef543703919733939b6374ced0c8a982","2005-05-15 18:02:10+00:00","Draw scrollbar arrows using drawLine, instead of hard coding bitmaps; add a param to the ListWidget constructor to choose a 'big' variant

svn-id: r18115
"
"ac215285d72ae179346d97c354968d259e20b8ab","2005-05-15 18:02:28+00:00","Use a 'big' ListWidget in SaveLoadChooserEx

svn-id: r18116
"
"8c3085eb2b1bcb054fda16561345a9fd9632fc00","2005-05-15 18:22:17+00:00","Center button label vertically, too (possible now that the GUI scaling is off)

svn-id: r18117
"
"06cc657f0d27b3e23c662fd8855877d9e7f17e98","2005-05-15 18:22:44+00:00","Use big font in ListWidget if it is in kBigScrollBarWidth mode

svn-id: r18118
"
"75e6e2d88503419257f413fcffe0cf9c9e320491","2005-05-15 18:23:58+00:00","Now that the GUI scaling code is off, we can use a 'big' font which is not exactly twice as big as the 'normal' font, thus using the available screen space more efficiently

svn-id: r18119
"
"71aff533264cd0326407f74f8ae3f8c0735d49c5","2005-05-15 18:26:14+00:00","Added a list of the dialogs which need to be updated to the TODO

svn-id: r18120
"
"f9ebe123106c3067a80c207898009cf1f3e9c237","2005-05-15 19:27:46+00:00","Restore --disable-he functionality. :(

svn-id: r18121
"
"c9290b68ff62293e23e627ee3c3ac55e6a034e9a","2005-05-16 00:26:23+00:00","Made the launcher dialog scale itself

svn-id: r18122
"
"29354345045fb0bcccc1def76629402ca652a281","2005-05-16 00:38:30+00:00","Enlarge the option dialogs; note that the widgets should be rearranged / enlarged, too; they aren't yet

svn-id: r18123
"
"a0648d054f21cab4c64bb651b141ccd0c22c9559","2005-05-16 00:38:38+00:00","Updated TODO

svn-id: r18124
"
"6bcfb6ed97bef820b1b3d071b9fdd34a2bbe8f7a","2005-05-16 06:33:33+00:00","Fixed the SoundFont button's behaviour in the Edit Game dialog.

svn-id: r18125
"
"6a0ba15b0d2a264cc45b6b534301fea919d86d1d","2005-05-16 09:24:28+00:00","Made the file/directory browser dialog scale itself.

svn-id: r18126
"
"469319aa7009486e3f15475fed115708ffdc9a0d","2005-05-16 10:26:20+00:00","Made the buttons scale themselves too.

svn-id: r18127
"
"8eee14934b7bcba1a6de1a0f5228e9c7adc9ca1b","2005-05-16 12:26:44+00:00","Made InfoDialog scale itself.

svn-id: r18128
"
"9a17302f5792ceb9e4e1a3be10f584ecb1a4ffcb","2005-05-16 13:28:34+00:00","Use the same offset - string width for the item number - for every line in
the list. There's a slight hack here: I've assumed that all digits have the
same width.

svn-id: r18129
"
"c64467af1ab23643b7cfe575463bdeb825b6b846","2005-05-16 13:43:31+00:00","Fixed drawing of the caret. (It was drawn using the GUI font, rather than
the widget's font.)

svn-id: r18130
"
"7fa84d94ad2c723dcce7a5f3baea5a6e2e070578","2005-05-16 14:41:41+00:00","Arrow keys no longer emulate mouse movement.

svn-id: r18131
"
"e4ac8cb870ead3902bfaf652d8656aa88e45e9a2","2005-05-16 19:52:46+00:00","Fix from Quiteust for boxes in MM NES.

svn-id: r18132
"
"99ef35bdd4a0a18b96e2fde71dbf546a4cf40e73","2005-05-17 06:19:11+00:00","Fixed caret regression in editable text fields.

svn-id: r18133
"
"4ecb6d650f54bc0f7f46d32b685f6abe599f3fbd","2005-05-17 06:19:42+00:00","Added 'big' version of the Tab widget, and made use of it.

svn-id: r18134
"
"8feee31884c2258befadc57f21429572c751b978","2005-05-17 06:20:50+00:00","Made the help dialog scale itself. There's one place where it ought to use
word-wrapping, but it looks fairly good even with the current hard-coded
line breaks.

svn-id: r18135
"
"e4f3e2a7bf5ec067fa9fcba7a2fb54785da24ea2","2005-05-17 07:18:44+00:00","Updated GUI issues.

svn-id: r18136
"
"8d782007c19c50240bf3101013ea57e8ca35bc76","2005-05-17 11:46:07+00:00","Added my Woodruff version to the MD5 list

svn-id: r18137
"
"bfbbf485859c18591c20ca6019ff8eb8ef62ad54","2005-05-17 12:17:30+00:00","Added clipping to drawLine(). This fixes a regression that caused the
debug console to crash ScummVM. (I'm not sure, but I think it was trying to
draw the scrollbar arrows outside the screen when the console was sliding
into view.)

svn-id: r18138
"
"42db49b15ad30641d80d57f1e57f74ac2dbd1afd","2005-05-17 21:40:29+00:00","Center about dialog, and make it just wide enough to display the credits, but not wider

svn-id: r18139
"
"653c9fc74db79f0e7bd5578c22654fc1edbb5c18","2005-05-17 22:43:50+00:00","Added missing comma symbol, based on semicolon

svn-id: r18140
"
"5cc3c4b9035c5efbd34ed51c387c3a768b15c363","2005-05-17 23:03:25+00:00","Another funshop opcode. Does anyone knows ehrer to get proper x87 FPU fpatan
implementation?

svn-id: r18141
"
"b985f34049b5c6ae84d1c1a22501df4656a5e9fe","2005-05-17 23:14:13+00:00","Fix word wrapping: do not generate spaces at the start/end of the wrapped lines

svn-id: r18142
"
"7797676b02668f83c7a4e02777f003f066f1ffd8","2005-05-17 23:21:21+00:00","Update with our own PI and atan2().

svn-id: r18143
"
"e0ddf7480afe16ea82f7b925f0708720d4afc61e","2005-05-17 23:27:50+00:00","Remove debug output. Some more PI fixes

svn-id: r18144
"
"e05da91674c27ffebdc34b7d7a1de1f24711aea5","2005-05-17 23:41:35+00:00","Added automatic word wrapping to the about scroller

svn-id: r18145
"
"fc87c5821a643f9146155158b4a3c30e65e41d1b","2005-05-17 23:56:21+00:00","Initial support of C64 MM & Zak

svn-id: r18146
"
"0ef8642bb535dc25bf7732a6f87951c4f9253049","2005-05-18 00:02:29+00:00","Some cleanup (note: for some (negative value) corner cases, round does not 100% match the original code. However, that should probably not matter...)

svn-id: r18147
"
"cba94db699bb834bfa9b05472843c5825dec9d72","2005-05-18 00:46:30+00:00","Add C64 palette.
Fix Zak C64. Now it is playable.

svn-id: r18148
"
"b224ad812ed369f3169fc7b236faa4c9212b003b","2005-05-18 01:17:17+00:00","There is no music engine for C64 versions yet.

svn-id: r18149
"
"50abcb6683d221eea01048b77f185002a3cc154a","2005-05-18 02:23:00+00:00","Add missing palette slot, used in verbs/inventory.

svn-id: r18150
"
"a8106f8c1613b5e0f6ab3f25ad27c65ca4702f2c","2005-05-18 02:32:25+00:00","Add scripts file for C64 verisons, ready for future changes.

svn-id: r18151
"
"ee6733519764a863e7542ad525669264fdd31fe6","2005-05-18 02:37:23+00:00","Update comment

svn-id: r18152
"
"a684a741eccd744e8aed39b3e83bb4966cf9ad0b","2005-05-18 02:56:41+00:00","Limit to C64 maniac.

svn-id: r18153
"
"16a1f8814b954e5327e7d17b811631d7994a9b51","2005-05-18 07:23:21+00:00","Big version of the checkbox widget.

svn-id: r18154
"
"1a68fbe1459b8f19f7aa61110ebd99e514d65494","2005-05-18 07:59:45+00:00","round() is not portable.

svn-id: r18155
"
"24275fbb32cd23294af2a7aafcf4c658520165d4","2005-05-18 08:34:52+00:00","Add missing else.

svn-id: r18156
"
"e72b33e56f6ccc6ffd6f97d0bb114d8229885288","2005-05-18 08:40:46+00:00","Oops, was the wrong MD5, forgot to only compute it for the first MB. Now verified by letting ScummVM compute the checksum (note: ScummVM runs into a deep freeze running the gob1 target for the woordruff game data, very bad)

svn-id: r18157
"
"9e0c72868b819d5a77c9a494556f280149664a29","2005-05-18 08:50:06+00:00","No need to declare a full method if all you need is a tiny local function

svn-id: r18158
"
"f0e43fb2a6b3ffdf3d00b03d3f0118ccb5aa3b4d","2005-05-18 09:21:03+00:00","New function: addCheckbox()

svn-id: r18159
"
"6ef7dbf97c21cc44d59185ce6a1df9978ce09003","2005-05-18 09:41:13+00:00","The SCUMM options dialog mostly scales itself. Mostly.

svn-id: r18160
"
"ef8e42473a5977a81bc7c09247cada35e16ce5ad","2005-05-18 10:12:20+00:00","Made use of addCheckbox(). I had to add an alternative form of the function
because most checkboxes are on tabs. (We'll probably need a similar form of
addButton() as well.)

svn-id: r18161
"
"77a237c86e719cc61c5852ec06e0bffb2885d885","2005-05-18 10:17:00+00:00","Revised scrollbar look again

svn-id: r18162
"
"4c9761592a1b5a2958d778b3a5327ba2309f6bfb","2005-05-18 10:24:02+00:00","Remove the label code from SliderWidget (simplifies it a lot); instead use a StaticTextWidget for the label

svn-id: r18163
"
"81287495e954c17aa864416a26c08e0ab2753c76","2005-05-18 10:30:52+00:00","Remove duplicate _ws member

svn-id: r18164
"
"4aac7819d19251b99493570df72646d90ac19abf","2005-05-18 14:11:53+00:00","Some more scaling work. Parts of the options dialogs scale themselves. Some
of them better than others.

svn-id: r18165
"
"b6da09d4fe2ef34628247df06a37c6b82e2dc356","2005-05-18 15:30:31+00:00","Add some differences in C64 maniac.

svn-id: r18166
"
"6eb84f82fa391622829026804fab5452cba3cf65","2005-05-18 15:42:35+00:00","Another difference in C64 maniac.

svn-id: r18167
"
"b575dba642cdc2ad9e78042c0dc9c7ea169ec735","2005-05-18 15:50:03+00:00","Remove newline from debug.

svn-id: r18168
"
"51f8aa50b15ac99903f5e4ad3c5422d5473bef85","2005-05-18 15:57:16+00:00","Combine Win32 and Mac resource extractors (used for cursors in latter HE) as
only one of them can exist at the same time. Also it saves code and adds
caching to Mac resource extractor.

svn-id: r18169
"
"35dda2b636825c4273a0d13cd1b65ae49fdb65ca","2005-05-18 15:58:39+00:00","Added big slider widget. There is nothing in the widget itself that's
dependent on size, so the two different sizes are handled through a new
addSlider() function.

Figuring out why the big widget won't let you set volume to 0 is left as an
exercise for the reader.

svn-id: r18170
"
"c986a12a810a41afa2f67901a651487fa06d425b","2005-05-18 16:15:56+00:00","Correct input script in C64 maniac.

svn-id: r18171
"
"d927a41638f7636bc1829ccd27a52df945e8ae19","2005-05-18 16:17:25+00:00","Make sure the labels for the volume sliders aren't truncated. (This is my
last scaling change today. Feel free to continue. :-)

svn-id: r18172
"
"f7df4797a88db569ab1e3472125772fecd0c4af8","2005-05-18 16:18:00+00:00","Implement proper quitting. Added quitting to sfScriptGotoScene.

svn-id: r18173
"
"284ef431e1ce4d54bbabc3886259d0a3075a4905","2005-05-18 18:28:10+00:00","fixed loadsave item resource id
partialy fixed protect rat

svn-id: r18174
"
"94ddf3f2882aea92e0f733e4dc19274401230fc9","2005-05-18 19:07:07+00:00","fixed Sist room

svn-id: r18175
"
"d92c3c7c72bc840df9151187a6d7c92c75a37c19","2005-05-18 20:40:50+00:00","MM NES masking fixes from Quietust.

svn-id: r18176
"
"7fb2eda235ffb4bcfc6770a2b5292c3642929349","2005-05-18 23:17:04+00:00","Patch from Quietust for MM NES:
o Fix all actor mask bugs
o Simplify masking considerably
o Moved the decodesNESObject call from object.cpp into gfx.cpp

svn-id: r18177
"
"829c9a1b1a12bcd3ba68e7f83f19e8c3ae3953cf","2005-05-18 23:57:17+00:00","Fix yet another actor masking issue

svn-id: r18178
"
"ec400e60b6460551769397d4a8ea8743cc7c6366","2005-05-19 00:11:24+00:00","This shouldn't have been in here anymore -- we already could make a HTML README from the LaTeX sources

svn-id: r18179
"
"43a5aff7bc1b06fd58c6b7e299429c88b8decd68","2005-05-19 01:54:37+00:00","Correct subtitle colors in C64 maniac.

svn-id: r18180
"
"da9eaffd506aaee626ec2937c97a0f706f0b13cb","2005-05-19 02:18:34+00:00","Only a single line for subtitles in C64 maniac.

svn-id: r18181
"
"7d0d766988f68a8ab176d859f79467af414f5d87","2005-05-19 13:10:57+00:00","More scaling work. It's still more about infrastructure than layout: I want
to give each widget the opportunity to scale itself.

There's a slight regression this time, though: In the small version of the
GUI, some of the buttons (e.g. 'SoundFont') have their text truncated. Not
good.

svn-id: r18182
"
"097e0a74a9cbd96532b853de4b2806ba96f2a693","2005-05-19 14:15:34+00:00","o Implement direct disk reading for C64.
o Added new parameter to ScummEngine constructor which passed substitute
file name index. It eliminates a long-standing hack and simplifies bundles
porocessing considerably
o Thus simplified detection/reading MM NES PRG file.

svn-id: r18183
"
"e8cb767e5bd0c34a68d31cb1debf9c86ab27a372","2005-05-19 14:33:52+00:00","More opcode changes for C64 maniac

svn-id: r18184
"
"81453854ee693aa31bbbd733043c114653265feb","2005-05-19 17:03:31+00:00","Big version of the popup widget. It could use a bit more polish, though...

svn-id: r18185
"
"d5f4a56e1132739297f95e75a98bad6ae9f3ae6d","2005-05-19 22:14:49+00:00","Improve MM NES & C64 games autodetection.
Fixes bug #1190565 'MM NES: autodetect not working'

svn-id: r18186
"
"feca9840b85835f7e70d5fe5ca29aea90393d563","2005-05-20 06:29:34+00:00","Add more opcode differences in C64 maniac.

svn-id: r18187
"
"9d3ee25813b4df1615d9c264abcc16dab6c9503f","2005-05-20 06:39:18+00:00","Ooops

svn-id: r18188
"
"4da6f37eab737e56ba02d519160f7e2345ec64ae","2005-05-20 06:46:05+00:00","Updated GUI issues

svn-id: r18189
"
"6da7fa0dcca04519e15c0cbc699f7ba1b927c9f6","2005-05-20 06:47:57+00:00","Add more opcode differences in C64 maniac.

svn-id: r18190
"
"5eaedacce643c6a2e5a77d39fa61b8b4c67566b6","2005-05-20 11:16:30+00:00","REmove now unneeded assert as MM NES may pass zero ptr to box which
should be ignored.

svn-id: r18191
"
"801db4a5159728619d502ade157f81615ba93375","2005-05-20 15:03:26+00:00","Added big editable text widget, and removed some cruft. I think this means
that all our widgets are able to scale themselves now, but I could be
mistaken.

svn-id: r18192
"
"0a2e243e811379c4a5d38d6b111f5673e3bcdffc","2005-05-20 15:07:06+00:00","Updated GUI issues.

svn-id: r18193
"
"4d9edbedc6a0f6ca4e5788c6bd3e793458a96869","2005-05-20 15:59:29+00:00","Made the chooser dialog scale itself, albeit in a slightly hackish way.

svn-id: r18194
"
"201be9543a16af5fb3f4a6e87d0d1736a727e747","2005-05-20 16:00:27+00:00","Updated GUI issues. Again. But that's enough for today.

svn-id: r18195
"
"d00c990808fa3fcec1df926771a70ed9bdf8dfca","2005-05-20 22:49:09+00:00","Fix charsets in MM NES after gameload.

svn-id: r18196
"
"50db5af186ce07e5ae9433d241638e2dea930542","2005-05-21 00:27:41+00:00","Fix samnmax-alt target. Actually now it is obsolete.
Game with samnimax.sm0 always detected as 'samnmax' because there is no
MD5 difference and thus made detected target unrunnable.

Now both for .000 and .sm0 target 'samnmax' is properly detected and used.

svn-id: r18197
"
"f9e4a2d2a24fbfc8b9889ebc51cf40b61fada4cc","2005-05-21 03:30:23+00:00","Stubs for C64 MM costume code. Content will follow. Fixes crash in intro
script

svn-id: r18198
"
"c4d567561d2614942384ba24a06897a5f7ffa35b","2005-05-21 04:06:47+00:00","Only needed for C64 maniac.

svn-id: r18199
"
"2138a4c39eb6c1ee7ade84b1dedc381eff090f7e","2005-05-21 04:49:08+00:00","Missed a few changes.

svn-id: r18200
"
"b86e19b971fc9aa6665f090721033cc8fcb35c91","2005-05-21 09:05:58+00:00","Initial support for TMSK masking in HE72+ games.

svn-id: r18201
"
"4604bedb980bfedbcf3813990131e34f42671e01","2005-05-21 10:53:32+00:00","Trigger error if bundle file is missing.

svn-id: r18202
"
"3e0ec05ae6320ddaa7f5e57e088a29ae12a58e45","2005-05-21 11:13:46+00:00","Switch to errors, music/sound file is required in many games.

svn-id: r18203
"
"89c1463d2b0b97d1c06ec9e0850ae2f72fc24604","2005-05-21 11:57:14+00:00","Fix regression with GF_MULTIPLE_VERSIONS

svn-id: r18204
"
"7beb36ec72c8604e6d7269171b3bb02d33ec2bca","2005-05-21 13:21:56+00:00","fixed MS VC warn

svn-id: r18205
"
"31974eaead154ae6637b5655d5a5eb573ce342e2","2005-05-21 14:14:03+00:00","Beautify decompressTMSK().

svn-id: r18206
"
"2b2c6a404f840096d977e20c1b48d307770c783e","2005-05-21 14:20:28+00:00","Add HE73 version for opcode difference.

svn-id: r18207
"
"3833202950f01cffde9f072452b671d44ae4be9e","2005-05-21 14:28:21+00:00","Adjust for HE73.

svn-id: r18208
"
"59ea8df4e466a71645da1a34e5199f9f293c194b","2005-05-21 14:30:14+00:00","Font TODO

svn-id: r18209
"
"30408308bc1ec8abd194c8913d3ad07dcba8559f","2005-05-21 15:04:50+00:00","Correct tmsk offset.

svn-id: r18210
"
"0b1094ef045be590b66c5e1e530fc29ab1969785","2005-05-21 15:45:09+00:00","Add patch from cyx for:
1094340 - COMI: Frightening the gravedigger, he goes white.
905833 - COMI: Palette in Theater controls

svn-id: r18211
"
"cf9049811e4be373d5100350cebb86db70f3eb8b","2005-05-22 01:20:47+00:00","Implement sfSimulSpeech2 which is used in lodge when talking to Sakka.
Fixed sfSimulSpeech(), so it plays voices with CD version.

svn-id: r18212
"
"9135c8ddfe8a13791e8ace981cf098e7c45f600c","2005-05-22 02:07:32+00:00","Add Norwegian Bokml version of Freddi Fish 1.
Set HE70+ games to Windows platform by default.

svn-id: r18213
"
"8314fc2d22795c6169d73eb811829020301fb1e5","2005-05-22 09:14:54+00:00","Correct array sizes.
Fixes loading game in mustard.

svn-id: r18214
"
"76f8021a2895cc4ae9edb9edbc3678ebaff25e7e","2005-05-22 10:04:10+00:00","Sync HE100.
Minor cleanup.

svn-id: r18215
"
"7dc115be6f9182c7f82396cab576647bf9d63f5c","2005-05-22 10:38:57+00:00","HE70+ games use flags in drawBox().
Fixes glitches in farmdemo (Old version), freddi2, lost/smaller.

svn-id: r18216
"
"3b01bef51bdd1b763b67e3b2620726c6855a34a3","2005-05-22 11:59:22+00:00","fixes some todo (hardcoded resource ids -> customized per game)
preparation for option dialog (wip)

svn-id: r18217
"
"b804538dbe936ee38ac7b8bdb4d8b9c98001e17a","2005-05-22 12:21:16+00:00","stub drawButtonBox

svn-id: r18218
"
"c3d391582381c8adfb12bd4d41d1fc768f9175d9","2005-05-22 12:45:06+00:00","Minor correction.

svn-id: r18219
"
"e787c3d9a620572e59304b98ae2be5a9b7323309","2005-05-22 13:49:45+00:00","Implement Interface::drawButtonBox()

svn-id: r18220
"
"93d90fd0577acc94f79c354ae1da8322b4caa326","2005-05-22 15:52:39+00:00","'len' is not initialized at this point, but if the purpose is to reset tmp3
to its original value, this should do just as well. But I don't know where
it's used, so I can't really test this.

svn-id: r18221
"
"fbcbc04cb01ccad9b1450b8d4fda3544be30d224","2005-05-22 16:14:58+00:00","correction

svn-id: r18222
"
"f7e418d6384236c66ecb88190f815e0380d71382","2005-05-23 00:39:55+00:00","Add heverison check, as requested by cyx.

svn-id: r18223
"
"b9e8e4080559f0ce9b249d3fb4c39db1431692f0","2005-05-23 02:00:49+00:00","Turn Wiz struct into class as requested.

svn-id: r18224
"
"0ccb1b726b80de340408946412a757d7b90253d8","2005-05-23 02:23:34+00:00","Plug in Puzzle. Now it consists mainly of stubs but neverthless lets skip
the Puzzle and continue game pretending like you completed the Puzzle.

svn-id: r18225
"
"a103d1f2ec9ce471928eabccebdaf90d8e740589","2005-05-23 03:33:08+00:00","Move wizImage functions to Wiz class.

svn-id: r18226
"
"0951b90f7bc11e6039525091e5fd6a385283ffb3","2005-05-23 03:41:27+00:00","Lock altered or file loaded wizImages, to make sure they aren't expired while in use.
Fixes glitches in mustard.

svn-id: r18227
"
"84f0ccf241dbec923326220c98b9f37896487055","2005-05-23 03:44:10+00:00","Don't expire roomImage of current room.

svn-id: r18228
"
"37d4e9499dd66963f3770c423dd50e655023beea","2005-05-23 07:05:42+00:00","Save the 'Sam & Max' iMUSE triggers, otherwise we won't always be able to
restore the music state correctly. The one example I know of is when saving
between using the hair and the powder on Frog Rock, but there are probably
others as well.

svn-id: r18229
"
"28e156df838341c2bb03e41f9ba22c51988358e9","2005-05-23 09:30:43+00:00","Add Sprite class and move over related functions.

svn-id: r18230
"
"84b9f4b2e097525bbeebbc704d5196f2a119ea94","2005-05-23 11:50:36+00:00","Rename sprite functions.

svn-id: r18231
"
"82b86d495e08608ef902a60f960ca3250bacc205","2005-05-23 18:53:36+00:00","saveload WIP

svn-id: r18232
"
"558308aa9979f50bd5b0d15cec440960e39996f6","2005-05-23 20:53:54+00:00","Include gob3 md5 from bugreport #1206539 'GOB: Goblins 3 MD5 Report'. Although
it will be useless at least for some months :)

svn-id: r18233
"
"90b48f889f1445c8ab85a9a1ac1b04aa37b9d00b","2005-05-23 22:09:24+00:00","Remove unused static variable

svn-id: r18234
"
"1c24c28eb5932410b8597ecbc77ebf41cadbff3e","2005-05-23 22:20:35+00:00","Restored alphabetical order (and documented it in a comment); retired Jamieson and Ruediger (have been inactive for 1 resp. 1.5 years)

svn-id: r18235
"
"97ff33647dac318aafd657f144b02b8da2ed0057","2005-05-23 22:48:36+00:00","Fix for bugs #775097 and #1093867 (Actor draw order problems). Thanks to cyx for finding this

svn-id: r18236
"
"5b29a41120512adae1e4913ce47df9aaf9440f97","2005-05-23 23:59:20+00:00","Must use ScummEngine::openFile(), else you get into troubles with the mac versions of some games

svn-id: r18237
"
"6e18857c00d000aa81d70c6cd3418df580d8d0a5","2005-05-24 00:15:19+00:00","Use the generic mapping system for Mac versions of V6/V7 games, too (note: i sorted the mapping table with a tool, as a result some entries swapped their position); added mapping for the german FT MAC version

svn-id: r18238
"
"94f25b247abe35234f56ac1464d706e5ff36d9ab","2005-05-24 00:15:57+00:00","New MD5s for Mac versions

svn-id: r18239
"
"85ceaba67574642b48d308038a6af3fd3c53d108","2005-05-24 00:29:29+00:00","Fix for bug #705221 (FT: German &szlig; is too high); based on the CVS logs for this (the order was changed back and forth a couple times) this change could cause regressions; if so, we need to address them properly, not by fiddling with this code around

svn-id: r18240
"
"067bfe518b6e09d2c2edd4e1b42c705c45c98d68","2005-05-24 14:36:06+00:00","Bug #862245 'MANIAC: Walk infinite loop in bathroom (hack-in-cvs)' has been
automagically fixed long time ago does not require hack anymore.

svn-id: r18241
"
"53947124c768a951062153171367f2c9de371495","2005-05-24 17:18:37+00:00","with the recent _darkenPalette change, this is now unneeded for COMI demo

svn-id: r18242
"
"6ac61b55bb6de2d17c92472a5f781226c1b646c3","2005-05-24 17:22:09+00:00","removed leftover

svn-id: r18243
"
"0d2231206c8bbde315ecdafbd35f9c997a1375a1","2005-05-25 01:35:32+00:00","Add cyx's patch for:
651077 - SAM: Bad Colors in first Room

Applied changes to SCUMM5 games too, which used the same code.

svn-id: r18244
"
"936b3025573c3de041c7365c4f85a515018f3634","2005-05-25 09:11:38+00:00","Remove left overs and update comment.

svn-id: r18245
"
"ef9d595a907fb1b33a9ca7cdf3e1ba26a5991a1b","2005-05-25 09:17:35+00:00","abs -> ABS (code unification)

svn-id: r18246
"
"7afc24881dfbb6bad7c367a19996abe246640da0","2005-05-25 09:25:27+00:00","Whitespace

svn-id: r18247
"
"83a3507507a71fd1d030d756c5883eb8cd0bcdcc","2005-05-25 09:32:19+00:00","Changed misleading 'isGM' name to 'isMIDI'; cleanup in the isMIDI/isMT32 methods

svn-id: r18248
"
"71b484fead865f31e1f51c5fcec395bc3217c9ec","2005-05-25 12:56:23+00:00","No other shadowMode settings are used by Sam & Max scripts.

svn-id: r18249
"
"fc1b116f1242d1171ae97255eed1f83f931ec256","2005-05-25 12:58:40+00:00","Update comment

svn-id: r18250
"
"e3db264d890687d5b549865a636730523a9e968b","2005-05-25 19:40:30+00:00","cleanup

svn-id: r18251
"
"6c66d67b9b959a0098a8e1d19f01a22876347aa1","2005-05-25 19:40:53+00:00","If we switch to SVN, move iMuse stuff to its own dir, too

svn-id: r18252
"
"12fcf37fee2f03489632dde92eb70f7124689e81","2005-05-26 01:46:26+00:00","Not used by DOTT scripts.

svn-id: r18253
"
"f3f58ec9ebbb91f2e1ccf5a21d7190972cd0cead","2005-05-26 06:38:52+00:00","Fixed a glitch that could cause the music to stop when Sam & Max were
thrown out of Bumpusville.

svn-id: r18254
"
"ca40942959b494edf8ff4754f7f64215d8cf70f4","2005-05-26 09:45:15+00:00","Puzzle WIP. No visuals yet.

svn-id: r18255
"
"de52d556d434424f093fb954da8d1fa27025d17e","2005-05-26 10:07:37+00:00","Fix bad endian bug in thumbnails code

svn-id: r18256
"
"f9addb38e110d9b71fac1a19d897e653878978c2","2005-05-26 10:44:42+00:00","Fix warning

svn-id: r18257
"
"d733a4ec46f18b3cd10d881dc650f3c21f127f44","2005-05-26 11:13:42+00:00","Cleanup. (Mostly whitespace.)

svn-id: r18258
"
"c060d56cc8ef52b5ae7df43c215813d724940398","2005-05-26 11:30:56+00:00","Properly use operator '%' to compute a queue wrap around, instead of relying on the queue size to be a power of 2 and then abusing the '&' operator

svn-id: r18259
"
"983d6d71b82e6e516e7103b2d6c3f462c2c8844a","2005-05-26 12:26:03+00:00","Added CharsetRenderer::getCharHeight()

svn-id: r18260
"
"4b82800cc51b2bc3285bfc1eab3c4e16618105c6","2005-05-26 12:56:29+00:00","Be less agressive about re-using trigger slots. This fixes bug #888161,
hopefully without causing any regressions.

svn-id: r18261
"
"852fe1b1c7d601df534ac059713375817f7b86a3","2005-05-26 14:14:32+00:00","Changed name of addMessageToStack to convertMessageToString (still not really happy with that name but at least it is a little bit more descriptive than the old)

svn-id: r18262
"
"db969fd9762bb11878b579eafc53790359ce95da","2005-05-26 14:16:43+00:00","oops

svn-id: r18263
"
"ebfc6d209bbd7b0bac78c5c484f3c8484d79673f","2005-05-26 14:59:36+00:00","Add HE100 difference in flags and tmp code for extra flags.

svn-id: r18264
"
"228121ae2d129665f84d6d78c39a39f80228373d","2005-05-26 16:30:19+00:00","Add 'MIDI' chunk to list of known iMuse music chunks

svn-id: r18265
"
"97f03369ec4086bf33da3a436c5c8e8aa3253a90","2005-05-26 16:38:02+00:00","Take the font height from the charset header for V3 fonts, too; determine the number of chars for V4/V5 fonts, too

svn-id: r18266
"
"6e42068c8bda323f41f48d77d76582579da2c5ac","2005-05-26 16:39:40+00:00","In V7/V8 games, use the blast text system to render verbs (this fixes bug #1208956, but certainly will cause new regressions ;-)

svn-id: r18267
"
"b59ef3cd71189027d4f2af3d4c5709a48fb025fb","2005-05-26 20:51:01+00:00","Fix bug #1209059 'GOB: Gobliiins English Floppy version crash'

svn-id: r18268
"
"82c1cdb5867f98e54bd61fa5e7d5da14424424d0","2005-05-26 22:14:46+00:00","Add Russian PuttTime

svn-id: r18269
"
"894f630cd0760a8f9aa8fe831d5dae47059ab00d","2005-05-27 07:01:04+00:00","Added workaround for Sam & Max music issue at the Dino Bungie Memorial. As
far as I can telL, the issue was caused by sloppy scripting, though it is
of course perfectly possible that it worked with the original interpreter
anyway.

svn-id: r18270
"
"913da5f4ddf09d2e425a1d1b6c1520ea81c6e7b9","2005-05-27 08:24:42+00:00","Remove old comment, verb charset is now used.

svn-id: r18271
"
"bdee380fd94b92014b8afbff5945e027d51deb53","2005-05-27 10:25:15+00:00","Very minor cleanup.

svn-id: r18272
"
"eeab93cf0904734ccaffb0d79ce8f657b9846b4a","2005-05-27 12:43:19+00:00","More whitespace changes.

svn-id: r18273
"
"d51198e2b4489ac19cde5f673dee396dcf3034a0","2005-05-27 13:14:39+00:00","Made ValueDisplayDialog scale itself.

svn-id: r18274
"
"4ee90d93cc490c82462660c110e49153bc32b6d0","2005-05-27 13:33:14+00:00","Clarified the status of the GUI scaling a bit. I'm not aware of any
remaining dialog that is completely unscaled, but some of them are a bit
hackish and there are issues with the small version of the GUI.

svn-id: r18275
"
"51a46f9c91b1987e9788e24a55cbfb4bc36b70d3","2005-05-28 01:41:44+00:00","Correct HE version.

svn-id: r18276
"
"b65974b7b40d2a93a8e33d0979fa235381a05c7d","2005-05-28 02:26:14+00:00","Revert my removal of _skipPalette, still required.

svn-id: r18277
"
"151f09ed539ea5ba70712041345d75597d33a7ec","2005-05-28 08:37:44+00:00","Sync opcode names and add HE72+ version of o_systemOps.

svn-id: r18278
"
"aad0ae663eb52467c3242ccc7b3a6764755942da","2005-05-28 08:46:20+00:00","Add last changes to HE100 too.

svn-id: r18279
"
"43ca852fdfba0fe10e248b6879525f4529c9e33a","2005-05-28 08:57:56+00:00","Correct case order.

svn-id: r18280
"
"9543d99fc403af22d2c6ec73d6ce1dfb29dbe0c6","2005-05-28 10:44:27+00:00","Fix load/save game regression in HE90+ games.

svn-id: r18281
"
"3d1c9693777cc5d75016b2442d7f13297cbba9a5","2005-05-28 11:06:55+00:00","game options WIP2

svn-id: r18282
"
"cd72ae9e6538586d312482d52cfd2517564236a9","2005-05-28 12:28:23+00:00","commit adds setWidth & setHeight to extend bounds of rect

svn-id: r18283
"
"e27f13d164b043131b15ddbb939a8735ff45e11e","2005-05-28 12:29:31+00:00","Swapped the last two parameters to Sam & Max iMUSE command 257. This fixes
bug #1202071 and probably (it's much less obvious) bug #888248 as well.

Since these parameters are both zero in all other known uses of this
particular iMUSE command, it doesn't affect anything else.

I don't know if it's correct, or if it sounds like in the original, but it
sounds good to me.

svn-id: r18284
"
"4a9a0cef3baec24df9639c2d48ab7362f66f568b","2005-05-28 12:53:11+00:00","fix warning

svn-id: r18285
"
"764ed13352746862a6c010b3a42e4175199a34b7","2005-05-28 13:02:59+00:00","All known music glitches in Sam & Max should be fixed - or at least worked
around - now. There are still some - minor, probably - missing features,
but I still think it's news-worthy.

svn-id: r18286
"
"b902e47f39673bf694c66e32483eeacc3605f0c9","2005-05-28 13:10:08+00:00","Possible fix for #1210373 FT: 'wrong INSANE parameters for EN_VULTF2'

svn-id: r18287
"
"4fc5ccb8a68bd55af1bdabaabe8d16a7f19c8e89","2005-05-29 11:54:51+00:00","Clear localVars in entry/exit scripts.

svn-id: r18288
"
"f03b73a6a9d4b91ae9d41dac60c752cbaf51e9c5","2005-05-29 12:00:00+00:00","Set zorder to zero by default.

svn-id: r18289
"
"dbba8d7318fea5acf030f3b49b8f2f07c5ab9afe","2005-05-29 12:14:31+00:00","Set zorder to zero by default.

svn-id: r18290
"
"93731f3c4bc5791e94d9aab041b1deb1045c9a3c","2005-05-29 13:08:25+00:00","resourceMapper isn't used in HE72+ games.

svn-id: r18291
"
"d4456afa444cc4aed072f15589586e11085590bd","2005-05-29 14:55:12+00:00","Correct off by one, fixes minor glitches in lost/smaller.

svn-id: r18292
"
"99b9fc7070c6967e30cedc7df4218d3fab42862b","2005-05-29 15:39:35+00:00","implemented DOS version 1 pixel clipping
game options WIP3

svn-id: r18293
"
"e9c71f3a98e9ad504d7bb33355f1e6956f5ab0a0","2005-05-29 17:31:27+00:00","Fix for bug #1210831 (MANIAC: Inventory not redrawn after loading a savegame)

svn-id: r18294
"
"9ffe00b78d3d598b17b2614d0ef6295c5caf1c74","2005-05-29 18:07:46+00:00","Added braces for clarity.

svn-id: r18295
"
"4fbb6c29cb8e39077e09a3b334dec51f447e15a4","2005-05-29 18:14:59+00:00","Whitespace

svn-id: r18296
"
"5cd6d6b6f82a742b2b1e47fa4025b0c1b2eb29e8","2005-05-29 20:57:45+00:00","Implement key auto-repeat used in savegame dialog.

svn-id: r18297
"
"b2250cca647271a45d20c6191fefb0f0da4c0ad1","2005-05-29 21:00:45+00:00","Fix puzzle callback timings. Was mistakingly used millisecs instead of microsecs

svn-id: r18298
"
"4821b9908f6c720c39d130649f2520b86c4a765d","2005-05-30 08:03:23+00:00","Only sound types 0 - 2 are used by FM Towns games.

svn-id: r18299
"
"e5ab68c0db698e20c933f201507a7951bc07da10","2005-05-30 16:40:50+00:00","fix start clipping issue

svn-id: r18300
"
"0eb4e9411679a927c9fe255b0b1a105920d1a5d8","2005-05-31 01:03:13+00:00","Almost complete implementation of Puzzle. Now it is possible to solve it
successfully.

Things to do:
o non-actors speech, it just doesn't get displayed, though generated
o support for CD voices

svn-id: r18301
"
"55f98f9b041c4ef2e59215e9cbc2f5190f163cbe","2005-05-31 12:53:55+00:00","Added keyboard auto-repeat. (I've been meaning to do that for a long time.)

svn-id: r18302
"
"d1ffc9df2d3a907e2de871a9b9b4c81d4af3e55c","2005-05-31 20:08:46+00:00","multiple files save-load implementation

svn-id: r18303
"
"6d0082d29da1a3adb05743d70f11904a282e0938","2005-05-31 22:09:35+00:00","Some stubs for C64 MM costume code

svn-id: r18304
"
"f8f9ed18a8e7e073e9481fb9f016a722cecfebf4","2005-05-31 23:41:27+00:00","Allow entry of space and some letters such as 'r' and 'p' as parts of
save names.

svn-id: r18305
"
"5f445e111f061fc865c27b5455d7d7a6fd4bb0d5","2005-05-31 23:57:59+00:00","Fix for bug #1032768 'FM-TOWNS MI1: Kanji version not recognized'

svn-id: r18306
"
"6fd297f08dd22a2dc9fceceee09140d7c86c6aed","2005-06-01 00:39:22+00:00","Fix bug #1166917 'FM-TOWNS LOOM: Kanji version crash'

svn-id: r18307
"
"5e57925f56f3eacb5b0208f4c38e9395131cf48e","2005-06-01 01:00:22+00:00","Fix reported DISABLE_SCUMM_7_8 omission. Thanks to sumthinwicked.

svn-id: r18308
"
"9be6764c477b6f38b329fbf8d2d374513a6ebf0a","2005-06-01 06:24:24+00:00","Removed unused variables.

svn-id: r18309
"
"bf89c8a4b9eb485e9248d5da3aac1d16c1310d7f","2005-06-02 12:29:01+00:00","The GUI has reached the point where I think it's safe to begin removing the
old auto-scaling hack. Removed wantsScaling(), USE_AUTO_SCALING,
_scaleFactor and _scaleEnable.

Also removed drawBitmap() since we no longer use bitmaps for widget
decorations.

svn-id: r18310
"
"0e26360fe31dc467955292b097889cf7f1b7eb7a","2005-06-02 14:40:13+00:00","HE games require min/max heap sizes to be set, after index is read.
Init _hePalettes, to fix valgrind warnings.

svn-id: r18311
"
"ae36a54c922aa6e953e0356720b9194901f88cbc","2005-06-02 16:18:44+00:00","fix - 'holes' in save slot filenames

svn-id: r18312
"
"8a835899fb38ae5c79610d972ad858c90902a802","2005-06-02 22:14:57+00:00","Implement game load with '-x' comman-line parameter.
Fix couple valgrind and compiler warnings.

svn-id: r18313
"
"bf928a55209e385016cb9f46142ec399a7491945","2005-06-02 22:34:55+00:00","oops

svn-id: r18314
"
"9e33b3760021002d75b2981381cc70c2d008eaca","2005-06-03 07:26:37+00:00","New MD5: Dig/Mac/French

svn-id: r18315
"
"14956529f6fd9a734297c89bb913a11b43bf3932","2005-06-03 09:32:58+00:00","Cleanup.

svn-id: r18316
"
"b3197a803bfb72d57250a51304070cc2c239195c","2005-06-03 11:11:49+00:00","Correct no scaling option.

svn-id: r18317
"
"36e8989a6e452324e2f57cddee3ea0e6db0264c3","2005-06-03 11:15:03+00:00","Cleanup

svn-id: r18318
"
"7dfa96a8b882a216a8a4ee8715871f18a5622921","2005-06-03 11:33:15+00:00","Cleanup.

svn-id: r18319
"
"64083773377630442fd1d43d3882fde0c3d066e4","2005-06-03 12:00:38+00:00","Cleanup.

svn-id: r18320
"
"3772bb9873d327e93865a764ebef28c07cdaf655","2005-06-03 12:07:53+00:00","Cleanup.

svn-id: r18321
"
"6ee65dafb937a4259d80389a679bbb67b9704be6","2005-06-03 12:18:30+00:00","Cleanup. (I think you can see the pattern here. :-)

svn-id: r18322
"
"ec958e975eb9eaac22843f8fd96df0b9a0fff6e4","2005-06-03 12:21:52+00:00","Cleanup.

svn-id: r18323
"
"41f69db19f717239ca14a3cd4ef793a7829ca93e","2005-06-03 12:33:03+00:00","Cleanup.

svn-id: r18324
"
"60007ffbea81bb63be95999cc79a55e02ecb0cc6","2005-06-03 12:51:37+00:00","Cleanup.

svn-id: r18325
"
"63984c3a232cf9cf686964dff742edd404c976bf","2005-06-03 13:09:24+00:00","The alternative form of drawString() is no longer needed.

svn-id: r18326
"
"b58348494e1e8203159ff8a82d22be25423cfb3c","2005-06-03 19:04:21+00:00","fixed doorkeeper's nonstop speech

svn-id: r18327
"
"c635d5f2f9a56b3ba877eb36b65e5041ef1fa78e","2005-06-04 02:26:51+00:00","correction, fixes lost/smaller palette glitches

svn-id: r18328
"
"0148bbaac5aea11b67793cf3f5d7bfb6369d6f83","2005-06-04 06:18:28+00:00","Speech needs to be started, before subtitles are drawn. Otherwise subtitle can't be disabled.

svn-id: r18329
"
"52a61dda396b867fa4f6983ced25960a1bf22e9d","2005-06-04 06:30:35+00:00","The sound queue needs to be processed, before sfx queue in HE games, since speech is queued.

svn-id: r18330
"
"fdb2e5b40ad1d1ac2fb44ac0d52553c50f212b1d","2005-06-04 07:30:49+00:00","Fix another off by one in rects.
Fixes minor glitches in water

svn-id: r18331
"
"46a46184acffd0c5d10109fcba6ce3767d0fe243","2005-06-04 12:04:07+00:00","Mention GUI changes in NEWS; Try to be consisten about using a '.' at the end of NEWS entries

svn-id: r18332
"
"c312db302c893095910f2a8ef5889af6b478ccba","2005-06-04 12:25:25+00:00","My Linux ITE CD developed read errors, so Joe sent me a replacement, for
which I'm very grateful.

This latest CD version turned out to be one that ScummVM didn't support. It
has - I believe - the same data files as the Linux version (with digitized
music), except for the voice file which appears to be the same as the one
from the Mac version.

In other words, it has one big-endian data file, and a couple of little-
endian ones. The technical term for this is 'bloody awkward'.

It should work now, though.

svn-id: r18333
"
"5d84b5afe3ca330aa530ef34d6be552aa1016ef2","2005-06-04 12:34:38+00:00","There were cases when an ITE intro credits line could appear in both
English and German at the same time. I've simplified the handling a bit by
splitting the line flags into language and... not-language? platform? since
this was easier than adding another combined flag. Easier to read, anyway.

I've also fixed some other minor things, e.g. 'Edward' was shortened to
'Ed' in the WyrmKeep version. Of course, there may be regressions. And
there are some cases where English texts could appear in German versions,
but I don't know if it ever happens for any existing versin of the game.

svn-id: r18334
"
"206d11f585d6775658897a05627c9a0bebfd7fcd","2005-06-04 13:19:53+00:00","Remove special case for char 0x20 (=space). No idea why it was there in the first place

svn-id: r18335
"
"f8cadf0401bbcfd2d890c0da7ae3112e7ad5a318","2005-06-04 13:25:47+00:00","Some font related TODOs

svn-id: r18336
"
"82281620175975f2e6a14fc9e6b8b768bea107c3","2005-06-04 13:58:11+00:00","Patch #1184666 (SKY: More LINC charset fixes)

svn-id: r18337
"
"03d6a6dd4e80cefd895780f26fc9136539fc67be","2005-06-04 14:29:24+00:00","update

svn-id: r18338
"
"2a3227911b35733b9ef8574459be5eb6581e1c2e","2005-06-04 14:37:52+00:00","Fix bug reported by Marticus with situation when Rif left scene with
converse panel on.

svn-id: r18339
"
"d3587c3a1ee9f81ef0b23550736bc5cc2b644d66","2005-06-04 15:02:17+00:00","fixed lense creation bug ( fade in/out now has separate flag)

svn-id: r18340
"
"af3a3dc2e7d2facd6d718e02f7cb1ab1cd10fb5b","2005-06-04 15:47:42+00:00","Fix for bug #1066329 (COMI: Actor redraw glitch)

svn-id: r18341
"
"83f9ebc373ca63d34efe2366fb7714b6ca67aef5","2005-06-04 15:50:23+00:00","Fixed warning.

svn-id: r18342
"
"feac08c9f713c78330006ea60eb4f9e364ccc092","2005-06-04 16:10:39+00:00","Fix for bug #1064658 (FM-TOWNS (Loom, Zak, Indy3): Dialog text shading incorrect)

svn-id: r18343
"
"697124a1b9f45a055402ea24f251e9fae0b9590d","2005-06-04 17:52:37+00:00","fixed dog's castle bug

svn-id: r18344
"
"f1f7e19dfe8d2c939e3f6f397bbe7931b3edc98f","2005-06-04 18:08:05+00:00","Fix for bug #1202487 (MANIAC64: crash after using hunk-o-matic and pressing ESC)

svn-id: r18345
"
"1e1226ccbdd082048679dd3aaadd36e8d214d907","2005-06-04 21:21:18+00:00","Updated comment; added code to deal with newline chars in COMI text (see bug #902415)

svn-id: r18346
"
"d1f2a7a1826da41a7245de29ce9603d08782aea2","2005-06-04 23:02:54+00:00","Fix for bug #1202029 (MI1VGA: Guybrush turns into a rowboat)

svn-id: r18347
"
"065ffeaf853fcb4633ba143e1cbf60f6d72b2aba","2005-06-05 04:53:43+00:00","Update HE comments

svn-id: r18348
"
"b452ee87e78269d4560e11845f042663a7c1b669","2005-06-05 08:02:50+00:00","Rename sprite functions, based on map.

svn-id: r18349
"
"fe07c5a99f6ac58a09f5762876a557f8f2cf6520","2005-06-05 08:15:30+00:00","Remove duplicate field.

svn-id: r18350
"
"322cce8d349dba4943aa6a7a5842706449e671e5","2005-06-05 08:22:09+00:00","Ooops, mixed up one function name.

svn-id: r18351
"
"11065571a47b8170a83a9e37678bac9046dcfe00","2005-06-05 08:31:47+00:00","update

svn-id: r18352
"
"5ee308e48f1ba6a9338109359b5a58fdddf76f06","2005-06-05 09:26:41+00:00","Fix long-standing bug with applying one object to another.

svn-id: r18353
"
"0042ad12b75d3c77507162b04c518cbde280f258","2005-06-05 09:28:40+00:00","Hide debug output

svn-id: r18354
"
"e1aec42c63e4a782d978f21e56ea8d0fce2ed967","2005-06-05 11:32:11+00:00","Proper error calls.

svn-id: r18355
"
"bc65eb8ea51944c13a23ea4a7d1b54d228c5b7ea","2005-06-05 12:55:33+00:00","added code for loading dynamic plugins(DLLs) for windows

svn-id: r18356
"
"f163b4f71abba9a871a301c85b21bdf306bf6070","2005-06-05 15:24:18+00:00","Add reported French monkeyega

svn-id: r18357
"
"6128bb05e3108671d3a687acef17904a8460c5a7","2005-06-05 16:53:53+00:00","implements sfScriptClimb, sfThrowActor, sfChangeActorScene
so tunnel may be passed now

svn-id: r18358
"
"050a1eaace702a930104c0f0613d958f9f2e1123","2005-06-05 17:30:20+00:00","Removed an old hack that I don't think is needed any more. Clear screen
when the dialog window is removed.

svn-id: r18359
"
"54df4a6e5b42f786e0bc40faae98165d51a5c42f","2005-06-06 20:42:44+00:00","VGAVideoDriver::drawLine implementation

svn-id: r18360
"
"4b5ff5ba1f8db6dfad5e27e4c0ef7115ce29d3fb","2005-06-07 14:43:12+00:00","Be less prone to crash on really, really stupid output sample rates.

Added warning message if SDL_OpenAudio() fails. Might help diagnosing bug
reports like #1206314.

svn-id: r18361
"
"2c31f4208ed82e7c82b4081b3b46241a077dc093","2005-06-07 20:44:19+00:00","Based on indy4demo FMTowns, some minor changes to SO_ROOM_FADE

svn-id: r18362
"
"7503ff15fd9ba7cbf48a458fc56fc3a2369ecfa4","2005-06-07 20:45:29+00:00","Based (again) on indy4demo FMTowns, unkScreenEffect5(1) seems equivalent to dissolveEffect(1, virtscr[0].h)

svn-id: r18363
"
"60806b90e82badacda88544824a30f97cde880d8","2005-06-07 21:17:47+00:00","Increase max number of timers to 8.

svn-id: r18364
"
"064bfed378934be8b7c175edcf589f34095929b1","2005-06-08 13:49:56+00:00","Added IHNM 'main strings' resource. It's trial-and-error, so it may be the
wrong one, but it does contain the verb strings. Unlike IHNM, it does not
contain the object names. We'll need to do something about that eventually.

svn-id: r18365
"
"8c82d94c4072b76b48cd5ec08aefddc7e2fce702","2005-06-08 14:41:57+00:00","Allow part of the IHNM intro to run again. I haven't verified that these
resource numbers are correct.

svn-id: r18366
"
"411fd102b679cc916956d4ac93ae9e87e13082d4","2005-06-08 19:01:19+00:00","fix animation free bug

svn-id: r18367
"
"6e68d8927efa62a4371400f45bd8be7e7054ff88","2005-06-09 00:42:16+00:00","Fix bug #1216439 'SAGA: run-length slice typo in online source'. Actually
I just zapped custom line drawing routine and use that one from OSystem.

svn-id: r18368
"
"2f2bcd914428d6fd7be1b818ea4a399fa4bd652f","2005-06-10 01:43:46+00:00","Adjust for HE100

svn-id: r18369
"
"eb99ba925b40b6aefc97a9efb9c37a4d63c16266","2005-06-10 11:56:01+00:00","Fixed sourberry sprite, and probably a couple of others. (The frame number
in the original is based on OBJ_EBERRIES, not OBJ_BERRIES.)

svn-id: r18370
"
"ef552c8a8f79aaaad21d76927ea5688772df4300","2005-06-10 12:09:01+00:00","Whitespace changes I made while looking for the sourberry sprite bug.

svn-id: r18371
"
"7b8c8004820cfda61042f442293d79ab96617bc8","2005-06-10 13:49:43+00:00","Whitespace

svn-id: r18372
"
"20ba16b09cc696f4b244f76e6b9fdc7322c16a71","2005-06-10 13:56:51+00:00","When setting a new verb, clear the 'pointer object', i.e. the variable that
keeps track of whatever object the pointer is hovering over. This way, the
pointer object will be updated but with the new verb applied to it. I was
getting tired of having to move the cursor off and on the object whenever I
changed verb.

This isn't exactly how the original engine did it, but it appears to work.

svn-id: r18373
"
"234b79396a47c1a6de29cd2b6661a8377b2889f7","2005-06-10 19:02:00+00:00","fix VS2005beta2 compilation

svn-id: r18374
"
"a2c90de0dbfcf5d859fb3790780e220dbf029be0","2005-06-11 15:25:38+00:00","Cleanup.

svn-id: r18375
"
"cf80e36831c4c09961e5153d9edcdf8083d2ae4e","2005-06-11 15:46:00+00:00","This should fix playing the sound for the entering/exiting the old mine
road movies when using compressed SAN files. (The movies are started
through seekSan() rather than play().)

svn-id: r18376
"
"d9a38f6f55262a945a9ae2a56f4eb0bed1b54551","2005-06-11 17:24:06+00:00","rewritten animation loading
removed animation warnings during game process

svn-id: r18377
"
"001d14cf696c58c3d8b1a4cdcb07eb4497e87dbf","2005-06-12 04:49:18+00:00","applied patch 1218705

svn-id: r18378
"
"802780619a3c3e3bf6485d14ba40bfc7ab33b57c","2005-06-12 15:58:37+00:00","fix Hooneyfoot bug

svn-id: r18379
"
"dcbd7775960f8fc96318bef98e61d30241815ca8","2005-06-12 21:21:14+00:00","fixed scene entrance
implemented sfEraseDelta, sfSetActorZ, sfGetActorX, sfGetActorY

svn-id: r18380
"
"ae7f676667d3762d5fb2ca1b49dcf4cb4b7f3bc3","2005-06-13 07:09:12+00:00","Rename opcode/function

svn-id: r18381
"
"1dbf319b59f7c76120b7956ac3f3381dbe26b0e3","2005-06-13 10:48:55+00:00","Add comments on smacker opcodes.

svn-id: r18382
"
"4f2cfd5feba4ce07a94c151c740cc6ba785c3932","2005-06-13 13:40:28+00:00","Fix crash on chasm.

svn-id: r18383
"
"01cf8f20ae1e6114b75c1d8ba78eb1f660422822","2005-06-14 00:31:54+00:00","Fix dock bug

svn-id: r18384
"
"fc7d6c4e262feb98eab8fd9a2e75f9b6333763d9","2005-06-14 03:06:56+00:00","-Add more Backyard sports titles
-Add additional HE100 opcodes changes for basketball
-Fix baseball asserts in VAR_WIZ_TCOLOR

svn-id: r18385
"
"bc4e3aefa47f72cc7fcce3a4c457c94bbebd4327","2005-06-14 06:42:40+00:00","Update

svn-id: r18386
"
"bb9ad54e1d4f04383c73f8206733876f27e898c8","2005-06-14 07:11:56+00:00","Update

svn-id: r18387
"
"962e716a5272bd627ec4f823310f57a26699ba32","2005-06-14 07:14:21+00:00","Update

svn-id: r18388
"
"dc3372b5804b61f5e213ccbfd98c8847fd5f10cf","2005-06-14 08:54:11+00:00","Applied patch #1208299. A warning message about the 'playing from CD under
Windows' bug is better than nothing, even if a proper bugfix - if one is
possible - would be preferable.

svn-id: r18389
"
"1d9930e8d99bb8441b7faa7ad2c75083fedf5f02","2005-06-14 20:01:46+00:00","Added __WINS__ defintion check for the Symbian integration so the right function is used.

svn-id: r18390
"
"655fb934a83b372baf009fa9d7320d47c55ecf66","2005-06-14 20:04:26+00:00","Added struct packning to palette struct && added check for define __WINS__ for symbian build

svn-id: r18391
"
"327ec439a5747082c1f17c153dda0cd0f10b6ced","2005-06-14 20:05:31+00:00","Changed palanim datatype from char to byte

svn-id: r18392
"
"82f5454246fd31d056e18057aed12c5afb273290","2005-06-14 20:20:57+00:00","Bug fix for inter_execPtr beeing a char*. Char is not the same defined typ on all targets. On symbian a char is unsigned char but Gob is assuming int in this case.
len = *(int8*)inter_execPtr++; // must be a signed char typ and char is not default signed on all platforms.

svn-id: r18393
"
"620a8c5822d3688da5df046895a04eb35ef147a5","2005-06-15 06:58:27+00:00","Appliced cyx's fix for bug #1220168, with a few modifications. Apparently
Sam & Max uses a different sorting method than (all?) other games.

svn-id: r18394
"
"1386108adb32b13269d4f67a15c4a16b2bffb3bd","2005-06-15 14:42:40+00:00","Corrected error message.

svn-id: r18395
"
"c72e77885eb81f24bbe77e3a19e286e743804fd4","2005-06-15 19:14:19+00:00","fix animation loop

svn-id: r18396
"
"e0d9d4eb4a96d11b99d8fa5b9acba78fa57fcc94","2005-06-15 19:26:32+00:00","some renames

svn-id: r18397
"
"1e2131d0eec4a4cc828cb21c329912d427823053","2005-06-15 19:30:11+00:00","some renames#2

svn-id: r18398
"
"b5b4d3d99764724dce7f0ad7061c05e5ccbfcf76","2005-06-15 20:07:56+00:00","Don't access the thread after sfScriptGotoScene. As the comment points out,
the thread has been destroyed. This fixes a crash when leaving the ferret
guild lodge, and probably other places as well.

svn-id: r18399
"
"18e5bf15f83f5c0a772bef792b5ba32429ce6b2b","2005-06-16 00:47:45+00:00","Update

svn-id: r18400
"
"7539169c1defdcc7fd18ef7f4d74b670b7749f52","2005-06-16 15:33:44+00:00","fix trothy -> oil lamp

svn-id: r18401
"
"b16a3634bfa68de91b9a77571f5511de648a0d19","2005-06-16 16:46:50+00:00","placard workaround

svn-id: r18402
"
"37f90ff1fc874a2b35639c3536c47b5b3f7ba482","2005-06-17 14:09:06+00:00","fix screwdriver bug

svn-id: r18403
"
"c60400035a82ccc79475622082aa1e990e27dd44","2005-06-17 17:10:54+00:00","o6_setBlastObjectWindow can be safely ignored

svn-id: r18404
"
"ffeb4c99b2607fe5835e1b845be63cd23f57167e","2005-06-17 17:11:19+00:00","update

svn-id: r18405
"
"db875d92e4721290a03df268228ee49fa607dc59","2005-06-17 17:11:30+00:00","update derefActor() argument

svn-id: r18406
"
"e3b40b5c24b676ed67c39891dff2b41ee9300f98","2005-06-17 18:10:51+00:00","committed patch #1221592, smush_codec 21/44 should match the original interpreter behaviour now (this allows to cleanup a bit the code and get rid of some hacks).

svn-id: r18407
"
"b03de44db456d6ea4c578a3b6c8c423e41cda0d7","2005-06-17 20:23:12+00:00","Handle newlines in blast text (fixes last remaining part of bug #902415)

svn-id: r18408
"
"04eba089f6af536b311c51753700a65d09fc9fb7","2005-06-18 15:44:40+00:00","fix compilation with DISABLE_SCUMM_7_8 defined

svn-id: r18409
"
"97337c46238d3e6ebd2a792d03bd6990c5775d03","2005-06-19 14:06:20+00:00","implemented sfGetNumber
now use MagicHat (be carefull not to exceed overall scene number)

svn-id: r18410
"
"1844a9c5449108537b5ec19bf618b17420d995aa","2005-06-19 18:16:27+00:00","Fix C64 targets. Regression.

svn-id: r18411
"
"ecf8da7230678466cf56c9c03716723653e7dcd6","2005-06-19 21:18:00+00:00","Implement sfPlayLoopedSound, sfFadeMusic and sfPlayVoice.
sfPlayVoice is untested. Please, inform me where you encounter it.

svn-id: r18412
"
"bf304539fee94ab2baa4e39024a3e9c96cec548f","2005-06-19 23:02:38+00:00","Document c64 as being a valid --platform= option.

svn-id: r18413
"
"2c9d2ffc9796c3f794e9dbf22749e91b90eea6b8","2005-06-19 23:41:40+00:00","Support for mouse wheel in Options dialog and in Converse panel

svn-id: r18414
"
"ea72e5c49fb4c3ab50c58e29b983cf05889e455c","2005-06-20 06:29:36+00:00","Whitespace

svn-id: r18415
"
"c613eaab8898ab6403cec5a5e9f352810634baf5","2005-06-20 11:46:34+00:00","fix animation bug at rats

svn-id: r18416
"
"75d868743c29de7d9c19dcc1b4099e6443dc8774","2005-06-20 12:17:22+00:00","sfShowControls implementation is NOP

svn-id: r18417
"
"a8de6c99d075bfdf5253b26bc1c4c0815d902f8e","2005-06-20 17:55:37+00:00","Removed  -Wctor-dtor-privacy, all it does is trigger nonsense warnings in GCC 4

svn-id: r18418
"
"096e04ef05fda514df07845f066c1b590e63a3f2","2005-06-20 17:59:00+00:00","Added virtual destructor, to silence a few more GCC 4 warnings

svn-id: r18419
"
"21efddda22766e5ed685253820d7bbcff257be1d","2005-06-20 18:27:33+00:00","Added virtual destructor, to silence a few more GCC 4 warnings

svn-id: r18420
"
"43bc76a29c8628fe9e1ed4a2f345c8ecdad97e61","2005-06-21 13:14:56+00:00","Added temporary variables for readability.

svn-id: r18421
"
"ee28783c746c158550eed88eb20b18025ca79cad","2005-06-21 13:55:18+00:00","Fixed crash when talking to the money changer about the Orb of Storms. The
sound resources were being substituted with animation resources. Now the
substitutions are identified by a resource number *and* a file name.

Could someone verify that ite.rsc is the correct file for all of them?

svn-id: r18422
"
"d38a41e5327f1a975160fa3fe9cd810149b1fbc9","2005-06-21 15:41:35+00:00","When a key is pressed, go back to repeat phase 0 again. This is so that we
won't continue a fast repeat with the new key. (Annoying example: It could
be tricky to type upper-case letters because if you didn't type the letter
fast enough 'Shift' would begin to repeat, and then whatever letter you
typed would start repeating immediately.)

svn-id: r18423
"
"90036d6d8ab92ccacf11aa975709182452f6eb20","2005-06-21 16:45:18+00:00","Patch #1224631 (fix gcc4 virtual functions non-virtual destructor warnings)

svn-id: r18424
"
"07ac9901f17fd22bbaa1d6528b7cd3ea0c2012ed","2005-06-21 16:46:04+00:00","Yet another GCC 4 warning fixed

svn-id: r18425
"
"fd8c94a2f372e64593657b1d02776d208af62bd0","2005-06-21 19:53:19+00:00","Added symbian-fs.cpp, symbian filehandling class

svn-id: r18426
"
"7bded41f194331f309388afa5a30035927655f5d","2005-06-21 20:19:39+00:00","This is the submission of the Epoc/Symbian build files for
UIQ 2.1 UI
Series 60
Series 80
Series 90/Nokia 7710

There is a dependency on ESdl for these devices.

svn-id: r18427
"
"0047a768f2a03191c63c487d01d602a7e0939949","2005-06-21 20:39:09+00:00","This is the SDL changes needed by the Symbian build to work properly.
Also there is a bugfix for using the joystick handling for SDL. (See events.cpp history)

svn-id: r18428
"
"4564f0d3bf0d40f5a2ca125df0682969adc8431c","2005-06-21 21:59:24+00:00","Fix gcc4 warnings

svn-id: r18429
"
"1c69696a9a8878971c4fa925b074498dab757857","2005-06-21 22:08:21+00:00","Patches needed to build for SYMBIAN32 WINS/GCC added.
Test built for Symbian and run on P910i without any major problems.
Test built for MSVC6. Changed parts seems to compile ok but there are some problems with MSVC6 and some of the targets which the EPOC build does n't support (KYRA,SAGA).

svn-id: r18430
"
"9cdfe927be66e741bb95d5a5c2814cb142204335","2005-06-21 22:19:02+00:00","Added default destructors as required by the Symbian/Epoc port

svn-id: r18431
"
"b9881d63f63164b57f71a25bc9f596b7b00b74e7","2005-06-21 22:23:53+00:00","replaced #if defined(_MSC_VER)
with #if defined (WIN32)

svn-id: r18432
"
"8f4077d9926ec6f59419c33102703bed7ec043b5","2005-06-22 06:37:02+00:00","Fixed warning. (And made some whitespace changes.)

svn-id: r18433
"
"8fbbd28f7948323bf20ea281ab570ca8889f6854","2005-06-22 08:33:46+00:00","disambiguate undefined operation by removing unneeded calculation.

svn-id: r18434
"
"9fc959e63dbb72fefecf322cc7dae3744a7977ab","2005-06-22 19:32:10+00:00","Changed from char to int8 in a number of places. This makes not assume the typ of char regardless of any compiler flags. Now looks very nice on the Symbian platfor.

svn-id: r18435
"
"e4236ba567c1646a048954fb28aa693db9ce8b77","2005-06-23 13:09:26+00:00","Fixed credits order

svn-id: r18436
"
"f460151b0a67ee94dcd7810740844abbfe9f3051","2005-06-23 13:11:44+00:00","Updated NEWS and TODO

svn-id: r18437
"
"2ea15e4822bf0bbbe3507340eabe94e6d6244884","2005-06-23 13:46:38+00:00","Revert change from printf() to debug(1)

svn-id: r18438
"
"1c361ee409a24618ecfb1c2c1bf12861ee7a41e3","2005-06-23 13:55:32+00:00","Fixed credits order again

svn-id: r18439
"
"3b6018452c30bb4a6908576ecc6751dff4a973a4","2005-06-23 14:10:52+00:00","Fix foCheckAlreadyLoaded case in findObjectInRoom; this is not used in any SCUMM game, just added this for completeness (see patch tracker item #1222246)

svn-id: r18440
"
"f80dab367cb73b3e98f16248bbfe602136cbcd9a","2005-06-23 14:15:49+00:00","Moved endian macros to a separate header file

svn-id: r18441
"
"a35588b9ffd65f3ac468543802eab3f2bfe65b94","2005-06-23 14:18:25+00:00","Fix 64 bit compiler warning/error

svn-id: r18442
"
"68907449b75479481348af5d3d4842a96b7651f6","2005-06-23 20:20:27+00:00","Use #include 'file' instead of #include <file> for consistency.

svn-id: r18443
"
"8b1d7b916673078d20f15540f9cc2f531340ba97","2005-06-24 15:23:51+00:00","When including files from common/, explicitly use the common/ prefix

svn-id: r18444
"
"81022b9c28ce51c4b4a70d3cf09f5a2092c68af3","2005-06-24 15:26:06+00:00","Fix for bug #1226522 (do not add common to list of include paths, to avoid name clashes with system headers)

svn-id: r18445
"
"5f511510bc5058e7198e8972cf3809117135b42f","2005-06-24 15:58:00+00:00","Whitespace changes.

svn-id: r18446
"
"35cb8fb875c7993725875a659907e1c61afc4c94","2005-06-24 16:01:42+00:00","For consistency, specify directory when including files.

svn-id: r18447
"
"7dc3082a35cf4cfc5f878c02125d53dec77432a7","2005-06-24 16:05:24+00:00","I don't think we need <ctype.h> here.

svn-id: r18448
"
"1d39f986c9a51e3305625f4dbf308c8c92b5d34b","2005-06-24 16:08:31+00:00","Whitespace changes.

svn-id: r18449
"
"0ed74c8dcdc6dae919831d27c484e7bdcd74ebe0","2005-06-24 16:11:11+00:00","I don't think we need <ctype.h> here.

svn-id: r18450
"
"46b6eff722a8d12b9325d0fd4ba13aed8d9824f3","2005-06-24 16:13:21+00:00","I don't think we need to include mididrv.h here.

svn-id: r18451
"
"587a90ed26ad19d6f8a9e130b485d77accca9527","2005-06-24 16:14:28+00:00","cleanup

svn-id: r18452
"
"06985285a0aed905f69fb0c0f5502130d4bbadd7","2005-06-24 16:14:39+00:00","Whitespace changes.

svn-id: r18453
"
"40236ee7c1f1d4ea38ab4922b82a02b618142938","2005-06-24 16:16:46+00:00","For consistency, specify directory when including files.

svn-id: r18454
"
"7760c0b8a42dc5b5ccac06252ddadf31e8310b59","2005-06-24 16:18:10+00:00","Changed #include <stdafx.h> to #include <common/stdafx.h>. It should
probably be #include 'common/stdafx.h', but I'll let the backend
maintainers worry about style.

svn-id: r18455
"
"9da50d66628df3c86ee63cb4eeb185ae4e6e7b4a","2005-06-24 16:21:10+00:00","Fixed Oki table entry; added doc URL; mention IMA ADPCM

svn-id: r18456
"
"02568d4498a218e46882dfb747bc38f644052d6e","2005-06-24 16:39:17+00:00","oops forgot this in my previous commit

svn-id: r18457
"
"0c4f349a1b41a87881a5e036bf5fd5797223bf48","2005-06-24 17:08:21+00:00","removed unneeded #include

svn-id: r18458
"
"96f9571afce6ccc6827bf17893e573a27e309555","2005-06-24 18:17:01+00:00","fix VS2005 _strnicmp error issue

svn-id: r18459
"
"6636cf102b7dcffdded5128fc724dae61a9d0279","2005-06-24 19:09:12+00:00","Heavy clean up for the iMuseDigital ADPCM codec; the code is now much easier to understand, even contains some comments ;-)

svn-id: r18460
"
"139ee21041193d2307434a8d3d35e06350353bd5","2005-06-25 15:17:14+00:00","Move file handling in SMUSH code to a single thread (unless I overlooked some cases)

svn-id: r18461
"
"003081fd5377f9daf32fcd18abe957f577b2bb81","2005-06-25 15:43:59+00:00","cleanup

svn-id: r18462
"
"353e8586d478c60f2da5d1d95ece50e98b044574","2005-06-25 15:55:43+00:00","fix animation timings (now Shiala scene not stucks)

svn-id: r18463
"
"e68a6ddd2615ddc42eb18bf3458607f6d108f79f","2005-06-25 19:34:16+00:00","cleanup

svn-id: r18464
"
"5059e710e82c7a5bca60914206487767714d0b10","2005-06-25 19:43:59+00:00","Fix postfix inc/decrement operators of List::Iterator

svn-id: r18465
"
"f001a43830d86fd3e8d4a2b6c70ef5e7a9cb0740","2005-06-26 19:44:55+00:00","Updated Scummvm MP3 implementation with patch so it works with Symbian multithreading. This openingen/closing the file for each chunk to read. This does only affect the Symbian build and the other ports should work as normal.

svn-id: r18466
"
"0baaea85ed96a8f848d24c49d34524aa43b50ae6","2005-06-26 23:37:59+00:00","Avoid creating lots of file handles, reuse them instead (this relies on files being accessed from a single thread)

svn-id: r18468
"
"48a00b6846e324dbe4d53d67f50c3c541582ae88","2005-06-26 23:47:19+00:00","Fix warning

svn-id: r18469
"
"ea3dd90f35b71cdb05357ae8bae866ad8d88ccd6","2005-06-27 00:00:32+00:00","Fix handling of music data in COMI

svn-id: r18470
"
"9e134593383520a0f9c2f63633b7b6ce84365419","2005-06-27 15:16:05+00:00","Implemented InVMSave::skip().

svn-id: r18471
"
"e2d1b7afa480b69495fcc73ab9157d1139127500","2005-06-27 15:16:58+00:00","Implemented OSystem_Dreamcast::grabPalette().

svn-id: r18472
"
"6d70218f35f3af8fcada1f20f98a2af0afbe9775","2005-06-27 21:37:07+00:00","Just updated ending comment properly for the sake of it

svn-id: r18473
"
"c3f975c7b88fb5e4589640562e3700d2918538a6","2005-06-27 21:44:40+00:00","Better test for disabled scalers...

svn-id: r18474
"
"ac071d6470342c71840c8ed0aac661652e126e94","2005-06-28 10:25:25+00:00","Worked around script bug which could cause Nico to be in the wrong state at
the Docks scene in London. See bug #1214168 for details. (The bug was not
serious, but could cause some very obvious glitches.)

svn-id: r18475
"
"0a29c11bc9ba6c0ab84913f0a7b98297d69c10b2","2005-06-29 20:00:44+00:00","dragon wip1

svn-id: r18476
"
"f4a72b7b580ee672f31bb2e8c5a03602a36c8de3","2005-06-30 09:09:59+00:00","Fix compilation. FALSE is not a valid value, false however is.

svn-id: r18477
"
"2e273bad42819b04f45cda164766f38af3815529","2005-06-30 09:14:36+00:00","Enhanced tremor support from Jolan Luff.
The configure script now works as follows for detection:
Tremor only: use tremor
Vorbis only: use vorbis
Both: use vorbis

This behaviour can be changed with newly added configure script options.

svn-id: r18478
"
"a08ecca1c024cea0a113af97045cf5cf0e83a093","2005-06-30 23:29:34+00:00","The web version of comi demo has no music bundle.

svn-id: r18479
"
"13b1802a453f838cf2b8c35678b9a78fd4277534","2005-07-01 17:29:23+00:00","implemented sfPickClimbOutPos, sfTossRif
Komodo dragon now works

svn-id: r18480
"
"7970562356790a274cbc96b32dc84801536e3bd0","2005-07-02 12:52:30+00:00","Hackish native MIDI HW support for Mac OS X (incomplete)

svn-id: r18481
"
"5402ba49dd4f12ddd7081388e4bc8a578b0c3948","2005-07-02 12:53:57+00:00","MIDI ideas

svn-id: r18482
"
"9d0074495470a638809bf1ae25e7595e1190b778","2005-07-02 12:54:53+00:00","Small fixes

svn-id: r18483
"
"bf507bfa11055b7855d893bae4181e8753ea3a51","2005-07-02 13:01:59+00:00","cleanup

svn-id: r18484
"
"339d20eac8d73a3e656e4cc207141ef2c79d0088","2005-07-02 14:45:24+00:00","fixed irritating MI2 warning

svn-id: r18485
"
"1fd2c55051821557f158fbabf8a8471a1dfa69ab","2005-07-03 15:22:59+00:00","fixed Elara bug

svn-id: r18486
"
"de14b2337ff9a5a3e620c5d0a75e1df749487e61","2005-07-03 20:02:56+00:00","Implementation of sfShowMap. This was latest unimplemented script function :)

svn-id: r18487
"
"407dd03e2862a6eaa96ad1046350a020065c4dc2","2005-07-03 22:56:51+00:00","- Small changes to sync with Munt.

svn-id: r18488
"
"caa614840d4b849c24e974c72cffd38bbc1f8a60","2005-07-04 07:43:55+00:00","Fixed warning.

svn-id: r18489
"
"399bd16ab1175e6b816bc6cec26d650cfcb7cad0","2005-07-04 07:46:48+00:00","Apparently some masks are bigger than the image they are supposed to be
masking, and therefore need to be clipped. This fixes a slight glitch in the
ITE intro where an actor is drawn partly in the status text field.

svn-id: r18490
"
"2e868658dae0e8c001287c9ac8e0e887608bda34","2005-07-04 07:47:04+00:00","Cleanup.

svn-id: r18491
"
"8b460fdf893dd2c202ff630dd87f66729391bf34","2005-07-04 07:53:17+00:00","Added note about BS2 script bug.

svn-id: r18492
"
"792ca1aec42d68d8e46331331db3aa01215ff49c","2005-07-05 06:12:40+00:00","Clip actors and objects to the scene (which may be an inset), and only
allow interaction with actors and objects inside this same area. Other hit
zones may - indeed must - still exist outside the inset, and they are not
affected by this patch.

This fixes some glitches at the glass makers's house in ITE.

svn-id: r18493
"
"cdead6d57b9d90d8f80cba023e5e6056765b273d","2005-07-05 15:15:35+00:00","- Stripped down unused SURFACE parameter in palette-related functions
- Fixed scenes glitch when loading saved game. This is done by closing
load window right after game is loaded which differs from original but
seems more logical to me
- Fixed wrong palette when Dragon maze was loaded from a savegame. We just
didn't process Palette resource for it.

svn-id: r18494
"
"9895b64cfee5c885d1d88e2096ffef3ee544da3e","2005-07-05 15:33:09+00:00","SAGA no longer has its own line-drawing code, so this comment no longer
applies.

svn-id: r18495
"
"34d6c7de8c2b97165cc50f8503b0f87751643e7d","2005-07-05 15:34:26+00:00","Clarified the comment slightly.

svn-id: r18496
"
"57858a8757a5b3d96958ec856862886184082652","2005-07-05 16:58:36+00:00","Hid most of debug output to deeper levels. We're pretty close to official
launch so it should be invisible to users.

svn-id: r18497
"
"d4716a1fb525540f3395262d236df51ef70874f1","2005-07-05 20:22:56+00:00","* Start of generic key configuration support for ScummVM
* Moved KeyConfigDialog, key from WinCE to gui
* Updated wince code to inherit and use new GUI::Keys and launch new dialog
* New definition SMALL_SCREEN_DEVICE when keysdialog should be inittialized from options.cpp
* Added new function to SDL\Events that handles key remapping.  LINUPY & QTOPIA remapping moved to that function. SymbianOs.cpp overrides this function to enable key remapping to events
* Compiled VC6++ project. This with warnings and errors, but NOT in the changed code. (SAGA,KYRA)
* Compiled using WCE tools 3 for X86 target and running Scummvm in emulator to test
* Compiled with UIQ target. The rest Symbian platforms might require further configuration to operate properly
* Actor.h in Saga now compiles for default VC6 setting.
* Aspect.cpp does not compile in VC6/WCE due to template problems with the kFastAndNiceAspectMode setting.
* Changed order of creation of gamedetector and mainsystem in Main.cpp
* If anything does not compile, or is totally out of order, please revert changes.

svn-id: r18498
"
"a5af0165ba7fb93da647622336e7c8c7b429ce00","2005-07-05 20:27:14+00:00","* Updated WINCE files to compile with new code sharing with other small screen devices (such as Symbian)

svn-id: r18499
"
"caf6151bba4f0bc6956a45173f49cb056cf59bb4","2005-07-05 20:51:54+00:00","Last modifications for Actions to WinCE.

svn-id: r18500
"
"9d5ee0b9eb18c7b3dc4edf5e661fb05c32525fe6","2005-07-05 21:27:32+00:00","Added S60 RSS file if it shall be working with ECompXL. Works on emulator but not for target right now

svn-id: r18501
"
"cff8568562ccf8f77f2b03323973c9dc5a3a1551","2005-07-06 17:07:58+00:00","fix converse pal bug

svn-id: r18502
"
"8294d21739aa42f8ac0273b10504cc52e394f64d","2005-07-06 17:51:41+00:00","fix end sequence - show inventory bug during converse

svn-id: r18503
"
"e25587d74bdd55968e0548192a3dc8b4639a468a","2005-07-06 17:55:53+00:00","Fixed stopping sounds. I think that at one point our 'param' used to be
unsigned, but it isn't any more.

svn-id: r18504
"
"bcc3bd97081cad5127c6c8c012d5eda319c039d9","2005-07-06 20:46:10+00:00","Declared destructor virtual and testing Tortoise CVS output to see how the notification works (not)

svn-id: r18505
"
"fc4c06309c537e12ac5fe6de2bc161f269d38107","2005-07-06 22:35:18+00:00","possible 'fix' for bug #1233495 (FOTAQ code is so hackish...)

svn-id: r18506
"
"e23e1aa1f6e3ffb26774493eed7e2558d69fce99","2005-07-07 06:45:33+00:00","This allows ScummVM to run pre-Dig/FT SCUMM games again when compiled with
GCC 4.0, at least for me. I'm not enough of a language lawyer to say for
certain whether the old code was really undefined, but it's a simple enough
change that shouldn't possibly do any harm.

svn-id: r18507
"
"a89e9ce188b078c6a45ac0c6dae5ddf3c63eebf1","2005-07-07 09:10:19+00:00","Applied my own patch #1233980 to fix compilation on my unstable Debian box,
and to hopefully fix the previously rejected bug #1233194.

svn-id: r18509
"
"56b766f001c6c06fa0dc5a0daf6e102446ffeb96","2005-07-07 09:52:04+00:00","Add patch:
1233352 - Fix hanging descheduled entry/exit scripts

svn-id: r18510
"
"e98a0bd15f8c8d6274cc603bf0afc5b9cec87da9","2005-07-07 17:54:33+00:00","Added note about GCC 4 fixes. (By the time we make a new stable release it
ought to be fairly well tested, and GCC 4 should have stabilized a bit.)

svn-id: r18511
"
"660ea5e66fa52e0ba578e8f1cee3a4ba0f41c254","2005-07-08 15:09:58+00:00","Redraw the interface (primarily the inventory icons) after loading a saved
game.

svn-id: r18512
"
"954b578063c5d96ab76dfb8d170b175edc09c362","2005-07-08 16:16:05+00:00","Spelling fix

svn-id: r18513
"
"07b5d93eaa8c6405d075210c903a826ee5774945","2005-07-08 16:16:32+00:00","Fixes for RISC OS

svn-id: r18514
"
"7e0033983fef78e6d1597fc601a700aa2aafe27e","2005-07-08 16:43:36+00:00","Extended the sprite draw() functions so that a clip rect can be specified,
and used that to clip the puzzle piece being moved around to avoid
graphics glitches.

svn-id: r18515
"
"d944bd7793d1e366bf3555cea3c11a488b9eecaf","2005-07-08 16:56:03+00:00","implemented per scene actors clipping
so last sequence should look much better (not perfect)

svn-id: r18516
"
"1a54a5e0e2def277877e9ec691d26bb493daebae","2005-07-08 18:21:55+00:00","Undo previous 'fix' - Bob != bob = blit object

svn-id: r18517
"
"376738bb038bbbd1ace27706fad7e3ff7ce45c5b","2005-07-08 18:39:53+00:00","fix final sequence scene height

svn-id: r18518
"
"f8eb0bffdf5fe1aa5484e3ad6d253db4af815769","2005-07-09 06:30:46+00:00","Mention Zak C64 support.

svn-id: r18519
"
"aa13ccd6c3f5255ecb5e04dc92018876a9cabe96","2005-07-09 06:44:00+00:00","Commited patch to fix bug #1210836: 'ALL: Failed assertion in AdvMame scaler'.
Thanks cyx for actual fixing.

svn-id: r18520
"
"866d3e3db357293aea3e70a55b3944bf3dccd5ac","2005-07-09 10:34:09+00:00","remove 1pixel dos clipping

svn-id: r18521
"
"f7a6729a01ce8c07dddf4a7f7c0b25f8690e2c1a","2005-07-09 13:21:21+00:00","This should really be two or three different commits, but I'm too lazy for
that:

* Re-worked the elevator script bug workaround so that it's more consistent
with the other two script bug workarounds.

* Some renamings to make it more clear that game events and input events
are two completely different things.

* Added function for clearing pending input events, and used that to fix an
annoying keyboard repeat bug when closing the debug console. (The console
would keep re-opening because the key press to open it kept repeating
even though the key had been released.)

svn-id: r18522
"
"c2f1691bada2c0e945b206e5ed71752f0ba569b5","2005-07-09 16:23:45+00:00","gfx rearangement
code cleanups

svn-id: r18523
"
"150fe60d8847c5eab8320386546035873c301ccc","2005-07-09 17:11:41+00:00","code cleanups
transitionDissolve -> gfx
del sdebug

svn-id: r18524
"
"237eefba64129b28f9815303fc8a5299c3cfb448","2005-07-09 20:32:59+00:00","Remove leftovers

svn-id: r18525
"
"02d28a96ceb5c8c60aea82166b1ad92f83d660d2","2005-07-09 21:29:54+00:00","Fix bug #1235211: 'SAGA: Fails to compile with gcc4.0'

svn-id: r18526
"
"b3aac821fd57389eff367ea8f7e55ed5a03a2531","2005-07-09 23:07:46+00:00","1. Fixed divide by zero defect (exception on my symbian target, Windows just return max val)
2. Fixed so Saga compiles for VC6.
3. Added GCC_PACK & pragma pack to gfx.h

svn-id: r18527
"
"215efc3ed92be40db8b5ec84ff93968b06600041","2005-07-09 23:25:45+00:00","Updated build files for Symbian/Epoc so they now also includes SAGA

svn-id: r18528
"
"c598bb78bbf8f9b44fa5c4aa5142969d49129e1a","2005-07-10 13:37:03+00:00","Cleanup.

svn-id: r18529
"
"40ecfe03ec36da39efaa04080691269e625525ac","2005-07-10 14:39:04+00:00","No reason to pack ClipData; since it's not a POD-type, that wouldn't be valid anyway. Likewise for Surface.

svn-id: r18530
"
"4ea61fb13e0c7cf8d7ed7db87b912eae402fb3ac","2005-07-10 15:23:36+00:00","Remove packing on Color, as it was n't needed. Keeping packing on PalEntry

svn-id: r18531
"
"d1e58e603621fe2cc36b6124111b6e4a3ef09213","2005-07-10 15:25:30+00:00","Updated interface.cpp so it compiles for VC6 without errors. Moved loop variable declaration

svn-id: r18532
"
"8a59ff208c41625caf3823787ebc596fa3a6335a","2005-07-11 00:48:27+00:00","Fix more GCC 4.0 warnings

svn-id: r18533
"
"71bc3a3ba631e99ca5a6f905f1c2973db5115b50","2005-07-11 10:54:53+00:00","Move scaler key handling to a separate method (this helps to fix a GCC 4.0 warning, makes pollEvent() cleaner); fixed some code formatting issues

svn-id: r18534
"
"d1e7144a02c024fe7a948120821b426f4f1a77d1","2005-07-11 10:59:14+00:00","Yet another GCC 4 fix

svn-id: r18535
"
"a2d809f854d7717f30b6595edd3a0509ea24fcf6","2005-07-11 13:22:55+00:00","In o_quit_if_user_presses_y(), assume that any unknown language (e.g.
'English (GB)') behaves like 'English (US)'. This is consistent with how we
handle language in the rest of the Simon engine, as far as I can see.

Should 'n' really be the key for a negative answer in all languages?

svn-id: r18536
"
"f756b74d043d7a76ce09b80078ad5f77a9b6af9c","2005-07-12 18:31:48+00:00","Made it possible to terminate dialog windows with Enter. (We could already
terminate them with Esc.) This is so that, for instance, if you type a
savegame name you can press Enter, rather than clicking on the 'Save'
button.

I don't know if the original did this as well, but it feels natural to me.

svn-id: r18537
"
"c14e60cb616ce737ca1ec6582154837a57b39bb4","2005-07-13 12:22:08+00:00","Rename function
Add comments for missing cases.

svn-id: r18538
"
"f65586dd0f8eaae8ae8625caa599e156e87e0cc2","2005-07-13 12:48:35+00:00","German translations for some interface texts, as pointed out by Simon
Sawatzki.

svn-id: r18539
"
"983643bc5a87ef30d522613cc0a479392292d3a6","2005-07-13 14:38:26+00:00","Cache the blended background in a surface, so that the blending only needs
to be made once, instead of whenever the console is redrawn. (This is the
same trick as the About dialog uses.)

It should speed up the drawing quite a bit, though it's not particularly
noticeable on the computer I'm using at the moment, so I can't say for
sure.

svn-id: r18540
"
"19e118324d8beb8d9758d0844a316c1667236c6c","2005-07-14 06:58:06+00:00","Don't count the time it takes to do the blending when timing the slide
action of the console. (I thought I could do this simpler by doing the
blending in open(), but for some reason I couldn't get that to work, and I
would still have had to blend in drawDialog() anyway, so maybe this is for
the best...)

svn-id: r18541
"
"528eedb2de57eae737d0f7135b77a860d1b9eb41","2005-07-14 17:46:21+00:00","font & text related changes:
-rewritten font loading
-actors box text output implemented
-many fixes
-implemented nonactors textoutput

svn-id: r18542
"
"b0d342be1088f6898bd0bfcd693e4cce7367a1b2","2005-07-14 17:52:32+00:00","removing text module

svn-id: r18543
"
"51e76c703f6b488d8fe190c225eac0c87b41270b","2005-07-15 15:23:19+00:00","Added the puzzle voices from the CD version. I don't know if this breaks
the floppy version, and it's still not flawless. But it's a start.

svn-id: r18544
"
"888c4054df949b7b0100f3bd371a92dc4d987855","2005-07-15 23:52:18+00:00","Add reported German Spyfox1

svn-id: r18545
"
"6f916583b710f70bee134f533ffbc2ec2107524f","2005-07-16 00:13:05+00:00","Try HE99

svn-id: r18546
"
"3d9d96e8730087101c5ac73c86247e6fb493832c","2005-07-16 00:22:28+00:00","Missed flag

svn-id: r18547
"
"545837b9031b7feea4af23f03cabf4e86c349859","2005-07-16 17:10:50+00:00","Set SCUMM debug mode to be on if a boot param is specified.
This avoids having to use -d0 for scumm titles and alows
boot params from config files to work better.

svn-id: r18548
"
"090cbc45aee92de982fa2f37f1d405c061585888","2005-07-16 21:46:32+00:00","fix Win32 demo font list

svn-id: r18549
"
"8df01d4aac3594996fcafa756cc9041b7ddaff44","2005-07-17 13:36:38+00:00","Cleanup

svn-id: r18550
"
"62a74741743adbc948be8b8ccf32d316afff0e46","2005-07-17 15:10:08+00:00","Fixed ITE inventory redraw glitch when exchanging the medallion for money.

svn-id: r18551
"
"56657a1bcb323113a3b1d850250651c0723f57d7","2005-07-18 14:37:04+00:00","Cleanup.

svn-id: r18552
"
"d3ba7a1543df7071a0971da773f998c2888c2f61","2005-07-18 14:37:55+00:00","When redrawing the inventory, clear every inventory slot - even the empty
ones - before drawing the object. This fixes a glitch when getting the ring
from the mud.

svn-id: r18553
"
"7c0720e5dcba4bcd2eb40f68fffca8e859c49c1f","2005-07-18 21:53:48+00:00","Synchronized dists/debian with what's in the official Debian archives.

svn-id: r18554
"
"33add0a15741c638cb2fc1bb5d5566a09a0fe37c","2005-07-18 22:02:02+00:00","Deleted, 'changelog' is used for now

svn-id: r18555
"
"ba275dfd58a13a86d2ba9b9583ebe6c96199d29a","2005-07-19 09:10:05+00:00","Some stubs for gob2.
Improved debug output.

svn-id: r18556
"
"3d4192de8843b2db90258f912e3b31030fa063ef","2005-07-19 17:04:16+00:00","No need to test if a pointer is NULL before freeing it. And since I
couldn't see _frameBuffer being freed anywhere, I added that as well,
though I'm not sure when it's allocated.

svn-id: r18557
"
"f7749e4789b957c3feae1f6db1c0836bbe2956a3","2005-07-19 17:30:49+00:00","I believe this fixes a GCC 4 compile error, but I can't run the MT-32
emulator (my computer is too slow, and anyway I don't have the necessary
data files) so I haven't tested it other than by compiling it.

See bug #1224138 for details.

svn-id: r18558
"
"546a9d852b1907dd8e1c9403842a934a98fd9a2d","2005-07-19 17:53:55+00:00","Applied patch #1238516, with very minor modifications. It gets rid of an
old DOTT hack/workaround.

svn-id: r18559
"
"50c2d8954d229145b508a9e822c6f49b353b9c9f","2005-07-19 19:05:52+00:00","finally Resource manager rewritten:
-adds patch file support
-global _vm removed

cleanups

svn-id: r18560
"
"606e7d0fc57908c1defff38bbccf4ff722d994e7","2005-07-19 19:33:51+00:00","remove rscfile_mod.h

svn-id: r18561
"
"6904278e231b03f566fb0203d966a6eeaa3185b1","2005-07-19 19:44:20+00:00","fix Music crash on exit

svn-id: r18562
"
"993c262e2bf21e4e1d7b1fa6a73ed5302bc9a9d7","2005-07-19 20:25:48+00:00","Cleanup.

svn-id: r18563
"
"a818b83858634003ca1ce892984496d56b387823","2005-07-19 20:31:10+00:00","Removed unused variable.

svn-id: r18564
"
"0009b36293aeb7a499c13aa82859065b4845660d","2005-07-19 21:15:56+00:00","If we're not going to detect music 'engine' at run-time, then we do need
separate entries for the original Windows CD and the first Wyrmkeep
version. The latter has the 'patch' files, which include the standalone
MIDI files.

However, since the data files are otherwise indistinguishable, we also need
to be able to detect multiple versions and let the user to the
disambiguation. I've added that functionality in the simplest way I could
think of, in case we want to revert it later.

svn-id: r18565
"
"1a8f4ae3be659b0c66072e6d657ef0fd69c66312","2005-07-19 21:27:25+00:00","The Linux release had patch files too, but I don't have that CD here so I
can't verify whether or not I got them right. I think they were the same as
the Mac version.

svn-id: r18566
"
"d58e0180044a5895a062b6272dd9e7bdc2a124f8","2005-07-19 21:34:46+00:00","Play the correct digital music. (And removed some unnecessary blank lines.)

svn-id: r18567
"
"8cf83e3435ca6a63b65c0eee627805be517b2c86","2005-07-19 21:48:59+00:00","Fixed crash when quitting.

svn-id: r18568
"
"7180c24b4efc2c1840d95aa30d6909bec5cb2f95","2005-07-20 16:38:57+00:00","Nope, I was mistaken. The Linux patch files are almost - but not quite -
like the Windows ones.

svn-id: r18569
"
"2084718180cbfb1821419e1c1c8d47e1ae77226f","2005-07-20 19:34:47+00:00","ite mac demo patch files correction

svn-id: r18570
"
"e1d7e244e0a8d05f0b7fb90ae6ed87ab46a3680c","2005-07-20 20:22:38+00:00","Add demosi discovered by yesitsme. I have them, so ask me if interested.

svn-id: r18571
"
"8260c98fa8714869540cced1446ff5ff8bc00b39","2005-07-21 00:04:01+00:00","Fix case of CoreMIDI framework

svn-id: r18572
"
"6c9f6e8def8027c1413a8ca5a4db42372caf0995","2005-07-21 01:33:28+00:00","Partially implemented differences in IHNM script functions.

svn-id: r18573
"
"a641c3add768f4e6f648670f00f5f793bdbf3d34","2005-07-21 22:13:06+00:00","More IHNM differences

svn-id: r18574
"
"71436ff1dea082d54106aec6c6d51777d09fff32","2005-07-23 15:23:01+00:00","Allow multiple resource contexts of the same type. IHNM has serveral
different voice files, presumably one for each section of the game plus one
for shared voices. The getContext() function takes an optional second
parameter to indicate which of the resource files is requested.

svn-id: r18575
"
"a4773084a58d5e06e6a45a99558d7853e98ff52a","2005-07-23 15:47:49+00:00","add missing break

svn-id: r18576
"
"4f9dc0d5152d5c6881ce1f735689ce8bef3fd71f","2005-07-23 15:48:54+00:00","typo

svn-id: r18577
"
"1a5c8cd3dab869d90d96da67c6befd3acd3689dd","2005-07-23 16:11:20+00:00","In lost/smaller, spriteGroups bounds set by Sprite::setGroupBounds() aren't always valid rects, add a check for this.

svn-id: r18578
"
"fbc04b1ac7c699473195218e939614ec36a2ab8f","2005-07-24 13:41:49+00:00","assign sf94 name

svn-id: r18579
"
"830cc9c9b8e35539360bdbe706a500841bf8a5cd","2005-07-24 17:04:15+00:00","Fixed regression that broke IHNM intro animation.

svn-id: r18580
"
"f773d76c5452502a1b9ed4aaa3eaee4d09d6fc43","2005-07-24 17:07:16+00:00","Removed 'const' to silence GCC warning. I don't know if GCC was right or
wrong to warn, but it annoyed me.

svn-id: r18581
"
"e8c1f6d1f1d89f350e570cb519202f2a866d7819","2005-07-25 02:38:43+00:00","More IHNM differences

svn-id: r18582
"
"545ce7e00419be3073254eea9bdb20188308ac54","2005-07-25 16:22:32+00:00","implemented unified animation decoder for ITE & IHNM

svn-id: r18583
"
"e175e68b992ac355fe2bcaa1eededc1361f11ffc","2005-07-25 17:35:35+00:00","resolve scene resources without shift hack

svn-id: r18584
"
"c4f0d024ef22dc760c4ec29eee1f50de523414aa","2005-07-26 19:40:58+00:00","fixed sound in many variation
some version should be tested

svn-id: r18585
"
"502ae03b6a10b39032e2048c08bd15e749940f1f","2005-07-28 13:52:46+00:00","o Update documentation on ITE and Gob1.
o Fix line endings in 07_06.tex

svn-id: r18586
"
"9408ce9b3f433c26d26611a33d704ae6f3bad90a","2005-07-28 14:23:39+00:00","Some spelling and grammar improvements (I hope - I'm no linguist!)

svn-id: r18587
"
"2d0f26d4ee74fdb4670c4228dd4e971b6de018c6","2005-07-29 16:34:42+00:00","Simple ILBM images reader.

svn-id: r18588
"
"1a1db4611a7e262fe5f48e19fd4d40858619efaf","2005-07-29 16:37:06+00:00","Show scene substitute image for demo versions of ITE.

svn-id: r18589
"
"922c5e29a04ec80b4f34a11e755568a8677264a0","2005-07-29 16:50:09+00:00","fix chunk size

svn-id: r18590
"
"defae9e76ae2a38e0dc98c5a75233707be964654","2005-07-29 17:26:47+00:00","Render substitute scene title and description.

svn-id: r18591
"
"c2882ce681dbbfd3ee13277b1f1faf928cc62151","2005-07-29 17:37:55+00:00","Fixe screen position of scene substitute text

svn-id: r18592
"
"2efc7edb1a2791bf607775d118e331fd4bf161e0","2005-07-29 17:42:33+00:00","fix setStatusText

svn-id: r18593
"
"618572ff13f3392568793443a7fc11f5248021c7","2005-07-29 17:45:36+00:00","Fix compilation

svn-id: r18594
"
"ec4f7d3d7c0ba9292d268195cd64c2de26b73220","2005-07-29 17:58:00+00:00","Whitespaces

svn-id: r18595
"
"e85519624d561dbed8c23518c463f23f8443f2d5","2005-07-29 18:00:40+00:00","Fix status text color in scene substitute

svn-id: r18596
"
"208815a811044be91d9488f41957dd28330ca430","2005-07-29 18:29:23+00:00","Restrict scene substitutes only to demos which actually use them

svn-id: r18597
"
"e5cd51ecd15d4db8cebda3a4904bd33747101ffb","2005-07-29 19:44:25+00:00","Preliminary support for original MAC CD ITE

svn-id: r18598
"
"03d7c4ba39b04ecc608e0eb0837d70d1913ea0c2","2005-07-30 05:51:28+00:00","Fix regression (Bug #1235863), limit code change to HE70+ games.

svn-id: r18599
"
"2cdb00d0a203055b4576c59c63a84b176e9d6860","2005-07-30 05:58:48+00:00","Add He70 version of function instead.

svn-id: r18600
"
"ba107e37995cc03a922c2196d72e85d7cef088ba","2005-07-30 14:37:06+00:00","Tentatively changed the IHNM start scene from 152 to 151. I suspect scene
151 is supposed to play the 'hate' speech, so eventually that wouldn't have
to be hard-coded in the intro, but at the moment all it does it to switch
to scene 152. I'd have to study the scripts closer to figure out what's
missing.

So, to summarize, there are no user-visible changes to the intro but we may
have a better test case for IHNM scripting. Maybe.

svn-id: r18601
"
"372a483ceba36eb21453e83d8dfd9303c706da99","2005-07-30 14:41:25+00:00","Thread-related IHNM differences.

svn-id: r18602
"
"86ab70b149e5cd00cf54f2e41896e2c4e16795e4","2005-07-30 17:28:58+00:00","added Patch.re_ support

svn-id: r18603
"
"6b4484472b79dc7ea7d1ce545a28fba7d3b7696f","2005-07-30 21:11:48+00:00","Remove trailing whitespaces.

svn-id: r18604
"
"7ae74f3177c2e8d77ae38bea42ef91abc8bb5dc1","2005-07-31 12:03:03+00:00","added scen resource types dump at debuglevel==10

svn-id: r18605
"
"f69544ebd282e025d9e2bfabdc7419bf09bcc23f","2005-07-31 16:38:15+00:00","Prevent infinite loop in executeThreads() for IHNM. I don't know if this is
the correct behaviour, but surely it's less evil now?

svn-id: r18606
"
"c13aed09fc13051fa7e24025353b33cd18dc45b4","2005-07-31 16:51:14+00:00","Fixed warnings.

svn-id: r18607
"
"80d1ef4510e6098540d83491be5d53121f4b6005","2005-08-04 10:19:52+00:00","Add Big Thinkers 1st Grade

svn-id: r18608
"
"41ff67ac1d4888ce41815d200cd7ed6cac0d104d","2005-08-04 10:23:49+00:00","macBinary resource support

svn-id: r18609
"
"ef473bd613bf8a6841aab48a24448c6bf53cf1b5","2005-08-04 10:29:29+00:00","Fix compilation

svn-id: r18610
"
"f63bbb10063913ddd0319689c49f1724fe9cf7ca","2005-08-04 10:48:54+00:00","Simulate bootparams.

svn-id: r18611
"
"276c413a15327ecaac826bcb328ca46e087d480b","2005-08-04 10:50:42+00:00","Few minor IHNM fixes.

svn-id: r18612
"
"65903875bbbabe67475ad29d25fbb8dcf03b99a6","2005-08-04 12:11:57+00:00","Remove support of dumped data forks for old ITE Mac CD. Now it requires
files to be in macbinary format.

svn-id: r18613
"
"435f077c76ade4a56f46124324dae532c68d7645","2005-08-04 12:30:05+00:00","Old Mac OS9 ITE is supported now.

svn-id: r18614
"
"5fb85d659c4d09f1274fe94c27ebfe94d6a036b3","2005-08-04 12:58:09+00:00","Update HE games

svn-id: r18615
"
"b4bd032f544290c7257244df31e3b326519e7b29","2005-08-04 14:49:04+00:00","fixed DUMMY resource in old mac cd
fixed intro voice at endscene

svn-id: r18616
"
"771373bfb92268ea90d2e0aa3760b800eb069f8b","2005-08-05 01:08:00+00:00","Update unsupported versions

svn-id: r18617
"
"005843e55bf7dc8b326d802e75e0caa35816f0de","2005-08-05 23:14:11+00:00","o Some cleanup
o Fix warnings
o Implemented IHNM changeChapter()
o WIP for metaResources

svn-id: r18618
"
"5b4ecd206d0012fcf96e3df4eceafb69609ce3b3","2005-08-06 12:20:10+00:00","changeChapter -> changeScene with chapter

svn-id: r18619
"
"6886f7865ca1f440612a7e04c64f2c23ff309af8","2005-08-06 14:26:59+00:00","o Fix uint -> int with scene numbers
o WIP for metaResources

svn-id: r18620
"
"510c6f9595d88b6a768828645833607a2fdcaf07","2005-08-06 14:34:40+00:00","Cleanup.

svn-id: r18621
"
"c950bd8231f1642ff4542b13cb2880aaa88795bb","2005-08-06 16:05:13+00:00","Fixes for metaResources loading

svn-id: r18622
"
"5956747e2e9d38defe5684a67992dfc6dba58cf4","2005-08-06 18:28:43+00:00","ihnm actors list WIP

svn-id: r18623
"
"215a94ae30082e396ab6179e26ab6e182602f8a7","2005-08-07 00:00:43+00:00","WIP on metaResources. Most resources are load. Now we start correct
scene. But there are following problems:

o Inclomplete support for actors speech, so opSpeak is skipped
o For some weird reason actors do not appear at all. Actually code seems to
be trying to read only protagonist frames
o It crashes on reading sprites due to wrong input

svn-id: r18624
"
"d3b229b0517440017e7793197921f2086cf83f3b","2005-08-07 11:20:43+00:00","loadList -> loadActorList
some checkups

svn-id: r18625
"
"df1076b97adb07333a66840dbe887864d6dc473c","2005-08-07 14:54:11+00:00","Fix bug #1252289 'ITE: Crash with 'paws game''. And now game pauze is
mapped to key 'z'.

svn-id: r18626
"
"2990d46ac97ffdef0117993325385acd19d2ba4c","2005-08-07 18:57:30+00:00","Consistent formatting of hexadecimal numbers.

svn-id: r18627
"
"42f5d48376221b4db5a9f504c02a3a5ef3db6c05","2005-08-07 21:04:34+00:00","added md5 for french dott demo

svn-id: r18628
"
"9480f69d8b12e1d3b85393501e8f4eaf038cd6a9","2005-08-08 06:47:56+00:00","check IHNM skiped data (loadActorList&loadObjList)

svn-id: r18629
"
"ad00923ad586651359160b36d9b06aafb41d3853","2005-08-08 07:44:49+00:00","udpdate

svn-id: r18630
"
"c5bdada0798e11855f798555fd39ca8d76e522da","2005-08-08 07:44:51+00:00","Fix bug #1252270 'ITE: Verb box drawn incorrectly'

svn-id: r18631
"
"1317843a5bdda0682976b7c1198f66d1b1e8ea32","2005-08-08 07:52:18+00:00","Fix warning

svn-id: r18632
"
"4ffa61cb42ba2e26aacbeb0e74fe5e760a13fa0b","2005-08-08 08:15:16+00:00","Partially fix bug #1253079 'ITE: Several errors in the 'rocky chasm' scene'.
Argh! why _several_ errors and not one by one?

svn-id: r18633
"
"e24bfbd2048219d987481b41230846cf4eb2a1a1","2005-08-08 10:59:21+00:00","fix compilation with emsvc4

svn-id: r18634
"
"b22caf6fdc865fc00c263cded7e66838e2923c8e","2005-08-08 12:13:38+00:00","Fix (partially) actors and object loading in IHNM.

svn-id: r18635
"
"753ff5a92673c1eb714bc74b3b825b50b3c96a43","2005-08-08 12:58:56+00:00","added replacement code for hypot()

svn-id: r18636
"
"ccfedf06540fd9b0aa91a7f949dd563ab9b4c2ad","2005-08-08 19:40:55+00:00","Fix bug #1252277 'ITE: Actions not performed under OS X'

svn-id: r18637
"
"aebd226028631bed2387f907fe5683d4b2963d83","2005-08-08 19:46:33+00:00","oops. debug output slipped in.

svn-id: r18638
"
"e64afc23b4199952ce77de16f94bf30f54fd6c57","2005-08-08 20:20:00+00:00","Cleanups. Mostly removal of seemingly unused variables and stuff.

svn-id: r18639
"
"c6c5c8f868c0c0ea37ddef156b8581d304ad5cac","2005-08-09 16:01:04+00:00","o Fix some game parameters for IHNM
o Load voices LUT for IHNM

svn-id: r18640
"
"3c1b5648aed0be45b303cea49e7537c98dd4a001","2005-08-10 06:16:26+00:00","Rest of the changes required for tremor to actually work.

Based on patches against 0.7.1 by Jolan Luff.

svn-id: r18641
"
"603a5e4d6f7403d3d797ead4b4cc909ab55c34d1","2005-08-10 12:42:56+00:00","Don't explicity check for tremor and vorbis everywhere and
require both USE_TREMOR and USE_VORBIS to be defined when
using tremor.

svn-id: r18642
"
"67b4b2c0d44b5b84cb1912b9e2c906fc59e97d2c","2005-08-10 13:56:51+00:00","Implement part of chapter selection panel.

svn-id: r18643
"
"00d676c3d226d3d4430d7faf294138de895f39d4","2005-08-10 14:11:22+00:00","EVENT -> Event

svn-id: r18644
"
"37f2a10ef6b16320876a1339c3a46c2b74953d75","2005-08-10 14:53:17+00:00","Rename Actor class members to _members.

svn-id: r18645
"
"a64f09906fd7b94ba486660590073d9a4556fcb9","2005-08-10 15:01:23+00:00","Reanme more minor struct to comply with our naiming standards.

svn-id: r18646
"
"4e4c1f5b73eeaf30435e079a8ff4a5915496a9bd","2005-08-10 15:31:15+00:00","Rename event types to comply with our standards.

svn-id: r18647
"
"5f1da785363c2cd313907e4abeed642c6dce4eaf","2005-08-10 15:42:08+00:00","Added Goblins item.

svn-id: r18648
"
"c3f3d9f3f2b3e1ddf9804276cf57a9e009011c02","2005-08-10 15:48:50+00:00","Made Gobliiins less of a CPU hog by adding some strategic delays and
turning on the screen auto-dirtying - some as Simon uses. It's not perfect
by any means, but it may be good enough for 0.8.0 at least.

svn-id: r18649
"
"f7f1779842224fbbf766755c095d263a5ed29bd9","2005-08-10 16:02:19+00:00","Moved Goblins item to the Wiki.

svn-id: r18650
"
"da25b8fd4f57ced126aba681501c8b3356173da7","2005-08-10 17:39:29+00:00","Improved debug output on stub script functions.
Impelmented sfSetSpeechBox, though it is not yet functional.

svn-id: r18651
"
"3e7feb5cb176d3c4504317f8d342b0d0c6629df7","2005-08-10 18:27:18+00:00","fixed iso convertion Rif position
add some IHNM panels

svn-id: r18652
"
"42d4032b5991b5b152931c86d80f73423418a8c4","2005-08-10 18:30:55+00:00","committed patch #1255847, thanks Simon Sawatzki.

svn-id: r18653
"
"0af7371717f59199e2956d6643187de98235bede","2005-08-10 19:12:10+00:00","More IHNM fixes. Now it tries to start Ellen part but crashes at invalid
opcode because it tries to execute string data.

svn-id: r18654
"
"d1a376ad279d2f64bb9029b1f429a807d8c9cdeb","2005-08-10 22:13:55+00:00","clip the 'top' argument in Gdi::resetBackground (as we do for bottom), this is safer and should prevent crashes when loading savegames with 'invalid' coordinates for the actors. See also bug #1252714.

svn-id: r18655
"
"2230d4b0376cc3ee7015a02ad7b60680388be50f","2005-08-11 14:00:26+00:00","More debug output for IHNM

svn-id: r18656
"
"45ca2e66ea53a3b7bcb27b487f817222e237cf65","2005-08-11 14:03:10+00:00","Fix bug #1256704 'ITE: Wrong text display in German version'

svn-id: r18657
"
"3d4fe0470e663bb966842d06c424f7e46d25947f","2005-08-11 15:04:12+00:00","Fix bug #1256701 'ITE: Crashes during conversations'

svn-id: r18658
"
"801bb09bb5d4d5e0b94cc175ad28b34fb66edd2c","2005-08-11 15:28:08+00:00","Translate excuse messages and make them work on floppy versions. Earlier
it just crashed there.

svn-id: r18659
"
"2478c430deb91cf29b47afefd2c73a0af6f45557","2005-08-11 16:13:10+00:00","Fix bugs #1256398 'ITE: Clicking doesn't skip dialogue'

svn-id: r18660
"
"d3eacaf9bee182eea1104d76916b5d86964ea545","2005-08-11 18:07:01+00:00","get rid of an old hack for the 'u circonflex' letter in the french version

svn-id: r18661
"
"91ad888d7c885ee6240f5a3f606f557aa8ee9b6b","2005-08-11 18:07:47+00:00","minor cleanup

svn-id: r18662
"
"ea658702b5a11dfc77373594e5ce7579452b373d","2005-08-11 18:08:55+00:00","get rid of game_thread_proc

svn-id: r18663
"
"0cecdec74c1d7da6cc472e69757124b834c1ef69","2005-08-11 18:09:47+00:00","rename some actor struct fields

svn-id: r18664
"
"c1591bebc48b770c8d298adb5918bb7377083f11","2005-08-11 19:11:15+00:00","Fix bug #1256368 'ITE: Black pixels drawn as white at sanctuary gate'

svn-id: r18665
"
"1c57342cc8244b19819ee4e8e446f2eee2d9d16c","2005-08-11 21:37:04+00:00","Clarify message about unknown MD5 and don't make false alarms.

svn-id: r18666
"
"828bcebd41170586c485242c3b711896dcfb87a6","2005-08-11 21:39:05+00:00","Fix bug #1257016 'ITE: crashes in dogs castle labyrinth'

svn-id: r18667
"
"31915362f1abcdbde2f13ebe51b6f9401afc17dc","2005-08-11 22:00:32+00:00","Fix bug #1257033 'ITE: Map music briefly plays when loading game at sanctuary'

svn-id: r18668
"
"c4758fd5872362f805cd56e18341861b9f29e89b","2005-08-12 10:55:17+00:00","Fix bug #1257309 'ITE: Invalid read during startup'

svn-id: r18669
"
"42cd4a95acc591626c0c555bcaabe440276b8078","2005-08-12 18:07:41+00:00","updated PalmOS source files for the 'u circonflex' thing I committed yesterday

svn-id: r18670
"
"1ed8d450f02730156f0db2d33a6f870916863513","2005-08-12 19:43:39+00:00","Fix bug #1257459 'ITE: Game crashes at airport'

svn-id: r18671
"
"644209261691f8850d0c8f8cd7d6c941c5ec0cb6","2005-08-12 20:06:41+00:00","Fix bug #1257530 'ITE: Mouse pointer visible during cutscenes'

svn-id: r18672
"
"8242e3e2bce9b6570854826af2b1d491cad8c3e4","2005-08-13 01:05:59+00:00","Fixe bug #1257869 'ITE: Crash when viewing the map'

svn-id: r18673
"
"45047c5cdbab69d2e055738ca4b2bdab9e963c59","2005-08-13 01:35:52+00:00","Fix bug #1257542 'ITE: Sounds do not stop after quitting scene'. Though
There is a big problem in sound code. It is written with only one SFX and
only one Voice playing at the same time in mind which is not the case. This
should be rewritten so there are more than 2 sound handles.

svn-id: r18674
"
"c2d755e1606dbdb674f39481a25c3d9256341be3","2005-08-13 16:27:47+00:00","fix bug #1254000 ITE: Actors duplicated at chasm scene

svn-id: r18675
"
"91a96ef5cdd9c71d4434768d87d0a46c34e6d33c","2005-08-13 19:09:19+00:00","Make IHNM demo go little further (still crashes at initialization). Add
spanish version of IHNM.

svn-id: r18676
"
"8c4494578e8273841473934facb68e6476ee16ac","2005-08-13 19:41:11+00:00","Fix bug #1258537 'ITE: Introduction text is black'

svn-id: r18677
"
"292c9d63d6399c6f3c301f059badb40e0affa49b","2005-08-14 00:41:10+00:00","Fix regression in fbpack

svn-id: r18678
"
"10dcc5cc1d2f410c2cea1c2c0455d71fe2022b70","2005-08-14 00:49:07+00:00","Add a few more HE games.

svn-id: r18679
"
"3a86eb8d2e90999f5e646d94d39e427a04bebe96","2005-08-14 01:06:47+00:00","Remove leftover.

svn-id: r18680
"
"a820400f8c134a9119b5a2c5b68d614345322f45","2005-08-14 01:41:52+00:00","Replace warnings with debug, errors or printfs:
-To catch any missing cases/functions used.
-To prevent users reporting warnings as bugs

svn-id: r18681
"
"18febcb94d9312d9c025e647168364e4ed9ff53a","2005-08-14 02:04:26+00:00","Replace warnings with debug, errors or printfs:
-To catch any missing cases/functions used.
-To prevent users reporting warnings as bugs

svn-id: r18682
"
"8bd14c733785c32dca2fdb96f0a68a86f13a03d3","2005-08-14 13:44:20+00:00","Fixed new plugin search code to work with Dreamcast:

* Code does case-sensitive comparison with PLUGIN_SUFFIX, so put it in
uppercase (as filenames in ISO9660 are required to be uppercase).

* There is an assert somewhere which prevents the use of '' as a
directory.  Use '/' instead...

svn-id: r18683
"
"a1e4dd13903145fd9db5100ab654bb5ca298b12c","2005-08-14 14:46:42+00:00","Force a single PHDR.

svn-id: r18684
"
"72ed016ea2a80fffeb170b9b9d01e512fbc531b9","2005-08-14 15:51:41+00:00","Run the detectors on one directory at a time, rather than one file at a time.

svn-id: r18685
"
"251e158e2b7f8f76916381472773b8588e4752c8","2005-08-14 20:42:06+00:00","Remove an obsolete TODO; use stronger wording to tell people they should *ask* us before implementing something (native speakers, feel free to correct my english :-)

svn-id: r18686
"
"5cca832a8520139daa2fad5c5ec2efc5d713832a","2005-08-14 20:46:02+00:00","If I understand cyx correctly, this is the proper fix for bug #1253171,
even though I thought it looked a bit hackish when I proposed it.

svn-id: r18687
"
"7aa7430c41736a5c1f80deca83253aa360181f76","2005-08-15 01:01:52+00:00","Fix bug #1258479 'ITE: Graphical glitches in wildcat tribe'

svn-id: r18688
"
"76bd872c48d10aae4924bcd8a8d30adf22440574","2005-08-15 01:23:41+00:00","Apply bug/patch #1258912 'GUI: SDL mouse dirty rects too big'

svn-id: r18689
"
"4d46b37b6913e7c994a2495b52ede725779ca8c8","2005-08-15 13:30:37+00:00","Switch to debug, since an actor name isn't always set.
ie actor 14 in The Dig

svn-id: r18690
"
"6cdfdd2fa1d801a9bc4ceaa5d1c999462b2a557d","2005-08-15 15:37:17+00:00","Fixed long-standing bug with sound decompression that would cause a slight
pop at the end of some sounds because it was trying to decode one sample
too many.

svn-id: r18691
"
"5f9c4efbd9fa537ba24b66272186750f9254ba9e","2005-08-15 15:46:53+00:00","Added note about fixing the off-by-one bug in BS2 sound, because people may
want to re-compress their sound files.

svn-id: r18692
"
"1b9b4de9ce2bcfdb1889082ac54d39a775b77f6a","2005-08-15 15:53:47+00:00","Fixed warning.

svn-id: r18693
"
"0db33e8dfd7ef139e23d4a6179baeb1fc2613ce8","2005-08-15 23:26:50+00:00","Fix prince room sound inconsistencies mentioned in bugreport #1258501

svn-id: r18694
"
"8cbdf0e6295fd31b2a355fdb4c7bdc84176c1b48","2005-08-16 13:13:27+00:00","o Fix crashes on puzzle with floppy (speechless) versions
o Now hints get correct voices.

svn-id: r18695
"
"bc394b6ea3468b5d84294f1dfc9ad23e87333281","2005-08-16 17:15:37+00:00","Added: PSP backend

svn-id: r18696
"
"b36205c875e1f089b439d8dbd53a8dfb8dfb521d","2005-08-16 17:47:37+00:00","fix typo

svn-id: r18697
"
"968e73a93abf068e177f31c3612cbfd2fe28ff76","2005-08-16 17:59:49+00:00","fix 1258781 & 1253993 bugs
(difficulties of leaving scenes)

svn-id: r18698
"
"f2c542547d32d2685e070f2b31e8774dde9cdb91","2005-08-16 19:04:51+00:00","Fix bug #1256381 'ITE: Options menu contains wrong item' and gave symbolic
names to text Ids.

svn-id: r18699
"
"ce7eb15255f8c1391b048d2f1a391ad79de7457c","2005-08-17 10:19:39+00:00","fix copy/paste-o

svn-id: r18700
"
"dbd7fdd46bca56e9f77cfb689e6bb193fd9c6c3e","2005-08-17 20:29:21+00:00","Made the path buttons extra wide so that the text is not truncated in the
smaller version of the GUI.

svn-id: r18701
"
"990ad8f210aa349f24fdf9718795e9b169fb86f5","2005-08-18 15:21:58+00:00","I forgot there were path buttons in this file. They, too, need to be wider
to avoid truncating the text in the smaller version of the GUI.

svn-id: r18702
"
"ed2a18569a68d5be78d5a893d66979eef9fe06cd","2005-08-19 17:27:47+00:00","Detect when plugins directory is missing

svn-id: r18703
"
"24265fd3dd1681835f63e3c901158adef1ec5bc5","2005-08-19 22:12:09+00:00","some WIP code to start introduction (with glitches) in Kyrandia 1 :
- the decoders have been rewritten due to crashes I encountered with the previous ones in Compression::
- the wsa code loader for v1 have been rewritten too, to handle the same flags as the original
- some cleanup
- this has only been tested with the floppy version

svn-id: r18704
"
"b0d1fd747f267bc3a1cb08997f1283e17628b0ac","2005-08-19 22:23:13+00:00","correction in setTextColor()

svn-id: r18705
"
"e086ecec676ea686d0f739084ace4d194d70ef24","2005-08-19 22:36:08+00:00","constness

svn-id: r18706
"
"8b31ef5dc4aca7668d389ba4ed72f1828b3bf9aa","2005-08-19 22:36:49+00:00","typo

svn-id: r18707
"
"7d834de666ba1c58d5baad870f4b29676b2ef13b","2005-08-22 15:39:07+00:00","Fixed two cases where a bad pointer would be freed, causing ScummVM to
crash on my Debian box.

svn-id: r18708
"
"f14948eec0426f144521a583b86bb5a7cca31297","2005-08-22 17:25:03+00:00","Applied my patch #1263153 to work around bug #1243280. It's not an ideal
solution, but should be good enough for 0.8.0 at least.

svn-id: r18709
"
"3140dbebc4d02f163f8fab26f11797d98c167b61","2005-08-24 16:10:09+00:00","The dialog windows now react to 'Enter' and 'Escape' in what I hope is a
sensible way. This is an extension of feature request #1265893.

svn-id: r18710
"
"41e9aa2f2c84704712abb64f8ad2110e0eab25fe","2005-08-25 15:33:38+00:00","Added keyboard repeating.

svn-id: r18711
"
"d8a96c30321c6a615689ed5137b3a26161e2d154","2005-08-26 12:07:31+00:00","Allowed IHNM to use the opSpeak opcode. Aborting that code path early meant
that the instruction wasn't fully read, so the next opcode would be wrong.
This is what caused it to crash.

To keep the game from hanging, I also allowed the engine to call the
_actors->direct() function for IHNM. This allows AM's intro speech to be
played in its entirety.

Since this includes the 'hate' speech, I've removed that part from the
hard-coded intro. To get the right music playing, I've enabled the
sfPlayMusic() function for IHNM. This is pure guesswork, though. Once the
scene changes, the wrong music plays again. However, this is scene music,
i.e. not scripted.

It doesn't play the background sound. Looks like _fxTable[] isn't generated
for IHNM. More noticeably, until the scene changes it doesn't show any
graphics apart from the subtitles, which are drawn in the wrong colour and
(I believe) the wrong font.

svn-id: r18712
"
"2174c6f49c042a2dc33c015089444651ec843ef0","2005-08-26 12:50:54+00:00","Implement looping sounds. This should fix bug #1273741, hopefully without
causing any problems. (I assume either the game scripts or the engine will
make sure that looped sounds are stopped.)

svn-id: r18713
"
"7556e064d2752a12ddbe189340a1ef081b348ee7","2005-08-28 11:15:38+00:00","mingw can handle heap checking now.

NOTE: Requires mingw-runtime-3.8

svn-id: r18714
"
"94fcb89549c02009c90bb5250b2e5b59ad085496","2005-08-28 12:19:36+00:00","Fix compile error.

svn-id: r18715
"
"43fc9012847e2a94e16392737b8cebf2e1fd1f18","2005-08-30 08:54:33+00:00","Fix compilation.

svn-id: r18716
"
"349ab2007a23844a6e2b34d07775ebdd2b7c7158","2005-08-30 11:16:11+00:00","Implement sfPlayMusic for IHNM

svn-id: r18717
"
"ea4d3fcca16e6e4e624542d42a48100f11052ba2","2005-08-30 12:13:09+00:00","Downgraded warning() to debug(1, ...) since it was drowning out all other
messages.

svn-id: r18718
"
"df7f81c9055328adf5ed69b9e6786ff3593caba4","2005-08-30 12:25:15+00:00","The intro asks to play song number 0. I'm almost sure that the music that
is supposed to play at this point has resource number 32. _songTable[0]
contains the value 32 at this point, so song 0 is probably a valid music
request, and not a request to stop the music.

At the other end of the list, I believe the song number has to be *less*
than _songTableLen, not less or equal to it.

But feel free to revert this change if I'm messing things up.

svn-id: r18719
"
"e93fa9ffafe6084b58001bf3b4ca20cc3af61dea","2005-08-30 12:29:37+00:00","Add German version of pajama2.

svn-id: r18720
"
"d9656ec3555683b7e699386b57c8ef4beb2df485","2005-08-30 12:30:11+00:00","Fix regression in Amiga version of simon2.

svn-id: r18721
"
"d8c2e96938ccd8e3480da477643bd7c566f4d7a4","2005-08-30 14:08:16+00:00","Correct path to psptoolchain.

svn-id: r18722
"
"e64b22f5bd47bffe2d9e4f1bbbd0a90b05d11ba4","2005-08-30 17:14:40+00:00","Use a quieter helicopter sound during the 'He was only a robot. Oh, I loved
the little guy.' line to keep it from being drowned out. I don't know what
the original did, but one of my old patches (pre-0.5.0, I think) messed
around here, so I may have broken it then. Or not. Anyway, this sounds
better to me.

svn-id: r18723
"
"288759abd26e5b6bb93429e331791ebeead668ab","2005-08-31 20:14:20+00:00","some WIP code, add drawShape()

svn-id: r18724
"
"149d8c835e7a8178bf08956c72bc0157bfcf94b2","2005-08-31 20:26:44+00:00","get rid of the GF_DEFAULT_TO_1X_SCALER hack for _heversion >= 71

svn-id: r18725
"
"e710a5e6b37b58b81f86ec2500f7d7f873bfc0b4","2005-08-31 20:39:52+00:00","add fillWizPixel()

svn-id: r18726
"
"efae5f30ea94f255e755bf0802cc88c97501d0b9","2005-08-31 20:54:51+00:00","cleanup

svn-id: r18727
"
"a33603e0ebab1966395f440dbd98e11b82be6e51","2005-09-02 01:41:53+00:00","Match original games, only the music file is essential in COMI.

svn-id: r18728
"
"636dd6e6d6d27227067f3787148e725f9d091da4","2005-09-02 08:51:58+00:00","Add debuggins method. Whitespace fixes.

svn-id: r18729
"
"6f7f7391b2cb1b6c62baeb5d392d761265508bb8","2005-09-02 08:52:37+00:00","Fix bug #1257110 'ITE: Subtitles get striped'

svn-id: r18730
"
"e2d0352069fc9f38aa8412332dc06e23245fc0e0","2005-09-02 10:49:21+00:00","workaround bug #1223621

svn-id: r18731
"
"b1167c6275aff8a25c59a68e90441dcec6891260","2005-09-02 10:58:21+00:00","removed unneeded includes

svn-id: r18732
"
"443cf756be85cce937c92b5051fe13b6a2ef189d","2005-09-02 11:12:09+00:00","added special sequence opcode 8

svn-id: r18733
"
"14ac8d9d215dc3edbb4ca2084787a9281da355fd","2005-09-02 11:24:16+00:00","cleanup

svn-id: r18734
"
"8192fcf9d923bbe2d695875cda297be7b8f7a9e4","2005-09-02 11:47:47+00:00","Fixed potential memory error on system that can't return a pointer of 0 byte

svn-id: r18735
"
"35bd5fa824d8c1dba93454f5f9fb49e38c3c93d9","2005-09-02 16:53:21+00:00","Clarify that currently, only the first of the Goblins games is supported.

svn-id: r18736
"
"a861226f203b9cdff448a3cd5642d776837fed7c","2005-09-02 18:35:01+00:00","fix shape loading for cdrom version

svn-id: r18737
"
"c8a2de6e6edb3e21ede70e44a9c39cc0c00a63a6","2005-09-02 20:17:52+00:00","Implement option buttons functionality. This fixes bug #1259518 'ITE: Buttons
in Options Dialog not fully functional'

svn-id: r18738
"
"720961565aa33b478b2593521207d8f416271ffd","2005-09-02 20:52:14+00:00","Fix bug #1258489 'ITE: Rif's tail remains in door at Alamma's house'

svn-id: r18739
"
"cd5502916ad6ec7990b906e1dc22c07e17309691","2005-09-03 07:56:42+00:00","o Fix bug #1258633 'ITE: Second Rif appears in wall of dog castle prison'
o Added debug output method to Location structure
o Fixed long-standing bug with save version being saved not in constant
endianness

svn-id: r18740
"
"d8ab18ebb4fb249a181a66676281e63714fb8de7","2005-09-03 10:35:34+00:00","Fix bug #1281055 'ITE: Graphical glitch when pressing escape at company logo'

svn-id: r18741
"
"e0e93168c38787a1aefc3d1f3e9bc49f07147e8e","2005-09-03 14:49:43+00:00","fix 1257536 Dragon walks in the air
some memory allocation minimization

svn-id: r18742
"
"f7fb3bf7a8cb0dd5c4c892d1c911e3a1fe9996fa","2005-09-03 16:05:28+00:00","Change PalmOS ident

svn-id: r18743
"
"09b0f765d4a3b4d726d440182fb4e7fdcb5d805f","2005-09-03 16:08:27+00:00","Change PalmOS ident and fix ARM bug using global initializers

svn-id: r18744
"
"1dc00deb561e7eaf8654924fa4698cd9faed8405","2005-09-03 16:10:08+00:00","Fixed compilation

svn-id: r18745
"
"c6c22db6ae8302416d80ae0d3e19549f047e23b3","2005-09-03 16:12:52+00:00","Change PalmOS ident

svn-id: r18746
"
"1d6ecabfbee286f571bcc24f536039f2aa5667a3","2005-09-03 16:15:39+00:00","Prepare new backends and potential native version

svn-id: r18747
"
"be9d8951eba4320f0c33e6f87c2ffb32a4ea41b2","2005-09-03 16:24:58+00:00","Change PalmOS ident

svn-id: r18748
"
"da5ec1c1fbc6dc574a176b8812990a2a80ceaac5","2005-09-03 16:26:00+00:00","PalmOS : ARM optimized blendRect

svn-id: r18749
"
"64431064932f5e15642da1e64e7f38bced777b0d","2005-09-03 16:31:37+00:00","Change PalmOS ident

svn-id: r18750
"
"f1017c3b20fe0714f92d08a67b7251fcf1fb3809","2005-09-03 17:05:26+00:00","Added caching capability and custom disk access function

svn-id: r18752
"
"80a5644c790a0676c3e11a56106a47b0151da94a","2005-09-03 17:09:59+00:00","Fixed assert

svn-id: r18753
"
"20e088801e17fbb0b5176764cbcd6fb1f8475761","2005-09-03 17:14:41+00:00","More ARM stuffs

svn-id: r18754
"
"6b63495d5d52b9156e817b136fa80e3c42993423","2005-09-03 17:29:35+00:00","PalmOS : ARM optimization

svn-id: r18755
"
"587053118445a1ca3abf849070ab22a25ca2e467","2005-09-03 18:05:19+00:00","Change PalmOS ident

svn-id: r18756
"
"3f2286031a2e67e28a2085ee79013a78728ef40a","2005-09-03 19:59:33+00:00","Avoid putting non-ASCII chars into source files

svn-id: r18761
"
"cdc3d55be44424ff418cbc5b4b412a43096ab721","2005-09-03 20:02:49+00:00","YALE (yet another line ending). Chris, it is good to do CVS diff before
each commit as I do. This easily lets avoid such mistakes and reminds you
about your changes, debug leftovers et al.

svn-id: r18762
"
"a3da7ea7c096e86d423dc5565a10b38e026f0203","2005-09-04 01:44:14+00:00","Clip copyRectToScreen() coordinates.
Fixes bug #1281154, because FT likes to send negative values occasionally.

svn-id: r18763
"
"b0694e412085cdee19be79d684791494fcad49a2","2005-09-04 04:18:36+00:00","The Venice music should not be played in FM TOWNS versions of indy3.
Confirmed by checking original game under UNZ.

svn-id: r18764
"
"2a041601a54e0891457aef86c04a1d3a96e4c9a7","2005-09-04 12:42:19+00:00","Implement my own request #1091806 'SCUMM: Eliminate platform-specific targets'.
.ini file gets auto-upgraded and user gets a warning to console. Old targets
are still present but get converted immediately. We could remove them maybe
after 2 releases.

Also demos targets were removed as well. Probably next target is HE demos.

I tried my best to test all combinations of files, but bugs still may be
present.

svn-id: r18765
"
"10eefd2f29b4238af24681a85220a6aa55ac2aab","2005-09-04 13:04:57+00:00","Fix platforms

svn-id: r18766
"
"54737a39aa4ac0d91834e3c668b4a066357d510b","2005-09-04 13:17:51+00:00","Fix more platforms.
Fix dig demos.

svn-id: r18767
"
"78f9ad33fe08b8460f84e52cdf6ab767a0affca6","2005-09-04 13:23:48+00:00","oops.

svn-id: r18768
"
"ee8ca81c7c72ee0d7a0401e5befd43174dd93023","2005-09-04 13:52:21+00:00","Mention eliminated targets.

svn-id: r18769
"
"13e31a53281aba471d6f47c981f3378b5842409e","2005-09-04 14:51:00+00:00","Fix detection/running of those games which have different file generation in
different cases. Though it lacks file caches.

svn-id: r18770
"
"6671e36d8b2346245abc0be1ecfe9836f5457ed0","2005-09-04 15:06:17+00:00","fixed crash in Sound::openSfxFile()

svn-id: r18771
"
"7acd36b443b413d7d36520582a37b1e933d00c35","2005-09-04 15:07:09+00:00","Remove baseFilename and detectFilename from struct ScummGameSettings since
it is not needed anymore.

svn-id: r18772
"
"368785074c9eb9e9cb9f658064a2fcf453f875f5","2005-09-04 16:38:38+00:00","Prepare PalmOS ARM version : no global initializers with ARM loader o_O

svn-id: r18773
"
"4e5cc8d080adca4dafdff81706d3b008261cf2cb","2005-09-04 17:40:16+00:00","fix #1269037 Rif walks off-screen when looking at screen at desk

svn-id: r18774
"
"710c2efa51814841951cfb5a64072170a0272723","2005-09-04 23:08:04+00:00","Correct music drivers for AtariST/Macintosh versions.

svn-id: r18775
"
"b8f4f4d4f2b24b0776d37a3ceb322aaec5d8e5ff","2005-09-05 07:50:41+00:00","Filter out Version INI setting in HE games.

svn-id: r18776
"
"4589b5d3bbe23b3b2778d7e85d161ce2b83b04f5","2005-09-05 14:44:43+00:00","Partially fixed utter mess with C64 opcodes.

svn-id: r18777
"
"583cb05cb4c8c302d17d2eedb5a3ff1cbbae89bd","2005-09-06 01:20:01+00:00","Completely revisited C64 opcodes table. Matched with disassembly.
Most differences in opcodes is 16bits -> 8bits operands. Instead of
duplicating code I just overload getVarOrDirectWord() and fetchScriptWord().
Saves considerable amount of code.

At the moment reference is descumm. I.e. I modified the utility and later
fixed script_c64.cpp. So there could be mistakes, though I doublechecked it.
Best is to test it with real scripts.

Difference in opcodes is so big that I wonder how it worked so well before,
though we tried just few scripts.

svn-id: r18778
"
"69920fd6e4a04514301dd4365473b4cdefd78880","2005-09-06 01:36:27+00:00","Force subtitles to be shown in floppy version.

svn-id: r18779
"
"f6f1e109a7f731a4e10b71d1b11454008b1547c8","2005-09-06 15:38:04+00:00","Jump opcodes in C64 really use Words not bytes, so overload them.

svn-id: r18780
"
"450fb2a66ba5d442f12e1a0f030b6cb0d13690e8","2005-09-06 15:40:12+00:00","Jump opcodes in C64 really use Words not Bytes, so overload them.

svn-id: r18781
"
"3c85804c257c78d52a4fa5fa3fe893dcf42ac4d6","2005-09-06 15:50:55+00:00","oops. Commited halfway changes.

svn-id: r18782
"
"677561ab854507deef9c08d4a6c748a49a3a08af","2005-09-07 15:55:11+00:00","Add description on how to handle MM NES and C64 games.

svn-id: r18783
"
"fad0d7d4e3de063013f547583e7bb123cb7aa157","2005-09-07 16:01:11+00:00","Add C64 games.

svn-id: r18784
"
"571a1649b80011e15db114a8ca7c7fbef5576261","2005-09-07 16:07:14+00:00","Fixing wrong file formatting.

svn-id: r18785
"
"f876a0dffdd5859051393e38584e11a665a0fc4e","2005-09-07 20:09:12+00:00","Remove debug output leftover

svn-id: r18786
"
"71a1bb190a1c52e2d37a380d79fec74065056654","2005-09-08 06:23:36+00:00","Very slight re-wording.

svn-id: r18787
"
"b6a5b0acaf353992a5949e4b1abf98fe43ce768a","2005-09-08 14:08:04+00:00","Whitespace changes

svn-id: r18788
"
"b17c47f74a04865a2e88acd2585a43717ab372d4","2005-09-08 18:01:39+00:00","fix 1283705
and actor regression

svn-id: r18789
"
"53a884dc17ed6ef4b5f827629f735fa21544bbf5","2005-09-08 19:09:52+00:00","some WIP code, moved Font stuff to Screen class

svn-id: r18790
"
"69ac219dfc83765bfa30dc2eb4e4e33bc750e316","2005-09-08 19:21:27+00:00","typo

svn-id: r18791
"
"233f1fb7ef5b4bc347b3d89abe8da52304d409d8","2005-09-08 19:26:43+00:00","added missing calls to destructors in ScummEngine_v70he and ScummEngine_v90he

svn-id: r18792
"
"33ee143728a0eb0c6c73633420cc905b5137320a","2005-09-09 07:24:11+00:00","Remove pointless check, exists in all SCUMM6+.

svn-id: r18793
"
"1090c9de0d1f49b779fe3de1e650f98fe66852d1","2005-09-09 07:24:24+00:00","Fix warning

svn-id: r18794
"
"d28cb8931e3f0f684efeae102c4cc10c9aa523e3","2005-09-09 07:32:29+00:00","After saving, return to the game instead of the main control panel. This is
how the original did it (the DOS version, at least -- I couldn't get the
Windows version to install under Wine), and is part of RFE #1273746.

svn-id: r18795
"
"660b8d0eeb152e78d676b1a9e3a5645614efd912","2005-09-09 10:12:38+00:00","Use British English by default, as documented in the README file, not US
English. Since the game detector uses US English as its default language,
we also need to explicitly set the language when detecting the game. I find
that behaviour a bit unfortunate.

svn-id: r18796
"
"6f7c29fe9bca917df8af70f373851d61bc99a7c4","2005-09-09 10:22:05+00:00","Whitespace change.

svn-id: r18797
"
"d0467607ba072f355d730d75dc115c8d69d5bf9b","2005-09-09 10:40:49+00:00","Re-named variable.

svn-id: r18798
"
"732f33bd3adcc27ba6b4d3cc8266f3e612627462","2005-09-09 21:13:43+00:00","cleanup

svn-id: r18799
"
"689b89b2be74df1d48bb60184f441dba7b88f147","2005-09-10 00:15:40+00:00","fixed line breaks ; cleanup

svn-id: r18800
"
"b7e2486b6db5d9112fbc5e34bf75d0d20e42917f","2005-09-10 06:40:20+00:00","Add support for non-interactive demo version.

svn-id: r18801
"
"02792e5459e8ca3ebb501ae693832cccc11a2ca6","2005-09-10 06:48:34+00:00","Small font not used in demo.

svn-id: r18802
"
"91bee5ac5d9375dd9d17efc924b15bafb19d21a0","2005-09-10 07:46:18+00:00","renamed some vars for consistency with the demo tables

svn-id: r18803
"
"2948d6a10f5d6460e4339c3c138b9a266f04daf2","2005-09-10 20:03:53+00:00","only load the 6.fnt file for floppy version (which is unused in the introduction)

svn-id: r18804
"
"7a4ea49687b6843fb005de8163c183e6a8dd3e76","2005-09-11 12:42:49+00:00","Add reported indy4 amiga spanish.

svn-id: r18805
"
"43ec42e9e199137691ea39220be72badaa499341","2005-09-11 13:56:39+00:00","- Enable HE SCUMM games
- Create 1.00 (default) and 1.50/kxploit EBOOT.PBP
- Add eboot graphics by Chris Eskildsen, used with his permission.

svn-id: r18806
"
"ad3c2e1dbca0f7710bf78e2d1bcde8e6f7858d5a","2005-09-11 14:35:34+00:00","committed patch #1281714 'Kyra 1 Sound Patch'. Thanks LordHoto.

svn-id: r18807
"
"b6c320aaf18232e4b88fb6f97c6e992f091fc932","2005-09-11 14:51:36+00:00","russian indy3

svn-id: r18808
"
"70edff71c8dbb98621012d20efc1df19083aebea","2005-09-11 17:23:04+00:00","oops

svn-id: r18809
"
"42cc16e2cdf18d61f430f4d17c945649e0f27249","2005-09-11 20:31:17+00:00","Add reported games.

svn-id: r18810
"
"c16047815ff8d44a1011c1bda8441481223c3f6b","2005-09-12 07:01:46+00:00","Avoid integer overflow in volume parameter to playRaw(). This fixes bug
#1288081, the 'missing' sound effects in the floppy intro.

svn-id: r18811
"
"1dc83615b742d02ae40ffebe214f872ebe5c24f1","2005-09-12 10:49:52+00:00","Add logos and music in demo.

svn-id: r18812
"
"cf821fe6f87eb83eb23b71df10214cb4cbf0b465","2005-09-13 17:16:28+00:00","Fix SegaCD detection.

svn-id: r18813
"
"362200bcbee86732fb85601430e0fc6f7a98dc3d","2005-09-13 17:31:06+00:00","whitespace fixes

svn-id: r18814
"
"7ba333090957257c3284b80cd8fa1d03d2cdbc7a","2005-09-13 23:11:44+00:00","Fix for FM-TOWNS Monkey1 detection.

svn-id: r18815
"
"13b600e799c5b1f5987805bb97bafd4b1d36fed0","2005-09-14 04:18:29+00:00","Fix room object loading in C64 maniac.

svn-id: r18816
"
"b02a983c85cc3d92a70298762f695d30f22bbf0f","2005-09-14 05:31:18+00:00","Fix entry point in C64 maniac.

svn-id: r18817
"
"adeb1a6c11350ff07ebf8987001e3145959f5877","2005-09-14 08:20:37+00:00","Selection screen partly working in C64 maniac.

svn-id: r18818
"
"80fd81f275b50bc9ba39d48352052278ce60a53c","2005-09-14 09:37:17+00:00","Selection screen in C64 maniac works.

svn-id: r18819
"
"4645dcb6dd3c3460d7f83d66b6e5cf104b08f843","2005-09-14 10:35:04+00:00","Fix skipping cutscenes in C64 maniac.

svn-id: r18820
"
"40bf69230c6da7de5bd6631e5fe66eb0dfdbad1f","2005-09-14 10:36:18+00:00","Ooops

svn-id: r18821
"
"2b9bf456de24195e2c5431bcba8ee1cc992e57c2","2005-09-14 10:38:07+00:00","Only try opening SfxFile for >= v5 games.

svn-id: r18822
"
"a5b1a8a2b5ce723277e04948ebe986c11f8023a6","2005-09-14 10:49:53+00:00","Move the check for >= v5 further up the calling chain
for deciding whether we want to open an sfxfile.

svn-id: r18823
"
"cfa4ccf2e783d1cad88d97809e3596ca17069056","2005-09-14 12:11:28+00:00","ZZZZZZZZZZZZZZCCCVS: ----------------------------------------------------------------------
Skip walkbox data in C64 maniac for now.

svn-id: r18824
"
"3319834af2b84c68d26671241becea7b44ac37cb","2005-09-14 16:28:13+00:00","Add UK release of putt time.

svn-id: r18825
"
"98a910cb4234ea3350605a3d8a42ec0359719aa6","2005-09-14 16:31:02+00:00","Forgot to add path to source files. Add CVS Id.

svn-id: r18826
"
"c1ddc2736ef242ba557905842ebbc29c807d1784","2005-09-14 17:00:17+00:00","Add f4demo from UK putttime

svn-id: r18827
"
"90bcab800aab762e3bac4d7baaa2d704dc8ec8ec","2005-09-14 22:42:07+00:00","Add UK releases of HE demos.

svn-id: r18828
"
"a556889d93c5b4cf4b77c3614474afc18a7fa253","2005-09-15 10:25:23+00:00","I think this fixes bug #1291074, which is a masking glitch in Amiga v5
games. The mask pointer and maskbit weren't properly updated for the first
pixel of each new row.

Note that I do not have any of the Amiga games myself, so this fix is
based on observing what happens when forcing the PC version of MI2 to use
proc3_ami() instead of proc3().

svn-id: r18829
"
"3804d9aa018289245b30e5376d37066b5a8e1f2e","2005-09-16 13:03:59+00:00","Not actually script 18, but exit script.

svn-id: r18830
"
"76a3c5bc4dad621eb9f537ba85b5b806cf6bf005","2005-09-16 21:02:46+00:00","Add file substitutions for UK Putt Time release.

svn-id: r18831
"
"c33e15e915323c17f192ca6d87e5335ac7a8f395","2005-09-16 22:18:46+00:00","Mention ITE and Gob in about dialog. Or should I state publisher (C)
on Goblins which is Sierra Inc.?

svn-id: r18832
"
"c01148b098558ae48de85515bbb5fa89ece5513f","2005-09-16 23:45:33+00:00","Add Mac Dott demo. Though file substitutes handling needs to be extended to
make it run.

svn-id: r18833
"
"a35366276e8be05bb1a5900e3e62838033685013","2005-09-17 00:24:51+00:00","Make Mac DOTT demo runnable.

svn-id: r18834
"
"c96d229b4c5c24a6009f6f14d1df0af28b946da8","2005-09-17 00:31:51+00:00","Remoe unused variable

svn-id: r18835
"
"9d9326bb631f7b6dac870e7e6c3544b492c17f9c","2005-09-17 01:33:40+00:00","Add bundled Mac snmdemo.

svn-id: r18836
"
"d7ea4c6c7f3f4827646a8347d2c3c5c4ab515410","2005-09-17 10:27:34+00:00","correct features string when using tremor

svn-id: r18837
"
"42d01d468d6fd7325b3610688a3b103fcb25415d","2005-09-17 10:28:50+00:00","libtremor is installed to a different location when using the port from pspdev svn

svn-id: r18838
"
"17b70ae5158b09ea5467559f658098111029d9ec","2005-09-17 10:29:35+00:00","USE_VORBIS needs to be defined when using libtremor

svn-id: r18839
"
"114efafe7ddd972ccec842f6b12f48260e3aa3bd","2005-09-17 10:58:01+00:00","Cleaned up the ADPCM code

svn-id: r18840
"
"a595100900ed5f4f6954f7b58be1b10d3d23e820","2005-09-17 11:34:13+00:00","Added another font related TODO

svn-id: r18841
"
"60bf5f9e2d79e969608f7bfa85e5ed6585555603","2005-09-17 12:03:38+00:00","Add reported MI1 VGA V1.1

svn-id: r18842
"
"6a420f524eaf145c2402d38660235a1093aad547","2005-09-18 12:16:15+00:00","Add md5s of extracted MM NES.

svn-id: r18843
"
"7aa398a9d058c3dd4c5aec66f19d996f2e32fd5c","2005-09-18 14:49:54+00:00","Clarify the AudioStream::readSample requirements

svn-id: r18844
"
"3b029a37b221eef05582297259384b52d2324c72","2005-09-19 00:29:41+00:00","Switch back to using _paletteMod for the palette adjustment in 32 color Amiga games, since overflow is required for the correct palette (ie 256 should overflow to 0).

Fixes the palette regression, bug #1294513

svn-id: r18845
"
"0d3e20e4781b38e98ab05e5ee20c0b9425f01509","2005-09-19 00:35:12+00:00","Ooops

svn-id: r18846
"
"98c40b69aa3758e10da79a9fd435c506f24f7669","2005-09-19 06:49:29+00:00","Fixed bug #1294660, using aquadran's suggested solution.

svn-id: r18847
"
"cfe0b5936ba302c889dbbb495434529986b13d1d","2005-09-20 00:52:32+00:00","Implement Feature request #1286150 'Third-party translations'. Just
use target_md5=234672e54b4534ac6775 which will be used to pick up
alternative target parameters.

svn-id: r18848
"
"a0cff37f0697cd0082ca5fabac38159b265f4471","2005-09-20 18:04:26+00:00","Buggy support for ripped tracks.

svn-id: r18849
"
"aa33153569afda655b988a4c9a1efee261ca107e","2005-09-20 18:16:09+00:00","Normalize use of DISABLE_SCALERS. Now it really disables all scalers
except essential Normal1x. Also thumbnails get compiled unconditionally
so we get them on all platforms, even those which never display them.

Sorted out mess brought to sdl backend by epoc maintainer. He misused
__SYMBIAN32__ where DISABLE_SCALERS is more appropriate.

svn-id: r18850
"
"15969fa797779d31da869992f86c2d54117fe7cd","2005-09-21 10:06:56+00:00","This might allow the multi-OS version to run from CD, though I'm not sure
our game detection agrees with that at the moment.

svn-id: r18851
"
"8f8f0daf1cf29138bc10fdc2d923283a56b70bfc","2005-09-21 10:09:58+00:00","Added a GAME_SWAPENDIAN flag so that game files can be labelled as having
the opposite byte order of the rest of the files. This is needed for the
multi-OS version. (Now it crashes with a 'RAWInputStream() wrong musicInfo'
message instead, but it's still an improvement.)

svn-id: r18852
"
"5ef6aa4da145cfc6572f73f62af9a5c248ac5d3f","2005-09-21 10:25:33+00:00","Make the Linux and multi-OS versions run again. I don't know about the rest
of you, but I'm getting increasingly frustrated with the number of almost
indistinguishable, yet subtly different versions of ITE.

svn-id: r18853
"
"d18ce8e2f0bcd82cbd68e7ce5bd8f417a4360222","2005-09-21 10:44:22+00:00","Whitespace

svn-id: r18854
"
"65959dafaa518187d2da0fba9eef9d4645b7347e","2005-09-21 10:46:20+00:00","This should keep IHNM from triggering an assertion in FLAC. But I'm not
sure since I don't have FLAC installed on this computer. The looping for
standalone tracks looked a little strange, too, so I've changed it.

svn-id: r18855
"
"27334a55d7f0d2728a931b4d88af981f482dbf7d","2005-09-21 12:06:52+00:00","Marked all these structs as packed, except CollisionData, which I have
removed because it wasn't used. Does this make any difference at all on
64-bit architectures in general, and bug #1153682 in particular?

svn-id: r18856
"
"55c95e48036c509310a9f826f7ae683190406a94","2005-09-22 13:31:21+00:00","Patch #1297829 'Basic Costume Renderer for MM C64'

svn-id: r18857
"
"2ff735ff094b25423ae0ad175e63063440150cf3","2005-09-22 13:34:20+00:00","Convert old actor moving states.

svn-id: r18858
"
"2b1d4ef990c0a822da7838aa3261bbb7f48b2fba","2005-09-22 20:45:46+00:00","Fix regression caused by recent code cleanup. Each input byte should be
processed twice, so even if stream end is reached, there should be another
iteration. Otherwise it always returned one byte less than expected.

svn-id: r18859
"
"81b46b626853516983c9e336f6996c85fbd781d2","2005-09-22 22:55:01+00:00","Fix regression introduced when we split engine constructiors into
constructor itself and init() method. debug() and error() are dependent
on _debug object in many engines, so if these methods were called on early
stage, scummvm crashed.

svn-id: r18860
"
"2715805c32ddacf9d404ab17245f698c46eadd53","2005-09-22 22:57:26+00:00","Add reported MM spanish

svn-id: r18861
"
"639502d507ffa1abc0c6edc57f345540d2c7e8a7","2005-09-23 09:55:25+00:00","Fix contributor's name.

svn-id: r18862
"
"5f12ad8de5d67128474da3e9cef5745edf3da45e","2005-09-23 12:35:30+00:00","Fix subtitle display in C64 maniac.

svn-id: r18863
"
"843399b9e8ca0faa2426a683c36898c9bb37ce21","2005-09-23 13:20:10+00:00","'Inherit the Earth Voices' for Multi CD version is case sensitive.

svn-id: r18864
"
"1897e6046ba105d03c164c24b991558754db92fc","2005-09-23 14:29:26+00:00","Experimental loading of the cutaway list. Next step will be to get ScummVM
to actually *play* the cutaways. I'll look into that later.

svn-id: r18865
"
"39fcf8dc5870aa2c25a2e2fea8396526fdfe846c","2005-09-23 23:23:34+00:00","renamed some HE specific akos fields

svn-id: r18866
"
"2ad34bc57fc2e5e5335188c2b400512c42ac32dc","2005-09-24 00:27:44+00:00","fixed missing actor limbs in racedemo ; shadows are wrong now, but this seems normal as we don't load the xmap resources

svn-id: r18867
"
"82a3d88586a77b400163369a0b2dd367cf1fc62a","2005-09-24 00:32:03+00:00","Rename & update opcode in C64 maniac.

svn-id: r18868
"
"379fef7077eeeb0125f2d1f733f29e13ced10028","2005-09-24 00:44:01+00:00","Remove dummy cases for additional codecs in moonbase.
If added, they should be placed in LogicHE.

svn-id: r18869
"
"bec3467c4db664e74b147a7ef3fcb9e70236fe9f","2005-09-24 02:06:38+00:00","Remove demo specific targets for HE games.

svn-id: r18870
"
"5a62b227fbbaf585eaecd2fbe075d1eb692feb5a","2005-09-24 03:22:25+00:00","Update targets

svn-id: r18871
"
"ebfdf53b0a3e521a12ac2af85da731eaf4a27f2f","2005-09-24 03:27:59+00:00","Update targets

svn-id: r18872
"
"e077fdd9eda8a4eb455810b994deef8cc1805311","2005-09-24 05:26:12+00:00","Rename & update opcode in C64 maniac.
Remove unused SCUMM vars in C64 maniac

svn-id: r18873
"
"ee4b2ccb02bc53f3c861ac899985796ebd0ce2a0","2005-09-24 10:13:17+00:00","Some more preliminary cutaway work. The backgrounds are displayed now, but
not the animations themselves. Still, it's enough to make the IHNM intro
look fairly interesting.

svn-id: r18874
"
"25dfb36b7d4f2b9948628bde5a4c3592b3fff654","2005-09-24 10:15:17+00:00","C64 maniac handles input and verbs manually.

svn-id: r18875
"
"96e24f71f6b9424d4062e4374b34cbaf1acdf697","2005-09-24 14:28:00+00:00","A few opcode corrections for C64 maniac

svn-id: r18876
"
"ddc0c536b28ee60cebe8a35bcf17f03a0cc5c54f","2005-09-24 19:26:00+00:00","Whitespace

svn-id: r18877
"
"898ddaf04bec6b1215a0bf6db699e772883b2c2e","2005-09-24 19:29:55+00:00","The IHNM intro animations run now, albeit in a slightly buggy fashion:

The intro runs a whole series of animations. Each of these use animation
slot 0, like the original. Currently this means we leak a bit of memory for
each new animation.

More noticeably, we have no way of cancelling outstanding animation events,
so unless the animations finish on their own - as some of them do - the
events will just pile up, causing the animations to run faster and faster.

I don't know if implementing the remaining cutaway opcodes will fix this
automagically, or if we need to re-think our approach...

svn-id: r18878
"
"d795b8a71446e1bbfe1c41521f04f232e28d5c15","2005-09-25 00:08:13+00:00","Give more names to IHNM script functions.

svn-id: r18879
"
"da65bc328bdb1eedcf156dfb50295d1ce757d7a9","2005-09-25 14:41:52+00:00","Use the correct function for reading signed data. (I should have known
there was one.)

svn-id: r18880
"
"45e0baba0a6415f2e112b76a11087d7ed9d56151","2005-09-26 00:01:02+00:00","Fix regression when using MIDI in Loom demo.

svn-id: r18881
"
"e08cd039d35d8f86cd91eeb9c5ea956e30f360cf","2005-09-26 00:14:31+00:00","No MIDI support in Monkey Island 1 demos.

svn-id: r18882
"
"dbd4f0e4a1de88d644c3dd9b66085eb0f8ed9f03","2005-09-26 02:10:31+00:00","Add another Mac. version of putttime.

svn-id: r18883
"
"c5e12edfaf7615185a21c0ed6fb56fde449f07ee","2005-09-26 07:04:27+00:00","Silenced GCC warning.

svn-id: r18884
"
"3e99ea96a332037a99a3b44a5cbc028124456d1e","2005-09-26 07:22:32+00:00","Implemented some trivial IHNM opcodes. I'm not sure if the _ethicsPoints[]
array is large enough though.

These opcodes modify what I assume to be the game state, so that
information needs to be stored in the savegames. Not for ITE, though, so
savegame compatibility is not broken by this. (Not deliberately, at least.)

svn-id: r18885
"
"d18827876d91d1b72804adf335ea8deb45b46a59","2005-09-26 13:46:38+00:00","Another regression, in Mac. version of indy3.

svn-id: r18886
"
"ab3ddb787307a62095fc58546f511d0ef6680afa","2005-09-27 06:16:16+00:00","Applied my patch #1304998 to fix some issues with the IHNM intro. The intro
plays fine now, as far as I can tell, except for some missing sound effects
and the subtitles use the wrong font and are probably drawn in the wrong
position.

svn-id: r18887
"
"1da2d2662b97659eafa2ab6be8730062a86fbaea","2005-09-27 17:00:32+00:00","This seems a bit awkward, but does keep GCC from warning about discarding
constness.

svn-id: r18888
"
"2854ddbc809c01306761294be7851342808f6995","2005-09-27 17:38:35+00:00","Used Willem Jan's suggestion for making the ugliness go away.

svn-id: r18889
"
"1a48b01fefa916888c3139dfcc834463493a5308","2005-09-28 06:33:13+00:00","Some more IHNM-related stuff:

* Use the script-specified text area for subtitles, if there is one.

* Fixed a word-wrapping bug that would happen if a new line began with a
space. I don't know about ITE, but IHNM puts two spaces after periods. Of
course, the case where I saw this happen will probably go away once we
start using the right font, but it could still happen elsewhere.

svn-id: r18890
"
"d66e10a50de8a9cc448e5da60da4739a883447c2","2005-09-28 09:21:30+00:00","update documentation

svn-id: r18891
"
"00632bf8225cbb7c61aa3433a7fd74aa38535b67","2005-09-28 14:15:49+00:00","Improve documentation on MM NES after additional user feedback.

svn-id: r18892
"
"afe28a5b07ca41daaa84370b86588a573e4d5755","2005-09-28 14:27:18+00:00","Some very minor cleanups. (Basically the remains of a failed experiment.)

svn-id: r18893
"
"05ccf6389804a3c45fc0049955adb5dd60c09d48","2005-09-28 15:41:21+00:00","Implement sfWaitFramesEsc()

svn-id: r18894
"
"fde99a029a13f1c97bb4d7985c94964f55be034a","2005-09-28 15:49:20+00:00","Cleaner code for sfWaitFramesEsc()

svn-id: r18895
"
"fab72eed17a60cce4a738b3ed1b06cb3b08e801d","2005-09-28 21:38:07+00:00","oops. how did that happened? reverting introduced typo.

svn-id: r18896
"
"1c2fdf5af82ef4dcb2444433e0b8cbc2d837bae5","2005-09-28 23:10:18+00:00","Make ScummVM run in usermode, install exception handler in kernelmode.

svn-id: r18897
"
"7f686ebe53bb256c3ff57bb1bdb1dd1f210d14d3","2005-09-29 15:27:10+00:00","Fix SFX loading in IHNM. Now they're played.

svn-id: r18898
"
"a7ec941d301f24b3515194886fbfeee9a3f8acbb","2005-09-29 15:35:30+00:00","Remov obsolete comment

svn-id: r18899
"
"36f77ad3f96745f45980b86f2d68cec40689c4c9","2005-09-29 15:57:41+00:00","Fix fonts in intro. It is a very dirty code. Actually we should specify
font Ids in game settings. Also uhnm demo will definitely not work with current
code as it has lesser number of fonts.

svn-id: r18900
"
"65c18557593bc9d25b68987055dd8f25a3d94317","2005-09-30 07:31:14+00:00","Only applies to SCUMM 1/2.
Fixes regressions mentioned in bug #1306269

svn-id: r18901
"
"d659246376de6c85b1a004c97d9a23906867d8b5","2005-09-30 08:00:12+00:00","Handle overflow like original SCUMM3 games.
Should fix bug #1306269

svn-id: r18902
"
"2cb741281f104e8781e172c3b2f75d1f88008797","2005-09-30 09:14:21+00:00","Don't draw actors during cutaways. (Not that it makes any difference at
this point. :-)

svn-id: r18903
"
"09c3f9862d57a216f4fa25fbe47447ce10638e82","2005-09-30 11:57:37+00:00","Updated symbian actions and build scripts.  Run updateMMPs to updated all MMPS based on the base mmp

svn-id: r18904
"
"99e6a320378da92acab1a209ea8764b2c7eec8d1","2005-09-30 12:04:06+00:00","Updated MMP files after the latest projekt (mk) files. Added stub zip for tremor and added Kyra mmp file.

svn-id: r18905
"
"04d51b04027345fd38d1acbd2a0ea124d90ade62","2005-09-30 13:46:46+00:00","Add missing case.

svn-id: r18906
"
"2ff464214bcd39a3f8cf069e4a475a91a1ede92f","2005-09-30 18:51:08+00:00","fix compile warning

svn-id: r18907
"
"654ab46cf1aef64e756412751b907725f3a0076e","2005-09-30 20:01:24+00:00","More MM C64 costume fixes from LordHoto.

svn-id: r18908
"
"7dc6b6adbdd127b72d605eb1b8b75a34da59bddf","2005-09-30 21:13:49+00:00","1.Removed warning from symbian portdefs
2.Made thumbnail.cpp compile for VC6 (Symbian Emulator environment). Order of template declaration and includes causing the problems
3.Moved int i declaration from for;loop into local variable
4.Updated stdafx uio.h is not part of the Symbian build chain.

svn-id: r18909
"
"b7a275a131de30bad41f29884c90ad8eda6585ba","2005-09-30 21:45:41+00:00","Fix compilation

svn-id: r18910
"
"7242cdc97392702829d294a805baaad15e0e184d","2005-09-30 23:13:25+00:00","fixup imports, needed when using a recent pspsdk
use gcc instead of g++ for linking, to avoid re-ordering of link libraries

svn-id: r18911
"
"c59041181f63e0cc24bb57dd875ea95fe631302c","2005-10-01 03:29:25+00:00","Add missing case for bank select.
Fixes bug #1309713.

svn-id: r18912
"
"dd8cc6a508d9b9f8b7c974eee7cea5dd1b6a3184","2005-10-01 05:30:49+00:00","We used tabs, not spaces as identation. Fix that.

svn-id: r18913
"
"cb1e19584782f0eb3298fb2f178629cb9987e9cd","2005-10-01 07:09:59+00:00","Added avkon library to mmp file

svn-id: r18914
"
"c9e9eb92c0ab7cf482b5204414be643cc3587369","2005-10-01 11:09:49+00:00","fix #1298659 [WyrmKeep logo overdraw]

svn-id: r18915
"
"33eebe4b31076fc870b159930f9decaa41a36172","2005-10-01 11:39:08+00:00","Fix mingw compile.

svn-id: r18916
"
"8b712a4302d664dc761ac4d5b64b68ebba1892a4","2005-10-01 11:59:38+00:00","Update

svn-id: r18917
"
"aeb09b2ce43976ded9864845641a9a7778323fef","2005-10-01 13:02:35+00:00","Add inventory display for Mac. version of indy3.

svn-id: r18918
"
"5c30b3c8df57abf206429e0e153172755402ac8b","2005-10-01 18:02:37+00:00","Update Symbian README, default Joystick config is on, Updated pkg files for S80 & S90, updated symbian-fs (cleaner code)

svn-id: r18919
"
"cc08602770717f29b0733533aeea42a2c185df4f","2005-10-01 21:13:38+00:00","Patch #1259034 (Scumm Savegame Informations)

svn-id: r18920
"
"d69f43444717793a3f6d8175512949e09da2545c","2005-10-02 01:26:53+00:00","Inventory works in Macintosh version of indy3 now.

svn-id: r18921
"
"8382be199a6bac950e9b35609a6dc95e5d2341e5","2005-10-02 02:42:44+00:00","Attempt to make proper subtitles outline color.

svn-id: r18922
"
"61cd3947aa9bb04ed7bbce168afa5b06c7e00690","2005-10-02 03:09:29+00:00","Disabling actors during cutscenes did make a difference though. Reenabling
subtitles during cutscenes.

svn-id: r18923
"
"4d9a2cb884fa4ba6fdba26a09b352e176c879021","2005-10-02 13:21:49+00:00","Basic verb display for C64 maniac.

svn-id: r18924
"
"f912a940e909f38976d0be7c1bc667494485688b","2005-10-02 13:49:58+00:00","Fixed overlapping speech in ferret puzzle. See bug #1260904.

svn-id: r18925
"
"697374497b830e1d72ed137e6362f6f5aeb7f83e","2005-10-02 23:18:28+00:00","Update

svn-id: r18926
"
"4823f41b15ef8ef5a67c945672c74bf3c016e424","2005-10-03 10:01:09+00:00","Experimental IHNM fix: Since it looks like the intro doesn't clear the
cutaway explicitly, perhaps it's done implicitly by sfScriptGotoScene
instead?

svn-id: r18927
"
"ff6814f19b3309140f9090ed07bb5218c0c0dcfe","2005-10-03 11:13:56+00:00","We've done sshots... some time ago.

svn-id: r18928
"
"efa1c130640f4588ccdbba060448d53b51b26a86","2005-10-03 14:08:07+00:00","Cleanup

svn-id: r18929
"
"3bcb098fd31a0f68171fd4053f2600bb84814a5a","2005-10-03 20:21:18+00:00","committed patch #1312156 'Various sprite-related things'. Thanks  Oystein Eftevaag/vinterstum

svn-id: r18930
"
"ba306c80f4a59b73f7cf4dc51e90c1bf37e223ff","2005-10-04 17:44:41+00:00","Unstubbed sf75() as sfSetPortraitBgColor(), using information from sev. Any
mistake is strictly my own, however.

svn-id: r18931
"
"0719a4e6c27a10af41303aa961812b3dde333045","2005-10-04 18:19:14+00:00","I misunderstood sev on how sf75() should work. Perhaps this is better?

svn-id: r18932
"
"62a9b56577bd015328d9b185f9a7a9450eb22147","2005-10-04 23:38:19+00:00","IHNM changes:
o Latest bit of Game Object structure
o Implemented spiritual barometer
o Fixed Ethics points data type
o Implemented sf74 and sf104

svn-id: r18933
"
"c7e8af5e5e620b9a4fec4a88460e42410eae6e5d","2005-10-04 23:59:09+00:00","Proper place for cutawaySkip() call

svn-id: r18934
"
"579478a586b6d6c51bd5f652def24b362251d082","2005-10-05 01:31:46+00:00","IHNM used only 248 colors for game graphics. Top part of the palette
was read from resources. Switching to this scheme fixes magenta outlines
in subtitles.

svn-id: r18935
"
"8912fcb8055b442607ef679548427db22ce8c649","2005-10-05 01:40:55+00:00","Simplified palette code.

svn-id: r18936
"
"b76d1b36ae31a5ff5d90f36ec64f60b8eeed4155","2005-10-05 02:00:17+00:00","Fix to fixed palette range.

svn-id: r18937
"
"b332ea95ec9d892097072bfd2aaf316b3e31de7b","2005-10-05 02:01:52+00:00","oops. reverted last change.

svn-id: r18938
"
"99f36dafe86a155e8da20b2f2bbe64d27e5183ac","2005-10-05 06:31:26+00:00","Remove leftover

svn-id: r18939
"
"05ea6d3a34ba3bb81c6e72cc6ace6603b4018118","2005-10-05 11:37:26+00:00","Cleanup

svn-id: r18940
"
"e748cccca6d51f832397f8d4ce33ebc25adc12c4","2005-10-05 12:16:49+00:00","Cleanup

svn-id: r18941
"
"441b98664508566642e45648431a01338a74a309","2005-10-05 13:10:59+00:00","Update

svn-id: r18942
"
"fb86de70e2ff80af51df19a9cc526df110af0d03","2005-10-05 13:15:47+00:00","Revert

svn-id: r18943
"
"49602286f440499b954c90ec912c2fe20db39566","2005-10-05 16:40:51+00:00","Applied my patch #1314023, since cyx liked the idea of cleaning up the
sequence player. He did note - and I agree - that the player could be
further cleaned up by placing it in a class of its own, and that it's
possible (though not certain) that we won't be needing alternative opcode
sets for the floppy and CD versions.

But it'll do for now. I don't have time to do any more with it right now.

svn-id: r18944
"
"7c0c7dbb91db6d8b3c93e73e0f3d84dd9f9fc8b8","2005-10-06 11:56:15+00:00","Removed unnecessary empty line. (I made this change while working on a much
bigger change -- I didn't want to commit this as part of that.)

svn-id: r18945
"
"8fc913c21d35f7b89c2a267cb5ea1e7ddcb38419","2005-10-06 11:57:02+00:00","Moved the sequence player into its own class. I'm sure this could be
cleaned up a bit, but it'll do for now.

svn-id: r18946
"
"ccaaeecc1ce2d34fa0affd0916b4fbe5357d703d","2005-10-06 11:58:03+00:00","Bah. Forgot to add these files in the previous commit.

svn-id: r18947
"
"e91503cb1cd067ba001f53d3c1339d6ed3c56488","2005-10-06 14:34:24+00:00","Add FF table.

svn-id: r18948
"
"36295605ab706f70e1b773de14242839889b0a81","2005-10-06 14:54:25+00:00","Add slight difference.

svn-id: r18949
"
"92f5e206bd0c4d668d3a6187efb26a75ec99e81b","2005-10-06 15:54:43+00:00","Disabled scene background music for IHNM, for now. It was trying to start
the end credits music right after the intro.

svn-id: r18950
"
"5f20bf11e6b694319d1d6a3e8df833008bbb56b7","2005-10-06 15:56:06+00:00","It should always be possible to interrupt the intro with Escape now. Most
of the job was already done, though. Only the final bit was missing.

svn-id: r18951
"
"fe48a005177228f7b63dbd1d73630336de5c15cd","2005-10-07 05:31:13+00:00","Draw acrtors (eriktorbjorn, rejoice).

It:
o breaks intro, as now everything seems to be shifted.
o Shows problem at our firt scene where there is no inventory drawn
o Shows problem with our animation code, actor frames are wrong
o Draws actors upside down and probably at wrong location
o Due to incomplete implementation of whichObject() it crashes when
you hover over characters.

svn-id: r18952
"
"50486480cbce7b38b976d9f339e6d86aa880ddd5","2005-10-07 06:59:49+00:00","FF starts VGA script.

svn-id: r18953
"
"1bd9b92b5b133ef8e4ed5436b19534b59933e831","2005-10-07 07:06:21+00:00","Missed a few lines.

svn-id: r18954
"
"4893e3271bea98f5a80a03b534c0c8bbb0321962","2005-10-07 07:36:09+00:00","Adjust for larger resolution.

svn-id: r18955
"
"313fe937f7fd9fb290d623e1eeada1156763b5c8","2005-10-07 10:44:48+00:00","Cleanup sprite header reader.

svn-id: r18956
"
"a202b15062e3f5dc8754f94526bc6a179b70c1d1","2005-10-07 15:36:28+00:00","Added a 'video' panel mode. From what I understand, the beginning of the
IHNM intro should use this, so now it does.

svn-id: r18957
"
"c4752fc320456f264042677968362fddf2253fcd","2005-10-08 09:59:36+00:00","Added/stubbed some Feeble opcodes, and fixed a regression that made it
impossible to load old (and probably new, for that matter) Simon savegames.

svn-id: r18958
"
"176f32bfa166a6c842092abdd9cc936b0260f31d","2005-10-08 15:20:11+00:00","_vm->getSceneHeight() --> _vm->_scene->getHeight() and make it return different
scene height for individual panel modes.

svn-id: r18959
"
"cf512d26dece10522aba3a79962faff090b44035","2005-10-08 15:35:07+00:00","Oops. Fix crash introduced by last commit.

svn-id: r18960
"
"528d2b2ca184ab92a42f96f4527cf2298bca4b09","2005-10-08 16:25:18+00:00","Now most artefacts are gone and we're in proper panel mode when running
character selection.

svn-id: r18961
"
"12f40ae7776ff6204212c91e819951d5ff4eec66","2005-10-08 19:07:18+00:00","PalmOS: cannot use global objects in ARM

svn-id: r18962
"
"8b4f59dc7a0021ec37a26225b6e39e98e7adaa94","2005-10-08 19:10:05+00:00","PalmOS:
- fix crash trying to use emptyString
- debug option

svn-id: r18963
"
"3bd243e0433be31a0549b38bde10e89fb1d8b864","2005-10-08 19:40:47+00:00","Use font manager

svn-id: r18964
"
"46660feeb29a9fd387fd2869a4932f1e072092fa","2005-10-08 19:53:38+00:00","Quick and dirty hack to enable actors interaction. Still have to compare
that with disasm.

svn-id: r18965
"
"f5f57c9a23bb0270d80d174749c0a82707f4b595","2005-10-08 20:09:00+00:00","Put actors on the ground. No more upside down. Though probably drawClip()
has to be fixed too, but now we have no test case for this.

svn-id: r18966
"
"12f978c69a32aac7207e82684733c267fb2c455b","2005-10-08 20:14:41+00:00","More DISABLE_SCUMM_7_8

svn-id: r18967
"
"98bfe388fb9121985f900056348e663c0b441b75","2005-10-08 20:44:19+00:00","revert previous changes related to #ifdefs

svn-id: r18968
"
"5b514241f34a0f25f98a280801df5d2f1f7d9dbf","2005-10-08 20:54:05+00:00","revert previous changes related to #ifdefs

svn-id: r18969
"
"3f2f5e099738f409501126168b3342a6c1284b34","2005-10-08 21:11:45+00:00","PalmOS : very bad hack to fix global constructor problem with ARM

svn-id: r18970
"
"f14365e3f9e82710e946e2110c13fd0ecd3d71b5","2005-10-08 21:25:09+00:00","Change __PALM_OS__ with new PALMOS_68K / PALMOS_MODE

svn-id: r18971
"
"60b85c5137f05ea248ccb54c1a454cb4bc1ebd03","2005-10-08 21:28:14+00:00","Cleanup.

svn-id: r18972
"
"da43d814cd940bb02517418e92855a9bf9f9692a","2005-10-08 21:33:31+00:00","Oops, made a typo when rewriting that comment.

svn-id: r18973
"
"3ab37bce7934efa9a89b3e8a91fce7addb3fa763","2005-10-08 21:34:59+00:00","- PalmOS stuffs
- fixed type mismatch error

svn-id: r18974
"
"18b95233384fdb5bd183bcac8d99ea01cddd55e8","2005-10-08 21:43:02+00:00","PalmOS : fixed 68K link

svn-id: r18975
"
"03f95bc26adbba7be8f59141ab73d3b7b7fd2a98","2005-10-08 21:46:27+00:00","PalmOS stuff

svn-id: r18976
"
"ca65477b65c992513b716c98833d8c899b0aacba","2005-10-08 22:00:58+00:00","PalmOS stuffs

svn-id: r18977
"
"000a3816f8e041135cdfec1e0868a7f5330296da","2005-10-08 22:02:53+00:00","PalmOS stuff

svn-id: r18978
"
"95ff7fd0bb2cd735071f8431a05a66f8f217cf2e","2005-10-08 22:04:52+00:00","PalmOS: fixed compiler problem

svn-id: r18979
"
"18d33dc07847cbb5e8c525103d37efe231b5f1d0","2005-10-08 22:09:21+00:00","Read IHNM actor and object strings from the resource file. (This does not
keep whichObject() from crashing, but I don't know why.)

svn-id: r18980
"
"41b0ba9f95e87b6a2c3ad448440dfec5fdcd4e51","2005-10-08 22:18:29+00:00","New PalmOS backends

svn-id: r18981
"
"d02c35c8213b4994769d7f42ffb40c148ae991a8","2005-10-09 01:18:26+00:00","(more) Proper implementation of ChapterSelection panel. Though not all
functionality is implemented but it is enough for now. Lets select any
character.

svn-id: r18982
"
"d972e948c3259871dd0a8da2a997d37789ac3f66","2005-10-09 01:20:46+00:00","Simplified handleChapterSelectionUpdate()

svn-id: r18983
"
"6cd35f750706d665f489f7331be0bf5914f66f53","2005-10-09 01:43:08+00:00","Now load actors only on demand. That lets select Nimdok (doctor) part. Just
click on him and move mouse away quickly, so it will not try to get actor's
name which is broken ATM.

svn-id: r18984
"
"c11575c99c088d9ab9e252d34bf57311464339cb","2005-10-09 03:35:45+00:00","Boss key like in original. Press F9. Palette seems to be wrong though and
cursor does not reappear.

svn-id: r18985
"
"d67009d5e5c4460a3d8ec2c4d9d7f70ce4bc6be2","2005-10-09 03:45:16+00:00","Restore cursor after boss key.

svn-id: r18986
"
"6b897dd90b26baf4453cd116ed25bb122a3232c8","2005-10-09 09:03:37+00:00","Add more stubs for FF.
Disable scale images in FF for now.

svn-id: r18987
"
"0006c3f3950e9a78f956e68e1c4e12f9733c8d43","2005-10-09 12:12:24+00:00","Clean up VGA headers.
More changes for FF.

svn-id: r18988
"
"dda869a4843a7fe9c7574f1e14c09b6dd6f421d6","2005-10-09 12:38:06+00:00","Typo

svn-id: r18989
"
"3568b14a210fb2f2e9c6cd2947f3e51496eafaa8","2005-10-09 16:25:47+00:00","Removed TODO comment about actor strings loading.

svn-id: r18990
"
"1e286ca84f512139b502b1fe9a471f2ac04c8fb2","2005-10-09 19:00:14+00:00","Specify some image resources.

svn-id: r18991
"
"e330793547f6b912c13aec19f234b2cd5f9b8185","2005-10-09 19:10:59+00:00","Added optional parameter to setCursor() to specify which type of cursor you
want. ITE has only one cursor, so in that case the parameter is ignored,
and IHNM currently always gets the hourglass cursor. So it could be
improved. Lots. :-)

svn-id: r18992
"
"c79dcadcc0551922ecd6c001e6ef6ef05b46b5b5","2005-10-09 19:43:15+00:00","Apparently, the IHNM crosshair cursor, and the cursor hotspot, are both
hard-coded.

svn-id: r18993
"
"fc11b60674103b569b9df2599b60f7d99dbdd909","2005-10-10 02:02:58+00:00","Draw main panel. Buttons lack backgorunds and save reminder is buggy atm.

svn-id: r18994
"
"b5b6b6ebb736e860a2063d774aa2d2e98f5886e7","2005-10-10 02:09:08+00:00","Eliminate font substitution ugliness.

svn-id: r18995
"
"fe88687ce78760a7e461c5c478e684063766f381","2005-10-10 02:42:50+00:00","Show save reminder in IHNM correctly.

svn-id: r18996
"
"836ed9c9e069b479f34e7977cdbc9c140246baef","2005-10-10 02:48:23+00:00","Oops. Fix debug leftover.

svn-id: r18997
"
"5b92d1e9fa2af8d371144a18c319215bc92b6bdf","2005-10-10 07:00:31+00:00","I noticed yesterday that if you change music in IHNM at the 'right' moment,
the music will be horribly out of tune because the pitch wheel setting from
the old music will still apply.

I hope allNotesOff() is the correct place to ensure that the pitch wheel is
centered.

svn-id: r18998
"
"abb9ee416f46ce514b9977b4ca255deec8da15b5","2005-10-10 09:31:27+00:00","Removed the 'reset all controllers' message. It currently breaks on Adlib,
and I don't want to have to worry about it. Centering the pitch wheel is
the change that I primarily wanted to make, and that should be supported by
every MIDI driver we have.

svn-id: r18999
"
"4158aa207034aaffedf2af959552c8d807f45b22","2005-10-10 12:46:26+00:00","First attempt to run DOS ITE demo

svn-id: r19000
"
"bbb1bee56851f1d59102c0bdb654c40ff2a3e904","2005-10-10 13:05:09+00:00","Add defines for DOS demo resource numbers.

svn-id: r19001
"
"832047efc99ff1fea565a4764f7100ca0db92dfd","2005-10-10 15:31:42+00:00","Draw the IHNM portrait on the right coordinates.

svn-id: r19002
"
"24202dea851e37e5712ae045c29428e72c6d00cd","2005-10-10 15:48:15+00:00","The demo resources list looked incomplete to me. Can anyone check if this
works?

svn-id: r19003
"
"6ce32fd4a5ce9f819cf6582e0f6f2a0a24b8aec1","2005-10-10 17:23:28+00:00","IHNM verb panel fixes:

* Verb buttons and texts are drawn at the correct coordinates. I've
compared it to the screenshot on Mobygames.
* Verb text is drawn without shadow.
* The 'Walk to', 'Look at', 'Take' and 'Use' buttons all have the correct
background. For some reason, I can't find the sprites for the remaining
four buttons.

svn-id: r19004
"
"78e619efaf7676da4ea9b3c222fb2eecfef24668","2005-10-10 17:58:35+00:00","gBitFormat seems to be back in libcommon again...  (This underhanded parameter passing has to go.)

svn-id: r19005
"
"e344833146f2e1dc45120da9aae572af6de2f832","2005-10-10 23:15:09+00:00","Fix regression with samnmax floppy. Game just crashed on resources opening.

svn-id: r19006
"
"7f11a7032c742efea07b65c1150071c24bc0b349","2005-10-10 23:28:22+00:00","Adjust save reminder position

svn-id: r19007
"
"49e8835c3cd57955135cb71700f1bfc5525c90c9","2005-10-10 23:30:31+00:00","Fix problematic md5. A space character sneaked in.

svn-id: r19008
"
"54449c920ba40b19270a13508fc956a6ff6637c3","2005-10-11 01:00:56+00:00","Fix portrait color. I just missed dependency from barometer.

svn-id: r19009
"
"02bcf56072d17807db0e5ee47006ca86552a1d43","2005-10-11 01:42:21+00:00","Fixed sprite loading. Now that ugly hack is gone, no wrong reads and every
chapter is selectable without crash. As a side effect all buttons now have
correct backgrounds ;).

svn-id: r19010
"
"f715044e4e4ef9dc7eca7a402369a249d282c73d","2005-10-11 02:22:53+00:00","Some IHNM changes:
o Fix status text color. (Though text is all ITE-specific)
o Enable inventory drawing
o Load inventory sprites
o Hid now unneeded actor loading debug output

svn-id: r19011
"
"cfd74f19adf1e5cff442c98cbef184a9096999e3","2005-10-11 02:44:25+00:00","oops.

svn-id: r19012
"
"618a50cec0f055b7ac2b79ca99a087bbcd46eecd","2005-10-11 02:51:17+00:00","Do not draw status text during chapter selection

svn-id: r19013
"
"2a562aa8ad4ba6d869d3b616bc25ff1d0de26f7c","2005-10-11 06:08:42+00:00","I was going to fix the IHNM sprite loader, but when I got here this morning
sev had already done that. All that was left for me was this final bit of
cleanup. :-)

svn-id: r19014
"
"d63c8c0aee62cc66f36e73420aa6e5685a019cbd","2005-10-11 10:41:12+00:00","Update

svn-id: r19015
"
"049dd317d70e89843df12e2d1d859ea850c600ae","2005-10-11 11:27:18+00:00","Patch #1323715 'OS/2 Patches to ScummVM' and credited the author.

svn-id: r19016
"
"b7e62ffb1816b339c2159708c2b97a8e5af25b33","2005-10-11 13:23:47+00:00","Fix stack underflow when Gorrister examines the mirror in IHNM. opReturnV
was popping *twice* the number of parameters that had originally been
pushed.

This appears to have been a bug in the ITE floppy version as well; one that
was fixed in the CD version.

At least that's how I understand it.

svn-id: r19017
"
"c23f1c5c723b8553d6f02020dd6d56603dca99df","2005-10-11 13:33:01+00:00","Added READ_UINT16(). It looks like SAGA will need it.

svn-id: r19018
"
"aa8df56744f6de4c0879835540d0e69c617ce0f4","2005-10-11 13:40:29+00:00","Added WRITE_UINT16() and WRITE_UINT32() as well.

svn-id: r19019
"
"db4308d60bce90cec92139fa1fe469c9464dccf6","2005-10-11 14:03:36+00:00","Rewrote some code that didn't look alignment safe to me.

svn-id: r19020
"
"f405adae1f0e0cdb7b5c7f7bb5b8d3cf86a15076","2005-10-11 17:20:30+00:00","This should ensure that savegames are endian-safe. Unfortunately, I've just
broken any old savegame made on a big-endian machine. Oh well, better now
than after 0.8.0 ...

svn-id: r19021
"
"e44213c8324052f74d0a9766b29edcaf01c3a6d1","2005-10-11 17:39:31+00:00","Cleanups. Mostly whitespace.

svn-id: r19022
"
"bb14140ca727fa3681785d331c523d5584083c67","2005-10-11 17:48:16+00:00","Moved the pitch wheel centering to unloadMusic() instead, since having it
in allNotesOff() broke the Kyra music. I have no idea why.

svn-id: r19023
"
"ee697e27ef622e3c467b46967ffb035e4f6d2e3a","2005-10-11 18:09:52+00:00","Patch #1324028 'Another configure patch for OS/2'

svn-id: r19024
"
"ad8a71783ad7c636ee64f5beb7fdef99138f1dd1","2005-10-11 18:11:58+00:00","This is an attempt to fix the actor frames in IHNM. It appears to be at
least partially successful.

svn-id: r19025
"
"8447b128e6a8b8835d17dc46ea94d071052b3533","2005-10-11 20:41:10+00:00","Patch #1308891 '0.8.0 spec files for scummvm and scummvm-tools'

svn-id: r19026
"
"e6ae6d3520517126de41359c0bcc59fa0de5807d","2005-10-12 00:02:47+00:00","Hide unnecessary debug output

svn-id: r19027
"
"5eb4192f83811fe0e416a8b3c6b0cdc2ae131c55","2005-10-12 00:35:54+00:00","Fix regression, cuased by typo.
Add wrapper as suggested.

svn-id: r19028
"
"0b0916ca75c182ba494fb982b8f1942d131557c5","2005-10-12 00:51:14+00:00","Fix sound effects regression in simon2talkie.

svn-id: r19029
"
"706ea9db69dee1dabb12c487031592b8fd946414","2005-10-12 05:46:56+00:00","Reverted default case error in o5_resourceRoutines to a warning, in order to workaround a fatal error in zak256 caused by a botched script load. See bug #1290485

svn-id: r19030
"
"cd2c0f2e4781e99d1521c442b674624eb9efe6e2","2005-10-12 05:58:57+00:00","Revert last change and add a safe work around for bug.

svn-id: r19031
"
"744a01b4490552b30778fa1a2b8be47588a3bd8a","2005-10-12 06:57:25+00:00","Looks like my pitch wheel change still has the ability to break things. See
bug #1324103.

I've changed it - again - so that now it only centers the pitch wheels on
unload if a new mpCenterPitchWheelOnUnload property has been set. Currently
only the SAGA engine does that, so if it still breaks it only breaks SAGA.

I've also fixed what looked like an unintentional fall-through in the
MidiParser::property() function. Surently that can't cause any new
regressions? Please.

svn-id: r19032
"
"7db5abf7e805380fc354eb357c9d421a858dfcd1","2005-10-12 16:26:34+00:00","Edited credits files:
- added new engines (Gob + Kyra) to other devs description
- moved LordHoto to dev team

svn-id: r19033
"
"961cd63ae9342d3b55b088e34cc7832ad04df581","2005-10-12 17:56:07+00:00","fix #1324803  ITE: Freeze during storm

svn-id: r19035
"
"56c90587069f48c9ff28026fdd450689de321caa","2005-10-12 17:59:12+00:00","Updated info savegame chunk:
- now we save the date and time(although in localtime) in the same
format as we pass it to the dialog
(See 'ATTN: Porters. Notes about time() implementation and thumbnails'
on -devel)
- old format is kept for compatibility for
older ScummVM versions

svn-id: r19036
"
"27191b258c699e246a5ce6be6f4481b02ff6c73b","2005-10-12 19:15:32+00:00","Applied patch #1320381 (KYRA: Adds speech support to CD version)
- changed the seq player
- added cdrom version data
- changed the resource loader a bit

svn-id: r19037
"
"037665a1b305401eef41f555057af252cf656582","2005-10-12 19:41:57+00:00","Not needed

svn-id: r19038
"
"48ed1b4073dbcbbe22f86ae1bce9f4a44609f139","2005-10-12 19:45:35+00:00","PalmOS : Reorder resource file names so that I can save data segment space

svn-id: r19039
"
"797b6e5a7c8cf51a1b9aacb3f0e756f8a972148b","2005-10-12 19:47:15+00:00","PalmOS ARM too

svn-id: r19040
"
"89e27f5edc9e0944ed4a5dfbcf6ca9fb93042a51","2005-10-12 20:08:07+00:00","New backends

svn-id: r19041
"
"625520882c7c1c7a237802923d399f4699c157cd","2005-10-12 20:17:13+00:00","Ease 68K/ARM communication

svn-id: r19042
"
"8ab08763adf4cb7666189f4f3dfc14048a928ed7","2005-10-12 20:19:12+00:00","Added battery info and 'Fight mode' OSD message

svn-id: r19043
"
"3e9419db51b1a59daa785575c8c30fc51c252118","2005-10-12 20:20:26+00:00","Added grabPalette

svn-id: r19044
"
"6330435331a32fba582fc3f7052b07492619cd74","2005-10-12 20:24:30+00:00","Added battery info

svn-id: r19045
"
"b9cb9b6802bdd1427e595743ad3cdfbb0673b074","2005-10-12 20:28:11+00:00","Revamped PocketTunes support

svn-id: r19046
"
"559bf8634c08c8291ae993f5f2fc792985e2c7c7","2005-10-12 20:36:40+00:00","Added getVolume()  (what the hell with these newlines :\ )

svn-id: r19047
"
"d9527b601e26d6cf918302f9f4255ddfcb7a7974","2005-10-12 20:41:00+00:00","Not needed

svn-id: r19048
"
"bfa7823a5e5c0c8044de9a1085bac4fc7d6b79d3","2005-10-12 20:43:30+00:00","Added GoLCD support

svn-id: r19049
"
"016620838a417689065ba8d7d71d7a2ae49eebb0","2005-10-12 20:46:05+00:00","Little change

svn-id: r19050
"
"5e1af3190c86feef380bbd27ba87c2b36bdd9497","2005-10-12 20:53:55+00:00","Added volume parameter

svn-id: r19051
"
"d94b48f946ca6639b7427f5ae9f4c93e5b531390","2005-10-12 21:01:11+00:00","- Removed cache since new stdio functions do it
- Renamed class. Will be remove when new backends will be done

svn-id: r19052
"
"34805489524bb0e6c9ba7568d29ecd05ed40bbd5","2005-10-12 21:03:09+00:00","Manage palmos versions

svn-id: r19053
"
"2a5025d69afd622a2a5292f6c2444bf7214843a7","2005-10-12 21:11:11+00:00","Fix bug #1316605 'DIG: some saved games crash scummvm'. Actually it's
aquadran's fix.

svn-id: r19054
"
"1b96ad1a91ff0117892a0bd5d6f37b576b4038cf","2005-10-12 21:11:49+00:00","68k modules and frontend prefix files

svn-id: r19055
"
"412693ac70e237591335de18fc93b6113b96b42a","2005-10-12 22:13:41+00:00","Patch from wjp #1325224 'Fix for Gobliiins 1 EGA crash on game-over'
which fixes bug #1324814 'GOB1 ega: lock up when game is over'

svn-id: r19056
"
"d5b203748af5e98727b1c7c7127dacf8567b50a2","2005-10-12 22:52:47+00:00","o Add fate to obsolete targets. It was just an oversight
o Make generateSubstResFileName more portable. I wonder how it worked in
the past at all.

svn-id: r19057
"
"d218fceb43adc5da751bcb8a66fa10b592763cba","2005-10-13 01:12:33+00:00","Sync with upstream. It has checks for some 64bits systems.

svn-id: r19058
"
"8387b48d201da225b68fce3f8a22ac134fa75d1c","2005-10-13 12:44:26+00:00","Set _HEAPOK to correct value,if using earlier mingw-runtime.

svn-id: r19059
"
"d1ee537c5966b8572efc6161ed8c0a9b1ffb4a2b","2005-10-13 14:27:38+00:00","Added note about possible BS2 alignment problems that I wish I had been
told about much earlier.

svn-id: r19060
"
"9895a020326c91971373b7d3c649bc6e245e8559","2005-10-13 15:02:21+00:00","Objects were not been swapped in HE games.

svn-id: r19061
"
"2ba1926be6b73778c68c75e25eb20ea44d0e2857","2005-10-13 15:33:56+00:00","It should not be a fatal error if allocate_part() fails. As far as I
understand, it just means that the currently active parts are too important
(i.e. have too high priority) to throw out for this new one.

This makes bugs #1325060 and #1325487 less severe.

svn-id: r19062
"
"e9b7a88e77de0043aa1eacf1e80b90d9d257c5c9","2005-10-13 15:40:56+00:00","This message is much too annoying to be a printf(). I should know -- I
added it. ;-)

svn-id: r19063
"
"ce2e9ab9d8a814f2356371b941ddb7e83d387427","2005-10-13 18:05:04+00:00","Rewrite of the script interpretation class:
- Now only one instance is needed for many scripts
- Fixed a few command procs, but lacks opcode caller
implementation

svn-id: r19064
"
"66fbe2d3c42355d714fd1cd638323f367de4c329","2005-10-13 18:48:33+00:00","Some cleanup. Updated mouse position on EVENT_RBUTTONDOWN for WinCE and PalmOS, does it help bug #1293385 ?

svn-id: r19065
"
"57e1c6451dc928f4162de019486e3af259d39423","2005-10-13 18:50:53+00:00","Improved savefile error handling:

* New flush() method in WriteStream class to flush pending I/O, in order
to detect any I/O errors

* Use of flush() and ioFailed() added to scumm engine save function

* Dreamcast backend extended to support the new checks

svn-id: r19066
"
"eef92cb7e7f0e3fe39e1d468fabce58bfc8f6faf","2005-10-13 20:54:16+00:00","Patch from wjp which fixed parser operands and now protection screen always
shows numbers, not just rotation of them. Still no screen updated during the
process.

svn-id: r19067
"
"7664cbcc7434ebd3e349b7ffc60b38381b7750d3","2005-10-13 21:12:47+00:00","Committed patch #1325945 ( KYRA: md5 game detection ) with a few changes
and added the story picture in the intro.

svn-id: r19068
"
"bd4340f21abe19c05d6b5a3d8cd95fa6b0e3502a","2005-10-13 23:20:41+00:00","Add possibility to see exact md5s of your game and save when they don't
match. It's on debuglevel 1.

svn-id: r19069
"
"2b47cbb4b5d57114210c79ded18aaacd0c681405","2005-10-13 23:27:11+00:00","Workaround for bug #1310846 'DIG: Text bug in intro'. Proper fix maybe
will be never needed not to mention that it will require to add much
logic to code which will be used just once just for single release of the game.
(and if somebody will have patience to watch intro to the end)

svn-id: r19070
"
"a3d0fcea54866b29749bcb67f60e8c28bb207116","2005-10-14 00:56:52+00:00","Add language and platform to game description and use that accross the source.
That eliminates GF_LANG_DE and GF_MAC_RESOURCES.

svn-id: r19071
"
"7af9ece552c7bafb32d61305c2b8c7dce133ec03","2005-10-14 02:13:33+00:00","HE games store and restore locked FlObjects between rooms.
Fixes input issue in thinker1.

svn-id: r19072
"
"05457402f59afac71d97d2aec31c4a229fa1db2d","2005-10-14 02:50:05+00:00","Added Linux platform. Now it is used by some ITE version and is required
for proper game identification (21 subtle distinct versions of same game
which still require individual flags is not a joke)
cvs: ----------------------------------------------------------------------

svn-id: r19073
"
"7f6402ef0631cb044ce957c2a019367b29249ab8","2005-10-14 04:28:20+00:00","Eliminate ite-demo and ihnm-demo targets as we do in SAGA. Just use plain
ite and ihnm respectively. Sorry, but I had to do it before release, no
autoupgrade as games weren't supported only in developer's version.

Fix bug #1297365 'ITE: Game detection is broken'.

Now it distinguishes between DOS CD and Win CD, though it uses platform and
language settings from .ini to do the choice. I.e current games need to be
redetected. Though only these 2 games are affected. I.e. they have exactly
same resource files, just Windows release adds up external patches. These
patches cannot be added to detection as they're stored in subdirectories.

Also I resolved problem between ite-demo-win and ite-demo-linux where latter
is a superset of former. I.e. it has all files which win demo has plus one
additional. And if you try to detect Linux demo it shows you both. Of course
this could be handled by upper solution, but to make sure I count number of
required files for matched versions and remove those which do not have max
number of files. I.e. if 2 games matched and one requires 4 and another one
requires 5 files, then we have 5 files matched which certainly points to
second game not the first.

svn-id: r19074
"
"0436bdeb0fd3ed1bbe20d337c62efc2afad60b01","2005-10-14 07:58:30+00:00","I have to make this tool available. Without it, the SKY.CPT file can't be included in debian.

Beware, it's full of shit and dirty hacks as I was never even dreaming about making either the source or binary public.

But this has to be sufficient as I don't see the point in wasting my time rewriting a tool that noone needs in a clean way.

svn-id: r19075
"
"17f251a37fb1a88867a22095ee2e635e2a2da923","2005-10-14 08:39:27+00:00","loadFlObject() should use object index, when checking if object is already loaded. Matches original games and prevent multiple load of same flObject in HE games.

svn-id: r19076
"
"7ab5fa81141bfd77a919ed45b410e94252d8482e","2005-10-14 10:20:42+00:00","cleanup (really would like to unify all those typedef's eventually; maybe we can use inttypes.h  on some systems?)

svn-id: r19077
"
"d326166fe0b4662ef44072629b748eeb4edff836","2005-10-14 10:27:24+00:00","Don't hardcode platform code strings

svn-id: r19078
"
"17e889020040fb78e072ebb24bd38603ad6122d8","2005-10-14 11:04:15+00:00","Removed very old GP32 hack (any new port would have to revise this code anyway); disabled some more V7/V8 code conditionally

svn-id: r19079
"
"c75dfc3f05ef3210eb7e5f29306cfd8f42623b06","2005-10-14 11:24:46+00:00","Added missing -framework CoreMIDI

svn-id: r19080
"
"67eedc08d27e6a3649db5bcb9a4c0ad76e468d35","2005-10-14 11:25:48+00:00","Oops. Fixes a bug with wrong filename for intro text in english version.
Also gets rid of GF_KYRA* since GI_KYRA* should be used instead.
And last but not least fixes text drawing while Kallaks writing scene.

svn-id: r19081
"
"dcb2372e23d58f700f25764429f148ddd5d8f73b","2005-10-14 12:36:46+00:00","Adjust array ids in HE80+ games, to match original.
Otherwise array aren't always nuked by scripts.

svn-id: r19082
"
"80fd4fe088ce9f4945008840be77a2b1ddb92ce5","2005-10-14 15:15:52+00:00","Turned on the automatic computation of dirty rects for ITE. It should make
it less of a CPU hog for 0.8.0, but I hope we'll be able to fix it properly
for later versions.

svn-id: r19083
"
"fe6b21129de006d49ba1ad7f0470b3463fcfff28","2005-10-14 19:32:58+00:00","Fixed the 'Failed to save game state' warning in HE90. _numBitVariables is equal to 0 there, so Serializer::saveLoadArrayOf() is called with len=0 which calls GzipSaveFile::write() with dataSize=0, which leads to GzipSaveFile::_ioError being set.

svn-id: r19084
"
"3e03ca6855b6d092addee1c0f7755d5d6208b893","2005-10-14 19:51:56+00:00","Slightly better that way.

svn-id: r19085
"
"8dfc199d5b22030fc68c9ce94da74c6cdc39c219","2005-10-14 20:50:09+00:00","Added Symbian #idefine

svn-id: r19086
"
"c97645f55511aa9ec0b3a5990072d67aa7d7d315","2005-10-14 20:52:57+00:00","Added SYMBIAN32 defines for touchscreen navigation

svn-id: r19087
"
"842f520af1b6a268e7d7e2b8683debab0a8f7258","2005-10-14 22:05:41+00:00","Fix from wjp which let protection screen render itself at last.
Now you may clearly see rotated numbers as well as hint when your code
is wrong.

svn-id: r19088
"
"b6425d1cf8990873e5fb05741833722492322d71","2005-10-15 00:46:08+00:00","Fix regression, resID shouldn't beint16.
Slight correction to copyArrayHelper.

svn-id: r19089
"
"30b13e12066df635a72cbfaa3122ae5cd230d837","2005-10-15 00:47:23+00:00","Ooops, remove debug output.

svn-id: r19090
"
"05d5bc16d2d672e4c86d278c0248d834f4217cb9","2005-10-15 02:22:42+00:00","Add extra case for 3DO fbpack.

svn-id: r19091
"
"b7e72737d330a63b77692355f6aae527f606adcd","2005-10-15 06:15:13+00:00","Set inital room width and height.
Several early HE games check values, before they are set.

svn-id: r19092
"
"7aec70c3952c76235c83e162069c24d89c7c52fc","2005-10-15 06:26:53+00:00","Fixed a bug in the Kyra CD intro that caused ScummVM to crash when compiled
with GCC 4. (The string buffer for the file name was too short, which
caused a write to another variable's address to overwrite the terminating
zero at the end of the string.)

svn-id: r19093
"
"59bf8538a55116d7bb9859b6d03de355d8c10df1","2005-10-15 06:41:48+00:00","Reset inventory offset when restarting V1/V2 games.

svn-id: r19094
"
"170521fb9b32a3bf06787fea01c48b6750e6498e","2005-10-15 07:32:44+00:00","Avoid conflicting VARS.

svn-id: r19095
"
"6e446ad46f1608bf8918e3e4f0184eb931d5aefe","2005-10-15 10:31:18+00:00","Use delay, not value in setSpriteGeneralProperty.

svn-id: r19096
"
"dca6f248eea71c2674a8475860c6c2129cf58a4d","2005-10-15 10:31:55+00:00","Unified mouse pos update code

svn-id: r19097
"
"4d85ddbc28263ab140f82af1ee9dfd8326c7cfac","2005-10-15 11:03:32+00:00","Several later HE games use sprites for subtitles.

svn-id: r19098
"
"dbea2b5a1d6920d056e9fe7bd17efc409756e11a","2005-10-15 14:15:22+00:00","Added some missing functions.

svn-id: r19099
"
"a4aefbe9b459f2dd17d978695da00d5ab63dbd7f","2005-10-15 14:33:58+00:00","Added support for cursor palettes.

svn-id: r19100
"
"1ee05972af8dd0d14bb6eedb713ce9b6adf5a1c4","2005-10-15 14:59:46+00:00","Avoid 'double-clicks' when the virtual keyboard is activated.

svn-id: r19101
"
"ee1553995291e645b846aec1b301a7130527c2a2","2005-10-15 15:46:12+00:00","Try do display the virtual keyboard only when a string input widget has focus.

svn-id: r19102
"
"fb14ec58300e6d65731b6471763a9ba00a1b0747","2005-10-15 17:43:02+00:00","Correct MD5

svn-id: r19103
"
"ea6b0f2b449c76b48b858ef58c5497de4955dabe","2005-10-15 22:28:27+00:00","Enable MAD support.

svn-id: r19104
"
"e4b85675a6f0e8de9cc7b0ccdda3a4b3a42162f0","2005-10-16 03:11:46+00:00","Correct heversion for updated dog-on-a-stick.

svn-id: r19105
"
"8dd91d9b165509c3dfb2d1980d31dae23905780b","2005-10-16 09:50:27+00:00","Add missing function for getWizData.

svn-id: r19106
"
"1af9aad8efc69661cdfda20bd138db94e9dc2def","2005-10-16 10:29:10+00:00","compiler warned about useless negative operation. i hope it's ok after change

svn-id: r19107
"
"6ee249743c11fd8cb6a0f5685e1e24939fedb0e4","2005-10-16 13:31:57+00:00","There was a mention of the 'Expected XXX samples...' error in the IRC logs.
Without a proper bug report, it's hard to diagnose, but this change might
allow it to recover after such an error. Maybe.

svn-id: r19108
"
"c6a6d8945330c332219251bd58e379c5da5816f5","2005-10-16 13:53:15+00:00","Don't remove the cursor character from the savegame name until the very
last moment. Should fix bug #1327439.

svn-id: r19109
"
"8b1e22e964f2389851615bbd8a407e5d5bc094b9","2005-10-16 15:06:51+00:00","Be more careful when subtracting from unsigned values. Fixes bug #1327972.

svn-id: r19110
"
"824f9316bfe58cda593982285781e97f3f207f13","2005-10-16 16:39:00+00:00","fix mem align for arm processors by Koen Kooi

svn-id: r19111
"
"68c5fe52c2f92827f27bf9b68ffcd12ecd9ba61f","2005-10-16 16:50:05+00:00","Err.. Now really fix game detection. Not that it was wrong, but I forgot
to remove old leftover which plainly overewrote all those sophisticated
checks.

svn-id: r19112
"
"1529b1ad0a8d6da3587c0975df4b336e9f3cc490","2005-10-16 17:19:52+00:00","Store game title in savefile. Lets us not guess which game save is made for
as it is not possible to tell that by md5. Bumbed savegame version.

svn-id: r19113
"
"6a469a0f1bd7f3f382635720f2ed4ab0d336dddf","2005-10-16 22:12:00+00:00","Put correct order of MM NES verbs in help. Will try to make them work
later. Currently mapping is all wrong.

svn-id: r19114
"
"6471cf82d17b3dd09bcd0db9024412a76e50b13b","2005-10-16 22:32:46+00:00","Temporarily virtualize mouse drawing functions for the WinCE port. Hope that line endings are correct since I have to use TortoiseCVS for this update :)

svn-id: r19115
"
"1135e05ccd1d0e1a860542f1c2633c6ed5a4bd4a","2005-10-16 22:35:38+00:00","Support for Gobliiins and ITE engines

svn-id: r19116
"
"e1e60aa6318314ae68b12007c0677319dfb87257","2005-10-16 22:37:17+00:00","Newer Smartphones detection for Windows Mobile 5.0 - add some simulation options when debugging on a Pocket PC platform

svn-id: r19117
"
"e2eefba7dcb8e1ef57be87be4f7107d120dc19d4","2005-10-16 22:47:53+00:00","Update to use common GUI::Actions class

svn-id: r19118
"
"8b2d14324c591636eac940877ceb76c0fb1882db","2005-10-16 22:48:53+00:00","Support for Gobliiins and ITE engines

svn-id: r19119
"
"4317c0001e234bdff47a7b07a424819ae81567ab","2005-10-16 22:52:46+00:00","Windows Mobile 5 devices support (requires the latest SDL Windows CE port available on http://arisme.free.fr updated during this week) - Use the old mouse code to avoid scalers problems (to be fixed after 0.8.0 release)

svn-id: r19120
"
"ce1a66a3328b658f927a0271122d3fb9234a9658","2005-10-16 22:52:46+00:00","Windows Mobile 5 devices support (requires the latest SDL Windows CE port available on http://arisme.free.fr updated during this week) - Use the old mouse code to avoid scalers problems (to be fixed after 0.8.0 release) - Display/Hide the toolbar by double tapping quickly on the top of the screen to comply with the new GUI height

svn-id: r19121
"
"9bd5866df24fc1acf91a58173ce24d001442108d","2005-10-16 22:53:56+00:00","Toolbar must be visible to process an action.

svn-id: r19122
"
"a4bf8dd9c9ae6d90b5bb73188adcd23a879305d2","2005-10-16 23:07:37+00:00","Update build files. Add support for Gobliiins and ITE engines

svn-id: r19123
"
"3dd9f208cc6521aa92457c669e8301b1f3cbfd6d","2005-10-17 00:23:00+00:00","Add contributed Amiga Gob1 md5 sum

svn-id: r19124
"
"ee4cbcb98db2087627e597eea6d61afeab8e23b1","2005-10-17 03:28:21+00:00","Fix bug #1326833 'ITE: Missing copy protection'. Though it is disabled
by default by kind permission from Wyrmkeep Entertainment Co.

svn-id: r19125
"
"1a717471ba30aabff6bf442666676a8ad2dbce16","2005-10-17 06:31:10+00:00","Fixed off-by-one error when decoding the original sound files. I thought I
had already done this, but I guess not...

svn-id: r19126
"
"290c8114de0b5ce09689253b4a9d8825a5c79c21","2005-10-17 06:45:54+00:00","Fixed end credits crash. (See bug #1327650). Actually, there were several
more or less serious bugs here:

* The fnResetGlobals() function returned IR_CONT. Since it potentially
kills its own script resource, this can lead to illegal read accesses.
Not it returns IR_STOP instead. This was probably a bug in the original
interpreter as well, but it handled memory allocation quite differently
so it was probably never an issue.

* Since fnResetGlobals() forcibly closes resources, I've changed the
closeResource() function to silently ignore requests to close resources
where the data pointer is NULL. While it could signify an error, it isn't
necessarily so.

* Don't force the screen to fade up after the credits -- let the script do
it instead. This prevents it from fading up the wrong image.

svn-id: r19127
"
"4a9bf821435be76615e7ab676bd26c4555ba2a3e","2005-10-17 07:15:18+00:00","Decrease delay while editing savegame name. This way, there should be much
less risk of keypresses being lost.

svn-id: r19128
"
"8cb983416cf05d8dc114170a63f90259ffb92026","2005-10-17 13:06:58+00:00","Update supported HE titles.

svn-id: r19132
"
"6703167289c932e6bb12f98a441d0810809395bb","2005-10-17 13:50:06+00:00","Disable IHNM in 0.8.0

svn-id: r19134
"
"4a8d3957f401dd32f8f255080fb12ae1ab300ba4","2005-10-17 13:52:15+00:00","Disable gob2 in 0.8.0

svn-id: r19135
"
"c08038866841936ae376a2f477abf57f2b2485c3","2005-10-17 22:13:32+00:00","Fix HE version for Russian freddi3.

svn-id: r19141
"
"08178aa49d740ea19cf2b5fc454abfff743eb818","2005-10-18 02:11:28+00:00","Update FSF address. Ugh if I'd only know it and updated before branching :(.

svn-id: r19143
"
"1c3b47d134b7682341ff05638ae5abf552881ebc","2005-10-18 02:51:46+00:00","'Be careful with that axe, Eugene'. Reverting accidental change of all
binary files.

svn-id: r19145
"
"d4427df0390b70553f85a3014bc78c9f0e6edfb0","2005-10-18 04:28:58+00:00","Backport fix for bug #1221549 'MT32emu: doesn't compile under gcc 3.4.2 / i386'

svn-id: r19148
"
"766a7ff00fbf85777fe66cf8a4203192145eaffd","2005-10-18 13:58:03+00:00","HE games use overlow to get correct color value.
Fixes regressions in activity and puttmoon.

svn-id: r19151
"
"05d1dba6a48650a997357b59c0d1e33727158592","2005-10-18 13:59:48+00:00","Remove old debug output.

svn-id: r19152
"
"d7596540c9021583c8e482af85eea9d9f983175a","2005-10-18 19:10:15+00:00","Backport move of talkspeed and copy-protection options out of
#ifndef DISABLE_SCUMM

svn-id: r19155
"
"7cec46ab81eb7160f073b6cae3f5453c47ba121e","2005-10-18 20:09:39+00:00","Changing version to 0.8.0pre, as to more accurate.

svn-id: r19162
"
"6b70e44dc41c5888338dd627a08351d2ad34f2fa","2005-10-19 07:10:53+00:00","Fix TMSK in HE games.

svn-id: r19169
"
"7022ec133d431327504d4bf826b86f2c2de303ff","2005-10-19 07:42:58+00:00","Back port floodFill support for HE games, to fix puzzle in pajama2.

svn-id: r19171
"
"6495ae0295f963ae6bb1e00bc42b98711caa8891","2005-10-19 12:11:31+00:00","HE games require _arraysSlots and sound resource 1 to be saved.
Breaks all old saved games for HE games only.

svn-id: r19178
"
"845171eb0fdac510cd68a593a3c599cde79d1117","2005-10-19 13:39:26+00:00","Add additional files for floodFill in HE games.

svn-id: r19180
"
"c21297c7ecea8073e824c1d94e2fd7c69fd233f8","2005-10-19 13:47:10+00:00","Correct address

svn-id: r19181
"
"763b46d5b91ca222eae6956311f9a30cd7433ae3","2005-10-19 17:30:48+00:00","update

svn-id: r19185
"
"535a98df5f09a54520fc0254c9d6c6f5a372e493","2005-10-19 18:50:07+00:00","Disable serial for release.

svn-id: r19186
"
"b11c6edb0eff6fcbee7656ca4b3bfa7fe5851365","2005-10-19 19:29:54+00:00","Backport ActiveMark detection.

svn-id: r19188
"
"37e19a19f36dbc52e49655fe0a2e17ee9ce29b4d","2005-10-20 00:10:24+00:00","Correct version of early puttputt

svn-id: r19189
"
"e502157c6fc885db23769814b308f226ea68640a","2005-10-20 13:19:36+00:00","Changed som spaces to tabs.

svn-id: r19192
"
"cd11530124e77ea4ca9b1357489ac75366174353","2005-10-20 14:11:00+00:00","-Allow no speech in HE games.
-Added extra XMIDI control change cases for HE61 games.

svn-id: r19194
"
"40f1e24587f022c47fbd8b24e455ab00a998bfd6","2005-10-20 14:44:52+00:00","Correct version of early puttputt

svn-id: r19196
"
"bcae380b0453153530b91edb74b02f52ab623cf6","2005-10-20 14:49:34+00:00","Forget to set puttdemo GID

svn-id: r19197
"
"e0621067b9247de47eed180c39868aff88b51308","2005-10-20 19:36:30+00:00","Set S60 FM audio quality to low for performance reasons.

svn-id: r19199
"
"2078558ce43b4d2a2380b9d738cb1b2c8fd0ddf1","2005-10-20 20:11:06+00:00","Updated S60/Symbian build files

svn-id: r19200
"
"f028e0876d31897d259147516c5665a34dd1cae0","2005-10-21 01:36:04+00:00","Add XMAP support for wizImages.

svn-id: r19202
"
"f13c6b972c7aac7da6963d17406dd717fe276bdd","2005-10-21 02:25:20+00:00","Backport IMA ADPCM fixes. This fixes bunch of latter HE games.

svn-id: r19204
"
"44660b449a476043b5d729d33bcad78994d0e587","2005-10-21 02:30:49+00:00","Add XMAP support for actors.

svn-id: r19206
"
"cb363b3ad53b409b8ec93765bc947d9c14d32b95","2005-10-21 04:43:55+00:00","-Add three French HE demos
-Update titles of HE games

svn-id: r19208
"
"d0d805501e06a4ce1d64c15ee2b2dd82721dbd3c","2005-10-21 05:16:01+00:00","Add safety check for XMAP support, from original HE games.

svn-id: r19210
"
"d8dc5fa49fd9c53389e5bbeccaccdbe2c909e44e","2005-10-21 12:11:10+00:00","Actor layer in HE games uses an int32.

svn-id: r19213
"
"437e6881c2cb6872e337fb90e2f542742fe3d10f","2005-10-21 12:25:17+00:00","Enable XMAP support for akos codec 32.

svn-id: r19215
"
"b1efec270836167f938ef5238b902ee07c8cadaf","2005-10-21 14:32:00+00:00","add workaround for bug #1328045

svn-id: r19217
"
"4d5690cbf80b040af65b72753dfb00c86559f8de","2005-10-21 15:20:24+00:00","fix compilation warn

svn-id: r19218
"
"3e22edbca3467e57d8ea565cef293b10f8f011f9","2005-10-21 18:33:20+00:00","backported fix for bug #1329220

svn-id: r19221
"
"ef498f3b158816b3f404b2e82ca86dbbbd818421","2005-10-21 23:33:06+00:00","COMI delays use minutes too, so remove hack.
Confirmed with COMI disasm.

svn-id: r19227
"
"76a9c33c8e20b743f794342c936a791ed55f69ee","2005-10-22 00:04:57+00:00","Add French Pajama Sam demo.

svn-id: r19229
"
"c0bbcda2a128998241bcc6a7a1bb9a88617c571d","2005-10-22 04:12:08+00:00","Load/Save palette correctly in HE99 games.
Save actor shadows in HE games.
Back port compile warning fix.

svn-id: r19232
"
"0ffb25c2f85775be3fc1b3c1b0c4d3ef79dce01d","2005-10-22 10:53:16+00:00","backported room names fix for HE games

svn-id: r19238
"
"a64fca9b9fa16f666e1108d431c92585e3b33199","2005-10-22 12:54:22+00:00","Backported fix for bug #1333391. (If you can call a patch that applies
cleanly on both trunk and branch a 'backport'. :-)

svn-id: r19240
"
"26677dcdaab2eb6565246dfa06dab700aa3f7db2","2005-10-23 10:03:34+00:00","Unified Broken Sword 1 & 2 name (instead of I & II) -- usage is more consistent with other numerically numbered games (and also internally consistent). Work in progress.

svn-id: r19250
"
"3c891a14312856090864821bc1427694eeb89026","2005-10-23 10:45:32+00:00","Change Broken Sword I & II -> 1 & 2 in LaTeX docs, too

svn-id: r19252
"
"7866a38654a11c0fdb3529e14b2d38d2217534cd","2005-10-23 10:45:32+00:00","Change Broken Sword I & II -> 1 & 2 in LaTeX docs, too

svn-id: r19253
"
"d239421db1a07a66fbfe00985b061fd41f785e8a","2005-10-23 10:45:32+00:00","Change Broken Sword I & II -> 1 & 2 in LaTeX docs, too

svn-id: r19254
"
"44029d1f9d30f60fde039f7f567fab0173029ce5","2005-10-23 10:45:32+00:00","Change Broken Sword I & II -> 1 & 2 in LaTeX docs, too

svn-id: r19255
"
"35faf89319b6a4bbe9d30f73065260898e59ef36","2005-10-23 10:49:01+00:00","Some more Broken Sword I & II -> 1 & 2 changes

svn-id: r19256
"
"93a66001915cc0fd90ce712bc94f9d9ac7c5df45","2005-10-23 12:10:06+00:00","Correct subtitle speed keys in SCUMM.

svn-id: r19261
"
"b8af0f51d581637aed1463cfd65fece3c79e3ff6","2005-10-23 13:14:20+00:00","Remove talkSound from the sound queue in HE games, when stopping the talkSound.
Fixes bad talkSound in freddi when changing rooms.

svn-id: r19262
"
"d9316e46033f6b9d6790471abb6d154cbb895f84","2005-10-23 13:34:16+00:00","Add work around for bug:
1252606 - ZAK: crash when trying to fly back to SF

svn-id: r19265
"
"73a440b2153dd5ed122758b89ce3a240c4af3690","2005-10-23 13:45:10+00:00","Fix no sound effects regression in simon1.

svn-id: r19266
"
"ce3b31fa0b7b5984ca8e97d2feecf498dbd47fc7","2005-10-23 14:24:06+00:00","Workaround for bug #1311447

svn-id: r19269
"
"3f213a1e371df5d0d02ee8a956445e57d4549ed6","2005-10-23 23:15:11+00:00","Back port:
Fix link error with --disable-he

svn-id: r19271
"
"95596a6e0c4fb58c134e236edee3c01d6d36a9c2","2005-10-25 02:44:33+00:00","Add Macintosh version of pjgames.

svn-id: r19273
"
"fbe09a9cff0175651125cc1caebc3ca583004963","2005-10-25 02:50:16+00:00","Add work around for fbear regressions.

svn-id: r19274
"
"0ce44f603695a73a297eac9494888ba292b92414","2005-10-25 03:01:31+00:00","Add Macintosh version of a few HE games.

svn-id: r19276
"
"674d768a4a428d8abd96a6ff91eee1b741406bac","2005-10-25 06:57:21+00:00","various ps2 changes

svn-id: r19277
"
"3ff3d9cf6db91dbfcced85ee58eb2cf55581ea97","2005-10-25 06:58:20+00:00","enlarged heap size on the ps2

svn-id: r19278
"
"4205aea869134daeb93937719144dfb5408d442a","2005-10-25 06:58:56+00:00","#ifdef'ed some code for the ps2.

svn-id: r19279
"
"d3f9b1cf0784fed6066993d74a439aefbec814dc","2005-10-25 07:03:11+00:00","fix for bug #1153682:
BS1: 64-bit crash when menu appears

svn-id: r19280
"
"e8a71069d417f8e230dcf5ba76504cee3290f221","2005-10-25 15:28:52+00:00","Fixed bug #1337498.

svn-id: r19283
"
"7e24eda625a0d93a9bbf10fdd53d4a11fcb0aefe","2005-10-26 00:36:12+00:00","Match subtitle speed keys in original SCUMM games.

svn-id: r19285
"
"6dd087e121d659d46924b28166c7336bae742ae9","2005-10-26 00:48:27+00:00","Ooops

svn-id: r19287
"
"c08def397627d1754c579957a18a32a7cbf9ce7e","2005-10-26 02:13:09+00:00","Backport NL and FR Mac HE demos support.

svn-id: r19289
"
"1a4ab4444c50748129aea86de5eb31588ad1524b","2005-10-26 05:34:03+00:00","Add Macintosh version of Baseball2003 & Soccer2004
Add missing Pajama Sam 1 demo
Remove duplicate entry.

svn-id: r19292
"
"ecd8dafc1b3df14a8b5edfd3d557f7de19de8c06","2005-10-26 05:34:04+00:00","Add Macintosh version of Baseball2003 & Soccer2004
Add missing Pajama Sam 1 demo
Remove duplicate entry.

svn-id: r19293
"
"a5a98abe54652afc3048115febca131dfeaaa788","2005-10-26 05:36:21+00:00","copied from CVS head:
include the datafile's name in error() message when I/O errors occur.

svn-id: r19295
"
"aa8eeac778aa3caad0ae3384784056004dbd83ac","2005-10-26 05:36:59+00:00","Update

svn-id: r19296
"
"a389475f36a6a22c74e12c5599e67c4f8071b931","2005-10-26 05:40:24+00:00","Ooops, copied wrong file.

svn-id: r19297
"
"9510a563df9a9157c01a69a557c6b034a7836784","2005-10-26 06:08:37+00:00","copied from CVS head:
call OutSaveFile::flush() to check for errors

svn-id: r19299
"
"6b0e272254d12311bd89fe7b435b5fddaf9a4e63","2005-10-26 06:20:31+00:00","copied from CVS head:
fix for bug #1328022: BS1: savegame name text input ignores keypresses

svn-id: r19301
"
"6334f440ac918f77e1d2a4121e543c6ec71b17e2","2005-10-26 06:36:00+00:00","copied from CVS head:
added call to OutSaveFile::flush() and some more I/O error checks

svn-id: r19303
"
"21ba0a4a5cd805481c9cee8caa26ed3cec828768","2005-10-26 06:47:21+00:00","Limit to Macintosh versions, otherwise filenames in PC versions get scrambled.

svn-id: r19305
"
"a4e79c7e06478fcf89eb42458011f4241523e4c4","2005-10-26 07:14:22+00:00","Add patch, with slight change to dialog title:
1338105 - Possible fix for confusing 'talk speed' behaviour

svn-id: r19308
"
"d8b052713691703d2cef5154a3c45735b09a6d9e","2005-10-26 14:10:37+00:00","Add missing break. Thanks to Cody56

svn-id: r19310
"
"fe42c720590800d8f7e9d40c496edcab1cfd9bbb","2005-10-26 16:32:43+00:00","ps2 change, aligned all fio accesses to the size of an EE cache line.

svn-id: r19311
"
"2af45f9b6d64d6fdd4c30050a1311fd04ee73f0a","2005-10-26 16:34:58+00:00","removed junk

svn-id: r19312
"
"62983d2e5c1ab5940664d6a1dde250d7b08f5715","2005-10-26 17:04:43+00:00","ps2 specific change

svn-id: r19313
"
"06aaacbf81a9ddd30a1e6f922af483126360d8f0","2005-10-26 17:42:20+00:00","applied patch #1331972 + changaed deprecated option to new one in -tail-

svn-id: r19315
"
"d3ed13630c1dbb2bee62f48e1059f10850c10300","2005-10-26 18:09:22+00:00","forgot to remove this...

svn-id: r19316
"
"5d893e2d6a6020a4f9b1c77eee359d976f98268e","2005-10-26 18:14:55+00:00","Fix bug #1338596 'ITE: Crash when loading old saved game'

svn-id: r19318
"
"1e0b8b01b619d654f561e818e5e06a94a53b8290","2005-10-26 22:46:20+00:00","Update version number and correct typo

svn-id: r19325
"
"c9cd98a8abfd8954f9c37523e7ca16e0d0e9d478","2005-10-27 06:56:46+00:00","Set machine speed to fast in all HE games.
Fixes missing animation in old freddemo and maybe others too.

svn-id: r19328
"
"cf54ba6cdf3b5587e4c28acae141a82a365a20d1","2005-10-28 00:22:02+00:00","Checked sound in all supported ITE version. All was correct :)

svn-id: r19330
"
"a5a2464d887b8f412408cd80a7d48ac9e2c16468","2005-10-28 03:00:17+00:00","Quick fix for regression which broke great deal of HE games under gcc.

svn-id: r19332
"
"80af93d1eec8dc92cc8c5e67441cad173b3c703d","2005-10-28 04:30:47+00:00","Remove excess newline.

svn-id: r19334
"
"d874d089e27fc4efc3f052eaf9206cf8fdf31ad2","2005-10-28 07:01:54+00:00","Fix old airdemo/farmdemo regression.
Remove duplicate catalog target.

svn-id: r19336
"
"5d808684d8955c78c9f3e0fafdfecca7f79ab023","2005-10-28 07:48:38+00:00","Update catalog2.

svn-id: r19337
"
"9562a68f60a45c27272669fd04d90bf7eba34fe1","2005-10-28 07:49:25+00:00","Update catalog2.

svn-id: r19339
"
"9d4746889c04515f7965964264f4d37b625518d3","2005-10-28 11:42:48+00:00","Eliminate GF_MULTIPLE_VERSIONS. It is safe to do that right before tagging
because no new functionality was added, just removed one condition statement.

svn-id: r19341
"
"5d755a436dc27ec22f4a3829fd12704c9c6a350e","2005-10-28 18:57:50+00:00","Add dummy entry at end of substResFileNameTable[] and use that like in other
tables. Fixes crash on PSP

svn-id: r19344
"
"0b0c3fda6e578ea43241f8c47b5b685d027d961f","2005-10-28 19:03:55+00:00","0.8.0pre -> 0.8.0 and put release date. Tag is 2 hours away.

svn-id: r19345
"
"93ee28a0a5c2b7752502ffa1ee207ec4f01d50cf","2005-10-28 22:39:48+00:00","Since we're re-tagging anyway, add conditional building of a 2.00 firmware EBOOT loader compatible version.

svn-id: r19347
"
"2addde204cfe4afc3750b08c3703d86f9b262842","2005-10-28 22:43:54+00:00","Argh. Fixing release numbers 0.8.0CVS -> 0.8.0

svn-id: r19348
"
"41405d268ab5c8527b5630fae7d711b071918a0b","2005-10-28 22:48:49+00:00","Add sleep/suspend mode issue and clarification about 2.00 firmware support

svn-id: r19349
"
"d274357deb8e86767c0036caeb8c61358a528771","2005-10-28 22:57:14+00:00","Remove left overs.

svn-id: r19350
"
"1a3708f16444083b124455751a3dc79b843a82fb","2005-10-29 01:04:29+00:00","Last minute fix.

svn-id: r19354
"
