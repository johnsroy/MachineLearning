"commit id","commit date","commit message"
"a200be4bbf1f0fdf2b38ec09d5922e1b2eb11004","2005-10-17 13:02:51+00:00","Update supported HE titles.

svn-id: r19130
"
"f3c387f328123a8ed15fa45a9008033dc06aed8f","2005-10-17 13:42:36+00:00","Bump version to 0.9.0CVS. Woo hoo!

svn-id: r19133
"
"b4a4f779e3f45e5034f5985a5bc50d4dfb9b06f0","2005-10-17 14:20:18+00:00","Fix walking in IHNM. It appeared that BG mask wasn't flipped upside down
when everything else is :).

svn-id: r19136
"
"bb8afe3839493eac79cb6cc747c0d46d41f183ab","2005-10-17 15:00:23+00:00","Added ResourceManager::isLocked; made ResourceManager::flags protected; moved some stuff around

svn-id: r19137
"
"3bda82c8a38866ef636d352d97294c11dd41b3db","2005-10-17 16:10:12+00:00","Commit missing part of my last commit (sorry for any temporary breakage)

svn-id: r19138
"
"8fc363482d460c04c8a57d891a6fba335976e8cd","2005-10-17 16:28:33+00:00","Added French and Russian md5s for IHNM submitted in bugreports
#1328019 'IHNM: French MD5s' and #1094819 'IHNMAIMS: md5's of my cd version'
respectively

svn-id: r19139
"
"d59af537b5a702446a40af31aff4a95d4cd0a4bd","2005-10-17 22:12:33+00:00","Fix HE version for Russian freddi3

svn-id: r19140
"
"b36677af7101bc356c81dedf36302555515eb306","2005-10-18 01:30:26+00:00","Update FSF address. Eek. Actually that took place on May 1, 2005

svn-id: r19142
"
"b34013de97a4d11c208319deb399dd7a30439bf8","2005-10-18 02:47:29+00:00","Argh! Binary files got modified too. Reverting them.

svn-id: r19144
"
"b725a206c0c0eda1a508a994ffa28fcd7f3894ac","2005-10-18 03:52:21+00:00","Add possibility to disable SDL parachute on run-time. Option
--disable-sdl-parachute should be completely undocumented and not mentioned
to end-users. Wrong usage may lead to system lock-up especially when used
with fullscreen mode.

SDL Parachute is used to prevent system instability and do a graceful exit
if something bad happens. It catches most of signals sent to thr process.
Side effect of that that quite often when SDL application dies, core dump
isn't made on *nix systems. This feature adds possibility to disable it.

svn-id: r19146
"
"26ad88ec23157f322521aefd3f632759d1816a4a","2005-10-18 04:26:51+00:00","Fix bug #1221549 'MT32emu: doesn't compile under gcc 3.4.2 / i386'

svn-id: r19147
"
"62a59b2d46d2f92f3c6b3869ddbd4b4cf955bf56","2005-10-18 08:56:14+00:00","Minor error message fix: isLocked() isn't trying to unlock the resource.

svn-id: r19149
"
"0690343c656c6b5e9e517e230d9ab2fad98c9265","2005-10-18 13:56:10+00:00","HE games use overlow to get correct color value.
Fixes regressions in activity and puttmoon.

svn-id: r19150
"
"242cf5d052b8ce6a1f5bf97e1222d26905f782a7","2005-10-18 14:00:07+00:00","Remove old debug output

svn-id: r19153
"
"be8cd9e69a3d7ad7438cede27e331fdee2e479c4","2005-10-18 19:05:22+00:00","talkspeed and copy-protection aren't SCUMM-specific anymore SAGA uses them
too.

svn-id: r19154
"
"953b35a8c349200a2c25e58db1ec226e7de89755","2005-10-18 19:16:02+00:00","Fixed invalid memory reads, this helps thinker1 demo

svn-id: r19156
"
"e7c8dc025acde517dce149c97a314ae874e213dd","2005-10-18 19:16:17+00:00","Fixed wiz TRLE encoding

svn-id: r19157
"
"a38bc21581abedbeb30f371ed079c85cefa98596","2005-10-18 19:17:19+00:00","Added flood fill support. Pajama2 puzzle seems to be ok now

svn-id: r19158
"
"2e60e19a37d5247a8cb6c9f8233b242868e9efb7","2005-10-18 19:59:51+00:00","Some fixes:
- added support for an external data file for all the resources from
the original binary
- fixed a typo with malco(l)m
- added support for spanish floppy
- changes support for unknown languages a bit
- some other cleanups

svn-id: r19161
"
"6d5cdb6c546f54eda6120547280d1d8ec65d70d5","2005-10-18 20:38:30+00:00","Commited patch # 1324980. Thanks to vinterstum.

svn-id: r19163
"
"a050da784fd418a3f35cc3fd01e03ce34f33a402","2005-10-19 03:25:00+00:00","Simplified common buffer reader. Implemented now unused Microsoft IMA
ADPCM buffer reader. These folks invented ye another incompatible standard
and here it will sit #if 0'ed just for a case.

svn-id: r19164
"
"13246d0dadd236fb36eeeb12228e53101cdabc43","2005-10-19 03:29:55+00:00","Attempt to play IMA ADPCM speech in later HE games. For some reason
sound is noisy and all samples are cut in half. mplayer plays it with
same format without any noise but still half sample. It may happen
that original just played 2 consecutive samples or we read them wrong
from resources.

svn-id: r19165
"
"4306c9344cd00edff5b9a04152d68a1a7b0862aa","2005-10-19 04:59:18+00:00","Improved IMA ADPCM decoder. It appeared that MS violated yet another standard
and nibbles order in samples appeared to be swapped. Had to untemplate
whole thing over again because I have no idea how to speicalize one of two
parameters in templates.

Now voices are clean but have some ticks, looks like overload. ITE wasn't
broken ;)

svn-id: r19166
"
"12a66937cc582d350ad62cc52a4aa224df00f42c","2005-10-19 05:16:50+00:00","Fix crash in ADPCM decoder.

svn-id: r19167
"
"d3b96e431ce6480446672cec9ab25f2353dbeef7","2005-10-19 07:06:10+00:00","Fix TMSK in HE games.

svn-id: r19168
"
"64b5f32e81240dec7153cbe28091267cf49b6bf9","2005-10-19 07:16:17+00:00","Fixed compile error.

svn-id: r19170
"
"c6a9f614453b51839653507aac60dfe17fb4d1de","2005-10-19 08:44:14+00:00","Add HE100 version of floodFill.

svn-id: r19172
"
"a5e95b89c6a2aecca5dc78b637046e2c4838a20c","2005-10-19 08:45:08+00:00","Ooops

svn-id: r19173
"
"d91fc4c2267f3b02bbea1baf7b351a20768a2605","2005-10-19 09:43:13+00:00","Add missing opcode in HE100 table.
Rename opcode.

svn-id: r19174
"
"fa75045e5a1d82425e56b45db4130e9dd06144a6","2005-10-19 10:29:34+00:00","Whitespace

svn-id: r19175
"
"29c7193195daa708e26a70cb5edfa49ed6f1015f","2005-10-19 10:54:22+00:00","Cleanup

svn-id: r19176
"
"5fb75ec31cc07d2f14ef5d48b7f6f632d1611847","2005-10-19 11:32:25+00:00","Cleanup

svn-id: r19177
"
"ba780d65df2bfbfbe18c48b39bace42b518a4975","2005-10-19 12:15:36+00:00","HE games require _arraysSlots and sound resource 1 to be saved.
Breaks all old saved games for HE games only.

svn-id: r19179
"
"aa6683a0ebb873a6c2a62a5d35b79fec17cd05d9","2005-10-19 13:47:58+00:00","Correct adress

svn-id: r19182
"
"930c5e29ff838d6f69719ed4607b35c458adc5ab","2005-10-19 15:59:40+00:00","I hope I understood LordHoto correctly. This change fixes the English CD
version, at least.

svn-id: r19183
"
"2e02a160f473b71d94d931a1e5552d2386bb9052","2005-10-19 17:21:50+00:00","update

svn-id: r19184
"
"8527af69273cbeb7b0cf889bb16ea54edf115ff4","2005-10-19 19:26:53+00:00","There are almost 2 dozens of HE games provided as time limited full games.
Their data is encrypted by strong encryption technology ActiveMark.

Now we detect these games and refuse to run them. User is warned accordingly.

svn-id: r19187
"
"532e9318d337783c7f36d9a5512a6741e997d778","2005-10-20 00:11:35+00:00","Correct version of early puttputt

svn-id: r19190
"
"6e6a2f3187c950132fed59ab8a698a44923f484a","2005-10-20 13:08:43+00:00","Changed some spaces to tabs

svn-id: r19191
"
"3fbfad767c60f5851849ba1352604f2d826fb333","2005-10-20 14:08:35+00:00","-Allow no speech in HE games.
-Added extra XMIDI control change cases for HE61 games.

svn-id: r19193
"
"02f37bf2c30282e19587d7e446e1f60b15ff581d","2005-10-20 14:44:03+00:00","Correct version of early puttputt

svn-id: r19195
"
"06c0f2902806d2cfca4123ae6cfaaeaf710c2623","2005-10-20 14:49:48+00:00","Forget to set puttdemo GID

svn-id: r19198
"
"79f5ecb1bbb7c8db503043385b3dc2a5b2313e7a","2005-10-21 01:34:41+00:00","Add XMAP support for wizImages.

svn-id: r19201
"
"37fbcf61adcc4c42581c6fd3ee0735b8b4a0d2df","2005-10-21 02:00:12+00:00","Fix MS IMA ADPCM decoder. I like Microsoft so much for reinventing another
standard.

svn-id: r19203
"
"82600ddcfa42c3bebde0be1e1dbe9da15488c2cd","2005-10-21 02:26:24+00:00","Add XMAP support for actors.

svn-id: r19205
"
"98be21cd3908e0bd7ed9d92efdc334b38bea8685","2005-10-21 04:42:14+00:00","-Add three French HE demos
-Update titles of HE games

svn-id: r19207
"
"9569287a1b84ea72d44ca46857f86f422d60d5d1","2005-10-21 05:15:10+00:00","Add safety check for XMAP support, from original HE games.

svn-id: r19209
"
"8cc72cc03b37753de7c047d736031358e3de15a5","2005-10-21 10:28:59+00:00","Disambiguate code semantics (fixing a compiler warning)

svn-id: r19211
"
"159958dbc79ab1af227753b664cec68764d835f9","2005-10-21 12:06:03+00:00","Actor layer in HE games uses an int32.

svn-id: r19212
"
"0167c3ad0cd8df1118e52a5693591cc9cd08aa68","2005-10-21 12:23:45+00:00","Enable XMAP support in akos codec 32.

svn-id: r19214
"
"37660b0b0a619de100ed4509ad869277cf8e49f8","2005-10-21 14:30:11+00:00","add workaround for bug #1328045

svn-id: r19216
"
"75e02d2da994d1c487700a7754d6d8d3c38cb2f7","2005-10-21 15:26:57+00:00","fix compilation warn

svn-id: r19219
"
"a915961234e319b9859a08cbd3b10ea06d3fd925","2005-10-21 17:43:30+00:00","Gdi::dbDrawMaskOnAll shouldn't be set in COMI, this fixes bug #1329220.

svn-id: r19220
"
"268f12a5c05108c4c66a130307997f39bd7055f9","2005-10-21 22:49:59+00:00","Added a warning (this is a very tempting way to break savegames :-)

svn-id: r19222
"
"1185f51388ba146e300429516093d77f06b6ecdf","2005-10-21 22:50:39+00:00","Useless

svn-id: r19223
"
"ffc5e1718f69954d08802ee3a134861b859f76a5","2005-10-21 23:01:13+00:00","Started to make the save/load system slightly more object oriented

svn-id: r19224
"
"b5e63f5bfb76a4002be5a7c081b0f3fc6d61a231","2005-10-21 23:04:58+00:00","Turn class Sound into a Serializable

svn-id: r19225
"
"907c0835d06921fddb2146de29616e65f5e614e4","2005-10-21 23:31:23+00:00","COMI delays use minutes too, so remove hack.
Confirmed with COMI disasm.

svn-id: r19226
"
"b18435125f7b69c1c23518edacb763f927bd55c8","2005-10-22 00:04:36+00:00","Add French Pajama Sam demo.

svn-id: r19228
"
"4079dd03b14c393932699db988062d0c1e5548c5","2005-10-22 00:24:07+00:00","Implemented correct cursor handling.

svn-id: r19230
"
"3374e399b59cc77ffe14eba180fd27319ea3dba9","2005-10-22 04:08:48+00:00","Load/Save palette correctly in HE99 games.
Save actor shadows in HE games.

svn-id: r19231
"
"883fe108d202cba21210d12f5efeed376b45fd60","2005-10-22 08:19:28+00:00","Gdi::dbDrawMaskOnAll doesn't need to be set in TheDig and FT sets it when object has class 31.

svn-id: r19233
"
"fe5ccbb2df78dba06ce12d7fb84ea768178ba3f3","2005-10-22 09:32:48+00:00","Add debug msg.

svn-id: r19234
"
"6a911e65f0353fb3233236f0b17c4adf518cc24a","2005-10-22 09:49:34+00:00","Ooops, added label for that debug msg.

svn-id: r19235
"
"e611a3ccb0f57d6da5049face2ee63fd5e8973a7","2005-10-22 10:41:28+00:00","This apparently fixes a crash in 'PuttPutt enters the Race'. Thanks Dark-Star. Also added some assert() calls.

svn-id: r19236
"
"eeee881514cec76ed3a8f9e47ec2e89c0d408797","2005-10-22 10:48:14+00:00","As Kirben suggested, increasing room name buffer

svn-id: r19237
"
"f8981765e924ecd632a99072287af7254eb9c4fc","2005-10-22 12:47:09+00:00","Cleaned up some cursor show/hide handling. This should fix bug #1333391.

svn-id: r19239
"
"d8aa978ae74ae7ee00c38cb3aa0ec47050e47d46","2005-10-22 12:59:16+00:00","Made the shape handling endian safe, also renamned some functions and
variables. (mostly the *Helper functions and decodeShape -> encodeShape)
But kept mouse handling.

svn-id: r19241
"
"ea85d8c0848d465aa20ddd973a4e4cdf7b23b7cc","2005-10-22 21:04:07+00:00","Fixed a double loading of shape 10,
and corrected mouse cursor region backup.

svn-id: r19242
"
"8269b7bdc225971f4a9356413768f6aaf7675e79","2005-10-22 22:18:44+00:00","Switch iMuse to use Serialiazable, too (at least partially)

svn-id: r19243
"
"3f20bdb34afb04bf27733bd34231480cd7fca30f","2005-10-22 22:54:59+00:00","No need to pass savegameVersion to saveOrLoad, the serializer already knows it

svn-id: r19244
"
"b9b49c3b55a3625f9a56fb47ca0001f069739fed","2005-10-22 23:08:14+00:00","Reduce header dependencies (for quicker recompiles)

svn-id: r19245
"
"899eb271c6ade38b4fe4ebe82131591124e9f68e","2005-10-22 23:42:12+00:00","Got rid of 'ref' code (or rather: hack) in the save/load system

svn-id: r19246
"
"117192363ce2ef458f0a234100aaf2b979c4a1a3","2005-10-22 23:47:39+00:00","V7 savegames actually aren't supported; fix comment

svn-id: r19247
"
"578dc7914ecc24cac00559fc7448435ff839ae7f","2005-10-22 23:49:29+00:00","Gee, should pay more attention and read comments I myself added years ago...

svn-id: r19248
"
"ae6fb05c8fc26ce1343d1c10bb98bfa43f289b67","2005-10-23 10:03:28+00:00","Unified Broken Sword 1 & 2 name (instead of I & II) -- usage is more consistent with other numerically numbered games (and also internally consistent). Work in progress.

svn-id: r19249
"
"0dbe7e912217108f022378a722a538e8c7f528ed","2005-10-23 10:45:32+00:00","Change Broken Sword I & II -> 1 & 2 in LaTeX docs, too

svn-id: r19251
"
"b57b1dc98069c7faaa670effebd2b27ffea83dee","2005-10-23 10:45:32+00:00","Change Broken Sword I & II -> 1 & 2 in LaTeX docs, too

svn-id: r19252
"
"a39932a228c6d8db8a72fb338bef6c78b3ad0299","2005-10-23 10:45:32+00:00","Change Broken Sword I & II -> 1 & 2 in LaTeX docs, too

svn-id: r19255
"
"1eed529803d7022da798320ffa9beed8a62b5b4c","2005-10-23 10:49:34+00:00","Some more Broken Sword I & II -> 1 & 2 changes

svn-id: r19257
"
"2e6b615c91d32077fa3d28fbc7233da8752bec92","2005-10-23 11:14:25+00:00","Make sure error message is consistent regardless of endianess

svn-id: r19258
"
"cd8533d722b288a3f73c997bc525eb2648cdd4fb","2005-10-23 11:17:15+00:00","Cleanup.

svn-id: r19259
"
"4cb4bf4d543c73d6f014c0409fffe33dad7c4da1","2005-10-23 12:08:03+00:00","Correct subtitle speed keys in SCUMM.

svn-id: r19260
"
"53e08e9a703e1aa625558771c693ea0f48666865","2005-10-23 13:16:39+00:00","Remove talkSound from the sound queue in HE games, when stopping the talkSound.
Fixes bad talkSound in freddi when changing rooms.

svn-id: r19263
"
"f874a87c903aa89a3ab445a4fe77d11972dea976","2005-10-23 13:34:06+00:00","Add work around for bug:
1252606 - ZAK: crash when trying to fly back to SF

svn-id: r19264
"
"5eba9ee36c5f52e2e3fe425403c3ab356e49a79d","2005-10-23 13:45:20+00:00","Fix no sound effects regression in simon1.

svn-id: r19267
"
"c1ff7c83678f2080a1ec23bfdeedb6a955478e47","2005-10-23 14:21:20+00:00","Workaround for bug #1311447

svn-id: r19268
"
"6b36c763d1d6dcdcc4a89598c58d0e6bbaeebc94","2005-10-23 19:29:23+00:00","Fix link error with --disable-he

svn-id: r19270
"
"eaa7dd3dc98686d8bf5e60981a5166e40fd18439","2005-10-25 02:43:05+00:00","Add Macintosh version of pjgames.

svn-id: r19272
"
"164e44e989e9a9354706886eca2afa792a1dd014","2005-10-25 03:00:26+00:00","Add Macintosh version of a few HE games.

svn-id: r19275
"
"b9f0c4dcb7895b680030ae821104cceeb476c416","2005-10-25 10:00:50+00:00","Fix md5 entry for pjgames.

svn-id: r19281
"
"6d5ae3ffdaf75168d928ddbf42c03372c9339e42","2005-10-25 15:20:19+00:00","Fixed bug #1337498.

svn-id: r19282
"
"b8b130b5a9be4d2dd19082c11d98c1ad806eb6ac","2005-10-25 22:47:42+00:00","Add French and Dutch Mac HE demos. Noticed and described same bug in some
of them which seems to be a regression.

svn-id: r19284
"
"ddfa034c106d0e00556d78380415ac6c0237c202","2005-10-26 00:36:23+00:00","Match subtitle speed keys in original SCUMM games.

svn-id: r19286
"
"490550a1a4c710f5b1192484a178ae3d129ff935","2005-10-26 00:48:34+00:00","Ooops

svn-id: r19288
"
"0aaecdcf2f1b4ec0799b159768bbcc56b9cf8a79","2005-10-26 05:06:52+00:00","fix for bug #1153682:
BS1: 64-bit crash when menu appears

svn-id: r19290
"
"6cb96049fb40b71e5c467d57755d401680c76737","2005-10-26 05:33:23+00:00","include the datafile's name in error() message when I/O errors occur.

svn-id: r19291
"
"5981a1c60e8007c6b4c7b016df838ccff14fed6f","2005-10-26 05:34:03+00:00","Add Macintosh version of Baseball2003 & Soccer2004
Add missing Pajama Sam 1 demo
Remove duplicate entry.

svn-id: r19292
"
"f043bfa38d90ceb5d51dd7dc57b14b5d3dd1706b","2005-10-26 05:34:31+00:00","Update

svn-id: r19294
"
"6f1016e71f61e398b7b7cf1e4cfeb8dcdbb11766","2005-10-26 06:00:18+00:00","call OutSaveFile::flush() to check for errors

svn-id: r19298
"
"722e9a7986ee7d02f6b6ccc0fce588a4d1150d12","2005-10-26 06:16:14+00:00","fix for bug #1328022: BS1: savegame name text input ignores keypresses

svn-id: r19300
"
"ccd7557a87ff63a4dca00c589f24cb9f4baf100c","2005-10-26 06:30:28+00:00","added call to OutSaveFile::flush() and some more I/O error checks

svn-id: r19302
"
"70ea15410d5848238c2412cb7c2cf29eb3d42520","2005-10-26 06:37:09+00:00","removed old and unused defines.

svn-id: r19304
"
"b81b771d1542a476f0372a761d1c6acda6a54ae5","2005-10-26 06:48:07+00:00","Limit to Macintosh versions, otherwise filenames in PC versions get scrambled.

svn-id: r19306
"
"917cb5624d28af605cb9eb77fd21eb5e52efeeac","2005-10-26 07:13:33+00:00","Add patch, with slight change to dialog title:
1338105 - Possible fix for confusing 'talk speed' behaviour

svn-id: r19307
"
"1ab6688d24a7ffeea48bc2d6ab384e3504027d40","2005-10-26 14:08:45+00:00","Add missing break. Thanks to Cody56

svn-id: r19309
"
"a9a07a5965fe6a2d5ede121fe2ceca5c8fd5a4cd","2005-10-26 17:39:23+00:00","applied patch #1331972 + changaed deprecated option to new one in -tail-

svn-id: r19314
"
"73e715f1d18db302e666c13e356a9d9c136665b0","2005-10-26 18:11:11+00:00","Fix bug #1338596 'ITE: Crash when loading old saved game'

svn-id: r19317
"
"9a85839aa442726b05ce7cf126183bef027a6338","2005-10-26 18:32:58+00:00","fixed compilation, changed to struct as it's declared

svn-id: r19319
"
"013624f345c758a0a8e1bb88acdaddf604161471","2005-10-26 18:39:06+00:00","that 3 memset() are not needed

svn-id: r19320
"
"6359cbdd1d37bde258caf8cd4b17f05f7ed5cfcf","2005-10-26 19:39:53+00:00","fixed memleak

svn-id: r19321
"
"6db84972703621078078a483ddc1e96e102627f6","2005-10-26 21:17:55+00:00","added optimisation on sound file name searching

svn-id: r19322
"
"60f18e83aa2e29456335032e20e8c4c3ce442d90","2005-10-26 22:47:36+00:00","Update version and correct typo

svn-id: r19326
"
"19aab114d879295c386cbd9e018f740777b745e8","2005-10-27 06:51:42+00:00","Set machine speed to fast in all HE games.
Fixes missing animation in old freddemo and maybe others too.

svn-id: r19327
"
"a7c55e274d0073f520b1945af894c1ee1ebbb902","2005-10-28 00:19:50+00:00","Checked sound in all supported ITE versions.

svn-id: r19329
"
"a7a17969c312256238f67fba337f4fdc047130c8","2005-10-28 02:56:18+00:00","Fix long standing regression actually caused by compiler bug. Proper
fix is required.

svn-id: r19331
"
"e1eb5d73bc67abeb0fdadeac6bcae95814f7b2e2","2005-10-28 04:27:54+00:00","Remove excess newline.

svn-id: r19333
"
"572fbb7915965ea121afbaa794d1ab4025caf1ce","2005-10-28 06:58:33+00:00","Fix old airdemo/farmdemo regression.
Remove duplicate catalog target.

svn-id: r19335
"
"904707b8a79755b89d8a45fc5b3faa8336135054","2005-10-28 07:48:53+00:00","Update catalog2.

svn-id: r19338
"
"900a0749760d68f8fad151cb721222d3a330899a","2005-10-28 11:41:07+00:00","Eliminate GF_MULTIPLE_VERSIONS. We had just few targets without that
flag, and potentially those could go away too. So it is less error-prone
to always check additional MD5 table.

svn-id: r19340
"
"f1ac01cdcb814a40b033289f5bf6036eb88bd928","2005-10-28 18:42:16+00:00","0.8.0 release date is known

svn-id: r19342
"
"eda2b6f3376513c0e36e55383f8317a5bea6578d","2005-10-28 18:55:56+00:00","Add dummy entry at end of substResFileNameTable[] and use that like in other
tables. Fixes crash on PSP

svn-id: r19343
"
"316d9bb378288c9a08e0a94a684ba067567dce28","2005-10-28 22:32:03+00:00","Allow easy building of userspace-only version (for firmware 2.00 EBOOT loaders)

svn-id: r19346
"
"5413f4c73c12e09d86678d550f9653f682e7f903","2005-10-28 23:02:10+00:00","Remove left overs.

svn-id: r19351
"
"05aa0a6958bf851c6badb1be421b77f7c2bfa422","2005-10-28 23:24:45+00:00","Add sleep/suspend mode issue and clarification about 2.00 firmware support

svn-id: r19352
"
"0b438df7ce91b0db78daffda77adcadfb02908f0","2005-10-29 00:44:30+00:00","Put shadow_table under DISABLE_HE

svn-id: r19353
"
"e90ba2e929b48abe735057a8d36b594ec1810ea2","2005-10-29 01:59:18+00:00","Read from XMAP resource directly, instead of reading into memory.

svn-id: r19357
"
"04e3dafcdbb5ab474a9d319ed706d5968b091ee4","2005-10-29 03:14:18+00:00","Reset when not used.

svn-id: r19358
"
"9845fab51b2e58075d2b3c8a614147b50f68c362","2005-10-29 04:48:47+00:00","Add additional checks in later HE games.

svn-id: r19359
"
"a47cc783e47b8153dea8fa33140805ff1ee3f32b","2005-10-29 04:52:26+00:00","Only applies to SCUMM 3/4.
Fixes mask issues when lifting crate in airport.
Fixes masking issues in digdemo (Bug #1288652).

svn-id: r19360
"
"50cc43ba5845a1017f876bc84cd6b7d05950d8b5","2005-10-29 18:37:40+00:00","Implemented some basic opcodes, and basic character drawing, also
started to change a bit of the sprite code (thanks to vinterstum for his work)
It is still WIP code and breaks CD version, since all the used tables have to
be located in one cd version binary.

svn-id: r19361
"
"5168a757ab2243a00ef464ff96e5bc6f40ad31c1","2005-10-29 18:43:03+00:00","Update Mac version strings

svn-id: r19362
"
"654c2049d06e9f350e21d68705c43d11e32bc1e2","2005-10-29 18:45:48+00:00","Updated/fixed more version strings in HEAD

svn-id: r19364
"
"bcccd3f558bbbdab07d355dabfb072298e4f5cf2","2005-10-29 19:07:43+00:00","Oops, fixed a segfault with CD version.

svn-id: r19365
"
"7f4cda6622990b7aa26e433ecdc8f17b8a3b237d","2005-10-29 21:24:54+00:00","Applied my own patch #1341495, in an attempt to fix alignment issues
reported by Crilith.

To elaborate a bit, the engine no longer accesses resource data through
packed structs. Instead it uses memory streams and the READ/WRITE
functions.

If data is mainly read, not written, I have replaced the old struct with a
new one with a read() function to read the whole thing from memory into the
struct's variables, and a write() function to dump the struct's variables
to memory. In fact, most of these write() functions remain unused.

If data is both read and written, I have replaced the struct with a class
with individual get/set functions to replace the old variables. This
manipulates memory directly.

Since I'm fairly sure that these structs are frequently stored as local
variables for a script, all script variables (both local and global) are
stored as little-endian and accessed through the READ/WRITE functions,
rather than being treated as arrays of 32-bit integers.

On a positive note, the functions for doing endian conversion of resources
and save games have been removed, and some general cleanups have been made
to assist in the rewrite.

Initial reports indicate that this patch indeed fixes alignment issues, and
that I have not - surprisingly - broken the game on big-endian platforms.
At least not in any immediately obvious way. And there's still plenty of
time to fix regressions before 0.9.0, too.

svn-id: r19366
"
"4b10d4077ce6bb47586dd0d11621cb94ef703fdf","2005-10-29 21:30:12+00:00","Updated BS2 news / issues.

svn-id: r19367
"
"6bdc74c514c767ef3512c213d769439698999e6c","2005-10-30 02:22:53+00:00","Shadows are used in HE90 too.

svn-id: r19368
"
"3d402c2439dc2263751da5405094857597339047","2005-10-30 04:02:45+00:00","Correct kernelSet case function.

svn-id: r19369
"
"ce3d1f204955064d284b53e287a9c4b138f6f55d","2005-10-30 09:40:59+00:00","Let's try to word wrap at about char 72 in the NEWS file for the future (makes it easiert to use extracts of the NEWS file in various places)

svn-id: r19370
"
"089ce9a9825015839f6794c3de90d04803a59b43","2005-10-30 16:21:54+00:00","Always fade down the palette at the end of the credits. This fixes a
palette glitch that would only happen if the credits were allowed to run in
their entirety.

svn-id: r19371
"
"e9e4b886aa4a4cda68def726dc8cae7c715bfafd","2005-10-30 16:32:21+00:00","Fixed formating with sword2

svn-id: r19373
"
"cd6e35cdb85b3213a6eb4032697a942991141197","2005-10-30 19:58:51+00:00","Implemented initSceneObjectList, fixed bug with wrong drawn mouse,
also fixed a bug in loadCharacterShapes.

svn-id: r19375
"
"0063257a2bf4284b50945f337b81db951cfad364","2005-10-31 01:50:51+00:00","Fix another HOME buffer overflow attack vector

svn-id: r19376
"
"9cb06c2a5d0a6887fd0bffeae0715bcf92565c53","2005-10-31 19:48:48+00:00","- VAR_CHARCOUNT isn't set in v7/v8, removed reference to it from v7::actorTalk()
- simplified some versions related checks

svn-id: r19378
"
"b7d57c9284389c3f1130b5ab103928bc595efe46","2005-11-01 00:52:25+00:00","Add floodFill support for wizImages.

svn-id: r19379
"
"8eaa89863aafae3b76f50c2ec319c1998ab71773","2005-11-01 02:43:54+00:00","in v7/v8, remapPaletteColor() ignores color 255
in v7, remapPaletteColor() ignores colors setup by initCycle()

svn-id: r19380
"
"9b1c0e3326efa80f1935bcacc059dd6783dd99f0","2005-11-01 11:18:50+00:00","Add cd check to gobliins engine.

svn-id: r19381
"
"be1cf8c0e4865ca54c145a1ab7671a17e7e84d20","2005-11-01 11:27:41+00:00","Wrap sentance lines in NES maniac.

svn-id: r19382
"
"ed8fb560b5d01e6761e3a3db1ab98cb111a08bed","2005-11-01 13:55:53+00:00","forgot to clear _colorUsedByCycle at startup.

svn-id: r19383
"
"29722f03d377c990f5fb5715141553ebd874e2b9","2005-11-01 13:56:04+00:00","updated mouse position whenever the user clicked or moved the mouse. This can be useful for systems with touchpad / pen.

svn-id: r19384
"
"e763d1e060b9652923474fad620d6672bce4d120","2005-11-01 13:56:11+00:00","added OutSaveFile::flush() / OutSaveFile::ioFailed() to check for errors.

svn-id: r19385
"
"c3ef43fd6bf00f1285c3ba067e9f686559656eac","2005-11-01 14:19:50+00:00","Implemented the pathfinder and applied patch # 1342902.
Also added debug printouts to some functions.

svn-id: r19386
"
"934fe916205c15eab37ac866c83156609205574e","2005-11-01 18:52:21+00:00","Clear the sound queue when starting a cutscene. They usually (always?)
herald a change of scene, so it should be ok. And it keeps the crackling
fire at the end from playing over the end credits and the End of Game
dialog afterwards.

(If we change the sound engine to do looping manually, instead of letting
the mixer handle it, the looping will not be seamless and we'll still get
the crackling fire over the dialog after the credits.)

This change is probably safe for 0.8.1, assuming we make one.

svn-id: r19387
"
"855340aac875948f8dfd5b820143f30e8647dff2","2005-11-02 07:50:45+00:00","Update the ru charset table.

svn-id: r19388
"
"a254a93698db215c7ba6e9697180d2cbf4e2714e","2005-11-02 12:13:04+00:00","Add contributed md5 for indy3 5.25' EGA.

svn-id: r19389
"
"e5344d0c0f2be116cfb5c4c542a7122061d294ca","2005-11-02 13:19:53+00:00","Add German putttime and possible fix for German Freddi1.

svn-id: r19390
"
"bcb2b39e635acf04c47ddc4956529467a247d6cc","2005-11-02 13:20:43+00:00","German freddi1

svn-id: r19391
"
"419cc6898780f62b01b062aadf2bd119d7f87e5f","2005-11-02 15:58:13+00:00","Fixed compile error.

svn-id: r19393
"
"aadfc0f5ed2b3147f5add2cf51573b09ca3deed8","2005-11-02 17:04:44+00:00","Used the Array class for storing the end credits lines, rather than a
statically allocated one. I hope I'm using it correctly.

svn-id: r19394
"
"e3cdcdfcb8cfc69617e4853693911750efcef80c","2005-11-02 19:04:07+00:00","Fix error in HTML md5 presentation.

svn-id: r19395
"
"5e75092decb10ee760d62e2b42272b70eda05e2e","2005-11-02 20:50:37+00:00","Avoid using powf/expf/logf under Mac OS X, as they cause binary & compile incompatibilities with older system versions

svn-id: r19396
"
"c84d1ada32bb2093ee7a5d20a73b9c342eca4f11","2005-11-02 21:47:44+00:00","To match the original v7/v8 interpreters, use BlastTexts to display the subtitles. This allows to fix the bug #1092993. As this is quite an important change, regressions may appear. You've been warned :)

svn-id: r19398
"
"f8e4ce2134769a219e06cfdedfd967afdf124edf","2005-11-03 02:24:53+00:00","Cleanup HE changes.
Fix 0xFE check in drawString() too.

svn-id: r19399
"
"756422830fa0de22062d96fae8a17368e0e1ad0d","2005-11-03 07:27:36+00:00","Removed left-over debugging message.

svn-id: r19400
"
"d37aaef6a2e92d95f8933f03ba59d106a2cb0d3a","2005-11-03 07:28:21+00:00","Initialise variable.

svn-id: r19401
"
"b14417537fa308fd7e02ead180e6215fb609f27a","2005-11-03 07:28:46+00:00","Removed commented lines.

svn-id: r19402
"
"4d8e8b5487b5c4520e46a77afa7fc55616ec2e51","2005-11-03 09:47:19+00:00","More credits cleanups/fixes.

svn-id: r19404
"
"3532271973576c30869aa1113ee12d5f132519a9","2005-11-03 10:06:17+00:00","Add safety check for charset codes in HE72+ games.
Since charset codes and characters share some values.

svn-id: r19406
"
"e5bc7fd570a489823c03dab703f8243414a19800","2005-11-03 10:12:12+00:00","Ooops

svn-id: r19407
"
"8dd71c78b34ea3eaa747ce431fcb615108b03465","2005-11-03 11:11:46+00:00","Fix mdoc typo.

svn-id: r19408
"
"f4fcbf43d0137a058dabac8a5f2b2eb651787e50","2005-11-03 11:17:50+00:00","Add another freddi2 verison.

svn-id: r19409
"
"7f691c3ca2068e708915b968a6f210ec205ce442","2005-11-03 11:32:19+00:00","Limit to 80 char width again, kill a few spaces at EOL.

svn-id: r19410
"
"43a083a117a42879a18ea4c3a5e721d261fb8489","2005-11-03 18:20:12+00:00","-implement font substitution funcs
-move puzzle data to itedata

svn-id: r19411
"
"cc51550503c06051ae04eb105e6874b9482844e0","2005-11-03 22:23:23+00:00","Fix compile.

svn-id: r19412
"
"4a2bbb0e523c07915ff1eb3eac68bd3d6147a437","2005-11-03 22:38:10+00:00","Add german version of putttime.
Make guess at correct HE version for german version of freddi/putttime.

svn-id: r19413
"
"cbe5f667c203de9afc52b892eb19431322537884","2005-11-04 00:42:30+00:00","Changed the tool so it compiles with g++

svn-id: r19414
"
"b396a6c7936679cc0c288b608e19b359a0cae5c7","2005-11-04 00:43:36+00:00","Wrote a makefile and a readme

svn-id: r19415
"
"3903042d2f849739e2cbb78f2b19d79a77466156","2005-11-04 01:04:57+00:00","Small correction. Sorry, Lavos.

svn-id: r19419
"
"25336c36069ec1da5e00e8c24dd0dcbf52f49548","2005-11-04 01:12:20+00:00","Values should only be set in HE99+.
Remove fixme, that difference in normal for ScummVM.

svn-id: r19421
"
"58200eef8ec669800b39b0020fdb67486ec14a76","2005-11-04 04:53:48+00:00","Corrections to fillWizRect().
Fixes asserts in pearl locations of spyozon.

svn-id: r19422
"
"7cef807757a8f2e43c09d10a2ab0af5bbfbfe92f","2005-11-04 09:57:13+00:00","Fix subtitle regressions.

svn-id: r19423
"
"eaf2f611f719c124e467d0b19bf24ff72065cf3c","2005-11-04 10:21:16+00:00","Correction for shapes drawing in fun shop titles.

svn-id: r19424
"
"549a052967c4c4d1c2d313b3eb2d520960e963e7","2005-11-04 13:09:57+00:00","Cleanup, remove hacks.

svn-id: r19425
"
"5d7a97690fea3f87979e5306916439f389f3f993","2005-11-04 15:40:54+00:00","fixed bug #1345130: BS1: Scrolling regression.

Could possibly cause other problems, needs testing.
Testing, also in respect to #1077394

svn-id: r19426
"
"31160e1de50780df22e66236038eef86d80a5905","2005-11-04 22:31:13+00:00","Update HE version for German version of freddi/putttime.

svn-id: r19427
"
"32992c56451fda923e17f185d0f486f25884c9c0","2005-11-04 22:34:30+00:00","Ooops

svn-id: r19428
"
"3dc93027fbff2ff6663451bdc49e13d47fee25ab","2005-11-04 23:52:01+00:00","Add missing case for HE games.
Fix regression in HE games I caused.

svn-id: r19429
"
"d2cf37c2081d1e35a65f3691cd170fc181c20730","2005-11-05 00:11:49+00:00","Match original games, caused assert in earlt versions of freddi.

svn-id: r19430
"
"772bb686a7bc390d2bcc9c2dca443209dec92f55","2005-11-05 00:14:34+00:00","Correct value.

svn-id: r19431
"
"b9703644d14ea27c30ae053c6b7b001e6e2a75fa","2005-11-05 00:17:09+00:00","Broke FF.

svn-id: r19432
"
"1f36acc50ba666d0e22d89fe0475c580dede83f7","2005-11-05 09:23:05+00:00","Add missing else.

svn-id: r19433
"
"1f8ffb5df72032fda624c688231acdf2a8a61a45","2005-11-05 09:59:36+00:00","Fixed quazzy question mark character in charset data. This should fix bug #1348072.

svn-id: r19434
"
"1c65e2e4579bba172d8e8dc20ed3b70a52b97ed3","2005-11-05 10:15:41+00:00","Added constructor

svn-id: r19435
"
"e8057ee9dfe7bcc2166992b8568dc7fc938b5ea0","2005-11-05 10:19:28+00:00","- Added constructor
- Don't make normal stretch mode full screen so that key state can be displayed

svn-id: r19436
"
"dfe8fc25b4cc170f3334b9ccb23b312e63ed945f","2005-11-05 10:22:33+00:00","ARM prefix files

svn-id: r19437
"
"d4e1a3997d92cf83d7161bb6b430403234dd842c","2005-11-05 10:26:46+00:00","New cards form

svn-id: r19438
"
"5dd6c51c77d2714b224cf85dfd83be1640cb3136","2005-11-05 10:30:13+00:00","- Engine list is now based on an external list
- Added render mode
- Removed master volume, now palm volume
- Fixed small memory leak on form close

svn-id: r19439
"
"c6bacf3b38dd34b4a9bdb0fadb1fc88638584ec9","2005-11-05 10:34:47+00:00","- Fiwed small memory leak on form close
- Moved GetMemory to init_palmos.cpp

svn-id: r19440
"
"62e2b9b081acdc97e0b5a815c9fa163439ccbe66","2005-11-05 10:44:25+00:00","Added new items to the menu

svn-id: r19441
"
"ef41ce55ac57677c2e119e297d7f87ea3646294a","2005-11-05 10:46:28+00:00","Update debug output.

svn-id: r19442
"
"8928a6e56263c3472a851432c9bab0434f951b56","2005-11-05 10:50:43+00:00","- Added new tab
- Moved lightspeed to new tab
- Added GoLCD api support
- Added tylus click option
- Changed const name

svn-id: r19443
"
"ee9b8de72e9307ddd32bd31b9b1a93327be6c1bc","2005-11-05 11:01:36+00:00","- Added fmQuality option
- Use GameInfoType instead of MusicInfoType since some music and sound options are not in it
- Gathered Music and Sound tab into a single tab
- Fixed small memory leak on form close

svn-id: r19444
"
"e72f64d3848a99e046bb1ea8c89403b7f3cde415","2005-11-05 11:05:53+00:00","Added tabMoveUpObject function
Changed tabs look

svn-id: r19445
"
"8ae100b4b354e744d8764657366c4d5c6dcde4c2","2005-11-05 11:08:27+00:00","No more required, can someone remove the 'simon' folder ? :)

svn-id: r19446
"
"3c9800dad40a413d1978cc02a7f72ed8cd4370c3","2005-11-05 11:10:29+00:00","Added new options

svn-id: r19447
"
"1ad66c04acddedf0433ce81ae7761fa259c687da","2005-11-05 11:12:11+00:00","Fixed mouse position

svn-id: r19448
"
"1991327a01797762419c0a8c6c694f1a8aed280a","2005-11-05 11:16:05+00:00","Removed obsolete 68K code
- Added grabRawScreen
- Set default mode to GFX_WIDE
- Added battery indicator
- Added overlay mouse pointer

svn-id: r19449
"
"905c2e580ee2326b25dc12bd461bbea344de3523","2005-11-05 11:18:56+00:00","Ooops

svn-id: r19450
"
"42e67ce5e6bb85c5d51196adcf1057e71166c114","2005-11-05 11:22:30+00:00","Removed obsolete 68K code
- Added overlay ouse pointer

svn-id: r19451
"
"3865ad63842b03bb2c2b6370b4e1bab222dfe8ba","2005-11-05 11:25:09+00:00","OSD

svn-id: r19452
"
"36ec51e1a00e878f0cc2b1ce8a6ab65b55ffb25d","2005-11-05 11:26:32+00:00","Updated prefix file

svn-id: r19453
"
"7db79eca34b8583a743684c5465fcc58a766a380","2005-11-05 11:29:11+00:00","- Updated with new options
- Reordered some lists and update cfg accordingly

svn-id: r19454
"
"549d543f7e9fbda28b43e5b5b6fca4134b1fd987","2005-11-05 11:32:22+00:00","- Moved kOpt* to a new file
- Reordered strcut to ease ARM export
- Added macros to export the struct to ARM

svn-id: r19455
"
"1784b88a5ab1bee97124e3fd93fe371a1e6dbc18","2005-11-05 11:34:22+00:00","PalmOS stuffs

svn-id: r19456
"
"9e72bab04c7f104778914f7ccfe5aa8f17bae376","2005-11-05 11:35:42+00:00","Cleanup

svn-id: r19457
"
"b39c659a7bd030b958100f407574d85146ced712","2005-11-05 11:51:06+00:00","Cleanup

svn-id: r19458
"
"ed885bb958285c964c959edba40971a15f09a99a","2005-11-05 11:52:55+00:00","Added FM_*_quality support

svn-id: r19459
"
"c4e5cdd8dfc48cab327492e91e177a7d520db3ef","2005-11-05 11:55:24+00:00","Obsolete files

svn-id: r19460
"
"2dbaa1037d6153f9cbbe13499c5ae723ab23f29b","2005-11-05 12:02:21+00:00","- Added new cache and stylus options
- Fixed card selection
- Fixed free handle error if the active skin is deleted
- Moved some functions to a new file
- Changed AppStartScreenSize to use the new platform specific fucntions
- Moved options initalization to a new file

svn-id: r19461
"
"b8aaa2ed04d00e7937111735aaa845864f6aee98","2005-11-05 13:05:52+00:00","Detect where wizImage type 1 should be flipped.
Show images without zoom or angle in ski ride of pajama3 for now.

svn-id: r19462
"
"ffbbafed15b1625a94eb09680873ae8f7a636989","2005-11-05 14:24:13+00:00","Call flush() in the savegame stream, when saving. I think SAGA, Simon and
BS2 were the last engines that didn't. But I could be mistaken.

svn-id: r19463
"
"b69ea090e5fce5399941d6e0edf100fc3f2e7530","2005-11-05 15:21:28+00:00","Keep German end credits from printing 'dud' characters.

svn-id: r19465
"
"58120f07cc04764569ffd3c736a6d31583ea3239","2005-11-05 18:12:41+00:00","Changed PalmOS ifdef

svn-id: r19467
"
"0ff68a1a6488de968ab8e80b0da4f1604e240359","2005-11-05 18:22:51+00:00","- Changed PalmOS ifdef
- No global constructor with PalmOS ARM, bad hack to workaround this

svn-id: r19468
"
"dffc9986fa0d3032e0a8f7a473e25b93f0798064","2005-11-05 18:23:54+00:00","Not needed anymore

svn-id: r19469
"
"3fe9730fc9c3f3f0f6b980b97a0792eed89af250","2005-11-05 18:28:30+00:00","Prevent conflic with Sky def

svn-id: r19470
"
"af1cbcde851711b627a1f846383d6a1e92e639f0","2005-11-05 18:47:03+00:00","- Changed PalmOS ifdef
- Move opcode table to setupVgaOpcodes so that the table is correctly initialized with PalmOS ARM

svn-id: r19471
"
"54c47e3985f638caf34eaf432aa19e55fe91a74c","2005-11-05 18:51:12+00:00","PalmOS ifdef

svn-id: r19472
"
"35748cfe92afabbd5b97aa837e70dd9d545ef069","2005-11-05 19:00:15+00:00","PalmOS ifdef

svn-id: r19473
"
"cb12c0c1da39b8be9054e3debb5108846a354bae","2005-11-05 19:06:01+00:00","- Move opcode tables to methods so that they are correctly initialized with PalmOS ARM

svn-id: r19474
"
"57698a16abf87761d5fecbeaee6714b3587ec64e","2005-11-05 19:26:26+00:00","PalmOS ifdef

svn-id: r19475
"
"b87ca6a5680a0649162855a42924aaefdcdb7ed0","2005-11-05 19:29:06+00:00","Removed obsolete code

svn-id: r19476
"
"c36eddd91a9c33b95329e1de12f6c8948f9b2c09","2005-11-05 19:42:50+00:00","- Move opcode table to a method so that it is correctly initialized with PalmOS ARM

svn-id: r19477
"
"6ff83ecfe477b1a6403a8a66050fdffa603fd917","2005-11-05 22:24:26+00:00","Correct version of German version of putttime.

svn-id: r19478
"
"b01bb6335fef8d6b957987651ed4cf2c613717d1","2005-11-05 23:08:27+00:00","Add Macintosh version of updated spyfox demo.

svn-id: r19479
"
"25794c23e201e119134ebbd2bcc5236d8edc77ca","2005-11-06 01:23:40+00:00","Default to /dev/sequencer before /dev/null if no MIDI device
is specified.

svn-id: r19480
"
"f21a7e44f20751159e60a7bdeee16e6e0d66fb26","2005-11-06 06:18:19+00:00","Fix regression, must not be an int16.

svn-id: r19481
"
"e8e1d462e083a343d1612357d82eac1388063790","2005-11-06 08:56:50+00:00","Cleanup.

svn-id: r19482
"
"0c4c4ffecd896559a0e4cca0340763c0ac6a1e61","2005-11-06 11:29:08+00:00","Revert +1 change, causes more glitches in lost.

svn-id: r19483
"
"c62d92bd139d7c56532a92db9dcd61fe357a85a8","2005-11-06 11:30:17+00:00","Correct charset palette in HE games.

svn-id: r19484
"
"c23723a9fe551fb09ea900ab6e8eb051df80ade2","2005-11-06 11:33:58+00:00","Should be int32 in HE games, to avoid possible overflow.

svn-id: r19485
"
"f123080d63ca2001c87b9f555b4e73c291444fad","2005-11-06 12:58:19+00:00","Revert last change, doesn't seem to work either

svn-id: r19486
"
"d7b50885e2782396b2de8a65756bb42940f5e168","2005-11-06 13:14:10+00:00","fix compilation

svn-id: r19487
"
"f94b11ec554c4a534bce1c53f9ade372a379dcad","2005-11-06 13:49:52+00:00","the PSP port of libtremor was updated, so this define is no longer needed

svn-id: r19488
"
"1063ce92a337a88596ff31d58fbcafc6f69da030","2005-11-07 06:42:21+00:00","Add German version of freddi2/freddi4.

svn-id: r19489
"
"e96d1535138d72880d945730517ce2bff8235558","2005-11-07 07:00:52+00:00","Add German version of Monkey Island 1 EGA 4 Disk.

svn-id: r19490
"
"1c6575b824881ca0ffed4ce9573ad22994fa8379","2005-11-07 08:35:50+00:00","Moved aspect ratio disabling (if screen height != 200) from initSize() to
loadGfxMode(). As reported on the forum, setting aspect ratio correction
in a 640x480 game would cause ScummVM to crash when the game is started
from the launcher.

With all the graphics transactions and stuff, it's a bit hard to follow
what's going to happen, but I hope deferring this check until the last
moment (i.e. just before the graphics surfaces are actually created) is the
correct bugfix.

svn-id: r19491
"
"097a9e02eae2ff3dc7f0f70399d844a4d33ad330","2005-11-07 13:03:20+00:00","Add German version of freddi3.

svn-id: r19493
"
"7d23fafc25cba76abafc2df60aa5a49a63c6acc7","2005-11-07 14:24:34+00:00","Whitespace.

svn-id: r19494
"
"99c544869861e3a2f870f21891381dec38074c04","2005-11-07 18:34:55+00:00","Don't synchronize subtitle with speech sfx if MP3/OGG/Flac support isn't compiled it. This should fix bug #1350045.

svn-id: r19495
"
"e58007674af0399dbb0bb1990a706893d571dd5b","2005-11-07 20:06:16+00:00","Fixed functions, not sure about the way to do this with OS version prior to 4.0

svn-id: r19496
"
"a7db382fd1e1306c3cf03d102429406fdde1cdb3","2005-11-07 21:31:44+00:00","Correct HE version for German version of freddi3.

svn-id: r19497
"
"fdeacb2d24ce674eb1732bc733e573bc48d99f7a","2005-11-07 22:57:31+00:00","Fix for bug #1350645 (Playtime corrupted if save name is >=32 chars)

svn-id: r19498
"
"0ca7c7b6c69154bb5d605dfe0f41bb9cd480c7ea","2005-11-07 23:52:09+00:00","Use -force_cpusubtype_ALL for OS X statics, to ensure compatibility with G3 systems

svn-id: r19500
"
"f163b2ab33a4c3b13479c28c7a633c8f02502cb9","2005-11-08 00:12:26+00:00","DS_Store & background.jpg for OS X disk images

svn-id: r19504
"
"a8172ad6b3a8a8693bef26f7929949ceb6e06d4d","2005-11-08 00:15:09+00:00","Updated latex readme.tex date to match README

svn-id: r19508
"
"18b5b7123d5c468f8d3aec839771bb1490f43636","2005-11-08 00:18:18+00:00","Improved osxsnap target (up to par with my own release build script)

svn-id: r19510
"
"be5bae910619c7902640f8d650a94af3ee3cbbb4","2005-11-08 07:28:31+00:00","Don't write empty save slot names to the savegame index. All that does is
raising the 'I/O error' flag.

svn-id: r19514
"
"243f99df401f7455578affe754013ae3834d1e6d","2005-11-08 10:21:02+00:00","another scrolling fix, the engine didn't scroll all the way to the end of the screens before.

svn-id: r19516
"
"67ecf5ce83a19a770b55f72406d7eeb87db06b81","2005-11-08 11:24:46+00:00","minor cleanup

svn-id: r19517
"
"5dd373e577b07816fec4f9de7b36d66e3867c7b9","2005-11-08 11:34:56+00:00","Cleanup.

svn-id: r19518
"
"5f32a2c3b60a2ad08de417a01a56074134d573d9","2005-11-08 22:15:49+00:00","Fix for ScummEngine::drawStripToScreen: do nothing if height is negative

svn-id: r19519
"
"3cc22c638c12e2a0b49a841948468e37733e4817","2005-11-08 22:23:09+00:00","Added asserts to OSystem_SDL::copyRectToScreen, which should detect any attempts to use invalid rects for blitting

svn-id: r19521
"
"eef4e5caec08f8f25d3c7a7dfe81449b841c0168","2005-11-08 22:28:31+00:00","Augmented OSystem docs

svn-id: r19522
"
"ba4b02975af6c582e3aefcad2c7641403ade0e6d","2005-11-08 22:40:10+00:00","Patch #1342957 (touchup configure output/debug)

svn-id: r19523
"
"ffc4b6fcb35fb4f1772cab3e28c869f02915254c","2005-11-09 00:27:53+00:00","Added 0.8.1 section. It only contains the changes I've been involved with
myself, though. Please add yours.

svn-id: r19525
"
"63ebcef8548417eab6cba277be72629161de3e92","2005-11-09 00:53:22+00:00","Mention some improvements in 0.8.1

svn-id: r19527
"
"51fc6b0441e48f7514747c5c43f95e6faa67780e","2005-11-09 00:58:19+00:00","o Sort 'special thanks to' crefits section alphabetically.
o Mention that Paul Smedley also makes OS/2 pavkaging.
o Mention lloyd which C64-related contributions we use.

svn-id: r19528
"
"d493ca602b62d3bd9395bb50ac62bbcfbd962420","2005-11-09 09:46:57+00:00","Fix typo.

svn-id: r19530
"
"2b4c9b00b06a83972426b90114b3c598701b5859","2005-11-09 13:11:55+00:00","Commited patch #1350387.

svn-id: r19532
"
"1f647b48bc8b955cfb5c36534ef221e3c3002cba","2005-11-09 19:51:57+00:00","sync HEAD with 0-8-0 branch.

svn-id: r19534
"
"d8e7ad7888c85eb92f57aa130762145a1907902d","2005-11-09 19:59:57+00:00","sync head with branch.

svn-id: r19535
"
"ac8af88f835a058e019b5070ded9d5a1e661660e","2005-11-09 20:02:42+00:00","sync HEAD with 0-8-0 branch.

svn-id: r19536
"
"510eba82270096063716f4611f4204eb65e72eee","2005-11-09 22:26:12+00:00","- fixed setCharactersPosition
- fixed loadCharacterShapes
- fixed anim shape drawing
- corrected some tables
- added debug drawing for the pathfinder (still a bit buggy)
- gets a small script scene to work with some graphics glitches
- corrected some drawShape drawing functions
- started to implement cmd_walkPlayerToPoint and the needed functions

svn-id: r19539
"
"22dc08ed5fd771578ddfe5fd083509ea93e0e2ee","2005-11-09 23:06:18+00:00","Cleanup.

svn-id: r19540
"
"0cfc4456dec1a0f4eb8b50a661232912c36b4c9d","2005-11-09 23:36:55+00:00","Palette delay at the end of Simon1 was never triggered.

svn-id: r19541
"
"3a670640f1069ba5158a82bac57b0582042db3cc","2005-11-10 00:53:00+00:00","Update debug tables.

svn-id: r19542
"
"889384b411303a0593d150c0f3f5b7d599fccb40","2005-11-10 01:18:09+00:00","Add another wrapper for endian difference in FF.

svn-id: r19543
"
"1085bd26b583b6300c2c3c6def7448d8ace05842","2005-11-10 01:41:56+00:00","More accurate video opcodes output.

svn-id: r19544
"
"edc8e871744bb3b9fc1de11fa8814fe501b0dc73","2005-11-10 05:33:31+00:00","Add palette difference in FF.

svn-id: r19545
"
"87a868eda55db4af1181d3286e06aa084b6cdb24","2005-11-10 11:56:10+00:00","Removed unnecessary space from the SoundFont button's text, to keep it from
being truncated in the small version of the GUI.

svn-id: r19546
"
"dd4e750640b7d12b4d5c16483732280459ae80d2","2005-11-10 14:08:50+00:00","Commited patch #1350510 with some little changes. Thanks to vinterstum.

svn-id: r19548
"
"02d24dd7b50fa59b242902536d71c4db9fdf7946","2005-11-10 15:37:58+00:00","Fixed compilation.

svn-id: r19549
"
"f26322d2be1a2ddfd3be7645facbeeb32216cde7","2005-11-10 18:58:44+00:00","Fixed preserveAllBackgrounds and implemented:
cmd_changeCharactersFacing + cmd_popBrandonIntoScene
and extended prepDrawAllObjects so that it could draw talking animations.
Also removed a few useless comments.

svn-id: r19550
"
"7276061b355a156e4ecd56c6d4baf24d524a2d86","2005-11-10 21:42:42+00:00","Fixed cmd_blockInWalkableRegion and findSubPatch.

svn-id: r19551
"
"543072804bb636af26100859bd599fd3153cd198","2005-11-10 23:07:54+00:00","Made drawStripToScreen() return when width=0, this prevents copyRectToScreen() from asserting during the cannon sequence in COMI.

svn-id: r19552
"
"d50a69507da5b4bd8b6ec5e4d447e17dd03fff8b","2005-11-10 23:09:20+00:00","V8 uses 4 variables to handle mouse buttons state (like V7), cleanup processKbd() accordingly.

svn-id: r19553
"
"05a80bf48b9dbc6610655f0021af15e76105c9d7","2005-11-11 02:56:36+00:00","Correct FF image height.

svn-id: r19554
"
"367c584a9a816592f5ee162f9cefbfcfa8e9de6f","2005-11-11 04:09:36+00:00","Correct error in debug tables.

svn-id: r19555
"
"83941f95b3f8e4a6c63e48c9193fbf3ac2141ef7","2005-11-11 04:55:54+00:00","Cleanup.

svn-id: r19556
"
"d17e9165435ce88ec1406ac1b3b47c1e6895f325","2005-11-11 06:43:38+00:00","Fix sound looping regression in simon2 (Windows).
Sound flags were been reset.

svn-id: r19557
"
"575588b188ae35f6522a448845d1192090aba8fd","2005-11-11 08:49:58+00:00","Oops, got reversed.

svn-id: r19558
"
"e1a8bce873cb301a9833ff132630b3defdf0e16a","2005-11-11 09:05:19+00:00","Cleanup.

svn-id: r19559
"
"1f77077524d978b66234970b0220f311d036fe79","2005-11-11 22:17:06+00:00","Commited patch #1354117. Thanks to vinterstum.

svn-id: r19560
"
"50903a61890769c28976484334440082bae48c43","2005-11-11 22:51:57+00:00","Add Italian Simon2.

svn-id: r19561
"
"5496f912695fbfa7faf3b84a661f746c34e2ba24","2005-11-11 22:51:57+00:00","Add Italian Simon2.

svn-id: r19562
"
"b4908f449e0327516f5e1289f2651ede5da45274","2005-11-12 06:01:24+00:00","Old targets will be auto updated.
Many non-English versions will be broken until information is updated.

svn-id: r19563
"
"5307f21742d272c59a7b9382895c2063c5807758","2005-11-12 06:04:32+00:00","Add acorn platform.

svn-id: r19564
"
"0f5838976f548f9a72667ffd4af7f6a3d56dd810","2005-11-12 06:22:18+00:00","Add details for Acorn demo.
Remove left overs.

svn-id: r19565
"
"e815c6a8bb40afb3b2c2defa43ee060ff396fed2","2005-11-12 06:44:03+00:00","Fix simon1cd32 regression.

svn-id: r19566
"
"bb1baa3a1582820e0cbad2213f435853ab5ccd91","2005-11-12 08:04:10+00:00","Add some details for ru versions.
Add some details for FF.

svn-id: r19568
"
"5d4d7918485e9096566a1c576ac73c35d1742202","2005-11-12 08:20:47+00:00","Cleanup.

svn-id: r19569
"
"6325516a0f65ad6dd3d4d81da322149b1ab51b75","2005-11-12 09:14:07+00:00","clear screen when entering control panel. Fixes palette glitch after playing animations

svn-id: r19570
"
"107a5d5b55fb6463745fcc839bf4e5b4ea953a98","2005-11-12 09:32:54+00:00","Add German Feeble Files

svn-id: r19572
"
"fa5af9ce6d9560506ba02a49ce5ecec00af374ed","2005-11-12 11:26:24+00:00","Don't warn if 3m9.wav is missing. It always is.

svn-id: r19573
"
"6cfb37c441cf0f3d6d73948ddb445710ec656fdf","2005-11-12 15:25:22+00:00","Stop sounds at control panel, otherwise any looping sounds will still be
playing. (For instance, when getting yourself killed on top of the train.)

svn-id: r19574
"
"ddd0be95b8af3646137e5acb67898d8bfd844bbd","2005-11-12 16:01:49+00:00","Updated BS1 NEWS item.

svn-id: r19576
"
"84ec0ce807886c42068c3f4c0ce7984e87de5076","2005-11-13 00:46:19+00:00","Slighty changed credits format for the new website.

svn-id: r19578
"
"e41e31c34f9278cf8d393569e8f772e5cfc3fa0a","2005-11-13 03:33:20+00:00","Add our website designer and HTML/CSS coder to list of contributors.

svn-id: r19579
"
"85cbb171030432d902c113db377ea30ecedac0e5","2005-11-13 03:39:10+00:00","Forgot to mention Jean Marc who designed new cool logo for us.

svn-id: r19580
"
"c79de31518f6fa3d465d09dc03118fe84c183692","2005-11-13 07:04:56+00:00","Fix slowFadein during Lion ride in Simon2.
Cleanup.

svn-id: r19581
"
"81a956eeb3c07c88ed42bbb60396492976cc3c52","2005-11-13 09:21:15+00:00","Revert as requested.

svn-id: r19582
"
"4af7ef91e58d07d41af88f5451f39a80ab51347b","2005-11-13 10:01:40+00:00","Fix sound looping regression in simon2 (Windows).
Sound flags were been reset.

svn-id: r19583
"
"996401406339cd9b19d8b839d2b935f2d6f324b5","2005-11-13 11:53:57+00:00","Fix invalid writes in FF.

svn-id: r19585
"
"c4ad2ecb49e4b11a2f71b96b32d6ae17036e4d68","2005-11-13 15:52:22+00:00","Fix yet another validator warning

svn-id: r19586
"
"267fc7e2f652feaf6168d65ccf2916e09fe12edb","2005-11-13 19:29:32+00:00","Cleanup

svn-id: r19587
"
"e0aef914fd2ef0eb852ea325028d29991e2f9a62","2005-11-13 19:35:01+00:00","Fixed a bug with the sprite loader and various things related to
the scene switching code. Now the intro works correctly with a minor graphics glitch.

svn-id: r19588
"
"8f4e03935eecfd3400020887b49c742c33cdb1cc","2005-11-13 19:42:54+00:00","Changed debug level to be slightly more consistent with Broken Sword 1.

svn-id: r19589
"
"ccec4943fd79164fe1c15befa1d1a2897effc014","2005-11-14 03:26:25+00:00","Make error message about invalid resource file more clear to end user.

svn-id: r19590
"
"19bc12a460a1b52c5ed29cc3f7b85dbe46316406","2005-11-14 10:31:19+00:00","Correct FF display and palette.

svn-id: r19591
"
"c7c31a5a8eb4595984edd9a1aa81779c7a239281","2005-11-14 10:52:18+00:00","It's Feeble!

svn-id: r19592
"
"4a10696af37844f12d9f9a053f20a5881de1d7ce","2005-11-14 12:01:31+00:00","Initial sound support for FF.

svn-id: r19593
"
"0eb4f5195ee7d8ef7e4d4cd38332da3786bea0f7","2005-11-14 22:54:18+00:00","Add Italian version of Simon2.

svn-id: r19594
"
"d7e2bd8548cb2d4dc72efaadc0e2af3c4112cdd9","2005-11-14 23:50:36+00:00","Add Italian version of Simon1.
Correct platform for Italian version of Simon2.

svn-id: r19595
"
"749b0130a96c8af787737af1fbacc8b50350423f","2005-11-15 04:07:05+00:00","Fix palette glitches in FF, caused by fades.
Some work on path finding differences in FF.

svn-id: r19596
"
"805a985e4f679214d1f417a383c0c82135c99b11","2005-11-15 04:54:18+00:00","Correction to pathfinding in FF.

svn-id: r19597
"
"d58a8ba31a0b9c4d47f12842b9438a71968514c7","2005-11-15 05:35:32+00:00","Draw flags regression.

svn-id: r19598
"
"987ad29b8088db3a7ef7bb23590dd2a037aecd1d","2005-11-15 08:12:32+00:00","Unstubbed vc75_setScale(). (No visible difference -- the values it sets are
not used yet.)

svn-id: r19599
"
"4dc368460874c1028f5cc7b105365b1060ec6d15","2005-11-15 12:03:38+00:00","Speech support for FF.

svn-id: r19600
"
"8392db7ca8a45228caf9f2211a71c11782702805","2005-11-15 21:38:26+00:00","Ooops, that should not have been commited.

svn-id: r19602
"
"3a66c413e12bbdcf215c8d21f0c27c78ecab9e55","2005-11-15 22:42:33+00:00","Allow subtitles to be disabled in HE70 - HE73 games.

svn-id: r19603
"
"49db1e9447e494995b37e67b60deb7f756d48715","2005-11-15 22:50:14+00:00","SCUMM 6 games use VAR_VOICE_MODE too, based on Sam & Max win32 disasm.
Minor cleanup.

svn-id: r19604
"
"87c419317e40b5295c0add9b10587ee3c842115f","2005-11-15 23:48:06+00:00","Add German versions of Simon 1 & Simon 2 (Windows).

svn-id: r19605
"
"04f07813114e9cb709a0ab6e04a8851bd29814a8","2005-11-15 23:49:06+00:00","Fix Kanji regression in FOA, due to lost code.

svn-id: r19606
"
"32d848a6e4c853d4c6f8ad06a0c218b06d8ba90e","2005-11-16 02:32:38+00:00","Add more English versions of HE games.

svn-id: r19607
"
"a437905442807ba5a29a1756dbd1ad1ef7841281","2005-11-16 03:57:17+00:00","Mixed up an md5.

svn-id: r19608
"
"f9ef4a2f5bba12b68e7f0720bbb73c5e79ec073d","2005-11-16 04:40:15+00:00","Correct HE version.

svn-id: r19609
"
"c0740553415203264f8e343a28fbd041974b250a","2005-11-16 05:08:11+00:00","Opcode is used by HE71 too.
Freddi version should be all languages (Used by English and Russian).

svn-id: r19610
"
"cbba64fdbe4841d131a6ff5c91f8934c44b6cbad","2005-11-16 05:14:46+00:00","Adjust HE version checks, for updated releases.

svn-id: r19611
"
"2f86c6417d2e1456a509563d5d68a65760036a9a","2005-11-16 05:41:13+00:00","Missed a spot.

svn-id: r19612
"
"ea8034865f4d6c38fc56173981e3946e172a03a2","2005-11-16 06:51:02+00:00","The 'TextOn' ini setting is checked by earlier HE games too.

svn-id: r19613
"
"949c8b32a0cbbf60023214c90e633ec53195dd43","2005-11-16 07:08:38+00:00","Still no subtitles in HE70/71 too.

svn-id: r19614
"
"a8808211e6b214c9444e42fe22456099ba98408c","2005-11-16 12:28:06+00:00","Uses wav format for sound, but is the DOS version of Simon 2.

svn-id: r19615
"
"9985dfab8a57af89b57bf32e7edd7ca8aeb120b1","2005-11-17 02:10:44+00:00","Add German version of Simon the Sorcerer 2 (DOS)

svn-id: r19618
"
"909f531220843a3916a143b2481a11c71edd5b17","2005-11-17 10:05:07+00:00","Add German version of Simon the Sorcerer 1 (DOS)

svn-id: r19619
"
"86a5dcde24096f49ead907381f361ac7c2f6f9e8","2005-11-17 10:49:39+00:00","Update comments.

svn-id: r19621
"
"8307fc3d2bffaf3120b7a388c4b2b9fe969cfdc1","2005-11-17 13:10:33+00:00","Add md5s of bundled Macintosh versions.

svn-id: r19623
"
"aae6aa5077bd5fa5438c62a10f03535f27506685","2005-11-17 13:14:44+00:00","*** empty log message ***

svn-id: r19624
"
"500d35f0aafe5598f5d5d120259fe904a01b1c80","2005-11-17 13:20:09+00:00","Add filename for bundled Macintosh version of atlantis.

svn-id: r19625
"
"7d4e3fe578ce74067e421ae70ba69f2c0563cd9c","2005-11-17 15:58:26+00:00","Fixed typo in error message.

svn-id: r19626
"
"c759ade09afaab5a834b5da244b6ea15d16b5c9f","2005-11-17 23:03:43+00:00","Add correct md5s of bundled Macintosh versions.
Correct name as requested.

svn-id: r19628
"
"46d2bdcfcc0247b2dd75282ee98a577cfba50c8a","2005-11-17 23:17:56+00:00","Remove duplicate entry.

svn-id: r19629
"
"e173a05e46bac522d2531b50daec62761345ab3b","2005-11-17 23:41:53+00:00","Revert to warnings when certain music/speech files aren't found

svn-id: r19630
"
"f8eb9cc5024b06df5775b9c29890b2997c2a7ece","2005-11-18 00:01:46+00:00","Don't do full-screen updates when smooth-scrolling, but only update the changed part(s) (Patch from Cody56, enhanced by Fingolfin).
This should help speed it up on lower-spec devices.

svn-id: r19632
"
"fc0713af817455561872f8e827451ba7708611a3","2005-11-18 00:59:10+00:00","More changes for bundled Macintosh versions.

svn-id: r19633
"
"9cde2621920b456fe2a2403b04af820700bf5072","2005-11-18 00:59:47+00:00","Add Polish version of Simon the Sorcerer 2 (Windows).

svn-id: r19634
"
"2f8306aeb4601fccbb0c58becd29488b2db43dc7","2005-11-18 01:36:14+00:00","Add Polish charset.
Remove some hard coded values.

svn-id: r19635
"
"6d76392b7f43948477c0fbd25cabe9be704e25b7","2005-11-18 02:31:24+00:00","Remove hard coded language values.

svn-id: r19636
"
"b9abd384f30f7104e678fa23c4fa64150e3f8d7a","2005-11-18 06:50:28+00:00","Target doesn't exist, both demos use dig.

svn-id: r19637
"
"eb18e57d08fc48b0b01f9bd41a39a12a28a91447","2005-11-18 06:58:34+00:00","Might help bundled Macintosh version of FT demo.

svn-id: r19638
"
"7f8222cd981950b5e32a51afdd7311a85fa6d966","2005-11-18 12:40:03+00:00","Updates to FF path finding.

svn-id: r19639
"
"95a45fc7a05430e0952d5dc8e61a091bb10494ed","2005-11-18 13:47:47+00:00","Set scale in FF.

svn-id: r19640
"
"8ec6ed9d968ed44a4b2a67ac6652c60f31c6492f","2005-11-18 14:15:03+00:00","Updates to FF path finding.

svn-id: r19641
"
"4ca37906ee6d419fd55990c1449ab9934e0f115c","2005-11-18 14:16:28+00:00","Correct size.

svn-id: r19642
"
"9fbb4d1c7a7d37ea48a582db1d951d5f950793d7","2005-11-18 14:21:01+00:00","Wrong bit.

svn-id: r19643
"
"11c52c06db0d368afe060a69db6b64dca44f5974","2005-11-18 21:23:36+00:00","Update Symbian #IFDEFs so it also supports a lower samplerate of 8KHZ if need be.

svn-id: r19645
"
"250071f8676b2c262277f9dc9eb0a3bb2b2523c0","2005-11-18 21:37:58+00:00","Make configure message regarding plugin support less ambigious

svn-id: r19646
"
"d0f13e6f069316ed287abc69267026e5e78ece39","2005-11-18 22:34:41+00:00","Cleanup.

svn-id: r19647
"
"6b768e5c5c4c407d6d863446a4c676ff6b299d97","2005-11-18 22:35:52+00:00","Fix typo

svn-id: r19648
"
"1c2451b472aad436f0c33e4f2f77436e4bd81fa4","2005-11-18 22:49:04+00:00","Mention Polish Simon2.

svn-id: r19650
"
"210a520554f456d72e570f32664332db005397a5","2005-11-18 22:50:22+00:00","Simon 1 and Simon 2 are auto detected now.

svn-id: r19651
"
"a69fe434b981d105df84b20e036b7f45c9fc8801","2005-11-18 22:56:13+00:00","Remove old targets too.

svn-id: r19652
"
"5eb3e11b46ce694057c8c7de413df96fbc34c728","2005-11-18 23:55:31+00:00","Implemented basic input handling and fixed mask drawing.

svn-id: r19657
"
"5f472a4f6cb1bedc5d0abbfb2977e676114ba52f","2005-11-19 00:16:45+00:00","Added md5 of spanish floppy version 1.8. Thanks to clemmy.

svn-id: r19658
"
"463b30f707f622d6777f1e94c9375a34850845e9","2005-11-19 03:37:34+00:00","Fix the bundled Macintosh version of FT demo.
Filename substitution should only be checked for resource files, not other data files.

svn-id: r19659
"
"d4d789d5daa3c31d7e6d6ca56f47b2b09249c84c","2005-11-19 04:07:47+00:00","Add some German HE demos.

svn-id: r19660
"
"7c34ec25671b46ec09464f3a40c5c87e2e46543a","2005-11-19 05:00:56+00:00","Fixed misleading warning message when playing without sound files.

svn-id: r19661
"
"c0aca2f12e052812ef2e9afa30eadfd7855ce08d","2005-11-19 10:04:54+00:00","I don't know if this is correct, but it does improve sprite positioning a
lot in Feeble Files.

svn-id: r19663
"
"70fc8eff6545bbddf640876ada2f1ebc39e26e8a","2005-11-19 10:45:41+00:00","fix compile warning

svn-id: r19664
"
"97b6f7c843fa703ef09e5a0cb5e36fe5789a19f0","2005-11-19 10:48:30+00:00","Fix mistake in my earlier commits.

svn-id: r19665
"
"9bf1cb1e0466621d8a5d7c9d1ded4314370bf8a8","2005-11-19 11:37:41+00:00","Split draw code for FF.

svn-id: r19666
"
"88379e7dbe27ccb108df67e1a4387d1c094df564","2005-11-19 12:07:50+00:00","Not used in FF.

svn-id: r19667
"
"6c828a1c17fc7c98bbd4e565a202fdd91d490369","2005-11-19 12:41:23+00:00","some Font fixes

svn-id: r19668
"
"b12138458de29908847974091fc5f2188ef9fecc","2005-11-19 17:51:14+00:00","Fix warning (assign used instead of comparision)

svn-id: r19669
"
"8262b6dc2ac542b84d8ef2304df0f549039f411c","2005-11-19 17:57:24+00:00","Tried to unify plugin code for PalmOS and non-PalmOS (hopefully I didn't break the PalmOS code this way, please verify)

svn-id: r19670
"
"c712f0c44bcf6299fc2efb49e7b8062749467daa","2005-11-19 23:53:02+00:00","Fix for crash caused by very rapid camera movement in V7/V8 games

svn-id: r19671
"
"e4736ad0b8bd8feeee6b101788af2459074d3d38","2005-11-20 00:46:15+00:00","Correct face color in Commodore 64 version of zak.

svn-id: r19672
"
"832c9a1b490abd8d1ec374d5c8519ad57085287e","2005-11-20 08:29:17+00:00","Update Commodore 64 palette table.
Cleanup.

svn-id: r19673
"
"e091f3bd4213291567ebde1a84d1224a9e8e6014","2005-11-20 09:10:18+00:00","Fix skipping cutscene in Commodore 64 version of zak.

svn-id: r19674
"
"3137cc818a8612f55999c017485a8c5f1461c812","2005-11-20 09:12:02+00:00","*** empty log message ***

svn-id: r19675
"
"20c9a650d381b8a00e76d3343b00c439a30ccf3c","2005-11-20 09:27:47+00:00","Add another German version of Simon the Sorcerer 2 (Windows CD)

svn-id: r19676
"
"e5f590a2acd8a14306777f7e4e8574e4d79f54ef","2005-11-20 09:57:24+00:00","Add German version of Simon the Sorcerer 1 (Amiga AGA)

svn-id: r19677
"
"5274d89e410cac91c6698082614829f82356e7f0","2005-11-20 10:26:14+00:00","Strings play back is DOS specific.

svn-id: r19678
"
"ff83c4146a35ee965fb9bc9d8b6af053c8699862","2005-11-20 17:35:07+00:00","Increase maxHeapThreshold to 6M for SCUMM games with the GF_NEW_COSTUMES feature, the old value of 2.5M was too small to contain all resources for certain scenes in The Dig and COMI.

svn-id: r19679
"
"47788dee252ad9072b8061cbffda85e661974438","2005-11-20 17:36:02+00:00","use gp-relative addressing

svn-id: r19680
"
"92d377d5d1006b1b5409b32c8a6b3552842c1138","2005-11-21 08:35:11+00:00","Add German version of Simon the Sorcerer 1 (DOS Floppy).

svn-id: r19681
"
"9a09283a76a4887551db7224a1bac2f4a4d3d43b","2005-11-21 09:52:22+00:00","Fix compile error in plugin mode

svn-id: r19682
"
"619f0fa5a0ce89b4345619a53d9d07d6d229c951","2005-11-21 18:21:44+00:00","fixed segmentation fault when speed/volume sliders are clicked and then dragged out of the scummvm window.

svn-id: r19683
"
"0196e39b31adf60f1a02b7a0ca5462287d2281fa","2005-11-21 21:26:09+00:00","Remove spaces in md5 values.

svn-id: r19685
"
"c062968872579ca4fa673da4a3c4680b113db5f4","2005-11-22 00:29:26+00:00","Remove spaces in md5 values.

svn-id: r19686
"
"d1cbf8f275d2c46605d9023a8de745fcd079f7ff","2005-11-22 00:58:34+00:00","Add another version of Simon the Sorcerer 1 (Amiga CD32).

svn-id: r19687
"
"5e63b90bc191b241d2fee8ba6ceb12a401adfa18","2005-11-22 13:17:08+00:00","Cleanup.

svn-id: r19690
"
"eae998870d417282438873e885e0f33aaa1df57a","2005-11-22 23:03:31+00:00","Add another German version of Putt Putt Travels Through Time.

svn-id: r19691
"
"a17fb04c35c8c9cd439f7e41af93a6d1c471cb90","2005-11-22 23:06:47+00:00","Filename used by German version of pajama2 for Macintosh too.

svn-id: r19692
"
"be5686a16e26291dccf568adda5b5f5d8f38ca66","2005-11-22 23:29:11+00:00","Add versions.

svn-id: r19693
"
"fb9bf8f6e2a1fb040632113af8e10edb4ebe986f","2005-11-23 00:39:56+00:00","Add details for German version of pajama2/putttime for Macintosh.

svn-id: r19696
"
"46707fde4073af0996559a1cb7eb24589610ea50","2005-11-23 00:54:08+00:00","Add another English version of Simon the Sorcerer 2 (DOS CD).

svn-id: r19697
"
"da68ca89a316485c63535ba06012d03225da67f3","2005-11-23 01:20:43+00:00","Add Amiga demo.

svn-id: r19698
"
"d7351092a9fa50e6ba9e88947ed2dc6e1b0da0ff","2005-11-23 01:31:51+00:00","Update check.

svn-id: r19699
"
"fe9def0ac070252ee55e81236ba78674615d33bb","2005-11-23 19:11:33+00:00","Made the autosave period a configuration option and updated the engines using that feature (SCUMM, Queen and Sky). The value is supposed to be in seconds ; if it's set to 0 then autosaving is disabled. See also tracker item #1350187.

svn-id: r19700
"
"6d6def10427ac048abbfae590eece78845ce93b2","2005-11-24 23:46:46+00:00","original TheDig interpreter handles up to 200 blastObjects. Resized _blastObjectQueue accordingly, that should fix bugs #1364922 and #1356652.

svn-id: r19701
"
"42548e371cba500a9ead2f71d399d098896a82bd","2005-11-26 05:38:46+00:00","Add APK packed files to list for CD version.

svn-id: r19702
"
"66e5b90168b311d6f4d4d1ae31142e02bca29d4d","2005-11-26 12:08:05+00:00","known color WIP #1

svn-id: r19703
"
"6bf4affaa4a1a046822ba6d9fa92d233104e57d3","2005-11-26 16:37:20+00:00","Fixed bug that findSubPath did not update the saved facing.

svn-id: r19704
"
"fb9ac2a3cd4dd6f0165757a806e70230dafcaa45","2005-11-26 16:45:53+00:00","Removed double 'TRUNK.APK' entry.

svn-id: r19705
"
"e7ccaa866e226b74cfd52172535d6dcb7c5b5bdb","2005-11-26 16:54:55+00:00","fix source format

svn-id: r19706
"
"46d02cd9def7ab76a3c223b4845ff70b33139b01","2005-11-27 00:12:07+00:00","Implemented cmd_runSceneAnimUntilDone and cmd_displayWSAFrameOnHidPage.
Also fixed cursor hotspot position.

svn-id: r19707
"
"01c5b311474de1fd8761b74725632c6e65c85ae5","2005-11-27 00:37:36+00:00","Fixed script function start offset. -> bug with no apple in the vase is fixed now

svn-id: r19708
"
"e6aba1f7aa00721140809b7b55270c4e171f53e5","2005-11-27 01:32:29+00:00","Add another English version of Pajama Sam 1.

svn-id: r19709
"
"edfae828f6a792fe4809ca77a1181a00ed8b9f46","2005-11-27 02:35:57+00:00","Patch #1341626: 'New GP32 port'

svn-id: r19710
"
"1669831ad34a1b0fc192b4f0e86ae1b3feb2d4e1","2005-11-27 02:44:59+00:00","Revert accidental change.

svn-id: r19711
"
"38fc6b340be3b7e4811f80fd35696489e060ce1e","2005-11-27 04:13:01+00:00","Correct HE version.

svn-id: r19712
"
"9e7d76883d9ba0983f7efb15086578ca752b0b2c","2005-11-27 04:16:51+00:00","Add fix for cursors in CD version, from LordHoto.

svn-id: r19713
"
"a1333d3fb9657c67d57c4f9b951a62b46e02cf02","2005-11-27 05:24:35+00:00","Fix characters talking in CD version, stack order is different.

svn-id: r19714
"
"5a62f79bd0c47347082007540cff7aacbd4875dc","2005-11-27 05:49:35+00:00","More string fixes for CD version, due to stack order differences.

svn-id: r19715
"
"ceb9116ab29b8c3d0a5f7825b7a46bf13793910c","2005-11-27 06:13:36+00:00","Not required for CD version, causes palette glitches in CD version.

svn-id: r19716
"
"ee69f9317d14915816943b3d803a09def2605872","2005-11-27 10:02:23+00:00","Added voices for cd version in the game.
Also increased RESFILE_VERSION for the new kyra.dat for the cd version.

svn-id: r19717
"
"8c45a9a3c0c3ae809a4eeeb64773cc39d314019c","2005-11-27 10:32:21+00:00","Add patch:
1367403 - Korean Fixes

svn-id: r19718
"
"366aee54004cdb1e5401282831172a83e4810677","2005-11-27 23:22:42+00:00","Add missing akos cases for pajama, fixes bug #1367793.

svn-id: r19719
"
"82589655d0c404ff589bdf38424ae005f1582046","2005-11-27 23:48:14+00:00","Actor sounds need to be saved as uint16 for HE games, fixes bug #1367798.

svn-id: r19720
"
"8a35611664e127891c74beb801f0fb7e8f5cb39d","2005-11-30 05:50:10+00:00","Add Egnlish versions of Simon the Sorcerer 1 & 2 (DOS Floppy).

svn-id: r19722
"
"da65d3c08f56c1dd6d935b94ee9218d702160814","2005-11-30 22:49:21+00:00","Correct demo target.

svn-id: r19723
"
"81eed2207555ed60f04d183bce4e79f29a3a650c","2005-12-01 18:22:29+00:00","reduce memory usage by 7Megs, CPU usage by 40%

svn-id: r19724
"
"a6b7333b33a1879d31c1c9c069fa1aeb508490d3","2005-12-01 19:14:38+00:00","Working Vorbis support for Symbian OS

svn-id: r19725
"
"8f35a68433849cb988f5833b448b365cb97f6103","2005-12-01 22:51:43+00:00","Add another English version of spyfox/water.

svn-id: r19726
"
"e9f6cbdbd4c23275d3f091c66e66a7476e3b5faf","2005-12-02 00:22:50+00:00","Used in Macintosh version too.

svn-id: r19727
"
"47ad571e0c923d1ad3ddd04882c1019fd3e4803c","2005-12-02 18:36:21+00:00","Updated to follow ScummVM coding standards i.e spaces, indents & 'studpid' things fixed.

svn-id: r19728
"
"d4e6b02fde7870d98c6c55e3bc582aea15deb483","2005-12-02 18:37:20+00:00","Updated so ScummVM also builds for Symbian WINS emulator builds (!defined added)

svn-id: r19729
"
"6d7eeaca4a99ee22a35608f954412fe1c8eac3d8","2005-12-03 00:14:24+00:00","Add German version of pajama3.
Add German version of freddi3 (Mac)

svn-id: r19730
"
"34425232783c9b76b3447b2fc14d4a8fba6a40d4","2005-12-03 00:58:33+00:00","Add work around for filename difference in HE7 file of water (HE99 Mac.)
Add details for Macintosh versions of German HE demos.

svn-id: r19731
"
"6f73fa7ebebef17ac67be8b9e8be524aea028f95","2005-12-03 02:31:06+00:00","Add Macintosh version of Pajama Sam 3.

svn-id: r19732
"
"3a9bd3c18cacbd9b1d49107c6db609c7982940d6","2005-12-03 13:31:09+00:00","Fixed (wrongly) changed address in the header.

svn-id: r19733
"
"71e21f0fdf996348afe256b51305c5cd5fba8e8a","2005-12-03 14:34:45+00:00","Fix code formatting to be compliant with our rules.
It may happen that I broke something since I have no means to compile it.
Also I changed EScummVM -> ScummVM is several places.

svn-id: r19734
"
"64bfec97d947f36495241cd4b41763bbde638f85","2005-12-03 19:04:33+00:00","Not needed anymore :)

svn-id: r19735
"
"4e05925676036dd06a962cfa214d1d6da8e1e209","2005-12-03 19:18:03+00:00","Not needed anymore

svn-id: r19736
"
"f557976e8869cc7c0395776efeefa1806b1c643d","2005-12-03 19:56:34+00:00","Preparing for new Build structure and with Sevs code formatting fixes + fixes for those fixes.

svn-id: r19737
"
"02f5921cbeca2352df9fa84628d3e835df15cc2a","2005-12-03 20:13:27+00:00","Remove old source files

svn-id: r19738
"
"6ed67205ec31305ad19f2e4469de27e7a93c51e8","2005-12-03 21:29:13+00:00","1. New build structure for Symbian builds to allow easier build and project updates
2. Updated framework files for new structure
3. Uncommented Debug statements in vorbis.cpp (Should probably be removed alltogether.
4. Incorporated Sevs code formatting changes in the new Symbian source structure.
5. Removed/Changed EScummVM to ScummVM instead, hopefully most cases covered.
6. Beginning vibration support to be used for Scumm shake effects (Work ongoing by SumthinWicked)
7. Replaced the ScummVM icon for the FavIcon and upscaled the icon to 32x32. I think it looks ok, comments are welcome.
8. Built for S60V1 and UIQ2 targets from the cvs
9. Updated Readme with new build instructions.

Any comments are welcome.  Hopefully the other builds are not affected by this and all Sevs code updates are also incorporated.

svn-id: r19739
"
"36b859624e2a2c0985bd138226abbae603816628","2005-12-03 21:57:04+00:00","Codeformatting update

svn-id: r19740
"
"fd0ad7beaed80c6b284920a3497e0e50b7ba4f05","2005-12-04 08:49:08+00:00","FSF adress updates

svn-id: r19741
"
"858cfbdd0762e2e93f1ba5669b59921a209ca064","2005-12-04 16:05:28+00:00","Remove obsolete files.

svn-id: r19742
"
"e59eed409e40db61ec158218738713d453ffeef2","2005-12-05 05:02:43+00:00","some cleanup, engine returns to the launcher now instead of calling OSystem::quit.
I suppose it leaks memory though...

svn-id: r19743
"
"9f754ebd59592aa0c2068b73a793493e38c50847","2005-12-05 10:36:58+00:00","Add German versions of puttrace/spyfox/spyfox2.

svn-id: r19744
"
"89b2c02a3d46fe264b1c6e2726824bbcd36ea16a","2005-12-05 12:02:23+00:00","Add another English version of Simon the Sorcerer 2 (DOS Floppy).

svn-id: r19745
"
"b933af58cc85b112b7abcebc9e706e510fcb3aac","2005-12-05 12:33:42+00:00","Changes for German version of puttrace/spyfox.

svn-id: r19746
"
"30a8a4658a86da882477fbf17baea0491db81d3d","2005-12-05 14:02:06+00:00","Credit Kostas for PPC2002 build

svn-id: r19747
"
"32c1ec73122dbdfc29e07799a7f1daf4ceaaee0a","2005-12-05 23:10:10+00:00","Credit Chris Gray (hey, khalek) for Win64 builds

svn-id: r19749
"
"31b015cb422368160b2381f39d3d25e04b334d70","2005-12-06 16:13:39+00:00","fixed bug.
Before, when a subtitle would get displayed because the corresponding speechfile wasn't found and the player escaped it by clicking with the mouse, it'd stay on screen forever.

svn-id: r19751
"
"685ec4a5b180e9aad7663dc8ca99d0bcab7b36c3","2005-12-06 16:17:48+00:00","added note about BS1 scrolling fix

svn-id: r19752
"
"fd3797a9d6e2c856c3aef7499f99702473d240a9","2005-12-06 16:50:39+00:00","minor cleanup

svn-id: r19753
"
"10ca82b390c62dfe69a6dbac7babdc5ae9257cf2","2005-12-07 20:57:04+00:00","fix bug#1374198 'White Noise instead of Music Playback'

svn-id: r19754
"
"f3f13791c7dc672d458d42bd00785909e82f21d1","2005-12-07 22:26:51+00:00","Add Macintosh versions of Backyard sports titles.

svn-id: r19756
"
"896a8d819118eaa2e666f88c5a142224305f04e9","2005-12-07 22:28:29+00:00","Add Italian versions of Simon the Sorcerer 1 & 2 (DOS Floppy)
Add French version of Simon the Sorcerer 1 (DOS CD)

svn-id: r19757
"
"0db98bd46dd226e833215c069ff16aefe8f9bdc5","2005-12-08 03:34:46+00:00","Correct mouse position in FF.

svn-id: r19758
"
"eaf4f2f6f4c8cd6581bd45aa01ff776c6c9570f7","2005-12-08 06:12:04+00:00","Cleanup.

svn-id: r19759
"
"3878231019a0381e8cec537dbd55f69743eacce6","2005-12-08 12:39:54+00:00","Fixed possible OOB access.

svn-id: r19760
"
"bce163c3cb71b88ff62907e8c0a6d7661863dfe7","2005-12-08 17:19:18+00:00","Fixed bug with item drawing.
Added support for item placing. (not user input controlled)

svn-id: r19761
"
"4f1c89591eb4abde1f535e7edde0839da16749f5","2005-12-09 14:00:36+00:00","Actually there are 137 smackers in football2002

svn-id: r19762
"
"1fc81a08fa6eab8d29b8e0d443501727b1c6c224","2005-12-09 14:52:31+00:00","Commited patch # 1376551 (debug console, text fade, misc). Thanks to vinterstum.

svn-id: r19763
"
"69114bb80dc8b8f0c4326e2aed43050ed3d52124","2005-12-09 17:36:57+00:00","Finished item pick up code.
Changed writing of stack access in the script functions.
Also fixed typo with cmdPoisonBrandonAndRemaps.

svn-id: r19764
"
"b90e114f2c562afeaa2cc2c14ceb71e6b683da2f","2005-12-09 19:49:47+00:00","Implemented item dropping into a scene and renamed unkItemFunction to processItemDrop.

svn-id: r19765
"
"e0e1dcda08ba26674e3f988594535ce542f44925","2005-12-09 21:42:19+00:00","URL pointing to an IMA format reference

svn-id: r19766
"
"3107d08f271f9606210dca05db72ace13fe37afc","2005-12-09 22:04:28+00:00","Unified IMA code a little bit

svn-id: r19767
"
"775386459972b43308de3f82edf75660ad5e2161","2005-12-09 22:23:55+00:00","Fix warning

svn-id: r19768
"
"b57f03697541b21c981dcf153354163671773720","2005-12-09 23:02:16+00:00","Fixed bug with wrongly used shapes of items in a room.
Also implemented usage of NPC.EMC in the input function.
And implemented following opcodes:
- cmd_getCharactersLocation
- cmd_setBrandonStatusBit
- cmd_queryScenePhasingFlag
- cmd_resetScenePhasingFlag
- cmd_setScenePhasingFlag
- cmd_phaseInSameScene
- cmd_popMobileNPCIntoScene
- cmd_setCharactersMovementDelay
- cmd_queryBrandonStatusBit
And a fix for the pathfinder and various other functions
using the character positions values so they are now able to handle
negative positions.

svn-id: r19769
"
"5cdf1bb621f51d47c0536004335481892641c509","2005-12-09 23:07:20+00:00","Simplified COMI IMA codec (resulting code needs less memory and should be faster on modern CPUs)

svn-id: r19770
"
"fe80cf4f99319322394706d19149e6ce512e13f2","2005-12-09 23:48:52+00:00","Changed use of setTimerCountdown to new implemented setTimerDelay.

svn-id: r19771
"
"7b556aaafe00f294d5c3c042e97ab47d4c6ef661","2005-12-10 15:52:38+00:00","Implemented cmd_bkgdScrollSceneAndMasksRight.

svn-id: r19772
"
"d6e9396166d0dbf42f2698fc24cea32c084f74f2","2005-12-10 17:51:40+00:00","Implemented basic saving and loading. Use Ctrl+(0-9) to save, and
Alt+(0-9) to load. Also extended the FastMode functionality to cover
the main game, hit Ctrl-F to speed animations and chats. Set '.' to skip
Brandon's chats, removed a redundant showMouse() and hideMouse() pair,
and simplified some screen updating code.

svn-id: r19773
"
"38c3df43933b18682ee0c78c9eb2a8e078f9ab64","2005-12-10 19:02:56+00:00","Implemented drawing of Brynns note.

svn-id: r19774
"
"7cbb9af1137a55f4b840ea980f5c6133f6697d4d","2005-12-11 08:30:48+00:00","Fixed Valgrind memory leak warnings, either by freeing memory on exit or
(in one case) by not allocating file handles dynamically. While this isn't
really necessary at the moment, it makes it easier to find the real memory
leaks, if there are any.

svn-id: r19775
"
"0dbbdc60595ecb1d163fe76a4d1f8205183f492f","2005-12-11 13:15:03+00:00","Fix warning

svn-id: r19776
"
"2c12614ae138642e0e128815346c670c0955c760","2005-12-11 13:18:27+00:00","Simplify ADPCM IMA decoding (based on IMA docs). The result will only be 99.9% identical, but the code should be faster on most modern machines

svn-id: r19777
"
"bf1fdc0db43491cd2542944ed5c436b2f740f7fd","2005-12-11 19:40:23+00:00","PalmOS SAMPLES_PER_SEC

svn-id: r19778
"
"7c8b256dd12cefbb6ca593c0fccdb8f5f08a9a95","2005-12-11 19:46:51+00:00","Auto-off on low battery only if the device is not plugged-in
Fixed compilation with standard ARM version

svn-id: r19779
"
"d23c414d7e27cee2d3185e3793168ed1a11e1df3","2005-12-11 19:49:22+00:00","Added autosave_period option
Added default mouse keys
Clear timer struct to prevent unexpected behavior

svn-id: r19780
"
"6fc01e2c47f72fd1d1503b5390c53fd788a68eef","2005-12-11 19:50:20+00:00","Fixed compilation

svn-id: r19781
"
"0ba6f84374d4c9df5946e918e625f5b8d224ff06","2005-12-11 19:52:39+00:00","Cleanup

svn-id: r19782
"
"701bdbda9dabac0884bbf7de14bea3593a7377ce","2005-12-11 19:56:31+00:00","Added true timer support
New OS5 ARM backend, preliminary support

svn-id: r19783
"
"080039cf1437bfc2de9716f40612dd4379dc7853","2005-12-12 17:39:01+00:00","Reworked the resource manager. Now it doesn't load all package files into
memory but loads the needed part from the original files if needed.
Also added CHAPTER1.VRM to the default CD filelist to fix that scummvm
quits then looking at items in the CD version. (CHAPTER[2-5].VRM is NOT needed
since they are the same files as CHAPTER1.VRM).

svn-id: r19784
"
"01c32489059d5450bfd2c1ad77a5ec24d797d30d","2005-12-12 19:22:49+00:00","Increased size of VOC filename buffer to accomodate for 1000.VOC and
beyond. (Fixes a failed assertion for me.)

svn-id: r19785
"
"e1492f3ba50760c4cdea8726f1c6b88bf1b6d138","2005-12-12 20:30:23+00:00","Fixed displaying of brynns note for cd version.

svn-id: r19786
"
"88beea1d21ee5968aae64c17a3887fbc0f61c4b0","2005-12-13 00:20:11+00:00","Cleanup.

svn-id: r19787
"
"8323123aa75427f9cabd7aaae74fdf906b677385","2005-12-13 03:26:49+00:00","Remove leftover

svn-id: r19788
"
"3e3df54a9c6ad237014c10b896ce81913df9314f","2005-12-13 04:11:57+00:00","Quiet warning in gcc 3.3.6

svn-id: r19789
"
"55178803000823e5090aa0316abd92855eafc0f1","2005-12-13 13:27:58+00:00","Fixed a bug with transcendScenes in CD version there the old file
is still loaded then.
Also implemented:
cmd_changeCharactersXAndY
cmd_setCharactersLocation
cmd_setCharactersCurrentFrame

svn-id: r19790
"
"c477d545707aacaa8dbfe1bfcc0f8f83f9e772fc","2005-12-13 14:31:13+00:00","fixed Sky memory leaks on quitting

svn-id: r19791
"
"f74b5711a6b55d59e0a6010e592783936f4fef59","2005-12-13 15:05:06+00:00","changed delay code

svn-id: r19792
"
"67d640b214d099761ced51aff67c8c55a8f395ae","2005-12-13 15:07:19+00:00","forgot to remove this

svn-id: r19793
"
"1f727e00189d347e23e24fe7e2fbd7ed68378793","2005-12-13 15:10:20+00:00","Improved user controlled input handling.
Disabled use of _mouseLockCount in screen.cpp for now.
(that should fix a bug with not displayed cursor after using the debugger)

svn-id: r19794
"
"31a7c1f0739865556a0f4d1f322508a38ebd553d","2005-12-13 15:27:32+00:00","make sure all Text compacts were killed after restoring a savegame

svn-id: r19795
"
"7cb66e3cf751d9750e5d5479cd8d280971d9ef23","2005-12-13 16:56:33+00:00","Implemented more of sceneScreenInit and completed transcendScenes.

svn-id: r19796
"
"25024e6943454e04aaedd4c8dd14b61a5cffba3c","2005-12-14 03:29:53+00:00","Don't update screen when _width or _height is 0, otherwise the copyRectToScreen assert gets triggered. This happens at the beginning of vision.san in FT, where the first frame doesn't contain any FOBJ chunks.

svn-id: r19797
"
"df8e542f39463fac72e0688eb1a664621bfd4943","2005-12-14 14:08:30+00:00","Implemented command line update when picking up or dropping down items.

svn-id: r19798
"
"5e8b2637fcccbfc3d1ec165e2e0545a1349350cc","2005-12-14 17:56:12+00:00","Implemented cmd_setScaleMode and changed some old debug calls with debug
level 9 to debug level 3.

svn-id: r19799
"
"a36c5781c18dc7c58225c55e341d951331f24579","2005-12-17 06:12:28+00:00","Some tweaks on the GP32 sound code.

svn-id: r19800
"
"910a3ee48c0f3a244a54c8ba4e1b693975cc5f6f","2005-12-17 07:33:45+00:00","Proper code formatting

svn-id: r19801
"
"80182307c16fbb71f926059374bb435e5e366e94","2005-12-17 23:31:22+00:00","Update details for ru versions.

svn-id: r19802
"
"17319d77cfccec4f12b15f05ce21b2c4958a89b7","2005-12-18 06:08:54+00:00","More key mappings. Now we can play monkey2 :)

svn-id: r19803
"
"d5e398dcff2676b44cc3c06122a8c5861cbfc24d","2005-12-18 09:57:44+00:00","Minor simplification.

svn-id: r19804
"
"882c69ac851abe9d926a4cf906738daf37d37d39","2005-12-18 18:50:15+00:00","Fixes bug with no gfx update after updateSentenceCommand.

svn-id: r19805
"
"b653f833826b4b604e268383928fd91affc30f7c","2005-12-18 23:38:50+00:00","Add German version of freddi2 for Macintosh.
Add German demos of freddi & puttzoo.

svn-id: r19806
"
"11c85443398b9d6bb4aeea2a2d2c7fcf55ead933","2005-12-19 00:47:01+00:00","Correct HE version for German freddi demo.

svn-id: r19807
"
"f87139a5753b63c961490b9cfc800e00ce6962d4","2005-12-19 01:04:03+00:00","Correct platform for German freddi demo.

svn-id: r19808
"
"0eca2a971fb87f0c9b77ce1353177a179e59e3dc","2005-12-19 02:23:01+00:00","New credits format (DocBook conversion not yet done)

svn-id: r19809
"
"efdb918df35a091b2679a831b439df9f0a5ff1c5","2005-12-19 09:59:04+00:00","Add German bundled Macintosh version of dott.

svn-id: r19810
"
"db5526836a9bcd79ac403faff821dc89c6674523","2005-12-20 05:38:14+00:00","Update details.

svn-id: r19811
"
"1b77cac78672aa9a31f997b01de4f91e89b15a9f","2005-12-20 06:55:00+00:00","Change from Quietust:
-Fix assert regressions in NES version of maniac

svn-id: r19812
"
"53f13b76e41298536145b9e511c2938cc1bc1eb0","2005-12-20 08:56:48+00:00","If drawSurface() is called with no clip rect, clip to the screen size. This
prevents the subtitles-only cutscenes fallback from drawing outside the
screen.

svn-id: r19813
"
"f241049961e4758894a0d1abefce6a225956f7d8","2005-12-20 10:58:07+00:00","Fixes gfx bug in the temple and the cave, also corrected
the encodeShape and drawShape function for CD version.

svn-id: r19814
"
"df493c63c4a0ffc66aa8576dae80a914c344606b","2005-12-20 12:42:22+00:00","Implemented cmd_makeAmuletAppear.

svn-id: r19815
"
"d43294e7d4bfa1c36bf4cf76a5d0f27c73102b13","2005-12-20 14:06:47+00:00","Fixed another gfx bug, this time sprite related, in the temple.

svn-id: r19816
"
"da79dd7b30b56ad23da21078b93f88b40786ac7c","2005-12-20 22:44:38+00:00","Re sort.

svn-id: r19817
"
"e214315c56dec971171816ccf9696de8dc1df9e1","2005-12-20 23:23:30+00:00","Sync. demos.

svn-id: r19818
"
"7abeb7d9ea200efc3d5b3d4659683a699243f403","2005-12-20 23:49:10+00:00","Sync.

svn-id: r19819
"
"42e878e1ea491541cc39e11803f31ee1c0e8d005","2005-12-21 00:05:01+00:00","Switch to Floppy/CD, instead of Talkie.

svn-id: r19820
"
"3885b5093d45d55823f0064e57e305146e8430f8","2005-12-21 01:09:28+00:00","Minor changes.

svn-id: r19821
"
"2facc1411b295b70d65f37bfe23f29d33a2dcff0","2005-12-21 05:09:06+00:00","Minor changes.

svn-id: r19822
"
"ca03d5a3e4804aa011911349ceb68737092824e5","2005-12-21 10:57:48+00:00","Added debugging messages to track which CD (1 or 2) the game thinks it's
supposed to be reading data from. Maybe this will help track down the
mysterious missing speech problem reported on the forum.

svn-id: r19823
"
"d468c48bdaafcd15cc808115ecc9991d11f44c76","2005-12-22 01:49:59+00:00","Fixed bug with an endless loop while clicking on herman after giving him the saw.

svn-id: r19827
"
"c36104ac0ca2f350decd4622a70690f651ce7446","2005-12-22 18:14:52+00:00","Completed implementation of processItemDrop
also changed implementation of itemDropDown a bit.
Implemented new opcodes:
- cmd_fadeSpecialPalette
- cmd_setCustomPaletteRange

svn-id: r19828
"
"22033482b0d47c5ed03de8e0226af4e65c85393d","2005-12-22 19:31:38+00:00","Small bugfixes with enterNewScene and cmd_pauseSeconds.
Implemented opcode: cmd_setSceneFile

svn-id: r19829
"
"268d05955f7896058a2a87966282a525d315aa9a","2005-12-23 17:49:14+00:00","Implemented cmd_magicOutMouseItem and also extended enterNewScene
and initSceneScreen.

svn-id: r19830
"
"515b69ddb87e5f7236f0e6ec98f65e7c6b4705d3","2005-12-24 18:00:35+00:00","Started to implement button handling (atm only the inventory works)
Also implemented following opcodes:
- cmd_waitForConfirmationMouseClick
- cmd_drawItemShapeIntoScene
- cmd_setFireberryGlowPalette
- cmd_findBrightestFireberry
- cmd_sceneToDirection
- cmd_createAmuletJewel
- cmd_getCharactersMovementDelay
- cmd_setNoDrawShapesFlag
- cmd_checkClickOnNPC
- cmd_getFoyerItem
- cmd_setFoyerItem
- cmd_passiveProtection
- cmd_fillRect
Fixed bugs in some opcodes (mostly wrong debug calls)
Also changed debuglevel of all sprite functions to level 6 (from 5).

svn-id: r19831
"
"fcf1af2ffc739d3efa430edc5280f83d3ab270fb","2005-12-26 11:18:25+00:00","New CoreMIDI midi backend for OS X

svn-id: r19832
"
"55f737c4a2b6f8dc51241dad02d2e2692e734213","2005-12-26 14:53:51+00:00","Started to implement the amulet button callback.
Also implemented some of the first jewel functionallity.
And cleaned up the resource unloading a bit.

svn-id: r19833
"
"3385ce861767b8e0c1c694e78a2bbe5a53568d47","2005-12-26 17:31:42+00:00","Fixed bug with input handling and implemented: cmd_getBirthstoneGem.

svn-id: r19834
"
"93bef2e0be5ffd8872ae37502361ba653d6942d3","2005-12-26 20:54:24+00:00","Switched the CoreAudio driver to use an AUGraph; this simplifies things a lot and should also cope with the user switching the default output device while ScummVM is running

svn-id: r19835
"
"52eee62ba6259fd93ae6b40b9128fa07e4e67a43","2005-12-26 23:12:23+00:00","Add details for Macintosh versions of airport and jungle.

svn-id: r19836
"
"c4c9ca6f993f19025c95d498776781963471c9bd","2005-12-27 19:17:53+00:00","Fix MI1 & BS1 bugs reported in #1276592 - both are related to the number of open file handles.

svn-id: r19837
"
"b7a2b9d31f4e56355a929c64aba1fc2fdbd0fe4d","2005-12-27 19:38:26+00:00","Mention fixed PSP bug, fix spelling.

svn-id: r19838
"
"f7b49851264843b6e24c57dcbf9ca4751d6dae2f","2005-12-28 21:34:40+00:00","Implemented:
- cmd_magicInMouseItem
- cmd_poisonDeathNow
- cmd_poisonBrandonAndRemaps
- cmd_playFluteAnimation
Also implemented healing function for brandon. And implemented poison death
sequence.

svn-id: r19841
"
"365b91dc037ce6816254edf952aea16c35b86fb6","2005-12-28 23:31:48+00:00","Add Macintosh versions of more HE demos.

svn-id: r19842
"
"80d3ec49d4f409e154b6fe93160ba5d414d5a63d","2005-12-29 00:27:03+00:00","Revert HE version change for Mac. farm demo.

svn-id: r19843
"
"9de7536057b0f0b162ba12637327f9120ee1238e","2005-12-29 16:55:21+00:00","MidiDriver: Some cleanup, added some comments/TODOs, preparations for a potential cleanup

svn-id: r19844
"
"911300a9e36c9e8603ff2fcd5b62962886c3154d","2005-12-29 17:11:07+00:00","Disable 'coreaudio' driver name alias for now -- it makes the CoreAudio driver appear twice in the GUI

svn-id: r19845
"
"e74799c32e57cd12839b8265ffbebfb7cb88e6d7","2005-12-29 21:21:16+00:00","cleanup

svn-id: r19846
"
"d1622557d9122a8c07d9c8e003a109ee4d934e3e","2005-12-29 22:18:40+00:00","Implemented:
- cmd_pauseTicks
- cmd_setLogicPage
- cmd_fatPrint
- cmd_playWinterScrollSequence
Also implemented functionallity of the other three jewels of the amulet.

svn-id: r19847
"
"a8744782f41f43e41689e3839eea865415f0b7fc","2005-12-29 23:10:56+00:00","Minor changes.

svn-id: r19848
"
"2ea47c23e42ea99293593558a43063905e2245fa","2005-12-30 00:29:31+00:00","Correct order

svn-id: r19849
"
"73e9a87e96634af839c3d49b7d8abf5309e4a9b8","2005-12-30 02:59:56+00:00","Correct Spy Fox game's titles.

svn-id: r19850
"
"2fab4dc8f597a95932403806836862e53caf247e","2005-12-30 03:53:43+00:00","Sync. changes.

svn-id: r19854
"
"127d2bdc9d1ab61cf91b131561d947d6e7e4916c","2005-12-30 04:01:53+00:00","Add Polish.

svn-id: r19856
"
"2b156bd4c1d334931513a834a757723ec290db0b","2005-12-30 07:25:08+00:00","Use the same amount of spacing for 0.8.1 as for 0.8.0

svn-id: r19857
"
"60fcd5a1713d143cd6fb4d0a9c6f3be030c65b5b","2005-12-30 14:18:21+00:00","* Replaced MDT_PREFER_NATIVE/MDT_NATIVE by MDT_PREFER_MIDI/MDT_MIDI).
* Changed MidiDriver::createMidi so that if MD_ADLIB is passed, it
now *does* instantiate the adlib driver.
* Rewrote MidiDriver::detectMusicDriver (code should be clearer now,
and hopefully easier to adapt/maintain). Note that the behavior
changed slightly (this may require some tweaking).
* Added MidiDriver::findMusicDriver which works similar to the old
MidiDriver::parseMusicDriver but returns the full MidiDriverDescription
and ignores all characters in the passed driver name following a colon ':'.
* Changed MidiDriver::parseMusicDriver to use MidiDriver::findMusicDriver.
* Changed game engines to match the changes made to MidiDriver.
* Modified SCUMM engine to not record the selected midi/music driver
(in _midiDriver), but rather the music *type* (in _musicType).

svn-id: r19859
"
"549c6ea871622c2fa55765891bf60cba589021bb","2005-12-30 14:41:25+00:00","Fixed the CoreMIDI driver -- MT-32 now sounds perfect under Mac OS X :-)

svn-id: r19860
"
"b8a0f9659fa72d04dad01147046432d12e140859","2005-12-30 15:20:27+00:00","OSX: Make it possible to compile ScummVM using GCC 3.3 against an SDL that was compiled using GCC 4

svn-id: r19861
"
"1bfae752517cce99ad9cfbd7da7e6b14742700ab","2005-12-30 16:36:53+00:00","Fixed compilation.

svn-id: r19862
"
"3b0d3defa73512c4bcef4d59a4b667829cdb7dc7","2005-12-30 18:39:01+00:00","Added kMapHeight and kMapWidth constants

svn-id: r19863
"
"5d0edbe4bc0e02807033dc9b0af85e9b4a80f39d","2005-12-30 18:41:19+00:00","Added kMapHeight and kMapWidth constants

svn-id: r19864
"
"8b666f622e1f14028dfbb1b84756b5573fa34575","2005-12-30 19:27:45+00:00","Slightly more verbose debugging messages. Still trying to track down weird
bug report from the forum.

svn-id: r19865
"
"230c592d7ba30e1c526e40055563be414a15950f","2005-12-31 00:10:15+00:00","Chnage Pajama Sam games order.

svn-id: r19866
"
"fb751ebe83b4c93a3e99327e7bfc77b489c9cdf5","2005-12-31 00:14:21+00:00","Elaborate more about myself in new credits format. I invite others to do that
too as that helps to determine more exactly who has an expert opinion in some
particular area.

svn-id: r19867
"
"5afaad7869a252cabde3f8ec24957ca1e7c1684a","2005-12-31 00:16:17+00:00","Minor changes.

svn-id: r19868
"
"a10097eaa41357beb2dc4be4f790717fe9fe70a3","2005-12-31 15:41:37+00:00","Commited patches 1394374 and 1394374 with minor changes.
Thanks to clemmy for that.

svn-id: r19870
"
"22055730de26b895265eab1cf37b8dad9ebc6eb5","2005-12-31 17:25:47+00:00","Implemented:
- cmd_drinkPotionAnimation
- cmd_fillFlaskWithWater
- cmd_getIdolGem
- cmd_itemOnGroundHere
- cmd_queryCrystalState
- cmd_setCrystalState
- cmd_setBrandonScaleXAndY
- cmd_resetScaleMode
- cmd_getScaleDepthTableValue
- cmd_setScaleDepthTableValue
- cmd_brandonHealingSequence

svn-id: r19871
"
"fccb0d066291b1788daa12834d737e99e2ea50cd","2006-01-01 05:45:15+00:00","HE Games use more image states for objects.

Fixes background redraw when getting urchin in room 13 of freddi2.

svn-id: r19872
"
"67ac79c5aa0ffd9d672f4b23dbbce3bba1b608c3","2006-01-01 09:51:11+00:00","Add additional drawStrip case for HE games.

Fixes glitches over key in Darkroom of freddi3.

svn-id: r19873
"
"e66fe0270dc4f6f04ff15b4380ea8763f41f43fb","2006-01-01 09:55:56+00:00","Rename variable.

svn-id: r19874
"
"7bbfe2e4234ba7f814fe9d94a541a539496b5e5c","2006-01-01 10:48:35+00:00","update

svn-id: r19876
"
"59368294bbdbd4cc77fff2e754c71f1f312eb6ff","2006-01-01 10:49:27+00:00","fixed warnings

svn-id: r19877
"
"fd27c9e26755a53e41f32dee11f88fe2b96c6189","2006-01-01 11:47:33+00:00","Change load & save quick save keys, to match other engines.

svn-id: r19878
"
"f3a6427cd4f923ce927c41d3671e7ba78503a2ad","2006-01-01 13:46:42+00:00","Hopefully fixed the missing speech bug reported on the forum, once and for
all.

svn-id: r19879
"
"77ca6708ee308243c923b7a5227c56a34bee4261","2006-01-01 14:11:30+00:00","Sync BS2 section with the 0.8 branch.

svn-id: r19882
"
"5c75f5a6e57d922893bb473fc86123abec970917","2006-01-01 16:29:23+00:00","Some cleanup/paranoia fixes to the previous missing voices/music fix. Treat
files marked as being on both CDs (I haven't seen any such file -- ever),
treat it as if it's on the hard disk.

Also, the 'cd' field of the ResourceFile struct now holds 0, 1 or 2, not
the bit flags from the data file. (This last change is not in the 0.8
branch.)

svn-id: r19884
"
"58f64c5ef5506194ec913203b84f3fc390c5a9f6","2006-01-01 18:04:52+00:00","Use 44k1hz output rate on PSP to avoid an unnecessary resampling step.

svn-id: r19885
"
"1ef2e300b27aa2a9a5b1d2d4f316782b410c5c99","2006-01-01 18:25:49+00:00","Get rid of an old hack

svn-id: r19886
"
"f4a15f5f0d9882f12e36ca2f4785e42f87032828","2006-01-02 13:20:02+00:00","Started to clean up the kyra engine.
Done:
- moving all wsa specific things into a new class

svn-id: r19888
"
"978cbb3fd00be5f57a42a58b8ea9447311ac1d98","2006-01-02 19:52:05+00:00","Typo

svn-id: r19889
"
"bd965cd48388afdd8a85adf93d186db3da325822","2006-01-02 22:58:59+00:00","More 'cleanup' for kyra.
Moved scene object drawing into its own class (see animator.h and .cpp) (this needs some more cleanup!)
Moved text displaying into its own class (see text.h and .cpp)
Also moved timer code to timers.cpp and button code to gui.cpp.
Also changed wrong (c) information in debugger.h and debugger.cpp

svn-id: r19890
"
"01eb5d503ad05b3d7370278c6e02ec851e112713","2006-01-02 23:36:33+00:00","V7/V8 games do not use the text masking anymore at all, so we can optimize drawStripToScreen for them (this should improve CoMI speed a bit)

svn-id: r19891
"
"6ce9a73d653d543160a50155c085a1c36913f1fd","2006-01-02 23:49:40+00:00","Match original game titles and make game titles consistent.

svn-id: r19892
"
"025aa4dbb4f714ad88c469411265be8ddd28fd2e","2006-01-03 02:18:19+00:00","Moved Simon TODO to wiki.

svn-id: r19897
"
"f046a14bb22f1d6c138ed82efa03d5ff89ae85e0","2006-01-03 19:03:09+00:00","Fixed some bugs with the timers.
also implemented: cmd_dispelMagicAnimation and cmd_runWSAFrames
and implemented color fading of the kyragem in room 210.

svn-id: r19898
"
"fd8ac69fc45fb346a931f61701e8aec04278159b","2006-01-03 23:14:39+00:00","Patch #1395615 'GobEngine code wrapped in classes'. With some cosmetic changes.

svn-id: r19899
"
"4b3af6b94fb994fd538430ca502dd4c7e51d0e51","2006-01-03 23:41:52+00:00","Fixed wrong formatting in animator.h
Reworked the savefiles and extracted the save/load code to saveload.cpp.

svn-id: r19900
"
"4183bc8c78071fbb6dd34998c0dcef0e9c57905c","2006-01-03 23:53:25+00:00","Credit Sven for objectizing gob. That was a big amount of work.

svn-id: r19901
"
"42eeb3aff69b88d845bbc73557788e5dc3522aed","2006-01-04 00:23:57+00:00","Implemented cmd_shrinkBrandonDown and cmd_shrinkBrandonDown.

svn-id: r19902
"
"71a386618ac9239a64381821824e1a2665fdda4b","2006-01-04 01:23:20+00:00","More work on renaming class variables with underscore prefix

svn-id: r19903
"
"fbad775cf0c148694efb37455a65e26787bdd812","2006-01-04 01:48:15+00:00","Last chunk of underscore maddness for today

svn-id: r19904
"
"27877ad89e3b4c91173810075c0c4c78d8dc27cf","2006-01-04 05:03:46+00:00","Update comments
Add missing akos case.

svn-id: r19905
"
"23f81b8bc67cfec985486a66966fa2f49ac06f85","2006-01-04 05:07:36+00:00","Update

svn-id: r19906
"
"ed6c07c66e15890670fd7cc93c17da6f46962518","2006-01-04 07:39:16+00:00","Added a simple gui dialog if brandon dies (currently using scummvms gui system)
Implemented cmd_setDeathHandlerFlag and fixed debug call for cmd_drinkPotionAnimation.

svn-id: r19907
"
"c2702891ceef6f08b3e5b6c22346119202101813","2006-01-04 16:57:16+00:00","Added a little 'hack' for cmd_pauseTicks until it is fully implemented
and fixed some wsa playing functions.

svn-id: r19908
"
"e01afb0bd4b80c387a6170ee45a74ad684038b49","2006-01-05 07:06:47+00:00","Initial support for sound code in HE games.
Split HE sound functions into separate file.

svn-id: r19909
"
"5551e5d14c202cd801b160f7fc13dd1b2f223b70","2006-01-05 07:49:52+00:00","Enable sound priority in HE games.

svn-id: r19910
"
"5da9e6351993d4038a2dec83e9d118d4bd69b2de","2006-01-05 07:55:23+00:00","Flag 4 used for looping in later HE games.

svn-id: r19911
"
"50636c33d32debef920026da30094b5796e33351","2006-01-05 08:19:14+00:00","Add safety check.

svn-id: r19912
"
"1995eec5504a4bc5ceeb532d9df7588441060f64","2006-01-05 08:42:48+00:00","Sets random talk state, if value is zero.
Fixes song in puttrace.

svn-id: r19913
"
"2f7acd49add4c34db73def3773dd453d5d45d341","2006-01-05 09:02:41+00:00","Adjust size, script in freddi3 triggers sound var 26.

svn-id: r19914
"
"8ae6c259ad78d3a2e1db981e5a665db5c14c319e","2006-01-05 09:27:02+00:00","Revert, might be HE100 only.

svn-id: r19915
"
"5e7ef4dea6f763b2ebfccfa23ff06f03b91fca49","2006-01-05 11:38:45+00:00","Fix sound resource loading in HE games.
The main resource header and size was been cut off in some cases.

svn-id: r19916
"
"56f1e7d6afa03959c40244385700393208db5c1b","2006-01-05 11:42:33+00:00","No longer required

svn-id: r19917
"
"3adee6125dfab45cfb667eebe3ab631e8dd49401","2006-01-05 16:06:55+00:00","Slighty modified patch #1397672 'GobEngine script functions splitted'

svn-id: r19918
"
"d397e7d96f81540457a00b8e909f89afa771d622","2006-01-05 20:54:53+00:00","fixed warnings

svn-id: r19919
"
"d555d1bd4a69cfbdc4946e8eb0af98974c772f23","2006-01-05 20:55:26+00:00","update

svn-id: r19920
"
"2ff05b9b4e6e9253801604db0320e2d514b690ba","2006-01-06 01:25:31+00:00","No longer required.

svn-id: r19921
"
"53b7c6167653468b73c22b70871ede4da2eb7602","2006-01-06 01:46:02+00:00","Correct bounds checking for akos codec 16 in HE 71+ games.
Fixes crash during introduction of demo of farm (Updated)

svn-id: r19922
"
"ffff4755eeaf0d1f1b23fef91f6cc61061018001","2006-01-06 02:47:15+00:00","Add another French version of DOTT.

svn-id: r19923
"
"2746e5be8c194b805f0ac99635bd168a775d320c","2006-01-06 03:49:02+00:00","Nukes resource directly in HE games.

svn-id: r19924
"
"86bc87c70a600b7063a33cd37c9824e3b328d4b3","2006-01-06 05:40:40+00:00","Adjustments to createSound().

svn-id: r19925
"
"95c50a4e55c6c6740799ab428f1aaf88a3948f63","2006-01-06 06:40:27+00:00","Avoid invalid read/writes in createSound() for now.

svn-id: r19926
"
"a5601efd54c366cedb7f90bcb4573297232c17b0","2006-01-06 10:14:59+00:00","HE90+ games use difference value for actor conditions.
Fixes animation regressions during speech.

svn-id: r19927
"
"948cb0d0f77170fdbc1b80b07feea7b9794751bc","2006-01-06 10:45:42+00:00","Implemented the end sequence, (only the rest of the winning end sequence
is missing yet and one text part that malcolm says).
=> Kyra *should* be completeable now.
Also used KyraEngine:: in all debug calls from the KyraEngine class.
And fixes a bug while drawing shapes.

svn-id: r19928
"
"8b4627d2470e97a272adfcaec31fd0ea1156aa24","2006-01-06 12:48:48+00:00","* Accurate / fast gamma correction using LUT
* Enable changing FM quality and sample rate
* Saves launcher setting to SMC
* Etc.

svn-id: r19929
"
"1ab01a6fb76fcf6ab960229ecb65ecfe15c7159d","2006-01-06 13:13:58+00:00","Oops

svn-id: r19930
"
"6a8f6142c8b9e35637c556132bf09f7dfdc42165","2006-01-06 13:56:46+00:00","Partial fix for MM NES crash. Thanks to Quietust

svn-id: r19931
"
"f3c64fe7b3152996ecbcc097ae6711102b47fc57","2006-01-06 14:03:41+00:00","Fix typo in one md5. Fix DOTT CD Mac bundle name.

svn-id: r19932
"
"7a9c617e2added54808a15cf1cd44cc49c944f16","2006-01-06 15:02:07+00:00","Finally fix MM NES crash.

svn-id: r19933
"
"ea5b4693903f4956ba23dacc0b32af8d134ba6d4","2006-01-06 15:08:00+00:00","Move Sven Hesse to Gob engine section

svn-id: r19934
"
"bdec54aa7e8d864cf48b282683c7db2bedc2f3f1","2006-01-06 23:54:42+00:00","Rename variables.

svn-id: r19935
"
"c5da1bb276ddbc41d788e6abcae47624a5493355","2006-01-07 12:39:44+00:00","fix warning

svn-id: r19936
"
"fdd5cfb635e4f37c18fc86469c1140b6b90dd901","2006-01-07 22:28:54+00:00","Added initial support for ADL music files; continued underscoring of member variables

svn-id: r19937
"
"065f8680e36b10b82656019c7e51607564b5c9ce","2006-01-07 23:34:35+00:00","Fix compile.

svn-id: r19938
"
"05a469074c34825b387e396f93f6dd2acc59e4a5","2006-01-07 23:45:39+00:00","Remove function without purpose.

svn-id: r19939
"
"202b739c36ca3854dd522e90a67a120d13445ffb","2006-01-07 23:53:38+00:00","No longer used by HE games.

svn-id: r19940
"
"c6e0fabe97fa812edfbc1b1f99f57cb212db3581","2006-01-07 23:55:50+00:00","Implemented playing of the end sequence, still credits do not show up.

svn-id: r19941
"
"99dd62e594e37e5eebc39fe251d4e30ec6538bb1","2006-01-08 02:25:05+00:00","Should fix gfx glichtes in the intro.

svn-id: r19942
"
"9bf883274c8a4be0d9406e1a8b27b0f2fac894d9","2006-01-08 12:42:06+00:00","fixed warnings, I guess that should to be

svn-id: r19943
"
"d34acdb4627c39f274e43ba8813bacc6204e110c","2006-01-08 12:42:38+00:00","update

svn-id: r19944
"
"5713d00eab77e3b9911114986c0ce75b9c30f938","2006-01-08 13:50:35+00:00","Fixed bug with sequences playing and fixed a bug with an invaild write.

svn-id: r19945
"
"e7e1f692a6cc40191b674164213befde3e1147d3","2006-01-08 16:15:34+00:00","Fixed script handling a bit.

svn-id: r19946
"
"f082fe390c19bca213f9de51c878cf3d39702ed8","2006-01-08 18:33:23+00:00","Minor fix for sprite anims, to align with new width standard.

svn-id: r19947
"
"24bb551c1b7d865dd5cb4f563d8bef46a5de47d0","2006-01-08 18:37:35+00:00","Moved the workaround for bug #864030 in drawBlastText to fix bug #1399843.

svn-id: r19948
"
"f780422c4fb9fcc67d380e87b37261842cfb2f68","2006-01-08 18:52:35+00:00","Safer check for correct savafiles.

svn-id: r19949
"
"c19447b45f0f6a339c48f3cfe7bcf178fcfb14bf","2006-01-08 18:57:37+00:00","Kyrandia is now ready for default compiling, please update the other build systems for that change too.

svn-id: r19950
"
"70dfe93ed707a5d1cb9dc45257cc51c7e4228b8f","2006-01-08 20:03:20+00:00","Added a dummy table for which music to play in Gobliiins Mac; some code formating issues

svn-id: r19951
"
"7a05a80b8f01800570db737f68ae415db152c3bd","2006-01-08 20:10:39+00:00","Fixed savefile loading.

svn-id: r19952
"
"3b6985e896f075f347b43e2aa985dded996d9061","2006-01-08 21:05:16+00:00","Removed exiting the game on ESC, and making yet another sprite width adjustment (to fix some graphics glitches).

svn-id: r19953
"
"feaa67ca166d4808dcc9d6393b3673ceca25d6cb","2006-01-08 21:17:58+00:00","Added entries for Kyrandia to the docs.

svn-id: r19954
"
"a163b2ae2ba65ab72722626a90edb2d7545d37de","2006-01-08 23:29:36+00:00","Temporary fix for bug #1399917, by adding two dummy opcodes to
the end of the opcode list (CD version has two extra opcodes,
looks like).

svn-id: r19955
"
"b99859f22751468f2f2212c880017371fcef8e76","2006-01-09 11:01:35+00:00","Fix regressions in earliest HE games again.
Remove pointless scumm var reset to zero.

svn-id: r19956
"
"a0349221203458e7a5ab8e78876840296105092a","2006-01-09 16:10:22+00:00","More variable underscoring, that should be all

svn-id: r19957
"
"6aa6767e223031adc06402b36a7e1477bfd2b1d1","2006-01-09 17:14:31+00:00","Adding myself to the Kyra credits

svn-id: r19958
"
"ba5c93c551c8e56e9802b97153c066e4d99a50f2","2006-01-09 19:45:36+00:00","Fixes bug # 1399886.

svn-id: r19959
"
"a3f6c5d112cab5ef07deaab545ebfc647bd24ff7","2006-01-10 00:28:10+00:00","Refactoring to remove CharsetRenderer::_ignoreCharsetMask

svn-id: r19960
"
"713a646409fed4ff46c61f1cc6417b5fe8d3d8c9","2006-01-10 00:34:13+00:00","Cleanup; moving things around a bit

svn-id: r19961
"
"6946efeb7f87d104ba5416935032c01033b7b805","2006-01-10 02:43:30+00:00","Fixed regression bug #1400707, and reenabled mouselocking with a fix,
to remove the mouse flickering under cutscenes and such.

svn-id: r19962
"
"ab33f59fe2e51b2fc4a467cb8291a8107a7661dc","2006-01-10 02:58:08+00:00","Rearranging kyra credits, I put in the wrong alphabetical order last time.

svn-id: r19963
"
"c1d87f8b92b313aec094f651321b9fea2d5145c2","2006-01-10 05:00:35+00:00","Correct HE sound flags in HE100 games.

svn-id: r19964
"
"af15925e8801b72dfe599cd5cd1d3a6398a59c0f","2006-01-10 05:11:51+00:00","Reset sound flags for HE100 games.

svn-id: r19965
"
"25e6066b17dda01ff0e6e93db3dad785acec9dd6","2006-01-10 09:08:07+00:00","Set _language, before checking value.

svn-id: r19966
"
"01ddde410eac09ca3b47cce24072c35104217a6d","2006-01-10 10:16:34+00:00","Add fix for glitch in some versions.

svn-id: r19967
"
"17a9edaf25d9447d3f09d40207fc4994dc49a358","2006-01-10 10:17:22+00:00","Add French version of Simon the Sorcerer 1 (DOS Floppy).

svn-id: r19968
"
"71af473b7601eff1640fc2f489760733ab712cb9","2006-01-10 11:30:23+00:00","Moved Goblin::interFunc() to Inter_v1::o1_goblinFunc(), converting its switch() into an array of function pointers + lookup table

svn-id: r19969
"
"9bbd060f7fcc750434b99a64fa59feb56ec08406","2006-01-10 12:34:20+00:00","Small correction.

svn-id: r19970
"
"0a33d768abf831eee36b06b33d988c78b6fc7a3f","2006-01-10 16:03:38+00:00","Fix for bug #1401319, decreased width of backed up region when text is displayed.

svn-id: r19971
"
"99128ff6078e809ce11c45784f6d83752ad84ff8","2006-01-10 16:10:54+00:00","This should fix bug # 1401295.

svn-id: r19972
"
"dac7b798447f360344a41879999c910e528a6103","2006-01-10 16:39:52+00:00","Fixes debug call of cmd_resetScaleMode.

svn-id: r19973
"
"1eb9b6516d864f5058040d6707c8be719829cfd3","2006-01-10 17:18:16+00:00","Preliminary implementation of cmd_restoreBrandonsMovementDelay, to fix the walking
speed issue reported on the forums

svn-id: r19974
"
"6966e4498da9f5bdba5543395fd40149fe8a7a94","2006-01-10 21:10:48+00:00","Free the palette before re-using a 'cached cursor' slot.

svn-id: r19975
"
"10936be5f6f0ac23d767cff67af35641053ca804","2006-01-10 21:13:43+00:00","Minor cleanup.

svn-id: r19976
"
"f6c61962952b2d51d19177d42a92855b07d33178","2006-01-10 21:39:14+00:00","Get rid of unused variables and removed them from the save data ; FloodFill.unk1C and _curExecScript.
Concerning _curExecScript, I checked several interpreters (even one with windex compiled in), the only function where it's used is runAllScripts.

svn-id: r19977
"
"9fe1c9477d30032b012fcf374bc11c60c065894b","2006-01-11 00:18:32+00:00","Free _storedFlObjects

svn-id: r19978
"
"4e1778dc14d531f9c99bd82a2f589da6490ea198","2006-01-11 01:47:40+00:00","Fix FF crash.

svn-id: r19979
"
"7a7eeaa79f1cc659dcdbe8ad15c44ebe558560b1","2006-01-11 04:06:51+00:00","A few FF fixes.

svn-id: r19980
"
"67d1cc0cf957d22cb5c6f8b2bf8de4ac02e25f67","2006-01-11 04:28:31+00:00","Cleanup FF sound.

svn-id: r19981
"
"e179f3f6ed35864517cf4cb5e99e6b8002bf1d5d","2006-01-11 13:28:38+00:00","Fixed for bug report # 1401360.
Also added some delay calls while waiting in some script functions.

svn-id: r19982
"
"95ee7c97ef4ecdad991d21920be9be28ef0dce9c","2006-01-11 13:53:16+00:00","Fixed bug # 1401416.

svn-id: r19983
"
"0d30397b010cd48c0af7f9d1ab25acb01f936d76","2006-01-11 18:50:17+00:00","IHNM actor frame WIP

svn-id: r19984
"
"6bc871969140289862de340016411e20ef11201a","2006-01-11 19:10:08+00:00","Checked all ActorFrameIds against disassembly

svn-id: r19985
"
"0ff7519d0eacdd1256f4c260637e5fe11f411a9a","2006-01-11 19:14:57+00:00","Fix warnings.

svn-id: r19986
"
"b3826575393d324f703e733a99468b97ccc0456c","2006-01-12 00:28:17+00:00","Minor changes for FF.

svn-id: r19987
"
"2416254e494d93b52009548f940f7ca28bc4db6d","2006-01-12 13:16:42+00:00","Implemented 'ingame' sound handling, and named the unknown opcodes from the cd version
and 'implemented' them.

svn-id: r19988
"
"f0544b2e6bfbb8cf51c44215e8dafd377d7cfa05","2006-01-12 14:53:23+00:00","Fixed sound while loading games and fixed bug # 1403370.

svn-id: r19989
"
"7398e8648750db34110931f8f88f1623fcbc8d02","2006-01-12 15:38:04+00:00","Fixed some issues with fading sound.

svn-id: r19990
"
"37e82c8c46fa40a85f64549158a5708942bfbeb1","2006-01-12 18:51:56+00:00","Fixing bug #1402511 ('Invalid reads during startup')

svn-id: r19991
"
"d47ae2ca9f8326dc05f95c23f6e7ee8ffa132445","2006-01-13 03:27:01+00:00","Implemented a few drawing functions used by the menu, corrected a few incorrect
opcode debug messages, and blocked unnecessary sprite anim script looping.

svn-id: r19992
"
"05b6145dea8ba00c63faeddc52e67cc90dd9353b","2006-01-13 05:01:59+00:00","Add German version of Pajama Sam 1.

svn-id: r19993
"
"7e9ba921030193188409fbdb57f64e6b6ce5dfb3","2006-01-13 05:05:13+00:00","Ooops

svn-id: r19994
"
"b62e7b1aeda9c08227b508ddc3799d33875b4b36","2006-01-13 05:14:27+00:00","Add German version of Freddi Fish 3 demo.

svn-id: r19995
"
"a17c4a94acce02416b79ddd142cdad484b02616b","2006-01-13 05:17:00+00:00","Add German version of Spy Fox 1 demo.

svn-id: r19996
"
"5e88d33a76d020f93f9c5a5c968ea36640ed649b","2006-01-13 05:20:01+00:00","Add German version of Pajama Sam 2 demo.

svn-id: r19997
"
"9d42703f8c486f0083358b30d2c701ad314215d1","2006-01-13 05:24:05+00:00","Add German version of Putt-Putt Travels Through Time demo.

svn-id: r19998
"
"c836fa6bb8b1e3ca99d0d8baafeaa3d56b7687be","2006-01-13 16:57:42+00:00","fix IHNM walk limit

svn-id: r20001
"
"641caf7e73814d054e63aa8bddb99139551c5f0b","2006-01-13 19:07:49+00:00","Hopefully fixed IHNM sprite clipping. (IHNM sprites are upside down
compared to ITE sprites, so to simplify things they are now flipped after
they are decoded.)

svn-id: r20002
"
"3a7a7b329189f660fb79b88f7120a9ad2790d38e","2006-01-13 20:20:01+00:00","implement IHNM verb mapper

svn-id: r20003
"
"19ea9829c857ba205b7a5007f5ca9eb4cb5455f2","2006-01-13 21:42:27+00:00","Committed patch # 1404734 (KYRA: kyra/kyra.cpp small build warning fix)

svn-id: r20004
"
"d04475121e29e567dd24085ee1541d92c4e865b3","2006-01-13 22:37:35+00:00","Correct HE version for several Germans versions.

svn-id: r20005
"
"d2de796c31f2c6057d4842f8131c154b10fae4f7","2006-01-13 23:06:04+00:00","Reorganized the sound code a bit and fixed bug # 1404414 (Missing speech patterns).

svn-id: r20006
"
"39ed1efe3fcfab8929729b882d4b6681652f9664","2006-01-14 00:50:13+00:00","Add Spanish versions of Simon the Sorcerer 1 (DOS Floppy) && Simon the Sorcerer 2 (DOS CD).

svn-id: r20007
"
"7d3004661b13297c33d5d5320b71faafda823ae2","2006-01-14 00:51:48+00:00","Missed one.

svn-id: r20008
"
"68dfd5b4787d568a263ed1ff449233e6b8477179","2006-01-14 04:07:24+00:00","Correct HE version for several Germans versions.

svn-id: r20009
"
"97a3e7c06d8bc4e9a4d2001bfda1378a18e9e884","2006-01-14 04:29:30+00:00","A few fixes for sound opcodes in HE games.

svn-id: r20010
"
"b1e93352c31060fc2fe38292367ce8d82e7f4fcd","2006-01-14 05:06:01+00:00","Correct HE version for several Germans demos.

svn-id: r20011
"
"ac7bb840df316ab653d338404e8690148c09b904","2006-01-14 05:32:11+00:00","HE99+ games may run an additional script during main loop.
Fixes the missing magnifying glass in puttcircus.

svn-id: r20012
"
"987c653ad1ab77e40dfe8d7474b803d7d473d86a","2006-01-14 08:51:22+00:00","Fix detection of Maniac Mansion V1 demo.

svn-id: r20013
"
"b49ebb5be0e8829cf158c03bf8a60d46a949cb0b","2006-01-14 08:54:56+00:00","Switch warning to debug message.

svn-id: r20014
"
"ad14c5311029314e46918af764266c0c46ba6a77","2006-01-14 09:28:38+00:00","Add SegaCD platform and remove SegaCD specific game Id.

svn-id: r20015
"
"ad537d92a6c392264db49fac9661012d326418a5","2006-01-14 09:37:26+00:00","Update

svn-id: r20017
"
"319cd187c8dfecc870cd6a511d7e982a8e90e341","2006-01-14 09:41:34+00:00","Should have commited this too.

svn-id: r20018
"
"f7a2981dfad9fa50a275af0eb678ade7dbbd73b6","2006-01-14 09:57:20+00:00","Added copy protection skipping; Fixed Inter::getOpcodeGoblinDesc()

svn-id: r20019
"
"047d46975f7fed486503b525707096c41138909b","2006-01-14 10:09:50+00:00","HE80+ games may redraw all actors via scumm variable.
Used by many of the arcade games.

svn-id: r20020
"
"db35174cc4e139da7c54e2c17827f1385bc75a0e","2006-01-14 11:06:22+00:00","Patch #1403763 (tiny fix for LaTeX documentation generation, concerning line wrap in the credits)

svn-id: r20021
"
"6dbfaa2c318187192e728a4580da53cc90e90cb7","2006-01-14 11:07:06+00:00","Restore the alphabetical order of the platforms (this should really be done by the GUI automatically, but for not it is simpler to fix it here)

svn-id: r20022
"
"3c14ef483184c002204199e721caad2c331ef698","2006-01-14 12:22:36+00:00","Corrected the bug I introducted into executeGoblinOpcode()'s unimplemented opcode handling

svn-id: r20023
"
"a4bf1a016bdb0a83107617b780beccc678cfaaf8","2006-01-14 12:25:27+00:00","Added a Gob2 opcode stub

svn-id: r20024
"
"7823a6795bb84afa624e2821387e3d34fa7077cd","2006-01-14 14:25:31+00:00","Fixes delay while waiting for the voice in the intro.

svn-id: r20025
"
"576ac7ca116161693ec1e20caa6c3c7bf68daa71","2006-01-14 15:20:00+00:00","Fixed bug # 1401236. (KYRA: Erroneous animation in the pantheon of moonlight).

svn-id: r20026
"
"323a25bd04a256cf80041c74ea19a849614510c7","2006-01-14 16:01:44+00:00","Removed unnecessary newline in debugging message.

svn-id: r20027
"
"a5378976d021bdf8bd63fd7bd7b1723c8709c64d","2006-01-14 16:33:24+00:00","Print out save version and stored MD5 on debug level 2.

svn-id: r20028
"
"d8d6da1ff0defa13d4f458e1a6340c5254c76a2d","2006-01-14 17:28:20+00:00","Doc update: Added coremidi driver; removed obsolete amidi driver; updated & corrected the platforms list

svn-id: r20029
"
"a61e62db95d30c9886cf2e66e84f9e753c04f2d5","2006-01-14 20:05:56+00:00","Lowered FluidSynth's default gain, and added config file and command-line
options to specify it. FluidSynth's gain ranges from 0.0 through 10.0 and
is probably measured in decibel, but to keep things simple, ScummVM uses
settings from 0 through 1000 instead. (Though currently there's no guard
against invalid settings.)

This is a slightly revised version of the non-GUI part of patch #1336171.

svn-id: r20030
"
"ff7a1c734f4ea32b330dfacf212b719f3b590955","2006-01-14 21:14:27+00:00","Implemented 'cmd_loadPageFromDisk' and 'cmd_savePageToDisk'.

svn-id: r20032
"
"a4c0d84acb9c8f771403e47ba46f50c2ff4d413b","2006-01-14 21:26:19+00:00","Added an error() to drawString to catch charset mask usage in V7+ games, if any exists

svn-id: r20033
"
"1b18b98ca5d8059043db60b1c87053bfcd2cbc6f","2006-01-15 00:22:29+00:00","Update confusing warning.
Check that config file location is writable.

svn-id: r20034
"
"5b6c5fc87ae8ac34b073e83452c34d1ac54c43af","2006-01-15 02:57:03+00:00","Fix sound priority value in HE games.

svn-id: r20035
"
"28741ffb41f226b03d4267d9abd76819804fe2b3","2006-01-15 04:28:03+00:00","Update md5s for ru simon2.

svn-id: r20037
"
"0e88d466ec9d06e85818597cf49f72db31a61d95","2006-01-15 06:54:31+00:00","Cleanup unused parts of HE sound code.

svn-id: r20039
"
"5db5e59701892923df2175e2473de641794c431e","2006-01-15 08:37:01+00:00","Fix sound channel selection in HE95+ games.

svn-id: r20040
"
"1c1e58ce2842f3b2bbe5e495fcec890d6b444e7f","2006-01-15 09:38:15+00:00","Ooops, looping should have been left enabled.

svn-id: r20041
"
"64f19557455503d876baa733c073c44866eea1d9","2006-01-15 10:22:44+00:00","Leave as warning.

svn-id: r20043
"
"fc42c366d3083b19de8fce4c769969532c8e8cc2","2006-01-15 11:12:57+00:00","Add missing check for talk sounds in HE games.
Fixes cut off speech regression in spyfox.

svn-id: r20044
"
"4f286a4bcc1d3c33bc34824fb09923641cad6c44","2006-01-15 11:19:15+00:00","Add support for another sound flag in HE games.

svn-id: r20045
"
"7b90741443b6fd10827d4aa36aa17047b61e6a5e","2006-01-15 23:02:52+00:00","Add another French version of loom & indy3.
Add Macintosh demo of Pajama Sam 3.

svn-id: r20046
"
"77e213ff7c47e9c7d289d81467994e0cf8e69e13","2006-01-16 00:36:42+00:00","Index block doesn't exist.

svn-id: r20047
"
"b402ec2b9df78e5ceae22dfba75c01a578b6b7cd","2006-01-16 00:40:49+00:00","Index block are specific to later HE games.

svn-id: r20048
"
"71b2b7b62ed109c76f2dcad4e58d66f76df61047","2006-01-16 00:58:59+00:00","More sorting.

svn-id: r20049
"
"63ff02b3b0f99b675518c76f8e08dea9fe0c1455","2006-01-16 08:48:47+00:00","Merge back into single switch.

svn-id: r20050
"
"fab5160c5fb68636fde396614a8c8d902d372789","2006-01-16 08:50:03+00:00","Move over more version specific index blocks.

svn-id: r20051
"
"631797d7e004bf1bdddd6c129694307b6a19e4f5","2006-01-16 09:20:27+00:00","Match sizes of original versions, to avoid possible overflows.

svn-id: r20052
"
"a4906b2f2b212a2174a7fe33b9d40adb64a5ca4c","2006-01-16 09:27:36+00:00","Small correction to sound opcodes in HE games.

svn-id: r20053
"
"53e435d0025a74818e70acbf9b398a6db6515676","2006-01-16 10:11:52+00:00","Minor changes.

svn-id: r20055
"
"34a186ebd33560424355cbbc16851bb795e580ee","2006-01-16 11:36:16+00:00","HE80+ games set color depth in scumm variable.
Fixes missing palette fade at the end of Pajama Sam 1.
Cleanup.

svn-id: r20056
"
"d040858fd3027d52ec37e8881003d98184129a2e","2006-01-16 13:18:08+00:00","Heavily reworked and updated by Joachim

svn-id: r20057
"
"534b4bc2a0fb6c9c58fb4f68b80f07bae43596fb","2006-01-16 13:28:18+00:00","Add Joachim to contributors list for fixind 'just' several hundreds of MD5s
and putting all our game-related lists in order.

svn-id: r20058
"
"3c468e23ee284a8a50ea0b77c597d1d9638ab5e2","2006-01-16 13:30:53+00:00","oops

svn-id: r20059
"
"9b95dba009bb9d3206d8a5723dbda67a77149960","2006-01-16 14:51:02+00:00","patch #1406628: 'SAGA: Minimize #include dependencies'. Thanks a lot Filippos.

svn-id: r20060
"
"b1b0836d59449311df0d33bad9a80716d73f2ed9","2006-01-16 16:38:55+00:00","IHNM actor walk end fix (TED exits first scene now)

svn-id: r20061
"
"6f445e3d8d9a3c48bf412b4b97a14b7166711903","2006-01-16 18:25:29+00:00","Joachim happened to have his name wider than 15 characters. Fixing

svn-id: r20062
"
"98a949f5b74753543cef43975ea56ede7047e739","2006-01-17 00:24:01+00:00","Commit patch #1171517 by salty-horse  (save speech and sfx preferences BASS engine in config file)

svn-id: r20063
"
"f04467bc19bc45d7758cc3e5e82851d47cad8807","2006-01-17 00:56:47+00:00","enable kyra engine

svn-id: r20064
"
"61a7d3a8ad44fc3b6517bcaba1d14f19372e587d","2006-01-17 01:25:06+00:00","Patch from md5 to fix bug #1336334: 'GOB: screen jumbled after typing in level
passwords'

svn-id: r20065
"
"090fcd45792e66cd567bcf35d1c75ba13653c2a3","2006-01-17 03:07:00+00:00","Fix actor selection in spyfox.

svn-id: r20066
"
"349eee4ab41ad541fa782c95ccef18460bd483a5","2006-01-17 12:43:25+00:00","Correct HE version.

svn-id: r20067
"
"ad60f96e869cd170a63aeb34815ed62865d52c2b","2006-01-17 13:04:42+00:00","Set initial value.

svn-id: r20069
"
"38f0af6c9f699477e7204f2335d819d7557781d9","2006-01-17 13:18:12+00:00","Mark as 16bit color.

svn-id: r20070
"
"04ba696f973212c5199c2a51aac4da2ae65cc314","2006-01-17 18:57:26+00:00","Updated comments

svn-id: r20071
"
"59fc9ac9639ff9aee73780c2299157655d1a8903","2006-01-17 23:54:04+00:00","Request screen update after mouse movement.
This fixes the invisible cursor in backends which only update/draw the mouse in updateScreen() (i.e. atleast the PSP, PS2 and DC backends)

svn-id: r20072
"
"a4151c99824bb42d440711e0a9d2db877ab68b28","2006-01-18 03:43:27+00:00","That (PU1) & (PU2) prefixes are used in several HE games.

svn-id: r20073
"
"b88a79750b95e75e8ae15ca2839205bb35545c68","2006-01-18 06:06:14+00:00","Sound queue order is different in HE72+ games.
Fixes wrong music been played in some locations.

svn-id: r20075
"
"d48f3a70f6b900220bbcfe3e83c268c7f4692339","2006-01-18 07:23:49+00:00","Too many args.

svn-id: r20077
"
"791b5bdc6175fb3f15dbc4f10d643ac3596228e9","2006-01-18 11:46:32+00:00","Add Macintosh version of Freddi Fish 4 (German).

svn-id: r20079
"
"34d835e4a263f6cc0be68da94cca40c803dd9532","2006-01-18 11:53:07+00:00","Work around a script bug in Full Throttle. See bug #1407789.

svn-id: r20080
"
"7603c69b17286d56b9934faedd874acba3accd1c","2006-01-18 13:55:06+00:00","SoccerMLS also uses localization tags.

svn-id: r20082
"
"d6a5c39e3d462e6234bd08cb6105533a70e6f74b","2006-01-18 14:06:20+00:00","Add full game titles.

svn-id: r20083
"
"91e321c107de08960ad71d8313232cdd2fc57512","2006-01-18 14:09:13+00:00","Ooops

svn-id: r20084
"
"c350d1487b7230f44825e6c569ad9a8f9dfad7cc","2006-01-18 16:12:44+00:00","Support for MM NES German. Thanks Joachim Eberhard for donating the
cartridge.

svn-id: r20086
"
"664d00e162c3215ab629f7cfa166702e43484056","2006-01-18 16:23:12+00:00","Add md5 for extracted MM NES De

svn-id: r20087
"
"ea42bad78128837c2e19ecd3093fade4a51fe0e9","2006-01-18 17:39:49+00:00","Update copyright notice

svn-id: r20088
"
"2d844c0140a6ace7e9c0f428de1f99271e4b789a","2006-01-19 21:50:54+00:00","Changed the default names of the game detector.

svn-id: r20092
"
"3ff6cc8dd927ba09a6ab8416073e4f4fd5e05306","2006-01-19 22:57:13+00:00","Make game titles consistent

svn-id: r20093
"
"ef9c379b4b101f0f3feef685c652b1e531228c31","2006-01-19 23:02:24+00:00","Correct order.

svn-id: r20094
"
"322f47066a166ccba21a57aed8e3d881b63461b6","2006-01-19 23:11:16+00:00","Oops forgot to add 'The' in the game titles.

svn-id: r20096
"
"fd008f42b3f8e4bf12e2989e9d3b6a0f6431f5b3","2006-01-19 23:11:56+00:00","Make game titles consistent

svn-id: r20097
"
"293d5d4f4275111296c237c5184b9eaddff4f0cf","2006-01-20 00:12:01+00:00","Sync. updates and section numbers.

svn-id: r20098
"
"89ecf72e517571753788590893f53d389699a140","2006-01-20 00:13:22+00:00","Update Kyrandia game title.

svn-id: r20103
"
"bb9a3814dc216290b35a5ef98e3178cca226f6f4","2006-01-20 00:19:56+00:00","Sync. updates and section numbers.

svn-id: r20104
"
"a0ef746de03ecc475de79ac28fb9e889680c1f53","2006-01-20 00:40:55+00:00","Remove out dated comment, we support many platforms now.

svn-id: r20106
"
"9660020ccba75a7229a89847045f6a1c9d1695b3","2006-01-21 03:45:53+00:00","Typo

svn-id: r20109
"
"2f8dacd6173568fdaa850650c4ce46222ae99196","2006-01-21 11:57:19+00:00","Clarified comment, cleanup

svn-id: r20111
"
"9891d907096c1508706657ceff03f30375f6c47e","2006-01-21 12:01:39+00:00","cleanup

svn-id: r20112
"
"91443db737427463b7e5311455e5e1c4c988e1c5","2006-01-21 12:17:18+00:00","Updated TODO

svn-id: r20113
"
"e34d963027194654259c4ce3499780671f36e133","2006-01-21 12:38:36+00:00","Removed obsolete targets

svn-id: r20114
"
"0b39c0ea9fbc43569a17f65db6fe6a89f29ccee1","2006-01-21 13:01:20+00:00","Fix various incorrect usages of the word 'target' instead of 'gameid'; change the ambigiuous 'GameSettings::name' to 'GameSettings::gameid'

svn-id: r20115
"
"59d09a1b07b5d4b3eecb7da490daef1a8e3a4af3","2006-01-21 13:14:14+00:00","Sync latex doc section on extraction tools with README/reality

svn-id: r20116
"
"2d92b0eb936d2ca6e32bb0d9a3762037686f8ddf","2006-01-21 13:19:56+00:00","More doc tweaks

svn-id: r20119
"
"d3a03fed773215ec53572234eed95a809c451eb5","2006-01-21 13:43:59+00:00","Added LaTeX doc specific TODOs

svn-id: r20120
"
"073e11f586919a5840ca4211cb29e42c3f1890e0","2006-01-21 13:50:43+00:00","Some more info

svn-id: r20121
"
"c3f3615074f6818234d97869b3765139bf90a5c9","2006-01-21 18:17:56+00:00","Modifications to the game detection/engine creation code: don't try impossible file names; reduce code duplication; remove error upon unknown game ID; added or clarified various comments

svn-id: r20122
"
"4a8c720252cb03e974f32dca5e1ee6d6ebab1353","2006-01-21 18:22:01+00:00","Fix --with-XYZ-prefix options, which would incorrectly overwrite _prefix (see also patch #1411577, but note that this fix is different)

svn-id: r20123
"
"14cba5a3e4a16634bb38bb2c2db62d322cd57b74","2006-01-21 18:43:17+00:00","Fixes bug # 1411432 (KYRA: graphics glitch when using the ice scroll)

svn-id: r20124
"
"ca6bd8645f45c4af130b7856079eb4610eafbc01","2006-01-21 23:43:58+00:00","Make debug key consistent.

svn-id: r20125
"
"207841e22699a0fa8bc7e8f05e70641117baf7be","2006-01-21 23:59:04+00:00","Add new platforms.
Sync. more changes.

svn-id: r20126
"
"de2559f0b8e1d281369690d283ad219912e90a51","2006-01-22 00:11:58+00:00","Fix control hotkeys

svn-id: r20127
"
"e62e45d2acf5e235c707948c7f3e6e4dbb6450cf","2006-01-22 00:25:37+00:00","BASS doesn't have quickload & quicksave hotkeys

svn-id: r20128
"
"e23b746a0723652d95adb6ba491d51b0d57ac06d","2006-01-22 00:30:28+00:00","Correct order.

svn-id: r20130
"
"d4d95adab8bed63f03eb365b61ed9fc24ebf103d","2006-01-22 00:41:11+00:00","c64 still missing.

svn-id: r20133
"
"e14b7fe8ac25ab743f1db0d2cb47362f089b528a","2006-01-22 09:34:12+00:00","Kyrandia:

* Partial GUI implementation
-Loading games and quitting works.
-Colors are wrong in most room; saving and configuration doesn't work.
* Moved stuff around in kyra.h, so struct definitions are adjacent.
* Slight modification of Joostp's mousefix, should be more efficient and still work

svn-id: r20135
"
"ee6840a4847203c398520e235932d15e4c320226","2006-01-22 13:32:39+00:00","Used by PC version of FT demo too.

svn-id: r20136
"
"4d9db17b5913d2a34c57473808abfde1b49bf5ec","2006-01-22 16:48:13+00:00","fixed warnings

svn-id: r20137
"
"8085473870fefec791e8d5b59b69f79a1ea14d25","2006-01-22 20:10:13+00:00","Sort GIDs alphabetically

svn-id: r20138
"
"78c028f68e36b99e549782a0d4e929201a56991d","2006-01-22 20:46:51+00:00","Modified some workaround comments

svn-id: r20139
"
"7012a370cdfadec832e2dba8394845dfba03e5b1","2006-01-22 21:05:38+00:00","Simplified SCUMM version checks in writeVar/readVar

svn-id: r20140
"
"90d67659dc207aadb368613a8a4412d0c34da62d","2006-01-22 21:28:37+00:00","Overlooked the Indy3 FM-TOWNS case in my previous commit <sigh>

svn-id: r20141
"
"d2d40a0c784f457d28fcfb42a6164f424763c352","2006-01-22 22:06:34+00:00","Added highlighting to the menu buttons on mouseover.

svn-id: r20142
"
"a7dbba14f714a9892757dfefd1b32bcad8217ca8","2006-01-23 19:08:47+00:00","Added workaround (the nicer one) for a CoMI script bug that would cause
ScummVM to hang on the PSP. See bug #1398195. (For now, I'm only doing this
on the trunk since CoMI on the PSP is considered unsupported/unbearable
with ScummVM 0.8.x.)

svn-id: r20143
"
"86ba8201603f2b08731356481787e61dd7d02139","2006-01-23 19:13:05+00:00","At this point, we may not yet know the precise version of a game; so for those cases were it can vary (1-3 for Zak, 1-2 for MM, 3-4 for Loom etc.) we need to extend some of the version ranges slightly

svn-id: r20144
"
"01fdeba50a219021ec8076db3a780a89596ad7ea","2006-01-23 19:23:52+00:00","New OS5 backend :
- 16bit support
- Added SetWindowCaption function
- New 'no thread' sound code
- Wide mode support
- OSD support

svn-id: r20145
"
"7935b9d946de1a502789f04abe824d57f907fe27","2006-01-23 19:30:10+00:00","Advanced OS5 backend
- mutexes support
- real thread support
- real timer support

svn-id: r20147
"
"8dede76784271659341c239d39163abe158a8fac","2006-01-23 19:38:43+00:00","Updated and moved to be_save.cpp

svn-id: r20148
"
"d36be21fe400b9b38998308c04c57ca46d595106","2006-01-23 19:39:56+00:00","Fixed compilation

svn-id: r20149
"
"a857a97e347382f2caac967fab453ace3e189e35","2006-01-23 19:42:38+00:00","- Zodiac backend is now based on OS5Ex class
- Moved some methods and members to OS5 class

svn-id: r20150
"
"d183a714462aadaee248c107ab26d1334f22398a","2006-01-23 19:46:27+00:00","Update copyright notice

svn-id: r20151
"
"0a150fa12831dc7e742a73c551159bbea3097668","2006-01-23 19:49:44+00:00","Prepare 68k version

svn-id: r20152
"
"ec476b1fd0a12b34c2f65c83cc3db9aaf1205e99","2006-01-23 20:09:25+00:00","Removing GID_ZAK256 and GID_LOOM256

svn-id: r20153
"
"a4f40bb841893b79d1e489d634f3df39e29f3033","2006-01-23 20:53:30+00:00","oops

svn-id: r20154
"
"d3373e49008476727309a479f8fe5ba86a2ac2d8","2006-01-24 03:31:14+00:00","FM-TOWNS version of Zak only.

svn-id: r20155
"
"e70af9a9a9a29fa61a025afd0d0a8b84afd1321a","2006-01-24 03:46:22+00:00","Loom (Cd) specific.

svn-id: r20156
"
"7d6bc98516aeacf38b52d973f542adf2f07fc796","2006-01-24 07:20:15+00:00","Removing unneccessary checks again (say yay to preconditions that ensure _version > X :-)

svn-id: r20157
"
"900b17b247bfe3376a772492f6535e956d3ba60d","2006-01-24 19:24:22+00:00","don't execute binary for libmpeg2 test when cross compiling

svn-id: r20158
"
"a031c852b9bc388fcfcfaeb90761351009c2d1a3","2006-01-24 22:21:23+00:00","added option to allow switch disable scalers

svn-id: r20159
"
"a9e164e757fde583858f82abfdbdfe8ba729dac5","2006-01-24 23:14:52+00:00","Fix HE games.

svn-id: r20160
"
"ca705b9167e9462b259614a0874ac2db1a3cee44","2006-01-25 15:06:42+00:00","Extend the workaround for bug #1407789 in an attempt to deal with the
different versions of Full Throttle. This is partly guesswork, and may be
incorrect.

svn-id: r20161
"
"7ad5158ae1448242bc8d3222b8a2fcb567dce2e2","2006-01-25 17:54:28+00:00","Do not hardcode the program name (bad style)

svn-id: r20164
"
"7fddfa20c6ca3dd36be82adc755a4a2c1b8cfed6","2006-01-25 20:53:25+00:00","New tools/update-version.pl script (usage: CMD 1 2 3 CVS  -> results in version 1.2.3CVS)

svn-id: r20165
"
"2515fae195833c394c130fd33c94611b063b34fb","2006-01-25 23:08:55+00:00","Fixes bug #1413951 (crashes when highlighting buttons on menu screens
where the first button wasn't there), and the missing text on exit buttons.

svn-id: r20166
"
"579732dfdbe4edf6b4dd768557845845b976bcab","2006-01-25 23:53:11+00:00","Update

svn-id: r20167
"
"49eed14be66f1db864f3a19a0ed7b32226382519","2006-01-26 04:19:37+00:00","Remove leftover.

svn-id: r20182
"
"5a596b010f574ada3189f07863999df5724dd9b7","2006-01-26 04:19:58+00:00","Sync. md5s.

svn-id: r20183
"
"ca7a1c7738f837ce95467082edcbd75726ad9952","2006-01-26 10:09:39+00:00","Removed version from docs

svn-id: r20187
"
"6da44891421b9a56f96ec3f37a4260f03b75bf14","2006-01-26 10:09:39+00:00","Removed version from docs

svn-id: r20188
"
"60034ae433d6a9fdc82c331ee52bb60d0f1869d9","2006-01-26 10:10:16+00:00","Mention bug fixes in the NEWS

svn-id: r20190
"
"5fd3d177202a569e1a7cd50f7bb587f312c3a2a8","2006-01-26 10:19:25+00:00","Clarify that the default gain change was for the FluidSynth music driver,
not when hooking up FluidSynth through ALSA.

svn-id: r20191
"
"b5dcb4e874dceceddd87b21f2e5f04ac911aeca7","2006-01-26 23:18:36+00:00","Adding Kyrandia to the About dialog copyright section.

svn-id: r20197
"
"4707a59eafe507c2a59d15e8c51a44c4e57184ac","2006-01-26 23:53:13+00:00","Changing Kyra copyright notice from EA to Westwood, after IRC discussion

svn-id: r20198
"
"e9903522196176c24a6adb973355631b7d3938e3","2006-01-27 00:10:18+00:00","Fix memory leak, if called directly.

svn-id: r20199
"
"e370d8525419c8b9e47b423384b1169602cc6bb4","2006-01-27 00:27:57+00:00","Make resource management of modified wizImages closer to original games.
Fixes many errors in Backyard Sports titles.

svn-id: r20201
"
"0ce3f9ff35eca3eedb8bc7f90b01eb05994407b3","2006-01-27 00:50:27+00:00","Resource modified status always cleared when nuked.

svn-id: r20203
"
"58dcb8436fc6498e6886ee9d65f57feda8db8148","2006-01-27 05:11:11+00:00","No longer required.

svn-id: r20207
"
"548961ecc35374da59d5d5f5397c6c5159026e12","2006-01-27 06:05:03+00:00","A
Fix memory leaks in HE games on exit.

svn-id: r20208
"
"f0e6965c77b50816bf9d37695983f8ee532f925d","2006-01-27 06:35:54+00:00","Fix another memory leak in HE games.

svn-id: r20209
"
"decbf21a520c842e5259593414d10c4fcf1765b6","2006-01-27 08:23:53+00:00","Implemented the GUI menu for saving games (minus the cursor in the text entry window...).
The Load Game menu will now pop up before the last part of the intro is played,
if it has already played once before (as in the original).

Note that the palette is still wrong, and the settings menu is still not implemented.

svn-id: r20210
"
"64dc91359636e14f647e79003b44e7701b5c8af1","2006-01-27 08:26:15+00:00","Edited the Kyrandia section of the README, as the save and load part
of the GUI is now implemented.

svn-id: r20211
"
"4d8861b909d0b4677afe450cb76b83842d37f679","2006-01-27 08:39:29+00:00","Fix memory leak on exit.

svn-id: r20212
"
"855d86ddcf24d0fdf9add5d9d49718e43433b807","2006-01-27 10:01:07+00:00","Add parts of patch #1416145 - README: various fixes

svn-id: r20214
"
"c08547d370a5f2d8ad4994edc5a27d091549d7f7","2006-01-27 13:37:10+00:00","I really wonder how this #include 'debugger.cpp' could stay for 1.5 years.

svn-id: r20221
"
"5b1718f17b105bd72c301e2f6f42d8075a5469b3","2006-01-27 13:48:14+00:00","fingolfin renamed 'GameSettings::name' to 'GameSettings::gameid'.

svn-id: r20222
"
"901645cb0f28ef0278e5b5e3a7347a85f9142b8b","2006-01-27 14:35:40+00:00","I believe it's actually meant to include common/debugger.cpp. It's what we
do in several other places, and not doing it causes numerous linker errors
for me.

svn-id: r20225
"
"5051b080a2cfefef81907be0324e229f284ae355","2006-01-27 15:43:23+00:00","- adds the new gui renderer also a new implementation for the classic gui
- adds a ImageMan and ImageDec class for loading and managing image files
- adds a loader for zip files which is used by the new theme and the image manager
- changes the widgets to use the new gui code
- changes the scumm dialogs to use the new gui code
- fixes a #include problem in the sky debugger with the new gui code

To use the new gui copy gui/themes/default-theme.zip to your extrapath.
If the theme zip can not be found the gui will fallback to the classic theme.
If you want to change the gui styles use 'gui_theme=classic' for the classic theme
and 'gui_theme=default-theme' for the new theme.

Thanks to eriktorbjorn for testing and help with the new theme and to sev for
reviewing this patch.

svn-id: r20227
"
"b5f5dbe36bcd6e564b70d772cb528e0d0899fe7d","2006-01-27 15:51:41+00:00","Patch #1416370: 'AmigaOS 4 changes'

svn-id: r20229
"
"1f7bd7a726f4ba38475ac460aef4693d0fe05845","2006-01-27 15:59:29+00:00","Oops forgot to change calcColor to calcGradient before commiting.

svn-id: r20230
"
"4938b93f34f8c0d5efbfe620e0e40d4306452ddf","2006-01-27 16:46:56+00:00","fixed warning

svn-id: r20231
"
"c0938748f66c3d2e8893426d1a2aa98d32f44de2","2006-01-27 16:48:31+00:00","turn off warning #4351 with msvc8

svn-id: r20232
"
"ecced815cc05ea448e02fead1117ebdbfc26f3f0","2006-01-27 18:04:42+00:00","experimental smush code without timer callback usage

svn-id: r20233
"
"118ce529b197626e16db06ca3d506572c130a8f7","2006-01-27 19:01:02+00:00","Fix crash on platforms which do not initialize memory with zeroes.

svn-id: r20234
"
"095199da5429e9c270002c6751a36dfd407c95d1","2006-01-27 19:04:15+00:00","Proper RCS IDs.

svn-id: r20235
"
"fef533e93e554fd1cb1cb44dac410632d5051562","2006-01-27 19:05:24+00:00","Proper RCS IDs

svn-id: r20236
"
"4994350c1da99c6975fcc5898366a7036c8f8c77","2006-01-27 19:08:06+00:00","Patch #1416561: 'updated .spec package description'

svn-id: r20238
"
"fa05b3a93533380391eb6a214aa613f013baa005","2006-01-27 19:33:40+00:00","Fixed invalid memory reads in generateSubstResFileName.

svn-id: r20240
"
"04d7bb1d5545e4b2cf40b780bc6a08caf796dd07","2006-01-27 19:34:26+00:00","Not needed anymore.

svn-id: r20241
"
"45727596b9ab99eaf53485755217dc63a668e3f8","2006-01-27 19:35:55+00:00","Minor cleanup.

svn-id: r20242
"
"4226b6409d9aabce8b3a9f10f8282b46bd49c2e9","2006-01-27 21:47:34+00:00","Update some FAQs  (I should probably move these to the Wiki at some point)

svn-id: r20244
"
"7e8d9fc73915a6bbbfa123b96b85bb2a16bb655b","2006-01-27 21:59:48+00:00","Credit Paolo Costabel and Thomas Mayer who contributed to the (initial) PSP port.

svn-id: r20245
"
"d84fb4f696ae1081c0d864249a314ccc7f90d4d0","2006-01-27 22:06:59+00:00","New intial mmps to target ScummVM instead of EScummVM and associated pkg files

svn-id: r20246
"
"9fee68f3b0f9b2af4a7e7befbe1d3b3f137f27ad","2006-01-27 23:01:34+00:00","run in usermode. psplink provides an exception handler and stdout/stderr redirection, so we have no real reason to use kernel mode anyway.

svn-id: r20250
"
"446689e595ac7d0da7b33330734465b1b22551c4","2006-01-27 23:10:24+00:00","A filename without an extension can be passed to generateSubstResFileName()  ; changed assert() condition accordingly.

svn-id: r20251
"
"0a40639af2b9f531d6415ad59fa6879794f7c04e","2006-01-27 23:13:51+00:00","This should fix bug # 1416862 (new theme: changing overlay size).

svn-id: r20253
"
"9fc5d7df8d9b792c76beccaad4f9bffca6cb26a1","2006-01-27 23:14:05+00:00","Updated ScummVM icon, thanks to wjp.

svn-id: r20254
"
"e4a32c825102bad1e4432b7562bcac3738fdaf78","2006-01-27 23:19:18+00:00","Patch #1416983: 'gobliiins 64bit fixes' to fix bug #1399873: 'GOB1: 64-bit
crash at load screen'. Thanks, wjp.

svn-id: r20255
"
"7dfffd99300d85737f0a353e2d533db1003a0ab6","2006-01-27 23:36:24+00:00","Update Win32 icon with new one.

svn-id: r20256
"
"cbebaf4ba08896e96ff00b4483669631c0e64066","2006-01-27 23:39:36+00:00","Add themes zip to win32 dist.

svn-id: r20258
"
"cb5d7b8029e69f7ca4b6bfc17031ce4358e131e4","2006-01-28 00:22:02+00:00","Always save gameid.

svn-id: r20260
"
"3c867006fac08e7476376574cbdb4f86ee4c8de4","2006-01-28 01:03:12+00:00","Sync with branch-0-8-0.

svn-id: r20262
"
"3730bc19ebf236b339fc3d32ac6f13e017f64970","2006-01-28 05:09:39+00:00","Fixes the kyra GUI palette issues, implements background fading when the GUI's up,
and a couple of very minor optimizations.

svn-id: r20263
"
"56ce100b4f4cf28966b8ebe14ba59a49edbf7081","2006-01-28 07:31:53+00:00","Compilation has been busted on GCC 2.xx for some time.  Don't
pretend to support it in configure.

svn-id: r20264
"
"a0d3ae106d1432d60216b13952dbed10977f4a4e","2006-01-28 13:03:42+00:00","Fix LaTeX to work again

svn-id: r20267
"
"0fef30434b3dacee23ff4f655da8bc5fa87044f6","2006-01-28 13:28:04+00:00","update

svn-id: r20268
"
"a0ac36c790f4163e59ba542f6e9f106af5a96fad","2006-01-28 13:29:40+00:00","update

svn-id: r20269
"
"dd02251cb30221a9b3e55602afff364b76dd9b3c","2006-01-28 16:30:39+00:00","experimental imuse without timer thread usage, it might still have issue stoped audio while switching rooms

svn-id: r20270
"
"91d253c5b142b751fea3596b519d0eb0efb0c6a0","2006-01-28 18:21:46+00:00","Applied my own patch #1416897, in an attempt to speed up list widget
redrawing. There may be regressions, but none are known at the moment.

svn-id: r20271
"
"8911b6b94e10fd3e11ce63e0706e11f37a7f1dc5","2006-01-28 20:13:53+00:00","revert, that is still needed anyway

svn-id: r20272
"
"ff6285305fc1a25110fb129fcafd157977cd6d97","2006-01-28 20:15:41+00:00","not used now

svn-id: r20273
"
"72aaf60da0671adb7e756425c40950f3f6d263c1","2006-01-28 20:20:00+00:00","not used now

svn-id: r20274
"
"d84cefec75e8dfe6a33042c246a5f980829235a7","2006-01-28 22:39:26+00:00","Add extra case for Russian water.

svn-id: r20275
"
"5fda0cc6f1addedb4e3c671a9f124e6c5b253323","2006-01-28 23:03:39+00:00","- Fixes a bug that the debugger crashed while opening
- Changed gradient calculating
- added background saving for all dialog/widget backgrounds for now (change that later maybe)
- changed ScummDialog to use the colors of our launcher dialog

svn-id: r20276
"
"8776ea6d189d13552f356e440db4e6402d630df4","2006-01-28 23:11:52+00:00","Fixes a bug while loading the theme config from the zip file (now the caret should be black).

svn-id: r20277
"
"4b23285098f806bef0e860e4f41f9b85732ac651","2006-01-28 23:35:28+00:00","Use the new logo on Mac OS X, too

svn-id: r20279
"
"f404f6ffaf3e112d6d77acbd7bac5ba7f76c6194","2006-01-28 23:56:12+00:00","Changed calcGradient again, should look nicer now.

svn-id: r20280
"
"0b2adc462819bc3fd36f0b73aa38cb9bf13c0402","2006-01-29 01:57:46+00:00","Enable angle and zoom support for polygons, based on HE95.

svn-id: r20281
"
"bdac3715992d457e30eb3874ac47a60e4632acb7","2006-01-29 02:20:45+00:00","Patch #1417634: ' gobliiins parser stoptoken cleanup'

svn-id: r20282
"
"4780ab9223293243fdeadbda490eeea25aba2072","2006-01-29 02:27:10+00:00","Patch #1417631: 'gobliiins cleanup'. Thanks, wjp.

svn-id: r20283
"
"011d75621d16515a99c3c39a675338e19cd7da85","2006-01-29 02:29:33+00:00","Patch #1416561: 'updated .spec package description (second part of it).
Thanks, wjp.

svn-id: r20284
"
"052a42f89fe86fa51bd4c11736f4056fbb3e801e","2006-01-29 02:44:30+00:00","Added new debugN() function which doesn't append newline.

svn-id: r20285
"
"ec99279ef99480cdacc23096139ce0d0e50a987d","2006-01-29 02:55:30+00:00","Oops. I should've test it before commit. Fixed now.

svn-id: r20286
"
"2e9bbb896dd863a1aa321d3a462b7b96e40370e6","2006-01-29 02:56:23+00:00","Enable debug print of parsed expression with use of new debugN() function.

svn-id: r20287
"
"38ae101bdecd04501ec6b7e3dea8b8a388d09c5a","2006-01-29 03:44:13+00:00","cyx's gcc 2.95 fix makes things compile with gcc 2.95 again.

svn-id: r20288
"
"594d7d591d95cb5f1d7694e0a78756973a22e6ec","2006-01-29 03:47:46+00:00","Allow GCC 2.95 again as compilation is now fixed.

svn-id: r20289
"
"0f510a2a626b49d347f96d4a6701f05c2a921629","2006-01-29 05:25:25+00:00","HE80+ games use a transparent color of 5.

svn-id: r20292
"
"a863c37b0d9a5d3a4b3c14539d0d3792d958fbda","2006-01-29 08:12:32+00:00","Variables no longer used.

svn-id: r20293
"
"836e63561406c0e19cbd590304a054b1f72301a3","2006-01-29 09:27:17+00:00","Adjust, for recent changes.

svn-id: r20294
"
"f509762f997bd84ec161c3b43590979f9f5be55d","2006-01-29 12:41:58+00:00","Fixes transparency and enabled transparency for disabled buttons.

svn-id: r20295
"
"f881fc47c768d20656f5e9e8c051fb09830830d6","2006-01-29 13:14:04+00:00","Limit the maximum line width.

svn-id: r20296
"
"7eaa5b99b597e1f5074d8871959bc3aa2f29e992","2006-01-29 15:07:03+00:00","Fixes redraw bugs with the about dialog and the new theme.

svn-id: r20297
"
"e5e7587443a17a79129287bf26b3229663cae69f","2006-01-29 16:12:59+00:00","Ok this should fix now all problems with drawing bugs of texts.

svn-id: r20298
"
"83d6bd606c923751062a7694159e0e796a580bcc","2006-01-29 17:47:05+00:00","Added a warning not to change the order of the res types

svn-id: r20299
"
"2ce2bac35c51ed0854c644874696993e382e5d5e","2006-01-29 17:47:38+00:00","cleanup

svn-id: r20300
"
"2fcb159a98f44ecd647f833b20ca4e1a14a60994","2006-01-29 19:18:15+00:00","Remove the custom strstr in favor of the ANSI strstr/strchr functions

svn-id: r20301
"
"29a1aebe6aaef6cb4dccb834572784e01b637bbb","2006-01-29 19:41:43+00:00","oops

svn-id: r20302
"
"aad356f5f598e4e1f475d065377f931e7a5938e2","2006-01-29 23:23:17+00:00","Knakos patch & Smartphone fixes

svn-id: r20305
"
"2032149e7a1a71cdce4cce5cf89a5522d90f00b4","2006-01-29 23:23:38+00:00","Update with 0.8.1 comments

svn-id: r20306
"
"0fa2388ca7619eee14881b6d520426b371ff05d5","2006-01-29 23:23:48+00:00","New icon

svn-id: r20307
"
"bf6adf4b1d1afa4df34fa0585cd46f13efcfa206","2006-01-29 23:24:20+00:00","Knakos patch & new icons

svn-id: r20308
"
"7b1e399ab3afae381f33359673e4a00272868ae2","2006-01-29 23:25:14+00:00","Knakos patch

svn-id: r20309
"
"d4b3467ac82a57f027ec6ae07cac2d18f917dd4b","2006-01-30 14:19:02+00:00","Fixes a bug when loading the theme config file from a directory instead of the zip file.

svn-id: r20310
"
"afaf1d0ab92e9d4f688170ed6acbef8cefbf2f0c","2006-01-30 19:02:33+00:00","Replace use of sscanf

svn-id: r20311
"
"d985e24bf9f5061f38b1f575d259ecc998178c10","2006-01-30 19:08:26+00:00","Updated credits (Debian package maintainer: Tore -> Tao

svn-id: r20312
"
"6f5141782699c911860006575da6210130bbfce5","2006-01-30 19:10:27+00:00","Fixed compilation

svn-id: r20313
"
"4a6f2ab3d36b268d119a65ebbd5bc4c12d5afb75","2006-01-30 19:13:25+00:00","Wrong #ifdef

svn-id: r20314
"
"5465d3206cd09ff93413648789e87aeca1c4370f","2006-01-30 19:20:51+00:00","Some cleanup and fixes to the wiz transformation code.

svn-id: r20315
"
"ea2c7b7d28d5abfc3dd8614de79641fa3b7f079e","2006-01-30 19:29:28+00:00","Changed transformation origin computation (the previous code is matching pajama2 disasm, but looks wrong to me).

svn-id: r20316
"
"eae3d40f67e9947423a04f0931d30e3b5a270601","2006-01-30 19:32:28+00:00","Fixed assert conditions.

svn-id: r20317
"
"c7e90efc80bb43a2cab31882791a3cf296640c4d","2006-01-30 20:33:45+00:00","Changed to be consistent with rest of wiz code.

svn-id: r20318
"
"a199c1ef146eb1b5b7480604f3d6ef4c07df55c8","2006-01-30 20:48:45+00:00","Fix spelling in new entry Formed -> Former :D

svn-id: r20319
"
"44383a7ab70cfc41b6e67c6281b74413760fdb97","2006-01-30 22:06:53+00:00","Revert back to match original version.
Change caused glitches in credits of pajama3.

svn-id: r20320
"
"e079fa138278c07ab154e6e1a5ffff8ac2a9ccdf","2006-01-31 00:46:20+00:00","Cleanup

svn-id: r20321
"
"3addf48534fecf4b80603d8ad4fb25d79b3b9432","2006-01-31 01:06:04+00:00","Fix detection of rotated sprite.

svn-id: r20322
"
"418fd64554c76e81c055dec449980efd0317e9f8","2006-01-31 02:19:14+00:00","Works fine now.

svn-id: r20323
"
"930ef80e2344783cf5082b7ad82c93600a5f1746","2006-01-31 02:54:37+00:00","A scale of zero should be ignored.

svn-id: r20324
"
"28753b9fdf8056e4aa19524680d04258042f7c70","2006-01-31 03:11:40+00:00","Plug in better font. Unfortunately we can't use Arial12 which Krest put on
his mock-ups due to license restrictions, i.e. Microsoft prohibits any
reverse engineering and modifications of it and we need to convert it into
raster font.

Fortunately there are free fonts in the wild. I tried Bitstream Vera, but it
looked too wide, or crappy if horizontal resolution was altered. Next try
was Adobe Helvetica from X.org. Only requirement is to verbose copyright
notice and disclaimer.

However we will need both bold (provided) and normal wieghts of font in new
GUI for use in text inputs. This is work to do.

svn-id: r20325
"
"2f33ca6c58eb40b1e870a7f469f48cfbd9ab0717","2006-01-31 03:15:06+00:00","oops. Forgot about our small backends.

svn-id: r20326
"
"46c961f28dee19183671f19a9254fc6b340cb365","2006-01-31 03:25:03+00:00","Oops again. Don't beat me hard for plugging in 8800+ glyphs font instead
of 130-glyphs one :)

svn-id: r20327
"
"9246a7a532f84a2a87189caa96dd5a336eae42d9","2006-01-31 08:03:21+00:00","I assume this call to restoreBackground() is unnecessary.

svn-id: r20328
"
"74dd2e133d05d62ab184fbecf1692f8bb18fe5ec","2006-01-31 08:41:51+00:00","I didn't realize that disabled widgets were transparent, rather than just
faded. In those cases, I guess the background should be restored before
drawing. But that can probably be done in the drawSurface / drawRect
functions instead, like this.

svn-id: r20329
"
"484fca65493305a69b2d4dbd6ad70fc3385f31bf","2006-01-31 09:45:36+00:00","Tabs look better with dialog surfaces than with widget surfaces. There's
still room for improvements, though...

svn-id: r20330
"
"69b2945071b3877b5f54fc93dbcaf32be819991d","2006-01-31 14:38:42+00:00","Make the old theme's checkboxes look a bit more like they used to. (Not
quite, though, as they are a bit smaller than they used to be.)

svn-id: r20331
"
"bfb912dbb1dee64b13731500e25948a00b41d76d","2006-01-31 17:52:56+00:00","Add undocumented option --gui-theme for easier theme debugging.

svn-id: r20332
"
"77f329cdc74637553e4192593aa3e3bc610af8cf","2006-01-31 19:28:04+00:00","Sync with branch-0-8-0.

svn-id: r20333
"
"d08df2683dfadea4ad69cab4f88ae6513ffec635","2006-01-31 19:28:19+00:00","Use the pitch of a virtual screen surface instead of the width to skip a scanline.

svn-id: r20334
"
"b32f8ab2fcbace19cbe1ef09bd9073fbe7c5887d","2006-01-31 19:28:31+00:00","Minor cleanup.

svn-id: r20335
"
"1976ac6250686c6af19eefa3afef5eb426012eb5","2006-01-31 19:35:33+00:00","Adds more configureable options to the config file of the new theme,
also update the default theme zip file for that.
Also it changes the way the tab buttons get drawn, now they have
only rounded corners at the top.

svn-id: r20336
"
"669f86705d18d08ab69c602925995b602617027d","2006-01-31 20:19:47+00:00","Implements the usage of cached backgrounds in the old theme as well,
that should fix redrawing bugs with the about dialog.
Also I displayed cached background usage in the console for now, since
it produces redraw bugs with the old theme (maybe someone with knowledge how
redrawing of that dialog is handled should look at that).

svn-id: r20337
"
"da9b8d71ae5836263d9a4b84f72dbf7bc5afac7f","2006-01-31 21:31:31+00:00","Fixes color bugs with the new theme when switching to fullscreen on Mac OS X.

svn-id: r20338
"
"80892282fe4f7fb0327668a20e3a775ab7a28bf1","2006-02-01 05:30:23+00:00","Fullfill feature request #1410574: 'GOB: Changing characters'. Thanks to wjp.

svn-id: r20339
"
"303d19afcbbddfccb420535c87fab3cced6c56eb","2006-02-01 11:01:55+00:00","Add another German versions of Simon the Sorcerer 2 (Dos CD).

svn-id: r20340
"
"129e7846b51a2f0e10ba70393283d13ca90eb1df","2006-02-01 15:11:39+00:00","Implemented shadow drawing, also extended the theme config again
(new color entries for highlighted buttons and for other widgets).
Also added a 'highlight' check to the CheckBox widget.
Changed the PopUpDialog to use a shadow around itself.

svn-id: r20341
"
"004b8b964a0651bbb75a4b6cf7b3ac6db92e6ab7","2006-02-01 16:40:17+00:00","Patch #1420942 (console page down fix)

svn-id: r20342
"
"12133dfb4f29b381a6841060404633157b0d6975","2006-02-01 16:42:42+00:00","Much improved how shadows look. However it is done with a really dirty
hack as tehre is lots of overdraw, abuse of shadow width and code
duplication. Anyway shadow drawing code will go to separate functioMuch improved how shadows look. However it is done with a really dirty
hack as tehre is lots of overdraw, abuse of shadow width and code
duplication. Anyway shadow drawing code will go to separate function.

svn-id: r20343
"
"d6e141cc35e943efaac4c6028e5b4bab696a06cc","2006-02-01 22:39:54+00:00","Fix glitch when moving the mouse over a disabled, checked checkbox. (The
check mark would become brighter, and I think it was because a transparent
mark was drawn over a transparent mark, thus 'amplifying' it.)

svn-id: r20344
"
"1a84c20a4302daa6154d9ead808d943bf481f5c3","2006-02-01 23:50:03+00:00","Add another English version of Simon the Sorcerer 1  (DOS CD).

svn-id: r20345
"
"8b6449ce6e409524120f7ee1598fa3d8e957e052","2006-02-02 05:07:47+00:00","Re-sort later HE games, by engine changes.

Use set heap size for HE games too, since index sets a lower size.

svn-id: r20346
"
"da860e9985ebacf058b361397ef4a654b676be8f","2006-02-02 05:13:39+00:00","Oops

svn-id: r20347
"
"64ec8a95cf419810cc31aa5d83a406c66b8c3367","2006-02-02 12:27:05+00:00","Move to supported games.

svn-id: r20348
"
"5c7267b49ecccf6f7b8d9c507b311b3a23cf214b","2006-02-02 12:53:42+00:00","Because incomplete SKY.CPT files are apparently a common problem due to some problems with the scummvm.org server or connection, check if it's the expected size.

svn-id: r20349
"
"25a6adc238520748df136e3d9b5eb79d57d1194f","2006-02-02 20:33:43+00:00","Should be 'description'

svn-id: r20350
"
"4c8cd695daadaff9bc39bd792bda3e0442e741a9","2006-02-02 20:35:21+00:00","Typo

svn-id: r20351
"
"d88462e7d68c4052fd2927ba7fc3be5566a1b9d9","2006-02-02 20:39:12+00:00","Fixed PalmOS backend compilation

svn-id: r20352
"
"da33aa319bf5b5ae91650eaa9d24ef412a5d9af5","2006-02-02 21:12:00+00:00","Added/Changed o2_evaluateStore(), o2_palLoad(), o2_setRenderFlags(), o2_loadTot(), parseVarIndex(), parseValExpr() and parseExpr() for Gob2

svn-id: r20353
"
"4df095cb36369c72075744dc3521aa9c2f31218c","2006-02-03 05:47:40+00:00","Reverse to match values.

svn-id: r20354
"
"2ebdbbf5e0123302cc16bf4ab45eb65d8f11601f","2006-02-03 07:30:29+00:00","fixes allow compile with emsvc4 again

svn-id: r20355
"
"44cb88cab87f3fed944605a8e46f9d2e0f9cf0e2","2006-02-03 09:31:07+00:00","Remove unused sprite flag, which is never set.
Remove leftover argument.

svn-id: r20356
"
"48094b82834eb5568ac16096c5d6f16d554f0112","2006-02-03 10:13:16+00:00","Forgot to add parse_v1.cpp and parse_v2.cpp, sorry...

svn-id: r20357
"
"37e204e3a54067118d929991b21ea72abc2d97a0","2006-02-03 20:19:01+00:00","A recent change to loadWAVFromStream() caused the AUTOFREE flag to be set,
which in turn causes Broken Sword 2 to crash. And that change made it into
0.8.1, too. Augh! Kudos to wjp for tracking down the bug while I was still
waiting for ScummVM to finish compiling.

svn-id: r20358
"
"71d62986c0669926c80e2581da5350e1fe57ecb9","2006-02-04 00:05:59+00:00","Fix indent

svn-id: r20364
"
"0c8e751b29c518e673584ec7e4ac045f0fde9fee","2006-02-04 02:16:18+00:00","Correct the position of shadow check in HE90+ games.
Fixes glitch when recycling bottles in puttrace.

svn-id: r20366
"
"529f2602618e36ce3f578ca356f7a7c97d24d5ac","2006-02-04 08:19:10+00:00","Cleanup

svn-id: r20367
"
"cd24d93f7b5e2235134ede0854d3a95339c54578","2006-02-04 08:40:36+00:00","Save complete tables, was off by one.

svn-id: r20368
"
"ba2c097653c04645e5b96831387778f6dc06b891","2006-02-04 09:38:51+00:00","Actually active sprite table doesn't need to be saved.

svn-id: r20369
"
"4e83bd307ad616e4b65d62db2995406941368a18","2006-02-04 10:18:25+00:00","Reset shadow for each cycle.

svn-id: r20371
"
"26349e6f65fc629db3334c80f230c976fae4ef55","2006-02-04 12:11:10+00:00","Split intern.h and moved HE stuff into the new file intern_he.h

svn-id: r20372
"
"6277598a2d56bc6d1da713039704a8cd3cb41a78","2006-02-04 12:44:31+00:00","akos codec 32 should never be used for old costumes.
small change to match original.

svn-id: r20373
"
"76562c281d51790bb21b4288717c95735a7393a3","2006-02-04 21:55:37+00:00","Fix DISABLE_SCUMM_7_8 compile.

svn-id: r20375
"
"484f6d1ad95f438f7b8eb67b7c3d53a71eaf65b3","2006-02-04 22:27:52+00:00","Add German version of Maniac NES.

svn-id: r20378
"
"bdedc81c229793dadcf4f8e7201eeb586073c724","2006-02-04 23:51:25+00:00","Fix restarting Maniac NES.

svn-id: r20380
"
"df3d553e321aa01df6357134e7d42c655379dbea","2006-02-05 00:40:48+00:00","Sync. subOp variable name and always use byte.

svn-id: r20382
"
"937a5f8af5289fb05911e76d31620368e745851f","2006-02-05 00:50:03+00:00","Change to int32 for safety.

svn-id: r20383
"
"002dd49e12e10dc7a7979f77cd4ff6232f9daaa2","2006-02-05 00:56:00+00:00","Fix broken game detection for now.

svn-id: r20384
"
"37993562af3f7b5ec9fff276f16c1ee7890f4462","2006-02-05 02:14:20+00:00","Correct position, as they are used by HE60 games.

svn-id: r20385
"
"f18672b3482654c5a4dee9a85c1c624e782d6d1c","2006-02-05 06:32:16+00:00","Another regression, palette cycling is used by HE61 too.

svn-id: r20387
"
"ffc3b480218052ec541a91431faa8ea158457faf","2006-02-05 07:55:13+00:00","Revert back to original shadow detection.

svn-id: r20391
"
"c0d4faf383b713f892d580031552f1b7c869eba2","2006-02-05 12:57:15+00:00","fixed warning

svn-id: r20392
"
"fefb38d17a91080b6815ac85776b374ff05f4367","2006-02-05 12:58:19+00:00","update

svn-id: r20393
"
"9555cd4df46d81a8f6fdcaea3eece76037ab8ca4","2006-02-05 13:48:27+00:00","revert experimental imuse changes

svn-id: r20394
"
"a480fa97883cacf359db6720379379db72ee1f29","2006-02-05 13:49:34+00:00","revert experimental imuse changes

svn-id: r20395
"
"419caac2b922f69e4c48afb20ba6d0961a2c0e42","2006-02-05 14:00:35+00:00","Fix QVGA Smartphone detection

svn-id: r20397
"
"b4f4175c1cf00b7c7c69f50366e71d8097b4d5f7","2006-02-05 14:57:48+00:00","revert experimental smush changes too

svn-id: r20402
"
"3915d4adb301091223aad5b961054ff592dc2753","2006-02-05 15:03:05+00:00","Fix typo spotted by Joachim

svn-id: r20403
"
"b3e1252b02c63539bfbc42d67fa200a1602d6bb8","2006-02-05 15:48:46+00:00","WORKAROUND bug #1074444 (DOTT: Can't get teeth)

svn-id: r20406
"
"b621575dbd490677e86dea9717404e41f75a34b0","2006-02-05 15:49:09+00:00","Make debugging a little bit easier :-)

svn-id: r20407
"
"be94482806cc2d26b9d68995341b6905a2cfb7a4","2006-02-05 15:49:38+00:00","Class data is 32 bits, and available for objects, too

svn-id: r20408
"
"baaee313315544fa5480f2af8c32043ea83765ac","2006-02-05 17:56:27+00:00","Update copyright year and sync NEWS file with 0.8.2

svn-id: r20411
"
"6723e657d156d81d339a84b1b7a6330a7a51a70d","2006-02-05 18:28:11+00:00","Sync with 0.8.2

svn-id: r20415
"
"aae00f629c6a7ad7f745b51a1ebe16d96f628323","2006-02-05 18:46:51+00:00","Change behaviour of checkboxes to more logical.

svn-id: r20416
"
"f65e531a6e096085ab66c13efc848847c3cbf69e","2006-02-05 19:57:59+00:00","- changed logic of allocation fade tracks, now each normal track have own static fade track, (i know about affect on savagame state of imuse, but it's minor thing),
- added more thread locks, i hope they are create deadlocks somewhere

svn-id: r20417
"
"c641a7e39b7ed871073b3db5bf0b80ad9c5b8ad9","2006-02-06 00:43:34+00:00","Added the MD5 of a German Floppy version, as given by Arne.F on the forums.
Also corrected some tabs.

svn-id: r20418
"
"0ad58cdb952a302c3404651e02d5065bb3576d9d","2006-02-07 22:50:14+00:00","Removed .cvsignore files

svn-id: r20424
"
"406ecf15301e5e6dc97729750cc9730a5eef5b14","2006-02-07 23:04:51+00:00","Fixed lots of Subversion properties (keywords, mime-type, eol-style)

svn-id: r20428
"
"91222cc6acacc2a399ac982eae61d5c0f204bbb9","2006-02-09 04:58:21+00:00","Fix music regression in DOS versions of ITE

svn-id: r20436
"
"56d918edbe5feecb4c0239a8927adb60602ae154","2006-02-09 07:37:19+00:00","Moved tons of code out of kyra.cpp, and removed three redundant functions (two stubs
to sound functions, and one duplicate function (one with 'posion' in the name, one with 'poison').

The bulk of the moved code is moved to the newly created files items.cpp, scene.cpp and
sequences.cpp



svn-id: r20437
"
"60bbd5e470db1946d9c6d02951a1c9ec6b8aba35","2006-02-09 12:19:53+00:00","1. Replaced the $Header$ tags in the Kyra files
2. Added code to let the player skip past dialogue by leftclicking or hitting '.'
3. Removed the waitTicks() function and replaced all usage with delay()
4. Corrected various speed issues, the intro should run at the correct pace now
5. Talkie versions will no longer display the story screen during the intro, as in the original.
6. Moved the delay() function adjacent to other delay functions.

svn-id: r20438
"
"405c2832e8bc3354cff1dfa2cce480a057f74c9c","2006-02-09 12:30:52+00:00","Properly initialize _devpoll.

svn-id: r20439
"
"8734538e99a8d53fc998d73e34fe83653ecbda87","2006-02-09 13:25:53+00:00","$Header$ -> $URL$ + $Id$

svn-id: r20441
"
"87047c85cd420be8129593247dae20ce9e19cc3c","2006-02-09 15:12:44+00:00","Fix $Header$ and some minor file header inconsistencies.

svn-id: r20444
"
"83b8ad61cc7c30f6ee2cab73d508ee11fcdd4eaf","2006-02-09 15:41:23+00:00","Finally got rid of the 'driver' directory. It made sense in the original code,
because that's where the Windows-specific stuff was, but in ScummVM we let the
backend handle the platform-specific stuff.

Next step will be to rename and restructure some of the files. I'll need to
look a bit more at the BASS and BS1 code bases first, to see if I can get any
sensible ideas from there.

svn-id: r20445
"
"f0d1cb1886173b725b935fdcc68bce564697c141","2006-02-09 21:30:34+00:00","Thanks to Subversion, I've gotten rid of the sword2/driver directory. Now we
can go back to CVS again. (Just kidding.)

svn-id: r20447
"
"9ea43c99cd0d1c39f2faafb6abc66e50a35415fa","2006-02-10 10:42:21+00:00","Started to improve the kyra game detector if an unknown version is found.

svn-id: r20464
"
"976166e8a538e1c9123ebb8c8c91abadb49b0d7a","2006-02-10 13:22:43+00:00","Add digital music support to DOS versions of ITE

svn-id: r20475
"
"410261e8b443f70c5d98bb16a11274d3778537cf","2006-02-10 15:01:58+00:00","Oops. Left this out of last commit, made the intro play too fast.

svn-id: r20478
"
"5398ef1532fc5839d0ee4c4c15de0bc7c826476d","2006-02-10 16:39:56+00:00","Added support for compressed speech in the engine (I only tried ogg and flac I guess mp3 should work too...)
Also changed some formatting.

svn-id: r20480
"
"651faae2a4797627a50e99a9f182478bf1f27c1a","2006-02-10 19:49:08+00:00","Fixed gfx bug with shapes with flag 1 enabled.
That means that Brandon now displays correctly when walking around.

svn-id: r20482
"
"590289d937be8104f03a22727f0796c22106ffda","2006-02-11 00:17:20+00:00","Fixes the bug when displaying the falling leafe scene in room 12 and text bugs which overwride the interface. (also in the scene with the ruby tree)

svn-id: r20483
"
"44763fcce90a9ccfb40d1430e015b45546f08569","2006-02-11 00:44:04+00:00","Add support for Spanish version of balloon

svn-id: r20484
"
"ebb5564a5791948bc8cc50f1766c1fc1352670fe","2006-02-11 01:32:22+00:00","Possible fix for bug [ 1425622 ] KYRA: Assertion at final scene
Also fixes an uninitialized var.

svn-id: r20486
"
"63b1913c730304540bc0aa95c0615cd5f0f1f5d2","2006-02-11 06:41:33+00:00","Fixed bug [ 1403083 ] KYRA: Brandon graphics glitch when using the ice scroll
The CD version of this particular sequence is only half the length of the floppy
version.

svn-id: r20487
"
"3a419f8b850ad6479a530a3e912c770099f6ad4e","2006-02-11 06:46:00+00:00","Oops, forgot to revert a debug change.

svn-id: r20489
"
"ed7a6e900d3526303ecd9c8017948648aeb25c12","2006-02-11 08:31:13+00:00","Kyra cleanup path step 2

* Moved more code out of kyra.cpp.
Specifically moved Kyra1 specific sequence helper functions to sequence.cpp
(and updateKyragemFading() from animator.cpp for the same reason),
and some generic animation functions to animator.cpp. This is mainly
in preparation for Kyra2.
* Additionally, cleaned up my last bugfix a little bit :)

svn-id: r20493
"
"b2f8cd025bdebbde1fa1684cfc35534ee393bd64","2006-02-11 08:46:33+00:00","Renaming sequences.cpp to sequences_v1.cpp, as it's 100% Kyra1 specific.

svn-id: r20494
"
"c4cb3d607a9d56753fb525cf4c55f3b2b747b59f","2006-02-11 08:55:04+00:00","Change CVS keywords to SVN keywords

svn-id: r20496
"
"0ae5c6fe60fa5af9a843853f4eec70c2f9df530b","2006-02-11 09:03:08+00:00","Disable this timer code for now, since it seems to make things unstable and hang with MIDI drivers (NULL, native)

svn-id: r20498
"
"a1e21760a4102e228bb358c2109b8de528d7f476","2006-02-11 09:09:20+00:00","- Fixed gfx mode : normal = default, fixed using 1x instead
- Use palette only if we need it
- draw_mouse() is part if int_updateScreen
- Moved OSD redraw in common updateScreen
- Added base draw_osd(...)

svn-id: r20499
"
"861a4be0772388c80167618dcde644b97ca1e046","2006-02-11 09:15:12+00:00","Change CVS keywords to SVN keywords

svn-id: r20501
"
"5cf077339e2e50aaa65242bf08e89f8ee9ef759a","2006-02-11 09:18:24+00:00","Added OS5 Advanced mode

svn-id: r20502
"
"7f1771cba8df73c4663b1ee18913520d00170bc1","2006-02-11 09:26:04+00:00","- Added optional use of palette
- Common sound struct
- Move common quit stuff to the base class
- Fixed CD functions, now MP3s work properly
- Make mutex functions virtual so that they can be redefined
- little cleanup

svn-id: r20503
"
"0aa701d75971e0461dbd8cfa8c2397c0c3ab1b4a","2006-02-11 09:32:10+00:00","Does this fix the sound problem on device wakeup ?

svn-id: r20505
"
"7ee49b03305087071284b8629abf816fa7558d49","2006-02-11 09:33:29+00:00","Cleanup HE debug msgs

svn-id: r20506
"
"2a8089e02f300e0bb016ce4fd0474897116d2337","2006-02-11 09:47:42+00:00","Change CVS keywords to SVN keywords

svn-id: r20508
"
"ee6fa83b1b1e79ee8329c0b9d58481334b46a564","2006-02-11 09:53:21+00:00","Change CVS keywords to SVN keywords

svn-id: r20509
"
"36934b611dbcbdac18516fc115fd18114b228693","2006-02-11 09:53:53+00:00","Change CVS keywords to SVN keywords

svn-id: r20510
"
"aee8c0090f8b9b57a0d66b7aeeb3b527f914ce05","2006-02-11 09:55:41+00:00","Change CVS keywords to SVN keywords

svn-id: r20511
"
"484e6f923fc18065accd23f0d0ef43004047ca7f","2006-02-11 10:01:01+00:00","Change CVS keywords to SVN keywords

svn-id: r20512
"
"d02e4b652f0e5c58efd235e6cb262f21c25c9afa","2006-02-11 10:03:00+00:00","Change CVS keywords to SVN keywords

svn-id: r20513
"
"91350920e38ada606f30ffe9e039b4e420795ba9","2006-02-11 10:03:24+00:00","Change CVS keywords to SVN keywords

svn-id: r20514
"
"406703148f5ca1f42600b2c57992e1a1ce25c6df","2006-02-11 10:05:31+00:00","Change CVS keywords to SVN keywords

svn-id: r20515
"
"4c26c0792c6ce186d93257b4979f12c5cb11eac5","2006-02-11 10:07:12+00:00","Change CVS keywords to SVN keywords

svn-id: r20516
"
"af012fe370d95e1631d577fee1a08d7474677fae","2006-02-11 10:09:33+00:00","fixing my accidentally commited debugger change

svn-id: r20517
"
"b34e207dbba2a644102b00b6251bf4972fb0e817","2006-02-11 10:08:56+00:00","Change CVS keywords to SVN keywords

svn-id: r20518
"
"13d6a56867b25ed810cb3f057f17f0e66c9821bb","2006-02-11 10:10:44+00:00","Change CVS keywords to SVN keywords

svn-id: r20519
"
"ff18cf18357518aa8adbe71593b2bfef2270683d","2006-02-11 10:11:37+00:00","Change CVS keywords to SVN keywords

svn-id: r20520
"
"9d07c3f757715b3a88cb1bb573d146a89056dc23","2006-02-11 10:40:30+00:00","Will be here later

svn-id: r20522
"
"075e5096051e460fa3330af4c9b979ebfab19a6e","2006-02-11 10:57:07+00:00","- Use midi drivers only when needed
- disable zodiac midi driver with scumm engine since it doesn't work with it in ARM mode (??)

svn-id: r20524
"
"fd128bebc628912e03f5722c7d135972d93787ec","2006-02-11 12:44:16+00:00","Change CVS keywords to SVN keywords

svn-id: r20532
"
"1ae8586ef0aec923fa13654ae2a847ca6d015593","2006-02-11 12:46:41+00:00","Change CVS keywords to SVN keywords

svn-id: r20533
"
"cbb2ca005c8385a25fcf7195319ca909d0f7124b","2006-02-11 12:47:47+00:00","Change CVS keywords to SVN keywords

svn-id: r20535
"
"6703dc7fa1cd517a96d4f1955ca1794967d2a920","2006-02-11 12:54:56+00:00","Add patch #1374870 - New Lure of the Temptress module

svn-id: r20536
"
"83f1837e7adabbecaaa66cc8a84846165a701122","2006-02-11 13:27:07+00:00","Change CVS keywords to SVN keywords

svn-id: r20542
"
"ca72474cbf76bf883445a7984c9da8a1e0131a46","2006-02-11 13:29:59+00:00","Disable Lure engine by default for now

svn-id: r20543
"
"5b2533cd5360eca1aff0a6d45aaeeb67243be72f","2006-02-11 13:36:08+00:00","Ooops, allow Lure engine to be enabled

svn-id: r20545
"
"5bbc701b7bb7b93f4fa12f26802c336ff0a0007e","2006-02-11 14:28:53+00:00","fix warning

svn-id: r20546
"
"c8205dd8c6e6bd640325e82d6a9c360f637876ee","2006-02-11 14:36:01+00:00","updated msvc files

svn-id: r20548
"
"0406527513a54d8cb7afd4148b4d4a362c0029ba","2006-02-11 14:36:57+00:00","updated msvc files

svn-id: r20549
"
"f17ee190045e3f726aa2ba302da4c6fca17554da","2006-02-11 14:46:59+00:00","Will be added later

svn-id: r20550
"
"fc556b789aec360e1e6e6929624efa8ae68290f2","2006-02-11 17:14:06+00:00","We are reading LE data even on BE system

svn-id: r20551
"
"a76f3f1b6e768ffff3716ed4476bdcc61b0b905c","2006-02-11 17:16:26+00:00","Fixed potential conflict with standard memset

svn-id: r20552
"
"cc07cd38370f73306c6676c86fb922430f10cb34","2006-02-11 17:18:18+00:00","Fixed odd aligned read

svn-id: r20553
"
"32b2efb8d75a42a8ad0fd241065451cb35125c9f","2006-02-11 18:02:13+00:00","This seems to definitively fix my compilation problem

svn-id: r20554
"
"8db2e6c035113000b9b5370fd4bb4aa40cffb6e0","2006-02-11 18:08:47+00:00","Replaced with a PilRC version

svn-id: r20555
"
"dfa1a254f60401acf892b2890a64dafb82d7b0dd","2006-02-11 18:12:51+00:00","Fixed default volRefNum value
- Init MathLib only on non-ARM devices
- Added scummvm header
- Removed obsolete code

svn-id: r20556
"
"a474940a337900af70c1c2a7c01e8df7ff2d9c34","2006-02-11 18:16:19+00:00","- Added NVFS support
- Fixed default volRefNum value
- Added scummvm header

svn-id: r20557
"
"65ed0e0ded5e7fe6580378344c4772a1bd971f79","2006-02-11 18:18:50+00:00","- Added FileBrowser API support to get the game path
- Added scummvm header
- Typo

svn-id: r20558
"
"f32a6e5c67c4fb2bbff39dbe6e6a2be2fea81909","2006-02-11 18:20:17+00:00","Fixed default volRefNum value
- Added scummvm header

svn-id: r20559
"
"2552211aaa0061bc196ea4992c2fcf36ae1165f7","2006-02-11 18:23:29+00:00","- Added autosave period option
- Added OS5 advanced mode
- Added scummvm header

svn-id: r20560
"
"9b1d8dc1149ba344e88da06f70f945ee35562e23","2006-02-11 18:24:42+00:00","Fixed driver test

svn-id: r20561
"
"5638fae43908228bf5388ab60e8e76c48d6dea4e","2006-02-11 18:28:02+00:00","- Added NVFS support
- Fixed volRefNum default value
- Get rid of MemGluePtrNew when possible
- Fixed vsprintf in ARM mode

svn-id: r20562
"
"f20193af5f3ff775bfaf785f75a1866e6de01657","2006-02-11 18:31:05+00:00","- Get rid of MemGluePtrNew
- Fixed exit function in ARM mode
- Fixed C++ compilation

svn-id: r20563
"
"9e3ee81579d34cca3c76e2d64e82d1d90329ab9a","2006-02-11 18:34:49+00:00","Updated header

svn-id: r20564
"
"044d5164a1f6e225cbd08f3c8e52fbc3b9afe90f","2006-02-11 18:36:40+00:00","Updated header

svn-id: r20565
"
"62b5df4e7b62aef4c548253aa5fb57e2f98744c0","2006-02-11 18:41:00+00:00","Added new engine, platform and language

svn-id: r20566
"
"4f41e84f514002614d82509bb802f2e4bf8f5f7e","2006-02-11 18:42:32+00:00","Not more required

svn-id: r20567
"
"8f3ae56c69614d5f893e7498ac4aee809f95ae69","2006-02-11 18:45:00+00:00","Fixed volRefNum default value

svn-id: r20568
"
"98bb8ce5a9dc99735601576510026b169ea5273b","2006-02-11 18:47:23+00:00","No more required

svn-id: r20569
"
"9649fb50f31e454efc603389abd9d295981404b5","2006-02-11 18:49:05+00:00","- Fixed volRefNum default value
- Added autosave option

svn-id: r20570
"
"26a3285b535c32d7abd1b888043ff82b22af5738","2006-02-11 18:52:32+00:00","Move setMouseCursor to OS5 class

svn-id: r20571
"
"9d8c0acbc48c5430538d7357d4dbc81c6385b091","2006-02-11 18:53:58+00:00","Move show/hideOverlay to OS5 class (should be in Base ?)

svn-id: r20572
"
"79f94b3cb2df58e4fc122d403fb8d9f698cb13db","2006-02-11 18:55:39+00:00","Ooops

svn-id: r20573
"
"87f6c767225d32337a9c428ecd92b1fe3cf96df3","2006-02-11 18:57:43+00:00","This is now required

svn-id: r20574
"
"0a5cd1ce9882097cdccb9bae04d998aed5168853","2006-02-11 19:01:06+00:00","Disable Adlib on PalmOS 68k devices

svn-id: r20575
"
"fde4fd87e7b19888778a5926fefe5a2a220990f0","2006-02-11 19:08:25+00:00","Bye bye

svn-id: r20576
"
"bd39c3cb3e105756155caf81cabf57173b9c10a7","2006-02-11 19:09:09+00:00","Forgot this one

svn-id: r20577
"
"2a9a0d4211b1ea5723f1409d91cb95de8984429e","2006-02-11 21:09:01+00:00","Quick fixes of unknown cleanliness: The mouse cursor is no longer unbelievably
sluggish on my computer, and I've added delays to some busy-wait loops to make
it less of a CPU hog.

I hope I didn't break anything.

svn-id: r20581
"
"26ee630756ebdd7c96bccede0881a8c8b98e8f2b","2006-02-11 22:45:04+00:00","Moved engines to the new engines/ directory

svn-id: r20582
"
"136ecfc1e8115d0c00f5b53acd87d873019ab4da","2006-02-11 23:43:24+00:00","Fixed the list of backend factory functions

svn-id: r20583
"
"80cf2fa46ff638ae25fe85a3a89997ceb7f09aae","2006-02-12 00:16:31+00:00","Reduced data duplication in module.mk files; added module.mk files for null and x11 backends; added engines/module.mk

svn-id: r20584
"
"37f433a7ad516df85cd62e32e1a178635212b047","2006-02-12 00:27:19+00:00","* New and tested builds for S60V3 and UIQ3
* New upscaled icons for UIQ3/S60V3. SVG/Scalable version needed for S60V3 for proper good looks
* Critical bug in Symbian-fs fixed (exception for UIQ3/S60V3)
*Removed duplicate files for easier maintanence
*New handling for Symbian error messages, save paths etc
*All naming now is ScummVM for all apps and targets

svn-id: r20585
"
"0b847325e1b57ad2feec943ae715236cf393d13b","2006-02-12 00:33:04+00:00","'Changed Symbian configuration handling so it is using the basepath of the application installation as a path for Savegames, ini files etc
*Updated list.h so it also compiles for Symbian codewarrior and gcce compilers

svn-id: r20586
"
"f661bbe9aaac02eb1e3ecef03860701749425a17","2006-02-12 00:50:37+00:00","Fix compile

svn-id: r20587
"
"c595b65aba212580753f71c1ee3a7cd0bfc1d81d","2006-02-12 01:06:26+00:00","openCD() and pollCD() should return false, since they don't actually access a CD.

This avoids some common pitfalls in new backends based off of this, like e.g. the hang on the final chapter screen in MI1CD.

svn-id: r20588
"
"24a5ba86a7a4ec4992cb81d6faca14198efc6d48","2006-02-12 01:23:58+00:00","No need to force engines to implement errorString()

svn-id: r20589
"
"be068cf6f38be3e12ea0b12a6a9076f48c978138","2006-02-12 01:42:34+00:00","The GameDetector is no longer a required parameter for Engine constructors

svn-id: r20590
"
"19e38824394bc06f169e266f1ef55ca651c896b6","2006-02-12 02:21:03+00:00","Add another Loom demo

svn-id: r20591
"
"37bc512d649b0e17591ebe55e94003d047631de0","2006-02-12 04:43:27+00:00","This difference only applies to SCUMM7+

svn-id: r20593
"
"86ee0df205b267cc3bea1381dbafee8bb85d15ab","2006-02-12 06:43:42+00:00","A few corrections from disasm., checked against all versions

svn-id: r20594
"
"2873ae81867e7b78a1b334abf0a65910c867b5b0","2006-02-12 07:03:04+00:00","Actually that should be before all code

svn-id: r20595
"
"30c5480bd32782e4dbc4efcaca60bb42a9cb2b82","2006-02-12 09:52:13+00:00","Actor room is only checked in SCUMM 7+

svn-id: r20597
"
"b9fec00c25f00a06ad6922b9aebcd0e406714340","2006-02-12 11:03:16+00:00","Only adjusted in SCUMM 5+

svn-id: r20598
"
"9014ebc74a8ad961d3b52e13894617194ad4d25b","2006-02-12 12:54:41+00:00","Fixed building of engine plugins

svn-id: r20603
"
"92cfa0aa68fadaff1498d347f7dd2e8121f73ae9","2006-02-12 13:08:11+00:00","svn-id: r20606
"
"609d185739b27a69fe29247f3e272515fd147f08","2006-02-12 13:12:49+00:00","Another spot of non-standard '#else if' replaced by '#elif'

svn-id: r20608
"
"25460eb0fa44b4991b6b50d89ec1492defa4eadf","2006-02-12 13:40:20+00:00","Renaming the folder 'epoc'->'symbian'

svn-id: r20612
"
"faec3622b3c87b7052c3522359bc0a3ad04efee4","2006-02-12 13:45:57+00:00","Committed old work on Soccer U32. Too far from being finished.

svn-id: r20613
"
"c2575afaa792d74153c7d100e01bb51461c87efe","2006-02-12 14:05:47+00:00","changed path in include to use 'common' to conform rest part of code

svn-id: r20614
"
"b91e8a572a1c81917346b49a865f4376eea9e3bb","2006-02-12 14:08:45+00:00","updated msvc8 project files to latest 'engines' directory changes

svn-id: r20615
"
"692adbe614e3a0ebe4ac9da8d7e73ad5ae49ecae","2006-02-12 14:42:43+00:00","Changed file paths from /epoc/ to /symbian/

svn-id: r20618
"
"009354961d476ef6a4a1b38bb106380762c39323","2006-02-12 15:01:32+00:00","Removed egcc lib from S60V3 mmp file.

svn-id: r20619
"
"7ef0b0c6500f2ab4572198ea15edad9ee3be9ab2","2006-02-12 15:40:38+00:00","Fixing platform value for two HE mac demos

svn-id: r20624
"
"48a5942a38b9064826669fd77f3e0e7d18da2bd3","2006-02-12 15:43:07+00:00","updated msvc7 project files

svn-id: r20625
"
"0ffdbdd7afd1a3600710d311c214e7fcd3a3ad22","2006-02-12 17:09:42+00:00","-mMove PalmOS project file to a more appropriate place

svn-id: r20632
"
"f74801e42cbbe9203fee03852944633d7c8d1c50","2006-02-12 18:28:11+00:00","Only in ARM mode

svn-id: r20634
"
"353ea3881f7d651ded9be6b3f034987fcb7adddc","2006-02-12 18:30:15+00:00","New definitions for frontend <-> module communication

svn-id: r20635
"
"5975bd1fe659c8ac0bfac3856197105deed9fa77","2006-02-12 18:36:57+00:00","- Added ARM module launcher
- Updated 68k launcher with lastest changes to gVars
+ GoLCD API support
+ Fix for invisible DIA using Stuffs*VG functions
+ New communication process between frontend and module to know if the module needs extra files
+ Get free memory at startup

svn-id: r20636
"
"3dc99262a2460ab2c6d24e476673a2489c24b982","2006-02-12 18:39:43+00:00","- Removed obsolete DEBUG defines
- Added LURE and OS5 defines

svn-id: r20637
"
"5e4a4f779d37aed83adcd768aae04064217f6ae7","2006-02-12 18:58:54+00:00","- Removed unused StrReplace function
- DrawStatus now support 8 and 16bit display
- Coordinate system is now used correctly (set only when needed), no more need to reset it in PalmFatalError
- Added new/delete operators for ARM OS5 mode

svn-id: r20638
"
"aa83040c0a2a4ee8f16ddadaa10d620a5b1ccb78","2006-02-12 19:01:49+00:00","It is _soundEx now

svn-id: r20640
"
"952b23fec79e68e3927c0580da5349e2fa932a1b","2006-02-12 19:03:39+00:00","- Changed the scumm-md5.txt format to reduce redundancy and to make it a bit niecer to edit
- Added --txt option to the md5table tool -> makes it easier to modify the scumm-md5.txt format

svn-id: r20641
"
"c93c11e8266d9ec674c8904bf58750c578032128","2006-02-12 19:13:03+00:00","md5table tool now reproduces blank & comment lines faithfully in --txt mode

svn-id: r20642
"
"b1f3d91f01bb803e28e8f6499fb686585f629bf7","2006-02-12 19:13:43+00:00","Re-added blank lines (purely cosmetic) which I accidentally removed in my previous commit

svn-id: r20643
"
"d6fea3125120b3de66fbdfe4c8c309996ddf49ba","2006-02-12 19:20:10+00:00","Removed layers.h since it was a) empty and b) never included.

svn-id: r20644
"
"852094a6f6aba201af64b830191280c8c873cc61","2006-02-12 19:20:26+00:00","- Use WinSetCoord only when needed, this fix some system redraw problems
- Get rid of Win*Lock functions, safer
- OSD (mainly DrawStatus) can now be use in 16bit mode too
- Move redawOSD to the base class
- Updated draw_osd function with standard PalmOS functions instead of Zodiac API, this draw_osd use big endian resources where OS5 version us little endian

svn-id: r20645
"
"d3b902ac25d39550e210cb043e120ebbbebabeed","2006-02-12 19:21:52+00:00","Fixed header, sorry

svn-id: r20646
"
"d6be9bcadaa37db65201fa4c2c18b8c74889aa30","2006-02-12 19:25:13+00:00","Not available in ARM mode for now

svn-id: r20647
"
"08efabc14d9b54827b279c8fc6acd752f5a5057f","2006-02-12 19:27:48+00:00","New feature to pass selected stack size to modules

svn-id: r20648
"
"1434ff868bc6d0f98023009840dd3ad610e9899e","2006-02-12 19:31:40+00:00","- Removed obsolete ARM stuff, modules are now almost-fully ARM
- Added autosave period and OS5 ARM advanced mode
- indicator can also be use with 16bit display

svn-id: r20649
"
"0bedb9fd572752e6d542874f90c5cc4efa0cad1f","2006-02-12 19:32:54+00:00","Cleanup

svn-id: r20650
"
"2ec85848287900ae4bce80b9280a3f5ce80942d4","2006-02-12 19:33:45+00:00","Renamed files for consistency with other engines:

build_display  -> screen
save_rest      -> saveload

More to come, no doubt.

svn-id: r20651
"
"0dbeb2f65b3f597d054125ae8bc8a7435c268cb8","2006-02-12 19:38:26+00:00","Oops. Forgot to tell SVN to actually *move* the files. I'll get the hang of it
eventually.

svn-id: r20652
"
"b1edf735098fd4ec528a4662a79196956841b609","2006-02-12 19:47:30+00:00","- Fixed bug #1329844, autooff not reset on exit
- Splitted AppStartCheckScreenSize from app.cpp rev19461, here is the palm standard one : PalmScreenSize
- Move PalmGetMemory here from file forminfo.cpp rev18604

svn-id: r20653
"
"ff25c5c90a304f3d890fba06d0886a5654110656","2006-02-12 19:50:19+00:00","- Splitted AppStartCheckScreenSize from app.cpp rev19461, here is the palm standard one : SonyScreenSize

svn-id: r20654
"
"8935cac6dad9e5628efb00224075ffd5e09100bd","2006-02-12 19:57:23+00:00","Standardized the preprocessor constants used to prevent double inclusion of
header files. Each now begins with 'SWORD2_' and ends with '_H'. (Well, except
for 'SWORD2_H', since I didn't want to name it 'SWORD2_SWORD2_H'.)

svn-id: r20655
"
"adc73b773a861b2bc99aa8066e136312031b65eb","2006-02-12 20:13:08+00:00","Revamped launcher code
+ more user freindly error message with ModImport
+ New direct mode code with some default option
+ Games data can now be directly in the Games folder using . as path
+ Added missing scummvm languages option
+ Added --render-mode option
+ Removed gfxMode, now only normal(1x) or wide
+ Added missing scummvm platforms option
+ Fixed per engine command line options
+ Alpha. ordered music drivers
+ Added 44khz (mainly for Zodiac) and FM Quality option
+ global command line options are now also used in direct mode
+ Added stylusClick, autoSave, advanced OS5 mode, optional led indicator, GoLCD API support
+ New feature to set ARM stack size
+ Fixed rotation problem

svn-id: r20656
"
"00abb48c7d39526f5bc1d607ff9759d4dc7d4669","2006-02-12 20:51:56+00:00","Moved SCUMM game descriptions/titles into a seperate table

svn-id: r20657
"
"d1a5345169f36ea9f86ff3b0cf4cff8f911d5acf","2006-02-12 21:41:09+00:00","Include game dscriptions for HE60/61 games in a DISABLE_HE build

svn-id: r20658
"
"441ead453ad59680ceb34826904c8b753b23dee2","2006-02-12 21:41:34+00:00","Merged _mouse.cpp and mouse.cpp into mouse.cpp

svn-id: r20659
"
"2905826002709cb06b59eb2acb346116f9b31e5c","2006-02-13 03:52:57+00:00","Initializes a var that would sometimes cause the intro to run too fast.

svn-id: r20663
"
"aaa11f6efba6761355efcb99098b390da1ba6231","2006-02-13 05:38:47+00:00","CC		:= arm-elf-gcc
CXX		:= arm-elf-g++
LD		:= arm-elf-g++
AS		:= arm-elf-as
AR      := arm-elf-ar cru
RANLIB  := arm-elf-ranlib
RM      := rm -f
MKDIR   := mkdir -p
ECHO    := echo -n
CAT     := cat
RM      := rm -f
# recursive version of RM
RM_REC  := $(RM) -r
ZIP     := zip -q
CP      := cp
OBJCOPY	:= arm-elf-objcopy
FXETOOL	:= b2fxec


#######################################################################
# Default compilation parameters. Normally don't edit these           #
#######################################################################

CXXFLAGS:= -g -O
DEFINES :=
LDFLAGS :=
INCLUDES:= -I. -Icommon
LIBS	:=
OBJS	:=

# Turn on useful warnings
CXXFLAGS+= -Wall -pedantic -Wpointer-arith -Wcast-qual -Wcast-align -Wconversion
CXXFLAGS+= -Wshadow -Wuninitialized -Wimplicit -Wundef
CXXFLAGS+= -Wno-long-long -Wno-multichar -Wno-unknown-pragmas -Wno-reorder
CXXFLAGS+= -Wwrite-strings -fcheck-new -Wctor-dtor-privacy -Wnon-virtual-dtor

# GPSDK (SDK, Includes and Startup Files) base dir
GPSDK			=	/usr/compat/gp32/share/sdk

# Outputs
EXEEXT			=	.elf
MAPFILE			=	scummvm.map
BIN			=	scummvm.gxb
FXE			=	scummvm.fxe

# Stripped Build? (Smaller ELF, Minimal debug symbol information).
# You MUST comment this out with a # if you wish to debug your code.
# STRIP_DEBUG		=	-Wl,--strip-debug

# Plugins hack
srcdir			=	./

# GP32 Direct Execute Tool (i.e. pclink -e on Windows, gplink run on Linux)
EXECUTE_TOOL	=	pclink -e
#
#	       		-ffast-math \
#	       		-fshort-double \
#
#
#

#-Wno-multichar \
# Remove the below from the above flags for Debug.
CFLAGS		=	-marm -march=armv4t -mtune=arm920 -mapcs \
-finline-functions \
-fshort-enums \
-mstructure-size-boundary=32 \
-mno-thumb-interwork \
-I$(GPSDK)/include \
-g \
-O2 \
-fomit-frame-pointer

CPPFLAGS	=	$(CFLAGS)

DEFINES 	= 	-D__GP32__
DEFINES		+=	-DNONSTANDARD_PORT

# Support Vorbis Tremor Patches.
#DEFINES	+=	-DVORBIS_TREMOR

# Support LIBMAD Patches.
#DEFINES	+=	-DGP32_MADMP3

# Support for 8:3 save files names (The GP32 uses FAT12/16 (no vFAT) for the file system).
DEFINES		+=	-DSHORT_SAVENAMES

# Support for the unsigned sound mixer.
DEFINES		+=	-DOUTPUT_UNSIGNED_AUDIO

# Support for the GP32 (fmOPL derived) MIDI engine.
#	-	NOT fully implemented yet.
DEFINES		+=	-DUSE_GP32_FMOPL

LDSPECS		=	-specs=gp32_gpsdk.specs

LDFLAGS 	= 	$(STRIP_DEBUG) \
-Wl,-Map,$(MAPFILE) \
$(LDSPECS) -Wl,--no-warn-mismatch

LIBS		+=	-L$(GPSDK)/lib \
-lgpmem -lgpos -lgpstdio -lgpstdlib -lgpsound -lgpgraphic -lgpfont \
-lm -lc -lgcc

INCLUDES	+=	-Ibackends/gp32 -Iengines -I$(GPSDK)/include

MODULES		+=	backends/gp32

#GP32 Debug - Remove from Release builds
#	This builds in the GP32 GDB USB Stub. Don't use it unless you know what your doing.
#	You also need to remove ANY optemisation from the compiler flags.
#DEFINES	+=	-DGP32_GDB
#OBJS	+=	backends/gp32/debug-gdbstub-usb.o

# Standard librarys and optimization modules
OBJS	+=	backends/gp32/startup.o \
backends/gp32/memcpy.o \
backends/gp32/gp_asmlib.o \
backends/gp32/gp_clipped.o \
backends/gp32/fontdata.o

# Custom GP32 std library
OBJS	+=	backends/gp32/gp32std.o \
backends/gp32/gp32std_grap.o \
backends/gp32/gp32std_input.o \
backends/gp32/gp32std_sound.o \
#backends/gp32/dmaaudio_asm.o \
#backends/gp32/dmaaudio.o \

#Main ScummVM for the GP32 Backend
OBJS	+= 	backends/gp32/gp32_main.o \
backends/gp32/gp32_launcher.o \
backends/gp32/gp32_osys.o \
backends/gp32/gp-fs.o

#install: all
#$(EXECUTE_TOOL) $(BIN)

$(FXE): $(BIN)
$(FXETOOL) -f -a 'The ScummVM Team' -t 'ScummVM for the GP32' $< $@
#					$(FXETOOL) -f -a 'The ScummVM Team' -t 'ScummVM for the GP32' -b scummvm.bmp $< $@

$(BIN): scummvm$(EXEEXT)
$(OBJCOPY) -O binary $< $@

#######################################################################
# Compile options - you can modify these to tweak ScummVM compilation #
#######################################################################

# Uncomment this to activate the MAD lib for compressed sound files
# DEFINES += -DUSE_MAD
# LIBS    += -lmad

# Uncomment this to activate the Ogg Vorbis lib for compressed sound files
# You MUST use Tremor for Ogg Vorbis support on the GP32 port.
# DEFINES += -DUSE_VORBIS
# LIBS    += -lvorbisfile -lvorbis

# Uncomment this to activate the ALSA lib for midi
# DEFINES += -DUSE_ALSA
# LIBS    += -lasound

# Uncomment this to cause warnings to be treated as errors
# CXXFLAGS+= -Werror

# Uncomment this to use GCC 3.x specific dependency tracking (recommended)
HAVE_GCC3 = 1

#######################################################################
# Control which modules are built - uncomment any to disable module   #
#######################################################################

DISABLE_SCALERS = 1
DISABLE_HQ_SCALERS = 1

#DISABLE_SCUMM = 1
#DISABLE_SCUMM_7_8 = 1
DISABLE_HE = 1
DISABLE_SIMON = 1
DISABLE_SKY = 1
DISABLE_QUEEN = 1


# The engines below are not supported on the GP32 port so there is
# no point compiling support into the binary.
DISABLE_SWORD1 = 1
DISABLE_SWORD2 = 1

# In-development engines below.
# Disable for ALL release builds.
DISABLE_SAGA = 1
DISABLE_KYRA = 1
DISABLE_GOB = 1

#######################################################################
# Misc stuff - you should normally never have to edit this            #
#######################################################################

EXECUTABLE := scummvm$(EXEEXT)

include Makefile.common

dist:
$(RM) $(ZIPFILE)
$(ZIP) $(ZIPFILE) $(DISTFILES)

install: $(FXE)
$(EXECUTE_TOOL) $(BIN)

svn-id: r20664
"
"81b820f7c96d9439d3a1bab5060e321c151c99e3","2006-02-13 10:29:25+00:00","Add hyperlink on/off functions of oracle in Feeble Files

svn-id: r20665
"
"6238fa2b297edab0c5a1f55fbdbca0b9e7880289","2006-02-13 12:57:06+00:00","We're in SVN now, so change version to '0.9.0svn'

svn-id: r20667
"
"1b459ee95976c36a4b4c46f32c8190377a1609f0","2006-02-13 13:46:38+00:00","Whew. It seems that I made a mistake last time. :(
Fix sound timer frequency for the GP32 port.

svn-id: r20668
"
"e067a7f288098d78fdd1067ab4ddfa24087b512a","2006-02-13 18:00:04+00:00","Implemented new tab drawing, should look nicer now. (The border under the active tab isn't drawn anymore)

svn-id: r20669
"
"75b6b4b9539a423905f70c96b3500de05e9a9221","2006-02-13 18:21:22+00:00","Fix compilation after engines moved to engines/

svn-id: r20670
"
"ce312f2fe5921a25b152c22ea38d47487850a30b","2006-02-13 19:59:05+00:00","Used tools/update-version.pl to update the version in all (?) relevant places to 0.9.0svn

svn-id: r20672
"
"1a1eff037ccca4d11715ebc02f68be6333e1aacf","2006-02-13 20:29:39+00:00","oops, didn't mean to commit this change (yet) -- reverting my previous commit partially

svn-id: r20673
"
"4863cf8aae1929eed5fa8b5b248e1fb48d20a288","2006-02-13 20:55:18+00:00","Updated application icons

svn-id: r20674
"
"d1c341ea617d19b0cd31ce28435179600524481b","2006-02-13 20:58:39+00:00","Updated installation file for S60V3

svn-id: r20675
"
"d91b49c15c187cd2cf67492fd31afc16d40eebca","2006-02-13 21:02:31+00:00","Added define to disable new theme support.

svn-id: r20676
"
"93e9639989690d0fae19c44df4f29624f74465d0","2006-02-14 01:19:30+00:00","Reworked kyra debug output system. Now he have special kyra intern debug levels + the global debug levels, for now I enable all kyra debug levels if the global debug level is not -1. see 'toggle_debug' in the kyra debugger and kyra.h for the different levels. (This is just the beginning of it anyway, for example the sound debug level isn't used for now)

svn-id: r20678
"
"e0b7feeaedbb9393025fef12e0d5390845c0890c","2006-02-14 01:59:32+00:00","Move addDefaultDirectory() calls out of init() method to constructor.

svn-id: r20679
"
"bef27ff14f1e1e20e01bd4f720bf536af1f1f989","2006-02-14 02:19:53+00:00","Fixed and cleaned up the X11 backend (and added 24/32 bpp support so it would actually run on my system).
Who knows, might actually be useful to someone :)

svn-id: r20681
"
"f750b32c02caca85cf1931b0ad3a26888f26aa01","2006-02-14 02:20:42+00:00","Forgot to add x11.h

svn-id: r20682
"
"072013c0f47f1a337aea7f865499460fe78c237b","2006-02-14 04:33:10+00:00","Added Bloodshed Dev-C++ project files to the dists collection.

svn-id: r20683
"
"de6aac4e2ff7a79506bcba10d4fe4ad618d4712a","2006-02-14 05:27:39+00:00","Add setSystemMessage opcode for HE70+ games. Sets the window caption correctly for all languages

svn-id: r20684
"
"9e8b493990efb9e67a35db3da8e9a5bf07345f88","2006-02-14 05:47:12+00:00","Add HE100 specific version of setSystemMessage opcode, since cases are different.

svn-id: r20685
"
"515a4ea3813bd41f0b0cce3c9c45673431641a1e","2006-02-14 05:50:29+00:00","Allow version string to be writen to config file in HE72+ games, in case we display version in the future.

svn-id: r20686
"
"d96713a8574dea95fc84f256d970cf78c913aaa6","2006-02-14 06:57:42+00:00","Correct case of SPY Fox game titles

svn-id: r20687
"
"b796860ee80c6a1d975b93ae1f95c76d9f60d8f3","2006-02-14 10:11:15+00:00","Add extra costume tables (Used by HE games) to saved game. Fixes weird actor states when restoring saved game, in HE games.

svn-id: r20689
"
"2bdbfa06692a7e57d1dbc03bf43be2b8c7df475b","2006-02-14 21:10:42+00:00","As far as I can tell, The Feeble Files should subtract _scrollX from the
sprite's X coordinate, just as we already do for Simon 2. (I believe that was
when scrolling rooms were first introduced.)

I've never played The Feeble Files (apart from the first two or three rooms)
so I can't say whether or not it uses scrolling rooms.

svn-id: r20693
"
"fc3cdbe5a9ff5feb4c765410d89b378fbf9daf68","2006-02-14 21:20:10+00:00","It looks like Feeble Files adjustis sprite coordinates by _scrollY as well,
where Simon 2 only adjusts by _scrollX. Perhaps Feeble Files have rooms that
scroll both horizontally and vertically?

Again, this makes no difference to the early stages of the game.

svn-id: r20694
"
"0bea9cf47b027ad8936751f48779046ca0a48bf9","2006-02-14 23:31:25+00:00","Made the kyra debug extensions more generic, i.e. scumm engine could replace
their debugC calls now with the new introduced debugC calls.
(A mail how to use it will follow shortly on -devel)
Also now these special engine debug flags can be specified from the commandline.
Also made the -c & --config parameter check more secure.

svn-id: r20695
"
"10c7835cfcdd8f0eb1eadf52ac9cfd39d2d6be61","2006-02-15 00:57:50+00:00","Moved all he-specific source files to engines/scumm/he/ subdirectory

svn-id: r20696
"
"b20384d375b8be36277935fa7d17bfcf17e9c287","2006-02-15 17:31:26+00:00","Fix for bug #795214 (MI1: Crash on church entry)

svn-id: r20697
"
"f8c14b19e461e3db3c6e413ac4be61a9e41258fa","2006-02-15 18:19:06+00:00","fixed version string in scummvm.rc, too (somehow forgot to check it in previously)

svn-id: r20700
"
"3f1a4fd6d2977f71be2a120ef4dd1738324018af","2006-02-15 18:26:34+00:00","Removed obsolete item from the tODO (engines moves has been DONE :-)

svn-id: r20701
"
"eba1653904bd0209f00fa02ea455f7d78c533905","2006-02-15 18:48:49+00:00","o Renamed script_v6he.cpp and script_v7he.cpp to script_v60he.cpp and
script_v70he.cpp respectively since we use 2 digits for HE versioning.

o Also renamed resource_v7he.* to resource_he.* because it is actually not
HE70-specific but is used by all HE70+ titles.

svn-id: r20703
"
"389e59d33114311bfc0edd323a1e932ae6c1bedf","2006-02-15 21:14:17+00:00","Fixed normal (1x) mode config (normal=default)

svn-id: r20707
"
"bcef7a167cd012c11eecdab91017b318a8b84fd8","2006-02-15 23:02:37+00:00","Read correct index by block size in HE games again, to help track down unknown versions.

svn-id: r20708
"
"e98555249e2cef4665dfb7f937f7fa08d1a40dd4","2006-02-15 23:04:48+00:00","Read correct index by block size in HE games again, to help track down unknown versions.

svn-id: r20709
"
"e259f526aee6b865dfd43679f11b72b743c0efb8","2006-02-15 23:23:54+00:00","Update documentation to list SVN now, instead of CVS.

svn-id: r20710
"
"dd23256b249f07f2633a75d4c488369964cdcb16","2006-02-15 23:27:53+00:00","Only print debug message when flag 0x800000 is triggered by HE games in drawWizPolygonTransform().

svn-id: r20711
"
"fa4f74ab735dea4d74dc3488384655c73aac0fb0","2006-02-16 04:52:10+00:00","Add 3DO platform for HE games

svn-id: r20713
"
"fbcecb98a14595394ed9e21bc224e4778adf0410","2006-02-16 05:01:06+00:00","Add 3DO platform for HE games

svn-id: r20714
"
"54babe81ceece041ccf1b15adb9696ace55788a7","2006-02-16 05:33:27+00:00","Fix mistake in last commit

svn-id: r20716
"
"e77fc9b9aa245fd0ff1ea19cd0bb510958aa93b6","2006-02-16 05:52:39+00:00","Clear sound queue when stopping sound channel in HE games

svn-id: r20718
"
"5f72260f201a6b63223a3cefb2829f91a9c11324","2006-02-16 05:55:44+00:00","Stop current music in HE60/61 games, before starting new music

svn-id: r20719
"
"448ea4f16e314e9204f21a18e5f9e114478c7e88","2006-02-16 06:00:46+00:00","Only DOS & Macintosh versions of HE60/61 games require XMIDI support

svn-id: r20720
"
"903daa72526b4f702681fcd9e1ed643214aa0692","2006-02-16 08:25:12+00:00","Send sound resource data directly to sound mixer in HE Games.\n Fixes songs in kitchen of Pajama Sam 1

svn-id: r20721
"
"37cc74db399861b82818ca335203d872204be064","2006-02-16 08:47:19+00:00","Use simplier method of checking sound status in HE60/61 games

svn-id: r20723
"
"4694e98649d5b149e7b439b5e6411e36538a355d","2006-02-16 08:55:06+00:00","Remove auto free flag for sounds in some HE games

svn-id: r20724
"
"6b557fabd5403355b2fe0dacacaf216b45281a7d","2006-02-16 12:04:12+00:00","force arg variable to float type, msvc8 can't select from float or double

svn-id: r20725
"
"a2bc3ef67cca71f828f15f78f39c0ed77c3c7122","2006-02-16 12:18:06+00:00","updated msvc8 files

svn-id: r20726
"
"d4e2b25e5d971eacc472f4ed1ff7efc50aeaa449","2006-02-16 13:45:52+00:00","Stop music in HE games, before nuking the resource

svn-id: r20727
"
"6e3686e4943c3797ea889a0d230f06481b4552f8","2006-02-16 16:39:45+00:00","For now, do not attempt to draw 'overlay' sprites, like the Oracle icon. The
good news is that the original function to draw these appears to be written in
C, so it should be easy to decipher.

The bad news is that I failed. :-)

svn-id: r20728
"
"200320c2376ed07941f7fad2abb05154f1c8eb38","2006-02-16 18:00:22+00:00","- Further extended the file format of tools/scumm-md5.txt: One can now specify
a variant ID, and the description field has been split into two parts.
- Updated the PHP output, removing duplicate information and hopefully
increasing the readability at the same time.

svn-id: r20729
"
"fbefbfc160ddaaecffa192b2784726f5677e73f3","2006-02-16 20:25:59+00:00","Updating more opcodes for Gob2

svn-id: r20731
"
"8b76033dc3cd09ab8b717fe8e4e41fa2de1bcc19","2006-02-16 21:50:14+00:00","added more asserts into imuse digi code

svn-id: r20733
"
"5c98378e84f9a3cdffde2f19e8105e24ed0f9d1a","2006-02-16 22:35:43+00:00","Cleanup drawing code for Feeble Files

svn-id: r20734
"
"c26af987c20955e6b2a3d97f9cc4e6aa6cb36bdd","2006-02-16 22:49:26+00:00","Fix overlay images not always been marked as compressed in the Feeble Files

svn-id: r20735
"
"405733e044e5ccb454d0b022a8b6eabaa757824d","2006-02-16 23:24:23+00:00","- Fixed a bug that prevented you from overriding the scaler from the command
line for 640x480 games.
- Updated NEWS file a bit

svn-id: r20736
"
"fde1da92f068f700d82774360dd6cd05c6c0adcc","2006-02-16 23:43:51+00:00","Whitespace fix.

svn-id: r20737
"
"a96760a2fdf32a1dc3c6cb44cfd247e4b1b3ab79","2006-02-17 00:01:18+00:00","Reduced use of GF_DEFAULT_TO_1X_SCALER in favor of a new param to Engine::initCommonGFX; added a TODO stating that it should eventually be removed completly

svn-id: r20738
"
"7967e30c731bdc21342ef10271578e2ac5b4e9bc","2006-02-17 00:22:53+00:00","Added global toGameSettings() template function for convenience; simplified GameSettings usage in some engines

svn-id: r20739
"
"bf79947a5be7f1ec9b0fab4391cce26678b593c1","2006-02-17 08:44:16+00:00","Removed lots of unneeded #includes from gob.h, and moved GobGameSettings to gob.cpp -> reduced header dependencies -> faster recompile when one of those headers is modified

svn-id: r20740
"
"002c587965e4d7e772d392d643504d3c0f081e1f","2006-02-17 15:07:36+00:00","Removed includes from sword2.h so that (hopefully) there will eventually be
less dependencies.

svn-id: r20741
"
"147c17989a354134ac2346fb500d8a7c469d750e","2006-02-17 15:15:29+00:00","This file was obsoleted by the previous commit, but I didn't want to force SVN
to remove it. Removed it now instead.

svn-id: r20742
"
"4ad0b867b3ba9696bcad7d6ae379e97c880376d1","2006-02-17 15:37:25+00:00","Reduced header dependencies

svn-id: r20743
"
"d13950dab2d5c0465f823e20fc8ab26b72b89ecc","2006-02-17 15:51:20+00:00","Fixed extra desc for a few MD5 table entries

svn-id: r20744
"
"81798556dbd38fb829557cbe6a04132cc5edf75c","2006-02-18 00:12:36+00:00","- Removed the 'features' field from GameSettings
- Removed GF_DEFAULT_TO_1X_SCALER

svn-id: r20747
"
"a757cab4167c878c5e27df424cd420d7f3c93d80","2006-02-18 00:36:45+00:00","Simplified use of namespaces

svn-id: r20748
"
"e13315928ba4dc55591cb978b642b8dd17da0798","2006-02-18 01:04:58+00:00","Enable gob2 detection

svn-id: r20749
"
"db5bd6e17eb90d35529650ab78783cce172c1c3c","2006-02-18 11:12:08+00:00","EditGameDialog only needs the game description, not the full GameSettings -> changing constructor accordingly

svn-id: r20750
"
"d0e637f7aa5c23ef66a4a5685bba8aecd58e14a7","2006-02-18 11:13:08+00:00","Grammar fix

svn-id: r20751
"
"8ac17430ac7aa3bba5630d74a1eeda54bce7801b","2006-02-18 11:15:37+00:00","- renamed PLUGIN_getSupportedGames to PLUGIN_gameIDList for consistency
- renamed Engine_XXX_gameList to Engine_XXX_gameList for consistency
- added new Engine_XXX_findGameID / PLUGIN_findGameID function
- updated plugins code to take advantage of the new plugin API, to support
obsolete gameids w/o showing them to the user

svn-id: r20752
"
"01fc7034b535e2dcc0526d5ac4d1ae4eae60459f","2006-02-18 12:50:48+00:00","- Merged GameDetector::detectGame() into GameDetector::detectMain()
- Replaced GameSettings GameDetector::_game by a simple gameid string

svn-id: r20753
"
"f2791f346bd5917fa3b039d26271a1a325b00730","2006-02-18 18:07:47+00:00","Updated Dev-C++ project files to reflect HE restructuring in scumm, along with simon and sword2 fileset changes.

svn-id: r20754
"
"441d0a89cca4fa8f262af46082ada13e06dfa234","2006-02-19 04:02:01+00:00","Changed the changed memset method to setBytes, which I like better

svn-id: r20756
"
"f868a59940a12a45dc34b0e0f5b8f666818a00fc","2006-02-19 04:04:07+00:00","Changed the menu subsystem to use getReference rather than being passed in the constructor

svn-id: r20757
"
"91d6bd57d71d4c21e2ab8fe06704322bdc282ac1","2006-02-19 04:05:45+00:00","Changed subsystem object create methods whose constructors I've switched to the newer getReference access

svn-id: r20758
"
"7ce5441ad65b68d870fe2fb91d8f7c20b75cbfd9","2006-02-19 04:07:11+00:00","Added new definitions used by the conversation subsystem

svn-id: r20759
"
"b55cf4b0ffcfbbc7a300549a478f9d5c03f01dbd","2006-02-19 04:08:41+00:00","Added new class for displaying conversation talk dialogs

svn-id: r20760
"
"3d0ada9443658d824c05fb7394b91f73a622fd69","2006-02-19 04:11:22+00:00","Implemented several more script engine methods

svn-id: r20761
"
"d525af4685185971ad701f3ded7e9fd534baba86","2006-02-19 04:13:08+00:00","Added display of talk dialogs during conversations

svn-id: r20762
"
"5d8d871df3edc79e313aa276da7756ceb437e4b7","2006-02-19 04:15:33+00:00","Added new resources for conversations, cleaned up existing class names, and expanded hotspot resources to add newly understood fields

svn-id: r20763
"
"d0fe9fdd795d54f0fb48dd89f967206d4357bdff","2006-02-19 04:17:54+00:00","Added handling for conversation data, as well as moved storing cursor data into it

svn-id: r20764
"
"8de9189ffed4eadc244bef55a17fee1c2c444a10","2006-02-19 04:19:09+00:00","Changed hotspot references to use updated hotspot methods

svn-id: r20765
"
"cf99c2092ddd3437c5508a63da0dbee521d57cfa","2006-02-19 04:20:18+00:00","Updated memory set method call to new name

svn-id: r20766
"
"9a653960c7fbab8b79702d8934888b48e05558e7","2006-02-19 04:22:00+00:00","Converted mouse and events classes to use new getReference style

svn-id: r20767
"
"9496df6f1bf48e16d70308ce7603f11c759e3df2","2006-02-19 04:25:28+00:00","Added basic support for conversations, as well as reworking the Hotspot class to allowing for non-hotspot animations like the floating talk icon during conversations

svn-id: r20768
"
"1cc03798d94065b886de16177a089f80fb5bf606","2006-02-19 04:29:26+00:00","Cleaned up the main game loop, improved handling for changing rooms, and improved click handling to properly support areas that override standard click handling, such as when having a conversation

svn-id: r20769
"
"85b9205f421710fbf13bda40dde0b3c73a8f17e8","2006-02-19 17:44:50+00:00","Fixed compiler warning

svn-id: r20773
"
"0c757abb72db6a5646f1718bc1ff08dc93755ef1","2006-02-19 18:32:48+00:00","- Added new extra_versions table -> work in progress and disabled for now.
- Refined information in scumm-md5.txt a bit
- Updated scumm-md5.h to reflect the changes in scumm-md5.txt
- Removed some unicode garbage from scumm.cpp

svn-id: r20774
"
"81ec4980a6f8371bb6fe3ed2116223c0347a8ff4","2006-02-19 19:04:22+00:00","Updated the (still unused) extra_versions table a bit

svn-id: r20776
"
"bb0f2eec5d24b616edc2c7bd69978d79f2d7598e","2006-02-19 19:05:31+00:00","Specify variant IDs for some HE games in scumm-md5.txt/.h

svn-id: r20777
"
"c17536823004d7235496132ea10a02718b525ecf","2006-02-19 19:21:52+00:00","Added more variant IDs for HE games

svn-id: r20778
"
"1fb19714e24c2a3e73e45d026d7c12ab3202a421","2006-02-19 23:25:27+00:00","added experimental hook handle on 8,9 sub opcode music

svn-id: r20779
"
"188cdf937d17c27ddd221178dcf9a0da7898b035","2006-02-20 13:09:39+00:00","Clarified that OSystem::setWindowCaption currently only supports ASCII captions

svn-id: r20780
"
"011bcc04d24dbd44086b849e271d70cdd5255e0b","2006-02-20 13:24:19+00:00","Disable unchecked use of OSystem::setWindowCaption from SCUMM/HE scripts (this fixes crashes under Mac OS X with e.g. german puttrace)

svn-id: r20782
"
"78c44df4394d3671f2853514022b31244bbcb17a","2006-02-20 13:26:40+00:00","More tweaks to the still unused extra_versions table

svn-id: r20783
"
"549eb83986a9991b963a6330fc51f7d563b3dc72","2006-02-20 14:01:49+00:00","Workaround for bug #1308033 (FOA: skips single line of dialogue)

svn-id: r20785
"
"d2cf43d6faa218276176c32c11b2c55263df5652","2006-02-20 14:12:59+00:00","Fixed warning when compiling with DISABLE_SCALERS

svn-id: r20786
"
"0712b468a35fa663578a31807da831a9fa67aafa","2006-02-20 14:18:30+00:00","Fix for bug #1428261 (Solaris x86 build fails: variable name collision)

svn-id: r20787
"
"12b0ac3a72abcfc52175f5d397f09058e736adac","2006-02-20 14:44:44+00:00","Removing the GF_HE_985 from HE 99 games (I only was able to verify that this is correct for the demos, but am confident enough to risk this change even for the full german version)

svn-id: r20788
"
"1bedb24dac533b29a46a9d6ee77423f26c6f1728","2006-02-20 14:48:32+00:00","Simplified puttrace entry in the (still unused) extra_versions table

svn-id: r20789
"
"7b28e4a4deec881ba55d07dc0a73c15cd861a7b3","2006-02-20 14:48:49+00:00","Updated scumm-md5 table a bit more

svn-id: r20790
"
"a24867339dc5cb3de47f108317ab8c871e643b46","2006-02-20 15:16:26+00:00","Fixed indention (spaces -> tabs)

svn-id: r20791
"
"d87e5d6094a46749169b9659a1f40864240ff266","2006-02-20 15:46:10+00:00","Added --enable-Werror option to our configure script

svn-id: r20792
"
"6176252117fccfbd315915b671a867550df6b4b5","2006-02-20 16:03:48+00:00","Use ptrdiff_t from stddef.h for our offsetof-clone (this should reduce warnings on e.g. the PS2, but may cause problems on systems that are missing this type/header. Please contact me if this causes problems on your port)

svn-id: r20793
"
"a6e5f6fd2cdb574e09fb3bd120b1e8efa034f0cb","2006-02-20 16:35:37+00:00","Added / corrected some comments, and moved ScummGameSettings to scumm.h

svn-id: r20794
"
"e389bcf497391cf4cde7d7b7a6f4023877205735","2006-02-20 16:51:30+00:00","Replaced _gameId, _version, _heversion, _features, _midi, _platform with a simple ScummGameSettings instance: _game

svn-id: r20795
"
"6160a17b3005353781143cd7cc475b112ad68f03","2006-02-20 17:01:30+00:00","Updated MD5 tables again, adding details to more HE game variants

svn-id: r20796
"
"7335d348ba43c1deaf5e97f222959de3d3e30cbc","2006-02-20 20:29:02+00:00","Moved common/scaler* to graphics/

svn-id: r20797
"
"e49e7ebb3fc87bd7cbff518342fc137cb96070ef","2006-02-20 20:40:12+00:00","Fixing up my previous commit: finished moving common/scaler* to graphics

svn-id: r20798
"
"130bee1b1eee1c393f5baaad97094a155a19b844","2006-02-20 20:41:13+00:00","Fixing compiler (cast) warning

svn-id: r20799
"
"9cec516e514ac76e7a3e69fdec16e79a2486c85f","2006-02-20 20:42:03+00:00","Moved fonts to a new dir graphics/fonts

svn-id: r20800
"
"81e8a2860ee066d6b863bf80bb99a592dec4cbe0","2006-02-20 20:57:26+00:00","Moved iMUSE code to the new directory engines/scumm/imuse/

svn-id: r20801
"
"4d6b3dd5f31963eb287c46ffd2f92bc774dbfdd9","2006-02-20 23:27:32+00:00","Add German version of Simon the Sorcerer 2 (DOS Floppy)

svn-id: r20803
"
"dd6b20702546a52e871df1eaeb2a752238437e24","2006-02-21 09:25:39+00:00","Improved layering of objects within rooms - for example, Ratpouch now properly shows up on the rack

svn-id: r20804
"
"c5cf806f8276786017bd69e61a2db1c014ec52ce","2006-02-21 10:22:37+00:00","Removed the 'extra bars/nodes' code, since nothing ever added the extra bars or
nodes.

Removed the path-plotting debugging code, since the line-drawing function has
been a stub for the past few years, as far as I can tell.

Similar code was removed from the BS2 router long ago, so this could be a first
tiny step towards bringing them together.

svn-id: r20805
"
"08a57f08376cffd5007f216917969bef48a343bb","2006-02-21 14:22:25+00:00","More GOB2 changes (Mult::loadMult()) + correcting some mistakes I made

svn-id: r20806
"
"6011d302c3b8f6670d63570bf5ec3db0fbb880fa","2006-02-21 16:15:07+00:00","Fix crash on floppy version of gob2

svn-id: r20807
"
"c50da10571e0e6c8fc8601eefef0238f3e5c3353","2006-02-21 16:16:56+00:00","Fix compiler error introduced by last commit.

svn-id: r20808
"
"fcd9c0905910ccb6485b3f16810acab944a48517","2006-02-21 21:59:37+00:00","Cleanup decompressWizImage() in HE games

svn-id: r20809
"
"53ce2ca464df49d1f8f425849b869bc08f583574","2006-02-22 12:05:19+00:00","Patch #1436165: 'configure fixes for Solaris compatibility'

svn-id: r20810
"
"56a8e34407f30cd787234688ae0ed942e9bac22c","2006-02-22 12:15:37+00:00","Fix bug #1435635: 'Windows icon does not have all the correct sizes' with
new file attached to the bugreport.

svn-id: r20811
"
"a467247e6ed972e0a13bf26af07811dda55bd69a","2006-02-22 13:26:13+00:00","Fix bug #1386333: 'FT DEMO: assertion triggered when playing movie'.

svn-id: r20812
"
"71c170bb136ab94d70eb10d55cfd897dc89c9682","2006-02-22 22:40:53+00:00","Initial version of Cinematique engine evo 1.

svn-id: r20813
"
"2570c498fcab8c0e0367af46c0eeb330c1e2c32b","2006-02-22 23:04:47+00:00","Added CINE plugin to PluginManager::loadPlugins() section

svn-id: r20814
"
"ed577e61d5a404fe27e3d3fcfed307740c1c05e5","2006-02-22 23:19:57+00:00","Fixed typo in configure script

svn-id: r20817
"
"43f2d984fb4f9549a033de2c7198a1b522512f6b","2006-02-23 07:45:51+00:00","Don't call exit() directly. Instead, use the backend's quit() method for normal
shutdown, and error() for abnormal termination.

svn-id: r20818
"
"725a9d21f904fd13c2e2727091ea4efc48921cdb","2006-02-23 07:59:25+00:00","Fixed some of the compiler warnings.

svn-id: r20819
"
"3fe8c971f275e7f2069033c4064859c5aad9e8cc","2006-02-23 09:12:21+00:00","Cleanup to remove duplicate type defines

svn-id: r20821
"
"fea271ed507aa7f16b00b9835f0467032bc520f7","2006-02-23 10:12:17+00:00","Changed mmp zip file for .in files

svn-id: r20822
"
"901edf5b338ff39ee242ff4ef484536263b14c94","2006-02-23 10:26:14+00:00","Fixed some more compiler warnings. Many still remain.

svn-id: r20823
"
"8fa8d10c3f82cf158b658e33279bc9db94276105","2006-02-23 10:35:33+00:00","Fix a few compile warnings.

svn-id: r20824
"
"c9d6277d27160bda4738be60d78c4e381a271dcb","2006-02-23 10:45:59+00:00","Update function type, to match last commit

svn-id: r20825
"
"26e0d95ef46c68794d8706c870e8a958b625cf4c","2006-02-23 11:05:58+00:00","Fix a few compile warnings.

svn-id: r20826
"
"f4c9c4f4d730e719360a468dc8d92c0266b0da9b","2006-02-23 11:29:37+00:00","Fix a few more compile warnings.

svn-id: r20827
"
"7b25fa0bd400a14d13d2926663b19277fb1f16eb","2006-02-23 14:52:07+00:00","In Feeble Files, mouse clicks are recorded in _bitArray[] as well. I was hoping
that this would make a difference for the Oracle, but apparently not.

svn-id: r20828
"
"11f348dd6c4e9b6eea3ba314debe4fd621202c07","2006-02-23 17:51:27+00:00","fixed warnings

svn-id: r20829
"
"bd28334650ad49b5bb6c6e2a187841690585d9d6","2006-02-23 17:56:54+00:00","updated msvc7 project files

svn-id: r20830
"
"bb03e035618801eaddf77490fac0388077a400f3","2006-02-23 18:11:22+00:00","fixed warnings for msvc7

svn-id: r20831
"
"934ac1b6af3fe34b010498d5a9e2318c9778ad84","2006-02-23 18:14:41+00:00","fixed error for msvc7, it didn't find func without Common namespace

svn-id: r20832
"
"51bcbd1c6a7333c1a9a068853572a0a696e57cdf","2006-02-23 18:17:27+00:00","updated msvc7 project files, it's really this time :)

svn-id: r20833
"
"9571aabc3941a938abbb3ddb4e588252b7e2e7df","2006-02-23 18:23:13+00:00","Reminder to update the NEWS file

svn-id: r20834
"
"e31b27176088c3215edf589ed90684abf2240b13","2006-02-23 18:47:28+00:00","formating code

svn-id: r20835
"
"6b50204eea70b14caf44aa88928da13f2401b635","2006-02-23 19:28:36+00:00","formating code

svn-id: r20836
"
"96838c8ca61a72c99f0459b92b4136542629d2d4","2006-02-23 20:02:46+00:00","formating code

svn-id: r20837
"
"36180ed017d8af4ae0173a9ebfabdb9c3bdc5e80","2006-02-23 22:38:16+00:00","I assume -1 and 0xFFFFFFFF are supposed to be the same value when assigned to
_lastHitArea3, so use -1 consistently.

svn-id: r20838
"
"6cf5d85e8e33263007f6f7a1b54f8410b8e8e8e6","2006-02-24 19:19:55+00:00","Fix redraw glitches when typing very long - enough to be truncated - strings.
It seems the only purpose of 'deltax' in this function was to introduce such
redrawing glitches. Weird...

svn-id: r20839
"
"0c91e91b44eaa82902b76522ed8a1340e89cbefe","2006-02-24 19:33:23+00:00","Cleanup

svn-id: r20840
"
"66b5b7b3f375c516dbd7629528596b1ac2ae8f38","2006-02-24 19:38:16+00:00","Cleanup.

svn-id: r20841
"
"2cb8832991eccd9c11c170375309b28e1f52ef33","2006-02-24 20:25:34+00:00","Fixed redraw glitch. Our editable widgets were asking the theme to draw a very
wide caret. Changed that width to 1.

svn-id: r20842
"
"4aaf6fec8d26f5f8a78c674b50464b3956d49002","2006-02-24 21:51:41+00:00","Turn off background caching for the graphics widget, so that the SCUMM
save/load dialog really cleans the thumbnail area when there is no thumbnail.

svn-id: r20843
"
"ca504aca4fc270b277297973a2ce459c998192c5","2006-02-24 21:58:03+00:00","Adding GOB2's CD handling opcodes, the CD version of GOB2 now starts
correctly; playMult() doesn't work yet, though

svn-id: r20844
"
"481094ada0537162e11bb4ffcc2c8cbaa4f4fcea","2006-02-24 22:34:22+00:00","cleanup

svn-id: r20846
"
"047298745f4e134a1b1f88d7c6ff824fd7a0dcdf","2006-02-24 22:36:55+00:00","added TRLE wiz masking (mostly untested)

svn-id: r20847
"
"1758260c39b454c46770e2f50cf40752d49f0073","2006-02-24 23:31:31+00:00","Changed debug()s to debugC()s

svn-id: r20848
"
"3064679e6cd613c48904e0d509c3549b8db77121","2006-02-24 23:39:40+00:00","Add corrections to copyWizImageWithMask() in HE games

svn-id: r20849
"
"4abfffe89b5036b125295987cab2d16de4dc96a6","2006-02-24 23:49:57+00:00","Add MSVC71 project files courtsey of Quietust

svn-id: r20850
"
"2fc23c85da1c69eb6a88fecf51f677bbeeca2b96","2006-02-25 00:26:14+00:00","Moved cine engine into namespace Cine

svn-id: r20851
"
"f39699517320cbccca7f2705c451efa60c781773","2006-02-25 00:33:12+00:00","Use static/const on data tables when possible (this helps the compiler to optimize things better)

svn-id: r20853
"
"d08dbb2a3c3fbd48a67c86eec73a8b7b7ede0f11","2006-02-25 00:35:36+00:00","More corrections to copyWizImageWithMask() in HE games

svn-id: r20854
"
"e35eb1dd2fef9b434c14cbfb4b4c04640a16f418","2006-02-25 00:42:26+00:00","Fix cine module.mk file (this fixed the dependencies system)

svn-id: r20855
"
"5ea3b8f9cd7e183e947187ffa62348b70bf6048d","2006-02-25 00:46:56+00:00","- avoid using typedef for structs (it is just not necessary in C++)
- added a const/static here and there
- started to reduce header dependencies

svn-id: r20856
"
"275344a9316251acefdba6053861ec13d812d813","2006-02-25 01:01:27+00:00","Reducing the header dependencies in cine a bit more

svn-id: r20857
"
"a0b7c01762ccb5e08b3586ffad9cf3203757398f","2006-02-25 01:02:07+00:00","Adjust masking in copyWizImageWithMask() to match ScummVM, wizImages masking works fine now

svn-id: r20858
"
"a30f82977349d0cecc83eac2166e1a6be2553fae","2006-02-25 01:18:01+00:00","Some more cine header cleanup

svn-id: r20859
"
"6931478e9180a23f9da02790ed2dd3ff503d3b2e","2006-02-25 01:24:10+00:00","Removed the (useless and confusing) PROTO_MKID_BE macro

svn-id: r20860
"
"6914121f6128092985a99a3d3af485f3bed265c3","2006-02-25 02:12:58+00:00","Replaced MKID by MID_BE in most places in the SCUMM engine

svn-id: r20862
"
"87fd6957acc6dd7c4b597b07685691adb2c95870","2006-02-25 02:22:17+00:00","Got rid of the 'tag' parameter for readResTypeList()

svn-id: r20864
"
"ee0f0a1f13bf22c706097d8a0254e6f7392cb95b","2006-02-25 02:31:49+00:00","Replaced some more MKIDs by MKID_BE; this then enabled me to remove ScummEngine::fileReadDword()

svn-id: r20865
"
"075dc8a538f2c3ea6efa68c3256a21a1a654ef42","2006-02-25 02:35:45+00:00","A typical example why MKID is dangerous: Kyra uses it incorrectly, thus savegames are not interchangable between BE and LE systems. Fixing this, by breaking all LE savegames (enabling a compatibility mode, if desired, is easy)

svn-id: r20866
"
"142bfeb35622af3c33bb70603a1926e884ad113d","2006-02-25 02:47:22+00:00","Some more MKID -> MKID_BE changes

svn-id: r20867
"
"f51dd597dd0bf534f8620a6cbc7bd0cc160ebdda","2006-02-25 10:16:46+00:00","Fix c&p mistake in adding DEBUG_PARSER debug level

svn-id: r20868
"
"e053cea9c003e70fbc3a7f83b79d87c0c05feecb","2006-02-25 10:24:52+00:00","Small loop adjustment to compile for VC6

svn-id: r20869
"
"ef195dab1703be9f9c620ea11acc27cdf02f218a","2006-02-25 10:29:56+00:00","New makescripts for Symbian OS

svn-id: r20870
"
"eef3ac0e73801774ee6b9fffc17849845d026ea8","2006-02-25 10:41:45+00:00","Updated name in script

svn-id: r20871
"
"1f987027f8f901e48f064cdc766064f4bf4b6fc9","2006-02-25 11:12:44+00:00","Removed last two uses of MKID

svn-id: r20872
"
"1c93f7bcead228faebc0c79bc31c038de8c26016","2006-02-25 11:45:56+00:00","Removed the obsolete MKID macro; added some doxygen comments, in particular for MKID_BE

svn-id: r20873
"
"7b9baa4f9f3677a1f6e1913dbefadc3d08c1cfac","2006-02-25 11:48:35+00:00","Cleanup decompress wizImage functions, to help find similar code

svn-id: r20874
"
"388a553f004ae23c065871f9e4681bebec57a1f4","2006-02-25 14:00:22+00:00","Put theme .ini out of .zip for better changes tracking.

svn-id: r20875
"
"c89aa846f01f452a49bc3f463de14998aa3b634d","2006-02-25 14:15:19+00:00","Add newline to the end of the file

svn-id: r20876
"
"48fb7ea97980861126cee3310cb013007aa9831a","2006-02-25 14:42:21+00:00","Fix bug #1436178 (ALL: int8_t in graphics/animation in conflict with ISO99 C)

svn-id: r20877
"
"a161b09728a9b90682d55aab347bb79212444134","2006-02-25 14:45:31+00:00","Moved dummy MIDI driver from backends/ to sound/ (this fixes bug #1435221)

svn-id: r20878
"
"2ae0f79de375527e30bef7e49839cacee770d8e9","2006-02-25 17:36:32+00:00","Split SCUMM's generateSubstResFileName into two functions: findSubstResFileName and applySubstResFileName

svn-id: r20879
"
"779028dcd2e01ff57333d03512e66676da4169d4","2006-02-25 18:16:24+00:00","Modified the workaround for bug #1407789 to not depend on MD5 detection

svn-id: r20880
"
"0364eeed5cbc11d74cc2fcbc54f800822b6f76ed","2006-02-25 18:16:40+00:00","cleanup (endianess fixes, fixed partBufferStruct structure)

svn-id: r20881
"
"05559c89f24e65fd1a2ee4092f1c84f8c50b9745","2006-02-25 18:24:22+00:00","Moved check for unknown MD5 checksum from ScummEngine::ScummEngine to Engine_SCUMM_create

svn-id: r20882
"
"bb4d4631385dbd9bec4dc67f9040878c92f41b26","2006-02-25 18:24:55+00:00","Fix compiler warning (wrong return type)

svn-id: r20883
"
"164f35b8788a43aaa3807ab9cc2c46f74e0a592d","2006-02-25 18:26:16+00:00","cleanup unpacking function and get rid of an old hack to prevent buffer overflows.

svn-id: r20884
"
"331110271bc559cd91a76080b244641cb82e9522","2006-02-25 19:20:51+00:00","Moved the plugin interface code of the SCUMM engine into a separate source file

svn-id: r20885
"
"544438b01e0827bb223f22276edc9fe1344735a7","2006-02-25 20:28:25+00:00","Prepare those files to be renamed as *.c

svn-id: r20886
"
"1d09fb169b45671e47586e9d0ed811212dd9ba74","2006-02-25 20:34:13+00:00","Rename those files so that:
- fucntions can also be used in C projects
- functions really replace same functions from MSL instead of having multiple definitions for C and C++

svn-id: r20887
"
"4c5d1a6b0e06709f7e5b6af63b2fc95d6078db7b","2006-02-25 20:36:23+00:00","Improved patch for bug #1436165 (no more warnings from GNU tail about outdated parameters)

svn-id: r20888
"
"302fdf484bd81659a79c421a44384fd0aeb4d52b","2006-02-25 20:47:54+00:00","Added 3DO platform and CinE engine

svn-id: r20889
"
"b558663e849312c7f548c181c8fe2e5b57da39e4","2006-02-25 20:50:10+00:00","Remove obsolete var, now we have only one checkbox for sound and music

svn-id: r20890
"
"ba6c48583c284db946b3395d485a1e0429af061e","2006-02-25 20:54:01+00:00","- Added 3DO platform
- talkSpeed and copryprotection are now global to all engines
- Fixed music and sound configuration

svn-id: r20891
"
"cbfec0d542db9ce428c9dbcc4fa68dc8eb14a853","2006-02-25 20:55:24+00:00","Added CinE engine

svn-id: r20892
"
"531eacb9bc07e1af91dc22c1e3cfa4aadc781a87","2006-02-25 20:58:55+00:00","Fixed compilation

svn-id: r20893
"
"2cef4d1a6eff27039b790f9c302eebe366454aca","2006-02-25 21:01:08+00:00","Fixed compilation

svn-id: r20894
"
"71a2aedb91541298d2986bf1f9cd74ce54555523","2006-02-25 21:01:42+00:00","Will use mpeg2

svn-id: r20895
"
"a8b06a52148e121d69ac6fe6f91ff81994f3fb2b","2006-02-25 21:15:28+00:00","Update properties and keywords

svn-id: r20896
"
"1d9693f35b03ca5ecc85de3d6af87ea64c1b2c9c","2006-02-25 21:25:09+00:00","Correct name

svn-id: r20897
"
"a76e3bab2fc5f69eebedf5aa883050bfccc82353","2006-02-25 21:36:19+00:00","Remove the dummy index 0 entry from substResFileNameTable

svn-id: r20898
"
"0cb17f18b3c23653e693f20b6e591accf29ac76c","2006-02-25 21:43:23+00:00","Cleanup, forgot to mention that these files are ARM (Zodiac and OS5) startup code

svn-id: r20899
"
"76962c3ce68dc04791cb85ef3c9544c95fd00fc6","2006-02-26 00:32:10+00:00","Change debugInput opcode result to zerod array for now, since it expects input string

svn-id: r20901
"
"06e02f60102fd4e41a4e4ff713be25cb4fbc083c","2006-02-26 01:25:27+00:00","stop playing a sample before deleting the sample data

svn-id: r20902
"
"bd2a59787b86f76d8cbc6272bcda7f69fa179bc5","2006-02-26 02:23:59+00:00","That change shouldn't have been commited

svn-id: r20903
"
"a3faba9727a5a3d43f2c6d08dc36d3bcd4f538f9","2006-02-26 03:03:59+00:00","Fix bug #1349059: 'SCUMM, GUI: Cursor jumps to incorrect position when pausing'

svn-id: r20904
"
"0f60eaa16646655bbd4493dea52477c60ad05ccb","2006-02-26 05:48:40+00:00","Move debug mode setting to initScummVars(), so it is reset when game is restarted

svn-id: r20905
"
"270a16b37bf02a9537b0a1c619175db55e3eb3d1","2006-02-26 06:15:13+00:00","Camera variables are initialised on startup by COMI too

svn-id: r20906
"
"a5cb12089855fc4b3c5f2770a4379612ffc83717","2006-02-26 06:55:56+00:00","COMI uses a separate setting for the verb charset, verbs use correct charset now

svn-id: r20907
"
"73af2a69384374ade9c0552d29cea9803db235bf","2006-02-26 07:49:11+00:00","Remove roomOps cases which are never used by COMI scripts

svn-id: r20908
"
"45e72e7e60883842aaab93ca6e08ba477368d01b","2006-02-26 12:32:07+00:00","DIA functions required by T3

svn-id: r20909
"
"382ed2bd68c69234aeda1d79d25bcfe39fae2b3d","2006-02-26 12:44:42+00:00","Updated global data builder for 68k version, this part will be fully revamped as soon as the 68k version is ready

svn-id: r20910
"
"0a898d14331b7c896f4fc43d54942e21e388db59","2006-02-26 12:52:34+00:00","Use correct include and event function

svn-id: r20911
"
"686d463defce92fafd8eb80c1230da5dd90d48f7","2006-02-26 13:02:25+00:00","Added delays to the waitForRelease() and waitForPress() busy-wait loops.

svn-id: r20912
"
"b568df4de6b7995f5778905250c73528fa43b489","2006-02-26 13:02:34+00:00","Missing prefix files for 68k engines

svn-id: r20913
"
"f13d294ae5e12a5906cf6088f5bc309d51192a9c","2006-02-26 13:43:50+00:00","Cleaned up my earlier 'delay in busy-wait loop' commit, and added a similar
delay to PopupMenu::Show().

svn-id: r20914
"
"8acefe1804cb369c9d15f50b1e63b216bae502a9","2006-02-26 14:31:44+00:00","The warpMouse() function needs to compensate for aspect-ratio correction, or
the Lure popup menus won't work.

svn-id: r20915
"
"cd34af1149b653f68ff524f601a50827399872b6","2006-02-26 15:20:01+00:00","Scumm md5 struct for 68k version

svn-id: r20916
"
"d6170c87c46e7f622918e769ae2edacb792ab538","2006-02-26 15:21:21+00:00","Use the correct function depending on the version

svn-id: r20917
"
"094382a6d0053078851ab42ca3aabd5ac350df48","2006-02-26 15:24:11+00:00","With the added delay to the popup menu loop, it's much more likely that each
iteration will see several events, so pop all events from the queue each time.
Of course, we still only need to check the mouse position once. Warp the mouse
back to neutral even if we're trying to go past the first/last menu entry.

svn-id: r20918
"
"2cc27ebe8927d6936d866b8c654b9c1ddae9e869","2006-02-26 15:25:34+00:00","Aeroplayer CD driver

svn-id: r20919
"
"9552b5b5514162ba02cf09550cce42eace172c6d","2006-02-26 15:32:16+00:00","Prefix file for OS5 ARM modules

svn-id: r20920
"
"9ce196c03ca556a1c1d30b3137012923bcb68baf","2006-02-26 15:32:40+00:00","Prefix file for Zodiac ARM modules

svn-id: r20921
"
"8a75385bfa04531079ecf28b189e277cb25da255","2006-02-26 15:33:47+00:00","Prefix file for BS2 68k module, for debug purpose only

svn-id: r20922
"
"0b54f579f6a29ab20016ddf5e2e704d3da94cf6e","2006-02-26 15:37:17+00:00","Move prefix files to a new prefixes/ directory

svn-id: r20923
"
"28d9f0add919590f4a0bd503ff8d6c7b48c1b382","2006-02-26 15:43:33+00:00","Gather prefix files to a new directory, rename 68k prefix files

svn-id: r20924
"
"007da18616934bf24614a803f5cb838fdf539d02","2006-02-26 15:50:52+00:00","Gather prefix files to a new directory and rename ARM prefix files

svn-id: r20925
"
"3427e06732019ff1fda68d86744a65c931c9f5f4","2006-02-26 15:58:02+00:00","This file has been renamed

svn-id: r20926
"
"3e6d6d070759e59339577fcd2a892806242d3efa","2006-02-26 16:02:23+00:00","Fixed compilation, ByteSwap not found because endianutils was removed from pace.h

svn-id: r20927
"
"c3b41a2aa6bdbb9b29f265078f39805a0f7865fc","2006-02-26 16:30:21+00:00","Move launcher files to a new folder

svn-id: r20928
"
"c26cd4b315aca0af9ec7c6c7a30f6850a3763b4e","2006-02-26 16:32:06+00:00","Obsolete, this is an old file previously used with 68k+ARM version

svn-id: r20929
"
"1e5c57dade8d85413d94b7ac7608ae4783def6f8","2006-02-26 16:36:30+00:00","Move launcher files to a new folder

svn-id: r20930
"
"2ef4f1fea2c04092e512fabc80aff2eced31c69d","2006-02-26 16:36:51+00:00","Move launcher files to a new folder

svn-id: r20931
"
"a32de4c34cd6f5980124f42b4bf6f7bc40ee8585","2006-02-26 16:51:41+00:00","New modules resources

svn-id: r20932
"
"ae964bfe13fa69f733f650eee9d9ac631fb7b334","2006-02-26 16:55:35+00:00","Updated with lastest changes to the launcher

svn-id: r20933
"
"121a93307397a5bd4b1847b477fa74d40a19bc13","2006-02-26 16:59:28+00:00","New files including moved getFeatures and VG helper

svn-id: r20934
"
"871fe237cc0a0a2227347f7d34c881c26a307d96","2006-02-26 17:02:38+00:00","Fixed compilation, this is a 68k part only and will be updated as soon as the 68k backend is ready

svn-id: r20935
"
"2a5872ace3fc6d5507082844c33d786cb0e8f3e6","2006-02-26 17:04:28+00:00","Fixed header

svn-id: r20937
"
"b94c6bbc6296f66ff30db2bd1386b98921b6cf4c","2006-02-26 17:06:48+00:00","PalmOS project file. Everything is now up to date

svn-id: r20938
"
"0ff49cfb766b716461ad57afa501a98ccfe87424","2006-02-26 17:25:37+00:00","Added scumm/plugin.cpp and .h files

svn-id: r20939
"
"d075463c0ac6c01017a4cc16622d53dad0b655fb","2006-02-26 18:09:06+00:00","Updated Bloodshed Dev-C++ project files to reflect new cine engine, scumm and scummv file rearrangements, and gob tweaks. Further refinement to the SVN properties on impacted project files.

svn-id: r20941
"
"fbf557cf902373582844d9e63731f768cc26ebac","2006-02-26 21:13:08+00:00","Added USE_ZLIB define and Zlib library reference to Bloodshed Dev-C++ project, for proper theme handling.

svn-id: r20946
"
"dc75adbb2513ae502577d17f130e19d12a44fc13","2006-02-26 21:36:33+00:00","Initial add of the Lure of the Temptress disassembly

svn-id: r20947
"
"90c916de4be8aa44226d826ad3d40f8a0c0e3e3e","2006-02-26 21:52:49+00:00","Do not compute the MD5 checksum if an override for it is set

svn-id: r20948
"
"52970c9936f82c727eecbd8e64a8a162e3ca4ec2","2006-02-26 21:59:44+00:00","Cleanup

svn-id: r20949
"
"52d55bf976770ef2f0bc6cd8680978f28521dc2e","2006-02-26 22:23:29+00:00","Removed deprecated IMUSE_DEBUG #define in favor of debugC calls using the runtime-selectable DEBUG_IMUSE category.

svn-id: r20950
"
"2d2258f5965e0987f61b7667ab248965e770ac93","2006-02-27 00:01:29+00:00","clear ALSA event structure before use

svn-id: r20951
"
"2469e00248423b7d0a8595d0870818c6ebfb40cf","2006-02-27 01:59:07+00:00","SysEx data now passed around with const pointers. Permits simplification of some SysEx client code.

Testing on Windows. Developers on other platforms, please verify integrity of music handling in your respective MidiDrivers.

svn-id: r20952
"
"278d0de0121ddd7163fb1b14d9a0638bbe38fff8","2006-02-27 07:18:49+00:00","Fixed compilation.

svn-id: r20953
"
"fa6821df14d40a6d39baec45bb40f12e5b8f5f2d","2006-02-27 09:42:57+00:00","Added CINE and LURE to build information

svn-id: r20954
"
"be30d257e30eed665cffa7776e788d72468888c4","2006-02-27 12:00:10+00:00","Charset 0 is loaded on start in original versions of OLD_BUNDLE games too

svn-id: r20955
"
"deecb616565e549bfea6d5695461806799b9e622","2006-02-27 12:23:34+00:00","Use _numStrips when checking for foreced sprite redraw, instead of set values.

svn-id: r20956
"
"9c807704118a8e48d7874847d61aaf123e1deb96","2006-02-27 21:25:59+00:00","cleanup

svn-id: r20957
"
"0f5ef6f5b1a87003c819f480933d07a15e38d79b","2006-02-27 21:55:18+00:00","Get rid of the SO_WAIT_FOR_TURN hack for TheDig as the original interpreter didn't do anything special here. This will probably trigger some 'invalid actor' errors, but those are most likely caused by scripting mistakes... which should be worked around separately.

svn-id: r20958
"
"1b1bc9cde4071ceda6531f0d12c7cbf9be77b582","2006-02-27 22:15:21+00:00","Revert the 'get rid of SO_WAIT_FOR_TURN workaround' commit but keep it specific to TheDig

svn-id: r20959
"
"f3106feaf524d065eb495b9bd423011171623fcb","2006-02-27 22:39:55+00:00","Added WIP Adlib sound playing code to kyra.
It needs some checks since it doesn't work correctly in every case at the moment.

svn-id: r20960
"
"86c913a5f4770b839c9774648bc8fee305091e54","2006-02-27 23:25:07+00:00","Update comment for SO_WAIT_FOR_TURN workaround in The Dig, this is due to script bugs. SO_WAIT_FOR_TURN is never used by FT r COMI either, so remove game check.

svn-id: r20962
"
"d0bba4cb56e3589ad91f2c48c6f6c1262e7443bb","2006-02-27 23:32:59+00:00","Typo.

svn-id: r20963
"
"2bcd6bb95e26d1f15b560133fff49e2255bfd94d","2006-02-27 23:41:27+00:00","Fixes hangs in the 'Pool of Sorrow' scene (at least I don't get them anymore).

svn-id: r20964
"
"db925b310eafeb1c401d12eb1a1f6659a44b2e47","2006-02-28 00:46:05+00:00","Update code and comment for screen savers issue in Sam & Max.

svn-id: r20965
"
"e1d96cba8757aaf74e85ca2bbbebe4e1adcb3a6d","2006-02-28 00:49:54+00:00","Typo.

svn-id: r20966
"
"41e7bb67e4fa57e42c36975f3393a34a12afbed0","2006-02-28 01:14:02+00:00","These zakTowns specific changes aren't explained and don't match original code. If problems still occur, add bug reports with details.

svn-id: r20967
"
"005861cb1431c5521160112fee3ba00033fa352b","2006-02-28 08:49:51+00:00","This may be needless paranoia, but I always get nervous about order of
evaluation when there are multiple side-effects on the same variable (in this
case the internal state modified by va_arg()) in the same expression. So let's
just humor me and do the va_arg() calls one at a time.

svn-id: r20970
"
"f03958be01aa2b3e671afcb4c470b72d4159b07e","2006-02-28 09:54:09+00:00","Removed unnecessary line.

svn-id: r20971
"
"6ee443f316992fc7c784311360e582185be55ae6","2006-02-28 15:44:39+00:00","Added some basic comments, along with some very, very minor cleanup.

svn-id: r20972
"
"1e2aa59bcbc5d913eb3db92c4026a1f6618b2228","2006-02-28 17:02:14+00:00","Added lock() and unlock() again to readBuffer.
Implemented stateCallback1_1.
Fix some small bugs here and there (can't say what the fixed but it should be correct now)
Also set's the correct timer call value (with the other the music was too fast)

svn-id: r20973
"
"0b0848e34c647ac9208467f2118b8bae21db271f","2006-02-28 18:59:15+00:00","Update buildfiles with CINE settings

svn-id: r20974
"
"e4ac92c2afcabfe2099d23d02ef3fccdf14a74db","2006-02-28 22:20:13+00:00","updated some bugs/issues comments and removed wrong 'FIXME' markers.

svn-id: r20975
"
"2892e33f1dc55bc53c8d12827ee9e4ee9c078402","2006-02-28 23:02:15+00:00","Add comment to workaround for music in Sam & Max, based on commit log. And limit the workaround to specific game.

svn-id: r20976
"
"d5710033a005db1e875d79f85589efafd9625515","2006-03-01 01:17:40+00:00","Update string array table for SCUMM7

svn-id: r20979
"
"0a3b58ff2a526b3fb3015b0f75f0f8ebdd54dfe8","2006-03-01 04:32:44+00:00","Update string array tables and use for all possible games and strings

svn-id: r20980
"
"68f289398e870730e65541044f49092a982461ba","2006-03-01 05:00:25+00:00","Remove HE specific string array from SCUMM6 table, since the value is different in some games

svn-id: r20982
"
"90cbe402b2efbb9e9bcdc64e9262738ef2623a2c","2006-03-01 06:56:53+00:00","Minor cleanup and comments.

svn-id: r20983
"
"55739f1715fee58b2dbf3ba82198daad239c9a23","2006-03-01 07:21:51+00:00","Cleaned up updateCallback35() and renamed it setAMDepth(). It looks like the
_unkOutputByte2 variable is there to keep track of the current value of the
BD register (AM Depth / Vibrato Depth / Rhythm)

svn-id: r20984
"
"3a38721d028a2a2e738fb806fc22fc36863a0a3d","2006-03-01 07:27:35+00:00","Cleaned up updateCallback36() and renamed it setVibratoDepth().

svn-id: r20985
"
"272a19cf5bdb722507b72a1ce380f64dbc974963","2006-03-01 08:06:54+00:00","Use signed integers for jump offsets, so that the jump opcodes can jump both
forward and backward. This seems to fix the looping of the Black forest music
(and probably others as well), and might fix the invalid pointer crashes and
wrong music that would sometimes play after a song had finished. Changed the
names of the jump opcode functions, and added 'update_' prefixes to the
previously cleaned-up opcode functions.

svn-id: r20986
"
"5734717f8e2175e1d449b734317c276847bea3a4","2006-03-01 08:13:38+00:00","Renamed 'unk9' to a slightly more descriptive 'repeatCounter'. (I should have
done that in the previous commit.)

svn-id: r20987
"
"9255a7b408ba28c1689c7beaaf48fbcbf2119a44","2006-03-01 12:50:42+00:00","Updated buildfile for new file structure

svn-id: r20989
"
"8a60a991404420fc67fe850284bb5b1a68ba2c4b","2006-03-01 13:57:32+00:00","Fixed updateCallback11() according to LordHoto's directions, and renamed it
update_writeAdlib(). (The 'update_' prefix will probably be changed later, but
for now I want it to remain obvious that the functions belong to the other
updateCallback*() functions.)

svn-id: r20990
"
"0653d509d38f096ca6cc177f80f935d398bc0134","2006-03-01 14:20:40+00:00","Updated datatypes to resolve ambiguity

svn-id: r20991
"
"730eaf2dca0f513516cd4ef07b5cbb5b38d647ed","2006-03-01 16:44:32+00:00","Added debug calls to the adlib functions, also uses mixer samplerate now.
Fixed a bug in updateCallback41.

svn-id: r20992
"
"ce63f2bc38ada593b24172a0cf6a59b263941c4e","2006-03-01 18:18:16+00:00","Oops forgot to enable music again.

svn-id: r20993
"
"9a9475169da1f25e85791481d07d92ac872c22ba","2006-03-01 20:07:33+00:00","added 2 SCUMM vars for v1/v2.

svn-id: r20994
"
"d1e1f7cb5b637c76b25976bcdf3518396813d7b0","2006-03-01 21:37:00+00:00","Fix for Symbian to close an open file in the right thread

svn-id: r20996
"
"8f76068148ca9413494b8b3a3ab534882bfe55a8","2006-03-01 22:36:53+00:00","Fix compile

svn-id: r20997
"
"7f8a8b7ffbdccd77fd9d54ecb392777c4746cd0c","2006-03-01 22:50:16+00:00","Initialize new SCUMM vars for V1/2

svn-id: r20998
"
"c01ef102aff7661528b1a68e6e024bf7d69211d6","2006-03-02 00:50:52+00:00","Breaking cine, in the hopes that somebody will fix this obviously totally bogus code (even if that fix just means uncommenting it :)

svn-id: r20999
"
"fd8f11f7a452ae18d5e00f58430cc33bc5a48fed","2006-03-02 01:17:41+00:00","Improve input in C64 maniac

svn-id: r21000
"
"e3a48bf276b900ccfa450cf0556ece11f7b5a8d8","2006-03-02 02:10:54+00:00","Fix actor glitches in C64 maniac and minor cleanup

svn-id: r21001
"
"2584f0d69f664d67cdf53bfcfe460765d5710435","2006-03-02 03:31:45+00:00","Add difference in bitVars opcodes in C64 maniac

svn-id: r21002
"
"2c9f04117899098ef1347421bbe937d7ac486b49","2006-03-02 05:04:40+00:00","Fix inventory display in C64 maniac

svn-id: r21003
"
"64ce4d6dd731ffa5556e76bbe37c5d5ec181e90e","2006-03-02 06:06:24+00:00","C64 maniac uses separate bitmasks for actor settings and misc settings

svn-id: r21004
"
"fec05d5180d3bc7f9bfa1efa9fd0cf734176605c","2006-03-02 06:33:15+00:00","Typos

svn-id: r21005
"
"f4f8a9263ab5143423320c0f0645b22aee0cf50c","2006-03-02 09:34:48+00:00","Yet another patch for bug #1407789 (FT: Invalid Actor when 'Combining' Two Items)

svn-id: r21006
"
"949057f790b658d64fd08ded268818a4f888631b","2006-03-02 10:31:11+00:00","Add sentence line to C64 maniac

svn-id: r21007
"
"6e0a0d30ea0c292aefdc4798bff38c85991fff8f","2006-03-02 10:40:55+00:00","Update of MSVC71 project files from Quietust

svn-id: r21008
"
"dad7ee3e2ff5112112757074ac99ec14f2be0d5d","2006-03-02 10:52:27+00:00","Add PACK macros to structs for it to work on all platforms

svn-id: r21009
"
"f00809788b7c261598a1d1a2a0952256217fe456","2006-03-02 12:09:19+00:00","Changed cast from int to int32, to use platform specified typedefs for the type.

svn-id: r21010
"
"82a6f289de971fe051c2e944007dbb4d53aa492f","2006-03-02 12:14:06+00:00","Fix using items in C64 maniac and cleanup

svn-id: r21011
"
"491cbcec5b88e7cb9fb9da901ee64a7b3cec73fd","2006-03-02 16:14:46+00:00","Changed timeing related variables to unsigned.
Also changed the callback interval.

svn-id: r21012
"
"55898dfe61b6480a615803f3d432d105af874bfc","2006-03-02 18:25:56+00:00","apply CYX mem-leak fix patch

svn-id: r21013
"
"2d464787c1b067268172b2ebdee0941aa0358151","2006-03-02 20:08:41+00:00","fixed compilation.

svn-id: r21014
"
"e530bb5652beab86a73867977a2a1f5e7535cc44","2006-03-02 20:33:28+00:00","fix compile error

svn-id: r21015
"
"1ef22b315fb01026b3ce87c6b2acaee797c513c9","2006-03-02 21:27:09+00:00","Lure - started work on disassembling player walking

svn-id: r21016
"
"907bd7128dde715b35b8d93c26e6f6ebcae77c05","2006-03-02 22:29:01+00:00","Fix for bug #1438822 (Targets are case sensitive)

svn-id: r21017
"
"7423394bddd3e00177fb43819dc5da22e49de682","2006-03-02 23:31:28+00:00","Use sound types for sound in HE Games

svn-id: r21018
"
"ab0cf121c992732720c325db96114592534f1ca2","2006-03-03 00:45:27+00:00","Always use music sound type, for music in 3DO versions of HE games

svn-id: r21019
"
"ab16d5d67760931d0be14f7720ac7fbf7f79ed1d","2006-03-03 02:04:58+00:00","Cleanup costume renderer for C64 manac

svn-id: r21020
"
"91a7d38f5902cef82a51120c862bf75b8b20022a","2006-03-03 02:49:41+00:00","Updated Bloodshed Dev-C++ project file for kyra to add new sound_adlib.cpp file.

svn-id: r21021
"
"e37f85d07999348a4f1aa00a73182ea4bf42865c","2006-03-03 02:51:11+00:00","Added MT-32 device-specific reset on shutdown. Rearranged MT-32 initialization sequence to give the ScummVM welcome message a better chance of showing up on the LCD panel.

svn-id: r21022
"
"09543f873e08cef03755add1910d30e1c12f7370","2006-03-03 06:25:59+00:00","DOS versions of HE games sounds like Roland music too

svn-id: r21023
"
"0b30043f93c6822e2077e03caab4d13c789d9eda","2006-03-03 07:40:34+00:00","Read array bounds in checkArrayLimits() correctly on all systems

svn-id: r21024
"
"ef564119ed0f61554be6c6f765180906d6b74ba1","2006-03-03 13:50:11+00:00","Update opcodes in C64 maniac, fixes not been chased when caught in house

svn-id: r21029
"
"5e1f3fa2fa16a553af06ba0af46a7e852ef24c4d","2006-03-03 14:29:28+00:00","Fix bug #1439279: 'SCUMM: SubstResFileNames partial breakage'

svn-id: r21034
"
"5d3ef6aec29b9cd8e8d7172150618d416d2cb29a","2006-03-03 14:44:50+00:00","String constants are const -> fixing compiler warnings

svn-id: r21036
"
"6ff8d3b9fd1bfe826bdbf2d3397ca92ca30b95f6","2006-03-03 14:55:04+00:00","Turn _file member of BundleMgr into a pointer

svn-id: r21037
"
"bac32d1a5cf66f349e2cca106686047d43e6839e","2006-03-03 15:16:02+00:00","Moved ScummFile etc. to the new file.cpp / file.h

svn-id: r21038
"
"a1a6967d76fc3cc8d43b2994d24a2b16a8192277","2006-03-03 15:27:33+00:00","Partial fix for Bug 1088045. Additional configuration of Part parameters in response to iMuse SysEx command 0. Addresses Parts 2, 3 and 4 of the bug. (Part 4 not yet verified against referenced bug manifestation; awaiting testcase savegame.)

svn-id: r21039
"
"a836a83d84b26fd75fab7637641f77334b5e6827","2006-03-03 15:36:12+00:00","Explain the (admittedly strange) usage of some of our makeXXXStream factory functions

svn-id: r21040
"
"ed293e84d4f1dba20cc98d682413e78b4cf62661","2006-03-03 15:38:54+00:00","Added two TODOs

svn-id: r21041
"
"5833b3b0aafb87cc3a278011e2bf3f5f6e02ee22","2006-03-03 15:46:39+00:00","It's really 'MPEG', not 'Mpeg'

svn-id: r21042
"
"140f6fce26ae3b710c5d37bcc4d08b6690a5d669","2006-03-03 15:51:33+00:00","Hiding the implementation of ADPCMInputStream from the public, in favor of a factory function (just like with the other AudioStream subclasses)

svn-id: r21043
"
"245ed83c2aaa1e4b9a7f0772e63729290c76a96b","2006-03-03 15:55:09+00:00","Yet another TODO

svn-id: r21044
"
"76a4bf9e770a6101592b7adcc1c340d091a98643","2006-03-03 19:38:17+00:00","Eliminate flip_support.cpp file.

svn-id: r21045
"
"bd7d05dae60578c68183fa591974f010a578b2b3","2006-03-03 23:52:48+00:00","Update opcodes for C64 maniac

svn-id: r21051
"
"233c2a42f91b227163e8f96291964116bc64a762","2006-03-04 01:32:04+00:00","WIP of maemo port

svn-id: r21055
"
"ccbe4ebf923d0b45eb7d5d4f3540ae8a9a90f127","2006-03-04 01:47:40+00:00","Update SVN tags

svn-id: r21056
"
"2cf16b0d14846840dd9b69f2ce979240833e37ae","2006-03-04 04:29:38+00:00","Add correct md5 for second version of Simon the Sorcerer 2 patched to Russian

svn-id: r21057
"
"28b6c9250303da10ca4a764cc25b5a885db4ac6d","2006-03-04 04:46:15+00:00","Update hack for bug #915575 - MANIAC: Disappearing New Kid verb

svn-id: r21058
"
"16a8c60483993f6391c2177c7f01f3bc5ec11cfa","2006-03-04 05:44:48+00:00","Add/Update string var tables for COMI and The Dig, to allow translated strings

svn-id: r21059
"
"6c691283deb112175ab4fcc3323805e80522153d","2006-03-04 09:24:51+00:00","Patch #1434866 (Allow (again) the generation of deb pack.from current svn). Note: This does not imply endorsement of .deb building support, only that I hate letting working patches untended :-)

svn-id: r21060
"
"bea9b5e7d05017fd0018e87ffb206357adcc430f","2006-03-04 09:40:45+00:00","Added GFX transaction rollbacks in the SDL backend to the TODO list

svn-id: r21061
"
"bb38ea2c17bc9f0de8f674db6a11f0c7af2c5ac7","2006-03-04 10:38:05+00:00","Renamed SubstResFileNames::winName and macName to almostGameID / expandedName (the old names were misleading; the new ones aren't great either :)

svn-id: r21062
"
"5e881c158a10a4d272f2af3f0927df0db6da25ad","2006-03-04 10:41:40+00:00","This particular case in ScummEngine::openRoom only occurs for V4 games; changing the check accordingly, to ease future refactoring

svn-id: r21063
"
"a3069bbc1aa80a5482d06cf5c42379d75e968053","2006-03-04 10:46:11+00:00","Since findSubstResFileName / applySubstResFileName only compare up to the first '.', we should be able to safely remove anything after the '.' in all substResFileNameTable entries (I am leaving the 00.LFL names untouched for now, for clarity)

svn-id: r21064
"
"78985cc8a642a8b0780232e5c6a9237329e542ab","2006-03-04 10:50:23+00:00","Added a comment about the first few entries in substResFileNameTable

svn-id: r21065
"
"cf0716734c31007816845370ad5f4fd8b9e3dae7","2006-03-04 11:31:09+00:00","When container files are used, we don't need file name substitution anymore

svn-id: r21066
"
"bde6c151adec6b2b91bf1706bda95876fb852f26","2006-03-04 11:53:28+00:00","Cleanup for the container loading code (and always disable file name substitution when a container file is used

svn-id: r21067
"
"7085bf37249e276c8334999a208cb1c011af9269","2006-03-04 11:55:49+00:00","Slightly clarified an odd subcase in ScummEngine::openRoom

svn-id: r21068
"
"f66cc08bdbdb662777a216a5a2c0cfbdcb463238","2006-03-04 11:57:14+00:00","Const as const can (marking things as const/static allows better compiler optimizations and helps to catch certain bugs)

svn-id: r21069
"
"bc735c4595169a574383ffa1de3cd72a72c886c9","2006-03-04 12:08:19+00:00","Older naming style only used by PC version of FT demo

svn-id: r21070
"
"feeaa2c35ed9b85355cee5be665e566832293014","2006-03-04 12:34:14+00:00","Removed unnecessary strcpy calls

svn-id: r21071
"
"6a4c709af669cb55321837fefc4756b040dec00c","2006-03-04 12:57:12+00:00","No need to use generateSubstResFileName when we already know the result

svn-id: r21072
"
"95116f2098fa5412a6532475e2d15b9435f12ebd","2006-03-04 15:26:26+00:00","define int types for msvc to allow compile mpeg2 library. msvc does not fully conform C99

svn-id: r21073
"
"54be401e8c102f032aa0286c53ebc88c5bea902f","2006-03-04 15:31:19+00:00","updated msvc8 project files

svn-id: r21074
"
"561466027e130c4126e803613b61f4921ab5c9dd","2006-03-04 15:41:30+00:00","updated msvc7 project files

svn-id: r21075
"
"18f1f6a24d6a11f3f4aebb3cdf7493f52bd36327","2006-03-04 17:50:45+00:00","Weekly update to the Bloodshed Dev-C++ project files.

svn-id: r21077
"
"6010d48a8e0c16959b7cd6168e523bf33ac9fe67","2006-03-04 18:34:28+00:00","Removed colorToRGB and RGBToColor calls when calculating alpha
and disabled the complete new theme if 'DISABLE_FANCY_THEMES' is defined.

svn-id: r21078
"
"01af975df48e82938031ed78f95ee2c9719fa3a6","2006-03-04 18:38:27+00:00","Rearranged methods in the IMuse class declaration to denote those derived from the MusicEngine base class.

svn-id: r21079
"
"857abe4c8bc353c2510a5c0b3351af3e0af4ca44","2006-03-04 19:35:38+00:00","Removed the default ignoreFadeouts parameter value for ImuseInternal's getSoundStatus method. The disposition of this method is going to be changing soon, and I'm getting confused by the assumptions being made by many of the calls to it.

svn-id: r21080
"
"623514df0137c6b361e11545efc2d89b40594573","2006-03-04 20:27:51+00:00","Cleanup: output0x388(0xABCD) is now writeOPL(0xAB, 0xCD), which is slightly
more easy to read.

svn-id: r21081
"
"91fbb6b7ae2012b5a23cef0ab62242d6deee7ebc","2006-03-04 20:45:59+00:00","Improved shadow drawing (it's faster now since it doesn't draw the whole rect like before)
'cleaned up' the drawSurfaceMasked function a bit.

svn-id: r21082
"
"4fb6c18f0e2c66f788534ceef4c8993dcf9ccf20","2006-03-04 21:25:11+00:00","Oops, fixes problems with disabled widgets (they need full drawn shadows).

svn-id: r21083
"
"1fe0deeb548c4e87ed6fea9818f8bcaec7f8db4c","2006-03-05 03:46:41+00:00","Add some basic walkbox support for C64 maniac

svn-id: r21084
"
"b1f7f32ed14a1dcddaaafa2dd4857b7a5722b214","2006-03-05 05:14:20+00:00","Separated the IMuse Part methods into their own file. Updated the Bloodshed Dev-C++ project file at the same time.

svn-id: r21085
"
"429f7d43d6a98f36f5942ca612eeaf7c17dc577e","2006-03-05 05:43:46+00:00","Fix compiler warnings

svn-id: r21086
"
"5bf6fdf2f57d7be79dbc59188ede6fd2a766e834","2006-03-05 05:53:29+00:00","Update, to add new imuse file

svn-id: r21087
"
"68bdc98e0b16fb80537cc2f461a7a58a25e0ec28","2006-03-05 06:08:16+00:00","Patch to update Microsoft VC 7.1 project files, from Quietust

svn-id: r21088
"
"7a9ed5425be0187d403394199e71c82136b29108","2006-03-05 08:22:39+00:00","Add German verbs and more work on input in C64 maniac

svn-id: r21089
"
"279ad67506c42d2a9c6fab36e58d456f78f6d5d6","2006-03-05 09:05:44+00:00","Correct case of verb names in C64 Maniac

svn-id: r21090
"
"24493b3f45ab6a764012a5804c3c0a77345c40b6","2006-03-05 10:02:43+00:00","Add back exclusion lost in last commit, exclude some verbs from verbs error script

svn-id: r21091
"
"70dc40cc934e3d03e09b25a7678736c08a741900","2006-03-05 10:05:19+00:00","updated msvc7,8 project files

svn-id: r21092
"
"3fbf207ee5dc9dab260b34cce5148696643ea1ba","2006-03-05 10:54:41+00:00","Update box flags for C64 maniac

svn-id: r21093
"
"38b82fb585ba23db45dee094e7dc9a0b19939910","2006-03-05 12:15:39+00:00","that should help for bug #1352486, smush sound tracks are not stopped immediately, but outside smush when sound data are depleted in sound mixer buffer.

svn-id: r21094
"
"7a6ff46b38ae276c8052bd0ed716c6fd38e4b335","2006-03-05 12:29:13+00:00","that was not what I want. it should stop audio only for immediately stop.

svn-id: r21095
"
"06512360666d0bbfe8e8cf370d60c1ea0584e44b","2006-03-05 13:57:05+00:00","Make sure there actually is a SMUSH mixer before stopping and deleting it.

svn-id: r21099
"
"525690344ba46e59589fee9a042440e7c23791d3","2006-03-05 19:48:22+00:00","Renamed output1() to adjustVolume(). I'm still uncertain exactly *how* the
volume is modified (it depends on several still unknown variables), but that's
all it does as far as I can tell.

svn-id: r21101
"
"4fb6c92473a24421f498b7a95f328032351c50e4","2006-03-05 20:09:02+00:00","The updateUnk6Value() appears to be some sort of random number generator, so I
have renamed it getRandomNr(). The _unk6 variable has been renamed _rnd. (Our
MidiDriver_ADLIB class also has its own random number generator, so it's not
such a far-fetched guess as it may seem.)

svn-id: r21102
"
"27e49b6f5674df4ba1ae0d1d1d8eba39c9fa1b76","2006-03-05 20:11:43+00:00","Note to self: compile before commit.

svn-id: r21103
"
"5e25b3b679d61a92a39f2d9ee699fad50b0bcbb6","2006-03-05 21:30:44+00:00","Restructured IMuse and IMuseInternal.

* IMuse is no longer a concurrency front-end.
* IMuseInternal now derives from IMuse.
* Common::StackLock used to protect thread-sensitive interface methods (same as IMuseDigital).
* clear_queue() included in stopAllSounds() so it can be removed from the public interface.
* Game ID now specified at init using property().
* Timer callbacks receive a struct containing IMuseInternal and MidiDriver refs, instead of just the latter.
* OSystem pointer from init is now cached and used instead of global.

All references to the g_system and g_scumm globals are now gone. BOOYAH!

Tested with MI2, DOTT and S&M, under Windows, in Native MIDI, Adlib, and Mixed modes. No regressions or concurrency issues observed. Manifestations of the latter are the biggest concern at this point.

svn-id: r21104
"
"e2779a0658a3625bbf4c907a9c7b773cc210fae6","2006-03-05 21:48:55+00:00","Corrects implementation of updateCallback48.

svn-id: r21105
"
"ac33309a4d7d2f53f73bcd1818e3e87bcbb99f61","2006-03-05 22:31:49+00:00","I guess this is really a WORKAROUND, rather than a HACK. Updated comment.

svn-id: r21106
"
"06398d1a840e64ba63e5adad7e10c0d315a3832e","2006-03-05 22:35:26+00:00","Removed tag2str usage, which eliminates scumm/util.h dependency.

svn-id: r21107
"
"45656e9fcf2b534163a80a1502623c577f125c79","2006-03-05 23:50:24+00:00","fixed palette handling regression, as reported on the forum.

svn-id: r21108
"
"ddd312cea7f48ec6ce6f2ec32304bf2953df3fd1","2006-03-06 15:10:48+00:00","Cleanup

svn-id: r21109
"
"628d64f13632e4f6c2ed0d40de777671e11d6600","2006-03-06 16:31:19+00:00","More renamings: _unkTableByte1 is now _tempo, and updateCallback29() is
setTempo().

svn-id: r21110
"
"4aaa3eacbd9afceaabebe888b40f5c0dcf482109","2006-03-06 16:37:03+00:00","Renamed setTempo to update_setTempo, also fixed tempo handling (intro is too fast now though, but seems to be another problem).
Also changed some unsigned values to signed.

svn-id: r21111
"
"65e688ac153d6f730a57bd383748f11b4c9114e5","2006-03-06 19:44:15+00:00","Fixed compilation, this could be used with all systems (?)

svn-id: r21112
"
"44f3879f58a1e46e5e5c6639970cf2d3c5bce3ea","2006-03-06 20:22:14+00:00","Fixed fight mode shortcut

svn-id: r21113
"
"4c16b73bd1181f1e7daa5ff206af153ae2ef7b7f","2006-03-07 02:23:37+00:00","o Properly react to end-of-file is loadFromStream()
o Add types SectionList and SectionKeyList
o Implement getKeys() method

svn-id: r21114
"
"ebd583333556b2d13b1de280aabce2561ae97c4d","2006-03-07 03:31:31+00:00","WIP for arbitrary widget positions. See
http://wiki.scummvm.org/index.php/GUI_Themes
Code is not yet used.

svn-id: r21115
"
"02bdcc45c9aaca4ab98b27eccd21ae00731aa2f8","2006-03-07 04:11:28+00:00","Updated Bloodshed Dev-C++ project file for scummvm to reflect new gui/ files.

svn-id: r21116
"
"018c93b14a9f2b3eda3bdfafcf9b90ee9ac0f8f2","2006-03-07 05:39:52+00:00","More work on customizable GUI.
o Implemented special alias 'prev'
o Added new calling scheme to several widgets
o Partially converted launcher dialog to new scheme
o Converted couple widgets of chooser dialog

svn-id: r21118
"
"5c06d3391b239b35d3696c8eb558be7f001e2401","2006-03-07 05:50:37+00:00","Fix 320xY layout

svn-id: r21119
"
"059c7a0296fdf71e80caf15092d3f629a6c43122","2006-03-07 05:53:28+00:00","Set svn keywords on theme file.

svn-id: r21120
"
"1eff73cb412c6c403be82cde77ee61b9944f805e","2006-03-07 13:41:36+00:00","GUI widget positions:
o Add 'true' and 'false' constants
o add .visible widget property
o allow dots to be part of section and key names in configs

svn-id: r21123
"
"1f22481d839de1dd2952aa2c6c840e7ed6bb9d7f","2006-03-07 13:52:53+00:00","Do not override .prev for simple variable assignments, i.e. VAR=VALUE

svn-id: r21124
"
"3f31e1b27dd1d392d5bdff26a99712b3682eace9","2006-03-07 14:16:52+00:00","Added the proper death dialog, changed the sequence skipping code a bit to avoid
possible frame losses, and removed a (now) redundant call to showOverlay() in the
debugger.

svn-id: r21125
"
"d7bc756edcc4a69d8e016670e78901bcce94ebe4","2006-03-07 18:26:04+00:00","Add XxH to evaluation precedence.

svn-id: r21127
"
"fc84c7fc1d8ff4d6cff0b998322fb6015287e79c","2006-03-07 19:02:42+00:00","o More widgets fot alternative constructors
o Cleanup of launcher dialog
o Implemented useWithPrefix keyword

svn-id: r21131
"
"1157cbf84213773a91217c348dae1f05663b2fd7","2006-03-07 19:19:37+00:00","Fixed invalid event returned with ARM OS5 backend

svn-id: r21132
"
"c3e223afdb55d203c7a6710426619ce8d8257736","2006-03-07 19:23:38+00:00","Fix implementation of UseWithPrefix keyword

svn-id: r21133
"
"532f38f19f0d2356708e6c4d1444717bc80eac4a","2006-03-07 19:24:58+00:00","Updated project file with lastest added/removed files from CinE, Gui, Kyra, imuse

svn-id: r21134
"
"431c820e4febacee6e6f02cfd611df47eaab67c2","2006-03-07 22:27:14+00:00","Correct order of cases in o72_redimArray()

svn-id: r21135
"
"cca7da5ba1fec174a692dfdb6dbc4805a9da44e2","2006-03-08 01:38:27+00:00","The adlib code was calling the Kyra delay() function instead of the
system delay, which was causing concurrency problems.

svn-id: r21136
"
"a8a8624511f280ea1fdc9bb4bde4f79477b76ae1","2006-03-08 01:42:02+00:00","o Converted most (all?) widgets to new scheme.
o Converted global options dialog to new scheme.

svn-id: r21137
"
"871c394e285a24d33ad9bd8141b64a76ef48046d","2006-03-08 01:49:22+00:00","Cleanup

svn-id: r21138
"
"c59ca20ce6d137a28703d29ce11a62b553f007cb","2006-03-08 10:00:12+00:00","Check format string in calls of debug/error (adapted from patch #1445422)

svn-id: r21139
"
"14f1337c602a1823d2be26fe5b48bc4722aca681","2006-03-08 10:07:02+00:00","Use %p to print pointers portably (even on 64bit systems). Note: this will add a 0x prefix automatically

svn-id: r21140
"
"d9a9fac93761a06e78fe7e7091ae5a888c1260f2","2006-03-08 11:37:25+00:00","Fixed tons of format string warnings for debug/error calls (including several errors where the format string didn't match the number of arguments to the call)

svn-id: r21141
"
"4f4d4de0180d5664f44477d7ca64d0f9edae2e8d","2006-03-08 11:44:13+00:00","Update win32 dist

svn-id: r21142
"
"9b6b816a010f809e8396657566d834523771933e","2006-03-08 11:47:17+00:00","Adapting plugin.syms to the changes made to the plugin API (matching it with the conent of plugin.exp)

svn-id: r21143
"
"4c1e4c6987ed6cd511c932195e845a1ee15022aa","2006-03-08 12:09:07+00:00","Added alternate DetectedGame constructor, to make it possible to add games to a detection list w/o first creating a temporary GameSettings struct

svn-id: r21144
"
"39c9af43ae06814ee8298e7cf91c736a0dafccc8","2006-03-08 13:15:13+00:00","Implemented the last menu (the settings screen). Walking speed, text speed,
and speech modes (text only, speech only, speech & text) can now be
configured. Toggling music and sound in general is not enabled yet.
Also formatted the static menu resources a bit differently, made
sure some vars in the menu code always got initalized, and
fixed a slight formatting error :).

svn-id: r21145
"
"f5efc8b1696400061a202db614ca02f8a4a8d391","2006-03-08 21:21:56+00:00","Commits patch #1437774 ('KYRA1: Game will crash if bitmap is missing').

svn-id: r21146
"
"c3f91ca288cd4cfb884fedb956d0d1049f857841","2006-03-09 01:08:25+00:00","Converted all scumm dialogs to new scheme

svn-id: r21147
"
"0d4b1a2c8579b88f7ddcf252ab4a317fd6d2576b","2006-03-09 01:34:33+00:00","Yet another plugin related TODO

svn-id: r21148
"
"d2f78184af00cd91f3f1f251199a436b53f4ae64","2006-03-09 01:42:56+00:00","- added new toDetectedGame() template function (analog to toGameSettings)
- made use of the new DetectedGame constructor from my last commit
- some related cleanup

svn-id: r21149
"
"86565fcca57454e91124410cfd6864ef1e202dc0","2006-03-09 02:52:51+00:00","- Renamed GameSettings to PlainGameDescriptor
- Added new GameDescriptor struct (similar to PlainGameDescriptor but with
Common::String members instead of const char * ones)
- Changed DetectedGame to subclass GameDescriptor
- Removed toGameSettings() in favor of new (template) constructors in
DetectedGame and GameDescriptor
- Fixed a bug in the obsolete gameid handling in the SCUMM & SIMON engines

svn-id: r21150
"
"51495fb199346508aad26e623d38d60778a0e104","2006-03-09 02:54:02+00:00","Moved keys mapping dialog to new scheme. Made it generic. Fixed several
compilation errors associated with it.

svn-id: r21151
"
"12755197f2587d25b12f9f3b1440d7e8823644a6","2006-03-09 03:01:28+00:00","Tiny code simplification

svn-id: r21152
"
"72d6022fa9d951578836d400ab5e9a2b7ec6714a","2006-03-09 03:04:57+00:00","Yet another plugin/game detector related TODO

svn-id: r21153
"
"e53e0e588569e71507d748f22a10970b4f417607","2006-03-09 03:09:21+00:00","- Removed the code from the launcher that adds language/platform to the
game descriptions. Doing this now is the responsibility of the engines.
- Adapted the SCUMM engine to add lang/platform to the desc string if
necessary. Other engines still have to be adapted (but many do not seem to
need this at all, since they either are lang/platform agnostic, or already
include this information in their MD5 tables).

svn-id: r21154
"
"ea26ccea4a3afc9e18d11f6e6e52119ae43fb68e","2006-03-09 03:21:23+00:00","Add the known 'extra' info to the description string; and removed the old hack which added this information during launch (which really was a bad hack)

svn-id: r21155
"
"effed85448baa683ed5dafe2cf2c5531c092a951","2006-03-09 03:29:12+00:00","Implemented SysEx command 1 for non-S&M SCUMM games, per the latest comment on Bug 1088045.

svn-id: r21156
"
"8a5f44d797230d3a72697df6d1ee785a04b01d0e","2006-03-09 05:18:00+00:00","Converted last dialogs to new scheme. Now it seems to be everything. Please,
test throghoutly.

svn-id: r21157
"
"f848dd1d99040a93363f591ce5f63f3c0110cef1","2006-03-09 09:36:09+00:00","Revert GCC_PACK removal, which broke compile

svn-id: r21158
"
"47f66f80b951adb6bf80b3056918798448dca4c1","2006-03-09 09:40:07+00:00","Revert GCC_PACK removal, which broke compile

svn-id: r21159
"
"ff676b0b54ef475bd314aa8f93a15929f2a7dd92","2006-03-09 09:51:42+00:00","Correct GCC_PACK define for non-GCC

svn-id: r21160
"
"9d19f7d32e0d6c063a8b9457dd554f8cf93496ad","2006-03-09 12:04:41+00:00","Corrected a few comments where I had mistaken the note on/off bit for one of
the octave bits.

The unkOuput1() function always turns off the note, so I've renamed it
noteOff(). I've added some comments to unkOuput2() as well, but I'm still not
quite sure what its purpose is. It seems unlikely that it's simply a 'note on'
function, given the many things it will clear for the channel. It does end by
turning the note on, though. Strange.

svn-id: r21162
"
"671450fcb84ab526a74fa58c08247ae8d5255310","2006-03-09 12:36:11+00:00","Set down in comments what I know about _outputTable[], and what I suspect about
_unkTable[]. Investigating the latter further might help unravelling several of
the 'unk' variables. (Right now, I'm suspecting that unk15 is the pitch bend.)

svn-id: r21164
"
"cd732d680bf251458fe8c22e8694e2475e3b2927","2006-03-09 12:45:23+00:00","Fix compilation on MSVC. Reported by Quietust

svn-id: r21165
"
"46ee5c8f26b8b53d0c7268a8328edea0b4134611","2006-03-09 12:52:10+00:00","Added new method DetectedGame::updateDesc, to ease generation of uniform description strings

svn-id: r21166
"
"6b19677e1d15d7b4f8e1230642e1d1a1fee69907","2006-03-09 12:52:54+00:00","Make use of DetectedGame::updateDesc in the kyra & lure engines

svn-id: r21167
"
"de295c562db98bd80b9aa174cd221ac76ad35b69","2006-03-09 12:59:46+00:00","Replaced GF_ENGLISH in LureGameSettings by a proper Common::Language member variable; added (commented out) entries for the german and french lure

svn-id: r21168
"
"783264fe28dd25a4f06a17683d18519bb55842a7","2006-03-09 13:03:23+00:00","Made sure the generic ITE description matches the 'special' ones in game.cpp

svn-id: r21169
"
"aad520026ccddf8428ab23b2f3dfabbeebd9328c","2006-03-09 13:22:30+00:00","Modified SAGA engine to use DetectedGame::updateDesc (note: there is a new TODO in the saveload code now)

svn-id: r21171
"
"a4a79dd9516a828a474ff0bfedd401511662739f","2006-03-09 13:25:52+00:00","Credit Tyst for new SVG logo.

svn-id: r21173
"
"1d14d18893134ece3819a4c8ff92c10073c2d076","2006-03-09 13:29:45+00:00","Modified SIMON engine to use DetectedGame::updateDesc

svn-id: r21176
"
"04151343a78f28c4d58a1a48c1e352888ee4f71c","2006-03-09 13:54:36+00:00","Compile fixes for VC6

svn-id: r21179
"
"6b988a51bde099d5080be96aaefaa19edf59a8d9","2006-03-09 14:30:43+00:00","Moved SIMON plugin interface code from simon.cpp to game.cpp

svn-id: r21180
"
"6db0289f3032a3df3200210a4a2a173fd9805858","2006-03-09 14:33:07+00:00","Moved SAGA plugin interface code from saga.cpp to game.cpp

svn-id: r21181
"
"512963525722007604f26bbb02b71e7795676f08","2006-03-09 15:07:10+00:00","Updated build scripts

svn-id: r21182
"
"c571026a20b70b09d706dbefda22ce575c74c7e8","2006-03-09 17:04:00+00:00","More cleanups and renamings:

* Rewrote updateCallback41() in terms of updateAndOutput1(), since they were
almost identical to begin with.
* Rewrote updateAndOutput1() for better readability.
* Made unk10 signed, and renamed it baseOctave.
* Made unk14 signed, and renamed it baseNote.
* Made unk15 signed, and renamed it baseFreq.
* Renamed unk17 regAx. It appears to be a cache for that register.
* Renamed unkOutputValue1 regBx. It appears to be a cache for that register.
* Renamed updateCallback8() update_setBaseOctave().
* Renamed updateCallback13() update_setBaseNote().
* Renamed updateCallback20() update_setBaseFreq().

Which still leaves the mystery of unk16 and _unkTables[]. Perhaps *this* is the
pitch bend?

svn-id: r21183
"
"a5e0c392ba3cef688b0525dbdd233c95e1657674","2006-03-09 18:42:05+00:00","As LordHoto pointed out to me, updateCallback41() was slightly different after
all: it adjusts the frequency even when state.unk16 is zero. Fixed that, and
added some comments to hopefully explain the differences between the cleaned up
code and the original disassembly.

svn-id: r21184
"
"f0106cd59c90d22799bb1517575a2d92a9027abe","2006-03-09 20:50:19+00:00","- Removes deleted waitTicks prototype in KyraEngine
- Adds sound fading support to the adlib player
- Adds support for stopping running tracks

- Changes baseFreq type back to uint8
- corrects octave handling in updateAndOutput1
(Thanks to eriktorbjorn for doing that)

svn-id: r21185
"
"2cf5859404fe91e19c2d18d57c1955d314c5da06","2006-03-09 22:37:19+00:00","oo'ified sound code and added basic support for OS adlib music.

svn-id: r21186
"
"96e87cdfe7731700d06d90e94ce0f56639d83e44","2006-03-09 22:40:21+00:00","Moved typedef Common::String into class declaration.

svn-id: r21187
"
"8476b7a94f2b381c1c487bffcd4052017202db24","2006-03-09 23:02:29+00:00","minor cleanup.

svn-id: r21189
"
"e0a4add1943e22d5a64992d53acb81d67936be73","2006-03-10 00:39:37+00:00","Update German verbs for C64 maniac, to match original

svn-id: r21190
"
"de1cd95927fbf954cbce695093dffe08961d531d","2006-03-10 00:53:09+00:00","Revert that mistaken change to English verb table for C64 maniac

svn-id: r21191
"
"259e3cf301fea0bed648f77a9d3ae74560cc371c","2006-03-10 06:05:49+00:00","Adjust talk sound check in CHARSET_1(), since processSfxQueues() doesn't exist in HE games. Fixes glitch when time machine is used in putttime.

svn-id: r21195
"
"19aba0e88fafc0670e974656d8cee015ca076607","2006-03-10 07:56:22+00:00","Some more/updated comments.

svn-id: r21196
"
"37b5e3bcca7b10f01ec4d84813de492841a926e0","2006-03-10 08:19:53+00:00","Since updateAndOutput2() is the only function that sets up wave forms and
stuff, it pretty much has to be our 'set instrument' function. Also, while I'm
not entirely sure of the implications, 'unk23' is the Algorithm bit for the
Feedback / Algorithm register, so I've renamed it 'algorithm'.

svn-id: r21197
"
"8a9286ce53e27bc6a9cb1b6a461f3d9d1d778c05","2006-03-10 08:55:19+00:00","Renamed 'algorithm' 'twoChan' to be more consistent with our MidiDriver_ADLIB
class, where the corresponding variable is called _twochan.

svn-id: r21198
"
"95196056bd258d78f31ecb720117bb6a0973331c","2006-03-10 09:24:50+00:00","The calculateLowByte1() and 2() functions are used for calculating the 'total
level', which I believe is the individual channel volume. (The functions also
return the 'scaling level' bits, but they are preserved, not calculated.) I
have renamed these functions calculateOpLevel1() and 2().

The unk25 and unk26 variables have been renamed opLevel1 and opLevel2. These
are called oplvl_1 and oplvl_2 in our MidiDriver_ADLIB class.

The unk26, unk27 and unk28 variables are potentially added to both operator
levels, and have been renamed opExtraLevel1, opExtralevel2 and opExtraLevel3.

The updateCallback25() function has been remamed update_setExtraLevel1().
The updateCallback33() function has been renamed update_setExtraLevel2().
The updateCallback32() function has been renamed update_setExtraLevel3().

Note that these callbacks aren't quite as similar as their names would seem to
indicate: They differ in whether or not the volume is updated and/or how the
parameters are passed.

svn-id: r21199
"
"69b18f17441c406e70b2de750bcef1742bd6fcf4","2006-03-10 10:18:05+00:00","Added some guesswork comments about stateCallback1_2() and related functions
and variables.

svn-id: r21200
"
"0b7f7f66eaa2582078e5eac6679290d19482df26","2006-03-10 10:30:31+00:00","Fixed some obvious errors in the comments I added before.

svn-id: r21201
"
"ac997a249364315ee45768a1e1ef0dc3f9dcba85","2006-03-10 10:55:36+00:00","Added guesswork comments for stateCallback1_1() and its related functions and
variables.

svn-id: r21202
"
"a4ba0066bc48cfbd8f2a3365fb5d0f9b0d38206a","2006-03-10 11:18:40+00:00","Added guesswork comments for stateCallback2_1() and its related functions and
variables, and cleaned it up slightly. (Some of its variables are now signed.)

svn-id: r21203
"
"6f2f70d071f146edbb8973ad9ec0bd6bc6fda104","2006-03-10 11:26:32+00:00","Renamed _unkOutputByte1 _curRegOffset. It doesn't always correspond to the
_curTable channel, but it probably does so whenever both of them are used
together.

svn-id: r21204
"
"b294175eb65d350c996932202457935c4b46f378","2006-03-10 13:29:34+00:00","Fleshed out some guesswork comments.

svn-id: r21205
"
"f670d2b2b70345a37706215d54f20171d1d567a7","2006-03-10 14:22:27+00:00","Further guesswork: 'unk2' appears to be the priority of a sound, since the
callbackOutput() and updateCallback3() functions won't change the channel data
pointer unless the new sound has a higher unk2 and the current one.

Since it's set to 0 when the data pointer is nulled, I've changed the priority
to be unsigned.

The updateCallback22() function is now update_setPriority().

svn-id: r21206
"
"b07e6f6eede5972e87edd3c9ebfb5d2efedc90e5","2006-03-10 14:53:48+00:00","Added comment detailing what I believe I know about the remaining 'unk'
variables in OutputState.

svn-id: r21207
"
"47589ec06fde9d1141d1a8be33fa8505b33018ea","2006-03-10 15:30:22+00:00","More comments, and some very minor cleanup.

svn-id: r21208
"
"3521d3508518166c7f710b69bfb35c9a6049d7b8","2006-03-10 19:35:35+00:00","Add Russian puttrace and pajama3

svn-id: r21209
"
"f52e1709bf88e69cae5bab8f00ad30021f4a5743","2006-03-10 23:09:27+00:00","o6_setObjectName is never used by HE72+ games

svn-id: r21211
"
"d5066f3741c96b7982c3f941357c37eca8318bf1","2006-03-10 23:15:05+00:00","Remove unused case in o5_actorOps, which is never triggered by any game scripts

svn-id: r21212
"
"2708fe34f354fc91956a798c0042ab7ffabca26a","2006-03-11 01:06:30+00:00","Another ScummEngine reference in IMuse bites the dust.

svn-id: r21213
"
"985ab14c79c9c88c1235d94db46e3e7849444a34","2006-03-11 07:37:09+00:00","Removed inclusion of non-existing imuse_sysex.h to make ScummVM compile again.

svn-id: r21214
"
"beb0c9e2971752ece466cb4ebc84d4f8b95507ad","2006-03-11 09:43:00+00:00","Fix endian issue in getArrayDim()

svn-id: r21216
"
"5bd5cef6cf80dff1db3399a3fa90078629874cab","2006-03-11 17:25:12+00:00","Some more renaming:

updateCallback18() -> update_setupPrimaryEffect1()
updateCallback19() -> update_removePrimaryEffect1()
updateCallback21() -> update_setupPrimaryEffect2()
updateCallback40() -> update_removePrimaryEffect2()
updateCallback14() -> update_setupSecondaryEffect()
updateCallback30() -> update_removeSecondaryEffect()
updateCallback37() -> update_changeExtraLevel1()
updateCallback34() -> update_changeExtraLevel2()

svn-id: r21217
"
"f9797f3ac39008d571e8744c38e1eb1d39aec198","2006-03-12 00:53:30+00:00","Correct mistake in md5 tables for Simon the Sorcerer 2 (DOS Floppy)

svn-id: r21219
"
"3e72b26adc0d151e36106a3fb974fab4f36da1de","2006-03-12 01:06:23+00:00","Revert mistaken commit of local debug code

svn-id: r21220
"
"8602fe7432f709fe84fc64fd6ec840a2c3888e7e","2006-03-12 04:19:03+00:00","Revert mistaken commit of local debug code

svn-id: r21222
"
"66730f3b6b8394d487308681b3115abb98c1716e","2006-03-12 09:27:56+00:00","Use script support for Macintosh versions of HE80+ games

svn-id: r21227
"
"e94aa88ecedac24e0a2f3581425f60b10d5acb41","2006-03-12 09:51:24+00:00","Adjust version setting for Macintosh versions of HE80+ games, which is checked by water

svn-id: r21228
"
"fd389260f87d347ecf2255014a70f2ffd005c9cc","2006-03-12 10:44:42+00:00","Adjust basename array setting in HE99+ games, for filename substitution

svn-id: r21229
"
"d57e2e88c051bea3d79b38f2a47cdacaf99e8c55","2006-03-12 10:47:20+00:00","Added a block of comments about command parsing and timing. Perhaps it will be
of use in tracking down the tempo bugs.

svn-id: r21230
"
"230a68755e40408d84d90e9e3ac6d6fbd94b9ca7","2006-03-12 10:56:14+00:00","Unfortunately the workaround for Macintosh version of water is still required.

svn-id: r21231
"
"84af3037874ea63b4b08ac3e6c7c88b0e7c85562","2006-03-12 12:40:14+00:00","And now, for a change, some more renamings:

update1()          -> setupDuration()
updateAndOutput1() -> setupNote()
setInstrument()    -> setupInstrument()  (just for the symmetry)
updateAndOutput3() -> noteOn()

That made the following two renamings seem natural:

updateCallback10() -> update_playRest()
updateCallback27() -> update_playNote()

I decided to number the secondary effects, even though there's only one:

update_setupSecondaryEffect()  -> update_setupSecondaryEffect1()
update_removeSecondaryEffect() -> update_removeSecondaryEffect1()

And finally, I renamed the effects callbacks:

stateCallback1_1() -> primaryEffect1()
stateCallback1_2() -> primaryEffect2()
stateCallback2_1() -> secondaryEffect1()

svn-id: r21232
"
"c8347b23b1552328bf1c986e2c394acb81242738","2006-03-12 12:55:16+00:00","Added debug message for the standard 'note on' opcodes as well.

svn-id: r21233
"
"cd28f28d3248d1186a797fcb77a512efaaf31ad3","2006-03-12 14:22:27+00:00","Music in the last two intro scenes plays now again with adlib.
Cleaned up the sound code a bit (removed some unneeded functions).

svn-id: r21234
"
"cb085df0f554354e9fb811a8490a954b0820e83a","2006-03-12 15:38:59+00:00","Fixes non looping tracks and a fading bug, which silenced the music, with mt-32.

svn-id: r21236
"
"72d2ef72218e419fe8b0b175e7ea7cef9ecbc525","2006-03-12 17:05:59+00:00","After several days, telling LordHoto over and over that 'no, I don't think the
timer inaccuracies can cause that kind of problems, or we'd have noticed it in
the other game engines as well', guess what? The other game engines do not
necessary use a timer for their Adlib music. So now Kyra doesn't either.

Fortunately for my dignity, the music is still a bit uneven at times, but the
situation does seem to have improved a bit, and the sound effects sound better
to me now.

svn-id: r21237
"
"9d3136fb71858a73a9f4aef8e33e0e444610cb5e","2006-03-12 17:08:46+00:00","Corrects former commit which deleted sound file loading after the scene with malcolm and kallak.
Also corrects callback50() which seem to improve the sound a bit in the kallak writing scene.

svn-id: r21238
"
"63245b8eba5121a2880f6d40d4aaf77d52e1c37f","2006-03-12 17:50:36+00:00","Compensate for rounding errors in _samplesPerCallback by having readBuffer()
generate 'leap samples'. I doubt this will make any noticeable difference, but
at least now we can probably rule out timer inaccuracies from the list of
possible suspects for the remaining bugs.

Also removed unnecessary mutex locking/unlocking from readBuffer(), spotted by
LordHoto.

svn-id: r21239
"
"20095d8e93085419385efbe82d6607201d1d38c6","2006-03-12 17:58:04+00:00","- Changes usage of regBx to regAx in primaryEffect2 (seems to be a bug introduced when renaming).
- Changes unk41 and unk32 to signed.
- Fixes wrong sound when dropping items (that was also a little bug in primaryEffect2)

svn-id: r21240
"
"4d5a3e4c45b19a96e55ff8a3c67ff7ab9734fd3b","2006-03-12 18:06:22+00:00","IMuse SysEx processing now handled by client-specified callbacks. This removes all game-specific references from the Player class. Bloodshed Dev-C++ project file updated.

svn-id: r21241
"
"165265166b958840c20d7139fe8c7f3272b6d3ce","2006-03-12 18:46:33+00:00","Updated for Jamieson630's latest iMUSE changes.

svn-id: r21242
"
"e19d079d2b4b82f7d1223e8b905ecc49d12e91bb","2006-03-12 21:54:06+00:00","- Renames some functions:
updateCallback31 -> update_setChannelTempo
updateCallback42 -> update_resetToGlobalTempo
updateCallback55 -> update_setTempoReset
- Renames some vars:
unk1 -> tempo
unk6 -> tempoReset
- Fixes tempo bugs

svn-id: r21244
"
"9f941a18cf3ac8197e588ff3f07950478b8ad17e","2006-03-12 22:33:24+00:00","Cleaned up comment and did some more renaming:

unk4 -> position   (measured on a very short ruler :-)
unk5 -> duration

svn-id: r21245
"
"2ab85f9ea64de49afe07899a08589078e417fcdc","2006-03-12 22:47:51+00:00","Renamed callback1 to primaryEffect and callback2 to secondaryEffect.

svn-id: r21246
"
"1d439592dd4669d0284ef91fbb6169292428eea4","2006-03-12 23:21:01+00:00","Until now, we have confusingly used the terms 'state' or 'table' where we
really mean 'channel'. Fixed that:

OutputState     -> Channel
_curTable       -> _curChannel
_outputTables[] -> _channels[]

The biggest change was modifying all the 'state' and 'table' local variables
and function parameters.

Ahd, at no extra charge:

_outputTable[]  -> _regOffset[]

svn-id: r21247
"
"d0f834ee40013edda77da730b96b4880d17d2ecd","2006-03-13 02:22:22+00:00","Update and restore old debug code for masking

svn-id: r21248
"
"833e3430598f6de8d854b39a663fc75152275d8c","2006-03-13 03:52:26+00:00","Fix object glitches in C64 maniac

svn-id: r21249
"
"06dddefe90c239f02fb98464a64970c2a5a4c66d","2006-03-13 06:06:51+00:00","Add masking support for C64 maniac, not perfect

svn-id: r21250
"
"8f8d7b6e0740985cfc31e3f0a80c2f8ebafb8761","2006-03-13 07:46:54+00:00","Add opcode difference in setObjectName opcode for C64 maniac

svn-id: r21251
"
"c6082389a2021134d51cf71f407b00095a66d631","2006-03-13 10:00:10+00:00","Confirmed it is safe to remove workaround for Macintosh HE99 version of water.

svn-id: r21253
"
"92eb7b7aa5bbe6f2554b1cf24c11092681f69cc0","2006-03-13 11:18:18+00:00","Changed temp variable from byte to word to fix decoding of some animation resources

svn-id: r21254
"
"3c303c0dfda28d149b8b142fd758a19dc354b226","2006-03-13 11:20:58+00:00","Add proper handling for animations with frame offset tables during decoding

svn-id: r21255
"
"c44069fdfc0cf79602bee3901008725c1e81b979","2006-03-13 11:33:17+00:00","Added further disassembly of animation decoder routine

svn-id: r21256
"
"c5d90e026fcf46b7b566220acc1c5303073c020c","2006-03-13 11:40:40+00:00","Fix to remove warning on validating frame offsets in animation decoder

svn-id: r21257
"
"b8cf88622b5a50d46702a9bdfd30ee2e4328c1f8","2006-03-13 11:52:16+00:00","Fix a few valgrind warnings

svn-id: r21258
"
"480aee83aa4b2b6e0ed48985f6a76f7fbbf06c2f","2006-03-13 11:57:09+00:00","I was going to hold off on this until the 'Pool of Sorrow' music had been fixed
but it seems that it drifts out of sync after a few repeats even with the
original interpreter. It's a feature!

This cleanup clears up some of the more confusing break/continues in the
callbackProcess() function, and gets rid of _continueFlag.

svn-id: r21259
"
"71a7754a37099ee7633f1953c3937a937597042d","2006-03-13 11:58:01+00:00","Fix a valgrind warning

svn-id: r21260
"
"9399a2b58e98de3796d8640c25def3ffaa48d8dc","2006-03-13 13:56:19+00:00","Things continue to fall into place. In other words, more renamings:

unk3  -> spacing1
unk7  -> spacing2
unk12 -> fractionalSpacing

updateCallback4()  -> update_setNoteSpacing()
updateCallback9()  -> update_stopChannel()
updateCallback15() -> update_stopOtherChannel()
updateCallback17() -> update_setupInstrument()
updateCallback28() -> update_setFractionalNoteSpacing()
updateCallback43() -> update_nop1()
updateCallback47() -> update_nop2()

svn-id: r21261
"
"ccd0a09f7a1fa4c0d820244b5f99b1e835b22af8","2006-03-13 17:19:19+00:00","- Fixed regression when moving waitTicks to delay (removes wrongly drawn shapes and wrongly call of the kyragame fading in the outro)
- Removes a new line from a warning in seqplayer.cpp

svn-id: r21263
"
"d66d7ff76bad94a61de85897187c6aff4837e39d","2006-03-13 21:38:20+00:00","Changed type for samplesleft in order for MIN macro to work properly on all platforms

svn-id: r21264
"
"221263e275af003da7ff8bdfd89f433ef99f775b","2006-03-13 23:05:11+00:00","Cleaned up the comments in unkOutput2(), and added a big note about the bug
where low-frequent noises are playing at the beginning of some new sounds.

svn-id: r21265
"
"94f5bd81ad55d6b1a9d25a3e22087bc93a555dd1","2006-03-13 23:18:22+00:00","Fix Chooser dialog.

svn-id: r21266
"
"784728bf8d535cbb66803820885db5517344c8b1","2006-03-13 23:53:15+00:00","Further clarifications to the comment about the 'low-frequency notes at
beginning of music' bugs. As an experiment, I tried hooking up ScummVM with the
most recent version of the FMOPL code, and the bug went away.

Unfortunately, I believe we are stuck with the ancient version for license (and
performance?) reasons.

svn-id: r21267
"
"c9970b78b529f0b7babdef1957234cf31b3f44e6","2006-03-14 02:19:38+00:00","Rearrange launcher.
Logo is still shown weirdly.

svn-id: r21268
"
"b45dcc4df372f2d860e13972eee96f3540f04405","2006-03-14 02:55:54+00:00","Fix logo drawing.

svn-id: r21269
"
"60793c0e641a36ef1153605657b48df268b86830","2006-03-14 03:08:14+00:00","Positioned logo properly, added different version number rendering and
got rid of antialiasing artifacts

svn-id: r21270
"
"a483083f352baa79cdefd680f6fe2b4cce1a4628","2006-03-14 03:52:29+00:00","Tweaked a little scumm main dialog and scumm save/load dialog. Still plenty
to do.

svn-id: r21271
"
"c1965435723f7f06924c51fd4d960d9fc550cc7b","2006-03-14 07:45:46+00:00","Fix regression in C64 zak, script 5 was not been run when room changed

svn-id: r21273
"
"f6d69c6d45febe555ef4263db6e74446dc375d71","2006-03-14 09:33:37+00:00","Camera scrolling only effects subtitles in SCUMM4-6 games. Fixes bug #1329482.

svn-id: r21274
"
"660c23ba3f4285a0c7bd62e7e4df282223ccbe22","2006-03-14 09:55:41+00:00","Updated comment with more circumstantial evidence that the low-frequency note
bug is a bug in our fmopl.cpp. Ken Silverman's Adlib emulator doesn't seem to
exhibit the bug either. (But is apparently less feature complete than MAME's.)

svn-id: r21275
"
"806ee522d12af62720d1870528b28293934a113a","2006-03-14 10:35:01+00:00","Move unused scumm vars in C64 maniac to safe position, to prevent conflicts for now

svn-id: r21276
"
"be7a28f65e35b8e8a7c8e60c9b0bcb1923a3d942","2006-03-14 12:06:37+00:00","Avoid all scumm var conflicts in C64 maniac

svn-id: r21277
"
"3d0e69a495a52c20f3d1f10eab0d802d26ae0755","2006-03-14 12:11:16+00:00","Adjust one last spot, for previous VAR_CURRENT_LIGHTS changes

svn-id: r21278
"
"c822f496762f083e6d31b3f902af31019887ea26","2006-03-14 12:13:27+00:00","Remove unused vars, to prevent compiler warnings

svn-id: r21279
"
"c3d8674a26b55ca656f1d7922b799d5907c4beda","2006-03-14 12:18:04+00:00","Adds support for building on Intel Macs, using a modified
version of patch 1448395 by Aubin and some of my
own changes.

Notably:
* Two elements of a struct in backends/midi/quicktime.cpp
needed to be forced to BE.
* NASM set to build Mach-O binaries
* configure now checks for Altivec support on Darwin hosts,
instead of assuming it. Altivec support can also be disabled (not 100% sure if t
his is actually needed, but might be handy for crosscompiling).
* The aliasing of the symbols contained in the .asm files
done on Windows were also needed on MacOS.

Note that while the asm code is properly compiled and linked
in, HQ2/3x support will still not work properly on Intel macs
if NASM is enabled.

svn-id: r21280
"
"4b1e03f37ad6019fe7ac680e6d9fddb96add1e9d","2006-03-14 12:19:17+00:00","Remove unused var, to prevent compiler warning

svn-id: r21281
"
"53c5b8cf477dc4296fa2cf73d03a84ac8b97698f","2006-03-14 12:26:48+00:00","Actually, removing the --disable-altivec from the
help output, it is potentially only useful in very specific
situations.

svn-id: r21282
"
"4f10a71b98d31c1ba7e3d94065f06a6276a2cbc8","2006-03-14 13:16:11+00:00","An actor is completely reset by showActor() in SCUMM1-2 games. Fixes bug #902391

svn-id: r21283
"
"d68b64184ef0610c98feef066911634078a319d8","2006-03-14 13:26:06+00:00","Add a virtual destructor to class SoundDriver of the CINE engine (fixes a warning)

svn-id: r21284
"
"ab1694aef99c850b85f833413bd2c70cf732b664","2006-03-14 13:28:28+00:00","Compute the full game title when detecting games & creating engine instances, and also use that for savegames (all for debugging)

svn-id: r21285
"
"ee087df293e0b5e15288fd5374790970df890089","2006-03-14 13:36:13+00:00","Enhance the new getCurrentLights to work for V6+ games, too, making it possible to remove several special cases throughout the code

svn-id: r21286
"
"9673573bec897126c53607089825706e40c92a1c","2006-03-14 13:37:15+00:00","Fixes _unkTables, I made a mistake while extracting those last time it seems.

svn-id: r21287
"
"0cc41c7cbb1fc4078f94afb9c0b62fe4b6ae8bae","2006-03-14 14:06:44+00:00","Renamed & documented the LIGHTMODE flags

svn-id: r21288
"
"68bc8ea52e8c527b45e4880dcf683ac062cf0624","2006-03-14 14:10:33+00:00","Update comment about use of procC64 by C-64 version

svn-id: r21289
"
"a68e8c2db959363d8ef0b4cd40062e305603fae1","2006-03-14 14:25:13+00:00","Fixes wrong sound then showing the death screen.

svn-id: r21290
"
"0a3e4f04e546c987c9167027c180d652108e31c5","2006-03-14 14:37:13+00:00","Use SDL_GetError in an attempt to display slightly more information about the reason(s) SDL_SetVideoMode failed

svn-id: r21291
"
"3582efc5d23c9f537b632a0229f456c435b5b4a8","2006-03-14 14:52:36+00:00","Fixes for the DC backends (see patch #1436898)

svn-id: r21292
"
"fa4471fae40546b54c6a338705fd0388871e9e87","2006-03-14 15:15:04+00:00","- Fixes a bug in update_primaryEffect (wrong sound from the birds outside brandons home is fixed with this)
- Changes _tempo, tempo, position, unk41, unk32, unk18, unk19, _unkValue3 to unsigned (should be correct this time)

svn-id: r21293
"
"f319865837d2ea2dc4a42f1dc03842e39ddda501","2006-03-14 15:25:29+00:00","Merged two consecutive 'if's with identical condition

svn-id: r21295
"
"e6f329e3fc91d5538e8516a032e3df7b31b18f26","2006-03-14 15:36:04+00:00","To the best of my knowledge, it's really 'C64' and not 'C-64'

svn-id: r21296
"
"ee6f7626bf8878f187af0410ba81975fa127d1c9","2006-03-14 19:08:09+00:00","Fix typo in comment.

svn-id: r21298
"
"c12a5a35be96239668f1df6919d83c26587dd5e0","2006-03-14 19:48:08+00:00","- Deletes wrong spaces in debugC calls in resource.cpp
- Adds support for amiga .pak files (and a filelist)

svn-id: r21299
"
"59b6f0f715fb9874858feb40a22b844e42a3ce79","2006-03-14 20:09:32+00:00","Fixed a potential bug that could cause memory to be read out-of-bounds.
(Unfortunately, this does not fix the Kyra bug I'm looking for.)

In the most extreme case:

* DR and RR will point to &DR_TABLE[60], and AR will point to &AR_TABLE[60]
* SLOT->KSR will be 0
* CH->kcode will be 15

In that case, it will attempt to access AR[15], RR[15] and DR[15], i.e.
AR_TABLE[75] and DR_TABLE[75]. So these arrays need to be 76 elements, not 75.

We used to initialise element 75, but this was changed to 74 to match the size
of the arrays. Buf if my reasoning is correct, it was the arrays that were too
small.

svn-id: r21301
"
"839b5d3e8665171a97cb6ca51289838de65a19a4","2006-03-14 23:01:44+00:00","Added workaround in FMOPL for the pathological case where a note was turned off
while still at the very beginning of the 'attack' phase. This is the very
lowest point on the attack curve, yet it would continue from the beginning of
the release curve, i.e. its very highest point. This is what caused Kyra to
often play low-frequency notes at the very beginning of a new song. (That, and
a truly bizarre function for initialising the channels.)

The proper fix would be to locate the correct point on the release curve and
continue from there. For now, though, only handle the trivial case.

svn-id: r21302
"
"408b9a41eeeb9ce162f4ad97867365f3894b2c07","2006-03-14 23:29:29+00:00","Gave the loadBitmap debug message its old debug level back. (I.e. made it less
noisy.)

svn-id: r21303
"
"1f603fdd98959f189f10073bff1d8f83f72eac6b","2006-03-14 23:39:42+00:00","Cleanup.

svn-id: r21304
"
"cc8796248da47d9bb964efddabaca0491ace5122","2006-03-15 05:59:30+00:00","Minor cleanup

svn-id: r21306
"
"34b89a3258cd73087ad5b0a41ba82e7171094fd1","2006-03-15 06:29:28+00:00","Correct VAR_OVERRIDE settings in override opcodes

svn-id: r21307
"
"58eed3830bfbea9a05b903c94a4331597fc90dc6","2006-03-15 07:43:44+00:00","* 'make bundle' now copies the default theme files into the bundle.
* Common::File will now look inside the application bundle on MacOS X for a file if
it can't find it anywhere else (so it'll find default-theme.ini and .zip)
* Cleaned up some #ifs.

svn-id: r21308
"
"dabfcbf10c6bd6048f677017402ec335bb3c60e9","2006-03-15 09:41:22+00:00","Moving the MacOS bundle file checking to another function, it was getting called redundantly.

svn-id: r21309
"
"15d4593412d4151d12232588ca37b5257b0aa333","2006-03-15 11:37:12+00:00","In progress work on disassembling player tick/actions handler method

svn-id: r21310
"
"52b3c957fe72b36092e61847733d2d72e0b0d435","2006-03-15 12:32:07+00:00","The backend handled cursor drawing -- no need to update the screen manually.

svn-id: r21311
"
"c473ded02284334e57ebe5c32f37e7fb644a7841","2006-03-15 12:44:41+00:00","Revert previous change. I'm told some backends don't draw the mouse cursor
automatically, for some reason.

svn-id: r21312
"
"286434c88d83a45b8031ed534f1d3b418c1ac68f","2006-03-15 13:32:35+00:00","Added mouse wheel scrolling to save/restore dialogs.

svn-id: r21314
"
"5d0ac7d57c9d2a805449e3ab5ba080ba94d22f5e","2006-03-15 15:35:52+00:00","On second thought, that comment is probably not necessary.

svn-id: r21315
"
"dc2143e6cf4ebd0e7f029201b89b8a5a46b0edf7","2006-03-15 15:37:42+00:00","This is a bit of a hack: Before showing the mouse cursor, take care of any
pending events so that the it won't have to do a little dance, catching up,
every time you enter a room.

svn-id: r21316
"
"056fbe48559b4d5050c513ee2e3b09ee0e5a8432","2006-03-15 15:46:25+00:00","Fixed typo in debug message.

svn-id: r21317
"
"2eaa929af786880ae8de616ca3c4b8b9b38a18c7","2006-03-15 17:56:53+00:00","Fix for bug #1449912 (DC: selector.cpp compilation failed)

svn-id: r21319
"
"b46236ed7164f3b242c04fdc116eade68d3ab04c","2006-03-15 21:59:07+00:00","- removes a wrong space in debugC calls in screen.cpp
- implements cmd_brandonToStoneSequence and cmd_pauseMusicSeconds

svn-id: r21320
"
"8f38cb6ff3aa285e5e8a05e4db4b77f94c601347","2006-03-15 22:34:46+00:00","added mouse cursors

svn-id: r21321
"
"0ce2110306b6500961590a4a957a39df377f81e3","2006-03-16 03:15:05+00:00","Add scaling code stub for FF

svn-id: r21322
"
"c821b20400c7741759a082a10b9655affe44096b","2006-03-16 03:19:55+00:00","Remove unused unlock draw surface functions

svn-id: r21323
"
"0843260c29a5ee8fd8227b77cf9737baa3959020","2006-03-16 03:48:42+00:00","Rename flags used for drawing images

svn-id: r21324
"
"5b3b3b21e3daf2654e64bc640463d851689177cd","2006-03-16 04:10:34+00:00","Rename get draw buffer functions

svn-id: r21325
"
"ec05842572a0b82b19a7baadfd9d408828855ce9","2006-03-16 05:41:39+00:00","Remove duplicate fcs field

svn-id: r21326
"
"008b681dace4db5240467dbd0a073a1ea4856379","2006-03-16 07:08:05+00:00","Cleanup

svn-id: r21327
"
"479a1b24c3b785cfa915a689b063ca7c61f24129","2006-03-16 10:30:59+00:00","Cleanup

svn-id: r21328
"
"18808437445c325406ac087e705439ba70f1df7d","2006-03-16 12:04:52+00:00","Add comment about future saveLoad changes C64 maniac

svn-id: r21329
"
"60b66f31dff294595fc648593cf19b05a2204b2d","2006-03-16 12:08:25+00:00","Update comment, to make sense

svn-id: r21330
"
"79b5c11ee24cae949db80040dff269e6851b64f0","2006-03-16 12:12:05+00:00","Minor cleanup

svn-id: r21331
"
"f1c9cd57265c64de835e6e9647afcf0e679651be","2006-03-16 16:35:46+00:00","- Fixes some gfx glitches (the falling feather and the falling leaf now have correct restored background)
- Fixes brandon width value after loading (removes gfx glitch while talking with the tree)

svn-id: r21332
"
"f040ea1e827bf40a862f2f960cc857ad1eff80cb","2006-03-16 17:27:52+00:00","Fixed some comments and made a couple of cleanups to make it a bit more clear
just how similar callbackOutput() and updateCallback3() are.

svn-id: r21333
"
"fa38b770afbe5b9bb7af732d2adadb8f37a203f4","2006-03-16 17:37:34+00:00","Oops. removes some unneeded shifts and fixes now the feather bug.

svn-id: r21334
"
"8fcb38648d69137d5e2ab2111e4dd8f2ba682f2b","2006-03-16 17:39:23+00:00","I don't know if it's our bug, or a bug in the original Kyra music driver, but
updateCallback3() would call unkOutput2(9) in at least one case. This is
obviously wrong because it a) reads outside _regOffsets[], and b) writes to
invalid Adlib registers.

Now unkOutput2() has the same safeguards as noteOff() already had, making
callbackOutput() and updateCallback3() even more similar.

svn-id: r21335
"
"0182b4667927a1ed25bab965f824fd798216805c","2006-03-16 18:01:14+00:00","More renamings:

callbackOutput()   -> setupPrograms()
callbackProcess()  -> executePrograms()
updateCallback3()  -> update_setupProgram()

_unk4              -> _rhythmSection
updateCallback48() -> update_setupRhythmSection()
updateCallback49() -> update_playRhythmSection()
updateCallback50() -> update_removeRhythmSection()

svn-id: r21336
"
"99c34b037717f1062cb79e9cb6f3f3570977f4b6","2006-03-16 18:53:02+00:00","We have several functions where we need to find the pointer to a program or an
instrument. These are found using the lookup tables in _soundData on offsets 0
and 500 respectively. Added helper functions for that, which makes the code a
lot tidier. Particularly in update_setupRhythmSection(), where it's now much
clearer where it's getting all those 'unk' values from.

Use the checkValue() function (which limits the 'total level' to its valid
range) for the calculateOpLevel1() and 2() functions as well.

Renamed updateCallback16() to update_waitForEndOfProgram().

svn-id: r21337
"
"61a5fb70649c4b73f5e2d7b4d88b87222f79a4b7","2006-03-16 20:29:07+00:00","- added defines to handle the different mouse cursors
- revised the way NUM_MAX_PARTDATA and NUM_MAX_ANIMDATA are used
- renamed some variables
- constify'ed function arguments
- minor cleanup

svn-id: r21338
"
"1d8e206333a25fe9a81d29c74144af951425eebe","2006-03-16 20:52:36+00:00","Went through callbacks 51, 52 and 53, comparing them to LordHoto's annotated
disassembly. I think they're correct now, and a bit easier to read. My old
comments were wrong, too.

I think they are for manipulating the Adlib rhythm section volumes. I'm not
sure the Kyra music ever uses the Adlib rhythm section.

svn-id: r21339
"
"05e0542452798b39fd2debe6e8c125e3f6b6f401","2006-03-16 23:22:23+00:00","More cleanups and renamings: _sfxSecondByteOfSong -> _sfxPriority

Added some comments on the strange but probably harmless things going on in
playSoundEffect()

svn-id: r21340
"
"87d74563ddc14d3e46d93275dc1e230d41df57c9","2006-03-17 00:30:58+00:00","Add another German version of puttzoo demo

svn-id: r21341
"
"a908cbed329e92b822704041e232a885a1f1e484","2006-03-17 01:46:36+00:00","Fix endian issues in akos costume code

svn-id: r21342
"
"9ecd855c2b311d24e9ef885d97df3d54c59e302b","2006-03-17 01:55:43+00:00","Fix endian issue in akos costume code

svn-id: r21343
"
"e36edb1b3504165d4aad1c43e10f8722f4283956","2006-03-17 12:03:24+00:00","The opcode functions are not allowed to modify their own channel.dataptr
directly. If they want a new data pointer, they have to use the dataptr
parameter. This fixes a subtle bug that would cause the wrong music to play
when getting the quill in Kyra 1.

svn-id: r21344
"
"4df16b71b842c7777d1900b5494f4ede1d1bc8ef","2006-03-17 13:13:31+00:00","Oops, I never meant to remove *that* line! Put it back again. (This fixes the
flute sound, and probably other regressions as well.)

svn-id: r21345
"
"bbd172559825d015cf308c5b2655c1496b82fb01","2006-03-17 14:19:18+00:00","- Fixes bug #1401432 ('KYRA: Brandon graphics glitch when exiting castle catacombs')
- Fixes some sprite redraw bugs introduced with my last commits
- Fixes wsa drawing bug in the cave too

svn-id: r21346
"
"41b4a6aa7cd5861aacdc107605e64f7f3a48b491","2006-03-17 19:39:46+00:00","Fixes bug #1401337 ('KYRA: Platform with pegasi graphics glitch')

svn-id: r21347
"
"0ebebb1176446512d502794ee25b0b07beab7051","2006-03-17 20:49:12+00:00","Fixes animations when brandon turns inivisible/visible.

svn-id: r21348
"
"dcf029e947fc8cfafe06c86957222040a08df321","2006-03-17 21:59:29+00:00","Further work on disassembling player tick/movement handler

svn-id: r21349
"
"05ee5cf2bdca6b97b6cd7ce93bfbe80cfc9a61fe","2006-03-18 04:41:34+00:00","Extends seq_drinkPotionAnim() so that the color of the flask Brandon
drinks will be correct. Also fixes a bug where an animation
(Brandon ringing the bells) would play too quickly.

svn-id: r21354
"
"a379fe424c02cff2427750c0f5ac1898c7fe93df","2006-03-18 10:30:47+00:00","The camera position is always set by loadRoomWithEgo opcode in HE games, through cameraFollows. Fixes glitches when changing rooms in fbear and other early games.

svn-id: r21355
"
"9cc962e9f15504bbd4cd98183a303efd8b0ec6db","2006-03-18 10:56:52+00:00","Document the autosave_period config file setting

svn-id: r21356
"
"e6f106c1f309c6687ea6f31e2876e93892d854c2","2006-03-18 11:10:16+00:00","Update the known issues section

svn-id: r21357
"
"0f21db8c8e07cb04bb9ebeab45034258b0c60e2d","2006-03-18 11:22:18+00:00","Fixes the color of the quitting dialog text after drinking a potion

svn-id: r21358
"
"30c707056443c0a588b5b053d65340225dc95e44","2006-03-18 12:42:24+00:00","Oops. Theme variables are meant to be case insensitive. Fix comparison
function.

svn-id: r21361
"
"0b0ea17e3c47dfa8181a1ee80c0b89b45fc662ee","2006-03-18 12:43:00+00:00","Remove trailing whitespaces

svn-id: r21362
"
"e60c0441adb663332d0e546421fa715dc5aaecca","2006-03-18 12:43:50+00:00","theme.cpp -> ThemeClassic.cpp for consistency and less confusion

svn-id: r21363
"
"879b5e4064686d9857b4e11e81dd224e16e1d6c2","2006-03-18 13:44:57+00:00","workaround: manually add delay when showing image between levels in gob1 ega

svn-id: r21364
"
"f9f2cd2dbee9988097ecb3fe9f55d7f7d2c1fbbe","2006-03-18 14:43:18+00:00","- started to rework static resource loading
- made some function parameters const (to work with new static res code)

svn-id: r21365
"
"74aa77114317cd4aef82d6f1e4b4bfa82dd59f00","2006-03-18 14:55:29+00:00","Changed 'amiga' keywords to 'isAmiga' in the resource handling code to avoid #define conflicts

svn-id: r21366
"
"544abe3d129d5bf7f6e57ea962e72dbbd0c3e1ca","2006-03-18 15:01:08+00:00","Oops, forgot to change a variable declaration in the last commit

svn-id: r21367
"
"cbf3c06c1df85048f46a0d63f1140f8383d12070","2006-03-18 15:51:09+00:00","adding self to credits

svn-id: r21368
"
"79bd7310418aa1d42b1673c9890c0f5d6b7cd615","2006-03-19 02:50:51+00:00","Add workaround for script bug in Loom (CD)

svn-id: r21371
"
"ead8cb480ab60246d9da46d1195cc6846376807a","2006-03-19 04:36:54+00:00","Updating TODO with X11 backend changes I did a while ago

svn-id: r21372
"
"1b20b068220b30967cfdd290365014ab81c12a1f","2006-03-19 04:41:43+00:00","Skip HSHD block by set size, since there are sound resources (ie Caiman in jungle) which have incorrect size in HSHD header

svn-id: r21373
"
"a441dafae55bcd02d74f16c35ff19db3f84c958c","2006-03-19 04:55:34+00:00","Move the sound loop detection, so it is used by all HE70+ games

svn-id: r21374
"
"8ae4dd6caa4bcca13503d6a024e4ca5d75ff4808","2006-03-19 05:15:06+00:00","Revert FLAG_AUTOFREE changes to loadWAVFromStreammakeWAVStream

svn-id: r21375
"
"6632a4df53bd6cd94d85057ceae10f14108a67e4","2006-03-19 05:15:49+00:00","Revert FLAG_AUTOFREE changes to loadWAVFromStreammakeWAVStream

svn-id: r21376
"
"e636a25a3313da26225e0f5518a67f54092e78e1","2006-03-19 05:55:26+00:00","Adds button press animations to the menu, and resets the cursor when the Dialog of Death pops up. Also, mouse clicks are now registered on button up instead of button down, as in the original

svn-id: r21377
"
"d34d6b17dfc72a1f2f15ce24d5ae12240809afea","2006-03-19 07:54:30+00:00","Fixes a potential problem in the pathfinder where an array could be accessed with a negative value in certain rooms

svn-id: r21378
"
"3e9246331ecdcb1c2c5f51178a2eb18424cbe8aa","2006-03-19 08:35:43+00:00","Makes sure Brandon actually dies when he turns to stone in the kyragem room

svn-id: r21379
"
"f26dee75995e6349385e59f67d467d85ce8787f2","2006-03-19 10:34:02+00:00","Closer match difficulty of insane in PC version of FT demo

svn-id: r21380
"
"3f172bb3c2d1cadfe1d1bf31cfcab4f1d478673c","2006-03-19 11:10:24+00:00","Remove unused cases of getKeyState(), checked against scripts of FT, Dig and COMI.

svn-id: r21381
"
"4e6d8844f3e52646c7e99db512443ed8df984aa7","2006-03-19 12:04:42+00:00","Added kyra engine to the list of new games.

svn-id: r21382
"
"f7d16b000048cc50fa7922e64b55a2c2febb1f19","2006-03-19 14:11:32+00:00","Updated/added some comments on VOC/WAVE functions

svn-id: r21384
"
"99635b6a900f41dcec7d7fd17f11e297ece6210b","2006-03-19 17:14:43+00:00","Removed implicit screen updates (see also the discussion on scummvm-devel)

svn-id: r21385
"
"03734aa876e39561f5b8569cc75ad769c8dce1c1","2006-03-19 17:25:13+00:00","Moved filename substitution code from scumm.cpp to plugin.cpp

svn-id: r21386
"
"bc5ac5eaf4b707d0fdfcad99ff3d2b35bc5a7410","2006-03-19 17:26:11+00:00","Fix encoding issue (see scummvm-devel)

svn-id: r21387
"
"5f800bb9da1a1f4c9544669d8e20031e033b8dc8","2006-03-19 18:18:07+00:00","Fixed my fix regarding the encoding of some filenames: Provide both Windows and UTF-8 encoded versions of the German puttzoo

svn-id: r21388
"
"3aa7e9fa8096975d32ad47dfdd4147dc3a069ecb","2006-03-19 21:58:53+00:00","Bring MSVC71 project files up to date. Courtsey of Quietust.

svn-id: r21389
"
"6b56af989f30381eb493440557a5123525235efd","2006-03-20 02:04:14+00:00","The Hercules specific screen size check is no longer required

svn-id: r21390
"
"fce18c2e13392c4e347c821e56381cd19afb7ef4","2006-03-20 12:32:55+00:00","Bump theme config version number to avod confusion. A key was added there,
but I didn't bump it last time.

svn-id: r21391
"
"c506e452f1a99250e1b2d1f9d92bf7ee04a4b6a0","2006-03-20 17:33:08+00:00","Initialise _haveScrollButtons, since Valgrind complained about it.

svn-id: r21392
"
"47a643ce406c9b7cc988c5e7d7c290f55e9526ca","2006-03-20 18:28:35+00:00","Updates the config version for the new theme to 4 in the warning which is printed if the version is too low.

svn-id: r21393
"
"9031b27349c9ceaac6adce49e44b929cdc106529","2006-03-20 19:01:39+00:00","Implements cmd_shakeScreen.

svn-id: r21394
"
"3586905f93ab27bd1274ee432ff24281f2fd14bd","2006-03-21 13:48:51+00:00","Fix bug #1455213: 'GUI: ExtraPath won't display' and turn theme version
into #define.

svn-id: r21395
"
"0c0c41d495b35b44ab3b17b39649b5a09d9afc1a","2006-03-21 17:17:24+00:00","Implemented 'sound triggers' so that the music does not stop shortly after
entering the castle. I hope this is a fair approximation of how the original
worked. Of course, this led to a couple of more renamings:

_unk5              -> _soundTrigger
updateCallback54() -> update_setSoundTrigger()
snd_setUnk5()      -> snd_getSoundTrigger()      (yes, 'get')

At the moment, the only known sound triggers are the ones in the castle. If an
unknown trigger is set, the debugging messages will be really, really noisy. I
don't know if I should consider this a bug or an extremely annoying feature.

svn-id: r21396
"
"e0cf2743c9b211142cee27fc58459f18985db514","2006-03-22 00:24:10+00:00","Support for Russian FOTAQ

svn-id: r21398
"
"5a8a32e350763639d9256b8d90bc4facc3ea72be","2006-03-22 06:21:17+00:00","Add initial support for Amiga and Macintosh versions of The Feeble Files

svn-id: r21399
"
"c0198b44647cb330489adf388b078b644354c0d5","2006-03-22 08:27:41+00:00","Fix sound regression in FF, caused by last commit

svn-id: r21400
"
"00d44af2c19f6bb022f3bf22485e9ee2f611cc34","2006-03-22 08:56:10+00:00","Skip columns isn't used for overlayed or scaled images in FF

svn-id: r21401
"
"857cf7189a402dd72a010f181d5beee053fdf951","2006-03-22 09:14:28+00:00","Fix regression in 2nd room of FF

svn-id: r21402
"
"60732d70f50339650d831ff0712e902bb08292af","2006-03-22 10:04:01+00:00","Whitespace changes

svn-id: r21403
"
"e4664606f78b6a5054abff3ff51acf6c42657c9f","2006-03-22 10:32:32+00:00","Preliminary (weasel-word for 'probably buggy') implementation of the remaining
parts of scaleClip(). I do see a scaled image of Feeble, but it's very glitchy.
On the other hand, I get the same kindof glitches when drawing him unscaled, so
maybe there is garbage left in the scale buffer from previous frames.

svn-id: r21404
"
"6227f38cba05d89178be16c92c5f7adc0df53504","2006-03-22 11:57:46+00:00","Small correction to scaling code in FF

svn-id: r21405
"
"3110c11ea1295dd8d913193f5952b7a1034cfe69","2006-03-22 13:54:26+00:00","Rename draw buffers correctly

svn-id: r21406
"
"a8c0079924053cc349c53f9c0e448daf2d1a2557","2006-03-22 23:38:16+00:00","Code for inverted rect when scaling images of FF no longer required. Minor cleanup

svn-id: r21407
"
"aad9a340bec73420bce59f87938e2b65147377ab","2006-03-23 02:48:53+00:00","Fix compile without ZLIB support (GP32).

svn-id: r21408
"
"85661bca032adc646f9d6b82517d54b987767298","2006-03-23 03:02:04+00:00","Update port.
* NO SOUND support.
* New asm functions.
* Prepare for MP3 / OGG

svn-id: r21409
"
"d0c73b346e68b4519f6852a484fd11f81dcd7642","2006-03-23 03:08:05+00:00","Cleanup Makefile.

svn-id: r21410
"
"36302c09218855f637794ef4a589dc69946c0e44","2006-03-23 03:15:39+00:00","Make copy protection in OS and FW turnable. Still buggy

svn-id: r21411
"
"fced8df1621a44c2cfd94073db684e01d0ed1a2e","2006-03-23 03:17:47+00:00","Got rid of ASSERT and ASSERT_PTR defines

svn-id: r21412
"
"6faa76d28758e9bea6e2cbfb8c7fa985c4bed1d5","2006-03-23 03:40:23+00:00","Made mouse more responsive

svn-id: r21413
"
"0b35672f782f21b4937751c4bb0fb486e65b4e92","2006-03-23 03:45:52+00:00","uint8 -> byte

svn-id: r21414
"
"bc8f63483423e8a0b42c7ccc46c45831a5493657","2006-03-23 03:55:00+00:00","Match game speed with original

svn-id: r21415
"
"ddc1a7a52fb055e8670a2df240fc8853ef351814","2006-03-23 04:41:06+00:00","Add opcode 161 difference in FF, fixes some glitches in 2nd room

svn-id: r21416
"
"140c0d9a3cfb693fe714270161b9200babbff71c","2006-03-23 04:49:03+00:00","Minor changes for FF and cleanup

svn-id: r21417
"
"f5966123443f89e1f1a1b6859dc077c679f6e715","2006-03-23 21:26:13+00:00","Partially disassembly of the pathfinding code and miscellaneous support methods

svn-id: r21418
"
"5d1b4d8f78352f4bfb0073d0ab53647377c98f96","2006-03-23 22:59:38+00:00","Implementation of AssociativeArray. Transferred GUI to it. Now it is much
faster.

svn-id: r21419
"
"819033b6499cf2cbfacb167d8e7317bfde86ad94","2006-03-24 01:24:26+00:00","o Move built-in evaluator constants to AssocArray to speed it up
o Introduced .align text widget property
o Moved all text widgets to use it and populated theme config file

svn-id: r21420
"
"a9b174abb3a8236272ad7ba68c4364b85e0a8063","2006-03-24 01:26:25+00:00","Bump theme version number

svn-id: r21421
"
"dabcc4cc9b17f1ba32818108720d62195ad647da","2006-03-24 01:45:03+00:00","Check values loaded from theme INI and give meaningful errors instead of
bad crashes on blitting stage.

svn-id: r21422
"
"3e1afa4a2f5e7920782647d690d6108021b98719","2006-03-24 03:33:47+00:00","o Rearranged options dialog
o Made button corners less round to match mock-ups

svn-id: r21423
"
"58b14bab3cde4c0fc8febe7c10fcc64a95dc24f3","2006-03-24 14:14:29+00:00","Using NULL as a default value is not working in general (e.g. for Common::String) -- force explicit definition of a default value

svn-id: r21424
"
"832d795959351acd976605a89817769b5b534998","2006-03-24 14:15:32+00:00","Some ideas on streams added to the TODO

svn-id: r21425
"
"08ad918af6f5e35d959177b82236965a3048eab9","2006-03-24 14:15:45+00:00","Reduce (indirect) dependencies on gui/eval.h (and thus common/assocarray.h) to a minimum

svn-id: r21426
"
"1805f42eea81d69a0285ab57d655dfb40e9de0f5","2006-03-24 14:17:47+00:00","Oops, accidentally commited the wrong patch (had these lines commented out for testing)

svn-id: r21427
"
"ae0cf6e88dc31376d14cf65a9fb9ce443b822df3","2006-03-24 14:30:33+00:00","Cleanup for the AssocArray template: int->book, put common code into a new lookup() method, and some other tweaks

svn-id: r21428
"
"1f9566129c8f62ee1b2b866eba0bd4021781f919","2006-03-24 15:22:17+00:00","Some more cleanup in AssocArray

svn-id: r21429
"
"7307c4cb3d9bcb0cb4676803bf619e072f6b0076","2006-03-24 15:39:07+00:00","- moved type aa_ref_t into AssocArray, improving code readability a bit
- added new 'operator[] const' method, useful when accessing const instances
- removed the default value (if you access an entry without first checking that
it is actually there, it's your own fault)
- replaced 'index' with 'key' which seems more logical and avoids troubles with
certain systems that #define index in their system headers

svn-id: r21430
"
"9dc07c11cd8f7fb88de27d2ac423a8dc7fd25d56","2006-03-24 16:53:32+00:00","- replaced the hash table size heuristic with a table of hard coded table sizes
(taken from the GNU ISO C++ Library), which are all prime
- replaced the string hash function by one that works slightly better & faster
- changed various types to unsigned
- added code to help debug the number of hash collisions (off by default)

svn-id: r21431
"
"1c061dea4be2186b39020cb8cf7352b7ed1efdff","2006-03-24 17:13:24+00:00","Changed the DEBUG_HASH_COLLISIONS feature: Now measures the ratio between lookup collisions and total number of lookups

svn-id: r21432
"
"aa743f8920f09b743c9d9baf8d353f0a3e34cec4","2006-03-24 17:39:13+00:00","Fix chechbox label alignment.

svn-id: r21433
"
"4420e7b98a43c92bb2b01ecce72d86e228e8948e","2006-03-24 17:39:55+00:00","- Modified the 'credits' target so that it first generates the files in the
scummvm module before trying to go outside (which may fail depending on the
developers setup)
- Changed the paths to the web/docs modules based on the assumption that we are
working in a checkout of the complete Subversion repository.

svn-id: r21434
"
"f433bdb566111af3d6570a5bff1e4c381f10e1d0","2006-03-24 17:40:34+00:00","Removed obsolete test stuff from my credits description :-)

svn-id: r21435
"
"7569f796ec0a0cee5b19440e9dfe4c35696c8e60","2006-03-24 18:10:41+00:00","Fix crash in Options dialog in 320xY mode. Shadow was drawn off-screen

svn-id: r21438
"
"9586f11bdfeb0165723d6a8ba0a21326faff83f3","2006-03-24 18:15:57+00:00","fix ITE SUNSPOT music loop

svn-id: r21439
"
"212b150b6fad89d5a883d6ea78372b31b64dbea3","2006-03-24 18:30:34+00:00","Fix MSVC warnings

svn-id: r21440
"
"62d2bcf7359cada8c97e84cf6bf3831198576979","2006-03-24 18:32:10+00:00","Fix MSVC warnings #2

svn-id: r21441
"
"3331de7105fe8ece9268ad0bc9123dba01a33a2b","2006-03-24 18:33:47+00:00","Fix MSVC warnings #3

svn-id: r21442
"
"22042bc63741321557b401833adf9d2ccf10eb3b","2006-03-25 04:17:17+00:00","- Implemented case insensitive file reading. Left old system as a fallback
in case some engine writer decide to do something unwise
- Removed used of ConfMan.getKey('path') in file-related cases, because
now File class handles that
- Fixed bug in ScummEngine_v80he::o80_getFileSize() where path delimiters
weren't translated

svn-id: r21443
"
"4577ac2f65471631fa96a9dac0acb0ef355b4ad9","2006-03-25 04:28:39+00:00","Add Blue's ABC Time and upgrade demo target to full game

svn-id: r21444
"
"03202876cf1bef4d07177c53609f3e698acabbe5","2006-03-25 04:33:33+00:00","Minor cleanup

svn-id: r21446
"
"2c279848d8df0e060e3cf3ebadf3d679d9398a66","2006-03-25 09:55:28+00:00","More renamings:

unk11 -> durationRandomness

updateCallback12() -> update_setupNoteAndDuration()
updateCallback26() -> update_setupDuration()
updateCallback44() -> update_setDurationRandomness()

svn-id: r21447
"
"737c52590b3ae1d19a1fc193f143e58dea670886","2006-03-25 10:11:38+00:00","I believe that the purpose of updateCallback45() is to add a signed value to a
channel's unsigned tempo. Rewrote the function to make this clearer, and
renamed it update_changeChannelTempo().

svn-id: r21448
"
"a98aea6efd08840fed7fc2bd2e5d2826eb5e4897","2006-03-25 10:39:05+00:00","Add kListAllNoRoot type to listDir() to handle recent file class changes, on file system backends which use _isPseudoRoot

svn-id: r21449
"
"ef6baca2ac40bc4652bba9a791db96ca07b2a6a9","2006-03-25 11:01:00+00:00","Move convertFilePath() to ScummEngine_v60he, to allow use by earlier HE games

svn-id: r21450
"
"f25d49f826b7ddfd9ce96beca6f0b0a0a6d82a00","2006-03-25 19:18:09+00:00","- Move AddDefaultDirectory() calls in somon engine to constructor
- Move AddDefaultDirectory() from NewTheme.cpp to main.cpp

svn-id: r21451
"
"e373c9b7b56d3b4b80ab2357363fdc4e48c97e16","2006-03-25 19:30:10+00:00","- Revert my last change with moving addDefaultDirectory() from TheneNew.cpp
- Removed locking of further directory adds because it did not work for themes.

svn-id: r21452
"
"47b3a748f4bfd4d393fb271973bff4f3aa97debd","2006-03-25 19:46:58+00:00","- Print more meaningful game names on detection stage
- Move detection debug messages from level 0 to level 2

svn-id: r21453
"
"575c831684d2c2584c6ff64e2e6d4ce960526a7e","2006-03-25 20:15:41+00:00","fixed wrong computation of decflag in AkosRenderer::drawLimb (HE specific, bug #1416186).

svn-id: r21454
"
"dd505ff6aebbe3f321d8bbebabc32a471c2ac0c8","2006-03-25 21:17:38+00:00","Fixing bug #1458388: 'SIMON1: Game Detection fails'.
Sometimes instead of 'GAMEPC' we get 'GAMEPC.' (note trailing dot)

svn-id: r21455
"
"67b8589c18ec712c5c577394d5213a54dcc005cc","2006-03-26 00:24:00+00:00","Reduce size of saved games for HE games, music/speech resources don't need to be saved

svn-id: r21456
"
"e3173172b9ae9b2cf162847cccb46e70c1c10bb8","2006-03-26 04:22:47+00:00","Implement feature request #1393200: 'target_md5 even for command line'

svn-id: r21457
"
"09b8869ef68e03429a70827d680131fe4ef1808a","2006-03-26 04:50:09+00:00","Implement feature request #1450364: 'Suggestion on how to cope with
fan-translations'

svn-id: r21458
"
"d8004bff5163e3c368ce91ba9124afde7360d093","2006-03-26 06:22:41+00:00","Added support for mouse wheel scrolling in save/restore dialog.

svn-id: r21459
"
"c1bd25617b5b0c95d74385eefc275d897aa45bb8","2006-03-26 09:06:44+00:00","Increase size of _charsetData to 16 * 23 for HE games, fixes subtitle color glitches in Buzzy games

svn-id: r21460
"
"59dd971a02dfa875cfa8c476b505f99f95b68afa","2006-03-26 09:09:35+00:00","Ooops, correct cut and past error in last commit

svn-id: r21461
"
"26c0d2b4fa995def7add48d57028b6644779b915","2006-03-26 09:21:07+00:00","Always use the correct string slot for HE games specific cases in decodeParseString()

svn-id: r21462
"
"23c692f09f513a6fc2119e3d42f9920e3bc388b0","2006-03-26 22:11:40+00:00","Cleaned up update_playRhythmSection(). It's almost possible to understand what
it's intended to do now.

Renamed _unkOutputByte2 to _vibratoAndAMDepthBits. It's a pretty terrible name,
but that's what it is: the two most significant bits of the Adlib BD register.

Renamed _rhythmSection to _rhythmSectionBits for consistency: It's the five
least significant bits of the Adlib BD register.

(The remaining bit is the rhythm on/off bit. I don't think we store that one in
any variable.)

svn-id: r21463
"
"3bb25707b23720c23ed5206b9f8023f1381b5dae","2006-03-27 12:49:17+00:00","Add FF support to dump_bitmap()

svn-id: r21464
"
"e265f1ab5744592f104adcf1937ede900b81ae70","2006-03-27 12:54:53+00:00","Commited too much

svn-id: r21465
"
"c12839ec182ebd5435aae9c0390f63d547da4351","2006-03-27 13:30:28+00:00","Always init state.depack_cont

svn-id: r21466
"
"017bcdb44510aeadfa1cf1327b9889da22443fa2","2006-03-27 13:32:44+00:00","Adjust width in dump_bitmap() for FF

svn-id: r21467
"
"7191d474a463a2821ce8cdb1c89b5481416985a0","2006-03-27 16:56:08+00:00","improve game detection:
- start process speedup (remove already scanned files)
- merge md5 & game files list

svn-id: r21468
"
"518c7b871f4dca0a9dd767409071cb8e10925bbb","2006-03-27 18:20:19+00:00","Comments out unneeded code in enterNewScene (only used for cd audio version).
Fixes bug with stopping pegasus music before the animation finished.

svn-id: r21469
"
"b54d73d220d1bea3e1e8fcdcb2c48c4e51344f67","2006-03-27 21:32:43+00:00","Further progress on disassembling pathfinding and support methods

svn-id: r21470
"
"950c3451a2dbadffa6437e98a20eb3a4163216e2","2006-03-28 09:37:50+00:00","Removing bogus leftovers

svn-id: r21471
"
"9f93e5bb81a54a98eb7957209662f152e2962679","2006-03-28 09:42:54+00:00","Renamed various container isEmpty() methods to empty() to match STL conventions

svn-id: r21472
"
"f4339ff6c438149d7fad05db053444109a4c5611","2006-03-28 10:05:25+00:00","- Renamed class AssocArray to HashMap to match our existing class Map (note also
that many STL implementations have a class hash_map next to class map, too)
- Changed some static File class member vars to be normal static variables, in
yet another attempt to reduce header dependencies (in this case on hashmap.h)

svn-id: r21473
"
"dae92b83f25b12f10114ab6d7d3e6e262df243b1","2006-03-28 10:54:02+00:00","Increase the load factor for our hashmaps from 50% to 75%, to be slightly nicer regarding memory consumption

svn-id: r21474
"
"92437ce549fc380eef0f2849bc42d725f4d3a38a","2006-03-28 11:21:13+00:00","Reduce the differences between Map and HashMap some more (in the end, we should be able to easily switch between the two, e.g. in the ConfigManager class)

svn-id: r21475
"
"41991f88a930d55804e2ed5b30cf04c4c3943c68","2006-03-28 12:34:34+00:00","Added iterator support to hashmap, as well as erase & find methods (all currently needs more testing and may be buggy)

svn-id: r21476
"
"37c79be74011eae8a78e369b455c565ebe5b6c8d","2006-03-28 12:35:50+00:00","- Renamed Map::remove to Map::erase (matching the STL and HashMap)
- Added Map::find() (see also HashMap), and made the ConfigManager use it

svn-id: r21477
"
"46270a5dd7ffd36ba741f54865fa3715e8b5c6e7","2006-03-28 13:33:18+00:00","Update game detection code, with recent changes from SAGA engine

svn-id: r21478
"
"c09d1ea52032be21fed34fa1ca17484af202b547","2006-03-28 15:15:36+00:00","- Commits heaviliy modifed patch #1459951 ('KYRA: Combining MIDI music with Adlib sfx') (created a wrapper class for two different sound drivers instead of adding a new variable to the KyraEngine class and chaning stuff there)
- Prevents to play track 0 for non mt-32 midi devices (got ugly sound output with windows midi)

svn-id: r21479
"
"62da4eec26f26d5e2f45af02f5185799df58452b","2006-03-28 15:15:45+00:00","Get rid of Map::addKey

svn-id: r21480
"
"d3e08aedbb838a36d4ecfc11f87314cf2f1db04f","2006-03-28 15:16:04+00:00","Adapted unit tests to current situation

svn-id: r21481
"
"f38d89f3273a5832ec00f35955448a974292982e","2006-03-28 16:19:18+00:00","Set correct load factor for hashmap (just wanted to check if anybody is paying attention to those commit messages *cough* ;-)

svn-id: r21482
"
"9c94670e22cb68e32fd38c0d2b009539e35d4a71","2006-03-29 06:24:13+00:00","Add another English version of Monkey Island for Macintosh

svn-id: r21483
"
"3820593bb8dfdca4e2e17c70b278065b7f7894d9","2006-03-29 10:25:48+00:00","bringing cxxtest-3.10.1 to ScummVM's main branch

svn-id: r21488
"
"ebeaa6a5c10101cab91bc151d69a6f31eed6b819","2006-03-29 10:27:43+00:00","Removing some unnecessary semicolons (avoiding compiler warnings/errors)

svn-id: r21489
"
"b1514bb833339526b53e9638bffa5eb214fae8ef","2006-03-29 10:35:45+00:00","Added a minimal README for our unit tests, and moved their build rule to a new test/module.mk file

svn-id: r21490
"
"c5511a049ab57a07f92d0de8cd66d2d13643563e","2006-03-29 10:59:25+00:00","Removed some more semicola

svn-id: r21491
"
"4d4c29787eaee56904661df0fc183bd7b614609d","2006-03-29 11:00:39+00:00","Improved the 'test' build rule

svn-id: r21492
"
"7bf3437c1cff17f49db42872ebe389c1cccd5a8c","2006-03-29 11:05:38+00:00","Cleanup test code in our 'clean' target

svn-id: r21494
"
"f6e6017d969c3a66d66307e4e9577ea9a7402b7d","2006-03-29 12:03:02+00:00","Added stubs for a couple of FF opcodes.

svn-id: r21495
"
"70040aed47c2bc4363d59e4673e8539bb807ed66","2006-03-29 12:09:15+00:00","cleanup

svn-id: r21496
"
"506f33a025efd145d2ab9bdf48fc1f770588c0a3","2006-03-29 12:15:08+00:00","Add opcode difference in FF

svn-id: r21497
"
"76cfaca23d97102cf17dd5af3e70bfda00cb8d0d","2006-03-29 12:47:35+00:00","- Added some explanatory comments (everybody feel free to extend them)
- Unified the various typedefs
- Added a couple FIXME comments (which porters may want to resolve)
- Some cleanup

svn-id: r21498
"
"0da5fb4c1c14e5953b2df8e495681bb5f70dec60","2006-03-29 15:51:13+00:00","Alphabetical build order

svn-id: r21499
"
"8cdee5a9310aecb0c8e39ceee4059b221d80ee0f","2006-03-29 15:59:37+00:00","Do not #include endian.h in scummsys.h (cuts down deps on endian.h from ~400 to ~250). Many greetings to eriktorbjorn, and have fun recompiling.

svn-id: r21500
"
"014dde3de3519e0b386ae1c16c979bbf4a537489","2006-03-30 00:32:29+00:00","Add missing check for invalid object number in getObjectData opcode

svn-id: r21501
"
"1ec46bae379bc682152b8ea00ec4cb8085d14587","2006-03-30 11:52:49+00:00","Allow interactive mine road in PC version of FT demo

svn-id: r21503
"
"3e974d3604a30a6387d3699a0e25366d418d169a","2006-03-30 13:47:18+00:00","Limit INSANE to existing enemies in PC demo of FT

svn-id: r21504
"
"e504e814b102992f2aa3dbdb7aa47a8dcaa3fec1","2006-03-30 23:58:37+00:00","Improve mine road in PC demo of FT

svn-id: r21505
"
"469b1420da8e646a6f6fd3852af3326f9630e274","2006-03-31 00:39:53+00:00","Fix sound glitch in PC demo of FT

svn-id: r21506
"
"f991b88da8d4e4587236845eb323b2b0aaa4fbc1","2006-03-31 01:28:35+00:00","Fix skipping insane sequence in bundled Macintosh demo of FT

svn-id: r21507
"
"c26b762f481123b3b6b6e644fd8d1d43f543815f","2006-03-31 06:42:56+00:00","Made readFileToMem() print a more useful error message than 'File is not open'
if the file could not be opened.

svn-id: r21508
"
"111c0d1ddd82fbc062089ba14878c3950899f7fd","2006-03-31 07:20:16+00:00","Some new & extended test cases

svn-id: r21509
"
"e0b3e777cf69105d1c3c887539d4da6577ac071e","2006-03-31 07:22:49+00:00","Added some functor objects (for comparision and hash computations), similar to those present in the STL

svn-id: r21510
"
"a23fba7a425da73201ae1c2a5af68bf33286b79b","2006-03-31 07:30:43+00:00","Avoid using Map::merge

svn-id: r21511
"
"00bbc5c96ccb01dcbe85c6e51aa4b4814e184d8d","2006-03-31 12:16:19+00:00","Small correction in the TODO file (use proper class names)

svn-id: r21512
"
"0335bab074bf7764964b46101772b27dbc2dfb24","2006-03-31 13:00:06+00:00","Make corners of SCUMM load/save dialog round.

svn-id: r21513
"
"c4349e88f730f4f171969f7c4f6740c4ecfb0e21","2006-03-31 13:06:23+00:00","Rename two WizParameters fields

svn-id: r21514
"
"088b0afad5e4aae4702831314641a6a3564fb165","2006-03-31 22:15:42+00:00","Modified the List postfix ++/-- operators to simply invoke their prefix counterparts; also removed Symbian/Palm specific hack

svn-id: r21515
"
"661128b2b428362d5238d1a41e138f2a036e5017","2006-03-31 22:17:06+00:00","Modified our Map class to use a 'Less' function instead of a 'strcmp'-like comparator functor, to match the STL map template

svn-id: r21516
"
"c50bfd9d34932fad078e1485164cdfa255f1020e","2006-03-31 22:19:39+00:00","Modify HashMap to allow client code to override the equality/hash functionality via functors that are specified as template paramaters (emulating the hash_map class which many STL implementations provide) -> this is necessary to allow e.g. HashMaps that use case insensitive strings as keys

svn-id: r21517
"
"05b0ed007e6aef996d0cd4aa15804d468a323c83","2006-03-31 22:38:27+00:00","Disable DEBUG_HASH_COLLISIONS again (accidentally got enabled in my previous commit)

svn-id: r21518
"
"e947bd5e271f35650cb80ac4c75e9ebca77446a1","2006-03-31 23:10:24+00:00","Updated ConfigFile/ConfigManager classes, that work with the updated Map class, and optionally support HashMap (disabled for now)

svn-id: r21519
"
"8272591c8d11edff8fe9e0dd3f05a546a7e29658","2006-03-31 23:49:08+00:00","Add size() methods to Map and HashMap classes

svn-id: r21520
"
"8a5df05aa02c2cb08b2d59bf904bc05087fe5c31","2006-03-31 23:51:19+00:00","Hide eval debug output deeper to level 5. Report total number of defined
variables.

svn-id: r21521
"
"7a81cc76e16402e5f5dddcaed52af795a64197fa","2006-04-01 06:38:47+00:00","Fix painting and fridge magnet palette glitches in thinker1

svn-id: r21522
"
"361572af2cafd5b488bdf9b582895820d1208b7f","2006-04-01 11:25:08+00:00","Patch #1432378: BASS: Memory leak, patch included

svn-id: r21523
"
"d10929b3945da6a2909e34c0cc2b730346a0a6b2","2006-04-01 12:26:50+00:00","Always check array bounds are valid in HE games, matching original

svn-id: r21524
"
"0bb6d640647761ecd86eab6d1984dfb96b2e3a30","2006-04-01 12:47:09+00:00","A lot of code in sword1/router.cpp and sword2/router.cpp is virtually identical -- unified the two files in many places (but a lot more could be done, feel free to pick up and continue this work)

svn-id: r21526
"
"9ed2d26db58169f139c115e28d335717c565cce7","2006-04-01 17:36:43+00:00","Simplified the File::addDefaultDirectory(Recursive) code; avoid scanning directory multiple times

svn-id: r21527
"
"ee62cd3c518cf513cfb1a535af28aaeb74cbe0c0","2006-04-01 18:13:06+00:00","Generate an error when kGenAsIs is used with an unsupported platform, instead of silently continuing with a  bogus _fileHandle (leading to odd crashes)

svn-id: r21528
"
"46360fcc77806c9305efd643632681d55b61b1dd","2006-04-01 18:14:34+00:00","Changed output path for md5scumm target (matching the credits target: assumes that you are running the target from inside a full checkout of the ScummVM SVN repository)

svn-id: r21529
"
"e390639dd8f6fcf85e36ede9897d56a21ee22078","2006-04-01 18:20:35+00:00","Use extra_versions to compute ScummGameSettings (currently only compared to the value determined via multiple_versions_md5_settings but not actively used; requires more testing, in particular with HE games)

svn-id: r21530
"
"49d63590ab3878486ebb91bd201b4e5a0edc6431","2006-04-01 21:30:06+00:00","Removing superfluous addDefaultDirectory call

svn-id: r21531
"
"8f691e51fa83b4f2dd74b2b429977691994a9f4e","2006-04-01 21:31:27+00:00","Removed superfluous addDefaultDirectory call, as well as two unused bad member vars

svn-id: r21532
"
"f59d472155729a7a248b4b3d834768cac82014ff","2006-04-01 21:42:11+00:00","Simplified the loading of resource.inf

svn-id: r21533
"
"d61b1045682e054cb99c3497da8b79a48f104c28","2006-04-01 21:43:49+00:00","Removed yet another superfluous addDefaultDirectory call, and removed the unused Engine::getGameDataPath method (just use _gameDataPath directly if you need this)

svn-id: r21534
"
"2197597f9aa345d1c52806c502bf4f9f6c09a598","2006-04-01 21:52:33+00:00","Moved File::resetDefaultDirectories from Engine destructor to runGame (since that is the main spot where we call addDefaultDirectory)

svn-id: r21535
"
"d6f348638db398b29a574d52902a110cb067549e","2006-04-01 21:55:41+00:00","Guard against too many entries in resource.inf, since there has been a TODO
comment about that (removed in the previous commit) since roughly forever.

svn-id: r21536
"
"0ee4f304b87f76a565a98bd724fae0844a6f5dc7","2006-04-01 21:55:45+00:00","Properly use registerDefault to set the default value for autosave_period

svn-id: r21537
"
"c4955466fd27eef92c551f630cdef5c51dce1e74","2006-04-01 21:56:10+00:00","Simplified loading of startup.inf

svn-id: r21538
"
"8b1c432bac1dc6efde4a86f7f3d4a51f2ae3e713","2006-04-01 22:31:45+00:00","Switch ConfigManager to use HashMap (seems to work fine over here, but an older version killed my scummvm.ini, so use at your own risk (not that you really have a choice. I just like being evil *g*))

svn-id: r21539
"
"3de55677b92bfbb07d8e5acefaaa19df12c3cbbf","2006-04-01 22:31:57+00:00","Typo

svn-id: r21540
"
"a2c4795f326e62fe8ff74ce0e29e0174d4dab330","2006-04-01 23:31:51+00:00","Update gameDataPath() calls in engine, to fix compile

svn-id: r21541
"
"587431f8e838bd08d081d65f18b1f9b8f04566b8","2006-04-02 00:08:22+00:00","Fully and officially renamed our main function to scummvm_main, thus making
various backend specific hacks unnecessary. As a consequence, it is now the
responsibility of the backend to define main. Hence I adapted the SDL backend
accordingly.

svn-id: r21542
"
"b2a5647887c003996bde99a4041e463d93e04a47","2006-04-02 00:18:33+00:00","Removing undocumented Allegro/Qtopia port stuff -- if anybody is working on either port, feel free to re-add it, but this time, document it and make sure it's clear how to build that port

svn-id: r21543
"
"d0b8efd5758d0fb2e77f77e6d5ef1cdd2555abd1","2006-04-02 00:56:21+00:00","- moves some code in ThemeNew.cpp (calcGradient and calcAlpha to the bottom)
- added possibility to use a shading effect on inactive dialogs (luminance and dim are builtin, and special ablility to specifiy a own expression, evaluated via the evaluator)
- adds also a color cache (atm it's generated on startup)
- uses luminance effect by default
- bumps theme config version to 7

svn-id: r21544
"
"8a8bdcd1f873f940cbe44fad51166d78447f460f","2006-04-02 00:56:53+00:00","Moved all debug functions to from main.cpp to util.cpp

svn-id: r21545
"
"70cc7b8c26b0adc449e9a9df8f3c67bd660deee6","2006-04-02 01:08:16+00:00","- changed standard inactive dialog effect to dim with 30% instead of luminance

svn-id: r21546
"
"9b08d8e467077a2235037c305db22aa4ac82d599","2006-04-02 02:23:29+00:00","Moved the Win/Symbian specific stdout/stderr redirect code from base/main.cpp to sdl.cpp, where it belongs (considering that it is backend specific code)

svn-id: r21547
"
"041bc770e82bf67c2e1535c165d42926375f866a","2006-04-02 02:40:39+00:00","ps2_fopen uses getGameDataPath -- added FIXME comment that explain how it probably could be fixed, but I'll leave this to somebody who can actually compile & test this port :-)

svn-id: r21548
"
"a30d832ee08575bc02ab53c9daeccba830dec5a9","2006-04-02 09:23:18+00:00","Removed built-in endian/alignment verifier (it's original purpose is mostly gone now that we have a configure script detecting endianess and more)

svn-id: r21549
"
"2fd027846e8bc7bba4029d9c8d774a4cbab6218f","2006-04-02 09:26:51+00:00","Moved AmigaOS 'magic cookie' to sdl.cpp, as it is port specific (porter says he might remove it completly in a future version)

svn-id: r21550
"
"32de3441111f67d6330526a2d825775e0af19591","2006-04-02 09:31:06+00:00","Move gDebugLevel to common/util.cpp (where most other debug() related stuff already is)

svn-id: r21551
"
"a4d075dad316861755d6f3df390e1e2ab545e582","2006-04-02 09:56:11+00:00","Only include gui/launcher.h if it is used; cleanup

svn-id: r21552
"
"f8bb142f0b7c9ef73a0521199c18e076a259d2c1","2006-04-02 10:01:58+00:00","Fixing the X11 & NULL backends by adding main()

svn-id: r21553
"
"72f4a1c76cb8aedf6f953e57090134320d7291b8","2006-04-02 13:33:36+00:00","Fix console output been redirected under win32 build, due to main changes. Remove NO_CONSOLE, since it is never defined

svn-id: r21554
"
"9217472f0e4e801659c0a448dcbf57c28fd36ee2","2006-04-02 14:16:31+00:00","With this change, backends are now responsible for instantiating their OSystem class before calling scummvm_main (Note: PalmOS and Symbian are not yet converted, and won't work currently)

svn-id: r21557
"
"e9bc5ba280d4b893feb8b704423a9a757f0141bf","2006-04-02 14:31:23+00:00","Backends now are also responsile for deiniting properly. In particular, moved the call to quit() from scummvm_main to the various backend main routines (porters may want to replace it by something different)

svn-id: r21559
"
"9339e651aa90d3798a394428c32bafc3ba6a9f53","2006-04-02 17:51:04+00:00","- The command line parser now doesn't work in reverse order anymore.
- Changed the usage string to a very short message; the old usage string
now is only printed upon help (this matches the behavior of many other
tools out there).
- Continued to modify GameDetector::parseCommandLine in such a way that it
soon will be possible to use it w/o immediately storing stuff into ConfMan.
- Slightly reduced code duplication for bool option parsing.

svn-id: r21560
"
"36867335954bdbbdc82fe79a1bea6c1e58de62d5","2006-04-02 18:02:16+00:00","Added missing backslash, oops

svn-id: r21561
"
"80b3f9217dcb853220e972f83ea210ede8623fe3","2006-04-02 18:58:07+00:00","Don't try to copy str to _talkBuffer if str is pointing to _talkBuffer. Apart
from being unnecessary, the result of strcpy() on overlapping memory areas is
unpredictable.

svn-id: r21562
"
"004ca16de43638df1a807212bcda0ed62c435c3e","2006-04-02 20:11:50+00:00","Split GameDetector::parseCommandLine into a static parseCommandLine method which returns a StringMap with all settings, and a non-static parseCommandLine method which interprets the StringMap returned by parseCommandLine.

svn-id: r21563
"
"f600fd973ada197976154b781e018cde604811d6","2006-04-02 20:27:56+00:00","Use the new command line parsing code to handle --config and --debugflags, too

svn-id: r21564
"
"5e4c6c76b16df3acfdd168b73de36f61a80249a5","2006-04-02 20:29:54+00:00","Fixed '-f BAR' command line argument style (as opposed to '-fBAR' and '-foo=BAR')

svn-id: r21565
"
"92ad99a88c7070005057fa0e1af5915b5746d33c","2006-04-02 20:43:36+00:00","Compute the value GameDetector::_gameid *immediately* after _targetName has been set (this ensures that both are always in sync)

svn-id: r21566
"
"4a54db07a68e52a993f6345cf6b22109d556fe39","2006-04-02 20:44:07+00:00","To detect specific games, you want to look at the gameid, not the targetname (which can take on arbitrary values)

svn-id: r21567
"
"ec432361d50e959dc72331d93f77ecae9891b0ac","2006-04-02 20:49:03+00:00","Process the command line args before passing them to GUI::Actions::init (so that _targetName & _gameid are set)

svn-id: r21568
"
"7b63eadb50e55575abf501922e8aab8846e2bcf1","2006-04-02 21:06:49+00:00","Move handling of --list-targets and --list-games to a later point (after plugin & config file loading), to make them work properly again.

svn-id: r21569
"
"29858dadcdf4dd277995cfa83ecdeac31316df46","2006-04-02 21:28:01+00:00","Treat 'targes' like the other command line 'commands'

svn-id: r21570
"
"214c01d15d2f010a662504ac4d608f38f4ba4847","2006-04-02 21:32:23+00:00","Set gDebugLevel in a single unified spot, instead of two different places

svn-id: r21571
"
"4df2948902f18b23b1cec258c9a64ec9f43a8a6e","2006-04-02 21:38:36+00:00","cleanup

svn-id: r21572
"
"a55ebd5fb2e4290b51e074c60f505a41d9be0760","2006-04-03 09:54:05+00:00","Merged d_draw.cpp and rdwin.cpp (what little remained of them) into screen.cpp.

svn-id: r21573
"
"9f06a3bde6dbea21c110279858d5a69055c704f5","2006-04-03 11:12:26+00:00","Added variant string for some HE games

svn-id: r21574
"
"0e9b4ab17cb0b994c1c322e5710d8a639a7ae4f2","2006-04-03 11:35:02+00:00","GF_HE_CURSORLESS feature flag not required, since HE games always set a default cursor too.

svn-id: r21576
"
"b9acc7a2852a733a64e56031294924e68700c2d9","2006-04-03 12:09:54+00:00","Since GF_HE_CURSORLESS is gone now, we can remove this special case for 'lost'

svn-id: r21577
"
"41f71238f2b0e420cc641a249ddc2b2e3c345b6b","2006-04-03 12:11:04+00:00","Removing outdated and obsolete comment

svn-id: r21578
"
"36270561167d384654ba515fe5c1b8462cd3c8ca","2006-04-03 14:40:07+00:00","Add initial support for oracle icons in FF

svn-id: r21579
"
"5595ec568097b86a72b26ada55507426c254f853","2006-04-03 21:18:24+00:00","Various changes to POSIXFilesystemNode:
- Removed pseudo copy constructor, use the automatically generated one instead.
- Do not always call stat() whenever creating a POSIXFilesystemNode from a path.
- Use lastPathComponent in POSIXFilesystemNode(path) constructor.
- Some further cleanup.

svn-id: r21580
"
"4226aa761dd43e8515f4f4f6790f142fdd8b3927","2006-04-03 21:54:26+00:00","Fix AbstractFilesystemNode::wrap to not call (indirectly) getRoot, just to throw away the result immediately again (which (a) caused a slowdown and (b) a leak, both fixed now)

svn-id: r21581
"
"ebeded36a198fea5d86721be859e4540f64624d3","2006-04-03 22:06:42+00:00","Added comment on why we use getcwd in POSIXFilesystemNode at all

svn-id: r21582
"
"0ac5739ae290716158f947b65f42e19005eab67e","2006-04-04 01:38:53+00:00","More work on oracle in FF

svn-id: r21583
"
"69d3fb7ef8ab8ea49811ce587b40780d5c912ace","2006-04-04 02:41:45+00:00","Remove debug left over

svn-id: r21584
"
"ad5cac9eb454cebc606005567178aaf11bf04cf0","2006-04-04 06:25:50+00:00","Work around glitchy drawing of the Oracle icon, after discussing with Kirben.
But it's still unclear *why* the first 16 bytes should be skipped; hence the
Big Scary Comment (tm).

svn-id: r21585
"
"c21b81f5e5d7f5c75e0d4d70e85ab7920f5ff39c","2006-04-04 07:34:48+00:00","More work on oracle in FF

svn-id: r21586
"
"f5943d7e7f6b82297530a0a7794f06b1ec2531ec","2006-04-04 07:50:04+00:00","Adjust clear/restore window for FF

svn-id: r21587
"
"cb513de999a8602cadfcba7f87f9e9a1c87caf1e","2006-04-04 08:50:35+00:00","Added stub for FF right-clicking.

svn-id: r21588
"
"49dc2622dd64924fe4d6fa76831e05db48017285","2006-04-04 10:12:22+00:00","Add verb codes differences in FF

svn-id: r21589
"
"cc75c6809079e942e55f6f21ed976a6a1b67e031","2006-04-04 11:06:48+00:00","Add skipSpeech difference in FF

svn-id: r21590
"
"778a528df36ad763084e8b025f51830593e35645","2006-04-04 11:28:37+00:00","_noRightClick got reversed in setVerb for FF

svn-id: r21591
"
"a4a32397158dc3ae024b3fdeb95adaae3e851805","2006-04-04 11:53:13+00:00","o_printStr() always uses box1 for FF

svn-id: r21592
"
"4ee3298550e97e59a279b9950f6d1d4c6355173d","2006-04-04 11:53:45+00:00","Completed disassembly of the Lure pathfinding code

svn-id: r21593
"
"7242dc169c835e9e882b92ceab6fc7c9cc7ecebd","2006-04-04 19:05:50+00:00","Remove SCUMMVM_USE_LONG_INT from DC port.

svn-id: r21594
"
"db8715fffdeaa0edf5c037a7c422920e14440ea0","2006-04-04 20:13:59+00:00","We don't need wchar_t -> removing this to improve portability

svn-id: r21595
"
"bca4dd001fae016b5c137d00d7c13d58c9f7937f","2006-04-04 20:49:26+00:00","Rewrote sort code to use iterators (means it can be used with any container now, in theory at least)

svn-id: r21596
"
"112ba72222bf191a9c1e4d1ef8e83af1d43d3082","2006-04-04 20:54:55+00:00","Removing more pseudo copy constructors in favor of the standard copy constructor (gee, everybody is copying my bad code, it seems ;-)

svn-id: r21597
"
"e366ed75da9776553c780cf09ca1a64d3de41a79","2006-04-04 21:01:26+00:00","oops

svn-id: r21598
"
"ca6d34522039aa7d8aa8da1d8f4c30f4ad9aecc4","2006-04-04 21:02:44+00:00","Possible bug in the Symbian FS code?

svn-id: r21599
"
"ac9203415e263f92ea8043eed2301375b806262e","2006-04-04 21:03:17+00:00","Some more FS code cleanup

svn-id: r21600
"
"77555809b68d0bf30f5faecbd86458e3566a703e","2006-04-04 21:16:53+00:00","Use iterator API to iterate over all entries in the file list

svn-id: r21601
"
"7ba17e0574652a3759e3c2fbe1430a880db33b48","2006-04-04 21:18:15+00:00","Paranoia change: catch invalid 'method' value in generateDetectName

svn-id: r21602
"
"935ed2dadb282cadf32b0f53285a5446ac10739d","2006-04-04 21:18:58+00:00","Added const qualifier

svn-id: r21603
"
"595a48a87e73db770057bf5ec5a9104582877e18","2006-04-04 21:32:19+00:00","Small updates to intiate variable and member visibility.

svn-id: r21604
"
"e4930bd96d3f5d8947f4ffd012cdf5a8131b686d","2006-04-04 21:45:13+00:00","Don't use HAVE_CONFIG_H / config.h directly, use scummsys.h instead

svn-id: r21605
"
"f5c4634ecdd1832146fc47b796dcb7475b5c4498","2006-04-04 22:00:16+00:00","Fix md5 for German IHNM

svn-id: r21606
"
"d292c0ec55024ef95833f56300987a19e2ef4e31","2006-04-04 22:04:51+00:00","Since our debug() adds an exclamation mark at the message end, remove
it in several calls to avoid duplication!!11!

svn-id: r21607
"
"8fa9bd6728a1d739bd53c297b92f962e465fa88e","2006-04-04 22:21:10+00:00","Removed extra exclamation marks in warning() calls as well.

svn-id: r21608
"
"fca43f1eeb9a83c9e18713aa0ad6f496a5651994","2006-04-04 22:32:43+00:00","Initialize uninitialized variable.

svn-id: r21609
"
"8b995a8c52029fcd5bd28fc2452f307f5c92e57d","2006-04-04 23:05:06+00:00","Fix freddicove detection.

svn-id: r21610
"
"853356613269d2dc300e1fa036ffdd6db1cd321c","2006-04-04 23:24:51+00:00","Typo

svn-id: r21611
"
"194945f2a1c02ba5f4b4ec24a7579e63cbe52f93","2006-04-04 23:26:11+00:00","Rename variable in FSList::sort() to avoid conflict with system defines

svn-id: r21612
"
"15f4249978fcfb71a71bf750c44804ac6ea2fc74","2006-04-04 23:29:24+00:00","Add inventory array differences in FF and minor cleanup

svn-id: r21613
"
"607ae0bab606f591615b3858fe25b3dec8cf666b","2006-04-04 23:30:41+00:00","Fix crash for a case when game path is set incorrectly

svn-id: r21614
"
"004a39b3af8cb8ac1725fcea66ea45862419e49d","2006-04-04 23:44:27+00:00","Symlinks are also valid files

svn-id: r21615
"
"66d8b85463da60f0b88c3f7d6068df502d940546","2006-04-04 23:52:56+00:00","Allow symlinks to directories for FS;es with D_TYPE support.

svn-id: r21616
"
"bec09d30945c7dc143dc4ccd5e2fba1dcaccaac1","2006-04-04 23:55:47+00:00","Turned FSList::sort into a generic function which can be applied to anything which implements comparable iterators (like Array, List, or plain C arrays)

svn-id: r21617
"
"d7dd5ad9d9f9e360ef686f51fe483d808026b22d","2006-04-04 23:57:56+00:00","Re-fix sort by renaming min to minElem (avoid conflicts with certain system headers that #define min)

svn-id: r21618
"
"fba527651f13bfbd3907ff4520209aa800319ae8","2006-04-05 00:11:17+00:00","Fix regression in Simon2, a byte was lost when clearing or setting marks

svn-id: r21619
"
"2d10d1960e3f6b959d01c94e88557a7dcf0a34d5","2006-04-05 00:18:22+00:00","Use full path qualifiers in #include statements (exception: engines/ can be ommited, at least for now)

svn-id: r21620
"
"ab49a043310d9ef49729d6ab66a5e604380a761f","2006-04-05 00:24:53+00:00","Add back lost bitFlag check in listSaveGames()

svn-id: r21621
"
"7bcd0ba4dccf5f100512721531035f3fc958bae8","2006-04-05 00:37:42+00:00","Use the setBitFlag() and getBitFlag() functions, instead of manipulating
_bitArray[] directly. This kind of change is, of course, rather error-prone. I
hope I haven't introduced any regressions.

svn-id: r21622
"
"0bdc3b0738a46b02fe93b0d684549499b32b4272","2006-04-05 00:46:27+00:00","Added SVN keywords, and removed inclusion of <sys/stat.h>.

svn-id: r21623
"
"2a528657ad9f728b4865e5647d751af0060f5b2f","2006-04-05 00:54:10+00:00","Added SCUMMVM_DONT_DEFINE_TYPES so that (a) porters can still override our typedefs if they must, and (b) my image of evil-scummsys.h-changer is strengthened

svn-id: r21624
"
"9394430ea8aad1ada90cca0179bf78d111b2509e","2006-04-05 00:58:08+00:00","use _gameid instead of _game.features to detect games using ImuseDigital (slightly less clean, but then it's still a hack, and this way we only need to pass around the gameid)

svn-id: r21625
"
"935ea28e7ab107fe172fae16f50db7bda7fd591d","2006-04-05 02:45:28+00:00","Renames structures and other cleanup

svn-id: r21626
"
"baf2a06e0a283849b934105e924cad1081298e76","2006-04-05 06:58:18+00:00","Recursive current directory has a big overhead since it can point to
(a) scummvm source tree for dev (b) desktop with a:\ on Windows

svn-id: r21627
"
"25e19148bd46958a90a3c333da30aeb71b0c43d8","2006-04-05 07:09:47+00:00","Updated datatypes for Symbian OS

svn-id: r21628
"
"58c7f8d6b1f6092e92bd82cf11af28b59d9ee5c2","2006-04-05 11:44:46+00:00","Fix character spacing in text blurbs.

svn-id: r21629
"
"48c46eed6b573e7f131795dccc990eafb42d86a2","2006-04-05 13:06:03+00:00","I don't think assert(0) is a particularly helpful error message...

svn-id: r21630
"
"c409c600964913cfdfb95128d49cfbecac4cc06b","2006-04-05 14:10:13+00:00","Added comments to Symbians data types.

svn-id: r21631
"
"738aecd57ee47182dc72519148519efb80e9db2e","2006-04-05 20:11:00+00:00","Fixed bug in loadObject() where the data pointer was only advanced for the
objects that were actually loaded from the file, not the ones that were
skipped. This bug was introduced when porting cinE to the ScummVM framework,
and would cause Future Wars to crash after the copy protection screen. Quite
possibly other bugs, as well.

svn-id: r21632
"
"95eb4604179dbb31c5cad4581ad7c38a867ee4dd","2006-04-05 21:20:04+00:00","Use English strings for the system and confirm menus, to be consistent with the
command menu. There are still some other hard-coded French messages in the code,
though.

svn-id: r21634
"
"d967db266cb237457d5542007047fc5b61f3773b","2006-04-06 00:54:26+00:00","Add more icon differences in FF and cleanup

svn-id: r21635
"
"346486ce46a968e79803c5aaaf0a5e07c3ce26ab","2006-04-06 01:37:29+00:00","Fix inventory hitareas in FF

svn-id: r21636
"
"7e1618e329bc19eb07e27ae5cc084ea701bfcbfd","2006-04-06 06:14:47+00:00","Add some work on scrolling in FF

svn-id: r21637
"
"3023f6f76ee0bcbbd8dd82849f4ed2b7afb7e4c9","2006-04-06 08:21:44+00:00","Minor cleanup and fixes for FF

svn-id: r21638
"
"dd9f4d9f99097f0ae96abaa958e426fb396c7d66","2006-04-06 08:43:20+00:00","Remove duplicate code in last commit and minor fixes for FF

svn-id: r21639
"
"87de34a8d512e9821293296b09b0d715294168f6","2006-04-06 10:47:37+00:00","Cleanup

svn-id: r21640
"
"dc73f361e1a8d60de95093154300d77e6a177a3e","2006-04-06 14:01:52+00:00","Rename structures and correct array sizes

svn-id: r21641
"
"52d1d9ab8e8cf49894fa32ee3414e628dd9577f5","2006-04-06 14:30:41+00:00","Revert structure size changes, size expanded in readItemChildren()

svn-id: r21642
"
"1fa1f9520d1a021de6d16fc8dca523c031ea9f84","2006-04-06 17:56:41+00:00","Split the opcodes into separate functions, and use an array of function
pointers for decoding them, like we do in most other engines. And I just want
to say that this is the second biggest opcode table I've ever seen!

svn-id: r21644
"
"c07f18650293520928270f58f8441c95ebbf5ee7","2006-04-06 18:55:39+00:00","We don't need to convert mono data to stereo: Simply tell the mixer that we're
generating mono data, and let it worry about how to handle it.

svn-id: r21645
"
"0f3aeb09ed6b43c695ee851119b59d6b4703685e","2006-04-06 20:57:58+00:00","Fixed another 'worked in cinE, broken in ScummVM' bug that made it impossible
to interact with the objects in the second room. We were passing the wrong
pointer to gfxConvertSpriteToRaw() in loadCt(), causing page3Raw (which I
believe is an 'image' mapping screen coordinates to objects) to be wrong.

svn-id: r21646
"
"b570d768ff8c034bae5fe78d986bc6bc642e9611","2006-04-06 21:39:00+00:00","Moved the TODO to the Wiki

svn-id: r21647
"
"87c3aa27afce797317286f3eae9b8d588ae6445b","2006-04-06 22:06:03+00:00","Started to rename the LaTeX files based on their content instead of their numbering (which changes all the time anyway)

svn-id: r21649
"
"b29ad3c0ccd14120ca82673375f90dc1290e7053","2006-04-06 22:12:48+00:00","Renamed more LaTeX files

svn-id: r21650
"
"4e76abb4524d7f23a2e7d4df9bf627fdb05e903a","2006-04-06 22:13:16+00:00","Updated 'credits' target to generate correct LaTeX file

svn-id: r21651
"
"5f0ff73d2a4f1246e542903f9d04299f21cf5bdb","2006-04-06 22:17:37+00:00","Renamed even more LaTeX files (those names might not be the best, but the section structure isn't very logical to start with <sigh>)

svn-id: r21652
"
"43cd96fe103ea87892aec92f250ad5f844f3f94d","2006-04-06 22:32:53+00:00","Renamed last LaTeX files

svn-id: r21653
"
"997c023095652365bdb5d471f8874247136557cb","2006-04-06 22:33:23+00:00","Added opcode comments and stubs based on information sev provided me with. All
stubs should print a warning, though I may have missed some.

svn-id: r21654
"
"15cc2e628d4831c6c2ff4478b7549121dc444c9c","2006-04-07 01:04:09+00:00","Small cleanup.

svn-id: r21655
"
"38bf0af540fcdefa2844666734026c8bf47a989b","2006-04-07 01:46:43+00:00","Add some work on text output in FF

svn-id: r21656
"
"c6c86ff172d45130ec618d00e505a894cb2b0fd6","2006-04-07 01:48:54+00:00","Ooops, cut and paste error in printScreenText()

svn-id: r21657
"
"26587faff789412721786c6276933624dda92557","2006-04-07 02:02:06+00:00","This may look like a less good way of transforming three bits of colour into
eight bits. Perhaps it is. But it seems to match the output from DOSbox when
running Future Wars, and I tend to trust DOSbox in such matters.

svn-id: r21658
"
"50983a3721dbd7c0cfee08cf9b7cac4d81588c27","2006-04-07 03:03:20+00:00","Fix subtitle output in FF

svn-id: r21659
"
"e806e891e3a0f3675e567271e371ff8d760a63d7","2006-04-07 03:30:52+00:00","Sprite is always set to 1 in o_printStr() and o1_scnTxtLongText() for FF. Fixes wait timeouts in holomail.

svn-id: r21660
"
"c0e984a80a4d9cd959328051e2bf03702a594ff9","2006-04-07 09:04:36+00:00","Fix some horizontal scrolling issues in FF

svn-id: r21661
"
"94f2174522aa1abcf6a2073cb4a6d59b37852d6b","2006-04-07 09:37:44+00:00","Cleanup of yesterday's changes. The opcode functions no longer need to take any
parameters.

svn-id: r21662
"
"ab41c88902f45431d6fe6cfac349ead7feeb1857","2006-04-07 10:38:06+00:00","Disable i/o cache which is incomplete and can cause serious problem with SMC.
Fix compile by overriding typenames.
Cleanup and fix ASM functions. Some of them didn't return properly to C code when called...
Cleanup Makefile again.

svn-id: r21663
"
"7cd565f884f10ebdbd48137d3de1a7823b41d05d","2006-04-07 10:40:08+00:00","Fix compile with GP32 by overriding datatypes.

svn-id: r21664
"
"e1bbc61bb56311630da1d1d7c0906251f99e0d37","2006-04-07 10:44:20+00:00","GP32 uses custom version of libtremor, so update header path.

svn-id: r21665
"
"00a4ca02245b03fa7e860c9d032133fbf424e2f5","2006-04-07 11:37:46+00:00","Fix compile

svn-id: r21666
"
"67fda4ece59b3b869520390314f92f17fdfe22f8","2006-04-07 11:47:58+00:00","Cache the root node (cause a major speedup on OSX, since by far the slowes part in the FS code over here is the getcwd call in getRoot() )

svn-id: r21667
"
"f51575563e22966f98c1f07d7bcba7ebab51e4d2","2006-04-07 12:57:40+00:00","Add scrolling code for oracle in FF

svn-id: r21668
"
"3b1710c7f5956a6aebd9863421da5e41392b19b6","2006-04-07 13:39:59+00:00","Add scrolling adjustments when drawing overlay in FF

svn-id: r21669
"
"0c496f92a92aecb67992ba5f7b4f491ecc66a219","2006-04-07 14:27:28+00:00","Cleanup and split scrolling code

svn-id: r21670
"
"65a3f88454c7cf3df0987a0e2862693dc273229e","2006-04-07 14:40:33+00:00","Minor cleanup

svn-id: r21671
"
"1cda8e10f060f20d755b0ba852be4fe523f55695","2006-04-07 22:40:45+00:00","Finally got rid of multiple_versions_md5_settings in favor of extra_versions

svn-id: r21672
"
"9e5950e7042d818508a3b91571d076a3bc35c258","2006-04-07 22:46:59+00:00","New Loom version reported by Peter Eckerlein

svn-id: r21673
"
"9a7b16e4d3eeb60ce2ed58159adb40486210ec07","2006-04-08 00:12:16+00:00","Add initial support for vertical scrolling in FF

svn-id: r21675
"
"daa60166feac99ffc96962a9668a1ee272cdc4d0","2006-04-08 00:19:04+00:00","Remove excess ; in scrollEvent()

svn-id: r21676
"
"e951f908f2699a46387f69df8a7703bcd4055db2","2006-04-08 00:24:46+00:00","Fix load game display of oracle in FF

svn-id: r21677
"
"0bf0772e9c7b79f0f8af4a6a03e63f1085a58a46","2006-04-08 00:28:36+00:00","Remove debug leftover

svn-id: r21678
"
"fce6bf5142f9cabdbfd9ca6545e70013e3ba5721","2006-04-08 06:47:58+00:00","Added helper functions getNextByte(), getNextWord() and getNextString() to make
the opcode decoder a bit easier to read. The same change could be made to
decompileScript() as well, but I have a feeling that this function should be
made a standalone tool instead. Particularly considering how much memory it
currently uses.

svn-id: r21679
"
"b5960651226e96001f7ffad3d9beeb0c807cf277","2006-04-08 07:13:07+00:00","Fixes for oracle in FF and cleanup

svn-id: r21680
"
"812dd72207f85c1159b6a2c70ab9395dfe2a29f6","2006-04-08 07:16:14+00:00","Cleanup.

svn-id: r21681
"
"f3ede2bf3879d1bba3ddf2a615c6ee14730dae20","2006-04-08 07:50:47+00:00","Began collecting hard-coded language-specific strings in a new initLanguage()
function. It's now possible to choose between English and French menus, and the
command string preposition in English is 'on', not 'sur'.

There are still plenty of hard-coded French messages to do with savegame
handling. I haven't done anything about them.

svn-id: r21682
"
"54b99891cb85b1e5112e9de9e44cc60149709829","2006-04-08 08:04:23+00:00","Cleanup.

svn-id: r21683
"
"9c77c2ecd1beb3026df8249c5aed271616bc6449","2006-04-08 08:23:33+00:00","Renamed various *GameSettings to GameSettings (our namespaces are enough to distinguish them)

svn-id: r21684
"
"30c2e1345690cf537937bd3ba71d7d1874efe5cf","2006-04-08 08:43:28+00:00","Move some more bits into namespace Scumm

svn-id: r21685
"
"8cf8acfd633227a55d794d39219c25b6b269d146","2006-04-08 11:21:04+00:00","Renamed various *GameSettings to GameSettings (our namespaces are enough to distinguish them)

svn-id: r21686
"
"4572d0ba16b36bead1c02ec07b5c7ff357e0bc95","2006-04-08 11:36:49+00:00","Moved version vars from base/main.cpp to base/version.cpp; thus now version.o is always rebuilt on every change, not main.o

svn-id: r21687
"
"dc77d02c7e63ab9185870a8c6028ccab9dbbf716","2006-04-08 11:38:41+00:00","Removed common/map.h with the Common::Map template class (it was a very bad implementation, and our HashMap is simply better).

svn-id: r21688
"
"e7a8bb6abff3a6bee3b28aa5a599912df43ed120","2006-04-08 12:06:07+00:00","Modified the REGISTER_PLUGIN macro so that it allows (and requires) a trailing semicolon (this helps certain tools to parse our code better)

svn-id: r21689
"
"655b85bc84dfbc239c762b2e268824305787b83d","2006-04-08 12:06:52+00:00","Add FF difference in addTextBox() and minor cleanup

svn-id: r21690
"
"4a8c9c323d7914c3ad33c884ecf9e0cb73ee2db5","2006-04-08 12:39:27+00:00","AmigaOS4 changes from tracker #1416370

svn-id: r21691
"
"453e69b6c2156ec8e84ff99a4f0fa3841362c06a","2006-04-08 12:41:02+00:00","Change check for MIN/MAX macros: Always undef those so that our templates are used (which are safer, consider MIN(a++, b++))

svn-id: r21692
"
"986dce3a7dc4353a51fcc2abba744b4372d72610","2006-04-08 13:20:40+00:00","Split the opcodes into individual functions. This could easily cause
regressions, but hopefully not too many. While doing this, I noticed I had
gotten at least one of the stubs I added recently wrong. That's hopefully
fixed now.

svn-id: r21693
"
"a81964c3c22e7d8725a882783a104ed1f51c28c2","2006-04-08 14:03:14+00:00","Renamed some local variables for consistency.

svn-id: r21694
"
"37d1248bd0b0fe603d514ad012d8f17c5c804e70","2006-04-08 14:23:33+00:00","Fixed two Operation Stealth regressions:

* When I introduced the getNext* helper functions I accidentally used
getNextWord() instead of getNextByte() in one case.

* When splitting the opcodes into separate functions, I noticed that Operation
Stealth has no opcode 0x40, yet it's used. So for now we only warn when
trying to execute an undefined opcode.

svn-id: r21695
"
"eac6dc09aa4e0d2fcb59a04e8196741d95846223","2006-04-08 14:26:36+00:00","Make the warning message for undefined opcodes slightly clearer.

svn-id: r21696
"
"69e2ce1d4abce2da81651715f0c7c4b4fd92e83d","2006-04-08 17:19:07+00:00","Made the 'gotoIf' opcodes slightly easier to read.

svn-id: r21697
"
"2167c56cb3eab26c5220a79d8234da33e9b1a34e","2006-04-08 17:51:20+00:00","This is probably what o1_removeLabel() should do. Is it used anywhere?

svn-id: r21698
"
"fbe311ce6c6481e674d5194da7ac7f3ee9f28055","2006-04-08 19:26:15+00:00","Some more Operation Stealth changes. Mostly stubs.

svn-id: r21699
"
"c8ea13139d4f5f18096d1d2be965a087c06d3817","2006-04-08 22:05:45+00:00","Our extra_versions table is a bit too eager in some cases to assign platform values; fixing some of these cases and adding code that detects these and triggers an according warning

svn-id: r21700
"
"3add3dae958e8cbb29e046f9f24e00d907dab319","2006-04-08 22:48:03+00:00","Removed dupliate entry from extra_versions table

svn-id: r21701
"
"5a2ad04a9eb48f0fec484861d09830b398db700d","2006-04-08 23:12:56+00:00","Introduced language EN_ANY used for general English game entries. EN_USA and
EN_GRB should be used for games which have both variants. Currently it is
MM NES and BASS. All other are switched to EN_ANY.

svn-id: r21702
"
"c09fef73c021a7ca434c807685116e9c340455ad","2006-04-08 23:20:15+00:00","Add comments explaining what does EN_ANY mean

svn-id: r21703
"
"85c9dc7de8822821c8f29e8958af1b39cc77b7b8","2006-04-08 23:43:18+00:00","Properly translate Common::Language values for COMI

svn-id: r21704
"
"807edc83c77e84448b81721eb33a9cbc033e8cc3","2006-04-08 23:56:09+00:00","Properly translate Common::Language values for V0-V2 games, too

svn-id: r21705
"
"d26b00330e3b95f75011b30bc1016f4edba25083","2006-04-09 00:25:29+00:00","Clarify language for several UK HE releases

svn-id: r21706
"
"dcfad9426fb7e3bce7b455402f385e55497fcf2c","2006-04-09 00:37:20+00:00","Specify UK/US version for PuttTime since we have UK version reported for it.

svn-id: r21707
"
"94e647235f6978578dffccba0e1f2aa09cfc0aad","2006-04-09 00:44:08+00:00","Fix const correctness in Kyra's StaticResource::loadStrings and StaticResource::loadPaletteTable (notice the difference between a pointer pointing to a pointer pointing to const memory, vs. a pointer pointing to a *constant* pointer pointing to const memory)

svn-id: r21708
"
"9438f803a6ef674856a2a686486b75f3ff248290","2006-04-09 00:57:41+00:00","Clarify UK/US language for those HE demos which UK versions we have reported.

svn-id: r21709
"
"8dced5411194f31c7a3eb20e97407bf686a1b05d","2006-04-09 01:59:47+00:00","Add SDL_SetModuleHandle to WinMain

svn-id: r21710
"
"a74fcf7ceebf9f5f5233858861a23d3d88cdc2a5","2006-04-09 03:16:05+00:00","Fix regression introduced by removing of GF_HE_CURSORLESS feature flag.
There are 3 cases of HE cursors:
o Default one. We set up cursor palette for it.
o Loaded from .HE3 (windows resource file). We use default cursor palette.
o Loaded from WizImage. We disable default cursor palette.

svn-id: r21711
"
"202406e31be0d491ed6c44ecf024c8db012d09d9","2006-04-09 04:53:31+00:00","Add centreScroll() for FF and hyperbox code differences in FF.

svn-id: r21712
"
"55cc897cff4d6bbd62acf54a91efbd8c588ae6e0","2006-04-09 06:06:10+00:00","Add time code for FF and minor cleanup

svn-id: r21714
"
"6f6f60bab2245120628bb57f0cc5046d49864fe8","2006-04-09 06:14:45+00:00","Update debug table for FF

svn-id: r21715
"
"35a4b57189ec7442b75db0e65ca8cc49ec58ef32","2006-04-09 09:05:21+00:00","Fix mistake in debug table for FF

svn-id: r21716
"
"4a6be800cb74360823c860c80a85d3eb00762731","2006-04-09 09:08:22+00:00","Fix clearing text window in oracle of FF

svn-id: r21717
"
"c4015860ac16997d4b8fdb381ef44a030d3e321b","2006-04-09 09:08:45+00:00","Fixed savegame saving/loading. I haven't done anything about the user
interface, so it's still even worse than in the original interpreter (just like
in cinE, presumably), but at least it no longer crashes when loading the saved
game, and hopefully the correct palette is saved.

svn-id: r21718
"
"9a44671bf6e244284f97e706eb5a5c79a6fd20e8","2006-04-09 09:21:21+00:00","Enable skipping scrolling in oracle for FF

svn-id: r21719
"
"324209e11f89c4f5fd421464f33a98b4fb5c4da3","2006-04-09 10:54:41+00:00","Minor cleanup, but savegames still don't work as well as I had hoped...

svn-id: r21720
"
"00a48b248f07fb5e0698555fe2f63377f6aba3bd","2006-04-09 10:58:18+00:00","Disable constant display of object names, since oracle settings are usable in FF now.

svn-id: r21721
"
"6a1636c292e28759728cd2c404e420936bf2dc78","2006-04-09 11:34:10+00:00","Add font table for FF

svn-id: r21722
"
"484fe8ab6518fe30a332c9f4142cff57fae4e923","2006-04-09 12:01:41+00:00","Fix input regression after using oracle in FF

svn-id: r21723
"
"8e7e50397923f5d0519db452b51f62f39c3764e5","2006-04-09 12:04:33+00:00","Casting an array of integers to a pointer to a struct seems like a pretty hacky
thing to do. This replacement hopefully works as intended.

svn-id: r21724
"
"5cd18ccad35cd87a5550bbe706be993d35b941cc","2006-04-09 13:12:59+00:00","Fix hitareas when scrolling in oracle of FF

svn-id: r21725
"
"b75be44d06ca37c5757ea95e6f36538b4e2e3afa","2006-04-09 14:51:47+00:00","Sev now is project lead, too

svn-id: r21728
"
"468480209183f4fc05bfd1395ec70f07d600fe83","2006-04-09 15:34:14+00:00","Fix some line breaks in oracle of FF

svn-id: r21730
"
"ef8426ee17afd21b5406ae06b9d45525cdceb73f","2006-04-09 17:41:44+00:00","Fixed excess line breaks in FF when listing the Oracle's ENCY articles.

svn-id: r21731
"
"46ee06135ca1dba1644f28d5092a54324c0ac123","2006-04-09 17:53:47+00:00","Oops.

svn-id: r21732
"
"66cdbaf1b5e01c062219f4850c91aaecba655ab1","2006-04-09 19:44:40+00:00","Moved GameSettings to namespace Cine; moved savePath to various.cpp

svn-id: r21733
"
"39a2bc6812ae2ff5b54443999d7e7076f924872d","2006-04-09 22:03:29+00:00","Added gameFilenamesTable (currently unused, and hence disabled)

svn-id: r21734
"
"cd5b1fee40b72a4a8087767fcd73779b0c4c035b","2006-04-09 22:05:05+00:00","Removed some obsolete code

svn-id: r21735
"
"7b7eb1f331f4bcc49a4f0e9c3e1a523e095e5ecf","2006-04-09 22:18:48+00:00","Changed the precedence of the MD5 overrides (highest priority: config file, then target_md5.txt override, finally the 'reaL md5); also did some cleanup and code unification

svn-id: r21736
"
"774476ee21ebb29302c671ec28ce59a224837efe","2006-04-09 22:41:52+00:00","Adjust line breaks, to prevent regression.

svn-id: r21737
"
"071884589a090472c7a1e85dd98ea1a3d9c27d41","2006-04-09 22:44:27+00:00","Adjust line breaks, to prevent regression.

svn-id: r21738
"
"df1bc871f19736df177119e4d5d945ce5eb97244","2006-04-09 23:30:16+00:00","Forces usage of SYSTEM_NOT_SUPPORTING_D_TYPE on amd64 systems. (read comment for more information)

svn-id: r21739
"
"8fc794b4324f7544f00633dd51ea09c95aec3873","2006-04-10 03:51:04+00:00","Fixed line breaking regression caused by adding the width of the word a second
time, rather than the width of a blankspace character.

svn-id: r21740
"
"9c15dc06eb1470922a8037b9ead7c7d16f20693f","2006-04-10 05:37:31+00:00","Use our standard save file manager class to read and write the save games,
instead of putting them in the current working directory.

svn-id: r21741
"
"3bc5d5b5856167f44c1b54bdad235a5ad1b3d1b7","2006-04-10 06:18:39+00:00","Slight change to make it easier to change the FF and Simon word-wrapping rules
individually. Changed the FF rule so that it doesn't matter whether or not the
variables are signed or unsigned. This fixes missing line breaks in some of the
Oracle articles.

svn-id: r21742
"
"46ef60e1b93603dc6fc6e7543959ca9efdfd3f2a","2006-04-10 06:40:15+00:00","Merged o_chance() into o1_chance().

svn-id: r21743
"
"e67f1a99231fbb7fc640b0fff6fdf2e07aa8e1f0","2006-04-10 06:51:20+00:00","Merged o_vga_reset() into o1_killAnimate().

svn-id: r21744
"
"4203b4f1ff0785fe3b6b722cb7772e98fd169a88","2006-04-10 06:57:44+00:00","Merged o_defineWindow() into o1_defWindow().

svn-id: r21745
"
"71f1f1e86f66759c65130230cbd6d22e69909fae","2006-04-10 07:02:28+00:00","Merged o_unk_103() into o1_cls().

svn-id: r21746
"
"9dcd19778f330ae7088eaf0fc5891f3285842c83","2006-04-10 07:09:03+00:00","Merged o_set_video_mode() into o1_picture().

svn-id: r21747
"
"f444a68ffa7cab3530d76bbeab8b117f5e92bd21","2006-04-10 07:13:21+00:00","Merged o_playMusic() into o1_playTune().

svn-id: r21748
"
"50700d7ac6c9bb200ba0ec3b7448d84e4bf8acf9","2006-04-10 07:17:06+00:00","Merged o_lockZone() and o_unlockZone() into o1_lockZones() and o1_unlockZones()

svn-id: r21749
"
"2695cb6f88de69bb66f5f40cb936773736a85672","2006-04-10 07:21:44+00:00","Merged o_loadBeard() and o_unloadBeard() into o1_loadBeard() and
o1_unloadBeard().

svn-id: r21750
"
"d76cbb843998d942292aa3a9ef84fb999d79c9da","2006-04-10 07:48:58+00:00","Merged o_playSFX() into o1_playEffect().

svn-id: r21751
"
"e931f9d07d6fb597b7a1f139661421543a0537c8","2006-04-10 08:00:29+00:00","Merged o_loadZone() and o_unloadZone() into o1_loadZone() and o1_unloadZone().

svn-id: r21752
"
"28c34673dcb7063797efac0dad28223ef0ddc80c","2006-04-10 08:04:45+00:00","Merged o_loadGame() and o_saveGame() into o1_loadUserGame() and
o1_saveUserGame().

svn-id: r21753
"
"2ee9a343494d9f374e1e8978946aa5b358f307b4","2006-04-10 08:09:49+00:00","Merged o_inventory_descriptions() into o1_screenTextPObj().

svn-id: r21754
"
"008d4955dd5f8b644dc179025c91775b9284c285","2006-04-10 08:22:03+00:00","Merged o_confirmQuit() into o1_pauseGame().

svn-id: r21755
"
"1d9cd5ad7de22349cbdd31b78aa60a0824f1bf5b","2006-04-10 08:28:29+00:00","Merged o_restoreIconArray() into o1_restoreIconArray().

svn-id: r21756
"
"7ab84e4d99a11eb9a32efc895f55597660c48d4b","2006-04-10 08:34:16+00:00","Merged o_pathfind() into o1_getPathPosn().

svn-id: r21757
"
"ea4e5dbb823f58594434284a8c1d34c345d2d319","2006-04-10 08:42:29+00:00","Merged o_printStr() into o1_screenTextMsg().

svn-id: r21758
"
"f1c79ee518f61ee0c8a2a1f9af9f2c0f1b7f5bf7","2006-04-10 08:49:28+00:00","Merged o_setup_cond_c() into o1_getDollar2(). (We could merge
setup_cond_c_helper() into o1_getDollar2() as well, but for now I'm only trying
to get rid of the o_* functions.)

svn-id: r21759
"
"f07d60adc81539421a5aecd5af425f597aaf478d","2006-04-10 09:18:07+00:00","By now, it should be obvious that I'm trying to get rid of the o_ functions.
This is in preparation for the next stage of the cleanup.

By now, I have merged most of the o_ opcode functions into the corresponding
o1_ opcode function. There are a few pure o_ opcode functions left, but it
makes sense to keep them separate functions since they are part of groups of
other functions. Now, to get rid of the remaining o_ functions I have:

Dropped the 'o_' prefix from the following functions: o_kill_sprite_simon1(),
o_kill_sprite_simon2(), o_waitForSync(), o_freezeBottom(), o_setTextColor(),
o_fadeToBlack(), o_waitForMark(), o_unk_132_helper_3(), o_unk_132_helper(),
o_clearCharacter(), o_fileError().

Renamed o_sync() to sendSync().
Renamed o_mouseOn() to scriptMouseOn(), and moved it to items.cpp
Renamed o_mouseOff() to scriptMouseOff(), and moved it to items.cpp

svn-id: r21760
"
"8a8dd15dc613b7f8aeb247f14c9132118e73e3a2","2006-04-10 09:49:03+00:00","With the old o_ functions out of the way, I have renamed all o1_ functions as
the corresponding o_ function. This is in preparation for separating the truly
Simon 1-specific opcode functions into a group of their own.

svn-id: r21761
"
"4e14fd84f41c6ad196a525674e098258e890c552","2006-04-10 10:07:56+00:00","Some opcodes have been made Simon 1-specific, either because they really are
only used in Simon 1 (e.g. the 'beard' opcodes), or because Simon 2 and FF have
their own versions.

svn-id: r21762
"
"ebcee2beb64d5403f5fdb2cc49836d5b847ae780","2006-04-10 10:18:55+00:00","Split the playTune opcode into Simon 1, Simon 2 and FF versions. The FF version
was wrong before, but since it is a no-op, it probably never caused any
problems.

svn-id: r21763
"
"2f7932c4568969d97f2bfd31ebed31c54416f9a6","2006-04-10 10:45:21+00:00","Cleanup.

svn-id: r21764
"
"520a7be91f31ee89b66af9faad17edf02a699ce7","2006-04-10 12:10:30+00:00","Add code for bltOracleText() in FF

svn-id: r21765
"
"a06a28fa97f4c278166cfa83fac87977b3a0f864","2006-04-10 17:32:04+00:00","Implements saving the color cache to a file (much faster startup for custom effect + less memory while gui isn't shown)

svn-id: r21766
"
"8271273cb5ca8041b9d8e1ddd3b029ee2995800c","2006-04-10 19:26:40+00:00","Fallback to using stat() if readdir returns DT_UNKNOWN (replacing the AMD64 hack)

svn-id: r21767
"
"8cbe1f3823d436689bb47f8ab610a342f9311ae3","2006-04-10 21:43:49+00:00","Merged scumm_settings into extra_versions, which in turn got renamed to gameVariantsTable

svn-id: r21768
"
"64ae34400f0fe6c5d75e3977bc0e46b154eff627","2006-04-10 22:11:05+00:00","Removing dummy code from resource.cpp

svn-id: r21769
"
"0ed3018f2b515c786052cd14f7973a1184a737ed","2006-04-10 22:25:42+00:00","Some more tweaks to the (still unused) gameFilenamesTable; also readded an enhanced version of the (also unused) generateFilename function

svn-id: r21770
"
"935989d8cd960e175d577526418f589625a9d25f","2006-04-10 22:45:05+00:00","More commented out stuff: added generateFilenameForDetection method, for use by the detector; and applied various fixes to generateFilename (which is still completely untested, so it certainly contains more 'bugs' :)

svn-id: r21771
"
"badb5218fa3989e12e1f383ed7c510102626a8ec","2006-04-10 23:22:26+00:00","If I understand things correctly, cinE used to dump the entire animDataTable
element to the savefile, including data pointers. After reading the savefile,
it would then test if ptr1 was NULL, to see if it should load the object.

I've extended the savefile format with a byte to indicate whether or not ptr1
was non-NULL. This seems to fix the problems I had with with loading savegames,
but of course any old savegame is now even more broken than before.

I still can't seem to get out of the room with the machine, though. Another
regression when migrating the code from cinE, or just my ability to get past
this annoying, timed puzzle?

svn-id: r21772
"
"8ae793c81e505c5b839ca47ac1dcbd3c31c06b08","2006-04-10 23:44:17+00:00","Cleanup

svn-id: r21773
"
"62a163bc43f0f50a90de09b53cf575c2beb01acd","2006-04-10 23:48:22+00:00","Might as well clear ptr1 and ptr2 in animDataTable[] when loading a savegame.
The previous commit should ensure that the elements that need to be loaded are.

svn-id: r21774
"
"c17e46b1f1278bc11caafa2bec49d8f2609852fa","2006-04-11 00:37:54+00:00","Update waitForSync() for FF and minor cleanup

svn-id: r21775
"
"95993df8005dda7def72be087e37ea637636366b","2006-04-11 00:42:19+00:00","Ooops, re-enable code in allocBlock()

svn-id: r21776
"
"70654bc2a97e063169b4b603861093ba6593ff34","2006-04-11 10:42:32+00:00","Added a script method for setting a blocking hotspot script

svn-id: r21778
"
"f6b2cf2c6dcc37c54913ad2209545002727ee6fd","2006-04-11 10:43:53+00:00","Updated resource structures to add support for hotspot y corrections, proximity data, room walkable areas, and the room exit coordinate list

svn-id: r21779
"
"9b87224036004668aa74f764553cc05381c79f97","2006-04-11 10:45:22+00:00","Resource loader enhanced to load hotspot proximity data and room walkable areas

svn-id: r21780
"
"7b32b7ef9ca38061cc6405a1718c0129dfef9bdc","2006-04-11 10:46:36+00:00","Added new resources for pathfinding and new resources

svn-id: r21781
"
"169c8d78d11f6e64197b8b2f7e4b616384a3d314","2006-04-11 10:48:28+00:00","Implemented better handling of changing rooms via room exits

svn-id: r21782
"
"4b913261311ba2727f5582e33c90ce5d02d6d680","2006-04-11 10:50:18+00:00","Added a destRoomNumber variable to store which room a highlighted exit goes to, as well as some temporary code used to display pathfinding information onscreen when Toggle Info is turned on

svn-id: r21783
"
"b8c80af18318b544fa16888030106d60c59bb190","2006-04-11 10:52:11+00:00","Added proper path finding code for rooms, as well as miscellaneous support methods

svn-id: r21784
"
"e3254a88792a54adc75f8fb2b00fc5b640dd43d5","2006-04-11 10:53:24+00:00","Added disassembly of room exit handling, as well as a few cleanups to the path finding code

svn-id: r21785
"
"cba4871140cec8a976c240fb9de87c16712e99cc","2006-04-11 11:34:06+00:00","Changed max() to MAX(). This fixes compilation for me.

svn-id: r21786
"
"d846f9a5e1ca9e430b61341eb72d65ab969a1259","2006-04-11 11:55:27+00:00","Added delays to the main and menu event loops to keep Lure from gobbling up all
available CPU time.

svn-id: r21787
"
"a42dd86e85fa06a06383f99346d7bedf424cac5b","2006-04-11 12:59:44+00:00","Some more MD5 entries / confirmations by Peter Eckerlein

svn-id: r21788
"
"12374accc3b032addf141e8df26d70e2b7adf819","2006-04-11 14:16:15+00:00","Makes classic theme compile without OLDGUI_TRANSPARENCY again.

svn-id: r21790
"
"c3733105cc2eda7bc0993a7030d898998b5c45f6","2006-04-11 14:51:38+00:00","Changed drawScrollbar to use drawShadow.

svn-id: r21791
"
"a7a5f40cfc4f89ac934d84636fed80222eb6fbc4","2006-04-11 15:34:07+00:00","- cleans up drawSurfaceMasked a little bit
- get rid of getColorAlpha in drawSurfaceMasked if no alpha blending is used

svn-id: r21792
"
"3ac923ba580c2fa61baf381b38027c3d133dcd3c","2006-04-11 15:45:21+00:00","Fixes cutted texts with --force-1x-overlay.

svn-id: r21793
"
"4b8b7e2aedf23d5100c5197a46c4052919a7f8ce","2006-04-11 16:05:59+00:00","Checks if something is drawn out of the screen in drawSurfaceMasked (fixes crashes with --force-1x-overlay)

svn-id: r21794
"
"521697be016acf13d1c201c35ee7627b614df2a7","2006-04-11 16:28:00+00:00","Fixes disappearing borders with classic theme.

svn-id: r21795
"
"ea6c62ba3de6c70241c0f276c9e6955f8ea86e30","2006-04-11 16:32:03+00:00","Draws the same border for 'kWidgetBackgroundPlain' as for 'kWidgetBackgroundBorderSmall'.
This fixes missing border in the pop up widget.

svn-id: r21796
"
"0fd8c1da1edf2012e26af513ff2a3b1ee2d63c75","2006-04-11 18:04:09+00:00","Added missing 'auto' music driver

svn-id: r21797
"
"cbe570756b64631292d3448d2c72b536879173ae","2006-04-11 18:06:22+00:00","Missing endian.h

svn-id: r21798
"
"d32320da0f181eb62c377cb64e70f2cb54a1fc87","2006-04-11 18:08:51+00:00","Added now required palm_main(...) function

svn-id: r21799
"
"f6ae33b3d773d23b6f55ad0d150139960825a962","2006-04-11 18:11:03+00:00","There is no ::create function anymore in backends

svn-id: r21800
"
"4f28027c552cb2bee08a86b6cb8c368568bb876a","2006-04-11 18:13:04+00:00","Fixed FS support based on lastest changes to the base fs class

svn-id: r21801
"
"f0d03fb52f2ab73a04a2133019d481a2fed60a1e","2006-04-11 18:14:26+00:00","PalmOS too

svn-id: r21802
"
"89ed8e88915d6f99bf0c3c637f8da295cfeb3dda","2006-04-11 18:16:12+00:00","Not needed

svn-id: r21803
"
"a8e772fa54b3b0d315983e5b82dbc12437ebc6db","2006-04-11 18:16:53+00:00","Fixed line ending

svn-id: r21804
"
"f61d74532b7cb6902db4f01f4e1f429469568a23","2006-04-11 18:19:54+00:00","Fixed crash with PalmOS ARM version : global objects are allocated but constructors are not called - anyway this var is useless with PalmOS version

svn-id: r21805
"
"37ecf6bc0a516809e954545307c8a2015bdb8296","2006-04-11 18:25:04+00:00","Bad hack to make the file class work agaain with PalmOS ARM version - read the comment for more details

svn-id: r21806
"
"7aacf8e5fbf72294715dfea79e96b7c8d736e753","2006-04-11 18:26:40+00:00","Updated project file

svn-id: r21807
"
"10c62a2eed71061305734fb32e576eaf50918ca9","2006-04-11 19:29:55+00:00","If generateDetectName() generates an empty string, that's a failure, not a
success. Otherwise ScummVM will crash once the game detector reaches the
'generic HE game variants', which makes it hard to add non-SCUMM games.

svn-id: r21808
"
"a677541ac8748b41cc96fa385f153e730676d769","2006-04-11 21:39:09+00:00","Added TODO comment about refreshAnimData[] and why it's not (yet) a field in
the AnimData struct.

svn-id: r21809
"
"9610a4daefb6717dacefc4fc428faf6a23529c9e","2006-04-11 22:11:12+00:00","Fix warning.

svn-id: r21810
"
"0c75d7d1c01b36ba0f13f9cf1d53307841a5f26e","2006-04-11 22:29:51+00:00","Removed the PalmOS specific hack in file.cpp in favor for code that should work everywhere (and hopefully will help the GP32 port, too).

svn-id: r21811
"
"2044ee1c0d45ee8914a3735b96c028996cc2fb08","2006-04-11 22:31:47+00:00","Don't hardcode specific values for our language enums, as nothing should depend on them -- any code that is broken by this change was wrong to start with and must be fixed accordingly

svn-id: r21812
"
"4ec79db410d5c9374e54695299b88e309709b90a","2006-04-11 22:41:44+00:00","Rearranged code in ScummEngine::openRoom a bit, to separate the filename generation from other things

svn-id: r21813
"
"24b2f65f91eacb442cd2a13ecec3e7916655a82e","2006-04-11 22:47:53+00:00","Re-fix the CD version of Loom

svn-id: r21814
"
"83d75e119ff48f0c26fc6a14098444c6b86d4725","2006-04-11 23:31:03+00:00","Add F1-F10 keymappings like in original engine.

svn-id: r21815
"
"75fec17d7e3f0c2dcbc32fb0a572def43d27cdc6","2006-04-12 01:48:15+00:00","DEBUG_SCRIPT -> debugC

svn-id: r21816
"
"3fab2f4898641a3cdbbc0b3f8d22a14a842b192c","2006-04-12 02:27:56+00:00","- some little clean ups
- improves speed of the dimming effect (get's rid of divisions in favour of shifts)
- improves speed of calcGradient (nearlly twice as fast in my tests now)

svn-id: r21817
"
"e02625db6aeb9a25cff653d71ecedd13e2c1bb11","2006-04-12 03:01:06+00:00","Speeds up calcGradient again a little bit.
Also this should fix a bug in getColorAlphaImpl (I'm not 100% sure if it was wrong before though)

svn-id: r21818
"
"867908399103c884c4b06a4364a8e7105232fce6","2006-04-12 03:12:56+00:00","cleanup

svn-id: r21819
"
"7082e19ff2088e9e16758aa0c9f2da794eaadd75","2006-04-12 03:45:54+00:00","Fix script dumping

svn-id: r21820
"
"0d9fc230bc0550171e515f2a8d341cec26d89c0c","2006-04-12 07:56:44+00:00","Updated project files with new required libs.

svn-id: r21821
"
"2ca3831777e091d74510e9c0244b88458d0e363d","2006-04-12 08:10:49+00:00","Fixing the workaround for bug #1458388 (should have added trailing dot, but didn't)

svn-id: r21822
"
"adbafccc64fba8f314a302042b78c2a36a61619f","2006-04-12 09:49:08+00:00","- Fixed the mistake in Mult_v2::loadMult() that caused Gob2 floppy to
have a messed up script-pointer afterwards
- Added/Changed parts of Mult_v2::playMult() et al. so that the intro
works for a few seconds (with glitches) before getting killed while
trying to draw text (CD) or trying to play sounds (floppy)

svn-id: r21823
"
"eb3ae7d7260f1cd2319e605e4b054d004733228c","2006-04-12 10:01:41+00:00","sizeof(void *) != sizeof(int) for a large number of systems.
Fix a lot of debug/error statements that were using %d/%x
for the result of pointer arithmetic.

As C++ apparently has no format string for ptrdiff_t use
%lu/%lx as appropriate.

svn-id: r21824
"
"9dfc4b5f6905ceae92a5009d3a2c8083167971e0","2006-04-12 11:27:45+00:00","Fixed serious bug in removeOverlayElement() that would cause it to fail. This
caused getObjectUnderCursor() select the wrong object because the object list
was no longer guaranteed to be sorted on priority ('mask').

In Future Wars, this made it difficult (impossible?) to pick up the tunic,
because the game would pick the bushes instead, even though the tunic had a
higher priority.

svn-id: r21825
"
"151b38a6e5d25bacb99d25326e6b2e09c75cad7c","2006-04-12 11:29:00+00:00","This assertion shouldn't be needed. At least not here.

svn-id: r21826
"
"cf202049ff85bb63fcb0990f81ba173d1ab4d7c8","2006-04-12 14:54:12+00:00","Fixing mismatch between format strings and data on some systems

svn-id: r21827
"
"2c3e1fe4ea0473267f213b0ffd286009cc3f3771","2006-04-12 14:54:31+00:00","Fixing mismatch between format strings and data on some systems

svn-id: r21828
"
"cdcf44d3f3cb2920ffd57317b126651076ca7e21","2006-04-12 16:34:23+00:00","Stubbed addPlayerCommandMessage(). I think it may have something to do with
printing default responses to commands.

svn-id: r21829
"
"1d265f18956cb78cfe2d9c92462853b057c2b2ef","2006-04-12 19:04:10+00:00","Commiting Fingolfins patch to remove gamedetector usage.

svn-id: r21830
"
"3631505437526750debbb6e378ff509eaa5c33c9","2006-04-12 20:36:45+00:00","Fix typo reported in #1469339: 'FluidSynth error typo'

svn-id: r21831
"
"19a1cdfe85f884d18417acf92c5cec50de5f072c","2006-04-12 22:06:30+00:00","Actions that do not have any custom response now print one of the default
responses. (Before, nothing would happen.)

svn-id: r21832
"
"f5ab0e55783768e4374e3e8de63fc529e3bb11f0","2006-04-12 22:07:41+00:00","Fixed potential crash in drawDialogueMessage(): The function should terminate
if, for some reason, messagePtr is NULL.

svn-id: r21833
"
"491d5ad12e42335dc356f73b60d166c5cc990b37","2006-04-13 02:39:59+00:00","GP32 uses ARM processor. So some of PalmOS specific changes also apply to GP32.

svn-id: r21834
"
"3fa9fa06c2787697606e001e402fae1ec798bad2","2006-04-13 04:01:55+00:00","Clarified detection filenames for HE games (removed FIXME comments).

svn-id: r21835
"
"09f4ae15806e0392f9530bf5cd83a02cae72b34b","2006-04-13 07:16:42+00:00","Fix various crash issues in FF, the image number in vc2_call needed to be adjusted

svn-id: r21836
"
"4ef316713e12dee33dbfef73d114e7394f801841","2006-04-13 09:43:27+00:00","Minor fixes to scrolling in FF

svn-id: r21837
"
"a4c5a691cc8ee05c21f5c2f678a730ca525fc9a4","2006-04-13 09:45:03+00:00","Disable quick load/save is FF, since original sometimes disabled load/save and it isn't reliable at the moment

svn-id: r21838
"
"4ee82b0cafffbc57141570894319d60b47acb34d","2006-04-13 09:53:51+00:00","Work around crash in drawSpriteRaw(). In Future Wars, when going to the future,
I walked back to the room where I first arrived. At that point, maskPtr was
NULL for reasons yet unknown.

svn-id: r21839
"
"eaddfc5ed8904d29daed5209b5015a886f4ffbf6","2006-04-13 10:03:45+00:00","vc36_setWindowImage is used for difference purpose in FF

svn-id: r21840
"
"696cbe1a649bae06be73a5ce90bef3ea96a64470","2006-04-13 12:23:30+00:00","Fix display of saved games list in oracle of FF, when saving

svn-id: r21841
"
"e9034e274ffcba46a3fe9ac87d565cb3f7560da8","2006-04-13 13:55:10+00:00","Fixes save/load.

svn-id: r21842
"
"89c89c02091512a7960bde3ccaa2d84b6c012bbf","2006-04-13 14:26:46+00:00","Add code for save game interface in FF

svn-id: r21843
"
"c9555a5d54b96337a6e6d08919bdad1a4d94fde4","2006-04-13 15:42:52+00:00","Added TODO about some extra data files that Operation Stealth has to load.

svn-id: r21844
"
"07a0d5489158efb0b56ec22014f0da89e99d2cb7","2006-04-13 16:25:07+00:00","- More stubs, the intro now works completely (with extreme graphical
glitches and without sound in the floppy version), the title screen
is shown afterwards
- Added skipping of the floppy version's copy protection screen,
since the CD version doesn't show it either

svn-id: r21845
"
"e21f99c7baeb99f794ba70b7fead9b2588d93cc0","2006-04-13 18:09:33+00:00","Slightly more verbose error message.

svn-id: r21846
"
"3bed2d377e8431aa94334f7bc9c307875c229c54","2006-04-13 20:56:22+00:00","Some more stubs and rearrangings

svn-id: r21847
"
"a3cd0bd17d82ee1a5ef7e352b18ca575861f4173","2006-04-13 21:09:39+00:00","Commented the SpriteOperation in Draw_v2::printText() out for now,
they are responsible for background mess-ups in the intro

svn-id: r21848
"
"fb985a26f82ce07e13549091a7655abf50ff357a","2006-04-13 21:52:23+00:00","Fixed the invalid reads visible with valgrind, deleted the
printText-dup, it's wrong for Gob2 anyway...

svn-id: r21849
"
"f2370a0560fdae4e748f7fbc1c7da6cd2b44a255","2006-04-13 22:20:50+00:00","Deletes color cache and custom dialog shading.

svn-id: r21850
"
"cd9dde81f45a0024574ab70bd6830698d0c8007c","2006-04-13 22:29:08+00:00","Add checkPaths function for FF

svn-id: r21851
"
"1444a1ab9f82c11d1348b85401d5b2bfd830f89f","2006-04-13 22:47:22+00:00","- No longer draws full shadows for disabled widgets
- Implements 'negativ alpha' values for drawSurfaceMasked (from -1 to -100, used to dim the pixels -1 means very very small dim -100 should be black)
- Changes drawSurfaceMasked to use macros for easy changing drawing code

svn-id: r21852
"
"fac96dfb34b3f35109394e7a4d41eb2e1c79429e","2006-04-13 23:13:56+00:00","Fixes possible illegal writes/segfaults in compressToType0 (added a comment about the changes).

svn-id: r21853
"
"3407185358347c81672acc370edad18e1ae39011","2006-04-13 23:34:58+00:00","Add invertBox function for FF

svn-id: r21854
"
"daf541e0b85d49e0d05323e86dd40b4e36bf6c53","2006-04-14 00:05:26+00:00","Fix compiler warnings

svn-id: r21855
"
"7cc83b82f2f69f5d52868a5b8548a2f9d8055d0c","2006-04-14 00:09:41+00:00","Re-add TODO file and put link to our real TODO list in Wiki. People are used
to look into it, so use that opportunity to direct them to current source.

svn-id: r21856
"
"94774a148dca2e752e374f35adf05cb9753efdef","2006-04-14 00:10:12+00:00","Fix regression in Amiga version of FF

svn-id: r21857
"
"8dcf6ed006ecfab0cd826a8ff0dd7c7dbd4d36cc","2006-04-14 00:36:54+00:00","Fix crash in fopenNoCase triggered by filenames/paths that exceeded ~ 512 bytes (see bug #1109687)

svn-id: r21858
"
"ab799101c034fe3c79d3b8134c35bd6ea3269568","2006-04-14 00:55:37+00:00","First batch of root directory cleanup. Now icons are stored in directory
icons/ and all other assorted stuff in dists/ directory. Still I may broke some
packaging/building procedures as no testing was performed.

svn-id: r21859
"
"78cc6e4eadc4a0866c9a8319b0b7ff6faaa9e7a7","2006-04-14 01:01:43+00:00","Finish cleanup of root directory. Now move scummvm.rc to dists/

svn-id: r21860
"
"065dcf565369389c4049d5ab6f28e87379f7af7a","2006-04-14 01:06:08+00:00","Part of patch #1467193: 'AmigaOS changes':
- Filesystem errors are now more detailed
- casting problems are hopefully gone
- some comments added in amigaos4-fs.cpp

svn-id: r21861
"
"ff1d11afe1d2dffc17ad7a47cd2bd0e7d742178e","2006-04-14 01:11:10+00:00","Rest of patch #1467193: 'AmigaOS changes':
- an icon file (icons/scummvm.info) for AmigaOS
- aos4dist target which strips the binary and copies stuff (including the icon)
to a hardcoded directory called Games:ScummVM_Snapshot.

svn-id: r21862
"
"e7af211fb5440fc50a88caf4922e60bc3abfd0bf","2006-04-14 01:14:38+00:00","Remove AmigaOS4 cookie as described in patch #1467193: 'AmigaOS changes':
- Icon (icons/scummvm.info) contains stack requirement so the stack cookie
can be removed

svn-id: r21863
"
"b1191c56acfe0334ec2694c30b027c4251be6022","2006-04-14 01:26:00+00:00","Remove duplicate check in checkPaths

svn-id: r21864
"
"6d386838323173e0dc25ec129f8e248dc80b0b21","2006-04-14 01:26:51+00:00","Fix mingw compile

svn-id: r21865
"
"507281610935fb2adcbae0c5f0d6239defdd8ffa","2006-04-14 01:47:33+00:00","Use const keyword to help compiler optimize code

svn-id: r21866
"
"1470dadb1de3250dfceeaa246604ca0f26889bbf","2006-04-14 01:48:51+00:00","Changed File::open to take a Common::String as file name parameter

svn-id: r21867
"
"96cf7028b98cd12e2278b37aee43b3d669214abb","2006-04-14 02:16:55+00:00","- implements .bdf font loader based on convbdf (sure could have some clean up)
- adds three different font styles to the themes (normal, bold (default one), italic)
- implements code for specifing the font files in the theme config ('fontfile_normal','fontfile_bold' and 'fontfile_italic' in the 'extra' section)
- changes EditTextWidget to use the normal font (has some minor aligment problems with the caret now, though)
- extends the FontManager (new functions: getFontByName, assignFontToName, removeFontName)
- adds the font style constans to the builtin constants for the evaluator)

svn-id: r21868
"
"53f81b33663d35cdc5b1fed0748501f00579f472","2006-04-14 02:21:38+00:00","Sets up standard normal font.

svn-id: r21869
"
"de0dd94c9cbf44f5dae72c69467fb7d24872eca5","2006-04-14 04:22:49+00:00","Add support for sound effects in Amiga version of FF and cleanup

svn-id: r21870
"
"1a6849de91ce2b36a37482c027268889893515bb","2006-04-14 05:13:59+00:00","Add speech support for Amiga verison of FF

svn-id: r21871
"
"3058efc168bddf62eab2fdc1a9bae16546d218ae","2006-04-14 05:15:11+00:00","Fixed stupid mistake (it's my mistake, I can call it whatever I want!) in the
scaling code. Hopefully it's right now. The scaling glitches seem to be gone,
at any rate.

svn-id: r21872
"
"89e0e27f6adb4df62b2a992e122fc4be6371ff2b","2006-04-14 06:26:18+00:00","Add missing increment in invertBox()

svn-id: r21873
"
"bd2adbee81ebff18b0b0003d35891f6e684f1229","2006-04-14 06:36:35+00:00","Ooops, increment table, not field in invertBox{}

svn-id: r21874
"
"d3a0f122a93d0296107da43dc9fce649ef0fe7cb","2006-04-14 07:06:54+00:00","Adjusted debug message levels: loading a cutscene is more interesting than the
drawing of a scaled sprite.

svn-id: r21875
"
"081a7b737ae04e939707220fe8d4b91ae3419c54","2006-04-14 07:24:40+00:00","A few corrections to path finding in FF

svn-id: r21876
"
"8a7950d87b4d706f1c737788f89331032ba83e62","2006-04-14 09:06:39+00:00","Remove unused code

svn-id: r21877
"
"64343ef2c06f10073f11c7b41d438de3f6b71f8a","2006-04-14 09:29:58+00:00","Fix for bug #1470104 ('Compiled features' string empty)

svn-id: r21878
"
"de0816442043f0460866ab2223c5a7dfaa55bd57","2006-04-14 09:45:29+00:00","Possible fix for bug #1470197 (SCUMM: HE Game variants broken)

svn-id: r21879
"
"f254b5b73a60857fdd019f059e76fd7e9f0d19ad","2006-04-14 09:57:43+00:00","Cleanup

svn-id: r21880
"
"77ad88a2f27c65db9752c27fadcdd56b9f8664a5","2006-04-14 09:58:20+00:00","Add variant for updated Spy Fox 1

svn-id: r21881
"
"6df54763ef89073220435f9be8c842af5132deac","2006-04-14 10:32:06+00:00","Yes, it is really necessry to compute a special 'disk number' here (in fbear at least)

svn-id: r21882
"
"1a629682a5fc74850ade0d39fde6c642a60bd2c4","2006-04-14 10:36:44+00:00","Fix object name display, after conversation in FF

svn-id: r21883
"
"601820548c1afad2ad2522d11fe4c262a5770c7f","2006-04-14 10:37:34+00:00","Avoid possible regression in set_video_mode_internal() for Simon1

svn-id: r21884
"
"6ba9a5fcf385f6fc75f246136759d3600bf56abf","2006-04-14 11:02:56+00:00","Correct size, when clearing image in renderString() for FF

svn-id: r21885
"
"7a74eeda082ab0a842976194aadee85843cfa8fb","2006-04-14 11:05:54+00:00","Fix glitch when entering saved game name in FF

svn-id: r21886
"
"1eb526f71aa5967e010960842dd3f4b49a2e6324","2006-04-14 13:20:39+00:00","Instead of calling our main them 'default-theme', call it 'modern' and reserve the gui theme name 'default' to indicate, well, the *default* theme, whatever that is

svn-id: r21887
"
"edd8557a0e9fbc4be48abe0579349642dc55d243","2006-04-14 14:26:34+00:00","cleanup

svn-id: r21888
"
"cff96b0a75c3d20a822409d50db356b6cd06f54b","2006-04-14 18:18:46+00:00","- Seems like I forget a branch in Mult_v2::animate()
- sub_1A52B is Scenery::updateStatic()

svn-id: r21889
"
"199e5cb4f7a4aea5832ac35431d1049f51ccf58b","2006-04-14 18:51:42+00:00","Some cleanup of the SCUMM ConfigDialog; also added a big FIXME comment explaining what the dialog does badly, and how that could be fixed (anybody feeling bored, feel free to implement the solution I outline there)

svn-id: r21890
"
"ce4927244cd509d4327dfd7858ba338287306ad1","2006-04-14 22:03:44+00:00","Update win32 dist

svn-id: r21891
"
"eb1459334fd11484a51561c7082e86cde5c8b492","2006-04-14 22:29:51+00:00","Tiny optimization for empty strings, which avoids allocating a single byte just to store an empty string (we pass around empty strings in lots of places)

svn-id: r21892
"
"0076235ebbc65bb7b08fc94338955e185058fe6d","2006-04-14 22:30:34+00:00","Fix another glitch in save game interface of FF

svn-id: r21893
"
"04709491f77c84108b371b15bb5b9797e0e0c1a2","2006-04-14 23:21:59+00:00","Avoid using exceptions

svn-id: r21894
"
"0bad4c701eca214c6c9863a57b1a3557c67d7b91","2006-04-15 00:12:14+00:00","Disable RTTI and exceptions (we don't use 'em and over here it saves 700kb in the executable)

svn-id: r21895
"
"aa2964ceffe5bfa4ad1ee5d827e7bef17cb6c8cf","2006-04-15 00:24:20+00:00","Some more detector stub code (unused)

svn-id: r21896
"
"c8fa54ec808426f7cd82cd45f71fe93278575aa1","2006-04-15 01:09:04+00:00","Adjust video opcodes for second variable array

svn-id: r21897
"
"10bc7b08876c278056b1f0e8a5b6eafb8e6bfe15","2006-04-15 01:48:52+00:00","Remove last use of hard coded language values and adjust settings for FF

svn-id: r21898
"
"f1592e1fefb7d983ca1ddf8c5b72a71702cdef74","2006-04-15 01:56:49+00:00","Fix compile warnings I caused

svn-id: r21899
"
"18e6b21e288a280df4c8eb78c16013250d660726","2006-04-15 05:24:44+00:00","Add support for switching voice file in PC versions of FF and cleanup

svn-id: r21900
"
"647b318a97bc3afd73dc9b04934a36e6e6c1ba5e","2006-04-15 06:35:40+00:00","Increase array sizes for FF and cleanup

svn-id: r21901
"
"3d36a28296a79d49c109486a8236b1a3f7a9b18a","2006-04-15 06:42:40+00:00","Adjust various number of textBox checks for FF

svn-id: r21902
"
"0c8d1821065a242c709d6797bcbf7b87c9b889ef","2006-04-15 06:47:26+00:00","Change _numTextBoxes to unsigned, to stop compile warnings

svn-id: r21903
"
"5e8f44fcf261bdf414e308dd3f71f6f0cb9b2f13","2006-04-15 07:56:55+00:00","Minor cleanup

svn-id: r21904
"
"2f024e270199d5fc2d38d62150b689a1fdca0b1d","2006-04-15 12:19:38+00:00","Increase size of variable array entries, to prevent overflows that often occur in FF. The original FF used unsigned variable arrays, but Simon 1/2 requires a signed variable array.

svn-id: r21905
"
"3628629007e4b97b7b634d0545e3acd474c7708b","2006-04-15 13:12:03+00:00","- Replaced ConfigManager::_globalDomains by _appDomain (we don't support multiple global domains anymore)
- Restructured parts of the ConfigManager to be more consistent and a bit easier to understand
- Introduced ConfigManager::getDomain, potentially useful for code that needs to edit a specific domain (like the option dialogs)
- Allow passing an empty string to ConfigManager::setActiveDomain(), to reset the active domain
- Discard all transient config options (i.e. mostly command line settings) when entering the launcher, and after an engine exits
- Introduced various hidden easter bugs. Happy easter, and have fun searching!

svn-id: r21906
"
"f3278d7f8293bbca518415e4193d17e6c9efd2e7","2006-04-15 13:21:02+00:00","Clear the transient domaing *after* running the launcher, not before, so that the graphics mode gets set correctly

svn-id: r21907
"
"aa4214f9401d9ab5c7161c6e2dfeddf3128a2a23","2006-04-15 13:34:02+00:00","Properly init _activeDomain to 0

svn-id: r21908
"
"9c4577b6399878d8ddf279e73978d70e086491a9","2006-04-15 13:50:44+00:00","- Get rid of GameDetector::_dumpScripts and GameDetector::_force1xOverlay in favor of settings in the transient config domain
- This also means you can now set those options in the config file
- Fixed a bug I recently introduced that made bool command line options (like -u, -f) always return 'false' when used in their single letter form

svn-id: r21909
"
"c07fc494d2d4d06459b7381ce028d0ad2a387b4e","2006-04-15 13:51:49+00:00","oops

svn-id: r21910
"
"ebea155b8ebe6a92701aa40155e548bc59f12dbb","2006-04-15 13:58:01+00:00","Always use base 0 in strtol when parsing integer command line options / config file entries (this makes it possible to optionally use hex values)

svn-id: r21911
"
"e3737b9f47d65b8e48adb50092988fa2899c6aba","2006-04-15 14:25:41+00:00","Fix display of swap character logo in FF

svn-id: r21912
"
"fa085439b9a346efe99cf0a95c8f6bba293c18e7","2006-04-15 16:37:48+00:00","Removed GameDetector::createMixer(), GameDetector::createEngine(), GameDetector::_plugin

svn-id: r21913
"
"dc5f513bcf7b6177a4d8f7e10fb4ed4dd55d7588","2006-04-15 17:32:06+00:00","Set *plugin to 0, not plugin, which has the advantage that games launch again... stupid me

svn-id: r21914
"
"ad45318328e23b76e346414c62ef4c22d8ebe059","2006-04-15 17:39:14+00:00","Removed GameDetector::_gameid in favor of using a config manager entry

svn-id: r21915
"
"68cb7f52c8dd64ccfe8f28e847b530c8835175c3","2006-04-15 20:36:41+00:00","- Renamed ConfigManager::getActiveDomain to getActiveDomainName, and added a new getActiveDomain method that returns a pointer to the actual active *domain*
- Added Engine::_targetName whose value is computed from the name of the active domain
- Removed GameDetector::_targetName, instead code now uses either Engine::_targetName or the name of the active domain
- This in turn allowed for removing usage of GameDetector in many places

svn-id: r21916
"
"18975a298d0868461699820b9e59ef8fd90cebed","2006-04-15 21:20:16+00:00","Moved (Plain)GameDescriptor from base/gameDetector.h to the new base/game.h header file

svn-id: r21917
"
"ec17b6505e938c92cd64cbb2efa5871e44bae550","2006-04-15 21:20:32+00:00","Removed unused #include

svn-id: r21918
"
"68450b31e3d719e8b8bb8a57d5924f9244c3bc0a","2006-04-15 21:22:33+00:00","cleanup

svn-id: r21919
"
"ce13d8e946182f1daeb734a4a015d936a8e34ffb","2006-04-15 21:27:56+00:00","cleanup

svn-id: r21920
"
"1e47edcd2244f951bd2a22502ae45fb26cd2d66a","2006-04-15 21:29:41+00:00","cleanup

svn-id: r21921
"
"e63763329cf96d9295d398c1c34d9818a00e3db7","2006-04-15 22:01:03+00:00","Changed default-theme -> modern

svn-id: r21922
"
"53698416f212565afdf516f0f2cd5c1912f43c64","2006-04-15 22:14:18+00:00","Use different methods to avoid overflows to FF, to avoid regressions

svn-id: r21923
"
"b90b59506049d90290f9bd099b545fee64166a56","2006-04-15 22:14:39+00:00","Use different methods to avoid overflows to FF, to avoid regressions

svn-id: r21924
"
"9d703f1fcfd51cc2e074e005ca9a3a3ca59bdb72","2006-04-15 22:22:03+00:00","Remove out dated comment

svn-id: r21925
"
"5b388fc48e8293dd4d6bb30538c00c3051f87164","2006-04-15 22:37:48+00:00","Cleanup

svn-id: r21926
"
"e83841e8c790cf79341ab95fa793613e898b16d1","2006-04-15 23:23:55+00:00","Fix speech id for o_screenTextMsg() in FF

svn-id: r21927
"
"426a75ad6a2fad8227628682051c101fcd21565d","2006-04-16 01:06:18+00:00","Correct sign, to fix weird path finding issues in FF

svn-id: r21928
"
"cc0ebb97e4a3282644153e274d596dc69e83345f","2006-04-16 05:37:16+00:00","Use default cursor in FF for now, to make selection easier

svn-id: r21929
"
"58bfa30c7baedde26e0b1901c4dce3f0229b866b","2006-04-16 06:49:13+00:00","Improve cursor support in FF

svn-id: r21930
"
"1f07432927838fcc09e39e8f89aad11ea2d90a76","2006-04-16 09:12:27+00:00","Fixed evil longstanding bug in String::toLowercase & toUppercase: Before modifying the string content, make sure we do not share it with any other string). This should help (hopefully fix) bug #1470892

svn-id: r21931
"
"26736f9a67ef56559fcca542b1bfecd057d803cc","2006-04-16 09:52:10+00:00","Fix mouse cursor changing for buttons in chemistry set for FF

svn-id: r21932
"
"cadafb0689fc96fc77f09dc70b4b32cc8c572714","2006-04-16 10:12:33+00:00","Fix cursor colors in chemsitry set for FF

svn-id: r21933
"
"924ec172ff6604ff0a701c00517038e6170f7267","2006-04-16 10:23:36+00:00","- Implemented text padding in ListWidget and PopUpWidget. Right padding does not work yet.
- Implemented highlisght padding in ListWidget
- Eval::getVar() method with default value
- Removed unused constructors for ListWidget and PoUpWidget
- cleanup
- bumped theme version

svn-id: r21934
"
"453aad9ec382fe34197a6a3c4b53262a64b2f7cc","2006-04-16 12:23:37+00:00","Do not override the 'directory' param when dumping BS2 resources

svn-id: r21935
"
"856b1b0bf4864252434b612dec1f01100a2e9c5c","2006-04-16 12:39:59+00:00","Do not override the 'directory' param when dumping BASS resources

svn-id: r21936
"
"ba1b25305eb824f89f4dfa153f8022c5c5f4e798","2006-04-16 12:50:39+00:00","Removed the directory parameter from md5_file

svn-id: r21937
"
"3020b2016a96d312b8e04153669c558333588508","2006-04-16 12:55:14+00:00","test commit

svn-id: r21938
"
"206fdf0528bc72debd6ab7f872df0da1effdd8bd","2006-04-16 13:01:41+00:00","Fixed broken svn:keywords values

svn-id: r21939
"
"6c076f80d7a214fb20f24e4054c7c32a39049168","2006-04-16 13:12:23+00:00","Reduced dependencies on base/plugins.h

svn-id: r21940
"
"1baf98f1c85a8e95cba74d947c9ff1657ee80e68","2006-04-16 13:26:10+00:00","update so it compiles again with current svn

svn-id: r21941
"
"1a20a9ae0998c4cd890962630d3806dc01cf85a5","2006-04-16 13:37:48+00:00","Add missing mouse pointer checks for oracle and SAM in FF

svn-id: r21942
"
"555a568e596b3d4dfe992689e8bc805d5feebfb2","2006-04-16 13:58:11+00:00","Fixed some breakage in the 'Add Game' code I recently introduced; added a FIXME comment regarding the 'description' config file key

svn-id: r21943
"
"fe01f3a03f879d518f2952025aad5b724d8ad54a","2006-04-16 14:07:55+00:00","Ignore the 'virtual' HE entries at the end of gameVariantsTable (this fixes an odd detector problem)

svn-id: r21944
"
"784467abfd8e00454d1700ce2cf895bbf1f41402","2006-04-16 14:14:22+00:00","changed comments into real comments

svn-id: r21945
"
"d5909ee1228a3f7527642ae1a6ec441273dccc4c","2006-04-16 14:40:12+00:00","some cleanup

svn-id: r21946
"
"75e851777b71b04576b255864e65159faaa79ebd","2006-04-16 16:56:11+00:00","The File class automatically tries adding '.' to a filename if the file cannot
be found, so there's no need for the Simon engine to do it. (Though the game
detector still does at the moment.)

svn-id: r21947
"
"d2efa9fc65ff509fc4d829a5a818f9b8e7e6f1c6","2006-04-16 17:53:37+00:00","The backend is responsible for making its own copy of the mouse cursor, so FF
can use the original data, instead of leaking memory every time the
drawMousePointer() function is called (several times per second).

svn-id: r21948
"
"9de4b02b5ced75709df3b86040472e5b96e08522","2006-04-16 18:17:53+00:00","Patch #1469722: 'Game-specific SoundFont configuration broken'

svn-id: r21949
"
"08b9cd7922c48df064c17d71cc306f330043b817","2006-04-16 18:32:28+00:00","Remove redundant code. soundfont is taken care in OptionsDialog::open() now.

svn-id: r21950
"
"74edd90aba15db1196b16b5eae918347670d11c8","2006-04-16 19:23:14+00:00","Fix for bug #1471383: Instead of overloading ConfigManager::set, we now have new setInt and setBool methods (matching getInt/getBool), which avoids strange quirks & bugs caused by (char *) being implicitly cast to int (ouch)

svn-id: r21951
"
"e9cbf5fcbd1af19d1936593d1de736c0e0e91f89","2006-04-16 19:54:39+00:00","- Moves Graphics::loadFont to Graphics::NewFont::loadFont
- adds code for caching of fonts (just for Graphics::NewFont)
- implements cache using in the modern theme for custom fonts
- adds cache file for current normal font in the theme zip file

svn-id: r21952
"
"b99632831f417d751d41deddc3a7b00b3dcc56b3","2006-04-16 20:33:52+00:00","This should fix wrong colors of the scummvm logo in the new theme after screen change.

svn-id: r21953
"
"e7716748ba964b1bf767df86227609ee49e444dc","2006-04-16 20:41:40+00:00","Should fix wrong thumbnail colors after a screen change, which changed bpp.

svn-id: r21954
"
"632185fb7eac718c46440fed654625535629aca3","2006-04-17 00:34:21+00:00","Fix vertical scrolling

svn-id: r21955
"
"30645d5e0585140ba13c6c490bb5ed067fea28e1","2006-04-17 00:35:38+00:00","Only allocate scale buffer when using FF

svn-id: r21956
"
"3497bab17cc2a10d5200a274ac3b2932797b6c97","2006-04-17 01:04:08+00:00","Fix box selection after vertical scrolling in FF

svn-id: r21957
"
"2c5874e9256b78bab5e532c7760b815003bb02e0","2006-04-17 01:31:02+00:00","Handle unsigned variableArray reads better in FF, fixes more missing subroutines

svn-id: r21958
"
"5b3f73f27cec4204f0d827a2a0ba97a4fb122526","2006-04-17 04:02:48+00:00","Intergrate the DXA player for Amiga/Macintosh verisons of FF, from cyx

svn-id: r21959
"
"092893a16d021a2391a3adfbb07db5f8bf9ee073","2006-04-17 05:01:29+00:00","Minor cleanup

svn-id: r21960
"
"de250812e5e2a15fc3a1dddc9faae09f1c2df6d6","2006-04-17 08:38:26+00:00","Removed my Altivec version of the hqx blitters, since it (a) didn't work with newer GCC versions, (b) speed was improved on some systems, but actually slower on others, and (c) even on my old 400 Mhz G4 hqx is fast enough w/o it

svn-id: r21961
"
"eb60d6abfe8b0a29dd9e93b8810ba7492904dbba","2006-04-17 09:23:51+00:00","Document how the alpha color component is to be interpreted

svn-id: r21962
"
"4683b427ee47683623f5a55452b37c03c640f949","2006-04-17 09:31:13+00:00","Clarify that kFeatureOverlaySupportsAlpha should only be set if at least a few bits of alpha are present

svn-id: r21963
"
"d27396d51d0d88d502e889ee6873b4a1010ddf9c","2006-04-17 09:35:42+00:00","cleanup

svn-id: r21964
"
"bbac9e43ee2d29eb76a792225d7f936382169810","2006-04-17 09:45:18+00:00","Actually, 3-4 alpha bits are fine, too :)

svn-id: r21965
"
"ea85e8c986189ef0143343e9de6d9279dcf09096","2006-04-17 10:22:05+00:00","Moved ColorMasks to their own new header graphics/colormasks.h, so that both the scalers and the GUI code can access them. Also added (untested) entries for 1555, 444, 888 and 8888 modes

svn-id: r21966
"
"fe9f60e2196d2762c874740fff35dc0ed07ea5ad","2006-04-17 10:41:18+00:00","Add color conversion functions based on ColorMasks, to demonstrate how this would work

svn-id: r21967
"
"d7944e839b09b620b1d6c5af248208b4c01d7ae6","2006-04-17 10:44:02+00:00","Since we define alpha value 255 to mean 'opaque', or T::kAlphaMask into the result of RGBToColor

svn-id: r21968
"
"2732ed3dcec40664a988c6ca43fff7996781624e","2006-04-17 11:09:21+00:00","Fixed (A)RGBToColor templates

svn-id: r21969
"
"35a2fc402811b1dd047d62e571164f3d50d86393","2006-04-17 11:11:07+00:00","Modify InitLUT to make use of ColorMasks, making it easier to add support for other color modes eventually. This also fixes the computation of LUT16to32 which so far always assumed 565 mode.

svn-id: r21970
"
"340705c138f2d7f3218ae6e4bac1423d21196024","2006-04-17 11:16:11+00:00","Allocate LUT/YUV tables on the heap

svn-id: r21971
"
"85158181cf9bd56b6c46c735182391ab3e692932","2006-04-17 11:23:30+00:00","Updated Mac OS X pixel icons from SVG version

svn-id: r21973
"
"82dfef4ce2c65dd3c345628eac19cfc3ccb4cbb9","2006-04-17 12:05:45+00:00","Improve sound support in FF and add MoviePlayer class

svn-id: r21975
"
"5bfe6fd6f4ac3289caa63050a4315749a6eee68a","2006-04-17 12:46:20+00:00","Remove leftover warning

svn-id: r21976
"
"d832f69f4ca73af8579c9c5aad63e2b2ec4bb218","2006-04-17 13:19:36+00:00","Adjust video playback code, due to false calls in prison of FF

svn-id: r21977
"
"2a0ba88aef12a2934201d14eedfc185bf22aaf76","2006-04-17 13:48:44+00:00","Trigger videos for OmniTV in FF

svn-id: r21978
"
"ac24769196e238485e9c365af3469db8a03b564a","2006-04-17 14:32:46+00:00","Replaced o70_seekFilePos by o60_seekFilePos (both were identical)

svn-id: r21979
"
"bdd5a25c16096604fa3001900699e2e8cec9cced","2006-04-17 17:39:08+00:00","Implements the end credits, and disables fast forwarding in the intro.

svn-id: r21980
"
"b47e531425a00cd29e81d4ad98b3be2fd6f4189b","2006-04-17 18:17:02+00:00","Renamed and merge some of the pixel interpolation functions (the names still could be better)

svn-id: r21981
"
"c128bad7df4d79368e854eb0ab8b8844550b2d43","2006-04-17 18:23:16+00:00","Simple optimization

svn-id: r21982
"
"43143daca7b4a7137252e125bb9319e3e26f6ee9","2006-04-17 18:28:19+00:00","Replace interpolate32 calls by interpolate16 calls (as we only work on single pixels here currently)

svn-id: r21983
"
"955b53fb883451a7d3079ee28dc6f0fd07d606ab","2006-04-17 18:50:33+00:00","Fixes bug with wrong colors in the logo after a screen change. (this time it works!)

svn-id: r21984
"
"a76689ed71a91e8b638b9f073ace2f41f9e46b2b","2006-04-17 18:54:20+00:00","Make use of triple-interpolation function in SuperEagel (should save a few cycles... not that it really matters :)

svn-id: r21985
"
"6e2a18e28dedee07b661341e9afdd39a942360c6","2006-04-17 19:31:05+00:00","Rewrote the timing of the Kyra end credits so that it doesn't matter that the
variables are signed. Otherwise the credits may hang on a slow system.

svn-id: r21986
"
"592e37accd3cc4a935f6da17ec0b1c6f655835e6","2006-04-17 19:33:08+00:00","Fixes bug #1471895 ('KYRA1: Kyragem goes black at the very end').

svn-id: r21987
"
"2fb0ce8c5781560bb87ab85324c67f78a00f127e","2006-04-17 19:39:31+00:00","Simplifies credits.txt loading.

svn-id: r21988
"
"0eee3fe5919df695af2b3a8b2f9845cf7b1a771c","2006-04-17 19:52:31+00:00","- Implements copyRegion without transparency checking
- Uses copyRegion without transparency checking to fix credits drawing bugs

svn-id: r21989
"
"5244d481e6271f13e0120540f75c5593c2e7a463","2006-04-17 22:35:33+00:00","Add FF difference in addBox script opcode, fixes x position of some boxes

svn-id: r21990
"
"c17350958d66efb34d690601bb468840fa704712","2006-04-17 22:47:12+00:00","Split screenTextPObj script opcode into game specific versions

svn-id: r21991
"
"72906f25087ad6adae33c64236bde00ed99c5012","2006-04-17 23:37:22+00:00","Made the Lure engine call updateScreen() more often - particularly when using
the menu bar at the top of the window - for smoother mouse movement. (After a
discussion with sev.)

svn-id: r21992
"
"d13720477243040b247d7ee6e6e18991e3eb4f63","2006-04-17 23:45:48+00:00","Call updateScreen() from waitForTimer() (instead of usually right before it)
for smoother mouse cursor movement.

svn-id: r21993
"
"614fc253a9b3264c8f4d71b9c9227fb32c2f2ac9","2006-04-17 23:55:42+00:00","Moved updateScreen() into delay() for smoother mouse cursor movement. This may
possibly make some other calls to updateScreen() unnecessary, but it's the
backend's responsibility to ignore unnecessary calls.

svn-id: r21994
"
"b4c8b498debb05967547ce82ffc3680cca3fda57","2006-04-18 00:15:25+00:00","Scrolling comparisons should always be signed, fixes scrolling issue in maze of FF

svn-id: r21995
"
"e22f1c64c51f35a2eef869f03c10e38fb3cf635e","2006-04-18 00:20:07+00:00","Call updateScreen() from delay functions for smoother mouse cursor movement.

svn-id: r21996
"
"1c9c14011be6f8da8aa8298bdaca66f7b135a59d","2006-04-18 00:34:57+00:00","Tame colors a bit to match GUI mock-ups

svn-id: r21997
"
"5daa835cc724db34bcd47c9fddaf44317fa5b83e","2006-04-18 00:37:04+00:00","- PopUpWidget (drop down list) does not shadow underlying dialog anymore
- Remove reduntant code in drawing pipeline. Topmost dialog was drawn
up to 4 times

svn-id: r21998
"
"b756c3e899facb4762dfd03cbc7f0b913bfc44aa","2006-04-18 02:08:51+00:00","Fixes use of textspeed settings if voice+text mode is enabled. (thanks to salty-horse)

svn-id: r21999
"
"4b59f6fbda912ccac9619d144d68536cb4d72834","2006-04-18 02:20:46+00:00","Correct box numbers when scrolling text in oracle of FF

svn-id: r22000
"
"ab48280f731cf65313b4bd57896e762eb04fbce9","2006-04-18 09:59:18+00:00","- I misunderstood Draw::initBigSprite(); fixed
- Changed Draw::spriteOperation() for blitting from/to/between and
fillrecting to big sprites
- Enabled drawing of text

svn-id: r22001
"
"506cdd9054198b6cf049b28b879bb1fff0b7d478","2006-04-18 11:38:18+00:00","Fix time events continuing, when using the oracle in FF

svn-id: r22003
"
"18cf15ffc3801bc68bcf07708df6c7c260397410","2006-04-18 11:51:08+00:00","Add missing timer adjustment when saving game in FF

svn-id: r22004
"
"4d2f4a9f797e8beabad868164b203fbc3e5625e1","2006-04-18 12:39:02+00:00","- Closed the stub in Draw_v2::printText()
- Added a language field in GameSettings, so that the texts in
Gob2 work for other languages than EN_GRB as well

svn-id: r22005
"
"b4e5e18201595b60192d0ff9c28073b688aa7b65","2006-04-18 12:55:01+00:00","Fixed portability issue

svn-id: r22006
"
"1d12b3ef29e5aad77591c4a85f8d5322ac47ed1d","2006-04-18 13:28:42+00:00","Add code for vc84_stopSoundLoop in FF

svn-id: r22007
"
"40b74d5182f962652759ccfe4cd346a3de7889b0","2006-04-18 13:32:51+00:00","Correct increment for checkPaths script opcode in FF

svn-id: r22008
"
"6b034b66d8e95512a56bb5e3da083e8995bc5718","2006-04-18 18:23:57+00:00","Added support for the --save-slot option for Broken Sword 1. (Feature request
#1460977.)

svn-id: r22009
"
"646a40b09b86e8977872128a5032f2882a78633d","2006-04-18 18:25:44+00:00","I guess the BS1 --save-slot option may be newsworthy...

svn-id: r22010
"
"1ae205a2412eb0503e2ed26245f653e7047af982","2006-04-18 18:40:33+00:00","- adds own drawing function for (not expanded) popup widgets
- adds pixmaps, colorfades, and gradient factor for the (not expanded) popup widget in new theme
- bumps themeconfig version

svn-id: r22011
"
"a9431edca2f5ed3a8e6753662822393755bc69e6","2006-04-18 18:50:07+00:00","- Fixed popup widget for --force-1x-overlay with new theme
- adds support for highlightened popupwidgets

svn-id: r22012
"
"96d23871b654e6d1cdeef302ba82afd370945a85","2006-04-18 18:57:43+00:00","Oops forgot to use shadows for the PopUpWidget.

svn-id: r22013
"
"1e150278856831f3cc1e473fd01473ac2961bd3a","2006-04-18 19:04:15+00:00","Fixes 'aspect ratio' text in the options with --force-1x-overlay.

svn-id: r22014
"
"58af73b344928cf817613c7d51e0769b064d48ae","2006-04-18 19:52:12+00:00","Restores background before drawing a popupwidget.

svn-id: r22015
"
"ec7e734adb2133a653f500636b101fc09ab6e4ae","2006-04-18 23:08:41+00:00","Fix sound memory leak in FF

svn-id: r22016
"
"30787714d30e9202890922ec10833e695bc8a3bf","2006-04-19 01:05:28+00:00","Started to prepare the gui for runtime resolution switches.
(some little things could be missing yet though)

svn-id: r22017
"
"8828daba84a323e2f33dd37a980aded95cae314b","2006-04-19 01:07:16+00:00","Updates scumm dialogs for runtime overlay resolution changes.

svn-id: r22018
"
"0a767b6467b8221d5404cc822c7bb49d4f449cb7","2006-04-19 03:17:00+00:00","Implements custom cursor support for the new theme and includes a standard cursor (it should be replaced though).

svn-id: r22019
"
"ff421d5adc78519ae90098386c86f4db5cd7f8aa","2006-04-19 05:46:21+00:00","Prepairs merge of SaveLoadChooser and SaveLoadChooserEx of the scumm engine.

svn-id: r22020
"
"7f0c8883add18b67decbf20044bf70adebe5d2da","2006-04-19 05:46:57+00:00","Merges SaveLoadChooser and SaveLoadChooserEx.

svn-id: r22021
"
"87c6abdd686790fbb94f0c0c65d2ea9f9cb1a086","2006-04-19 05:48:08+00:00","Oops forgot to commit changes here with last commit.

svn-id: r22022
"
"af8b2d83f78336a3fa5d03ed1eb4386f9541de1c","2006-04-19 05:50:03+00:00","Oops again. removed unneeded entry.

svn-id: r22023
"
"1c65f3417af37329284a0f36f4b451d11308660a","2006-04-19 06:00:34+00:00","Fixes problems with wrong colors on the overlay in scumm engine.

svn-id: r22024
"
"9e734b0851915924d1fc3115bbca0a3bd9a271a2","2006-04-19 06:22:15+00:00","Adds handleScreenChanged() to NewGui, so (scumm) engine can call it when it recives a EVENT_SCREEN_CHANGED.

svn-id: r22025
"
"3f76984a413ac3ad22a5d4be287061ad017b9ea0","2006-04-19 06:23:49+00:00","Let scumm engine handle EVENT_SCREEN_CHANGED and let the gui know. (Needed for disabling overlay scaling)

svn-id: r22026
"
"0351e979c1cdc7e6b23ab1036d3cbbbd39e81c89","2006-04-19 07:07:08+00:00","Update debug tables

svn-id: r22029
"
"0a71cc83772ce5b0dd897b1ed8b11c498be343b5","2006-04-19 07:14:03+00:00","Add FF difference in mouseOn script opcode

svn-id: r22030
"
"75542e0f9595d4ad1da109e6cd262e728c379293","2006-04-19 11:01:03+00:00","Add minor code differences in FF, might help corrupt graphics

svn-id: r22033
"
"e97476621d6ed49edd11cca6150c034ee81ae8fe","2006-04-19 11:05:47+00:00","Number the FF conversation options.

svn-id: r22034
"
"18d0afaafd3f37c0013353d642baedf9141f7d38","2006-04-19 11:54:38+00:00","Correct dummyItems in FF and cleanup

svn-id: r22035
"
"41afb2a9962aafb2cfd91a89f057ad14c8cb4c4f","2006-04-19 14:18:34+00:00","Fixed a potential bug when calculating the width of conversation option in FF.
This bug appears to have been present in the original as well, though the
chances of triggering it are small. (We did in at least one place, before
adding the number prefix to the string.)

svn-id: r22036
"
"c5507879fc2c0edfcce7ad8802401d9d7c21e10f","2006-04-19 16:16:57+00:00","Removed wrong platform values from gameVariantsTable

svn-id: r22037
"
"70d23ccf2922ce6743cb7a49f4f55a9372fe44f8","2006-04-19 18:14:28+00:00","Added a small comment to ScummEngine::openRoom that explains why we check for room==0 instead of just using it as-is

svn-id: r22038
"
"343dacdcf74bdf8bea69ea2b9c2f60a670386b66","2006-04-19 20:04:53+00:00","Fix text corruption with long FF conversation options. The renderString()
function has to adjust the buffer offsets, or a long string can spill over into
the next buffer. (Or, in the test case I used, into the next *two* buffers.)

It would probably be safe - but apparently unnecessary? - to make this change
for the Simon games as well.

svn-id: r22039
"
"b4c330ce07f8aebc794bfd065a78f4d994d2a083","2006-04-19 20:26:27+00:00","Some more tweaks to the (still disabled) new detection / filename generation code

svn-id: r22040
"
"718532b386abd9e9e9b744de41fdd1038befe3a5","2006-04-19 22:53:37+00:00","Fix ASM HQ routines, because RGBtoYUV and LUT16to32 are on heap now.

svn-id: r22041
"
"1f01a524212074c07dc10cc8ebae99181f0f0733","2006-04-19 23:01:31+00:00","The next offset is only adjusted in renderString, when sprite id isn't 1

svn-id: r22042
"
"531a62939c1f03873de36bcc8485c1ce024a1376","2006-04-20 00:42:54+00:00","Update resource managment for FF, this method is more efficent for Simon 1/2 too

svn-id: r22043
"
"3917351a93c245903d793495dfb278745fae3e58","2006-04-20 00:54:30+00:00","Minor cleanup

svn-id: r22044
"
"f9c3e7fd810902f1b28d8038c57e017c0311afce","2006-04-20 01:54:14+00:00","Add support for compressed speech files in PC verisons of FF

svn-id: r22046
"
"56d856cd20f296502e2c8973c1ebab3e2e575515","2006-04-20 02:23:17+00:00","Cleanup

svn-id: r22047
"
"afb264a4275cc222e55b49d2abdbeb23c6ef1068","2006-04-20 02:42:54+00:00","Fix freeze that can occur when scrolling inventory in oracle of FF

svn-id: r22048
"
"8121b8eebe63b801bd545537b490112dba10a4ac","2006-04-20 05:54:25+00:00","Update resource managment, missed several changes from FF

svn-id: r22049
"
"66cbf6c05df0f06335cb19aa063f7a0272f0339d","2006-04-20 06:38:46+00:00","_rejectCount should only be incremented in checkNoOverWrite()

svn-id: r22050
"
"04efb67f21f541bb743c0df4fd59b4c63dd2bb77","2006-04-20 07:01:55+00:00","Fix mistake in vertical scrolling in FF

svn-id: r22051
"
"b6783677b5c4f3133cfdc963e626fd836340ac59","2006-04-20 08:14:55+00:00","If I understand things correctly, this should fix the caret drawing in list
widgets. (The glitch was most noticeable in the modern theme.)

svn-id: r22052
"
"25ca897466f78f77afd3f7f0bb409fa53ad7fc79","2006-04-20 08:46:46+00:00","Fix typo in switchVoiceFile() for FF

svn-id: r22053
"
"948301faaf5ec5d7b1863539531af90b57fa55d7","2006-04-20 08:58:30+00:00","Add timer difference in FF

svn-id: r22054
"
"c07f314b1f99390c27ee2f1d99e4b77fda8cd89b","2006-04-20 10:45:51+00:00","getPathPosn script opcode needs to use int16 to get correct position, fixes entering teleporter in village in FF

svn-id: r22055
"
"31ae5e09e8c564c560e66a3aa4779a659ba93b44","2006-04-20 11:57:23+00:00","Fix constant scrolling in oracle in FF, when mouse button is pressed

svn-id: r22056
"
"e951870642d92881f4656772bdadb9d73dcf699e","2006-04-20 12:01:53+00:00","Enable virtual keyboard, when entering saved game name in FF

svn-id: r22057
"
"baca89c9be73f2ffed279d92d99b650b11e59a13","2006-04-20 12:04:49+00:00","Revert that delay change when scrolling inventory in FF, causes glitches

svn-id: r22058
"
"5482ec5db676772714307b4df51ac4f461e764ad","2006-04-20 12:23:20+00:00","Add F9 key in FF, which toggles hitbox names

svn-id: r22059
"
"95c134c9a8c7e5f5dcfff48be9e3bb8a7392cae9","2006-04-20 12:25:25+00:00","Fix compile with DISABLE_FANCY_THEME.

svn-id: r22060
"
"564727be2cb68a758da61a8ebac32f16cb3f8ee3","2006-04-20 14:55:27+00:00","Add used memory counter.

svn-id: r22061
"
"b80ef2cd8fddc0cf78ec1fbd283c79578fc08234","2006-04-21 00:18:23+00:00","Add some code for PanEvent in FF and cleanup

svn-id: r22062
"
"fc3284efce00c130de80c5522dde2055de423283","2006-04-21 00:26:18+00:00","Add back debug function

svn-id: r22063
"
"6ea936c41f928347156dbfa0c8232deb005f34bc","2006-04-21 03:09:21+00:00","Add animate sprites by Y function for FF

svn-id: r22064
"
"d47459562994cd183645e1ac999447fa5c9a2aa7","2006-04-21 04:06:44+00:00","Fix valgrind warning

svn-id: r22065
"
"6b7a37d71cd368cafd0821450639ec0cc0544f83","2006-04-21 04:36:26+00:00","Move _variableArrayPtr changes to match original code, in case it is triggered outside video opcodes

svn-id: r22066
"
"061063189ffc7ed0055cd88f3086dc0e236e2e68","2006-04-21 06:37:28+00:00","Split bitArrays into three separate arrays, like original. Also fixing load/save issue with bitArrayThree been off by one

svn-id: r22067
"
"9bcdecec2849a132418284638fd520f3e16d74f8","2006-04-21 07:42:40+00:00","Add FF differences in chance script opcode

svn-id: r22068
"
"8740bc01340787d4b8af1fd84f9827cef3105b43","2006-04-21 10:24:22+00:00","Fixed silly bug in --save-slot handling: Don't try to restore a savegame unless
the specified save slot is > 0. (The default value is -1, which shouldn't be
restored either.)

I thought I had fixed that already, but I guess I made a last-minute change...

svn-id: r22069
"
"312e49b6eb987ebdce03439dea7a370406e101aa","2006-04-21 10:47:43+00:00","Adjust buffer sizes for conversation options, even for sprite id 1. This
doesn't seem to match the original, but there are cases where even the first
string is long enough to cause text corruption.

For whatever reason, I have not been able to reproduce this text corruption
with the original interpreter, though, so maybe we're missing some detail. Or
maybe the original interpreter just gets lucky.

svn-id: r22070
"
"86bc1d49230b229ebb885138655b0e37f8130936","2006-04-21 20:49:06+00:00","Add creation of Symbian SDL backend instead of plain SDL

svn-id: r22071
"
"fb905751c77006e0eefd31a45fd74d02163a7a42","2006-04-21 20:50:28+00:00","Conflicting domains for String definition. Added Common:: to String to clarify domain.

svn-id: r22072
"
"7b80324c6dad4f3b250b58a827bbf0077e69b9e7","2006-04-21 20:51:29+00:00","Use SetInt to set the Keymapping version, instead of Set.

svn-id: r22073
"
"aec70b0bb2c86949b165630d20e99af0d47104a5","2006-04-21 20:56:53+00:00","Implementation and declartion in intern.h differed. Changed so both is using the same datatype.

svn-id: r22074
"
"5b776e3e2859ed24b3186af7bea1cec666a0910e","2006-04-21 20:59:05+00:00","Return of void value is not valid for all platforms. Changed to call function and then plain return;

svn-id: r22075
"
"a3661c158af1e6a0cff79714db84f78b33428ca8","2006-04-21 21:15:05+00:00","Updated Symbian Actions and SDL Symbian interface for latest backend changes so it all works properly again.

svn-id: r22076
"
"76ba8122a6990976b9ed7890ba4695c3e0ddc019","2006-04-21 22:10:50+00:00","Changed loadVGAFile dstSize datatype from uint to uint32 so it matches the data type which loadOffsets takes.

svn-id: r22077
"
"1a605b2760f228ff0b14c3d9655f70d108e03c23","2006-04-22 02:14:42+00:00","Cleanup use of different filenames in different versions

svn-id: r22078
"
"7b1e93b596b09f3e6138ee67866e36766b6dc335","2006-04-22 02:49:27+00:00","Implement CLIP() routine used to put arbitrary value in specified range.

svn-id: r22079
"
"ff6028b00bca2a01ed41f8f8ed5ee5c86f8f1410","2006-04-22 03:00:21+00:00","- Implemented MS ADPCM WAV format decoder used in Feeble Files. Still it is
out of sync with video. See TODO there.
- Fixed bug with MS IMA ADPCM mono to make it possible to work in real streams.

svn-id: r22080
"
"77497d5ed95d8f7015fb4caffa396a381a3c8869","2006-04-22 03:53:14+00:00","Enable MS ADPCM WAV format decoder for all sound in Macintosh version of FF and cleanup

svn-id: r22081
"
"30b4b87f587283218eb19865633ce8a659fdd392","2006-04-22 05:48:40+00:00","Fix valgrind warning

svn-id: r22082
"
"37633732f1f2ee18543d485d5b8357b8edca0c70","2006-04-22 07:32:06+00:00","Added F1 as save for ITE

svn-id: r22083
"
"2952dd123c09d14981eb91cb95fa2c966736d1cf","2006-04-22 15:29:38+00:00","The dirent struct on IRIX doesn't have the d_type field, so define SYSTEM_NOT_SUPPORTING_D_TYPE

svn-id: r22085
"
"db747c21000e0b18da0341684de08e67239a6fca","2006-04-22 23:59:56+00:00","Non-void functions always must return something

svn-id: r22086
"
"660efce9b29fc412ad4ddf502de120f47966f4d7","2006-04-23 00:08:18+00:00","Replaced _demoMode by GF_DEMO

svn-id: r22087
"
"f1a318ce150f4c7657278c4827a1e822549919f8","2006-04-23 02:11:49+00:00","Fix audio and video sync. in videos of FF

svn-id: r22088
"
"0de7374c4c6a7ecd2cdcb29de5606f1ce9c61d69","2006-04-23 02:44:46+00:00","Read and use frame rate setting for videos

svn-id: r22089
"
"562b1f8eef3c2bed56a96b1f7af86f95cd325d96","2006-04-23 08:26:32+00:00","Fix video sequences shown by arcade machines

svn-id: r22090
"
"a0ea9a4efc5462d53749f9acbf5ed7f0e05e44d0","2006-04-23 08:30:29+00:00","Fix video sequences shown by arcade machines

svn-id: r22091
"
"b9fbf9091d46d1ecd6927c11f8cd3a4ccfe49abf","2006-04-23 08:34:19+00:00","Fix video sequences shown by arcade machines

svn-id: r22092
"
"f26b55c7a3cea614db32172d5c1167748d87d84f","2006-04-23 11:15:43+00:00","Modified some error calls to explicitly name the function they occured in (this helps debugging)

svn-id: r22093
"
"cbb5f5fc75deba04bfd2a3ca67eef3b6594044c5","2006-04-23 11:35:14+00:00","Fix 'comparison between signed and unsigned integer' warning

svn-id: r22094
"
"eb895185a6832e8849c89d964fccf2ecfc50a481","2006-04-23 11:38:48+00:00","Test code for the detection code in all engines (disabled by default)

svn-id: r22095
"
"307f4e387b086095dc4241c64d95007ba534eb8b","2006-04-23 12:29:43+00:00","Fixed getNodeForPath on systems using POSIXFilesystemNode to again correctly check whether the given path exists, and whether it points to a directory

svn-id: r22097
"
"c7f2e3d6307b7bf6866dcb12ea650e15cbc63bde","2006-04-23 12:30:52+00:00","Modified DETECTOR_TESTING_HACK code to skip over invalid paths

svn-id: r22099
"
"65338135766104a067cc20123702556e57d0dea3","2006-04-23 13:29:37+00:00","Fixed MD5 entry for mac version of MI1

svn-id: r22102
"
"8e9c2e7508a441550fd2c9545ab1ccbd302a2829","2006-04-23 13:39:57+00:00","typo

svn-id: r22103
"
"f25cb2e7356bc6c5ffda6e2cb3b18206c8377e24","2006-04-23 14:43:16+00:00","Uses kyra.dat for GUI strings instead of hardcoding them, which means localized strings are now supported for the menus. Note that the size of the menus are not yet calculated to account for the longer strings in some languages

svn-id: r22105
"
"5e3e026f92cca8fb75800baa5eaf3918cb9e08ca","2006-04-23 14:47:43+00:00","Also output the description when running DETECTOR_TESTING_HACK

svn-id: r22106
"
"beb72667dcf1f6141d9f2e08f73cc60adad34eea","2006-04-23 15:42:02+00:00","Implemented volume and panning for FF sound effects. I hope my mapping from
DirectSound's logarithmic scale to ScummVM's linear scale is at least
reasonably collect. This should keep the sound effects from overpowering the
spoken voices in some scenes.

svn-id: r22107
"
"15ecef5b39a2356d3111a6b15f36a5f32df69901","2006-04-23 17:02:39+00:00","Remove superfluous exclamation mark

svn-id: r22108
"
"d11f5724f96107a07d462be2410d93f55bd1fba2","2006-04-23 17:18:54+00:00","Small tweak to allow turning off MD5 computation for debugging

svn-id: r22109
"
"0d67640a58b044ade0605319e091df9b2f666e4a","2006-04-23 17:33:16+00:00","Behold, the new SCUMM detector finally has arrived. Unified detection & engine instantiation, reduced code duplication, more powerful detection in case MD5 is not known / can't be computed, and many other nifty improvements.

svn-id: r22110
"
"4b6f90945bfc8ad6c51a46747a0c133393b1fa9b","2006-04-23 17:39:31+00:00","Modified openFile and openResourceFile to take a Common::String instead of a char pointer

svn-id: r22112
"
"0891a91acca1af6fbe418ee555a2341cb737a247","2006-04-23 17:47:40+00:00","Change some uses of ScummFile to the more generic BaseScummFile

svn-id: r22113
"
"78dfa1f28062378b98b204e9e10c4a8f182cf4c9","2006-04-23 17:58:52+00:00","Moved ScummEngine_v5 from cursor.cpp to scumm.cpp (seems to be more natural, even though it inits some cursor related stuff)

svn-id: r22114
"
"d68f95b3be82fe0048b6ba72f70b80887214a0e6","2006-04-23 18:52:39+00:00","Move HE specific stuff from class Sound to its new subclass SoundHE

svn-id: r22115
"
"b2befd795174c76f5d1136f838eb585ce1d34aa7","2006-04-23 19:41:54+00:00","Moved _heTimers to ScummEngine_v60he

svn-id: r22116
"
"1a7b4a7d7c654fca8efad976ffb81bde0d16c15a","2006-04-23 20:02:33+00:00","Added a comment regarding COMI disc changing

svn-id: r22117
"
"e0a5a2b89e3414f944e24d86a9bf2c8b20526a78","2006-04-23 21:56:09+00:00","Fix access to .he3/.he4 files

svn-id: r22118
"
"f776b903d1cbe919108eff9d25f0239ff204a7a7","2006-04-23 21:58:01+00:00","Fix access to .he2 in Sound::openSfxFile, too

svn-id: r22119
"
"3f41e2dc2135cc7c41cf504649e8f327635f1a73","2006-04-23 22:39:55+00:00","Detect (and error out) if readMAXS fails

svn-id: r22120
"
"67c64371f7c070b08767ded30f931568e72fcf4d","2006-04-23 22:43:19+00:00","Update credits

svn-id: r22121
"
"99ab7d6facc35ab06badc86798e0185a908e773c","2006-04-23 22:44:50+00:00","Fix for HE games which use the generic HE variants (d'oh)

svn-id: r22122
"
"91831974a86e5964f24c745c45ea3ed75589ac2e","2006-04-23 22:55:31+00:00","Update all credits

svn-id: r22123
"
"e80d24aa22e5e83a86b28454d23241f3574eef1f","2006-04-23 23:00:32+00:00","Some more cleanup in class Scumm::Sound

svn-id: r22125
"
"b1bc5f059e29ebc0994133dde869ead162a1f883","2006-04-23 23:27:51+00:00","Fix loading music/speech files in HE98+ games

svn-id: r22126
"
"ea3cdb1ed4b7020acaf18579b9bbfe50af2599c6","2006-04-24 01:14:28+00:00","Fix sound memory leak

svn-id: r22127
"
"7d975539c2214f7c726f00b92f62ec63c53d10f0","2006-04-24 01:40:16+00:00","Ooops, real memory leak was in sound buffer

svn-id: r22128
"
"e8b3fa84a752da647d4131b1cc8c063741cd028a","2006-04-24 02:11:04+00:00","Free screen buffers on exit

svn-id: r22129
"
"1dd84a90bd3e1f5b655a2226964d99e733e73ebc","2006-04-24 04:34:57+00:00","isSpriteLoaded is Simon 1/2 specific and never used by FF

svn-id: r22130
"
"7f0fdde6d473726a8da5aa4f0e5aa14c1dc0783e","2006-04-24 04:43:37+00:00","Remove duplicate variable in readGamePcText()

svn-id: r22131
"
"1fa5c82301b49972ab23a5f4e11063977cb77f7d","2006-04-24 06:01:51+00:00","Initialize all variables in MoviePlayer class

svn-id: r22132
"
"f08ed105e96e5a41bcbda55d2a83586b87e98b1b","2006-04-24 06:02:47+00:00","Fix memory leak in readGamePcText()

svn-id: r22133
"
"05e01f011fe88034150128cd2b83f6286ffc823f","2006-04-24 06:46:31+00:00","Restrict variables sizes, when reading from vcReadNextWord(), to prevent overflows

svn-id: r22134
"
"9743de2acf3c8824e5fe5c53c0c47ea14aedb20a","2006-04-24 07:45:57+00:00","vcReadVar() should return a signed value

svn-id: r22135
"
"8632282db31ace6d7be32f5c733a08974e33b2ad","2006-04-24 10:24:56+00:00","Add support for OmniTV

svn-id: r22136
"
"d088729a8c21570c13fb85a17abd34eaeef50011","2006-04-24 10:28:48+00:00","Correct and move warning, when failing to load video in FF

svn-id: r22137
"
"e59f47e33e680a8d88671844f3cbdaad39c5aa32","2006-04-24 10:32:36+00:00","Remove duplicate code

svn-id: r22138
"
"78d69667340914d8737d0836cc9ef20dec0296dd","2006-04-24 10:35:57+00:00","Revert sign change to vcReadVar(), made glitches worse in some scenes

svn-id: r22139
"
"19838db21d09261314740f611f1cf5fb8ce2cdec","2006-04-24 17:10:15+00:00","If startSound() can't find a WAVE chunk, set the file position to the beginning
of the chunk again. Otherwise, animations without a sound track (such as
disk1.dxa) will fail to play.

svn-id: r22140
"
"2020164a7a503a2a4f5b80e7013a1e617b71354a","2006-04-24 22:00:41+00:00","Revert change, a NULL block should be added if audio doesn't exist

svn-id: r22141
"
"2aa54814f8855d709b4def28d17968125d6c6a98","2006-04-25 06:04:20+00:00","Hide mouse pointer when video is active

svn-id: r22144
"
"8e4f16bcc1db009070368eefab98d81873d99b7f","2006-04-25 08:01:57+00:00","Fix OmniTV not stopping, when room changes in FF

svn-id: r22145
"
"fdfb68feb3cece3bd1ca072918372846334fd318","2006-04-25 10:27:15+00:00","Fix fps setting for video play back

svn-id: r22147
"
"9b589e06cdc24d9811b7b4861f28121e1c5b48ca","2006-04-25 11:58:21+00:00","Adds some code to dynamically resize and readjust the menus if the text strings of the current language are too long, to avoid overlaps etc.

svn-id: r22148
"
"6b76f83ea1539e3dffe75a98fd585a4cf9652281","2006-04-25 13:07:01+00:00","Fix OmniTV repeating for now

svn-id: r22149
"
"869622cf005e7989ae6ad8b95acbefac9ada436e","2006-04-25 14:27:41+00:00","- Resize chooser dialog
- Swap About and Help buttons in main SCUMM menu for consistency with launcher

svn-id: r22150
"
"58462fa682fc0c6a408cacd5879491503ddff812","2006-04-25 14:59:42+00:00","- minor cleanup in modern.ini
- implement skipFor theme section keyword

svn-id: r22151
"
"6b225b40faaba652ba5f8b87ba5107720c6c5079","2006-04-25 15:20:46+00:00","Uses the special cursor color palette for the cursor now (this fixes problems with creation of thumbnails of the scumm engine)

svn-id: r22152
"
"d5c8a791a6abc578deacded063ac50d58d3fadad","2006-04-25 15:42:37+00:00","Fixes some coordinate initialization in the menus, and makes sure the initial savegame is created when kyrandia is started for the first time

svn-id: r22153
"
"62dce81acc63472c7bf0d1b0681908a617cea150","2006-04-25 19:20:57+00:00","HashMap::size does not modify the state of the hashmap, so it can be declared const (allowing it to be used on const hashmaps, too)

svn-id: r22156
"
"66783576d419478cab6f85bca2fc44d542a459e7","2006-04-25 21:26:49+00:00","Somewhat improved detection when MD5 is not available/known

svn-id: r22157
"
"e9332e41d6508bd143df2e1e2fa31e8434011552","2006-04-25 21:31:55+00:00","Added hidden --test-detector command line option to make it easy to test the detector on your config file (to be removed before the next release)

svn-id: r22158
"
"b36a5afbd841df965151716fda4c06485ac8901b","2006-04-25 21:37:53+00:00","Files that are *not* 00.LFL or 000.LFL indicate V5+ games -> teach the detector about that

svn-id: r22159
"
"44159b75f4a7aeee385ff2bdbb33d0c62eb4d0b1","2006-04-25 22:27:29+00:00","Set prop svn:eol-style

svn-id: r22160
"
"3b35bc353cbe13b8e4faf4f42aa48c17565db2b4","2006-04-25 22:29:32+00:00","Patch #1476367: 'Fix compilation of current SVN with DevCpp'. In fact this
is 'Update project files for DevCpp'

svn-id: r22161
"
"14beeb3492e7d46515d003399ecdbc393d3e1a0f","2006-04-25 22:38:00+00:00","Added disassembly of door close support routines and other miscellaneous action support code

svn-id: r22162
"
"bf53520130bbde8a1fb85bebae487d8b489d8f42","2006-04-25 23:07:59+00:00","- Check if path specified for a game in scummvm.ini really exists and complain
if it does not
- Give more understandable feedback to user when SCUMM module can't find
a game
- Put TODO to kyra engine as their current detection scheme does not let
easily tell if game data really present in specified directory

svn-id: r22163
"
"d53348797fe32ce9685a97ebca374bd08e37ea7d","2006-04-25 23:31:11+00:00","Show GUI message when game data is not found.

svn-id: r22164
"
"35098dbd9fac1c5bc70c9711c8779b439ec6d294","2006-04-26 00:59:13+00:00","Introduce and use Engine_Empty() and Engine::GUIErrorMessage()

svn-id: r22165
"
"9aec81802d709c0f4e329b1ed7a30afa775462d2","2006-04-26 01:09:31+00:00","Return correct value from Engine_Empty::init() method.

svn-id: r22166
"
"6b10484513fdfa735608d1f288564fd1a40bad7c","2006-04-26 05:59:58+00:00","Fixed the output from the 'res' debugger command that I accidentally broke, oh,
almost four months ago.

svn-id: r22167
"
"2cbcd49893f0099c8fb0fbee076ac242a2b8c5e0","2006-04-26 06:12:03+00:00","If the resource manager fails to initialize itself properly, instead of
printing a fatal error, use the new GUIErrorMessage function and return to
the launcher. Also, verify that all files that should be present on 'CD 0'
(i.e. on the hard disk) are present at startup, at least. (Any other missing
CLU file is already requested with an 'Insert CD' message.)

svn-id: r22168
"
"d5224d87bbdc89101801228236e6925995669bd2","2006-04-26 08:05:40+00:00","Properly re-implemented File::exists to FilesystemNode (this should fix bug #1476651, at least partially)

svn-id: r22169
"
"f42bb14ea3f0c4e4801a026d6ff9cd881d0999df","2006-04-26 08:13:25+00:00","Commited *correct* File::exists reimplementation (compared to my incomplete previous commit. Aargh)

svn-id: r22170
"
"8bb9ae92ad0721adca944d8a8197f3e5d3944bd6","2006-04-26 08:29:32+00:00","Yet another revision of File::exists. I now believe the function really is 'wrong' right now (it has to fulfill too many roles right now). Need to correctly fix this later

svn-id: r22171
"
"8fdcfedf19d3d7f7c0b8d56a2dfe9c6b090da411","2006-04-26 08:34:01+00:00","Do not call static class methods as if they were instance methods

svn-id: r22172
"
"c940380314d1336c0a703bf89e3f0a17a7e3d819","2006-04-26 08:35:54+00:00","Replace unneeded File::exists calls

svn-id: r22173
"
"1dba198cbf88059e9033067086a0a7b59917527a","2006-04-26 08:36:55+00:00","Proper fix for bug #1476651: Do not use File::exists to check for the presence of a directory described by an absolute path

svn-id: r22174
"
"a28250d6608a897f4ad34b7c6c1463104aa6ae83","2006-04-26 09:04:51+00:00","Print a slightly more verbose error message when Roland patch isn't found

svn-id: r22175
"
"5ceb4b19b0b31556d29289381a5bb007e05c9c46","2006-04-26 10:34:34+00:00","isSoundRunning always returns sound id in HE games

svn-id: r22176
"
"e78185aeb82790adc638d1f7c260a0ecd9d01792","2006-04-26 10:53:03+00:00","Fix timer events time when saving game in FF

svn-id: r22177
"
"7383f81d2fef5af29243c68c9b818f1a43b08d4f","2006-04-26 10:54:32+00:00","Added a 'skip' method to SeekableReadStream (just an alias for seek(X, SEEK_CUR))

svn-id: r22178
"
"46058e8d17a1178fb856dbbf4aad1eb94f4040ca","2006-04-26 10:55:27+00:00","Fix timer events time when saving game in FF

svn-id: r22179
"
"0aaa04899cf77abe98148882429440ca8804dfe2","2006-04-26 11:15:13+00:00","Changed InSaveFile (part of the save file system) to inherit from SeekableReadStream, meaning that savegames opened for reading now are seekable (DC, PS2, Palm ports will have to be updated accordingly)

svn-id: r22180
"
"c4c09fd8f1c94ef18c965be6a92ab7d08716b05f","2006-04-26 13:12:33+00:00","Use the joined filename for savegames, otherwise saves will be stored in the
current working directory instead of the save directory.

svn-id: r22181
"
"092fd961456ff20026886c6f30d2c6c00d532165","2006-04-26 14:05:09+00:00","Replaced _hFileTable by _hInFileTable/_hOutFileTable

svn-id: r22182
"
"cd528083f955dece5bf1c97085efc1d8b0e5857f","2006-04-26 14:05:34+00:00","Removed 'directory' parameter of File::open

svn-id: r22183
"
"a4338aeb19dadb655fe3c29d2a95da196a6b07cd","2006-04-26 14:35:53+00:00","Use File::size to determine the size of a file, instead of doing a seek(0, SEEK_END)

svn-id: r22184
"
"bdf790e294e2b3f05d590238bc36e10210c3c2af","2006-04-26 17:15:29+00:00","cleanup

svn-id: r22185
"
"5dd3ef077f876a195a2f9378326f3849ef16db3b","2006-04-26 19:49:13+00:00","Add FF difference in isAdjNoun opcode. This makes it possible to get past the
SAM / PEG puzzle, but do not ask me what, exactly, was wrong. I haven't a clue.

svn-id: r22186
"
"ac1ce25512b291016487c987719e1f840b497bb2","2006-04-26 22:31:10+00:00","add missing comma for portuguese quit text, remove stray comma after last string.

svn-id: r22187
"
"9d5098e0f83a56c98adca8472468468a8ed1b0d0","2006-04-27 00:02:06+00:00","Insane is part of SCUMM V7, not V6

svn-id: r22188
"
"9ec94f6fcb2ac09c9d78e04b816fdb159d0a9286","2006-04-27 00:39:10+00:00","Move the detector code out of the constructor and into init() to do error handling (specifically the GUI error message if no game is found in the specified directory), and cleans up the constructor/destructor a bit to allow a clean exit.

svn-id: r22189
"
"47068bde519630a71792143e9b2edd4905a4a845","2006-04-27 00:42:12+00:00","Typo

svn-id: r22190
"
"5c2dd8da2412cad1ca75dbdd46702d7fbf1ccad5","2006-04-27 04:59:13+00:00","Fix compile of SCUMM engine

svn-id: r22191
"
"cf13cf3a706dba93b39b3fdc1176b91c569575d1","2006-04-27 17:21:33+00:00","I still don't know whether this is the correct fix for WindowsFilesystemNode, but at least with it, one definite and serious bug in the code (using an uninitialised variable) has been fixed, the end result hardly will be worse

svn-id: r22192
"
"6330e6585225c40b63818eb3ee608b144704493f","2006-04-27 19:55:09+00:00","return first sdl-config found in PATH

svn-id: r22193
"
"e163be131c191f3e04ae120690b0d0926deeb25f","2006-04-27 23:14:54+00:00","Revert kListAllNoRoot addition to listdir(), the uninitialized _isPseudoRoot in windows filesys backend was real cause of problem.

svn-id: r22194
"
"c1572b2dbd5950774415a7b4db30d7473deeb552","2006-04-27 23:16:45+00:00","_isPseudoRoot should be always false, in WindowsFilesystemNode(const String &path)

svn-id: r22195
"
"36e3e5ee782b7d4031017da0c315ca533d7b7af4","2006-04-28 23:15:43+00:00","Memorize the directory that was last visited with the browser across ScummVM runs (see also FR #1460734)

svn-id: r22197
"
"b00262a2fe1b8bf1d51794a9da3e735e97dfb5ee","2006-04-28 23:43:56+00:00","Report unknown MD5s again

svn-id: r22198
"
"bf7359881115a5b041028b032ee28430bc5e36d3","2006-04-29 00:27:20+00:00","* Changed the createEngine() factory function of our plugins to return an error code (the engine is now passed indirectly via a double pointer)
* Removed Engine_Empty (obsolete now that engines can return actual error codes)

svn-id: r22199
"
"9774261e0f11f14b3403a6894fa58e9a180ac51b","2006-04-29 00:32:38+00:00","Fix mistakes in animateSpritesByY() for FF

svn-id: r22200
"
"8e7895e7bcbb1e9d233174751cc0ff8e65c565b6","2006-04-29 02:01:32+00:00","Add more timer code differences in FF

svn-id: r22201
"
"d88ce16b12de73306ee0842e539e95c08e7f8952","2006-04-29 11:13:47+00:00","Tweaked dialog display code to refresh the screen and warn about message Ids needing display styles that aren't yet implement

svn-id: r22204
"
"3e8763f454dc82d0e1969c39927fa6fdee3454f3","2006-04-29 11:15:03+00:00","Reworked resources to handle moved hotspot proximity (walk to) co-ordinates

svn-id: r22205
"
"302c825a1702a60f2af75af67090457477ea2bce","2006-04-29 11:17:06+00:00","Reworked resource loading to no longer load hotspot proximities separately, or provide access to the list

svn-id: r22206
"
"8b184ad5b06f6a80975c19e88b2378d4fd7dedc4","2006-04-29 11:18:08+00:00","Changed resource Id constants, added a few more general constants, and slightly increased game speed

svn-id: r22207
"
"946d0582dcd24ceeb4245c1709b65f2de4ee480a","2006-04-29 11:19:55+00:00","Added proper action display after selection along with showing the camera cursor

svn-id: r22208
"
"1192f0dfca144db2b6913ce8db950dce028d012c","2006-04-29 11:22:05+00:00","Enhanced hotspot action so that the player will properly walk to a hotspot before performing an action

svn-id: r22209
"
"0aabdf821c579eae8eb1f7e77399d89328eb4748","2006-04-29 11:56:59+00:00","Fix warning

svn-id: r22210
"
"7e02709e7d6c5c31141cef50bce13ddb64845a34","2006-04-29 12:21:47+00:00","Fix error in debug table

svn-id: r22213
"
"d9ed515f90952635cf3195131ce86905dbd29a08","2006-04-29 12:25:15+00:00","Merge fadeToBlack() into o1_specialFade() and cleanup

svn-id: r22214
"
"80bc64b9515b567defcd0d6ce7c231f4190d182f","2006-04-29 12:29:21+00:00","Minor cleanup

svn-id: r22215
"
"ffe434a9494b67d8b92d660a2eeb24a1e571d9f8","2006-04-29 12:35:46+00:00","Add FF difference in o_screenTextMsg()

svn-id: r22216
"
"a427a14ebe01e502c801ad375abc78dfa1593427","2006-04-29 12:38:28+00:00","Updated the common on why we would like to display the SVN rev as part of the ScummVM version string, and why this is non-trivial

svn-id: r22217
"
"cc3fac2ead745876f618a904d2029080730a2baf","2006-04-29 12:44:06+00:00","Split scummLoop into multiple functions, for easier maintanance & customizability

svn-id: r22218
"
"1735b0421bbbc1fcd2a6d0126a152ceef39b6b43","2006-04-29 13:01:35+00:00","Make use of the new scummLoop_* functions to move some SCUMM version specific stuff around

svn-id: r22219
"
"af280f967b7288940ed2adabd4c00b66f6a708db","2006-04-29 13:17:22+00:00","add small note about svnversion

svn-id: r22220
"
"daed55b789c1dfa8ad0261da3fe97ee2b64db889","2006-04-29 13:38:07+00:00","Split more functions of simon.cpp into separate files

svn-id: r22221
"
"39e9853d91a88c9659036ec6dc903d48a000e93c","2006-04-29 13:56:36+00:00","* Added ScummEngine_v8::initScummVars()
* Moved VAR_LANGUAGE to class ScummEngine_v8
* Minor cleanup

svn-id: r22223
"
"16e90765a9103e8c1c39b2e009b5f152e56cc2b8","2006-04-29 14:11:29+00:00","Split more functions of simon.cpp into separate files

svn-id: r22224
"
"7c8457ca5d06590e476d4f4f4a4618e81b927745","2006-04-29 14:23:16+00:00","Cleanup includes

svn-id: r22225
"
"ad5a89a04b3ccc847cb022b125d2a555c10839b6","2006-04-29 14:29:57+00:00","'qtable' is the tool we used to generate the 'queen.tbl' file.
As the .tbl file is now the repository (in the engine-data module), I thought it would be nice to have the tool to (re)generate it.
It may also be useful to add support for any other versions.

There's no makefile ; to build the tool, just compile 'qtable.c'.
To generate the .tbl file, just execute the tool with the output filename as argument.

svn-id: r22226
"
"c4df5037dc19a053cb0a3f66a4cf0775ffc09183","2006-04-29 16:24:39+00:00","* Renamed several methods in favor of a somewhat more uniform naming scheme: setupFOO for stuff that inits static data (i.e. will be called only once, or after loading savegames), vs. resetFOO / updateFOO methods which are called frequently and (re)set dynamic data.
* Doing this, split scummInit into setupScumm and resetScumm methods
* Moved some init code to new methods (huuuuge init methods are hard to read, and hard to customize using subclassing)
* Renmaed various setup???Palette methods to set???Palette
* Some minor cleanup / tweaks

svn-id: r22227
"
"fcd178fca4477d6aae8eb55da6e4191f84cb7a10","2006-04-29 16:30:46+00:00","Added comment about a major leak in ScummEngine::restart

svn-id: r22228
"
"aeef84c96198df9aedbd9bbc51db5868b6f9bc33","2006-04-29 16:51:29+00:00","Moved AKOS stuff to class ScummEngine_v6

svn-id: r22229
"
"ac0ae13bee890b78442788abe6b87e514c9928a0","2006-04-29 17:50:15+00:00","Fixed bug #1478911 ('BASS regression: garbled text') by making skipBytes uint16
instead of uint8. (It used to be uint32, but anything that can hold 0x03F8
should be large enough.)

svn-id: r22230
"
"27307acd7c6f9f9083bdcad38ba54f18d4f080b7","2006-04-29 22:33:31+00:00","Moved the AudioCDManager as well as class AudioStream and its (standard) subclasses to namespace Audio

svn-id: r22231
"
"eaca27a33bb5bc68fae8a58b32f2cec94aabb5fb","2006-04-29 23:09:40+00:00","Renamed updateVolumes to updateSoundSettings -- now it also handles subtitles/speech_mute settings. Also changed the ConfigDialog accordingly

svn-id: r22233
"
"b59a791c5ef362b60136246e511c40018ef5e661","2006-04-29 23:23:32+00:00","Moved queryResString from class ScummDialog to class InfoDialog; some cleanup

svn-id: r22234
"
"8f1604e4cf777311d3147507fbc79344aa57ac0d","2006-04-30 05:34:54+00:00","Added load of new script offset field for NPC handling of hotspots

svn-id: r22235
"
"5584ea5c7ea9cc5158975709e74f4015b655f2f0","2006-04-30 05:35:39+00:00","Incremented required lure.dat version

svn-id: r22236
"
"9654ed97c09c6eea21c507ae1131054957fb4a9c","2006-04-30 06:10:14+00:00","Add complete support for mouse cursors in FF, with help from olki

svn-id: r22238
"
"8b9401f2d77853f4606fda99e5ff8975002381de","2006-04-30 06:12:50+00:00","Fast fade out should be disabled, after a cutscene

svn-id: r22239
"
"59b89e7a79dbfec8ce049fd166996169ae16a30c","2006-04-30 06:23:32+00:00","Clear palette too, after some cutscenes

svn-id: r22240
"
"29a125dcdaf43ec3107f8503911054424bc46635","2006-04-30 08:48:31+00:00","Use system code for mouse cursors in FF

svn-id: r22241
"
"49dbcc591e6f20615eb8fe18149a7fdb6a150aa7","2006-04-30 08:50:19+00:00","Ooops, update var names for drawMousePart()

svn-id: r22242
"
"c34e30ea79d146dd67ce0067bc96098b87fbfcbf","2006-04-30 12:56:13+00:00","Revert last change to mouse cursors in FF, causes odd glitches

svn-id: r22243
"
"ccfb74431b48fc9c8ee75173c0bdbd0123ed1803","2006-04-30 13:40:35+00:00","cleanup

svn-id: r22244
"
"f8b0649d18b5b4522110a9fd89fc6d62cbc65e07","2006-04-30 15:06:17+00:00","Honor the 'platform' override when choosing between game variants (this should help fan translations of certain FM-TOWNS games)

svn-id: r22246
"
"39e887d6aa56b06fb57c6f8ff52aa39da24c11a7","2006-04-30 20:35:43+00:00","Invoke updateSoundSettings a bit later, since it can only correctly set VAR_VOICE_MODE *after* setupScummVars() has been called

svn-id: r22247
"
"8542e92ed37af3383123b19edd930db65cd81c56","2006-04-30 20:36:14+00:00","Do not set VAR_VOICE_MODE in ScummEngine_v7::resetScummVars() (since it is already being set by updateSoundSettings())

svn-id: r22248
"
"8300d1d2a921dc5aebb855ebc404ba0957e4435a","2006-04-30 22:52:10+00:00","Added new AbstractFilesystemNode::child() resp. FilesystemNode::getChild() methods

svn-id: r22249
"
"fd9e73d1f098a075fc5b1b4938c6336c2821dbf9","2006-04-30 22:58:44+00:00","Avoid 'unused variable' warning when using DISABLE_MD5

svn-id: r22250
"
"13e4fc74e0bcaaa2df75ca60f284a57cbf7ccca8","2006-04-30 23:08:37+00:00","Add a File::open variant that takes a FilesystemNode as parameter

svn-id: r22251
"
"ff7955f4d3124a1c736a7a883e5bcc66f533e193","2006-05-01 00:25:41+00:00","Adds archive file list, MD5 for my CD version, and a few function stubs for Hand of Fate, to use as a basis for further work

svn-id: r22252
"
"7b7d29067508ad8a6c8115dec10e98ae2092b5a5","2006-05-01 08:24:57+00:00","Add windows code for AbstractFilesystemNode::child()

svn-id: r22253
"
"2eabfd5f287686b7f5186af71cc199b99cf06bdd","2006-05-01 12:43:50+00:00","- More differences in Draw_v2::spriteOperation()
- GOB2 handles _frontSurface/_backSurface a bit differently, this fixes
(most of) the drawing glitches in the intro
- Added using a fallback when the user's game version doesn't have the
requested language
- off_2E51B et al. stubs, I think it has something to do with the menu

svn-id: r22254
"
"f84699ffbdb49f321ad36d5e330119def56ed484","2006-05-01 12:57:24+00:00","Makes malcolm walking into the kyragem room after some time. (fixes half of bug #1471893 ('KYRA1: Graphics glitch when Malcolm turns to stone'))

svn-id: r22255
"
"73dbd2887353f5273d5ae2a7fe579f3ee3d23921","2006-05-01 13:05:18+00:00","Just add kyra2 to kyra_list if ENABLE_KYRA2 is defined.

svn-id: r22256
"
"6d419559a20409e11e0b10ca193dc780aa37ff71","2006-05-01 13:53:30+00:00","Minor cleanup

svn-id: r22258
"
"72f0c9a5d72862c4b19910ae97c2b138cc94d9bb","2006-05-01 14:14:24+00:00","Applied patch from Nicolas Joly to fix the French default messages in Future
Wars. (I had originally left them as question marks because I didn't know what
characters they were supposed to be.)

svn-id: r22259
"
"492929ae530316a4bbcb1c395abb1497016a1c9f","2006-05-01 14:20:02+00:00","Updated symbian-fs backend and cleanup

svn-id: r22260
"
"49dd5402139a0d4dfcce3ff7464adf4e8771da10","2006-05-01 15:36:54+00:00","_pseudoRoot was not intialized properly

svn-id: r22261
"
"61a0266a926208bd45e1c378f6062921b03f8724","2006-05-01 16:04:53+00:00","More stubs; GOB2 goes in-game for a second, then segfaults in the
Global-constructor; valgrind shows invalid reads in parseValExpr()
and parseExpr() while accessing _inter_variables and _inter_execPtr

svn-id: r22262
"
"8a855b42518ca63916b18ee8a88fd01d41662386","2006-05-01 19:11:57+00:00","- Stubbed goblinFunc(), it's completeley different; now it at least
doesn't crash anymore
- Reduced valgrind's complains about unitialized memory

svn-id: r22263
"
"cab89a6f322f5ff9f306f5d0790c836cde5bb989","2006-05-01 20:10:29+00:00","Another small update/cleanup to the French messages from Nicolas Joly.

svn-id: r22264
"
"7e3df42510a2da4de6bc41a3d41ea1f8ddbcd54f","2006-05-01 21:06:34+00:00","Add a variant of File::addDefaultDirectory(Recursive) which takes a FilesystemNode instead of a string object

svn-id: r22265
"
"77c29d0ab20de8fbdd7954602f3759d110eea2dd","2006-05-01 21:31:06+00:00","Some cleanup, and added a FIXME comment concerning the wrong usage of getSavePath()

svn-id: r22266
"
"e4a7de9d754c7e9b9a9f4f313b3a89bf4b5283af","2006-05-01 21:53:31+00:00","Patch #1479919 (AmigaOS maintaining)

svn-id: r22267
"
"dbe1c50bc9ce6e54115b7784585310ebb5433985","2006-05-01 22:04:13+00:00","Added a missing '*' (which marks the comment as being one doxygen should process)

svn-id: r22268
"
"84b2a4f76fed5848b8a4ff49fd2fcfd9604a0c92","2006-05-01 22:27:56+00:00","It's wrong to assume a given file is located in gameDataPath, so do not use that to print out warnings that pretend otherwise

svn-id: r22272
"
"01c92cf6f5efbfe36c48f9d00122c93cc4f5d2cd","2006-05-02 03:23:03+00:00","Add support for reading/writing config files through saveGameManager and use for config files in HE games

svn-id: r22273
"
"e3cb34e5b7f8626cf3762111e8342f61bc109b4f","2006-05-02 13:06:11+00:00","Fix detection of Windows version of puttmoon

svn-id: r22274
"
"f3f5664b7d34c464189f41498ea8a5af2d670b7a","2006-05-02 13:13:59+00:00","Add gameFilenamesTable[] entries for activity, fbpack and funpack

svn-id: r22275
"
"191a639b1143b714f78c07eb7629ced37c4dbbca","2006-05-02 14:00:29+00:00","Update language details for filenames of several HE games

svn-id: r22276
"
"4c8151f20a8e15f5e09ca08ace0361736c03552e","2006-05-02 14:12:39+00:00","Update language details for filenames of a few games

svn-id: r22277
"
"7bc4944a3bf20598b2663f3ffa5c545da1fc5f65","2006-05-02 15:24:26+00:00","Fixed FF mouse cursors being drawn a bit to the left of the hotspot. FF seems
to have this strange notion of multiplying the X coordinate by two, so when it
was using 38 to manipulate it, it really meant 19. I think.

Now we just need to simplify this to make the backend draw the cursor instead.

svn-id: r22278
"
"5b779be4ac803e4dd3a08cd5d60a13a696a29f96","2006-05-02 18:04:22+00:00","Let's try this again: Let the backend draw the mouse cursor, instead of drawing
it ourselves. This time it seems to work.

svn-id: r22279
"
"9714ea9055dae1b7f193c65316a7da0f92fa91a1","2006-05-02 18:15:00+00:00","Cleanup

svn-id: r22280
"
"aa7513d0d5867115274980d1f2b7f2d988734d81","2006-05-02 22:26:26+00:00","Implemented new InSaveFile methods.

svn-id: r22281
"
"5468059d44aa3a6ea00a9b54fad16bc834ab48ad","2006-05-02 22:27:24+00:00","Removed compilation error.

svn-id: r22282
"
"111ab60a87b01d46d09fa967500046b2c1cf15c0","2006-05-02 23:10:25+00:00","Fix insult fight (MI1) mouse wheel scrolling, hopefully also for the SEGA version (see also bug #1193185)

svn-id: r22283
"
"2db81b365d606d886dfe7c443edca92d31baf1a2","2006-05-02 23:12:40+00:00","Mention the new SCUMM detector in the NEWS file (which, sadly, is pretty incomplete...)

svn-id: r22284
"
"2fcecbfada172017b3c3e2ac4b33a1acf54f87c0","2006-05-02 23:28:07+00:00","Add The Feeble Files

svn-id: r22285
"
"94ea76c519da74ce8eeea9324777d6150f768f7c","2006-05-02 23:38:36+00:00","Use consistent game order

svn-id: r22287
"
"2552f6e17e68d7dc03099a74f6a74d4b0a330305","2006-05-02 23:46:23+00:00","Allow skipping cutscenes via ESC key too

svn-id: r22288
"
"91a67d1150f79665437c83181081e1abb48a7408","2006-05-03 01:11:50+00:00","Cleanup

svn-id: r22289
"
"afb5f5d5ab6906b786afabff42a84287f23dc305","2006-05-03 04:07:37+00:00","Fix scrolling glitches in Oracle of FF

svn-id: r22290
"
"a431bec1d828d0f5ec054af5aac939b3c7385407","2006-05-03 04:39:31+00:00","Read correct offset in loadIconData()

svn-id: r22291
"
"52734545b49710f28aae89baa8f230342dce0d59","2006-05-03 04:58:32+00:00","sfx5 isn't ambient, but manually started/stopped in FF

svn-id: r22292
"
"2c700faffac1ee219f0ebe34adf1ecf01f4b835b","2006-05-03 05:35:08+00:00","Correct result var in checkPaths script opcode in FF

svn-id: r22293
"
"6e603cce875d0a1b390c574b26125f6149654e85","2006-05-03 06:07:26+00:00","Correct size of GPVCount/PVCount vars

svn-id: r22294
"
"61b8fa957a2b94193452f17ff314b8f6353400e5","2006-05-03 09:33:41+00:00","Write results to correct locations in setRandom and getPathValue video opcodes of FF

svn-id: r22295
"
"58c723d9f01c16fa212946cc26993ed776056da5","2006-05-03 10:12:42+00:00","Use FilesystemNode, never AbstractFilesystemNode (which is for internal use only)

svn-id: r22296
"
"d404b6150af5d7cf716b52dfe274acca81f6ffad","2006-05-03 10:14:05+00:00","Started to separate AbstractFilesystemNode from FilesystemNode

svn-id: r22297
"
"8c452daac26b7e2bd38d7ed6e895376c8982ab95","2006-05-03 10:19:05+00:00","Moved static methods getRoot / getNodeForPath from class FilesystemNode to class AbstractFilesystemNode

svn-id: r22298
"
"2ab62d8b02f8ebd7d0ac69abdba52357f41ebb4f","2006-05-03 10:48:18+00:00","I don't know if this is correct, but at least browser.cpp compiles again now.

svn-id: r22299
"
"9c1fc023281d1ea3789dcdb2cf7451baaf3d061f","2006-05-03 11:13:21+00:00","Got rid of AbstractFilesystemNode::wrap (begone, evil hack)

svn-id: r22300
"
"5ef5110299a777eb1ccfcc9ed41659b9fc50e3bf","2006-05-03 11:14:29+00:00","Clear front buffer, when using cutscenes in Amiga version of FF

svn-id: r22301
"
"fea36d0112ef887b26d9dcbfd8818b511150295a","2006-05-03 11:36:07+00:00","Disabled evil getcwd hack in POSIXFilesystemNode

svn-id: r22302
"
"04531df9b49ae0860a6e94822ff87dbfce6500e1","2006-05-03 11:40:11+00:00","Fix subtitle colors during lion ride in Simon2

svn-id: r22303
"
"31444d3d35426d2435efa7ce4f35c647e82eace8","2006-05-03 11:42:50+00:00","Some doxygen comment cleanup for (Abstract)FilesystemNode

svn-id: r22304
"
"d84f744e2df9f08146e87c0dbc90e51e8b6ab319","2006-05-03 12:54:37+00:00","Add work around for glitches that occurs on map, when Simon rides lion to the goblin camp, in non-English versions of Simon2

svn-id: r22305
"
"e4e7ba1d7a1f2a22ccf359adb0f9b248b9ea36f7","2006-05-03 13:06:22+00:00","Make sure AbstractFilesystemNode::child() only returns a directory in Windows

svn-id: r22306
"
"1d6a1bf15717c4922e8e81078027569c75494dba","2006-05-03 13:19:21+00:00","Fix for bug # 1480744 ('KYRA1: mouse cursor vanishes').

svn-id: r22307
"
"96fd5e1fbcf7ab7af9127b520b620eba95819f06","2006-05-03 13:40:21+00:00","- modifies loadBitmap not to crash if a image isn't found
- starts to clean up the engine initalisation code

svn-id: r22308
"
"6776fb329684ee2e777463b595d4781a5d5cad3b","2006-05-03 14:24:48+00:00","- moves detection code to plugin.cpp.
- splits game table for kyra1 and kyra2.

svn-id: r22309
"
"e5b2d9a5273ced88e5cad80c9bd38a2fbabafc2f","2006-05-03 14:26:59+00:00","Fixes typo.

svn-id: r22310
"
"3f4427b04a273f58c0bb8373a134f03298598a1a","2006-05-03 16:23:32+00:00","Removed CharsetRendererV3::getFontHeight (it was identical to CharsetRendererCommon::getFontHeight)

svn-id: r22311
"
"5da67ab1129e106097e04e483ec24e037b8153a0","2006-05-03 18:05:55+00:00","Updated build script for Symbian OS9 devices

svn-id: r22312
"
"fb0cc056aa02335a495f47d4ad7110970faecba9","2006-05-03 18:09:37+00:00","Project file updated

svn-id: r22313
"
"1902673ece88d54ae5ae6b51ef63da6b07477bba","2006-05-03 19:34:53+00:00","Moved some code from SCUMM's detectGames function into a separate function (in an attempt to somewhat reduce the size of this huuuge function)

svn-id: r22314
"
"d016c353c5f2f87278e244ec6418c87d681925b1","2006-05-03 20:43:26+00:00","Changed FilesystemNode::listDir to return a bool indicating its success (or failure)

svn-id: r22315
"
"b67c30f6c8f5b7c31f9acd9aa7fe9ac1d295ba5f","2006-05-03 20:45:57+00:00","Fix DYNAMIC_MODULES (update the listDir call used in PluginManager::loadPlugins when using dynamic modules/plugins)

svn-id: r22316
"
"05f6adbbd90f58346a0bca85793069c387c54b67","2006-05-03 20:49:33+00:00","Removed FilesystemNode::isValid (leaving it up to the porters to decide whether to remove their isValid code or not)

svn-id: r22317
"
"9f7b98617db5720c7ce4894ce6ab835cbf78d5ae","2006-05-03 20:51:06+00:00","Fix listDir call in BrowserDialog

svn-id: r22318
"
"84c99c82427f961fef4ffadd9809383a9e70b761","2006-05-03 21:53:38+00:00","Revert the last change, since AbstractFilesystemNode::child() handles files and directories

svn-id: r22319
"
"e87de5898bc4d985cbf3c5ca404c96895da588bc","2006-05-04 02:23:52+00:00","Cleanup

svn-id: r22320
"
"40731871fe0b011233d2ae5fd005ff33732d5712","2006-05-04 02:28:19+00:00","Update Simon engine settings

svn-id: r22321
"
"34c343bf1d8d11c2de69faa3af09d835931a310c","2006-05-04 02:34:14+00:00","Update screen more often, for smoother mouse movement

svn-id: r22322
"
"f37cfaa7662b0ac4ffe8970005793d503a4cc7bb","2006-05-04 02:41:50+00:00","Show Epic Interactive movie on startup in Amiga/Mac. versions of FF

svn-id: r22323
"
"24a46d5da8604c70ab93684984f8fc599812a715","2006-05-04 03:44:50+00:00","Checking if the node isValid() is no longer an option, but isDirectory() should
serve the same purpose, I believe.

svn-id: r22324
"
"6a419462198fb02bbcca29e7e896c3da2ae39f94","2006-05-04 03:50:30+00:00","The loadPlugins() function works a bit better if it doesn't fail when listDir()
succeeds. ;-)

svn-id: r22325
"
"838430bedac3cf984cd18373707998b43340131f","2006-05-04 04:40:26+00:00","Add filename difference in Amiga/Mac. versions of FF

svn-id: r22326
"
"afa871aa38011f7f808544996f38a0fd873856be","2006-05-04 05:07:21+00:00","Fix loading of default saved game file, containing restate state, in FF

svn-id: r22328
"
"0c8b0d9a9d759d5247cbc2f61b3a5ce86cfaadea","2006-05-04 05:13:02+00:00","Remove duplicate code

svn-id: r22329
"
"0b4bbef76283e688c76399dc5bc0193b0b07e7cb","2006-05-04 06:18:19+00:00","Don't read beyond imageCount, when looking for image

svn-id: r22330
"
"0da90f08c18339c11db60eeeae0504e804b853fa","2006-05-04 06:28:51+00:00","Don't read beyond animationCount, when looking for animation in vc3_loadSprite()

svn-id: r22331
"
"a33997a3e9e148ac60d964a24113ccc0618e93c5","2006-05-04 06:55:35+00:00","Add missing old simon1 target

svn-id: r22332
"
"40189ab7e6aa58a24b3c4efa6099c4ef3ebf7047","2006-05-04 11:19:48+00:00","Adds (partial) support for italian floppy. (still hardcoded strings are missing) (Bug # 1409244 ('KYRA: GFX problems with ITALIAN floppy')).

svn-id: r22333
"
"24dc04095f6775bd89075a7c65c343dfac373bcb","2006-05-04 11:52:56+00:00","Allow skipping speech in Simon1

svn-id: r22334
"
"513cbbb6105397537c491f34aca5c886d5fb4182","2006-05-04 12:05:03+00:00","Update palmOS code for GameSpecificSettings changes

svn-id: r22335
"
"881d8ce8336d34e5c7c7eff0a5e7b47565b40509","2006-05-04 12:20:49+00:00","Cleanup

svn-id: r22336
"
"8ff4409f4981b523fa5dcfce6c6d4f82e9016834","2006-05-04 12:53:10+00:00","Add keyboard shortcuts for FF

svn-id: r22338
"
"ffd43c54a6366251c5ca4b08a86cd3907b4fd05e","2006-05-04 20:47:27+00:00","Updates for S60V3 and UIQ3

svn-id: r22341
"
"b727a89b6c905e120a25368bd0f85a20af0d14d9","2006-05-04 21:14:50+00:00","Set speech_mute/sfx_mute/music_mute values in one single central place

svn-id: r22342
"
"c319e972467beb3b824af01bc707ea225c38572e","2006-05-04 21:44:36+00:00","Put 'path' config in game specific domain.  Fixes bug #1475049.

svn-id: r22343
"
"6321cfc874ee95b9b2471783a18f4173fb60ab78","2006-05-04 22:52:18+00:00","Turned the last remaining few GameDetector methods into static methods

svn-id: r22344
"
"c46301bcc285fd216ab76095e81dc54b3ba1d127","2006-05-04 22:55:15+00:00","Make sure our config default values get properly registered

svn-id: r22345
"
"5d5c02d66c680ef442f68138bae6a403e6bc3336","2006-05-04 23:24:09+00:00","Moved GameDetector::setTarget & findGame to the new namespace Base; moved their declaration to base/game.h, their implementation to base/main.cpp (both until we can come up with a better location). Also moved detectMain into main.cpp, where it now is a local static function

svn-id: r22346
"
"64d9224b5493c404ea1b6ebb3e9693e5c1f4abfb","2006-05-04 23:29:56+00:00","Renamed base/gameDetector.h/.cpp to base/options.h/.cpp

svn-id: r22347
"
"2dcf2c36ad6f71839c333bbed58a732cd00a4189","2006-05-04 23:37:50+00:00","Removed last traces of class GameDetector

svn-id: r22348
"
"be09fc77dc866f3191f752531a60ba985cc37229","2006-05-04 23:57:49+00:00","Moved listGames, listTargets, runDetectorTest to base/options.cpp; also moved some code that was formerly in scummvm_main() to Base::processSettings()

svn-id: r22349
"
"e20d896a72be2b222672f7fe397aeca0e27cca05","2006-05-04 23:59:12+00:00","Fix s_appName computation

svn-id: r22350
"
"5e2d023aa83fe66347b921f1ef2cc769f432c8d0","2006-05-05 00:00:39+00:00","Moved PalmOS specific call to ArgsFree up to the last point where argv is used (hopefully that's correct :-)

svn-id: r22351
"
"f42baa6dabf82191e3a56e5115fe0e345d101c6c","2006-05-05 00:03:21+00:00","Some further cleanup in scummvm_main

svn-id: r22352
"
"dc2581fa0950c19213c92688f778a36041923137","2006-05-05 00:05:38+00:00","Fingolfin just remembered *why* GUI::Actions::init() is called in scummvm_main, but luckily those reasons are gone now, so let's fix this :-)

svn-id: r22353
"
"b56139b3aac0c4b630742f2d3266e6fac4b6301e","2006-05-05 00:12:42+00:00","Updated outdated TODO

svn-id: r22354
"
"dad44b45d31319625cf1f0bf884c856bee4205d5","2006-05-05 00:26:03+00:00","Removed Base::setTarget, and some minor cleanup & tweaks

svn-id: r22356
"
"0bb35a7856ab9335cf400e8529dbf799fcb08772","2006-05-05 00:28:26+00:00","Corrected a warning message (findGame failures are due to unsupported gameids, and have nothing to do with targets)

svn-id: r22357
"
"eed7d3e41333fc5da292264b5dda150eaea40e4a","2006-05-05 00:42:37+00:00","Update copyright

svn-id: r22358
"
"54eeb8aeed1d7d8d5fcf89f59efe3810bd7654bb","2006-05-05 05:53:36+00:00","Match fade code of original games and minor cleanup

svn-id: r22359
"
"713dac6aba58ed32187be2c67cdde60295ba2a26","2006-05-05 05:54:35+00:00","Fix inventory arrows regression in Simon 1

svn-id: r22360
"
"3cd65c2d8df30d295a985ef67a6e2e3c0b4af702","2006-05-05 05:59:03+00:00","Remove leftover

svn-id: r22361
"
"13871e432025d241391446c9066386c7cce7dab7","2006-05-05 11:21:22+00:00","Add another English version of socks

svn-id: r22362
"
"6913623068668a0aaca99a7dba983d29fe2cc7c9","2006-05-06 06:25:15+00:00","Fix typo, which caused FLAC speech files to fail

svn-id: r22364
"
"c552cfdafb353b88cb69195cf467100885dcd185","2006-05-06 08:21:57+00:00","Add support for non-English audio in cutscenes of Amiga/Mac. versions of FF

svn-id: r22365
"
"90ced0999730e87a0a9d6d0a0f99969123398a85","2006-05-06 08:30:39+00:00","Use scumm_stricmp() instead of stricmp() to fix compile error on some systems,
e.g. mine.

svn-id: r22366
"
"37d2f30999398acc4bb3edff5b6cdac29a2af7c3","2006-05-06 08:33:52+00:00","Ooops, skip WAV data, before changing size var

svn-id: r22367
"
"ae50315fa05598e83699b87e797c88a57858962e","2006-05-06 18:10:38+00:00","Added a default implementation of the OSystem CD API (which simply does nothing)

svn-id: r22370
"
"3e0cb0dfd0821a8ff9881e5fe572c8a893fd04cc","2006-05-06 22:49:57+00:00","Fix for bug #1449597 (MANIAC: Incorrect word wrapping)

svn-id: r22371
"
"58cd5ec5d5fb49d8ce12def6fd73802eda00e3c1","2006-05-07 00:32:00+00:00","Fix slowFadeIn, the code of original Windows version was flawed

svn-id: r22372
"
"c4f6cc5819537fdc5e1c94d1cf3b4515a0fe2b16","2006-05-07 11:45:55+00:00","Perform (horizontal) charset text clipping for V1-V3, too

svn-id: r22374
"
"9a6c120b0ded4569586caf0aa8335a9365e56112","2006-05-07 11:47:17+00:00","Handle line breaks/overflow for V1-V3 games *after* processing newline codes, to avoid double breaks (which result in spurious empty lines)

svn-id: r22375
"
"2e9bb56744954a3ccaba25037088bc0316400020","2006-05-07 11:58:01+00:00","Turning this warning into an error, since I never got any feedback on it

svn-id: r22376
"
"027fb7febeb0b821b6ddd5613e0241d7dea3edcb","2006-05-07 19:20:19+00:00","Fixes playing of credits music.

svn-id: r22378
"
"b2d4cd6a35eaca50ab6883dba363108ca7e62902","2006-05-07 19:41:56+00:00","Paranoia

svn-id: r22379
"
"b20966b92b8333f66da4b964c032c730ef762273","2006-05-07 22:36:26+00:00","Initial disassembly of NPC schedule handling methods

svn-id: r22380
"
"e2c058551b4424d010d2c36dee1685e4b0946f92","2006-05-08 04:11:21+00:00","Add missing file details for HE games

svn-id: r22381
"
"30c0bd63bc416df36f97e7aff6182e19f34e7c00","2006-05-08 04:48:40+00:00","Fixed bug #1483450. Apparently, S_ISDIR() is undefined if stat() fails. The
change to the POSIXFilesystemNode constructor is the one that matters to this
bug. The changes to listDir() are made from paranoia.

svn-id: r22382
"
"cf42a24833791ed2e8c4bd16bc67f35e9ea36960","2006-05-08 10:16:19+00:00","Cleanup: Use ScummVM indentation style for switch() cases. In some cases, I
have added or removed 'break's, but not in any way which should change the
program's behaviour. I.e. I've added 'break' to the final case, and after
calling quitGame(), and I've removed 'break' after 'return'.

svn-id: r22383
"
"3830ac06b367b920ca012c5c734e1bc32fcbcd73","2006-05-08 10:21:17+00:00","Add initial DXA support for HE games

svn-id: r22384
"
"8179d3e80b7607b8078182644fbf59591b017752","2006-05-08 10:29:20+00:00","Missed a couple of switch cleanups.

svn-id: r22385
"
"d6d3a621dc5fa18043e74ed6690c0bef5afc0121","2006-05-08 11:04:51+00:00","Init. videoParams vars for HE90+

svn-id: r22386
"
"ca513f7e66762235903dd4f7f0f2a75acbb6b5bd","2006-05-08 11:41:32+00:00","Fix off by one in rect when capturing image

svn-id: r22387
"
"3f9395831cba0024e57aa19d8222845ae7778a5d","2006-05-08 13:10:49+00:00","Fix regression in lost, the middle directories were removed

svn-id: r22388
"
"e2656a276afa9497750cc58536c3330605d6aeec","2006-05-08 13:34:21+00:00","Changed abs() to ABS()

svn-id: r22389
"
"c5d912fa1c795fd8d847c7509d3c8a7dc134aa86","2006-05-08 13:42:29+00:00","Small cleanup. It's not that I mind fallthroughs - as long as they are clearly
labelled as being intentional - but to save just one line of code? That hardly
seems worth it.

svn-id: r22390
"
"484b480b45aab30d987f7778c1517693dd7f57a3","2006-05-08 13:52:44+00:00","As LordHoto pointed out, placeItem is already initialised to false, so we only
need to set it to true.

svn-id: r22391
"
"73f0a23beecd52888b3c692acd0ff68a83ad3828","2006-05-08 14:49:54+00:00","Added comment about switch case fallthrough. I assume this one is deliberate,
but they're easy to miss at a casual glance.

svn-id: r22392
"
"575eb8b775f3d5a0a55a5e7ce41e0f0dd0988807","2006-05-08 15:40:30+00:00","Replaced a bunch of delay loops with a new delayUntil() function. Now all of
them will at least sleep if the remaining delay is at least 10 ms. (Personally,
I don't like the idea of busy-waiting even 9 ms, but now that it's in its own
function, it becomes much easier if we want to change that behaviour. There are
still plenty of custom delay loops left, though.)

svn-id: r22393
"
"816fd39d589833a2976dff369e651f4ea5798be6","2006-05-08 16:04:08+00:00","Added delay() to delayWithTicks() as well. This function is quite similar to
some of the custom delay loops in script_v1.cpp. Could it be used there?

svn-id: r22394
"
"31f83ff233bc742380fbcd4f42e1e8d4d36f4549","2006-05-08 19:49:52+00:00","Implemented FW inventory. This is basically a copy of makeMenuChoice(), minus
the ability to select menu items. There will be cleanups later, but for now we
try to match the original.

svn-id: r22395
"
"4c6712246368148c91861fd30677a461e57e698b","2006-05-08 22:53:09+00:00","Avoid closing a video file in HE games twice

svn-id: r22396
"
"d2546e397934da3e89fdd994e0c620dd0bcfbcd4","2006-05-09 14:16:43+00:00","- Updated MSVC8 project files
- Renamed base/options.cpp to base/commandLine.cpp because of conflict
with gui/options.cpp which sit in same directory in MSVC builds
- Moved AudioCDManager singleton declaration outside of Audio namespace
- Fixed numerous MSVC warning of potentially uninitialized variables and
int <-> bool conversions.

svn-id: r22397
"
"d5739c29fdbdd65832c9ddf2ccdf63cffc9d885f","2006-05-09 21:55:29+00:00","Attempted fix for bug #1484881

svn-id: r22398
"
"1d324dd2d28bf4797a17c86038369f5207ee3705","2006-05-09 23:38:10+00:00","Fix mingw compile

svn-id: r22400
"
"fa82f0b066756f5a666f61dbd847d6312da65cbe","2006-05-10 09:43:06+00:00","Decrease delay to make it less likely that the Simon 1 (and other?) save/load
dialog misses keystrokes.

svn-id: r22401
"
"e6350f8afabbd19485d544182e92071bbf464d80","2006-05-10 20:28:27+00:00","Enables OSystem::kFeatureAutoComputeDirtyRects until proper dirty rect managment is implemented.

svn-id: r22402
"
"56e03a85ddfaf9bca000c42855ec5f79e80dcb8c","2006-05-10 20:30:58+00:00","Adds workaround for bug # 1477364 ('KYRA1: Water dripping freezes') until a proper solution is found.

svn-id: r22403
"
"be6b640b92d83b606efb7a926dfa6172f153e31e","2006-05-10 20:45:42+00:00","Adds clipping to the workaround in 'preserveOrRestoreBackground', so it does not overwrite the interface.

svn-id: r22404
"
"d2030f17b36a4e6ac4515d761e6a140bb09f9436","2006-05-10 20:50:59+00:00","Removed hack that was used to limit the mouse cursor to (at most) 80x80 pixels.
That limit has been lifted from the SDL backend.

NOTE: This may cause problems in other backends!

svn-id: r22405
"
"30231a39c886c0b76f5b6bb072d4d0848bfcc20a","2006-05-11 07:25:54+00:00","Added proper labels in some of the existing disassembled methods

svn-id: r22406
"
"dba0c5ca2c3a4f6495d0b4b83368e41da56866bb","2006-05-11 07:59:50+00:00","Whitespace changes.

svn-id: r22407
"
"21b91adcdfe91f943f0b74502c4dfe1a3dca55cc","2006-05-11 08:04:41+00:00","Changed 'it's' to 'its' in a few comments.

svn-id: r22408
"
"d6af07989df23219293cf6117e6cd0ae6a63e2e9","2006-05-11 08:25:09+00:00","This could be completely wrong, but I don't think Hotspot::stopWalking() is
supposed to call setCurrentAction() in Resources, because then ScummVM will
crash in getCurrentActionStr() whenever we try to interact with any object.

Since Hotspot::walkTo() calls setCurrentAction() in Hotspot, it seems like a
reasonable guess that this is the setCurrentAction() that stopWalking() should
call as well.

svn-id: r22409
"
"42e03bd70720643c0866abd7d6da50529d2c1f03","2006-05-11 19:43:30+00:00","- Sound! Still a bit glitchy, though:
- Negative frequences?!? Maybe 'SFX'?
- No sound for a small part of the intro
(there aren't any sndKeys covering that part either)
- A rythm-instrument (hi-hat?) in the titlemusic isn't played as one
- More differences in the drawing functions fleshed out
- Some of the goblin handling functions written
- More unnamed functions and variables, wheeee...

svn-id: r22410
"
"171285e8e5b49db16bb5d722f64e8ec0599b332b","2006-05-12 08:49:04+00:00","Whitespace changes.

svn-id: r22411
"
"4ecee0e0f254ad1023f950190bfcc03f3b0341cf","2006-05-12 10:29:58+00:00","In Simon 1, when returning to normal size, the MIDI music contains 'All
Controllers Off' messages. This should, among other things, reset the channel
volume to 100. Until now, however, we did not re-adjust the volume by the
master volume (like we do for ordinary volume control changes), so all of a
sudden there would be channels playing at the wrong volume.

This was particularly noticeable if you first turned down the music volume to
really low.

svn-id: r22412
"
"ccac2aea20628d66cc7d64085cc8ed744e6450f9","2006-05-12 12:03:36+00:00","Whitespace changes. (Oh dear, now *I'm* forcing myself to large re-compiles.)

svn-id: r22413
"
"6add5edcee14c804c83d0aba5e2f3838563a51c4","2006-05-12 13:04:00+00:00","Crediting Patrick Combet (aka Dorian Gray) for the Gobliiins ADL player

svn-id: r22414
"
"d00755de8e29dc5b074bd4f103f5a8b12e57a495","2006-05-12 18:00:41+00:00","Removing some unused code from INSANE

svn-id: r22417
"
"860073c45ac9c6d47b9a9349f0fbdb520a44fd8c","2006-05-12 20:09:15+00:00","Fixed two regressions in the o1_specialFade() opcode: The wrong colours were
faded, and they weren't faded enough. Don't you just love opcodes that are only
ever used at the very end of the game?

svn-id: r22418
"
"b5556c50fed0dcae072a2f68ab8b572b9dc6b2cb","2006-05-12 20:55:53+00:00","Updated WinCE backend to the new form of FilesystemNode::listDir

svn-id: r22419
"
"726c05be966a2e7f80ad9400914f9258d4ef5348","2006-05-12 21:01:50+00:00","Make some tweaks to the GP32 and PSP FS code (trying to at least partially bring them up to speed with the FS code changes). Note: If those files were inside backends/fs/, they wouldn't be overlooked as easily when making FS changes...

svn-id: r22420
"
"0dfb76002f483f914042982662df24fe14122ea5","2006-05-12 21:02:26+00:00","Fixed memory leak in PSPFilesystemNode

svn-id: r22421
"
"ed339aa771fa7f47a737c0599197dbe205804338","2006-05-12 21:11:37+00:00","Updated some comments

svn-id: r22422
"
"3623a94927a3d01b6df5c75f42af13a348327c2a","2006-05-12 21:41:54+00:00","Added the new AbstractFilesystemNode::getCurrentDirectory() method. Also changed the semantics of the FilesystemNode constructors (see also the relevant doxygen comments for explanations). This also fixes bug #1485941.

svn-id: r22424
"
"a5b4fb7f181886ef63bc7982409a7505894ad64d","2006-05-12 23:57:53+00:00","- little cleanups
- adds kyra3 dummies

svn-id: r22425
"
"d6e39db09db28a4b074c59e282eb2a904ea7c5e8","2006-05-13 06:08:39+00:00","If there is no 'browser_lastpath' setting, create a FilesystemNode to '.'
instead of a completely blank one. This should fix the failed assertion when
trying to add a new game that was reported on the forum.

svn-id: r22426
"
"9dfcea873919812a106080d2756c183b9c1d3952","2006-05-13 06:18:47+00:00","Split VGA resource management back into FF and Simon 1/2 versions

svn-id: r22427
"
"9baf8a72f937b827be0cb5760b78b80ed1aa4127","2006-05-13 08:24:47+00:00","Remove _rejectCount and cleanup

svn-id: r22430
"
"45b249ee6012772179efe556f92de74163235aea","2006-05-13 08:39:12+00:00","fix VS2005 compilation warnings

svn-id: r22431
"
"64c3407500ababf579503224439a3e0c615a8390","2006-05-13 10:30:38+00:00","extract GameDescriptions to separate files (this will help compress_saga tool to detect sound resource)

svn-id: r22433
"
"f840b356c6d84d38fa049c040cf4e3d523a09609","2006-05-13 10:39:35+00:00","Add newline to end of file

svn-id: r22434
"
"1124fa8d90f4a16bc5e7eb9b566089025b8c1cca","2006-05-13 10:42:21+00:00","Get current directory via a path of '.'

svn-id: r22435
"
"1403a3511e71622df9f1d47516694d4766115b6b","2006-05-13 11:18:52+00:00","Add code for get current directory

svn-id: r22437
"
"61c3f9d4aae5d7cbbc706a9fb1ecd0ef0f21bbf2","2006-05-13 17:28:33+00:00","Add newly discovered HE demos.

svn-id: r22455
"
"0d6362ea485f89a940ffadd1c6fe954f94309c53","2006-05-13 17:30:04+00:00","Patch #1091170: ALL, SCUMM: Subtitle speed control

svn-id: r22456
"
"5b5b0bd2d628f42e863db5741a6ac6a215868cd8","2006-05-13 17:33:21+00:00","Added salty-horse to the credits

svn-id: r22458
"
"b19456536b64507780a154768557d0bd35109ecf","2006-05-13 18:10:29+00:00","Removing the tests for class Map (which doesn't exist anymore)

svn-id: r22460
"
"4743820e30f3d69f117fe227a22b44515e3be526","2006-05-13 18:14:23+00:00","Fix for bug #1483213

svn-id: r22461
"
"ada0160e8845c8462b4bbd8460209c00d829823e","2006-05-14 06:00:40+00:00","Check if VAR_CHARINC exists, before setting value in updateSoundSettings()

svn-id: r22462
"
"44ac23a81de68d2d727bf9640c1363f4e2d0ee73","2006-05-14 09:22:49+00:00","Setting VAR_CHARINC = _defaultTalkDelay cannot possibly be right. It's not the
same thing as setting VAR(VAR_CHARINC) = _defaultTalkDelay.

svn-id: r22466
"
"bb9de08c7354025bc2b074a6e13ddbe5cc0d5e7f","2006-05-14 09:58:30+00:00","Specify the right edge of the sentence line in Maniac/Zak. This fixes bug
#1488189, where the sentence line would only display the first character.

svn-id: r22467
"
"16b7c74cc4fa4b36102b0d2e0195ee48e740cdae","2006-05-14 10:40:06+00:00","Cleanup.

svn-id: r22468
"
"536beaf286e5acde4fa1c2d44776a32932af4da6","2006-05-14 10:48:03+00:00","Fixed regression in Maniac/Zak inventory drawing.

svn-id: r22469
"
"fa23893974098e7b1295c744d1eae5d3a881d896","2006-05-14 22:11:14+00:00","Disassembled code responsible for making NPCs walk between rooms

svn-id: r22476
"
"0191738cce21fb874288d2d141b998731f5f5b96","2006-05-15 12:39:53+00:00","When receiving a 'Reset All Controllers' message, the neutral position of the
volume controller should probably be 127, not 100. Actually, there's some
confusion as to whether this message should touch the volume controller at all.
Added some comments to hopefully clarify that a bit.

svn-id: r22478
"
"e723f7d1ebb1a0476ee2de9c04d1c8ba3fe32c8a","2006-05-15 13:19:30+00:00","Ignore unknown SysEx manufacturer IDs, rather than erroring on them. This does
NOT fix bug #1481383, even if that's where I heard about this problem.

svn-id: r22479
"
"076f489107ea516e9c4728abc3c1a472e3cd9b7d","2006-05-16 07:41:48+00:00","If the options dialog calls it 'Subtitle speed', then so should the indicator
displayed when pressing the + or - keys.

svn-id: r22485
"
"c8aa32d095b76c0ba443d16714b32d9cf4cea1fa","2006-05-16 16:04:24+00:00","- implements kyrandia 3 wsa loader
- fixes initalisation problems
- adds setX, setY, setDrawPage to Kyra::Movie instead of directly accessing _x, _y and _drawPage

svn-id: r22490
"
"47a39a84019dab9cff1eb5fc7f84fe17810e5cad","2006-05-16 16:15:33+00:00","Oops forgot some define checks

svn-id: r22491
"
"3d10ecf1aed951cdc37b80fb0a320635e494892c","2006-05-16 16:31:23+00:00","Removes ENABLE_KYRA2 and ENABLE_KYRA3.

svn-id: r22492
"
"ba2a6152c7bf6b007ca8ec7a6191416135a35f80","2006-05-16 17:38:04+00:00","Set gameflags for kyra3 properly.

svn-id: r22493
"
"b6b53afe269a2d640b8db33e64ecdd6f9b2f506c","2006-05-16 20:00:48+00:00","Tell people to only report the MD5 if it's a regular version of the game (and not e.g. a fan translation)

svn-id: r22495
"
"f7c29ccc8b001eb8d69f1e3d845c6ad04e38fc95","2006-05-17 18:07:02+00:00","- adds AUD file player (has still some problems with playing)
- adds a new sound class SoundDigital (only used for Kyra3) (needs more work though)

svn-id: r22497
"
"c27b1201d44814b338e97f4a91fdf8feb632f2e0","2006-05-17 19:42:55+00:00","Fixed crackling in Kyra 3 sound. (At least what little of it ScummVM currently
plays before finishing.)

svn-id: r22499
"
"4da20ba369f085f30546213cdd5d5ef2332a6150","2006-05-17 20:25:08+00:00","Maybe the svn:keywords were already set? Maybe this will fix the file headers instead.

svn-id: r22501
"
"0099932d0d74665ec0e0e4f0ace6abe7b5a32cdd","2006-05-17 20:35:25+00:00","Loop the Kyra 3 animation indefinitely.

svn-id: r22502
"
"6bf1e10768e5d3d71bd9e06fe2000254f6dbd955","2006-05-17 20:54:51+00:00","Fixed two off-by-one errors. One would cause the same frame of the Kyra 3 to be
displayed twice in a row. The other, more serious one, would cause ScummVM to
crash when reaching the end of the music. Now the music loops properly. (It
does fade down before looping, but that's how it is in the original as well.
It's just the way the music is recorded.)

svn-id: r22503
"
"65091f7370ee118b8f99c6106d8cad1fd0ee719e","2006-05-17 21:14:19+00:00","Added (optional) looping to the digital sound class.

svn-id: r22504
"
"14ec3f45fa08a0c0071693f4094fc088eb0062b5","2006-05-17 23:52:45+00:00","- Heavily modified patch #1214784: 'Disable overlay scaling'
- Eriktorbjorn's patch from same tracker item for scaling sword1/2 cutscenes
is applied as is. It lacks resolution switch on-the-fly.
- GUI widgets are repositioned on the fly and use most space, even aspect
ratio corrected screen is used without scaling
- Heavy tesing is required, but works for me in all cases except for bug
#1483272: 'GUI: SCUMM pause dialog breaks upon scaler switch' which needs more
work.
- I probavly broke some backend or two

svn-id: r22505
"
"9103ddda4e5b70f106ea0a0e56d59c90fc7bbcb8","2006-05-18 00:20:53+00:00","Give more feedback to users who misused our SAN compression tool and ignored
FLU index for cideos which are used by INSANE.

svn-id: r22506
"
"71e341ba39758379a80fe47a2e9e61ce85e7605d","2006-05-18 01:36:06+00:00","Better cursor image

svn-id: r22507
"
"3f62ce30693c55eb4bd47b4edffef87de8541a75","2006-05-18 01:44:13+00:00","Improve new cursor image a bit for better visibility.

svn-id: r22508
"
"4dfbfe7ecab6b44e4f1d3aee2a70d8e385323604","2006-05-18 02:03:43+00:00","- Revert additional setUpCursor() call as it broke in-game cursor palette
- Disable scaling for cursors which have target scale defined

svn-id: r22509
"
"4d69cfeaa455d5abe5b8fdae5b421999260570b8","2006-05-18 02:34:55+00:00","Update HE version for another English version of socks

svn-id: r22510
"
"a3fc0682f465706ef7d29f1e71089bd383e1d4f8","2006-05-18 11:32:59+00:00","Cleanup.

svn-id: r22512
"
"b9206a3e9842a564451ed1b41a67759b3a86d9ae","2006-05-18 11:35:08+00:00","Removed leftover printf()

svn-id: r22513
"
"c65d45146cf6ccaea20218c030b3a11dbcfd1f02","2006-05-18 11:36:29+00:00","fixes kyra2 gameflag init

svn-id: r22514
"
"5c1f91eed42aab58f022ca82066c91e5a672131c","2006-05-18 13:18:02+00:00","Allow changing scaler while playing MPEG cutscenes.

svn-id: r22515
"
"57e90daf1cef14d9a26970a6a42562d98f7e071a","2006-05-18 13:22:48+00:00","Fix several GUI layout problems:
- Correct button widths in scumm help dialog
- Fix button widths on path tabs in options dialogs
- Fix scumm options dialog in 320xY mode
- Added space after volume controls in options dialog

svn-id: r22516
"
"bbb5f6813dab8a2b24fbde75ace2943b42f7cd9b","2006-05-18 13:40:35+00:00","More GUI fixes:
- Center dialog title in scumm save/load dialog
- more space in add game dialog between dialog header and selected path

svn-id: r22517
"
"e563d0c18203e4ca4d5a585eb98365fef513ca4a","2006-05-18 13:58:33+00:00","Renamed screenChanged() to handleScreenChanged().

svn-id: r22518
"
"9e3b78e1e988ec042ab8b20b27246ccf6ba73614","2006-05-18 13:59:20+00:00","--force-1x-overlay is no more. Remove leftovers.

svn-id: r22519
"
"6b90c405e833d92a388077a08158e144dc5848b9","2006-05-18 14:28:19+00:00","Initialise _resList to avoid crash (from freeing an invalid pointer) if the
data files are missing.

svn-id: r22520
"
"e950d171f56a1d8ae9d41146284a506cd9d6e429","2006-05-18 15:40:44+00:00","Properly set GFX mode selected in GUI. Fixes selection of 1x scaler.

svn-id: r22521
"
"e98278228158a0a7aa69450bf44c912ac508a207","2006-05-18 16:44:44+00:00","Fix bug #1483272: 'GUI: SCUMM pause dialog breaks upon scaler switch'. Also
fix same problem in scumm help dialog.

svn-id: r22522
"
"8e9db033791a3617051c9cb07492dec17154b2f7","2006-05-18 19:37:38+00:00","Plug memory leak

svn-id: r22523
"
"63d7895500c22869c6ea6536775bc71c05587560","2006-05-18 19:38:54+00:00","Oops. Break indefinite loop.

svn-id: r22524
"
"4ead8dff26c85f76ffcb46e35f8ed8684664713a","2006-05-18 20:53:28+00:00","- Fix spelling in theme config
- Introduce embossing shadow
- Less round corners in popup widget
- Custom border in editable text widget
- Matched color in popup widget and editable text widget with mock-ups
- Less round corners in editable text widget
- Text padding in editable text widget

svn-id: r22525
"
"2531fd58737b1e02b32f496ac891e5a96bf95828","2006-05-18 21:46:07+00:00","Added player for the Kyra 3 VQA cutscenes, based on my earlier prototype. It
could use some cleanup, and there are a couple of TODOs sprinkled throughout
the code, but it seems to work reasonably well. Until the Kyra 3 main menu is
implemented, it won't actually be used though.

It uses the appendable audio stream class, which I have moved out of the SCUMM
engine.

svn-id: r22526
"
"fac7a13cf5c2dd128f5f5b46f3d9c52a534a2322","2006-05-18 21:48:47+00:00","Proper rendering of slider widget.

svn-id: r22527
"
"570b9e2c9dd9bb13ef01fae5e7deb8e038d7067f","2006-05-18 22:46:34+00:00","- load fonts for kyra3
- adds screen dim tables for kyra3
- adds palette / screen backup for the vqa player
- small changes in the vqa player to use the Kyra::Screen functions
- adds (partially implemented/unimplemented) main menu drawing/handling functions (nothing to see yet)

svn-id: r22528
"
"9bc90636f2c9b0e086c218bc9b7c764089c14328","2006-05-19 00:35:13+00:00","Update HE version for another English version of socks

svn-id: r22529
"
"d113bf3a08595a07d6123273380a378120daf50f","2006-05-19 07:12:38+00:00","Fix warning

svn-id: r22530
"
"909cd8c93a9cf41617acfcbef7eda6704dc40dca","2006-05-19 07:20:27+00:00","Added some FIXMEs to the kyra engine

svn-id: r22531
"
"bafa215e5faefe023313048e1ae00130f807db73","2006-05-19 07:32:00+00:00","Added some BS2 and Simon notes.

svn-id: r22532
"
"3a028875a182032319d6bafcc4b9d348fa367257","2006-05-19 07:34:24+00:00","Using assert(_something->init()) is a bad idea. Assertions can be disabled.

svn-id: r22533
"
"23498c5974e8b468cd1230537dd49057207a1098","2006-05-19 22:25:14+00:00","Minor GUI tweaks

svn-id: r22534
"
"84c649c4a9f6e81e4f9c38f358267c387f8078bd","2006-05-19 22:26:07+00:00","Slighty modified patch #1491859: 'Possible fix for recent cursor regressions'

svn-id: r22535
"
"ce749cd44cfab0f5a75cfdd8b96a14f5c3ea1b68","2006-05-19 22:41:51+00:00","Call handleScreenChanged() *before* calling setEditString(). Otherwise
_leftPadding may be wrong, or even undefined, when getEditRect() is called,
which may cause ScummVM to trigger an 'invalid rect' assertion.

svn-id: r22536
"
"71d07416cd523ee33a395476829bdb011763e18f","2006-05-19 22:49:23+00:00","Call the inherited handleScreenChanged() method, so that the widget can resize
itself on scaler changes.

svn-id: r22537
"
"80eb6e4f5ea2b25864c94251f14e9b09170e72cf","2006-05-20 07:31:03+00:00","Fixed cursor drawing in the classic theme.

svn-id: r22538
"
"87ee8db10d27e760f095e30db79ab14e9fb56ad9","2006-05-20 08:06:21+00:00","Our GUI uses the 'cursor palette' feature, but the SDL backend did not use the
cursor palette in overlay mode. Now it does, which fixes bug #1476666. The
reason it worked at all before was that blitCursor() was called while still not
in overlay mode.

This, of course, means that the GUI can corrupt the in-game cursor palette. I
don't have any game that uses this feature, so I don't know if it's properly
restored again afterwards. But if it isn't, that should be fairly easy to fix.

svn-id: r22539
"
"22fb1e48ef192c331c224593e73fb817a2e582c0","2006-05-20 08:29:50+00:00","Set a cursor palette for the classic theme, as well. Otherwise we'll get the
wrong colours in many games.

svn-id: r22540
"
"407cb66502ef9e1cf964357fad5e0a67c36b4828","2006-05-20 09:27:56+00:00","Re-render the cursor when enabling/disabling cursor palette. Also, I don't
think _cursorHasOwnPalette is needed any more, so I've removed it.

svn-id: r22541
"
"1c7c0039b5483919387943625a04646c5b6b0754","2006-05-20 10:57:15+00:00","Removed stray printf() from earlier commit.

svn-id: r22542
"
"6cdd98b6179954a6ccfc40a9db5bf106a3a9b9e1","2006-05-20 10:59:25+00:00","After the GUI has finished, restore the old cursor palette (if any). For this
to work, cursor palette now has to be set using the new 'palette manager'. See
graphics/paletteman.cpp

svn-id: r22543
"
"3e973d2a910366834931bcf940cdf1f87ab6c96c","2006-05-20 11:24:45+00:00","Forgot to set g_initialized to true.

svn-id: r22544
"
"05814a14582eca7bd00e39b3bd8bf5783ddf4f13","2006-05-20 13:59:31+00:00","Apparently, passing a file handle directly to a function causes that file
handle (a copy of the original?) to be destroyed at the end of the function,
and that closes the internal file handle, even though we want it to stay open.

Who am I to argue with how C++ handles its parameters? I've simply changed the
functions to take pointers to file handles instead. Seems to fix crashes in the
Macintosh resource extractor for me.

svn-id: r22546
"
"dce7af1f5c9fe9e38bc1dff0337a18ebb778d17b","2006-05-20 15:02:39+00:00","makes destructor of KyraEngine virtual

svn-id: r22547
"
"e4ab8000f030d7846bd200e0b2c3f8fffc2e966c","2006-05-20 15:09:15+00:00","Pass values by-reference, using C++ references, and not by using pointers

svn-id: r22548
"
"4d1f4ffb50934aae2f3f948bbfbbf1937089a2ea","2006-05-20 15:10:04+00:00","Make the copy constructor / assignment operator of class File private to prevent accidental copying of File objects

svn-id: r22549
"
"da9bf4dd717e75b911b806167df07389f3cff71b","2006-05-20 15:22:17+00:00","fix compilation, that variable no longer exists

svn-id: r22550
"
"e7a4b46479170e1436bf5c97c348c4f08a679906","2006-05-20 15:43:27+00:00","fixed compilation when DISABLE_SCALERS

svn-id: r22551
"
"75f226953a9f23b5dfa6dcf67b8833b2f8de0994","2006-05-21 12:32:39+00:00","Oops, I guess I never got around to fully implement replaceCursorPalette().

svn-id: r22552
"
"1920cc0fa80ba04d8dae7555336fae95c5834e73","2006-05-21 13:04:49+00:00","Added two lines for the Lure engine progress

svn-id: r22553
"
"d7296ae6667d0bfde089344c75caba6630757dcb","2006-05-21 13:27:18+00:00","Make it so that if the new cursor palette to be set has zero colours, the
cursor palette is disabled.

Also, when replacing a cursor palette, try to re-use the old palette buffer, as
a minor optimization. (Not that these functions should need any optimization,
but it's simple and shouldn't hurt.)

svn-id: r22554
"
"3af8e4ea4ac455d00f0f9da3ad89ba16572cd524","2006-05-21 15:02:12+00:00","Implements kyra3 main menu drawing.

svn-id: r22556
"
"c47dadeb1f385df7d8f411f9a2a8c7c26450f739","2006-05-21 15:20:12+00:00","- adds debugC calls to KyraEngine_v3 functions
- finishes KyraEngine_v3::gui_printString

svn-id: r22557
"
"ef6645c5ba9d87e888516df457e4d72cf9b0a2cf","2006-05-21 15:41:32+00:00","- reworks quit handling (no _system->quit() anymore)
- fixes some deinitalization problems

svn-id: r22558
"
"344cc2f475c22df613b097fe9fb969cf373e32ca","2006-05-21 16:06:29+00:00","- allows kyra3 to exit again
- implements language selection for kyra3

svn-id: r22559
"
"b2d8f804cd40df6d3e3e50d7640bd8f1433be9ba","2006-05-21 17:28:03+00:00","Some minor VQA player fixes:

* The playVQA() function now takes the name of the cutscene, rather than the
filename. This is so that playVQA('FOO') will be able to play FOO0.VQA,
FOO1.VQA or FOO2.VQA, depending on which movie size is selected.

* The VQA player centers movies by default, so don't set the position to 0,0.

* Ask the backend for screen dimensions (for centering the movie) rather than
hard-coding them.

svn-id: r22560
"
"9fad465cf6c22dfe17f32057c627bfb3e5f0a258","2006-05-21 18:16:34+00:00","At LordHoto's request...

* The VQA move player isn't as similar to the WSA movie player as we first
envisioned, so the VQA player no longer inherits from Movie. It does retain
a fairly similar calling interface, though.

* Use the Kyra engine's idea of screen dimensions, rather than the backend's.

svn-id: r22561
"
"7d15c60ab903accd2331cbdfcd05645235a42512","2006-05-21 18:49:26+00:00","Don't crash if drawMouse() is called before _mouseSurface is created.

svn-id: r22562
"
"b98a67d1eb4aa77f7e3d3d4ccec0bce4706351c9","2006-05-21 19:03:27+00:00","More VQA fixes:

* Use setScreenPalette() rather than calling the backend directly. (As an extra
bonus, the VQA player now only needs to store 3 bytes per colour.)

* Hide the mouse cursor while the movie is playing.

svn-id: r22563
"
"bda33949e4881cb7a4733dcb7b4c629918bb3382","2006-05-21 19:08:10+00:00","The unsupported cutscene is called 'jung', not 'junk'. (It just happens to look
like junk at the moment.)

svn-id: r22564
"
"71ba5c0f584c80f6018c4f1696cd3dfe505fbc30","2006-05-21 20:08:14+00:00","Grotesque hack to support the jung2.vqa movie. Either the VQA is less well
understood than I hoped, or the offset to the first frame of the movie is
completely out to lunch. Scan the file for the first VQFR chunk and use that
offset instead.

svn-id: r22565
"
"a1f5bddaa8644630d71dd6a497d653c677a35351","2006-05-21 20:25:22+00:00","If possible, sync the frame to getSoundElapsedTime().

svn-id: r22566
"
"57efbacb9af159c59043d5265b12625206d48224","2006-05-21 20:41:53+00:00","Palette handling simplification, suggested by LordHoto.

svn-id: r22567
"
"35d242b74b4f31fd4be8853d2bd945df975d4d7b","2006-05-21 21:18:23+00:00","make printExpr, skipExpr accept both gob1 and gob2 expressions

svn-id: r22568
"
"c40a8b48a1214363a4313d32c39eb0e02c506221","2006-05-22 07:27:20+00:00","Cleanup.

svn-id: r22569
"
"7090f051a021f6e7b3e6f4e652b7c38f6db217a2","2006-05-22 07:52:10+00:00","Fix debug messages.

svn-id: r22570
"
"dfda0555c30cddead57901d773ece584b1439c0d","2006-05-23 09:46:48+00:00","Cleanup.

svn-id: r22573
"
"b1950909e8f8b5be979b2ba3217f0eaa3a60d141","2006-05-23 09:54:55+00:00","Update details for Russian translations

svn-id: r22574
"
"5f64d7009ed3722da9e76d4e920fb061aec57c43","2006-05-23 12:24:50+00:00","Added script methods for manipulating current action support data and a stub for a script method that plays background music

svn-id: r22576
"
"3e4566e196c07572379b814f1a145d13c68bfed1","2006-05-23 12:36:57+00:00","Added some extra safety checks. Also contains some started work on redesigning the display of the current action

svn-id: r22577
"
"6bac5a257ec335b7c9b3d00fe625e488cdfad720","2006-05-23 12:37:43+00:00","Added support structures for NPC schedules

svn-id: r22578
"
"0ebf2be4a4f490f1cf016245a37e325138d0f000","2006-05-23 12:38:51+00:00","Added new resource entries for NPC schedules, the Skorl catching animation, and miscellaneous

svn-id: r22579
"
"dddaa015dfc5e5d95612f25cae295863f472fa9c","2006-05-23 12:39:39+00:00","Added the loading of NPC schedules

svn-id: r22580
"
"e22de3ab3627d0dcff49ad1fbaa72da29512c2a0","2006-05-23 12:41:28+00:00","Added a new outer loop for what will later allow the restarting of the game. Also added the animation of the Skorl catching the player if the game state indicates it has happened

svn-id: r22581
"
"622c8b57e77cfdaedd7ce6eba962e65be4ea70ca","2006-05-23 12:43:42+00:00","Reworked the DISPATCH current action to support NPC schedules like the original game does. Additionally added basic implementation of necessary support routines

svn-id: r22582
"
"7eede3c510ca074697ed48d9a43ce910c3cf0155","2006-05-23 14:19:38+00:00","Compile fix for GP32 and PalmOS. GP32 port still doesn't work since when GUI code changed...

svn-id: r22583
"
"f38af30d6a42cde9491ff96f742f5027d5587253","2006-05-23 14:30:13+00:00","Update GP32 port. It still doesn't work very well...

svn-id: r22584
"
"36957a2c50fdd3fc0195981cedf4cc65f24f8a95","2006-05-23 16:49:46+00:00","fix VC & SDL 1.2.10 compilation error

svn-id: r22585
"
"dafc2c8cebe9e4f95938584fac57864d57932e4a","2006-05-23 20:05:38+00:00","Fix for saving the palette before playing a VQA movie. (Suggested by LordHoto.)

svn-id: r22586
"
"3a025038da6d351789d5daf29e4751678c47fed1","2006-05-23 20:10:01+00:00","Check _quitFlag during the first parts of the Kyra 3 main menu animation.

svn-id: r22587
"
"107073537e4ad24e294e28a2a62f8d3ad33008ff","2006-05-23 23:43:52+00:00","imported AGI engine

svn-id: r22588
"
"9b5c97ce6635c81da6d26eea701c4bbbad3e023f","2006-05-23 23:51:59+00:00","update make subsystem

svn-id: r22591
"
"d9d3b604f28746acba0553e107538d9288e1fa85","2006-05-24 00:27:56+00:00","Fix compile

svn-id: r22592
"
"2f51f40c1189de161824f15f29f00e072f3c43ec","2006-05-24 03:56:48+00:00","Downgraded startHETalkSound() error (when the speech file isn't open) to a
warning, since it happens on the Pajama Sam's Lost & Found demo's main menu
screen.

svn-id: r22593
"
"f83f1a77b6f5a025432a3b8b0ee6bd9f9985dbc2","2006-05-24 04:48:39+00:00","Only check if the files on 'CD 0' are present. The others are requested with
'insert CD' messages. (Of course, that isn't supported, or even well tested,
but the idea is sound.) This makes it possible to run the BS2 demo again.

Incidentally, this is how I *meant* for it to work when I added that check - I
even wrote so in the comment above that section of the code - so how on earth
did I manage to screw it up like that?

svn-id: r22594
"
"f7bacd746f6e9276c611b9d019b2114c487ead0f","2006-05-24 05:17:48+00:00","Seems like the sound is generated at 22050 Hz regardless of output sample rate.
Hopefully, that will change in the future.

svn-id: r22595
"
"04bf1294167fbaa1f193a3b105ebdd25ae07136d","2006-05-24 06:11:39+00:00","Fix compressed sound in makeWAVStream()

svn-id: r22596
"
"a62c66bea1bc8e0105b3ce3ff1ab453a24e651d7","2006-05-24 08:56:40+00:00","strip one level of func

svn-id: r22601
"
"2b258bc6d16905d7c941777c5b042247081c9eca","2006-05-24 09:04:36+00:00","removed not used anymore variable

svn-id: r22602
"
"efe96a535b0e74f47920e72958ab4ec5449fc35b","2006-05-24 09:07:46+00:00","formating a bit

svn-id: r22603
"
"1ec169ad3a14533662a74f992d95e0b820623ad5","2006-05-24 10:37:45+00:00","ops

svn-id: r22604
"
"691ae72a591f761af458882a9ae5c5b945948921","2006-05-24 11:39:29+00:00","include mouse support always

svn-id: r22605
"
"3d441e579ec98b71761b4d9c7443fd278e1f5736","2006-05-24 13:08:09+00:00","moved addSpecialDebugLevel into constructor

svn-id: r22606
"
"62b122ff340c53a9a0f2c97ee2268fec28be26d0","2006-05-24 13:36:38+00:00","fixed modifier keys

svn-id: r22607
"
"9fc2bc19394937e8373d8afc4db2f7fbc45142a7","2006-05-24 13:38:50+00:00","cleanup

svn-id: r22608
"
"20cf952b687739a1647796045c0eeacb1d500e7e","2006-05-24 14:00:08+00:00","removed defines USE_PCM_SOUND, AGDS_SUPPORT, USE_HIRES

svn-id: r22609
"
"f2641ce081bc56fd1ea28aa06d3e0eef6077a6b8","2006-05-24 14:18:45+00:00","Removes debug printf.

svn-id: r22610
"
"1bec2024a6ce1e131f24ce09c66da096c08ac0b0","2006-05-24 14:25:42+00:00","From what I understand, the __ prefix is generally reserved for system headers,
so I've removed most of them. There's still some in list.h, but that should
probably be replaced by our own list handler some day.

svn-id: r22611
"
"8d954b7ae50c0391ba49ceeb26294a21bbe5b77f","2006-05-24 14:34:38+00:00","Fixes bug # 1471893 ('KYRA1: Graphics glitch when Malcolm turns to stone').

svn-id: r22612
"
"4a583216fbfd7eee2197bac249c3f62007c2d4e4","2006-05-24 19:51:37+00:00","Fixed most - not all - GCC warnings.

svn-id: r22614
"
"30b368643e24c1733a99bb52a68a3acb086fc069","2006-05-24 20:21:45+00:00","Fix a const warning

svn-id: r22615
"
"935d3bb4254365e557642b2713eca8b31ab3eb86","2006-05-24 21:04:44+00:00","The AGI engine's save/load dialog dirties the entire screen thirteen times
each iteration of the loop, causing a serious slowdown on my computer. It
empathically should not be doing that, of course, but to safe-guard against
such patological cases, if the entire screen is dirtied even once we can set
_forceFull to true.

svn-id: r22616
"
"0f5a4b304b4cb3aa498610617d3ded63aad69c3d","2006-05-24 21:14:41+00:00","Update only dirty rects instead of fullscreen update

svn-id: r22617
"
"383b598c5cde4c64729d89a7ca84039dc5fabb58","2006-05-24 21:40:24+00:00","converted to scummvm console style

svn-id: r22618
"
"d636d4c23a246ae5f5b76c1925b722e8e3348c81","2006-05-24 21:56:14+00:00","Fix crash. Console should be created after graphics init

svn-id: r22619
"
"db8968b28f9396046b24e72c392522aac5cdf757","2006-05-24 22:05:12+00:00","Fixed warning.

svn-id: r22620
"
"a052d89f8b35cf9afdf4c1622de59a4d56388ac3","2006-05-25 07:53:58+00:00","Fixes bead movement speed in end scene.

svn-id: r22621
"
"259e06a69b14b0612188a167bf2a0d1e4beb3708","2006-05-25 08:02:17+00:00","- Adds some _quitFlag checks
- deletes Screen::drawPixel

svn-id: r22622
"
"197b1f4e88b8e4b7f5d0fb56b7a3c24818e17cd2","2006-05-25 08:07:20+00:00","Some more _quitFlag checks, makes quitting while end sequence faster.

svn-id: r22623
"
"1162a759c03d266e2908bf669e289a511911ff77","2006-05-25 09:53:51+00:00","Added support for fading digital music in or out.

svn-id: r22624
"
"2353454adf6c01af635a5956edfa644843ef745d","2006-05-25 11:10:49+00:00","Fade down the palette and the music in playVQA(). (We can't fade down the
palette before that, I think, because then we don't have any good palette to
make a backup copy of.)

svn-id: r22625
"
"b07798783c9bc8c8b1e906cf6043193c00192edc","2006-05-25 12:17:50+00:00","fixed regression after conversion console

svn-id: r22626
"
"a3c50b5f678a4df47354040ebb69f4ad2dd30b5f","2006-05-25 15:06:55+00:00","fix out-of-bounds array access

svn-id: r22627
"
"a49c64799fc4985b22ff01cd2aa332d0e2ddec54","2006-05-25 18:31:56+00:00","Fixed comment to make it less obvious where I copied the general structure of
the palette manager from.

svn-id: r22628
"
"0e6831fa325ccb17952ad4cb853e477f184f6b45","2006-05-25 19:22:28+00:00","Fixed stupid error in replaceCursorPalette().

svn-id: r22629
"
"14774d17604be444471dbb1a92e1ee3b7340f858","2006-05-25 19:43:33+00:00","fix hotspot handling when overlay visible

svn-id: r22631
"
"4859de9ae763defc237434650ff6ab7a08319f9b","2006-05-25 19:46:28+00:00","Made CGA rendering, EGA/VGA palette selectable via render_mode

svn-id: r22632
"
"f6e6d7e8e931fdf6149d9df301d38fe9637a5105","2006-05-25 19:48:54+00:00","unused variable

svn-id: r22633
"
"17fd8e5ed092ab0432aa5929a211a16421c25579","2006-05-25 19:56:05+00:00","Minor cleanup and formatting

svn-id: r22634
"
"21a74b6f41c74d713a1cda17d69927b48a267f7b","2006-05-25 20:29:17+00:00","Cleanup.

svn-id: r22635
"
"5f113b2dc23912b23097131e64680dafa3dcd49a","2006-05-25 20:50:32+00:00","Setting a 'null' cursor like this doesn't do anything in the SDL backend, and
could possibly be undefined in other backends. So it should be safe to remove.

svn-id: r22636
"
"d05138fd9cc694799dcbb8f2b91420576df2238a","2006-05-25 21:16:49+00:00","- Fix typo in debug level Scripts.
- Show scripts execution if requested

svn-id: r22637
"
"d56c65bf4a47007dc874b70eb04be9ed7de27b01","2006-05-25 22:39:44+00:00","add and use is_ego_view() function

svn-id: r22638
"
"8062eb6ec33e32012da28f0cd06b8f9334c26937","2006-05-25 22:51:42+00:00","Set and show/hide mouse cursors through a 'cursor manager' (analogous to the
recently added (cursor) palette manager) so that the cursor can be properly
restored after returning from the GUI.

If there's any C++ magic that can keep the backend functions from being called
by anything else than these managing classes, that would probably be a good
idea. Also, since the cursor manager keeps a copy of the cursor image, perhaps
there are at least some backends that will no longer need to?

svn-id: r22639
"
"017655682167667cee9d9d2e15e32c075af8ee2d","2006-05-25 22:53:45+00:00","remove superfluous struct keywords

svn-id: r22640
"
"79819da301f606d799e0f3b8709c37c4cd685238","2006-05-25 23:20:35+00:00","The GUI never asked for the cursor to be visible. I'm not sure why that used to
work before the cursor manager. Oh well, the launcher should have a visible
cursor again, knock on wood.

svn-id: r22641
"
"9828eb7a0b9fc96f919cbd2966ace4faf5f4515b","2006-05-26 00:17:55+00:00","Properly process screen change event in console

svn-id: r22643
"
"7f8b79d5d0c98e5321c435293fdda8ebb9166cde","2006-05-26 01:05:19+00:00","Use Courier 12pt (free one) for 2x and 3x console. Looks much more useable now.

svn-id: r22644
"
"12461c3ca0e0c971f4cdf2ba255c37568208dc94","2006-05-26 01:16:21+00:00","Do not create scrollbar copy on each resolution switch

svn-id: r22645
"
"5fee4afc32e042893c90623d89c8d4d8e1857665","2006-05-26 01:49:56+00:00","- Put scrollbar inside of list widget
- Use resize() instead of setPos() and setSize() where applicable

svn-id: r22646
"
"9477029a443ff1592958cb09eccfae95ac83ec2d","2006-05-26 01:51:03+00:00","remove unused variable

svn-id: r22647
"
"003504272565235710a9f742c8763d13182cca5f","2006-05-26 08:20:15+00:00","Fix for bug #1495361 (MONKEY1 AMIGA: Error at gamedetection)

svn-id: r22648
"
"985215a04a6dfa9a07d7a8987b639c95b1721c24","2006-05-26 09:36:41+00:00","As far as I can tell, there's no longer any reason for PartBuffer and AnimData
to be packed, so I've removed the packing and added the 'refresh' field to
AnimData instead of having it as a separate array.

On the other hand, animHeaderStruct and animHeader2Struct *should* have been
packed, but weren't. I've changed they way they are initialised so that the
packing should no longer matter for them either.

svn-id: r22651
"
"4794898d29f7add9f7474b9ecd727536c514d4e7","2006-05-26 10:14:06+00:00","isSpriteLoaded() is used by FF,  a similar function was commented out in original code

svn-id: r22653
"
"48ecd027a3a39c4cb622120525cd7d8d0d817533","2006-05-26 10:42:29+00:00","Update to adapt for AbstractFilesystemNode changes made recently.

svn-id: r22655
"
"91cd652f1d9ff6887b8577305f1dc5f78db23c69","2006-05-26 10:46:52+00:00","move psp_fs.cpp from backends/psp/ to backends/fs/psp/

svn-id: r22657
"
"a11eddeb0b800f3fc937522d73ac22c8fc119dbe","2006-05-26 11:28:03+00:00","replace agi/list.h by Common::List

svn-id: r22658
"
"15411f5fface864b40ad8f4aadfec059b2632a1d","2006-05-26 14:00:52+00:00","If a game ends by natural causes, unload_object() will be called twice. Make
sure it doesn't try to free the same memory twice.

svn-id: r22659
"
"3485102a7e42cebc5e7ed103c2405d741ff3d832","2006-05-26 14:16:42+00:00","- redraw inventory before entering a room
- some cleanup

svn-id: r22660
"
"f548f9766667299e327234f661504b13187e89ea","2006-05-26 14:21:53+00:00","Fixes input handling while moving.

svn-id: r22661
"
"5bbdde5479dd64f823e3c315c917b1c78fc3aa63","2006-05-26 15:44:46+00:00","Removed hack to flush mouse events. No longer needed, apparently.

svn-id: r22662
"
"fba9e15916c1632328d1d5b12b5e20e64bd9a46c","2006-05-26 15:55:42+00:00","We don't have a mouse cursor yet, but this is probably the point where it
should be shown.

svn-id: r22663
"
"da7140c3cf1df275aabd79bcd7725bf020f84643","2006-05-26 16:02:37+00:00","This produces the correct character spacing for the main menu.

svn-id: r22664
"
"20c4be47a39b6d8e7bb1587a8a4630bb2e620f54","2006-05-26 17:18:23+00:00","add functions for reverse iteration of Common::List

svn-id: r22665
"
"7e287a08cee75965916ff9ef3500525c4ef9afe9","2006-05-26 17:38:12+00:00","replace agi/list.h by Common::List; cleanup

svn-id: r22666
"
"b858a6de65debe5eae4aa0f5f0bfb13352fd9b0b","2006-05-27 00:01:25+00:00","Fix V1 demo of maniac

svn-id: r22667
"
"3d0aa0a4d9fa36de8b8697ed65d8c1f4a6356a07","2006-05-27 00:12:30+00:00","snmdemo uses *.sm0/1 data files

svn-id: r22669
"
"b56c7b88d7de665f92e1600f81dcec5c4af3a2aa","2006-05-27 05:46:04+00:00","Major GUI update:
- Implemented padding in console
- Update only current line in console instead of whole screen
- Fixed caret positioning in edit text widget
- Improved buttons drawing, now they look more realistic
- Added label spacing in popup widget
- Correct shadow in popup widget
- Fixed up with selected popup widget being drawn on wrong tab
- Added shading to list dialog
- Adjusted shading of inactive widgets
- Proper coloring of browset (add game) dialog
- Introduced Container widget
- Used Container widget in scumm save/load dialog. Now it looks properly
- Adjusted button colors even more. Now they match almost perfectly albeit with banding
- Made scrollbar appear only when it is really needed

svn-id: r22670
"
"9943084227a1c1f06cc2703060c4f347e4362385","2006-05-27 06:08:44+00:00","Oops. More advanced warning recovered a mechanic mistake. Fixing.

svn-id: r22671
"
"923101abcbad36dbfc676008cf7193efa60caaa7","2006-05-27 06:38:45+00:00","Override the list widget's FindWidget() function, to allow it to return the
scrollbar widget.

svn-id: r22672
"
"0fef7b32b28914413189a4aa444dfff15f3d2c5f","2006-05-27 11:47:44+00:00","delete[] instead of delete

svn-id: r22673
"
"0f10a11ba021ddc658148a052bc68778a49a28d0","2006-05-27 11:51:17+00:00","uninitialized variable

svn-id: r22674
"
"c8d3f5a80fbe6a69b05a5f8e9bbfc38495b03c85","2006-05-27 11:55:03+00:00","Should use delete[] instead of delete here, too. (I knew where the cursor
manager code was copied from. :-)

svn-id: r22675
"
"c1c5080fcd608df7a9df9daa43720cc18e930ba2","2006-05-27 11:59:40+00:00","Draw the selected menu item (currently always the first one) highlighted, i.e.
white instead of yellow.

svn-id: r22676
"
"60e288fe87461308e45d90a3297734eaa92284c7","2006-05-27 12:05:16+00:00","More vertical space in game options 'game' tab for consistency and better
visuals

svn-id: r22677
"
"ae191feb213d9965d67e88d29cce19a23bef9412","2006-05-27 12:37:00+00:00","Fixes caret drawing in EditTextWidgets.

svn-id: r22678
"
"fa3f1fc15cfeddd3f38231beb59454bb02509387","2006-05-27 12:39:55+00:00","fix warpmouse in overlay-mode; fixes cursor jumps when opening menu

svn-id: r22679
"
"1b2485f4af2010f262bd4f6e149a8c2d96b893cc","2006-05-27 12:48:31+00:00","Don't draw the shadow outside the scrollbar (should fix 'garbage' when moving the scrollbar)

svn-id: r22680
"
"1da221279cac046e6aadf05d75fbdf21b643cfab","2006-05-27 12:55:28+00:00","The dirty rect produced by drawMouse() is updated without going through any
scaling or aspect-ratio correction, so it has to be added using real surface
coordinates. So I had to re-introduce the extra parameter to addDirtyRect().

svn-id: r22681
"
"0993c6a712fa76cd2cd43a066489781dece7161a","2006-05-27 13:17:19+00:00","make EditableWidget's caret visible when it moves

svn-id: r22682
"
"813e3d1aac7c9384780db6927a6bf100b56d5dd9","2006-05-27 13:33:27+00:00","Maintain the same screen update frequency while waiting for speech to finish.
This should take care of half of bug #1494934. The other half was fixed in the
SDL backend earlier.

svn-id: r22683
"
"72403d1336574d0e9b49b662022dcec88b8610a7","2006-05-27 13:52:30+00:00","fix missing saveload thumbnail variables in classic theme config

svn-id: r22684
"
"dfce3faabd81d434f06e6654eaca9cf992379935","2006-05-27 14:41:15+00:00","add fixme about scrolling in about dialog

svn-id: r22685
"
"de1d77670f132e25238b6304799140f399d01f38","2006-05-27 20:08:42+00:00","Added new samnmax demo file name pattern. See bug #1496105: 'Sam & Max Hit
the Road (ENGLISH/PC-DEMO V2) - Path Error'

svn-id: r22686
"
"3f3ac33e73321aff2644d867a46048c774cc75ad","2006-05-27 21:39:08+00:00","Updated NEWS a bit. More will follow. Both cine and lure are too early to
announce.

svn-id: r22687
"
"7f1eafea9600d69251853604d84e4a05f5c2888c","2006-05-27 22:57:00+00:00","Don't 'tickle' a dialog until after it has had a chance to redraw itself,
otherwise it may be in an inconsistent state since the modern theme uses
openDialog() to allocate a surface as large as he dialog itself.

This fixes a crash when changing to a bigger scaler when the About dialog is
running.

svn-id: r22688
"
"b5355a9142af62d1614b43f1036ea94bc765b538","2006-05-27 23:31:08+00:00","Backed up my own commit :/ The user did a mistake when supplied the data.

svn-id: r22691
"
"25c295abc5c429bd764923d3ee0b027c8159ed8c","2006-05-27 23:50:48+00:00","Add a few items for HE games

svn-id: r22692
"
"76d722d941c788f7660809abbad422c1bf14ec6e","2006-05-28 02:51:03+00:00","Fixes bug [ 1480746 ] KYRA1: menu triggers assertion, and sets the text/speech config options correctly for CD versions

svn-id: r22693
"
"21f50b3267160bb73c9757a9c07b3c13e745f667","2006-05-28 03:47:20+00:00","Use different method to detect V1 demo of Maniac Mansion, since md5 matches the full version

svn-id: r22695
"
"9a7f92d55821e3d10b2304090c6eda8927fc0fbd","2006-05-28 04:08:25+00:00","Kyra.dat wasn't being loaded for the kyra1 demo (which is needed). Fixed.

svn-id: r22696
"
"77910d416346241d9834a69b4cb0c0f0c40797b0","2006-05-28 04:46:34+00:00","Fix for [ 1472007 ] KYRA1: Bypassing cutscenes with ESC doesn't stop speech

svn-id: r22697
"
"8161aa8adbb6d0c5e5e7b09e21773f00c0747342","2006-05-28 04:53:22+00:00","Adding a safety check before the stopHandle call().. May or may not be necessary.

svn-id: r22698
"
"3a1dec3ad19db6daeee0098d69611f5255ee8fa7","2006-05-28 05:09:09+00:00","Added checks for sound/text config in Brandons responses to using the amulet

svn-id: r22699
"
"ea05e31330b336207cd2abc2d131cab049290126","2006-05-28 06:04:46+00:00","increase buffer for comi smush audio track, that fixes bug #1479721

svn-id: r22702
"
"dbaf5206aeb2a958c4687577cddbdbffb016870a","2006-05-28 06:07:54+00:00","Added speechEnabled() and textEnabled() to simplify the text/speech config checks a bit, and added checks some more places

svn-id: r22703
"
"e06ee0c4902ce0627b9461da6a39ff331379943a","2006-05-28 08:16:07+00:00","We already have a default setting for subtitles, so this shouldn't be needed.

svn-id: r22704
"
"b17f0e8b6d2073fa91bbd6096bad367531d18baa","2006-05-28 09:21:32+00:00","The Kyra settings are now stored in the config file instead of the savegames.
The settings in older savegames are ignored.

svn-id: r22705
"
"db558e3d92465d889b193783640b5fdbe962af91","2006-05-28 11:08:46+00:00","Allow key pad navigation.

svn-id: r22706
"
"073f859de9d33d32350814fc414b7750c5555517","2006-05-28 11:33:17+00:00","Fixes bug # 1494945 ('KYRA1: Actor disappearing in an animation').

svn-id: r22707
"
"727f66de391c8b0eab99f64602251ebbe4d2c2e3","2006-05-28 11:43:04+00:00","Commits Chriliths patch for fixing Kyra on PalmOS.

svn-id: r22708
"
"655288132295264fcf10cd050c3ba4a6885acca8","2006-05-28 11:46:22+00:00","This could fix detecting unknown non-english versions which contain a MAIN_ENG.CPS and a language specific image.

svn-id: r22709
"
"1d969e8acd695c21c333c2c67778d4687fff208b","2006-05-28 11:48:14+00:00","removes some tabs.

svn-id: r22710
"
"e26285b3f8589d69fbcbe9d49c1f617784a789a2","2006-05-28 11:52:24+00:00","Apparently some games use the F10 key, which makes it a poor choice for opening
the debug console. Ctrl-D may be just as bad. Does anyone know for sure?

svn-id: r22711
"
"a02f2396598b6cb7512867b1b4a3be9ad99738c6","2006-05-28 11:53:20+00:00","cleanup

svn-id: r22712
"
"a822d8e6e00362f5dd659b3e1093d3985e726240","2006-05-28 11:55:42+00:00","adds GF_ITALIAN to the list of language flags.

svn-id: r22713
"
"a442af27034c6cf679faf8b425cb11232e4a5958","2006-05-28 12:10:11+00:00","Another couple of fixes for the spanish floppy version (menu strings specifically)

svn-id: r22714
"
"d5c74ee633fcedf706f72e3398256d4a19efd834","2006-05-28 12:12:30+00:00","No need to compute the SCUMM version here; rather, verify that the SCUMM version is already set correctly

svn-id: r22715
"
"1750be5b5a1dc8f89d786db143575e661bc3c11c","2006-05-28 12:19:45+00:00","- makes Screen::getPagePtr private
- introduces Screen::getCPagePtr and Screen::getPageRect (which should ease the introduction of dirty rect handling)
- moves KyraEngine::loadBitmap to Screen

svn-id: r22716
"
"d28d6fe4fb90b5c4c8ad42976dfc884aac2beb7f","2006-05-28 12:23:49+00:00","cleanup

svn-id: r22717
"
"dc2da7a8047705756512ffe35df0d04bba43c70a","2006-05-28 12:28:28+00:00","Moved the hack that distinguishes MM V1 demo from the full version to a more appropriate location (so that the game gets correctly detected)

svn-id: r22718
"
"28114e30072f7a005e71170cb40c8a6cde9f3b15","2006-05-28 12:33:41+00:00","Sets a blank palette at startup.

svn-id: r22719
"
"b99d128a1df5b767853436dd1b3e9ae651b8c4da","2006-05-28 13:28:10+00:00","Add reported Gob2 german floppy.

svn-id: r22720
"
"e4989b37b744db0edc8ff8e06e7afc8867570af3","2006-05-28 16:22:12+00:00","Mock-up version of the Kyra 3 main menu. Just enough to be able to select the
intro cutscene.

svn-id: r22724
"
"bc5b877aa9fbba3653df1c4ffa593bf87e3ec2aa","2006-05-28 16:29:31+00:00","Got rid of _selectedMenuItem to make LordHoto happier.

svn-id: r22725
"
"8c1d71851a9afc4208bc3d4a04cdf0ccd7cb5545","2006-05-28 21:35:35+00:00","make getNodeForPath() use the proper PSPFilesystemNode ctor (and remove the old, now unused, one).

svn-id: r22726
"
"69b5d6fa3d49d0e2bc95b0096c98dd1b5305f0a5","2006-05-28 22:02:38+00:00","fix PSPFilesystemNode::parent() + some minor cleanup

svn-id: r22727
"
"5d562eb3c588345b93f8c21a3f076a02bbe5a454","2006-05-29 01:55:42+00:00","Committed patch [ 1496602 ] KYRA: typo on Kyra2 file list
, thanks to Bellut

svn-id: r22729
"
"5fa3985bcbd96558d8adb0e306f1cfd0b10b2e03","2006-05-29 08:12:07+00:00","Player now moves out of the way if he's blocking an entrance when an NPC enters. Also changed errors in unimplemented NPC actions to warnings

svn-id: r22731
"
"a0d14a08320166437585548f2ddabc03e5faef7e","2006-05-29 12:45:11+00:00","Fix Commodore 64 versions

svn-id: r22732
"
"ba82b4a2353d6a291708a62ed73382890d08ba44","2006-05-29 13:06:28+00:00","Fixes widget drawing for classic theme.

svn-id: r22734
"
"f3e74f88de34658bb2e7b6594e24fcdecd9990cf","2006-05-29 13:12:04+00:00","- Fixes disabled transparency for classic theme.
- Introduces check for define 'CT_NO_TRANSPARENCY' to disable transparency support.

svn-id: r22735
"
"fbc55218f117e9c1e1a474e3aea4e396e75f3902","2006-05-29 13:21:56+00:00","- Fixes list position after screen change.

svn-id: r22736
"
"af25e65c31cf01026ba8baf84ab01595b16b1ddd","2006-05-29 13:24:49+00:00","Removes leftover comment.

svn-id: r22737
"
"0a557cf2a47038ea290fd13b3d64e7ce887c484c","2006-05-29 14:00:00+00:00","- changes transparency parameter of Theme::drawSurface to alpha parameter.
- adds possibility to draw GraphicsWidgets with alpha values.

svn-id: r22738
"
"38537899b3f601feb542fadc62f46e44f11fd4c1","2006-05-29 14:15:19+00:00","Remove printf() debug message that appears annoyingly in Zak256. Anyone know what this was added to figure out?

svn-id: r22739
"
"bdceb581fd59a081aae2708af766f5930ca9647b","2006-05-29 14:16:52+00:00","- cleanup
- uses working getColorAlphaImpl for alpha == 0 in getColorAlpha

svn-id: r22740
"
"c37d69df56a2cecce2fe0775aa838379ccf66d5b","2006-05-29 14:21:07+00:00","- comments out getColorAlphaImp2
- adds note in getColorAlpha about we handle negative alpha values currently (could be removed when getColorAlphaImp2 get's fixed)

svn-id: r22741
"
"2dd94dd247129026ca8d2b30e481052a389f4363","2006-05-29 14:30:21+00:00","Oops this reverts my last commit. :/

svn-id: r22742
"
"0165c98e00b6b7e6d8cdd74f540c29f8ded34bd7","2006-05-29 14:38:56+00:00","- adds option to fill GraphicsWidgets with a special color
- updates builtin theme config for my next commit
- bumps theme config

svn-id: r22743
"
"975dd5f1fa3edaa88759312bd79e14e16bc6ab65","2006-05-29 14:39:31+00:00","- updates new theme config

svn-id: r22744
"
"cba9ef32c21a8b40dbd638fd10796024bb7b6d87","2006-05-29 14:40:18+00:00","adds support for filling the thumbnail display in a given color if no thumbnail is present

svn-id: r22745
"
"1d72b954c7dd6e15a201ee680d8a5e895626dcd4","2006-05-29 14:55:43+00:00","Introduces special switch for GraphicsWidget for use of theme transparency again.

svn-id: r22746
"
"fa779040744673723b8f8266f6a7bb9054da20d5","2006-05-29 17:27:22+00:00","If we're going to intercept attempts to set VAR(VAR_CHARINC) in writeVar(), we
should probably set it the same way as updateSoundSettings() does it, i.e. to
9 - getTalkspeed(), not getTalkspeed().

I was testing the scene in Sam & Max where you give candy to Doug. I had set
the talk speed to max. The script tried to set CHARINC to 3, but instead it was
changed from 0 to 9...

svn-id: r22748
"
"4d55bff13d51a64e1008aaa3337bb146051d9c8d","2006-05-29 17:37:59+00:00","add SCEkxploit rule

svn-id: r22749
"
"31413d871bb336aa4ca6d86a577074e875a05e94","2006-05-29 17:40:31+00:00","get rid of _overlayScale

svn-id: r22750
"
"1b6363c7313c4e2ca7fcb35bdaea4cc2b41b249d","2006-05-29 17:53:06+00:00","fix 480x272 overlay drawing, set default overlay size to 480x272

svn-id: r22751
"
"e4e145b5bcede09efcd4fa77a44364e7a9f942c5","2006-05-29 18:00:38+00:00","Update makefile for the GP32 port.

svn-id: r22752
"
"e1844e485f19d5abb260b5eb821f9ce38658b2ad","2006-05-29 18:06:02+00:00","some cleanup

svn-id: r22753
"
"d6f1ba1540d60d374121244565a08a9c77670e5b","2006-05-29 18:24:52+00:00","- More GOB2 map conversions
- Added Music_Dummy (for --music-driver=null)
- Implemented IMDs. That took longer than I expected...
On the bright side, Ween's intro now plays more correctly

svn-id: r22754
"
"7ff20a70a5966bfb55a896604bb7f3461e9cd03d","2006-05-29 18:30:27+00:00","The ScummDebugger object needs to be created after _numVariables has been set. This is apparently only done in in readMAXS() which is called by readIndexFile(). Moved the call to the object constructor in the init() method. This fixes the 'scumm_vars' debugger command.

svn-id: r22755
"
"163ed1afd3fc29f351125fcf8f98fc4ad2a006b9","2006-05-29 21:30:48+00:00","objectify AGI menu.h/cpp

svn-id: r22757
"
"4e45be4568eee8f378c13eb74ee47fee731cc012","2006-05-29 23:25:50+00:00","Only call OSystem::updateScreen() every other frame, so no more than 50 times per second.
This doesn't appear to make a visible difference on PC, but allows the game to run on PSP and probably several other consoles/ports that wait for 50/60hz vsync.
Since I'm not familiar with this engine I've added a 'FIXME' comment, because maybe this can be fixed/improved in a different manner.

svn-id: r22758
"
"eeddd3700ea34b74bf329b0251219c1e631a2a0e","2006-05-30 01:07:08+00:00","Big update from Joachim. Game title fixes, spelling fixes, rewording,
chapters rearrangements, long line splitting, etc.

svn-id: r22761
"
"ce33cfd93840bcac3142546c62bd7f31a884f64c","2006-05-30 01:23:28+00:00","Big Thinker 1st Grade isn't supported yet

svn-id: r22762
"
"5bbe44cd505dafb5a64df677fc0889248c523c13","2006-05-30 01:41:49+00:00","Fix bug #1496582 'GUI: Default graphics mode not committing'.

svn-id: r22763
"
"e2caac9143f32453e91bae92553667ab8def75dd","2006-05-30 02:20:22+00:00","Better wording

svn-id: r22764
"
"cd822f57dda46dfc9feb6eb76c270e48038ab224","2006-05-30 09:58:21+00:00","Changed 'md5scumm' target back to using a path based on the assumption that you are working in a full checkout of the ScummMV repository

svn-id: r22765
"
"865b48e0955ad5c3d290f82f3d4fd5252ea54ad2","2006-05-30 10:08:02+00:00","Added sections for infrastructure and GUI to the credits file. These are badly incomplete; folks, please add yourself as appropriate

svn-id: r22766
"
"0284becc9ded545a8df9b0f2f3374efcf5d837b1","2006-05-30 12:07:47+00:00","GUI theme for PSP-specific resolution

svn-id: r22768
"
"2ce9edd7f77b0e003fe0afa57617783b3906eb8e","2006-05-30 12:13:34+00:00","Fixed subtitles Y coordinate in characterSays(). I have no way of confirming
this, but it seems obvious to me that it's trying to subtract the character's
scaled height, and this is how that's calculated elsewhere as far as I can see.

svn-id: r22769
"
"a46fe65378658ba90ecda7879cad8cc53d1d9623","2006-05-30 12:29:32+00:00","A quick hack to let PSP gui use bigger fonts. Proper solution is to add
possibility to specify font for each widget class

svn-id: r22770
"
"411264238ab44ea5e619368137e42ca65d467a45","2006-05-30 12:42:51+00:00","Narrow buttons for PSP resolution for better look.

svn-id: r22771
"
"0612e74116754184689689df7835362464611cc0","2006-05-30 16:19:56+00:00","- fix bug in copyRectToOverlay() that was introduced after _overlayScale cleanup.
- implement grabOverlay()

svn-id: r22772
"
"94272b6ba8e9199bb314ca04521b5a4d5c1cc87a","2006-05-30 16:48:15+00:00","Should fix drawing on systems with alpha mask.

svn-id: r22773
"
"b6a56e07954bc579115f8b5ffbdd0999d048b894","2006-05-30 17:35:57+00:00","- Split global audio tab into audio and volume
- More logical order in game options tab

svn-id: r22774
"
"b13e157c16c4909fb26b1f3ba928643cf44dee08","2006-05-30 17:49:53+00:00","Put volume controls conditionally into separate tab. Used by PSP theme.

svn-id: r22775
"
"7e656e727420a4cbef6bb33e3d0f15c3e8401b45","2006-05-30 17:57:44+00:00","Fix global options on PSP theme

svn-id: r22776
"
"9852a3b8085fd9c4da764b671facd00d671cf384","2006-05-30 18:05:13+00:00","Fix game options in PSP theme

svn-id: r22777
"
"ac1b6014290f2dbbc81d46095c7cad6434a2a535","2006-05-30 18:27:04+00:00","override some widget settings for launcher on 480x272

svn-id: r22778
"
"1ec42e169ed58c2ec591c98f435d30b1709fffa4","2006-05-30 18:36:08+00:00","Fixes for MM NES resolution:
- Introduce useAsIs keyword for resolution aliases
- Extend skipFor keyword to accept multiple values

svn-id: r22779
"
"148995dc2d0ce81f6ea190c576c00ec4a57d8678","2006-05-30 18:48:16+00:00","Slight adjustment to list height in PSP theme so it will not have ugly empty
space between last list item and widget edge.

svn-id: r22780
"
"cbfc7bfc1ace88aa4b9c27fbb3d47309fa951d4e","2006-05-30 18:53:01+00:00","objectify AGI sprite.h/cpp

svn-id: r22781
"
"7094405116e43a2a11df36f0922999e808ebafce","2006-05-30 18:55:41+00:00","Fix About dialog in PSP theme

svn-id: r22782
"
"a9dc501ee03ec573208e54da597ee67688e97f18","2006-05-30 19:48:47+00:00","cleanup

svn-id: r22783
"
"33eeb81bd6e01afa2e1e366249c0c3e6c739ce45","2006-05-30 20:32:22+00:00","remove extraneous comma

svn-id: r22784
"
"4bdef42007daa757cbfb31ca6f2b85925064c26a","2006-05-30 20:46:11+00:00","Workaround bug #1497280.

svn-id: r22785
"
"6ea375b8907374fba6b3594c207eba91c9ef7622","2006-05-30 21:22:52+00:00","free old buffers when changing resolution in the non-GU backend (not that it's ever used, but anyway)

svn-id: r22787
"
"75be177e9013f02f3d05b3de8720bb548cff8204","2006-05-31 08:32:05+00:00","Removed misspelled version of disassembly folder

svn-id: r22788
"
"321acd2740936efeb85eb5b771cbfc86a3545e9b","2006-05-31 08:32:24+00:00","Further disassembly of NPC actions as well as finally figured out the basics of NPC character modes in standard_character_tick_proc

svn-id: r22789
"
"05499f58dd2e79cae46bd4f250df946261bdac35","2006-05-31 08:44:14+00:00","- Removed usage of OSystem::quit(), added a _quitRequested variable
- Fixed some leaks, unitialized memory and delete/delete[]-errors

svn-id: r22790
"
"9aa7eec0f6b085c3d9236a9d56e263358971f588","2006-05-31 08:52:20+00:00","Update _tabHeight on screen changes.

svn-id: r22791
"
"4abec6fdb6e788559e2d2a16b6624ca19f509fa6","2006-05-31 09:49:52+00:00","Possible fix for bug #1497973: '0.9.0 from SVN does not build on Solaris 10'

svn-id: r22792
"
"3b1062d2d49c7017204efbe9395cca369e071aa0","2006-05-31 10:48:40+00:00","Add patch for bug #1452272 - COMI: Verb strings aren't wrapped

svn-id: r22793
"
"51f45f0840461901eea5ff0d0b193ed9a47ef1e4","2006-05-31 10:53:04+00:00","Fixed many const related warnings

svn-id: r22794
"
"31ebfdd1be2a099713962dea0c8b275aa59aa0a5","2006-05-31 10:55:09+00:00","Yet another const warning fixed

svn-id: r22795
"
"da69cc267cbae8dff5ff3bb4f88ca8c81c5bc220","2006-05-31 10:55:57+00:00","Hopefully fixed bug #1498024

svn-id: r22796
"
"acb3ff742b191e7c4671e0059ce2352a117d1f5c","2006-05-31 11:36:20+00:00","Only do warning for path create failure and not error as it can be set within scummvm.

svn-id: r22797
"
"8975ba896378dfce8418453f7b6121b54d24d11e","2006-05-31 12:09:00+00:00","Cleanup. We no longer need these widget size parameters.

svn-id: r22798
"
"09074b1685e4d2f7555c24b7b011eb3ea13c562b","2006-05-31 12:27:05+00:00","More cleanup. We shouldn't need these widget size parameters either.

svn-id: r22799
"
"85da5d8157c0e0faf80f6cb7e8f39a3230ab7bc9","2006-05-31 13:36:01+00:00","Fixed two Valgrind warnings. But there are still a couple of invalid reads
at startup.

svn-id: r22800
"
"086c3dfc762d4cf6f170a6194c93d3114d83b308","2006-05-31 13:43:23+00:00","Use _mapWidth/_mapHeight instead of constant

svn-id: r22801
"
"f59017c9793b9a904332260c5a39e532a6ea2bb3","2006-05-31 18:44:48+00:00","Credit Clem and Raina for forum themes

svn-id: r22802
"
"4ccc04588f14372b18b746ee45a7abc536404077","2006-05-31 19:05:47+00:00","Project files for AGI added and support for S60V3

svn-id: r22803
"
"0379a05d2c2f1b51b12ea1282741129db5483f32","2006-05-31 19:17:08+00:00","added arm-*-linux-gnueabi target to configure

svn-id: r22804
"
"4bc3f9458932f628cf0d740c1ac10714d1463226","2006-05-31 19:28:54+00:00","Small correction, added space between filename and new line.

svn-id: r22805
"
"53b652b0086c7db4aec61cdc9fe82e0c589eba2c","2006-05-31 19:34:26+00:00","Added some notes about The Feeble Files. More are probably needed. (The section
about Multi-CD games, for one thing.)

svn-id: r22806
"
"44d48ed5941918927d271dad0e742941b7f94a8e","2006-05-31 19:55:29+00:00","GCC 2.9x fix for Symbian OS, for accessing class within Common namespace

svn-id: r22807
"
"9644171a7b323c48d80475f82a76be1d4c0e4d5d","2006-05-31 19:55:54+00:00","Don't let blocking rectangle extend below baseline (see Sarien bugs 810331 and 925074)

svn-id: r22808
"
"9472476acbf10b060627f209dc9afcb7284e8516","2006-05-31 20:05:31+00:00","Symbian Emulator (VC6) compilation fixes.

svn-id: r22809
"
"0044ef7be11e50c7b67b5564360a2955f9953eea","2006-05-31 20:19:03+00:00","Fixed deletion statement as it was deleting arrays(CW compiler was complaining).

svn-id: r22810
"
"72904c33545ec534e43108d5ecea7905b8137c42","2006-05-31 21:13:37+00:00","Moved Symbian call to GUI::Actions::init(); to the Symbian backend

svn-id: r22811
"
"a5fc242946c8e15f26a7aa5cc2be9ea0d09b87bf","2006-05-31 22:37:28+00:00","Clip samp to 2047, not 2048, so that it stays positive when multiplied by 16.
This seems to fix sound distortion in the Inherit the Earth demo.

svn-id: r22812
"
"9dabbb0c14d89b3b7954a2e6a83c1dab5b411e93","2006-05-31 22:49:24+00:00","Added note about the ITE demo sound bugfix (just barely newsworthy, I think),
and wrapped a few lines to make them look better in my emacs.

svn-id: r22813
"
"4c9b3ce5e3e6997f20e662ce61ded442edfa84e4","2006-06-01 09:49:56+00:00","Call setWalkspeed() after reading config settings, and after loading savegames,
so that _timers[] is properly synced with _configWalkspeed. Should fix bug
#1498660.

svn-id: r22814
"
"d64ea1ad87066aae2fae5f06b70d7b0358b78af9","2006-06-01 12:06:53+00:00","Fix wait timeout during introduction of demo version of Simon the Sorcerer 1 (With speech)

svn-id: r22815
"
"96d77f16b73925454c9204176c9e0e62839e9537","2006-06-01 12:18:12+00:00","- Fixed drawing of sprite-parts based texts
- Removed misplaced Music::stopPlay() call

svn-id: r22816
"
"8db54e077bad6e51ef8f686b646bd176850ae821","2006-06-01 12:23:08+00:00","Update GMF header comment

svn-id: r22817
"
"5a2fde0baa3d73fab898c19fb8b91e66bd0e8655","2006-06-01 13:57:19+00:00","Fix keyboard input. Now it is possible to use key modifiers freely.

svn-id: r22818
"
"1a64d032feb15dde730c3e5e3ed963a69535bf3a","2006-06-01 15:07:58+00:00","Allow X11 backend to compile

svn-id: r22819
"
"5755b5a97e248afa2d93ca3bc6de44d2e060ef33","2006-06-01 22:43:19+00:00","Fixed problem when building and debugging using Symbian Emulator.

svn-id: r22820
"
"a5c03dce0a8b8621b05d8f48909d9df069f4ef86","2006-06-01 22:44:08+00:00","Specific resource file for UIQ3 added and updated.

svn-id: r22821
"
"39451e99475106aad0b0534750dda4a641e958a4","2006-06-01 22:44:43+00:00","small optimization in evaluator variable lookup

svn-id: r22822
"
"f33a2e2f316bb19fbda3ebd891a126e0371c8dfd","2006-06-01 22:50:05+00:00","reduce number of string allocations

svn-id: r22823
"
"418027c21bcb16df65171981a5f5af6daa86043b","2006-06-02 01:34:34+00:00","Add load/save errors for other languages

svn-id: r22824
"
"8fa5f43bed1936e6938d73cf88ffc587c9cef264","2006-06-02 02:35:04+00:00","Improve Hebrew support

svn-id: r22825
"
"8d8324e463da42abf1fddb39cae6e3475a335db5","2006-06-02 03:10:18+00:00","Improve Hebrew support

svn-id: r22826
"
"4c2a08a91ac1596935907104c122306f55318eb3","2006-06-02 03:13:13+00:00","Update Simon engines issues

svn-id: r22827
"
"9686e5a3beca94ab29f19fb76e3f25d22cad0f61","2006-06-02 07:20:04+00:00","Optimize GUI string usage a tiny bit more

svn-id: r22828
"
"3d1cc0f7200f83fc654d8c623c684d8dff4079f4","2006-06-02 08:06:50+00:00","Cleanup

svn-id: r22829
"
"f3f7b670d0572b3355df6ada4e512ae60b488e51","2006-06-02 10:54:53+00:00","- Fixed IMD transparency
- Fixed SegFault due to uninitialized _multData2
- Removed left-over debug comment

svn-id: r22830
"
"b0733e0fc1eec5cfac9fac6c1ea40260257faa0e","2006-06-02 11:33:11+00:00","Add support for separate compressed sound files for cutscenes in FF

svn-id: r22831
"
"8c7abdf024f32e566480d2d978a4cd4399435baa","2006-06-02 13:00:27+00:00","Allocate minimum 16 bytes on String(str) call. Reduces 2.500 malloc() calls
on startup

svn-id: r22834
"
"179f097202fbdaa73f3584454e9e4edf0db93d7f","2006-06-02 13:34:41+00:00","Fix mingw compile

svn-id: r22835
"
"984214a109a6751444afe4182dd2f32e1d104318","2006-06-02 15:20:48+00:00","Let deleteWidget() check if it's deleting _mouseWidget, _focusedWidget or
_dragWidget. We don't want to keep references to the deleted widget.

svn-id: r22836
"
"3348c32de037919e749923897f54de379a9636da","2006-06-02 15:41:48+00:00","Added possibility to use (char *) as ashMap keys. For some reason it does not
work as expected. When I try to switch _aliasmap in eval.h to it, I get
crash in String constructor on dereferencing.

svn-id: r22838
"
"eabca8769778a9d1fa58b320df8a31ea098305ab","2006-06-02 16:06:17+00:00","Optimize string usage a tiny bit more

svn-id: r22839
"
"180f6c87ad5e85ee5c822c0dfeb4f1637581540e","2006-06-02 16:07:40+00:00","Remove slipped in debug output.

svn-id: r22840
"
"05871836b9cb9851a09cd98258f5cbc75f30344a","2006-06-02 17:51:20+00:00","Turn AliasesMap and VariablesMap keys from String to const char *.
Stats before:
Strings: 12048
mallocs: 55629
after:
Strings: 6370
mallocs: 42117
Here Strings are non-empty strings. Mallocs are string-related mallocs
including mallocs in HashMap BaseNode.

svn-id: r22841
"
"061905c524a14398033d447423230df7a10b0be6","2006-06-02 17:57:45+00:00","Plug memory leak

svn-id: r22842
"
"50f12fb9aaba758d97a928bfa0ab197016b40cfe","2006-06-02 20:42:41+00:00","Fix long standing (ahem) c/p error which made impossible to sidable just HQ
scalers.

svn-id: r22843
"
"6ac60c9c7bc39f4e1d9f950d67b4e484220ebc9d","2006-06-02 22:57:02+00:00","Fix for bug # 1497961 ('KYRA1: in-game 'Music' option not working').

svn-id: r22844
"
"97b3b74ea1e5fa0fa82e6c08689a172b0d62c511","2006-06-02 23:01:33+00:00","Oops. sfx should be on per default.

svn-id: r22845
"
"48af506189f0629528444bb88ca7a6f8e957f6d4","2006-06-03 00:30:28+00:00","Fix for bug # 1497965 ('KYRA1: Skipping dialogue requires two clicks').

svn-id: r22848
"
"a681ebad7d4cdb83e976d1afd383ad6c42a04221","2006-06-03 01:05:09+00:00","More maemo port development

svn-id: r22849
"
"61e9bc72e43176c58479124e2a2d82c8989645ef","2006-06-03 03:04:19+00:00","Correct setting of VAR_CHARINC in several functions, the value should only be reversed when using keyboard shortcuts (Due to the scrollbar)

svn-id: r22850
"
"1c07797c50ad93716bb0ce67cb85edadb1bff312","2006-06-03 03:38:24+00:00","Bugfix to properly detect the end of the indexed room hotspot list

svn-id: r22852
"
"93a91f9c6d7bbbd2247565cced3f9c7c7f6426dd","2006-06-03 03:51:17+00:00","Update talkspeed config setting, when set by game scripts

svn-id: r22853
"
"fc26d9b413b6575ccb7be2f77ae2a12f80de0a1e","2006-06-03 04:10:14+00:00","Update talkspeed config setting, when set by game scripts

svn-id: r22854
"
"a1d55df73e773983be9599ff716d1453a1d6ac6e","2006-06-03 08:06:07+00:00","Split ID string into several small strings for systems not coping with large string constants.

svn-id: r22856
"
"2aa31f4bf3f1b0be170c5732dcf7267af24a2cd7","2006-06-03 08:50:41+00:00","Matched the memset in imdFrameUncompressor() to the original asm, that
fixes a small glitch

svn-id: r22857
"
"4b706aca434ac7c2753c3d73bcf4022be0b2cde6","2006-06-03 08:53:10+00:00","Fixing an endian-issue in setVoice()

svn-id: r22858
"
"3114f19d9461037ecea9ef3fd42f65dd4f8357df","2006-06-03 09:43:10+00:00","MPEG player fixes:

* Initialise _frameWidth and _frameHeight to prevent them from being undefined.
* Fix BS2 subtitle positioning. (Fixes bug #1499916)
* In BS2, copy the frame to the backend in 8-bit mode.
* Fix compilation in 8-bit mode.

BS2 subtitles aren't quite right in 8-bit mode, but I expect we want to
re-design things a bit if we ever add DXA cutscenes. We can fix minor details
then.

svn-id: r22859
"
"ca84620745a134b58fb0cb102be2f50c41ca45c8","2006-06-03 10:48:37+00:00","When the screen changes, redraw all dialogs *immediately* rather than waiting
for the main loop to check for _needRedraw. Otherwise subsequent events can
cause widgets to be redrawn before the theme has had a chance to re-open the
dialogs, and this could cause at least the modern theme to crash.

svn-id: r22860
"
"0d51dc4b228c6a48e81b5b9a16a9a25605864408","2006-06-03 11:00:15+00:00","Don't reinvent the wheel, use MSL functions when available for better compatibility and smaller code size

svn-id: r22862
"
"8d42d331c752ed10577bb764f9ca2090ae19e2b6","2006-06-03 11:10:46+00:00","Missing propset

svn-id: r22863
"
"3a78221832188dd42d7f96c884fc20650d982286","2006-06-03 11:14:12+00:00","Fixed calls

svn-id: r22864
"
"6b3b516f9e2cd690e5af34a7307c483494426ac0","2006-06-03 11:16:48+00:00","Added missing functions and fixed saving with AGI engine

svn-id: r22865
"
"ced30c34445409c72dcafd1ac0840f7ab0739ae9","2006-06-03 11:19:41+00:00","Added AGI support

svn-id: r22866
"
"d224f5a6cece26d8d7a033ff0e2b51cd96cc2382","2006-06-03 11:21:39+00:00","Updated palmos FS based on lastest changes to the base class

svn-id: r22867
"
"75af002bd33348d7a8f891fc5e679ed1abae835c","2006-06-03 11:40:31+00:00","Oops

svn-id: r22868
"
"7d5d40774b5100dc58b73c7666ac7e1aec295ef8","2006-06-03 13:24:59+00:00","Add work around for bug in a German Windows 2CD version of FF. Trigger error if video file not found, since they are required by several part of FF

svn-id: r22869
"
"a2894d9a8220414fb8a38e90a455b56507c08132","2006-06-03 13:27:19+00:00","Add comment

svn-id: r22870
"
"5a1eaabceb96533b6ce91c133e221595f3a5fdee","2006-06-03 13:32:53+00:00","Replaced the bogus find(const String &key) method with the proper find(const Key &key) one. Also removed the bogus find(const char *key) (which not only doesn't work correctly for non-string keys, but also usually will be *less* efficient)

svn-id: r22871
"
"50cbb8ca809e7e2d6320e72232b4849180cc6f3e","2006-06-03 13:33:05+00:00","The F1-F8 keyboard shortcuts aren't available in FM-TOWNS version of Zak

svn-id: r22872
"
"76116f36dd946ee49863a356f03eac8a05f22dcb","2006-06-03 13:33:39+00:00","*Loads* of Common::String related optimizations. Woa, *tons* of methods were copying strings needlessly

svn-id: r22873
"
"0e174a8adcb021e57c13298c888b077730c06a8d","2006-06-03 13:39:39+00:00","Really remove HashMap::find(char *)

svn-id: r22874
"
"5d1e4d7f09eb3dc4f0f0f67771ce7dff8b3f6dd8","2006-06-03 13:56:50+00:00","Removed unnecessary typedef

svn-id: r22875
"
"f7810b53a8c94cbd8c59b0a9d641f9765cd6bb93","2006-06-03 14:00:04+00:00","Add credit for Feeble Files source code

svn-id: r22876
"
"576ff326b058eb2156c365e89c035684211f2464","2006-06-03 14:03:08+00:00","Typo

svn-id: r22879
"
"178481f5b72dd7dbc9436e1f354dcfa6fc7c3e05","2006-06-03 14:04:33+00:00","Add credit for Feeble Files source code

svn-id: r22880
"
"2795f743db7e055e717512d376b4a1169b3997dd","2006-06-03 14:05:51+00:00","Cleaned up plugin_dist target, and added target 'spotless'.

svn-id: r22881
"
"51e1438020d427d411c237d1c019340c621399e1","2006-06-03 14:09:04+00:00","Separated the Dreamcast filesystem backend from the POSIX one.

svn-id: r22883
"
"e44e5d9be00771864f2c2760738478c64aab459b","2006-06-03 14:13:37+00:00","Add the new Dreamcast filesystem backend to the build.

svn-id: r22884
"
"cb50b454e7e734309f6c6aee3e58b2a5a743c3bf","2006-06-03 15:01:37+00:00","Use full path in #include guard, to avoid name clashes; also, to declare constants, enum is preferred over #define (causes less hard-to-debug errors)

svn-id: r22885
"
"db709f57f694336fbf6bf7d21f61b5f8c35f099b","2006-06-03 15:07:26+00:00","Cleanup. / Add speed meter for 'operator new'

svn-id: r22887
"
"369e79bfba0fabc743b25a476737147f994c8d4e","2006-06-03 15:13:18+00:00","Implements cmd_fadeEntirePalette, should fix some missing palette fades.

svn-id: r22888
"
"c42e5813af470c210e87660cc0e088be3139898c","2006-06-03 15:18:21+00:00","FilesystemNode() does not create a valid node anymore, specify a path...

svn-id: r22889
"
"2f935da61fba565ca4eabd3ef77e6851ac1f0422","2006-06-03 15:34:48+00:00","Don't try to save settings on the Dreamcast, CD-ROM:s are read only...

svn-id: r22890
"
"d4984908ec74875b227f146071b725171c58cf6a","2006-06-03 15:42:15+00:00","Ignore bogus values of sizeimg in the header sanity check, it will get recomputed anyway.

svn-id: r22891
"
"9b08aefbb318ab1c80f5b4d24a5f0fa741b8996c","2006-06-03 16:00:53+00:00","Added a default icon for savegames.

svn-id: r22892
"
"cbe66f3360d756503277176dd60c0a3ac9050abb","2006-06-03 16:33:42+00:00","Allocate and grow Common::String objects in multiples of 32, and leave at least 16 spare bytes at the end, in case the string grows a little bit.

svn-id: r22896
"
"12838feaa2045eb9e3ec2ea00be0f5caf4c76a3a","2006-06-03 16:55:17+00:00","This is an attempt to set the correct tempo for the Simon 1 DOS music.

svn-id: r22898
"
"680d309a3145a47ce1f845c9048248337e0013ad","2006-06-03 17:21:18+00:00","Updated Simon section.

svn-id: r22899
"
"6cfb416d44b04960b2ddc304641f873a71085a31","2006-06-03 17:58:13+00:00","- Replaces usage of PAKChunk* with PAKChunk for Common::List, should solve some strange MSVC6 warnings/(errors).

svn-id: r22900
"
"2c01a4c9013a92ba340dee6864c7c767da1c699c","2006-06-03 18:23:36+00:00","I completely forgot to gredit Laurent Blume for Solaris x86 build which we
offer.

svn-id: r22901
"
"35e7eacc3f5b9cae731e1edc97d5d9babfe4beb1","2006-06-03 18:30:07+00:00","Changes some char* usage to Common::String.

svn-id: r22902
"
"4a6b2a32761ed1f6715a86105e9ce31ed2e0fe66","2006-06-03 18:34:57+00:00","Fixes visible mouse cursor in the intro with classic theme.

svn-id: r22903
"
"392fe0cad1584a3bd50497599cb5181ce9b2cbb4","2006-06-03 18:38:36+00:00","Don't allow creation of save file when the user quits the game while the intro.

svn-id: r22904
"
"7b2362702fd1dd34f77ecb3bc51dcd7bd73d3653","2006-06-03 19:43:57+00:00","This hack is no longer needed to make the mouse cursor visible on the Kyra 3
main menu.

svn-id: r22905
"
"3e72e5c9e0dcd8d848887fcc1b4a1ba325acd8d1","2006-06-03 22:00:20+00:00","Re-align the launcher version string when the screen changes. It could be
argued that the widget should do this automagically, but in most cases they
should probably keep the same alignment at all resolutions, so this is the
exception that (dis)proves the rule.

svn-id: r22906
"
"8792ab873bad1924007f0bc5153d75909be83121","2006-06-04 00:03:30+00:00","Looping and tempo details in GMF header are used by MIDI sound effects too

svn-id: r22907
"
"2e071b59d6b6295bc0949f4e19f92586828d5b4a","2006-06-04 09:14:07+00:00","When ensureCapacity() does not have an old string to copy, make sure the newly
allocated one is terminated. Hopefully this will keep the SCUMM save dialog
from randomly adding garbage to my savegame names.

svn-id: r22908
"
"45330298efa44f4750bc06514c4d4ebc341ed34e","2006-06-04 11:39:46+00:00","Enable medium quality FM sound for S60V3 devices

svn-id: r22909
"
"c590229796237de2176f7a0983c0183df42bd392","2006-06-04 12:16:12+00:00","Should fix strange palettes in some rooms.

svn-id: r22910
"
"c9a5b180693eb808bc66667028ce7ab07ad3a21b","2006-06-04 12:12:24+00:00","Remove executable bit in lots of files. Usually it is set by stupid Windows
clients when you add new file to CVS repo. No idea if this affects svn.

svn-id: r22911
"
"8b24dc9bdfba6513e77c38303fc49091ad74fde7","2006-06-04 12:30:29+00:00","wrong palettes should be really fixed now.

svn-id: r22912
"
"68cd5456dd8934771c92b4feab61661d7d702f84","2006-06-04 12:38:27+00:00","'They sought it with thimbles, they sought it with care;
They pursued it with forks and hope;
They threatened its life with a railway-share;
They charmed it with smiles and soap.'

Maybe this time the elusive cursor hotspot bugs will finally be fixed, once
and for all. The blitCursor() function now calculates both the real and the
virtual dimensions of the cursor, since they may both be different from the
original dimensions.

svn-id: r22913
"
"a995950508d776edf7e01b528db6614b214ab1aa","2006-06-04 13:13:40+00:00","Fix infinite loop in updateScren() when mouse cursor is not initialized by setMouseCursor().

svn-id: r22914
"
"f57f02482208638d6c29bd740cc3090b993e1312","2006-06-04 15:39:08+00:00","Format the guifont[] data for better readability

svn-id: r22916
"
"b5bc1c82fa1e22091d5cfffa1217348acff8d0b2","2006-06-04 17:24:03+00:00","- Fixed endianness/signess issues
- Added a memset in Video_v2::SpriteUncompressor(), that should have
been there in the first place; this fixes the tree in GOB2's first room
- Fixed ADL delete[]ing

svn-id: r22917
"
"60f19a0f2cc98d7f936d1dd3915b3408b9f262f6","2006-06-04 17:41:49+00:00","Fixes slider drawing.

svn-id: r22918
"
"1db54ac15cea1527d8832482e2f3fd2fb4ec5b4d","2006-06-04 19:44:47+00:00","Small correction to resolution selector. Still not perfect.

svn-id: r22919
"
"30f500272d5fd78a81bd4927e061dda120e8dd04","2006-06-04 20:08:06+00:00","More nitpick changes from Joachim. TeX files are still waiting a major sync.

svn-id: r22920
"
"a8c1dbb50ba1e9d13663fccf4f0efbf1d59b9d2a","2006-06-04 20:20:00+00:00","Another consistency fix from Joachim

svn-id: r22921
"
"d109ac2d655acc83a91d96ada8593bfd4b2abf7a","2006-06-04 20:42:27+00:00","Spellchecks by salty-horse

svn-id: r22922
"
"d47f3a76fb0fd23463d90f592182fb81e4098d24","2006-06-05 00:14:23+00:00","Add trailing slash to getCurrentDirectory if  required. Fixes bug #1500563 - WIN32/SCUMM: Using scummvm.exe targetname  not possible

svn-id: r22923
"
"a2718bc0783bfd0353c81bf6fc9c6b70348d1228","2006-06-05 07:12:28+00:00","Base the width of the SCUMM options dialog, classic theme, on buttonWidth,
rather than hard-coding it. This should fix bug #1500674.

svn-id: r22925
"
"5f3c930fd126355985ab11288084b45da6f72e6e","2006-06-05 07:17:42+00:00","I just realized that by making the classic SCUMM options dialog just one pixel
wider, it matches the old, hard-coded, width for the 1x scaler. How can I
possibly resist something like that? :-)

svn-id: r22926
"
"60e1b8427e8465fdd17a20424f80fab06755576f","2006-06-05 09:30:05+00:00","Cleanup

svn-id: r22927
"
"c0805830eb5f9c9f8221a5c2c5fdc8b032ff2b03","2006-06-05 12:22:51+00:00","Fix various typenames to comply to the ScummVM coding guidelines

svn-id: r22928
"
"110718603ce0d84e53337384b56e884020655d24","2006-06-05 12:29:21+00:00","Fixing some more typenames to comply to the ScummVM coding guidelines

svn-id: r22929
"
"5f76cd0d9eba28b8bba0be970725fbdd2ad7358f","2006-06-05 12:35:33+00:00","cleanup

svn-id: r22930
"
"6daa744187e4838e15890dbba3c839c598a71606","2006-06-05 13:09:51+00:00","Remove debug left over

svn-id: r22931
"
"5e2178833e9f55666e5aac57e62d51281811765f","2006-06-05 14:18:28+00:00","More fixes/reordering from Joachim

svn-id: r22932
"
"ddb9863c395de487409ce145cb15254442e96522","2006-06-05 14:46:34+00:00","Fix detection of some HE games and demos

svn-id: r22933
"
"fd4feeada3ea508aac5f94b23e6d7816c7ec7171","2006-06-05 14:52:57+00:00","Fix detection of updated Spy Fox 1 demo

svn-id: r22934
"
"6d0a06463a56df53571c8a41ff72512d91fb710a","2006-06-05 17:36:08+00:00","Lazily allocate _refCount in class String

svn-id: r22935
"
"0f18020010d36f4dce5e73edc3fd4f87c434e5e1","2006-06-05 17:43:30+00:00","Some more string usage tweaks

svn-id: r22936
"
"61737da11580b495e35097f8f39974132349cd2d","2006-06-05 17:56:27+00:00","Slightly optimize 'getVar(FOO)' usage pattern

svn-id: r22937
"
"f54bf6759fe437400c6115e9d9571f2aa3c62bc4","2006-06-05 19:17:30+00:00","- Added arrow keys emulation
- Ajust mouse simulation so that there is no more hang while moving it

svn-id: r22938
"
"e51d5f3767fcb931d776058f33490e58f360db96","2006-06-05 19:21:51+00:00","- Added arrow keys option
- Hide std palette ootion on ARM devices

svn-id: r22939
"
"61453fa59d3e07b2d035f380fb501958361f0a19","2006-06-05 19:23:16+00:00","- Added AGI engine support

svn-id: r22940
"
"2023505402a0f34d38eed3f01df8319d380f98d4","2006-06-05 19:24:02+00:00","Some minor tweaks to the classic theme's options dialog. The SoundFont and
the paths buttons have the same left margin now.

svn-id: r22941
"
"81e0a00966ef575659211db5f89d8569aa01231e","2006-06-05 19:33:10+00:00","Fixed PalmOS ARM crashes

svn-id: r22942
"
"54c2a055831ec2ef61d039988765c842821c05ea","2006-06-05 19:43:19+00:00","fix latex syntax

svn-id: r22943
"
"9dd02260a6c783d133bacfbdfc9433a56f9ba989","2006-06-05 19:43:44+00:00","removes _selectedMenuItem again.

svn-id: r22944
"
"9e86863a9df43721c6567f23d1640562bcb536ad","2006-06-05 19:47:08+00:00","Updated project file

svn-id: r22945
"
"4297d973040af642ee3c32e993e8f197ce74a08e","2006-06-05 19:47:52+00:00","fix missing html entity

svn-id: r22946
"
"0c00df4d7cfe6c0f22be5c506f0ab02f8f9b9158","2006-06-05 21:36:16+00:00","WIP from Joachim of putting TeX documentation in sync. Please, do not modify.
It does not compile and is not finished, do not fix any errors yet.

svn-id: r22947
"
"ca79b6c2856a5f6432068e54f14c77021a751987","2006-06-06 04:09:32+00:00","Add target for full versions of Blue's Birthday Adventure

svn-id: r22948
"
"04d8cef84806cfff376292e237f706de87396c6b","2006-06-06 04:33:09+00:00","Minor cleanup

svn-id: r22950
"
"c77ad1a24c8b6a78ee7e492bb6825f75f566a00a","2006-06-06 11:07:03+00:00","Rename AdlibInstrument fields

svn-id: r22951
"
"a0e3e208eed304cef0d91a6020978edd60cc0245","2006-06-06 15:38:34+00:00","For the masochists out there,i it is now possible to select the PC Speaker
music driver. There are some other emulation modes, but I'm not sure how they
should be mapped to from our music drivers.

svn-id: r22952
"
"9a46b6047d67b10f47541030ab5b29f0c7449d50","2006-06-06 15:39:58+00:00","Add Russian pajama1 and lost.

svn-id: r22953
"
"bf86b9b022186f8530a3430f6549c4f00350f12c","2006-06-06 15:43:44+00:00","Two segfault and several coding style related fixes

svn-id: r22954
"
"318770280c22788f866b0228b1e6a68f7d1913db","2006-06-06 18:34:03+00:00","What's this?\!

svn-id: r22955
"
"506456d0146fd83c16e117ad2d543bdb828223dd","2006-06-06 19:31:49+00:00","update the CE port to work under 0.9.0 codebase

svn-id: r22956
"
"b28aea19f0dabf149741c0517edaaff1e70561f0","2006-06-06 21:51:28+00:00","Next step of TeX syncing from Joachim

svn-id: r22957
"
"0be61d3d8396693c85952dd6f665e18cfa6dc55e","2006-06-06 21:54:29+00:00","Rename some files from consistency. Courtsey of Joachim Eberhard

svn-id: r22958
"
"9de1d667d8ca4d1e315914b3befc0ee3fb6dd4b8","2006-06-06 21:56:52+00:00","Fix error

svn-id: r22959
"
"39030844ff8d353fcfa6cf95e1ccb9833c6ffe14","2006-06-06 22:09:35+00:00","Mention 'us' language

svn-id: r22960
"
"c9b3e75facb6c47da092bd3da5eab1d0c243e372","2006-06-06 22:10:15+00:00","Fix several formatting problems

svn-id: r22961
"
"dccc0831ccaf599acf3dae061f4799394037b4ef","2006-06-06 22:41:09+00:00","More typo fixes from Joachim

svn-id: r22962
"
"c17bd63f072e42c90ac9d8f2850b0796c8ffaaad","2006-06-06 22:45:16+00:00","%s/CVS/SVN/g

svn-id: r22963
"
"6f8c4250f9260d7c9edee46a5784f9ee2fb87130","2006-06-06 23:57:14+00:00","Move whole theme ini file to evaluator. Next step is caching. Also now it is
possible to use per-resolution gfx and colors, i.e. complete customization.

svn-id: r22964
"
"0525bf54d845b0ef20b78958fd77433ca1694f8f","2006-06-07 00:08:02+00:00","Move Emacs mode variables to bottom of each file and numerous other
formatting fixes. Thanks to Joachim.

svn-id: r22965
"
"16d924b2c79ce8dbc77a50c78aac52fc321d84f1","2006-06-07 00:15:49+00:00","Sync date with reality

svn-id: r22966
"
"e51d7fcc35565ffd52246af22e68913f07a0db02","2006-06-07 02:53:03+00:00","Fix regression with console having wrong font on startup.

svn-id: r22967
"
"6aaafb47ebc10fcc88d9d140bcc5c70eab417160","2006-06-07 02:55:08+00:00","oops. More appropriate place for loading fonts. Avoids loading fonts on
each GUI start

svn-id: r22968
"
"a01d5c139357217c2c3b7a8c485b99de4055fe2b","2006-06-07 06:07:05+00:00","various PS2 changes

svn-id: r22969
"
"de5b81f4854fa3ada2827373966d57a5903df33e","2006-06-07 06:39:45+00:00","various PS2 changes

svn-id: r22970
"
"033803ba533b8a6263c33ef5f2e597dc579a6a48","2006-06-07 06:42:21+00:00","various PS2 changes

svn-id: r22971
"
"939ebbb80d038622f70b59c4a55ee16b8b52e897","2006-06-07 06:51:45+00:00","imported cdvd driver again..

svn-id: r22973
"
"93718ebef945695422242e6bacd0e84954b0b77a","2006-06-07 06:53:41+00:00","updated fs implementation

svn-id: r22974
"
"a4bafca77974b6fc4ad5e1c70dafafdae9a04720","2006-06-07 06:57:46+00:00","forgot to commit this...

svn-id: r22975
"
"36c52873a6ca9c140829b5a1da6a2942222f5181","2006-06-07 07:01:21+00:00","EE RPC part of the cdvd driver...

svn-id: r22976
"
"423cbd8a2e6dd78674991d99d66cce89a723eeac","2006-06-07 09:31:52+00:00","Fix bug #1502021: 'ITE: January 2006 Release menu problem'

svn-id: r22977
"
"d5255cd2ad62bc44194028f991024e0fbf46c7b3","2006-06-07 09:52:44+00:00","Add Russian translations for error messages

svn-id: r22978
"
"34dae22c1a1db184c380f5b30ecde367f0d12485","2006-06-07 18:49:20+00:00","More goblin handling functions, now the deactivated goblin shows
his boredom. It's the wrong goblin that's deactivated, though.
Also, the entering animation is still missing (now nothing is drawn
instead).

svn-id: r22979
"
"60456933e75c2c3cdd436a2198010d59409d332a","2006-06-07 20:35:47+00:00","Proper override for vsnprintf to give proper error messages

svn-id: r22980
"
"119d3dc0e8194e45ec732dd9b79d25820ba48db9","2006-06-07 20:36:17+00:00","Better UIQ3 view support

svn-id: r22981
"
"643bdfc4b13c29dd2c8dbdb57cb7e2e8cbbdcf41","2006-06-07 20:38:09+00:00","Disable AGI support by default in the build

svn-id: r22982
"
"955a7aed38b5bb570d38f5bc40ed8b306155a1a9","2006-06-07 20:38:44+00:00","Changed UID comment for S60V3 id tag

svn-id: r22983
"
"7e65543482be37f16f22131a508e79de92be07ae","2006-06-08 06:53:00+00:00","cleanup, made osystem for .ini on different devices.

svn-id: r22984
"
"cd24b1d91c23cdff3fc9dd15f9feb4d30c4a336c","2006-06-08 08:18:55+00:00","fixed ps2 types.

svn-id: r22985
"
"15aee485ea5fb5f436ffc93341b0bac978f648f7","2006-06-08 19:43:37+00:00","- Removes (obsolete) USE_AUTO_SCALE define
- typo fix

svn-id: r22987
"
"276d754443c28624d657e164ff889a1d910181ec","2006-06-08 19:55:16+00:00","Fix some msvc8 warnings.

svn-id: r22988
"
"6f259eacc73080a85cc03b2e6395c9153d9c8c13","2006-06-08 20:09:46+00:00","- makes gob link again
- makes sure that nasm is able to find the files if the path has some ' ' (space) characters in it.

svn-id: r22989
"
"276b4eef7cf6261a3f8551a019f0bc5eb223d88d","2006-06-08 21:35:12+00:00","- fixes agi release building
- fixes nasm build rule for release building too

svn-id: r22990
"
"f571c471cc08f73b8dfbbabf93738870f600e8b2","2006-06-09 08:06:38+00:00","Add DOS and Macintosh versions of Putt-Putt & Fatty Bear's Activity Pack

svn-id: r22991
"
"763d7ef3fff872627ddb4d0c70eb08c957b62296","2006-06-09 08:10:00+00:00","Ooops, correct order

svn-id: r22993
"
"afe07d82c04331150f190cb789791b212da92362","2006-06-09 09:01:06+00:00","Use convertFilePath for HE6x games too, for safety

svn-id: r22994
"
"64c1e0dd9c5d45959515d682289e76b8d38c1a4b","2006-06-09 19:38:48+00:00","Removed documentation of 'read_only' option. It was an idea that was rejected
years ago, and I'm not sure how it made it into the documentation. I guess no
one ever reads that section. :-)

svn-id: r22995
"
"eca46382d553800c43ec12e5d48299d101bb34be","2006-06-10 07:21:26+00:00","Return proper keynames for Symbian keymapping

svn-id: r22997
"
"5b1aaf4ea01cae2014d54752d9354ae6cc8f6c9c","2006-06-10 07:56:09+00:00","Patch #1503718: 'Strange results from Common::computeCapacity'

svn-id: r22998
"
"c78409da15bf79a69151f640aef914437402f2e6","2006-06-10 08:24:00+00:00","Whitespace

svn-id: r22999
"
"8ef6ff17653e54c8b799bc89350e8d3342849d13","2006-06-10 10:09:40+00:00","This may cut down a little on unnecessary strings / mallocs:

* Only create the self.[xywh] aliases and its variables if prefixedname has no
periods in it, e.g. MusicText.x, but not MusicText.align.x

* Set the .r, .g and .b variables directly, rather than aliasing them through
.x, .y and .w

svn-id: r23000
"
"b9c8981d62ffafad705c69d26a5c26016291fe68","2006-06-10 11:06:05+00:00","added keyboard-emulated mouse cursor

svn-id: r23001
"
"a2651ff7cbc350e84d11694c811beebe1ec64c8d","2006-06-10 11:07:28+00:00","added rotate and virtual keyboard actions

svn-id: r23002
"
"33e6264954ac787430bcd54a773e709ece171a1a","2006-06-10 11:08:34+00:00","new landscape aspect scaler (n0p)

svn-id: r23003
"
"a7a0d522d33d7ad7c336fd0de0ace2cc809235aa","2006-06-10 11:10:05+00:00","added hires aware flag for by-the-book handling of hires devices

svn-id: r23004
"
"fd672ef2e1d202821ca75feadef28d8cb9eab17f","2006-06-10 11:16:43+00:00","fixed code regression to pre 0.8.2, panel, clipping, overlay fixes, support for new actions, new scaler, toolbar mouse, inverse landscape and double-tap -> right click

svn-id: r23005
"
"3b4416bb37ff366de0794ad476f4c98a7c3da11b","2006-06-10 11:23:00+00:00","added multiple state support

svn-id: r23006
"
"a6a98c0009a9b8c16680db289fd453bff27d8447","2006-06-10 11:23:40+00:00","fixed hashmap use

svn-id: r23007
"
"92ad46734c2b98f70f3baaf70603e3e5ffde120d","2006-06-10 11:26:47+00:00","added CE port definitions section

svn-id: r23008
"
"fa7e76034d4744178dfc6c35149709d55302ef25","2006-06-10 11:31:50+00:00","added myself to the CE port team :)

svn-id: r23009
"
"db3a66569dc2241e685f62cd6fa239c34f9b8f74","2006-06-10 12:05:27+00:00","Update prefix filters for subtitles in HE80+ games

svn-id: r23010
"
"f5fdbcddfb54510ef9f44e4f57d68d84f9055757","2006-06-10 13:20:29+00:00","Pop AGIs text.cpp into a class, for later cleanup.

svn-id: r23011
"
"897fa6a5a64a3424ae4ea83b1c7cad77ac7e8200","2006-06-10 14:37:48+00:00","More stub-filling + small clean-up

svn-id: r23012
"
"f29a09a35f144b1951f48bd88d664d71afacce9f","2006-06-10 17:36:57+00:00","fixes ps2 stuff I broke

svn-id: r23013
"
"a563efff1e4a570733f76c60a2942c4cf2bca982","2006-06-10 18:11:34+00:00","added knakos to CE port

svn-id: r23014
"
"55a13866a430811c8e8731d4ae03b25cc171a4ad","2006-06-10 20:30:21+00:00","Symbian port build updates for S60V3 and UIQ3

svn-id: r23015
"
"b495cd44b3de5ff254d696a23d80a7360712aa2e","2006-06-10 20:31:20+00:00","Specific resource file used for UIQ3

svn-id: r23016
"
"44fc26a907ed5837e2be6c84574ba5dd9d2d1e87","2006-06-10 21:17:26+00:00","removed GUI::Actions::init() now that noone uses it.

svn-id: r23017
"
"4adb798232f9f2b2a0c6e05cb0dfb7f05a7aa511","2006-06-10 22:26:46+00:00","fix CE port

svn-id: r23018
"
"0aa06392f8e60dde611aaa424eb4cea226b091b8","2006-06-11 02:23:17+00:00","Applied the patch included in bug rep [ 1503716 ] Leak in File::Open (on OS X) and unzOpen (on all)

svn-id: r23019
"
"5fc44412ac7b7be2aa7702a9559a51860586a8f1","2006-06-11 06:32:54+00:00","Add back lost change, to allow FF to skip any speech

svn-id: r23020
"
"990ff8f0cc0f009f8a9d2329dd32aa034789fc2a","2006-06-11 08:34:56+00:00","correctly load configuration at startup

svn-id: r23021
"
"6897e0633334e5573d1b4c959d60528795470418","2006-06-11 10:08:53+00:00","Rename filesystem file.

svn-id: r23022
"
"119a0192e1ed335062dfa394c3f36ae367692d31","2006-06-11 10:23:41+00:00","* Move gp32-fs.cpp to fs/gp32 dir.
* Fix gp32 launcher code.

svn-id: r23023
"
"8acb3f9e88263cc7382695b392bdbef78fe47e9f","2006-06-11 11:04:42+00:00","Sync credits

svn-id: r23024
"
"d8e25897d3d598e6d940fe6d9e1d40a39f7ed32a","2006-06-11 11:10:40+00:00","Add Joachim as documentation writer

svn-id: r23025
"
"4324e38f7c7671a570ce29cfe72b4b329ce24914","2006-06-11 12:15:03+00:00","Playstation -> PlayStation

svn-id: r23026
"
"4549a61060ced2bbb0bc4f887bf05059df41eda3","2006-06-11 14:21:46+00:00","Removed actions.h include for symbian build. Not needed anymore.

svn-id: r23027
"
"079e72eafc05cb8112ba618ed5eb222bff33445d","2006-06-11 16:59:59+00:00","I don't have the German FF version with the wrong cutscene file names, but I
believe we need to adjust baseName as well, so that we can use an equally wrong
(i.e. right) name for opening the audio track.

svn-id: r23028
"
"c5f20f176463a8fe17a120dbb2436141df9a0b4b","2006-06-11 20:24:14+00:00","updated the CE project files for the 0.9.0 codebase

svn-id: r23029
"
"fd7e9847fcfa79fe8a76f97b720956a59b91d8c2","2006-06-11 20:29:07+00:00","Removed commented-out subtitles-related code. Requested by salty-horse.

svn-id: r23030
"
"de95d463a8c091ea55a8ae8166fb447a9f56a195","2006-06-11 20:30:43+00:00","Support of new subtitles code. Patch from salty-horse.

svn-id: r23031
"
"62e286c30f8d2f9f2a55ed5741c805e43fc11867","2006-06-11 20:40:22+00:00","Patch from bugreport #1502409: 'Search ScummVM directory for GUI theme'.
It adds theme patch setting to GUI.

svn-id: r23032
"
"4867a75918d11d19eec59d955109455cb4a36432","2006-06-11 20:51:14+00:00","Patch #1336171: 'MIDI gain setting for FluidSynth' with slight modifications
of PSP theme to fit new slider into MIDI tab.

svn-id: r23033
"
"0be035e47079290141171ca4cfc97b61d736d847","2006-06-11 21:26:43+00:00","Re-calculate the label width for EditGameDialog's language and platform pop-ups
when the screen changes.

svn-id: r23034
"
"4876c8a2be28c00719ec1464de3a7d5e38c3631f","2006-06-11 21:34:25+00:00","Whitespace.

svn-id: r23035
"
"9b2e92b686bdb7fb697e4fd502fee6571a936b11","2006-06-11 21:41:04+00:00","Patch from bugreport #1503715: 'Quit should clear domain'

svn-id: r23036
"
"3e42e4a60156bc735a960c3982406ec1e53a4016","2006-06-11 21:43:09+00:00","Re-calculate tab width when the screen changes.

svn-id: r23037
"
"8179a5087ef028838645209f16a62d53c9962eee","2006-06-11 22:35:53+00:00","sync

svn-id: r23042
"
"2b14ff7dfd5230b8ae30b8c984e43a7427331f30","2006-06-11 22:42:11+00:00","sync

svn-id: r23044
"
"e12c757d8f31a028e9e1aa5f93f5e5fc9b76551d","2006-06-11 23:34:37+00:00","Disable gob2 in 0.9.0

svn-id: r23045
"
"a49679aa40b01bfcbac72babcb2f9a7b11a8a23d","2006-06-11 23:36:05+00:00","Disable IHNM in 0.9.0

svn-id: r23046
"
"523dce95accc5f928fdc9b420cdfbae51573fad1","2006-06-11 23:39:21+00:00","Disable kura2 and kyra3 in 0.9.x

svn-id: r23047
"
"8ef9748759711ba77414cb026a10dfd9aabc179c","2006-06-12 00:10:12+00:00","This becomes 0.9.0pre

svn-id: r23048
"
"ee3c5068166b99944afbcad713644c6fd618e088","2006-06-12 00:47:33+00:00","Correct function called when exiting oracle or close up scene in FF. Fixes bug #1504393 - FF: Recursion error when using Chemistry Set

svn-id: r23051
"
"790e1e6297432f7f6ac33dd5e0979592da43a0b3","2006-06-12 05:59:53+00:00","Fix errors in centreScroll() of FF

svn-id: r23052
"
"bfa91c5340a773209f71b7f36e001569fb43bc26","2006-06-12 06:47:33+00:00","Fix bug #1500552 - FF: Glitches in Swamp Soup game of arcade

svn-id: r23054
"
"45e5f1dffe5ac7393c55de37a8ce7d413eb4892a","2006-06-12 08:44:31+00:00","Backported widget spacing fix from trunk.

svn-id: r23059
"
"326e4eb82665058a476040d0cce01f99f4f4d3b9","2006-06-12 13:54:07+00:00","Commenting out all Gob2 related warnings

svn-id: r23061
"
"226f20a601913485f83ef925f558872b96df7259","2006-06-12 21:33:30+00:00","Fixing loading of Scenery::_animations[]

svn-id: r23065
"
"a3c19efcb5336dd37ae8661fc4389b35cce9b811","2006-06-12 22:21:10+00:00","Using MemoryReadStream for Scenery::loadAnim()

svn-id: r23074
"
"630cc8964f0b12da5d12ca0a916e721ca6270db1","2006-06-13 03:59:31+00:00","Add another version of SoccerMLS

svn-id: r23075
"
"9e28a0298d5b83e68c4dbb376a47e9d51638b8cb","2006-06-13 08:10:54+00:00","Fixing Scenery::_statics, Game::_totTextData and Game::_totResourceTable

svn-id: r23079
"
"4f02e47f43e0402ff2bc9350dc36cd516be1a062","2006-06-13 09:32:47+00:00","Let the [cursor] palettet manager handle disableCursorPalette(), too, to avoid
cursor glitch in at least some HE games.

svn-id: r23080
"
"942a52057cb3cbbd2d0fcd7775b0e8828eaf8743","2006-06-13 10:02:56+00:00","Disable the theme before restoring the cursor, not afterwards. (Fixes cursor
glitch, at least on slower systems.)

svn-id: r23083
"
"15a176f255c5fabe32cdeb5aadd0376d65d77de0","2006-06-13 10:11:20+00:00","Removed printf() debug message.

svn-id: r23084
"
"d441bb4f6a02c2c14db54ef2c260dec9f493e1a7","2006-06-13 17:02:53+00:00","More READ_LE_* -> MemoryReadStream conversion + minor cleanup

svn-id: r23088
"
"af856cfee7b495b11c8d3a4bb600c514112b3a94","2006-06-13 18:26:09+00:00","sync fixing credits.

svn-id: r23091
"
"12fd917fedbb295289390da3f2a9096238fb3fff","2006-06-13 18:36:10+00:00","Sync credits changes.

svn-id: r23095
"
"61ac5160653b5de027c7c395b94fb7d4b172c9dc","2006-06-13 18:40:35+00:00","Backported fix for temporarily wrong cursor hotspot in HE games.

svn-id: r23098
"
"3069132ac9681f2dacef5151d9f374beab670299","2006-06-13 19:15:07+00:00","Some more READ_LE_* -> MemoryReadStream.* conversions

svn-id: r23100
"
"e90293a263dfb21812660536e58364764fc5571d","2006-06-14 11:30:55+00:00","fixes compile with msvc8

svn-id: r23103
"
"541b7a75614b5663e6853c7695d99bb2ad548d74","2006-06-14 12:22:28+00:00","Fix the shadow glitches in HE98 version of puttrace, the shadow mode isn't reset in HE90-98 games.

svn-id: r23105
"
"fad689beffbf171e1e97adeaf6c590ffc9804cff","2006-06-14 16:40:57+00:00","Implements new Tab drawing for modern theme (nearlly matches mockups now).

svn-id: r23107
"
"2c5f312e4ed052469ece09ce29040d43239de2fa","2006-06-14 19:33:17+00:00","Added --themepath option, and documented (very briefly) the --gui-theme option.

svn-id: r23109
"
"ff8fd3fb1237ddcab3023cab6783169041ec5c8a","2006-06-14 19:44:22+00:00","Should fix --debugflags for all engines which set up the debug flags in Engine::init.

svn-id: r23111
"
"fc0666bd8780acb3f9e3b144df04928a3b70dfce","2006-06-14 22:57:49+00:00","Backported FF cursor hotspot fixes, to make the tile puzzle more bearable.

svn-id: r23115
"
"2138a41ec57bddf9e81c4b18c5f3ba0594ce7fec","2006-06-15 02:20:26+00:00","Sync tabs drawing changes.

svn-id: r23117
"
"8b59cf85ec2bae0b9a8c8fdcbe2f516e20975a73","2006-06-15 02:33:27+00:00","Sync tabs inconsistency fixes with trunk.

svn-id: r23119
"
"0936dd03f0520b7e8ef0147a5dc836c44d3194f5","2006-06-15 02:54:52+00:00","Smaller versions of cursor and checkbox for 320xY resolution

svn-id: r23121
"
"b0368860467ef18fbd5504b61a4c776841815ff4","2006-06-15 08:09:35+00:00","Delete the old cursor buffer before allocating a new one. If the theme is
enabled by the time it's refreshed, replace the cursor.

svn-id: r23123
"
"ed2bfeb237cdfdaf5834d027c9c8cc974a16908c","2006-06-15 10:17:54+00:00","Remove error for default case of active case 6/8 in akos_increaseAnim(), a default case is normal in original games. Fixes bug #1506017 - HE Pajama Sam 1: ERROR while tralking to snotty trees.

svn-id: r23124
"
"ef92ff536f3b43c34e3927066f6aba5787bd79e2","2006-06-15 12:04:44+00:00","Fixed regression with the override checkboxes in the 'Edit game' dialog. The
checkbox's command message was being intercepted by the tab widget.

svn-id: r23127
"
"a99e0b68fe6fd3281c7313decd6f9c8678215a87","2006-06-15 12:12:31+00:00","Fix bug with tab navigation buttons jumping on resolution change.

svn-id: r23129
"
"85836856f2da29d07a82fea650fa9ee117392309","2006-06-15 13:21:28+00:00","Sync GUI changes

svn-id: r23131
"
"71875acd02810133127648ab2ecced9f479c82c0","2006-06-15 13:56:10+00:00","Made the body of the tab widgets taller. This makes no visual difference, but
allows us to use the bottommost widgets on some tabs, even in 640x400 mode.

svn-id: r23133
"
"9b442408c20783c43316b4958b8b6379f9c8f65d","2006-06-15 14:28:19+00:00","- Adds 'THEME_HINT_NO_BACKGROUND_RESTORE' for buttons which don't want restored background (example: the tab scrolling buttons).
- Call _theme->drawAll() at the end of the redraw method of NewGui

svn-id: r23135
"
"673dd4ce5dfd320f78d19b86dee610c329e712e5","2006-06-15 21:37:23+00:00","Updated pkg files to 0.90 version id. Added user certificate/key valid until next year for S60V3

svn-id: r23140
"
"0244c15b356d086998c85d2789af193866824fe1","2006-06-16 06:26:40+00:00","Backported possible fix for strange pop-up widget behaviour.

svn-id: r23142
"
"790d58950132eed649ea1c75439c74014b433030","2006-06-16 11:30:23+00:00","Adjust akos code to only draw within bounds in HE games. Fixes many graphical glitches in HE games.

svn-id: r23144
"
"654f29cc6da0082eb1417c1a33f094600a8c9007","2006-06-16 13:16:11+00:00","Fix rects in HE games, when positions are set by scripts

svn-id: r23147
"
"5525a7aaad2257c7367c2adb57adc7b93f4955f8","2006-06-16 19:35:32+00:00","Backport fix for #1507216: 'ITE: 15 second freeze in Prince's bedroom'

svn-id: r23150
"
"413f6ce9f2c18e92a1368c7dc85bf88b49034685","2006-06-16 22:19:45+00:00","Remove _name.clear(); from Close since same File instance is re-opened by Symbian using that filename.

svn-id: r23151
"
"c822900cf782e3911955c51405dd02a36c8c831f","2006-06-17 05:51:54+00:00","Limit vm.numNestedScripts to positive value, when subtracting slot in runScriptNested(). Fixes restart, after ending sequence in freddi4

svn-id: r23154
"
"53c1ab9f3af3d386d25c513bab44cb630c70350f","2006-06-17 06:27:33+00:00","Fix the buttons of paintings and safe in Nogroom of spyfox

svn-id: r23155
"
"c7f72469c58b9f35dba412348eddb3c0a839c046","2006-06-17 07:54:18+00:00","Fixed Smushplayer for Symbian OS.__SYMBIAN32__ was defined as __SYMBIA32__.

svn-id: r23158
"
"7fb50c4fae001fb466ac6fcdf11f48f35ea1484b","2006-06-17 15:59:42+00:00","Backported possible fix for hard-to-reproduce crash on exit.

svn-id: r23160
"
"a78cbfb9382adab12c6d9750e98a93fc580be686","2006-06-18 06:24:56+00:00","Added missing (but unimportant) breaks to switch default cases.

svn-id: r23162
"
"7d6163d3ed9ac49a52f6e95622221f7467340507","2006-06-18 07:31:24+00:00","Add Blue's Clues games

svn-id: r23164
"
"bf6b4e43f34a6face0ab90d55a7e2758940a208d","2006-06-18 10:08:35+00:00","Updated comments to correspond with recent Adlib renamings.

svn-id: r23167
"
"60645c8c974be3895f1024b8bb324a5f3fc5802d","2006-06-18 10:38:24+00:00","Makes sure updateScreen() is called once in a while in the menu polling loop, to give backends some drawing time for virtual keyboards etc

svn-id: r23168
"
"77c4926e539c972513fdc7e2d499f6eb800a1455","2006-06-18 10:46:22+00:00","Add alternative method to prevent debug code of scripts been triggered in lost. Fixes regressions when convertFilePath() is used by some HE games

svn-id: r23170
"
"8245b5620f633f42134b5b827136ad689bbd18f5","2006-06-19 04:12:16+00:00","Fix screen scrolling glitch when looking at the top of closet in parents room of DOS version of fbear

svn-id: r23175
"
"03eb41427d774a49c46887d2fe36214f4ded6c67","2006-06-19 07:44:41+00:00","Add patch for bug #1507856 - INDY3 VGA: Crashes in Sewer

svn-id: r23176
"
"0217621d0758144287a341ef1b586c9fa371df9b","2006-06-19 10:12:28+00:00","Fix sentence line regression in C64 maniac

svn-id: r23178
"
"16fbf04e87832506d7fafc9b8fee4e5dcf726701","2006-06-19 10:31:09+00:00","Fix inventory colors regression in C64 maniac

svn-id: r23181
"
"3cf96a0806ac22c98b672c5bf9c48413bd1e0d03","2006-06-19 21:06:57+00:00","Added assert for audio allocation since failure causes serious problems

svn-id: r23182
"
"2e20d8851412e8743ebdb3704970540cf8fb9462","2006-06-19 22:20:20+00:00","Added note about the need of setting platform to Macintosh for HE Mac games.

svn-id: r23186
"
"01494a5d035aa0b157e32f30f49f4876986024f5","2006-06-20 11:37:12+00:00","Disabled serial for release.

svn-id: r23187
"
"fe02b288acef01207c83961d704af634d69faca0","2006-06-20 17:52:55+00:00","kyra engine support

svn-id: r23189
"
"201a5a441ac90767fe787955325e4976b6593b3a","2006-06-20 17:53:41+00:00","fix typo

svn-id: r23190
"
"8245f7763779261447acc5fd8b08a3a38b2f5885","2006-06-20 18:03:43+00:00","fix vga device overlays and invalid mouse cursor calls

svn-id: r23193
"
"d2666083205511cad04f7c381ab3b64b26c47adc","2006-06-20 18:24:54+00:00","Removes usage of Common::File::exists since it's bugged in the WinCE port.

svn-id: r23195
"
"c9ebcd525c553ef63bf054748d86827b1e0bea8f","2006-06-20 18:25:39+00:00","Oops c&p is bad sometimes...

svn-id: r23196
"
"72e59ff10d29eae455164d0a6c5c556813bcf187","2006-06-20 18:26:40+00:00","ok should work now...

svn-id: r23197
"
"748695a46829c87a4918970b1296fcd5a6eae300","2006-06-20 19:41:39+00:00","updated the readme for 0.9.0 release

svn-id: r23199
"
"26f73e055f9c3c7301bcb7df8b3bc6dd4f948829","2006-06-20 19:47:34+00:00","added CE port news for 0.9.0

svn-id: r23201
"
"62bfe0e8389e0668f44135f22cdfe58090062365","2006-06-20 21:13:23+00:00","Disable Cine, Lure and AGI engines for 0.9.0.

svn-id: r23203
"
"95d8b6d593b0c4499d26aeb787783f50970267b7","2006-06-20 21:36:20+00:00","Applied my own patch #1508018. Imrpves some Adlib sound effects in early games.

svn-id: r23205
"
"504b32bd99e26350ca8d6bfc81bc0f46a269cca4","2006-06-20 21:58:19+00:00","Disable Cine, Lure and AGI engines for 0.9.0.

svn-id: r23206
"
"3e30549f4ee334f5af30e0fd7d80b952a36ea63a","2006-06-20 22:00:14+00:00","update version string

svn-id: r23207
"
"448bed47b05cbff293430890bf31ba068bde22f3","2006-06-20 22:52:01+00:00","Backported fixes for bug #1276480, 'GUI: Accented characters'.

svn-id: r23209
"
"34e3ad53dddf3a53d967fe6e39379dde9f16f6d0","2006-06-21 00:19:05+00:00","Fixed warning.

svn-id: r23211
"
"bdf6f59f178fba18c25f8ed7c24fcbf2d02cf9a4","2006-06-21 06:18:40+00:00","Initialise the control panel's _mouseX / _mouseY. Fixes a Valgrind warning.

svn-id: r23213
"
"16d38f90f423f6b32e731c38ecebed409abd8c10","2006-06-21 06:58:22+00:00","Revert back to original method used for scrollEffect(), fixes regressions.

svn-id: r23215
"
"b697ad4651d6276a5eda2d641f796e67fa241a0e","2006-06-21 11:31:31+00:00","Add eriktorbjorn's patch for bug #1507757 - BASS: Odd press sound at beginning

svn-id: r23217
"
"ff95110415939ee62411b6e60cfcd0eff215e0b9","2006-06-21 12:32:18+00:00","Add back auto detection of Macintosh platform for HE games

svn-id: r23220
"
"0c5da3cf7634a5a97a24245cfefce08be8a5bd5b","2006-06-21 13:18:40+00:00","Update docs for FF

svn-id: r23222
"
"0294ae601354c8d5d81e8718f862cbec8a656e2c","2006-06-21 13:22:24+00:00","Typo

svn-id: r23225
"
"91150299169d903c4dd38fc7d060a52b7bc73c80","2006-06-21 13:45:31+00:00","Set version to 0.9.0 and set release date.

svn-id: r23226
"
"7ca843f62fc1a85783287729509ba9e397e491f6","2006-06-21 13:58:54+00:00","Remove duplicate left over

svn-id: r23227
"
"095275c47e59bb8d43dc4f1ca7a0519084e959d7","2006-06-21 14:03:12+00:00","Typo

svn-id: r23230
"
"71ca7853fc45832c49e61ce8027a0a5e7387f886","2006-06-21 14:17:45+00:00","Correct line to 80 chars

svn-id: r23232
"
"cc918330016857a1618a7a7f2e5f791a037d72a2","2006-06-21 15:06:16+00:00","Backported fix for bug #1181865. Should be completely safe for 0.9.0 since the
function that's modified is only ever used when examining inventory items.

svn-id: r23234
"
"26916ef5630f948d21f2253b1e47c805b1cf98a5","2006-06-21 20:43:23+00:00","Update date

svn-id: r23235
"
"3e8f67b0ee240e9b27e27764160c013e605b82f9","2006-06-21 20:48:17+00:00","update version, targets

svn-id: r23236
"
"fe2bb2c0d651fa2eec927673a66da4437b54ff16","2006-06-21 20:49:59+00:00","Update description

svn-id: r23237
"
"d2375932b4ff0dc4380f0c6a55880caa0ebfc947","2006-06-21 20:52:09+00:00","Sync

svn-id: r23238
"
"4b0cb37d41177d741b9bd4f136e4975a5f36bf59","2006-06-21 20:53:47+00:00","fix spec

svn-id: r23240
"
"7dd39d07874097f941dbb1ba2c799128bb291ac8","2006-06-21 20:57:40+00:00","add compress_kyra

svn-id: r23241
"
"38ac9ab358912d9249910faa6f5cbf339504a9c0","2006-06-21 21:03:16+00:00","add encode_dxa

svn-id: r23242
"
"f45fcd7c19f9d63e2a44bbee7f4c8e2139344603","2006-06-21 21:40:58+00:00","Commits fix for crashing about dialog mentioned my Marucs on -devel.

svn-id: r23249
"
"b10284724f3cb9ead1e7e50f351a5d0543a13fd0","2006-06-21 22:28:41+00:00","Deletes checks added with my last commit they are useless as wjp and I got out after a few checks.

svn-id: r23252
"
