"commit id","commit date","commit message"
"26913c30574c688a4761714a973bee684bfc1b7c","2007-12-28 07:28:16+00:00","Bumping version to 0.12.0svn

svn-id: r30030
"
"d4d072fe0484918b6caf4571b933a9b374177e5b","2007-12-28 07:37:04+00:00","Patch #1857121: Refactoring of the getSavePath method

svn-id: r30032
"
"ef319ad6745678275a4c5eb159d6d95fdf17649f","2007-12-28 07:43:52+00:00","Patch #1859448: Add OSystem::getTimeAndDate API

svn-id: r30034
"
"67a49e712a4b3df9c6373174c20dfcc6308935e6","2007-12-28 07:45:22+00:00","Bugfix for string decoding to use the article of the destination character rather than the talking character

svn-id: r30036
"
"ae06d5337e80503d25c58cd9475bd8a45a87f48d","2007-12-28 07:46:21+00:00","Bugfix to correctly display a message when a used item is no longer in the room

svn-id: r30037
"
"ac54f3a26f5ebe1b1f7af03ebe1b6872ebe64703","2007-12-28 07:52:56+00:00","Patch #1858158: BUILD: Plugin building cleanup

svn-id: r30041
"
"90e4327a4a89354e5cdaaa5df874dfda63145e1a","2007-12-28 08:43:31+00:00","Added missing files from patch #1858158.

svn-id: r30043
"
"8464150d4299531b4f08f7aff8123e023a2d71f9","2007-12-28 10:00:54+00:00","Get rid of PSP / PalmOS hacks in DefaultSaveFileManager::getSavePath

svn-id: r30046
"
"4d7e49ddb8a082f5da7ab7d2d0b8425c5a3e09cc","2007-12-28 11:07:35+00:00","Fix to prevent the F5 key allowing the game to be saved during player conversations or viewing a remote room

svn-id: r30048
"
"0d350e1d4d20a4a0d68139b6a5d8ed1be2692415","2007-12-28 11:39:09+00:00","Fixed compilation.

svn-id: r30050
"
"ceda04f8b965cb80bdbc42932636bac302fbbcfe","2007-12-28 11:51:04+00:00","Updated the OS X bundle creation to point to the new location for the engine data files, and added lure.dat as well (forward-port)

svn-id: r30052
"
"a9813fbdfaec50fc6e1d154c4b0d9280ece6411b","2007-12-28 12:07:10+00:00","Add another German version of Freddi Fish 2 (Windows).

svn-id: r30054
"
"a31bd32bc59e7ffab62143ec44801b6256483c88","2007-12-28 16:47:28+00:00","Change the checkPath() method to receive a String& instead of a char*, to make code clearer.

svn-id: r30060
"
"55b6ee3982ddc07797b26df7527bd438255566a5","2007-12-28 21:12:30+00:00","Modify DFSM::getSavePath to return a Common::String instead of a char*

svn-id: r30061
"
"16b610068db2a67e5ce0b156df87e0a4df23373b","2007-12-28 22:56:22+00:00","Fix for correct dialog sequence when giving an object to an arbitrary NPC

svn-id: r30063
"
"52dc147f8c950007e8b49c0e130e256ef5520af8","2007-12-29 00:31:15+00:00","Added mouse scrolling support to action menus and the save/restore dialog

svn-id: r30065
"
"a54f9c311a7b981234822e558ca008a130eb4de8","2007-12-29 04:25:26+00:00","Fix to ensure any active conversation data or selected hotspot is cleared when restoring or restarting a game

svn-id: r30066
"
"806ac51e45acd1997ef87f7e7824ecf6b4f8ec64","2007-12-29 09:48:49+00:00","Added events for the middle mouse button - EVENT_MBUTTONDOWN and EVENT_MBUTTONUP

svn-id: r30068
"
"59b56552665fe23b3c3daf236e94e391c20f757d","2007-12-29 09:50:20+00:00","Added access property for middle mouse button

svn-id: r30069
"
"99dfb8bcbc03ba54f9693e03ce7e0ffe7a9e1380","2007-12-29 09:51:25+00:00","Added support for using scroll wheel for making selections in the Save/Restore dialog and action lists

svn-id: r30070
"
"2c5ae92b4cac3e86da4e8721ca90c8350bf348b6","2007-12-29 10:38:30+00:00","Added ability for both middle and right mouse buttons to abort a conversation when waiting for user to select a conversation option from a list of topics

svn-id: r30071
"
"6a81b7d4726ce2f5858c1729d0bec9a9e0771c36","2007-12-29 12:03:30+00:00","Update MSVC8 and MSVC9 project files for patch #1858158

svn-id: r30072
"
"32e2f9e8f3ed728755187bf2a3d04542deec7857","2007-12-29 14:11:12+00:00","Fixed warning when DISABLE_SCALERS is defined.

svn-id: r30074
"
"f85a0fd6e0b363bffd499ffad88a835abc8f8af4","2007-12-29 18:27:11+00:00","Patch for MSVC71 projects. Thanks to Quietust

svn-id: r30075
"
"9f611ae66d06e94fc2df9a1a96c7c7bf65d659de","2007-12-30 00:00:03+00:00","Clarify SaveFileManager::listSavefiles usage

svn-id: r30077
"
"0d3092689b6134671ec8ad1ec767bced43a32333","2007-12-30 09:37:35+00:00","Updated all MSVC project files to use the standard windows-1252 codepage, instead of windows-1250 and windows-1251

svn-id: r30078
"
"c54562d9a3fbcc6bc2249e7e36a92ead78165653","2007-12-30 13:05:38+00:00","The PS2, DS and PalmOS ports currently do not properly implement their SaveFileManagers -- flagging the incorrect & invalid code by making it not compile. Note: Portser should probably also fix their code in the 0.11 branch

svn-id: r30079
"
"b9a5e9ea0eae3cf61525361ebbdfac279a8f9361","2007-12-30 16:32:30+00:00","Fix for bug #1635361: COMI: Music fade-out broken for compressed audio

svn-id: r30081
"
"22cfa5660645f3310ec9d8902dd1b9e432302cdf","2007-12-30 17:15:11+00:00","implement new gettimeanddate method - fixes bug 1834822 WINCE: Save games have incorrect time & date

svn-id: r30083
"
"3d462195925a6bda4faac8ff340c8f425a8766c3","2007-12-30 17:58:22+00:00","Patch #1689516: BASS: Update the cursor when right-clicking in inventory

svn-id: r30085
"
"2d61551e1c9a9021adb506df18dac6bacc9c7617","2007-12-30 21:59:50+00:00","atrib -> attrib; added some FIXME comments

svn-id: r30086
"
"1489235f8e86ef9b17061a50fcfddd31c4ec86c9","2007-12-30 22:10:24+00:00","Ooops, this was not supposed to be commited

svn-id: r30087
"
"41f29f0504e3a5c797d48c2af823878e0b04dcc9","2007-12-30 22:22:38+00:00","Draw subtitles over the verb coin in CoMI, not under. This is noticeable early
in the game, when Murray is talking to himself. I've verified this against the
behaviour of the original interpreter. (Should this go into 0.11 as well?)

svn-id: r30088
"
"b65cc2904aebe7e95bd9fdeeea0f51593a84598f","2007-12-31 00:22:37+00:00","Added support for landscape mode in addition to the upside-down landscape mode we already had, and a few minor optimizations

svn-id: r30090
"
"a38fa007bb0f2e82435b290e70b831a7ddf180dd","2007-12-31 01:20:24+00:00","I thought only Full Throttle used the VAR_BLAST_ABOVE_TEXT variable, but I see
now that it's defined for v8 games as well, so call processUpperActors() from
that case too, just to be safe.

svn-id: r30091
"
"1c88ab2c47ff5f4ec80df2ba029b81642e28dfca","2007-12-31 01:50:18+00:00","Enabling the SMUSH/sound ARM optimizations for the iPhone. Converting any numerical expressions in the asm to absolute values (moving the expression to comments) since the iPhone assembler can't handle them, and prepending an underscore to the exported symbols (with some preprocessor magic similar to the hq3x asm for handle ports where it's not needed)

svn-id: r30093
"
"d45fe1e37e6187a14e5708b3117575b3e08b6dba","2007-12-31 05:55:20+00:00","Added detection for Italian EGA version

svn-id: r30094
"
"abd3f453592de6c8be59364801998a79f16f0729","2007-12-31 05:56:22+00:00","Added code to support reading .ega files

svn-id: r30095
"
"ccc822fd1c6e0bc0dd3a04ba04c0fa521aeca7a7","2007-12-31 05:57:11+00:00","Added support for decoding EGA screens

svn-id: r30096
"
"1dd2e32fc0c402b4c0f2a097d6ce3b55eb09017f","2007-12-31 05:58:22+00:00","Added extra palette handling for EGA palettes

svn-id: r30097
"
"1804ae6639a01ca25db7fe2cfc54d6608522dd7d","2007-12-31 05:59:58+00:00","Added code to handle EGA title screens being immediately shown rather than faded in

svn-id: r30098
"
"fd136613175328085536df0ad98936a3b4f51152","2007-12-31 11:30:02+00:00","Mention that Nippon Safes Amiga is now supported.

svn-id: r30099
"
"a826cd36dd39aa4a0195f827b098279f5113efc7","2007-12-31 13:05:32+00:00","cleanup

svn-id: r30102
"
"08020444f68228f03f9dd36aea72fea4bdfe6338","2007-12-31 13:26:29+00:00","verified differences in play music code of the dig and comi

svn-id: r30103
"
"10686b04ab1dfa86ca5cb8ed35d52fe18476cf0b","2007-12-31 13:37:14+00:00","Bugfix to data position start in vga decoder, and made ega/vga decoder methods public visibility

svn-id: r30104
"
"65ffe2bcee21345da18222db53f1d7f5da8e9ae5","2007-12-31 14:45:38+00:00","Add to AdvancedDetector possibility to use field 'extra' in ADGameDescription
to be used as a hint.

svn-id: r30105
"
"b87b0f21f0e874f1d668a248139e173b6509c13f","2007-12-31 14:46:37+00:00","Used new AdvancedDetector flag to distinguish between EGA and VGA versions
of italian Lure when their datafiles sit in same directory.

svn-id: r30106
"
"be11104d7056c41d4c326c6762162a1c7e64dfd2","2007-12-31 16:34:30+00:00","Removed obsolete _insaneRunning flag

svn-id: r30107
"
"a8d3967f63f51c77b8a934ec05b09803185afa12","2007-12-31 22:45:30+00:00","Fix for bug #1861126 - 'IHNM: Crash when Gorrister cuts sheet in the mooring ring'

svn-id: r30109
"
"305f60e0dbefa3861f5ca3614a2b930aca8afc2c","2008-01-01 11:27:29+00:00","Patch #1839861 (Possible workaround for bugs related to cloneToFadeOutTrack): Fixes bug #1848399 and apparently also #1527274 & #1763227

svn-id: r30111
"
"0ad70c7d8474cd2f1a3edc1710fde5ec7754c5a3","2008-01-01 11:41:47+00:00","SCUMM: Moved tick duration into a constant

svn-id: r30112
"
"87ed2bf0cb54a64d7a416f76bdf9127e6522752f","2008-01-01 12:58:04+00:00","Extended animation class to handle EGA animations

svn-id: r30113
"
"e3c60fea4e44f8b82f832c83cf93254c40796c26","2008-01-01 12:58:50+00:00","Extended PaletteCollection class to handle EGA palettes

svn-id: r30114
"
"4308e6ab10b56a5212647d943c2cb424aa8307f8","2008-01-01 12:59:40+00:00","Added EGA related constants

svn-id: r30115
"
"79a9074548e0e988344cab3842a134559da0c8b5","2008-01-01 13:00:47+00:00","Added support for the EGA introduction sequence

svn-id: r30116
"
"cd84daf7f85646d9c4ae08dae1582a4238547d50","2008-01-01 15:05:27+00:00","experimental change to prevent play first region with fade out if jump opcode is attached

svn-id: r30117
"
"604bf6fff382a5db80039ec0c1c012e388badabb","2008-01-01 15:08:20+00:00","experimental change to fade out to 120 ms instead from table for state music with opcode 3 when few songs have the same attribute value

svn-id: r30118
"
"43a18a4cdd6ad1ecad0ed066b7f4a06bc3a9fed0","2008-01-01 15:25:12+00:00","Fix bug #1811732: 'MANIAC C64: German version not supported'

svn-id: r30119
"
"e5e53a0017ed821099d72a2548d9b9cc717efbbe","2008-01-01 15:36:50+00:00","Split out charset font data for easier maintenance

svn-id: r30121
"
"308b02f4ca5d179aab3cedd8ad9bd97c0685be73","2008-01-01 16:26:04+00:00","Fix for bug #1766072: MANIACNES: Music Doesn't Start On Load Game

svn-id: r30122
"
"23313cb82ee260c08826ea95d5c67636f9667c52","2008-01-01 16:42:05+00:00","Patch #1733017: 'SWORD1: Possible patch for bug #1730183'

svn-id: r30124
"
"7aadf6c191344280211f0124b73789e6e5d70958","2008-01-01 16:57:03+00:00","Slightly modified patch #1848173: 'ScriptVars class implementation for CinE'

svn-id: r30125
"
"7e84ccb148bc680c3d9b57b3af71c816a57ad6a8","2008-01-01 16:59:27+00:00","Update MSVC8 and MSVC9 project files for commit #30121

svn-id: r30126
"
"f4f963800dbb9823c9f25c4b68fc52381e5f05c5","2008-01-01 18:08:12+00:00","Fix a long standing bug in playComiMusic (no idea whether this caused any bugs, though)

svn-id: r30128
"
"4a9389d31082b3f7767a436f5f4d96bfc0f7c4e1","2008-01-01 20:27:11+00:00","fixup to prevent a crash, pending the overlay rework

svn-id: r30129
"
"86aeae4a74fff70b6a694ba582b49e722677235f","2008-01-01 22:55:54+00:00","Bugfix to show the final text screen correctly in EGA mode

svn-id: r30131
"
"46368eac5f1afc6d3fe706a3efffc7ccf336a924","2008-01-01 23:30:29+00:00","Added what I hope is the proper fix for bug #1498785 ('LOOM: Unknown Roland
MIDI music events'). It would probably be safe to commit to the 0.11 branch,
but I don't know for sure which games would be affected other than EGA Loom.

svn-id: r30132
"
"fe8faf4f195c0105bc31845f9fcd3017462830cb","2008-01-02 00:07:16+00:00","(forward-port) Quick swipes across the screen now triggers arrow key events. Also, some mouse cursor fixes for landscape mode

svn-id: r30134
"
"f72b094c699ef754767dbdb1bbb2fededd4aeba8","2008-01-02 00:08:27+00:00","When fixing the EGA Loom Roland music, I accidentally broke music looping.
Should be fixed again now.

svn-id: r30135
"
"9db76278efd93a6aec7cea7ce1c59fa993c332e0","2008-01-02 00:35:32+00:00","Set amount of free memory (v8 i.e. vFreePages) to maximum value (Also when loading a saved game!). Fixes Gold Rush's help screen and bible passage showing.

svn-id: r30136
"
"b2d2bd6f2d4e33ffe545046540a386253d43f8b3","2008-01-02 03:36:19+00:00","Room backgrounds now display in EGA mode

svn-id: r30138
"
"3b658492f5dfd7fffcfe559b3be58ef1be0a9436","2008-01-02 07:14:02+00:00","Fix to make EGA sprites appear correctly

svn-id: r30140
"
"273ce5d924ffd72c4d37896a9b805b18de859ba0","2008-01-02 11:11:09+00:00","Correct verbs names in German version of Maniac Mansion (C64).

svn-id: r30141
"
"eff113c486ca9b68dba28537c002b74d94152abb","2008-01-02 11:14:42+00:00","Fixed Palette constructor parameter to be uint16 rather than uint8

svn-id: r30142
"
"977c9fb5f338780d3886b6695c8082a98381ab00","2008-01-02 11:15:36+00:00","Enhanced cursor code to handle cursors in EGA mode

svn-id: r30143
"
"01c611385e1f84ee45925e4f2011d50a5351ba9c","2008-01-02 11:25:17+00:00","Fix regression when skipping cutscenes in Maniac Mansion (C64).

svn-id: r30144
"
"b6f39fb8fb01a0aea046fb5d919b5a1745d51808","2008-01-02 11:45:59+00:00","Adjusted the colour of the EGA cursors to match the original game

svn-id: r30146
"
"312346bdb4a229213d9aeb4578e936cf27890bd5","2008-01-02 12:58:18+00:00","Fix for bug #1206994: 'FOA AMIGA: Black cursor and text in Dig Site'

svn-id: r30147
"
"082bed889803d415c3445a301b8a284076775acd","2008-01-02 13:11:26+00:00","Narrow fix for bug #1206994 only to FOA.

svn-id: r30149
"
"33b2a4083dbcb87352063ff16024b25ba1627e43","2008-01-02 13:31:16+00:00","Fix dmedia.cpp to not use stdafx (likely fixes building on IRIX)

svn-id: r30151
"
"6dfaaf3018cd44e8c2eb9356c3d6e2d5f0d89ad7","2008-01-02 16:36:47+00:00","Set AGI's computer type variable (v20 i.e. vComputer) according to the used platform. Now using different values for IBM-PC, Atari ST, Amiga and Apple IIGS platforms.

svn-id: r30153
"
"a4cbfa354b8892064cae5febcca60cd71266a3cc","2008-01-02 17:33:57+00:00","Fix bug #1846886: 'PUTTZOO: Windows version cursor/pointer drawn wrong'

svn-id: r30154
"
"b7f15f1545a954de8b182c91b2961d6dfa98f510","2008-01-02 17:36:56+00:00","Mention several noticeable bugfixes in NEWS.

svn-id: r30156
"
"4e7fe0275128ebde8a4d7a3a8c2ffe662558678a","2008-01-02 17:38:25+00:00","cannot handle key mods in ce and unicode is dodgy to say the least. fixes bug #1748135

svn-id: r30158
"
"2d94049bead04ae42d4051ec855fbcb2bda645ee","2008-01-02 18:44:20+00:00","Workaround for bug #1804278: 'MONKEY: Mouse is invisible after loading'

svn-id: r30160
"
"040a7b54fa0216ff786c58adb23aee1ab5364d9c","2008-01-02 18:59:15+00:00","Oops. Moved too much code in the last commit.

svn-id: r30162
"
"5e7cc8b2d9576e6a4d061434227f0db00c87eb31","2008-01-02 19:10:01+00:00","Add GF_OLDAMIGAV20 game flag for correctly setting computer type (v20 i.e. vComputer) for particular old Amiga AGI games (Space Quest I v1.2 at the moment).

svn-id: r30164
"
"0f6246bab83f4058f804d4d3b9a364b3170e2c9e","2008-01-02 21:15:23+00:00","Fix for bug #896489: 'DIG: Missing subtitles when talking to Brink'

svn-id: r30167
"
"da3d85c755500966953c2abb6b0faffd369bbf92","2008-01-02 21:29:23+00:00","Removed debug printf.

svn-id: r30169
"
"b91300e1ccba5aa6c95977849aba99342c29375b","2008-01-02 21:33:18+00:00","Fix for bug #1829409. Character now changes expression accordingly with available dialogue answers.

svn-id: r30171
"
"9bb72bf188c8ea171a5699cbf4189922c2e3e17b","2008-01-02 22:06:49+00:00","Fixed bug in Nippon Safes for Amiga, Italian version. Game now doesn't crash anymore when starting introduction.

svn-id: r30173
"
"9efa3a5ec35f01374c63c7d89f9150787d5d620a","2008-01-03 00:34:52+00:00","Added MD5 for English EGA version

svn-id: r30175
"
"639929a09e166f7a55a3cfcfa94e56d4e9bd1337","2008-01-03 03:20:32+00:00","Fix endian issue in redimArray.

svn-id: r30176
"
"6c6a2a57b512189daf9a95be3f3a363c9170f62c","2008-01-03 03:34:25+00:00","Fix endian issue in checkArrayLimits().

svn-id: r30178
"
"6ed43e7505ba452c0991a40dd3185be83768487b","2008-01-03 07:29:13+00:00","Fix for bug #1861863 - 'ITE: Crash when using Eeah with Eeah'

svn-id: r30181
"
"1b8ed0b483ac3498730887b3d07198bcc7f06f1a","2008-01-03 07:33:01+00:00","Updated build requirements.

svn-id: r30183
"
"d157e47ec2f5c76ed7c006b261b6b93ad6da560f","2008-01-03 07:49:19+00:00","Remove -I$(srcdir)/common from include path (not needed anymore).

svn-id: r30184
"
"ca6056ae21016050cd3b8fef2a75c07a33a66491","2008-01-03 07:51:55+00:00","Disable compilation of default savefile manager, to avoid having it pulled
in by --whole-archive when building with plugins.

svn-id: r30185
"
"967e56996a429dcbde6e70bec842c3f87df258fd","2008-01-03 08:39:49+00:00","Different zlib.h included paths for Symbian OS to differenciate between system and user includes

svn-id: r30189
"
"0ddfc0a64ea457cc65df92d8e359a900a0bfed6a","2008-01-03 08:41:40+00:00","Fix for the Space Trek sprite duplication bug (#1659209). Makes commands position and position.v use coordinate clipping for Space Trek.

svn-id: r30190
"
"4130d04f77bdcad3bb15328ccafc5abd24e65765","2008-01-03 08:42:22+00:00","Updated paths to engine-data files for Symbian OS

svn-id: r30191
"
"e75207d9d7d60b11c7a5dac769c981e80d244618","2008-01-03 09:43:50+00:00","Made AGIPAL-loading more lenient with errors. Added AGIPAL-flag to Naturette 3. These together fix Naturette 3's intro (No more long shakings).

svn-id: r30193
"
"2bb81e2d207201265273e36bff8fadaeba6444a1","2008-01-03 10:42:18+00:00","Properly fixed bug #1861863 - 'ITE: Crash when using Eeah with Eeah'

svn-id: r30195
"
"d531d4234730edfb0e6ec095b34f22c1fb66754e","2008-01-03 13:28:04+00:00","Use system call to return to DC boot menu rather than relying on exit()
to do the job.

svn-id: r30197
"
"58f0d4e632793ac9e38f5c0596626eba1173748d","2008-01-03 14:42:49+00:00","Committed slightly modified patch #1862758 'KYRA: audio data assignment patch'.

svn-id: r30198
"
"bfb7a7e7e66f0d65861306311d5f73a26d397c71","2008-01-03 14:51:50+00:00","Don't allow implicit conversion from Common::String to Common::FilesystemNode.

svn-id: r30199
"
"fbcba1a573eff399a1a7b41ff87785c0b9f528d5","2008-01-03 14:53:18+00:00","- got rid of hardcoding 'KYRA.DAT' in all places, where it's used
- now using 'kyra.dat' rather than 'KYRA.DAT'

svn-id: r30200
"
"9b4fc2f70b7c35d8df5a9e70fb5ea8a118e5628b","2008-01-03 15:20:33+00:00","Resolve portabillity issues introduced with last commit.

svn-id: r30201
"
"11efbda297e9ed762fba6829cbfbf5a5032f5f1e","2008-01-03 19:43:43+00:00","Made the Loom Roland music fix a bit more specific. Only one song in EGA Loom
is affected and, according to Kirben, none in Monkey Island 1 VGA. I don't know
about Monkey Island 1 EGA, but I've assumed it uses the same music as the VGA
versions.

svn-id: r30202
"
"1411c9f3f14221718979bbd938d6d417bd871c5d","2008-01-03 21:57:54+00:00","Fix compilation

svn-id: r30204
"
"67d14ed3229aefbcdb2956ee76731cc516a116e4","2008-01-03 23:36:55+00:00","Silence a -Wuninitialized warning

svn-id: r30205
"
"a1503bf7c8ed2daabd523b211b5b1f58c1c08e03","2008-01-03 23:55:42+00:00","Fix another -Wuninitialized warnings - n could have been returned w/o having been set first

svn-id: r30211
"
"28bbae174508f0ad7bf2189bbae33cb13e06e3d5","2008-01-04 00:24:29+00:00","Make AGIPAL also accept 'pal.100' (Original hacked interpreter also does this).

svn-id: r30213
"
"5a931c4170eb389dc803786b59865286d09b51e3","2008-01-04 13:02:20+00:00","Updated from media/trunk

svn-id: r30216
"
"063f7df4d34b1bcbc3b51ee69378cfa678f6f23c","2008-01-04 13:34:38+00:00","Slight cleanup

svn-id: r30217
"
"4a706675de2aff729994da195625cc4d53ed952e","2008-01-04 16:08:49+00:00","fix a race - bug #1863961 (#1769503)

svn-id: r30218
"
"3451d1c30f579be0fa90cbdd51ec624043346b31","2008-01-04 18:46:08+00:00","Applied my alternative patch for feature request #1266599 ('BS1: Invert stereo
channels for traffic sounds in Rue Jarry'). Now let's see if it breaks any
other scenes. :-)

svn-id: r30220
"
"3e04d8b2154b59acc6075055c2ea085795826531","2008-01-04 21:24:51+00:00","Fix for bug# 1729307. Fonts are now displayed with shadows when needed on Amiga. The correct font for intro screen has also been selected.

svn-id: r30221
"
"b75d196e889497edc55f39feecf64da27eae1c4e","2008-01-04 21:26:53+00:00","In revision 30221, the correct font wasn't selected in the character selection screen. Always ask things twice.

svn-id: r30222
"
"610880dc674170304b4c6c550705b55a9511712e","2008-01-05 07:20:26+00:00","Corrected the RGB values generated for a given EGA palette index

svn-id: r30224
"
"2147f59e3616127212687c60d38c8053362500b6","2008-01-05 08:17:39+00:00","Converted some spaces to tabs.

svn-id: r30225
"
"10719d5a12563192894f0dc94bb12b8c1cd6fccb","2008-01-05 10:34:34+00:00","Added extra handling for EGA dialogs, and added formalised parameters/methods for text positioning

svn-id: r30226
"
"f5577f847089a2cda48853bbc809f8e0d1615f3b","2008-01-05 10:35:22+00:00","Removed redundant parameters and clarified EGA and VGA specific definitions

svn-id: r30227
"
"65399321ebf9e06af48239bf4f0c62c3eead7593","2008-01-05 10:35:47+00:00","Added support for the EGA style menu

svn-id: r30228
"
"2c86089264b1b917986076353c08bd6cf9d16b17","2008-01-05 10:36:36+00:00","Fix for showing the correct colour in the status line in EGA mode

svn-id: r30229
"
"13cb1e710ff2a6be394d76334d267b9e8bf12ba9","2008-01-05 10:37:36+00:00","Fix to use correct EGA/VGA colour when displaying talk conversation options

svn-id: r30230
"
"140d914c1813ca857a9db8e5b8218f618b81fbdf","2008-01-05 10:38:50+00:00","Brought waitForPress into line with other similar methods to not register control characters

svn-id: r30231
"
"735ea1eaaae1036771f858fa5656f2ce71ba8e9d","2008-01-05 10:53:27+00:00","Fix to show credits screen correctly in EGA mode

svn-id: r30232
"
"9e02b32220b6331b5a7280d563c58c652a1adc66","2008-01-05 11:24:37+00:00","Made standard EGA background colour a constant

svn-id: r30233
"
"705bd9236c6f56e90f3c27dd42051cc408156494","2008-01-05 11:25:30+00:00","Fix for popup menus to work in EGA mode

svn-id: r30234
"
"62fdf1afa0e9d497d4bd08c1fa5c4452518b2cb5","2008-01-05 12:09:24+00:00","Changed room change code for an immediate transition when in EGA mode (which can't do fades)

svn-id: r30236
"
"9097d97a356124634f936e6c17787a874f77ad81","2008-01-05 12:16:32+00:00","Fixed comment that incorrectly reversed green and blue ordering for setPalette data

svn-id: r30237
"
"6eb64102a4d92686a81120b7fb74571df3237228","2008-01-05 12:45:14+00:00","Fix to remove a tab character from the GPL header

svn-id: r30238
"
"eb227a6d8034ee89e42df1452c8a85acb3add900","2008-01-05 12:47:47+00:00","Grammar fix in comment for kFeatureAutoComputeDirtyRects

svn-id: r30240
"
"2dcfa224e34302a94a0576ed7a63fa3a60035abd","2008-01-05 12:51:07+00:00","Removed tabs in front of GPL header

svn-id: r30241
"
"6b5b4f8015a891d4590f90049014d17454c056c0","2008-01-05 12:55:22+00:00","Fix to remove a tab character from the GPL header

svn-id: r30242
"
"7a57d2658585c36c575dfdd23849a5875c4fb94a","2008-01-05 16:12:22+00:00","Several warnings which have been disabled for MSVC are never thrown (at least not anymore). Removing all the unneeded ones

svn-id: r30248
"
"aa38a8eb965ce923ed655964cf3e2be5ea254a1a","2008-01-05 17:43:33+00:00","Fixed regression that would cause ScummEngine_v80he to leak polygon slots at an
alarming rate.

svn-id: r30249
"
"d604f51d4245bc770bd12609be0984f15bc77dd1","2008-01-05 20:35:18+00:00","Implement unknown test command 19 (hopefully) properly and name it unofficially as the in.motion.using.mouse-command.

svn-id: r30251
"
"89da803724467f94aa0973d867ed25b5e3bdf228","2008-01-05 20:38:16+00:00","Fix for bug #1795755: LOOM/FLAC: Pauses (temporary lockups) after speech

svn-id: r30252
"
"2c8910ade855c1bee56026ba7ad2f40bedc88803","2008-01-05 20:40:27+00:00","This 'if' should not be necessary anymore

svn-id: r30254
"
"c9a8d02f6ef8f2f67b6c24228ff043ba975241c5","2008-01-05 20:43:07+00:00","Do not busy wait in IMuseDigital::allocSlot on *any* platform

svn-id: r30255
"
"8b12998c72409743139f694ae7a23722a8052082","2008-01-05 20:49:18+00:00","Use souStreamUsed to distinguish between 'stream' and 'streamSou' usage

svn-id: r30257
"
"077026e088f7805304b9bd1d5a69b3f743f19145","2008-01-05 20:50:10+00:00","As far as I can tell / understand, IMuseDigital::getSoundStatus can safely just use isSoundHandleActive for both stream and streamSou (warning: might cause regressions)

svn-id: r30258
"
"5f7a037bda006d4573961879ea614a488edda764","2008-01-05 20:52:30+00:00","Implement a workaround to hide.mouse-command for Amiga's Gold Rush. Fixes walking with mouse in room 192 (The hanging scene i.e. the copy protection failure scene).

svn-id: r30259
"
"1f364f54e7fb78d020ccf409b26c8f18a9d5161c","2008-01-05 20:52:42+00:00","Clarified some iMuse Digital code as I understand it

svn-id: r30260
"
"3f6b2c97b7c406ffc2c81892a008053f5ebd38bd","2008-01-05 20:59:33+00:00","When loading and before starting  an iMuse Digitial track, reset it completely to zero

svn-id: r30262
"
"64601d446f3de6099e3f2d043bfde3136e4a330d","2008-01-05 21:10:49+00:00","Workaround for Amiga Gold Rush's broken picture 147 by patching it.

svn-id: r30263
"
"923ad313dc1e85ff3e2169f08abe0b2e016896c2","2008-01-05 22:35:30+00:00","Let the audio mixer delete the streamSou object

svn-id: r30265
"
"f68d84b54f3bd1857ec57940a8b792a66168c484","2008-01-05 22:44:39+00:00","Moved some code which was being duplicated to methods of class Track

svn-id: r30266
"
"7ebdffb0cd1bb7f8bcaa2359d8a94c7a109b5104","2008-01-05 22:45:35+00:00","Seems IMuseDigital::cloneToFadeOutTrack was using the wrong pan value all the time

svn-id: r30267
"
"56ad5f493e5ead7915b687d1d25e73adee5ffbff","2008-01-05 22:57:36+00:00","Play SOU data instantly, not slightly delayed -> allows us to get rid of Track::streamSou & Track::mixerStreamRunning (have not yet removed the latter to avoid introducing a new savegame version)

svn-id: r30268
"
"063aecaf7a23bd862371c390fa80a07d2693c148","2008-01-05 23:01:25+00:00","Fixed warning.

svn-id: r30269
"
"dce7a57cad0c7704e3331f1ac5b30af319a8cead","2008-01-05 23:05:16+00:00","VAR_TMR_4 has a special role from VAR_TMR_1 till 3 (in particular, it exists across far more SCUMM versions), so rename it to VAR_TIMER_TOTAL

svn-id: r30271
"
"ef9dac103f5610dd89d01cf52342d1325481e8ff","2008-01-05 23:44:05+00:00","stop low priority sounds which we want to override immediatly

svn-id: r30275
"
"1d34ce3baa6e7c2a3b77308082057409994b5a50","2008-01-05 23:53:28+00:00","Let the audio mixer take care of (i.e. dispose) the Track::stream object, too

svn-id: r30277
"
"273c5b5cf175e733fdf5e549dad8ecfbab8136b1","2008-01-05 23:57:12+00:00","Removed unnecessary newline in debug message.

svn-id: r30279
"
"d340e77f24e3aff469a82268ed2561b9717a0e08","2008-01-05 23:58:27+00:00","Made IMuseDigital::stopSound use flushTrack instead of setting track->toBeRemoved = true; cleanup in flushTrack()

svn-id: r30282
"
"e52591ac0ef9f7611f3ce9c2b8b3e975fb3a4d3e","2008-01-06 00:00:53+00:00","clarify comment

svn-id: r30283
"
"1194495ad39ec8640f76c000825981952c44e6a8","2008-01-06 00:09:05+00:00","cleanup

svn-id: r30284
"
"71980d0fbd818d63a982c007374b521ed8803271","2008-01-06 00:28:36+00:00","Fixed compilation

svn-id: r30285
"
"b535b070f38654d6069d1b38ae59c881f6e00b80","2008-01-06 02:09:18+00:00","Fix to show talk dialogs in EGA mode using the EGA palette

svn-id: r30286
"
"c43a851e1305b0862b2106ff4ed3f27025ac5f14","2008-01-06 02:59:41+00:00","Changed the frame delay for part of the introduction sequence to match the original game and prevent the music from running out before the next animation begins

svn-id: r30287
"
"f31b835fdadd96bd69d4a047f19a0b76c24892f4","2008-01-06 06:21:04+00:00","Resort a few cases and opcodes in HE code.

svn-id: r30289
"
"e462bf55b3b3baa55fc9a60b53b408df032d49fa","2008-01-06 11:01:56+00:00","Committed patch #1864214 'KYRA2: correct platform and talkie flags for sequence player'.

svn-id: r30290
"
"743858b097107c129d7884ef523c69f5b296363e","2008-01-06 13:27:42+00:00","Fix regression in Let's Explore the Farm with Buzzy demo.

svn-id: r30296
"
"79ba9686eb6dbce083e5d182024995e67c03d1d0","2008-01-06 13:54:19+00:00","Fix bug #1864932: COMI: Game crashes on difficulty selection screen

svn-id: r30298
"
"9b45c2c99407548069d681fa6ace32e078d0f3e4","2008-01-06 14:00:43+00:00","Split charset font data.

svn-id: r30299
"
"022c5a27e30a859eefb49542d3ebcc7c84bb2906","2008-01-06 14:04:18+00:00","Remove unused Amiga OCS font data, the AGA font data can by used by all Amiga versions of Simon the Sorcerer 1.

svn-id: r30300
"
"aaa28e7b7cc3163b1404df69c40f97fa393a17d8","2008-01-06 14:08:53+00:00","Patch #1862888: BUILD: Automate the list of data files to be distributed

svn-id: r30301
"
"cebeeb5d669722a133964198009c559382247d73","2008-01-06 14:12:55+00:00","Some fixes to 'dist' targets -- use srcdir to reference files in the source dir (makes it possible to build in external directories)

svn-id: r30302
"
"94d5c845bf1ccdb8f2c9878f818f24163fed1ccc","2008-01-06 14:13:40+00:00","Fix path for engine data.

svn-id: r30303
"
"6b008d44d39528545b3cfb32eae8075c99bade13","2008-01-06 14:13:54+00:00","Copy pred.dic for the iPhone and Amiga dist targets, too

svn-id: r30304
"
"1ab348deb7aaf5df3a7e7ab198ac011de8cd74c9","2008-01-06 14:57:28+00:00","update project agos project file

svn-id: r30307
"
"690d38cfc4afeb04d1c8bde1baebe0c962cb1ab4","2008-01-06 14:59:46+00:00","Unify mixer pan/vol setting code

svn-id: r30308
"
"ab17e03fb3f6a159bbb5d81f685a0e19441f67a6","2008-01-06 15:02:46+00:00","update msvc8 too from msvc9

svn-id: r30309
"
"84e5398b1cf8b1758f2b4bad916ec279f33161ca","2008-01-06 16:02:38+00:00","store the disk sounds/music were actually *loaded* from, instead of the 'current' disk

svn-id: r30310
"
"db51514dd389b7177eaa11eb1ce5b40fb36b4b3c","2008-01-06 19:29:41+00:00","Moved balloons management into Gfx, which is now responsible for positioning and drawing. All balloons are now drawn on a different layer than the game graphics, thus simplifying screen management. Dialogue code has undergone a major revision, and the superior implementation of answer selection in the Amiga version is now used in place of the poor PC one. Other bits (where some changes had already been introduced) have been updated, too.

svn-id: r30311
"
"eeb212c7e0fd49670bcab942f2db2234a244dfc7","2008-01-06 20:42:28+00:00","Indent with tabs instead of spaces.

svn-id: r30312
"
"35b7021fac0f6cf4352027054417862e6e31beb9","2008-01-06 20:46:03+00:00","Fixes wrong type.

svn-id: r30313
"
"5ff1ccabe6b587afa6233496e9f84ad653ceeac5","2008-01-06 20:51:05+00:00","Removed now useless functions.

svn-id: r30314
"
"1ddc8ab0fa0f0479a50e6436f3ff9eaa0568e117","2008-01-06 20:57:46+00:00","Indent with tabs instead of spaces.

svn-id: r30315
"
"841cc77e5c8eb45ed27288b8094888d23b249002","2008-01-07 03:53:30+00:00","Made debugging keys disabled by default, with a debugger command to allow them to be turned on

svn-id: r30317
"
"f3b99816c6f79f4776307727aa1d9e8a5c36389f","2008-01-07 08:43:20+00:00","Fixed an MSVC warning

svn-id: r30319
"
"4fb5f9274d67c20cd596941867a294b92df1dfbc","2008-01-07 08:44:19+00:00","Removed some obsolete defines

svn-id: r30320
"
"01a256455dba4c8c30b6142d166e11556d083605","2008-01-07 08:57:28+00:00","Add partial implementation of obj.status.v-command (Based on observations of the command's output in the Amiga version of Gold Rush!).

svn-id: r30321
"
"a137ff2cf19dd52c1cbee5456f386af4f26e65b5","2008-01-07 10:32:54+00:00","Changed debug keys enablement to be on by default if a Debug Level is specified

svn-id: r30322
"
"e9f3b27c03cdf3047ad531a2dcb9e631d7d66e81","2008-01-07 18:29:33+00:00","Add detection data for a finished fanmade AGI game Naturette IV (2007-10-05).

svn-id: r30324
"
"2f50a2416ce229e4b4b37327ca6a48966dd7509b","2008-01-07 18:58:30+00:00","Reject AGIPAL-files with over 6 bits per color component. Makes at least fanmade AGI game Naturette II's colors not be messed up anymore.

svn-id: r30326
"
"5dbc89c119b217a08789f0fef8b1b14f1f55bb62","2008-01-07 19:41:27+00:00","typo

svn-id: r30328
"
"aedd732cefb7beb9080bffce9cc3b94493658b0d","2008-01-07 22:42:58+00:00","Add Buddha and david_corrales to credits.

svn-id: r30330
"
"14d4a515f2318efbf3765193e185da2ee8736062","2008-01-07 22:47:54+00:00","Revert temporary change.

svn-id: r30334
"
"c1c8b10fbe396a6669bbdee607fb4b86d3c1e120","2008-01-07 23:13:45+00:00","Merged dos monospaced fonts subclasses into parent class. Handling is the same, and readability is more important than performance, especially when you call a routine only twice.

svn-id: r30335
"
"660d9a89d7d3fd1888027e83ac1d4f889c5a115c","2008-01-08 03:09:00+00:00","Bugfix for #1865552 - crash when waiting for patrol. Incorrect value was being passed to retrieve a hotspot pointer

svn-id: r30336
"
"965eddf0dc0df514a74504d4b92365afe6f3b892","2008-01-08 06:13:55+00:00","Enhanced NPC walk-to logic to handle separately several special Ids that were previously handled identically

svn-id: r30339
"
"cd23db6ce8fb660320804e1355f37558c2ebccc4","2008-01-08 06:18:33+00:00","Changed method parameter name to prevent shadowing warning

svn-id: r30340
"
"1b80eedaa18c38ffa2203eb661fda44d245ca6da","2008-01-08 20:32:29+00:00","Added a proper _name member to Zone, instead of using the label text.

svn-id: r30343
"
"359f56cd359de69d32cafe3ee180248f21a14099","2008-01-08 20:37:31+00:00","Removed useless members.

svn-id: r30344
"
"e21fd496f837dc13a4c232e931767b14fef43940","2008-01-08 20:46:58+00:00","Restructured label handling and moved all related code to Gfx.

svn-id: r30345
"
"241c337dc331a84340deb0c7e48b87f00fd7b582","2008-01-09 02:32:18+00:00","Fixed popup menu height so bottom action doesn't partially overlap the bottom border

svn-id: r30346
"
"34c3c89267bade81b1b8225455be46638ef73360","2008-01-09 09:13:39+00:00","Fix for #1866777 - adds saving of hotspot layer to savegames

svn-id: r30347
"
"c14d4201417d02b09520b524bc6ea6448c201220","2008-01-09 09:19:17+00:00","Added a debug console for Mickey's Space Adventures

svn-id: r30349
"
"b0f2e823e0672fbc44350376911d346d86de4106","2008-01-09 09:46:26+00:00","Cleanup of the debugger commands, added some more commands, removed now obsolete debug code

svn-id: r30350
"
"85b3a4a59e1ddc6da55bdcf8212e6bfac391af6d","2008-01-09 10:31:52+00:00","Added a debug command, did some cleanup

svn-id: r30351
"
"af443ba924a4575cb799e932aa02f197332ede0a","2008-01-09 11:14:15+00:00","Bugfix for #1866782 - fixes the issue with the Blacksmith being reactivated after earlier being deactivated in the middle of hammering the anvil

svn-id: r30353
"
"6d4d02a27f989db27f94aebce4f5f4475a02fb33","2008-01-09 12:36:58+00:00","Bugfix for #1866784 - Castle Skorl can be activated multiple times

svn-id: r30354
"
"6f4acae161840986453e69b86ddf5fadefb75d13","2008-01-09 12:59:11+00:00","Fixed some issues with AGI keyboard input

svn-id: r30356
"
"1cb4578d2ff826e4a2d4bddfae169165a96ea5de","2008-01-09 21:15:34+00:00","Cleanup.

svn-id: r30357
"
"29d1749db5496f37dc053ccecba3fc1a7606289d","2008-01-09 21:26:38+00:00","Added handling of home/end keys in input dialogs and properly filtered out non-alphanumeric keys

svn-id: r30358
"
"bdf440fdaebf74e07ff6889c15b11ab61a8c7e59","2008-01-09 21:46:57+00:00","Replaced the remaining old string code with the new label code. All the text is now drawn in the framebuffer instead of being blitted onto the internal game screen buffer.

svn-id: r30360
"
"605c9d0fd61a14a6f479c6e1177fa10844f6feff","2008-01-09 21:54:58+00:00","Turned Gfx::setFont into a protected member, since now Gfx can automatically detect which font to use. Gfx still needs setFont internally to select fonts. The font shadowing introduced in revision 30221 has been removed as well, since the new approach handles it better.

svn-id: r30361
"
"3ed0ddd375edfced81481b5e2013b86009d6c9dd","2008-01-09 22:03:51+00:00","Refactored some text drawing code.

svn-id: r30362
"
"1886d498ed877264cad22da9fa36f3794cff666c","2008-01-09 22:58:55+00:00","Change an error to a warning

svn-id: r30363
"
"fee6362147b5132a624b0d061460241a9a5ed055","2008-01-10 09:22:46+00:00","Bugfix for incorrect data being saved for the current NPC the barmen are serving

svn-id: r30365
"
"1d4efdcaa1807140f735a908a23ce3e346eace75","2008-01-10 09:42:51+00:00","Added proper reset of barmen data when game is restarted, and added missing barman data to savegames

svn-id: r30367
"
"947608cd91ed379e3b490784ee34e268adcd0698","2008-01-10 10:34:23+00:00","Changed an assertion to a warning

svn-id: r30369
"
"8b9c7b2137006ab0dd1b1b22f5e52703803e7537","2008-01-10 10:48:04+00:00","Corrected the name of script method #39 which closes the town hall door

svn-id: r30371
"
"7ed64488a8bedbbf819f0a4ecc26d6e1ac4d6159","2008-01-10 11:29:29+00:00","Removed obsolete FIXME

svn-id: r30372
"
"80e776e0fbd69846802cea1c8864369bbf2eb6f3","2008-01-10 11:54:31+00:00","Fix DefaultSaveFileManager::listSavefiles to return the savefile *name*, not the *path* (which is meaningless in the context of savefiles)

svn-id: r30373
"
"0ec8d35e4da14d6af53ead8001063b6ecf5f0fc5","2008-01-10 12:00:10+00:00","Revert accidental commits in rev 30372

svn-id: r30374
"
"6b372d97ee0ba2b3f5aa154599d167edd6b087b8","2008-01-10 12:02:03+00:00","Disable moving using mouse in mines (Rooms 147-162) and 'adj.ego.move.to.x.y'-command (Which uses 2 arguments) in Amiga's Gold Rush. This temporary hack fixes bug #1733297 (GR: Actor stuck (Amiga version)).

svn-id: r30375
"
"becce923fc5e40eb930d2fa51457ba951f93f40a","2008-01-10 12:22:15+00:00","BE -> AE

svn-id: r30376
"
"286a3da49b60974793add684226884ba2db3bcbc","2008-01-10 12:40:57+00:00","Remove disabling of moving using mouse in mines in Amiga's Gold Rush introduced in r30375. So bug #1733297 remains although not stricly in its original form (Moving using mouse in the mines bugs still but not identically as when the bug report was given).

svn-id: r30377
"
"d804bad5512577b2a268f8985422038eb5d3927d","2008-01-10 13:37:34+00:00","Replaced the Blacksmith hack with an NPC Schedules list that stores the active schedule of an NPC when it's deactivated in case it's later reactivated again.

svn-id: r30378
"
"89f15fe482503e69742e5c32847de565c2248944","2008-01-10 19:06:38+00:00","Fixed warnings.

svn-id: r30379
"
"b14da0b02c67a7d1d64a0e9ab46f0af0bdc9ae35","2008-01-10 21:32:49+00:00","Fix for debug logging of the current action name

svn-id: r30386
"
"1f6237567eb0025f1412cf6ab5d6ac65d4a390ff","2008-01-10 22:04:00+00:00","add virtual keyboard show/hide calls

svn-id: r30388
"
"89cedb5d1e87da3da1e65e9b7714926f8ea1fb5c","2008-01-10 23:24:43+00:00","Commit slighty modified patch #1865509 'KYRA: kyradat support for hof'.

svn-id: r30393
"
"2dd6db4ca5b65c4976f3e61b8009474591978dcb","2008-01-10 23:25:19+00:00","Commit slighty modified patch #1865509 'KYRA: kyradat support for hof'.

svn-id: r30394
"
"28dfad2eeebfcd1e02f6a91a9af29f049fbc600d","2008-01-10 23:25:52+00:00","Commit slighty modified patch #1865509 'KYRA: kyradat support for hof'

svn-id: r30395
"
"cd2751c6986e8952c5c5b261e164bf991a9e54e7","2008-01-10 23:32:19+00:00","Changed enum to match engine code exactly.

svn-id: r30396
"
"f510fb6b14ace362d96b0ea376b4dd539e68ab09","2008-01-11 00:33:45+00:00","Fix regression introduced with last commit. (Caused crash in Amiga version)

svn-id: r30397
"
"2a28b405125b6d0d0adb662b23850319a26d8d76","2008-01-11 00:35:39+00:00","Added some paranoia checks.

svn-id: r30398
"
"d1e8c127274c181a8590634d5ce31f04832dae07","2008-01-11 07:32:09+00:00","use dists/engine-data for data files; include lure.dat

svn-id: r30400
"
"9df4e9a481d06e7a6c95114bdf10a4a1cd82449a","2008-01-11 08:10:36+00:00","include extract_parallaction in tools package

svn-id: r30402
"
"1603afe6325b1258d871f0b0e3933a5d763352d7","2008-01-11 09:52:06+00:00","Cleanup and simplification

svn-id: r30403
"
"5a652c9471d09a2e01f14203da8b7edf52d676fe","2008-01-11 10:20:31+00:00","Don't show help when the alt or shift keys are pressed

svn-id: r30404
"
"05b28340bf5eed3123cc72f54c96390e1a54adb0","2008-01-11 10:59:43+00:00","Cleanup and simplification

svn-id: r30405
"
"00ad56bb087244a49f0b0b31faf1a75c182e18e7","2008-01-11 12:53:31+00:00","Fix assert that can be triggered in non-English versions of The Feeble Files for Amiga/Macintosh.

svn-id: r30406
"
"201269ba23ebf4e5709b87561d67e8097e9eaec7","2008-01-11 13:00:46+00:00","Update.

svn-id: r30408
"
"5abe3db577d6984126e571507e0feb99309e3c96","2008-01-11 13:48:06+00:00","Added support for the Italian fan translations of Inherit the Earth. The original DOS CD, DOS floppy and the Wyrmkeep multi OS re-release CD have been translated to Italian

svn-id: r30410
"
"561a5a4b22ec4b92c8752670e3aee96cc4edd702","2008-01-11 14:22:46+00:00","Fixed capitalization

svn-id: r30411
"
"b460e0880b9645f2fc8d9bf3ad157efb6727473d","2008-01-11 14:27:07+00:00","Cleanup

svn-id: r30412
"
"b53a9eadebad29ea73e0dc20c386139ee8ce46e0","2008-01-11 20:09:12+00:00","doc update for 0.11.0

svn-id: r30416
"
"3e980392d5d137e17a2524a2871af61f4335ef8e","2008-01-11 22:12:06+00:00","Fixed bug #1861582 (COMI: Banjo duel seems harder than in the original) by changing the way SCUMM updates the timer vars (matches disasm now). Beware of regressions\!

svn-id: r30418
"
"6bc4a9a35ee0a4ba9d14d2477071dfd1715cc07f","2008-01-11 22:13:34+00:00","The SCUMM timer fix makes the workaround for bug #1324106 obsolete

svn-id: r30419
"
"78e4564c46a97873bdacc6e07918bc22081328a3","2008-01-11 22:15:44+00:00","Added some post-0.11 changes to the NEWS file

svn-id: r30420
"
"33ca851c4173310a2bed011b654b9a6428d728a8","2008-01-11 22:19:20+00:00","Another NEWS update

svn-id: r30422
"
"d34e3c8ce486238e8218d7c1356cbaa1fc335e19","2008-01-11 22:31:22+00:00","2008

svn-id: r30424
"
"9c74480beb6d2b96095161d16eda7560afc700cc","2008-01-11 22:39:51+00:00","Setting date for 0.11.0 release

svn-id: r30426
"
"d205129f2bd1c51791b73b619797cfe0b4723800","2008-01-11 22:44:28+00:00","First part of Maemo port

svn-id: r30427
"
"b97c9ef136436112e3a58e5fbe4a2b59242d4152","2008-01-11 22:59:13+00:00","Work around bug #1324106 again. Apparently, I was mistaken the other day when I
said the timer changes fixed it. This time, I've made the workaround a bit
simpler to understand, though.

svn-id: r30429
"
"56472fe8bfa1dcd26043090ecc0bcc7a44bbfe1f","2008-01-11 23:01:20+00:00","Fix Maemo patch to configure

svn-id: r30431
"
"dde154c3edee7f2673fe59de4475f931e03fd812","2008-01-12 01:30:11+00:00","Removed old copyright 2005-2006 line from several files so that their headers are consistant with the other files

svn-id: r30433
"
"a5a4a6fde53a233cec068fb4c44cc2e62353cb7b","2008-01-12 06:34:11+00:00","Bugfix for actors getting stuck (losing their schedule)

svn-id: r30435
"
"afd8743465ced91b0dae6544b169bdcab848745b","2008-01-12 07:59:39+00:00","Commit patch #1869747 'KYRA: HoF sjis patch'.

svn-id: r30437
"
"4f8cf19292ed5d76b0e67a77331ae7d5a2112955","2008-01-12 08:04:00+00:00","Commit patch #1869749 'KYRA: HoF Towns Audio fix'.

svn-id: r30438
"
"3629d64413f73265f20820d7e614b1a0d8d4216c","2008-01-12 08:18:37+00:00","Use getMousePos in checkInput.

svn-id: r30439
"
"48bd0ca6b6e62105e7536fe00d4c9a87174859e7","2008-01-12 08:31:36+00:00","Removed warning in Screen::getOverlayPtr for now.

svn-id: r30440
"
"7d635a4b9c0d7bd250779ae2295ae4758106a7e8","2008-01-12 10:46:51+00:00","Added function to encapsulate/protect manipulation of background.

svn-id: r30441
"
"b45fb2e01d3b7e59fe45536600eabb8907d48c00","2008-01-12 17:53:03+00:00","Add fanoush to credits

svn-id: r30448
"
"e704436f36b7599ef2a50031349e302aabd4089c","2008-01-12 17:56:07+00:00","Add fanoush to copyright

svn-id: r30451
"
"323aafcf78c27f03250e17499787d61797228b42","2008-01-12 20:18:41+00:00","The dummy ('narration only') cutscene player misbehaved a bit if the cutscene
soundtrack was present. It should work better now.

svn-id: r30455
"
"af486e05241ac4022e851a4e8c6ac11be4dd28cc","2008-01-12 22:30:09+00:00","Patch #1869152: 'MAEMO port preliminary patch'

svn-id: r30458
"
"68f41bd71b01bcbdb54949df630410a908e60b58","2008-01-12 23:30:07+00:00","seqId 4 should pass fadeout music not silence ignore

svn-id: r30461
"
"ae9e25b30f07f414ef8d555c195e148e53c40d4f","2008-01-12 23:54:19+00:00","refreshScripts should check for music state not sequence. it will create regressions in comi :) that part need more investigation.

svn-id: r30462
"
"6b34fcc2b4f8933110d32c80eebb871bb398c91f","2008-01-13 00:10:30+00:00","added missing stoppingSequence to music transitions. still i'm not sure if it trigger properly in our imuse implementation

svn-id: r30463
"
"d27c118acc455b57ba988b0bbbb681fc36914ee9","2008-01-13 00:15:43+00:00","additional missing stoppingSequence to music transitions.

svn-id: r30464
"
"94834008125a625292a905f048e64328ee4416e7","2008-01-13 01:03:15+00:00","fixed fadeOutMusic in transitions

svn-id: r30465
"
"bf07f977e259227fc5cafac7a859ba78145b80e2","2008-01-13 01:08:22+00:00","revert experimental hack

svn-id: r30466
"
"2222b947ba08d57ca9cd1b188e3abe5b31299a1b","2008-01-13 12:54:13+00:00","WORKAROUND bug #1870304: Solaris does not provide INADDR_NONE

svn-id: r30467
"
"3bda6cd127553c64782d9609b6009522e66c04ed","2008-01-13 12:57:42+00:00","Adapted the dist-scummvm.sh tool for SVN usage, making it once more super easy to build release tar balls

svn-id: r30469
"
"8ed59f8ba96553a3e9ab85db318fc08bc9238df6","2008-01-13 13:24:14+00:00","Fixed typo (SVN->CVS); expanded legal header to point to our COPYRIGHT file, and add some SVN tags

svn-id: r30470
"
"9e5e73eb9a5deab58ff9f3128372bceaa6aacfbe","2008-01-13 13:24:47+00:00","Added GPL header to configure (it really is complex enough to justify that), and removed some old TODOs

svn-id: r30471
"
"79e1579cb3119a70677f7c7c158c5e7686b65f6d","2008-01-13 14:44:29+00:00","Fix warnings HashMap causes on some compilers (notably, GCC 3.x used for various cross compilers)

svn-id: r30472
"
"696ea9d301cae1f2a123c37ddaa7490544cd99a0","2008-01-13 17:05:43+00:00","Various small patches to the build system by jvprat

svn-id: r30473
"
"a3f6278b4382661c1eff298e5bd01eedfbdb0afc","2008-01-13 17:59:53+00:00","Clarify comments on compiler warning flags

svn-id: r30474
"
"16717ce5e19cec165a26b6fb912e19056d0f3db1","2008-01-13 22:02:27+00:00","revert updateFadeMusicTrack

svn-id: r30475
"
"7b1543357216d63885a62f785d65d42ab01766c4","2008-01-13 22:12:35+00:00","Removed unnecessary semi-colons.

svn-id: r30476
"
"9948b667ba8b6b634169ef69883fe5b1cbe6af3c","2008-01-13 22:16:46+00:00","Indentation.

svn-id: r30477
"
"a493647076652f638f0715947eaffcbeb19e3c6c","2008-01-13 23:43:17+00:00","Indentation

svn-id: r30478
"
"758c4b16555c63d4d5aae4236369e9d132e60f39","2008-01-13 23:44:52+00:00","not need call refreshScripts in demo version of comi

svn-id: r30479
"
"a6f8e5c89a41bf10b65251ed1ec97b36c99b7313","2008-01-13 23:48:56+00:00","correction fade out music times in comi demo

svn-id: r30480
"
"5870bebd6d4bf659c4a405b3a0be895ff42f93b0","2008-01-14 14:48:35+00:00","fixed setting hookId for music, it doesn't worked before

svn-id: r30481
"
"d167ad4066ce1e8365e04de24cd09202a1e99e37","2008-01-14 17:03:14+00:00","Workaround for bug #1660424 (KQ4: Zombie bug) which is a script bug present in the original game.

svn-id: r30482
"
"f15b41596b39deb141a2550d82727659128e11af","2008-01-14 17:26:49+00:00","implement special case for playing music with beginning offset where other one stopped

svn-id: r30483
"
"f2f0d084e74866d429d142736cacf5c6535db66b","2008-01-14 20:12:35+00:00","i forgot 'break' in the loop

svn-id: r30485
"
"c36b44878a9cf1b487438eea16a65b9efb2a1387","2008-01-14 20:17:19+00:00","put 'break' here too, only one music in non fade tracks allowed

svn-id: r30486
"
"6992238026e7459207b83b280e1420a7eea4ab0c","2008-01-14 20:35:58+00:00","experimental force flush fade track if it's in use

svn-id: r30487
"
"8ada12d3d8f47e122e6ce5bb7d2d01230aa6b9a4","2008-01-14 21:42:39+00:00","revert last experimental dimuse change, force flush

svn-id: r30488
"
"f433c621121e8b1d60e0f2b086f2c9313e76ab5e","2008-01-14 23:41:42+00:00","implement force flush old fadeTrack. fixed trackId in new fadeTrack, it wasn't set properly, caused switching regions.

svn-id: r30489
"
"9639666629ed4e41c4b0f84876ddf113d2525971","2008-01-15 00:37:37+00:00","if track sound data is compressed reset data offset to beginning of region. we need implement seek in stream anyway or drop support

svn-id: r30490
"
"86714835f1603ade5d54af0e503e0b70bf2aee33","2008-01-15 01:35:05+00:00","back to previous way of copying stream, so it continue old stream

svn-id: r30491
"
"4b9d2e937050dc0af3907e28af2fcbb40ecde9aa","2008-01-15 12:51:26+00:00","implement loading markers 'exit'. dumped version 3 for compressed bun files, compress tools are not ready

svn-id: r30494
"
"75099c6c207b0751aa2857f5ac901896e18a99a0","2008-01-15 19:34:35+00:00","forgot release string in the 'marker'

svn-id: r30495
"
"173988960be7bb4a73a6911b2f4474b85387145c","2008-01-15 20:06:41+00:00","Initialise _lastTableWidth. (Fixes Valgrind warning.)

svn-id: r30497
"
"c3d4abe4b7b6bcfbb53edd76bffd64f8a79b129e","2008-01-15 20:09:56+00:00","fix last commit to release, and add version 2 fallback for compressed files

svn-id: r30499
"
"d0e5df5bfaa583692b9114fab0964135fa24d24c","2008-01-15 20:11:28+00:00","ops

svn-id: r30500
"
"5dc2caa3070d35bd41446089d34609ee1c50e546","2008-01-15 20:30:48+00:00","Since the mixer uses 'delete' to free memory, we should allocate it with 'new'.
I don't know if I got all cases, but I no longer get any Valgrind warnings at
the beginning of CoMI when using the original sound/music files.

svn-id: r30501
"
"8935c574d547903b0c8d760d406873a3d8a36228","2008-01-15 20:36:54+00:00","Fixed warnings.

svn-id: r30502
"
"6bb2f4447240bf3fe5fa16a8945ecd60866f2625","2008-01-15 21:35:03+00:00","implement dimuse transition 12, not tested yet

svn-id: r30503
"
"552353663d563d12fa983822740de8336e69b73d","2008-01-15 21:38:06+00:00","ops

svn-id: r30504
"
"08f135745186a7080ddc1b1e7fafed92ce92b3e0","2008-01-15 21:46:12+00:00","Use scumm_stricmp() instead of plain stricmp().

svn-id: r30505
"
"fe12cf8096ccb6338cdca7170e926c98a7149e92","2008-01-15 21:56:53+00:00","Fixed bad memory access. (Wrong index variable when reading sound->marker[].)

svn-id: r30506
"
"72dc3dcc0dd1fc6c423fc59f805a3a1668cebf3e","2008-01-15 23:40:01+00:00","Set the number of speech segments in The Feeble File.

svn-id: r30508
"
"877418503c9f913c3406cd6d8d8349d24ac53e85","2008-01-16 09:59:49+00:00","Added workaround for Edwina's walk to position, and removed special case handling for Goewin's walk to position

svn-id: r30513
"
"a7a46b86a5db6756a5db39b1caa38b29e23448ec","2008-01-16 10:03:30+00:00","Added workaround for Edwina's walk to position, and removed special case handling for Goewin's walk to position

svn-id: r30514
"
"019624e3c1a9ebc83e5f7e81ca2abb98228acaa2","2008-01-16 10:06:19+00:00","Added code fragment to correctly set the walk to position for Goewin (for interacting with her) both when she's in the Apothecary and when she's out walking

svn-id: r30515
"
"d6e2e1431cc83b7376cb160ca09c24e05dcdb3c9","2008-01-16 15:19:33+00:00","Confirmed that Amiga version of King's Quest III (v1.01 1986-11-08) using Amiga AGI 2.090 uses value 5 for v20 (i.e. the computer type variable). Thanks to Raziel for the info!

svn-id: r30516
"
"bb2c102cbbb1cfa8aa647fbb13aa1620cc40db54","2008-01-16 20:01:35+00:00","clarify warning

svn-id: r30518
"
"6b330411722ea543bce081f04c3fa4708e365159","2008-01-16 20:03:54+00:00","ops

svn-id: r30519
"
"bd32e7a6b0c471c2c7fc250742ca241d72ecfee7","2008-01-16 22:20:34+00:00","experimental seek in compressed streams in dimuse in time ms resolution

svn-id: r30521
"
"0db783608bba8882defabcabee9e9e1fe5bd0fdb","2008-01-16 22:24:23+00:00","forgot disable that too

svn-id: r30522
"
"2ef04f972c6e77ad6ab7f5d8008895e39fda9c88","2008-01-16 22:41:48+00:00","Fixed some warnings

svn-id: r30523
"
"00ecb126e3bb9ec83935a2b07eb423a31dfaa46e","2008-01-17 09:05:56+00:00","Bugfix for the position and size of the copy protection dialog instructions in the German version

svn-id: r30524
"
"62a0715200612814f5ac4e09ff5cc6eddb26142e","2008-01-17 09:45:40+00:00","Corrected offset for animation of player operating rack in German version, and cleaned up the talk data reader which should fix some bad talk data being generated for the German version

svn-id: r30525
"
"3a0f7b4ea89280c32f30dbec33d4bd6ae72f99b6","2008-01-17 09:50:42+00:00","Updated required lure.dat version number

svn-id: r30526
"
"5a2440ce1b487dc896cd60d76871f40236d22687","2008-01-17 11:16:00+00:00","Fix for isalpha() assertions (Almost identical to revision 29924's fix). Added the rationale for this fix in comments so hopefully this won't happen a third time at the same point in code ;).

svn-id: r30531
"
"4511ba81a400e361e7a24a44341f81a79fc98a34","2008-01-17 11:18:30+00:00","Bugfix for logging the description of actions being done

svn-id: r30532
"
"931b4abe5e81ba98f26109b4c7b3ced872b04bd5","2008-01-17 11:36:54+00:00","Confirmed that the Amiga version of Space Quest II v2.0F using Amiga AGI 2.202 uses value 5 for v20 (i.e. the computer type variable). Thanks to Raziel for the info!

svn-id: r30533
"
"0bfbd62ce7c06f66b4b109aa9aa65bd6c994d4d4","2008-01-17 12:21:31+00:00","Fixed obsolete comment.

svn-id: r30535
"
"51ad8e29beeb8cc9ddf171e6759643ff93e2b054","2008-01-17 21:06:29+00:00","fixed regression in allocSlot in dimuse, that fix bug #1874045

svn-id: r30536
"
"fa1495de7bb0280eb16b67ac3d5b6a028c5fca44","2008-01-17 21:35:31+00:00","implement exists(), isReadable() and isWritable() stubs using access()

svn-id: r30537
"
"9a699c97050007355a709ccddbc86ce8c1ad04b4","2008-01-17 21:46:17+00:00","reduction a bit of code

svn-id: r30538
"
"d85e148f4fbbeaf7f18bd511e32629194edbd2ab","2008-01-17 22:55:22+00:00","restore TrackId meaning

svn-id: r30541
"
"586ef72e969776c51625836274e6b14d0cb4a48b","2008-01-18 10:43:51+00:00","Increase talk dialog size by 2 pixels to accommodate a very long word in the German version

svn-id: r30545
"
"e6c20003c04fdfba9b72a2d577fb95c02fac786e","2008-01-18 10:49:48+00:00","Enhanced Surface::writeSubstring to crop any string that exceeds the width of the surface - this fixes a visual glitch in the German version where some lines were so long they were exceeding the size of the screen

svn-id: r30547
"
"c2d1554c7d0e61e3c5dec74bbad64d91906228cf","2008-01-18 16:38:11+00:00","Don't hardcode value for which we have wonderful and nice constants defined ;)

svn-id: r30549
"
"eb03de63bc7ac85d1c0c37a01998751c59ac0ec4","2008-01-18 17:08:53+00:00","iMuse Digital: Moved track & table definition from dimuse.h into separate header files

svn-id: r30550
"
"9a1e7a0c3536761dc81564d09300cdae59ff5f61","2008-01-18 17:23:10+00:00","Possible fix for bug #1874516 (QUEEN: Lockup on quit)

svn-id: r30551
"
"4ba2df8792a2b05666b9bd085e69bdfb97cbbfd5","2008-01-18 17:24:34+00:00","Use explicit path in #include statement (DS port specific)

svn-id: r30552
"
"bc0c66287c66202e45520d62053c2ee3ddcf7dca","2008-01-18 17:37:07+00:00","Removing duplicate content and adding GPL header

svn-id: r30555
"
"a53a6cb9adbf24b0b9601b0cb60482c6d12e2ea7","2008-01-18 21:37:31+00:00","Updated MSVC9 and MSVC8 project files for commit #30550

svn-id: r30559
"
"f0e131c9c3f15add381047e6f85f486d88c6d0d1","2008-01-19 10:58:43+00:00","fixed, it might overflow int32

svn-id: r30560
"
"2671e5083c8f54ff12a8845524e2a37b758b1f2e","2008-01-19 11:14:28+00:00","malloc -> new, free -> delete, added few asserts

svn-id: r30561
"
"4cbd3e6af8272eadde5bd876625b09c12a751f75","2008-01-19 11:20:15+00:00","Fixed a crash in the rat maze (reported on the forum) that made the game
uncompletable. I sense a great disturbance in the Force... as if millions of
voices cried out 'ScummVM 0.11.1' and were suddenly silenced.

svn-id: r30562
"
"00de5113350caefc542244c5f9f75ee7d153bd4c","2008-01-19 13:26:53+00:00","fixed support for compressed streams in dimuse

svn-id: r30564
"
"72d59da6cb42f354f8e1b786858d573c0740f9ae","2008-01-19 16:06:20+00:00","missed setting trackId while starSound,
added more debug output,
verification of jump code, it might have regressions

svn-id: r30565
"
"62d4b44502597f55a393059e1f8a54106dd8cb8e","2008-01-19 17:13:53+00:00","revert code to fade out first region if jump hit

svn-id: r30566
"
"35fb2055b08c42a680b011cc5641de4024229d74","2008-01-19 17:30:49+00:00","moved fadeDelay

svn-id: r30567
"
"78166fb40b31e616983ddf196690b0497386136f","2008-01-19 17:35:06+00:00","changed warning into error, to be know for sure if it still trigger

svn-id: r30568
"
"703667b606259b1491ff42953a99ea0e579ed42e","2008-01-19 19:32:40+00:00","allow force flush fade track, it happen while very fast switching rooms

svn-id: r30570
"
"604d4d96eae585c2a46dc9702b5cb0062a816202","2008-01-19 20:00:36+00:00","fixed potential unitialized variables, one array overflow

svn-id: r30571
"
"51565663cc6832e24d861aea24dbeaa6411d5afd","2008-01-19 20:07:44+00:00","increase a bit more

svn-id: r30572
"
"d0f80d274389cbcd45d0b4bdb393c6fb0028c256","2008-01-19 20:50:58+00:00","one byte more for array :)

svn-id: r30573
"
"b74d38586d69a375c53e3c1ef3aaaea2ed0aaf0a","2008-01-19 20:53:28+00:00","fixed potential unitialized variable

svn-id: r30574
"
"f1fb08273d8c386c4b815fcc39c4a977744f6f5f","2008-01-19 22:01:21+00:00","export device name to SCUMMVM_MAEMO_DEVICE variable

svn-id: r30577
"
"08a0caa17fba3308138ef9792254224b99d779cf","2008-01-19 22:24:43+00:00","Added MD5 checksum of japanese mac FOA

svn-id: r30580
"
"99e2c7c1d65251a188b986685bd7986dda82edb9","2008-01-20 03:38:16+00:00","Fixed bug with saving of cached actor schedules and added saving of talk data flags

svn-id: r30582
"
"c9b682243821a6310c6299cb2950d60a16a278ae","2008-01-20 03:42:42+00:00","Fixed shadowing warning that I missed

svn-id: r30584
"
"f3e42ffa39cde156438b6293d0eb8335d0a18fe5","2008-01-20 12:50:27+00:00","- Updated version numbers, Implemented exists properly, Added two engines in main_features.inl

svn-id: r30586
"
"eafc9f58f2c58452e64cdd28d12fdba326514b93","2008-01-20 13:19:05+00:00","rename to prevent confusion

svn-id: r30587
"
"77838d91e65ddeccd53ce93d9d37632123a4d174","2008-01-20 17:02:28+00:00","fix/workaround for bug #1624464, as we do not support game playing on two different CDs

svn-id: r30588
"
"e8374f6775cae3cc9a4b2f0613312bee4bf57d8d","2008-01-20 17:12:00+00:00","Removed obsolete comment, fixed indention

svn-id: r30589
"
"ec66f6765c40bdc0a62be5a5755886bd38738ba8","2008-01-20 19:30:48+00:00","added experimental hack to code to prevent the same start music again if old one didn't have chance finish. it's fix bug #1861704, it may fix other similiar things when seq is to null. added few changes to debug logs.

svn-id: r30590
"
"369948a5a2c9753a369b66dfe3e0ee145d590d5e","2008-01-20 23:06:09+00:00","Add Spanish Amiga version of Elvira 2.

svn-id: r30592
"
"fe8c2b89b1266f64cfd7e4b5123d4c0bcb831163","2008-01-21 00:10:14+00:00","for debug logs for dimuse

svn-id: r30594
"
"41e478d14260610755773cee88c0a7b4673466ca","2008-01-21 00:39:44+00:00","fix debug output

svn-id: r30595
"
"50845303485d74d4ced816177e4a97548f0e06ac","2008-01-21 00:42:05+00:00","disabled force restore state music, it seems fix bug #1757010, at least i see/hear difference :)

svn-id: r30596
"
"86456702f91e6a82dbc8f363e0bc4631212c01b6","2008-01-21 12:44:39+00:00","Move tag2str() to common/

svn-id: r30598
"
"daf2bc9579a7405079b818213434efc6ab9bb1c1","2008-01-21 13:01:32+00:00","replaced the unsafe tag2str implementation by a safe one, now that it seems to be meant for general use ;)

svn-id: r30599
"
"6b188943acce4a9d1d8dfc7f115e30220b523750","2008-01-21 20:03:37+00:00","Merged low level blitting functions into one single routine.

svn-id: r30600
"
"8d3f7c68ee61bafc78f738efc474bc2c3c94161c","2008-01-21 20:48:25+00:00","Functionality for is readable and writable

svn-id: r30601
"
"8d1dd18bdaa95ab01c9bf56aeae1e15439f51195","2008-01-21 21:09:42+00:00","Implements 2 arguments version of the adj.ego.move.to.x.y-command. Should fix bug #1733297 (GR: Actor stuck (Amiga version)). Savegames when using adj.ego.move.to.x.y-command may be broken at the moment.

svn-id: r30602
"
"2890816046a560c0c10000d46ffbc1bcfaabd204","2008-01-21 21:39:30+00:00","Proper data file paths for S60v3

svn-id: r30603
"
"fec313a1ac41d50f01a8532bc099052af337073c","2008-01-21 22:06:14+00:00","final fix for bug #1757010

svn-id: r30604
"
"2204661dd6821f8729d0495c222ddebbf1bd842a","2008-01-21 23:24:11+00:00","moved debug log

svn-id: r30605
"
"f7fa04227c25b26e7b6f50a49d6b30fc4a793a37","2008-01-22 09:08:59+00:00","Added a pause when the MSVC conversion tools are finished, so that the DOS command prompt window doesn't close immediately

svn-id: r30607
"
"e82222a0963ae1c14c42a5a8bddc73cf72f9f35b","2008-01-22 09:12:46+00:00","Support both ways to represent a version number, with a dot and with a comma (e.g. both 9.0 and 9,0)

svn-id: r30608
"
"00796bb5988184eb76cfa661e0de94aa998637a3","2008-01-22 09:46:11+00:00","Bugfix for transformation sparkle to finish if the player changes room partway through animation

svn-id: r30609
"
"c4c481fecf8050aba4a55dd31afac2cbc6fe9236","2008-01-22 14:16:02+00:00","Removed backends/intern.h

svn-id: r30611
"
"dfc1ba9dcc03e84d133e676baac0aac2154296c1","2008-01-22 14:17:18+00:00","Finally removed backends/intern.h itself

svn-id: r30612
"
"6258a8425c7b25378361c4b9147a527f8f02132d","2008-01-22 18:09:00+00:00","Fix configure for plain Bourne shells

svn-id: r30613
"
"f7a05a6d2021cf3d5b7622bb0c9bfa6cf008349a","2008-01-22 19:45:06+00:00","Fixed typo in comment.

svn-id: r30614
"
"dd45b7ad45729b5398646965f4e65e204906c8b4","2008-01-22 20:53:29+00:00","Some refactoring of text drawing routines.

svn-id: r30615
"
"c577c0ea81cdbd9e887e503fbaac1e77c7c65605","2008-01-22 21:55:14+00:00","Code simplification

svn-id: r30617
"
"b8a455db9b0f5cf0c058346be9dfcd85754b8e4d","2008-01-23 00:06:10+00:00","Define and use enumerations for AGI Mouse protocol 1.0's button states.

svn-id: r30620
"
"8e178f2e60c9bc28fc826c1698e4109268281f76","2008-01-23 08:08:15+00:00","Commit of patch #1877134 - 'Drascula: Remove Spanish characters'

svn-id: r30621
"
"465356ed08bfff2fd249b42e62096f5efb687455","2008-01-23 17:19:58+00:00","assert if hashmap iterator is out of bounds (e.g. happens when derefing end()

svn-id: r30623
"
"5ca95f9d65d0269eb2a20cb076243c3c2fef15fa","2008-01-23 21:00:34+00:00","Removing the outdated and obsolete msvc6 files (see FR #1878432)

svn-id: r30626
"
"2195528ca0cdf8b83af38d94562b488f4f230b32","2008-01-24 08:14:48+00:00","Got rid of the experimental NPC Schedule store in favour of moving the NPC schedules from the active hotspot class back into the hotspot data class, similiar to how the original game implements them

svn-id: r30629
"
"3423fc89718c32fe2556bd6dce094e74e19b61ef","2008-01-24 10:15:01+00:00","Added detection for fanmade AGI game Enclosure v1.03.

svn-id: r30630
"
"af4d740757257df13a6aa5e698b61d4dae22df20","2008-01-25 12:32:38+00:00","Fully fix bug #1660424 (KQ4: Zombie bug). The bug also affected room 18 in addition to the room 16 that was already taken care of in revision 30482.

svn-id: r30631
"
"4204371c1949515a40f93d5799e6164b6d2c1e56","2008-01-25 20:16:55+00:00","fix for wrong imuse table entry fixes #1879940

svn-id: r30634
"
"223f22c7730fe857cf6587e4c1ea6def6e458096","2008-01-26 19:25:04+00:00","Reworked FilesystemNode::lookupFile (fixing doxygen comment, making it possible to restrict the search depth, fixed the 'exhaustive' mode and some other tweaks)

svn-id: r30644
"
"33a90c1e009cf93e9f135817b8fdb12706811972","2008-01-27 02:05:37+00:00","Commit patch #1869752 'KYRA: HoF startup patch for towns and floppy'. (Slightly modified)

svn-id: r30645
"
"00672b32e1c176349d4621b071907b3e82633291","2008-01-27 02:06:59+00:00","Commit patch #1870149 'KYRA: kyradat tool update (hof ingame sfx)'. (slightly modified)

svn-id: r30646
"
"83b888b99b4476f8299735bbc050b3ac3a629a26","2008-01-27 02:07:41+00:00","Update kyra.dat.

svn-id: r30647
"
"5b6dbecb62a7a847f4c930b946c62e643a7d2821","2008-01-27 14:32:08+00:00","Limit the number of simultaneous open files in IHNM to 7, down from 12. This is necessary for devices that can keep a limited amount of files open simultaneously, like the PSP

svn-id: r30648
"
"fa5271d8366b40f20d645b31d5e3dad188a515e0","2008-01-27 15:10:56+00:00","Really fix bug #1846886: 'PUTTZOO: Windows version cursor/pointer drawn wrong'.
Also replace default HE cursor (used in Lost) with correct one.

svn-id: r30650
"
"fec6e22cc92358b08d4e0f62e5db18119e5f2e6d","2008-01-27 15:30:53+00:00","- slightly refactored user settings handling
- added user some settings handling for HoF

svn-id: r30653
"
"dd3a8672be7ef0b2e967ec40b09fc1f44a1cb252","2008-01-27 15:53:09+00:00","Fix for some problems introduced (like wrong text display) with last commit.

svn-id: r30654
"
"e431f827ec63316a99942f9197d7fd7de9fc6ac4","2008-01-27 15:54:16+00:00","Disabled a debug function which throws warnings in older versions of GCC (e.g. under BeOS)

svn-id: r30655
"
"bcdfb4817292e583e2dbbcc76b3775fb49ec775f","2008-01-27 15:56:56+00:00","Cleanup.

svn-id: r30657
"
"5361683346930cd956f30a4f9ad2c9769a943884","2008-01-27 15:57:47+00:00","Fix the endianness detection in Solaris 8 (It fixes but #1871509 'GUI distorted on Solaris/sparc')

svn-id: r30658
"
"278857698dc7b1623096fe1ad12511dc4c886c7e","2008-01-27 16:52:50+00:00","Possible fix for the errors under older versions of GCC (e.g. under BeOS)

svn-id: r30661
"
"66e9d4f5e8f35b28f8abd9ce53a0da4da3ce8985","2008-01-27 19:47:41+00:00","Removed trailing spaces.

svn-id: r30664
"
"d6c34bdc4b12ea7bef445ef4d84bf8a5370c02dd","2008-01-28 00:14:17+00:00","Fixed the spaces before tabs.

svn-id: r30667
"
"0728aa0d7f457579724ec145685795eb76478148","2008-01-28 08:40:30+00:00","Forward declare HashMap::ConstIterator (this might fix compile errors with some old GCC versions)

svn-id: r30670
"
"e32e1b732cb99e760d4bdb4b72b0dd8a3d96bb7b","2008-01-28 11:28:49+00:00","Changed array of method pointers to case statement to fix compiler error in earlier versions of gcc

svn-id: r30672
"
"be2c5d3c8772963fe2c1a00c1a50546438e3e7a5","2008-01-28 12:20:53+00:00","All interactive objects are now drawn in the framebuffer instead of using the old kBitBack/kBitFront buffers. Animation are not sorted yet, so they can overlap in an inconsistent fashion for the time being.

svn-id: r30673
"
"1888cbe50baabc7ac6c00849f31f7e13d6fe1028","2008-01-28 12:31:14+00:00","Oops. Forgot ScummVM header in new source file.

svn-id: r30674
"
"cce8e2596019d462eb3e2f6e0375a41a8c510487","2008-01-28 13:10:49+00:00","Removed all job routines. Stubs have been left for future reference in the code for BRA.

svn-id: r30675
"
"57a862b2a0fa2114a187c9575a4e8a0db9169fc0","2008-01-28 14:45:54+00:00","Fix compilation

svn-id: r30676
"
"25172a852424cff709a1d06210928fe6c4c848dd","2008-01-28 15:10:25+00:00","Fix compilation of Parallaction on MSVC 8 & 9 (Added gfxbase.cpp to their project files).

svn-id: r30677
"
"25d92a602ef8b06c6d40f1dc0ecceb72b0dcb37b","2008-01-28 15:20:25+00:00","Removed unneeded copy constructor & assignment operator (the compiler will auto-generate them for us)

svn-id: r30678
"
"1bba7bd04e1ca2cdc20cb2646f7e32a65c0d53f0","2008-01-28 15:20:47+00:00","Fix 'member var shadowed' warning

svn-id: r30679
"
"3c2c16c705b41e0186cd203bc303a0902bf3059e","2008-01-28 16:52:41+00:00","Fixed animation sorting: everything should be drawn like before revision 30673 now. Character may still disappear when changing location because of wrong resource management, though.

svn-id: r30680
"
"56eed45317dd643528b3980ff7f899fbf0be7bc4","2008-01-28 17:28:16+00:00","Move low level background management into Gfx.

svn-id: r30681
"
"a206f6e87331c7c1ae2219657af45f9583fe75c5","2008-01-28 17:36:08+00:00","Changed guiSelectCharacter to work with only screen buffer.

svn-id: r30682
"
"5fb19e226cca8825d3316715641b155605ff0189","2008-01-28 17:37:15+00:00","Oops. Forgot to update this in the last commit.

svn-id: r30683
"
"efdc6f646f4b051d956d6c373da0b29ee3514694","2008-01-28 18:10:16+00:00","Changed _c_moveSheet to work with only 1 buffer.

svn-id: r30684
"
"b80419efb4177fb3cd5d8e2ace3d08d5840fdcc0","2008-01-28 18:15:06+00:00","Made halfbrite work again.

svn-id: r30685
"
"68fc3f1deea7600790e91b90edb7b4586dc91ae9","2008-01-28 19:56:29+00:00","Removed usage of kBitFront and kBitBack. Only the old kBit2 buffer is kept to store the background picture.

svn-id: r30687
"
"8e4f5b6f82bf6e2cff76a45b22229d4f206ef3a5","2008-01-28 20:06:40+00:00","Fixed warning.

svn-id: r30688
"
"1a36ba488c336d1b52636b9a9a96bd31e28fc843","2008-01-28 20:40:05+00:00","Cleanup (step 1).

svn-id: r30689
"
"7aac83007d53aa2d398a9a1e639f8d29064819a1","2008-01-28 21:54:44+00:00","Fixed typo in debug message.

svn-id: r30691
"
"d8e1f5a060654e1abd8ff9fc69b34320383e59f3","2008-01-28 22:05:23+00:00","- make Common::sort supporting a function object to compare two entries instead of operator <
- adapt parallaction to use the new Common::sort function

svn-id: r30692
"
"0150ada2d70f1894c4003face4931a4e88cfaffb","2008-01-28 22:20:55+00:00","Replace lock/unlock/lock/unlock by lock/unlock for efficency

svn-id: r30693
"
"c4ad0a1c0d0053128e16ecbe739e33cdf9f57830","2008-01-28 22:21:47+00:00","Commit slightly modified patch #1880670 'KYRA: Hof: Zanthia chat fix for towns and floppy versions'.

svn-id: r30694
"
"0e02a9398ab9208c89b70ff93c06dd3f2077470e","2008-01-29 09:37:03+00:00","Cleanup (step 2). No code outside Gfx reference screen buffers anymore.

svn-id: r30695
"
"d6f45b451b88215897514a44cdb6ab0ba9cfa273","2008-01-29 09:58:21+00:00","Fixed regression when displaying animation: the issue could only be noticed when characters appeared out of their sketches in the intro.

svn-id: r30696
"
"fb4ef4b3942d1468b14dd95a0840979192461138","2008-01-29 10:04:49+00:00","More cleanup: kBit2 is now replaced by the BackgroundInfo structure.

svn-id: r30697
"
"afc474c8eb74bdc929dd5a6d20fae3c89715e0c3","2008-01-29 15:30:44+00:00","adding Sean Murray (lightcast) to the credits [1]

svn-id: r30698
"
"04dda324851d6415ab7ad59d83110387fa130ae2","2008-01-29 21:18:33+00:00","Combined two cases that did the exact same thing (In a switch-clause).

svn-id: r30702
"
"ec0804eb23ebb2228ec439c56dbcfa49b4811b98","2008-01-29 21:19:45+00:00","- Updated default char signing to signed (as per PC) in makefiles
- Fix for Symbian scrolling problem in GOB3, expressions not evaluated properly resulting in offset beeing set to -1 and not the right offset.

svn-id: r30703
"
"34b74cfc702690fafac2d8d8a12d8f544333eabe","2008-01-29 21:32:09+00:00","Updated max heap size to 64mb

svn-id: r30704
"
"fe5277794372e7d89c2fce41ff8a6f06880e37d3","2008-01-29 22:39:09+00:00","clibable menus for symbian

svn-id: r30706
"
"d92dbac6726d1beb8a9986021e702f76cd6aff8e","2008-01-30 01:58:43+00:00","Fix for bug #1881170 (AGI: palette-related glitches reported). Made AGIPAL use only the lowest 6 bits of each color component (This should be the way the original AGIPAL-hack behaves too).

svn-id: r30708
"
"5c6597562a0cc3fdfb621a8955a3b04f544b9ecf","2008-01-30 22:51:21+00:00","Add ListWidget version with immediate parameters.

svn-id: r30709
"
"289d18ed070765de3d392acf92d2d5dbfbc33dbd","2008-01-30 23:09:18+00:00","Fix shadowing warning

svn-id: r30710
"
"f2a16e4f56443ad4b8a6eda7b8685bf3b1d94cc5","2008-01-30 23:12:51+00:00","Changed the parameter types of setFlags() and clearFlags() to match their definitions

svn-id: r30711
"
"ccc0f6b92d9295e04b4b701a19e8bb125338c6be","2008-01-31 10:38:15+00:00","Slightly simplified Archive selection when loading resources.

svn-id: r30714
"
"2f0ddd4ba39029a18ce05462ef8aeb5e67791f9c","2008-01-31 12:20:47+00:00","Patch #1880781: 'BeOS port for scummvm'

svn-id: r30715
"
"337164edee04a3389a57e1c0ee533a58083d5ce7","2008-01-31 12:59:44+00:00","Add Begasusu as an official BeOS builder

svn-id: r30717
"
"0ae9fe74674c4487bb74c2582fe03e74cc7da720","2008-01-31 21:19:09+00:00","Second part of patch #1880781: 'BeOS port for scummvm'

svn-id: r30720
"
"511019bd83c55d47fdc0e3c94220d3a68e851779","2008-02-01 23:32:20+00:00","Change InSaveFile -> SeekableReadStream where possible

svn-id: r30722
"
"5dfabb24d064a1a05cf4adc8d5f3f88c125ba5df","2008-02-01 23:36:45+00:00","Moved enum PluginError from base/plugins.h to common/error.h

svn-id: r30723
"
"7adfb1a2955f84a310d31777b193bdf5f33e0c0b","2008-02-01 23:37:16+00:00","engine.h was moved from base/ to engines/ ages ago -- update header file protector accordingly

svn-id: r30724
"
"249877fa82e6af59e6084bb3fa92cda49fb281aa","2008-02-02 00:41:31+00:00","Moved depth buffer and palette rotation data into BackgroundInfo.

svn-id: r30725
"
"dc979b03cf915ab10a6cf76bdb22f1f95b12612e","2008-02-02 00:54:52+00:00","New MetaEngine class (work in progress to replace the current Engine plugin API with a more object oriented approach)

svn-id: r30726
"
"ec715ea1ecc7ee0d85ed298f75ce0404d10d622b","2008-02-02 00:56:02+00:00","Converted parallaction engine to use MetaEngine

svn-id: r30727
"
"5165ff448d2329e3a27948fd73821f314eeb520d","2008-02-02 02:35:13+00:00","Converted the remaining engines to use MetaEngine

svn-id: r30728
"
"a93826036297315418068d0e6a528d068382629b","2008-02-02 02:36:57+00:00","Fix a typo

svn-id: r30729
"
"4227c0f7ce0abf6647e1cd9c64615e55d744fb68","2008-02-02 07:18:49+00:00","Fixed warning.

svn-id: r30730
"
"015ad5e4696243a96be383fce5c04350a71cb91f","2008-02-02 09:48:07+00:00","Some more integration of background code into BackgroundInfo.

svn-id: r30731
"
"5306701eab63b4b308225951d8f286ecf93ab1c0","2008-02-02 10:18:31+00:00","Allowed BackgroundInfo to display bitmaps smaller than the screen and other small tweaks to re-enable splash screens in BRA.

svn-id: r30732
"
"54b79f47dbbc6858990e1432086e6e0cea34d99e","2008-02-02 10:54:17+00:00","Now using customized SVG as icon for S60v3 and not bitmap. Original ScummVM svg icon does not work on S60 phones (rendering is corrupt)

svn-id: r30733
"
"7ec40800c1b5e776018e8457ba2108f0c05ae537","2008-02-02 11:04:21+00:00","Simplified icon

svn-id: r30734
"
"22ca167b3d6af9b89f388c6e23b9b96233b50a2d","2008-02-02 11:19:54+00:00","Update MSVC8 and MSVC9 project files for commit #30726

svn-id: r30735
"
"34b35348be77d8cccbea5ac858df5d1bde3008cb","2008-02-02 11:52:04+00:00","Moved AdvancedMetaEngine to namespace Common

svn-id: r30736
"
"36d863f94e99e05044b2e05f92dbaaf7ff38447e","2008-02-02 12:18:36+00:00","Reworked menu in BRA (now functioning).

svn-id: r30737
"
"33a534b76ca54b6230c851850fd431d345f383ca","2008-02-02 12:27:16+00:00","Cleanup

svn-id: r30738
"
"9f3ecd64092f5765c0b9952b10ddc223858ac7eb","2008-02-02 12:36:06+00:00","Cleanup of BRA menu code.

svn-id: r30739
"
"ed09766accb9cf677bf88802d7d268b06698a6bd","2008-02-02 13:57:29+00:00","BRA now loads and displays location backgrounds (at least in the intro).

svn-id: r30740
"
"fc78c57fabb4c1e29e1cebd07c4dd547cd9e1cb8","2008-02-02 14:08:13+00:00","Fix GCC compile.

svn-id: r30741
"
"97ef53a65258cfe43bfb5b2f5d1364e4b4cf82c5","2008-02-02 16:38:51+00:00","Fixed warning.

svn-id: r30742
"
"97eb13c22fbb23c31a3158317bcbf6ef44143490","2008-02-02 18:31:07+00:00","Corrected an off-by-one error introduced with the latest cleanups

svn-id: r30743
"
"23ca56961c622051531bfa24e10c89b7211d57ca","2008-02-02 20:18:29+00:00","Added the MD5 for Gob2 English Amiga as supplied by fac76 in bug report #1883808

svn-id: r30744
"
"22ead25049f7c6a9af627ee1763851cfd7b9e03d","2008-02-02 20:26:19+00:00","Fixed the description for the Gob2 Amiga demo (bug report #1883801)

svn-id: r30745
"
"d8349d66ff6199dcbd6c2412dcdc90a98380ffb4","2008-02-02 21:22:05+00:00","Subtitles are now displayed in the intro for BRA, though in wrong color (and I don't know why).

svn-id: r30747
"
"899fdcb3677925a8c1d9b4c9335ae17a2f1cccff","2008-02-02 22:45:31+00:00","Enabled rudimentary location switch in BRA.

svn-id: r30748
"
"5b64d512abb6f6a836d49559907e43a7719b62ef","2008-02-03 01:26:12+00:00","Introduce ARM code for commonest case of 'proc3' costume blitting (as
used for animation in SamNMax). Enabled by the USE_ARM_COSTUME_ASM
define. Currently enabled for WinCE only.

svn-id: r30750
"
"53ef575dbacdedc021579a9d200396fd68326824","2008-02-03 09:35:04+00:00","Missing ( in ASM_COSTUME code

svn-id: r30751
"
"c070f0d04f72fd0274b8d2048ea2f3a656c4a0f4","2008-02-03 09:39:26+00:00","Converted queen and sky to use MetaEngine (forgot them because they don't use the AdvancedDetector).

svn-id: r30752
"
"a6ad889aa22e0283bb24746d9da936fdf4f5a754","2008-02-03 09:39:43+00:00","Forgot to enable ASM opts somewhere (thought I had).

svn-id: r30753
"
"e51bf8021851d91f4904bd73263a455367d99b34","2008-02-03 10:15:36+00:00","Changed 'COMPATIBLITY' to 'COMPATIBILITY'.

svn-id: r30754
"
"748a90ca23e4a6554af6bc440f2d27a224cfbfa4","2008-02-03 10:48:07+00:00","Added code to unpack and render animations in BRA.

svn-id: r30755
"
"c561a9487c6d662988050f38d08b54b5a572dbc9","2008-02-03 10:53:42+00:00","Animations are now displayed in the right spots in BRA.

svn-id: r30756
"
"2e28552a7e74b3dcfe4716fda902c265ccce7f28","2008-02-03 11:00:55+00:00","Fixed location switching in BRA a bit more.

svn-id: r30757
"
"c6595e3bd20bb603b71e394eff5a41e7a945b8b7","2008-02-03 12:30:11+00:00","Changed ASM names to match those in the ARM asm implementations

svn-id: r30758
"
"c8529408189694a0594c17a69bc560a96b6b4759","2008-02-03 12:32:19+00:00","Added asmCopy8Col from DS implementation. Changed names to match GFX.cpp (and DS names)

svn-id: r30759
"
"c098453ea199ff4476bd3ada90200e2b90f4de58","2008-02-03 12:34:20+00:00","Added template param to CLIP since implicit cast is not working 100% on all platforms. Target type is int32 so used that.

svn-id: r30760
"
"deb6baf0dbeb5e08dba6bf66d70cee07d7c22d4f","2008-02-03 12:36:51+00:00","Migration code for users updating to the 1.1.3 iPhone firmware, which has a different directory structure and permission setup

svn-id: r30761
"
"786c02db9c3be74605eeea59e573c762d7926938","2008-02-03 12:36:57+00:00","GFX asm defines updated properly. Custume #define turned off since this is crashing.

svn-id: r30762
"
"298c2a35d2ec5546e10985d323f1b506035502c0","2008-02-03 12:41:33+00:00","Updated libs used for ASM

svn-id: r30763
"
"77001b85f95482e039e97b9200c6fbe8f1de0b2c","2008-02-03 13:06:43+00:00","Updated number of icons in the icon file

svn-id: r30764
"
"f486fd35b3161b48929d8cfb36473b7b553b5591","2008-02-03 13:12:51+00:00","Previous commit to enable ARM proc3 stuff for WinCE was broken, as I'd
forgotten to define the enabling symbol in cpp files. Consequently
I'd cocked up when copying the call to the ARM code across from my hacked
costume.cpp into a fresh one.

svn-id: r30766
"
"54576cbf1145b0ed13ee568da131d879ba0f50a4","2008-02-03 13:31:32+00:00","Updated flags to use ASM costume for sam and max

svn-id: r30767
"
"85171eadaae2f54581239b2723a02eab87a50f88","2008-02-03 14:58:16+00:00","Programs are now handled in their own list, instead of being accessed via the referring Animation.

svn-id: r30768
"
"a53d87791d25687f4cf730374fbcd21673cfbeeb","2008-02-03 16:02:21+00:00","- Character is now initialized when needed (for the moment only by NS)
- Forward lists are now bigger since BRA scripts are larger

svn-id: r30769
"
"aea99780ef0d0098bdb03041ef16115c2ec4abb0","2008-02-03 16:51:38+00:00","Implemented a couple more opcodes and added capability to load/display static images in BRA.

svn-id: r30770
"
"da98d10ebd74dfb0d6fda73b431eff3949bdf4bf","2008-02-03 16:56:25+00:00","instOp_on and instOp_off are now implemented, so removed warnings.

svn-id: r30771
"
"9302491e82fe8a984afa7e79f0a552dd3c91c222","2008-02-03 17:01:46+00:00","Use vmsfs_delete_file now that libronin supports it...

svn-id: r30772
"
"4c117772bd2dc6866b61d498848cf178a659218f","2008-02-03 17:02:51+00:00","Implement exists(), isReadable() and isWritable().

svn-id: r30773
"
"fea63a51814f169150a472a7195b8872f5929c79","2008-02-03 17:06:45+00:00","Fixed maximum token length for the parser.

svn-id: r30776
"
"015e73b79265e334768e7242cbc77aecbe497d62","2008-02-03 18:23:27+00:00","cleanup

svn-id: r30777
"
"f7a88e80746aa4ceadd160ada19b17fd1dde7398","2008-02-03 18:24:54+00:00","Removed some dead code

svn-id: r30778
"
"15975bdf7324a8b892562768fe73b6e17816d56f","2008-02-03 18:37:41+00:00","Made some advanced detector stuff internal (for now), as it is only used by AdvancedMetaEngine. Also removed obsolete ADVANCED_DETECTOR_DEFINE_PLUGIN macro

svn-id: r30779
"
"8a73356a2d6e2d6b7ecefb53e0d5e82484f0e697","2008-02-03 18:56:47+00:00","Revised Engine plugin API to only provide a single func which returns a MetaEngine instance. Used this to simplify the rest of the plugin system

svn-id: r30780
"
"7a70a4fb9227b10bf19e1649632cda66dc6cf485","2008-02-03 21:13:56+00:00","Missed file from previous commits. Bah.

svn-id: r30781
"
"0c6cd983dcc1e2eb6c89c67205505d7843d03bdb","2008-02-03 21:15:48+00:00","Replaced GUI dialog with warning. We don't have any screen to draw on yet.

svn-id: r30782
"
"13a99edb2dc07eed9838e7d99ac32efd840c495e","2008-02-03 23:11:45+00:00","Updated plugin.exp to match latest changes to the plugins API

svn-id: r30783
"
"afa731b0af7b6f7ef98b8cbd84c89befa66db817","2008-02-04 02:50:41+00:00","Fix a segmentation fault when running a game with dynamic plugins enabled.

svn-id: r30784
"
"dd7fcd686790ea6a2e9021eac5b9e1c8bff88d26","2008-02-04 07:38:42+00:00","Fix plugin unloading / cleanup

svn-id: r30785
"
"5fb7f7a4d66c48be928440c3142b196a479ca94c","2008-02-04 10:15:21+00:00","Commited updated version of my own patch #1868402: Basic savestate plugin API

svn-id: r30786
"
"3cd1e60e7adb6ca8e25aaf8b66222c2fe7fb5fab","2008-02-04 13:14:52+00:00","Moved common code from Plugin subclasses to class Plugin itself

svn-id: r30787
"
"468e9cb056382043008a1ffbbf09acbeb972d1ec","2008-02-04 17:04:03+00:00","Surface is a struct, not a class

svn-id: r30788
"
"e4ab5dd33964c536ca1813e4a78373dda0008052","2008-02-04 18:38:22+00:00","Change MetaEngine references to PluginObject where possible to make its semantics more generic.

svn-id: r30789
"
"a2101c0c6c53f5e18a898392c36663b21e28ec16","2008-02-04 19:57:17+00:00","Added FIXME comment about wrong color for subtitles in BRA.

svn-id: r30790
"
"ea15cf7236789223b259a51fc680f13761d51068","2008-02-04 20:35:18+00:00","Adjusted random number generator, thus improving animation quality in the intro. The general still acts like he is on amphetamines.

svn-id: r30791
"
"9d81f3602c45ff474203fc625c25ad098342a28f","2008-02-05 01:04:31+00:00","Fix indentation (spaces to tabs)

svn-id: r30792
"
"f8fe01b9fdc8852db9d6b038b813ec3f275f98ed","2008-02-05 08:16:52+00:00","silency ignored, we handle it differently

svn-id: r30793
"
"e1cff6a7c35dc523675a26de007e22cac403a8e1","2008-02-05 09:25:25+00:00","Added new debug command to show global game flags.

svn-id: r30794
"
"50ff4a46037ffe5b21d63556071ade0168c865ba","2008-02-05 09:26:28+00:00","Fixed size of temporary buffer for unpacking animation frames.

svn-id: r30795
"
"265621de5899b149cfb1a5a39ce823371d11b749","2008-02-05 09:30:58+00:00","Fixes to make BRA introduction run:
- fixed location command parser
- implemented stop command
- temporary disabled speak zones (audio is not yet supported)

svn-id: r30796
"
"17fdd182b6727220329efec61fbeed2c6b3feb8d","2008-02-05 09:55:17+00:00","Enhanced parser to handle multi-line comments in scripts.

svn-id: r30797
"
"dabefdce05e466fae8bf540b94886eadc7c4953d","2008-02-05 10:24:22+00:00","Changed main loop to allow BRA to return to menu after intro.

svn-id: r30798
"
"4174f0b9d42240bb7a1f76fc3f7e26182e5a4544","2008-02-05 12:17:00+00:00","Fix compilation on MSVC8 & 9 (Added gui_br.cpp to parallaction's project files. The file was introduced by revision 30739).

svn-id: r30799
"
"9f6282defcc100fd7eb6f8aa01de643555217f7e","2008-02-05 15:33:01+00:00","Fix compilation

svn-id: r30800
"
"bf4340d56224762994a5da2b102e4055000f5683","2008-02-05 15:35:17+00:00","revert accidental commit

svn-id: r30801
"
"c54e854e22c5c454fa502fe5b07d850d231eef1d","2008-02-05 15:36:42+00:00","revert accidental commit. It increases commit count. But better to compile before commit

svn-id: r30802
"
"441ec75a710be76045bcae16489cfe727f887758","2008-02-05 21:39:29+00:00","I think this is slightly easier to read...

svn-id: r30803
"
"338beeca84f3af8e9745c94e9e083ed2ad5ecf11","2008-02-05 23:24:09+00:00","Committed my own patch #1885901 to fix NASM warnings.

svn-id: r30804
"
"249c0b0a054aeef0fcd85f8a0d3b924bac1bcaaf","2008-02-06 13:44:01+00:00","Corrected mask and path loading in BRA.

svn-id: r30805
"
"782563f7492fd65cbc81b3f1bbc13cddd3c04480","2008-02-06 13:44:31+00:00","Implemented some more opcodes in BRA. Animations should now be visible in most locations.

svn-id: r30806
"
"715e33d63d62dc02dd37c7db9bfb92d5cb323b0c","2008-02-06 13:57:44+00:00","Correctly implemented little-endian masks in BRA.

svn-id: r30807
"
"246fbfd1e42e2946e10e1e1fe716edac72cbbf4a","2008-02-06 14:05:08+00:00","Added experimental debug feature: variables influencing the rendering that can be set via console using the 'set' command. The implementation is still partial. Leveraging on this, the engine can now selectively display the current background mask instead of the background itself.

svn-id: r30808
"
"014511f380c200874c3fe39515f8b377d1a02861","2008-02-06 14:12:59+00:00","Made font handling stateless.

svn-id: r30809
"
"c03cb964c0a7c2fac7e39cc0035ab9aa030cf3e5","2008-02-06 14:56:10+00:00","Fixed broken halfbrite implementation from some time ago (nobody complained!!!).

svn-id: r30810
"
"509f2f6659de65f63aa85e8cb07840e02c4f84c2","2008-02-06 15:38:33+00:00","Enabled moving projector in Nippon Safes. This should fix long standing bug #1729309.

svn-id: r30811
"
"edab25743e99161338bab334aa9a6863e7b3d621","2008-02-06 18:13:22+00:00","Silence MSVC warning about uninitialized variables

svn-id: r30812
"
"4be7dac9c321a8c63de138c8ffb9baa80acb97af","2008-02-06 19:50:45+00:00","Fix system hang under linux.

svn-id: r30813
"
"58d58d5100b5b2433192da03b2aa8a993cece605","2008-02-07 12:49:46+00:00","Implemented scroll command and added a couple more debug variables.

svn-id: r30814
"
"0657ef6a80d921afcc48b67853f5efffa4ea8f21","2008-02-07 15:15:10+00:00","Use sdl-config --prefix to enable better detection of include paths.

svn-id: r30815
"
"902374fac6acdb82ddefbdcb2aecd5d2f7b5d473","2008-02-07 15:23:27+00:00","Enhanced tools detection when crosscompiling with mingw32 and removed dupplicate options

svn-id: r30816
"
"7500103298638d60d4fa20a4d35695975e498e6a","2008-02-07 15:53:26+00:00","- Fix math lib test when crosscompiling
- Just need to remove the test files after all the tests

svn-id: r30817
"
"56c5d86431eff7a0e685ef947006e4db97d57107","2008-02-07 21:28:51+00:00","Fix bug preventing compilation in iterator code.

svn-id: r30818
"
"356ae3b9ce8b28b50e1f3df8c45bddeb861cd45a","2008-02-07 22:53:23+00:00","Fix code formatting and grammar ;)

svn-id: r30819
"
"ae0b605ad4c2b69f1e47e0d98c5cf3a881267318","2008-02-07 23:13:13+00:00","Reworked Kyrandia resource loading code.

svn-id: r30820
"
"9b5839082da2ad541200474c1acb5e16a3df076b","2008-02-07 23:14:53+00:00","Fixed regression introduced while reworking resource loading code.

svn-id: r30821
"
"31938bc071d6df12d31f4ad61cf368048cefea06","2008-02-07 23:27:08+00:00","Fixed kyra3 code.

svn-id: r30822
"
"8f0712a439d3cb2c124cab1e953d31b5bbb43c23","2008-02-07 23:31:13+00:00","Fixed kyra3 related regression (should show the menu now again).

svn-id: r30823
"
"49d0b1f91e32eda3956c0c1d8c0156ebd5854c66","2008-02-07 23:38:17+00:00","Fixed memory leak.

svn-id: r30824
"
"c103290e2b123510e9d9eb4716ae0336a9e61ede","2008-02-08 00:02:23+00:00","Initial support for plugin types

svn-id: r30825
"
"00987db3a97f37439cfc6e70991a08fde424d2b3","2008-02-08 01:02:25+00:00","Implemented plugin versioning

svn-id: r30826
"
"e3852c92a77fef402bb37863a8430f76275c38bf","2008-02-08 01:45:46+00:00","Remove undesired spaces and an old TODO

svn-id: r30827
"
"b6cad0f0ce9b266710383fceb69c9f4e3b0ffba2","2008-02-08 04:11:20+00:00","Added a simple non-optimized StringTokenizer-class for tokenizing strings. Also added a contains(char)-function to the String-class because it was handy in implementing the StringTokenizer.

svn-id: r30828
"
"b7717705ae280fdb6bc70c6998d7331ea067da00","2008-02-08 11:09:49+00:00","Should make load message appear in CD version while loading talk files.

svn-id: r30829
"
"02522a3a144cad030262533506baafa0460056a6","2008-02-08 18:43:13+00:00","Should fix regression which prevented kyra.dat to be detected corretly when in game path.

svn-id: r30830
"
"c98b51e40c126da037d44ee5e097cf08f33e442a","2008-02-08 18:45:25+00:00","- cleanup.
- kyra.dat shouldn't be load by default.

svn-id: r30831
"
"166698d29dc267f52e715d0d229b3e082d47718c","2008-02-09 14:40:52+00:00","Cleanup.

svn-id: r30832
"
"40b19365be6892024ff2176eb82f547fa23af2c4","2008-02-09 14:43:43+00:00","Added another check if PAK file is corrupted.

svn-id: r30833
"
"b3bab9afb9c531cf2b8431789200cc5b58afff39","2008-02-09 15:08:49+00:00","Implemented proper PAK archive detector.

svn-id: r30834
"
"15f798d48a9a6a4903b8db73eedbcbfdb61dcf85","2008-02-09 15:18:35+00:00","Added filename check before header check when trying to detect archives types, this should lower the file i/o need a lot when starting up kyra2.

svn-id: r30835
"
"5438bf2e9c07156e60c283cacc5b5cf373a85ab5","2008-02-09 15:33:04+00:00","Changed some asserts to errors.

svn-id: r30836
"
"bacdc6eff09abdb9a91a515fcf245687df244c7e","2008-02-09 15:46:06+00:00","Revised checking if files can be load.

svn-id: r30837
"
"76182fbd59878cdbb25915df69c149954fb0c556","2008-02-09 16:18:44+00:00","Revised way of how archive files are mounted:
- file entries from protected archives do not get overwritten anymore
- preload indicator of archives will be unflagged, if embedded file entries are overwritten by other archives

svn-id: r30838
"
"bc257fc37809981e4189f30603ffaa7df7343e26","2008-02-09 16:27:49+00:00","Fixed comments a bit (typos etc.).

svn-id: r30839
"
"cf724e889ce551082a1c3e443b11e9523f068e8d","2008-02-09 22:07:51+00:00","Added new debug command to dump scripts execution status.

svn-id: r30840
"
"435c437f6d118842ded3a0020168a1080ea2d0c9","2008-02-09 23:26:45+00:00","More refactoring for command parsing/execution.

svn-id: r30841
"
"bd4a2f721ef08f7fbf71c6048252e50121544425","2008-02-09 23:31:04+00:00","Reordered initialization list for Graphics::Surface to kill tons of warnings gcc started spewing out after robiwatts changed the order of data members for benefit of ARM.

svn-id: r30842
"
"cb6fb6200d207ab4b5c3e30539365762f9fbf6ac","2008-02-10 00:03:19+00:00","Cleanup ManagedList.

svn-id: r30843
"
"b407420ebb4249a1cc0fc40f10f90c0bd1fd0b9b","2008-02-10 18:34:48+00:00","Committed patch #1885629 'KYRA: HoF missing talkie credits and demo support'.

svn-id: r30845
"
"c92b2baed774e5ec4c294b8978a2f63b292cc859","2008-02-10 18:35:11+00:00","Update kyra.dat

svn-id: r30846
"
"acf50bac9d48632c39ad0a0cb812800714a1076d","2008-02-10 18:35:49+00:00","Oops forget to commit updated create_kyradat from patch #1885629 'KYRA: HoF missing talkie credits and demo support'.

svn-id: r30847
"
"ba717bc5155c896b0376d23c374d4dc801794dac","2008-02-12 03:26:05+00:00","Add patch #1891606 - Improved sound playback for Amiga SCUMM V2/V3 games.

svn-id: r30849
"
"d178604838fee587810d40c78606570659667200","2008-02-12 09:34:38+00:00","Alter last changes, for code formatting.

svn-id: r30850
"
"a93b6b22bb418a2e8fde4cff334d6897c3f34a9c","2008-02-12 14:55:31+00:00","Added Gob MD5s as supplied by raziel_ in bug reports #1891864, #1891867 and #1891869

svn-id: r30851
"
"98f8e93102d4d69283da31ca955e14c314ee72d1","2008-02-12 15:20:47+00:00","Added better AGIPAL autodetect to the AGI's fallback detector (Now checks files 'pal.100' - 'pal.109' rather than just the file 'pal.101').

svn-id: r30852
"
"66418e42832459c472d8c77d02a04ca358c13208","2008-02-12 15:31:09+00:00","Tiny fix to autodetected game's naming (Removes an extra space).

svn-id: r30854
"
"6740541e03b5fd9f77e5f39c77e2b481e03030b7","2008-02-13 01:33:40+00:00","Fix for bug #1883989 (AGI: Jolimie freezes). Game's detection entry had its parameters in wrong order and game feature flags were interpreted as the AGI version number and vice versa... whoops.

svn-id: r30857
"
"f3572802a53a0ca106ec50e6f6b9631660c33808","2008-02-14 12:05:54+00:00","Add Florian to the team

svn-id: r30859
"
"1b4e06e02c759ada4d934c95a59ed02e008d84a7","2008-02-14 12:19:52+00:00","...and there is no reason to keep Florian in ordinary contributors list.

svn-id: r30862
"
"a057491db26db53d7371d94481e4dcdf1086c0a6","2008-02-14 19:59:51+00:00","patch [ 1891542 ] KYRA: text/speech options support for HoF sequence player

svn-id: r30865
"
"fe1078f08fb1126d116431d70f3cadcb4ea34f8c","2008-02-14 22:52:57+00:00","Changed error dialog display to exit ScummVM through the standard execution path rather than using the exit() method

svn-id: r30866
"
"e640155089bf07dea4e7b45afeedaeea0d295e4c","2008-02-15 14:14:04+00:00","revert stateId == 4 part of code to previous ignore action to fix bug #1881415

svn-id: r30868
"
"98c661d70fca0dafc0a769c918cbb03d44642b96","2008-02-15 16:50:24+00:00","Removed unused #include

svn-id: r30870
"
"88bb567e182ffd6bdc17a2c7c06990686677d81c","2008-02-15 17:01:35+00:00","Merged lots of _mixer->isReady() warnings into a single one in Engine constructor

svn-id: r30871
"
"e9ca949e1c6c8705f3582f414f574a4676238714","2008-02-15 17:05:13+00:00","Forgot this one

svn-id: r30872
"
"28d61e484bba27cadd49ba4fd15dcc4f8f928cf6","2008-02-15 22:15:50+00:00","ident

svn-id: r30873
"
"a67ebc3d7a724061a52d458af6ca0443dc99a547","2008-02-16 02:20:30+00:00","Fixed a Gob3 walking issue noticeable when Blount walks down double-wide stairs (see bug report #1888627)

svn-id: r30874
"
"da10467efddbb0730571eaf3528b7a7cd2a29648","2008-02-16 03:12:34+00:00","Add patch #1894778 - ZAK: Add remaining Amiga sounds.

svn-id: r30876
"
"a184d81d9957d03a7700e7471aec264093da32b3","2008-02-16 03:22:53+00:00","Add patch #1894779 - MSVC71: Update project files, again.

svn-id: r30878
"
"9ac46607fc794a4a3514664cd587ccecfc12ad3b","2008-02-16 05:12:32+00:00","Bugfix for loading older savegame versions

svn-id: r30879
"
"11f24a44d84863c5ca9c4baac53ecc7b7674dfc7","2008-02-16 15:45:15+00:00","patch 1891492 for the CreateKyradat tool (.dlg and .tim file support)

svn-id: r30881
"
"dc7fd7177de23c8507509aa66cf166618a36975c","2008-02-16 18:50:23+00:00","Fixing fading on (only my?) amd64 systems

svn-id: r30882
"
"9146cf360301f5bd1822a111c9e49b8e8f497211","2008-02-16 22:32:24+00:00","Added a MD5 for another Gob2 Amiga Demo, as supplied by polluks in bug report #1895126

svn-id: r30884
"
"753536fa61119a20a5e0d0e9b00790593cd5190e","2008-02-17 02:06:04+00:00","committing patch 1891492 : dialogue (dlg/tim) support for HoF

- talking to NPCs is now possible.
- Zanthia's talks when entering a new scene for the first time now work
- using items on Zanthia is now possible.

svn-id: r30886
"
"e02ff1c7c36d23c4cdbfb855d380568868c4b4b5","2008-02-17 02:06:59+00:00","updating kyra.dat

svn-id: r30887
"
"377912a3a37f8bec283b9ef45a320e468dcfd0c4","2008-02-17 02:08:30+00:00","Added newline at end of file again (fixes compiling with -Werror for me).

svn-id: r30888
"
"d201f0e9aae1b326d3bfb1a28136fa6df9375788","2008-02-17 08:17:41+00:00","Fix bug ##1894968 - PUTTZOO: Music in water scenes messed up.

svn-id: r30889
"
"90d04815bd14b24027c006a63b7352e461038885","2008-02-17 14:06:18+00:00","Update msvc8 and msvc9 project files for commit 30886.

svn-id: r30894
"
"5b31fe75d4cf8cc7c6c0272d660ebf07a49916bd","2008-02-17 14:14:26+00:00","Print instruction offset of script commands for debug output.

svn-id: r30895
"
"890bca8f7ec17d308733b5d740700807508868b9","2008-02-17 16:12:54+00:00","Tweaks to fmopl; same net effect overall, just faster.

Eliminate divisions, floating point, and mod operation from inner synth loop.

svn-id: r30896
"
"80b0d3275414011eda054087815c093e463ffc92","2008-02-17 18:30:18+00:00","Delete .d dependency files in 'clean' target, not 'distclean'

svn-id: r30897
"
"d2513eb5f5b45bb8d8d466cb06ba9ab9ee7880bd","2008-02-17 20:25:07+00:00","Yet another missing change from the proc3 ARM code stuff; add proc3ARM.o to
the list of modules to build if USE_ARM_COSTUME_ASM is defined.

svn-id: r30898
"
"2032965063c0f278d132ff10019bd2a25b4d7f5d","2008-02-17 21:58:46+00:00","scripting bug fix (npc scene startup scripts were executed twice)

svn-id: r30899
"
"4ec832090a6c9043f9f0556bd58db76f606e0fda","2008-02-17 22:08:45+00:00","Moved jvprat to the team and removed duplicates.

svn-id: r30900
"
"33e2e1c658dc80bd6c2eaf76529b597a25bf3af3","2008-02-17 23:32:35+00:00","remove ugly const casts in staticres

svn-id: r30901
"
"ab40f56f478f09aab308670eecdb234380f55512","2008-02-17 23:48:21+00:00","fix memory leak

svn-id: r30902
"
"bcdfe6ade076dc04590a6a8f57c9cdc70f9f13c0","2008-02-18 23:04:37+00:00","some more opcodes (the fly tree is now operational) and some bug fixes

svn-id: r30903
"
"896b46323ff2d57f7496b2ec58f0cf606239bf76","2008-02-18 23:22:22+00:00","the script countdown needs to be divided by _ticklength

svn-id: r30904
"
"15d8e578ed17a9940a08e3ac8e6c5d7e5a6075ef","2008-02-19 00:10:05+00:00","Fixed some warnings.

svn-id: r30906
"
"a96c49a7938d94632e9ed2520a16f53f8e2827a4","2008-02-19 00:32:43+00:00","Add patch from Quietust - Update MSVC71 project files.

svn-id: r30907
"
"aedc896b97af469def3395f76d6ebba3013f11c1","2008-02-19 00:36:47+00:00","Add patch from Quietust - Update asserts and comments in sound code for Amiga SCUMM V2 games.

svn-id: r30908
"
"672a508bdddb6efaabacd9560e2d557005cc1aca","2008-02-20 17:07:58+00:00","Added CAMD MIDI driver for AmigaOS4

svn-id: r30910
"
"065f8f541958ec5c525a2dfde313f56777406e86","2008-02-20 19:35:00+00:00","Automatic device detection for CAMD.

svn-id: r30911
"
"a905de7deb84420e911ad26e7861ea31873a2eb9","2008-02-20 21:49:05+00:00","Fix code formatting and simplify code a little bit

svn-id: r30912
"
"28158c80b8db145f2c5986296b28ae02df26e2d2","2008-02-22 00:22:31+00:00","Some corrections to the SaveFileManager Doxygen comments

svn-id: r30913
"
"3969249b939c2c61ad36a7e7ed959c81b1847c68","2008-02-22 00:33:56+00:00","two more opcodes (Zanthia's random chats and mushroom drug effects) and some cleanup

svn-id: r30914
"
"faeb81fb62a40ef79355c42934d4126130f350f7","2008-02-22 07:00:12+00:00","palette bug fix (inventory turned blue when leaving the scene after eating the mushroom)

svn-id: r30915
"
"a7e7dfe122558d301fd57dceb6cafc0273910c62","2008-02-22 08:57:18+00:00","Fix for bug #1893564 - 'AGI: Texts messed out in Naturette 1'

svn-id: r30916
"
"93753d2f3bbd36e92bf8b1bc46f8a1775a01afa6","2008-02-22 09:13:27+00:00","Fixed some issues with the previous commit, bug #1893564 should be fixed now without affecting anything else

svn-id: r30917
"
"638e23f37c03d235a2e87f84f5ca70176f842bb9","2008-02-23 13:36:40+00:00","Fix for bug #1900258 - 'ITE: Glitch when looking at the map while at the docks'

svn-id: r30919
"
"3581257ceb442cb8e55ad34644f71e5b5d482cf0","2008-02-23 13:54:58+00:00","Fix for bug #1900220 - 'ITE: Missing text outline'

svn-id: r30920
"
"208c753215e5caf721d82de9db89a984865b0196","2008-02-23 14:31:25+00:00","Stop printing opcodes in the debug console

svn-id: r30923
"
"040d8e10fe7aecb0cbe1edf4ea05a92a3574d87e","2008-02-23 14:42:46+00:00","fix bug 1900244 'ITE: Strange animation when returning to prison cell'

svn-id: r30924
"
"2283ca68720dce90b176af0a48d03383b473c297","2008-02-23 17:19:12+00:00","Some cleanups/consistency fixes.

svn-id: r30930
"
"39c348e4d25d49787930fb2dc178edaf4fafadec","2008-02-23 18:55:31+00:00","properly support feeble (sync commit)

svn-id: r30932
"
"1cf9fc944a8488e928da49208118a32ea10c3c62","2008-02-23 18:57:49+00:00","Make codec47 cope with failed mallocs.

Not the nicest result in the world, but better than crashing and burning...

svn-id: r30934
"
"80d55b0388ef5883202fa13035115d79046b3072","2008-02-23 19:01:12+00:00","Renamed AbstractFilesystemFactory to FilesystemFactory

svn-id: r30935
"
"cc7ba062b40a67514a516a74d45d2ac79fc67990","2008-02-23 20:17:39+00:00","Update of MSVC7 project files from Quietust. Ref: r30935

svn-id: r30936
"
"8917835374148e22bb80aa076374253bb365e5fb","2008-02-23 20:45:33+00:00","Copy 0.11.1 news section

svn-id: r30938
"
"e421a2363944ba7567311a2c2e2720151f6840b2","2008-02-23 23:03:08+00:00","Replaced FilesystemFactory::makeFSFactory with a new method OSystem::getFilesystemFactory()

svn-id: r30947
"
"f3b497787aaa710c7228d48973598377da024d67","2008-02-24 01:12:39+00:00","Fixed warning.

svn-id: r30948
"
"cb36b056ba1537ad69c08ed51ee110f2fdb73f0a","2008-02-24 12:30:12+00:00","Also add extrapath to default search location for Kyrandia resources.

svn-id: r30949
"
"83d2f0c3e7a737648fe5062ed00745cd3d0d207b","2008-02-24 12:33:20+00:00","Oops fix stupid copy&paste error...

svn-id: r30950
"
"0bdd409d4bb788a1b4a4dff0044ed45c0cb10a72","2008-02-24 13:37:29+00:00","Remove double inclusion of config-manager.h

svn-id: r30951
"
"d9e3daae8f47d08fe09f2c19cc8e3df754807208","2008-02-24 14:30:56+00:00","Removed 2 unnecessary calls to File::exists()

svn-id: r30952
"
"622076e15b150393571d4797f402819ccb5eada1","2008-02-24 14:38:19+00:00","Fixed warning on systems with unsiged char as default char type.

svn-id: r30953
"
"dbba13a7accd943904614223a8b341283d6ca7f5","2008-02-24 15:00:28+00:00","Stop redefinitions of ARRAYSIZE

svn-id: r30954
"
"ef9850166d78c9fdfb6b7832067a2955d8ca2336","2008-02-24 16:12:47+00:00","Fix for bug #1900254 - 'ITE: Glitches when bridging the gorge'

svn-id: r30955
"
"a3f2f4b039130d0227b34ec75e7b3fef2ae21d0d","2008-02-24 16:56:28+00:00","This safeguard is no longer needed for IHNM

svn-id: r30956
"
"5c99d45d9f8d558cd1a69a89f02fe58931d69da6","2008-02-24 23:14:04+00:00","Don't #include the FS factory implementations in common/system.cpp; rather, rely on the build system to include them

svn-id: r30957
"
"432777fbc59fdfb18e3d66f814c8f4e7277281aa","2008-02-25 00:24:00+00:00","Fix upper case

svn-id: r30958
"
"b87c4a6f75ef04a7bd67e956135342159ab95f18","2008-02-25 00:26:35+00:00","Updated MSVC8 and MSVC9 project files with the latest fs code changes

svn-id: r30959
"
"ff79a8cd39cf7d43748f03bb44a05811a9026084","2008-02-25 14:09:04+00:00","added some SVN headers

svn-id: r30961
"
"85393b6fa4a6ff5dbc9e599e88d273cf0362b2b8","2008-02-25 14:10:17+00:00","Extended rules.mk with code for building extra (tool) executables, and changed some of the tools to make use of this

svn-id: r30962
"
"07a7800ebd59c780e544928be72164aa04ffd826","2008-02-25 14:13:12+00:00","Moved tools to all-C++ code (ensures consistency of all code during compilation, and allows us to use advanced stuff, like code from common/, in the tools)

svn-id: r30963
"
"2579136dd218178ff959159dbe6f3c458fc86a28","2008-02-26 00:29:40+00:00","Another tiny speed tweak for fmopl.cpp; replace a division with a shift.

svn-id: r30968
"
"d4b9d7fe444eab838105760f4924ba49f7cb68c6","2008-02-26 15:17:13+00:00","Patch #1901742: Solaris /bin/sh doesn't like $()

svn-id: r30969
"
"235d0221862ea7eb23ba32c9e10787af980e5c4d","2008-02-26 16:55:02+00:00","Added -Wcast-align to the default warnings

svn-id: r30970
"
"da09e917e8ec5d7a2797fae21b2add46c5bbc572","2008-02-26 16:55:58+00:00","Added  -lnsl -lsocket to the libs required when building for Solaris, partial fix for bug #1523129

svn-id: r30971
"
"eb9f0dcbf88274d52747d9e9d2196e374d12abba","2008-02-26 17:03:10+00:00","Completed fix for bug #1523129 (SOLARIS: solaris 8 build broken)

svn-id: r30972
"
"accae802d14271544cc613107290136eceb6f3da","2008-02-26 19:00:45+00:00","Added Max Lingua to the credits as PS2 porter, and mentioned the revived PS2 port in the NEWS; moved Nicolas Bacca & Won Star to the list of retired team members

svn-id: r30973
"
"29c6c7a6266041ee63b40c4852e0d3a9d6c35915","2008-02-26 20:54:02+00:00","Fixed FileSystemNode::exists() method, see bug #1875588. SAGA engine works fine now

svn-id: r30979
"
"778309ed56d7af86ea10c77555697102558947c4","2008-02-27 11:03:09+00:00","Simplified Control::handleKeyPress and fixed a long-standing bug in the verification of the save name

svn-id: r30981
"
"0a918b02fb126dad03eed0d9c1e2f0bc43b6aa56","2008-02-27 13:35:29+00:00","Added Array::resize() method, matching vector::resize() from the std C++ lib

svn-id: r30982
"
"142a39da22d8a8286ab929d9ad5a07839d7530c2","2008-02-27 14:06:06+00:00","Added Array::resize() method

svn-id: r30983
"
"6f2215753c6142ffb4130585393b0330c739c133","2008-02-27 15:01:33+00:00","Fix long standing wrong function names in debug prints.

svn-id: r30984
"
"a7269c6009eb6c871037c4c1ae1c71e6f8b139c6","2008-02-27 15:11:16+00:00","Fix for bug #1895205 - 'IHNM: end game text/caption error'

svn-id: r30985
"
"d4e9661809a663b894cbcb2ef932165e239df2fb","2008-02-27 15:44:39+00:00","Modified the BASS save/load code to use a StringList for storing the save state titles (simplified the code, removed some cruft)

svn-id: r30986
"
"d31ca4982e52af4a92db77de10c016983ec88269","2008-02-27 16:07:38+00:00","Add support for --list-saves to the sky engine

svn-id: r30987
"
"113ce2b900f164b636ec633354497568461dab06","2008-02-27 18:10:08+00:00","Don't do any special font mapping in the Italian fan translation of ITE, so that Italian characters are shown correctly

svn-id: r30988
"
"99a5d115449123358342062e60c84f55f9448104","2008-02-27 18:17:50+00:00","Don't change the voice bank when no voice files are present. This will stop SAGA games from crashing when no voice files are present in talkie versions of ITE and IHNM (regression from commit #30648)

svn-id: r30989
"
"5f493ce618b41f0ca41b8507ed0ed3a6029bbcf5","2008-02-28 00:17:51+00:00","Added a workaround so that the mob of prisoners in Nimdok's chapter is shown correctly after a cutaway is shown

svn-id: r30991
"
"5c85fc40835fc54cac167aa2bfd413e1c0b3e25f","2008-02-28 22:00:01+00:00","added few delays for better mouse response

svn-id: r30992
"
"61f7594866c2c8393c969a592398dbcc700c3e8b","2008-02-28 22:08:40+00:00","fixes to savegames list file

svn-id: r30993
"
"57be6b5a2eeefe201e74c4cebe50ce454f09b076","2008-02-28 22:53:51+00:00","get rid canal_p really silly code (that was encode/decode game data !)

svn-id: r30994
"
"11e97cd1ff27b2c15ecb171bbbff46540648db6e","2008-02-29 00:04:43+00:00","fixed restore savegame from different part of game

svn-id: r30995
"
"4caa91d0e6bf80e24af22a31a484921de18741b5","2008-02-29 07:29:45+00:00","added comment for missing code functionality

svn-id: r30996
"
"ad10df879df8c9a85e34b13e2a49d9c791ee4036","2008-02-29 07:40:56+00:00","slow down key repeat

svn-id: r30997
"
"07984f9c636d458345ba0d83d0487edb60881162","2008-02-29 07:45:30+00:00","ident

svn-id: r30998
"
"e57b6650cc6b4fa28d12a078b7d66bda2aff91ad","2008-02-29 14:27:25+00:00","fixes to displayed chars

svn-id: r30999
"
"3c760ce662aebabb10d1c51a8d35ed93e7e513e8","2008-02-29 14:44:02+00:00","Add Raziel as AmigaOS4 porter

svn-id: r31000
"
"48259cc65f374ad61ade70c5417f9a7947a4b84a","2008-02-29 15:11:44+00:00","fixed exit from engine

svn-id: r31002
"
"e38bddc7d6cd8c46500c8c6fb8ae4a39e3c28caf","2008-02-29 15:20:23+00:00","disable salva_pantallas func, for now could not be finished due lack of sources, it use *ghost funcs for some kind special gfx function from effecto.lib. it happen when player is idle for some time.

svn-id: r31003
"
"3bf8ce9a06d364f1ffdee2f0128f8187958809b2","2008-02-29 19:26:05+00:00","fix starting new part of game

svn-id: r31004
"
"3657d77c4e8637d0f9456e4ade8008423be634b1","2008-02-29 20:20:28+00:00","revert to texts to from english not latest french version of sources

svn-id: r31005
"
"feffb0a048315e8d0d7343db1fc4605363b59a48","2008-02-29 20:31:45+00:00","revert to texts to from english not latest french version of sources

svn-id: r31006
"
"2890d496cf5f4332090fad8dca0f7c9c4503b15a","2008-02-29 20:32:28+00:00","revert to texts to from english not latest french version of sources

svn-id: r31007
"
"763f86a99de148513da978ec22501b6fcb82f9d2","2008-02-29 20:36:04+00:00","revert to texts to from english not latest french version of sources

svn-id: r31008
"
"15cd10aba38446e162abd8d0f22db566da1e24d7","2008-02-29 20:44:58+00:00","and again...

svn-id: r31009
"
"dd2b77ce82a05e3af92deb38d5e8e59fe0cd3143","2008-02-29 20:46:25+00:00",".

svn-id: r31010
"
"a47e5aa5f57055bb399382f7a30811f0a8629f92","2008-02-29 21:00:37+00:00","svn-id: r31011
"
"5878f701c103cf792db6b5454688dca0c3379477","2008-02-29 22:24:52+00:00","Fixed some Lost in Time bugs:
- CD cutscenes are drawn correctly know
- CD cutscenes are (more) correctly synced now
- The cursor doesn't flicker anymore when a video is played in the background

svn-id: r31014
"
"c8077925ccc5c957b408acb37195c6ea0675c3db","2008-03-01 03:59:56+00:00","Fix subtitle regressions in DOS Floppy demo of Simon the Sorcerer 1.

svn-id: r31015
"
"365f5e804dfcb1f29c82ded87c17a49ae99f84fc","2008-03-01 08:34:54+00:00","Escape the question mark, to prevent '??!' from being interpreted as the
trigraph for '|'.

svn-id: r31018
"
"918552ac0f8d25d11f4cc40c042a34ae77d70940","2008-03-01 14:32:38+00:00","change array size 43 for objetos_que_tengo

svn-id: r31019
"
"85b61f3d1032fb5c70ce4a4e23a68b1dd05d2b8f","2008-03-01 15:13:06+00:00","Fixing my Lost in Time fixes

svn-id: r31020
"
"964caae2ddc681eec5bd7353a162f584c4fef7d8","2008-03-01 15:45:54+00:00","Moved Dreamcast filesystem factory to platform directory.

svn-id: r31021
"
"4d45121ccf5a2e75b1813e95e6d439b9fe0c0cd6","2008-03-01 17:48:42+00:00","Integrated fs factory into osystem object.

svn-id: r31024
"
"d324010b5a6156a6c221b9b29f8d572a0d48e296","2008-03-01 20:50:23+00:00","two fixes which allow play game into 4 part

svn-id: r31025
"
"2db83c69e1244dbafffa1d4dcb06cb4256ba1753","2008-03-01 20:51:16+00:00","not needed anymore

svn-id: r31026
"
"d5e09de48c09de714bcd916fe9c6b3d2522ccbc6","2008-03-01 22:12:52+00:00","Added getTimeAndDate() implementation.

svn-id: r31027
"
"a513f0f43a393f846aa49a3c9d455239b8ba9c44","2008-03-02 23:57:29+00:00","Added a workaround of sorts for Inca2. It's essentially playable, sans saving, space shooter and correct speech language selection

svn-id: r31032
"
"fc91de07dfdfe6bd29edadf739f324f30f5624d0","2008-03-03 00:18:52+00:00","Forgot to change a few GameTypes + Added a floppy version

svn-id: r31033
"
"3b27b9fa438611c3a05fcf2d07a3dfde6be192fa","2008-03-03 00:41:59+00:00","the ps2 changes from the 0.11.1 release, plus some bugfixes and cleanup.

svn-id: r31034
"
"608be9666d45617b59303158d9369d3327c4c476","2008-03-03 01:09:09+00:00","Fix compile.

svn-id: r31035
"
"beaef7f322396e0846677c7014c91e4a9bf6ab84","2008-03-03 22:37:59+00:00","Added the MD5 for the German floppy version of Lost in Time, as supplied by cartman_ on #scummvm

svn-id: r31037
"
"b651a74b45f922c5d7bd8182cbe465298c8cf270","2008-03-03 22:38:31+00:00","Started to implement GUI code for HoF.

Currently working:
- _basic_ inventory, this doesn't include scrolling through the inventory

svn-id: r31038
"
"6c41dbdef277e05d2a2014a8978f5d87d24ac704","2008-03-03 22:51:16+00:00","Fixed crash when clicking on empty inventory slot.

svn-id: r31039
"
"61390db7f0ca39858036424108c6d3e8427613af","2008-03-03 23:01:59+00:00","Fix compile.

svn-id: r31040
"
"4b4e93b19047b2319d77938696511dd6573bcd4f","2008-03-03 23:38:22+00:00","Fixed some uninitialized variables.

svn-id: r31041
"
"17642259709a4f0b3d81dc83b7294df15e3920aa","2008-03-04 20:06:46+00:00","Added a workaround for the swapped dialog lines when talking to the mayor in some versions Gob2

svn-id: r31042
"
"130cfded751571069d16caff42baa709146ee501","2008-03-05 17:38:12+00:00","Implement inventory scrolling for HoF.

svn-id: r31043
"
"99d8cf695f49f1ded41712fac047dbf86054e8f8","2008-03-07 00:16:37+00:00","Added support for RLE compressed frame data in VMDs

svn-id: r31044
"
"47f3e92bdded2e99a3015adc73c4e726136b7bc0","2008-03-07 00:33:43+00:00","Cleanup, and test to see if I can commit.

svn-id: r31049
"
"939166bbda7132a352292b99888643a1474bfdbd","2008-03-07 00:50:51+00:00","Indentation. (And another test to see if commit works as intended.)

svn-id: r31053
"
"8b454a176c85d52771042cd45999088b4ceeca4f","2008-03-08 11:33:18+00:00","more fixes after merge parts of engine. now game reach final part 6

svn-id: r31061
"
"1c155a4be77667ef7bec9a917c190f47dcd15d77","2008-03-08 18:00:04+00:00","more merge fixes for drascula

svn-id: r31063
"
"1ac3a62fc18c9fef81342d401eb433915498c3c7","2008-03-08 18:33:59+00:00","Possible fix for bug #1910180 'KYRA: Screen 'flash''.

svn-id: r31064
"
"4d65d240e46fe5a76821088c43d625a5183ccf1e","2008-03-08 19:28:42+00:00","Fix for bug #1910180 'KYRA1: Screen 'flash''.

svn-id: r31065
"
"64d2907df50ed8fac07d93ce15b925a4ed96b03d","2008-03-08 19:30:25+00:00","Cleanup.

svn-id: r31066
"
"f02ec1d7ea7a5d45d3d8e31b83ac20a208475fad","2008-03-08 19:37:43+00:00","Fix some typos. (and I thought DrMcCoy does this usualy...)

svn-id: r31067
"
"20a1e653b8dee318cef554a157235bd65e0c2ef2","2008-03-08 19:47:14+00:00","Typo.

svn-id: r31068
"
"18f1e61931845e68d21cd05b57b485534eee5837","2008-03-08 19:47:44+00:00","more merge fixes for drascula, game is completable now

svn-id: r31069
"
"f29a6066eccf6657c14934a32842cb280cd02910","2008-03-08 20:52:44+00:00","Remove unnecessary execution bit.

svn-id: r31070
"
"37b8d5bd4dd047cb2f14a10353ff41b9364fbd4d","2008-03-08 20:58:38+00:00","Clearing unnecessary execution bit

svn-id: r31071
"
"bcbb7cc0db9279c00a53a1e24ea1a0a8c4c0ba2a","2008-03-09 08:05:40+00:00","fixed wrong call

svn-id: r31072
"
"9a2a260ec7a681f9095161f398061326074f64d3","2008-03-09 08:12:10+00:00","ops

svn-id: r31073
"
"b7f0ba7860d94876d6f31999a397427be0ff16e3","2008-03-09 08:27:27+00:00","fixed icons in part 5

svn-id: r31074
"
"28a87c97750d0756db4e81cb8acbe1daf8f8e96f","2008-03-09 08:30:24+00:00","changed moment of increasing num_ejec

svn-id: r31075
"
"aceaabc5d280ea35eaf0c20dc5c86130bf185c04","2008-03-09 08:31:16+00:00","ident

svn-id: r31076
"
"5bf23671e50e0eba03e95bb480504c79fa2eea83","2008-03-09 08:52:52+00:00","fixes to diffrent parts of game

svn-id: r31077
"
"9d948f92a07ef6c2946320abd31fc5327c2f06cd","2008-03-09 09:08:10+00:00","fixed after merge regression

svn-id: r31078
"
"179ff6bcc271508fc165e92e156729bc10bda981","2008-03-09 09:20:16+00:00","next fixes after merge regressions

svn-id: r31079
"
"353e5a78967e2ab1afdeb3ce9b482e0b455b3880","2008-03-09 09:28:10+00:00","Add hack to skip the faulty credits script in Russian HE99 version of Freddi Fish 3.

svn-id: r31080
"
"3a83cf654eb42e60837a34b16b3628e0464976d9","2008-03-09 09:58:05+00:00","Fixed access of inventory in HoF while cursor is not visible.

svn-id: r31081
"
"4ad14b60162fe476729d78822d75aa8f36a0238c","2008-03-09 10:16:27+00:00","next fixes after merge regressions

svn-id: r31082
"
"413afbfdd602d3eddab75d864c177f268f58fdfd","2008-03-09 11:13:20+00:00","next fixes after merge regressions

svn-id: r31083
"
"9b6be10181116d9723f7a92e8e98d57a97da0f0d","2008-03-09 11:28:51+00:00","Implemented spellbook in HoF.

svn-id: r31084
"
"24b04c6f5143e87f2502c34a0a1b8ad89f5535fb","2008-03-09 12:19:42+00:00","Fix compile.

svn-id: r31085
"
"95c5a48853f8437606008c6705e400699dc3ee43","2008-03-09 12:25:48+00:00","Fixed warning.

svn-id: r31086
"
"05f68b17d4a60ece9e2eed14746eab5b29a3e688","2008-03-09 14:46:24+00:00","- implemented cauldron handling for HoF (needs some more testing though)
- fixed bug in updateCharFacing
- added 'give' command to HoF debugger, which allows setting the hand item to a specified item

svn-id: r31087
"
"d2bbfbcc35a1ab8cc3be52dba690a07cbabdf632","2008-03-09 15:24:47+00:00","- fixed little glitch when putting items in cauldron
- implemented listing of items in cauldron

svn-id: r31088
"
"4712089f18e521605bc08152fe02e5aeb4b78dd7","2008-03-09 15:26:06+00:00","floppy/fm-towns implementation for spell book

svn-id: r31089
"
"e3b17dbf6b257945146b91e053e517ce83f7b4f7","2008-03-09 15:34:58+00:00","Added missing line and renamed a variable to fix warnings.

svn-id: r31090
"
"9ebc676241c911100fb45cfc815df0666876a6b9","2008-03-09 15:52:44+00:00","sjis bug fix

svn-id: r31091
"
"f42daf54d132b158101e916b50bd2262a907f774","2008-03-09 16:10:18+00:00","next fixes after merge regressions

svn-id: r31092
"
"6861c02d478d9aba32fa7bfed9425145770ae042","2008-03-09 17:10:19+00:00","next fixes after merge regressions

svn-id: r31093
"
"efbe28e9e33fe0c366693e2c0c3634acd7ef16e7","2008-03-09 17:39:54+00:00","fix regression

svn-id: r31094
"
"7f2c632860dcf2d6e0de80d8a6266c060f72eb47","2008-03-09 17:51:27+00:00","fix regression

svn-id: r31095
"
"41d4104e3c32e76ab1f9a7719cf60023d6cc3cde","2008-03-09 19:14:37+00:00","fix regression

svn-id: r31096
"
"bfe006b9cfc83814290c82fa82dfea00c385227e","2008-03-09 19:48:00+00:00","ops

svn-id: r31097
"
"b1f1447234a5daf45f51336e7082af4c0bd151a1","2008-03-09 21:07:02+00:00","engine as now as reference for future changes.
ignore char ' for now as i can't find proper font char.

svn-id: r31098
"
"4f30f09456cd672797e69d574888a65dd60dedce","2008-03-10 20:34:34+00:00","forgot to commit these

svn-id: r31099
"
"3afe9c0b9ee24a5c0389f338affc1612e3d19675","2008-03-11 17:24:34+00:00","Added OSystem_SDL::getFilesystemFactory()

svn-id: r31107
"
"890da04bc437980edffcab24900b1493c2b7cae5","2008-03-11 19:25:53+00:00","Cleanup.

svn-id: r31108
"
"a366add4cfa2910a6fe6e2054a9b5ec5d26fd453","2008-03-11 21:07:00+00:00","Updated datafiles needed for S80, S90 and S60v2

svn-id: r31109
"
"884276e22ecbf1ffa1a820c8b34cc160a67a52ce","2008-03-12 00:22:30+00:00","Fix bug #1911558 - FF: Inventory doesn't scroll to the end.

svn-id: r31110
"
"7288b92d0dea4c6e2a74f89e16f913ec5cf3ceb0","2008-03-12 16:36:49+00:00","SCUMM: Improved detector to properly  distinguish MM v1 and v2 demos (fixes detection of fan translations of the demos) (didn't update the website MD5 table on purpose)

svn-id: r31111
"
"6b3b7a5dc21f90608874d6619a46e554760e3e0e","2008-03-12 18:36:51+00:00","Implemented OSystem_SDL::getTimeAndDate (identical to OSystem::getTimeAndDate, which will eventually be REMOVED -- all porters should copy this change, if they haven't already)

svn-id: r31112
"
"b434f189bce98626dbe31539bb8d907e67d5ca99","2008-03-12 18:38:03+00:00","Switched CoreAudio MIDI driver to use AudioUnit v2 API (results in better Leopard support/performance, it seems, at least in Exult)

svn-id: r31113
"
"05b159609b074fb4f45454edcc92446557b3167d","2008-03-12 18:42:47+00:00","Removed remaining traces of the dead MorphOS backend, which itself was removed about one year ago

svn-id: r31114
"
"e971282d088a8bfafee63a43ebf111e2d2215100","2008-03-12 19:37:21+00:00","Implemented OSystem_GP2X::getTimeAndDate (identical to OSystem::getTimeAndDate).

svn-id: r31115
"
"1e6f59e2dcc601eb5e67e47af18ffd975ab86157","2008-03-14 13:35:47+00:00","const const const

svn-id: r31118
"
"8a9a14002ecee554082eb4f23ef245173950b363","2008-03-14 13:59:31+00:00","Advanced Detector: Changed fallback detector from a callback function pointer to an overrideable method of AdvancedMetaEngine

svn-id: r31119
"
"aa8105011748674313e7bf19e23ea8f2ee90c7aa","2008-03-14 14:05:49+00:00","cleanup

svn-id: r31120
"
"6547ef6e129fb42c75c20f24e1f24dff1458f727","2008-03-14 17:31:04+00:00","Started to get rid of Common::EncapsulatedADGameDesc (using plain Common::ADGameDescription instead)

svn-id: r31121
"
"9cedcd059b6e9f0e3ec768b1c159cc1d8eaacf75","2008-03-15 00:16:11+00:00","animations for inventory items and mouse pointers

svn-id: r31122
"
"ad3ed7391b609b260c48592aa8f9deebe194f640","2008-03-15 00:16:52+00:00","updated kyra.dat

svn-id: r31123
"
"8e3681dbe9fcc08ff3b74190bc8bf1d48d236564","2008-03-15 00:17:51+00:00","update for kyra.dat tool

svn-id: r31124
"
"91adba9842b516cbe02966f0d140aa2d7f5dc79c","2008-03-15 09:57:41+00:00","Implement opcodes:
-   7: o2_getCharacterScene
-  54: o2_delaySecs
- 103: o2_fillRect

svn-id: r31125
"
"850868536b3c4ccac2ccaaa26c4380b47093f209","2008-03-15 10:55:32+00:00","Fixed bug in o2_countItemInInventory.

svn-id: r31126
"
"be9f33c3bee8d732653e537f4c5eb1baa62034e9","2008-03-15 11:39:19+00:00","Fixed some valgrind warnings.

svn-id: r31127
"
"9ff187ad63221e91681353438ce702fe59860b5c","2008-03-15 11:44:36+00:00","Fixed another valgrind warning.

svn-id: r31128
"
"dc319c719fdc1526b546cb5d3b0ecc519c1d0369","2008-03-15 14:40:00+00:00","- implement opcode 127 (entering the color code for the skull in the rat cave now works)
- minor bug fix for mouse cursor (which sometimes would show when it shouldn't)

svn-id: r31129
"
"05dd6cee3ae0b93db0463e22acf9e9c3463a8712","2008-03-15 15:25:49+00:00","Got rid of EncapsulatedADGameDesc

svn-id: r31130
"
"f88a2923cd45fa5ad597599c1fb68a9b6ecc6432","2008-03-15 19:55:05+00:00","Implemented opcodes:
- 36: o2_removeItemFromInventory
- 64: o2_disableAnimObject
- 65: o2_enableAnimObject
- 101: o2_showLetter
- 115: o2_setSceneAnimPosAndUpdate

svn-id: r31131
"
"fd7ed046bb89f91c767b762dd1ea336b798a3bbf","2008-03-15 20:24:26+00:00","- some more opcodes for wsa and tim sequences
- adding some code to inputSceneChange

svn-id: r31132
"
"db3e317ab3eebe6d8edeca5a87e8e0426ca08a62","2008-03-15 21:03:35+00:00","Implemented opcodes:
- 27: o2_displayWsaSequence
- 99: o2_setDrawNoShapeFlag
- 129: o2_chapterChange
- 159: o2_processPaletteIndex

svn-id: r31133
"
"3da00ccc798ea18b523c2d79a7c58ee00783b365","2008-03-15 21:11:22+00:00","- cleanup
- enabled some chat related code in KyraEngine_v2::runLoop and KyraEngine_v2::handleInputUnkSub

svn-id: r31134
"
"707413227644b56e69b4632dc5b2a7534847d2b9","2008-03-15 21:33:01+00:00","Fixed warning about unused variable.

svn-id: r31135
"
"b75c790c7adb19ef33203a6f760133067d59ff39","2008-03-16 02:00:14+00:00","- add opcode 146 - resetInputColorCode()
- add updateWaterFlasks()
- some fixes for mouse pointer positioning in sjis mode
- bug fix for tim player

svn-id: r31136
"
"7a690dae10ae3fdc6037efdf247ef1cf1a456a64","2008-03-16 12:34:23+00:00","- fixed mouse position in Kyra1 after savegame loading
- enabled some code in KyraEngine_v2::enterNewScene

svn-id: r31137
"
"bbecd439c12181fd5efdc33bf514d37559f1fd89","2008-03-16 12:51:59+00:00","- fix mouse cursor hotspot for sjis mode

svn-id: r31138
"
"2a95c653ebccc354cdda601f61b63eb2a48216f5","2008-03-16 13:31:18+00:00","- Impelemented opcode 155: o2_stopSceneAnimation
- fixed crash while switching chapters

svn-id: r31139
"
"3bfa70bc3e2bc080cae30e06d023b5cd4de678e0","2008-03-16 13:39:40+00:00","Implemented opcode 30: o2_addItemToCurScene

svn-id: r31140
"
"ef72d8e7bf8e058923188d3f0b00d49147f5cb3d","2008-03-16 13:40:54+00:00","Moved KyraEngine_v2::setupOpcodeTable from kyra_v2.cpp to script_v2.cpp

svn-id: r31141
"
"c7175fac8dff38b8b49b30c42e3a57312cdb15ce","2008-03-16 13:52:08+00:00","- moved KyraEngine_v1::setupOpcodeTable from kyra_v1.cpp to kyra_v2.cpp
- some more work in KyraEngine_v2::showIdleAnim

svn-id: r31142
"
"f0d54b451300088534071130e75c5a9a01bc89f5","2008-03-16 14:32:49+00:00","Reworked skipFlag handling.

svn-id: r31143
"
"2bbaadbf95f7ec46c11457099418b742d7108064","2008-03-16 15:28:05+00:00","Implemented opcodes:
- 15: o2_customCharacterChat
- 18: o2_restoreTalkTextMessageBkgd
- 94: o2_setCauldronState
- 154: o2_setupSceneAnimation

svn-id: r31144
"
"042666ca0444f351cfe36eaa272b0dc0758c82f6","2008-03-16 15:30:57+00:00","Implemented opcode 34: o2_removeItemSlotFromInventory

svn-id: r31145
"
"79cc924d0e82fc6da46d0d776ed5949c105af453","2008-03-16 15:35:12+00:00","Implemented opcode 16: o2_soundFadeOut

svn-id: r31146
"
"04a2ac14854c302c88b9f17cb5c9dbacf1fa6a89","2008-03-16 17:16:17+00:00","- implement zanthIdleChat()
- bug fix for zanthRandomChat()

svn-id: r31147
"
"6444a3c3d858db18d34fcc5b404cd7bc89a7fd59","2008-03-16 17:43:41+00:00","fix typo

svn-id: r31148
"
"18fa238cd34e83a39a7a889f5a3ae928e783df29","2008-03-16 18:24:45+00:00","- implemented skip flag handling in wsa related opcodes
- implemented skip flag handling in o2_isVoicePlaying
- fixed skip flag handling when making the cauldron appear.

svn-id: r31149
"
"6c672d92f0558a52c8d549e31f6b8f46f3d3f866","2008-03-16 18:42:29+00:00","Changed Kyra2 script debug printfs to be consistent with Kyra1 ones.

svn-id: r31150
"
"eceee73424a3338f1eedcced1e2dbb4fb7f71849","2008-03-17 00:40:00+00:00","- fix demo

svn-id: r31151
"
"b9339221e4f0b92976f80028c49fcfbc0845ec01","2008-03-17 01:34:24+00:00","- implement debugger commands: gamespeed and pass_codes
- implement opcode 151: meanWhileScene()
- fix dragon flight scene: this is still totally messed up, but at least the screen doesn't stay blank any more

svn-id: r31152
"
"4e881243611752c6868abfa71cbf3ad824638782","2008-03-17 12:43:09+00:00","Fixed KyraEngine_v2::initSceneScreen

svn-id: r31153
"
"91a800cf028d46822536d1760ab1bc1b679b86c4","2008-03-17 18:10:52+00:00","Implemented quick (via hotkeys) save/load suppot for HoF.

svn-id: r31154
"
"c7ede8337e783c6e289bed4ce6a11ebba1c987b5","2008-03-17 18:13:28+00:00","Let Kyra1 and Kyra2 use a common savegame version number. (cleanup)

svn-id: r31155
"
"6ebfeb5a05d3c85d6d60b3f0abb461d7085737ce","2008-03-17 18:19:01+00:00","Also allow '.' and Escape as keys for skipping sequences in HoF.

svn-id: r31156
"
"b01e5501834516dd126c27f8daadc7077d317d55","2008-03-17 18:44:29+00:00","Removed unused variable.

svn-id: r31157
"
"431181cffcf36dc39db0f6d1ebb4dfe8a365c40b","2008-03-17 20:06:50+00:00","Fix typo.

svn-id: r31158
"
"80b0fd190dea0ac22402b94c32c37302a8582037","2008-03-17 20:19:47+00:00","Removed some unneeded and bug causing code.

svn-id: r31159
"
"97c090934929cd398a485004cd34d9657d52262e","2008-03-17 20:30:09+00:00","Remove unsued variables.

svn-id: r31160
"
"fc47cbe629527256314ca54d624917ef7df888bf","2008-03-17 20:34:46+00:00","Probably fixing string issues in menu.

svn-id: r31161
"
"136040b8692e79a48819192d4b37c53baabb5d12","2008-03-17 20:36:58+00:00","Cleanup.

svn-id: r31162
"
"d71523ae15fa6f2ca46911fc464e107934eba1f3","2008-03-17 21:15:24+00:00","remove unnecessary code duplication

svn-id: r31163
"
"0a0576d060aed2a7c9ab5ff4e55d4129386d9e83","2008-03-17 21:56:37+00:00","Fix kyra save file naming scheme.

svn-id: r31164
"
"f6f61a5bc32caf7b3716b0905edba3800de1648d","2008-03-17 22:32:30+00:00","- Fixed opcode 115 (fixed dragon scene)
- renamed opcode 155 to o2_addToSceneAnimPosAndUpdate

svn-id: r31165
"
"8752939fe480b471febed9a9e85069208429b7d3","2008-03-17 22:42:12+00:00","Implemented opcodes:
- 91: o2_blockInRegion
- 92: o2_blockOutRegion

svn-id: r31166
"
"1042c6dccf9fd34a80990335420f6ef6dd2d4d1f","2008-03-17 23:01:50+00:00","Implemented opcodes:
- 70: o2_backUpInventoryGfx
- 71: o2_disableSceneAnim
- 72: o2_enableSceneAnim
- 73: o2_restoreInventoryGfx

svn-id: r31167
"
"845d65d8b73e2b7f3edf3fe50ac5b9bc3ce157e6","2008-03-17 23:27:33+00:00","Implemented opcode 98: o2_setDeathHandlerFlag

svn-id: r31168
"
"a917a88504dba04bed0022740e283b9eb8b94ebb","2008-03-17 23:29:25+00:00","Oops forgot to enable some code.

svn-id: r31169
"
"760b44da10fa1060612c9dbdc43821efa56a35b5","2008-03-17 23:32:26+00:00","- implement opcode 29: o2_drawShape

svn-id: r31170
"
"68a603139daa80e672b474b3b30c4cae01c360ef","2008-03-17 23:45:33+00:00","-missed animator_v2.cpp in last commit

svn-id: r31171
"
"5df3a2e1309f24e8380299ee3ac15cb2a72ff6cf","2008-03-18 00:04:34+00:00","Fixed bug preventing movement.

svn-id: r31172
"
"841267187a1e5bd52caf1a2e23754b0fa98d66a9","2008-03-18 08:03:24+00:00","Update MSVC8 and MSVC9 kyra project files for commit #31154

svn-id: r31173
"
"04083cff8835b75d658a964745147c0960529eea","2008-03-18 12:51:16+00:00","List CUP videos as previews, rather than demos.

svn-id: r31175
"
"b03c23ce5743844520f67a0891113cccab059361","2008-03-18 12:55:41+00:00","Fixed input bug causing Zanthia not to move sometimes.

svn-id: r31177
"
"caf1cc60debe628edfdb1b24c7cb4bb35d2ddad4","2008-03-18 13:01:33+00:00","Completed implementation of KyraEngine_v2::inputSceneChange.

svn-id: r31178
"
"4c880c77a49f073036426d0ea8aa53e63ac7e013","2008-03-18 13:29:12+00:00","Fixed pathfinder post processing in HoF, this should smooth walk paths a lot.

svn-id: r31179
"
"d4daa244d858491a15a5f0ea7928639ee0a9a546","2008-03-18 13:51:16+00:00","Fixed bug, which caused displaying wrong string to be shown then combining items in HoF.

svn-id: r31180
"
"8e98e35b56034c42a150fd5b8adf2a67255b4609","2008-03-18 14:27:22+00:00","Fixed bug in o2_setupSceneAnimation. (should fix some lockups)

svn-id: r31181
"
"2af4fc103499236cf79c7cfafeaaa622ea63e7cd","2008-03-18 15:50:43+00:00","- Implemented opcodes:
-> 21: o2_backUpScreen
-> 22: o2_restoreScreen
-> 28: o2_addItemToInventory
-> 50: o2_wipeDownMouseItem
-> 67: o2_loadPalette384
-> 68: o2_setPalette384
-> 165: o2_disableTimer
-> 166: o2_enableTimer
-> 167: o2_setTimerCountdown
- renamed some timer functions

svn-id: r31182
"
"83390027c2b594f42165777610fbb14ee01eea17","2008-03-18 17:00:26+00:00","- Implemented opcodes:
-> 12: o2_setCharacterFacing
-> 14: o2_moveCharacter
-> 61: o2_loadZShapes
-> 83: o2_setPathfinderFlag
-> 90: o2_setSceneAnimPos
-> 160: o2_updateTwoSceneAnims
- Implemented dino riding sequence
- Fixed bug in KyraEngine_v2::initSceneScreen which caused some gfx glitches

svn-id: r31183
"
"9dc4bcb4073a18f562c921ef31f7c515cae3da00","2008-03-18 18:07:05+00:00","- Impelemented opcodes:
-> 95: o2_showPickUpString
-> 107: o2_waitForConfirmationClick
-> 161: o2_getRainbowRoomData
-> 162: o2_drawSceneShapeEx
- Did I mention that HoF is completable now?

svn-id: r31184
"
"80a73d4ae6b4bc157173b8016cb871adc4fd915d","2008-03-18 18:20:13+00:00","Renamed opcode 95 to o2_showItemString.

svn-id: r31185
"
"cbc4c789dac2ba466f69d7d14c2a5f7bf0dd742d","2008-03-18 19:06:53+00:00","Implemented showing of credits after completing game.

svn-id: r31186
"
"f1b11fdff9cb6fc332100b910d7daaf441f7d0c1","2008-03-18 19:27:21+00:00","- started to add debugC calls to methods
- implemented some missing bits in itemDropDown

svn-id: r31187
"
"12bfc644f4d3e83193e60de2808798584fe1e8f9","2008-03-18 19:31:38+00:00","Fixed some warnings, so that I too may bask in the glory of Kyrandia 2.

svn-id: r31188
"
"48dc290b6c1a9c549a1ce490cc12e2037391dc46","2008-03-18 19:32:00+00:00","Bugfix for dropping items off scene.

svn-id: r31189
"
"2d33f965a57b7364e47b5f39baabc13a54303446","2008-03-19 01:22:28+00:00","Correct extra field for Amiga floppy versions of Simon the Sorcerer 1.

svn-id: r31190
"
"98a851d25edf8e3b463e3c8114959fe1edc32a48","2008-03-19 10:17:29+00:00","cleanup

svn-id: r31192
"
"63c09d5a40d70ff7dd96b691a6a413d9d65a8c22","2008-03-19 10:18:05+00:00","Removed some unportable and unused code ;-)

svn-id: r31193
"
"74e5ef5c56f22884c5e198cb6ab6dd2455f525f0","2008-03-19 10:37:33+00:00","Commit of Hans de Goede's patches to the sound handling code

svn-id: r31194
"
"2c670730849126f431873ef32b22bca33bfcc8dd","2008-03-19 11:07:27+00:00","Implement OSystem_PSP::getFilesystemFactory() and OSystemPSP::getTimeAndDate()

svn-id: r31195
"
"24fe9e42d765528529d48192bdbd6369e1082c9f","2008-03-19 17:13:31+00:00","- fixed numerous graphics glitches
-> fixed bug in o2_stopSceneAnimation
-> fixed bug in KyraEngine_v2::freeSceneAnims

svn-id: r31196
"
"93a10bd0bdd60b059bad0a50bf1b4c197a95aaba","2008-03-20 10:11:57+00:00","Fixed cauldron/spellbook graphics on savegame load.

svn-id: r31197
"
"6d1cf23322ceccf99fd0dc5e541ccfab71891672","2008-03-20 10:27:39+00:00","Made sure mouse is visible after savegame loading.

svn-id: r31198
"
"cc3b30d1cd8d79d6f7919923ca934e3e77a7d2e4","2008-03-20 11:32:06+00:00","Possible fix for graphics glitches when showing letters.

svn-id: r31199
"
"01a24e5a6f471e46064397e1f8ea430184d3d4c1","2008-03-20 11:37:10+00:00","Supply correct flags to copyRegion when displaying spellbook pages.

svn-id: r31200
"
"e70790c610556cbf2ab96cdff03d447aaa76fa71","2008-03-20 11:42:02+00:00","Enabled some cursor related commented out code.

svn-id: r31201
"
"e69532bff2f9d6e864f1183fd3db5008fc836097","2008-03-20 11:55:52+00:00","Fixed loading of 'filedata.fdt' in HoF demo from Malcolm's Revenge CD.

svn-id: r31202
"
"4669f2a659cd2682dcd362e14456c645c021ccee","2008-03-20 11:58:18+00:00","Fixed compilation.

svn-id: r31203
"
"558625ff45946301b0dc10b44f7e3ebda90319a1","2008-03-20 12:07:06+00:00","Fixed bug #1920869 'HoF: palette artifacts in inventory'.

svn-id: r31204
"
"91a33d4d63dc0ac6bd39ff7f040caf065e011fcc","2008-03-20 12:10:30+00:00","Add HoF CD demo.

svn-id: r31205
"
"cb22a83034c159e3f26f65a53164f8d913fe62e7","2008-03-20 12:29:35+00:00","- made Screen_v2::applyOverlay support dirty rect handling
- fixed copyRegion flags in KyraEngine_v2::scrollInventoryWheel

svn-id: r31206
"
"2f7b59d3e289be6c9968aa5bad671b6987555108","2008-03-20 20:36:36+00:00","- fix skip flags for non-playable demo

svn-id: r31207
"
"88069c943a6bd94da8d183f943200076d5638148","2008-03-21 12:51:03+00:00","Proper fix for bug #1920869 'HoF: palette artifacts in inventory'.

svn-id: r31208
"
"a169619526c811f1718bbeb5ed980f68b9d2c8e7","2008-03-21 16:18:27+00:00","- Implemented opcode 97: o2_isAnySoundPlaying
- reworked sound channel handling in HoF
=> fixed some voice related bugs

svn-id: r31209
"
"b615eb177b0b840204d2f1483a7c677e1fcfeedc","2008-03-21 16:21:27+00:00","Cleanup.

svn-id: r31210
"
"dea50612cb25d9017ed00ea99a71ad4badb4cc13","2008-03-21 16:54:08+00:00","- disabled some old warnings
- removed waiting for voice to finish in o1_restoreCustomPrintBackground

svn-id: r31211
"
"2a4aa9c379ba218a768e7ad052ec8b1b365b0ad1","2008-03-21 17:09:45+00:00","Removed some unneeded waiting for voice to finish.

svn-id: r31212
"
"5107404089c1572f690f90fa3880c2170c20056c","2008-03-21 23:54:47+00:00","- improved timer information output in debugger
- fixed timer data loading

svn-id: r31215
"
"7c57c127eac46b90b95baf30ca17cd892f116349","2008-03-21 23:57:05+00:00","Oops removing debug output.

svn-id: r31216
"
"07bb52b78e08c5ba66e58644b81f8186c1ef1e94","2008-03-22 00:33:05+00:00","Fix for bug #1922521 'HoF: mountaineer sprite vanishes'.

svn-id: r31217
"
"63b1de562801d93919a3241c3525466d2a24754f","2008-03-22 09:46:25+00:00","Add support for room states in Waxworks (DOS).

svn-id: r31218
"
"df78d4d4843ecd3ab815a028f42b26751bbb5cdf","2008-03-22 12:43:23+00:00","Fix for bug #1922514 'HoF: palette artifacts when abom. snowman'.

svn-id: r31220
"
"46376d38a9fb780549461b809125c7e8b68df546","2008-03-22 14:29:30+00:00","- fixed bug in Sound::voiceIsPlaying
- fixed speech animation duration in Kyra1

svn-id: r31221
"
"81cff1f0470e83a7e971b919e674327bd56ef1bf","2008-03-22 16:05:23+00:00","removed dead code

svn-id: r31222
"
"c5d48856a3fab896e84bc4052e22dd950727289d","2008-03-23 00:24:58+00:00","Added the MD5 for a non-interactive demo of Lost in Time

svn-id: r31223
"
"56711f148906946cb7b10725c44dcee6f8719f52","2008-03-23 00:34:39+00:00","Add comments about unknown cases and remove unused cases in parseNextEvent().

svn-id: r31224
"
"7047e5e974938238cde087fe3c6f158cb2bcace8","2008-03-23 00:36:41+00:00","Remove left over debug code.

svn-id: r31225
"
"b81993f894e195d8fcef54cb0f77486d485861bd","2008-03-23 11:24:23+00:00","Patch #1923547: enable nasm usage on OS/2

svn-id: r31226
"
"3236e308a497ad9a2d4f833648b209231f3facce","2008-03-23 11:46:55+00:00","Patch #1923546: fix checking sdlconfig on OS/2 (supposing the files in path are executable)

svn-id: r31227
"
"00033ff7470d2cb21c3ce8207e2deadacf63543e","2008-03-23 20:55:42+00:00","Respect text/voice settings in Kyrandia 1 Intro/Outro.

svn-id: r31228
"
"47ad2487b4bd46fcb3ad249710b7bfca01744e3e","2008-03-23 23:18:43+00:00","Fix name locking in Waxworks, and cleanup.

svn-id: r31229
"
"59b0bf8fa152cede9c3fc27b36b138629050a086","2008-03-24 06:48:09+00:00","Correct background color when displaying saved game list in Amiga versions of Simon the Sorcerer 1.

svn-id: r31230
"
"6dafd78b56f8a999790782f1c7709dadc587ba38","2008-03-24 14:21:06+00:00","improved skip flag handling for intro and outro (see tracker item #1922556)

svn-id: r31231
"
"1bb41bf225e3f8e8595bc2c9ffce9c3a51bf70e0","2008-03-24 23:01:51+00:00","fixed skip flag reset for sequence player

svn-id: r31232
"
"48fac2f9dc4bf608d9568c4c626f4fabc98160c8","2008-03-25 08:03:32+00:00","Fix palette glitches in Amiga OCS version of Simon the Sorcerer 1.

svn-id: r31233
"
"171a4d1bdb86df0debecf32244014ab6d858a6a0","2008-03-26 01:50:59+00:00","Switch all font data to hexadecimal and sort by language name.

svn-id: r31235
"
"defe50eada0f5b7d6d7d8c2551e633450d0883a9","2008-03-26 01:57:26+00:00","Always ignore invalid characters, when using charset data.

svn-id: r31236
"
"eeb4c75244097fcb8a1614e5073df4177488c2fd","2008-03-26 02:11:22+00:00","Ooops, correct error in conversion of The Feeble Files font data.

svn-id: r31237
"
"10be4b2a6d2f9542ddae8b4e86097ff2470280de","2008-03-26 03:10:40+00:00","Move code to ignore invalid characters.

svn-id: r31238
"
"44200b4ac6a9d77f90e512914e9aa8e2f219c68b","2008-03-26 04:04:14+00:00","Remove error for missing sound files in The Feeble Files, due to fault in French version.

svn-id: r31239
"
"52930616c65e0bfea21ba1fa92f850537a10cfa2","2008-03-26 04:07:32+00:00","And don't attempt to play sound, when the sound file isn't loaded in The Feeble Files.

svn-id: r31240
"
"53ea302f5d9a559c6d8cb3ece432fb8e322c17a1","2008-03-26 11:09:38+00:00","Added note on how the WinCE scalers are wasting valuable cycles, and how to fix that

svn-id: r31241
"
"b2aea51d5851a70beb7bacdda1c057c6c588487e","2008-03-26 14:56:51+00:00","Call InitScalers instead of setting gBitFormat directly

svn-id: r31242
"
"afed582280195bc0165e93af7003aadea6438c89","2008-03-26 16:11:47+00:00","Fix bug #1923638 'HoF: Marco missing animation frames'.

svn-id: r31243
"
"b0c6a12c81c949c7f61b6639b509dad2b4fbb862","2008-03-26 19:29:33+00:00","Modified Patch #1925352: Memory leak fixes

svn-id: r31244
"
"c2df92a9b5079af28dc9debafdbd2ae528db7d71","2008-03-26 19:58:33+00:00","Added a simple hack which adds delay between animation frames of some scene animations, this prevents some animations from running too fast. See for example bug #1923638 'HoF: Marco missing animation frames'.

svn-id: r31245
"
"4b0bdc7a08fb7358637f82b8270844e5080c6c05","2008-03-26 20:28:31+00:00","Extended savegame type checks.

svn-id: r31246
"
"8ca0c65cbdd2cdd058e314ff1c8fcc01d48289d2","2008-03-26 20:49:45+00:00","Commented out two frees() in DestroyScalers(), introduced with commit #31244 and added a FIXME - these cause crashes with 640x480 games, when using an HQ2x scaler

svn-id: r31247
"
"6412c82bf7a88cd7262baf82707263a11932ce11","2008-03-26 21:16:16+00:00","Added some inlines to MemoryReadStreamEndian.

svn-id: r31248
"
"7c33605761fe6a1a0282b454ac36c37464e7f753","2008-03-26 21:17:07+00:00","Added support for HoF savefile from the original interpreter.

svn-id: r31249
"
"c9b93985615fb6c1fa9c57f4064d62ef88486784","2008-03-26 21:24:22+00:00","Possible fix for part 1 of bug #1926547 'HoF: Right mouse button messes up gameplay'.

svn-id: r31250
"
"e96264041186f3118ae3715f59fdcc85ff8f5507","2008-03-26 21:28:26+00:00","Set delay time for the hack in o2_updateSceneAnim to the value Raziel^ suggests.

svn-id: r31251
"
"f919b26875033c41186b840b97752c72cab68f7f","2008-03-26 21:39:44+00:00","- fixed multiple voices playing at once (see bug #1926547 'HoF: Right mouse button messes up gameplay').
- fixed crash while uninitializing AdLib driver

svn-id: r31252
"
"db1b4f0e140ba667ac1a1b0aa3f2ca2d110027db","2008-03-26 21:52:28+00:00","- reworked skip flag handling in some places again
- hopefully fixed tons of warnings related to stackPosString

svn-id: r31253
"
"bf71af3c917e7112a52e479ef3336a0906d3b59b","2008-03-26 21:56:20+00:00","Fixed typo.

svn-id: r31254
"
"762398376fd7a83ab42c4c5aff0058cc8ba94fa0","2008-03-26 21:58:56+00:00","Fixed GCC warning. It warns about 'if (a = b)' unless you put an extra set of
parentheses around the assignment.

svn-id: r31255
"
"d35020ac1778ed9deb6532b226d758ded04a9ce9","2008-03-26 22:26:59+00:00","Init the _fmtownsBuf in the constructor, not in setupScumm() (fixes a leak, and ensure that _fmtownsBuf always is inited)

svn-id: r31256
"
"0a603108921f69474093ef545a898dcb1d518e8e","2008-03-26 22:47:57+00:00","Properly fix DestroyScalers

svn-id: r31257
"
"a2053c08154ed4f0bcb6491830e1c1ca4311058c","2008-03-26 23:21:44+00:00","Prevents adding of events to input queue, which will not be processed anyway.

svn-id: r31258
"
"c4f15a7076bc655f65c0e9a02114593ae1dad689","2008-03-26 23:42:47+00:00","this should fix item #1926532 (HoF: ScummVM quits on ESCaping 'Virgin' and 'Westwood' logo)

svn-id: r31259
"
"4d51eb5fb74b13a34a3807d0bdd5fdafb98388fa","2008-03-27 01:01:52+00:00","Add work around for script bug in The Feeble Files.

svn-id: r31260
"
"9287ea8376b689359b7c10a4b4a8b14474c402b5","2008-03-27 11:06:29+00:00","Patch #1926787: small memory leak and cleanup

svn-id: r31261
"
"57b80a79ab11894a2f9f02b0ddb743d85fcb7132","2008-03-27 14:51:33+00:00","Fix for bug #1926838 'HoF: Animation plays too fast'.

svn-id: r31262
"
"9eb279e1b691612811ea2cb2d0cd9b437e51e09b","2008-03-27 14:55:52+00:00","Update hack comment in o2_updateSceneAnim.

svn-id: r31263
"
"4d4fbc9e97e0c0200f8fd2d1818cb107fbe38ce5","2008-03-27 15:27:31+00:00","Added debugger command to set screen palette.

svn-id: r31265
"
"3e98286af97495aff8d6f4b5e412009ed1f59521","2008-03-27 15:32:20+00:00","Fixed palette loading debug command for amiga version.

svn-id: r31266
"
"165c937e20853d704efd56e383e0bb3042e92ddb","2008-03-27 16:12:48+00:00","Enabled gamespeed debug command also for Kyra1.

svn-id: r31267
"
"3bea667a10d823706a516caf8bd7d93d012c765d","2008-03-27 18:03:00+00:00","- Implemented support for --list-saves in Kyra engine
- Added support for variable length savegame name field
- Changed savegame identifier
- Increased savegame file version

svn-id: r31268
"
"639c4597cd17e6accdbb779db4cb8bb0ed350f53","2008-03-27 20:24:41+00:00","Readded warning when loading HoF saves from original interpreter.

svn-id: r31269
"
"ff2ba585b3efb3b4f37b287fcfbb66db9ac9c8e7","2008-03-27 20:53:52+00:00","Implemented SeekableSubReadStreamEndian moddeled after MemoryReadStreamEndian.

svn-id: r31270
"
"c5526604c07aae0adb3a9a02339ddbf13705879a","2008-03-27 20:54:59+00:00","Removed much code duplication in Hand of Fate savefile loading with SeekableSubReadStreamEndian.

svn-id: r31271
"
"70dfc2baf7ea5f0dc327ea7de9127d500c3d3fa0","2008-03-27 22:05:13+00:00","Made some more former kyra1 specific debug commands available for HoF.

svn-id: r31272
"
"c8ddd54039572d8441d17748a6352ee2e81af0ad","2008-03-27 22:07:57+00:00","fix for bug 1922560 (HoF: wheels entrance gfx wrong)

svn-id: r31273
"
"42ff616533ab9bf4a1f88a16bd82ce88359940f3","2008-03-27 22:34:17+00:00","Oops added missing return, should fix crashed on trying to load non-existant savegames.

svn-id: r31274
"
"7a683ae43602533aa22b31c15fbd765043c3c763","2008-03-27 23:12:45+00:00","Implemented opcodes:
- 164: o2_getSfxDriver
- 165: o2_getVocSupport
- 166: o2_getMusicDriver

svn-id: r31275
"
"bf26f82cbbb1995b5bb31c9e3ac9c974b23c6e12","2008-03-27 23:46:30+00:00","Implemented opcode 74: o2_setSceneAnimPos2.

svn-id: r31276
"
"72484b204b85f1d25c01e0f0afc757d9a3c646b9","2008-03-27 23:53:49+00:00","- Implemented opcodes:
-> 51: o2_getElapsedSecs
-> 52: o2_getTimerDelay
- Added warnings to o2_delaySecs and o2_delay for unimplemented subfunctions

svn-id: r31277
"
"221e6bb84f67e8fd808d922a0ff347956b78e166","2008-03-28 00:07:40+00:00","- some accuracy changes for KyraEngine_v2::snd_playSoundEffect()
- fix one more skip flag bug in the sequence player
- fix SoundTowns_v2::voicePlay()

svn-id: r31278
"
"98f9a47619681943d9dc797f6982abca3a1f4c44","2008-03-28 00:13:43+00:00","Implemented opcodes:
- 38: o2_countItemsInScene
- 57: o2_setTimerDelay
- 84: o2_getSceneExitToFacing
- 137: o2_removeItemFromScene

svn-id: r31279
"
"a1ec44cef2284a285a17f22136ffd285a26af42f","2008-03-28 00:16:47+00:00","Properly set sfx flag when playing digital SFX.

svn-id: r31280
"
"b033c5f605559854e92bda06ffd54ec132a3c22c","2008-03-28 00:53:54+00:00","Implemented savegame loading via command line params -x/--save-slot.

svn-id: r31281
"
"c5929561babc66df862e5b0b15b14b9430433e65","2008-03-28 01:03:54+00:00","- Clear input queue after loading game via hotkeys.
- Fixed bug which caused the need for clicking twice to change pages in spellbook.

svn-id: r31282
"
"615a40d19cb7d2129c8176dc6456ee52c81c0d03","2008-03-28 01:07:16+00:00","Oops fixed wrong o2_delaySecs.

svn-id: r31283
"
"5fd6af307195d5a04f18a9d00f8f03456ed6e5f9","2008-03-28 01:10:58+00:00","Finished o2_delay implementation.

svn-id: r31284
"
"f7d14259c9fa2f366b71118af03b249e6620c716","2008-03-28 01:28:02+00:00","Implemented command text fadeout.

svn-id: r31285
"
"dc1a7004e949a5c1b8936f73387905e0f96f7e5c","2008-03-28 01:44:49+00:00","Fixed showing of cauldron animations processing while the inventory is not shown.

svn-id: r31286
"
"e29b4bb0cd4b4c71a3a53646b0eb728e7f156063","2008-03-28 06:03:59+00:00","Committed shared pointer implementation of patch #1895703 'COMMON: Managed List'.
Unlike the patch on the tracker this commit includes documentation for SharedPtr.

svn-id: r31287
"
"f2e53b9d224d25852a263be9e84c83c55adf401c","2008-03-28 06:06:11+00:00","Oops that shouldn't be committed yet.

svn-id: r31288
"
"7f81de679480acbcc9d2b13e52e0938675252d27","2008-03-28 08:30:42+00:00","cleanup

svn-id: r31289
"
"b910d8d9bb0cd103d30511e61e00c72a89b50748","2008-03-28 09:00:30+00:00","Refactored Kyrandia GUI code a bit.

svn-id: r31290
"
"770bc64f2159f81e8dc43d5d6e7dc1b1b910f6f1","2008-03-28 09:17:13+00:00","Added FIXME comment regarding sorting of pred.dic; replaced weird binary search code with simple binary search code ;-)

svn-id: r31291
"
"70ed8f51b4d338177def727bfcd26c6513637d6f","2008-03-28 12:36:53+00:00","Updated MSVC8 and MSVC9 kyra project files for commit #31290

svn-id: r31292
"
"006f879dd8dcc00bef791555cc29f286cdc338ed","2008-03-28 12:45:26+00:00","Updated MSVC8 and MSVC9 ScummVM project files for commit #31287

svn-id: r31293
"
"4ac08aa32ac251c885d2cb81f19ce25538c3fd9f","2008-03-28 15:29:39+00:00","- fixed svn properties
- reenabled kyra1 layout calculation

svn-id: r31294
"
"7605a9a5174ac5570cc29f92f4b467ab1b350b44","2008-03-28 16:15:00+00:00","Changed HoF GUI code to use common GUI code now.

svn-id: r31295
"
"70e450327455a64cb469f8a1f55e4028ce285de2","2008-03-28 17:38:45+00:00","Fixed 2 off-by-one errors (thanks next_ghost for spotting them)

svn-id: r31296
"
"1e582577915332375e44b8ca97e9e705b1ac00f6","2008-03-28 17:46:18+00:00","Oops

svn-id: r31297
"
"1092b87cd7f4b73d896db3aca031e50a84a43565","2008-03-29 00:04:33+00:00","Removed unused friends statement (causes internal compiler error with GCC 2.95 on BeOS)

svn-id: r31298
"
"f93c076a7b9d59afa4c80ab4241af7fbf252a0ab","2008-03-29 00:08:56+00:00","Document SharedPtr bool conversion operator; added test cases for it; also added two test cases for the comparision operators, which currently fail

svn-id: r31299
"
"7a919a0f4fbbcf2a5bd82533f6f846e2509923a1","2008-03-29 13:27:25+00:00","Add patch #1928643 - Czech fan translation of Simon the Sorcerer 1.

svn-id: r31300
"
"e411ccc01f4d6e2071cb5d2d86590fa8041486a5","2008-03-29 20:14:32+00:00","- allow SharedPtr objects with incomplete type
- updated documentation accordingly
- clarified documentation about comparison operators of SharedPtr

svn-id: r31301
"
"dbe38029db40911cc82136820a771b2fc85454f2","2008-03-29 21:12:36+00:00","Changed FilesystemNode to use a SharedPtr instead of implementing its own ref counting

svn-id: r31303
"
"e93a1f0c32736b58e622c7907b83cefa0dff7ea1","2008-03-29 21:17:43+00:00","Removing dead code

svn-id: r31304
"
"7b295995dc0d42c2f3297791b04316d2fb2b9813","2008-03-29 23:04:10+00:00","Centralized the way the hashmaps allocate and free nodes (in order to instrument and maybe use a pool allocator later)

svn-id: r31305
"
"25b9a8a1cb3fd278d58179525ffe7f5ebca9bbb4","2008-03-29 23:16:44+00:00","New drawShape code for Kyra 1 and 2. Scaled sprites no longer appear mutilated. This also fixes bug #1582675 (KYRA1: Brandon standing IN the floor).
This still needs some testing (for both Kyra 1 and Kyra 2).

svn-id: r31306
"
"85f8d617b09a05a4eecb18e542922772fadd279c","2008-03-29 23:20:53+00:00","Let mass detector add all hits, instead of only the first one

svn-id: r31307
"
"6a5ae22368aa4a5b2c5a92111e1d6c7edcc76195","2008-03-30 00:54:46+00:00","Formatting.

svn-id: r31308
"
"30c513eb2dbc52c965760d454aa8f87ab80f36d8","2008-03-30 00:55:16+00:00","- fixed formatting
- fixed const correctness (needed a const_cast though :-/)

svn-id: r31309
"
"b3f858af2b4a9cc488b5dd9aa0722d95c9fc930c","2008-03-30 01:01:12+00:00","Renamed some functions according to our coding guidelines.

svn-id: r31310
"
"08b54da75ecfb16e5dcc0b86aecf1171748aeac4","2008-03-30 01:09:05+00:00","Readded friend statement required by standard conform compilers. Disabled for gcc 2.95 though.

svn-id: r31311
"
"3db24addcdc09db817c220620138eb463fd8b58d","2008-03-30 01:26:51+00:00","- Added support for custom deletion operator (aka deleter) support for SharedPtr.
- Removed two failing comparison tests of SharedPtr in our test suite (those were not supported according to our documentation anyway)

svn-id: r31312
"
"a957b45d5cb8c532ce3995935c6d840e36bb41dd","2008-03-30 01:35:12+00:00","Cleanup.

svn-id: r31313
"
"dcc385f3de5d3b8d520bab310836c8e58e88ad0b","2008-03-30 02:36:23+00:00","Fixed hashmap code. (please make a better check next time when changing code in common/, this was a really bad one :-/)

svn-id: r31314
"
"06cf3d3c54d637abf6f1a3787d414de4a730f870","2008-03-30 02:39:21+00:00","Add test for copying hashmaps.

svn-id: r31315
"
"ff5743ba8f71591a115559d8f0727adc0ded3b86","2008-03-30 02:43:18+00:00","Cleanup.

svn-id: r31316
"
"91e30d8e50d90928e71856f5b79ef2034714d02d","2008-03-30 02:43:22+00:00","- get rid of const_cast

svn-id: r31317
"
"b7a3dfd9df028dceaf4982e016c48f9be09833b6","2008-03-30 03:18:16+00:00","Always clip rect to copy in Screen::copyRegion now, like the original does.
This fixes bug #1537373 'KYRA1: Crash when meeting Zanthia'.

svn-id: r31318
"
"dc813c1c209d29732f682df6bf126c9546d78e06","2008-03-30 03:21:01+00:00","Cleanup.

svn-id: r31319
"
"411a588850604d67e8a606c0496999f5065d35d5","2008-03-30 05:42:39+00:00","Introduction of a fixed size memory pool with a typical free list implementation
+ : amortized O(1) allocation, O(1) deallocation, less overhead per allocation
- : unused memory is not reclaimed until death or manual invocation of a function

svn-id: r31320
"
"a84d1ea78b5590357c2fb62cdb5d4ccfc3008e8a","2008-03-30 06:02:34+00:00","The hashmap uses the memorypool for allocating/deallocating its Nodes
(It is faster and it saves approximately 70kB the DS or other small devices will appreciate having)

svn-id: r31321
"
"49e3efe55eb26ad3e499a8cc44c5de11e011d361","2008-03-30 06:12:16+00:00","Fixed signed/unsigned warning.

svn-id: r31322
"
"78419238f909dc2af0bb5740c71052f7a570fa49","2008-03-30 06:37:46+00:00","The 'anchor' (root) of the linked list is now constructed inplace in the List instead of being newed (it has the same lifetime as the List itself anyway)

svn-id: r31323
"
"7624cf28ab6e0f6848726c48afd67ef3350ff923","2008-03-30 11:56:32+00:00","std::max => utils.h MAX
Added GPL headers

svn-id: r31324
"
"de5fca43e617766b90018609465c1ae179b4345f","2008-03-30 12:06:47+00:00","#include <cstring> => #include <string.h> (for size_t)

svn-id: r31325
"
"7e1ba4732e0ef99644783111c717832eee684072","2008-03-30 12:44:05+00:00","Dropped superfluous 'virtual' keyword (saves us a few bytes for each String)

svn-id: r31327
"
"3fffcec59e39496c208c32fc5cab8117f10eea05","2008-03-30 12:46:21+00:00","Add section about converting savedgames from original versions. Please add details for other games, where this is possible.

svn-id: r31328
"
"a51c2657b6ae8c83826d1a73ceb4e6a477a7e4a6","2008-03-30 13:13:51+00:00","Added checks for implicit SharedPtr casting functionallity.

svn-id: r31329
"
"5f3529ce782b21c352500385966c531100aa476b","2008-03-30 14:07:34+00:00","Whitespacing fixes

svn-id: r31330
"
"f4e6109b33b4e6bbece5949ff5a06980c89c7c09","2008-03-30 18:27:46+00:00","- fixed savegame description loading in kyra1
- added Kyra2 load menu, currently just accessable from startup menu though

svn-id: r31331
"
"a9d256108d5dfeced10168cafddf1f259d5e88e6","2008-03-30 18:31:30+00:00","Cleanup.

svn-id: r31332
"
"351851971bc8d254dddfdfbb1fda3bcffdedcf2c","2008-03-30 18:32:42+00:00","Committed salty-horse's documentation patch.

svn-id: r31333
"
"57ad73faeec62f304f257433659ab9b8f559ecb0","2008-03-30 18:37:09+00:00","Removed char &operator [] from class String -- it had the potential to wreak havoc when used on shared strings (thanks to tramboi for pointing this out)

svn-id: r31334
"
"4a9891c006d5df160be59f624bccbab18d7380d2","2008-03-30 18:37:27+00:00","Fixed bug which caused sometimes garbage text to be displayed.

svn-id: r31335
"
"54d2e7128e709fd7c6cffc3720d309ae0d2a3edf","2008-03-30 18:41:11+00:00","Implement quit flag handling in Kyra2 GUI code.

svn-id: r31336
"
"bd85909ff998150a6a238ad04a554f5024faa6ef","2008-03-30 18:41:55+00:00","Don't enter run loop when quit flag is set.

svn-id: r31337
"
"a03547dc8ec08d6497cade6a39808cd411ac3af9","2008-03-30 18:53:16+00:00","Some minor whitespace changes, and the customary 'end of namespace' comment.

svn-id: r31338
"
"39995e29adf6c134b8606cc5a201cc0479638967","2008-03-30 18:59:24+00:00","Added fixme regarding header 'new'.

svn-id: r31339
"
"06749f3fcc2a8d72eb575f3aba18efbf780b8178","2008-03-31 07:49:20+00:00","Updated MSVC8 and MSVC9 kyra project files for commit #31295

svn-id: r31340
"
"3c52cfecefc34a89a56520083fe97a63032f6bd6","2008-03-31 23:59:27+00:00","Fix compilation on MSVC 8 & 9 (Added memorypool.h and memorypool.cpp to the project file).

svn-id: r31345
"
"bd8df7afee8d1417ffe02928f6f97efe86ab81d0","2008-04-01 00:23:39+00:00","Add detection entry for Serguei's Destiny II Demo v1.3.1 (March 22nd 2008).

svn-id: r31346
"
"02551f50b8994bc931595292c93b958f5c7c5695","2008-04-01 09:19:22+00:00","Added my MSVC8->MSVC7/MSVC71 conversion tool from patch #1861744 - 'MSVC project files cleanup'

svn-id: r31348
"
"72aceb5c72ec6c917ddf31c5e2d7613283ad2e33","2008-04-01 09:21:05+00:00","Updated MSVC71 project files using the new MSVC project file conversion tool

svn-id: r31349
"
"df470ec33ab607c7edeb7036608d51ecb38f9908","2008-04-01 09:22:54+00:00","Updated MSVC7 project files using the new MSVC project file conversion tool

svn-id: r31350
"
"7744a3b053eac083e974c88fb44ab94ed80ccfa9","2008-04-01 18:23:54+00:00","Fixed spellbook graphics in German CD version.

svn-id: r31354
"
"3b81a73e52dacf347b5a55223f346dfb4da69a5e","2008-04-01 18:35:14+00:00","Fixed bug in GUI code, should hopefully fix white boxes appearing around inventory.

svn-id: r31355
"
"8436943bfd4aace76c16a4c4404c5e9dbc0a41f0","2008-04-02 02:01:31+00:00","Committed patch #1929274 'HashMap: Iterator rework'.

svn-id: r31356
"
"da9701d19b41705e39ead61bc56fed1439720216","2008-04-02 02:15:00+00:00","Implemented transparent List::iterator to List::const_iterator conversion and updated our tests accordingly.

svn-id: r31357
"
"a614273cf0526df1eb23fdc0025936b56120dfde","2008-04-02 02:15:47+00:00","Oops forgot to enable friend statement.

svn-id: r31358
"
"887f7dfb283a90d1487f4e1d91c27b112d251bcd","2008-04-02 02:46:50+00:00","Fixed warnings with gcc 3.3.

svn-id: r31359
"
"4fa0740a279b6e765db31bad3ec5d53ddef4ac2e","2008-04-02 03:16:34+00:00","Implemented death menu. This also fixes bug #1926892 'HoF: Odd behaviour when Zanthia gets killed(?)'.

svn-id: r31360
"
"ff688574c45ee23f4a8012a821cede75729ebac6","2008-04-02 04:23:00+00:00","Changed spaces to tabs.

svn-id: r31362
"
"9bda4980990be08fbdd8595ee01080aceec9699b","2008-04-02 10:48:23+00:00","Patch #1932094: Missing directory in dists/debian/scummvm.dirs fix

svn-id: r31363
"
"acc5d79d7c76c4ad5cc45c608ebee72c0a7af1de","2008-04-02 21:19:17+00:00","Remove Symbian FS creation from common SDL code

svn-id: r31364
"
"4836c1109ccf7af8c4749e079d20b575f581d470","2008-04-03 14:33:53+00:00","Fix Apple IIGS midi playing speed (Based on tests with Apple IIGS KQ1 and SQ1 under MESS 0.124a)

svn-id: r31365
"
"84105227f2d3bee7ba1526012e578ee0c364bbdb","2008-04-03 18:12:09+00:00","Fix naming of the Apple IIGS midi speed variable and its value (Was erronously named bpm although was really ticks per second rather than ticks per minute).

svn-id: r31366
"
"25ff17419385b827e5bcf7106e48dd312e825dbd","2008-04-03 18:31:30+00:00","After further testing it seems Apple IIGS midi playing speed is actually 60 ticks per second. Hurrah!

svn-id: r31367
"
"acb4bda9df1d683a04d52537d26f1f27c20b7412","2008-04-03 19:56:45+00:00","- Added support for filename length > 64 in static resource code.
- Updated warning when 'INDEX' is not found
- Added filesize check for 'INDEX' file

svn-id: r31368
"
"057fb0e9abc8a679ba4d8871dba13a593e0315c4","2008-04-03 21:25:05+00:00","Replaced unloadAllPakFiles with a simple _map.clear on resource class destruction. (Should save a little file i/o need on shutdown)

svn-id: r31369
"
"10233af59f0ff5ccede5afb04fe7379a09346294","2008-04-03 21:42:04+00:00","Cleanup.
-This line, and those below, will be ignored--

M    kyra/resource.cpp

svn-id: r31370
"
"510a81bbd87dd95911e983edc6d331149f18d418","2008-04-03 22:15:59+00:00","Add Apple IIGS MIDI program number to instrument number mappings (Both for the older instrument set used by SQ1 only and for the newer instrument set used by all the other tested Apple IIGS games).

svn-id: r31371
"
"27a39e7f1237cbf876c95db6bd86553e311ed11c","2008-04-03 23:41:24+00:00","Add cyx patch for bug #1915657 - ELVIRA1: Amiga crashes (paula.h:108).

svn-id: r31372
"
"f3b42e3f90b0b9f3f4638df0b7de54c1681254b3","2008-04-04 01:12:35+00:00","This fixes the menus for fm-towns and floppy versions (only load and death menu atm).

svn-id: r31373
"
"834badfc954750b4adfb3a14c3abf5bfcd6f5600","2008-04-04 01:43:20+00:00","cleanup

svn-id: r31374
"
"3dc6f9000de5782ccb1a08cb081300dcb0961580","2008-04-04 06:24:49+00:00","Added partial support for main menu. Only load, save and resume buttons are working currently

svn-id: r31375
"
"84af9cae9d47406942ce38b9a5cdaf306e12d11e","2008-04-04 06:45:39+00:00","Added support for quit game button.

svn-id: r31376
"
"84e19f913bb333dd7a89b6a91d83f2554c053e61","2008-04-04 07:28:32+00:00","Fixed incorrect return type of currently unused function (just in case it ever gets re-used)

svn-id: r31377
"
"0aecc4fb037c64ac49284d896ca2195a0e4b4ed3","2008-04-04 08:13:35+00:00","Implemented game options menu.

svn-id: r31378
"
"05e2b6696730fe0abb177d57725dd0db7ff12085","2008-04-04 09:16:25+00:00","Fixed nameclash.

svn-id: r31379
"
"e36b95b64a0a830f94eed17687cbc078fde05c22","2008-04-04 09:33:09+00:00","Revert revision 31256, since _textSurfaceMultiplier isn't set at that point.

svn-id: r31380
"
"74f80acbf09bbefca149d9db648effd7b3114c54","2008-04-04 11:43:26+00:00","Properly *init* the _fmtownsBuf variable, and properly release the memory it points to when restarting

svn-id: r31381
"
"f83e93e6d8e8ff58a2fb3b1df7c93e4fb7c8af2d","2008-04-04 13:28:53+00:00","Also hooked the death menu quit button to the game quit code implemented in rev #31376

svn-id: r31382
"
"214d6b5eb7a64ed52e970c44e8773faa16f62c63","2008-04-04 15:55:18+00:00","Little less waste of memory.

svn-id: r31383
"
"272fa6d578fcb9bcc7ba8511f886630503799bae","2008-04-04 18:02:50+00:00","Implemented audio menu, slider bars not moveable via mouse yet though.

svn-id: r31384
"
"82c2f1203e1a286a55e1a4155878b234881f8cf0","2008-04-04 18:09:19+00:00","Cleaned up volume settings managment.

svn-id: r31385
"
"cd47709a2a12d94f3ff5c79a2bd60d6240dabd00","2008-04-04 18:11:44+00:00","Disabled some more options settings for non talkie versions.

svn-id: r31386
"
"24439e7056f540ceaf78b7cc3e671a0c0dcd7f79","2008-04-04 18:14:10+00:00","Made sliders working.

svn-id: r31387
"
"35a422f00e39bb240957b8bebe69f99b461a9718","2008-04-04 18:26:37+00:00","Disable buttons properly for non CD version.

svn-id: r31388
"
"b890b33a31657153d2efd99a8ad44953eaf7de47","2008-04-04 18:41:30+00:00","Remove temporary savefile after it was loaded.

svn-id: r31390
"
"595be540839bbb6c896effeac5876a10482edcfe","2008-04-04 21:00:58+00:00","cleanup

svn-id: r31391
"
"eac671de99b601d6df1ac4c54ad4af8709871ae3","2008-04-05 01:49:28+00:00","Implemented proper savefile listing, this fixes bug #1479872 'KYRA1: a small menu issue'.

svn-id: r31392
"
"be27c94247da04530210c87d2bfaf6a23f0053f6","2008-04-05 01:53:45+00:00","Fixed crash when opening menu after starting kyra1 with -x/--save-slot.

svn-id: r31393
"
"25364dc618c820da5da780b5c5812f039abaaee2","2008-04-05 01:55:44+00:00","Added simple hack to work around drawing of scroll button after loading game in HoF.

svn-id: r31394
"
"702062757202d1d70bfc1290e7d5ffaf8052fba0","2008-04-05 02:22:11+00:00","- Implemented delete savegame menu
- Reverted hack introduced with last commit

svn-id: r31395
"
"c1319f8034a6c66caaa21fbf1a16f68e637457e0","2008-04-05 02:24:43+00:00","Cleanup.

svn-id: r31396
"
"dd8676877e665c405d8d56f52d5fbeea62eb1cc1","2008-04-05 02:40:28+00:00","- cleanup
- sort savefiles in kyra from newest -> oldest

svn-id: r31397
"
"066a55ef33f258c1ecc3eb4518d13dc3419819c1","2008-04-05 02:50:38+00:00","Small fix in processButtonList.

svn-id: r31399
"
"b99d5603cf871ab5b5b9800d44f21469d603ddd7","2008-04-05 03:03:10+00:00","- Changed quicksaves to use slots 990-998.
- Made slots 990-999 not writeable for savegames via menu.
- Temporary save in HoF now uses slot 999.

svn-id: r31400
"
"c826716a9134d1dff9a1ed4deefb4957b3530fc5","2008-04-05 03:13:26+00:00","Don't rename quicksave filenames when deleting files.

svn-id: r31401
"
"c676cf560f664d68adc337da579d788cea2606b1","2008-04-05 05:23:46+00:00","Fixed crash when supplying illegal savefile names.

svn-id: r31402
"
"7a0c61c44094059eff4e88e9ad6b88a83c4d3dae","2008-04-05 07:43:54+00:00","Added detection for IHNM Mac. Gampe plays, but sound and music is a big TODO

svn-id: r31403
"
"99283e9e54cf6ac667133ebd482f5bed520e91dd","2008-04-05 12:36:52+00:00","Sound effects in the Macintosh version of IHNM are now working

svn-id: r31404
"
"2da922081cc1feab68217941946340ca892be074","2008-04-05 13:19:12+00:00","Speech is now played correctly in the Macintosh version of IHNM

svn-id: r31405
"
"d0bd38115618f92d33036fe35919f4c209c7b15e","2008-04-05 13:54:12+00:00","Updated NEWS with the new supported games in the SVN version

svn-id: r31407
"
"a52c6e0ba247bbdfda24248fd9cff4830d4e8300","2008-04-05 14:06:50+00:00","Added code to load (but NOT play) the external music files in the Macintosh version of IHNM. I believe that the music in the Mac version is in TFMX format, which is not supported yet

svn-id: r31408
"
"c8061850ed9a823c8f3fe1592c00a36a21d190d9","2008-04-05 14:18:32+00:00","Simplify code

svn-id: r31409
"
"44ba7f97a96a7c20e71c5003357f4f6e02894831","2008-04-05 14:28:24+00:00","Fixed regression from previous commit

svn-id: r31410
"
"5a5d5c02e1bebde5b8ee55f7d91cd7124615606c","2008-04-05 16:02:28+00:00","Fixed warning. (You shouldn't have to use floor() to simulate integer math
anyway.)

svn-id: r31411
"
"bfdca912bc7ef42dfc6377f80fec06c64a265c23","2008-04-05 17:33:54+00:00","Fixed regression causing a crash when the user had less than 5 savefiles.

svn-id: r31412
"
"29f1e6de384dc0828de0988ba140b839492c97e3","2008-04-05 22:29:08+00:00","Advanced detector: replaced kADFlagAugmentPreferredTarget by its inverse, kADFlagDontAugmentPreferredTarget (since all AdvDetector engines except Kyra used kADFlagAugmentPreferredTarget, it seems reasonable to assume that as default)

svn-id: r31413
"
"affff7d39509f0b90a5e59d7ba9f5ff93555aadb","2008-04-05 23:30:12+00:00","Code cleanup.

svn-id: r31414
"
"3d1a2e2049d599d88dc834a05dd25978f8a0f8f7","2008-04-06 05:40:02+00:00","Replaced custom ManagedList with Common::SharedPtr.

svn-id: r31415
"
"27816d8c8bd1c3d4dfbacf5d3973825c9085f349","2008-04-06 07:05:56+00:00","Add very basic support for Amiga version of BRA.

svn-id: r31416
"
"0d33f62eb7b7d95887613181be46f2d3ef183cb4","2008-04-06 09:08:57+00:00","Updated parallaction MSVC project files for commit #31415

svn-id: r31417
"
"6060900ce0d1ba87ca8e96a922257b6472a50dfd","2008-04-06 09:13:39+00:00","Fixed codepage of parallaction project files (MSVC has a bad habit of changing it for unknown reasons...)

svn-id: r31418
"
"bd1224e36c86c635d0c8712f2082c9301674f51c","2008-04-06 11:12:42+00:00","Replaced ManagedList with Common::SharedPtr in lure's sound system

svn-id: r31419
"
"6a9acd7a5e526f06e5fc0757335cd5b09ce34e3c","2008-04-06 12:00:37+00:00","Replaced ManagedList with Common::SharedPtr in the rest of the lure engine

svn-id: r31420
"
"0dcfa7b3dfd2d41f3e6304606340bfd858e908b8","2008-04-06 12:17:41+00:00","Fixed warning. (The 'anim' variable shadowed the anim() function.)

svn-id: r31421
"
"4f71d3814c76c1adb80ac46b6c89a405a98ddd1a","2008-04-06 13:06:05+00:00","Fixed various bugs in GUI_v2::processButtonList.
This fixes bugs:
- #1935827 'HoF: Buttons pressed state not available'
- #1935219 'HoF: artefact after loading game'

svn-id: r31422
"
"21a66f12ba633434c7202ec2a2342b896ce78d68","2008-04-06 13:32:41+00:00","- Fixed HACKs in o2_getMusicDriver and o2_getSfxDriver
- Implemented missing bits in KyraEngine_v2::enterNewScene for MIDI (AdLib code still missing)
- Added music/sfx type to Sound class

svn-id: r31423
"
"a2e355d6715ffd6aa121c7dfdc357e56906c9ae8","2008-04-06 13:57:28+00:00","Implemented fadeout waiting in KyraEngine_v2::enterNewScene for AdLib.

svn-id: r31424
"
"22992f4aa5a4684a736f6e8daa957735c3389c03","2008-04-06 14:11:43+00:00","Implemented opcode 33 o2_loadSoundfile.

svn-id: r31425
"
"2755727249891afe297d8a921d69d408957de7d3","2008-04-06 14:13:14+00:00","Cleanup.

svn-id: r31426
"
"1c8aa0c807ce13b7e6804f4ebd1fa0e7d42058ea","2008-04-06 14:16:27+00:00","Set opcode 31 (o2_limitMouseRrange) to o2_dummy for now.
Also added a comment about that.

svn-id: r31427
"
"bf5840f58764bc0ebf51a7d31471000c39f7be0f","2008-04-06 14:41:25+00:00","Fixed crash on startup when running japanese versions of Kyrandia.

svn-id: r31428
"
"996d78df281984365c927a0a1e2313dab6313018","2008-04-06 14:54:14+00:00","improved static res handling (sequence data, shape animation data)

svn-id: r31429
"
"ebe249f4f7c184acf0568709abcc9bc1e0d18614","2008-04-06 14:54:51+00:00","improved static res handling (sequence data, shape animation data)

svn-id: r31430
"
"22efb801d4713e53ea146132e02e5ddfe3089fc3","2008-04-06 14:57:01+00:00","svn-id: r31431
"
"a05b085a21d2bdeedd73100d53bc5c2382bcea50","2008-04-06 14:58:02+00:00","Fixed potentional crash.

svn-id: r31432
"
"213ac50740779cae168fa0fd31087bb36466bf29","2008-04-06 15:05:12+00:00","Oops. that shouldn't have been reverted by last committ.

svn-id: r31433
"
"9c590436648a8b13c1a06e785eed367a47db2ed9","2008-04-06 15:23:18+00:00","Silenced MSVC warning

svn-id: r31434
"
"abf7914b8137b47f98bbad09c70c86f7f2cb0cc4","2008-04-06 15:29:09+00:00","Fixed walkspeed on save loading.

svn-id: r31435
"
"6552193ceb2362cfd0e7399b6a3b99bb6b537d5f","2008-04-06 15:31:57+00:00","Fixed mouse input handling when entering savefile description.

svn-id: r31436
"
"16066fa3e7e8b2260328d74d0a58f2d636a5a492","2008-04-06 15:35:30+00:00","Fixed memory leaks.

svn-id: r31437
"
"4b58a431da886a416a3a6eea19938357eb0a4065","2008-04-06 16:54:51+00:00","Implemented support for Towns (and hopefully DOS floppy too) menus.

svn-id: r31438
"
"1fc3df790560ea185ccc56936381b88a9271f62d","2008-04-06 19:48:47+00:00","fix label for first save slot (towns/floppy)

svn-id: r31440
"
"831ab122685e8021cf6bdd21db3663852bf2ff6f","2008-04-06 22:17:02+00:00","implement missing Screen::drawShapePlotType11_15()

svn-id: r31441
"
"9f06984ba5be4b21f0d261887e2c8431d6838e27","2008-04-07 10:29:18+00:00","Bugfix for linking error in MSVC8 - it doesn't like multiple unnamed structures within a class

svn-id: r31442
"
"9377fc7dc8548eb5369c99f5ab3e2437e756a003","2008-04-07 17:56:04+00:00","Some MIDI related cleanup.

svn-id: r31443
"
"732774fd8de3cb6cebcd78730813d26e0330e66e","2008-04-07 20:24:40+00:00","Patch #1913862: 'CinE Script system'

svn-id: r31444
"
"04ff7cb1c1f15d9fd46691c10f50153aa4d721d9","2008-04-07 20:38:52+00:00","Fix a recent regression reported in bug #1937042: 'FEEBLE: Capitalization
variations when searching for files'

svn-id: r31445
"
"1aac71ae343dbeb06feadbe92a25105d66b356a0","2008-04-07 20:56:34+00:00","Advanced detector: Let the user define a language/platform override for games which do not specify a fixed one (like multilingual versions)

svn-id: r31446
"
"48c909767214dc6ba009cfe3f4354c7d40c1fcdf","2008-04-07 21:07:07+00:00","Fixed compilation on gcc 2.95.

svn-id: r31447
"
"0aff78a05dee679b50e805ff2eed46307fdfcee7","2008-04-08 03:05:31+00:00","Change add_to_config_mk_if_no to the more natural add_to_config_mk_if_yes in some cases

svn-id: r31448
"
"9a0825cc068a3c4bbe4e4d67c26312ff9c6cc532","2008-04-08 08:54:05+00:00","Added a sanity check for original game script bugs in Agent06. Fixes bugs #1935842 - 'AGI: Fan(Agent06) - Graphic errors' and #1935838 - 'AGI: Fan(Agent06) - Crash on Quit'

svn-id: r31449
"
"9f94a2fa8c492b83e837621890b053633bc35532","2008-04-08 09:59:41+00:00","Fix compilation on my 64-bit system...

svn-id: r31450
"
"4cc4bd0f41812e226f7809904d8d50e26c71d0e1","2008-04-08 14:45:42+00:00","Implement the full range of Apple IIGS MIDI program number to instrument mapping. Switch to using 8-bit signed sample data with Apple IIGS (In preparation for mixing multiple channels). Make Apple IIGS wavefile handling use SharedPtr and Array.

svn-id: r31451
"
"d037d7e5798f629042b82242c395b03854929ce7","2008-04-08 18:11:54+00:00","Spellifix

svn-id: r31452
"
"e4ddd5d5f1bc52a7fb3d82a6858ad3578f312663","2008-04-08 18:12:32+00:00","Ignore pointers on save

svn-id: r31453
"
"50c373247843370e622fde6b2b869f050465d0d4","2008-04-08 18:52:27+00:00","- Set language to Common::UNK_LANG for multilanguage games (kyra2cd and kyra3) in detection code
- Save language changes done in menu in HoF to the config file

svn-id: r31454
"
"7bd2ae65dd3081bf88f183c55fb662dc013204fe","2008-04-08 18:53:22+00:00","Oops removed leftover.

svn-id: r31455
"
"9f6012c29474569a88fca7a47743cd570b6f5e02","2008-04-08 20:04:51+00:00","First attempt to support Japanese DIG

svn-id: r31456
"
"08f7059cf22f912a3d826ec79f153f3eba794daa","2008-04-09 11:25:23+00:00","Fixed an off-by one error in the AGI set_menu opcode. Fixes bug #1935896 - 'AGI: Fan(Beyond Titanic 2) - Assertion'

svn-id: r31457
"
"b586235fb838ebdd41fe36c7d7deb4f7f3e7a6f9","2008-04-09 15:16:50+00:00","Fixed warnings for msvc9.

svn-id: r31460
"
"3d407b81f8221e229136f4e12cb6bb9b9ba2d6e2","2008-04-09 23:38:11+00:00","fix drawShape glitch (Brandon's feet got mutilated and one vertical line was not drawn when leaving the screen to the left or to the right )

svn-id: r31461
"
"71f6a7e8553f722926ad9277ca870b1f95b482b3","2008-04-10 08:27:09+00:00","Allow the predictive dialog to be shown when ego cannot be moved (i.e. when _game.playerControl is 0), since in those cases it is possible to enter text in the input area. Should fix bugs #1935844 - 'PQ1: Predictive Text does not load' and #1936374 - 'LSL1: No predictive input at age verification page'

svn-id: r31462
"
"aac2b7019a1c9680a314e39b88b3b0d4911b7f87","2008-04-10 15:05:59+00:00","- Fixed missing static data for kyra1 demo
- Fixed some warnings in create_kyradat
- Updated kyra.dat for new data for kyra1 demo

svn-id: r31463
"
"b54b9b34b4db5f88cb29e1be3d611dd72c539ece","2008-04-10 15:41:06+00:00","- Updated debug output for KyraEngine::snd_playTheme
- cleanup

svn-id: r31464
"
"d91bc921895deb8d2f566851f96474785f0e14f0","2008-04-10 16:18:29+00:00","Made KyraEngine::startup just loading soundfile instead of also playing track 0.

svn-id: r31465
"
"453d40c4056a61a49c0fa80148ed6bbc370585f9","2008-04-10 17:25:38+00:00","fix make clean

svn-id: r31466
"
"c13f2a73a36110beea710223097056b9a3d6b2f4","2008-04-10 19:02:17+00:00","Small fix related to all notes off event.

svn-id: r31468
"
"1bdc515880cbb9b7cfd49b145a5b2c707422653a","2008-04-10 19:05:05+00:00","Lock mutex in playSoundEffect, should help threading safeness of the code.

svn-id: r31469
"
"950e9e6d445c96b1e0e8364f7f06bbfb75e0ea5e","2008-04-10 19:08:27+00:00","Don't mention EPOC as deonted in bug #1939634: 'Web site should not mention EPOC'

svn-id: r31470
"
"924912b7fb324a84d8f3cf6b96f5228d86af4fb2","2008-04-10 19:15:14+00:00","Fixed track unloading for MIDI.

svn-id: r31472
"
"5f3bfc702c062cf7a918617a616947e55e005f7d","2008-04-10 19:33:06+00:00","- fixed valgrind warning
- reduced midi volume fadeout from 2s to 1s like HoF is doing (Kyra1 should use the same value)

svn-id: r31473
"
"9f16b3f5f5f7ca9587f9533d98d1753e38eeb877","2008-04-10 20:42:56+00:00","Fixed regression in Kyra1.

svn-id: r31474
"
"1a5d45db68f0fb7bf87ed98ef4f3b2f6b3b480db","2008-04-10 21:41:57+00:00","Add way to denote CD versions of games and drop language in augmented
names per LordHoto's request.

svn-id: r31475
"
"baf3d985132e016f9ad7b0d429c8b1c3ce211dc1","2008-04-10 21:50:41+00:00","- Reverted r31454 changes to detection.cpp
- Added ADGF_CD to all CD versions
- Added ADGF_DROPLANGUAGE to Kyra2/3 CD version
- Changed Kyrandia engine to use agumented target ids

svn-id: r31476
"
"58b78bae07b208874d62db6d6c35a22ae07aa950","2008-04-10 21:58:59+00:00","Initial attempt at handling non-default AGI game input prompt

svn-id: r31477
"
"6711a494a228792138af1e8534a37d1c75d4f1f4","2008-04-10 22:18:47+00:00","Improved searchpath support. (Should again detect everything Common::File is able to load).

svn-id: r31478
"
"6830ff34499dd94df0c22271d62ffec17d097229","2008-04-10 22:22:35+00:00","Small bug fix.

svn-id: r31479
"
"a81e9e456dc783ad75b94fa8cf9d376227f27480","2008-04-10 22:25:38+00:00","Load all needed package files for kyra3 on startup.

svn-id: r31480
"
"829823c9a24ed0ca670528b03d33759119f2c7af","2008-04-10 23:31:21+00:00","towns music file name fix

svn-id: r31481
"
"9f5eefdeec2904c8cf6a24a903c65c06a06f516b","2008-04-11 08:12:22+00:00","Correct VAR_SOUNDCARD setting for PC Speaker and list all modes for VAR_SOUNDCARD.

svn-id: r31482
"
"a525b5bdd5e7bebb6b342f060e2f1319e0705221","2008-04-11 08:13:47+00:00","Allow mixed Adlib/MIDI mode in VGA version of SOMI.

svn-id: r31483
"
"d0f46196c2a5d58e6551282faf85675014067dfd","2008-04-11 11:05:04+00:00","Silence MSVC8+ warning C4800 about forcing an int value to bool that got turned into error C2220 (Warning treated as error).

svn-id: r31484
"
"e2fe69ff71f2f100e19c27e5039a79152b49cca6","2008-04-11 17:00:29+00:00","Show current text prompt when the accept_input opcode is called. This, together with commit #31477 fix bugs #1875076 - 'AGI GR: Input prompt not changing in outhouse' and #1939632 - 'SQ2: Text prompt glitch'

svn-id: r31485
"
"c1cd5d17c230167c28e2a56d82e1345f46ffc55d","2008-04-11 19:05:44+00:00","Correct documentation

svn-id: r31486
"
"91e1a6b7be34e2cbb52826c28ce210b15bb19f1e","2008-04-12 13:20:15+00:00","Fix a couple of typos spotted by Raziel.

svn-id: r31487
"
"1f91dc03846caecc0651101f54ad25f1864ae132","2008-04-12 23:17:21+00:00","- some refactoring for Kyra3
- removed unneeded map code in KyraEngine_v3

svn-id: r31488
"
"d54eaa39a14bc9ec81ffee09ed2c8f25348286df","2008-04-12 23:26:13+00:00","Added fade out time parameter for digital sounds.

svn-id: r31489
"
"c533bfbfd2dab68adb9fd78a1c5ec0e376f43359","2008-04-12 23:29:12+00:00","Fixed graphics glitch in Kyra3 menu.

svn-id: r31490
"
"d718f5bffe166b41eae8787f69fb806d752ccc4e","2008-04-12 23:35:59+00:00","Hopefully fix messed up gfx in first screen of Kyra 1 demo.

svn-id: r31491
"
"bebb4cefd16674242b5a9d6ed1f93fd14504a06a","2008-04-12 23:40:14+00:00","Initialize all screen buffers properly.

svn-id: r31492
"
"e608c10fbb6454a1ca42f71bbafa4feda814d855","2008-04-12 23:54:09+00:00","Updated kyra MSVC project files for commit #31488

svn-id: r31493
"
"7d86690b29b1cbe6a2a6df0e3a9b5b2eb681719a","2008-04-12 23:55:26+00:00","fix crash and graphic glitch in non-playable HOF demo

svn-id: r31494
"
"991a9779905e6c02e1ce60e447ec552928ec9950","2008-04-12 23:59:11+00:00","Cleanup.

svn-id: r31495
"
"cb3ef94e34e92fff3c8699fe370b78a4326d9666","2008-04-13 00:02:11+00:00","Fixed palette after watching Kyra3 intro.

svn-id: r31496
"
"618757a8c09eaf3060f52625e2f2958d205b5864","2008-04-13 07:38:33+00:00","Fixed warning.

svn-id: r31497
"
"8cc1539315d25c99484950b4059004c52e4182cf","2008-04-13 23:46:55+00:00","Added eriktorbjorn's MemoryWriteStreamDynamic class - a stream that grows as it's written to

svn-id: r31498
"
"c2e3572fe4a624d5a8fff733bf4db5d1c5fa6849","2008-04-14 10:07:15+00:00","Added contains() method to Common::List, same as in Common::Array

svn-id: r31499
"
"372d30c815cc010e4d0a3042b52955ba8081b808","2008-04-14 12:08:00+00:00","typo

svn-id: r31500
"
"805f21e36954fffb3a3244543bc8e5bb40f3ce9f","2008-04-14 12:11:10+00:00","Removed Common::Array::contains()

svn-id: r31501
"
"dcb6d4ed06ef2d7f523789979b3a9caaf5f9af9c","2008-04-14 15:59:32+00:00","Reverted commit #31499

svn-id: r31502
"
"853b6e28e9d1fcc45aa477978a44a45bbb4f22d0","2008-04-14 20:20:51+00:00","Implemented some kyra3 code.

svn-id: r31503
"
"f69a0e6d7d3fba86f84b46c05610336d407aeea3","2008-04-14 20:28:17+00:00","Updated MSVC project files for commit #31503

svn-id: r31504
"
"91dafda25095cb897a765318bc68bcb1dda3b722","2008-04-14 20:42:09+00:00","Cleanup.

svn-id: r31505
"
"10fe009db3beb54b75b2062c2e475b1073ba9784","2008-04-14 20:57:24+00:00","Fixed music fade out.

svn-id: r31506
"
"7f9ac5e0b86aa8feb6cce4af88134f4c621903b6","2008-04-14 21:09:42+00:00","Fixed warning.

svn-id: r31507
"
"ade3c38dc1d0622b98be679642bc6b4d228301cf","2008-04-15 22:31:08+00:00","Move MIDI program change mappings to their own structs (Useful for later changes).

svn-id: r31508
"
"875ee5c913fb3928ce07fc5ea1d53d50bb9ef1f5","2008-04-15 22:35:30+00:00","Cleanup (Remove unneeded functions and rename a struct correctly).

svn-id: r31509
"
"719c85f0ca8ac8a0c35dca5cb9caade00d14e54e","2008-04-15 23:00:34+00:00","Make convertWave-function static as it uses no member variables.

svn-id: r31510
"
"a1ddd9ba817a19be1541b21d5b57f1d0fe8e9576","2008-04-16 02:09:51+00:00","Add English Windows version of Blue's Birthday Adventure (Red).

svn-id: r31511
"
"7e222b1a0c687ed430933a0d6eb3148053d0fa3f","2008-04-16 08:50:25+00:00","Cleanup.

svn-id: r31512
"
"943c3378153265c9404ea847b6d132240a699296","2008-04-16 10:20:58+00:00","Remove unused opcode and minor cleanup.

svn-id: r31513
"
"ee89c3000bbc7cc762edcc9abd9412703e464fbf","2008-04-16 12:24:09+00:00","Minor cleanup.

svn-id: r31514
"
"888eb26f8b372b355dc34a231a2d2dcf9e6e8dd4","2008-04-16 12:51:56+00:00","Small cleanup of the GP2X backend. Still a few odd things I need to glance at (like it is not working ;-)).

svn-id: r31515
"
"af4b21a112189df1c86d2e4c4f65e849f6b2346d","2008-04-16 14:08:01+00:00","Correct time events duration, when saving in Elvira 1.

svn-id: r31516
"
"00dde660e32d6d0788f5588322417b5e5ea7444c","2008-04-16 19:43:56+00:00","fix sjis text color (ship scene)

svn-id: r31517
"
"d3fe05127449b75a45dac6a10637c98e5cd25f71","2008-04-16 20:28:27+00:00","Some more kyra3 code. This should show the first scene for a brief second. (and it initializes a bit more internal stuff)

svn-id: r31518
"
"57e91a6addf0c4695e6a16f218de98b152fb2fe2","2008-04-16 21:13:52+00:00","Some more kyra3 code.

svn-id: r31519
"
"e463ac03672630e997b68408590cc86887449765","2008-04-16 21:17:23+00:00","Fixed Malcolm upside down bug.

svn-id: r31520
"
"b2a586acb2a4917e822a59f7cb246231b0b81329","2008-04-16 22:23:09+00:00","Fixed shape drawing in HoF (regression) and Kyra3.

svn-id: r31521
"
"ac25887670858ef559a042776cd3c9e0166e955c","2008-04-16 22:30:13+00:00","Fixed warning.

svn-id: r31522
"
"2b87cd1fa959304ee8a9aecdbd6cfc3ee317bcc3","2008-04-16 23:09:07+00:00","- Some more mask page handling fixes for Kyra3.
- Implemented a few scene animation opcodes
- basic run loop (all the user can do is quit though)
- music related fix
Wee you can see the squirrel animation and listen to the music now!

svn-id: r31523
"
"b2331a01ec71bc32f31ce35aae4ea85912b6cd6d","2008-04-16 23:11:46+00:00","Fixed mask page handling in ScreenEx::copyWsaRect, this time it should be correct...

svn-id: r31524
"
"09d468e884f92604e414227dc1fa0d1909accf74","2008-04-16 23:12:15+00:00","Fixed another warning, so that I can steal some of LordHoto's Kyra 3-related
glory and make it my own. ;-)

svn-id: r31525
"
"45d7a68902c2aefe12338d2fa693858593d0430e","2008-04-17 04:18:53+00:00","Fix Bug #1555117 - SIMON2: Cannot load Savegame.

svn-id: r31526
"
"84ce12cd1e82fdddb88c1369878203a99bd9f63f","2008-04-17 06:33:03+00:00","Fix bug #1932150 - SIMON1: Sousaphone Bug.

svn-id: r31527
"
"607039db0151339e847f54e4664f4358be4b42e4","2008-04-17 06:33:48+00:00","some more drawShape plot functions now (after Lord Hoto's additions) required for Kyra 1

svn-id: r31528
"
"3db5db112719e71e43c7c8b18efc4cefcfeaf859","2008-04-17 07:01:15+00:00","Enable original load/save system in HE100 games.

svn-id: r31529
"
"90ae32c97577c573737906e0913b74ae6083abd4","2008-04-17 07:21:47+00:00","Updated MSVC project files for commit #31518

svn-id: r31530
"
"ff2dfb6a4ea34389e71ea6ea3afbd4449c333dfa","2008-04-17 09:30:04+00:00","Cleanup of background loading for BRA.

svn-id: r31531
"
"984e42569e263505f2e13000613d2c35aee49b43","2008-04-17 09:31:22+00:00","Replaced unpackBlt with a more general version that can also unpack animation in BRA.

svn-id: r31532
"
"d4c8d4e18fcb64bed3082caf66ecd9cebf061556","2008-04-17 09:32:57+00:00","Fixed usage of SharedPtr, so that reference counting is proper and there are no more objects that need constructors at global level (helps PalmOS).

svn-id: r31533
"
"7745100b8d05a9447590042f2b0700583f198ca3","2008-04-17 11:59:20+00:00","- minor cleanup in script.cpp
- fix for memory leak in Kyra3
- fixed enterNewSceneUnk2

svn-id: r31534
"
"a2cdc5e39369aebe3abe09762d36180f398d9d43","2008-04-17 13:38:44+00:00","- fixed bug in script interpreter code (could've also affected HoF)
- some more Kyra3 code:
-> start sequence should show up now partially
-> fixed a scene animation related bug
-> a few more opcodes

svn-id: r31535
"
"4685cc047d5908c110afb10422ae6f8f463f03fa","2008-04-17 14:26:50+00:00","Implemented kyra3 timer code.

svn-id: r31536
"
"66328be342c3b82b121744e52e6f55583e8309b4","2008-04-17 15:29:10+00:00","Added partial implementation of updateMouse cursor.

svn-id: r31537
"
"7b5673470828224c85bbbceedf6994f77d68a4a5","2008-04-17 15:39:34+00:00","Properly implemented KyraEngine_v3::lineIsPassable.

svn-id: r31538
"
"7ec2b87fb677a6765631ab1338b30c0d56d1dacf","2008-04-17 16:35:16+00:00","Commented out unused variables.

svn-id: r31539
"
"6cd8eda9bd81283e63e7d2784aa278e2f774de22","2008-04-17 16:38:26+00:00","Implemented support for Kyra3 TLK files.

svn-id: r31540
"
"710976824e841164ee7e64469f26b11bb1220303","2008-04-17 16:55:13+00:00","Fixed Kyra 3 TLK file loading.

svn-id: r31541
"
"7f881d0be1e9e11d2c84c1e0d4ccc771513d2dce","2008-04-17 17:06:29+00:00","Update MSVC 7, 7.1, 8 & 9 project files for r31536 (Added timer_v3.cpp to kyra's project file).

svn-id: r31542
"
"75641c405e01df1dbceaca2038fe3c4c95c39dc5","2008-04-17 17:16:52+00:00","Fixed gcc warning.

svn-id: r31543
"
"29e2b19c923abb81eb50b61580b982edecd6af3d","2008-04-17 17:18:43+00:00","Implemented Apple IIGS MIDI playing with software mixing.
(NOTE: As you can hear this is a work in progress ;-))
- Added IIgsSoundMgr class for handling Apple IIGS sounds and moved functionality inside it
- Added IIgsMidiChannel class for handling Apple IIGS MIDI channels
- Made sound effects playing use the IIgsSoundMgr class too
- Modified software mixing routine to mix multiple sounds

svn-id: r31544
"
"7828d50384705a3114c1c44d44f03000b55dc752","2008-04-17 17:40:28+00:00","Fix building with GCC (a few extra ;'s got in there somehow).

svn-id: r31545
"
"87256747b180895d493f8c92f920fde20ad2ec15","2008-04-17 17:46:39+00:00","Implemented sfx support for Kyra3.

svn-id: r31546
"
"0f34c16c1ea22b0e1591e8a9aa555a8a10daaafc","2008-04-17 17:49:18+00:00","Cleanup.

svn-id: r31547
"
"eb2ffce2fd3b5903d6fa29c67b9f97a5d6d85cb9","2008-04-17 17:57:16+00:00","Implemented volume handling for SFX.

svn-id: r31548
"
"0f150670044568f25e7f5e0719deb5aaf0d49201","2008-04-17 18:00:48+00:00","Cleanup.

svn-id: r31549
"
"b03ec8ac7594c99d1a71ff0021b4101c304915e6","2008-04-17 18:28:28+00:00","Fixed gcc warnings.

svn-id: r31550
"
"0336442dc41132b3c852cb24b190a7ab9e3a23f4","2008-04-17 19:24:27+00:00","Cleanup the shell script that puts a GP2X archive together.

svn-id: r31551
"
"e08a00fd0eee8a7f30f32078cddc43d515c0cf53","2008-04-17 19:27:03+00:00","GP2X: Fix 'oops'. No point not initialising the joystick when you need to use it to have some form of input ;).

svn-id: r31552
"
"14918b05d1f932e7870ce6271f5a720eea687939","2008-04-17 21:05:20+00:00","Tiny cleanup: Fix a parameter name discrepancy between IIgsChannelInfo::noteOn-function's declaration and definition introduced in r31550.

svn-id: r31553
"
"7666531dacbe104b9f42f924411388adca147ecb","2008-04-17 22:07:17+00:00","Fixed setShapePages maxY default value.

svn-id: r31554
"
"4b7e5aeaf72e77834d4f8beec9e139c12ed129bc","2008-04-17 22:50:15+00:00","Little fix in drawShape.

svn-id: r31555
"
"84ec2374abfa317742898ed19b995302b2fc582d","2008-04-17 23:57:31+00:00","Update a few debug messages.

svn-id: r31556
"
"6e804cee42af30b27db04ede850eca694694f47a","2008-04-18 01:59:54+00:00","Always correct time events duration, when saving games.

svn-id: r31557
"
"7d6a349afa3e9d8596b4536139d3657370d443c3","2008-04-18 15:05:46+00:00","Fixed displaying text speed settings in CD version.

svn-id: r31558
"
"ba90659705cec3894615b77b1dcf3f3fe768c8bd","2008-04-18 15:58:49+00:00","Some kyra1 menu tweaking, now all languages should use the same clean layout instead of variable width button system (widths even changed at runtime, which looked rather strange).

svn-id: r31559
"
"1d086550a74b5e01a5c6a3ec57c58f93fd93041d","2008-04-18 19:11:58+00:00","- complete support for the playable HOF demo

svn-id: r31560
"
"b1d00dbdf1b565baff77c45505fd8ad083b105e6","2008-04-18 19:13:49+00:00","update kyra.dat (HOF demo text data)

svn-id: r31561
"
"6a74374d36ab79b3d5e721acb65a322818557057","2008-04-18 19:14:44+00:00","update kyradat tool

svn-id: r31562
"
"0dac6c8f85d1d1666171d4f59ab081f8f1bda1a9","2008-04-18 19:33:06+00:00","Fixed a Valgrind warning. I hope this is what the function was intended to do.

svn-id: r31563
"
"07ef82c26a1681a1b59af2edf7d2811d533cade9","2008-04-18 21:41:55+00:00","Fixed some valgrind warnings.

svn-id: r31564
"
"2fe0988d27545da9bd5174f9030bcedcea6d016f","2008-04-18 21:44:55+00:00","Fixed mismatching operator delete.

svn-id: r31565
"
"0824721746a6ef07749323d9fdfa20fbf4824fca","2008-04-18 22:23:31+00:00","Cleanup.

svn-id: r31566
"
"5b742734ab6e4402cc321f207e9b359125d8748c","2008-04-18 22:24:39+00:00","Oops...

svn-id: r31567
"
"76b1f4bcea6a89e37087f61d672cd55b47e6f719","2008-04-19 00:34:02+00:00","Added a debugger command 'script' to allow execution of script engine methods

svn-id: r31568
"
"bf46b5f17868cee22aea71b274a3515593206fbd","2008-04-19 13:52:09+00:00","- reworked tim handling
- moved tim interpreter to new class TIMInterpreter

svn-id: r31569
"
"a79c91b7d0dbe856728e218b6de496cfae040afd","2008-04-19 13:58:32+00:00","Added some asserts to prevent out of bounds access.

svn-id: r31570
"
"49cf8237f0d6188fa5c061b38e69d18b75eccc7c","2008-04-19 14:00:14+00:00","Renamed function for consistency.

svn-id: r31571
"
"7e12a50bed6cb18d6240d30eee6fb5a5a0aa7130","2008-04-19 14:31:10+00:00","- some minor renaming in TIM code
- added exists function to Resource
- started to add checks via exists to assure that important files are present

svn-id: r31572
"
"1d6af7b5024f9eaf5bbce1c398e6160ac465fa43","2008-04-19 14:36:26+00:00","Fixed Resource::isInPakList behavior.

svn-id: r31573
"
"a922069eaeee3b963813840eebbe261ee6e2a06c","2008-04-19 14:40:37+00:00","Ops isInPakList behavior was still not quite correct. Fixed bug with embedded pak files.

svn-id: r31574
"
"ceb46a38cd18f05b6795bdfc250bdbe1ea4fe18a","2008-04-19 14:44:06+00:00","Changed KyraEngine_v1::setupSceneResource to use Resource::exists instead of Common::File::exists.

svn-id: r31575
"
"8711a48de3378637445661b3a554ad94d0ad0998","2008-04-19 14:48:29+00:00","fix detection for playable Hof demo

svn-id: r31576
"
"960655eec559e16b663d259c7f3b0fd6616a9d86","2008-04-19 14:52:35+00:00","Fixed formatting.

svn-id: r31577
"
"82a35bb87b7cfba114c6f3ca05971ed4287a7706","2008-04-19 15:04:59+00:00","Added fade to black/music fadeout when starting kyra3.

svn-id: r31578
"
"84b9c589240446f3596d41970832d7c349b5629b","2008-04-19 15:37:59+00:00","Added some comment about palette setting in KyraEngine_v3::playVQA.

svn-id: r31579
"
"4f4eb8d77165c0fecfe5d9bd8f4773cd60e44ac7","2008-04-19 17:17:48+00:00","One more valgrind warning fix.

svn-id: r31580
"
"03caed6ce3303150d75185ca94334759901fe344","2008-04-19 22:22:00+00:00","Implemented some kyra opcodes and some chat handling code, now Malcolm should say something after crawling out of the dump.

svn-id: r31581
"
"663ae0147434f795d9704a365f565c1ac161f98a","2008-04-19 22:25:22+00:00","Fixed Zanthia chat script selection.

svn-id: r31582
"
"2de46c5e80f1b099092128236e4b6603e5e67e76","2008-04-19 22:26:22+00:00","Oops forgot to update assert last commit.

svn-id: r31583
"
"6692c4613db0726727abccb9a8c71f1eb39621f9","2008-04-20 00:11:42+00:00","Implemented opcodes:
- 21: o3_showBadConscience
- 23: o3_hideBadConscience

svn-id: r31584
"
"fb02a030a55f7eed0b58f6ab0ba7638b48b04a14","2008-04-20 00:30:39+00:00","Implemented opcode 49: o3_badConscienceChat.

svn-id: r31585
"
"733676033ae17e898012e6119a0a72d4798f5501","2008-04-20 00:32:39+00:00","Fixed bug in playStudioSFX.

svn-id: r31586
"
"24e3ba7154d498adcd59ff69809b93768bc38b10","2008-04-20 00:41:00+00:00","Added missing file sequences_v3.cpp.

svn-id: r31587
"
"2db899d1c70ddb703b39555ca59d6402fb3a96ae","2008-04-20 02:11:10+00:00","- fixed various glitches
- implemented some input code for kyra3

svn-id: r31588
"
"913f40688af37eb1aa4c392da1b4fa1614225d77","2008-04-20 02:22:08+00:00","Added some more opcodes.

svn-id: r31589
"
"8cbd185731b1b378c80126c28d6f8e5f7c75b78b","2008-04-20 07:44:27+00:00","Use correct (I hope) size when loading TLK files. The size field in the AUD
header does not count the size of the header itself. (This fixes a failed
assertion when entering the Pegasus Landing in Kyrandia 3.)

svn-id: r31590
"
"a329be773e976a70a4b092542dcde024d40d0106","2008-04-20 10:39:39+00:00","- Fixed some valgrind warnings.
- Little bugfix for scene shape loading.

svn-id: r31591
"
"8a881ea45464eb63e646b0c74edeb2bbb4c55e3d","2008-04-20 10:57:50+00:00","Updated kyra MSVC project files

svn-id: r31592
"
"01bbe8cb6c44d5e735fb893d9e783b5a2f7055ec","2008-04-20 11:52:08+00:00","Fixed long standing bug in encodeShape.

svn-id: r31593
"
"e1ef6c9e9d7106e75415f8ba7cd78552ef229512","2008-04-20 11:59:22+00:00","Fixed bug in getCharLength.

svn-id: r31594
"
"78c675278b1a232d2058b2d85eb089bfdec64b12","2008-04-20 12:34:16+00:00","Implemented opcodes:
- 64: o3_checkInRect
- 87: o3_stopMusic
- 88: o3_playMusicTrack

svn-id: r31595
"
"cdfcab93153fd660e633a98e48a441cbf1cda4b9","2008-04-20 13:44:44+00:00","Implemented opcodes:
- 6: o3_getCharacterFacing
- 7: o3_getCharacterScene
- 13: o3_trySceneChange
- 32: o3_checkForItem
- 46: o3_addSpecialExit
- 63: o3_drawSceneShape
- 75: o3_update
- 80: o3_enterNewScene
- 86: o3_setMalcolmPos
- 154: o3_setupSceneAnimObject

svn-id: r31596
"
"96fd18a13bbe4def704e1f9b15100f3dc48aaf64","2008-04-20 14:25:37+00:00","Implemented sound priority handling.

svn-id: r31597
"
"d484c7ed434e9f8e8267049fccbe3dbb5c39fe0b","2008-04-20 14:36:39+00:00","Improved sound priority handling.

svn-id: r31598
"
"d0590a09eac68d5cde64d37fb2e5bbd1471a676a","2008-04-20 14:43:56+00:00","Initial import of the work in progress MADE engine

svn-id: r31599
"
"7ca439f410ac1c46a387567b30271ae4e4a2ed30","2008-04-20 14:47:37+00:00","Initial import of the work in progress M4 engine

svn-id: r31600
"
"635c96358ac26354aa67c5823e4c792dde0559c8","2008-04-20 14:49:41+00:00","Added m4.dat, needed for Orion Burger

svn-id: r31601
"
"8dea07eeac34ae0aabc468e7b8711d3d34ae911b","2008-04-20 14:55:41+00:00","Added the m4 and made plugins

svn-id: r31602
"
"b7dc73f52ca596cf3846b044615ff8b5d0d8ff02","2008-04-20 14:58:28+00:00","Added the M4 and MADE engines to configure (disabled by default)

svn-id: r31603
"
"9c3aa0d28fa1d70c420d5c5886b19e11db4ede0c","2008-04-20 15:04:32+00:00","Added MSVC project files for the M4 and MADE engines

svn-id: r31604
"
"47ef97e6064047efd6f304e30f6a0aa4b904d2b0","2008-04-20 15:09:04+00:00","Added the M4 and MADE engines

svn-id: r31605
"
"7783b666c66bfa70e686a9eb0b76951bc640e7d0","2008-04-20 15:16:58+00:00","Fixed bad usage of functor objects.

svn-id: r31607
"
"378bce31ce656ec2bc330dd24f1515f72431937a","2008-04-20 15:19:27+00:00","Removed unused variables.

svn-id: r31608
"
"84a7cd33876eabfcc1fedd0b126f77039647edaf","2008-04-20 15:19:27+00:00","Further updates to the MSVC files for the M4 and MADE engines

svn-id: r31609
"
"7e07dd5ec720905e09c5aac37a80941c6053e132","2008-04-20 15:36:40+00:00","Changed spaces to tabs.

svn-id: r31610
"
"38319954d1035a7ec8df335c88d455a4042a94fc","2008-04-20 15:40:17+00:00","Credits update for the M4 and MADE engines (3/3)

svn-id: r31613
"
"f173041811398817ffce870d30ef3b87d1302736","2008-04-20 15:47:11+00:00","- moved kyra functor code to common/func.h
- adapted debugger code to use functor code from common/func.h
- adapted kyra engine to use functor code from common/func.h

svn-id: r31614
"
"ac6ce80613258513bd689d1b8bccc1e3cce01a33","2008-04-20 16:11:27+00:00","Initial support for M4 and MADE engines

svn-id: r31615
"
"aef171a55679e5f785aae28f03f076ccd5eb19a7","2008-04-20 16:12:46+00:00","Updated SYMBIAN buildsystem to build M4 and MADE engines

svn-id: r31616
"
"00a8c7752734350040dc8fe5e9da0b6c5cf08006","2008-04-20 16:18:50+00:00","Catch EVENT_QUIT events, too. I realize that g_system->quit() isn't the nicest
way to quit a game, but it beats not being able to quit at all.

svn-id: r31617
"
"87becbc22fb8bfa52e379cece1732525ad9be25a","2008-04-20 17:07:23+00:00","Forgot to disable engines in special build

svn-id: r31618
"
"ad6f9caf5186eb9ad860b1b31c5b1b2806b978ab","2008-04-20 17:15:31+00:00","Compilation fixes by lordhoto

svn-id: r31619
"
"b33f873fe5998ef885a5d89c4f831f04beff1f48","2008-04-20 17:17:24+00:00","Updated kyra MSVC project files

svn-id: r31620
"
"e06918c29f570bc07f29d0cdf20537cdcad5a63c","2008-04-20 17:26:48+00:00","More compilation fixes by lordhoto

svn-id: r31621
"
"65e608f304e2249de9588fe05bea80c6d6657ea3","2008-04-20 17:29:37+00:00","unlink function name causing conflicts. Renaming to unlinkItem.

svn-id: r31622
"
"67cd04e9a0c384a56846e2ca6a9bb94980059754","2008-04-20 17:32:32+00:00","Implicit casts are causing problems for CodeWarrior compilers, added C casts.

svn-id: r31623
"
"be975d3da51b86d1db528206370341a56a983879","2008-04-20 18:38:31+00:00","Forgot to include two libs.

svn-id: r31624
"
"15b4b62fbbd9ff50a6e46909ebcbc556e9f2ab29","2008-04-20 19:02:34+00:00","Fixed comments.

svn-id: r31625
"
"bd1cee2104b7f4e29dc299eaa9ebde61c390972a","2008-04-20 19:16:34+00:00","Cleanup.

svn-id: r31626
"
"179479f6f4cb24bedd0c3e21c2af04d4b3f17e2a","2008-04-20 19:17:36+00:00","Made the sound less choppy. Though we may have to do some kind of double
buffering here to completely fix the problem.

svn-id: r31627
"
"bb3d15f5f8c272b420100cdca85585925b9a5095","2008-04-20 19:48:04+00:00","Patch #1947288: 'AmigaOS4: small changes (Makefile, configure)'

svn-id: r31628
"
"3334dbbd9ad098ca2f9e0e91ee88871c58804e61","2008-04-20 20:06:18+00:00","Add another verions of fanmade game Kings Quest 2 1/4 mentioned in
bugreport #1947051: 'AGI: Kings Quest 2 1/4 - Unknown version'

svn-id: r31629
"
"2279d428c2684a805abe28123ba6e961c9182585","2008-04-20 20:11:09+00:00","Added information about spanish riddle

svn-id: r31630
"
"dfdb73367e3576f23a80d43fdfde6b7f7dde2bc8","2008-04-20 20:33:02+00:00","Another fix from #1947288: 'AmigaOS4: small changes (ports.mk)'

svn-id: r31631
"
"87f10ebe40d2c18742751f827d011cbf135c6f21","2008-04-20 22:24:24+00:00","Committed patch removing Audio::Mixer::SoundType alias in Kyra::SoundDigital.

svn-id: r31632
"
"9616ec94c9f5318505f4e3ecdf105439d973cb43","2008-04-20 23:13:38+00:00","Fixed yet another two long standing bugs in Screen::encodeShape.

svn-id: r31633
"
"6aec012921f6ae5790b3fbc8fae9e3e1e3bc625d","2008-04-20 23:38:19+00:00","Simplified Kyra3 TLK loading.

svn-id: r31634
"
"3996b76aeb17922dd52f9a72392f61d6afa911bb","2008-04-21 03:55:10+00:00","Add m4.dat to installation of engine data files.

svn-id: r31635
"
"38b2fb132222a8dcc841000d3ef99ef8b9674671","2008-04-21 04:04:24+00:00","Fix timing in Apple IIGS MIDI parsing. Now sounds should get triggered at the correct times without the previously observed time jitter effect.

svn-id: r31636
"
"5279c5807210578a7390b01d62fb978550d7b527","2008-04-21 07:28:13+00:00","Fixed endian issues in get/setObjectProperty.

svn-id: r31638
"
"651bc3a2786c36146e6471f2c06cffccd82aa0aa","2008-04-21 07:29:35+00:00","Removed Functor2 class definition.

svn-id: r31639
"
"d003b7e6a8ab861b207c322122e7abb5a5d0be83","2008-04-21 08:51:25+00:00","Add detection of the Return to Zork demo.

svn-id: r31640
"
"7531e54006f67398213f827d821be77e3bdb2070","2008-04-21 11:05:44+00:00","Fixed palette handling in PMV videos.

svn-id: r31641
"
"42e8f1f882beb2a803381e9132ac998a212010f2","2008-04-21 11:17:51+00:00","Fixed drawAnimFrame (don't draw anything if the frame number is invalid)

svn-id: r31642
"
"fb76c3eeedc48a89501590bd2b642896ae6462e0","2008-04-21 14:00:39+00:00","Add detection of Orion Burger demos.

svn-id: r31643
"
"4e62a13a67dc499ed0b73c7b19f6f2bb3257b865","2008-04-21 16:52:09+00:00","Performed some optimizations to the PMV player

svn-id: r31644
"
"e9abc1b1917c5cec2d66923a58d1151407fe2675","2008-04-21 17:07:57+00:00","Removed some dead code

svn-id: r31645
"
"e31e1ff02ca01993272a188e62c7552f8c81f07f","2008-04-21 17:08:34+00:00","Removed unnecessary #include

svn-id: r31646
"
"008c4ca9d667bbe1c11349ef06b7c3595b05cf40","2008-04-21 17:47:00+00:00","Added missing ScummVM headers

svn-id: r31647
"
"36bec1d5c8f3eb6f299817692558bd2d33ec7d9a","2008-04-21 18:40:28+00:00","Code merge

svn-id: r31648
"
"169bf5ddba25a7ab63b405a48bccc449550a693e","2008-04-21 18:46:57+00:00","More code merge

svn-id: r31649
"
"54485c24c530288280174f6d286c8c0b367a8206","2008-04-21 20:20:34+00:00","Some palette related fixes

svn-id: r31650
"
"57a9ef3a8f42a7bb71d17f6150dce1e652ce33c0","2008-04-21 20:51:17+00:00","Patch #1941066: 'CinE sprite overlay rewrite' courtsey of next_ghost

svn-id: r31651
"
"aae2b1bab528a506f4959dd271c3dabf70ffa0a6","2008-04-21 21:48:36+00:00","Update cinE.vcproj-files (Remove script.cpp, add script_fw.cpp and script_os.cpp).

svn-id: r31652
"
"056547f45f25d7618754cf82def5fa4d67b3b474","2008-04-22 07:38:49+00:00","Removed 2 obsolete fixmes

svn-id: r31653
"
"f1a27858d54c55dc916c6aa6a3e85f0651596e75","2008-04-22 07:40:28+00:00","Added palette locking and some wip sound playing code. Some cleanup

svn-id: r31654
"
"b302ca9a7e79032df86b5eb69e1e3f0e3a6fbc5c","2008-04-22 08:08:07+00:00","Implemented o1_EVENTKEY. Removed some debug delays

svn-id: r31655
"
"52f43fcff44e4dee4eb25965e2ea2affe9583a1d","2008-04-22 10:18:32+00:00","Fixed Return to Zork game ID

svn-id: r31656
"
"8a18ddb3cae4fa89479225d40984e80c92635b2e","2008-04-22 18:08:56+00:00","Implemented opcodes:
- 32: o3_setHandItem
- 33: o3_removeHandItem
- 50: o3_wipeDownMouseItem
- 116: o3_runActorScript
- 136: o3_countItemInstances

svn-id: r31657
"
"00de16f58733f4dc13cb9ea6c7b8eca3ae9efa27","2008-04-22 18:47:25+00:00","Remove line from buildscript

svn-id: r31658
"
"d1d227db831306027ac36b0898f34582dab420d8","2008-04-22 20:33:46+00:00","Fix initialization of Apple //gs sound

svn-id: r31659
"
"18ed600abea41fee47f92fa798f6fe49c5c37d25","2008-04-22 22:36:09+00:00","Implemented some kyra3 dialog support.
- Room enter talks by malcolm should be working now
- Zanthia should say now some lines after landing

svn-id: r31660
"
"6069dba988e9940b4d5285d6abc01b83967f8702","2008-04-23 08:08:37+00:00","Implemented direct loading of rtzcd.dat from the archive rtzcd.red, i.e. the game doesn't have to be installed first to get rtzcd.dat. Also added the respective detection entry.

svn-id: r31661
"
"d20dc45072a7af1976dd57986cc1ff7b967ac5db","2008-04-23 14:20:34+00:00","Implemented opcode 118: o3_malcolmRandomChat.

svn-id: r31662
"
"4cd8f4fbb4945329aa94da16fe6f76c26cdd7a46","2008-04-23 14:58:30+00:00","Update MSVC project files for MADE (Added redreader.h and redreader.cpp introduced in r31661).

svn-id: r31663
"
"5572f694c074e715cd33c56e875c753915b76fda","2008-04-23 16:06:33+00:00","Implemented opcodes:
- 8: o3_getMalcolmsSpirit
- 52: o3_setMalcolmsSpirit
- 65: o3_updateConversations
- 117: o3_runDialog

svn-id: r31664
"
"79d6c9f04209774f5222e161136627c07beb1013","2008-04-23 17:08:34+00:00","- Implemented opcode: 14: o3_moveCharacter
- Fixed opcode 44 and renamed it to o3_handItemSet, this fixes loads of input and enter scene facing problems.

svn-id: r31665
"
"b69ffa922aefeaa649a56a1ea8d9a0bd646db76c","2008-04-23 17:21:49+00:00","In-game sound effects and voices should be working correctly now.

Implemented the following opcodes:
- o1_PLAYSND
- o1_ISSND
- o1_STOPSND
- o1_PLAYVOICE
- o1_SOUNDRATE
- o1_SETVOLUME

svn-id: r31666
"
"a643a8cc8a1f51e5b628f14be128b1cfa06a2818","2008-04-23 17:39:13+00:00","Fixed warning about potentially undefined behaviour.

svn-id: r31667
"
"4f108832c3fe47eaea18dd6bc838bcc72b5ac8d0","2008-04-23 17:41:28+00:00","Loading from rtzcd.red should now actually work.

svn-id: r31668
"
"347eb2dc0787df12c186882b215d1550cb2ea823","2008-04-23 18:18:11+00:00","- cleanup
- some valgrind warning fixes

svn-id: r31669
"
"1a6bd23780b46cdeb54372f0625545259358f84d","2008-04-23 18:22:06+00:00","Removed file existence checks to determine game version and added game flags instead. Added the MD5 of the English floppy version of Return to Zork

svn-id: r31670
"
"6ca9b8f91de8e8bc3d53e92be2f8ec9e38db96e0","2008-04-23 18:57:21+00:00","- Fixed possible memory leak.
- Corrected processNewShape implementation.

svn-id: r31671
"
"1267ed09db3fa264822d321112a46957adc52875","2008-04-23 19:11:13+00:00","Surely, it's the 'version' of Return to Zork with rtzcd.red that should have
the GF_CD_COMPRESSED flag?

svn-id: r31672
"
"69bdd29976738b246247adfdc399295cf006b943","2008-04-23 19:24:02+00:00","- Implemented idle animation/talk handling in kyra3
- Implemented opcodes: 110: o3_runTemporaryScript
- fixed idle animation handling in kyra2

svn-id: r31673
"
"c841481aa37e673af7cadda41da6dbc77514a8d4","2008-04-23 19:36:21+00:00","Cleanup.

svn-id: r31674
"
"d0ad5867e0d8ecb21aee7abfe0e7beb8eacfcf25","2008-04-23 20:12:06+00:00","Fixed palette issues when showing the inventory and the menu.
Moved drawing code from drawFlex/drawAnimFrame to drawSurface.
Implemented opcodes:
- o1_VISUALFX
- o1_SCREENLOCK
- o1_SETTIMER
- o1_SETGROUND
- o1_SETCLIP
- o1_SETEXCLUDE

svn-id: r31675
"
"c3cec1926f573e3a856a8f323c1eabf24666d9d7","2008-04-23 20:50:31+00:00","Implmenented inventory show/hide.

svn-id: r31676
"
"718787d700558d774e3aae4901ab740eaaec571f","2008-04-23 20:56:10+00:00","Fixed signed/unsigned warning.

svn-id: r31677
"
"97932a8f32b5fefb6b6d14441a68a1b3f8e42fd7","2008-04-23 21:07:11+00:00","This memory is released with free(), so it has to be allocated with malloc(),
not new. Fixes a Valgrind warning.

svn-id: r31678
"
"68613025ab0c87e4c9316f917bbb800d87b3aba2","2008-04-23 21:07:58+00:00","Cleanup. (and little addition to showInventory)

svn-id: r31679
"
"bed4037abf90ebc8a8d696488f40da2513647823","2008-04-23 22:11:05+00:00","Updated kyra MSVC project files for commit #31676

svn-id: r31680
"
"6562a7cd8abae364b1ca481e4cbdab8f422feaf9","2008-04-23 22:53:19+00:00","Implemented parts of item drop down code for Kyra3.

svn-id: r31681
"
"efeb8a319370bc913dc93f21b77aedeaa3777b7d","2008-04-23 23:22:02+00:00","Added (early) midi player code.
Added 'screen flash' effect.
Implemented opcodes:
- o1_PLAYMUS
- o1_STOPMUS
- o1_ISMUS
- o1_FLASH
- o1_LOADSND
- o1_LOADMUS

svn-id: r31682
"
"27d4ecb12f3addda17797a8eba0598b90d9d454b","2008-04-24 05:13:21+00:00","Updated MSVC project files of the made engine for commit #31682

svn-id: r31683
"
"e14746db3c7d5ad3749af4aa2449f4eef966646a","2008-04-24 05:17:51+00:00","Slight cleanup to o1_PLAYSND

svn-id: r31684
"
"ffc1e56cbd6dc4c9b09f5a23869ecbb5360a667b","2008-04-24 13:05:14+00:00","More kyra3 item drop down code.

svn-id: r31685
"
"68c511423e529d240c4d014b165924eeca6ec1b9","2008-04-24 13:12:08+00:00","Cleanup

svn-id: r31686
"
"e360eb13f87f6825cc11ffa01b270cbeabb94aae","2008-04-24 13:14:39+00:00","Fixed bug in checkCharCollision.

svn-id: r31687
"
"caa7a4787c1b20946bc931dd5b907ce563163064","2008-04-24 13:16:46+00:00","Fixed command line string when picking up item.

svn-id: r31688
"
"37d21cab59f6ad21a353562106cb2b3e4aa3d746","2008-04-24 13:27:05+00:00","Implemented special item string selection for french version of Kyra3.

svn-id: r31689
"
"551bd59fa89fbcb1f460072aaabb20a890266289","2008-04-24 13:57:55+00:00","Implemented opcodes:
- 15: o3_setCharacterFacing
- 107: o3_waitForConfirmationClick

svn-id: r31690
"
"068372ac94ee9cde99df7a8fee64d2c8424bb119","2008-04-24 14:12:08+00:00","Cleanup and simplification of the music playing code

svn-id: r31691
"
"00e652f8e42f41963dc128441d5583e4a4940e9a","2008-04-24 14:15:35+00:00","More cleanup

svn-id: r31692
"
"9c4b451e1a16614d798fbf7a682766b7c774bd85","2008-04-24 14:39:01+00:00","Unimplemented commands and opcodes throw a warning now

svn-id: r31693
"
"b50948b60cf4bd38f3b27a8ec483b4089e9f08c4","2008-04-24 15:04:12+00:00","Fixed bug in loadMalcolmShapes.

svn-id: r31694
"
"103e944fa4c6191f6cce8a9c498f3af7d2a7e139","2008-04-24 15:49:41+00:00","Output error message when kyra.dat initialization fails because of old version or missing entries.

svn-id: r31695
"
"5cf618937fa24bb010fd5a10d420974b3ca8e648","2008-04-24 17:32:24+00:00","Fixed regression: CINE games crashed when a message box appeared (patch by next_ghost)

svn-id: r31696
"
"dd1ae2dd4f89aaaba6767e3eecdd511d9f0086ee","2008-04-24 17:50:15+00:00","Fixed warning.

svn-id: r31697
"
"b861f38d1060b258d68020f8e3c9b401a1151b08","2008-04-24 18:45:11+00:00","Some initial code for font loading
Implemented opcode o1_LOADANIM

svn-id: r31698
"
"80c4249f79e94577c108991356fcc3e9d3860d67","2008-04-24 20:02:01+00:00","Patch #1949695: 'set defaultTo1XScaler depending on width with CJK mode'

svn-id: r31699
"
"c376414771868a88c9d88d022b2d0268087d4676","2008-04-24 20:04:32+00:00","Comment patch #1949695

svn-id: r31700
"
"9ba0aa01fa1f588beacb950ff86c051e398027c3","2008-04-24 20:04:53+00:00","Cleanup & typo.
- Use sizeof(_name) instead of magic number 10 with memset
- 'usually' instead of 'ussually'
- 'delete[]' instead of 'delete []'
- Fixed parameter name discrepancy between loadResource's definition and declaration

svn-id: r31701
"
"604ce476e46732b94e71f1963018cf285125d82c","2008-04-24 20:15:42+00:00","Add textstrings for MADE and M4 engines.

svn-id: r31702
"
"1c660c452436fbcf2e5d06f1e10cc7c236ee11b5","2008-04-24 21:11:55+00:00","Implemented opcode 56: o3_updateScore.

svn-id: r31704
"
"f0cbfff93e2beb98bd50d86524de1c9f8c0de9bf","2008-04-24 21:18:10+00:00","Implemented opcode 60: o3_removeItemsFromScene.

svn-id: r31705
"
"18dde5420cce566889b137aa3685ced4ba420e41","2008-04-24 21:20:32+00:00","Fixed hand item reset on scene enter.

svn-id: r31706
"
"44d44ddf05c4572877b3714c829019a2907c9b89","2008-04-24 21:27:27+00:00","Added screen update in KyraEngine_v3::drawScoreCounting.

svn-id: r31707
"
"2b9a786e795363a627720a08aef8e5ab2fe019de","2008-04-24 21:34:07+00:00","Opcode 53 is o3_playSoundEffect.

svn-id: r31708
"
"a546869dac2b455705c3a6db9a86bc7b523e1ea8","2008-04-24 21:38:08+00:00","Implemented opcode temporary 4: o3t_setNewShapeFlag.

svn-id: r31709
"
"c05d16826ddced4a968808ceadedcef2e8f7bd9f","2008-04-24 21:48:04+00:00","- implemented opcode 90: o3_getScore
- opcode 103 is yet another dummy opcode

svn-id: r31710
"
"8b7486b5ca61653250c7168974233932e8248f87","2008-04-24 23:06:21+00:00","Implemented opcodes o1_DROPSHADOW, o1_TEXTCOLOR, o1_OUTLINE. Added some initial code for opcode o1_TEXTRECT

svn-id: r31711
"
"673784e6efda006e7da942b0875bda601bd70d97","2008-04-24 23:07:22+00:00","Typo

svn-id: r31712
"
"c622414022849f4848cc00cd041816f1713df29f","2008-04-24 23:11:34+00:00","add detection entry for 1.2 CD version.
the md5 of rtzcd.dat is identical to the existing entry, so no additional 'unpacked' entry was added.

svn-id: r31713
"
"9e0cd64629039684e28cd64f20575483e984681e","2008-04-25 07:36:38+00:00","Implemented cmd_rand() and cmd_randomize()

svn-id: r31714
"
"2172eee072d0819bea8cf4d1f35926948756a57e","2008-04-25 10:43:47+00:00","Center videos to screen

svn-id: r31715
"
"4bcf3ab8233d44ee12d95a9328bec67fc74e1902","2008-04-25 11:02:37+00:00","(Poissbly) fixed sound glitches due to a non-implemented decoding variant.

svn-id: r31716
"
"5540ef2d67301dbce1941eab9507285dc508f5ba","2008-04-25 11:05:56+00:00","Added FontResource type

svn-id: r31717
"
"134762be381ef76cb3a13f7ea37e9f0a6464ae00","2008-04-25 11:07:56+00:00","Fixed cmd_rand and cmd_randomize and some cleanup.

svn-id: r31718
"
"3dc6263b171f7b351dd13962f1094bb4ee3129a2","2008-04-25 11:20:43+00:00","Started work on text drawing code.

svn-id: r31719
"
"fd5064b0694b8a671c132be52bcdbf72f9b057c4","2008-04-25 12:20:06+00:00","Renamed opcode 63 to o3_drawSceneShapeOnPage.

svn-id: r31720
"
"425c87481618bbff5a2b5c7ba867ab523b5ed430","2008-04-25 15:41:06+00:00","- Implemented opcodes:
-> 30: o3_addItemToCurScene
-> 62: o3_drawSceneShape
- Fixed bug in KyraEngine_v3::exchangeMouseItem, fixes user input after combining items

svn-id: r31721
"
"671e475567607764f513cd8c558a4961cf02efa8","2008-04-25 15:46:07+00:00","Implmented opcodes:
- 11: o3_getCharacterFrameFromFacing
- 12: o3_setCharacterFacingOverwrite

svn-id: r31722
"
"3150313377653bb756874aeefe0493f6aeba3d6f","2008-04-25 16:02:20+00:00","- Committed slightly modified patch #1951735 'kyra3: debugger and 'give' command'
- Added some more commands to new kyra3 debugger
- Cleaned up some debugger code

svn-id: r31723
"
"66518b5be01b23195ae7a2e683ff3d27defcb231","2008-04-25 16:09:30+00:00","Oops... fixes compiling.

svn-id: r31724
"
"2479b03fbf94d6e565d3e83d5c70857ef02805e0","2008-04-25 17:36:43+00:00","Implemented opcodes:
- 156: o3_disableTimer
- 157: o3_enableTimer
- 158: o3_setTimerCountdown

svn-id: r31725
"
"c10f59d358c1ad8221b2151faa7cf4f5c43b5628","2008-04-25 17:43:40+00:00","Implemented opcodes:
- 152: o3_customChat
- 153: o3_customChatFinish

svn-id: r31726
"
"7fb4a87c2415f3ba5bc92d572788adc34a15f577","2008-04-25 17:59:38+00:00","Implemented opcodes:
- 20: o3_setCharacterAnimFrameFromFacing
- 61: o3_disguiseMalcolm

svn-id: r31727
"
"13ef28215d69c2c841af719aff62b508e42bcb60","2008-04-25 22:38:40+00:00","minor drawShape() bug fix for Malcolm's shadow

svn-id: r31728
"
"0bb41c23cab40792a43dceeaf7d7759cd971d622","2008-04-26 09:52:17+00:00","Call _screen->Init().  Fixes segfaults when
trying to start via a command line.

svn-id: r31729
"
"61101b6dcef33d99f53705e40c9214ccd63fe847","2008-04-26 10:15:54+00:00","Fixed kyra screen initialization.

svn-id: r31730
"
"bba003e53a13b16a2584bf4aec7bc79c949924ae","2008-04-26 10:21:53+00:00","Fixed segfault when trying to start invalid gameid from command line.

svn-id: r31731
"
"3bde19a137134379513ddc0e209c818dff6b1914","2008-04-26 10:28:23+00:00","Fixed unitialized variable in Screen.

svn-id: r31732
"
"2ae81f0096086f726373582a4c0292a99c939ddb","2008-04-26 19:00:22+00:00","Implemented opcodes:
- 76: o3_removeItemInstances
- 94: o3_showSceneStringsMessage

svn-id: r31733
"
"8c9311280ff782554beb4d30446dcc561f12fef8","2008-04-26 20:33:59+00:00","Fix Kanji rendering

svn-id: r31734
"
"7eef295729e079434aa981d828e03767a1e13c6c","2008-04-26 21:08:47+00:00","Added support for kyra3 inventory. (jesters staff not supported yet)

svn-id: r31735
"
"fa208a43867f2c0763ef6e21d31c5015438f921b","2008-04-26 21:52:15+00:00","- Implemented support for jesters staff, mood change and score displaying
- Fixed bug in KyraEngine_v3::loadMalcolmShapes

svn-id: r31736
"
"6ed2d9c28701931b3633b638ad736f371f4024cf","2008-04-26 22:13:19+00:00","Implemented opcodes:
- 26: o3_setInventorySlot
- 27: o3_getInventorySlot
- 28: o3_addItemToInventory

svn-id: r31737
"
"71f4dee9ae22431ff78e8b46cf1a1feca173dae8","2008-04-26 22:22:21+00:00","Implemented opcode 129 o3_chapterChange.

svn-id: r31738
"
"dd98898a23d8dfffcfe95c70fa0b528e3f418332","2008-04-26 22:29:27+00:00","Implemented opcodes:
- 78: o3_disableInventory
- 79: o3_enableInventory

svn-id: r31739
"
"99307976d5afc6896fe00f9906a3355fd543a839","2008-04-26 22:30:55+00:00","Finished o3_delay implementation.

svn-id: r31740
"
"b179320edf55db93133dd118be116ede16795fb1","2008-04-26 22:33:07+00:00","Implemented opcode 34: o3_resetInventory.

svn-id: r31741
"
"c0f4b3faa7c1b49e4e0a92703de2a3b6ef5b1bb0","2008-04-26 22:53:00+00:00","- load new tlk file on chapter change
- added warning when trying to play non-existent soundfile

svn-id: r31742
"
"567c7312356d8f9e8207c4d5ef476a8235591fcb","2008-04-26 23:01:06+00:00","Added code to play VQA files when entering new scenes.

svn-id: r31743
"
"9b3edffa8dcc532370d3e8d924610642701237bf","2008-04-26 23:26:47+00:00","Implemented opcodes:
- 74: o3_setSceneAnimPosAndFrame
- 81: o3_switchScene

svn-id: r31744
"
"f6e622e303fa6ef58d479d7be098f188741b7e5c","2008-04-26 23:43:12+00:00","Cleanup.

svn-id: r31745
"
"78ee2e449e2c5062b41b197600b82e9d986f4075","2008-04-27 00:38:01+00:00","Implemented (quick-)save/load support for kyra3.

svn-id: r31747
"
"d49dd4e2fa51eb64d57e88600ef8ea00a63e761a","2008-04-27 00:42:17+00:00","Renamed some kyra3 variables to match kyra2/kyra1 names.

svn-id: r31748
"
"1d167da633a7dd666bb946156dd9e0ec29be2b53","2008-04-27 00:50:13+00:00","- Implemented opcodes
-> 57: o3_makeSecondChanceSave
-> 98: o3_setDeathHandler
- Made game automatically reload second chance save on death for now

svn-id: r31749
"
"ab1a3b0cc89686fa2e9ef864a429ae27ed7b2d2f","2008-04-27 03:19:19+00:00","Implemented support for VMDs substituting object animations.
Still far from being complete (and correct), but it's a start...

- Only VMD 'command' -3 is followed
- Not all animation types are working
- Timing is still off in most cases
- Offsets are generally OK, but not always
- No sound yet
- Shouldn't segfault randomly, but I'm not entirely sure ;)

svn-id: r31750
"
"1aac349da42f0a4c21204d2fc88041c4b63aa3c9","2008-04-27 12:39:16+00:00","Implemented KyraEngine_v3::eelScript.

svn-id: r31751
"
"7eef01cec48ac26d406a73a431120e56d919f63b","2008-04-27 12:40:56+00:00","Moved newShape code to sequences_v3.cpp

svn-id: r31752
"
"77bae0119547c75c8858dcb64525ebd3ba58b9e7","2008-04-27 14:03:51+00:00","- Fixed bug in itemInventoryMagic
- Fixed original game bug when creating item 7 (Bent nail-on-a-string), now it should award points when creating it with scene item and also in french version when creating it in inventory

svn-id: r31753
"
"bd067bffe91d960ef0d048ccb30bd129d054fabc","2008-04-27 14:33:03+00:00","Fixed bug while loading savegame.

svn-id: r31754
"
"6d3a7e4f6b90b4e24119af735b976031a6c9c7e7","2008-04-28 09:42:29+00:00","Moved some static members into Parallaction class.

svn-id: r31755
"
"fc6fe46951f999d7fc14bf4bedcce7bfe728a77d","2008-04-28 10:56:21+00:00","Implemented text drawing and cleanup.

svn-id: r31756
"
"0ca949db2af91c3a070e2dc95e46ba6161e6c594","2008-04-28 15:21:36+00:00","Fix Kanji text positioning in DIG. Constants based on disassembly, but
it can bring some regressions to subtitles.

svn-id: r31757
"
"3af2d8d0fde10ccbdcdc8f7576927849bfd0120e","2008-04-28 16:10:40+00:00","Fix compilation

svn-id: r31758
"
"e95a4b42acda5c53d88701f7b5f8c38c50db1c37","2008-04-28 18:57:17+00:00","Narrow corrections to clipping code introduced with commit r31757 to
SCUMM 6+ as pointed out by Fingolfin

svn-id: r31759
"
"018b82b51e682d8e5145d6945fd92b0f63bf19d2","2008-04-28 19:03:11+00:00","Fixed bug in KyraEngine_v3::updateCharPal, should fix malcolms palette in scene 42.

svn-id: r31760
"
"d02503761c4fdcad702e11b50e404eaf7a26b122","2008-04-28 19:16:45+00:00","Implemented opcodes:
- 82: o3_getShapeFlag1
- 122: o3_setConversationState
- 125: o3_getConversationState

svn-id: r31761
"
"7577e7548c50fac70090078266091caa2f1e0f4b","2008-04-28 19:51:34+00:00","Fixed bug in TimerManager::update, this should fix tic-tac-toe game in kyra3.

svn-id: r31763
"
"37fb65ea3c38f131ca9e27ceacce0fc72bd0af3e","2008-04-28 20:09:54+00:00","Fixed bug in KyraEngine_v3::processDialog, should fix crash when talking to Bill in hell.

svn-id: r31764
"
"43c10a8cc8ee863260c0531faff8983a0152b978","2008-04-28 20:45:22+00:00","- Fixed some delay times
- Implemented opcodes:
-> 99: o3_showGoodConscience
-> 100: o3_goodConscienceChat
-> 101: o3_hideGoodConscience

svn-id: r31766
"
"e588f9274eb2e29f86babb409f108498b0b0199e","2008-04-28 21:32:23+00:00","- Implemented credits showing after finishing game
- Fixed bug with good conscience displaying in conscience selection scene

svn-id: r31767
"
"4893633ff5f621d2285f423b0018d2344ea45455","2008-04-29 14:04:52+00:00","Fixed MSVC warning

svn-id: r31768
"
"de1da38e901ceadc304f01b11b8b41cac077a032","2008-04-29 14:05:49+00:00","Updated the MSVC kyra project files

svn-id: r31769
"
"a55d13e0a3ee8bbb6ee24c7d8ee017c92e58b514","2008-04-29 14:08:08+00:00","- Added volume param to KyraEngine::snd_playSoundEffect (0xFF per default as in original)
- Renamed KyraEngine_v3::playSoundEffect to KyraEngine_v3::snd_playSoundEffect
- Renamed KyraEngine_v3::playMusicTrack to KyraEngine_v3::snd_playWanderScoreViaMap
- Renamed KyraEngine_v3::o3_playMusicTrack to KyraEngine_v3::o3_playWanderScoreViaMap

svn-id: r31770
"
"4d5c6d1afb3e883a1dad5373144431cacf9a9b97","2008-04-29 14:22:04+00:00","Prevent analog sound driver to be created for Kyra3.

svn-id: r31771
"
"ca7f7e2a3b6392af526ccbd4a624768e2617c6e9","2008-04-29 14:33:29+00:00","Various cleanup.

svn-id: r31772
"
"ec9a03964c9054a4e5a5406bd25e3c586df0dfaa","2008-04-29 15:12:09+00:00","- Renamed ScriptInterpreter -> EMCInterpreter
- Renamed ScriptState -> EMCState, ScriptData -> EMCData
- Removed 'Script' from function names inside EMCInterpreter
- Fixed KyraEngine::readSettings and KyraEngine::writeSettings for kyra3

svn-id: r31773
"
"42412ad2c6e9b7d69272f2c7ca84c5a34178a950","2008-04-29 15:41:12+00:00","Fixed crash that occurred when Ms Peeper's test started

svn-id: r31774
"
"14523bd3bbf82cce9e004e61c8971810d25583e1","2008-04-29 15:51:22+00:00","Fixed crash that occurred when skipping a video while MIDI music was active

svn-id: r31775
"
"0de56ea1f9e28a21d8252f1646fc8c4aaa25cb64","2008-04-29 16:24:54+00:00","Fix for original game bug #1942476 - 'AGI: Fan(Get Outta SQ) - Score is lost on restart'

svn-id: r31776
"
"b804175684073a4e8bb8a4dea89c15c861db93ee","2008-04-29 18:50:17+00:00","Update AGI timers while waiting for a key to be pressed (e.g. when showing blocking text windows). Fixes bugs #1935909 and #1943872

svn-id: r31777
"
"01dcd766afc60d0b185c8c0a6f5498f416b12924","2008-04-29 21:27:16+00:00","Fix warning

svn-id: r31778
"
"5975956f2c5d5561574d5ce8835ad18d300da2bd","2008-04-29 21:51:55+00:00","Fixed possible endian problems in getObjectPropertyPtr.

svn-id: r31779
"
"e0b964b5273dbdbccdfe40b996e76be91c3c4eff","2008-04-29 21:52:26+00:00","Turned printf into warning.

svn-id: r31780
"
"9605e28f7b32a2685b3fac2c7e203130541c7d3d","2008-04-29 21:56:13+00:00","Fixed bug in o1_READMENU where an incorrect string length was returned.
Also fixed o1_EVENT to return the correct event number when a key was pressed and removed the debug code there.

svn-id: r31781
"
"125d0a138ddfee60635b84bad24828e03535774c","2008-04-30 01:29:17+00:00","Add extra hard coded strings translations, from second release of The Dig.

svn-id: r31782
"
"97d2d16757586c2d6d792bc0fc4b8b00a8c35c05","2008-04-30 01:31:41+00:00","Add language.bnd size, for the Japanese version of The Dig.

svn-id: r31783
"
"bad36eaa614c0e60ba501e0207c607a0e54756c0","2008-04-30 04:38:29+00:00","The Dig (Second release) used similar charset code to COMI. This could cause regressions, if there are differences between the two releases of The Dig.

svn-id: r31784
"
"acc232718fba57c8a2e3ae8238e42daa1739525b","2008-04-30 04:39:58+00:00","Revert string clipping changes, as they only applied to The Dig (Second release) and COMI.

svn-id: r31785
"
"21dc872873904314c919643bc10cc58b85bcfc75","2008-04-30 04:42:53+00:00","Ooops, missed one difference.

svn-id: r31786
"
"5e52a8e533dcf7eaa1497c26dd70af87b4f58b7f","2008-04-30 12:53:05+00:00","Fix cycling of speech and subtitle options via Ctrl t.

svn-id: r31787
"
"d8bbcd9211bb1d3373b49c22e85482d844cc1135","2008-04-30 12:54:07+00:00","Fix subtitle regressions in The Dig.

svn-id: r31788
"
"e5dc44507c92bc698e306e7d83f1f3796895c81f","2008-04-30 14:13:40+00:00","Update AGOS section in NEWS.

svn-id: r31789
"
"4d67fb84e59eb0515c3c8af004effe58fd20ff93","2008-04-30 18:07:22+00:00","Reverting accidently made revert of the gob3 walk fix

svn-id: r31791
"
"ea5482e6b128ddb89e25a554468062d81744be1e","2008-04-30 20:07:33+00:00","Changed signess of some drawing order related vars, fixing a drawing glitch in Gob3

svn-id: r31792
"
"e866aefdfdf7386cd3f5c94a058dd329c44b8fde","2008-04-30 20:08:08+00:00","Fixing path finding in Woodruff

svn-id: r31793
"
"7509d66caf516d87f938f66a20f4ce81367a8305","2008-04-30 20:36:19+00:00","Implemented savegame loading/saving and sprite clipping
Fixed bug in Screen::printTextEx
Implemented opcodes:
- o1_DRAWTEXT
- o1_DRAWMENU
- o1_MENUCOUNT
- o1_SAVEGAME
- o1_LOADGAME
- o1_GAMENAME

svn-id: r31794
"
"455a167b9d69c5485751024fb326a3bee8a79fe9","2008-05-01 03:00:51+00:00","Fixing the object video offsets

svn-id: r31795
"
"c0db9c0d25372a59347b7c72f7e4be7fc2f0f251","2008-05-01 11:36:00+00:00","fix broken save file list

svn-id: r31796
"
"a666136b8ee0569e52441968e0e7853c8483a104","2008-05-01 18:38:36+00:00","Fixing object video related segfault

svn-id: r31797
"
"5bfc3170a309d0418402701b3fe1cfefc5e763ae","2008-05-01 22:42:05+00:00","Fixed some valgrind warnings.

svn-id: r31798
"
"cf3a821fb8869c075c9ebd53b3d656be6732ca02","2008-05-02 02:31:05+00:00","Properly document the default manpage directory

svn-id: r31801
"
"86fad805d027e93a847c82f1b31a2c81ac97b5f5","2008-05-02 05:23:31+00:00","Updated the list of the DC plugins' exported symbols

svn-id: r31802
"
"7cb698112e08e36ce5b9636080d8cc7458c28d8a","2008-05-02 11:02:28+00:00","DIBUJA_FONDO -> copyBackground
DIBUJA_BLOQUE -> copyRect
DIBUJA_BLOQUE_CUT -> copyRectClip
VUELCA_PANTALLA -> updateScreen
animacion* -> animation

svn-id: r31804
"
"7431fd9bccf214977f0c50aab184517bba3f14ed","2008-05-02 11:18:46+00:00","Move animation functions to separate file

svn-id: r31805
"
"e4759066a8c029ecd840a2e3eb94447e718e0196","2008-05-02 11:22:40+00:00","Enable drascula engine by default

svn-id: r31806
"
"2e23acd3e0e09a6e3728cf660e6dee38650274df","2008-05-02 11:44:47+00:00","lee_dibujos -> loadPic
descomprime_dibujo -> decompressPic
pantalla_disco -> roomDisk
refresca_*() -> update_*()
refresca_*_antes() -> update_*_pre()
borra_pantalla -> clearRoom
pausa -> pause
refresca_pantalla -> updateRoom
actualiza_refresco -> updateRefresh
actualiza_refresco_antes -> updateRefresh_pre
pantalla_* -> room_*

svn-id: r31807
"
"6fb9c2b84f9fa34504eefb3cf92917b72fd483b6","2008-05-02 12:00:58+00:00","Move rooms_* and update_* to rooms.cpp

svn-id: r31809
"
"d1ef9aa2131502cd4d1e9cc0e36c330fa7a259cd","2008-05-02 12:08:06+00:00","- Added patch #1955698: MADE: Add 'The Manhole' Detection
- Added detection for Leather Goddesses of Phobos 2
Note that these two games will definitely not work as expected and will probably crash!

svn-id: r31810
"
"6aa29364fa2bea6712ea33bfc4d4a32405e91545","2008-05-02 12:11:56+00:00","Update MSVC project files (For gob/goblin_v4.cpp and drascula/animation.cpp).

svn-id: r31811
"
"92380534db5e344cbe2772c6c8d00b3200908af5","2008-05-02 12:17:25+00:00","Update MSVC project files (For drascula/rooms.cpp).

svn-id: r31812
"
"ed6678ee0574f643bf5e62e135ed4f612a0ca062","2008-05-02 13:17:22+00:00","Translated the action verbs:
MIRAR -> LOOK
COGER -> PICK
ABRIR -> OPEN
CERRAR -> CLOSE
HABLAR -> TALK
MOVER -> MOVE

svn-id: r31813
"
"6d863377f85a871831bdb2ff0f41af4e0df12cd8","2008-05-02 13:21:06+00:00","habla[r] -> talk

svn-id: r31814
"
"6a98108eac1203eaf1058fa24ad9c80fc9ba45a8","2008-05-02 13:26:48+00:00","Move talk_* to talk.cpp

svn-id: r31815
"
"3f44977885d33ea694df399a83cf198dd85b5fed","2008-05-02 14:30:06+00:00","Added support to load plugins from different directories and the ability to specify the default directory from configure.

svn-id: r31816
"
"4b5f3266cffa778b52f51a5a8cc39b16bac89584","2008-05-02 14:46:30+00:00","Started to refactor kyra2/kyra3 code to a common base. (regressions possible, compiling currently broken)

svn-id: r31817
"
"52003bc1954d1c2f9c88bb1479e3e0ff24f4e849","2008-05-02 14:48:19+00:00","Added missing files, compiling should work again.

svn-id: r31818
"
"7566a12352ff6c5609c8db032a73961d8feffbf9","2008-05-02 15:08:45+00:00","Moved common kyra2/kyra3 item to KyraEngine_v2.

svn-id: r31819
"
"2da2fb7f4d183ca6e64c9ada4c92986685185c40","2008-05-02 15:09:20+00:00","First step to international version support. Moved all texts to arrays

svn-id: r31820
"
"c6830b4138be54e056a7cf18b6b900c3e46ab4ff","2008-05-02 15:21:51+00:00","- Renamed TextDisplayer_v2 to TextDisplayer_HoF
- Moved some character shape code to KyraEngine_v2

svn-id: r31821
"
"5e4fceec2eb837257386f790d920eadf483da3cf","2008-05-02 15:39:51+00:00","Moved some character code from kyra2/kyra3 to KyraEngine_v2.

svn-id: r31822
"
"8b899207d2f491595732cd413aa0919663b7be74","2008-05-02 15:48:30+00:00","Moved runSceneScript6 to KyraEngine_v2.

svn-id: r31823
"
"f6bbf9298cf568c52d5919267953587fc6e6eb3a","2008-05-02 15:59:23+00:00","Add Spanish strings. Not used yet.

svn-id: r31824
"
"b17c6e100e5b34aa93a97968df57b3e7905fa0a7","2008-05-02 15:59:57+00:00","Started to move opcodes used in both kyra2 and kyra3 to KyraEngine_v2.

svn-id: r31825
"
"416890722c722c7eef4af034f5c5b9de70797f43","2008-05-02 16:03:53+00:00","Yet more opcodes moved to KyraEngine_v2.

svn-id: r31826
"
"e7fec26e03b862959d5799ce7811a2fdb68f5cae","2008-05-02 16:07:40+00:00","Remove 8-bit characters

svn-id: r31827
"
"aaad3ccb3e6220af43449d1e6592bb7cd1990bfe","2008-05-02 16:34:46+00:00","Added missing file.

svn-id: r31828
"
"8da048a46837c5c245184ced95964330a53f3245","2008-05-02 16:41:54+00:00","Fix warnings

svn-id: r31829
"
"c84b3719575cc26ad8f68c41191bd6e9f79f5249","2008-05-02 16:46:06+00:00","Fixing Fingolfin's commit :P

svn-id: r31830
"
"a829244b8ce5f5444e5c109aba6b8744d6327d7b","2008-05-02 17:14:59+00:00","- Renamed ScreenAnimator -> Animator_v1
- Moved addItemToAnimList and deleteItemAnimEntry to KyraEngine_v2.

svn-id: r31831
"
"f4623ab18c1e9c907155e17156e8842b068b059b","2008-05-02 20:57:16+00:00","The Last Dynasty starts and play the intro videos, so uncommenting its detection

svn-id: r31833
"
"e6aa1f586f4cf2816a1aa0c833a66e9178418df1","2008-05-02 22:20:27+00:00","Truly remove 8-bit characters

svn-id: r31834
"
"85f612076f5eb3f3882397ca333ad8cf9d64ac92","2008-05-02 22:24:03+00:00","fix bug in hof animator (incomplete initialization of _animObjects)

svn-id: r31835
"
"de200251446d568d93fa5156bdfb6d470e811009","2008-05-02 23:22:32+00:00","Add German strings

svn-id: r31836
"
"1f7ee1a07932001a747ecfc3c43d4e0f12246494","2008-05-02 23:37:01+00:00","Add French and Italian texts. Thanks to Razial for help

svn-id: r31837
"
"7bd06d120031186a3a2ea90f5a8366e33355e42a","2008-05-02 23:39:34+00:00","Whitespaces

svn-id: r31838
"
"3aaff020c756c638bfd59f10a2c39fb376a5a183","2008-05-03 12:03:24+00:00","Fixed some valgrind warnings.

svn-id: r31839
"
"043f92cb230f6afc83e5635cc1610c5d166e105f","2008-05-03 13:01:58+00:00","Fix compilation on MSVC (Updated project files and turned a 'int forced to bool' warning off).

svn-id: r31840
"
"d5545bd8c5589e8d919350b932eaed76b28e83e9","2008-05-03 19:23:45+00:00","- Moved newShape/temporaryScript code to KyraEngine_v2.
- Renamed newShape/temporaryScript code to animationScript.

svn-id: r31841
"
"895adc75fa26335a58f31310ecb15e17fdc1667c","2008-05-03 19:32:45+00:00","Cleanup.

svn-id: r31842
"
"f6239f1db645c86fb4f072f7e901ac30c75f71a0","2008-05-03 19:47:07+00:00","Moved some more opcodes to KyraEngine_v2.

svn-id: r31843
"
"7e3ce73a584b04bbe18832c2f7f1dac1e30d98b6","2008-05-03 20:02:51+00:00","Moved more opcodes to KyraEngine_v2.

svn-id: r31845
"
"edff41b1c35100595d25d151db88a0ed7686a022","2008-05-03 20:08:46+00:00","Correct o2_initScreen() for Woodruff (screen positioning, clipping and cursor limiting)

svn-id: r31846
"
"06dea145404f4a636205d5e01b104cec7d156869","2008-05-03 21:15:25+00:00","Changed spaces to tab, thus annoying everyone who now have to do a large
recompile.

svn-id: r31848
"
"db04dd427d51aca647d68eb5a688273ee16f2fea","2008-05-03 23:02:05+00:00","Formatting.

svn-id: r31852
"
"001adf1bb3dd354a9f383f261a8595300f218e8a","2008-05-04 01:02:27+00:00","Enabled scrolling in Woodruff

svn-id: r31855
"
"dfc7a242f55d78fc8a551fcef735f8b5b8e61235","2008-05-04 02:26:25+00:00","Properly close the object videos when the objects are destroyed

svn-id: r31856
"
"3ec47374b8f81a691be9e2bf6663775958997c25","2008-05-04 03:32:23+00:00","Fixed DataStream::seek() (must have been drunk that day ;))

svn-id: r31857
"
"ecde0b88c7d286369aa49d49dccdf828ce2090d9","2008-05-04 10:15:47+00:00","German texts fixes (compared to original) from Raziel.

svn-id: r31858
"
"c43cbeae967b779d5869b382b79ce5380d1a81d8","2008-05-04 13:07:13+00:00","Moved more opcodes to KyraEngine_v2.

svn-id: r31859
"
"7342629944ae7a9c196ba003e4192252b25f58f9","2008-05-04 13:11:17+00:00","Cleanup.

svn-id: r31860
"
"09b0f128528b4839668ccd51ae6794ad2cd85d5c","2008-05-04 13:25:03+00:00","Yet more opcodes moved to KyraEngine_v2.

svn-id: r31861
"
"f09f10bea5c23f50732edf145403627739a521c8","2008-05-04 13:36:41+00:00","Fix bug #1957165 - MM: render_mode is broken.

svn-id: r31862
"
"a3794c5f378cbb76521ec82e6a3634908cadc42f","2008-05-04 15:06:47+00:00","Partly fixed loading of bitmaps in BRA Amiga. Bitmaps are still broken, but less than before.

svn-id: r31864
"
"42953929067c30dcb7a72c1d4c7b26d85d626384","2008-05-04 15:09:23+00:00","Added new Parser class, which will gradually grow to include all parsing code from the engine class.

svn-id: r31865
"
"f71b4afcfa9792bd3bb2f98cc26e4614f6594fcd","2008-05-04 15:18:46+00:00","Renamed kyra2 and kyra3 gui files.

svn-id: r31866
"
"c15ad0e373db42e2d9ca8d37c9ba799c6556c85b","2008-05-04 15:37:41+00:00","Initial common base between kyra2 and kyra3 GUI code.

svn-id: r31867
"
"e45a9d42e26c70d9eeb3bfa11408bc0d33c7b69b","2008-05-04 15:56:28+00:00","- Shared checkInput code between kyra2 and kyra3
- Debugger related cleanup

svn-id: r31868
"
"665caae8b4e06a8a87ab41de0f2361bba4c7cf4f","2008-05-04 22:29:19+00:00","Updated the kyra MSVC project files

svn-id: r31869
"
"b6c7385eb4fea90dd315124fe5bffe874430eb48","2008-05-05 10:45:11+00:00","- Renamed XmidiResource to GenericResource
- Added MIDI resource type
- Added ScriptFunctionsLgop2 and ScriptFunctionsMhne (for Leather Goddesses of Phobos 2 and The Manhole: New and Enhanced, resp.)
- Many changes for LGOP2 and The Manhole: N&E

Note about the new ScriptFunctions classes:
I copied the ScriptFunctionsRtz class and so duplicated a lot of code. Most of the opcode functions are the same in all games but there might be differences. Once all common opcode functions have been figured out, they'll be moved to a common place (like the ScriptFunctions class).

svn-id: r31871
"
"1ddd54b50da3f67f39c7adfa63f6858b85c610e9","2008-05-05 11:02:40+00:00","- Moved some members from the engine class to Location, since they belong there.
- Cleaned up usage of location flags by using accessor functions.

svn-id: r31872
"
"7191b2c5158615fe46c7587b9645c7f295d993ec","2008-05-05 12:51:50+00:00","Added MIDI playback (which doesn't work yet) and fixed compilation (sorry all)

svn-id: r31873
"
"8d4a9b0ad93296b095136dbd3b075bbb2d4736ab","2008-05-05 13:09:29+00:00","Updated MSVC project files.

svn-id: r31874
"
"4eb9abe99f27d867f3d549bb15c8a4d71af7df3c","2008-05-05 13:11:34+00:00","Fixed unsigned/signed mismatch warning.

svn-id: r31875
"
"2afff044689a9d25c11d46b56a42d5948b95da1a","2008-05-05 16:05:56+00:00","- Added support for Kyra3 GUI (audio and game options not working yet)
- Added support for loading directly from command line for Kyra3

svn-id: r31876
"
"37459e6e756e108dde2c1a23ae74d4070546a7a2","2008-05-05 16:14:45+00:00","- Fixed some palette fade times in Kyra3
- Changed behavior to match original when playing Kyra3 for the first time
- Fixed typo

svn-id: r31877
"
"0f62fb0a88d89703f3f3029e57005ace07b112ee","2008-05-05 16:18:54+00:00","- Little mouse visibility fix
- Cleanup

svn-id: r31878
"
"81cfd2a716ff42d5425a456faff9068c92130969","2008-05-05 17:12:48+00:00","Implemented support for Kyra3 game options menu (including studio audience and skip flag options).

svn-id: r31879
"
"f42d222069d7ae130c85201e895e7f23d27c88d0","2008-05-05 17:18:11+00:00","Got rid of some code duplication.

svn-id: r31880
"
"c26e62e288f7454d47e201216c1cd98ee4cb3607","2008-05-05 17:56:39+00:00","- Implemented Kyra3 audio options menu, Helium mode still missing.
- Fixed unitialized variable

svn-id: r31881
"
"874be3cfb49027df093d984f0ff1b98ddd13708f","2008-05-05 18:50:42+00:00","Implemented opcode 91: o3_daggerWarning.

svn-id: r31882
"
"0faf76bfacb5769b008ae24c956775975b152629","2008-05-05 21:57:26+00:00","Removed delay from KyraEngine_MR::npcChatSequence, since it's doing delay script internally. This fixes some chat animation speeds.

svn-id: r31884
"
"3ac46924e311afb6b02615af04556da823c4f3f3","2008-05-05 22:52:28+00:00","Fix building scummvmico.o from outside the source directory

svn-id: r31887
"
"38a8aa516e0fa315e318801e5399f82e51efa8df","2008-05-06 03:00:26+00:00","Allow static and dynamic plugins to be used at the same time

svn-id: r31888
"
"38f200fc55fc8a05c848feeec52e5c28224311ba","2008-05-06 03:11:01+00:00","Unified BUILD_PLUGINS and DYNAMIC_MODULES in the makefiles

svn-id: r31889
"
"397e04d0b1ff6d96502c4eca42c1ab4a31b2dbcd","2008-05-06 04:47:58+00:00","Fixed syntax error. String comparision is done with '=', not '=='.

svn-id: r31891
"
"9df82055f0dff7c242f889c5d776ad0cca2d5bc8","2008-05-06 11:45:23+00:00","- The Manhole: New and Enhanced is now (partially) playable
- Implemented cmd_objectp
- Changed how the script externals array is set up
- Cleanup

svn-id: r31895
"
"ee552d70f747463adc8faeb6b87fb758f5ca621c","2008-05-06 12:08:31+00:00","Merge with trunk (maybe we should have created this branch later? ;-)

svn-id: r31896
"
"7595f20e33ee709b486de887cacd5e4bdba7a67a","2008-05-06 15:08:48+00:00","Silencing two signess compiler warnings

svn-id: r31897
"
"cc5215b4bb3db2f94883492f4d0334eebe2e3a39","2008-05-06 16:30:27+00:00","Updated the preprocessor directives for the SCUMM engine's MSVC project files

svn-id: r31899
"
"bce56298e69704b0f844ab71e8385a3b43b861b2","2008-05-06 16:36:26+00:00","Also update the preprocessor definitions for the release version

svn-id: r31900
"
"2976f961fe09c33e350fd8c6b4ccaddad738bf16","2008-05-06 16:57:07+00:00","- Fixed some memory leaks in kyra3
- Fixed valgrind warnings in GUI_v2 code

svn-id: r31902
"
"2ee01bf757ace2cf24835c34baa18ce6711bea54","2008-05-06 17:30:31+00:00","- Fixed valgrind warnings in HoF
- Fixed memory leaks in HoF

svn-id: r31903
"
"c396694f3b4378c26b1157fa069a60c21080cb08","2008-05-06 17:30:52+00:00","Added a temporary hack to get the engine plugins working under MSVC

svn-id: r31904
"
"3e7f66da896a740057f49b8526276794e064e954","2008-05-06 17:44:00+00:00","Cleanup.

svn-id: r31905
"
"11f891963bec97357b69e2e0f4b1639808becab3","2008-05-06 20:50:27+00:00","Implemented Engine::getDebugger for KyraEngine.

svn-id: r31906
"
"5abc85bd0e4e0801e7774e0f3efffcc6213ae88e","2008-05-06 20:55:33+00:00","Fixed possible crash in Debugger_v2 when using 'give'.

svn-id: r31907
"
"9be06ad9e82226bad6c70fc37dcc7db390ce3778","2008-05-06 21:56:16+00:00","Fixed text positioning in Woodruff, enabling 'Use FOO on BAR' texts.

svn-id: r31908
"
"10b73b474f5618b91456db91f3e5e18a18fa0f97","2008-05-06 22:05:26+00:00","Fixed crash when qutting kyra2 main menu.

svn-id: r31909
"
"586046d871806dcee92a48eca585955e937af6f6","2008-05-06 22:09:27+00:00","Fail on invalid --enable/disable options

svn-id: r31910
"
"16abd33aeace5c830b085c32ac570f5ef0b828fc","2008-05-06 22:18:12+00:00","Mouse hotspots are now properly evaluated when the mouse is set to a position via the scripts.

svn-id: r31911
"
"cdc4f4baca25591eeb6815b82c3fcd6db779e650","2008-05-06 23:56:05+00:00","Added openembedded.org target names (patch #1959138)

svn-id: r31912
"
"0fe0f093c7266c9407b9c0e93f73865883c9af25","2008-05-07 00:35:55+00:00","Show the SCUMM engine options properly

svn-id: r31913
"
"f1514641ee8263503e59654fc46856364a96e144","2008-05-07 01:15:46+00:00","Reject invalid option combinations when enabling/disabling engines

svn-id: r31914
"
"5681ae1e82ba2c125928ecbfbd937cb187c06aa4","2008-05-07 02:56:18+00:00","Draw order related fixes.
This also (finally) fixes the Gob3 draw order glitch (for real, this time)

svn-id: r31915
"
"9d5eea2d2c3f79147b15fb7920cd6d5de8e15d44","2008-05-07 03:49:53+00:00","Sound in object videos works now, too

svn-id: r31916
"
"202e4eb41072da9167430ec25a33153974c15bcf","2008-05-07 07:15:42+00:00","Added detection for RtZ CD version 1.0 (thanks to spookypeanut)

svn-id: r31917
"
"46f1e986883363cecc320135acd6a366b4fbd320","2008-05-07 08:19:36+00:00","Fixed RTZ 1.0 game flags and updated copyright

svn-id: r31918
"
"8f9cc2e1645e8878f7804ff47769490dc830858f","2008-05-07 08:25:13+00:00","Added patch #1956516: MADE: Fix Save File Names by clone2727 (with some modifications)

svn-id: r31919
"
"a3dbf43629b44c49156c33ff5b178ec8aaf93a03","2008-05-07 08:29:11+00:00","Fixed signed/unsigned issues with kFlagsAll

svn-id: r31920
"
"aff41a48b89173de8bb93e9ee9ae901f9578c0b5","2008-05-07 12:12:18+00:00","minor tweak to the GUI double click handling code

svn-id: r31922
"
"6e61b02cb9c44fd07fe65d7901fe1e4ed765b0c5","2008-05-07 12:34:40+00:00","Silencing a compiler warning

svn-id: r31923
"
"3d3ad58e143d82103dce9f8ac7e816e9979131bc","2008-05-07 12:44:22+00:00","Reverting commit 31920, thus changing type of flags back to unsigned. If some compiler emits a warning about 0xFFFFFFFF not being an unsigned immediate, then we need to find out how to convince it without changing types of variables in the code.

svn-id: r31924
"
"3d9ea59616cd6f559b8a6e25f56734972fb7badf","2008-05-07 14:20:37+00:00","Changed kyra to use delete[] instead of delete [].

svn-id: r31925
"
"f65e9a17c34daeaa93b7de99b639cddcc6997abe","2008-05-07 14:23:50+00:00","Changed the two instances of 'delete []' into 'delete[] ' as well

svn-id: r31926
"
"600ab40bcab24d3c1c8d98d3fefefa6026f03382","2008-05-07 14:31:45+00:00","Changed all delete [] usages to delete[].

svn-id: r31927
"
"2d707af33825097e3fd0c001101d9a2691e9ff6f","2008-05-07 14:49:42+00:00","A (temporary?) fix for the signed/unsigned issues with enum CommandFlags usage.

svn-id: r31928
"
"311e9165ed3b9442049e9e5e6b25c31d024f04ac","2008-05-07 15:09:10+00:00","Proper delete[] formatting (this time all occurences should've been changed...)

svn-id: r31929
"
"a7f5150228c405b2083cf9fd5da5d0890610f113","2008-05-07 17:28:38+00:00","- cmd_return now exits the game if it returns from the main function
- Implemented cmd_exit
- PmvPlayer now exits 'more gracefully' when the application is closed while playing

svn-id: r31930
"
"b6d2cf3553b118eca831c029fcc186eaec5ef799","2008-05-07 17:29:46+00:00","Implemented vertical/horizontal flipping of sprites.

svn-id: r31931
"
"b95db3529e57943ddf036550950642e584441a30","2008-05-07 17:57:19+00:00","Even more German fixes from Raziel

svn-id: r31932
"
"37c04c28a8b9d3affc69db0161156f343fc8ab9f","2008-05-07 21:04:06+00:00","Fix invalid memory access bug in the library sequence (original static data seems to be bugged here)

svn-id: r31933
"
"a7320fb4dca157270c9cae0f14601bcb77710d94","2008-05-07 21:12:26+00:00","Implemented KyraEngine_MR::timerFleaDeath.

svn-id: r31934
"
"627d30d389299ee64f0105f08e8910206a1e9edb","2008-05-07 22:48:44+00:00","Fixed bug when starting new game from load menu.

svn-id: r31935
"
"220d6ce82f478966db6a4760b2288750212880b9","2008-05-08 00:47:23+00:00","Restructured sound code

svn-id: r31937
"
"0c827c8cebf3709e980bb90be32b004acda058b8","2008-05-08 01:27:36+00:00","Split off the actual mixing part of SoundBlaster

svn-id: r31938
"
"e2e2af4ff5f66ffce70f8ac389112778eb9b142e","2008-05-08 02:46:12+00:00","Reverted commit 31928 by Buddha_, and defined kFlagsAll as 0xFFFFFFFFU in the enum, as suggested by Fingolfin.

svn-id: r31939
"
"500237d8ed505823d415969c58ee56ce30c3782f","2008-05-08 04:48:55+00:00","GCC says these are ints, not long ints. Adjust the format strings accordingly.

svn-id: r31940
"
"89e0c0b315702ce51c74c068adf294ad275287cc","2008-05-08 05:05:47+00:00","Since BASS treats speech separately from other sounds, let's use the
speech_volume setting for that, as suggested on the forum.

svn-id: r31941
"
"21d9742a3813782070a89a0363ce14601f935887","2008-05-08 08:17:06+00:00","Update Gob MSVC project files.

svn-id: r31942
"
"b75f844a723269161031f7d9b0899bf18fcfcea6","2008-05-08 09:05:44+00:00","Fix README ref: Makefile -> ports.mk

svn-id: r31943
"
"b63ae7dee4ae461f204f23641360a6aef1c2c304","2008-05-08 11:17:38+00:00","Possibly fixed the sound stuttering in the PMV videos and added frame skipping based on the Gob engine's IMD/VMD player.

svn-id: r31944
"
"29c79704fa9a6512ae663daa79e83b466e66bce5","2008-05-08 11:24:39+00:00","Fixed warning on 64bit systems introduced with r31940.

svn-id: r31945
"
"b4e943382097ebe6d0fc7a2eb9d89b644187a81d","2008-05-08 12:20:08+00:00","Silenced MSVC warnings about uninitialized variables

svn-id: r31946
"
"4f108b76a3874a80e6c8a3b5c79c75d737e49ecb","2008-05-08 13:17:18+00:00","Reverted commit #31774

svn-id: r31947
"
"a9b4058ba9fd94de7bd293b0763d71f9f90f84bc","2008-05-08 13:23:02+00:00","Fixed some game crashes which occurred when ProjectReader::purgeCache() got called:
- MIDI music data is marked to be deleted in o1_STOPMUS now, instead of o1_PLAYMUS.
- Added a FIXME to Screen::setFont() - purgeCache crashes the game if the active font is deleted

svn-id: r31948
"
"18db41db506b1e18e050e8dded44dc8501b9bc8f","2008-05-08 15:51:02+00:00","Implemented the background 'music' / atmospheric sounds in Woodruff

svn-id: r31949
"
"cb9fd40a1b22072ed8d6d0c81e7cf76d4ea3e4ec","2008-05-08 16:15:14+00:00","Declaring BackgroundAtmosphere as kMusicSoundType

svn-id: r31950
"
"cb34952e034df6869489ba261845c2c83d48d5bf","2008-05-08 18:11:43+00:00","Updated the MSVC project files for the gob engine

svn-id: r31951
"
"b1a8067d64cafb5f89a790c4a82066cb31fcbc74","2008-05-08 18:39:13+00:00","Reordering game parts deinitialization, to avoid having one part's destructor access an already destroyed part

svn-id: r31952
"
"e6d6281c891c75bd0dfe16b6f9c7fb71e862e5e0","2008-05-08 20:33:28+00:00","o1_ADDSPRITE is not implemented yet, so throw a warning

svn-id: r31954
"
"e0689193efa852a4391c9afcf7581238b1c4a0d9","2008-05-08 20:55:39+00:00","Fixed bug in o3_updateConversations.

svn-id: r31955
"
"b53fe83695318a4e5545185a4fe7e7daa77f2bed","2008-05-08 21:23:14+00:00","Silenced some g++ 4.3 warnings.

svn-id: r31956
"
"bdadf34f16cc0f271151e6e7f0438bf5ed48df8d","2008-05-08 22:10:34+00:00","Implemented opcode 66: o3_removeItemSlot.

svn-id: r31957
"
"1d025957caad81aef5504b8e505b835ce106cf1b","2008-05-09 01:35:43+00:00","Moved location parsing out of the engines, to LocationParser_ns and LocationParser_br.

svn-id: r31958
"
"c7c8bb99eefa3b19bc25fa921cd93255489656c5","2008-05-09 01:42:25+00:00","Tiny cleanup to ease extraction of the program parser code.

svn-id: r31959
"
"420d376a9004a60c0443c74c07554506ad2344c6","2008-05-09 01:58:12+00:00","Added the option to specify the custom path for loading plugins

svn-id: r31960
"
"55e4b05b185622194d644f5b27490e33cda8c483","2008-05-09 07:22:22+00:00","- Fixed a bug which sometimes caused crashes when ProjectReader::purgeCache() was called
- Some cleanup

svn-id: r31961
"
"b222d0c5390b052fadeb6eec67e425e354a8401c","2008-05-09 10:56:03+00:00","Added workaround for o1_SNDENERGY

svn-id: r31962
"
"601f0efdd48139657096b5262c482c1bfc4bd470","2008-05-09 12:23:19+00:00","Removed now obsolete FIXME

svn-id: r31964
"
"a83d79bafd5b4e15d4e4fbfbed35ab2ea878dc12","2008-05-09 13:33:31+00:00","Fixed typos.

svn-id: r31965
"
"3f3ba85bf1d0dec2e4b62b4f843e94ec6e3597f2","2008-05-09 15:49:38+00:00","Exit more gracefully when a quit event is triggered

svn-id: r31966
"
"10826a29d2f9ae9b05f8663c742f0ebe7682cef3","2008-05-09 16:09:46+00:00","Removed debug output

svn-id: r31967
"
"e0b9dec7666887f252a4a6af9d9b44a71f9a6275","2008-05-09 16:11:01+00:00","Implemented o1_CLIPAREA

svn-id: r31968
"
"271ce258232e6cf17ac8e6a6b845623d39274aae","2008-05-09 19:29:17+00:00","The backspace key is now working

svn-id: r31969
"
"61a3b1bd138d04296b8d6322bd998a87bca56589","2008-05-09 20:41:12+00:00","Since some parts of ScummVM code are under LGPL, add full text of this license
to the distribution.

svn-id: r31970
"
"e458f046d5c07ce0d12b75d803bf0a0e30d70e7c","2008-05-09 22:47:54+00:00","New GSoC 2008 branch for the 'Return to launcher' task by Chris Page (cpage88)

svn-id: r31971
"
"6979458e26a3f8226aa46adcf0bea76ae8797eb0","2008-05-10 11:11:03+00:00","Extracted script parsing code to its own class.

svn-id: r31972
"
"8bbf257525c9b96a4a69cddd668907a0b2657b0d","2008-05-10 14:12:48+00:00","implement item animations for MR

svn-id: r31973
"
"870a330c66cdd2f6ae5ca973fcdce802b3f8c48e","2008-05-10 15:31:11+00:00","(hopefully) fix bug in last commit

svn-id: r31975
"
"95a85a8984bbd9e6fe9a84d1fa83f1bf1652dc46","2008-05-10 17:41:34+00:00","Simplification in updateItemAnimations in KyraEngine_HoF and KyraEngine_MR.

svn-id: r31976
"
"3ee96f2fe30b705cff38e6955f209d98e9f2938c","2008-05-10 17:51:57+00:00","fix missing animation for golden neck ring

svn-id: r31977
"
"6b51580bb1d819497a6ee898da240cbba693e0b3","2008-05-10 18:14:57+00:00","Consume less cpu time when Zanthia/Malcolm are walking.

svn-id: r31978
"
"8d6048a9fad199277e84b6e07a61316a5f540622","2008-05-10 18:23:11+00:00","- Added small delay to GUI_v2::getInput
- Prevent kyra3 background music from stopping while menu is open

svn-id: r31979
"
"9b2c63550f7ff9da4b777ce0ab573ac493dff5fb","2008-05-10 18:30:20+00:00","Implemented opcode 106: o2_playFireflyScore.

svn-id: r31980
"
"a00df8dff1effc72a7b4bb03e88baf214308a39e","2008-05-10 18:39:03+00:00","Renamed opcode 163: o2_getBoolFromStack to o2_midiSoundFadeout and updated implementation.

svn-id: r31981
"
"e180dd5b01f95148282230f67dd21b04c47cad97","2008-05-10 18:51:25+00:00","Updates to GobEngine taken from trunk.

svn-id: r31982
"
"ca2c6de71ef163e92271a7d38922c02a9756fb52","2008-05-10 18:52:33+00:00","Updates to VC-Project files to fix Visual Studio compilation problems.

svn-id: r31983
"
"f930fff0d12c55e63140f45f4aee2c933f59aa63","2008-05-10 18:56:00+00:00","Set _quitFlag when receiving quit event in kyra2/kyra3 main menu.

svn-id: r31984
"
"7c7e9b831fc8b250942170bc12cd9c54602ded48","2008-05-10 19:20:38+00:00","Implemented pausing of timers, this should fix some minor glitches.

svn-id: r31985
"
"5082419fe9957ca144904fe2cdb3e86ff7b36e1f","2008-05-10 19:29:13+00:00","Fixed bug in Screen_v2::makeShapeCopy.

svn-id: r31986
"
"d21d9858fd33a56983eb89b662db2b27fead3ce5","2008-05-10 19:41:26+00:00","- Cleaned up main menu quit handling
- Moved KyraEngine_HoF delay implementation to KyraEngine_v2

svn-id: r31987
"
"b2defd0eac9401ffeea91ef0154650e108ffc179","2008-05-10 19:57:49+00:00","Fixed warning.

svn-id: r31988
"
"257aaa3ced14645d4410a272e89cafb7282836ac","2008-05-10 20:59:43+00:00","Restructured saving/loading and added a stub for Woodruff

svn-id: r31989
"
"307ef24582f04b5fb5858fab4db090a7a01a9ecd","2008-05-10 23:44:46+00:00","Modified game loop to return to launcher, codeblocks layouts update 1.5->1.6

svn-id: r31992
"
"d696ed6ea26172396badc9d8a10b2d4d05d5d8e4","2008-05-11 02:10:05+00:00","Added the MidiPlugin interface (first step towards the MIDI plugins)

svn-id: r31993
"
"02fbdd1f05bd86bfcefcbd15e94e4e770940d273","2008-05-11 02:37:41+00:00","Removed the remaining traces of the MorphOS ETUDE driver.

svn-id: r31994
"
"04ba12b145beb26679ac92f5c804b8d7b827c446","2008-05-11 03:46:39+00:00","Add another English Windows version of Freddi Fish 1.

svn-id: r31996
"
"33b50cff6586658130d4d799fd5ed076eb03ba91","2008-05-11 03:57:09+00:00","Update HE version for that English Windows version of Freddi Fish 1.

svn-id: r31997
"
"e4525090a02deedf0254f97b44265bb9bac4e8b0","2008-05-11 08:36:53+00:00","- Move verbs to texts.cpp
- Move yet another hardcoded string to texts.cpp
- Add string numbers to texts.cpp
- Fixed German texts

svn-id: r31998
"
"1320ab610be469e5c2cf2eaf2a16531d646de2ba","2008-05-11 08:55:16+00:00","Cleanup of parsing code.

svn-id: r31999
"
"81b75d9238c558234004cf7ef2da687d022e4433","2008-05-11 09:20:19+00:00","Add more verbs. They're not translated in the original, so it would be best
if someone would do it.

svn-id: r32000
"
"7926d4dc8a84715ebf5d34a0b0a63570522aab28","2008-05-11 09:44:01+00:00","remove dead code

svn-id: r32001
"
"0e80f6ed7be1acc750f2ddd3ab79d79b62464447","2008-05-11 09:46:50+00:00","asigna_memoria -> allocMemory

svn-id: r32002
"
"6d6846fb1a1f84c518e3f856ca276166e6ac3cb7","2008-05-11 09:48:46+00:00","Fix compilation

svn-id: r32003
"
"098d9c81a16b777c998e1828df2444c51ad24d3c","2008-05-11 09:51:30+00:00","libera_memoria -> freeMemory
update_events -> updateEvents

svn-id: r32004
"
"68f45add74c645d84da4a670b5079d73f480777d","2008-05-11 10:03:03+00:00","Italian verbs thanks to glorifindel

svn-id: r32005
"
"d176a32f2e13e2f2f4b272a1be48e71c30bbd8be","2008-05-11 10:03:06+00:00","salir_al_dos -> releaseGame
stopmusic -> stopMusic
music_status -> musicStatus
playmusic -> playMusic

svn-id: r32006
"
"8e7994ada8c86f2add740d5c27ee67088ded916e","2008-05-11 10:28:25+00:00","NUM_BANDERAS -> NUM_FLAGS
ANCHOBJ -> OBJWIDTH
ALTOBJ -> OBJHEIGHT
ANCHO_LETRAS -> CHAR_WIDTH
X_GUION -> X_HYPHEN
X_GUION -> X_HYPHEN_OPC
X_ABRE_PARENTESIS -> X_BRACKET_OPEN
X_ABRE_PARENTESIS_OPC -> X_BRACKET_OPEN_OPC
X_CIERRA_PARENTESIS -> X_BRACKET_CLOSE
X_CIERRA_PARENTESIS_OPC -> X_BRACKET_CLOSE_OPC

svn-id: r32007
"
"686b7a80de0e28badc08bfeae27978ee2bf5b0bf","2008-05-11 10:36:48+00:00","X_PUNTO -> X_DOT
X_PUNTO_OPC -> X_DOT_OPC
X_MAYOR_QUE -> X_GREATER_THAN
X_MENOR_QUE -> X_LESSER_THAN
X_MAYOR_QUE_OPC -> X_GREATER_THAN_OPC
X_MENOR_QUE_OPC -> X_LESSER_THAN_OPC
X_POR_CIENTO -> X_PERCENT
X_POR_CIENTO_OPC -> X_PERCENT_OPC
X_MAS -> X_PLUS
X_MAS_OPC -> X_PLUS_OPC

svn-id: r32008
"
"d7fc8fd7befd0cc845d9a8ad5b287b10edbd8f08","2008-05-11 10:48:22+00:00","Use less CPU when reading the spell book.

svn-id: r32009
"
"d6fafb4ad1b5446f9c10a768f9b3cfeab90b9171","2008-05-11 10:52:58+00:00","Fixed compilation under windows

svn-id: r32010
"
"1b25ec5c8e17589982bd117a9510268f025158fb","2008-05-11 10:53:59+00:00","ESPACIO -> SPACE
AZUL_OSCURO -> DARK_BLUE
VERDE_CLARO -> LIGHT_GREEN
VERDE_OSCURO -> DARK_GREEN
AMARILLO -> YELLOW
NARANJA -> ORANGE
ROJO -> RED
MARRON -> MAROON
MORADO -> PURPLE
BLANCO -> WHITE
ROSA -> PINK
ALTO_PERSONAJE -> CHARACTER_HEIGHT
ANCHO_PERSONAJE -> CHARACTER_WIDTH
NO_PUERTA -> NO_DOOR
COMPLETA -> FULL
MEDIA -> HALF

svn-id: r32011
"
"986f26feaed1ca7e632788b42f3838362c986a55","2008-05-11 10:59:08+00:00","ops

svn-id: r32012
"
"4cd801e26bcc7313388c80ead6a32d0b4b93a1e8","2008-05-11 11:11:24+00:00","- Move remaining texts to texts.cpp
- Specify differences for Spanish version

svn-id: r32013
"
"7da27cf28cb48fce13ebff907743f78dd6e75bc0","2008-05-11 11:20:40+00:00","asigna_rgb -> setRGB
ActualizaPaleta -> updatePalette
elige_objeto -> chooseObject
datos_actuales -> currentData
nombre_obj -> objName
nombre_icono -> iconName
agarra_objeto -> pickObject
abre_puerta -> openDoor
con_voces -> with_voices
carga_pcx -> loadPCX
graba_partida -> saveGame
sin_verbo -> withoutVerb
actualiza_datos -> updateData

svn-id: r32014
"
"35cc3a3d19f7a4c7c9f202f749a27eb1573cfad9","2008-05-11 11:35:12+00:00","Committed slightly modified patch #1961830 'KYRA: Scroll wheel support for Kyra 2 and 3'.

svn-id: r32016
"
"583e2573ab6858d27161f2cef40df1e912d0adfa","2008-05-11 12:47:26+00:00","Negro -> Black
Destino -> dest
Origen -> src
Alto -> height
Ancho -> width
Buffer -> buffer
contador -> counter
dicho -> said
musica_antes -> previousMusic
musica_room -> roomMusic
cerca -> near
lejos -> far
paso -> step
espuerta -> isDoor

svn-id: r32017
"
"47e4cf17bbf25f8a09eb83ad3289a7c2e1f033db","2008-05-11 12:56:18+00:00","Update MSVC project files.

svn-id: r32018
"
"5f9c53344666cb4010665123d2badf7557018a3c","2008-05-11 12:58:54+00:00","stop music playback when skipping (parts of) the HOF intro

svn-id: r32019
"
"57dfdbc6c865bfc804fd93b813982b9ca41931e4","2008-05-11 13:11:01+00:00","Added a sanity check to getFrame()

svn-id: r32020
"
"4932660f13b08aa30a88d53c1948c1df190201b7","2008-05-11 15:24:25+00:00","- Implemented kyra3 album (page switch animation not yet implemented)
- Implemented opcode 25: o3_showAlbum

svn-id: r32022
"
"35d01db1aa02db8554772d88354786e291387499","2008-05-11 15:57:50+00:00","Implemented page switch animation in kyra3 album.

svn-id: r32023
"
"61a105c9ba05ccff6be46a7b5c8a77192aa0c87e","2008-05-11 16:48:54+00:00","Updated pathfinder debug output.

svn-id: r32024
"
"a6ccfa4f096da1fa29f3bb40aa328f2052b14302","2008-05-11 16:56:19+00:00","Added saving of current album page of kyra3 like the original did.

svn-id: r32025
"
"825e3b5136c55e8e9e07dcf3300e9b1f46ced0b0","2008-05-11 17:20:23+00:00","- Added support for original kyra3 save files
- Added TalkObject::sceneId in savegames

svn-id: r32027
"
"4b21c2958ddf3cf1e69f427c715406d76712bed1","2008-05-11 17:50:13+00:00","Implemented helium mode support for Kyra3.

svn-id: r32028
"
"c5498a69bfaee74e2b5b046b36512c8a5d4785f9","2008-05-11 18:55:40+00:00","Implemented temp buffer saving/loading ('SAVE.TMP') in Woodruff.
Objects you take from or leave in screens are remembered correctly now.

svn-id: r32030
"
"85abe0be12a1cd412b9bbe6b231175a6c59e4bd2","2008-05-11 20:05:09+00:00","more translations

svn-id: r32034
"
"1d018f6046a590e55c6e1fc884124a9346819586","2008-05-11 21:09:16+00:00","Formatting.

svn-id: r32037
"
"d123c67174df225addabec714f9d267b1688d5ee","2008-05-11 21:28:51+00:00","Fix QuickTime MIDI driver compilation

svn-id: r32038
"
"9390c4021a7df308fc67873c89550e462d74d4f7","2008-05-11 22:08:18+00:00","Implemented saving/loading in Woodruff. Should work, although it tries to save and load sprites (which we ignore currently, doesn't seem to have any impact).

svn-id: r32040
"
"6e3c92e2392eb429723e23a4c782e0c1a7037b18","2008-05-11 22:08:32+00:00","Renamed some parallaction member vars to have a leading underscore (besides being part of our code formatting conventions, this fixes various name clash warnings)

svn-id: r32041
"
"6e0c56996662dec6ccd9e724161e55562b728d8b","2008-05-11 22:32:37+00:00","Consisteny fixes:
- Renamed classes *_v1 -> *_LoK
- Renamed files *_v1.* -> *_lok.*
- Renamed WSAMovieV1 -> WSAMovie_v1
- Renamed WSAMovieV2 -> WSAMovie_v2

svn-id: r32042
"
"ea301f9c7bbf02e0fc67fbc1447aac5a489db70b","2008-05-11 22:45:12+00:00","Updated kyra MSVC project files

svn-id: r32043
"
"bb035967442df0f9cb7de3e3da3d73ce2f4ce5d2","2008-05-11 23:16:50+00:00","- Renamed KyraEngine to KyraEngine_v1
- kyra.* -> kyra_v1.*
- scene.cpp -> scene_v1.cpp

svn-id: r32044
"
"2c9968fe80c4ba78f895c9bac757dd6b1604ccce","2008-05-12 00:26:29+00:00","- Added an engine plugin manager and moved engine specific functionality into it
- base/plugins.* reorganization

svn-id: r32045
"
"9ba353b9d8f6c4336ca4b6001fe5f22b85a8fb81","2008-05-12 01:26:43+00:00","Keep separated arrays for each type of plugin

svn-id: r32046
"
"3763c2799d48e7d4538cf47823c44d730834415d","2008-05-12 04:17:51+00:00","Renamed preprocessor constants to match file names.

svn-id: r32047
"
"4c5226002f5e0fcf8a4f706801e67dd7611de885","2008-05-12 04:29:41+00:00","Update HE version for that English Windows version of Freddi Fish 1.

svn-id: r32048
"
"65e41486f478dae996459e8e8b834be8c9b1e6a9","2008-05-12 04:33:30+00:00","Added do { ... } while (0) to the GUI_V* macros, so that they will work as
expected if, for instance, someone writes 'if (...) GUI_V1_MENU_ITEM( ... );'
I don't expect anyone will want to write statements like that, but just to
avoid nasty surprises...

svn-id: r32049
"
"27b9887a30a035829a03f40800c5460e004c9d17","2008-05-12 08:49:55+00:00","Updated NEWS file for Malcolm's Revenge support

svn-id: r32050
"
"9e39e7d7a2c62e175240a5a55017ee9c206d2cf0","2008-05-12 09:49:10+00:00","- Fixed timers, LGOP2 intro should now play correctly
- Some cleanup in LGOP2 opcodes

svn-id: r32051
"
"e8e4c5dafbbc5161030485ddd4e8f077a96f00e2","2008-05-12 11:43:40+00:00","Updated the MSVC project files of the kyra engine

svn-id: r32052
"
"574af78acb793b23b22f3a47d201d4074387304e","2008-05-12 12:42:10+00:00","- Moved some opcodes to KyraEngine_v1
- Little variable renaming

svn-id: r32053
"
"279987c181b5c5e6d6810c3f23a63eab5fb4c999","2008-05-12 12:43:52+00:00","Oops forgot to commit module.mk

svn-id: r32054
"
"1a52c5283a982350702a68f7aa4b66100711f1c3","2008-05-12 12:57:42+00:00","- Yet more opcodes moved to KyraEngine_v1
- Renamed some opcodes inside KyraEngine_LoK

svn-id: r32055
"
"56d2603d4f712877901e0ded022445e0d8984abe","2008-05-12 13:11:42+00:00","- Some more opcodes moved to KyraEngine_v1
- Yet more naming consistency fixes

svn-id: r32056
"
"4db0bd90465fe74252d8a35751856991b31f7788","2008-05-12 13:19:11+00:00","Two more KyraEngine_LoK opcodes renamed.

svn-id: r32057
"
"771854bdd93581b1d7898c7ff0abdfc54d67780a","2008-05-12 13:35:58+00:00","move some kyra 3 static resources to kyra.dat

svn-id: r32058
"
"0b9a3f22083cb7ec61953c3c6905c4780e93619a","2008-05-12 13:50:59+00:00","Added assert to snd_playSoundEffect.

svn-id: r32060
"
"bde4fa1e9b6478e6d3820692048bbd7b85e56f73","2008-05-12 14:22:27+00:00","fix for kyra 3 sfx (broken by last commit)

svn-id: r32061
"
"289f96d37c8a904a79229b9554961a3c5ae22bbc","2008-05-12 14:52:18+00:00","More naming consistency fixes (fixes old TODO).

svn-id: r32062
"
"c3b1b9bf826c485c5bc00d3e12becfed385686bf","2008-05-12 16:10:13+00:00","Fixed timer resolution/conversion; now the vulture in the first scene of RtZ lands on the sign, and the thunder sound is in sync with the flash screen effect in the Infocom logo screen.

svn-id: r32063
"
"e27e54bd1f052958570fecddc2f341d57df3fde1","2008-05-12 16:36:09+00:00","Updated kyra MSVC project files

svn-id: r32064
"
"de6e6408b6b393a8aac60a3e92e622a88fa925a8","2008-05-12 17:23:28+00:00","Fixed some valgrind warnings.

svn-id: r32065
"
"11e65276747d26bc4f2b6b79e146f919b244bccd","2008-05-12 17:43:33+00:00","Implemented o1_ADDMASK and o1_SETMASK for LGOP2

svn-id: r32066
"
"08c601ad9754b43da214218bfa0e6e5061cb30dd","2008-05-12 17:46:15+00:00","Yet another valgrind warning fixed.

svn-id: r32067
"
"31a8d984a4b9ce4fc7906166fa8cbe91d52ee7b2","2008-05-12 17:48:56+00:00","Sanity checks in RtZ: o1_PLAYMUS and o1_STOPMUS

svn-id: r32068
"
"13b60eeb32fa2ee42c2f38c940eb74ea8763e805","2008-05-12 19:29:14+00:00","Don't restart music while changing music volume in Hof and MR.

svn-id: r32069
"
"3e133f3a9fedbd597d88108853570dc08288cf26","2008-05-12 19:29:46+00:00","Fixed o1_DRAWTEXT in LGOP2

svn-id: r32070
"
"9b911cadcdcc897a9e92cf1967d1b7fccf5f27dd","2008-05-12 20:14:07+00:00","Fixed printTextEx segment fault bug.

svn-id: r32071
"
"f833cf4c610dc84ae7edb091cf1672e7d895412f","2008-05-12 20:17:54+00:00","Muting 'comparing signed and unsigned values' compiler warning

svn-id: r32072
"
"51352c71c5d72400973827d4db09fdbc56ebcefc","2008-05-12 21:03:26+00:00","Proper fix for savestates. Thanks to next_ghost

svn-id: r32073
"
"f54036b6a45ca172512d409439ccbab8ef87433d","2008-05-12 21:47:38+00:00","Implemented o1_EXCLUDEAREA for RtZ

svn-id: r32074
"
"c630fbde6a26f196c66c929faead8cc3403d0c99","2008-05-12 21:52:44+00:00","fix valgrind warning and some cleanup

svn-id: r32075
"
"6b5709be142f48a124d86e6af80ff31a4c404fc7","2008-05-12 22:13:33+00:00","remove useless double check on sound list entries

svn-id: r32076
"
"16ac1bcebf790effb6dc87636bfbdfce12f1a01b","2008-05-12 22:28:52+00:00","Changed clipping rectangles to use Common::Rect (thanks to [md5]/thebluegr)

svn-id: r32077
"
"e99c9048a8feb8f8bf5cf4406eff23ddc0b945ee","2008-05-12 22:37:21+00:00","Formatting.

svn-id: r32078
"
"83987b0cfdebd7fee6d2d20a70089abb6f9ddc63","2008-05-13 04:54:58+00:00","Implemented/Fixed saving/loading in Woodruff -- this time for real.

svn-id: r32079
"
"f03a27747c73d2c493e81f975e6c2e913268b78c","2008-05-13 08:19:15+00:00","Hide the mouse cursor while a movie plays.

svn-id: r32080
"
"3db45cc0c85967059744a987cc86c01631984a69","2008-05-13 08:21:28+00:00","Implemented savegame saving/loading for LGOP2.

svn-id: r32081
"
"fe58f0ee4b9d91f4ed349bafb16d2a8d6fb59faa","2008-05-13 09:30:23+00:00","- Added operator-> to Plugin subclasses so they don't have to reimplement the PluginObject subclass interfaces (thanks to Fingolfin for suggesting it)
- Added the PluginSubclass template to help creating Plugin subclasses

svn-id: r32082
"
"2bb39e591f4184f0ae8102c8f547586bf95d2b50","2008-05-13 10:41:32+00:00","Moved the engine plugin code to engines/metaengine.h; added/clarified/corrected various Doxygen comments for the plugin system

svn-id: r32083
"
"f7a682edf9c2c9a50cba9b869f447a9781def64b","2008-05-13 11:00:25+00:00","Some more Doxygen comments, as well as some FIXMEs/TODOs

svn-id: r32084
"
"a392bc4b0e860429ec8ba7a79bc6ed4eab8f0335","2008-05-13 13:24:49+00:00","Taken care of FilePluginProvider's FIXMEs

svn-id: r32085
"
"317b382757459e5ccd6ed336e4161f32387307b8","2008-05-13 15:40:29+00:00","Fixing a segfault when quitting while an object video with sound plays

svn-id: r32086
"
"85d28316ac2d513df8609ef7a39cc26a179f1078","2008-05-13 15:52:01+00:00","Implemented support for object videos with more than 256 frames, this fixes a lockup when entering the bar

svn-id: r32087
"
"84a5b4e1e32b8d6f48121d1a63401fb0be0be474","2008-05-13 16:09:57+00:00","used memmove() instead of memcpy() to fix memory overlap error

svn-id: r32088
"
"3c119e17cbbaf4183a387a761e55c8e753589d6a","2008-05-13 16:12:37+00:00","Added a sanity check to o1_LOADCURSOR to prevent LGoP2 from crashing when the save/load menu is opened during character selection

svn-id: r32089
"
"72dc3ecc55a3f2173ed12d86ae7413c2b627eca0","2008-05-13 18:43:26+00:00","Fixing the crash when entering the virtual trip tower in Woodruff

svn-id: r32090
"
"eef0a317a2d4068554ca3ff55c29411227ab1542","2008-05-13 19:53:14+00:00","Added a warning when all chunk slots are full, as that's still a problem in Woodruff (some videos aren't closed correctly yet).

svn-id: r32091
"
"6f14d881389099348084b19c2ed0261df6b422bf","2008-05-13 21:17:46+00:00","More descriptive error message when encountering invalid font data.

svn-id: r32092
"
"231ef79de22b0ca1836c33fd8d54b7b5cb9970e3","2008-05-13 21:39:18+00:00","fix engine destructor for non interactive hof demo

svn-id: r32093
"
"7d98ed714be064b75308db21ce6d5191fd040c94","2008-05-13 22:59:19+00:00","Fixed memory leak by deallocating memory used by window->iconPtr

svn-id: r32094
"
"cfd1fa6973b65942b476ca8fb746a617cb5851c0","2008-05-13 23:22:31+00:00","Some fixes for vertical scrolling in Woodruff

svn-id: r32095
"
"6a9429613b5b82e7b52e47b420505fe6fcbd08e0","2008-05-14 03:35:06+00:00","Added the animation speed workaround for the sheriff animation as well. (See
bug #1926838, 'HoF: Animation plays too fast'.)

svn-id: r32096
"
"d942fd42bb06c621a53eca06f40cb0fcffa54ea8","2008-05-14 05:47:29+00:00","Moved midiplugin.h to sound/ since it will be used for more than just the native MIDI drivers.

svn-id: r32097
"
"5f2e26e5774edc1f77b68db1ba9e8d264d385967","2008-05-14 06:59:23+00:00","NDS : Compilation fixes

svn-id: r32098
"
"9f2ffaabb3254a9329a6b3529a649cf6b1811e02","2008-05-14 07:04:14+00:00","NDS: OSystem::getTimeAndDate is demoted to the port (with the standard
implementation)

svn-id: r32099
"
"8c5d09bcf747fc95ab4c1a1dbc188df99c517c02","2008-05-14 07:07:38+00:00","NDS: Minor code formatting fixes

svn-id: r32100
"
"c3bdf1c75f688d1825f0f304a964d227ea94f201","2008-05-14 07:17:27+00:00","Removed obsolete file

svn-id: r32101
"
"ec0e836925152b219f4f27030819059b5aa52856","2008-05-14 07:27:31+00:00","Added a FIXME regarding commit #32096

svn-id: r32102
"
"97855800b6592cf9c9bc2b010c13cdd07575f5e2","2008-05-14 09:43:41+00:00","Oops, I definitely meant for that to be '==', not '='. I guess this is what it
should look like, but I can't actually test (or even compile) it right now.

svn-id: r32103
"
"0ec51de2721d7b670c997b7a3d1bc53f432d6e6b","2008-05-14 09:54:15+00:00","- Added some visual effects (palette fading etc.)
- Moved Screen::getAnimFrameCount directly into o1_GETFRAMECOUNT
- Renamed variables/cleanup

svn-id: r32104
"
"4a0b936495dfc17a4c22b9261c0c02b862454b77","2008-05-14 11:19:31+00:00","Merged the three ScriptFunctionsXXX classes into ScriptFunctions

svn-id: r32105
"
"a896272b1f626ac1e10596bdc5ffb03995ab6b84","2008-05-14 11:21:09+00:00","Deleting obsolete files

svn-id: r32106
"
"6c1cee1a1d4767e7b0c812b400637b2ffa20c848","2008-05-14 11:21:33+00:00","Forgot the makefile, sorry

svn-id: r32107
"
"5f4b66e85ec6eeeee0d310287738234d2d55add4","2008-05-14 11:58:25+00:00","Typo

svn-id: r32108
"
"f63a2b39e77129c9e964a74d3cd13c5f285df01b","2008-05-14 12:26:33+00:00","Add a pause when the script ends

svn-id: r32109
"
"b4a8f498eefb6606397c39d68e4c33413944d4ed","2008-05-14 12:27:23+00:00","Updated the MSVC project files of the MADE engine

svn-id: r32110
"
"f11c08d9b71c50992a9dd45e7b07b9edcefb1d13","2008-05-14 12:45:04+00:00","Forgot to include screenfx.*

svn-id: r32111
"
"7fd9e149f9cf88d58762a656d0d806ae185bc914","2008-05-14 13:52:24+00:00","Possibly fixed bug #1963700 'KYRA2: Nonresponsive clicks'.

svn-id: r32112
"
"0bd8493e7cb75ff8cfc0d768da884af3b48b3f98","2008-05-14 13:57:22+00:00","Formatting.

svn-id: r32113
"
"05a45b17b8cd88387a58dc61dd91ff128ff7d24d","2008-05-14 14:07:56+00:00","Just allow animation scripts marked as skipable to be skipped.

svn-id: r32114
"
"40ff1537a9a428753b0d2fe2c3716372818d8207","2008-05-14 14:34:01+00:00","- Moved input code to its own class.
- Slightly simplified inventory highlight code thanks to changes in input code.

svn-id: r32115
"
"e2d58f4885352744c88892e93fe2cdd33ecfa1b0","2008-05-14 14:34:42+00:00","Oops. Forgot to update module.mk.

svn-id: r32116
"
"eb6c809d2b3ccf238fa5efbf45b6cd2b00a82cd9","2008-05-14 14:56:29+00:00","- Added more information (ID and capabilities) to the MIDI drivers
- Added the MidiPlugin interface to the remaining MIDI drivers
- Added an initial MidiManager to handle the MIDI plugins (just static plugins by now)

svn-id: r32117
"
"78b599bc26496bcd8279bd6bc46cc2abcaf462d8","2008-05-14 15:27:28+00:00","Fix compilation

svn-id: r32118
"
"f80dfa14a4938484f2b4e9604254d49718f6203c","2008-05-14 16:12:26+00:00","Update MSVC project files.

svn-id: r32119
"
"c834bbba0698a8d7671c1bfc16ce8b3d65eab85a","2008-05-14 16:59:34+00:00","Changed kyra3 detection entries, now there are special entries for non installed version checking for WESTWOOD.001 and special entries for installed version checking for AUD.PAK.

svn-id: r32120
"
"b35941c3c2da0b1c184390ee601689cedebdb32c","2008-05-14 17:26:05+00:00","Added plugin priority so there's just one plugin that provides a module functionality.

svn-id: r32121
"
"e8763e2ac23f1b19bb277961d226e8aced39f7e1","2008-05-14 19:42:02+00:00","Fixed menu background loading in Riddle of Master Lu

svn-id: r32122
"
"e279d9693a1541f4595e73a5b646869890634922","2008-05-14 20:12:58+00:00","Some comments to opcodes sfGetMusicBeat and sfSetTextRect

svn-id: r32123
"
"d35600db724f717619da0ecadeaad5a20ca4f009","2008-05-14 20:24:22+00:00","Added Return to Zork German CD version 1.2
Updated comment about *.red and *.dat

svn-id: r32124
"
"cbe03226a4e3e658a3832eec233e1630c4515474","2008-05-14 20:37:18+00:00","Merged revisions 31972-31973,31975-31981,31984-31989,31993-31994,31996-32014,32016-32020,32022-32025,32027-32028,32030,32034,32037-32038,32040-32058,32060-32087,32089-32093,32095-32123 via svnmerge from
https://scummvm.svn.sourceforge.net/svnroot/scummvm/scummvm/trunk

svn-id: r32125
"
"f1b099cb0c8f594e5875a47c3a1357c1d2355814","2008-05-14 21:10:41+00:00","Added entries for the unpacked (*.dat) English and German CD versions of RtZ 1.2

svn-id: r32126
"
"ebe1009335f369185ed4d836d4fc9d525824009f","2008-05-14 21:28:55+00:00","Fixed QuickTime MIDI plugin

svn-id: r32127
"
"f481821eeb6c757a1300d62c8a762e86e5a2213b","2008-05-14 21:52:52+00:00","fix regression in KyraEngine_LoK::setMouseItem

svn-id: r32128
"
"5e592d4e4aa7eb9929a9bbf1283a0382d890de84","2008-05-14 23:26:32+00:00","Fixed memory leak when returning to launcher in AGOS engine by properly creating and deleting midi driver pointer

svn-id: r32129
"
"3d99d5aa4b12a72316fd316a931e17c41575f427","2008-05-14 23:47:07+00:00","Fixed svnmerge problems. Merged revisions 31895,31897,31899-31900,31902-31920,31922-31935,31937-31962,31964-31970,31972-31973,31975-31981,31984-31989,31993-31994,31996-32014,32016-32020,32022-32025,32027-32028,32030,32034,32037-32038,32040-32058,32060-32087,32089-32093,32095-32124,32126-32128 via svnmerge from scummvm/trunk

svn-id: r32130
"
"aac4786bbe6be0618266eb4f24ed2171523b268e","2008-05-14 23:58:26+00:00","This should fix the video not closing / chunk slot clogging bug (Yeah, I'm apparently stupid *g*)

svn-id: r32131
"
"e4c11fa635b11e221bd93c666ec34ea96c3ae423","2008-05-15 00:39:19+00:00","Add patch #1964159 - PUTTPUTT: Add Japanese 3DO Version.

svn-id: r32133
"
"765f976008d2021cc53ce714cbec3e2160d5ef74","2008-05-15 01:18:26+00:00","* Cleanup of input code.
* Removed old timer routines.

svn-id: r32135
"
"b619c6ce1904dd814781ca601e04a36d40a3cedd","2008-05-15 08:50:47+00:00","NDS: Protection against FastRam (ITCM) allocation failure

svn-id: r32136
"
"732d440d19a34f3f46c07487f5d724459375e640","2008-05-15 10:34:43+00:00","NDS: Rollback of the custom build target rule from .cpp.o to %.o: %.cpp

svn-id: r32137
"
"6206fb2a188b28db426cb85653e8c6bf00d1f1d3","2008-05-15 11:36:56+00:00","Removed the default OSystem::getTimeAndDate() implementation

svn-id: r32138
"
"defc030143487550057cac1fb617d31ce9ab1ab2","2008-05-15 11:40:38+00:00","Removed the GP32 port

svn-id: r32139
"
"2c5e8cc93861cded0b9a8ca7c605c61c7c2acc31","2008-05-15 22:12:51+00:00","Porting changes from 0.11.0 branch

svn-id: r32140
"
"51835dac6a20c4f22071ba42f0a7bfb0f326adec","2008-05-16 09:45:38+00:00","Include all required header files in launcher.h (should fix compilation problems in WinCE backend)

svn-id: r32141
"
"5ddf6c4c1875994a3fe5c602799c834b2f5d5aa8","2008-05-16 12:10:43+00:00","Yet another compilation fix for WinCE

svn-id: r32142
"
"b8585f5af071bf7147dd2990e34d8221af1d0534","2008-05-16 19:20:28+00:00","commit eriktorbjorn's patch #1964853 (HoF: Hand of Fate credits cleanup (WIP)) with minor changes (including fix for the glitch mentioned in the tracker item)

svn-id: r32143
"
"9ce0b621085419093fbfc03b6e3e2e6a0369460e","2008-05-16 20:26:57+00:00","cleanup

svn-id: r32144
"
"5127f1a8f12f409f5ab973fe821981d4fb25b9ab","2008-05-17 04:07:16+00:00","Fixing the 'object videos not minding drawing order / limits' glitch in Woodruff

svn-id: r32146
"
"66ecacc7c388d268d2ecf04c3b6cbf4face5a164","2008-05-17 09:06:54+00:00","Screen mask is now only used for V2 games

svn-id: r32147
"
"2ceb1b257767b1ab7cc4bb1a3799ef25f6786eb1","2008-05-17 10:17:35+00:00","Documented screen effects

svn-id: r32148
"
"f4cc7dfa85871575a50553dda3ee4f601cc603cf","2008-05-17 13:22:12+00:00","Loop the Kyra 3 menu music. (The original does.)

svn-id: r32149
"
"25e7e1999a41bd58680933d1435a6b50f83c5788","2008-05-17 13:35:57+00:00","Initial incomplete version of a MADE script dumper

svn-id: r32150
"
"84610606c127acf70d3faf166c4919d9eecbb625","2008-05-17 14:47:30+00:00","Slight cleanup and small bugfix for dumpScript()'s cmd_call

svn-id: r32151
"
"8f0703abd2c42e20caf14fa5c5553aa2232aff57","2008-05-17 15:12:20+00:00","- Fixed sound channel fadeout on VQA playing
- Minor formatting fixes

svn-id: r32152
"
"56b894bb2dbc099c015c51442f56f43c1e2626f1","2008-05-17 15:20:39+00:00","Changed parameter of KyraEngine_LoK::setMouseItem.

svn-id: r32153
"
"bf35e95049cc5e89c59815e2a1a3f32dd3153f43","2008-05-17 17:44:23+00:00","- fixes bug #1962601 at least for intro and outro
- add a mutex lock in sound_towns

svn-id: r32155
"
"2e14d05caa043848f7d74f53117bce284c325b12","2008-05-17 18:24:14+00:00","Added default search path 'hof_cd'/'malcolm' directory for HoF/Kyra3.

svn-id: r32156
"
"6e13bde2130fb12f7d307c4fcdedd8e36e3038bb","2008-05-17 19:01:00+00:00","Changing debug channels a bit

svn-id: r32157
"
"ad044516cb4a1856486cb50f6bfd866a75df5796","2008-05-17 19:23:44+00:00","Adding video debug output in Inter_v2, too

svn-id: r32158
"
"ec763c4be9f4e780fe6541f66895a0b525cfa637","2008-05-17 19:26:10+00:00","This fixes the messed-up palette after levitating in Bigwig's place in Woodruff.
I hope it doesn't break anything else, though...

svn-id: r32159
"
"1fc25f99974e2d5b56e17bb50c69d2dd5aa06885","2008-05-17 21:02:10+00:00","fix o1_fillRect()

svn-id: r32160
"
"4e785a9e73f6dd8b637474c4983abf2f5cfe5318","2008-05-17 23:55:04+00:00","Changing the split stuff again, fixing several scrolling and hotspot-text related issues

svn-id: r32161
"
"7effbb5be4353ad522b9d911b144dcb40cf8b822","2008-05-17 23:58:40+00:00","Add another English version of Pajama Sam 1 and SPY Fox 1.

svn-id: r32162
"
"5d11b8f6ed93642404ec6c5bdf74fae59b39f57f","2008-05-17 23:59:56+00:00","Ooops, forget that one

svn-id: r32163
"
"721b1ecc9afa235d7535c1b9fa1bca8374b49ab1","2008-05-18 02:51:54+00:00","Update HE version of another release of Pajama Sam 1 and SPY Fox 1.

svn-id: r32165
"
"1ea774e95f8ce0927a38aa0e5d467cc6ca82b78b","2008-05-18 08:04:12+00:00","Fixed fillRect opcode for HoF.

svn-id: r32166
"
"0c81b70ba35c03b2d5a862eb4afb3f0eae28c9b8","2008-05-18 10:57:58+00:00","Rewrote the MADE script dumper, hopefully in a more efficient way

svn-id: r32167
"
"c72ac9916c4fec3328e0857ef59ee892dd753959","2008-05-18 13:03:03+00:00","Formatting.

svn-id: r32168
"
"fad7e1f3c11021f1656c1cee855d131b3373be16","2008-05-18 13:22:06+00:00","Reverted commit #32166.

svn-id: r32170
"
"d046175f1fb4cc834ed7452abbec67ffed67150c","2008-05-18 14:50:41+00:00","Typos.

svn-id: r32171
"
"14c411e90b15ec2b889d103258abbf3aa026dd18","2008-05-18 15:02:01+00:00","Fixing the 'meteor fragment and bluxtre pulp not drawn'-glitch by not closing the object video right when it finished playing through

svn-id: r32172
"
"8d0766f4f741df6d9c0a633c895fb158dac85f34","2008-05-18 17:20:59+00:00","Hack to disable 'depracted' warnings on OS X 10.5

svn-id: r32173
"
"17874266bd540aed192e2a8f550b181d2bd4b8ad","2008-05-18 20:14:28+00:00","add support for Kyra 1 Italian floppy (this fixes so called bug #1409244 - KYRA1: GFX problems with ITALIAN floppy)

svn-id: r32175
"
"74311906f24fa22256fdb7520dfb1851ea3324ab","2008-05-18 21:11:19+00:00","Cleanup.

svn-id: r32176
"
"91b22e588652a48866ee283779f1613e4d0f093b","2008-05-18 22:33:41+00:00","Fix for bug #1940063 (MONKEY: Crash during the marriage lechuck/marley) -- regression was introduced by rev 28167 -- rule of thumb, if you add game specific code, make it game specifc ... ;)

svn-id: r32177
"
"df58a64ce04091e36ae751a3db3aeb4db06c6ea6","2008-05-19 13:13:41+00:00","Removed some dead code

svn-id: r32178
"
"ecf9d72ab4cc275ba0b4571407d1a50217152a38","2008-05-19 13:15:32+00:00","Removed some more obsolete GP32 code

svn-id: r32179
"
"460296f3602d35779664f2776cce7365829ccca8","2008-05-19 17:34:29+00:00","Restrict the remaining changes made in rev 28166 to chinese COMI

svn-id: r32181
"
"cefff90ac61e95641950ae694e3334c1c344c32d","2008-05-19 19:34:55+00:00","RtZ: Fixed bug which caused PMV videos to look odd (noticeable in the intro movie) and optimized frame decompression code.

svn-id: r32182
"
"75fcf38933eed3152d143298cbc46152fa37609d","2008-05-19 20:48:31+00:00","Fix for bug #1967311 'KYRA3: Word-wrapping is slightly buggy'.

svn-id: r32183
"
"75ee4aabda4e3c66ccda5a38f41873d285f26112","2008-05-19 20:50:16+00:00","Added a comment to TextDisplayer_MR::preprocessString.

svn-id: r32184
"
"b80d6aaf67902304872d4aad8369cdfa5cd7da21","2008-05-19 20:59:51+00:00","Fixed filename string in KyraEngine_MR::objectChat.

svn-id: r32185
"
"27a9108e36c69a76fe058441da7d655ad6920a93","2008-05-19 21:04:49+00:00","Fixed max text line length for French version in HoF.

svn-id: r32186
"
"7d28b651727580956005be732e35fc2cdd55500e","2008-05-19 21:22:59+00:00","Removed unused variable.

svn-id: r32187
"
"520af7d4bbe2dd2eb0f023e5d868e755b774350b","2008-05-19 21:32:37+00:00","RtZ: Fixed a bug where sounds were cut off prematurely.

svn-id: r32188
"
"815ca646e1eb81240cc36631238fb10d8dc95a4a","2008-05-19 21:47:42+00:00","- Fixed out of bounds bug in KyraEngine_MR::updateItemAnimations
- Clean up in KyraEngine_HoF::updateItemAnimations

svn-id: r32189
"
"5b5e5bfc62ba459b2c58a5dba9cb64a2fc4c7c2f","2008-05-19 23:04:52+00:00","Fixed bug in KyraEngine_v2::directLinePassable. This should fix some pathfinder issues in HoF and MR.

svn-id: r32190
"
"26d6e2c68aad953bbce7923d875320947fbef01a","2008-05-19 23:22:11+00:00","Typo.

svn-id: r32191
"
"9f12f0c450806a0c2e251edfa6de357cce3d70f4","2008-05-20 15:36:09+00:00","Move makeAdlibOPL inside the #include guards

svn-id: r32193
"
"5204d012f6b059532f68e9c7330616989f95a380","2008-05-20 15:54:27+00:00","Add a tiny TODO entry for graphics scaler plugins

svn-id: r32194
"
"cc08a4953d3cf1af0146b29c63f8f72803f1ca48","2008-05-20 16:37:32+00:00","Cleaned up engine debug level code.

svn-id: r32195
"
"eb354bbe02572ea1b18084e424be54b7ad666bfc","2008-05-20 18:01:26+00:00","Implemented visual effects 10 and 12

svn-id: r32196
"
"e20abe228d2457a6d38c8f78b99926827bf2de00","2008-05-20 18:19:32+00:00","Silenced an MSVC warning

svn-id: r32197
"
"bf52cc2186375b7332ffa96f386f7aabbde4b26f","2008-05-20 18:20:17+00:00","Clarification about the weird sound frequencies in PMV videos

svn-id: r32198
"
"141215136f9d5277cce77dfdd03f2a49b4e38f3b","2008-05-20 18:30:26+00:00","Documented what screen effects 10 and 12 are doing

svn-id: r32199
"
"970f7e7c937b9e809ee03acd8225b2142840430c","2008-05-20 18:56:22+00:00","Some updates to the script dumper

svn-id: r32200
"
"11697c0eb24aed6c6997c1d6282b69ed3448b1e9","2008-05-20 19:56:49+00:00","Delete animation frames in AnimationResource destructor.

svn-id: r32201
"
"828a217a03038673dfbd0f88a80f78832b55d872","2008-05-20 20:00:10+00:00","- Implemented 'stand-alone' script dumper/disassembler; it can be enabled by defining DUMP_SCRIPTS in script.h and starting with at least debug level 1.
- Commented which script opcodes and extended functions are actually used or not.

svn-id: r32202
"
"ca76ef4e1fa2fc9ebe0daaa2b3b6e61bed87ea14","2008-05-20 21:40:53+00:00","AGOS Engine: Began implementation for a new quit event which will cleanly return to the launcher.  This replaces the old shutdown() method within delay()

svn-id: r32203
"
"529800e1728b9d1ce89bf7faf4dfd86d6cb25e5f","2008-05-21 07:16:12+00:00","Removed obsolete comment and code in ScriptInterpreter::dumpScript

svn-id: r32204
"
"4074d49844d6851d377374f1d04d43fb9fdad6a8","2008-05-21 10:07:33+00:00","- Moved event polling from sfPollEvent to runScript
- LGOP2: Fixed problem where Barth's gun was drawn at the wrong position

svn-id: r32205
"
"799fb932f421c7833e2afbfd897b6f0c6c90c6e5","2008-05-21 18:52:27+00:00","AGOS: Fixed two memory leaks when returning to the launcher (_mouseData and _zoneBuffers)

svn-id: r32208
"
"abe87559bc6e70376ccd4d0565a9976966d77a3f","2008-05-22 05:02:39+00:00","Fixing the menu glitch in Woodruff

svn-id: r32209
"
"a70d37009a097a988992e3ba924b595c6d1289e5","2008-05-22 14:25:27+00:00","Correctly delete'ing CDROM and Backgroundatmosphere, fixing segfaults on machines slower than mine (thanks, LordHoto ;))

svn-id: r32210
"
"7dbceb8e6399d9e8b2b40230e0d8872423ec8ffe","2008-05-22 16:52:24+00:00","Oops, that way around should be more correct

svn-id: r32211
"
"f2294d9b89da81929816484f2b845d4c2a68e741","2008-05-22 17:10:41+00:00","Fixing another split screen glitch

svn-id: r32212
"
"6a54cbc4ebb47af65f5d6f9adcef82b5811aba10","2008-05-22 17:33:31+00:00","Fixing the flickering when changing from object animations to videos

svn-id: r32213
"
"bfff91b1724bb8821553e9c134059312fe2dd334","2008-05-22 18:30:29+00:00","Reverting my last commit, as it breaks Gob3 (and probably elsewhere, too)

svn-id: r32214
"
"de38d0728175ab7f4625699518e5c515ac549de9","2008-05-22 19:47:42+00:00","Updated NEWS

svn-id: r32216
"
"beb81bdc6ec4634939aeaaaa91351c7028243388","2008-05-22 21:26:56+00:00","Fixing a valgrind warning

svn-id: r32218
"
"9e4115a3bf5c2d2004f5876a5c9b6b62c2706630","2008-05-22 23:40:36+00:00","AGOS: Fixed a memory leak from earlier in a better way

svn-id: r32219
"
"e2d799ad4332c9511289d9b9db6534fcd2371bb5","2008-05-23 06:26:11+00:00","Add another English Windows version of Putt Putt Saves The Zoo.

svn-id: r32220
"
"df7948061125f095042f90e7efd755526ebf8646","2008-05-23 09:17:39+00:00","Messages in the ITE puzzle scene will now be properly shown in Italian in the Italian fan translation of ITE

svn-id: r32221
"
"69594a118ee21c5c6185d562fc4bd860b92150af","2008-05-23 11:11:55+00:00","Added prefix files for M4 and Made engine

svn-id: r32222
"
"1b69c18b566569bf7a2e4db83bfd8c252bb69a51","2008-05-23 11:13:15+00:00","Fixed PalmOS compilation

svn-id: r32223
"
"4a26c04ff95b4ec05ff0416511da8ae15e44a503","2008-05-23 11:25:22+00:00","Added missing getTimeAndDate backend function

svn-id: r32224
"
"16e7b030feca602573d0868e836e6104c2150b70","2008-05-23 11:26:33+00:00","Fixed PalmSaveFileManager

svn-id: r32225
"
"8d3116cf4a6982d4980855b01dd2a312c1a1f2ee","2008-05-23 11:35:05+00:00","Cleanup.

svn-id: r32226
"
"770f0ad619a354f6a60ec41d2027ca0142ff8f13","2008-05-23 12:59:18+00:00","Use default save game class

svn-id: r32227
"
"78341b2d18be3e4042196495e20d8d4ede247612","2008-05-23 13:00:37+00:00","Use default save game class

svn-id: r32228
"
"9662178fcb5aca1e52b33e845b02bb95e166a026","2008-05-23 13:04:13+00:00","Correct include

svn-id: r32229
"
"ad6f12683f5a4e64af63b619850e71dd56550089","2008-05-23 13:05:53+00:00","Added 'enter' command to kyra1 debugger again.

svn-id: r32230
"
"18b3e3a4ba09a886e7ad78c5b3d17ece3ee97940","2008-05-23 13:37:56+00:00","- Added a simple (but yet better) implementation of pauseEngineIntern for Kyra_v1 and Kyra_v2
- Added comments about what game specific details are missing in the pause implementation

svn-id: r32231
"
"4b06f42ff339cc79eb17aa75140987c1426e405a","2008-05-23 17:54:47+00:00","Initial implementation of pauseEngineIntern(). There are issues, though, since
the engine doesn't always allow the game to be paused, and some things (GUI,
movie cutscenes, credits, ...) are outside the main engine loop.

svn-id: r32232
"
"62d0a0d1d1e3735e4898729493ea2dcaa7f85df4","2008-05-23 20:40:28+00:00","Implemented GobEngine::pauseEngineIntern()

svn-id: r32233
"
"9a03a9a66516f01e512ffe790f1b9588dc1d2375","2008-05-23 21:02:21+00:00","Removing test code

svn-id: r32234
"
"2b24a659a78abc2c3b3c62b7278046ad7607c4f2","2008-05-23 22:12:18+00:00","Fixed KyraEngine_v2::pauseEngineIntern.

svn-id: r32235
"
"e41bd1eae8a15ea28237b090a833b94ca68c39ad","2008-05-24 00:08:13+00:00","AGI: Fixed two memory leaks when returning to launcher from AGI Engine

svn-id: r32236
"
"76c43c94d15f50f77ea76e61b59fef309c086b70","2008-05-24 00:54:04+00:00","Changed the delayed sequence list from using a system milliseconds expiry point to a milliseconds countdown - this should fix potential problems that could arise if a modal dialog was kept on-screen too long

svn-id: r32237
"
"e2437d33f8d735ec3a608f7290475435a9c88584","2008-05-24 01:03:27+00:00","Implemented LureEngine::pauseEngineIntern

svn-id: r32238
"
"93de8c71b8bc2194989351cdc4b76d5f9c2bf4e3","2008-05-24 01:05:32+00:00","Fixed compiler warning of unused variable

svn-id: r32239
"
"9c5014f6b96c00f83eaa1127f91b359cc3bdd98f","2008-05-24 01:06:19+00:00","Update HE version of another English Windows version of Putt Putt Saves The Zoo.

svn-id: r32240
"
"942f838924f286cc23258dd538199dbcda8c9929","2008-05-24 01:17:04+00:00","Add Max's patch for AGOSEngine::pauseEngineIntern().

svn-id: r32241
"
"d766719a65b3f8f968b2fbc81b6443220248ebfc","2008-05-24 13:51:25+00:00","fix for missing spellbook and letter text in the floppy versions

svn-id: r32242
"
"6af9fcc57991c504382bd5a3be65fc4992c2e868","2008-05-24 14:12:32+00:00","Made the startup log output a bit more informative

svn-id: r32243
"
"b36354c998f19411f35f968895a4dd83546ffa5b","2008-05-24 14:23:16+00:00","Added the Italien version of Woodruff, as supplied by DjDiabolik in bug report #1891864

svn-id: r32244
"
"182ae52a98671fcd398446e5ac4ef983f5a17873","2008-05-24 14:44:22+00:00","typo

svn-id: r32245
"
"afa92cf083e8a43a1ff6b9290763327e71ca1551","2008-05-24 14:54:22+00:00","Added updateStatic()'s sanity checks to renderStatic() as well.
Fixes an invalid read when entering the red light district

svn-id: r32246
"
"556bab2b817cce7cc476e44ef778af6de44a98ba","2008-05-24 14:57:18+00:00","Adding getFileSystemFactory() method in response to mail on scummvm-devel.

svn-id: r32247
"
"d0194206498ab28efcfd2ed591041c901da78048","2008-05-24 15:01:19+00:00","Removing DS ifdef from getFileSystemFactory().

svn-id: r32248
"
"0efebd98761fc558f9c3082dbfa7239353520571","2008-05-24 16:30:18+00:00","- add support for HOF floppy versions
- playing directly from installer files (WESTWOOD.00X) is supported (not recommended for low-end machines and certain ports)

svn-id: r32249
"
"398f7be356f74ed294ce9e5f823782289baed515","2008-05-24 17:08:35+00:00","Fixed errors, a few of the warnings, and added a FIXME comment about possibly
undefined behaviour.

svn-id: r32250
"
"ec3bc8f84d007c45b0bf27cdfe19bfa95efe4a66","2008-05-24 17:34:20+00:00","some cleanup (especially loads of strange casts)

svn-id: r32251
"
"4641f3fe7b11b25ad8dca6fc2ea68f8b72db9dae","2008-05-24 17:56:56+00:00","more fixes for spellbook/letter text in Hof (French and German floppy)

svn-id: r32252
"
"5968d62d3449026737724c9a00c0360724b0016b","2008-05-24 18:31:16+00:00","cleanup

svn-id: r32253
"
"85e6b8bb0f12cf324df5f7122d33faca72ca1e86","2008-05-24 19:07:44+00:00","Formatting fixes.

svn-id: r32254
"
"0897a3a05867d35bdd20d063411643103f9c2892","2008-05-24 19:18:17+00:00","- Fixed mismatching malloc/delete[]
- More formatting fixes

svn-id: r32255
"
"0147dd10dccd19ba140ccc11acff596369025ff0","2008-05-24 21:23:06+00:00","- Move more texts to strings
- Add support for international versions
- More differences for Spanish version
- Fix font position for Spanish version
- Added accented characters rendering
- Bring save names to ScummVM scheme. Original saves aren't read anymore
- Made mouse more responsive at save/load screen
- Couple fixes for game texts

svn-id: r32256
"
"f2d72d9473be5dd3d942976e8ed84d58d746def9","2008-05-24 22:11:41+00:00","Patch #1969189: 'CinE renderer rewrite'

svn-id: r32257
"
"68fd8b74b0a42279056a4143455bb8b40dc83ca9","2008-05-24 22:41:15+00:00","Patch #1970427: AudioStream play length querying

svn-id: r32258
"
"6866a4e133f2ae505bc142bc4b35e79d48f5191a","2008-05-24 22:44:15+00:00","- Cleanup
- Added support for showing kyra.dat error messages in a dialog

svn-id: r32259
"
"335eb1bf0853dbdede70fc4366fd1ff166715198","2008-05-24 22:47:08+00:00","Committed my fix for bug #1497437 'KYRA1: Subtitles glitch during 'Speech of the Land''.

svn-id: r32260
"
"af7bc93c461bd5b7dbd4eeed01b87ad8dbc4e1a1","2008-05-24 22:59:20+00:00","Made AudioStream::getTotalPlayTime virtual (Ooops :-)

svn-id: r32261
"
"64910f8c5fb3a9e39e356fc2856d311d8ad77bd6","2008-05-24 23:05:01+00:00","Little cleanup.

svn-id: r32262
"
"aba5082d192f04db6d23804a766dddbdcf98fa2d","2008-05-24 23:39:13+00:00","Implementation of AudioStream::getTotalPlayTime for FLAC and OGG/Vorbis streams.

svn-id: r32263
"
"cff8ccccc92e28e6ffe861dafd55b007cc164be8","2008-05-24 23:49:15+00:00","Take numLoops in account for getTotalPlayTime in FLAC and OGG/Vorbis streams.

svn-id: r32264
"
"ff573ec1e214c233a530a96798c0b33738bd8467","2008-05-24 23:58:22+00:00","Instead of simply returning 0 for 'infinite' looping in FLAC and OGG/Vorbis streams in getTotalPlayTime return kUnknownPlayTime.

svn-id: r32265
"
"3f4d22338ed5b815a5a04cb74b473dc6b8b90c06","2008-05-25 06:25:16+00:00","Fixing Bug #1970111 ('WOODRUFF: Close Up not erased')

svn-id: r32266
"
"da222b1a4827062a94ec4ac5147aab1778a0f4aa","2008-05-25 13:02:23+00:00","Added a workaround for the nut rolling animation in the administration center in Woodruff

svn-id: r32269
"
"48d3b34a75ad3a1c35e7efa7eaa1361f8b564afc","2008-05-25 13:30:18+00:00","- some pauseEngineIntern() code for the HOF sequence player (not tested)

svn-id: r32270
"
"1509a17d3ac30e5ca33c7ee88d7a20200d25debf","2008-05-25 14:39:59+00:00","typo

svn-id: r32271
"
"1fcf93875ec583c23232088cac3ad15c254bfccc","2008-05-25 22:46:16+00:00","Fixed the small static sound in Woodruff's intro video.
Interestingly, this does _not_ fix the audio lag, so I was apparently wrong and it's another issue. *g*
This does however fix the glitches in the Last Dynasty intro.

svn-id: r32273
"
"6ef8e5238bf33205e4945334987aafe0f43a8405","2008-05-25 23:12:32+00:00","Increased _soundSliceLength's accuracy. This fixes the A/V sync problems in Woodruff's intro

svn-id: r32274
"
"2862a30dac114fd728e80669a15f315fe21bc8d6","2008-05-26 00:28:48+00:00","Fixed some code formatting thanks to LordHoto

svn-id: r32275
"
"d94bfc66ad903b3c2cd677e1d481bca69f70eb12","2008-05-26 05:17:21+00:00","Ooops, made frame skipping for A/V sync correction work again (instead of locking up)

svn-id: r32276
"
"ba6f9ab9a889e0780a8e7fb9da20ada9610241c3","2008-05-26 07:18:06+00:00","Possible fix for bug #1949230: 'M4: compilation error'

svn-id: r32277
"
"365513d9e4ff94fb46790cde3470e2500d2f3c17","2008-05-26 07:20:23+00:00","Implemented visual effects 2 and 15

svn-id: r32278
"
"aa02a6758a8c5933aca3d80b5d1c3a2af5c7f300","2008-05-26 07:27:46+00:00","- Hopefully fixed 'responsiveness' of the mouse cursor/event handling
- Disabled auto dirty rects which caused major gfx problems
- Added default mouse cursor for Manhole: N&E
- Fixed sound rate for Manhole: N&E
- Don't automatically show mouse cursor when a new cursor was loaded

svn-id: r32279
"
"dd6821cbcb3ed67086ce69e01ebf9d1274768ffd","2008-05-26 11:03:21+00:00","Cleanup

svn-id: r32280
"
"23da4c5fa24270622edca0fbdc1153fa1cc069f6","2008-05-26 11:07:18+00:00","Fixed graphics decoding bug in Manhole: N&E

svn-id: r32281
"
"966239fc52146826e5096cbf41412b035de8c1fe","2008-05-26 11:10:46+00:00","Code cleanup:
- Removed sagaresnames.h
- Moved all special scenes to scene.h, and named them consistently (e.g. RID_ITE_OVERMAP_SCENE -> ITE_SCENE_OVERMAP)
- Moved all resources which were used by the ITE intro into ite_introproc.cpp
- Removed several defines which were only used once (e.g. the SFX names)
- Reordered the GameResourceDescription resources so that ITE and IHNM specific resources are placed in the end
- Updated the comment about the IHNM Mac music
- Changed the callocs in loadPalAnim to mallocs, like in the rest of the code
- Removed the MEM error

svn-id: r32282
"
"eea2aadbd85b10ba0e5314e0c952c2b6b800bee7","2008-05-26 11:14:30+00:00","Renamed files for consistency

svn-id: r32283
"
"f1410d2f72c293abed942f31673e56693cceb786","2008-05-26 11:17:57+00:00","Updated the MSVC project files of the SAGA engine

svn-id: r32284
"
"e92fccfdd9cfe0b9cd0d0344adbe7d75db250061","2008-05-26 12:05:55+00:00","Formatting.

svn-id: r32285
"
"a6d591b947384470a85e2229c231df1eb3773ff7","2008-05-26 12:12:51+00:00","Replaced a loop in PluginManger::loadPlugins with Common::for_each as a typical usage example.

svn-id: r32286
"
"4564b65dd54ed2534a036a7c5b5e707d53050e19","2008-05-26 12:30:36+00:00","Update MSVC project files.

svn-id: r32287
"
"bff1bcd32953933173bd972551d4d35647cb376e","2008-05-26 12:40:42+00:00","Silence MSVC warning C4800.

svn-id: r32288
"
"86d0dcabde0224872a4e00012d553ed202752fe3","2008-05-26 12:43:01+00:00","Should fix compiling erros.

svn-id: r32289
"
"3506624393610f637c43119ecd509b259196db28","2008-05-26 14:08:53+00:00","Slight cleanup

svn-id: r32290
"
"7227ddb6faee871cf70da0d7eaa820aeb19be60b","2008-05-26 15:29:12+00:00","Changed anim/static PieceDesc loading, to allow for more sanity checks.
This should take care of all invalid reads in renderStatic(), updateStatic() and updateAnim()

svn-id: r32292
"
"d37be9427508755ec6878d6c8f764b9d6ee56d14","2008-05-26 17:49:32+00:00","Cleanup

svn-id: r32293
"
"e0051aa140da241e14a7feeb68f56d4dd6f9ee1b","2008-05-26 17:50:26+00:00","Started rewriting room logic

svn-id: r32294
"
"6d6d634db180aa7cfa893b9c68d94f7f5a9787b9","2008-05-26 18:03:55+00:00","Made fallbackDetect to allow subclasses to override it

svn-id: r32295
"
"c6e29f4e4d6185af8e1f40d0d8a8ff2f7dec5ed6","2008-05-26 18:18:38+00:00","Disable Drascula's and MADE's dummy fallbackDetect.

svn-id: r32297
"
"3469c4821a6d3c810316552d49ca4bb9699cb2d8","2008-05-26 18:52:25+00:00","More simplification to the talk() calls, fixed a shadowing warning

svn-id: r32298
"
"9af5cca4e2642ef88efef90abf1b3b249bcade5d","2008-05-26 19:15:36+00:00","Removed a lot of duplicate code, fixed a mistake I made in sprintf

svn-id: r32299
"
"f68c1fd00b1f44147a09eacd5574deb222a925d5","2008-05-26 19:36:38+00:00","Cleanup

svn-id: r32300
"
"7fe39a1470804221e85bfb4a8a5b5158006c83e4","2008-05-26 19:50:05+00:00","Cleanup

svn-id: r32301
"
"f2e5283fcf2c3930fb9ab24e165722e138908896","2008-05-26 20:14:25+00:00","Simplified all calls to talk_vb and talk_vbpuerta, together with some more calls to talk()

svn-id: r32302
"
"e45ea7b9332d39f8ece2d5394316af91cdc3d0dd","2008-05-26 20:18:27+00:00","Fix delays against original

svn-id: r32303
"
"c13fda76d6245d39aef10283624566a6e2f40344","2008-05-26 20:19:56+00:00","Fix leftover 8bit character

svn-id: r32304
"
"9eed36cc4f8877fa5dbb2e4053112adba327d6bf","2008-05-26 21:07:49+00:00","Use memmove when source and destination sprite areas overlap in drawSprite()

svn-id: r32305
"
"32eee43bbc61a5697895ec9af2ec98f7f9b5d7b9","2008-05-26 21:48:59+00:00","Implement built-in screensaver

svn-id: r32306
"
"a43d1e6be0fd325164b47f76d0ceb6cbb0dd01d5","2008-05-26 22:01:29+00:00","Changed floating point immediates to single precision (Silences MSVC warning C4305: '+=' : truncation from 'double' to 'float').

svn-id: r32307
"
"59df762f0a82b2ef7fa868181aea71f6356e2359","2008-05-26 22:02:20+00:00","More split screen fixes.
I never get tired out those... ;)

svn-id: r32308
"
"a0a8e0e69061dd2823b3aac2f4d8a9994cdf3cba","2008-05-26 23:03:17+00:00","Fixed Italian Woodruff's MD5

svn-id: r32309
"
"a6649af56eb51092682a320d39fde199b77f7fc5","2008-05-27 00:03:29+00:00","Fixed an endian-related issue, making Woodruff controlable on big-endian machines.
It still breaks when switching screens and object videos are mispositioned, though.

svn-id: r32310
"
"4306e1e0eb7fd08026df0bf5c02bd4ecce1c2b67","2008-05-27 02:39:51+00:00","Made some methods virtual to allow File subclasses

svn-id: r32311
"
"8e290114d2fd58f606c8d8da41112101c3d9386a","2008-05-27 06:35:00+00:00","palJuego -> gamePalette
x_raton -> mouseX
y_raton -> mouseY

Some slight cleanup

svn-id: r32312
"
"314ecc5d7d04b3c69977538b57f55517ba40c98a","2008-05-27 07:04:56+00:00","Cleanup of the X_OBJ and Y_OBJ defines

svn-id: r32313
"
"b1217da63f9e9c1bcace4b51621efe8b59fe2553","2008-05-27 07:17:15+00:00","comienza_sound -> playSound
fin_sound -> stopSound
comienza_sound -> playSound
n_puerta -> doorNum
cierra_puerta -> closeDoor

svn-id: r32314
"
"afd44c95d98f6fdaf522fe2aa6292894ca8481a4","2008-05-27 07:45:13+00:00","Changed roomParse to accept an array directly and rewrote some more room logic

svn-id: r32315
"
"77f2e18dcf92daa3ae88e27c5bb62f711b5ef7fc","2008-05-27 08:01:06+00:00","Reduce audio buffer size, as indicated on scummvm-devel

svn-id: r32316
"
"7068ec9b7117535edbee26143789b57fd5a1d616","2008-05-27 09:03:22+00:00","Every time strcmp is abused, a baby koala cries...
Changed loads of strcmp's to integer comparisons. There might be two possible regressions (marked with a FIXME) in animation_2_1() and animation_9_6(), which need to be tested

Also, fixed a silly regression I made in commit #32312 in getLine()

svn-id: r32317
"
"7263ec4763bd54dec670deef596dbecdbbce095b","2008-05-27 11:49:36+00:00","Rewrote some more room logic

svn-id: r32319
"
"de88eb33b5b2f9975caf13e9b651fc694c9fe4c9","2008-05-27 12:02:26+00:00","objeto_que_lleva -> pickedObject
Removed the verb defines and replaced them with appropriate enums

svn-id: r32320
"
"4512958d743960763c3859f7c5df93a337571665","2008-05-27 12:22:34+00:00","longitud -> length
respuesta -> answer
objetos_que_tengo -> inventoryObjects
boton -> button
cuadrante -> quadrant
distancia -> distance
juego -> game
frase -> phrase
suena -> sound
usado -> used
responde -> response
puesto -> position

svn-id: r32321
"
"e82295daa3749c92f76907417cdc1222b33dcf7f","2008-05-27 13:15:51+00:00","Implemented getTotalPlayTime for MP3InputStream.

svn-id: r32322
"
"9d13d90d4f1dfc2bfd20a018fc1fe0405a108743","2008-05-27 13:28:47+00:00","- Cleanup code for FlacInputStream::getTotalPlayTime
- Reset input stream position in MP3InputStream after calculating total play time

svn-id: r32323
"
"2675cd38a6bda20caad17f092eaec71dd1f13f94","2008-05-27 16:02:07+00:00","Fixed the two animation FIXMEs

svn-id: r32325
"
"bf8dfb67e159ac05aac2089cd216527f0f91b74c","2008-05-27 16:13:41+00:00","More simplifications to the talk functions

svn-id: r32326
"
"17fd16a38e6abecef088cfa383bf6cb1a6989d26","2008-05-27 19:25:04+00:00","Went through Operation Stealth's opcode list and added TODOs for naming all unknown functions properly and some notes about opcode redundancies.

svn-id: r32327
"
"c0f1b7fe66372d52da2265d001049fd966f8dac7","2008-05-27 19:36:39+00:00","Added a few more comments about Operation Stealth's opcodes (Redundancies, Future Wars's opcodes' end point).

svn-id: r32328
"
"369f7b0d083cf78a8d00310f2e35013717ff09fc","2008-05-27 20:15:36+00:00","AGI: Modified AGI Engine to shutdown without using system->quit

svn-id: r32329
"
"691306f0b7e86e845fe3049316a657dd83a21865","2008-05-27 21:04:27+00:00","Fixed KyraEngine_v1::snd_stopVoice and KyraEngine_v1::snd_voiceIsPlaying implementations.

svn-id: r32330
"
"6358878a435a929adc5c0ca503b3eda7fe3acdd6","2008-05-27 21:18:21+00:00","Fixed choppy sound on my Vista box. (after talking with Fingolfin about it)

svn-id: r32331
"
"17b0144402a9e74c51ba6d2c6e223f67adf03e59","2008-05-27 23:26:48+00:00","CINE: Fixed two memory leaks when shutting down the CINE engine

svn-id: r32332
"
"3c0e72bb25f83120f0320782793af64213cbd1c2","2008-05-28 00:52:45+00:00","CINE: Initialize exitEngine to 0 in mainLoop() to allow replay after returning to the launcher

svn-id: r32333
"
"292bc04389912ea203dccaf233844520c88b0341","2008-05-28 02:55:42+00:00","Update the hard coded string translations in The Dig.

svn-id: r32334
"
"f0195a01f6efeecacaf5564eb51bd9115e589f5c","2008-05-28 12:05:40+00:00","Fix Operation Stealth's opcode 0x82's parameter list (Verified with DOS version's disassembly).

svn-id: r32335
"
"51e4e487b1440f9142b5270beb7ed55abdac6f63","2008-05-28 13:00:27+00:00","Implemented opcode 0x9A (o2_wasZoneChecked).

svn-id: r32336
"
"edc731e04f136069fad141515b997892485602c3","2008-05-28 13:00:41+00:00","The hard coded string translations for The Dig only apply to subtitles, and not speech.

svn-id: r32337
"
"16b0905bb0b5e164a2014031749a61c24c6af32b","2008-05-28 13:02:33+00:00","Remove debug left over.

svn-id: r32338
"
"90bf3de2d66a6605fad7f6a050fae6d277d15f56","2008-05-28 18:32:05+00:00","Decrement _nele when erasing an element from hashmap, and add a test-case for this bug.

svn-id: r32343
"
"29a4c3201b4fe4d8c1d6dfa10165e338cb4e01d9","2008-05-28 19:10:44+00:00","Remove the ENABLE_SCUMM_7_8 and ENABLE_HE directives from the SCUMM engine MSVC project file. They'll be placed in the global ScummVM project

svn-id: r32344
"
"e9c412241917342497a4ff80b5aaf5ca866cb7b3","2008-05-28 19:16:03+00:00","Added ENABLE directives for all ScummVM engines

svn-id: r32345
"
"649f439fb6fe7099ed4cf589961e6391d6ed45c5","2008-05-28 19:30:43+00:00","Reverted commit #32344, apparently those defines are needed for the SCUMM engine for older versions of MSVC

svn-id: r32346
"
"057af1000f5187a93fc1ac1a5f61a7a6a382bf03","2008-05-28 19:45:04+00:00","Removed an MSVC specific hack, after discussing with jvprat. It seems that MSVC was trying to add the parenthesis after ENABLE_##ID to the check...

svn-id: r32347
"
"df0e072a1b59011a4f37b41f9ae53036c3682e8f","2008-05-28 20:12:01+00:00","Fixed a crash in LGOP2 when attempting to get a sprite item from an empty array.

svn-id: r32348
"
"885fa54f28df837c2045e4d8405e1ab0de60a9e3","2008-05-28 20:16:22+00:00","Split Object/GameDatabase into engine version specific classes

svn-id: r32349
"
"8297ead2671e43963098a3dc41e8e75fdbce4ddc","2008-05-28 20:30:20+00:00","Merged revisions 32124,32126-32128,32131,32133,32135-32144,32146-32153,32155-32163,32165-32168,32170-32173,32175-32179,32181-32191,32193-32202,32204-32205,32209-32214,32216,32218,32220-32235,32237-32266,32269-32271,32273-32290,32292-32295,32297-32317,32319-32323,32325-32328,32330-32331,32334-32338,32343-32347 via svnmerge from
https://scummvm.svn.sourceforge.net/svnroot/scummvm/scummvm/trunk

svn-id: r32350
"
"c9fd5fef7645cc7ba6e14ddfeaab91d941f3b8f7","2008-05-28 20:31:01+00:00","Added a note about the MSVC quirk with the spaces around ENABLE_##ID

svn-id: r32351
"
"8da68b29648f9dbdcc05b3a1efe4a29ed2c4e88c","2008-05-28 21:15:11+00:00","Script variables are now always stored in the game version's native endianess.
This should make Woodruff playable on big-endian systems.

svn-id: r32352
"
"8757db728abc0e4b2dfca6a6fbae05ee883aaaa7","2008-05-28 21:27:52+00:00","Updated the MSVC project files of the gob engine for commit #32352

svn-id: r32353
"
"4afd19ad0fc61063c4ff4fa715a500b792031184","2008-05-28 22:15:10+00:00","Fixed premature stopping of sounds/voices.

svn-id: r32354
"
"ab6c82a8502ede6172f102bd5da8f3817b29a69f","2008-05-28 22:42:15+00:00","Silenced a signed/unsigned comparison warning

svn-id: r32355
"
"b844e4bd5ad61699144ad4430ef158b9222ca6b3","2008-05-28 23:17:10+00:00","Implemented visual effects 11 and 13 (inverse of 10 and 12)

svn-id: r32356
"
"203f62ad7cfc3f931c98c8fc3ecdbb01924b896f","2008-05-28 23:28:11+00:00","LURE: Fixed some memory leaks when returning to the launcher from the LURE engine

svn-id: r32357
"
"5779261c16434369701704ea4314dd5b3e13351a","2008-05-29 10:15:39+00:00","Tiny comment update (Echec in French means failure).

svn-id: r32358
"
"7a22a632448a0067419757fe431e25eb343a2a38","2008-05-29 12:17:40+00:00","Simplified calls to talk_igor_dch, talk_dr_izq and talk_dr_dch
Removed loads of font definitions and simplified some of the internal font mapping

svn-id: r32359
"
"3f91c579fcdc4ed43a18792f6bd84d9e156efa13","2008-05-29 12:22:14+00:00","Verified most parts of opcode 0x01 (o1_modifyObjectParam) against Future Wars's and Operation Stealth's disassembly (Only part of switch case 3 still left to do).

svn-id: r32360
"
"b9776d46b24476a5d4f30eb4fc993ce6a4cdb76f","2008-05-29 12:57:11+00:00","- Implemented opcodes: sfHomeText, sfDrawAnimPic
- Comments on unneeded opcodes
- Simplified getting/setting strings in Objects

svn-id: r32361
"
"beafc62b0d209eaf1c43de5fb43d8fc812226078","2008-05-29 14:04:47+00:00","puertas_cerradas -> updateDoor
saca_objeto -> removeObject

svn-id: r32362
"
"c2c21ffffbfe772ce79d91c3b7766b152c3d44ca","2008-05-29 14:14:31+00:00","MirarRaton -> updateEvents
espera_soltar -> updateEvents
Some cleanup

svn-id: r32363
"
"eb964d2844ce81bd01ab314d6f12d889405d777d","2008-05-29 16:41:49+00:00","Fixed regression

svn-id: r32364
"
"13c8e6d94b6d074985ef781d58300b56970b8c8f","2008-05-29 16:53:28+00:00","Numbers are mapped in a different order in the game's fonts

svn-id: r32365
"
"7ced1215d4ff1c668a91fce587d8a0b7d245f65e","2008-05-29 17:58:56+00:00","Fixed a crash that occurs when OS starts

svn-id: r32366
"
"8363f1294a76f5434ad20a2ac679e4da585cb249","2008-05-29 18:09:12+00:00","More talk related simplifications

svn-id: r32367
"
"3a43916e2022210b4de9a865f44df67157a0e004","2008-05-29 18:18:38+00:00","ancho -> width
alto -> height
nuevo_ancho -> newWidth
nuevo_alto -> newHeight
suma_x -> totalX
suma_y -> totalY
Removed unneeded variables diferencia_x/diferencia_y

svn-id: r32368
"
"7833dd87a5f3247681d6f51e45ee2f6da1ab91fd","2008-05-29 20:32:27+00:00","Rewrote dimPalette() so that the dimming is now a 'filter' between the Screen
class and the backend, i.e. as far as the game engine is concerned the palette
remains unchanged. (This is similar how to the SCUMM engine handles the 'noir'
mode in Sam & Max.)

This is one small step towards allowing the game to be paused anywhere.

svn-id: r32369
"
"5396cd5dedd039fa40b46ef0f86cd757de4de259","2008-05-29 20:35:15+00:00","Cleanup

svn-id: r32370
"
"b7deac38b3a529701a9c4866062e1db2db6214c4","2008-05-29 22:07:25+00:00","Added check in modifyObjectParam's start (Verified with FW & OS PC versions' disassemblies). Also removed superfluous default-case, hopefully no compiler will complain about this :).

svn-id: r32371
"
"92bf1817cbba8f461fd910166c0fea6040afc622","2008-05-29 22:34:03+00:00","Loads of Spanish translations with the help of timofonic (thanks!).
Unified some variable styles

svn-id: r32372
"
"3c827020a656c884f965522a945a4c46a5d085f9","2008-05-30 05:35:47+00:00","Fix regression introduced by last cleanup

svn-id: r32373
"
"8aa1b04043b7fb60dbe4ef826217293995ee2258","2008-05-30 07:09:36+00:00","dir_dibujo -> drawSurface
dir_hare_fondo -> backSurface
dir_mesa -> tableSurface
dir_hare_dch -> extraSurface (unsure about this one)
dir_zona_pantalla -> screenSurface
dir_hare_frente -> frontSurface
dir_texto -> textSurface
dir_pendulum -> pendulumSurface

svn-id: r32374
"
"eb28418d4b2c6a3a96c2ecbf87325bfd45f6d7ba","2008-05-30 07:16:17+00:00","Changed color defines to more meaningful names in an enum

svn-id: r32375
"
"54e631a9034c00f9a5519441027cfda2c0532567","2008-05-30 07:19:09+00:00","rompo -> doBreak
Removed unused variable rompo2

svn-id: r32376
"
"4cc64e2b638906b70b55e4a6dd464525b63062cd","2008-05-30 07:24:32+00:00","anima -> animate
leng -> dataSize, and removed it from the global variables (it's only used in animate())

svn-id: r32377
"
"1ca29c1796b0656e640bfd8f0d0dca3618c7e9b2","2008-05-30 07:26:55+00:00","Some cleanup, translated an error message

svn-id: r32378
"
"8d16e9330ada8de67da91fd5843e73c98ec568a0","2008-05-30 08:00:42+00:00","Untangling spaghetti code: removed several goto statements

svn-id: r32379
"
"6397af21dc2a2452fd6c11da6289f5e95333cef0","2008-05-30 08:14:01+00:00","diferencia -> difference
pos_pixel -> pixelPos
hare_se_mueve -> characterMoved
pixel_x/pixel_y -> pixelX/pixelY
vez() -> getTime()
menu_sin_volcar() -> showMenu()

Removed unused function codifica()

svn-id: r32380
"
"54a28afe0c269ccabcafd19c6b40e8bffa41e1be","2008-05-30 08:28:54+00:00","cara -> face
componente -> component
palFondo -> bgPalette
Capitalization

svn-id: r32381
"
"4ae97b90cb5ae33425e7180b91c596a8997f6cd2","2008-05-30 08:30:40+00:00","Remove obsolete comment

svn-id: r32382
"
"8c9205babd94fe01a23310227a840722e01608ee","2008-05-30 08:48:01+00:00","Wrap up rest of talk() calls

svn-id: r32383
"
"9b7e8fb7047b5dc9684a8357fee7f66fbab8bb9c","2008-05-30 08:55:47+00:00","Wrap up talk_taber2()

svn-id: r32384
"
"0516f550c38e3cfc2978ae7b69ee76e028e18d28","2008-05-30 08:56:07+00:00","Wrap up talk_taber2()

svn-id: r32385
"
"4eed36f88c9e0df275ae1430dc3428b92bfd711d","2008-05-30 09:28:52+00:00","Fix compilation

svn-id: r32386
"
"64def1b5624dc7068e60fe190fbeaa79f55ac9b2","2008-05-30 09:45:00+00:00","Big simplification and cleanup to the animation code

svn-id: r32387
"
"792286874a9f64e9aa282b219bcad574919ce7b8","2008-05-30 10:02:56+00:00","talk_igorpuerta -> talk_igor_door
talk_igor_peluca -> talk_igor_wig
and replaced some unneeded if statements with atoi

svn-id: r32388
"
"ea276dd17744fba2b7fa54f6084c6bd52d9f873e","2008-05-30 10:04:39+00:00","talk_igor_frente -> talk_igor_front

svn-id: r32389
"
"d261c93049b9d14f4c8e70242229368f9f8eae00","2008-05-30 10:14:27+00:00","More simplification of talk code. Moved talk_dr_grande() from animation.cpp to talk.cpp

svn-id: r32390
"
"d0b396f062890f1904229a5085221faf549c7c94","2008-05-30 10:21:29+00:00","Moved SSN frame definitions into their own enum and removed unused definitions for the escape and F1-F10 keys

svn-id: r32391
"
"db0af96fa05b943fccff4c3a88426aab8d22736a","2008-05-30 10:31:47+00:00","Wrapped up talk_igor_front, talk_igor_door, talk_igor_seated and talk_igor_wig

svn-id: r32392
"
"94d1e7effbe22291964202c903f5fe1d8c0f53ea","2008-05-30 10:43:21+00:00","Implemented opcodes 0x04 (o1_mulObjectParam) and 0x05 (o1_divObjectParam).

svn-id: r32393
"
"c153aaeea9c929813801913d4b74ec047fe0ac72","2008-05-30 10:55:43+00:00","Wrapped up talk_drunk
Some cleanup

dir_escritura -> targetSurface
targetScreen -> targetSurface
plt (in decompressPic) -> colorCount
funcion -> function

svn-id: r32394
"
"d2c337401ecea5f4fb247a689c884a111cc325c0","2008-05-30 11:04:40+00:00","Simplified calls to playSound()

svn-id: r32395
"
"b6b1b864be18517b0936ec0b76e8b35509133405","2008-05-30 11:12:14+00:00","Checked that opcodes 0x71-0x73 really do nothing else but read the parameters in PC versions of Future Wars and Operation Stealth. Maybe they're used in the Amiga versions?

svn-id: r32396
"
"dcbbd33dc8c7a5c89e5acd5acf1cf0a91c969a70","2008-05-30 13:10:52+00:00","Detect the full version of Blue's Reading Time Activities, based on old forum post.

svn-id: r32397
"
"4837ff8b9be211eff889100a72dfbbf58e0fc2a0","2008-05-30 14:25:03+00:00","- Merged loadPic and decompressPic
- talk_pianista -> talk_pianist
- Wrapped up talk_pianist, talk_wolf, talk_htel and talk_mus
- Did some cleanup in room logic

svn-id: r32398
"
"1da231a34efb38b3a1035b59c506cc46d3aa8b81","2008-05-30 14:44:08+00:00","- x_alakeva/y_alakeva -> destX/destY
- confirma_salir -> confirmExit
- Used CLIP instead of if's

svn-id: r32399
"
"0e92f8ffa9925833fc84604f14b7965094eef9dc","2008-05-30 14:58:09+00:00","Rewrote some more room logic

svn-id: r32400
"
"08eeb40ab44baa176185db23fd0e7b025a7d88cd","2008-05-30 14:58:38+00:00","Cleanup

svn-id: r32401
"
"d0174453ed0ba091a3fc5b76ed7f22c67a609e63","2008-05-30 15:15:49+00:00","LookForFree -> soundIsActive
soundIsActive returns a boolean value now

svn-id: r32402
"
"4158ff64ed6186d517305c9b77ba42cf13daa3f1","2008-05-30 16:39:49+00:00","Fix warnings

svn-id: r32403
"
"64211f33703841454c3c01850eea15aa5285b083","2008-05-30 20:42:31+00:00","- Renamed texts.cpp to staticdata.h and moved all game static data there
- Simplified room_0()
- Some cleanup

svn-id: r32404
"
"dc3cb78e6b79cc50262f93475bc06d015bf44f16","2008-05-30 20:43:51+00:00","Updated the MSVC project files of the drascula engine

svn-id: r32405
"
"798ce0ace82d5afad2a2863cc671b056be382ded","2008-05-30 21:09:21+00:00","Cleanup

svn-id: r32406
"
"d711fd9e343f506fe61056c3496eaec10c47d84d","2008-05-30 23:43:47+00:00","- Simplified font mapping (in print_abc and print_abc_opc)
- Moved checkFlag to rooms.cpp
- x_de_letra/y_de_letra -> letterX/letterY
- Made itemLocations a const
- Removed loads of now unneeded letter descriptions

svn-id: r32407
"
"ab81c9bb907f41d0543661e2a7068d3402b34c3c","2008-05-30 23:53:17+00:00","The game's screensaver should now kick in correctly

svn-id: r32408
"
"178e4e805f7ba5ffc59bc374761dd8700e310d4c","2008-05-31 00:06:05+00:00","tabernero -> bartender
anexo -> joined
LimitaVGA -> adjustToVGA
velas -> candles
VelocidadDeFundido -> fadeSpeed
anda_parriba -> walkUp
anda_pabajo -> walkDown

svn-id: r32409
"
"b33662e27f37e9fe6462fff767a47eeebd07ff23","2008-05-31 00:15:01+00:00","rompo_y_salgo -> breakOut

svn-id: r32410
"
"0c6ffa1882ab385ad6abce92e6a7e767c107bd68","2008-05-31 01:10:17+00:00","Add Blue's Clues demos.

svn-id: r32411
"
"d05600d22821862c73ed9c17829bd9af3deb6b0e","2008-05-31 06:31:21+00:00","Fix display of original load/save screen in the FM-TOWNS version of Loom.

svn-id: r32413
"
"46fce5ff50f1c907bb137f3b898cbb70d4b34332","2008-05-31 08:09:34+00:00","Replace evil gotos with proper do-while loops.

svn-id: r32414
"
"83880b85e9ed04425d95812ec84ae34d661d34c3","2008-05-31 08:10:15+00:00","Fix old regression

svn-id: r32415
"
"8fd8c68a05e8ca8df8dbc2a10f0be470a875f4c1","2008-05-31 08:26:06+00:00","Eliminated more gotos

svn-id: r32416
"
"bbfb4661eee5ad18c5dcfdb93ecb0de686bda3a8","2008-05-31 09:16:26+00:00","updateData -> updateVisible
num_ejec -> currentChapter

svn-id: r32417
"
"c80543cbb847101a5b03eb5f786eacb25726a204","2008-05-31 09:38:12+00:00","Cleanup

svn-id: r32418
"
"6ba824e66e72c9563bda7183e717308a325cc819","2008-05-31 09:45:47+00:00","Oops

svn-id: r32419
"
"e5934e38c5d3906a9f4fbd20a4ba2f77ff97898f","2008-05-31 09:49:09+00:00","Fix bug #1979579: 'DRASCULA: typo in Spanish verbs'

svn-id: r32420
"
"9f95b76588950119b5f7a4be075b10942e55577d","2008-05-31 09:55:11+00:00","x_pantalla/y_pantalla -> screenX/screenY
y_de_signos -> signY
pos_texto -> textPos

svn-id: r32421
"
"7ce59d993b4f23d970a0d66c8041b07732dc2b84","2008-05-31 10:01:13+00:00","Remove trailing spaces

svn-id: r32422
"
"601b735346698567bd6e1ecd277e4085ba104624","2008-05-31 10:24:45+00:00","Cleanup

svn-id: r32423
"
"8a8c67c9b76d75f3a2984da8818f462cee092879","2008-05-31 12:40:02+00:00","Simplified calls to updateScreen()

svn-id: r32424
"
"73b8f5ec00db2a5d314261cf564b2d63b2fdeabc","2008-05-31 13:01:48+00:00","x_igor/y_igor -> igorX/igorY
talk_dr_izq -> talk_drascula
Merged talk_drascula and talk_dr_dch

svn-id: r32425
"
"968fe6cbd7a810d9947d529f4f34a790a2f1388f","2008-05-31 17:44:57+00:00","Patch #1980689: 'DRASCULA: ENGLISH GRAMMAR/SPELLING' thanks to sanguinehearts

svn-id: r32426
"
"c3c695792c4e0c769cb3a30585ff48f4b6d6519a","2008-05-31 18:33:56+00:00","Use --enable-auto-import when linking dynamic plugins with MinGW.

svn-id: r32427
"
"bd9671ba246b3d45a5c2d8311d1e800b633f3210","2008-05-31 19:02:35+00:00","Fixing various warnings in the DS port

svn-id: r32428
"
"29cac0258f2d9825c9473c151e0ba1c40a5549f4","2008-05-31 19:05:45+00:00","DS: registers_alt.h is not neede with current libnds; added a FIXME

svn-id: r32429
"
"0f64d7236c43ed1027439ee208bc394809d4ef15","2008-05-31 19:06:50+00:00","DS: Fixed a warning; simplified & fixed the way scummvm_main gets invoked

svn-id: r32430
"
"c27f261b0bf262c58276c36c658817a2805af18b","2008-05-31 19:08:52+00:00","DS: Use DEVKITPRO env var to find DevKitPro files, as the DevKitPro manual suggests; it does not make sense to hardcode Neil's development environment paths by default

svn-id: r32431
"
"fb5ea14e4e5f4f078d51a7ffb901070f091d5eaf","2008-05-31 19:24:26+00:00","DS: The SpriteEntry::atributes array has only 3 elements; also removed some apparently not needed #includes

svn-id: r32432
"
"a00bfba616b4f2aced3381d32a2e039b621e192c","2008-05-31 19:24:50+00:00","DS: Removed some pointless -I compiler directives

svn-id: r32433
"
"4ed41d0a16ea626a8412b07af075080744a19797","2008-05-31 19:29:12+00:00","DS: Adjust some compiler warnings

svn-id: r32434
"
"63cb8227d30ea6a80084b545ec1662c7d99cd1f3","2008-05-31 19:35:37+00:00","Avoid some warnings when compiling in non-DEBUG mode (i.e. with assert() disabled)

svn-id: r32435
"
"93c107f46ae93e603c6f18b0a83c8b821a82976d","2008-05-31 19:37:19+00:00","DS: Fix compilation rule in Makefile to not compile everything twice

svn-id: r32436
"
"97348d5f44fc56f5073f301140094438530eb021","2008-05-31 19:39:42+00:00","DS: make sure DEPDIR and srcdir are inited, so that *.d files end up in the right spot

svn-id: r32437
"
"dd79ed10114d552ce9932331d9e4023af6e8dfa1","2008-05-31 20:18:43+00:00","Added ADGF_CD to Italian fan translation of kyra1 cd.

svn-id: r32438
"
"4ef680abaf3c81b061090061a69ec5ff13d71ae5","2008-05-31 20:48:41+00:00","- Fixed possible invalid memory access in Resource::loadFileToBuf
- Reworked compressed installer files handling
- Updated HoF installer file code (thanks to _athrxx for that)

svn-id: r32439
"
"a9c9a5404d2aa111af0e8e03717d4ae14a3dd53a","2008-05-31 21:15:37+00:00","fix hof installer file loading

svn-id: r32440
"
"7db0b2b5a1d36958f40bb968aff89722b548a466","2008-05-31 21:48:09+00:00","cleanup

svn-id: r32441
"
"a47106e77d9c0b2b52190cfa3efacf6a24c7ae14","2008-05-31 22:18:36+00:00","Cleanup.

svn-id: r32443
"
"4b4ebbd45d2c972ee179a9cb9e7fe9678bdaa038","2008-05-31 22:41:31+00:00","Endianness fixes in FLI player

svn-id: r32444
"
"7a2d85c07c2c54ba779b221187a3779845f8bdf3","2008-05-31 22:54:09+00:00","More endianness fixes

svn-id: r32445
"
"7d8a97b0afeb86a178914c351f48f1da5ccd0eef","2008-05-31 23:26:41+00:00","Added error calls when out of memory while uncompressing HoF installer files.

svn-id: r32449
"
"8be7d3c5226028429e4771981070f80b69ac4d69","2008-06-01 01:32:28+00:00","Ooops, intialize variables properly.

svn-id: r32453
"
"0b46595bf1809ab406ca604f8821e987b7edbacb","2008-06-01 10:16:56+00:00","Add Blue's 123 Time Activities.

svn-id: r32454
"
"3b5b37c3e1d79e4482d6dc5f45dc497ead10fcd6","2008-06-01 10:37:14+00:00","Fix bug #1973247 - DIG: Subtitle glitch (Regression).

svn-id: r32456
"
"cf27ab1a00c60aa6254d6e40d0b73c58fb2fcd41","2008-06-01 10:57:23+00:00","Correct HE version for Blue's 123 Time Activities.

svn-id: r32457
"
"a81e10da49a1418326f324227d6daa06aed346cc","2008-06-01 11:13:55+00:00","Add Blue's 123 Time Activities.

svn-id: r32459
"
"cc74ec5c39a233c05ad9e8b3eba96649ceb8490b","2008-06-01 11:43:20+00:00","Unarj code based on unarj 2.62. Used by Drascula engine

svn-id: r32460
"
"e5be4847ac25bab8ad74aca1db298f321ec4f682","2008-06-01 11:44:45+00:00","WIP for hooking unarj in order to play unmodified files from CD.
Will break your game unless you put packet.001 into game directory.
Not everything has been hooked and files fallback and detection is not
yet implemented

svn-id: r32461
"
"5b3a6fac639505819f9077a52cea7225b09ebd0c","2008-06-01 13:19:45+00:00","- (hopefully) fix valgrind warning for installer file decompression
- some more pauseEngineIntern code for Hof

svn-id: r32462
"
"ec93c8957b95b0ad633cf342094ad0c25db42b18","2008-06-01 14:00:43+00:00","- fix regression in non-interactive HOF demo

svn-id: r32464
"
"22d63345e33795c3ce2de4bb67db160ef8b8ea6d","2008-06-01 14:05:39+00:00","Got rid of the static arrays for initialization of parsers and exec opcodes, to make returning to launcher easier. The code has been borrowed by Kyra, after suggestion by LordHoto.

svn-id: r32465
"
"0485fbfc5be33b7219dd117fd4a14d77393e9bb2","2008-06-01 15:11:08+00:00","- fix 'order of evaluation' bug (MSVC release build)

svn-id: r32467
"
"85a3f389ae6020fb93786e42b5919195b800a5e9","2008-06-01 15:15:12+00:00","Some paranoia checks in TIMInterpreter::refreshTimersAfterPause.

svn-id: r32468
"
"cc2b35ee1f5e1f60d3ed6e619f05c7884d947b95","2008-06-01 15:18:58+00:00","Cleanup

svn-id: r32469
"
"dee529f30cb8db234c78504b3a4f1547be6b0a96","2008-06-01 18:09:19+00:00","Tweaks to DS makefiles.

1) It wouldn't build at all for me, because source/fat had been missed off the
INCLUDES line.

2) Stray whitespace removed (to stop emacs warning on saving)

3) DS_BUILD flag selection reworked slightly. Now do: make all SCUMM_BUILD=x
(where x is a,b,c,d,e,f,g) and it'll select that version and build it. If
no x is supplied or x is not a-g, then version a will be built.

4) New allbuilds target. In backends/platform/ds, do: make allbuilds
and versions A-G are built in turn (version G does not complete currently due
to lack of logo g). This uses a 'semiclean' target in each makefile to clean
just the files that change between versions.

svn-id: r32470
"
"37563ff3ae020ab05c314ad79630aaacf8d4c458","2008-06-01 18:37:35+00:00","Fix bug #1981402: 'BS1: grammatical error in the Italian menu'

svn-id: r32471
"
"8728cd2881b276f3ec6ad3bf0ac61be51eb474b8","2008-06-01 19:07:13+00:00","Speed up decoding by memory caching

svn-id: r32472
"
"49dd9376ad6aeb42ab69362bcc2856598b19931a","2008-06-01 19:07:57+00:00","More ArjFile usage

svn-id: r32473
"
"f5d9eb32f03cb55d8d46d4622a1732f77981346b","2008-06-01 20:05:21+00:00","Fixed MSVC warnings

svn-id: r32474
"
"ba5cebfaf8cdddef3bd1d814106935ab305bb410","2008-06-01 20:58:05+00:00","Now whole game could be run from original packed files.

svn-id: r32475
"
"452d46b3bf6a3c77bc4583a56e7dc5e7a4ad385b","2008-06-01 21:10:29+00:00","Implement file fallback for archives

svn-id: r32476
"
"df35925557c6b45482efcf1cdf076c783a64728c","2008-06-01 21:11:14+00:00","Enable file fallback for drascula. Now old uncompressed games should work.

svn-id: r32477
"
"ffc64511cab717ca1472f52647ee3a14cab350da","2008-06-01 21:30:07+00:00","Add MD5's and packed file overrides for original packed files of the Multilingual English/German/French CD of Drascula

svn-id: r32478
"
"cb103cb9e2f620e436160dd9dda95aad7f397e93","2008-06-01 21:47:24+00:00","DS: Removed some duplicate file content (thanks to Qvist for pointing this out)

svn-id: r32479
"
"8a0abfb04560072edc4e444ddc0dcad8da19634e","2008-06-01 21:57:30+00:00","Fix for crash that occurs in the unarj's fallback code -  _uncompressedData is not allocated when ARJ files have not been opened

svn-id: r32480
"
"704ad4a5fbdef90bd9e53874b8930706d5184734","2008-06-01 22:38:29+00:00","Removed the now obsolete talk_dr_dch
Merged talk_bartender and talk_taber2
Merged talk_pen and talk_pen2

svn-id: r32481
"
"0ca4ff8840928ec0e3a9dcff73c104c54061b9ad","2008-06-01 23:51:41+00:00","Should fix gcc warning

svn-id: r32482
"
"cb5424810c33ac40cc23562599a339cc71fbd4ad","2008-06-02 04:39:43+00:00","Show the 3 pictures in carga_escoba after the initial file is loaded (so as not to attempt and reopen the ARJ file)

svn-id: r32483
"
"738a62ef6aa50ba19231c46aff40c8b46332c1bc","2008-06-02 04:42:19+00:00","loadAndDecompressPic -> loadPic

svn-id: r32484
"
"24156516ab29c900c1549c4356f6bbfa7cab5a28","2008-06-02 05:00:11+00:00","Simplified talk_blind()

svn-id: r32485
"
"0f17e601013853a4076fceeb621590fd57026005","2008-06-02 05:01:40+00:00","GID_WATER is no longer required.

svn-id: r32486
"
"7f36ae8d7cab7ddb30224ae24b539fa88c90566a","2008-06-02 05:15:34+00:00","Removed some of the old talk functions

svn-id: r32487
"
"4352bd1d88a0481b70ff9dcdc74193a95cea8a7c","2008-06-02 05:38:28+00:00","Proper implementation for talk_banterder(82)

svn-id: r32488
"
"aaf8b5810c4e4c689e31cef8c03dd5fc1b3ad519","2008-06-02 05:56:53+00:00","Proper detection for packed German and French versions. Removed unneeded code.

svn-id: r32489
"
"cd6d528c422de5906aac1882cc1924dda903f759","2008-06-02 06:51:59+00:00","Better implementation of packet games loading

svn-id: r32490
"
"841dde61d07a23fdb8a827b36cc2ca15e113b37c","2008-06-02 08:01:26+00:00","Updated the MSVC project files (added unarj.cpp/.h)

svn-id: r32491
"
"0fc34681c827f870b985b158fa7517d4ad19151f","2008-06-02 08:39:19+00:00","Add Macintosh version of Blue's 123 Time Activities.

svn-id: r32492
"
"e6d2ed3ca8f06a9d6b5b37d3015eb53d5bbf772c","2008-06-02 10:58:45+00:00","Further cleanup of the talk code

svn-id: r32494
"
"9630298df6a39b02ea6b439379d28af7e10b469d","2008-06-02 13:12:07+00:00","Sorted static mouse arrow bitmap, so it doesn't have to be 'decoded' on the fly. This saves a headache on re-entry.

svn-id: r32495
"
"12c3798ffb3184b57ef604225415dfac7511a4a2","2008-06-02 18:19:18+00:00","Plug memory leak

svn-id: r32496
"
"70dd879e2f2c48e59a199d0555c5e11608641f6c","2008-06-02 18:19:58+00:00","Implement ADGF_KEEPMATCH

svn-id: r32497
"
"251467a0130ff3e7bd0472b46459d788959e811b","2008-06-02 18:21:03+00:00","- Now it is possible to choose English version from original CD. Thanks to
ADGF_KEEPMATCH
- Fix detection of French version

svn-id: r32498
"
"72e3cee9d41dcf70508b596700018d35f2f490a2","2008-06-02 18:28:55+00:00","Add detection for original unpacked Spanish and Italian versions.

svn-id: r32499
"
"945b92501a41b39d231bcec78df5aac5e41b1c33","2008-06-02 18:38:50+00:00","Simplified detection table

svn-id: r32500
"
"3f745d68139c6986d771ace0db7ba8d90d2cdcdc","2008-06-02 18:48:09+00:00","This should fix a regression in the recent talk_igor() cleanup. I don't
actually have the game, though, so I can't actually verify that there is a
regression, nor that this fixes it.

svn-id: r32501
"
"b0c7714cfa2a65dcb9c701aede5fa0e862adf392","2008-06-02 20:32:36+00:00","Added an enum for Igor's possible states

svn-id: r32502
"
"6f09c5a9286f97a1fac6e85fa4092295bc779440","2008-06-02 20:46:00+00:00","rayo_x -> rayX
PASO_HARE_X/PASO_HARE_Y -> STEP_X/STEP_Y
PIES_HARE -> FEET_HEIGHT
ALTO_TALK_HARE -> TALK_HEIGHT
ANCHO_TALK_HARE -> TALK_WIDTH
salgo -> roomExit
num_cara -> faceBuffer
pantalla -> curScreen

svn-id: r32503
"
"a338d5fdb2715a7b29ae789c632a0cfa05803079","2008-06-02 21:08:49+00:00","PARA: Got rid of calls to system->quit() so that the Parallaction engine can return to the launcher.  Also fixed a couple of memory leaks.

svn-id: r32504
"
"0cbfc3a9d1b30822373360aa4c398518c9a74990","2008-06-02 21:36:45+00:00","Merged revisions 32348-32349,32351-32356,32358-32411,32413-32441,32443-32445,32449,32453-32454,32456-32457,32459-32462,32464-32465,32467-32492,32494-32503 via svnmerge from
https://scummvm.svn.sourceforge.net/svnroot/scummvm/scummvm/trunk

svn-id: r32505
"
"5789bbc836d7b26d8d1bd52fbf2a26730ed66013","2008-06-02 22:41:58+00:00","elige_en_barra -> selectVerbFromBar
comprueba -> verify1
x_barra -> verbBarX
conta_vez -> startTime
diff_vez -> timeDiff

Some cleanup

svn-id: r32507
"
"220dd330c2f7418e2d20217507569551f22fc0d5","2008-06-02 23:09:19+00:00","hare_x/hare_y -> curX/curY
ancho_hare -> curWidth
alto_hare -> curHeight
direccion_hare -> curDirection

Some slight cleanup

svn-id: r32508
"
"b87c11a4a14343a23c35e43b02bc8f4ff6b40922","2008-06-03 00:49:27+00:00","Fixed initialization of parsers, necessary after the latest removal of static arrays.

svn-id: r32509
"
"2d9a194a559d3bfe61c81b7d4995a48f2374f64d","2008-06-03 07:34:47+00:00","Removed the now empty files stringSupport.cpp/.h

svn-id: r32510
"
"45cce58611ba8fd70bb367168c559e2ef0fe7c9f","2008-06-03 07:38:28+00:00","Removed stringSupport.cpp/.h from the MSVC project files of the cruise engine

svn-id: r32511
"
"00e662391da59adb8aae478f7af2ab867346ab7f","2008-06-03 08:54:49+00:00","x_talk_izq/x_talk_dch are used in more than 1 place

sentido_dr -> trackDrascula
sentido_hare -> trackProtagonist
sentido_final -> trackFinal
lleva_al_hare -> gotoObject
pon_vb/sentido_vb -> moveVB/trackVB
hay_seleccion -> selectionMade
suelo -> floor
obj_salir -> objIsExit
sitio_x/sitio_y -> roomX/roomY
fundido -> fade
cuanto -> duration (in pause())
pos_hare -> curPos
nom_fich -> fileName
sitiobj_x/sitiobj_y -> roomObjX/roomObjY
sentidobj -> trackObj
cirio -> candle
pianista -> pianist
suma_1_pixel -> talkOffset
sincronia -> syncChar

svn-id: r32512
"
"6673bf512e4b5bf8401af1bfaecb61755571cfb6","2008-06-03 09:23:56+00:00","Reordered and grouped function definitions

svn-id: r32513
"
"3be34f071fc56275d37f9467dcf72389c1711474","2008-06-03 18:12:21+00:00","Added support for compressed kyra3 audio files.

svn-id: r32516
"
"e3a8074a6d93b8ef590c9761f2a8d7aba8b06e0b","2008-06-03 18:17:56+00:00","Rewrote some more room logic

svn-id: r32518
"
"fa75221e484d8649ab4506ec49b698328dd7649b","2008-06-03 18:24:54+00:00","PARA: Fixed some memory leaks

svn-id: r32519
"
"5288daa863b6eeb9696e9dd48640f237b0b644ba","2008-06-03 21:04:41+00:00","DS: Forgot to commit #include changes in the ds-fs.* files; this allows to get rid of -Isource/fat

svn-id: r32520
"
"4b5ed050f176588067a355506792d75b7958bf21","2008-06-03 21:20:55+00:00","Initial WIP and still non-working code for the blinking save reminder icon (bug reports #1981081 and #1971729)

svn-id: r32521
"
"fe6ab4227e070a6ef6ae5528025c2b2ea9a0b271","2008-06-04 01:04:26+00:00","Return to menu after introduction has played (with glitches).

svn-id: r32523
"
"52fbdd51eb0f7d31ce1718adfc60bc169c7c84c3","2008-06-04 01:27:55+00:00","Script instructions referencing unexisting animations are now skipped, instead of crashing the engine.

svn-id: r32524
"
"18b892e534c9fedf60a57c71e0978965d353fd60","2008-06-04 05:21:47+00:00","QUEEN: Modified engine to use a quit flag instead of system->quit() in order to return to the launcher

svn-id: r32525
"
"db0c37d054cdb3d205edae6106cda9adb858ce7d","2008-06-04 07:58:34+00:00","Removed junk code from update_1_pre, update_4 and update_6_pre

pon_hare -> moveCharacters
hare_oscuro -> setDarkPalette
hare_claro -> setBrightPalette
funde_hare -> setPaletteBase
conta_blind_vez -> savedTime
paleta_hare -> assignDefaultPalette
paleta_hare_claro -> assignBrightPalette
paleta_hare_oscuro -> assignDarkPalette
distance_x/distance_y -> distanceX/distanceY
palHare -> defaultPalette
palHareClaro -> brightPalette
palHareOscuro -> darkPalette
pos_murci -> batPos
murci_x/murci_y -> batX/batY
blind_x/blind_y -> blindX/blindY

svn-id: r32526
"
"c0621fcc4e7851e6045df87a5c901c95dce8e6a2","2008-06-04 08:06:04+00:00","Merged para_grabar() with saveGame()

sentido_igor -> trackIgor
sentido_bj -> trackBJ

svn-id: r32527
"
"e7f8ef11a9901f157aa81ec2d53a246439edc08b","2008-06-04 09:02:23+00:00","carga_escoba -> enterNewRoom
talk_sinc -> talk_sync
n_ejec2 -> savedChapter

Removed updatePalette()
Simplified enterNewRoom()
Merged para_cargar() and loadGame()
Slight cleanup to withoutVerb()
Removed set_dac and set_dacSSN

svn-id: r32528
"
"73832f2edd82ca25bf25c15b43b1678e4ac4c32d","2008-06-04 09:07:55+00:00","* Implemented character change opcodes in BRA
* Fixed loading of dialogue characters in BRA

svn-id: r32529
"
"08566b44b835edd97067bd50f7aff9fb6c7146e0","2008-06-04 09:08:37+00:00","enterNewRoom -> enterRoom

Added debug output when entering/exiting rooms

svn-id: r32530
"
"2f92ebde2ba996660ad6e39eea89232774972190","2008-06-04 09:39:38+00:00","oops. Changed stricmp to scumm_stricmp from last commit.

svn-id: r32531
"
"7e2e283a0ec7d7ecb6d27cb79f430ac2f0d8a102","2008-06-04 09:56:41+00:00","Fixed regression from commit #32507

svn-id: r32532
"
"052d6f6bff3ec786cfa121cbd5648da85f9d6630","2008-06-04 10:27:10+00:00","releaseGame() -> quitGame()
nivel_osc -> palLevel
Simplified calls to loadPic()

svn-id: r32533
"
"a8d8f23f69b856caab5712ea1fe6dff9d0f89d12","2008-06-04 10:29:28+00:00","Simplified some more calls to loadPic()

svn-id: r32534
"
"518d705c93d2a447ffb9902c4f0cb0facb322ed5","2008-06-04 10:48:18+00:00","lleva_vb -> placeVB
c_mirar -> curExcuseLook
c_poder -> curExcuseAction
sentido -> trackCharacter
mirar_t -> lookExcuses
poder_t -> actionExcuses

svn-id: r32535
"
"bea79f2d31d4b177ac6d2c9e4e0eb78874be1be3","2008-06-04 14:42:27+00:00","Rewrote some more room logic. Added a FIXME about the usage of ARRAYSIZE in this case

svn-id: r32536
"
"735463de44f805dca91d4757e458351e2b9f8a2e","2008-06-04 16:15:08+00:00","Fixed the misuse of ARRAYSIZE

svn-id: r32537
"
"659d2bb234da395c6f0425ab04e66670d5ab1ca1","2008-06-04 16:39:56+00:00","Fixed regression from commit #32536

svn-id: r32538
"
"0931f926d45db807806f433cde9114839c4de65e","2008-06-04 17:02:25+00:00","Fixed typo in the initialization of the _textd1 array, which is now set correctly. Fixes bug #1982111 - 'DRASCULA: Crash when buying sickle'

svn-id: r32539
"
"73da6ab51ef86b89adad28a935ac22bad257b834","2008-06-04 17:20:25+00:00","- Removed -Wconversion from compiler options for g++ 4.3, it's behavior has fundamently changed in g++ 4.3
- Added -Wno-empty-body and -Wno-parentheses as compiler flags for g++ 4.3 for *now* (we should think of removing -Wparentheses though)
- Fixed some warnings for g++ 4.3 (only for the engines I'm using)

svn-id: r32540
"
"f21a15cbbbb85780aad26a9df648f0ee16349ea1","2008-06-04 17:41:40+00:00","Removed decompressPic() and fixed the animation of Von Braun and his glass cage

svn-id: r32541
"
"b0eb20b4b8e829200b538a32b6333c5b893225cb","2008-06-04 18:08:19+00:00","Fixed the animation where the window is broken by the spear outside the church

svn-id: r32542
"
"4ee6f4d01a6de5a0f908d8b7ea7cbe7bdd3a63e7","2008-06-04 18:27:58+00:00","Fix memory overwrite

svn-id: r32543
"
"8d4cf05ccc8e9a52f3de1111c07f7cbc5b4c7824","2008-06-04 19:21:17+00:00","Reduced the delays in Drascula's save/load screen to make it more responsive (since delay() waits for double the time internally)

svn-id: r32544
"
"f44d39494df834a21411f37b4a98aaba5618ef74","2008-06-04 19:24:50+00:00","Clear 'select' when the save/load screen pops up, to avoid having garbage shown in the selected game slot

svn-id: r32545
"
"1869141f0448621b19ab25d3ca338a134500a049","2008-06-04 19:27:14+00:00","saves -> saveLoadScreen

svn-id: r32546
"
"5e666ef774d11d030ea9957ecc64a197de2abcd8","2008-06-04 20:28:20+00:00","Patch #1971285: 'Nintendo Wii port'

svn-id: r32547
"
"7f1353f39e569bc428ac6ddc9058fedac042c340","2008-06-04 20:33:45+00:00","Add dhewg to the team

svn-id: r32548
"
"16209c1306bd9a9e5962339bfd5dd05f0eb76cee","2008-06-04 21:44:12+00:00","Add missing runtime data

svn-id: r32550
"
"5acc34fb77f2156e7cda47c5b47c156add3668cb","2008-06-05 05:59:56+00:00","Slighlty modified patch #1984858: 'DRASCULA: more english grammar/spelling fixes'

svn-id: r32551
"
"fe2fcbf2d5003dbb9102a898600437da06ac64d2","2008-06-05 08:25:29+00:00","- Removed the unused hay_sb variable (originally, it was meant to check if the sound is active or not)
- mesa -> volumeControls
- Cleanup of volumeControls()
- fliplay -> playFLI, and removed openSSN() and EndSSN()
- Some translations:
button_izq -> leftMouseButton
button_dch -> rightMouseButton
animation_rayo -> animation_ray
hueso -> bone
vuela -> fly

svn-id: r32552
"
"cae527c7037dff1ef6371cc149a400bf9c564587","2008-06-05 12:41:04+00:00","Forgot the separator

svn-id: r32553
"
"bfd4fc910e76161cf088c2b9683414de7b32e3f4","2008-06-05 13:23:57+00:00","- Rewrote the way room updaters, preupdaters and room parsers are called and added debug output when they're called
- Simplified calls to converse()
- Removed the useless para_codificar buffers
- Renamed checkFlag -> checkAction

svn-id: r32554
"
"dd4a0efe0290891000d3b44a69fec65eafc00ce9","2008-06-05 14:02:49+00:00","Fix compiler warning (to clear a C-string, do not abuse sprintf like that)

svn-id: r32555
"
"5f573fea1150ef939c4ec8c71e3ae49f6f4930c3","2008-06-05 15:03:48+00:00","Added enums for all items up to chapter 3 and some of chapter 4

svn-id: r32556
"
"b9516aa80e21c4fd61cab13bba7b6170ffc1a523","2008-06-05 15:15:20+00:00","escoba -> runCurrentChapter

svn-id: r32557
"
"a921549370b89f9cdddb16b5727efe416015663f","2008-06-05 19:04:58+00:00","Pendulum room is room #102

svn-id: r32558
"
"9cbf46a7a42f0f71797856dcbcf987ef11ae6723","2008-06-05 19:29:30+00:00","Merged all roomXXActions into single array. Thus simplified room parsers.

svn-id: r32559
"
"35cdc7aae478f55765bf213b0f929d0ba34cac8f","2008-06-05 20:28:50+00:00","Converted most of checkAction() to pseudorooms 200 and 201, putting
them into roomActions.

svn-id: r32560
"
"b7ac2f99f623b09c218884c490a8f3cb95eef77e","2008-06-05 20:35:45+00:00","Optimize a bit roomParse, though ideal would be a binary search, but I am
too lazy for that.

svn-id: r32561
"
"3c7e0f5f8dc39e27619f7d23d060264db8d906d3","2008-06-05 21:12:02+00:00","Fixed regression: rooms 0, 56 and 60 are not called by the default room parser (13 and 21 too, but there are no default actions associated with them)

svn-id: r32562
"
"cae6396ce76991e240b1e23bbcff0b6d6960f9a0","2008-06-05 21:20:35+00:00","Merged revisions 32507-32513,32516,32518,32520-32521,32523-32524,32526-32548,32550-32562 via svnmerge from
https://scummvm.svn.sourceforge.net/svnroot/scummvm/scummvm/trunk

svn-id: r32563
"
"c0a75930c7e6aeec6ba7e7bf03d8dfb43cf69351","2008-06-05 21:34:45+00:00","disable more more compiler warnings

svn-id: r32564
"
"7eae38454add676cc1e094fae36adf875a5ac946","2008-06-05 21:39:44+00:00","recreated icon.png from scummvm_logo.svg

svn-id: r32565
"
"a98a350d14ae8731469f9c551477138c02a37032","2008-06-06 00:34:47+00:00","TOUCHE: Fixed a memory leak

svn-id: r32566
"
"095c1544db440ebd3335cf83228018c86f1fdd54","2008-06-06 06:35:25+00:00","Further unification of room code.

svn-id: r32567
"
"fe8ec2ef105a1bfa05742acd5491580d81bd7fdb","2008-06-06 06:58:37+00:00","Only try to play a sound file if the file could be found. (Otherwise, it looks
like it will try to use the most recently opened file, which is probably not a
sound at all.)

svn-id: r32568
"
"5d46aa2b7f55f4c67952699a15a3f6ae63d92c94","2008-06-06 06:59:44+00:00","Removed left-over debugging.

svn-id: r32569
"
"bc76980ae6c85ff74ed781240a782bd8cd86af76","2008-06-06 07:42:00+00:00","Added the rest of the rooms to the room parser

svn-id: r32570
"
"547e25667b441f29ed96af7546b68ad468f89a40","2008-06-06 07:48:00+00:00","Removed the empty specialized parsers for rooms 19, 44, 61 and 63

svn-id: r32571
"
"a478ef04aebb65e3cf13c766bbfb14e55ed52110","2008-06-06 09:18:49+00:00","Fix regressions introduced in r32571

svn-id: r32572
"
"fa8981e1e2e0da48a936e4fcab59687ed34c0ede","2008-06-06 09:53:33+00:00","Simplified the room preupdaters and updaters

svn-id: r32573
"
"266cf3b760a2299501ac5fe2701780be00d81e15","2008-06-06 10:01:14+00:00","Cleanup

svn-id: r32574
"
"0ee152fbb9b73d44f143792789b23cdbdc68a347","2008-06-06 13:34:34+00:00","- Fixed a valgrind waring
- Formatting
- Removed an assert

svn-id: r32575
"
"7c4e375b397fec0ae76db2682e4f33d2eadc9160","2008-06-06 14:50:19+00:00","- Cleaned up the code that makes the in-game screensaver pop up
- Grouped all the frame_* variables
- Removed the unused mouseY_ant variable

Renamed:
x_dr/y_dr -> drasculaX/drasculaY
x_bj/y_bj -> bjX/bjY
vb -> VonBraun
wolf -> werewolf
pos_cabina -> cabinPos
dir_lectura -> pal
plt -> colorCount
palNegra -> blackPalette
cont_sv -> framesWithoutAction

svn-id: r32577
"
"0f41f1ccf4cbadedc63576af55249b142b833145","2008-06-06 16:40:39+00:00","SKY: Fixed a memory leak in SKY engine

svn-id: r32578
"
"7a05f382c24d90bb4a93e12cf336aabf4ad30754","2008-06-06 17:58:08+00:00","Initialize roomNumber correctly

svn-id: r32579
"
"31bb8c01c7b389869564ebfbb5a5ac61be57c11f","2008-06-06 18:28:50+00:00","Removed the useless textSurface buffer
frame_x -> frameX
candleX, candleY, pianistX and drunkX are used in more than one place

svn-id: r32580
"
"c6f72c52df4bd9d39b0364c7403085a552789b14","2008-06-06 19:17:21+00:00","Partially reverted r32580. That surface is used by Spanish version.

svn-id: r32581
"
"3b1e4fc15fa18cff7ec557485d8738c828325ff6","2008-06-06 19:29:59+00:00","Move more room code into roomActions[].

svn-id: r32582
"
"00dba1cebce8ab3ab4e7b3fdd4257488a0483525","2008-06-06 19:37:36+00:00","- Cleanup
- Removed the unneeded AuxBuffLast buffer (this one is really not necessary :) )
- Simplified some more room actions

svn-id: r32583
"
"fbf319dbfb09868a9e6b1e989bb88315defe38d4","2008-06-06 19:52:09+00:00","Partially reverted the changes to for loops in my last commit. It's not wise to call strlen() on each loop iteration...

svn-id: r32584
"
"58dd060ebc92aa01836497e508cc3bfe1867d41e","2008-06-06 20:12:51+00:00","Slighly modified patch #1985341: 'DRASCULA: Hopefully my last batch of english updates'

svn-id: r32585
"
"3d072b44029cfa6a574faf4b833bbbe2225e20d3","2008-06-06 20:21:06+00:00","Another English fix from sanguineh

svn-id: r32586
"
"18aec42f1909e9e4320ed7abe1c8dac2b6f6ffbb","2008-06-06 20:58:32+00:00","Fix apostrophe rendering in conversation texts.

svn-id: r32587
"
"67765c65592cefcc942af60e69567f0419b7b767","2008-06-07 10:10:40+00:00","Simplified talk_hacker

svn-id: r32588
"
"7192c88b19d4f89f86f7b0fa1c08349e45c6b3c8","2008-06-07 11:31:40+00:00","Used enums for igor talker types
Merged a lot of code of talk_pianist, talk_drunk, talk_werewolf and talk_mus

svn-id: r32589
"
"d3adb312c98862b696f1f12ac01bc470e4ee34f5","2008-06-07 11:43:54+00:00","Fixed regression from last commit

svn-id: r32590
"
"b28b0fe6d7bb306e761057bb74fa018da369ada2","2008-06-07 14:15:56+00:00","Cleanup
estanteria -> bookcase

svn-id: r32591
"
"f6a1a89d04810fc453db81becd6ab67f84be51b1","2008-06-07 14:45:01+00:00","Patch #1986992: 'DRASCULA: correcting errors'

svn-id: r32592
"
"1217f0a42be87138a2d375bd78b50b880b2bdcab","2008-06-07 15:37:17+00:00","added support for reset and power buttons

svn-id: r32593
"
"b17d9f4fb0a12db1d0af3c20196f67e3b9af7ef4","2008-06-07 15:39:25+00:00","-Wno-multichar slipped in twice

svn-id: r32594
"
"a78c2251ca8ed02f2955af28d4d82245de04660f","2008-06-07 18:38:44+00:00","Ooops. Several missing colons in the texts which lead to wrong messages were spotted and fixed.

svn-id: r32596
"
"681f331895b18a84f15ce8bb1825d945a3bf0151","2008-06-07 18:43:20+00:00","Another fix, now to German texts.

svn-id: r32597
"
"3723afc268afc8aedc83f9353eb44be6566050bf","2008-06-07 18:59:12+00:00","create_drascula tool, courtsey of md5. Not yet used by the engine.

svn-id: r32598
"
"e14f81391c8210ea7cef8f798871ff0f57c76cbb","2008-06-07 19:40:43+00:00","Shuffled around more code. Now the files look more manageable.

svn-id: r32599
"
"7a0feca9e2cb30d410e0c86d0753caffb9db4dc8","2008-06-07 19:44:00+00:00","Add new files to makefile.

svn-id: r32600
"
"6225e8e416c4b7ccc0a5cfa0ba224119309f67f9","2008-06-07 20:00:51+00:00","Update Drascula's MSVC project files for r32599.

svn-id: r32601
"
"9fc94f8cca3e3c70e2bf572c236a337d6cd3b1d8","2008-06-07 20:40:59+00:00","Make .dat file a bit smaller.

svn-id: r32602
"
"09597d028c827654ab805544bb505c69302dd93a","2008-06-07 20:47:52+00:00","WIP of drascula.dat loading.
DISCLAIMER: this is too far from finished. From now drascula.dat is required to
run the game, but in the meantime you have to make it by yourself. Do not
update DRASCULA_DAT_VER as I want it to be version 1 once all loading will
be implemented, but that may lead to some changes similar to r32602.

svn-id: r32603
"
"8a0566de14eddca31d67704a1a2d31831bc08ff2","2008-06-07 21:02:03+00:00","Add stubs for .dat file loading

svn-id: r32605
"
"5bdcec23d845082e8a21da6629eb66bbf3f69a69","2008-06-07 21:10:19+00:00","Preparations for optimal memory allocation on reading.

svn-id: r32606
"
"ee1dfa3f3d75fbf28453b6cb3f55166ce88dbe2b","2008-06-08 02:00:34+00:00","Initialize _charMap to avoid crash when drascula.dat doesn't exist

svn-id: r32607
"
"b050430b41109d9ce9fabd3f1d98ad5dc4f54474","2008-06-08 02:02:06+00:00","Don't attempt to close the arj file if it hasn't been opened

svn-id: r32608
"
"6c5d005edc9b960dccd8dd56b1a8004834f40127","2008-06-08 03:09:21+00:00","Cleanup

svn-id: r32609
"
"cd0683e8d588e2d64d4fe2bb5fc70023bf586ce7","2008-06-08 05:42:21+00:00","Implement data padding

svn-id: r32610
"
"99b7c8eb435c628af398f7305a35d879280a0de2","2008-06-08 07:05:22+00:00","Use _system->quit() instead of exit(0).

svn-id: r32611
"
"af7472642089e52e16c7e39428b44c39e997841f","2008-06-08 10:56:44+00:00","Grouped all the different draw buffers/pointers together

svn-id: r32612
"
"5880defea4cdc3ea8e621769c34f46be724c6e66","2008-06-08 11:10:00+00:00","Removed the useless pcxBuffer buffer and auxPun pointer and fixed an off-by-one error in the PCX decoding routine

svn-id: r32613
"
"dcde2f7a9670b399f617f5599d0ba7e4dd6bfcc0","2008-06-08 11:26:48+00:00","The pendulumSurface pointer is only used in update_102()

svn-id: r32614
"
"1b233db8510870e5daabf80550bdff3ace668fef","2008-06-08 14:11:22+00:00","- Removed the AuxBuffOrg and AuxBuffDes buffers
- Renamed loadPCX -> showFrame
- Removed WaitForNext()
- Cleaned up the PCX frame loading code

svn-id: r32615
"
"f45939a90a7ab90f661f005ad8e4d5bbc4cc6fcd","2008-06-08 14:17:35+00:00","Use mixVideo() in showFrame() and some capitalization fixes

svn-id: r32616
"
"c37c19a8cfc04249d4b85e4d91122bd0998ca145","2008-06-08 14:59:52+00:00","pointer -> memPtr
Des_RLE -> decodeRLE
Des_OFF -> decodeOffset
Lenght -> length

Removed duplicate code for RLE decoding

svn-id: r32617
"
"e2e4c90bb3b36f96ca0d0b763d723882599dc458","2008-06-08 15:22:04+00:00","Fixed readVolCnf() filename length detection and converted fixVolCnfFileName-function to something easier to understand.

svn-id: r32618
"
"069ffd4b701db0ff8faf1bd163945c3a0d99b494","2008-06-08 15:56:48+00:00","Removed the MiVideoSSN buffer, using screenSurface instead. Added a FIXME for decodeOffset (as it can incorrectly write beyond 64000 bytes, up to 64256)

svn-id: r32619
"
"458c7185d92a9e5ac53663733043c8b73e964f4e","2008-06-08 16:42:12+00:00","quitGame() -> endChapter()

svn-id: r32620
"
"e62b1ed9d84bd66ceac829ec34fdec0c83731034","2008-06-08 21:58:20+00:00","Proper texts alignment.

svn-id: r32621
"
"e20617966c9ba33e6383095e14888b552d1161e6","2008-06-08 21:59:12+00:00","Load all texts from drascula.dat

svn-id: r32622
"
"5c44c48dd03f19748c41ab86e7f59c87b4ddd899","2008-06-08 22:11:18+00:00","Restore apostrophe hack.

svn-id: r32623
"
"d218badb6b2398d39d314cacae1882187372e32b","2008-06-09 02:36:34+00:00","Ignore superfluous --enable/--disable flags for existing engines

svn-id: r32624
"
"5937fde1c72cf2382e85e674b6fc0bdcf10d8f92","2008-06-09 03:09:44+00:00","Use mktemp when available

svn-id: r32625
"
"3308e6558bb984d480b3c52a8bca468368c1c6a6","2008-06-09 03:20:53+00:00","Added some missing $EXEEXT which would make some tests to fail

svn-id: r32626
"
"280a7c4c229c14984f97a8e27b1a681b4c2476bb","2008-06-09 03:59:16+00:00","Show warnings when a plugin couldn't be loaded

svn-id: r32627
"
"a353776f2fd2d8627812d674d80ccb5910c48006","2008-06-09 10:11:42+00:00","- drascula.dat is now read completely
- Removed the rest of the game static data (staticdata.h)
- Some naming convention fixes (added underscore to some shared variables)
- Renamed objeto -> object

svn-id: r32628
"
"3daf09c9229a66f9b625941f9d63a5e1403cf4c8","2008-06-09 10:13:44+00:00","Updated the MSVC project files of the drascula engine (removed staticdata.h)

svn-id: r32629
"
"756c7a76f7b2d5bf00780c699a3824b8ea480b8a","2008-06-09 10:22:11+00:00","Moved the MSVC solution files to /dists, added two MSVC project conversion tools (MSVC8 <-> MSVC9) and added project files for MSVC8 as well

svn-id: r32630
"
"c9b2382e7a2163f812fda48a059d57fd40d93d4e","2008-06-09 11:49:32+00:00","Initial version of drascula.dat

svn-id: r32631
"
"62248a0011dcf8bf1c94ea8e945bb3b306778e32","2008-06-09 12:23:56+00:00","Add drascula.dat.

svn-id: r32632
"
"32edf673a4685224062a3eef9e4756180bb94803","2008-06-09 14:21:32+00:00","Slight code revamp to create_drascula.cpp by sev (drascula.dat remains unchanged)

svn-id: r32633
"
"9e9c38c68939f59b6e577a8225e38235f5ae2f45","2008-06-09 14:23:04+00:00","Bugfix to read the first array element correctly by sev

svn-id: r32634
"
"661e507772f4f5aadb9fe35468cc105e4232a8bc","2008-06-09 14:36:58+00:00","Properly initialize and destroy the different arrays read from drascula.dat. Also, fixed a crash that occurred from the last commit

svn-id: r32635
"
"50c62c7eac52dbb8beb6e3381a1312be45c43835","2008-06-09 14:45:45+00:00","Properly initialize and free memory for texts

svn-id: r32636
"
"339874f6c0934e16ac78c9b79a94b765668409af","2008-06-09 17:50:52+00:00","Fixed warnings. (Mainly, GCC 4.3 doesn't want you to use 'char' as an array
index. Probably because it's undefined whether or not it's signed.)

svn-id: r32637
"
"a9c93a4be9340fb3b2f667771dac3b64ffa87bff","2008-06-09 18:02:09+00:00","Fixed regression from commit #32636, leading to a crash

svn-id: r32638
"
"aac3270de1b5aa504353cbc4d9b3b743721c455d","2008-06-09 18:03:11+00:00","endianess fixes

svn-id: r32639
"
"4d7798825cc287695e70ad9669e72fe317c6a9e0","2008-06-09 22:26:05+00:00","TOUCHE: Reverted some comments that were used for testing purposes

svn-id: r32641
"
"4fddafa3e6ef1c250804ea6ce9baaf2a911027e8","2008-06-09 23:15:17+00:00","Implemented popAllCursors() in CursorManager to ensure that all unnecessary cursors are removed from the cursor stack when returning to the launcher

svn-id: r32642
"
"930ba6d02dcec38c065f5a8da56cdd74db8e5862","2008-06-10 18:54:32+00:00","drawSurface1 -> bgSurface

svn-id: r32644
"
"c51b11e86269acddd77acf903cdc3fc60dc2205f","2008-06-10 18:56:59+00:00","verbo -> verb

svn-id: r32645
"
"3823a23b70ccb7346563e2d46ae3c12acb786712","2008-06-10 19:08:53+00:00","Objectified the Delphine decompression routine (i.e. delphineUnpack).

svn-id: r32646
"
"e03bd801d6606b17b792356aece75cf5d2d3eb8c","2008-06-10 20:19:44+00:00","Fixed character walking in room 14 (the bar, right after BJ is kidnapped). This should fix the issues with the pianist in bug report #1979989 - 'DRASCULA : Lip sync error when talking to pianist'

svn-id: r32648
"
"fdf3f36bc6e22d1934e97852c7709ff39867ba5f","2008-06-10 20:57:22+00:00","Properly renamed some of the functions in the Delphine unpacker after understanding what they really do.

svn-id: r32649
"
"985903a071cbf494ef5421f4e3718f101e7e5bcf","2008-06-10 21:06:39+00:00","Use the array sizes loaded from drascula.dat, instead of ARRAYSIZE

svn-id: r32650
"
"bdfdf0e7b355092aff80fe952ba4d1712a4293fe","2008-06-10 21:07:11+00:00","The static arrays in drascula.dat contain signed integers as well

svn-id: r32651
"
"7453cf8b0b297b8a8e5b0dec13405ccc924abf8b","2008-06-10 21:14:38+00:00","Write signed values as signed (the actual contents of drascula.dat remain unchanged)

svn-id: r32652
"
"420d29932b31457eb840e19979abea35bc96770c","2008-06-10 21:34:26+00:00","unpackerHelper2(numBits) -> copyRelocatesBytes(offset, numBytes) and some revising of the unpacking routine.

svn-id: r32653
"
"8b560107121542fa90e9ce928a9e4a1ca2899c1a","2008-06-10 21:40:53+00:00","Removed unneeded #include

svn-id: r32654
"
"009e26f813ca1eeb8f8c973b0d3f3e1ce66f26fd","2008-06-10 21:44:59+00:00","Changed unpackHelper1(numBits, addCount) to unpackBytes(numBytes).

svn-id: r32655
"
"52747ff694c0f5110c33e7f970f4f8c13742a60d","2008-06-10 21:50:07+00:00","Re-enabled default Hash<String> template

svn-id: r32656
"
"b652c201148424a875d12bb73a252bcbacb593d3","2008-06-10 22:14:47+00:00","Fixed regression in the pendulum room, preventing the player from selecting John's hands (new version of drascula.dat needed)

svn-id: r32657
"
"d7007361f71bdad2b498a5b32a62435c002bec9c","2008-06-10 22:15:47+00:00","New version of create_drascula, fixing the problem in the pendulum room

svn-id: r32658
"
"235504e60000f3c74c262b9b54fcb4cc9ff6f126","2008-06-10 22:16:10+00:00","New version of drascula.dat, fixing the problem in the pendulum room

svn-id: r32659
"
"efc4fd7ae0f106f2cfe9d9109b3331604f97be9c","2008-06-10 22:37:55+00:00","A little Delphine unpacker documentation addition and variable renaming.

svn-id: r32660
"
"6fa6a2fbca658aae9296ee872489543f46074b5d","2008-06-10 22:41:41+00:00","Pressing enter when entering the name of a save game should save that game

svn-id: r32661
"
"41ee9025ca1b88bdb5410dd87dfe8c90aadb8731","2008-06-10 23:13:28+00:00","Small cleanup (mainly removed useless variables and defines)

svn-id: r32662
"
"fefad792495e0fbd45d120a83b19090e3b7a0cf3","2008-06-11 06:00:56+00:00","No need to specify CaseSensitiveString_Hash explicitly anymore

svn-id: r32663
"
"42427f9a4ec2ec768d355729bbdd77f52ddb37b9","2008-06-11 06:22:02+00:00","Modified mass detector to not re-add already configured games (that is, if there is an existing entry with identical path, gameid, platform, language, then do not add a new one)

svn-id: r32664
"
"7186c3bd1bbb1fa9719ed363380ce961f09f133c","2008-06-11 11:06:07+00:00","Documented CineUnpacker class.

svn-id: r32665
"
"33fd755a0ebab6d3ca4e877b15c4d3d7d25877f9","2008-06-11 11:29:34+00:00","use kMaxChannelVolume instead of hardcoding 255

svn-id: r32666
"
"e86a422e252ade394ca796cae767c4d3221d3c4a","2008-06-11 17:36:21+00:00","Merged revisions 32564-32565,32567-32575,32577,32579-32594,32596-32603,32605-32639,32644-32646,32648-32666 via svnmerge from
https://scummvm.svn.sourceforge.net/svnroot/scummvm/scummvm/trunk

svn-id: r32667
"
"555ddf9f9540bd1d62e0b2affbff4b62c284d9d1","2008-06-12 11:01:08+00:00","Updated script dumper to show opcode offset.

svn-id: r32668
"
"fb31c62ad82c26b17ec8f95c33f532eca1deba62","2008-06-12 11:09:04+00:00","- Added support for Rodney's Fun Screen
- Added audio cd playback (still kinda broken though)
- Renamed getObjectPropertyPtr to findObjectProperty

svn-id: r32669
"
"dd423f803b43a0e6c54c3d7441c40cb7737d7867","2008-06-12 16:58:02+00:00","SAGA: Fixed memory leaks in the SAGA engine

svn-id: r32673
"
"a596879c8ead93bc3dd8e812103d78819dd2a81a","2008-06-12 18:11:09+00:00","LURE: Fixed memory leaks in the LURE engine

svn-id: r32675
"
"46681407ab8788461546af1bda99b9c3c7859ffa","2008-06-12 18:33:34+00:00","Fixing compilation

svn-id: r32676
"
"101105315e2c036c6edc2c5f2932eac8837fe14a","2008-06-12 18:52:43+00:00","CINE: Fixed memory leaks in the CINE engine

svn-id: r32677
"
"ad99e9b24989719b0da35e4162ea57982fd89a0a","2008-06-12 19:34:32+00:00","AGOS: Fixed a memory leak in the AGOS engine

svn-id: r32679
"
"45525e7d187572d876636a8f82c57d768912d000","2008-06-12 19:43:54+00:00","SCUMM: Fixed a memory leak in the SCUMM engine

svn-id: r32680
"
"d7d9348243ea203c88a5798c2cbbc70c0ee93ba4","2008-06-13 05:57:07+00:00","Made CineUnpacker::unpack more robust & secure. It shouldn't crash now with any input (Before making reading or writing operations they are checked to be in bounds). Also updated some comments and added some error message(s).

svn-id: r32687
"
"1a6841c92f78e18e489cb8bdca7caf6d7ddfa974","2008-06-13 08:28:14+00:00","More documentation for CineUnpacker-class (Practically done documenting now). Also changed parameter and return value types to a more uniform style (uint16 -> uint, int -> uint where applicable etc).

svn-id: r32688
"
"2b94f217449374289444f6d37ed0e676a6e80098","2008-06-13 08:37:03+00:00","Small cleanup (uint16 -> uint where still applicable).

svn-id: r32689
"
"177993b14530e8c4af6d46be62a11b02719accb9","2008-06-13 14:30:47+00:00","Renamed MIDI plugins to Music plugins

svn-id: r32693
"
"8eac3569462c71fdcb7d4d23684a8d5ee34dc8b8","2008-06-13 16:04:43+00:00","Added initial interface to list music devices and their types

svn-id: r32695
"
"256036d4afacbf2b8c7b46ae62e216b2638c92bf","2008-06-14 04:52:10+00:00","Fixed ALSA's invalid port error message

svn-id: r32698
"
"2e3077b3cbdc256f2c534e2b2435c3ea2367ab79","2008-06-14 11:17:16+00:00","Disable drawObject type 0x41, which is currently causing frequent crashes.

svn-id: r32699
"
"91d3ea31359950b59ee46af8355cc0f5790257e5","2008-06-14 11:23:29+00:00","Revert last commit.

svn-id: r32700
"
"9072c080ff1f1f241bac8474f113a6c3cc563ca5","2008-06-14 14:44:06+00:00","Updated MS Visual Studio project files for MusicPlugin.

svn-id: r32701
"
"bc01acd18f6a0fae36497826d3a21baf3fec958d","2008-06-15 07:15:58+00:00","Make null plugin compilable

svn-id: r32705
"
"23fc803dad8d1e223c1a43fab076056e62fe201b","2008-06-16 17:34:58+00:00","AGOS: Found a system->quit(), changed to _quit=true

svn-id: r32718
"
"7009aae8930835221677e71f085841abf66c0151","2008-06-16 18:47:32+00:00","Fixed a problem where the function that I previously implemented, popAllCursors(), was causing the mouse cursor to disapear

svn-id: r32719
"
"37a7a572cff7c3648f23fab42d45e98c21942d20","2008-06-16 19:06:48+00:00","Merged revisions 32668-32669,32676,32687-32689,32693,32695,32698-32701,32705 via svnmerge from
https://scummvm.svn.sourceforge.net/svnroot/scummvm/scummvm/trunk

svn-id: r32720
"
"8cb11a808a95a88c0a1f3542804e26dbc17d076a","2008-06-16 19:55:59+00:00","Cleaned up some unnecessary comments

svn-id: r32721
"
"cca355acd73ca648309714ba2185876aea8eda23","2008-06-17 18:27:03+00:00","Removed duplicate code

svn-id: r32727
"
"8541fb51480c6748f06f1647f38d98a2aa00b9b6","2008-06-17 21:52:58+00:00","Possible fix for bug  #1979086 - 'DRASCULA: Wrong language detection(?) and crash'

svn-id: r32728
"
"9b910eedba4b7f01e9b0aa7c90831904409ba98a","2008-06-18 03:31:13+00:00","Fixed a small discrepancy in Delphine unpacker's command 00b's documentation (Parameter range is 1..8, not 1..9).

svn-id: r32730
"
"7bceafb3f2cff0f80b5b489d21e8bff90ddb5fbe","2008-06-18 11:01:51+00:00","- Fixed sprite drawing in Rodney's Funscreen
- Handle mouse button up events and event number fixes in MadeEngine::handleEvents()
- Use milliseconds -> game ticks calculation based on Windows version of the original engine
- 'Rodney's Fun Screen' -> 'Rodney's Funscreen'

svn-id: r32731
"
"07bcb5179ccad90d18a9e5a8f3c86d9d7ee3f910","2008-06-18 21:02:52+00:00","Renamed M4Surface::empty() to clear() (two reason: empty is not a verb, and in class String it is used for a bool property)

svn-id: r32733
"
"f1b0e379d1977df831bfd3659d73fa57588a0279","2008-06-19 16:27:49+00:00","Only try playing object videos when the game version supports that (only Woodruff, for now)

svn-id: r32737
"
"0c6c7de3554a65a22324a0aa89b111aa7f2fa79f","2008-06-19 22:54:17+00:00","Fixed a palette issue in Lost in Time

svn-id: r32738
"
"6dce28e166865dd8c892e0e298ed6abcdc1042bd","2008-06-20 19:38:38+00:00","Reverting changes to codeblocks layouts made in revision 31992

svn-id: r32739
"
"8ce5dcc8e84cbd1e58437cebabd129760a873900","2008-06-20 20:20:46+00:00","Merged revisions 31992,32088,32094,32129,32203,32208,32219,32236,32329,32332-32333,32357,32504,32519,32525,32566,32578,32641-32642,32673,32675,32677,32679-32680,32718-32719,32721,32739 via svnmerge from
https://scummvm.svn.sourceforge.net/svnroot/scummvm/scummvm/branches/gsoc2008-rtl

........
r31992 | cpage88 | 2008-05-10 18:44:46 -0500 (Sat, 10 May 2008) | 1 line

Modified game loop to return to launcher, codeblocks layouts update 1.5->1.6
........
r32088 | cpage88 | 2008-05-13 11:09:57 -0500 (Tue, 13 May 2008) | 1 line

used memmove() instead of memcpy() to fix memory overlap error
........
r32094 | cpage88 | 2008-05-13 17:59:19 -0500 (Tue, 13 May 2008) | 1 line

Fixed memory leak by deallocating memory used by window->iconPtr
........
r32129 | cpage88 | 2008-05-14 18:26:32 -0500 (Wed, 14 May 2008) | 1 line

Fixed memory leak when returning to launcher in AGOS engine by properly creating and deleting midi driver pointer
........
r32203 | cpage88 | 2008-05-20 16:40:53 -0500 (Tue, 20 May 2008) | 1 line

AGOS Engine: Began implementation for a new quit event which will cleanly return to the launcher.  This replaces the old shutdown() method within delay()
........
r32208 | cpage88 | 2008-05-21 13:52:27 -0500 (Wed, 21 May 2008) | 1 line

AGOS: Fixed two memory leaks when returning to the launcher (_mouseData and _zoneBuffers)
........
r32219 | cpage88 | 2008-05-22 18:40:36 -0500 (Thu, 22 May 2008) | 1 line

AGOS: Fixed a memory leak from earlier in a better way
........
r32236 | cpage88 | 2008-05-23 19:08:13 -0500 (Fri, 23 May 2008) | 1 line

AGI: Fixed two memory leaks when returning to launcher from AGI Engine
........
r32329 | cpage88 | 2008-05-27 15:15:36 -0500 (Tue, 27 May 2008) | 1 line

AGI: Modified AGI Engine to shutdown without using system->quit
........
r32332 | cpage88 | 2008-05-27 18:26:48 -0500 (Tue, 27 May 2008) | 1 line

CINE: Fixed two memory leaks when shutting down the CINE engine
........
r32333 | cpage88 | 2008-05-27 19:52:45 -0500 (Tue, 27 May 2008) | 1 line

CINE: Initialize exitEngine to 0 in mainLoop() to allow replay after returning to the launcher
........
r32357 | cpage88 | 2008-05-28 18:28:11 -0500 (Wed, 28 May 2008) | 1 line

LURE: Fixed some memory leaks when returning to the launcher from the LURE engine
........
r32504 | cpage88 | 2008-06-02 16:08:49 -0500 (Mon, 02 Jun 2008) | 1 line

PARA: Got rid of calls to system->quit() so that the Parallaction engine can return to the launcher.  Also fixed a couple of memory leaks.
........
r32519 | cpage88 | 2008-06-03 13:24:54 -0500 (Tue, 03 Jun 2008) | 1 line

PARA: Fixed some memory leaks
........
r32525 | cpage88 | 2008-06-04 00:21:47 -0500 (Wed, 04 Jun 2008) | 1 line

QUEEN: Modified engine to use a quit flag instead of system->quit() in order to return to the launcher
........
r32566 | cpage88 | 2008-06-05 19:34:47 -0500 (Thu, 05 Jun 2008) | 1 line

TOUCHE: Fixed a memory leak
........
r32578 | cpage88 | 2008-06-06 11:40:39 -0500 (Fri, 06 Jun 2008) | 1 line

SKY: Fixed a memory leak in SKY engine
........
r32641 | cpage88 | 2008-06-09 17:26:05 -0500 (Mon, 09 Jun 2008) | 1 line

TOUCHE: Reverted some comments that were used for testing purposes
........
r32642 | cpage88 | 2008-06-09 18:15:17 -0500 (Mon, 09 Jun 2008) | 1 line

Implemented popAllCursors() in CursorManager to ensure that all unnecessary cursors are removed from the cursor stack when returning to the launcher
........
r32673 | cpage88 | 2008-06-12 11:58:02 -0500 (Thu, 12 Jun 2008) | 1 line

SAGA: Fixed memory leaks in the SAGA engine
........
r32675 | cpage88 | 2008-06-12 13:11:09 -0500 (Thu, 12 Jun 2008) | 1 line

LURE: Fixed memory leaks in the LURE engine
........
r32677 | cpage88 | 2008-06-12 13:52:43 -0500 (Thu, 12 Jun 2008) | 1 line

CINE: Fixed memory leaks in the CINE engine
........
r32679 | cpage88 | 2008-06-12 14:34:32 -0500 (Thu, 12 Jun 2008) | 1 line

AGOS: Fixed a memory leak in the AGOS engine
........
r32680 | cpage88 | 2008-06-12 14:43:54 -0500 (Thu, 12 Jun 2008) | 1 line

SCUMM: Fixed a memory leak in the SCUMM engine
........
r32718 | cpage88 | 2008-06-16 12:34:58 -0500 (Mon, 16 Jun 2008) | 1 line

AGOS: Found a system->quit(), changed to _quit=true
........
r32719 | cpage88 | 2008-06-16 13:47:32 -0500 (Mon, 16 Jun 2008) | 1 line

Fixed a problem where the function that I previously implemented, popAllCursors(), was causing the mouse cursor to disapear
........
r32721 | cpage88 | 2008-06-16 14:55:59 -0500 (Mon, 16 Jun 2008) | 1 line

Cleaned up some unnecessary comments
........
r32739 | cpage88 | 2008-06-20 14:38:38 -0500 (Fri, 20 Jun 2008) | 1 line

Reverting changes to codeblocks layouts made in revision 31992
........

svn-id: r32742
"
"446f66807f078b574cb31d87bebdcff2f55953fa","2008-06-22 05:42:22+00:00","Circular references between Zone/Animation and Command are now manually removed, to allow the objects - which are stored into SharedPtr's - to be deallocated.

svn-id: r32744
"
"c67b91437673e070119c782a33b070083c3d7f27","2008-06-22 10:26:18+00:00","Disabled return to launcher on trunk again

svn-id: r32745
"
"cc72a3b6b0a5a2ce5d1c6c1938776f3791b28737","2008-06-22 10:29:36+00:00","Updated NEWS about Drascula support

svn-id: r32747
"
"3be9449e6730ec296091e7caaf5dd8f277d95bc9","2008-06-22 12:31:05+00:00","this should fix bug #1997149: KYRA2: no text in spellbook

svn-id: r32750
"
"12d7a5e679683f537d35075a5f67e57817621102","2008-06-22 12:36:38+00:00","Cleanup.

svn-id: r32751
"
"5c8a93b4864f66a896735caee6ef8be29d301820","2008-06-22 12:39:40+00:00","Update comment.

svn-id: r32752
"
"6360c392f25d880f8905dedaee0f34889817acaf","2008-06-22 12:41:46+00:00","missed this in last commit (bug fix for #1997149)

svn-id: r32753
"
"51000de1626090ac61ace8fa9bbfe233117219cc","2008-06-22 12:43:32+00:00","Cleanup.

svn-id: r32754
"
"d2ce91298958e3e2ca98577d27ca630e06314cb7","2008-06-22 13:26:22+00:00","Fixed getTotalPlayTime implementation for MP3InputStream.

svn-id: r32755
"
"4e2e46f16cd6480edc3509edfe4b49bde0268756","2008-06-22 14:31:45+00:00","Fixed leak when loading sounds for Amiga version of Nippon Safes.

svn-id: r32756
"
"d2609258ccaf536cc4178d1e9c690ad472ae877c","2008-06-22 14:46:08+00:00","Added constructor and destructor to Dialogue, thus fixing a long standing leak.

svn-id: r32757
"
"9194f391854466dd5c54341fcc6ba1d5f4ca6eaa","2008-06-22 17:36:14+00:00","Fixed 2 MSVC warnings (potentially undefined behavior and possibly uninitialized variable used)

svn-id: r32758
"
"0b58aea011b248e35236c3e6c24858f5f2071c42","2008-06-22 17:57:06+00:00","Turned off overzealous warning 4800 - 'forcing value to bool 'true' or 'false' (performance warning)'

svn-id: r32759
"
"28e32bb7cb6df6610e137500c0187d4ba36d8bdf","2008-06-24 13:21:22+00:00","Fix for bug #2001193. Character confirmation screen didn't appear and game crashed because too many strings were added to the draw list.

svn-id: r32762
"
"df1aa7809aad2a6b0404d57aeb9d0c5a423fd91b","2008-06-24 13:59:48+00:00","Added const to some static data.

svn-id: r32763
"
"eb598b77baaaf54de5e39b226e47567e0db23ae9","2008-06-24 14:23:26+00:00","Fixed mktemp usage in BSD systems (as noted in bug #2000931)

svn-id: r32764
"
"f1cacafc466ac8689a286d1e712f0ada67e9a994","2008-06-24 20:44:37+00:00","Fixed opcodes:
- 0xA0: o2_addGfxElementType20 (Was o2_addGfxElementA0)
Implemented opcodes:
- 0xA1: o2_removeGfxElementType20 (Was o2_removeGfxElementA0)
- 0xA2: o2_addGfxElementType21 (Was o2_opA2)
- 0xA3: o2_removeGfxElementType21 (Was o2_opA3)
NOTE: Drawing of type 21 overlay elements isn't coded yet.

svn-id: r32769
"
"9654ee4fa3e6ba5fab6fda321542e150a27193b8","2008-06-25 08:36:07+00:00","Possible fix for (for the drascula engine) for bug #2001583 - 'WINCE: CRUISE and DRASCULA engines can not be compiled'

svn-id: r32777
"
"ef07d7e8a770f9ecd85d0915782775481acfef92","2008-06-25 12:02:34+00:00","Added patch from bug report #2001189 - 'DRASCULA: Wrong intro music in Spanish version'

svn-id: r32783
"
"a2e6f35310b7f4fc4f4a1aa6ca3d5e7ab618b85d","2008-06-25 15:09:24+00:00","Implemented opcode:
- 0x8D: o2_op8D (Didn't come up with a descriptive name yet)
Compares ranges of x, y and mask parameters between two objects.
Possibly some kind of an intersection testing function?

svn-id: r32785
"
"d5d09208b4a03eb55697d8831bf87ba8a43385ec","2008-06-25 17:14:44+00:00","Implemented opcode:
- 0x82: o2_modifySeqListElement (Was o2_op82)
Seeks a matching element from the seqList and modifies its values.

svn-id: r32786
"
"dee147eebfce779b834b98b81cdad4e76b3fd984","2008-06-25 18:51:44+00:00","Added FIXME about the broken implementation of opcode 0x9A (o2_wasZoneChecked).

svn-id: r32789
"
"1339a55389efa97e484457a8963b69364a98452d","2008-06-25 21:57:08+00:00","Implemented support for zoneQuery (Operation Stealth specific).
Fixed opcodes (related to zoneQuery):
- 0x08: o1_checkCollision
- 0x9A: o2_wasZoneChecked
NOTE: Savegame support for the zoneQuery data is broken

svn-id: r32790
"
"1d71ab7e1fcf8d1545a9e508c4e21dc10ced2270","2008-06-25 22:13:18+00:00","Fix for GCC warning (Warned about testing x >= 0 when x is unsigned and therefore the test is always true).

svn-id: r32791
"
"b6adcca897963aae66ea68eac043f845500e11b1","2008-06-26 10:12:12+00:00","moved midi driver object creation to MidiPlayer class (to match delete call)

svn-id: r32798
"
"358d2ec44ab9a3d98afcf8419b1613c018688d0b","2008-06-26 10:12:47+00:00","fix possible oob access

svn-id: r32799
"
"68c598a3f3ad904dab66a2219d97af9eb5a02ccd","2008-06-26 15:16:15+00:00","Comments update.

svn-id: r32801
"
"d7051a8ef7e9569bb0d13ef437c6605ce4dbe1cc","2008-06-26 15:44:26+00:00","Comments update.

svn-id: r32802
"
"fafda89d0c53a2ac9b0521c1e4549388f14ccea0","2008-06-26 16:51:02+00:00","Fixed Symbian buildsystem for new defines. Fixed ARM asm syntax for Symbian build.

svn-id: r32803
"
"971f27beb27cd853df7f20dbd21dc92e88b3f697","2008-06-26 17:29:21+00:00","Fixed opcode:
- 0x83: o2_isSeqRunning (Should it be named o2_isSeqNotRunning?)
-- Added previously missing test part
-- Negated the result (It was backwards before!)

svn-id: r32804
"
"dcca78074488d314215bb1485ca9576335bca2fd","2008-06-26 18:31:33+00:00","Changed default paths

svn-id: r32805
"
"73b155d087ac7f640b3df7697a72d0857125a21e","2008-06-26 18:45:46+00:00","Remove inclusion of .o in mmp.in

svn-id: r32806
"
"7b30081be292d793914e44939923a67c2745b914","2008-06-26 19:42:59+00:00","- improved hof music support for fm-towns (driver for *.twn tracks) (still needs quite some work)
- some PC-98 music support since it uses a very similar driver, but this can't be considered working yet)
- Kyra 1 PC-98 music doen't work at all since I haven't figured out yet how to turn track numbers into the corresponding music file names (might require a hard coded track map)

svn-id: r32807
"
"41dfebc5322a21192b29817662dff290410680b6","2008-06-26 19:56:18+00:00","Fixing compilation for me. There are still lots of 'cast casts away constness' warnings, though

svn-id: r32809
"
"6cdb04f9404b57d2ce92a227b18ec4bc32567bce","2008-06-26 20:13:04+00:00","cleanup

svn-id: r32810
"
"b695cb74ca3c4e3fe671e670f70d18d503df953c","2008-06-26 20:30:43+00:00","more cleanup

svn-id: r32811
"
"0bea51974e4173cd7432348c334a6bb49f4aca6f","2008-06-26 20:43:23+00:00","fix bad const casts

svn-id: r32812
"
"8cd03780f68a8558fd6b816629b0c2e3c9517a41","2008-06-26 23:30:45+00:00","Implemented Operation Stealth's version of addOverlay(objectIndex, overlayType).

svn-id: r32816
"
"b6ad2b00350dffbc4051f3d5eb27b9ce5cb198c4","2008-06-27 09:57:38+00:00","- Fixed umlauts in printText
- Don't exit when a pmv video couldn't be found

svn-id: r32817
"
"e97dff9f33697fac6741a74c02e1034fb126a304","2008-06-28 13:13:37+00:00","- HOF: bug fix for music driver
- KYRA1 PC98: fix music file selection

svn-id: r32819
"
"e6e56feb1c61e9d4edb6032e9b759f9875ef00af","2008-06-28 13:31:58+00:00","Added comment for fix for bug #2001193.

svn-id: r32820
"
"09247e7e5a5a78d050b716365a22dc9ccb61b078","2008-06-28 13:40:03+00:00","hof: remove debug code

svn-id: r32821
"
"ad447b6f3912d99a0d24575571203a78186ad2b9","2008-06-28 13:53:39+00:00","add getFilesystemFactory() method to null backend

svn-id: r32823
"
"62713a8b1b8dc002104cb53accbb5604948366f3","2008-06-28 14:14:16+00:00","Removed OSystem::getFilesystemFactory() default implentation, as announced

svn-id: r32824
"
"861cf07522540222198f143ee480f6682df9f11f","2008-06-28 15:00:27+00:00","Removed dead X11 backend

svn-id: r32825
"
"3b1a60c3b23fa509cb2a9d3f2f85eb4d9997724b","2008-06-28 15:13:54+00:00","Removed obsolete ::clearSoundCallback() code

svn-id: r32826
"
"e68efca5a19fd738a78a61ea21efd19280521f31","2008-06-28 15:27:40+00:00","Doxygenified a comment

svn-id: r32827
"
"c45d632f3b8c2d8c8aa46b05db758898de863e97","2008-06-28 15:28:29+00:00","Patch ##1956946 (Audio::Mixer internal API revision) with some tweaks

svn-id: r32828
"
"3f878008dacf420fe48615fd45ae732dc13b1a54","2008-06-28 15:36:50+00:00","- implement music fading for Hof FM-Towns

svn-id: r32829
"
"0184a7b0f9a5bbe4946c2e854f5cbe3c92457474","2008-06-28 16:00:04+00:00","Fixed warning. (Hopefully without breaking anything.)

svn-id: r32830
"
"7a9e911896885750566a3c21e794823e4527f78a","2008-06-28 22:16:51+00:00","Set $(DEPDIR).

svn-id: r32832
"
"d8645297cd174fbbd7059a317975c45adefaa5e5","2008-06-29 09:30:32+00:00","Changed all remaining code to use the GfxObj class to keep frames data. This allows for more uniform processing during rendering, and also fixes the display of dialogue faces for BRA.

svn-id: r32833
"
"206485ffc676c64134774b9873cd8d333deddfee","2008-06-29 09:56:44+00:00","Merged the three render lists (for animations, doors and objects) into a single one.

svn-id: r32834
"
"86706eb7d7c4a208925beebe5da59c02b8a6f34d","2008-06-29 10:16:20+00:00","Small GP2X tidy (mostly svn:executable on scripts) and fixes needed to reflect 'Patch ##1956946 (Audio::Mixer internal API revision)'

svn-id: r32835
"
"3f22509321873455cde9723f74fe23ba37f2f675","2008-06-29 11:51:47+00:00","New Mixer API.

svn-id: r32836
"
"4b09d0829242888a064acfe7f3cc5f6a947b5872","2008-06-29 12:10:38+00:00","Updated to use new EngineMan.detectGames() API.

svn-id: r32838
"
"76769bf5154059888bee246ef4552c263e595768","2008-06-29 14:40:41+00:00","finish up new mixer changes

svn-id: r32839
"
"20a50f523ebda59afb24badf12dd3b88b92702ff","2008-06-29 14:41:44+00:00","fix some quirks of the newer build system

svn-id: r32840
"
"b0e22db7a89a27a7f9c09870fded7a64042293c7","2008-06-29 15:25:45+00:00","- some more work on the Hof FM-Towns/PC98 music driver
- move channels to a separate class

svn-id: r32841
"
"f5f97f424569d45987b73414847bda5e009f1f00","2008-06-29 15:59:35+00:00","cleanup

svn-id: r32842
"
"cbf00ff5654ba1719a35ac139035e55d62b2fea0","2008-06-29 16:07:29+00:00","fix warning

svn-id: r32843
"
"f0df79bb88b61140999afd7af36bf25b34b35e46","2008-06-29 16:58:27+00:00","adding a fixme

svn-id: r32844
"
"0a3d03797a29203d8ea3970b54a893d9ac53e20d","2008-06-29 23:36:44+00:00","changes required for new mixer API + implement getMillis() and delayMillis() using gettimeofday() and usleep() resp.

svn-id: r32846
"
"2779b851ab4328bce306b58e49df515bca58f1ab","2008-06-30 01:36:50+00:00","Small cleanup/shuffling of Gfx code.

svn-id: r32847
"
"ecbf8d54ad78dac70f7838e7546196b3bb232c5a","2008-06-30 03:33:08+00:00","Implemented resetGfxEntityEntry and made it used where appropriate (The function wasn't very easy to reverse engineer so it may have flaws still, but let's hope it doesn't ;-)).

svn-id: r32848
"
"63c0dde2ef48ca7751e888e257e00d822951a01b","2008-06-30 08:46:20+00:00","Updated MSVC project files for commit #32828

svn-id: r32849
"
"2ecf8fdbb5a0141ea43a7d2074a2a7356182f12c","2008-06-30 17:24:23+00:00","Fixed addAni (A test before using resetGfxEntityEntry was incorrect). Also added comments and checked that most 8-bit values used in this function are used as signed integers.

svn-id: r32850
"
"e415a97fe53a3eec537d7d67760af45730ec91fd","2008-06-30 18:15:34+00:00","Removed TODO from checkCollision: Updating zoneQuery each time checkCollision is called seems to be fine.

svn-id: r32852
"
"f530c36ad44d9605f65547d6b65127c97f8ea5b8","2008-06-30 19:10:32+00:00","del instead of rm command

svn-id: r32853
"
"b07ff576233dec6e2138f19a5cf053e2ccf146df","2008-06-30 21:55:08+00:00","- this fixes Hof PC98 music initialization
- music sounds exactly like FM-Towns for now

svn-id: r32854
"
"e06e5525648d2dbedeaf42d6d49f7b906d1e4b5d","2008-06-30 22:52:48+00:00","Modified main.cpp for indefinite delay at console for testing.
Modified scummvm.vcproj to ignore warnings.

svn-id: r32856
"
"cef7d68fc531dbaac68c2b83a340bfbb3dcf142e","2008-06-30 23:39:56+00:00","Added support for Spanish fan translation of kyra3 (See fr #1994040 'KYRA3: Add support for Spanish fan translation').

svn-id: r32858
"
"34a49d4a5acd1e5c71bf3f37b829e37390b3c5e1","2008-06-30 23:44:33+00:00","Fix game flags for detection entries of installed kyra3 versions.

svn-id: r32859
"
"ec5cd5d013d200437815111ab387e5fe1336e4c6","2008-06-30 23:48:24+00:00","Merged from trunk via svnmerge.

svn-id: r32860
"
"3d85c26a060b13acfed749bd81b1a3622a77355c","2008-07-01 00:28:38+00:00","TFMX class. Members + functions still need to be revised as things progress.
Load() implemented. Basic readTrackstep() implemented with work in progress.

svn-id: r32861
"
"84fa2504f12567737f461936a60b2c4ed286e185","2008-07-01 01:55:40+00:00","Basic setup of readPattern() in place. Added some comments/ideas. Some small changes.

svn-id: r32862
"
"bd296a45fa2ad9c08b096c50cf53ecbcd94a36a5","2008-07-01 10:33:25+00:00","Fixed unitialized variables

svn-id: r32865
"
"871c84c173e7a81e0103b0a188c9c450460fdadb","2008-07-01 11:46:29+00:00","Made corrections to the Italian strings

svn-id: r32866
"
"27e5aba5fd5634908c837d64d1e5bd7636020de0","2008-07-01 11:48:06+00:00","New lure.dat with corrections to the Italian strings

svn-id: r32867
"
"6dc312b9e1ffbfc92452ebdeee8f3f703f07f7fa","2008-07-01 14:51:44+00:00","Reverted accidental commit of Tinsel changes in engines.mk

svn-id: r32868
"
"c782d0e42bce818aa4ca473fc689a9faf8abec62","2008-07-01 18:59:11+00:00","Changes to readTrackstep(). Setup tracks[] array with preliminary track structure.

svn-id: r32870
"
"1fbcdd1e1aafe1c4127f59db4f48524f700e5392","2008-07-01 23:56:02+00:00","Few changes to readTrackstep() to check for certain flags. Some work on readPattern().

svn-id: r32871
"
"77a60673ef970ec32fc2e4db09aa5ac534481c8d","2008-07-02 01:41:08+00:00","- Changed labels to be GfxObj's, thus removing the Label object altogether.
- Changed Item's to be almost GfxObj's, since ownership and destruction of underlying resource is an issue here (got to think some more about it).

svn-id: r32873
"
"18559708c620b82f05c490e0ff118a02611730dd","2008-07-02 04:31:50+00:00","Fully implemented processSeqListElement
- Added parts that were missing and fixed a couple of errors
-- One test was backwards and a global variable was written to when it shouldn't have been
Added global variable inputVar0 that's used in processSeqListElement
NOTE: inputVar0 isn't updated anywhere yet, so that's a TODO

svn-id: r32874
"
"de09845319f43f6bad3582af5d570de43c7f9632","2008-07-03 08:44:29+00:00","Fix for bug #2008054: Parallaction engine doesn't compile under MSVC9

svn-id: r32879
"
"59e672ef40e4c227c27022ec764f8b811b375220","2008-07-03 10:31:25+00:00","Changed balloons to use GfxObj as well. Next step is to integrate balloons for BRA.

svn-id: r32883
"
"56c6840ff72ab38a508aa0f46662ef7c636e410f","2008-07-03 16:25:59+00:00","Fixing a crash when loading a save made within the cult/bargon building (bug #2005965)

svn-id: r32895
"
"d92085b5071b0bb62642d62857e5853006be3b2c","2008-07-03 21:09:07+00:00","minor fix for Towns/PC98 music

svn-id: r32899
"
"d387d1af0ec869700da199578f07e5a0c00968f3","2008-07-04 00:29:21+00:00","- Moved dialogue balloon management code from Gfx to its own class
- Added a class to draw balloons in BRA (still without text and with wrong placement)

svn-id: r32902
"
"60db8cb8cf9b39b591fd5c9d0c754cbc3577b765","2008-07-04 00:35:39+00:00","Correct typo.

svn-id: r32903
"
"6fa152c58a79f74ff53b65a537e45da92ac9d867","2008-07-04 09:38:03+00:00","Updated MSVC project files (Added Parallaction's balloons.cpp).

svn-id: r32904
"
"f8ca1761a7715fc1a69a6027fd00183fc16d600a","2008-07-05 04:28:17+00:00","Mention merge of Chris Page's memory leak plugging code.

svn-id: r32910
"
"357f0c4e3abc23e1a4c711191c1aeca0bfe47000","2008-07-05 07:47:27+00:00","Added spanish menu strings for spanish fan translation of Kyrandia 3.

svn-id: r32911
"
"056288f87a2e5ad5251c81901320b2b14ca22443","2008-07-05 08:20:10+00:00","Added support for Italian fan translation of Kyrandia 3. (see fr#2003504 'KYRA: add support for Italian version of Kyrandia 2&3')

svn-id: r32912
"
"32f653f2b198bc3a5e842636b748d506e79d12ff","2008-07-05 22:53:17+00:00","Enable all engines.

svn-id: r32923
"
"95ca13246eed820a3513ab91a517283a1263cc46","2008-07-06 12:04:19+00:00","adjustments to the recent mixer api changes

svn-id: r32924
"
"1cc9af6b1023d438193587171890bf2ca7d5adbf","2008-07-06 18:37:52+00:00","Implemented Good Enough(TM) XMIDI looping. This is used by Kyrandia 2 (the
loop hack is no longer needed, and has been removed), and will be used by
Discworld.

svn-id: r32930
"
"ae026486ef4c425c930110ac7ca6f97501b1c482","2008-07-06 19:25:32+00:00","Fixed silly error. The NEXT_BREAK event should, of course, jump to the event
*after* the FOR_LOOP event. Apart from simplifying things, this should allow
limited number of repeats to work.

svn-id: r32931
"
"1f4ebd2f477a6b21f47468f47a1dfb4962053363","2008-07-07 13:01:54+00:00","Don't let listSavefiles() search subdirectories. Files with the same name (in different directories) would cause duplicate entries for the same file.

svn-id: r32938
"
"0f8f3d51bba952632eb5ee5926cad8814cd19c74","2008-07-07 14:51:27+00:00","Fixed regression after label code refactoring.

svn-id: r32940
"
"741214b6568abc10992701cc284569c318181e93","2008-07-07 19:40:43+00:00","Some fixes for warnings under GCC 2.95

svn-id: r32948
"
"aee23f36a2b0ed26588c40d96ef0eee53c482d75","2008-07-07 20:40:35+00:00","Fix for bug #2012293 'KYRA: Bad Spanish String in menu'.

svn-id: r32949
"
"e74d01a59a17894a85723db3b9af4dacac659336","2008-07-07 22:02:01+00:00","Fix for bathroom door opening crash in Operation Stealth's start.

svn-id: r32951
"
"dadb771cdcdba41c795053b5115f04109b8fd545","2008-07-08 10:29:35+00:00","Remove reference to kPlainSoundType

svn-id: r32960
"
"03b36a3a544b7ae36e4528bc63039f7f3de475bb","2008-07-08 11:18:44+00:00","Shut couple of MSVC warnings

svn-id: r32961
"
"4a1cc7801661425c0e2eee527e886cd0f6b57263","2008-07-08 11:35:09+00:00","Modified the EGA story image delay to work for the Mac versions as well

svn-id: r32962
"
"da0495cd786b7e8a874024a657e062a49a665fba","2008-07-08 11:36:52+00:00","Added a Gob1 version supplied by raina in the forums.
It does look like the Mac version with a DOS executable and stripped music to me, so let's hope the Mac level image workaround works there as well.

svn-id: r32963
"
"8093dbaf49ae54aac783cdf996911c459aac5468","2008-07-08 11:48:16+00:00","One more MSVC warning

svn-id: r32964
"
"c2c4963e96383b354fb34776f34ca018734c6f9d","2008-07-08 16:25:39+00:00","On reading some more about XMIDI, I believe the NEXT and BREAK variants of the
controller are mutually exclusive cases, i.e. a BREAK simply means forget about
the innermost loop, and continue as if nothing had happened.

svn-id: r32966
"
"926df065f485fc1affa225862febaf88b09e6a1d","2008-07-08 17:20:26+00:00","changes for new Mixer API

svn-id: r32967
"
"65ddc23a6b4e14e3f7f88abe80c9af68a3137478","2008-07-08 17:41:09+00:00","Enable static engines -- time to start thinking about prx/plugin support!

svn-id: r32968
"
"a833c9dd86ab3c5ca3ff93ebce05b4e06ebc733d","2008-07-08 17:46:26+00:00","set DEPDIR

svn-id: r32969
"
"d9f07530092f511eba8f4d38d767849d6a5cdc4a","2008-07-09 02:19:57+00:00","New configure flag --enable-profiling to compile and link with -pg (for
gprof)

svn-id: r32970
"
"a294d222136a72534871d2030f828891762146ed","2008-07-09 02:49:20+00:00","Added a couple of NULLity checks.

svn-id: r32972
"
"d24e7706057aaf5d20c31d6eebf6e55440cfb20a","2008-07-09 10:42:47+00:00","cleanup / code formatting

svn-id: r32973
"
"18b48c74a9de417254badf23744d5c5f73c2966c","2008-07-09 10:52:46+00:00","Fixed regression introduced with GfxObj: the character sprite was sometimes removed from the rendering list.

svn-id: r32974
"
"12cefc4132ddb06ce56efd813c88f50d5e8b19ed","2008-07-09 13:27:09+00:00","Fixed leaks in NS and BRA.

svn-id: r32976
"
"9f96471f47acdcb7687281a563663cd96e3a0788","2008-07-09 16:50:23+00:00","DS: Backend changes for new mixer code

svn-id: r32978
"
"3b935f444ef5aaf59d4aa2a14544aac0ba02ff0a","2008-07-09 23:47:29+00:00","Merged from trunk via svnmerge.

svn-id: r32980
"
"2b24bd03a4bedef045127c4be7ed523462f00d7d","2008-07-09 23:53:28+00:00","Restructured track and pattern handling to update() system which will be called on interrupt.
Adding support for more pattern commands. Reads note data in but does not yet process them.

svn-id: r32981
"
"02962fe5834431a081d416e1d5e50e388c3d6751","2008-07-09 23:59:05+00:00","Merged from trunk via svnmerge.

svn-id: r32982
"
"03cd937b13d5629f84f52b05c6374e5a3373be15","2008-07-10 02:00:54+00:00","Fixed destruction of sprites in BRA.

svn-id: r32983
"
"092d9f38c5080da66b4edc2ec52a204448ab9a4f","2008-07-10 11:25:43+00:00","Workaround for gcc 2.95 compiler bug.

svn-id: r32986
"
"9a34ef702de478611718bc94b4d1bcfc6a922613","2008-07-10 11:28:51+00:00","Fixed mem leak in MIDI related code.

svn-id: r32987
"
"e1e95f0c0edf58553af5f31d33f46f5eb864d168","2008-07-10 12:05:38+00:00","Added filename to unknown opcode/command warnings of EMC scripts.

svn-id: r32988
"
"a117024d23c3d43ee0ced9046fdbf8e866ddc135","2008-07-10 12:12:42+00:00","Added filename to unkown command/opcode warnings for TIM scripts.

svn-id: r32989
"
"985a032871e3296daa2c9cedb4cfabfa9036137d","2008-07-10 12:14:00+00:00","Typo.

svn-id: r32990
"
"c8488c060cea860d02fdf59221408f7974a80eab","2008-07-10 16:19:17+00:00","Fixed Kyra 3 detection regression.

svn-id: r32992
"
"f41ab55021c98e2ae1aee77fa0c1dd45e0475023","2008-07-10 18:01:54+00:00","Fixed a few warnings

svn-id: r32994
"
"fe655836575214c33c82120e9dd714b95a96e475","2008-07-11 12:55:08+00:00","Fixed leak in sound code by explicitly deleting the midi driver.

svn-id: r33002
"
"8ed023142a9ce0ee825eb3d6c33759281d68357b","2008-07-11 13:06:28+00:00","Moved program and command execution code out of the engine, into their own brand new
classes.

svn-id: r33003
"
"273129330a44d1ed00ab6d5de6854ceda9395d5c","2008-07-11 13:13:28+00:00","Update MSVC project files.

svn-id: r33004
"
"8ba56e98cf1887600b204f347af4ee183c326cd1","2008-07-11 13:36:22+00:00","Cleanup.

svn-id: r33006
"
"c829fd3eafa860a6164111282d8746df466e3c18","2008-07-11 15:07:13+00:00","Added a script (courtesy of salty-horse) to create/set properties for source files under version control by Subversion. Specifically, the mime-type, eol-style and keywords properties are handled.

svn-id: r33007
"
"815d75e870bc4d365cfa979f3786840eecece2ec","2008-07-11 20:28:14+00:00","Don't use kPlainSoundType if you don't have to

svn-id: r33009
"
"7ddd961bf2ded1d9cad114ea03018d44258e9ca8","2008-07-11 20:28:50+00:00","cleanup

svn-id: r33010
"
"c1ec21d999253d86513ce66876c692be198b91c0","2008-07-12 15:21:38+00:00","Changed tricky variable access from pointers to a new class that minds endianess.
This should fix a few regressions with BE games on LE systems and vice versa that I introduced when I changed how variables are stored (which was necessary to get Woodruff work on BE systems).

svn-id: r33014
"
"5de579930d9ff33c2e7eeb1c267d3ef61227e558","2008-07-12 20:35:44+00:00","Minor constness fix to help with aliasing

svn-id: r33017
"
"acad4e5b0ec7687fe7936afe617a2b2ca81373ca","2008-07-13 00:58:56+00:00","Added sample loading and interrupt frequency setup.
Note: Some files from trunk are still not versioned/missing so the branch won't compile.

svn-id: r33018
"
"d198ec9debff4430a987141f1166a6634281d2cc","2008-07-13 02:13:48+00:00","Added loader to macro processing function.

svn-id: r33019
"
"b7657e3f7b62ae6c5d917587af9ec2661c123d30","2008-07-13 02:37:47+00:00","Little bit of clean up plus some notes for later.

svn-id: r33020
"
"9c2d96530be10b2f8badb500330f744bd6cdc937","2008-07-13 03:30:14+00:00","Properly implemented the OFF command. The new rendering order for graphics let this mistake finally surface.

svn-id: r33021
"
"2a80bd0678c29787dd9959cf66842f2e0483327e","2008-07-13 03:39:42+00:00","Cleanup and improved debugging output for CommandExec::run()

svn-id: r33022
"
"059936854c897c8090a776a4af23965e72fa48f9","2008-07-13 06:27:31+00:00","Cleanup of walk code.

svn-id: r33023
"
"ba5f14692febafdad9c58be67eb6aa87b9afba2f","2008-07-13 12:20:24+00:00","- fix for bug #2016965: KYRA: does not compile in MSVC71

svn-id: r33030
"
"ef95c6ff70c1b428ab1d086a9b0b551fc82c8451","2008-07-13 13:04:36+00:00","More refactoring of walk code.

svn-id: r33033
"
"7b2645248c0d645266107bd732256c1c541f7278","2008-07-14 00:13:31+00:00","Made sure characters are not removed from the rendering list during switches.

svn-id: r33052
"
"d0ae6885ac34510cea3363b72f9467dbe62de762","2008-07-14 00:21:05+00:00","Fixed regression in walk code. Now standing frames are correctly selected when the character encounters an unexpected blocking object in his/her path.

svn-id: r33053
"
"77dde20692008b7285b10b16427698f3ad481e0e","2008-07-14 07:51:42+00:00","Hooking up tfmx.cpp in our default build system

svn-id: r33055
"
"0860df5d0e42fa8f9059b7f3c212bf3487a2f754","2008-07-14 07:54:18+00:00","Fixed code formatting

svn-id: r33056
"
"eaeb1587f408e540a1449d4b035e794e65937220","2008-07-14 10:33:57+00:00","Fix for missing data in the savegame format that could result in not being able to talk to Goewin in the apothecary after restoring a savegame

svn-id: r33057
"
"c48f3ca8d8341d642690dbeb0207b77ecd58d291","2008-07-14 13:35:43+00:00","Removed all labels from the rendering list to avoid random crashes after introduction is over.

svn-id: r33058
"
"3634d5e8873e2bc0f29340a2653863e13c777575","2008-07-14 18:54:15+00:00","Merged revisions 32983,32986-32990,32992,32994,33002-33004,33006-33007,33009-33010,33014,33017,33021-33023,33030,33033,33052-33053,33056-33058 via svnmerge from
https://scummvm.svn.sourceforge.net/svnroot/scummvm/scummvm/trunk
Also attempted to fix svnmerge issues

........
r32983 | peres001 | 2008-07-10 04:00:54 +0200 (Thu, 10 Jul 2008) | 1 line

Fixed destruction of sprites in BRA.
........
r32986 | lordhoto | 2008-07-10 13:25:43 +0200 (Thu, 10 Jul 2008) | 2 lines

Workaround for gcc 2.95 compiler bug.
........
r32987 | lordhoto | 2008-07-10 13:28:51 +0200 (Thu, 10 Jul 2008) | 2 lines

Fixed mem leak in MIDI related code.
........
r32988 | lordhoto | 2008-07-10 14:05:38 +0200 (Thu, 10 Jul 2008) | 2 lines

Added filename to unknown opcode/command warnings of EMC scripts.
........
r32989 | lordhoto | 2008-07-10 14:12:42 +0200 (Thu, 10 Jul 2008) | 2 lines

Added filename to unkown command/opcode warnings for TIM scripts.
........
r32990 | lordhoto | 2008-07-10 14:14:00 +0200 (Thu, 10 Jul 2008) | 2 lines

Typo.
........
r32992 | eriktorbjorn | 2008-07-10 18:19:17 +0200 (Thu, 10 Jul 2008) | 2 lines

Fixed Kyra 3 detection regression.
........
r32994 | tramboi | 2008-07-10 20:01:54 +0200 (Thu, 10 Jul 2008) | 1 line

Fixed a few warnings
........
r33002 | peres001 | 2008-07-11 14:55:08 +0200 (Fri, 11 Jul 2008) | 2 lines

Fixed leak in sound code by explicitly deleting the midi driver.
........
r33003 | peres001 | 2008-07-11 15:06:28 +0200 (Fri, 11 Jul 2008) | 3 lines

Moved program and command execution code out of the engine, into their own brand new
classes.
........
r33004 | buddha_ | 2008-07-11 15:13:28 +0200 (Fri, 11 Jul 2008) | 1 line

Update MSVC project files.
........
r33006 | peres001 | 2008-07-11 15:36:22 +0200 (Fri, 11 Jul 2008) | 1 line

Cleanup.
........
r33007 | peres001 | 2008-07-11 17:07:13 +0200 (Fri, 11 Jul 2008) | 1 line

Added a script (courtesy of salty-horse) to create/set properties for source files under version control by Subversion. Specifically, the mime-type, eol-style and keywords properties are handled.
........
r33009 | fingolfin | 2008-07-11 22:28:14 +0200 (Fri, 11 Jul 2008) | 1 line

Don't use kPlainSoundType if you don't have to
........
r33010 | fingolfin | 2008-07-11 22:28:50 +0200 (Fri, 11 Jul 2008) | 1 line

cleanup
........
r33014 | drmccoy | 2008-07-12 17:21:38 +0200 (Sat, 12 Jul 2008) | 3 lines

Changed tricky variable access from pointers to a new class that minds endianess.
This should fix a few regressions with BE games on LE systems and vice versa that I introduced when I changed how variables are stored (which was necessary to get Woodruff work on BE systems).
........
r33017 | tramboi | 2008-07-12 22:35:44 +0200 (Sat, 12 Jul 2008) | 2 lines

Minor constness fix to help with aliasing
........
r33021 | peres001 | 2008-07-13 05:30:14 +0200 (Sun, 13 Jul 2008) | 1 line

Properly implemented the OFF command. The new rendering order for graphics let this mistake finally surface.
........
r33022 | peres001 | 2008-07-13 05:39:42 +0200 (Sun, 13 Jul 2008) | 1 line

Cleanup and improved debugging output for CommandExec::run()
........
r33023 | peres001 | 2008-07-13 08:27:31 +0200 (Sun, 13 Jul 2008) | 1 line

Cleanup of walk code.
........
r33030 | athrxx | 2008-07-13 14:20:24 +0200 (Sun, 13 Jul 2008) | 1 line

- fix for bug #2016965: KYRA: does not compile in MSVC71
........
r33033 | peres001 | 2008-07-13 15:04:36 +0200 (Sun, 13 Jul 2008) | 1 line

More refactoring of walk code.
........
r33052 | peres001 | 2008-07-14 02:13:31 +0200 (Mon, 14 Jul 2008) | 1 line

Made sure characters are not removed from the rendering list during switches.
........
r33053 | peres001 | 2008-07-14 02:21:05 +0200 (Mon, 14 Jul 2008) | 1 line

Fixed regression in walk code. Now standing frames are correctly selected when the character encounters an unexpected blocking object in his/her path.
........
r33056 | fingolfin | 2008-07-14 09:54:18 +0200 (Mon, 14 Jul 2008) | 1 line

Fixed code formatting
........
r33057 | dreammaster | 2008-07-14 12:33:57 +0200 (Mon, 14 Jul 2008) | 1 line

Fix for missing data in the savegame format that could result in not being able to talk to Goewin in the apothecary after restoring a savegame
........
r33058 | peres001 | 2008-07-14 15:35:43 +0200 (Mon, 14 Jul 2008) | 1 line

Removed all labels from the rendering list to avoid random crashes after introduction is over.
........

svn-id: r33060
"
"0cb7fa7ce9b538b0620d3733967857b8b9bfc860","2008-07-26 23:19:31+00:00","Adding more macro commands. Trying to fix sample playback.

svn-id: r33320
"
"3d595db44ff8ca6ad88edfb5ab84fd01e2291585","2008-08-06 04:16:45+00:00","Overhauled track update cycle so that it works properly with timing system.
Redesigned structures/variables.
Added separate loadPattern & loadMacro functions.
Added testMacro function to playback individual macros/notes for testing.

svn-id: r33653
"
"17e0994c7e81cc012c3c3b405c2c2864cc8dcce9","2008-08-06 19:53:31+00:00","Fixed small problem with constructor and destructor. Tfmx object will properly delete itself now.

svn-id: r33666
"
"4655939a68c8a652eb810af7a186aaabfc4b4b98","2008-08-13 17:49:31+00:00","Added support for more macros. Some more changes to timing/update system.

svn-id: r33834
"
"f5532cd1018b02f1aeea11349d0a9fde548f52e5","2008-08-13 18:14:51+00:00","Added statement to distinguish between note types.

svn-id: r33835
"
"39fa4c0be0709b6f2b2e0e1257facaae8425eb37","2008-08-14 06:15:18+00:00","Fixed some broken macros. Added console feedback for macro debugging.

svn-id: r33856
"
"5ab38a79c6476bdf1f481b4551a33d7ef879b5e7","2008-08-14 14:57:44+00:00","pattern stepping is mostly accurate, macros are broken

svn-id: r33865
"
"536db407583033cc4daadde45558d4c571305d26","2008-08-14 15:32:50+00:00","initial work on macros

svn-id: r33866
"
"626d69962990de9536c1c23051df2e134b715b3a","2008-08-14 18:18:45+00:00","correct macro execution, initial work for correct playback

svn-id: r33867
"
"ce367b6e982702801faef45f2ee1857d6d63ee55","2008-08-15 19:15:48+00:00","Added doEffects command with support for envelope and vibrato effects and macros.
Added function to test patterns for individual playback.
Adding key-up macro for looping of certain notes.
Don't mind all the printfs!

svn-id: r33912
"
"db574926a36b4b4253c7c9cd1a148c8ccb82f697","2008-08-16 04:41:26+00:00","Added keyUp/looping functionality. Still needs some tweaking.

svn-id: r33925
"
"c174a2a4b9f91c337987f641ef63ba0402f6dd5e","2008-08-16 05:56:02+00:00","Fixed bug with keyUp/looping. Fixed bug with vibrato. Fixed STUPID bug with periods!

svn-id: r33927
"
"a5a3b3d242670f5fa8af36612301ac49a23b7e9d","2008-08-16 06:58:28+00:00","Fixed bug with key-up release.

svn-id: r33929
"
"18fde309a82348e55743d681d9c80024338aaf89","2008-08-18 20:15:40+00:00","Some bugfixes and cleanup. Another bugfix with the key-up coming.

svn-id: r34007
"
"aaee1b750c65ee71b79fb31e73eb4b8075355366","2008-08-19 02:45:12+00:00","Bugfix for the key-up and vibrato.

svn-id: r34017
"
"c0e71c137441d8e9d61d4bae1e34b293075a747b","2008-08-19 03:04:55+00:00","SVN deleted main.cpp last update.

svn-id: r34018
"
