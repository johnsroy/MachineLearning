"commit id","commit date","commit message"
"68469f45ceeb8592020e262d616c98327416120e","2010-11-01 11:25:11+00:00","SWORD2: Cleanup pause handling

Removed a bunch of pause-related code which I either can't remember why
it's there, or which doesn't seem to serve any useful purpose. Most
things I've tried seem to work as well or better than before.

svn-id: r53997
"
"fc0adb846a4aa5de82de475c1ba2270f2210f767","2010-11-01 11:29:57+00:00","SWORD2: Cleanup

Removed some of the debug code that has never ever been enabled for as
long as this engine has been in ScummVM.

svn-id: r53998
"
"4c6eb76d79a958bd6901908b3a002cc71cfc4949","2010-11-01 15:29:06+00:00","HUGO: Make some scheduler functions and variables protected

svn-id: r53999
"
"205fc94848c3682444cb5ab294cc66837af4d2d8","2010-11-01 15:36:31+00:00","GOB: Fix spelling

svn-id: r54000
"
"a1dd7a07a12a0ef3f4ede9d346f590873c83dd2c","2010-11-01 16:00:17+00:00","ENGINES: Remove some 'using' statements

svn-id: r54001
"
"6fa8772baef4e76a1cb4b92c14f2479def8210b5","2010-11-01 16:00:35+00:00","SWORD25: Replace art_warn/art_die by warning/error

svn-id: r54002
"
"7a853650047064fb15720bb58ce7c5eec28ef606","2010-11-01 16:00:53+00:00","COMMON: Change some (f)printf to debug calls; clenaup hashmap.h

svn-id: r54003
"
"e27b05ef358102fd60235a5f78d7d51e9f25a5f4","2010-11-01 16:02:28+00:00","COMMON: Rename String::printf() to String::format()

This is a first step towards getting rid of all uses of regular printf,
fprintf, vprintf, vfprintf, puts, fputs, etc. in our codebase.

The name format() reflects the purpose of the function, and parallels
String.format() in Java, boost::format, and others.

svn-id: r54004
"
"06876671e51df44a5f28ea2c2798d7607b4f2d43","2010-11-01 16:02:47+00:00","SYMBIAN: Trigger a compiler error on systems where __GCC32__ is set, instead of producing incorrect code

svn-id: r54005
"
"2af270442144faec859114bcdce7e5659ac7f24b","2010-11-01 16:03:02+00:00","GUI: Rename ConsolDialog methods (v)printf, putchar

svn-id: r54006
"
"a984fb17c2be039502eff55472dd6a252e5570df","2010-11-01 16:03:35+00:00","GUI: Add GCC_PRINTF to GUI::Debugger::DebugPrintf & fix resulting warnings

svn-id: r54007
"
"0cf64915e11b57f96c6e72518aee13891cf2b76f","2010-11-01 16:03:50+00:00","COMMON: Add debugN variant without level parameter

This makes our various debug*() functions fully symmetric, for now.

svn-id: r54008
"
"f77b8aee7578bc6ad1afee74d5c6c24e56850f05","2010-11-01 16:04:04+00:00","COMMON: Switch ConfigManager::setInt & ConfigManager::registerDefault to use String::format

svn-id: r54009
"
"459ef850684e9f11f2dbb5b129a674048a7cef81","2010-11-01 16:04:18+00:00","COMMON: Switch hexdump() to debugN instead of printf

Rational: hexdump() is used for debug output. An even better alternative
might be to change it to return a string, instead of printing anything.
This way, it could be used inside e.g. GUI debug consoles.
This is left as an exercise to the interested developer :).

svn-id: r54010
"
"9a350f43980d82ec001c077b28c035350478fe8e","2010-11-01 16:04:47+00:00","ENGINES: Get rid of some (f)printfs

svn-id: r54011
"
"eefa151d70c66558d4f40b41a32b1e0df30c1d89","2010-11-01 16:09:33+00:00","SCI: saving/restoring script created windows now

fixes 'GfxPorts::kernelSetActive' error
based on code by [md5]

svn-id: r54012
"
"963cf0b08af73d1f05af67f132b23e7dff273290","2010-11-01 16:42:31+00:00","COMMON: Disable DEBUG_HASH_COLLISIONS (oops)

svn-id: r54013
"
"548e67f413fbda3cb42880a759d2f47c56e77232","2010-11-01 16:42:54+00:00","SCI: fixing lf

(stupid msvc)

svn-id: r54014
"
"3d431a215f526560bc839a7829456a27beb8e8fb","2010-11-01 19:42:00+00:00","SCI: Fixed a silly bug when restoring port rectangles. This uncovered a bug with the recently added port save/restore code

svn-id: r54015
"
"a46b1adeae8fae1f85f7d72dd5d000b258d87536","2010-11-01 19:56:01+00:00","SCI: fixing bug when restoring ports

fixes assert

svn-id: r54016
"
"130365ef0d36372349f566104faaa1acc105940d","2010-11-01 20:08:42+00:00","SCI: fixing port restoring

- recalculate _freeCounter
- dont push disposed windows onto windowlist

svn-id: r54017
"
"e0fec608741636a79ba229425936a44519880343","2010-11-01 20:20:21+00:00","HUGO: Convert class member comments to Doxygen format

svn-id: r54018
"
"7d09121c712cdfd666f201c369ff5ba40366eec3","2010-11-01 20:21:01+00:00","HUGO: Fix typo

svn-id: r54019
"
"3d5e2fa82093bba2492fc65e6f4ebd735907ea1e","2010-11-01 20:40:33+00:00","HUGO: Replace Utils::Warn() by warning()

svn-id: r54021
"
"ebb7ed2b8a5118289f3fa5383fdf88fa370abb0c","2010-11-01 20:41:03+00:00","SOUND: Convert some (f)printf + fflush to debug

svn-id: r54022
"
"75c6e668744a092e5e2101c5a0c2482b3f4cc949","2010-11-01 20:41:32+00:00","COMMON: Get rid of the debug() output formatter

Now Engine::errorString is only used by error(), as its name suggests.
This also resolves the inconsistency between debug & debugN.

svn-id: r54023
"
"d5413deab36c1d00b17dd80c49a5ed00232c7cbc","2010-11-01 20:41:53+00:00","BASE: Destroy TranslationManager when exiting; destroy GuiManager before ConfigManager

svn-id: r54024
"
"314d6568b392597675ea064ab03029ddf24e4b17","2010-11-01 20:47:38+00:00","GOB: Fix a map cleanup regression

svn-id: r54025
"
"ff01247526eace2c1eff32e3a9c3e46293406319","2010-11-01 20:49:55+00:00","TINSEL: Explain why exactly RTL is disabled

The very same issue probably affects more engines, possibly even some
which have RTL enabled.

svn-id: r54027
"
"7f1a9699fa2489955f3839ccbd8dddad97d864ff","2010-11-01 20:59:17+00:00","TINSEL: Fixed two places that weren't reset when exiting to the launcher and reentering the game. There could be (and most likely are) others as well

svn-id: r54028
"
"9cadcf4c5b755adbdf8381bcdd82e14f097f2304","2010-11-01 21:06:04+00:00","TINSEL: Fix a leak in DW2, and a potential OOB in NextTaggedActor

svn-id: r54029
"
"cba30ee716a3679d86656d6f1aade3e33d3130d7","2010-11-01 21:36:39+00:00","TINSEL: Correcting my previous commit, oops

svn-id: r54030
"
"a7248a0601a5b8e34fa9cccc3543e93fa9ab6649","2010-11-01 21:37:47+00:00","ENGINES: Replace many printfs by warning/debug/debugN

svn-id: r54031
"
"8252fc30ce600960dc855dcecfa29092c5d6ef57","2010-11-01 22:19:16+00:00","KYRA: Pause engine when the debugger is open.

svn-id: r54032
"
"997625c3b3189c2f76c8be74727b288b5e789699","2010-11-02 00:13:04+00:00","M4: Reworked dumpFile to use Common::DumpFile

svn-id: r54033
"
"274fbd028df99c20f6c80fcf23144a389f888913","2010-11-02 00:15:18+00:00","M4: Added function pointers to the the script engine data map list

svn-id: r54034
"
"97a0c281ebef3acc276132892c2dcdfcfb46719e","2010-11-02 00:51:12+00:00","M4: Converted all printf's to debug

svn-id: r54035
"
"31bf3a413756dd55a3b89ec0b2ec798e360f7d49","2010-11-02 09:49:07+00:00","MADE Remove now redundant fflush call

svn-id: r54036
"
"ba3e826872d8456a3bca171bf5613f7802e9582a","2010-11-02 09:49:47+00:00","SCI: Remove any use of printf

svn-id: r54037
"
"7cf7b198add96e33438128e1d55114fea813821c","2010-11-02 09:50:14+00:00","M4: Remove redundant fflush calls

svn-id: r54038
"
"8047f79a46058ca1c520632469aa6422e81cf904","2010-11-02 09:50:29+00:00","M4: Convert last few printfs to debug

svn-id: r54039
"
"438da9b22065d09d2a8b26766e19e542a4c90d2b","2010-11-02 09:50:45+00:00","SWORD25: Convert printf to debugN

svn-id: r54040
"
"7f354ac7e0453863a6d4ee798353bbd32965c289","2010-11-02 11:20:43+00:00","OPENPANDORA: Add FORBIDDEN_SYMBOL_ALLOW_ALL define to enable use of forbidden symbols.

svn-id: r54041
"
"db133990e90b345c07a5eea33e56c7299f9fca44","2010-11-02 16:07:22+00:00","SCI: Properly cast the results of kTimesSin and kTimesCos to 16-bit integers

svn-id: r54042
"
"ffa455bef964a81fe8da0bd78a596520f1878715","2010-11-02 23:16:28+00:00","HUGO: Fix cypher for v1 Dos

svn-id: r54043
"
"c6ddf220579955793c428f3169bb8dfc736da555","2010-11-02 23:22:25+00:00","HUGO: Fix typo... sorry

svn-id: r54044
"
"0c018bf3923a142d239e97f482165c3e0daed90e","2010-11-03 00:19:28+00:00","SWORD25: cleanup

svn-id: r54045
"
"e56a3747d236703633fa3bb885542b9ebefe64ff","2010-11-03 06:23:16+00:00","Dummy file creation through SVN to allow merging gsoc plugins via mercurial

svn-id: r54046
"
"0ac1eb82c65e7f20f51f6337df5aa64e02a1af29","2010-11-03 09:44:03+00:00","M4: Changed debug calls to debugCN since they all have newlines

svn-id: r54047
"
"13b904d282ea607db94069b927d6cb1b19aa0d0b","2010-11-03 22:01:01+00:00","Merge from gsoc2010-plugins

This merge was extremely difficult to carry out. It wasn't entirely SVN's fault -- there were several merges to the branch that were done by hand. Please check for any issues and regressions. Also note that the DS makefile was not copied over since the 'one at a time' plugin mode currently has too much fragmentation ie. it doesn't work.

svn-id: r54051
"
"4246afcb0e100788f960118712b62581de9fea87","2010-11-03 23:56:34+00:00","HUGO: Fix 'exit' command in DOS versions

svn-id: r54054
"
"0f7645dda9a38d4fbf40ffe3e68207bd8394292c","2010-11-04 00:13:23+00:00","Trying to fix weird keyword expansion quirk

svn-id: r54055
"
"44c6a90643128af8c4521d5c5ee86d5885b79b0b","2010-11-04 00:31:50+00:00","LUA: Tweak lua_ident to not conflict with SVN keywords (since this is not used at all, only used to 'mark' binaries compiling Lua in, I think we could safely remove it, too)

svn-id: r54056
"
"99cf0e39368986086d5608509a52e1d4f1a70208","2010-11-04 00:49:12+00:00","COMMON: Undo changes to common/ptr.h, remove Common::ScopedPtrC

The deletePointer() method approach cannot work, as it is called
by the destructor of the base class.
A possible correct solution would be to enhance ScopedPtr with a
'deleter' object like SharedPtr. But this seems overkill as long as we
need it in only one place.

svn-id: r54057
"
"3fedacdb434e625524cca29e210f420ff7f557e0","2010-11-04 05:51:58+00:00","DC: remove multi-build of dc-provider that slipped in with plugin merge.

svn-id: r54058
"
"50d2f7a6be5aff92553d232e105ea227908ba21e","2010-11-04 06:22:24+00:00","DS: moved build-ds.sh to DS directory. It's currently unused but has a good way of reducing dynamic size

svn-id: r54059
"
"f5bfae598c1a3fa0340396461a44d7834721cde5","2010-11-04 06:28:34+00:00","PSP: cleaning up some stuff from plugin merge

svn-id: r54060
"
"224f93cf0e3629f32295f0d98d2c65c5102fdbe6","2010-11-04 06:28:51+00:00","GOB: Extended workaround for Goblin Stuck On Reload to cover bug #3065914

This generalises the workaround added for bug #3018918 i.e. UOTODDV issue, to cover the
ICVGCGT case and hopefully all future cases, by executing the variable correction during
the reload after Game Over and using the variable read by the script triggering the movement lock, rather than the movement lock variable (59) itself as this may not be set until a later script.

svn-id: r54061
"
"bf787323ab235c08819771ef2886bf6fee6e2e34","2010-11-04 12:29:06+00:00","TOOL: Fix ticks per seconds for H1 Dos

svn-id: r54063
"
"b7f1e3b239d33b783d0fbec83027320ca0037f02","2010-11-04 14:12:30+00:00","GPH: Update README-GPH to suggest even more WiKi reading.

svn-id: r54064
"
"1dac4fbd557fc07be1bbc0dbbe94b1705b601a2a","2010-11-04 15:58:53+00:00","SCI/SCUMMVM: Added an option to enable the dithering removal algorithm (so called 'undithering') in the graphics options tab. The algorithm is now disabled by default, after popular demand. In retrospect, we really shouldn't have made it default, in order to preserve the authenticity of the graphics in early SCI EGA games, and allow the user to opt in and enable the option if needed. Unfortunately, the lack of an easy way to modify the option made it hard to do so.

svn-id: r54066
"
"92841e98320d57e23dc8777b06f9572df23faa27","2010-11-04 16:09:20+00:00","GUI: Fix build with readline enabled

svn-id: r54067
"
"bb716c23fa939c89790859a43c7f9a5327a8a9cc","2010-11-04 18:37:03+00:00","SCI: adding force to memorial area for SQ3/intro

makes the view getting fully undithered

svn-id: r54068
"
"7e6aa1b4a9cda2351c6716cfced0546aaa3d52d8","2010-11-04 19:17:44+00:00","SCI: Use gamma 2.2 for blending undithered colours

svn-id: r54069
"
"5bab2d570bc94c743380a33f892df3bac0006880","2010-11-04 19:19:07+00:00","SCI: Set undither to on by default again, like it was.

From our current stance, this is a game enhancement, and should be on by default, like the rest of the game enhancements (AGI mouse, save/load replacement etc)

svn-id: r54070
"
"51f7c4c52520d888d54bfe3be6ef2a7288d0888d","2010-11-04 19:45:38+00:00","SCI: Fix precedence error in comment

svn-id: r54071
"
"016f24d16ca2bf8dae122a95ed39133f137da300","2010-11-04 20:36:28+00:00","VIDEO: PreIMD: End frame when frameSize == 0

As happens for the last frame in the first video of the Fascination
intro.

svn-id: r54072
"
"9a704e51c1b777bd5c4cc07c49248010036b309b","2010-11-04 22:06:22+00:00","TOON: Fix ambient audio destroy in chapter 2

(Thanks to Thomas)

svn-id: r54075
"
"1e59b9dd2ca15f36543ee2a16a01b57d792689c3","2010-11-04 22:12:16+00:00","TOON: Fix sound effect archive destroy

Variable not initialized. Crashed when no sound effects were present in the room
(Bug fixed thanks to Thomas)

svn-id: r54076
"
"7d71d07075e1331816688f11be11318ccbd32cd0","2010-11-04 23:19:23+00:00","SCI: Renamed findBlock() to findBlockSCI0()

svn-id: r54077
"
"8c997e26088481340927a779d16d2eb482c14293","2010-11-05 00:10:26+00:00","SCI: Add a default case to a switch statement to silence some compiler warnings.

svn-id: r54078
"
"206971d16b56ff37a6a81ff85a1b488fdc60c627","2010-11-05 00:36:23+00:00","SCUMM/FM-TOWNS JAPANESE: fix out of bounds text drawing

(could cause invalid memory access in MI1)

svn-id: r54079
"
"4457d10f8465ec93d2761168a850cfe2574d6d5c","2010-11-05 01:11:05+00:00","GRAPHICS/SJIS: fix out of bounds shadow mode text drawing

svn-id: r54080
"
"102e7ee88cf04fa470ec372a1ac38846d278d463","2010-11-05 01:19:45+00:00","PLUGINS: Add EM_SH to elf32.h (e_machine type used by DC backend)

svn-id: r54081
"
"7ace85e63646d3fd4843e7f45595bc04f3b2c7dc","2010-11-05 01:20:34+00:00","PLUGINS: Simplify ELF plugin providers & DLObject subclasses

* Remove DLObject virtual methods allocSegment and freeSegment.
As long as all DLObject implementations use memalign + free to
allocate/release segments, there is no point in wrapping those.
This enables further simplifications.
* Add TemplatedELFPlugin template class. Use this instead of explicit
ELFPlugin subclasses.
* Rename DLObject::discard_symtab to discardSymtab

svn-id: r54082
"
"f83bfc0bbf8aa7772efb2b91af24aa6dd5a8df79","2010-11-05 01:20:53+00:00","TEST: Tweak 'make test' build rules to ignore -Wglobal-constructors

On my OS X machine, -Wglobal-constructors is always added by configure.
But the test runner makes heavy use of global constructors.
This change allows me to run 'make test' even when using -Werror.

svn-id: r54083
"
"1e078a22f5e791bd56d44c3b284df99d252e7288","2010-11-05 03:30:45+00:00","AGOS: Display item names and descriptions via GUImessage, in Swampy Adventures for now.

svn-id: r54084
"
"749d2afd1fb0460531bdabffc674348aa2fed17b","2010-11-05 07:59:55+00:00","TOOL: Fix bug in data in Hugo2 Dos

svn-id: r54085
"
"913afa041a1495fbf1d0eef432a3cd71434976ea","2010-11-05 08:14:12+00:00","HUGO: Suppress status variables related to playback

svn-id: r54086
"
"85513b20409ad57d306b06d181c271ead4185ace","2010-11-05 08:36:37+00:00","HUGO: Suppress useless case in processRoute()

svn-id: r54087
"
"7c8470255c5e1b53b7462cdb09d8df61c554849e","2010-11-05 10:16:36+00:00","SCUMMVM: Bumped theme version to 0.81.

This fixes regression #3103351 - 'GUI: Crashes on Edit Game/Options Buttons'

svn-id: r54088
"
"daf3fb0df7996b95a376080d8112b09a97b52266","2010-11-05 10:31:36+00:00","WINCE: Remove tons of obsolete workaround code for 'missing' headers and funcs

svn-id: r54089
"
"2416cbf75b6193c6bcecc76176d4d334e6f7f3de","2010-11-05 10:53:37+00:00","COMMON/GUI/SCI: Changes to the EGA dithering checkbox

- Changed the new dithering checkbox to be more generic (i.e. relevant for all engines that may support such a feature in the future)
- Changed the checkbox to be unchecked by default. As discussed on -devel, game enhancements in ScummVM should be off by default, and opt-in
- Changed the option from 'sci_undither' to 'disable_dithering'
- Changed theme version style to X.Y.Z and bumped it to 0.8.2

svn-id: r54090
"
"18345b970d5e5fcdb9e51d8767846a8de68511ba","2010-11-05 10:58:48+00:00","Grammar

svn-id: r54091
"
"4f3cedd11f9af307a08c59a074563637579f5d38","2010-11-05 11:17:57+00:00","GUI: Better description of the dithering checkbox

svn-id: r54092
"
"e065a8a7975d49405a96beec658e207e9826e9cd","2010-11-05 12:33:07+00:00","SCI: Fix blend rounding, style

svn-id: r54093
"
"6b88fd44c0fca0b8439f820bceac808562697d0d","2010-11-05 12:36:20+00:00","HUGO: Silent GCC warning introduced in r54087

svn-id: r54095
"
"a6bee87990d3fd36cbb8e63716990a46fe00402c","2010-11-05 13:24:57+00:00","PLUGINS: improved one-at-a-time plugin code

I reduced memory fragmentation using 2 principles: Plugins should be loaded for as little time as possible, and long lasting memory allocations should be allocated before plugins are loaded. There might still be a little fragmentation left.
Note that command line settings that require plugins to be loaded don't work yet, but they didn't work (properly) before either.

svn-id: r54097
"
"49b3635181c50220b54d8dd2f2e4aa467ea45cb8","2010-11-05 15:38:31+00:00","AUDIO: Remove obsolete comment.

svn-id: r54098
"
"e4da5e3af48a71b36b8d927151aa08aa498bdcc9","2010-11-05 20:36:13+00:00","GRAPHICS/SJIS: cleanup

svn-id: r54099
"
"1da44acae34cf678d43c0fa17f6d8a84aea3b22e","2010-11-06 09:59:07+00:00","HUGO: Implement REMAPPAL.

Palettes in H3 Win intro are now correct

svn-id: r54100
"
"b105b5e659805b10fa149bc051fea8e4acc4fcfe","2010-11-06 10:11:46+00:00","TOOL: Add original palette in tool, disabled

This may be required by purists, but is awful (thus
currently not used)

svn-id: r54101
"
"f5d2695800473fa44500dc3fdaa92f9fcff844b9","2010-11-06 13:21:18+00:00","HUGO: Move _palette to display.cpp

svn-id: r54102
"
"a4cd83061eae135f17eefe15ee023817ec734250","2010-11-07 00:02:48+00:00","HUGO: Move fonts to display.cpp

Some cleanup

svn-id: r54103
"
"7e7ad149c29e14aab82906384676bdae436b6b4e","2010-11-07 00:37:04+00:00","GRAPHICS: Cleanup advmame scaler code; don't include assert.h

svn-id: r54104
"
"18d40017e849ccb74d899b651042a750052d11f4","2010-11-07 01:01:18+00:00","ENGINES: Unify code layout of all ADParams instances

svn-id: r54105
"
"90b6cdfbdff3e75a034c748d6d8784a0df7f5db4","2010-11-07 01:03:03+00:00","LURE: Remove all uses of (f)printf; cleanup

svn-id: r54106
"
"b4787d94301e4ef1ba5b2f7135fbcb0b6d3de6b8","2010-11-07 01:03:29+00:00","MOHAWK: Convert all printf to debugN calls

This involves some nasty decisions, like mixing debugN and DebugPrintf
calls in the RivenConsole. I added FIXME comments about this.

svn-id: r54107
"
"a905682cf8a0cd11041ac0b81508d363ae8cc0d2","2010-11-07 01:03:58+00:00","LURE: Convert printf to debug/warning

Exception: The 'decompiler' code still uses fopen/fprintf etc.
but it is disabled by default, hence I am ignoring it for now.

svn-id: r54108
"
"025a14b32656e651f376e5cc9a5e09c6d02095d1","2010-11-07 02:08:02+00:00","MOHAWK: Remove console FIXME's

svn-id: r54109
"
"05986f09fd6e67da9b04df0edd23c81a88e3ed23","2010-11-07 02:13:22+00:00","CREDITS: Mark Joachim Eberhard as retired.

svn-id: r54110
"
"708593c7a03fa3c444d0f15913780e5096d08183","2010-11-07 02:24:31+00:00","CREDITS: Add myself to the Infrastructure section (after talking with Max).

svn-id: r54112
"
"f452fe82ad107039ca578b86c97fc781e73f2761","2010-11-07 12:09:53+00:00","CONFIGURE: disable libmad for N64 Port

libmad uses more cpu than tremor, and audio stutters more,
also this will save some memory

svn-id: r54114
"
"0119a659b5352ba284a7bff0afefa4d2bf054ac3","2010-11-07 15:02:41+00:00","CINE: Added basic debugging console to engine

Since CINE uses Debug Channels, this allows for the interactive setting of debugflags as well as providing a base for adding further debugging commands.

svn-id: r54115
"
"3d961469fdce1e727249534d5710c1f58955bb20","2010-11-07 15:03:54+00:00","DRACI: Added basic debugging console to engine

Since DRACI uses Debug Channels, this allows for the interactive setting of debugflags as well as providing a base for adding further debugging commands.

svn-id: r54116
"
"1cbab9885bc7af3ee758c4ca9ce61bb9cb3e5af9","2010-11-07 15:04:47+00:00","HUGO: Added basic debugging console to engine

Since HUGO uses Debug Channels, this allows for the interactive setting of debugflags as well as providing a base for adding further debugging commands.

svn-id: r54117
"
"c5598664cef2091036c60eb55dec0168f507cbc4","2010-11-07 17:15:27+00:00","DETECTOR: Get rid of ADGF_KEEPMATCH

Also fix some typos, and minor tweaks

svn-id: r54118
"
"aa54388de09cbbb295fa08605af8bcab1ceadc3e","2010-11-07 17:15:46+00:00","ENGINES: Do not include engines/savestate.h from engines/game.h

svn-id: r54119
"
"036e88d382f653fd8590bb2edec2e45072f9d0be","2010-11-07 17:16:01+00:00","DETECTOR: Don't compute mac resource fork MD5 of a file multiple times

Also add a FIXME regarding the fact that we don't handle the case that a
file is listed as a regular file and as one with resource fork.

svn-id: r54120
"
"4d3a07b4943fa173b8db93d54d89baa24b35e0c5","2010-11-07 17:16:59+00:00","COMMON: Rename and tweak MD5 functions

* names now comply to our naming conventions
* the function computeStreamMD5AsString which computes the MD5
as a hex string now returns it as a Common::String
* add doxygen comments

svn-id: r54121
"
"f9d311d1efed7b459f74d6e2ed2abf9c48ea36ba","2010-11-07 17:17:21+00:00","COMMON: Add const qualifiers and remove Common:: prefix in MacResManager code

svn-id: r54122
"
"279a760c5a833b51de3217f8eadda7cf57596532","2010-11-07 17:18:59+00:00","TOON: Added basic debugging console to engine

Since Toon uses Debug Channels, this allows for the interactive setting of debugflags as well as providing a base for adding further debugging commands.
However, the hotkey for this is currently disabled as it causes a segfault. Not sure why.

svn-id: r54123
"
"86d005e4a34124e26cea3e1f9d55dd8a8df5be89","2010-11-07 18:52:47+00:00","HUGO: Fix crash when hugo.dat is not the expected version

svn-id: r54124
"
"a05e9a68423f8998c60819367df05ef7b923d0d6","2010-11-07 19:13:08+00:00","DRASCULA: Add GUIO_NOLAUNCHLOAD to the detection flags.

svn-id: r54125
"
"ce733ab75a9af19fe203930b37f9fc7fb8712cae","2010-11-07 19:13:30+00:00","TUCKER: Add GUIO_NOLAUNCHLOAD to the detection flags.

svn-id: r54126
"
"4acad22d6e28d647c3233c183e3104b9d02a86e5","2010-11-07 21:08:46+00:00","TOON: Corrections to close some memory leaks.

These corrections close a number of leaks in the Toon engine reported by running Valgrind with --leak-check=full option.

svn-id: r54127
"
"efc280892628032470911a8bb6df1d41cd9f1de8","2010-11-07 21:21:55+00:00","TOON: Fix debug console by implementing getDebugger.

svn-id: r54128
"
"7c66cae3de9fa83cf2f7ad7132cd92ae1f242d62","2010-11-07 21:22:16+00:00","TOON: Cleanup.

svn-id: r54129
"
"170b21c2ce399a17fe3eeb2b6def81e3adbdc261","2010-11-07 21:25:32+00:00","TOON: Fix mismatching new/delete[] on _hotspots.

svn-id: r54130
"
"74d0ad83711ae515befa1ed8dcff9dc6f59c5275","2010-11-07 22:10:29+00:00","HUGO: Use DOS names for  and exact names in endGame()

svn-id: r54131
"
"97a98cf9db150f41c704ff92609b30fa9bf8ee30","2010-11-08 00:08:38+00:00","LOL: fixed minor text displayer bug

svn-id: r54132
"
"5de2668939a6735da2b3438b7c586fc185791ef8","2010-11-08 00:18:34+00:00","SCI: Some changes regarding the string heap in saved games

- Maintain the state of the string heap space in saved games
- Merged SegManager::reconstructScripts() inside SegManager::saveLoadWithSerializer()
- Disabled a now unnecessary script patch for the cipher puzzle in Castle of Dr. Brain, and performed some cleanup for another disabled patch
- Removed direct access to the _baseObj variable of objects

svn-id: r54133
"
"05eb352e5c4c9dd359640954100038d195713bce","2010-11-08 00:41:39+00:00","SCI: Bugfix for script workarounds

Get the English versions of objects and methods when checking for script
workarounds, as the objects/methods could be translated. Fixes bug #3104623,
'PQ3: Crash when click on City map'

svn-id: r54134
"
"5d30eeea95be5a295ac17b0736779297606a08a8","2010-11-08 03:14:32+00:00","TOON: Further corrections to close memory leaks.

These corrections close a number of leaks in the Toon engine reported by running Valgrind with --leak-check=full option, but a significant number still remain.

svn-id: r54136
"
"f0fe060cc3a17f6bcb5e9253fbce0605a88cc0c2","2010-11-08 03:55:16+00:00","TOUCHE: Added basic debugging console to engine

Since TOUCHE uses Debug Channels, this allows for the interactive setting of debugflags as well as providing a base for adding further debugging commands.

svn-id: r54137
"
"416025cda90f23ea5b94c88dcea0c202df279223","2010-11-08 11:02:43+00:00","Fix assertion failure in SCI0 saving code

svn-id: r54138
"
"c76f0c6c022766a2db7e96e3e68260d3b9bd7a25","2010-11-08 12:17:19+00:00","MADE: Added basic debugging console to engine

MADE does not currently use Debug Channels, but this does provide a base for adding them along with any other debugging commands.

svn-id: r54139
"
"cb734285a50af24dd0453ab292855f038e936acf","2010-11-08 12:22:58+00:00","SWORD1: Added basic debugging console to engine

SWORD1 does not currently use Debug Channels, but this does provide a base for adding them along with any other debugging commands.

svn-id: r54140
"
"71d0526834f5903c28b83942d4cd50d413183c9b","2010-11-08 12:24:18+00:00","TUCKER: Added basic debugging console to engine

Tucker does not currently use Debug Channels, but this does provide a base for adding them along with any other debugging commands.

svn-id: r54141
"
"d8eefdb52ad67e7df32411502ba7c2c02c04125d","2010-11-08 16:09:59+00:00","SCI/SCI2: Some slight changes to the graphics code

- Changed the SCI1 EGA games workaround in kGraphDrawLine() to match the ones in kGraphFillBoxAny() and kNewWindow, updating the relevant comments
- Added some comments in kSetShowStyle()

svn-id: r54142
"
"8504e30dac5d3d362242277e4270dcec07a68798","2010-11-08 16:12:58+00:00","SCI2: Added some currently unused code for drawing text on a buffer

svn-id: r54143
"
"9c349cf78b21ef147ab739003d5f89d6d537c1c9","2010-11-08 17:03:27+00:00","VIDEO: PreIMD: End frame when stream depleted

As happens for the last frames in the Fascination videos.

svn-id: r54144
"
"4242229c91c356bdd90c66ce8c0642488a1b4bf5","2010-11-08 19:18:13+00:00","COMMON: Make KeyState::hasFlags const

svn-id: r54146
"
"82e473bc3b1498325bad28d804e4314f0c3a528c","2010-11-08 22:53:36+00:00","BACKENDS: Partial merge of gsoc2010-opengl: Audio CD changes only

This commit contains the AudioCDManager changes from the gsoc2010-opengl
branch. The other changes in that branch are restricted to the backends
directory only (plus configure).

The Nintendo DS and Dreamcast ports still need to be ported over to
the new Audio CD system, but that should be fairly easy to do.

svn-id: r54147
"
"059944e59cc7f3b84fabb1210b6c1fb0aacc549e","2010-11-08 23:07:42+00:00","COMMON: Push #include audiocd.h in system.h out to .cpp files

svn-id: r54148
"
"4a5b01e3bb530f47ea41e3fabb9a485d4b9a2453","2010-11-09 05:21:07+00:00","CONFIGURE: Define SDL_BACKEND for GP2X/GPH/WINCE backends

This should fix compilation on those systems.

svn-id: r54149
"
"53a4a64b16cc347a8f06e7fdb35c02a989e74185","2010-11-09 10:07:34+00:00","treat pushSelf opcode with low bit set as pushSelf (in fangames only, currently). Fixes bug #3038686.
(SCI Fanmade - Circus Quest: Crash when starting).

svn-id: r54150
"
"77a636aaec30f1e1e9f69038dbd397e9bb23dedf","2010-11-09 11:00:56+00:00","N64: correct wrong check in romfs stream code

my implementation of romfs_seek is based on lseek, not on fseek,
so it returns the offset on successful completion, not 0, corrected
the check in RomfsStream::seek().

svn-id: r54151
"
"63d023964e1523d88463602a7b556e2c8fbe0799","2010-11-09 11:02:06+00:00","MOHAWK: Close a number of memory leaks in Myst.

These corrections close a number of leaks reported by running Valgrind with --leak-check=full option, but some still remain, mainly in the image loading and caching.

svn-id: r54152
"
"1e9407be3f12d75e5dfcf094f7e5ce3a3490a7bb","2010-11-09 11:57:54+00:00","SCI: Added comments for rev. 54150 and fixed a typo

svn-id: r54153
"
"9a0b6ad69a0b2e80efdb3896d6dd613494d4b62d","2010-11-09 14:25:39+00:00","SCI: Add resource manager support for SCI3 games.
ScummVM now rejects them properly instead of spewing lots of
unintelligible stuff.

svn-id: r54155
"
"3a9d9350231d5f2a8ce87e8c56a38607821a1269","2010-11-09 15:15:13+00:00","SCI: Fix error message in ShowMovie(), perhaps avoiding some confusion later

svn-id: r54156
"
"32ff20477b9162ee24555fb59d4a11c58c6904a7","2010-11-09 15:16:40+00:00","SCI: Add uninitialized temp workaround for Shivers

svn-id: r54157
"
"acf581fe676f94e3a185dbfeda6c188556bca19a","2010-11-09 15:45:20+00:00","SCI: Temporarily disable the PrintDebug call, which is only partially
implemented and insufficient for Shivers/Full. It is also unnecessary
for normal play.

svn-id: r54158
"
"2e8ca1aa9bf68fdfc99ab31999939feef4862642","2010-11-09 15:55:17+00:00","create_msvc: Added the SDL_BACKEND define, to fix compilation with MSVC

svn-id: r54159
"
"8a788d16d779a651876ed3d4caf7fda0b3fa342c","2010-11-09 16:06:33+00:00","SCI: Fix compile when SCI32 is not enabled

svn-id: r54160
"
"567441f0320630f37129655df1b73103b5a4d64f","2010-11-09 16:23:08+00:00","SCI: Formatting convention fixes

svn-id: r54161
"
"4582a94ff9045a132cd473e5cc61d20c382d7056","2010-11-09 16:56:31+00:00","SCI: Fix Lighthouse SCI2.1 demo

This is a regression from r54155. Fixed by moving the chunk resource loading earlier.

svn-id: r54162
"
"55f0b88c07f02eb2fcdeb5284131acd10e13eee8","2010-11-09 17:07:34+00:00","SCI: Fixed the fallback detector again

This is a regression from r54155, as we previously ignored the result of
addInternalSources() in the fallback detector

svn-id: r54163
"
"a4978587d8bbb6ba401b48ca0e3f24e443c5a0d2","2010-11-09 18:38:35+00:00","MOHAWK: Fix memory leaks (thanks to digitall for finding)

svn-id: r54164
"
"0dd4a4610269e2ff66327dee0cc70ff8e4a26084","2010-11-09 18:52:29+00:00","MOHAWK: Fix cache memory leak and some formatting

svn-id: r54165
"
"45f4f84e03320cdcac569405b6209b5e763f0bdf","2010-11-09 18:58:44+00:00","MOHAWK: Fix one more memory leak (hopefully the last :))

svn-id: r54166
"
"1a85ce8e036a292b3d2569d8044b787e76ce48f9","2010-11-09 19:37:42+00:00","SCI: Some slight work on SCI3

- Enabled the SCI3 game entries for testing purposes
- The resource manager is initialized fully now (with a slight hack)
- Added a hack for the demo of Shivers 2 (which seemingly has no
scripts or vocabularies)
- The engine will stop before parsing any game scripts in SCI3 games,
and opens the console for resource manager-related functionality

svn-id: r54167
"
"d002800b52fb1d9325520a8b95510b974f6139b7","2010-11-09 20:26:12+00:00","HUGO: Fix several memory leaks

svn-id: r54168
"
"e7333afde593476fd4e616a8846554de76127605","2010-11-09 20:48:23+00:00","CONFIGURE: Fix linking in some cases

Nowadays code in graphics/ depends on sound/ i.e. in video codecs.
This fixes ./configure --disable-all-engines --enable-toon

svn-id: r54169
"
"f4a78c9b0c07450fc487b743910df80c01b5e229","2010-11-09 21:29:04+00:00","GUI: Added original 5x8 font

svn-id: r54170
"
"b00c631f209a672273d24cedccacbab5fc473a3c","2010-11-09 21:30:00+00:00","GUI: Generate iso8859-2 codepage fonts

svn-id: r54171
"
"a537ddb614ddbdbb2508420146ad867d93836f04","2010-11-09 21:31:23+00:00","GUI: Added IS8859-7 fonts. Helvetica is missing

svn-id: r54172
"
"581a090204becdf7dbf73ecbc7cccdda105651a7","2010-11-09 22:01:12+00:00","SCI3: Removed detection and any possible support of Shivers 2

Shivers 2 doesn't contain SCI scripts. The whole game logic has
been reimplemented from SCI in native code placed in DLL files.
Each room has its own DLL file, and some SCI functions have been
reimplemented/rewritten for this purpose in native code. The
game and demo have all the resources of a SCI game, apart from
the SCI scripts themselves. Thus, they cannot be directly
supported, unless their whole room logic is rewritten from
scratch, which classifies Shivers 2 as 'not SCI'

svn-id: r54173
"
"e8e23a83e91d6b527f4a76eb2771f8ec1732c956","2010-11-09 22:20:36+00:00","SCI: Removed the Shivers 2 hack from the segment manager (it isn't SCI)

svn-id: r54174
"
"95a58b24712ee0f3801485be1534ade0b733017e","2010-11-09 23:31:08+00:00","HUGO: Fix the last leaks in H1 Dos

Thanks Hkz for the help!

svn-id: r54175
"
"a74b8ad67f7c334051dce8bdb74a514169f905af","2010-11-09 23:57:56+00:00","TOON: More corrections to close memory leaks.

These corrections close a number of leaks in the Toon engine reported by running Valgrind with --leak-check=full option, but a significant number still remain.

svn-id: r54176
"
"c3fd3e23294784a1588137c124f426445926d816","2010-11-10 00:36:43+00:00","SCI: Updated the SCI2.1 kernel function table with the SCI3 changes/additions

svn-id: r54177
"
"7dec2bd6a8f363b389b48364cdf8b286c6400b7e","2010-11-10 01:08:17+00:00","SCI: Some SCI3 changes
- Extended the SCI2.1 kernel function signatures for SCI3, as they share
the same kernel table
- All the engine parts are now initialized in SCI3 games, apart from the VM

svn-id: r54178
"
"988d9f34016c278a0100ac799aef5df52879adf2","2010-11-10 03:34:08+00:00","SCI: Fix SCI2.1+ fallback detection

Each map has to be mapped with its own specific volume (as opposed to earlier versions that had one map for all volumes); this code was passing the same map pointer for all volumes.

svn-id: r54179
"
"aad7f2e0eb6ee4af81d116a1e8ecad7e29b2ee85","2010-11-10 03:44:50+00:00","TOOLS: Update batch files for new create_project tool

svn-id: r54180
"
"d1723ab2ecb3c35904f09b10073409147f39d5c7","2010-11-10 03:46:36+00:00","TOOLS: Remove create_msvc and update readme

svn-id: r54181
"
"66b172bb26ef6e011db23fdd7e28257ec96368aa","2010-11-10 03:56:42+00:00","TOOLS: Add create_project tool

- Move project providers to their own source files
- Add support for Code::Blocks
- Add analysis build configuration for Visual Studio

svn-id: r54182
"
"c9969d2be02f640026a1be229c16527e953de83e","2010-11-10 03:59:43+00:00","TOOLS: Remove superflous pointer dereference in create_kyradat.

svn-id: r54183
"
"7ad677afc8ad3768a8c903afed5881403e1a026d","2010-11-10 04:30:24+00:00","SWORD25: Added basic debugging console to engine (Command Key Disabled)

Since SWORD25 uses Debug Channels, this allows for the interactive setting of debugflags as well as providing a base for adding further debugging commands.

However, this is not currently usable as the command key code is commented out.
This is due to the event loop which reads keyboard input being buried 2 object layers below the Engine VM object and I am unsure how the engine development team would want this exposed / interfaced.

svn-id: r54184
"
"52ecbd4305d2f728ea8db11dab28e9a56c9dcb6e","2010-11-10 06:22:18+00:00","TOON: Even more corrections to close memory leaks.

These corrections close a number of leaks in the Toon engine reported by running Valgrind with --leak-check=full option, but a few still remain.

svn-id: r54185
"
"966e3c1305c6dbd0cf69c06254e4b81e6ac88e74","2010-11-10 09:07:10+00:00","TOOLS: Fix typo in create_project MSVC9 project file

svn-id: r54186
"
"380121fb556bf137fe78a2acbf3baa112a2fad19","2010-11-10 14:06:39+00:00","TOOLS: Remove CXXFLAGS rule from create_project module.mk

svn-id: r54187
"
"9d1006c7a3503cd603a9266e6ae589fe8c090d83","2010-11-10 14:28:45+00:00","SCI3: Some changes
- Placed the SCI3 version detection in the proper place
- Some new types of SCI3 MT-32 patches (e.g. in the Lighthouse SCI3 demo) are
ignored, for now

svn-id: r54188
"
"dc02bd2b4e9aeb1b51e2c7c636b26d8bfdfc9ed9","2010-11-10 14:40:23+00:00","SCI: Add missing new line

svn-id: r54189
"
"2e9b304d763d620198b797901fe4ff7a2aca054f","2010-11-10 16:22:00+00:00","PSP: changed renderer to render huge images properly

The PSP HW wasn't able to calculate the proper stretching when given the whole image size on a huge image. This is also a better way to do it because we're not overwriting tiles of the texture.

svn-id: r54190
"
"d1bd2497a584c415681bdc952b2fd430aeeb5e03","2010-11-10 19:18:39+00:00","GRAPHICS: Enforce alphabetical order on the codec objects

svn-id: r54191
"
"3b66e53bbed7365607bb3804b990984646ad2376","2010-11-11 03:25:35+00:00","LASTEXPRESS: Fix some memory leaks

- Reading past the end of file in SaveLoad::init
- Missing deallocation of cache in SoundManager
- Missing deallocation of coords in SceneHotspot
- Missing deallocation of event handlers in LastExpressEngine::setEventHandlers
- Missing deallocation of InSaveFile in SaveLoad::isSavegameValid
- Missing deallocation of frames in Menu

as reported by digitall

svn-id: r54193
"
"5e8e77a81450c7399dbd62ec83805af990d925a4","2010-11-11 04:53:52+00:00","VIDEO: Add the TrueMotion 1 codec for Phantasmagoria 2

Based on the FFmpeg decoder. Only the 16bpp version has been implemented (and all that should be needed). The videos I have tried work fine with the codec. The audio does not yet play in these videos, but I hope to work on DK3 IMA ADPCM soon.

svn-id: r54194
"
"da33617061d3d35becaaa741c8144377bf40f39b","2010-11-11 05:18:40+00:00","SCI: Allow duck videos to be played from the console

svn-id: r54195
"
"6711c5a8cf48c579bb4b972d4717fb6f1a394320","2010-11-11 06:18:23+00:00","LASTEXPRESS: Fix more memory leaks

- Missing deallocation of queued frames in SceneManager
- Leaking functor on each call to entity setup functions
- Add SoundEntry destructor & better Entity cleanup

as reported by digitall

svn-id: r54196
"
"203ff5e19a6107c71dc27909fa4982278d0436fe","2010-11-11 10:09:57+00:00","SCI: Fixed bug #3104624 - 'PQ3: Crash when loading saved game on the highway'

svn-id: r54197
"
"84e4c1742a849e2d8087528c3ba4ecce37896512","2010-11-11 10:36:10+00:00","HUGO: Suppress the use of Utils::Error, cleanup

svn-id: r54198
"
"97067a75db00a29640e797da3f679074343a5526","2010-11-11 11:24:12+00:00","SCI: Allow paths along the edge of the screen in kAvoidPath.

Paths along the edge of the screen are now taken as a last resort. Fixes
bugs #3047418 and #3059595.

svn-id: r54199
"
"7207d920bc2f4e01a653e0fada30698c870b9e8b","2010-11-11 13:23:26+00:00","VIDEO: Cleanup AVI audio in preparation for DK3

svn-id: r54200
"
"521f228ceddda2cfc0ed1006682d1b7dfbca7302","2010-11-11 14:19:44+00:00","LASTEXPRESS: Use SAFE_DELETE for class variables

svn-id: r54201
"
"b0bf67b4245a479e0403ca78bfb9bd9f8b5ab494","2010-11-11 15:01:57+00:00","TOOL: Suppress useless strings in textUtil

Also add DOS version for this text array

svn-id: r54202
"
"cc84c2dcfb894786eef3ecd5f747f7ce153aaaae","2010-11-11 16:44:28+00:00","LASTEXPRESS: Remove superflous if check in SAFE_DELETE.

svn-id: r54203
"
"876e38ca92cf51dc60bf2240b2c4a09d61ee9b77","2010-11-11 17:04:07+00:00","SOUND: Add DK3 IMA ADPCM decoder for duck videos

svn-id: r54204
"
"8e274749ed4fb92673a9314286b91229e6bcee7b","2010-11-11 17:05:33+00:00","VIDEO: Add support for DK3 in videos; fix sample rate location

svn-id: r54205
"
"cc61445599e919f70e07de707ad0c9a13942b38c","2010-11-11 18:22:35+00:00","COMMON: Cleanup translation manager code; add FIXME

svn-id: r54206
"
"bc09acfef1cd107871a3fb6c62dba9289f1f7312","2010-11-11 18:22:55+00:00","LASTEXPRESS: Silence potential warnings about extra semicolons

svn-id: r54207
"
"ebee22a934dd57932d0fc291fe94f0fa95e46997","2010-11-11 18:42:22+00:00","SCI: Added the 'DUK' video folder to the Search manager

The DUK folder contains all of the recently supported Duck videos in
Phantasmagoria 2. play_video works now with the videos of Phantasmagoria
2 :)

svn-id: r54208
"
"c624202c39215ea4b555567ee45abe01cac92133","2010-11-11 19:20:26+00:00","COMMON: Fix compilation when translation support is disabled (regression from r54207).

svn-id: r54209
"
"8b14137c07bceda262e5423aadea830c761dc2bc","2010-11-11 19:22:56+00:00","SCI: Some video related changes

- Now playVideo() is used when playing videos from the console (reducing
code duplication)
- Added support for 16bpp scaling in scale2x, so that the 16-bit color
Duck videos are scaled correctly

svn-id: r54210
"
"a65ab98726442b0e207c2466b238535bb2a6b016","2010-11-11 19:38:32+00:00","SCI: Use the new CSC extension for SCI3 scripts

svn-id: r54211
"
"a0199df818a90fcd142ef7d0adbc3bbda98003ac","2010-11-11 23:04:04+00:00","HUGO: Cleanup, move several functions and variables to the object class

svn-id: r54212
"
"ee85ca00077947296c810884febbb336782608b2","2010-11-11 23:46:53+00:00","SCI: Properly adding SCI3 script patches (a regression of r54211)

svn-id: r54213
"
"31719eeb2805f15dc385b6fc753029c8f5b1e0c8","2010-11-11 23:48:01+00:00","SCI2: Make robots return immediately for now, till they're implemented

Based on a patch by lskovlun

svn-id: r54214
"
"77da22290d57ad6eaa01f8a9d1b42c4885ff894d","2010-11-11 23:51:43+00:00","SCI: kSave case 0 is actually kSaveGame. Based on a patch by lskovlun

svn-id: r54215
"
"cc403e542d32e9094c20e7522fdae1bd42f32249","2010-11-12 00:01:13+00:00","SCI: Don't check for SCI2/SCI2.1 kernel types in SCI3 games.

Patch by lskovlun

svn-id: r54216
"
"103ac9c566df104e4cacdb78e68fc775d047f658","2010-11-12 13:05:54+00:00","Fixed signed/unsigned warning

svn-id: r54217
"
"fd82c3783d1e563e9c3526aeb0d75e79ebcc0d76","2010-11-12 18:05:23+00:00","TOOL+HUGO: Misc modifications

- Fix H1 Dos bug (animations not showing in Hall and after)
- Get rid of _textSchedule and everything related
H1 Dos shoud now be completable (not tested yet)

svn-id: r54218
"
"8a4cc14b1ae2b81055b710699854e25b02db9be9","2010-11-12 22:31:04+00:00","TOON: Fix audio crashs and more memory leaks

svn-id: r54219
"
"405fd0b5eb17dde8ac9c24572f6074f2b774ee66","2010-11-13 00:20:23+00:00","SCI: Update resource types for SCI2.1/3

svn-id: r54220
"
"698f4c2b45221825e8d2996308dcd537d1a83a5f","2010-11-13 01:15:37+00:00","TOON: Walk animation improved

Smoothing direction changes. Still needs to be polished though.

svn-id: r54221
"
"420c2c9ff2087ce8878dacc4bdb0df3d67e89e34","2010-11-13 01:37:37+00:00","TOON: Fixed menu music leak

svn-id: r54222
"
"a373bd4a5385dd251298ad41ca1701bec2331197","2010-11-13 02:44:34+00:00","TOON: Fix more memory leaks

Mainly leaks in audio and animations

svn-id: r54223
"
"db51fb33863fa8676f78cdfe475f82559a648f83","2010-11-13 02:59:46+00:00","TOON: Fix free/malloc mismatch

svn-id: r54224
"
"6c78ca487652e95f855ec043cc11c2875f44b4b3","2010-11-13 08:08:58+00:00","HUGO: Close two minor memory leaks.

Destructor added to SoundHandler and added delete for _intro in engine destructor.

svn-id: r54225
"
"f3ea2315fc52cf192edf159eee1898234f142896","2010-11-13 13:34:10+00:00","SCI: Fixed script bug #3108012 - 'Hoyle1: Crash when changing Deal Speed in Hearts'

svn-id: r54226
"
"325d93d5d81ecae5700fee3f0668125d85c34f4d","2010-11-13 13:41:43+00:00","HUGO: Fixed crash on exit when hugo.dat is not available

svn-id: r54228
"
"c64a4ce058983278949cb8b4c390355ca02e49db","2010-11-13 13:45:09+00:00","TOOLS: Added MSVC10 project files for the create_hugo tool

svn-id: r54229
"
"ecaab84cb5cb90e599b147359986abaf3202fa10","2010-11-13 14:46:27+00:00","SCI: Fixup pathfinding start point when on polygon edge.

We now also fixup the start point when it's on the edge of an obstacle. If the
start point is also on the edge of the screen, the actor is now allowed to
walk through that obstacle to find his way to clear territory. This is based
on observation of SSCI behavior.

svn-id: r54230
"
"f4af4d2366fe0c3994da5186d5d232b353fd1b25","2010-11-13 19:15:31+00:00","VIDEO: Switch Truemotion 1 to RGB565 for potential use with SCI CLUT tables

svn-id: r54231
"
"4e357549d57c1d820e320461450d52e36d10f477","2010-11-13 23:27:13+00:00","COMMON: Fix TranslationManager

Revision 54206 broke translations support because it uncovered a bug in
the TranslationManager when reading the translations.dat file. In that file
all the stored string lengths include the terminating 0 but Common::String
expect a length without the terminating 0. Therefore all String objects
created from reading the translations.dat file had an incorrect size. This
caused the font file names to be wrong after adding the charset.

svn-id: r54235
"
"db24b2a01415627ac540bf96e54902de2956b12b","2010-11-14 00:35:13+00:00","LURE: Fix for Valgrind identified memory leaks

svn-id: r54236
"
"2b33642d5482fbd7109082df08f4c6d67ff8c188","2010-11-14 21:10:56+00:00","GUI: Fix GMM labels translation for SCUMM engine

In the SCUMM engine (and maybe other engines), the GMM Dialog is created
in the engine constructor and before the window resolution is updated (so it is
still using the resolution from the Launcher). Therefore if the global scaler is x2
but a SCUMM game overwrite it to use x1, it was not using the correct labels
when they had a different translation for the lowres context.

svn-id: r54237
"
"69e42a0d4d25d71e240301417faf72e8828693c7","2010-11-15 06:17:35+00:00","SCI: Workaround for bug #3109299 'QFG1VGA: Crash when leaving area east of Antwerp'

Extended current workarounds to cover QFG1VGA.

svn-id: r54239
"
"8664535029e2806676dd5f1db975a5dbb0ac86c5","2010-11-15 12:48:54+00:00","LASTEXPRESS: Protect sound queue accesses with mutex

Sound entries were being streamed before the data was fully loaded
and queue addition/removal could happen while the sound timer was
going through the queue (reported by digitall).

svn-id: r54241
"
"457127d2a6aba99a33b3d1212f1406a8c40dc29e","2010-11-15 13:36:34+00:00","PLUGINS: moved plugin-at-a-time unload to be after deleting the engine.

Calling the Engine's destructor after unloading the plugin caused crashes.

svn-id: r54242
"
"fdc2a2cd81ca3547f72a21a12c23ee56cf50faa4","2010-11-15 13:37:06+00:00","CONFIGMAN: added defragmentation methods for one-plugin-at-a-time

One-plugin-at-a-time can have fragmentation caused by the ConfigManager if a game changes any configuration value. By reallocating and copying over the ConfigManager, we avoid this problem.

svn-id: r54243
"
"dbb3e1dded5df10aebc6f8f2a5027a4d8bad72dd","2010-11-15 15:20:48+00:00","LASTEXPRESS: Don't use NULL in arithmetic (silences a warning)

svn-id: r54244
"
"a4d9d0360155a8ddadd52d3bec60c7711a411d68","2010-11-15 15:48:08+00:00","LASTEXPRESS: Update Animation::process()

- Use Common::Rational to compute the current frame
- Added check for _currentChunk != NULL
- Add constructor to Chunk structure

svn-id: r54245
"
"7d9c43d22b8a23c33b39b6f8995c45b10d9864ec","2010-11-15 15:48:20+00:00","LASTEXPRESS: Fix frame leak in Entities::processFrame()

When not keeping the previous frame, the current frame was overwritten.
We now delete it before assigning a new value.

svn-id: r54246
"
"396bec13f9a0281c547c8a58b1b7a393e34990c9","2010-11-15 15:48:39+00:00","LASTEXPRESS: Use Common::StackLock instead of mutex lock/unlock in Sound class

svn-id: r54247
"
"aa5d440dcc1c863a156e2d67dc31c3d5445717b7","2010-11-15 20:57:09+00:00","I18N: Update translation template and po files from source code

svn-id: r54250
"
"df73b6d49f6dcb17108b8a0fbb45099c8bb11798","2010-11-15 20:59:41+00:00","I18N: Update Hungarian translation and add iso-8859-2 fonts to themes.

The new Hungarian translation is from patch #3109396

svn-id: r54251
"
"2c058a1235cc686a5555de5afd8c895ef2a11df4","2010-11-15 21:01:48+00:00","CREDITS: Add Hungarian translator.

svn-id: r54252
"
"ad81a4457dab7b61da8cefa51c31966359c60da7","2010-11-15 21:47:45+00:00","NEWS: Add Hungarian translation item for version 1.2.1

svn-id: r54254
"
"8799db594eff34dcc2441de735d85c63dd4c45bc","2010-11-15 23:51:46+00:00","GUI: Tweak ThemeEngine methods to use Common::String params & const qualifier

svn-id: r54255
"
"3450f476670eab0afa9e8eaf738128f136b95d63","2010-11-15 23:52:06+00:00","GUI: Fix bug in ThemeEngine::addFont related to localized fonts

Basically, it was remembering the font under its non-localized name.
This resulted in a leak, and potentially could have caused the wrong
font to be used in a localization.

svn-id: r54256
"
"5af8a76b489c315f4389f888489030bdcff52ae3","2010-11-16 08:21:53+00:00","COMMON: Make Common::Singleton::_singleton protected instead of public

svn-id: r54257
"
"abe1959d36816b6c0703c1c3802764818585d0b6","2010-11-16 08:23:13+00:00","COMMON: Simplify DECLARE_SINGLETON macro

This makes it possible to write
DECLARE_SINGLETON(foo);
instead of
DECLARE_SINGLETON(foo)
without causing a warning about an extra semicolon.
The extra semicolon helps some editors at parsing the C++ code.

svn-id: r54258
"
"62400d263824556d150686ac991cae2eab0183d2","2010-11-16 08:24:11+00:00","COMMON: Reverting r54257 as _singleton already was protected (and I am blind :)

svn-id: r54259
"
"a9b3dccaaaf62f6780335f630c016844ac10ff0a","2010-11-16 09:26:35+00:00","GUI: Fixed Memory Leak in RadiobuttonGroup usage in Options Dialog.

RadiobuttonGroup has a destructor which must be called to avoid leaking memory.
Have also added missing NULL init() declarations on object member pointers to avoid any future issues.

svn-id: r54260
"
"ada9c9af608f1af9d00289f4aa2b7be868e2944f","2010-11-16 09:53:08+00:00","TINSEL: Removed unnecessary 'static'

svn-id: r54261
"
"1dbf8d73d56052654522cf4076490090a41f336b","2010-11-16 09:53:55+00:00","TINSEL: Mark all (?) global vars with a FIXME comment

Use of global vars is what prevents RTL from working in Tinsel (and
probably in other engines). More specifically, the fact that many
global vars are not explicitly inited when the engine is (re)launched.

svn-id: r54262
"
"c734fc2b3eb327fd442e9a7a62beeec964f2830b","2010-11-16 09:54:11+00:00","TINSEL: Remove unnecessary 'static'

svn-id: r54263
"
"427dc1ae93fe9aafe97a2796b11db6ac940a97b1","2010-11-16 10:11:57+00:00","GUI: Move major widgets to new directory gui/widgets

Also renamed the source/header files, now they are more closely
aligned to how we rename most other source files

svn-id: r54264
"
"668adaa461f2c0c7c83b41375f7825e8a91a1f3c","2010-11-16 10:19:01+00:00","GUI: Rename gui/GuiManager.* to gui/gui-manager.*

svn-id: r54265
"
"f3f73a7832c77c779c7a5f3afc6bf12e158bb42a","2010-11-16 10:24:16+00:00","GUI: Commit some changes missing in my previous commit (oops)

svn-id: r54266
"
"5b735131ba0a67aab96938886cc49177d866ab34","2010-11-16 10:29:31+00:00","GUI: Push down some header (inter)dependencies

svn-id: r54267
"
"de0f878d1e785c42d044b5b0f95290f33658d147","2010-11-16 11:07:48+00:00","GUI: Fixed build failure in console due to missing header.

svn-id: r54268
"
"da90fa14055fc501e5b29209d0d817f62cb0c770","2010-11-16 14:06:59+00:00","LASTEXPRESS: Fix SequenceFrame leak in Entities code

- Add EntityCallData destructor to dispose of frames & Sequences
- Properly dispose of frames in Entities::resetSequences()

svn-id: r54270
"
"144ed3e22ddebc9afaf36ff8da225f856a07b2e7","2010-11-16 22:09:46+00:00","TINSEL: Fixed compilation with MSVC

svn-id: r54271
"
"f81b42dcafba4ddbffd12cc8b66f9b47c42f2314","2010-11-16 22:36:06+00:00","SCI: Fix for bug #3110215 - 'SQ4 German: endless flight on Estros'

svn-id: r54272
"
"c2d9c1b06b455a5f41feb460ff0875962b6d6357","2010-11-17 00:05:09+00:00","SCI: Added the ability to display original script bytecode in the 'disasm' console command

svn-id: r54275
"
"9d318497f715e7ce651714d8d09956f77d378bfc","2010-11-17 08:05:11+00:00","SCI: Unified the functionality and parameters of the disasm and disasm_addr commands

svn-id: r54276
"
"c36f072190b7a6b96c503151c3928215549e7a54","2010-11-17 08:10:36+00:00","SCI: Updated dissectScript() to handle synonym blocks

svn-id: r54277
"
"553d571c5047327a75f99192142301e385e6ffe4","2010-11-17 08:18:56+00:00","SCI: Specify that -1 means 'all maps' when listing base36-encoded resources

svn-id: r54278
"
"0470e47145b42a8e9af56c1553bc9944c6096cba","2010-11-17 08:30:08+00:00","SCI: The heap was a separate resource in SCI1.1 - SCI2.1 games only. It was later
merged into the script files again in SCI3

svn-id: r54279
"
"f44b084deba5a192ac1fe90377179733b694d243","2010-11-17 08:53:02+00:00","SCI: Some restructuring. Added some SCI3 placeholders/stubs

svn-id: r54280
"
"e4c967a3014eebff5e2c4fd02a3268749eed4122","2010-11-17 09:10:43+00:00","SCI: Added the SCI3 equivalent of initialiseObjects(), from a patch by lskovlun

svn-id: r54281
"
"59ad5085bc317488ebb006737cc130c9cb100a80","2010-11-17 09:28:04+00:00","SCI: Some more work on SCI3, based on a patch by lskovlun
- Added a SCI3 implementation of Script::load()
- Added a SCI3 implementation of Script::initialiseClasses()
- Removed some duplicate code

svn-id: r54282
"
"b707d6e7dc1baf2fb403ecf5e6e67c5ffa1d7019","2010-11-17 11:15:52+00:00","SCI: More work on SCI3, based on a patch by lskovlun
- Added SCI3 equivalents for access to object selectors
- Added SCI3 implementation of object relocation
- Added SCI3 implementation of Script::initialiseClasses()

svn-id: r54283
"
"a702ad51234383a4ea3223c17cea6d72253d8fda","2010-11-17 11:17:38+00:00","SCI3: added a SCI3 implementation of findGameObject(), based on a patch by lskovlun

svn-id: r54284
"
"5a554e3dbe3e9ad3375e43125ec79b07366f4827","2010-11-17 12:13:03+00:00","SCI: Change 'colour' to 'color'

All other instances already were spelled 'color' in the SCI
engine (and also most other parts of ScummVM)

svn-id: r54285
"
"5ceb54d088392844d826176d9e4ae1fad62fbd72","2010-11-17 12:13:23+00:00","TINSEL: Get rid of some global variables

These were actually all 'harmless' (i.e. where no obstructions
to RTL support). Still good to get rid of 'em!

svn-id: r54286
"
"dbddd758d1494f52c96b959b3d03f8e0156fb7cf","2010-11-17 12:21:37+00:00","GRAPHICS: colour -> color

svn-id: r54287
"
"ee4770ffb6be50008d129ba52a5dd6f46a7d16cd","2010-11-17 12:22:08+00:00","ENGINES: Change 'colour' to 'color'

Only changed this in engines where 'color' was/is already used
almost exclusively

svn-id: r54288
"
"58e4d9a97a90d98be37863a519d377fd4a313192","2010-11-17 12:33:55+00:00","SCI: Fixed the return values of Object::relocateSci3()

svn-id: r54289
"
"3d7f7b49fe86e2ec8d637d9d5df5c8cb11969734","2010-11-17 13:01:58+00:00","SCI: Make class table size OB1 workaround slightly more readable

svn-id: r54290
"
"bb9b7c24f9e301d35c1dcfb1a498df4af2a154db","2010-11-17 14:03:14+00:00","SCI: Added some SCI3 selector related information

- Added a TODO for the usage of the -info- selector in kClone and kDisposeClone in
SCI3 scripts, as it's no longer used in SCI3
- Added information about which of the selectors are missing in SCI3. There are
some more which are missing, but aren't used in SCI2-SCI3 anyway
- Some styling

svn-id: r54291
"
"c003032b4cb25e1ea9e3f9cdee904604c30fb4ff","2010-11-17 14:08:13+00:00","SCI: Allow SCI3 game scripts to run

SCI3 scripts do start up now, however they stop quite early, as there is still
missing functionality which prevents them from running fully. This will be useful
for debugging, though

svn-id: r54292
"
"47e137fd8e26471ff678b49355a2f01cfe1e6c39","2010-11-17 14:28:32+00:00","SCI: lofsa/lofss functionality for SCI3

- Updated detectLofsType() for SCI3
- Cleaned up op_lofsa and op_lofss and updated them for SCI3

svn-id: r54293
"
"e55a55a277b64c41e0ffe2b4e4c0cc4a87de0cc8","2010-11-17 14:48:28+00:00","SCI: Remove key modifier (e.g. num lock) status for keyboard function keys. This fixes function key input (e.g. F3) when num lock is on

svn-id: r54294
"
"430df91076c159b9b74aaed819e8dadf49c54c09","2010-11-17 15:02:58+00:00","SCI1.1 and newer games always ignore move count. The 'version' command works now in SCI3

svn-id: r54295
"
"e086ef00965a4ee77a241ea26bf50c6446030f43","2010-11-17 17:21:02+00:00","Adapt SCI property instructions (pToa etc.) to SCI3

svn-id: r54296
"
"4e445b94679f330ef0653821842d13056ff159bb","2010-11-17 18:22:22+00:00","MOHAWK: Apply patch #2988976: 'MYST: Fix drawing partial subimages'

svn-id: r54297
"
"61e02f0570a90c8691459bcdf348ebdd1bbcbf3f","2010-11-17 18:46:29+00:00","SCI: Fixed the speed in the intro of PQ2, version 1.002.011 (bug #3102071)

In version 1.002.011, global 3, used for timing, is incorrectly initialized
to 0, whereas it should be 6 (like in other versions). Initializing it to
the correct value fixes the speed in the intro. This has been based on the
patch for that version by NewRisingSun(NRS) / Belzorash

svn-id: r54298
"
"84a753d8409ba0dc9323b135bf730bff5dd39aa3","2010-11-17 19:29:07+00:00","CRUISE: Corrected uninit read of _polyStruct in ctp.cpp:49 detected by Valgrind.

This occurred during intro playback and was due to _polyStruct not being initialised to NULL during engine construction/initialisation.

svn-id: r54299
"
"ecb42156ce6f4530f3e5fcaec68544d2ab552565","2010-11-17 19:58:19+00:00","MOHAWK: Cache the Myst screen buffer

This is needed for use with sliders. The screen is now updated fewer times as well.

svn-id: r54300
"
"5ab823b16a78de112df27ee1cfdd75dc9609f3f1","2010-11-17 20:29:10+00:00","SCI3: relocate operand of the lofsa opcode

svn-id: r54301
"
"e551f3bf33296b7b627ea5cd1918c07a7ac686cf","2010-11-17 20:37:13+00:00","SCI3: Handle script exports correctly

svn-id: r54302
"
"8a6efcac65c91ed9760bd11824582f05dfd45320","2010-11-17 20:43:51+00:00","SCI3: Implement opcode to retrieve the info selector.

svn-id: r54303
"
"ba6de1bcdf075747e855ed681fa8926dd89cc906","2010-11-17 20:46:59+00:00","SCI: Added sanity checks for SCI3 scripts bigger than 64KB

- Extended the 'verify_scripts' console command for SCI3 scripts
- Added a check for such large scripts when scripts are loaded, with
an error for now, till a mechanism to support such scripts with a
16-bit addressing scheme is in place (e.g. overlaying, or splitting
scripts). Either way, such scripts should span over more than one segment

svn-id: r54304
"
"ddbda3eb152d94127369975cf4b436c3dfd072df","2010-11-17 20:50:24+00:00","SCI: Code formatting

svn-id: r54305
"
"bd844a8c92e4176f613d358425cc3eeb0ead2bda","2010-11-17 21:47:05+00:00","SCI: Call lookupArray() after allocateArray() when duplicating arrays

This ensures that the pointer to the element that lookupArray() returned
won't be invalidated in case the array is reallocated because of
allocateArray() - same issue as in kClone()

svn-id: r54306
"
"34c18f20d89f9b239a569d434cbf39236a08ed0b","2010-11-17 21:49:19+00:00","SCI: Added hacks in kClone/kDisposeClone for SCI3

svn-id: r54307
"
"8ebee136b6f6498bd99e667ac48298c8bdcd1133","2010-11-18 01:29:44+00:00","TOOLS: Update create_msvc batch files

- Add support for /clean switch to remove all created files
- Add switches for generating stable & all engines
- Add command line help
- Properly initialize answer variables to default choice

svn-id: r54308
"
"d9713965728b61b7f8e455287a595f250010399b","2010-11-18 05:47:16+00:00","MOHAWK: Cleanup Myst script handling

Scripts are now loaded from a central place and are properly freed at the correct time. This fixes a regression from r54152.

svn-id: r54309
"
"3631a5f90b031c7961557fa35e39c6d51bde090e","2010-11-18 07:17:28+00:00","MAIN: added early call to getAudioCdManager to prevent late allocation

This reduces fragmentation.

svn-id: r54310
"
"b77ef177ed6ccfb685ca88e7de568f9ff287d0d2","2010-11-18 07:17:53+00:00","GUI: changed tooltip to be deleted when inactive

Before, it could be instantiated after an engine loaded and then was never deleted, causing memory fragmentation. Also removed inner tooltip call to the GuiManager runloop, which makes the logic simpler since the tooltip is a bit of a hack. I had to remove it because deleting _tooltip in the inner loop (called from tooltip itself) is trouble.

svn-id: r54311
"
"5c8b4dbee7deaebd89f3f7a18bb51172859e6998","2010-11-18 07:52:04+00:00","PSP: added backtracing function for debugging

Currently not used by anything.

svn-id: r54312
"
"785dd683e1e3115726aa15b1693c80901ff79f8b","2010-11-18 10:15:33+00:00","TOOLS: Do not copy SCUMM MD5 data to web SVN module anymore

svn-id: r54314
"
"dde4f2211c058a109f5ee921ed3700c44cb83519","2010-11-18 11:31:46+00:00","MAIN: initialized more singletons early to prevent fragmentation.

svn-id: r54315
"
"50e6fe264b8d84cd40ea2b682a8c9ed2ee3dc7ae","2010-11-18 11:32:53+00:00","PSP: reduced fragmentation by allocating overlay just once

svn-id: r54316
"
"16d9e0f14a840e05c2d8bb38c55ab5696f29a0fa","2010-11-18 13:13:48+00:00","DS: Fix compilation despite use of 'forbidden' symbols

svn-id: r54317
"
"51a954c1dd07c475b01c898ac8614f5a2a83185b","2010-11-18 13:17:25+00:00","DS: Add some FIXME/TODO comments on changes that need to be applied to the DS backend

svn-id: r54318
"
"48416a7f038dba69a72aa9de2fef1dc1e9087405","2010-11-18 13:31:12+00:00","MOHAWK: Implement the old Mohawk bitmap format (thanks to fuzzie)

svn-id: r54319
"
"ffc6ed643f5b659d2bd95c50fda020c716b8dd4b","2010-11-18 13:48:49+00:00","MOHAWK: Remove unused drawRLE() function

svn-id: r54320
"
"bac018a3aa1dea0282f5ba49f9eb2001737e8bee","2010-11-18 15:42:52+00:00","DS: Two more 'FILE' related fixes/workarounds

svn-id: r54321
"
"4707b610fca45c0762e25994594fc58557945a02","2010-11-18 16:08:56+00:00","COMMON: Fix incorrect use of assert() macro

The assert() macro may be compiled to be empty. In that case, its
arguments are *NOT* evaluated. Hence, things like
assert(doSomething())
must not be used whenever doSomething() has important side effects.

Also document BufferedWriteStream::flushBuffer() and explain why it
exists parallel to BufferedWriteStream::flush().

svn-id: r54322
"
"a008d1405582e1a25e5dea57b19d03899f44542d","2010-11-18 16:38:03+00:00","ENGINES: Do not use MemoryReadStream where (Seekable)ReadStream suffices; avoid using 'using'

svn-id: r54323
"
"1621e7d5c0ea5aca51c72040fffd589f41573847","2010-11-18 16:58:25+00:00","Fix operator precedence problem

svn-id: r54324
"
"b8f00267398d2a1722ed550beee8178bc2a9ac6f","2010-11-18 17:01:30+00:00","DS: Port changes from 1.2.0 branch to trunk

svn-id: r54325
"
"152e52d0156e443f8dc52bf2bddf9ef21a32f853","2010-11-18 17:02:51+00:00","COMMON: Make implementation of Buffered*Stream classes internal

svn-id: r54326
"
"c5252071db22b31cc83c2687f93606b79194efe6","2010-11-18 17:04:00+00:00","SCI3: Add proper support for the calle instruction

svn-id: r54327
"
"0001a6b74d77166dfa427ca0c9bf55e32119fce3","2010-11-18 17:13:01+00:00","SCI3: implement setInfoSelector() for SCI3, fixes infinite recursion

svn-id: r54328
"
"24f4d97901f060607b13df596238ad982e573608","2010-11-18 17:15:35+00:00","DS: Avoid needlessly allocating temporary Common::String instances

svn-id: r54329
"
"b593b15c5091843724fbc8d9059c8132719919a2","2010-11-18 17:25:09+00:00","SCI: Slight formatting fix.

svn-id: r54330
"
"b8995eadfcc1fe4de1ce3e586db0c52ba2570f75","2010-11-18 17:30:00+00:00","DS: Remove write buffering in DSFileStream, use wrapBufferedWriteStream instead

svn-id: r54331
"
"316ba2e6a9ed8a3856ff216017ad8d5025b6314e","2010-11-18 17:31:12+00:00","DS: Replace GBAMPSaveFile by DSFileStream + wrapBufferedWriteStream

svn-id: r54332
"
"487feb38433aa6a704dcac5f7b8288ba81772078","2010-11-18 17:38:56+00:00","Get rid of a const_cast.

svn-id: r54333
"
"7444a06c61749dcaf90a68233c78e26540377913","2010-11-18 17:42:28+00:00","DS: cleanup

svn-id: r54334
"
"c02a2330849946b77070af8aa955ab1fef810f88","2010-11-18 17:45:07+00:00","DS: Add note that ARM_ADPCM is unused (and fix a typo)

svn-id: r54335
"
"a9dcb11c54274053152ca7e657bc4d19afb26e92","2010-11-18 17:56:21+00:00","COMMON: Turn BufferedWriteStream into a template class, with disposeParentStream as param

svn-id: r54336
"
"8cd20c70a9f179acf2980ee2c4557fae05295d30","2010-11-18 18:17:00+00:00","GUI: Simplify Tooltip implementation.

Formerly there was much special handling for the Tooltip dialog in
GuiManager::runLoop. This was replaced by overloading the event handling
functions in Tooltip. Also the Tooltip was adapted to be run like every
other normal dialog.

svn-id: r54337
"
"411866ee1881d248400da25f1889ad872ed54ee3","2010-11-18 19:06:38+00:00","MOHAWK: Cleanup bitmap surface and pack/draw function handling

svn-id: r54338
"
"e1030e53a537677c234ad39de419fb97b88a37b7","2010-11-18 19:12:14+00:00","BACKENDS: Implement logging API proposed by Max on -devel.

This commits a slightly modified patch from my patch tracker item #3104630
'OSYSTEM: Add logging API as proposed by Max on -devel'.

I was not able to test compilation on Android and SamsungTV, since there is no
toolchain for those on buildbot (or I was too blind to find them).

svn-id: r54339
"
"c2bdba2ea66ad6ae1d1d3c5babaafff2692f7adb","2010-11-18 19:18:11+00:00","SCI2: Treat SCI2 raw arrays (type 3) as strings in kArray

SCI2 strings inherit from arrays, plus kArray and kString are almost the
same, so this is all possible. This is needed, as SCI scripts copy
strings on arrays and then process them as such (e.g. in RAMA and LSL7)
However, we really need to merge SCI2 array types with the SCI2 string
types, and ultimately merge the code with the SCI1 array and string types.

svn-id: r54340
"
"49468fdffff855f3cc5c77044776531381f3fe8f","2010-11-18 19:20:30+00:00","SCI3: Added another previously unused opcode (0x27 / 0x4e)

svn-id: r54341
"
"d6592aaba6198c21a8ae6eda9f8d6fc46d5b1557","2010-11-18 19:27:01+00:00","M4: Do not use Common::SubReadStream where ReadStream suffices

svn-id: r54342
"
"9531b7766ca99e1c6aac78474a4c73188dbad00f","2010-11-18 20:24:27+00:00","PS2: Fix use of Ps2File::_sema w/o __PS2_FILE_SEMA__ guard

svn-id: r54343
"
"9fb1e2b17ea294b06297139198cd80c06783a714","2010-11-18 20:27:15+00:00","COMMON: Change wrapBufferedWriteStream() to always disposes wrapped stream

This is the only we need right now, and it saves a few bytes per
instance. The template approach I used before has the drawback that it
increases the binary size, which negates the benefit. Thanks to LordHoto
for pointing this out.

svn-id: r54344
"
"d94844f20596a24d14a056ce272eb0cf98acef4a","2010-11-18 20:40:48+00:00","MOHAWK: Add support for Riven 24bpp images (not yet used)

svn-id: r54345
"
"1fea2b733cca8c4c6f0b36e930c798091837a059","2010-11-18 21:32:42+00:00","GUI: Make activeDialog in runLoop const, since it should not be changed.

svn-id: r54346
"
"f0fea21639b003db4e378b3968014737e9999995","2010-11-18 21:38:00+00:00","SCI3: Fix new opcode 0x4e

svn-id: r54347
"
"c325d815d295e4b51f9c53cdf646210f37508fc2","2010-11-18 21:41:13+00:00","SCI: Fix debugger disassembly of property accesses in SCI3

svn-id: r54348
"
"94d3d82f5909c21a03306470dbec6a0941e77b16","2010-11-18 21:45:31+00:00","SCI: Slight formatting fix and use \t instead of a tab character in debugN.

svn-id: r54349
"
"9e418e6eafe1c2efcbfb4d490180ac89c1c62bf9","2010-11-18 22:26:58+00:00","SCI: Removed SCI3 hacks in kClone/kDisposeClone

svn-id: r54350
"
"4609f1113796fc5ae8f3b9177d1568b414a71971","2010-11-18 22:27:56+00:00","SCI: Added species selector functionality for SCI3

svn-id: r54351
"
"34272e2529faf823097280706f699e966290870c","2010-11-18 22:46:29+00:00","SCI: Added a stub for a new subop in kString, and disabled trackOriginAndFindWorkaround() for SCI3 games for now

svn-id: r54352
"
"5c7d7a85db4f668c5a54279a69b4cfe7d7c6abef","2010-11-19 00:10:09+00:00","COMMON: Push #include stream.h from zlib.h to zlib.cpp

svn-id: r54353
"
"aef1ca4c4b43c56962dff25b4c02e24ed7238936","2010-11-19 00:20:15+00:00","COMMON: Cleanup XMLParser code

* Get rid of obsolete comment about external documentation
(link was broken for at least one year)
* Remove unnecessary Common:: prefix
* Push #include stream.h from .h to .cpp

svn-id: r54354
"
"a72de47d5dba28b635bea0127fbb7d1a71aef8ed","2010-11-19 00:38:17+00:00","COMMON: Cleanup EventRecorder

svn-id: r54355
"
"5ea4b576c31a93b5a03bebd91d350906c37d15a6","2010-11-19 00:49:16+00:00","LASTEXPRESS: Include common/events.h instead of common/EventRecorder.h

svn-id: r54356
"
"785590e504ff2c275ee2a4101ecd4827666230b4","2010-11-19 01:03:05+00:00","COMMON: Push include file.h and fs.h from translation.h to translation.cpp

svn-id: r54357
"
"a0df86955f80dedaa00e6f7593e96b90b697a83a","2010-11-19 01:37:04+00:00","ALL: Push down deps on stream.h from .h to .cpp files

svn-id: r54358
"
"769b460f0d5d751ebf0ef2ad174ca013f00172d9","2010-11-19 03:52:06+00:00","MOHAWK: Implement another Riven demo external

xademoquit() is called from card 12 when clicking anywhere but the system requirements (which is why I hadn't noticed it earlier). I've also stubbed another demo function (xaexittomain()), called from an unused card's script for completeness.

svn-id: r54359
"
"c87ef6f3071b715f40b95dae65be853cfa12efc9","2010-11-19 07:43:47+00:00","SCI: Added KQ4 Atari ST version from bug report #3110941

svn-id: r54360
"
"3b07056a472affc667ac5ee690c4761eea0ebc21","2010-11-19 08:18:24+00:00","SCI: Moved the Object class in a separate file

svn-id: r54361
"
"763ddd220361e9764b19ccbe05be80ce5f897d5f","2010-11-19 08:19:14+00:00","SCI: Fixed comment

svn-id: r54362
"
"16ee411187608220e936b366bfa8afb5da5bce19","2010-11-19 10:23:33+00:00","TOOLS: Added create_mads tool for MADS/M4 engine

svn-id: r54363
"
"6ec8ec416bfdd4241d451de7ba501873fbae38b2","2010-11-19 10:27:22+00:00","SCI: Added support for script -> string copying (used by late SCI2.1 and SCI3 games)

svn-id: r54364
"
"c19e8377f9cc947f0110247af8ce5fb21c40e64e","2010-11-19 10:28:43+00:00","SCI: Added pointer arithmetic support for SCI2 strings

svn-id: r54365
"
"2a6519ca2e33298b43f410cad279eda6e0b10bb1","2010-11-19 10:55:21+00:00","LASTEXPRESS: Simplify current frame calculation in Animation::process

(per Max suggestion)

svn-id: r54366
"
"2687c987ebf0d1810d5e184d1c10d4164188cd37","2010-11-19 10:55:38+00:00","LASTEXPRESS: Add missing queue reset in Entitites::resetSequences

svn-id: r54367
"
"9e5b554dc357850b7ac5997fbc1a2df58fcf02ab","2010-11-19 10:55:56+00:00","LASTEXPRESS: Poll events when loading savegames to prevent freezing the application

svn-id: r54368
"
"fbf5a453c7213a75dc2b05a34171b98e20ce3864","2010-11-19 12:46:36+00:00","SCI: Implement the GetConfig call for LSL7

svn-id: r54369
"
"1a6597ebc259779c96ec210785a4c2004a1345ee","2010-11-19 12:47:47+00:00","SCI3: Implement new opcode 0x4c.

svn-id: r54370
"
"714263d5e908c68f986cef165e34d381878a5f32","2010-11-19 12:47:52+00:00","COMMON: Use user include instead of system include to remove lots of compiler warnings for symbian

svn-id: r54371
"
"824a4009c9d32806d2677a97cbff434de98fad90","2010-11-19 12:49:33+00:00","SYMBIAN : Remove Symbian FatalError implementation (not really used anymore for any current symbian phone)

svn-id: r54372
"
"84d4a4a89faa5790b4820eb1e9522e83826fb442","2010-11-19 12:49:46+00:00","Implement a couple of NULL checks in kArray

svn-id: r54373
"
"5ecac66c6a489fb0bad44ffbdb9d6d2d225a4aa5","2010-11-19 12:52:17+00:00","Some subfunctions changed positions in SCI3 kString. WIP.
And with this, LSL7 starts up. Yeah, baby!

svn-id: r54374
"
"c7cf764890c2539c3b6fb824fd034cf182224898","2010-11-19 13:03:31+00:00","SCI: Only handle seg_type_string if ENABLE_SCI32 is defined

svn-id: r54376
"
"5d53673e932eca3dd3ac014785159377f949694e","2010-11-19 13:23:20+00:00","SCI: Also send system strings to kString(). This makes LSL7 continue into the actual game! :D

svn-id: r54377
"
"17d8fafedd4329998071f9f73c63c6c54afbf2bf","2010-11-19 13:23:33+00:00","SYMBIAN : Updated for proper FORBIDDEN handling, added cdaudio support needed, updated version nr

svn-id: r54378
"
"3c7f9aa34af4976b960231f15ea4e7fb8e4cff51","2010-11-19 13:56:11+00:00","SCI : data field is only supported if building for SCI32

svn-id: r54379
"
"6aa770751fbb830436f305d64369b4332cbc8d86","2010-11-19 13:59:02+00:00","TOOLS: Add stubs for external Pre/Post build scripts in Visual Studio

svn-id: r54380
"
"ec9ad50c145be10985666b08ee2dbf0f9129c551","2010-11-19 14:12:33+00:00","TOOLS: Move Visual Studio pre/post build events scripts to external files

svn-id: r54381
"
"a24d5ba2f402d76bdc38e2e051f5e22389671207","2010-11-19 14:19:02+00:00","SCI: Only compile kGetConfig for SCI32

svn-id: r54382
"
"0f26184f8da44175af235378a0620beb7715fb11","2010-11-19 16:47:03+00:00","BUILD: Revert r53427.

create_project will now use a different approach than recreating
base/internal_version.h. This is also because recreating this file might
result in accidental commits of the modified file and thus 'screw up' the
version string on different systems.

svn-id: r54383
"
"111384473bb65741f7f2b945e1c00e6aeccc805c","2010-11-19 16:52:09+00:00","PSP: Update README.PSP.in with the latest changes to README.PSP.

svn-id: r54384
"
"2180b2d6b534d3786f89d02fe508c60c68b7ff89","2010-11-19 17:03:07+00:00","COMMON: Split common/stream.h into several headers

svn-id: r54385
"
"dfb2b9cd2f0b5082df27f2928732c9f69b110b1c","2010-11-19 17:09:47+00:00","PSP: Remove tabs from README.PSP.

svn-id: r54386
"
"199a1c761960f1928d8ce80d607f6eedadc67957","2010-11-19 18:19:34+00:00","TEST: Make cxxtest work with Python 3.1 too.

svn-id: r54387
"
"7fb352e38a8dcfb8a980c60d15b071ad1a427386","2010-11-19 21:25:36+00:00","MOHAWK: Implement an image cache system

This should greatly improve the performance in Myst (especially Myst ME, which uses the slow JPEG decoder). This should also slightly improve the Riven performance; the sliders now work a bit better.

svn-id: r54388
"
"e5177eebfd285a2010354302d473ab2265c8d3b3","2010-11-19 23:49:04+00:00","HUGO: Start using endianness-safe read/write functions

svn-id: r54389
"
"c8ef70ea1c7c6d94a0f0cddfeb17d8b5ae7241f1","2010-11-20 00:20:05+00:00","SCI: Some minor fixes for Phantasmagoria 2 (which doesn't work at all, since it has some differences in its views)

svn-id: r54390
"
"b2ba35124c707ca33e0372690a0eb25e316bce8a","2010-11-20 00:52:05+00:00","SCI: Fixed timer bug #3109139 - 'SQ4: Crash after exiting Skate-o-Rama during chase'

svn-id: r54391
"
"a2367d26f9d7f8523c313a7b82d0b719de1e6e15","2010-11-20 03:14:03+00:00","TINSEL: Preliminary functionality for reading BE data files

svn-id: r54392
"
"3a0b28f9f94f40867a9c64ea55dfa3473e090a3b","2010-11-20 10:00:24+00:00","TOOLS: Minor fix to create_mads makefile

svn-id: r54393
"
"29c6ab433e7bd1bb7ae2a3074275662d8d8907c5","2010-11-20 10:10:18+00:00","TOOLS: Fixed some compiler warnings in create_mads tool

svn-id: r54394
"
"d886c037dd43aa76550c8dcea7b59f8f53f1c6fa","2010-11-20 19:52:31+00:00","SCI: Fix ScummVM freezing during the credits scene in EcoQuest 1 (bug #3101846)

svn-id: r54395
"
"0f2bcd2f9fcc6d5c8ba67b75f625290db126d231","2010-11-20 23:53:14+00:00","MOHAWK: Cleanup resource handling

- Renamed getRawData() to getResource()
- Add a getResource() and hasResource() function for named resources
- Other minor formatting changes

svn-id: r54396
"
"5616bde4e7ec28f886aeb2c98c6a2fec52f9fa9d","2010-11-21 00:02:25+00:00","MOHAWK: Fix Living Books v1 sound (courtesy of fuzzie)

svn-id: r54397
"
"d275461958b650023373383ed2243cc77fd5c736","2010-11-21 00:44:04+00:00","SCI: Added a heuristic to detect the modified late SCI2.1/SCI3 kString/kArray kernel functions

svn-id: r54398
"
"cd69472be91fc33637db8063bf0e025fa4dba5e4","2010-11-21 00:47:56+00:00","SCI: Adapted kArray/kString to use the new heuristic for late SCI2.1/SCI3 games, and updated their subops accordingly

svn-id: r54399
"
"ffcd6783c7620a5e844916b0395f01f092e46347","2010-11-21 00:49:54+00:00","SCI: Removed incorrect pointer arithmetic support for SCI2 strings

There was never pointer arithmetic support in SCI2 and newer games

svn-id: r54400
"
"97d31c6ac66a9acc514f6cd6b98b12a49e323faa","2010-11-21 00:58:06+00:00","SCI: Added the kString/kArray type in the 'version' console command

svn-id: r54401
"
"ac7c488c7c646465a112c48e947d0da055379a8b","2010-11-21 02:06:20+00:00","SCI: kArray wasn't changed in late SCI2.1/SCI3 games (thanks to waltervn)

svn-id: r54402
"
"57d9de00f8234fa506f5dc5dd0b6ed390a364ede","2010-11-21 02:07:55+00:00","SCI: Removed the correct subops from kString in late SCI2.1/SCI3 games (thanks to waltervn)

svn-id: r54403
"
"f2498b54cec805d14cfdb0d99d9dd455f4b29a95","2010-11-21 02:08:35+00:00","SCI: Added 3 uninitialized temp fixes for the RAMA demo, which is now working

svn-id: r54404
"
"cb2a20cbd05bd8d137eda0adf75609186271255d","2010-11-21 05:31:13+00:00","CRUISE: Bugfix for #3064846 - Raoul appearing in Book screen

svn-id: r54405
"
"788598a6899d7252164b1727ccaf1f7eb2d2b1c4","2010-11-21 10:31:02+00:00","SCI: Fixed the 'version' console command in SCI1.1 and earlier games

svn-id: r54406
"
"8045c4f87a0d2ff7bf446c74a0dfd31aa9db69e2","2010-11-21 11:04:52+00:00","SCI: Fix for bug #3037996 - 'QFG2: Crash during import dialog after time (import works)'

svn-id: r54407
"
"e48930c16e8912b76e41f8bc7f080bc57e703f9b","2010-11-21 12:05:15+00:00","CRUISE: Fix Memory Accesses Errors and Leaks Reported By Valgrind

Most of these fixes are fairly simple, though the clamping of ArrayStates accesses in object.cpp _might_ cause regressions. None are obvious on basic playtest check, but the game will need a full playtest.

svn-id: r54408
"
"3d8366750484741b0c099afb4fb30ce26bc1ed2f","2010-11-21 12:51:49+00:00","CRUISE: Slight formatting fix.

svn-id: r54409
"
"a00668331c86c1783e7fe383eca5be24f41eb51b","2010-11-21 18:42:00+00:00","QUEEN: Correct uninitialised read in Queen Adlib driver found by Valgrind.

svn-id: r54410
"
"8c0160cca6245480c821f3ee0f39f66db30d967b","2010-11-21 22:12:31+00:00","I18N: Add Brazilian Portuguese (from patch #3114669)

svn-id: r54411
"
"44669ac54d849999c0c75c4f914bef4bd6d3a2d8","2010-11-21 22:16:02+00:00","I18N: Backport add Brazilian Portuguese translation

svn-id: r54412
"
"0b06a1fe7b8295ab1c26c9a76ec2e5a3b2716638","2010-11-21 23:43:14+00:00","SCI: Proper fix for the QFG2 character import screen crashes (bug #3037996)

Script 944 does constant reallocations whenever the selection changes,
which leads to all sorts of unpredictable crashes. Thanks to waltervn for
his help on this issue

svn-id: r54413
"
"d8afddac634a089fd75f1c51a49b7ee1a2929401","2010-11-22 00:20:00+00:00","SCI: Patched the QFG3 character import screen the same way as with QFG2

This prevents random crashes and slow refreshing, same as with QFG2

svn-id: r54414
"
"eba5c441b27d0c7ec82b4d7abd0f51bfee2dc8ba","2010-11-22 10:23:53+00:00","SCI: Fixed bug #3044050 - 'SQ4FLOPPY: Crash while flying in Skate-o-Rama'

Fixed Object::locateVarSelector() for SCI0-SCI1 games, as it wasn't checking the
class for object variables

svn-id: r54415
"
"cc6c7e33bff84f12512d01058c3f5a384ff36c83","2010-11-22 17:50:30+00:00","MOHAWK: Switch slider bitmap ID's to matching via string; fixes some versions

svn-id: r54416
"
"9d4827b5e1b56b5922aeced5a1d80cbfeaeb1405","2010-11-22 17:51:54+00:00","MOHAWK: Fix gspit dome from always opening

svn-id: r54417
"
"cb843daec0e87747350c4432d9c4111b894c04b5","2010-11-22 18:07:33+00:00","MOHAWK: Have MohawkResource::open() return a bool for success/failure

svn-id: r54418
"
"26bf0e8176f9082228021ba1a5b28c39dd3b6768","2010-11-22 18:09:31+00:00","MOHAWK: Fix a typo fail (thanks, fuzzie)

svn-id: r54419
"
"fe17f26af8559a74e8091f0f0fc7c628c54ea0c6","2010-11-22 18:39:06+00:00","SCI: Added support for the keypad +/- keys

svn-id: r54420
"
"8bb43361cb02bbbb8964944de3b058bbab8f924d","2010-11-22 19:50:57+00:00","HUGO: Suppress useless enums, cleanup

svn-id: r54421
"
"7711cc57d6777efa8591ea794912b1400faa250e","2010-11-22 22:49:24+00:00","HUGO: Rewrite saveObjects() and restoreObjects()

This fixes (at least for me) save and restore. saveEvents()
and restoreEvents() still have to be rewritten.

svn-id: r54422
"
"569ad6caba1287810ff09b76133a0dae675da1f9","2010-11-23 11:14:17+00:00","TOOLS: Extract revision from svn/hg/git at build time in Visual Studio

- Simplify custom file output (for VS2010)
- Fix postbuild.cmd error output

svn-id: r54423
"
"3cb5c64477845e5306d75f394692b2e57267ffb8","2010-11-23 11:22:31+00:00","TOOLS: Move MSBuild and Visual Studio project providers to separate files

- Add option --build-events to run custom pre/post build events as part
of the build (defaults to false and VS2010 only ATM)
- Only run build events as part of VS2010 build with all engines enabled
(ie. dev build)

svn-id: r54424
"
"500ae85c8669dbdef66d07cff189c804936d5818","2010-11-23 11:47:52+00:00","TOOLS: Add missing files for create_project

svn-id: r54425
"
"b6d97e492c6c2c7c03b3f9308b5bfefece2ea435","2010-11-23 11:54:20+00:00","TOOLS: Update create_project makefile

svn-id: r54426
"
"c140e43a35480d0a78dd85e99db94f2a61fb0cda","2010-11-23 12:07:21+00:00","SCI: Added entries for the GOG versions of Phantasmagoria 1 and 2 (patch #3112884)

svn-id: r54427
"
"23bd8a1c26cb949eefe21e1b3a0047b73075dae7","2010-11-23 15:47:54+00:00","SCI: Ignore polyphonic/channel aftertouch (0xa0 / 0xd0) in the MIDI driver, like in the Adlib driver. SSCI doesn't handle these, so we shouldn't handle them either

svn-id: r54428
"
"d438b739cf7c3a71627eae58bcf19d8fb5ad9828","2010-11-23 16:03:30+00:00","SCI: Also send a sustain off on a notes off event (patch from bug #3116608)

svn-id: r54429
"
"799757132fee6635e6351353d092105f8e4e834b","2010-11-23 18:15:45+00:00","MOHAWK: Remove the no longer needed RLE8 hack

svn-id: r54430
"
"90cabfef389093cc2fc412a7003d8e1feff8ca80","2010-11-23 18:29:45+00:00","MOHAWK: Find the small marble images by string; should fix German version

svn-id: r54431
"
"55e3ed001624df8b8222a1556a371aec8aab4983","2010-11-23 21:37:26+00:00","I18N: Fix generation of translation template file from source code

This fix a regression introduced when GuiManager.cpp was renamed into
gui-manager.cpp

svn-id: r54433
"
"54e0390752b299d739daaf211e6b84b485738ada","2010-11-23 22:25:10+00:00","SCUMM: Replace Common::File uses by SeekableReadStream and SearchMan

svn-id: r54434
"
"09ba53dcfb3acb4d4041c30ccde095e89e89517c","2010-11-23 22:25:36+00:00","SCUMM: Use explicit XOR decoding code in BaseScummFile subclasses

This made it possible to turn some MemoryReadStream pointers into plain
SeekableReadStream pointers.

svn-id: r54435
"
"ae919f3ebda7d74644816b35f4b8815ff2b1d258","2010-11-23 22:25:53+00:00","COMMON: Remove XOR decoding capability from MemoryReadStream

svn-id: r54436
"
"c9fdaa74178c702d7f6ce136cedc9ea1fbbde6ca","2010-11-23 22:26:09+00:00","TINSEL: Restrict use of memstream.h & substream.h

svn-id: r54437
"
"382982d6e3b99ae8890133e08c063332c00aa221","2010-11-23 22:26:27+00:00","COMMON: Add ReadStreamEndian mixin class

svn-id: r54438
"
"b485d0ee49f305bcb241447988309eac9c38c4c7","2010-11-23 22:26:43+00:00","TINSEL: Turn TinselFile into a SeekableReadStream

svn-id: r54439
"
"5d791cb090a6ead8594b956316f3735382703e8d","2010-11-23 22:27:00+00:00","TEST: Add/extend MemoryReadStream(Endian) test cases

svn-id: r54440
"
"12d5151ff48adaf78bf75248155a1a78d8e3fbd2","2010-11-23 22:27:20+00:00","COMMON: Remove default value for endianess in ReadStreamEndian subclasses

svn-id: r54441
"
"830c39a6871ce6cae5d22bdf0f326fa063582ea7","2010-11-23 22:27:40+00:00","SWORD2: Reduce dependencies on common/memstream.h

svn-id: r54442
"
"121056c12f5a624898c28a3a9a2b8b9389a97f6f","2010-11-23 22:32:39+00:00","MOHAWK: Pass objs by const ref not by value

svn-id: r54443
"
"be822d8bc27bf1ccc5972dd2da1e9183e034585e","2010-11-23 22:32:55+00:00","MOHAWK: Pass Common::Strings directly to SaveFileManager, instead of first converting to a C string

svn-id: r54444
"
"1cc80de1d912ecbc962d0d660f282c916a140c50","2010-11-23 22:33:10+00:00","COMMON: Add SeekableReadStreamEndian class

svn-id: r54445
"
"a914b97559276947b24062861162cd92c6c7dea1","2010-11-23 22:33:26+00:00","TINSEL: Fix support for file names with a trailing dot

When copying data files with 8.3 names from a CD, they sometimes end up
with a trailing dot, e.g. 'INDEX.' instead of 'INDEX'. Comon::File
supports this, but in r54392 Tinsel stopped using Common::File.

This commit also removes the useless SeekableSubReadStream wrapper
around the actual file stream.

svn-id: r54446
"
"d66c43eb5e121a3e680e1fabacc5b4cecc8c1276","2010-11-23 22:42:03+00:00","SCI: added a workaround for script bug #3116892 - 'SQ4 German: crash when shooting with laser', by applying the one for the English version

svn-id: r54447
"
"f20da5f98c8a27917e425109659ae2a685d4ec08","2010-11-23 22:47:20+00:00","I18N: Add translation of the SCUMM help dialog.

svn-id: r54449
"
"64f959ea0ee9c7810f9ddfb18c14fc228121ac63","2010-11-23 22:49:45+00:00","I18N: Updating French, Portuguese and Hungarian translations.

All other translation files are also updated from the template file but without
change in the translations.

svn-id: r54450
"
"d93698fc1c8190fdc8b14a613c4455882ceca166","2010-11-24 00:08:26+00:00","BACKENDS: Add a basic logger implementation.

This is the logger I posted at our patch tracker. Item #3115757
'OSYSTEM: Basic logger'. It includes the changes proposed by Max.

It is currently not hooked into any backend, since we still need to decide
where to log files, whether to have multiple log files etc.

svn-id: r54451
"
"fbd1ae7eb6ff09b62599721fa49d8d1ef18b488c","2010-11-24 09:39:47+00:00","LOG: Reset _startOfLine when opening a new log file

svn-id: r54452
"
"fcd8a04c64edda33fb6211c79a781ee6dca04b2e","2010-11-24 11:19:27+00:00","SCI: Read MT-32 reverb data correctly (patch #3117434)

svn-id: r54453
"
"332a438ccf0b2def3237f69661e836c7ed444d7a","2010-11-24 11:26:48+00:00","SCI: Added a TODO for the default reverb value

svn-id: r54454
"
"7fc171e3bc84be94162288397af679d437e537b4","2010-11-24 11:57:11+00:00","SCI: Some slight changes to get the 'find_callk' console command working in KQ5

- Ignore invalid object in KQ5 script 784
- Script 980 looks to be an unused leftover, as its object contain references to
classes placed in script 988, which is missing

svn-id: r54455
"
"642d15e43f8f6d1b989eb4e64edc095e74da5a61","2010-11-24 14:15:46+00:00","SCI: Added a getReverb() accessor to the SciMusic class

svn-id: r54456
"
"364d37b302af3fec94b2a9cb441df3e960803446","2010-11-24 14:21:31+00:00","SCI: some changes to the way reverb is handled

- 'Invalid' SCI reverb values (127) are properly handled now
- SCI kDoSound(reverb) sets the global reverb (renamed it accordingly)
- kDoSound(reverb) can also return the current reverb if no parameter is sent

svn-id: r54457
"
"c3cb4c92a8224d1e892871bd8ab26b3d0cf0e6a9","2010-11-24 14:38:08+00:00","SCI: Placed some selectors added in SCI1.1 in a separate table

svn-id: r54458
"
"9493b9add55e1254ad56b4ffdf8b076b22c08546","2010-11-24 14:51:29+00:00","SCI: Moved handling of special reverb value 127 outside of the MIDI driver

svn-id: r54459
"
"1ebae78ff199385d451f844deef19ebf6b8e611e","2010-11-24 15:12:43+00:00","SCI/SOUND: Applied patch #3117577 - 'SCI: MT-32 plays 'warble' of notes when music resumes', with some slight modifications

This is only used by SCI for now, but it is probably correct to apply this for
all engines, thus an appropriate TODO has been added

svn-id: r54460
"
"dcd132697056517008df13230a05811d06fbf4d5","2010-11-24 16:01:30+00:00","SCI: Some renaming and added several TODOs concerning reverb

svn-id: r54461
"
"f5b1b9fa7521efe722ef3b530733412f624c9fe0","2010-11-24 21:12:21+00:00","MOHAWK: Change the unused version detection field to 'appName' for use with LB

svn-id: r54462
"
"169c6be32b99e898a3a52ba394ea6c025642e561","2010-11-24 21:32:34+00:00","SCI: Fixed a bug in the script disassembler

svn-id: r54463
"
"75082609544bc64e3cb8d72e424f1fd81ff4126f","2010-11-25 01:19:45+00:00","SCI: Added support for the alternative GM tracks of the Windows version of KQ5CD (bug #3041239)

Note that the empty GM track for the Sierra logo makes the game hang, so the
MT-32 track is used, which sounds awful

svn-id: r54464
"
"ff58eea2ce7a00660dba3f3c6325a0709450c6e0","2010-11-25 01:31:03+00:00","SCI: Set _useMT32Track correctly for KQ5 Windows, thus simplifying the code

svn-id: r54465
"
"52898b6336e11c19b1c215898481aac60a0ccced","2010-11-25 02:21:07+00:00","SCI: Fixed digital audio at the beginning of KQ5CD and removed a hack for the Windows version

svn-id: r54466
"
"3abab136da51b9dcb5589052c8645a8d30d904bb","2010-11-25 02:35:18+00:00","GUI: Changed wording of 'Disable dithering' to 'Enable undithering'

svn-id: r54467
"
"4c733c427862fa45315e56bcba07e03bb3872ed2","2010-11-25 02:59:56+00:00","MOHAWK: Cleanup image surface handling

- Renamed ImageData to MohawkSurface
- Added offset x/y fields to MohawkSurface
- The image cache now stores MohawkSurface pointers
- Switched Living Books to 8bpp mode (it requires that in the end anyway)

svn-id: r54468
"
"07ea74d37b636f27c4fc0075f35ec4f4ad50501b","2010-11-25 04:49:11+00:00","MOHAWK: Refactor cursor handling

Cursor handling has now been moved to a new CursorManager class (which is subclassed for Myst/Riven) from the GraphicsManager classes. This will be needed for Living Books which will have a class for Windows and Mac cursors (coming soon!).

svn-id: r54469
"
"5ae718d148a5c7a0b5c1facc1ecc40dcda4c1b28","2010-11-25 11:18:20+00:00","MOHAWK: Add missing include, which prevented the CursorMan destructor from being called

svn-id: r54470
"
"8c4ebc434dbe595ccee6244a72384309dcebbb43","2010-11-25 11:19:46+00:00","SCI: Fix bug in MT-32 checksum computation. Thanks Sven for finding this.

svn-id: r54471
"
"69da6a6dd60174265afc91ea4c49bc8015d6f2f6","2010-11-25 12:44:17+00:00","SCI: added Windows entries for all games with alternate GM tracks

These are the CD versions of EcoQuest, Jones, KQ5, Pharkas and SQ4
Also, added AGDF_CD to all CD versions that have corresponding floppy versions

svn-id: r54472
"
"d9f429716f6950aef1753a6ea91fd8374c51ab03","2010-11-25 13:01:45+00:00","SCI: Fixed compilation

svn-id: r54473
"
"29395974ca14cec08d08a13e79e5c4bfee0d7657","2010-11-25 14:16:46+00:00","SCI: Remove the Windows versions of Freddy Pharkas. This one has an alternative sound track, but it's handled in a different manner

svn-id: r54474
"
"394daa57044dc83e971041bcd62fbd12ee6b3174","2010-11-25 14:19:02+00:00","SCI: Added engine method isCD()

svn-id: r54475
"
"2c2f3a97e69184c23342fe77185cc37e87ed7813","2010-11-25 14:22:09+00:00","SCI: Added support for the alternate Windows MIDI soundtracks of the CD versions of EcoQuest, Jones, KQ5 and SQ4

svn-id: r54476
"
"16006c78f5e64bbc7f012d1bf6c4a43bbe17ae31","2010-11-25 15:59:30+00:00","SCI: Fixed a bug in the show_instruments console command

svn-id: r54477
"
"601494cad4968ac2246a0c0820bfd9f01ec249ad","2010-11-25 16:09:45+00:00","SCI: implemented reverb handling and related functionality

svn-id: r54478
"
"189c9bf216e8c802cff7087ccb6c11805ecbc0ca","2010-11-25 18:40:56+00:00","OSYSTEM: Add API to query the system locale.

I also adapted the SDL backend to implement the API.

svn-id: r54479
"
"ebbd504b90a85e84532170a0535ece9effd2e907","2010-11-25 18:42:05+00:00","COMMON: Adapt translation manager to use the OSystem for language detection.

svn-id: r54480
"
"1cf26f67e0298ae0f9ced6190c5f7a4e92ee6098","2010-11-25 22:14:38+00:00","SCI: Initialize global reverb correctly. Fixes bug #3118700 - 'SCI KQ5: Assertion in midi.cpp' (regression from r54478)

svn-id: r54481
"
"11ac03b7aba61570f54eaf06984a818f881a6166","2010-11-25 22:16:22+00:00","SCI: Global reverb can't be 127. Some cleanup

svn-id: r54482
"
"3a8648c4db69160e31e2d9b59f40e192a5060514","2010-11-25 22:17:23+00:00","SCI: Initialize reverb in the music driver correctly. Based on a patch by waltervn

svn-id: r54483
"
"af15ac6f6aa693ee0dd1222ee892d63432661c8c","2010-11-25 22:23:14+00:00","SCI: Some reverb-related changes in the MIDI driver, based on a patch by waltervn

svn-id: r54484
"
"069309f88a218681b1857b63dff98be3a445468a","2010-11-26 00:05:27+00:00","SCI: set the reverb setting of the current song when a relevant event is fired from the MIDI stream

svn-id: r54485
"
"e793d62c8d5f6406f9ff78dce8d8c7972458463f","2010-11-26 00:10:51+00:00","Fixed bug with r54485

svn-id: r54488
"
"425f28405036a0ee6422fe848476561100ade6ab","2010-11-26 00:51:42+00:00","SDL: Hook up file logger to log on UNIX-like systems.

As discussed on -devel this always logs to ~/.scummvm/logs/scummvm.log.

svn-id: r54489
"
"03df4955636db7a087a4b77d86ff6e62e43140a5","2010-11-26 00:52:04+00:00","SDL: Hook up file logger to log on Windows.

For now the log file will be either '%APPDATA%/ScummVM/Logs/scummvm.log' or
'%USERPROFILE%/Application Data/ScummVM/Logs/scummvm.log' to match the
location of the default ScummVM configuration file.

svn-id: r54490
"
"abe6baafb917270a86dfe2c35bf9aa5c326f3154","2010-11-26 06:08:04+00:00","MOHAWK: Enable the drawImage debug command for all LB games

svn-id: r54491
"
"1d4e452c780c346f977dc641822adf16532dff30","2010-11-26 06:41:45+00:00","SCI: Send the SCI0 reverb init after reading the reverb data

svn-id: r54492
"
"ce9f7c0df155a2b61a9d97f3fa7db1cb47fc3655","2010-11-26 10:03:24+00:00","SCI: Fixed keyboard input when numlock is on, and cleaned up the way some special keys are translated

svn-id: r54493
"
"10476048f89ae0987d8883446ceba4594ff94a6e","2010-11-26 10:40:19+00:00","I18N: Fix language detection in UNIX (not everyone speaks German yet)

svn-id: r54494
"
"d3b14e1445e10640847ab16545c769da2d32592d","2010-11-26 12:37:24+00:00","SCI: Implemented FR #3101338: 'King's Quest 6 Windows Mouse Icons'

Added an option to use the original Windows cursors in the Windows version of KQ6
Also, added an update on how the Mac cursors are handled (perhaps the handling is
the same)

svn-id: r54495
"
"5562f9e087cf486da68b4d1ed08a34ac260d1e93","2010-11-26 14:25:18+00:00","SCI: Added a define to turn off channel remapping (for debugging)

svn-id: r54496
"
"21c6bbde5df290d02bb3275e22abfc7d151e8099","2010-11-26 14:28:33+00:00","MOHAWK: Fill in meanings of known resources

svn-id: r54497
"
"3d38a383bb8303492272861d08303122c7a2d48a","2010-11-26 14:35:28+00:00","SCI: Only filter channels for early SCI0, as GM currently uses all channels.

svn-id: r54498
"
"52b89206c0525b175187401b3a64b706abf95719","2010-11-26 14:35:46+00:00","SCI: Pull reverb default directly from control channel.

svn-id: r54499
"
"34db1820eb55eeebde93754955d50bccef59a3e7","2010-11-26 15:06:25+00:00","COMMON: Add an isBE() function to get the endianness of a ReadStreamEndian

svn-id: r54500
"
"73ee52c6703804606532a5ee803570a8db966a64","2010-11-26 15:06:35+00:00","MOHAWK: Fix non-LZ compressed old Mohawk bitmaps (thanks, fuzzie)

svn-id: r54501
"
"a0cc07268d53a369ae180c8eddeb29e3f8b94889","2010-11-26 22:15:31+00:00","HUGO: Clean up Scheduler

svn-id: r54502
"
"bab5aa433bb4319edfddfde7ed03cfeed337a884","2010-11-26 23:17:16+00:00","HUGO: Get rid of initial savegame

svn-id: r54503
"
"fd6157e77897380df5c405fe073d5bb728323d8d","2010-11-26 23:30:31+00:00","HUGO: Avoid using 'short' in function definition

svn-id: r54504
"
"b70aa0d419611e3314b78eb02271a76be0ea5319","2010-11-26 23:57:39+00:00","HUGO: Add Win save/restore behavior to the Dos versions

(useful to debug the lake screen)

svn-id: r54505
"
"83206e20cbbed36faa429ba6ea95cdecea3f04ad","2010-11-27 08:27:13+00:00","HUGO: Fix warning

svn-id: r54506
"
"8b7c42f0b06a1b162164c16cbff0d457dcfacbde","2010-11-27 16:48:38+00:00","TOOLS: Fix 'Boat' bug in H1 Dos

H1 Dos is now completable

svn-id: r54507
"
"0d4ef4854a381e0b206a966e8d0a081b44d2a1df","2010-11-27 17:23:24+00:00","MidiParser: updated comment concerning note on events in jumpToTick()

svn-id: r54508
"
"49afe9ccffbf9f0bc9416f925a6b56bfdb02db7d","2010-11-27 17:29:42+00:00","SCI: Fix for bug #3119713 - 'PQ2: song-specific reverb changes are ignored' (thanks to waltervn)

svn-id: r54509
"
"3485d433c5c158ceb1ea74d985fa9c1274185e9c","2010-11-27 18:08:47+00:00","SCI: Fixed bug #3034713 - 'ICEMAN Demo: Fails to find base object'

This could happen because objects in scripts can be in the wrong order.
Same thing happens in the French and German version of KQ5 (bug #3035396).
Removed the scriptObjRemove() method, which is in fact a hack.

svn-id: r54510
"
"91e42bbcb98bca8c93d246664372b15796424b97","2010-11-27 18:23:39+00:00","SCI: Reverted changes to savegame.cpp made in r54510, as that still occurs

svn-id: r54511
"
"0312235f67b681e6f6947272dbfc433b8142c97e","2010-11-27 18:27:02+00:00","SCI: Removed bogus warning

svn-id: r54512
"
"c76422412dbecb6ed898d7f93d00c78bf5bb3d93","2010-11-27 18:46:12+00:00","SCI: Compensate for buggy KQ5CD saved games (before r54510)

svn-id: r54513
"
"3d4ca8e405aa8693f78e2638742170c0a3d9d246","2010-11-27 21:36:04+00:00","MOHAWK: Add an isPlaying() and stopSound(id) function to Sound (for LB and others)

svn-id: r54514
"
"5f7ac43a24094ce3fa87e3fc01d8f9f333233631","2010-11-27 23:09:19+00:00","HUGO: Add F4/F5 keys to save/restoreGame

Currently, it only saves/restores slot #0, no selection
screen is displayed

svn-id: r54515
"
"1ad63b431ee031c0d4bb6d520d70103a60459d55","2010-11-28 02:12:33+00:00","BACKEND: Switch OSystem::getSystemLanguage return type to Common::String.

This is done as discussed on -devel.

svn-id: r54516
"
"284b49aabc54590e1444f06561a815c2a3c5de7e","2010-11-28 02:12:53+00:00","COMMON: Comment out locale <-> Common::Language conversion utils for now.

svn-id: r54517
"
"7760077cf530c35c969f9286145d9a36d0440d70","2010-11-28 14:56:31+00:00","Merging the gsoc2010-opengl branch

svn-id: r54518
"
"f1cdb318c6817e0c63e397f6bdf7524bb02af2d7","2010-11-28 14:57:04+00:00","SYMBIAN: Fixes & improvements for SymbianSdlMixerManager (untested)

svn-id: r54519
"
"a5ffdcf6cf2c0cb7d1c4a26790ef217eb6a1e5b9","2010-11-28 14:57:26+00:00","OPENGL: cleanup

svn-id: r54520
"
"0b5f6d4c979028b78c3b6c33f371b46b31cd0c9b","2010-11-28 14:57:56+00:00","SCI: Fixed bug #3034471 - 'SCI, Castlebrain/Amiga: Invisible text in word search'

Fixed some endianness issues in Amiga versions, thanks to wjp. Amiga
versions expect a BE VM, thus we adjust accordingly in the places
where memory is accessed directly (i.e. kStrAt, kMemory and all places
that set/get characters from memory)

svn-id: r54521
"
"d5840b72f9535e303d340cb8f5f164ddb6fc27ee","2010-11-28 14:57:59+00:00","DINGUX: Attempt to fix the new code for this backend

It seems in the gsoc2010-opengl branch, the dingux port was not anymore
updated at some point, so some changes that were made in general did not
make it till here. This is my attempt to fix at least the most obvious
problems, but without being able to compile it, all these changes should
be very carefully reviewed.

svn-id: r54522
"
"27016b303fb094e7c6892f523619831f3add9b0f","2010-11-28 15:06:36+00:00","SDL: Make SDL backend compile again.

svn-id: r54523
"
"11b254a93833f2e6537f325432748277247f3641","2010-11-28 15:11:27+00:00","SDL: Fix compilation on Windows too.

svn-id: r54524
"
"1d818d940a0275576cf118667162be4ee07cc1fc","2010-11-28 15:44:03+00:00","WINCE: Fix main(), update config file handling, update module.mk

The WinCE backend will require many more changes to work again after the
changes made to SDL backend. This is just a tiny first step towards this
goal.

svn-id: r54525
"
"8f37f6634c56c5293ef9e0de1b9be2fce318b1de","2010-11-28 15:44:34+00:00","SDL: Merge deinit() into OSystem_SDL destructor and overload fatalError

svn-id: r54526
"
"96f7c2e225e48fcb3e52b5d68d5b54a34998d15d","2010-11-28 15:47:54+00:00","SDL: Added missing #define FORBIDDEN_SYMBOL_ALLOW_ALL for the Win32 SDL backend

svn-id: r54527
"
"5e0a441add1dfb1cff9e9868c6a4a85ea631c1ea","2010-11-28 15:54:20+00:00","CREATE_PROJECT: Updated project file generation for the gsoc2010-opengl branch (thanks to LordHoto)

svn-id: r54528
"
"54b756e1baf67d0f6f7a8abea4ae3e656297a5c7","2010-11-28 16:38:01+00:00","HUGO: Modify or suppress some obsolete comments and warnings

svn-id: r54530
"
"66cb595f224f15f0e71b9d695bdaa2549158fbae","2010-11-28 17:12:43+00:00","SDL: re-enable unicode after graphics init

svn-id: r54531
"
"69092836bdb0c4c35d5fba14391cef970197b327","2010-11-28 17:17:41+00:00","LINUXMOTO: Compilation fixes

svn-id: r54532
"
"bed8c34a87512282e582dc7ee5471e9f5a94d6c7","2010-11-28 17:18:08+00:00","DINGUX: Compilation fixes

svn-id: r54533
"
"1857076d76d8bde59bf6b47fe49c32ba6c462c10","2010-11-28 17:26:27+00:00","MAIN: Fix --gfx-mode regression

We cannot check for supported graphics mode until after the backend has
been initialised, or there won't be a graphics manager to ask.

svn-id: r54534
"
"aa33b22d638c21e51814658c0b1034727a42ef4e","2010-11-28 17:41:33+00:00","BUILD: Compilation fixes for Win32 and Amiga

svn-id: r54535
"
"7870bed92f943650ce5d1e9bfddf6dbc5d644374","2010-11-28 17:42:05+00:00","BUILD: Add OpenGL support to configure (from branch)

svn-id: r54536
"
"627db0d764b1e4f3dce1b3936a9fe5354ad91927","2010-11-28 17:42:25+00:00","BUILD: Set 'UNIX=1' in config.mk on unix systems

svn-id: r54537
"
"b63424960922ad6824c4efbcfdb08306934feb23","2010-11-28 17:42:47+00:00","SDL: Compiled POSIX sub-backend only on unix systems

svn-id: r54538
"
"beed05b0affcab40d4b54576bd264c8be799c2b6","2010-11-28 17:43:10+00:00","DINGUX: Correct compilation fix (I hope), remove dead code

svn-id: r54539
"
"1c3ba8bc405b1f249a488480e397a984834744d4","2010-11-28 18:09:43+00:00","LINUXMOTO: More compilation fixes

svn-id: r54540
"
"8399232a437d74a15b3675ad0f349001b87a6480","2010-11-28 18:10:12+00:00","DINGUX: More compilation fixes

svn-id: r54541
"
"ee4510aed487671866705542b0b2a9180aebf651","2010-11-28 18:10:40+00:00","OPENGL: Modify source files to force recompilation

svn-id: r54542
"
"06df4459c73e53a0998fe835269b5741e4bd9f5e","2010-11-28 18:18:15+00:00","WINCE: Remove obsolete openCD method

svn-id: r54543
"
"364382cf9fcc013d7acb6c8252bf62e805ccd01c","2010-11-28 18:39:04+00:00","SDL: Change refs to SdlEventManager to SdlEventSource

svn-id: r54544
"
"ce119b95401955d0ad00eaf0e9169237dfba1016","2010-11-28 18:57:36+00:00","OPENGL: Fix OpenGL on Mac OS X

svn-id: r54545
"
"2eba29e1eb65e4cd839e876bc14137a0bb84eab7","2010-11-28 19:21:46+00:00","i18N: Update list of source code files for translation template generation

This fix update of translations following merge of GSOC-OpenGL branch.

svn-id: r54546
"
"16c73378b9d950c88c83a1bcf11abf8c0c3039d0","2010-11-28 19:23:02+00:00","i18N: Add a few strings to translate in the SCUMM help dialog.

svn-id: r54547
"
"ae1607cd99b89cb0da683ad44308abc759fd5c65","2010-11-28 19:24:44+00:00","i18N: Update all translation files from template file.

German has also an updated translation.

svn-id: r54548
"
"6b8a3dba7029366bcc950116d31227de96c7b81e","2010-11-28 20:53:57+00:00","TOON: Attempt to fix crash when Bricabrac puts on his glasses

This was a regression in r54223, and it's the most direct fix I can
think of. The problem seems to be that sys_Cmd_Remove_Scene_Anim()
clears the character's _animationInstance while character::playAnim()
is waiting 'for the character to be ready'.

My fix was to treat _animationInstance NULL as another sign that the
wait is over, but maybe the real fix is for sys_Cmd_Remove_Scene_Anim()
to do more than just clear the variable, e.g. stop the script or
something like that?

svn-id: r54549
"
"5d2b77899f83160ec969aeab6b266a6c63d27f11","2010-11-28 21:33:02+00:00","SWORD25: Fix warning: deref type-punned pointer breaks strict-aliasing rules

svn-id: r54550
"
"b3ba5f6ec5be54d0f40c3b2933e26053ef625a28","2010-11-28 21:33:27+00:00","SWORD25: Fix warning about uninitialized DijkstraNode::parentIter

svn-id: r54551
"
"5a825eaae249d1a92f6252ce340d5801d84e15ca","2010-11-28 21:33:52+00:00","GP2X: Compilation fix

svn-id: r54552
"
"a162ff18bc88b7ad364576ae091f0becba9117e2","2010-11-28 22:04:39+00:00","SDL: Various more SdlEventSource related fixes

svn-id: r54553
"
"460a65d2aa78df5528ab54d1d3eb9afde0a10355","2010-11-28 22:05:05+00:00","SDL: Reduce redundant deletes from OSystem_SDL destructor

svn-id: r54554
"
"626e9413fdca6a9e1d8141945a0e419d0a91f4d1","2010-11-28 22:12:11+00:00","AmigaOS: Fixed compilation after the latest GSoC code merging (bug #3121350)

svn-id: r54555
"
"4d09420ba4828700decc627a6bdd30f832eb2dae","2010-11-28 22:25:00+00:00","DS: Remove redundant code

svn-id: r54556
"
"f403c0f8a862573d46957f8adaf8dc32b7548e2e","2010-11-28 22:55:00+00:00","COMMON: Add support for loading NE resources and cursors

Needed for Mohawk (and Hugo Win eventually). Based on DrMcCoy's excellent Dark Seed II code.

svn-id: r54557
"
"2d924afa9d307c6eaa8126c8e0367b9e1216da5e","2010-11-28 22:55:15+00:00","MOHAWK: Add basic Living Books support (all credit goes to fuzzie!)

v1 and v3 (both Windows and Mac) are working, v1 support is in better shape.

svn-id: r54558
"
"ff3558037a9fbbbd2adbd6a2726b9d97293e5076","2010-11-28 23:00:16+00:00","GP2x: Fix silly typo

svn-id: r54560
"
"945602fdbe308c773a782a3cfe6b78503661b439","2010-11-28 23:09:47+00:00","COMMON: Remove unnecessary reference to file.h

svn-id: r54561
"
"179734a082fcbd2edff6a9499d6d88975b8e27f2","2010-11-28 23:27:56+00:00","VKEYBD: Ensure stream destructor is properly called

svn-id: r54562
"
"2cae2fc4d08aa957fe9a68d223c8b2ff1859fd9c","2010-11-28 23:39:02+00:00","M4: Remove unnecessary reference to file.h

svn-id: r54563
"
"ab732a73ffd271e4fe3d14b87215389a6e8261c8","2010-11-29 00:27:48+00:00","COMMON: Add a bit more to the doxygen comment for NEResources

svn-id: r54564
"
"207b9a25df3cfc9f6cec91d709082eafeeaae60f","2010-11-29 01:34:56+00:00","MOHAWK: Add Detection Entry For 'ABC By Dr Seuss' Living Book Game

svn-id: r54565
"
"6a456a0e0e5e3448a13d55b836d3ef9e182bf627","2010-11-29 06:35:50+00:00","MOHAWK: Set Maggie's Farmyard Adventure as an LB game

The game will start, but has many problems as it uses a later version of the LB code. Also, make sure we check for filename being empty to stop an assertion in the MacCursorManager.

svn-id: r54566
"
"39e5973a419c1c3d1ec01ad35c781de2d49ec8cd","2010-11-29 07:52:38+00:00","COMMON: Applied patch #3121969 - 'WIN32_LEAN_AND_MEAN in incorrect place'

svn-id: r54567
"
"fba6ee8af93a1abf98f39e317901f7baf1869300","2010-11-29 10:20:45+00:00","MADE: Fixed bug #3090034 - 'RTZ: Keyboard unresponsive', by properly handling keyboard keys

svn-id: r54568
"
"1ef8d5e38a7a7b5cf1d0495dbb9cfe85888fb627","2010-11-29 10:43:14+00:00","GP2X: More compilation fixes

svn-id: r54569
"
"cef8d20fb2172b620cf42d0d84c0fc2595d2ce04","2010-11-29 12:51:53+00:00","MOHAWK: Divide GType_LIVINGBOOKSV3 into V2 and V3

svn-id: r54570
"
"69c2fc5cebac767283f0f587d92f8842ab9f287b","2010-11-29 14:03:36+00:00","GP2X: Fix typo (and maybe compilation?)

svn-id: r54571
"
"4e0e406181a36e5f5ff59e6b917f81f317e1de1a","2010-11-29 16:16:50+00:00","SDL: Move #include <SDL.h> into a special wrapper file

svn-id: r54572
"
"df05ed1a46516f7e4d5c6e78f7f096208dbad790","2010-11-29 16:18:43+00:00","BACKENDS: Include scummsys.h at top of all .cpp files, *before* any #ifdefs

svn-id: r54573
"
"f0fdff21f641097ea0bd18493580b42ed12dac6a","2010-11-29 16:22:04+00:00","SDL: Revert r54554, and add explanatory comment (fix for bug #3121841)

svn-id: r54574
"
"4bed2b3ff588452ed754d0758bf9b1b0df0e8c92","2010-11-29 16:35:29+00:00","SDL: Trying to cleanup the FORBIDDEN_SYMBOL situation

svn-id: r54575
"
"45f55128b1c811bd2824e0acfbd5801fc78a2256","2010-11-29 17:42:08+00:00","HUGO: Add GMM save/load and RTL

svn-id: r54576
"
"b6f9407ec6369f98bab1d13746ba0316ac1c50dd","2010-11-29 17:50:30+00:00","HUGO: Fix compilation

svn-id: r54577
"
"fe806a1aba19f6124237bddecd47b5c8a217682e","2010-11-29 18:03:05+00:00","HUGO: Fix a remaining warning

svn-id: r54578
"
"0e90a2a808599aafeebd424cda2a8c46505e84fa","2010-11-29 18:16:11+00:00","BACKENDS: Close Memory Leak of Mouse Surfaces in SDL Graphics Backend

svn-id: r54579
"
"91a6b7f5372bfb93a1a7816ea1b7f3a5c65164fd","2010-11-29 18:22:31+00:00","BACKENDS: Improve safety of Modular Backend Destructor And Close _fsFactory Memory Leak

Since the modular backend implements abstract modules to be written in the future which _may_ have interdependencies, they should be set to null pointers after deletion.

This allows assert(_eventManager) type lines to work, which would have detected bug #3121841 without a segfault...

Also, _fsFactory should be deleted to ensure it is not leaked though this causes a group of GCC warnings and probably should be done in a different manner.

svn-id: r54580
"
"39aad6ece718acb39ad38ba5858f2aeeb5c29474","2010-11-29 18:30:23+00:00","SDL: Move createLogFile implementions to the OSystem_SDL subclasses.

svn-id: r54581
"
"c5e28f69b7ef944bc2724237aa8dc318c6830667","2010-11-29 18:31:39+00:00","BACKEND: Assure that the correct destructor of FilesystemFactory is called.

svn-id: r54582
"
"f1997617561b2a16638ef5ac76c87dc2e393ef0c","2010-11-29 18:33:46+00:00","SDL: Slight formatting fix.

svn-id: r54583
"
"a1d99836cda44886c6fc6830c8c5a8d5a7c0772f","2010-11-29 18:48:43+00:00","BACKENDS: Fix SVN keyword usage.

svn-id: r54584
"
"c0c7bcf30ee56ecb92347f94177c65c9a618c74e","2010-11-29 18:52:42+00:00","BUILD: Fix URL keyword in rules.mk.

svn-id: r54585
"
"ff7357cfc5f0c84d82e99e49419ae0fb5370aab5","2010-11-29 19:28:19+00:00","NULL: Remove extra semicolons in null-graphics.h

svn-id: r54587
"
"960efd93d8735409a28f4c65cc940c0af2a53674","2010-11-29 19:44:22+00:00","SYMBIAN : Updated so it builds with latest structures and add support to last express

svn-id: r54588
"
"73cf5dba996e2011dde9196b4831227013adc7f8","2010-11-29 19:54:55+00:00","SDL: Add Mac OS X log file support

svn-id: r54589
"
"5fb635dabfda28deeeef4c3aa8508822b9eee88e","2010-11-29 20:02:15+00:00","SYMBIAN : Forgot to init the SDL backend

svn-id: r54590
"
"abe06f098caef6a260f34420e55a5f2921f7c525","2010-11-29 20:07:09+00:00","CONFIGURE: Improve OpenGL header + library detection.

svn-id: r54591
"
"5f8e6e3824823869fdb2fd5d4dae334817d318be","2010-11-29 20:49:14+00:00","MOHAWK: Start splitting Myst scripts into one class per Stack.

svn-id: r54592
"
"6a4ff1a9b52c2dd31b951ad9e3362da5f29b37fc","2010-11-29 20:49:42+00:00","MOHAWK : Finished implementing Selenitic sound receiver

svn-id: r54593
"
"117f46a884e25753ba48d923f2c2f748d7428699","2010-11-29 20:49:56+00:00","MOHAWK : Cleanup selenium opcodes

svn-id: r54594
"
"4e420ef6fcc7b2d13f74704a14fe97ef9dc7fdee","2010-11-29 20:50:11+00:00","MOHAWK: Keep resource type around

svn-id: r54595
"
"49ed25157319e7c03bee29406249495dd16a9984","2010-11-29 20:50:25+00:00","MOHAWK: Name selenitic opcodes, and implement opcode 204

svn-id: r54596
"
"16afca4c3ddb776bde8d882f229990f137a9c183","2010-11-29 20:50:40+00:00","MOHAWK: Add mouse move event for type 10 and 11 resources

svn-id: r54597
"
"2e984cf136c2199b7ea1aed4bddcfe4f555e1d76","2010-11-29 20:51:04+00:00","MOHAWK : Move area classes to their own file

svn-id: r54598
"
"a85346cb16a006b82116d3022ad8536bae0a3c75","2010-11-29 20:51:18+00:00","MOHAWK : Change areas inheritance to match the original

svn-id: r54599
"
"536c6b6ef41478c76d3325fcd6d03c83c6fe985f","2010-11-29 20:51:35+00:00","MOHAWK: Rename some fields for type 11 areas

svn-id: r54600
"
"dab856c33f0fdb054f692564978b5950e31702e9","2010-11-29 20:51:48+00:00","MOHAWK: Fix selenitic sound receiver left button

svn-id: r54601
"
"fc504c72e8bf17eec0dce21b187649b4fd9a3e8c","2010-11-29 20:52:04+00:00","MOHAWK: Update area type 11 position when the mouse moves

svn-id: r54602
"
"200cafd40fe1523aeefa11ddefd0a66bddcf2c05","2010-11-29 20:52:20+00:00","MOHAWK: Start implementing type 10 areas

svn-id: r54603
"
"e26fb921e9ab814b81ba5c496c626e49f03a47a3","2010-11-29 20:52:33+00:00","MOHAWK; Post rebase fixes :
- Restore invoking resource change
- Update the screen after drawing a conditional image

svn-id: r54604
"
"291bea1858c12b8557aeb46e6f57dc701293c956","2010-11-29 20:52:46+00:00","MOHAWK: Revert the screen cache since it has a huge performance hit, and is not needed as is.

svn-id: r54605
"
"b4913548d0b4e9e510653bf72aadd1e856663788","2010-11-29 20:53:00+00:00","MOHAWK: Implement sliders

svn-id: r54606
"
"8da42b4221bd4763abc80397307b5807d14c89f0","2010-11-29 20:53:14+00:00","MOHAWK: Don't change current resource when dragging

svn-id: r54607
"
"c832151fa5bd6955bd12a0f461617b97137c7133","2010-11-29 20:53:26+00:00","MOHAWK: Implement slider value setting

svn-id: r54608
"
"462a150b8ab87ea28fd364c48c8e14333be00a75","2010-11-29 20:53:38+00:00","MOHAWK: Implement value setters for the selenitic sound lock sliders

svn-id: r54609
"
"00e13f4c259baab292eb97b80fa50aa9a8385ca9","2010-11-29 20:53:56+00:00","MOHAWK : Implemented selenitic sound lock slider opcodes and adjusted sliders behaviour.

svn-id: r54610
"
"95e97094fbfde94a719a8885d954e5eb74063da8","2010-11-29 20:54:11+00:00","MOHAWK: Completed the sound lock puzzle

svn-id: r54611
"
"d8b5319f153b859c4720e35fe791ad2605a86cff","2010-11-29 20:54:23+00:00","MOHAWK: Fixed some warnings

svn-id: r54612
"
"18e1f4a8c36d907df8c5498b0c0c9f264490455f","2010-11-29 20:54:36+00:00","MOHAWK: Added helpher functions to redraw a resource. Do not redraw all the resources on mouse up.

svn-id: r54613
"
"0ac6af59d122319715145883d986ac652f99738d","2010-11-29 20:54:52+00:00","MOHAWK: Check / Fixed / Renamed some simple opcodes.

svn-id: r54614
"
"92d74fa56df2583ad01616c2afa394baf2ea5a9f","2010-11-29 20:55:11+00:00","MOHAWK: Disabled hotspots are now unclickable areas. Display blue rects for unreachable zip destinations when drawing resource rects.

svn-id: r54615
"
"34981c61b6c97281c6a7e4895d6ebbfdf97e00a6","2010-11-29 20:55:31+00:00","MOHAWK: Fix Myst opcode 14

svn-id: r54616
"
"fa7ec5ae4c67a98302e816b506b1c06d009a1f18","2010-11-29 20:55:50+00:00","MOHAWK: Describe Myst opcode 9

svn-id: r54617
"
"c7e488c20168d5c2ec9245ac0bc8711abe209db3","2010-11-29 20:56:04+00:00","MOHAWK: Rename and fix / explain a few Myst opcodes

svn-id: r54618
"
"0cff3be66f7a289120326c907e5d10e017b0bb9c","2010-11-29 20:56:21+00:00","MOHAWK: More Myst common opcodes checking / renaming

svn-id: r54619
"
"92dc0fe5b5780b4efe4dc8502ae82053123656c2","2010-11-29 20:56:39+00:00","MOHAWK: Only draw a resource conditional subimages if it has the 'subimages enabled' flag set.

svn-id: r54620
"
"3b1440b0d4abac36ec121267b5dc9da0df6b60d0","2010-11-29 20:56:56+00:00","MOHAWK: Implement / fix Myst opcode 4.

svn-id: r54621
"
"d3289529eb329fe3d97ae61bca52e279655121fa","2010-11-29 20:57:11+00:00","MOHAWK: Fix flag values used to dertermine if an area can become active.

svn-id: r54622
"
"359cece3b745e668316c4b36f4aa851d17a0465d","2010-11-29 20:57:27+00:00","MOHAWK: Implement opcode 3 'take / drop page', and the corresponding getters and setters for selenitic

svn-id: r54623
"
"2ac1fdad321a510fdb10f01f89c32818a06488a3","2010-11-29 20:57:41+00:00","Revert 'MOHAWK: Revert the screen cache since it has a huge performance hit, and is not needed as is.'

This reverts commit 291bea1858c12b8557aeb46e6f57dc701293c956.

svn-id: r54624
"
"a9617cbe2888be357d6dbee9899f34827d159b26","2010-11-29 20:57:54+00:00","MOHAWK: Added dirty rects support for Myst

svn-id: r54625
"
"90b336ec344157c1896e409ecbb8beab1c45923d","2010-11-29 20:58:10+00:00","MOHAWK: Changed sliders to restore the main background instead of doing their own background caching. It is possible now there is the image cache.

svn-id: r54626
"
"b49cb3b35a32a8f877ef7f302fa02c139e4ea95e","2010-11-29 20:58:28+00:00","MOHAWK: Start implementing opcodes using the animated update feature

svn-id: r54627
"
"f8a4190e756d7e47ffc3b3c0caffbfcd57395f63","2010-11-29 20:58:45+00:00","MOHAWK: More animated update opcodes work for Myst

svn-id: r54628
"
"fcc1dd6749ea33bf8c9fd6e15a004bfeb7b3a47e","2010-11-29 20:58:58+00:00","MOHAWK: Implement 4 types of animated updates for Myst

svn-id: r54629
"
"ed59b28d0bd8a7eb1f30357d48bbd26cb1b307ff","2010-11-29 20:59:17+00:00","MOHAWK: Do not always update the screen after a card change. Necessary for 'animated card changes' to work.

svn-id: r54630
"
"056ebd43d46fe6a5b9bdb3a59c39c3db3ff18a04","2010-11-29 20:59:30+00:00","MOHAWK: Complete drawing the animated rect if running the animation steps didn't draw the whole rect.

svn-id: r54631
"
"bfd272a46ebae1198a489d113d0f50b9418ac202","2010-11-29 20:59:44+00:00","MOHAWK: Add a generic temp var for use by Myst scripts.

svn-id: r54632
"
"149eed5c3296175d122cc7f44db75fe352fae004","2010-11-29 21:00:05+00:00","MOHAWK: Persistent scripts cleanup
- Rename InitOpcodes / PersistentOpcodes to Persistent Scripts for consistency
- Get rid of the global var used to tell if the sound receiver script is running

svn-id: r54633
"
"7ea90ddf193deee82486cd3bd23f3af81511cf67","2010-11-29 21:00:23+00:00","MOHAWK: Create constants for remaining Myst resource types

svn-id: r54634
"
"836aab996867612502854a6d0406841f47409f6e","2010-11-29 21:00:37+00:00","MOHAWK: Fix drawing the last step of an animated update

svn-id: r54635
"
"f8026bf852c5033dfd8ae0763d6a6a18ebfb2d7a","2010-11-29 21:00:49+00:00","MOHAWK: Preinitialise saved card id for use when linking back to Myst from an other age.

svn-id: r54636
"
"7ee7b9115752f85a47b23e06203cf905b105add0","2010-11-29 21:01:02+00:00","MOHAWK: Complete the list of stack / start cards.
Fix linking back from another age.

svn-id: r54637
"
"3bd40b0d4b322625e9ecbe4ee586ce2f2f7160a7","2010-11-29 21:01:15+00:00","MOHAWK: Implement selenitic opcode 110 used for the maze runner exit logic.

svn-id: r54638
"
"c393f8f9d20bee7e0a1724a54ddad1dcd130f00c","2010-11-29 21:01:30+00:00","MOHAWK: Implement retrieving the invoking resource from data for init and exit scripts.

svn-id: r54639
"
"69ff712a48ff4badd3feeeddaf7ad462b03635a6","2010-11-29 21:01:43+00:00","MOHAWK: Implement Selenitic maze runner init opcodes 200, 201, 202, 205, 206

svn-id: r54640
"
"1b50b62157297040ec067f0f251c8e380cc3b4c0","2010-11-29 21:01:57+00:00","MOHAWK: Minimal implementation of the maze runner. Selenitic is now completable.

svn-id: r54641
"
"a526bdb839ec09523715846904ff6a194578e1e3","2010-11-29 21:02:11+00:00","MOHAWK: Add Selenitic opcode 101, maze runner sound help.

svn-id: r54642
"
"278b8a142952ce041e5fdf9513b18f0e0549ce27","2010-11-29 21:02:25+00:00","MOHAWK: Play videos when the maze runner moves.

svn-id: r54643
"
"29359ee3722a317532f8b7930f8f33ba01cec74e","2010-11-29 21:02:39+00:00","MOHAWK: Set the initial stack back to the intro

svn-id: r54644
"
"efc6ff54a3dc0c82f77b2e0c1464a1fdebde9ada","2010-11-29 21:03:02+00:00","MOHAWK: Misc cleanups

svn-id: r54645
"
"0b028de5737094b3e3f2d22a4a42e0544f774416","2010-11-29 21:14:20+00:00","MOHAWK: Remove superfluous junk (no not Mohawk itself).

svn-id: r54646
"
"d3c78b8a3d4d1692f7db0d9391f76f3ba0092199","2010-11-29 21:18:20+00:00","MOHAWK: Don't store the sound name in SndHandle

svn-id: r54647
"
"2bd16f9e84e3480e7bda65b89089c684a2eaa639","2010-11-29 21:34:59+00:00","MOHAWK: Move Myst stack-specific code to its own directory

svn-id: r54648
"
"28ffa2fb872effdb85c08afd37925dc8e6a82948","2010-11-29 21:41:21+00:00","MOHAWK: read command messages, so LB doesn't just error out

svn-id: r54650
"
"790bba6c27a91a5068d02a92a7859524706c1974","2010-11-29 21:42:00+00:00","MOHAWK: implement more of LBLiveTextItem

svn-id: r54651
"
"b1b7ffa1f245bc969a0dbeec8612436d41e3402b","2010-11-29 21:42:37+00:00","MOHAWK: move GF_NO_READONLY check to after actual page load

svn-id: r54652
"
"66ba82a451a4f058fcaf51eea81253165ed021ac","2010-11-29 22:31:57+00:00","HUGO: Fix assert in H3 Win when displaying the elephant and the plane

svn-id: r54653
"
"59604fa014dfa62f60444aa2c4fcdee7deaf9e77","2010-11-29 23:14:04+00:00","MOHAWK: Silence warnings

svn-id: r54654
"
"12c84f21a3fac01248952a09e8c4b06d4bd56cb6","2010-11-29 23:19:43+00:00","MOHAWK: don't start animations in LBAnimation::seek

svn-id: r54655
"
"92d5277816a5d8b76f28394214434908d81d0808","2010-11-29 23:19:59+00:00","MOHAWK: implement hard-coded LB language/options GUI

svn-id: r54656
"
"2c824e3311521979b9f3afe38c62fe60885e952d","2010-11-29 23:36:49+00:00","MOHAWK: implement hardcoded Living Books 1.0 code

svn-id: r54657
"
"1fbd80b1e3eb442df2203d27269623c964a22bad","2010-11-29 23:57:15+00:00","HUGO: Fix save/load screens, which were always showing slot0 info

svn-id: r54658
"
"27a3173d939b52002584fca83ce4ba8c9e563db1","2010-11-30 00:01:54+00:00","HUGO: Close Two Memory Leaks.

Note that the first leak is the allocation of the Common::RandomSource, _rnd. I'm not sure of the effect of deallocating this while it is still registered to g_eventRec, but all other engines seem to be the same (or implicitly do this by making a Common::RandomSource member of the engine object) so this is not a engine specific issue, but should be assessed.

svn-id: r54659
"
"99264d47c3ed8b0914c9141a81c8c34aabb1823a","2010-11-30 00:03:35+00:00","MOHAWK: silence harmless case of a LB warning

svn-id: r54660
"
"39532b0eca5c526c34db2311553dca1bc160bc90","2010-11-30 00:11:15+00:00","MOHAWK: don't try reading non-existent messages

svn-id: r54661
"
"6c73f8266e2155653c759897ec9381427adb82a4","2010-11-30 00:26:00+00:00","SCI: Fixed bug #3053093 - 'QFG1VGA and QFG3: Text box glitches'

svn-id: r54662
"
"b8373668711390ceff0b783c4bd3c17e81873174","2010-11-30 00:27:36+00:00","SCI: Added an uninitialized read script workaround for QFG1VGA

svn-id: r54663
"
"7aca10bf9a4e28eb9c3d7966cd8d71cd29e921d4","2010-11-30 01:49:00+00:00","HUGO: Close Memory Leak in PlayMusic() Function.

svn-id: r54664
"
"5132cf51e31f604254d5049ea7be2030cd70dfc4","2010-11-30 07:57:42+00:00","Fix bug #3093750 - FT: Truck and Aircraft computer text missing (regression).

svn-id: r54665
"
"b43a07934f47d9bc130f67b46dfcca5d3e0df0a3","2010-11-30 09:03:22+00:00","NEWS: Added note about Lure and Cruise bugfixes

svn-id: r54669
"
"c34410d49dbb32baa9b8c06ef24c1fbef4c420d6","2010-11-30 09:04:47+00:00","MOHAWK: don't include livingbooks.h from graphics.h

svn-id: r54670
"
"348f2d01c811212d5463599c8718635fe4826b22","2010-11-30 12:45:26+00:00","MOHAWK: Fill in missing detector details (as per FIXME)

svn-id: r54671
"
"77cec92258e517fb191130e8cbabd5861147dbb8","2010-11-30 14:17:59+00:00","MOHAWK: Remove leftover Selenitic code from the Myst stack

svn-id: r54672
"
"e04c0182cdd7672b6b471cd45495984e663d16ab","2010-11-30 14:40:51+00:00","MOHAWK: fix LBAnimation start/seek behaviour

svn-id: r54673
"
"8009a86c29eed96f54a7adc56394717bee2c7e4c","2010-11-30 14:41:09+00:00","MOHAWK: tidy up LBLiveTextItem code

svn-id: r54674
"
"868e39c29a269034a00c7997e1f491231b10b8ce","2010-11-30 14:41:27+00:00","MOHAWK: fix LB playback seek behaviour

svn-id: r54675
"
"c6a9cef9fb36fd6a0697f86fd59acc279d8b67a8","2010-11-30 14:45:31+00:00","MOHAWK: Fix changing the stack via an opcode

svn-id: r54676
"
"48c209f2daa5b0e60e0abfb1c7f4e44227af4c49","2010-11-30 15:01:26+00:00","MOHAWK: Split Myst credits code into a separate class

svn-id: r54677
"
"f82478d4c092ba58e2b26179cb37505fdccbf2d8","2010-11-30 15:03:31+00:00","MOHAWK: Fix the Myst fireplace

svn-id: r54678
"
"b065e94d2cc5f3e19714209eae2d983d8ae26fb6","2010-11-30 15:07:00+00:00","MOHAWK: One last getRawData() to getResource() rename

svn-id: r54679
"
"6041fe117d28e065dd03c34fd71cef687319737b","2010-11-30 15:35:22+00:00","MOHAWK: some LBSoundItem fixes

svn-id: r54680
"
"8b061f06e2166f3b4957e6ed0d92f433fa412e37","2010-11-30 16:41:48+00:00","TOOLS: Fix regression in create_project MSVC9 project creation

Debug build configurations were missing </Configuration> ending elements
(see comments of bug #3121962)

svn-id: r54681
"
"6b79f5ffe903d0d71a7571f0ee765b1c2820545a","2010-11-30 16:54:03+00:00","MOHAWK: Have the Myst book appear in the intro again

svn-id: r54682
"
"3c55c9faf72804e2f2efca0d7b924e2b696e18e8","2010-11-30 17:55:41+00:00","MOHAWK: Fix for Valgrind uninit reads in Myst Script Parser.

svn-id: r54683
"
"8393bc5b5f2f3e5304cf589c21956676c4bd04c1","2010-11-30 18:50:19+00:00","I18N: Don't build TranslationManager when translation is disabled.

svn-id: r54684
"
"af79de331efc4495e33642e21af201ee93a399de","2010-11-30 20:15:02+00:00","HUGO: Fix palette issue after restoring a game in H3

svn-id: r54685
"
"9fddad6faf0d81107b362c7c6046366a27c604d3","2010-11-30 20:25:21+00:00","MOHAWK: Set the maze runner initial direction. Remove a hack that is not needed anymore thanks to keeping the old stack when changing stack.

svn-id: r54686
"
"26b372cfd23f93f6023b4561889384de8a91c883","2010-11-30 21:05:45+00:00","MOHAWK: add tryDefaultPage/tryPageStart/prevPage helpers

svn-id: r54687
"
"90b61c0bd48f907d640c9f9846b5570f10e0f069","2010-11-30 21:06:40+00:00","MOHAWK: add changePage Living Books debug command

svn-id: r54688
"
"e4fa2855b610d5667bd6a68147db7818212100e7","2010-11-30 22:02:03+00:00","MOHAWK: Split out stoneship opcodes into their own class

svn-id: r54689
"
"94801fcea3f7bbcb74a4d8ca8c5d80fe1f5795d0","2010-12-01 00:40:52+00:00","SCI: Fixed bugs #3041044, #3046543 and #3046513

svn-id: r54690
"
"261cf2390178c6e67874d162799b357da73036a5","2010-12-01 02:11:11+00:00","MOHAWK: Split channelwood opcodes into their own class

svn-id: r54691
"
"b9cfb529274219bb5638294a5759324503aa933e","2010-12-01 02:45:31+00:00","MOHAWK: Split mechanical opcodes into their own class

svn-id: r54692
"
"bdc3e5c353ff1ea82e618e9cf83624ce35cf781b","2010-12-01 03:30:00+00:00","MOHAWK: Cleanup Myst opcode handling and reduce code duplication

svn-id: r54693
"
"13c1540522da35fc6f63f36ddaa3fc19ed69d860","2010-12-01 03:39:47+00:00","MOHAWK: Downgrade the Myst unknown op error to a warning as new ones have been uncovered

svn-id: r54694
"
"084ea7fc4ac650242a96fcb1079e3a5162b50acc","2010-12-01 09:53:43+00:00","OpenGL: remove unnecessary glext.h include

svn-id: r54695
"
"e2282e48163030f7c910ccb88921a7d5b9fe4748","2010-12-01 11:29:26+00:00","Fix mingw compile.

svn-id: r54696
"
"0fc6a9bb4568c10e35019cd0928f641202808ed2","2010-12-01 12:23:37+00:00","WII: Add system language auto-detection.

svn-id: r54697
"
"768d3dd6f75cba577e03367d4dbed65ac051b21f","2010-12-01 12:30:58+00:00","WII: Fix compilation

svn-id: r54698
"
"26f27d9983b93a6c8389605f0d59271b1d0f597f","2010-12-01 14:46:59+00:00","MOHAWK: Split d'ni opcodes into their own class

svn-id: r54699
"
"1a2b512ff0965442f99662ff276cc0fb6f5aa611","2010-12-01 14:54:13+00:00","BACKENDS: Use SDL_opengl.h instead of the nonstandard glext.h to ensure OpenGL 1.2 compatibility in Windows systems

svn-id: r54700
"
"eeb557baabbd27864a5a5d25a551c77d52b4da27","2010-12-01 14:56:06+00:00","TOOLS: Added OpenGL support to Visual Studio project files

svn-id: r54701
"
"65a7d28e21de26aa0d85b95b42969e513b5db812","2010-12-01 14:57:05+00:00","MOHAWK: Rename the Myst stack/card link maps

svn-id: r54702
"
"bd5ab7e501f32b2274812a64830f4d00ad6c11cf","2010-12-01 14:57:22+00:00","TOOLS: Capitalization fix

svn-id: r54703
"
"e5f2c235d307f14081812608345b963f62ccbe5d","2010-12-01 15:15:42+00:00","BACKENDS: Simplify the inclusion of gl.h. SDL has already simplified it for us :)

svn-id: r54704
"
"81209867a2eaa0cf9fa4cf0120c9cb6ef353e2fe","2010-12-01 15:24:54+00:00","MOHAWK: Split the demo slideshow opcodes into their own class

svn-id: r54705
"
"77782f4eb3655d9d7b73c6158b96e369d617163b","2010-12-01 17:56:36+00:00","MOHAWK: Split intro and demo opcodes into their own classes

svn-id: r54706
"
"ddd691e2d3c02f9b1dfcaafd2239a4a04a7996a3","2010-12-01 18:21:17+00:00","MOHAWK: add LBGraphics::copyImageSectionToScreen

svn-id: r54707
"
"3471d8ee45dee6097b4ba13e80648c600de9292c","2010-12-01 18:21:33+00:00","MOHAWK: rename DelayedEventType values

svn-id: r54708
"
"4e3233fdba5982e57bcf930626dd882379fc00c2","2010-12-01 18:21:49+00:00","MOHAWK: fix LBLiveTextItem drawing for LB 2+

svn-id: r54709
"
"a62500db1e596107990649a2843ec77fc9075358","2010-12-01 18:22:05+00:00","MOHAWK: document/handle more LB item data

svn-id: r54710
"
"1b27de3829024e25496145c0c29473f4921d85ac","2010-12-01 18:22:21+00:00","MOHAWK: fix LBPaletteItem

svn-id: r54711
"
"1cb199229aa4f159a725e2ab114842fab37deba2","2010-12-01 18:22:36+00:00","MOHAWK: add stub implementations for more LB script opcodes

svn-id: r54712
"
"cb8ce9feac90dcd0c59b47af5002718b9b754ee2","2010-12-01 19:46:46+00:00","WII: Let the base backend decide the default detected language.

svn-id: r54713
"
"1ed5b5b353b476a66992d6849245ba8e129daaaa","2010-12-01 19:57:23+00:00","DC: Adapted CDDA interface to the new standard.

svn-id: r54714
"
"a17c07bcaa5256acf5777b2d4df90e0c01d38d74","2010-12-01 20:00:40+00:00","I18N: Improve the fallback language auto-detection.

- Broaden the range of language tags that could be accepted as fallback in
auto-detection. For example, for a system with locale 'pt_PT', all of
these would be accepted as valid fallbacks: 'pt_PT_*', 'pt', 'pt_*'
- Make language codes matching case-insensitive as specified in RFC 4647.
- Add support language code blocks longer than 2 characters.

svn-id: r54715
"
"d5a4f554af1bcbccfb31ef5a8e51307bb745f035","2010-12-01 20:03:05+00:00","ALL: Fix a few typos

svn-id: r54716
"
"85d42c405d97b24609f1c6e6b4a73b10b6c0d40a","2010-12-01 20:11:24+00:00","HUGO: Use cursorman, add a windows-looking cursor

Cursor copied from Mohawk engine, thanks clone2727

svn-id: r54717
"
"250d5d81f7d98f4aec05b6ffd8496ab2d002f124","2010-12-01 20:17:31+00:00","GOB: little clean-up

Remove a useless include of cursorman.h and several
superflous empty lines.

svn-id: r54718
"
"f3bda71376137b1cf06f58fcdabd170d76aa5c35","2010-12-01 20:37:36+00:00","MOHAWK: Implement maze runner backtrack button. Last part of Selenitic completed !

svn-id: r54720
"
"75cf4a225d741be442097f23e361459e08e45fc2","2010-12-01 20:40:12+00:00","CONFIGURE: Remove the duplicated --disable-opengl description.

svn-id: r54721
"
"4fe7e1b3e9ff866d51ec2b86880acbbedc86d6ec","2010-12-01 20:50:12+00:00","CONFIGURE: Fix OpenGL library detection on OS X in case MESA is installed.

svn-id: r54722
"
"bdc3742ced49ffcf48b7cab543758b8976fc94a2","2010-12-01 21:05:08+00:00","MOHAWK: Split makingof and preview opcodes into their own class (and now all are separate)

svn-id: r54723
"
"a029f6a5c4e4d15ff1aee6544e17a3797d23f260","2010-12-01 21:08:47+00:00","GOB: Add back 3 empty lines used by DrMcCoy

svn-id: r54724
"
"349ebe94f19c5d7d2108a0c97aaeb2f5b5709b6e","2010-12-01 23:15:28+00:00","HUGO: Add Missing shutdown() Call - Currently Disabled.

The engine shutdown() function is required to be called to clean up a number of allocated memory blocks. Unfortunately, this currently causes double free issues. This call is added, but commented out with a FIXME explaining this.

svn-id: r54726
"
"b36b7ee3493dbf086ffb6aba4a3cb5b5daa4d7d7","2010-12-01 23:55:10+00:00","SCUMM: Fix GM initialization when 'enable_gs' is set.

This is a regression from r25630, which caused the code to send some garbage
data to the GS device, which resulted in some devices to fail with an
'Address Error.' (like the Roland SC-55).

This might also fix bug #1927501 'GS option is broken'. Even though actually
the device there failed with another error it is likely to be caused by the
same code. At least it is the only iMuse MIDI code change between 0.9.0 and
0.12.0, which might result in such a problem.

svn-id: r54727
"
"e85d196f33a1974bf1fe6088e6eb41c3c20c221f","2010-12-02 00:27:26+00:00","SCUMM: Fix bug in V12 games causing chars to be lost when wrapping talk text

svn-id: r54729
"
"31d2d2af4c4941f47a0103dafdedebacb7bcc8a5","2010-12-02 00:27:46+00:00","SCUMM: Workaround for bug #1447058, a race condition in the game scripts

svn-id: r54730
"
"41ad4a431db83d166bdaab01bf0a28f0041cd853","2010-12-02 04:01:07+00:00","MOHAWK: Stub off various Myst opcodes

svn-id: r54731
"
"5990753271292375769ce1a683e8607521ef8c01","2010-12-02 09:09:53+00:00","OPENGL: Fixed flawed include file logic in gltexture.h, when USE_GLES is defined (a regression from r54704)

svn-id: r54732
"
"f1d8fc49f45ff5ded5336e8a07a1ddabad674867","2010-12-02 12:44:36+00:00","CONFIGURE: Add detection for OpenGL ES 1.1

svn-id: r54733
"
"44483e1e6ebca392305be322b3bba4a9e8f466ab","2010-12-02 13:13:10+00:00","OPENGL: Fix compilation when OpenGL error checks are enabled.

svn-id: r54734
"
"0ac28d1fbf94fddb6c5f38aca91dccdf5915a68c","2010-12-02 13:29:49+00:00","Disable error message regarding RESOURCE.AUD/.SFX for now.

svn-id: r54735
"
"4fe03f1b664a71c323ba9de16c95e492540a211c","2010-12-02 13:37:39+00:00","SCI: Enabled the GUI option to play speech and show subtitles simultaneously in SQ4CD

svn-id: r54736
"
"c14399c22979b475cd5aa1ba6aa793d8f36011fa","2010-12-02 17:03:21+00:00","SCI: Slight formatting fix.

svn-id: r54737
"
"a2e49af864eb54e72124f5043abe072c179f02b5","2010-12-02 20:43:37+00:00","I18N: Update Hungarian translation (from patch #3124359)

svn-id: r54738
"
"a9388af99649cffa6301e9f31d5d80f2557a0369","2010-12-02 21:15:47+00:00","MOHAWK: Fix resource type 12

svn-id: r54740
"
"bf82f16982cc6e0f5ea6069f8ec4f9fbbc38739d","2010-12-02 21:16:39+00:00","MOHAWK: Implement Myst opcodes 141 to 143, circuit breakers

svn-id: r54741
"
"eb729b5f2e5178a652c87fcdc7493eda88c1bddc","2010-12-02 21:24:55+00:00","MOHAWK: implement kLBAnimOpDelay

svn-id: r54742
"
"27799e354e073cc2db6160fdf25b4da321d343e7","2010-12-02 21:25:15+00:00","MOHAWK: move shared setPalette/copyImage routines into GraphicsManager

svn-id: r54743
"
"4b7af0244fdcb19d3648067ff80906badb146c49","2010-12-02 21:40:17+00:00","GOB: Make drawYUV() more clear

(It's still wrong though :P)

svn-id: r54744
"
"d6fadb2cb47fcb39cc0d866aa7722e765f38baaa","2010-12-02 21:46:11+00:00","GUI: Change the themes to use their low res version for 544x333.

This fixes an assertion in Myst when opening the GMM. The GMM in Myst looks a
bit odd now though.

svn-id: r54745
"
"a29adaa77ceb6434fabe72499d94f3fb597e12fd","2010-12-02 21:54:55+00:00","GUI: Prevent high res versions of the themes to be picked for 544x333.

This fixes a problem in case the high resolution theme file was picked up
before the low resolution theme file and thus it was directly chosen.

svn-id: r54746
"
"9163b9e03252c666e81ab3e453652dd95551e229","2010-12-03 09:23:56+00:00","LURE : Fix for ID: 3030143  Unexpected game cursor behavior. Always refresh menu and screen when mouse is moved.

svn-id: r54747
"
"68937e6e77a96ff5fe85973e72ea75e08b24adda","2010-12-03 15:11:43+00:00","WII: Use more standard Chinese locales.

Don't distinguish between simplified and traditional Chinese in the
language tag, as suggested by LordHoto.

svn-id: r54751
"
"878674809e96e563404343e8b28125d3af775929","2010-12-03 18:57:20+00:00","DC: Implement getSystemLanguage()

svn-id: r54752
"
"7f533ba2536beb4ac7215c6e051a28b8e0a9fb46","2010-12-03 19:01:52+00:00","DC: Remove extra semicolon. (Should fix compiliation hopefully).

svn-id: r54753
"
"bd6f33380ecc8ab78012292e3a1b5ddb0c448c82","2010-12-03 19:09:27+00:00","OPENGL: Fix the fullscreen mode detection when SDL accepts any resolution.

svn-id: r54754
"
"f1d961a35eadec6a76c0423563e379d830f68002","2010-12-03 19:16:23+00:00","OPENGL: Some slight formatting fixes.

svn-id: r54755
"
"5884f5a7ac1ca83e702f44cd4ecfc56dcfaf2490","2010-12-03 19:43:27+00:00","OPENGLES: Fix the projection matrix and the includes.

svn-id: r54756
"
"16483fcf34dbe029ccb67a9d7966c5d904b0bf79","2010-12-04 02:50:27+00:00","BASE: Only clear debug channels after destructing the engine object in runGame.

This should fix missing debugC output when the engine object uses debugC etc.
in its destructor (or functions called from there).
In theory all the engines should do that themselves, but to avoid any issues
because of them not doing it we still do it here to be safe.

svn-id: r54757
"
"4a8fc942b7f7ea0636650ed44f0fde6db91c6b11","2010-12-04 09:26:44+00:00","MOHAWK: Give meaningful names to the game global vars and selenitic vars

svn-id: r54758
"
"52217fa434ba50751a139b97f634d255a50c6e97","2010-12-04 11:54:08+00:00","MOHAWK: Implement Myst opcodes 120 and 210, rocket power generator

svn-id: r54759
"
"8ed8adeebaaadfe0d49edd73c19b63d2e3bad89b","2010-12-04 23:47:43+00:00","MOHAWK: tidy up LB hardcoded UI click functions, add poetry mode support

svn-id: r54768
"
"5928532f0baeb773f330242daebe220f5c4111e8","2010-12-04 23:47:59+00:00","MOHAWK: fix LiveText items without phrases

svn-id: r54769
"
"e37257fe39e8c5c7f9004f793d73f6684b8eb743","2010-12-04 23:48:14+00:00","MOHAWK: fix LB menu mode with subpages

svn-id: r54770
"
"4a8d68f3d327b3f1bdaffa9540d4460afdb283c4","2010-12-04 23:48:31+00:00","MOHAWK: implement setGlobalEnable and setGlobalVisible for LB

svn-id: r54771
"
"9a8539e1d8122d61db3fc90ad71a3ffae23e4bf9","2010-12-05 00:45:21+00:00","MOHAWK: Fix tMOV resources at the end of the file list (thanks, fuzzie)

svn-id: r54774
"
"70ab5a21da160ce5a56b2261f0dc4b596a1d623a","2010-12-05 00:51:04+00:00","COMMON: Fix AppleDouble support in the MacResManager (thanks, fuzzie)

svn-id: r54775
"
"24a0b50ac399e71634725ddaaf4ac87288916d3c","2010-12-05 08:36:41+00:00","MOHAWK: Implement Myst opcodes 158 to 166: Rocket sliders + check lever + link book

svn-id: r54776
"
"9e6fe3bd888625de33c029998b0403ca7f0b48da","2010-12-05 16:19:35+00:00","MOHAWK: add runCommand/checkCondition routines for LB 2/3

svn-id: r54777
"
"f84b027e50e303edeb4bc341f76764b830ad35a7","2010-12-05 16:19:52+00:00","MOHAWK: read and use LB 2/3 conditions/commands

svn-id: r54778
"
"669ad3d217bbc322f7a443786229ea46642df1fc","2010-12-05 17:23:57+00:00","MOHAWK: Silence a warning

svn-id: r54779
"
"7adecddbfcb92b201e2df49d304c22d21be8c3ca","2010-12-05 21:52:42+00:00","HUGO: Remove Invalid Memory Read in getSound() - Size not defined until after function returns.

svn-id: r54787
"
"06310f81761bee8db9d63da969dead2af7c537d7","2010-12-05 21:55:26+00:00","I18N: Update Brazilian Portuguese translation

svn-id: r54788
"
"d3719a81927a666e5065cc56c9e882f2cc351e69","2010-12-05 22:02:04+00:00","HUGO: Partial Fix For Leaks from ReadPCX()

The shutdown() call has been reinstated, and freeObjects() now works without a double free and thus segfault, but this still misses some allocated resources...

svn-id: r54789
"
"899f6a9e8896a2ce21bc64327495cbefa57a7cc4","2010-12-05 22:10:00+00:00","MOHAWK: remove 'internal error' errors

svn-id: r54790
"
"433a10e7736efe69011915ec5ec6dad49d6b933b","2010-12-05 22:10:20+00:00","MOHAWK: handle -1 phase for LB 2/3 items

svn-id: r54791
"
"7c9dc9f117e4ad7f78d0069c38e707e43d35bf5b","2010-12-05 22:10:50+00:00","MOHAWK: handle LB 2/3 kLBNotifyChangeMode, kLBActionNotified matching

svn-id: r54792
"
"237925e5fddf21dba86155fc9d10aba7355cc9ed","2010-12-05 22:11:07+00:00","MOHAWK: improve LBPaletteItem support

svn-id: r54793
"
"8dc80912f305db98a26a344fe197dd71da08ede7","2010-12-05 22:58:13+00:00","MOHAWK: implement kLBNotifyChangeMode

svn-id: r54794
"
"5ee7a44cf65ed0519f3859bfe9e77643acc67004","2010-12-05 23:02:12+00:00","MOHAWK: fix kLBNotifyChangeMode where there's no mode change

svn-id: r54795
"
"dda67d651b2e5a8ed2a76c431d992d65c8f06c92","2010-12-06 01:56:42+00:00","HUGO: Fixed ReadPCX Memory Leak

freeObjects now works correctly.

svn-id: r54796
"
"402831b8cae807e46a04db0d3548b0a340e60d50","2010-12-06 13:49:56+00:00","MOHAWK: finish kLBSetPlayInfo reading

svn-id: r54797
"
"99bc2c7a28187a88aa21e80d65083c73e7bfedcd","2010-12-06 13:50:11+00:00","MOHAWK: fix LBLiveTextItem::handleMouseDown

svn-id: r54798
"
"c2ec6020e3bfdfb4e6bbd76e409ddd3cf7306ea1","2010-12-06 19:37:19+00:00","SCI: Fix uninitialized reads (and therefore, GK1)

svn-id: r54799
"
"813d96ec20c38de2344da8dcb90c3faa3b066f5e","2010-12-06 19:58:22+00:00","MOHAWK: Silenced warning

svn-id: r54800
"
"077102f8db20d1593c656c81ca022b641c74b670","2010-12-06 20:22:53+00:00","HUGO: Fix crash in H3 (Swinger display name)

svn-id: r54801
"
"fb854b1483a0bcb18ac938b3e0164c7e7e22f81d","2010-12-06 20:29:45+00:00","MOHAWK: Fix Myst library books, fireplace combination book, and bookcase transform animation.

svn-id: r54802
"
"edf4b1926bd7365d5b88c9e344aca35cf44da4db","2010-12-06 21:10:12+00:00","MOHAWK: Rewrite the Myst save/load code to use Common::Serializer and name all the variables

svn-id: r54803
"
"8ca0b867e0f5127cf192b7cb7a7c12216a9545a4","2010-12-06 23:15:25+00:00","HUGO: Fixed Valgrind Errors and Segfault when hugo.dat is missing.

svn-id: r54804
"
"de2ef2edc0ea277b4ea5db77a109199c18ff0dae","2010-12-07 00:47:05+00:00","SCI: Removed the system strings code and replaced it with a much more simplified version, thus greatly simplifying handling of system strings

svn-id: r54805
"
"65f218dce04d7bf82d08b440e2e14d37a80aa71c","2010-12-07 01:12:48+00:00","SCI: Silence warnings

svn-id: r54806
"
"a789ee11c2116d190bc0f2f2051ad931fb53d478","2010-12-07 01:37:43+00:00","MOHAWK: Implement loading to different ages in Myst

svn-id: r54807
"
"a8c81723153977801fdebecd8867daccc9e85591","2010-12-07 01:58:18+00:00","MOHAWK: Set the default cursor upon loading a game in Myst

svn-id: r54808
"
"fdd2d980c62b9d5b8fdbe13cb181f98bb143003d","2010-12-07 16:49:53+00:00","SCI: Bumped up the save game version for rev #54805

Initially, I thought that older ScummVM versions will work with these saved games.
However, they will probably crash when trying to load saved games after rev #54805,
as the heap is reset when loading, and the system strings segment is no longer
initialized (thanks wjp).

svn-id: r54809
"
"20de55129f4cfa1b9ccaa0b04604cb1a0208b2e7","2010-12-07 17:56:08+00:00","MOHAWK: Start Myst back on the dock again

svn-id: r54810
"
"9a0c20a45fe18f13d02f31c0201248521df8d8a5","2010-12-07 18:00:18+00:00","TINSEL: Improve support for DW mac demo (see bug #3110936)

svn-id: r54811
"
"d06a3553411c8fb1a638f573f6ceb07a940569b9","2010-12-07 18:15:07+00:00","MOHAWK: Further limit where Myst can be saved

svn-id: r54812
"
"2f86db50ef835031aa218b906d96761d4e0f8597","2010-12-07 18:21:05+00:00","MOHAWK: Fix loading from the launcher in Myst

svn-id: r54813
"
"ce0f0bd0560d713aeddb45c16506cc9d2387c136","2010-12-07 18:33:58+00:00","MOHAWK: Allow loading both original and ME saves in any version of Myst

svn-id: r54814
"
"6edc86a19b6060c9f0f257b05ff711b021910de4","2010-12-07 18:54:21+00:00","DEBUG: Let GUI::Debugger::preEnter and postEnter (un)pause the engine

svn-id: r54815
"
"0d59c33b35177f3325ae9edbac902ab228248929","2010-12-07 19:41:49+00:00","MOHAWK: Default to the main cursor if no cursor hints are present; fixes a couple cards

svn-id: r54816
"
"a4ff63a2d33c25a478ab8ec72fcf182d91408b17","2010-12-07 22:32:54+00:00","TOOL: Add hotspots info to add support to 'Exit' in Dos versions of Hugo

svn-id: r54821
"
"fecaa5655e42e6c75b9e4d8107621ad6c3345623","2010-12-07 22:58:45+00:00","MOHAWK: Rename LBAction to LBEvent, fix event targeting

svn-id: r54823
"
"1c21ba1fc0db943282f9f9fabee9df9d6d97e553","2010-12-07 22:59:01+00:00","MOHAWK: Run kLBEventMouseTrackIn in handleMouseDown

svn-id: r54824
"
"d571279d9976801b546d6ab02d0e8f6247a1f61f","2010-12-07 22:59:16+00:00","MOHAWK: Handle LB event-run opcodes

svn-id: r54825
"
"08262d90fb214f292aacf2b927ecb39fe50aef66","2010-12-07 23:55:27+00:00","GOB: Fix byte *getFile() for loose files

A very, very stupid error on my part :P

svn-id: r54826
"
"d451084fb44a536d0f161bccb5b73088df253c9c","2010-12-08 01:35:12+00:00","MT32: Get rid of ANSIFile.

svn-id: r54827
"
"e361b84d3baeeb683889e3131e3d05d564f08cc4","2010-12-08 01:35:34+00:00","BACKENDS: Fix OSD implementation in ModularBackend.

svn-id: r54828
"
"da2880be47bf614d3c30bf91bb915843bb249158","2010-12-08 01:35:54+00:00","OPENGL: Disable OSD support for now.

I added an comment explaining why OSD is broken currently. The basic problem is
that OpenGL is not thread safe, thus in case we try to display any message on
the OSD from the sound thread for example it will result in crashes.

svn-id: r54829
"
"d184686189be26d98ee05a48f5d83cfcbda43325","2010-12-08 01:53:20+00:00","OPENGL: Fix OSD support by only updating the OSD texture in internUpdateScreen.

This actually still has the drawback that if one calls OSystem::updateScreen
from the sound thread that it might crash. Hopefully no code does this though...

svn-id: r54830
"
"e0a6ecaca9d54723ae0c6957c5dd92171e949dee","2010-12-08 07:18:38+00:00","TOOLS: Fix the 'Mouse text' crash in Hugo

svn-id: r54831
"
"8241b1b3210af3c00220cb7cc365549ad149cd81","2010-12-08 15:45:22+00:00","MOHAWK: Implement/stub more LB 3 notifications

svn-id: r54832
"
"5db43d641eeac219e0561cbf54b8bb2f59e6be26","2010-12-08 15:45:40+00:00","MOHAWK: Use named constants for LB opcodes, add warnings when unimplemented

svn-id: r54833
"
"efc5ab5398d7ff3fabb13c6488229d98d57c767d","2010-12-08 20:51:44+00:00","HUGO: Fix an episode name and several picture directories

svn-id: r54834
"
"9a117e3eca7fd3f6fc7254d1664bd9cc0206e0b7","2010-12-08 21:18:48+00:00","HUGO: Hopefully fix overlapping memory regions

Thanks Digitall for debugging that

svn-id: r54835
"
"bf044c02124e1c34141a7b20f1e8d6396d50cdbe","2010-12-08 22:03:35+00:00","I18N: Update Brazilian Portuguese translation (from patch #3131421)

svn-id: r54836
"
"cf86141ca3b8072d3e18df9e22ac555f227c3836","2010-12-09 13:36:23+00:00","VIDEO: Fix a truncation in the SMC decoder (thanks, fuzzie)

svn-id: r54839
"
"680b0d3172007a6c29558785456ffbc2078b7a10","2010-12-09 19:59:26+00:00","VIDEO: Implement multiple video codec support for QuickTime

svn-id: r54840
"
"09abe6f1510b797727cc2c5de5b3c85607cd915b","2010-12-09 20:48:08+00:00","VIDEO: Allow for 8bpp Cinepak videos

svn-id: r54841
"
"8be4da02f66437fd54addbb38e2153e96a3f4ea7","2010-12-09 21:24:12+00:00","MOHAWK: Add BCOD resource type

svn-id: r54842
"
"32ed3b35829dc29617c7a300d043afc2bd26999b","2010-12-09 21:24:31+00:00","MOHAWK: Allow background videos to be played/manipulated with resource handles

svn-id: r54843
"
"eecc2bcb12a7bff3573092e0a844cd0d37856599","2010-12-09 21:24:46+00:00","MOHAWK: Don't redraw the screen every frame in LB

svn-id: r54844
"
"0257f2a2171349446e820e7b21334b6d71016b3c","2010-12-09 21:25:05+00:00","MOHAWK: Implement LBMovieItem

svn-id: r54845
"
"4393ef1bd5c607df678d78b56dd9c1e515dae84f","2010-12-09 21:25:21+00:00","MOHAWK: Fix LBPaletteItem to handle variable-size palettes

svn-id: r54846
"
"cf65709c4570d59cf12114c36310923911d7c737","2010-12-10 02:09:48+00:00","VIDEO: Fix QuickTimeDecoder::hasDirtyPalette() by allocating the palette only for 8bpp videos

svn-id: r54849
"
"6bc638a54bad6856794cb32ea31e33c31079e099","2010-12-10 02:10:18+00:00","MOHAWK: Fix the Myst drawImage debug command

svn-id: r54850
"
"e6366d4972d9f5c4c47b44d880713766dfbe57da","2010-12-10 07:03:24+00:00","HUGO: Fix bug in HUGO.DAT loading

svn-id: r54852
"
"f8fa960cfd3dc54d4d951305039283a44288afe1","2010-12-10 07:08:54+00:00","HUGO: Enable the use of the icon based inventory

In Win versions, F6 now opens the directory. Not perfect yet...

svn-id: r54853
"
"e04e6f88557158bc590e31d0df850a8225ef4788","2010-12-10 07:33:02+00:00","TOOLS: (create_hugo) Fix typo in act14 definition

svn-id: r54854
"
"107a2a25aacd8ca8c2d8b00564467309d3502f04","2010-12-10 19:51:00+00:00","MOHAWK: Implement Myst opcode 115, give page to book

svn-id: r54856
"
"9aa7f2e7f0b7519144da22f4e409cffbfece2819","2010-12-10 20:05:38+00:00","MOHAWK: Fix a typo

svn-id: r54857
"
"eefb3ee787266fab788ab0e3bd06ba475369702f","2010-12-10 20:09:05+00:00","MOHAWK: Fix another typo (heigth -> height)

svn-id: r54858
"
"2a8c1ab13a73d4ac6d239a28c9509f69301448a3","2010-12-11 08:33:39+00:00","MOHAWK: Change Myst fireplace and green book to use correct vars

svn-id: r54859
"
"7419d8c0874b36d9ef8954132832dbba9f5f6204","2010-12-11 11:40:12+00:00","MOHAWK: Implement Myst opcodes 116, 186, 188, 189, clock tower time controls

svn-id: r54863
"
"adc7dc0785087d4dd4c59fd418f499e5cc7572ce","2010-12-11 12:59:56+00:00","MOHAWK: Fix using wrong coordinates in Myst opcode 28, restoreDefaultRect

svn-id: r54864
"
"43aa47dd311da8afe47cbf1e1964dedf98506584","2010-12-11 16:55:25+00:00","MOHAWK: Fix loading with non-Selenitic red/blue pages in hand

svn-id: r54865
"
"36851d4eb4a4b9fe3f717aee24ab4f10e14ac725","2010-12-11 17:00:22+00:00","MOHAWK: Implement Myst opcodes 113, 114, 198 : Vault open / close
In progress tower rotation

svn-id: r54866
"
"b1e3b48418e2514893768ecf8a6ba0db61b9302e","2010-12-11 18:38:27+00:00","MOHAWK: Fix some Myst ME cards that store PICT images in WDIB resources (see myst 4013)

svn-id: r54867
"
"bcea996361b8cea2c05b7dd7c3f9006fa09656bf","2010-12-11 19:53:11+00:00","COMMON: Handle C++-style comments in config files

svn-id: r54868
"
"60c844efd3f86e4c9131d1a2c34490b6d31cc873","2010-12-11 19:53:28+00:00","MOHAWK: Add yet more fallbacks for LB page loading

svn-id: r54869
"
"7c97a86a9a7f111ccf9b5a2c9e59b4bb499006c6","2010-12-11 19:53:44+00:00","MOHAWK: Add size check when reading LB messages

svn-id: r54870
"
"85c8960d8bb3cf6bc3ab1473bfaa799dad265db7","2010-12-11 23:48:29+00:00","MOHAWK: Improve LB script parsing

svn-id: r54871
"
"56f98a8574f99e9d4eb9f59d08b54d2c1eb7fa64","2010-12-11 23:51:50+00:00","SCUMM/FM-TOWNS: hopefully fix bug #1463434

o5_verbOps() case 9 (SO_VERB_NEW) works slightly different in SCUMM 3 FM-TOWNS (I don't know about DOS).
This should fix the issue with the broken key shortcuts.
Old savegames won't be fixed, though (since the broken verb states will be restored from the save file).

svn-id: r54872
"
"d88476e6773d16a86bc43b9789cf0b51d753ad97","2010-12-12 00:18:49+00:00","MOHAWK: parse LB script named targeting modes

svn-id: r54874
"
"3b40695f92a9cc09ae37e467309e76f33d752964","2010-12-12 00:19:51+00:00","I18N: Update Brazilian Portuguese translation (patch #3133012)

svn-id: r54875
"
"27e7da73402c2cd75f3ac40a5c2ddd675ad6a923","2010-12-12 00:24:19+00:00","I18N: Add Norwegian (Bokmaal) translation (patch #3134466)

svn-id: r54876
"
"6e5b3ca5887b10c4d8a186697758457415a44765","2010-12-12 00:33:56+00:00","NEWS: mention new Norwegian translation.

svn-id: r54877
"
"c4e4f7dc865b014cbfd516753fefd5ed077c8450","2010-12-12 07:17:13+00:00","PARALLACTION: parse command lists for kNoneType zones, even if defined after TYPE markers. This fixes bug #3131769.

svn-id: r54879
"
"c428cfbb855fa3162fcc6aff87e2b1c8a3de799a","2010-12-12 07:40:00+00:00","HUGO: Fix 'mouse' bug in H3 Dos, TPS tuning

- Fix 'mouse' bug in H3 DOS. Game is still not completable
- Use variable normal TPS, as it was slightly different in
some DOS versions

svn-id: r54880
"
"2bbe59ad8d39f4c526eff6f468dbc4de9853d2f6","2010-12-12 08:37:19+00:00","HUGO: Replace PROMPT box by YESNO box in H3 Dos

This only applies to the old man dialog.
This makes H3 Dos completable.

svn-id: r54881
"
"d19d9991b24c0277cb8fe8a0049a4d70ce92ce76","2010-12-12 11:43:23+00:00","PARALLACTION: do not skip commands on Examine zones if there is no text to show. This fixes bug #3135782.

svn-id: r54882
"
"c6887d0404a6f129f7e02ac24884786ccd5f035b","2010-12-12 18:41:15+00:00","MOHAWK: Implement Myst opcodes 106, 108 and 202 : tower rotation

svn-id: r54883
"
"26c37051526e5e6c45dd5bf46cb9e3a06c065164","2010-12-12 18:55:27+00:00","MOHAWK: Silence warnings

svn-id: r54884
"
"9e483b79ce6f0bb2b169c18ae16a6c820ab74c2c","2010-12-12 19:00:53+00:00","MOHAWK: Skip CD-ROM titles in LB paths

svn-id: r54885
"
"4d5ab0cff282fe79bdf3d2b419e158e30c34281e","2010-12-12 19:01:10+00:00","MOHAWK: Handle LB load phase

svn-id: r54886
"
"a97c90c903d1fc1c649a27cea44e6525d0d67caa","2010-12-12 19:01:27+00:00","MOHAWK: Always run kLBEventMouseUpIn, for now

svn-id: r54887
"
"467b30f1a285e3057f2bbc8c9fc6f7d870a40557","2010-12-12 19:01:46+00:00","MOHAWK: Refactor/improve LB script entry parsing

svn-id: r54888
"
"896316a96a0faa674929cf0d09d00140b2cc0b59","2010-12-12 19:28:43+00:00","MOHAWK: Fix freeze after tower rotation. Fix opcode 121 : cabin safe digit change.

svn-id: r54889
"
"c089fb22cd9ff52da48336627e3816215d512657","2010-12-12 23:00:15+00:00","MOHAWK: More work on LB script parsing

svn-id: r54892
"
"1d61c9a50821732fc0d6da994e2e67e88fe60c70","2010-12-12 23:00:46+00:00","MOHAWK: Handle kLBGlobalDisable

svn-id: r54893
"
"47e972638598b83e420747d0baefd5d83cdf561f","2010-12-12 23:09:09+00:00","TOOLS: Suppress 2 unused (and corrupted) act35 in H3 DOS

svn-id: r54894
"
"0650934337b713e80415298b794ef22eb0427dfe","2010-12-12 23:11:23+00:00","MOHAWK: Handle chained LB commands

svn-id: r54895
"
"679f67b2e790c48571ddbc1c6f31755479927e7d","2010-12-12 23:59:46+00:00","MOHAWK: Use named constants for LB timing modes

svn-id: r54896
"
"03777f18671da0dd0913c462715ba1daa57427f9","2010-12-13 00:03:15+00:00","MOHAWK: Use named constants for LB control modes

svn-id: r54897
"
"51685f26dc5777e3bb1893705f85ca18cb41632d","2010-12-13 00:20:45+00:00","TOOL: Fix palette bug in H3 Dos (when leaving the cave)

svn-id: r54898
"
"0082f8ec8b690682f6fb0ae8339b6002fe8ea5e6","2010-12-13 20:19:34+00:00","MOHAWK: parse LB subentries correctly

svn-id: r54901
"
"a90fdce46d4819e9153f12899cc0f2216a298d86","2010-12-13 21:08:52+00:00","HUGO: Add splash screen in H2 and H3 Win

svn-id: r54902
"
"c2e48f5c085b9ae4ddeb2e6be21071fe4d1cc8bb","2010-12-14 06:42:00+00:00","MOHAWK: Implement Myst opcodes 122 to 124 : Cabin safe handle

svn-id: r54905
"
"d4ce60336166f2a18632e4bb3fe54d5bdff59651","2010-12-14 19:11:16+00:00","MOHAWK: Rework Myst GFX updates
- Initial card state is drawn to the back buffer
- Script driven updates are drawn to the front buffer
Allows opcode 28 (copy back buffer to screen) and opcodes 29/33 (copy image to screen / back buffer) to work properly.
Fixes among others the generator room lights, and the matchbox.

svn-id: r54907
"
"3a5c8e6cfaeaa8e6a2ff421222418d2ea22721c1","2010-12-14 22:25:10+00:00","SOUND: Fix Un-initialised Memory Reads in MT-32 Emulator, reported by Valgrind.

svn-id: r54909
"
"0c677aacde925fdef989b8702d23dac6cb9f04a1","2010-12-14 22:58:51+00:00","MOHAWK: Add support for DOS v2 archives (CSWorld Deluxe)

svn-id: r54912
"
"e88fcee0579e29313a0621679bc88e1dd80a34c3","2010-12-14 22:59:39+00:00","MOHAWK: Add support for DOS bitmaps (thanks to fuzzie for the EGA planar code)

svn-id: r54913
"
"f2205a5a01805af76d3c85d7870a61eb76c6bbce","2010-12-14 23:30:22+00:00","SCI: Close Memory Leaks in SCI Resource Loading, reported by Valgrind.

svn-id: r54916
"
"f05f5348b7d6da6404a29d6a6f6b4452ffd5735b","2010-12-15 07:35:20+00:00","HUGO: No longer shift down inventory by 8 pixels

svn-id: r54920
"
"ca547118e39fb723d59c96487e3bfc451f0f46b4","2010-12-15 20:11:59+00:00","HUGO: Ensure F6 (inventory) is only active when appropriate

svn-id: r54922
"
"76eb9d7f6430a3528ba0688e8c3f8519b23fb8a5","2010-12-15 20:37:09+00:00","HUGO: Clean-up, move MidiPlayer class definition to .h file

svn-id: r54923
"
"58b72951934ecd9697c1c184a0f588a4aaa12fc1","2010-12-15 22:36:55+00:00","SCI: Fixed View Cel RLE Decoding when RLE Code 0x40 is used (Corrects Bug #3135872 'LSL1VGA: 'Pause Game' problem')

In the copy case, the runLength can be up to 127, not 64 i.e. the LSB of the RLE code forms part of the runLength.

svn-id: r54924
"
"aa152358586b30e6087dac4473ea6e8ff3417ca0","2010-12-15 23:35:21+00:00","SCI: Slight cleanup

svn-id: r54925
"
"a2bb676c19c70cd79f141650fe0587148c71702b","2010-12-15 23:52:24+00:00","HUGO: Fix pathfinding bug in 'bridge' screen (H3 Dos)

svn-id: r54926
"
"375f32fbe94e8500a03c19ed32865efdcde8ca8e","2010-12-16 01:35:13+00:00","VIDEO: Make VideoDecoder::decodeNextFrame() return a const Surface pointer

svn-id: r54927
"
"1ead0d8436cdea9fd6a54af6bf749297afa75a17","2010-12-16 01:41:11+00:00","VIDEO: Make VideoDecoder::getPalette() return a const byte pointer

svn-id: r54928
"
"98a2bc8a9a59d3e77d0a6dd3baf526c63ac8feda","2010-12-16 01:49:29+00:00","VIDEO: Remove the need to call updateAudioBuffer() externally for QuickTime

svn-id: r54929
"
"9285986e62c5bf4985dc2680d1393e67d65c6656","2010-12-16 02:02:53+00:00","VIDEO: Make Codec::decodeImage() return a const Surface pointer

svn-id: r54930
"
"1b267f52819f9e5d173e78dd4a732cdf12e26301","2010-12-16 08:03:19+00:00","MOHAWK: Implement Myst opcodes 147, 169, 182 : Cabin match

svn-id: r54931
"
"ebf2dd8d3805988c8a527c7c4518ffa23fc155f8","2010-12-16 13:25:29+00:00","VIDEO: Extend Codec to support internal palettes

svn-id: r54932
"
"24808d49eb9e8dd8c2a85ceb6cf307435a285b50","2010-12-16 16:12:38+00:00","MOHAWK: Added the 'resources' command to Myst's debug console, which lists the resources in the current card.
Allow the 'drawRect' debug command to take a resource id as a parameter, to draw the resource's bounding rect.

svn-id: r54933
"
"68e32de097997eb4f24f1875e9d73606f9bcef74","2010-12-16 16:13:50+00:00","MOHAWK: Implement Myst opcodes 146, 149, 150, 150 : Minimal boiler

svn-id: r54934
"
"3d81fc1522fd47d329103acacc23f84c6987e4fc","2010-12-16 16:53:26+00:00","MOHAWK: Move readString into the LB engine class

svn-id: r54935
"
"eac4a641435af9fa365715a0ad2e16fa4ea71db1","2010-12-16 17:01:09+00:00","VIDEO: Add CDToons decoder

svn-id: r54936
"
"e3eddf32e97f2f357b6194218ead31731b4043bc","2010-12-16 20:52:18+00:00","MYST: Add Var Getter For Myst Courtyard Box Variables.

svn-id: r54937
"
"151d180e55782955fafce72477a808309af8ab27","2010-12-17 07:44:59+00:00","MOHAWK: Implement Myst opcodes 128, 168, 216, 217, 304, 305, and 153 to 156 : Giant tree. Channelwood is now accessible from Myst.

svn-id: r54941
"
"8d1f3f00adce5c755907f45cc5c304354ccea4e1","2010-12-17 10:58:34+00:00","PSP: fixed bug exhibited in Gob engine with blacked out video frames

The problem was that I was allowing changes to the palette (in this case) even before the separate display thread, which is synchronized to vsync, was done drawing. This caused the palette to change mid-render.

The fix is a semaphore synchronizing the threads.

svn-id: r54942
"
"c441539bb0e86a98a1dc14c1de16d7157947d611","2010-12-17 11:31:08+00:00","MOHAWK: Change resolution to 544x332 to match the original.

This fixes the vertical alignment issues, and graphic corruption on some cards.

svn-id: r54943
"
"44dfb67faab9b20fc80ebb0e74c7690ce5f41ae4","2010-12-17 12:23:59+00:00","GUI: Adapt GUI themes to latest Mohawk resolution change.

svn-id: r54944
"
"8ec9f96d5478e3c06a7b240a86a537a391665b44","2010-12-17 14:36:32+00:00","MOHAWK: Remove global construction of _viewport

svn-id: r54945
"
"7daea87e617198796220f5915b43fd27d57772e6","2010-12-17 18:18:52+00:00","MOHAWK: Yet more Myst vertical alignment / clipping fixes.

Fixes the boiler wheels drawing incorrectly. Fixes the rocket piano's leftmost key drawing too high. Fixes the timeclock controls beeing misaligned.

svn-id: r54947
"
"222d2809e93fd774c44c78c23628a478ec68b7a1","2010-12-17 23:12:36+00:00","HUGO: little code cleanup

svn-id: r54948
"
"03da126ec7c5e2c8d1406a4fdd7b9b0e73616be5","2010-12-18 08:07:16+00:00","MOHAWK: Implement Myst opcodes 157, 161 and 162: Rocket piano

svn-id: r54949
"
"41acf18a5376f47c9965263ad5fdc8cc2b3a8005","2010-12-18 12:17:33+00:00","FMTOWNS AUDIO: formatting

svn-id: r54950
"
"c870bf22d1f4bd154267a31b6a24eeb6e85c34d7","2010-12-18 13:12:56+00:00","MOHAWK: Separate background sound handling from other sounds for Myst. Allow the scripts to change the background sound volume.

svn-id: r54953
"
"3e31ed6d98eb62e8b3d1e473d1536100b6532f05","2010-12-18 13:13:49+00:00","MOHAWK: Myst sound rework, part 2

svn-id: r54954
"
"e5463502c02525d9541071259a866bdb75f5f9e0","2010-12-18 19:28:27+00:00","NEWS: Set 1.2.1 release date in trunk's NEWS file too.

svn-id: r54956
"
"fd5b8b7fa0765aaa67953a1ef343afcfc6a4c0f9","2010-12-18 22:12:36+00:00","MOHAWK: Add some missing var getters for Myst Island.

svn-id: r54957
"
"e9e09d297c949bfe09ab9e17fa017fe95eb1388b","2010-12-19 02:27:09+00:00","MOHAWK: Added further var getter and setter code for Myst Island.

This fixes Stellar Observatory Lights.

svn-id: r54958
"
"c3fdcef75180d3acf32dace78970f3040cf9d451","2010-12-19 07:02:02+00:00","MOHAWK: Fix Myst courtyard boxes. Hover areas entering / leaving is now handled separatly from other resources since the former have to get events even when they are disabled.

svn-id: r54959
"
"c2bae4b35beeaf500a99253d4792a23e602dce9e","2010-12-19 07:26:34+00:00","MOHAWK: Add 2 Myst var getter / setters

svn-id: r54960
"
"49d529cb7ac0f300ec16f13446d932ddc6fd5e74","2010-12-19 08:56:42+00:00","GROOVIE: Add two new t7g detection entries, one from bug tracker, one from me

svn-id: r54961
"
"91bee3e7b0c8d6587c20f59e541838f9b2124807","2010-12-19 15:48:51+00:00","SCI: Added another English version of QFG3 (bug #3125559)

svn-id: r54962
"
"5e9002a4aaf8b96bd84c9f8964ce79bd6670a224","2010-12-19 16:07:03+00:00","HUGO: Implement setBackgroundColor()

svn-id: r54963
"
"cc0b2b210fd0d9389c155e6c8aef67653e1882ee","2010-12-19 16:16:25+00:00","GRAPHICS: Fixed code analysis warnings (bug #3087917)

svn-id: r54964
"
"da53b85498e0ad2cc1b2f53415028b7b1a11d166","2010-12-19 17:36:36+00:00","MOHAWK: Implement Myst opcodes 109, 117, 118 and 208 : dock forechamber imager

svn-id: r54965
"
"8a1f628d3784ae6c91f9afc31c84c61648d827a7","2010-12-19 23:44:53+00:00","HUGO: Fix case bug in God Mode

svn-id: r54969
"
"9fd43ba6cca192cd7a1ca202e2f2db5b20eff981","2010-12-20 00:18:03+00:00","HUGO: Add god mode to H1 Dos and H2 Dos

svn-id: r54970
"
"3cc456bf2afa73d65f01d493594d19ef2f0efdbf","2010-12-20 04:29:53+00:00","MOHAWK: Fixed Valgrind Error in Myst When Selecting 0 in Imager Code (Myst Card 4709)

Reworked MystGraphics::copyImageSectionToScreen() :
Added clipping of width and height within src surface dimensions.
Improved function readability.

svn-id: r54972
"
"9c23440ae4ee63e0d4841e25b2ddedc7485cc391","2010-12-20 07:58:45+00:00","MOHAWK: Fix 2 crashers with the Myst imager (selecting 00 and playing the moutain video).

svn-id: r54973
"
"d3340b0d0cad316d6a15af3dee2e3a30bd72f244","2010-12-20 12:19:28+00:00","SCI: Commented out unused signal flags

svn-id: r54974
"
"4b836d611fc472be65eb85e4ed0686d6cbd8a69e","2010-12-20 12:21:18+00:00","SCI: Fixed bug #3037945 - 'PQ3 : Graphical Glitch with White Mercedes on Freeway'

svn-id: r54975
"
"26dfb6affabbe3da91934b43819c3a998cd8d125","2010-12-20 15:30:31+00:00","SCI: Fixed bug #3041153 - 'SCI Fanmade Games: Message window glitch'

The left window dimension adjustment (rev #48772) has been moved from
GfxPorts::setOrigin() into GfxPorts::addWindow(), as the updated dimension is
later used when filling the contents of the window (apparent in some fan made
games)

svn-id: r54976
"
"184d56df0ace87d5350ce394691904b00fd27c56","2010-12-20 17:25:58+00:00","HUGO: Improve keyboard handling

- Handle keypad
- Fix 'QWERTY' only issue
- Suppress useless variable and parameter

svn-id: r54977
"
"6308dd77d69cd2f33e84cc06058e2d707a67a1b6","2010-12-20 17:28:17+00:00","OSYSTEM: Clarify grabPalette documentation after talking with Max about it.

svn-id: r54978
"
"39fec99f2688d89d728ee4681ded08fa0d812d1a","2010-12-20 17:40:19+00:00","HUGO: Fix several warnings reported by CppCheck

svn-id: r54979
"
"b87bc18d223ec42d797b3db0b42fa0c257041716","2010-12-20 18:44:25+00:00","MOHAWK: Add var getters for Myst Stellar Observatory Date-Time Display.

svn-id: r54980
"
"5f6dfb2b6797592c965ceaa01eabe8b8a24f5e53","2010-12-20 21:46:28+00:00","N64: save and return exact palette for grabPalette

Save the exact palette and return it when grabPalette is called,
The less precise 16bit conversion is still used inside though.

svn-id: r54981
"
"3d3f7b09b2d92074fb970e3102193b3d4bcff571","2010-12-21 01:09:14+00:00","MOHAWK: Add Framework of getVar(), setVar() and toggleVar() to Myst Stoneship Script Parser.

svn-id: r54982
"
"75649f89038add203e483f43bac0f4d13870704b","2010-12-21 07:53:34+00:00","SCI: Reset the portrait bitmap to the 'closed mouth' state, when skipping dialogs
in the Windows version of KQ6

svn-id: r54983
"
"3a14a7760e0fb2b59e9666cb14d227b276e29f6d","2010-12-21 15:31:59+00:00","SCI: Fixed bug #3092115 - 'ECOQUEST2: Initial text not cleared during ecorder intro'

svn-id: r54984
"
"f1cd95e462a8edaacb6e25c119e02b9aa0c657a3","2010-12-21 15:34:02+00:00","Simplify SCI3 relocation code, also making it correct.

svn-id: r54985
"
"7b0760f1bc5c28abcede041a6e3930f84ff3d319","2010-12-21 15:36:27+00:00","Make Object::_baseMethod a Common::Array. This is intended to clean up
the Object class, and it also plugs a leak.

svn-id: r54986
"
"e97b2d25d1cf649c1e6ec9a41c85fbc76c41e2d3","2010-12-21 18:15:56+00:00","MOHAWK: Allow DefaultCursorManager to use alternative tags

svn-id: r54987
"
"7e5ffb2bcf6b187d7d3a4a08231b3b3078b10208","2010-12-21 18:16:20+00:00","MOHAWK: Remove sound.h include from resource.h

svn-id: r54988
"
"372ede7904581c868d33b3cf0ec2490cbbd774d7","2010-12-21 18:16:37+00:00","MOHAWK: Support compound images (subimages)

These are images embedded in the bitmap data of another image; they
are used in CSTime and Zoombinis, at least. Thanks to clone2727 for
helping me puzzle this out.

svn-id: r54989
"
"7680ed0be7e6d726fd25ba06506cb7fe9e8ea2ca","2010-12-21 20:54:33+00:00","Added back the null check in kArray(cpy): it happens in SCI3

svn-id: r54990
"
"42dc70bb83ecf36ea27c1c2d411d479a4d21d254","2010-12-21 21:18:25+00:00","- SCI: Added code to free the _baseVars value in SCI3 as well. Both free() operations
have been commented out for now, as MSVC complains about heap corruption in SCI3 games
- Code formatting fixes

svn-id: r54991
"
"43800ebf0c9893454e7e208456acf21cbed44aae","2010-12-21 22:16:37+00:00","MOHAWK: Remove unused variables warnings introduced in r54982.

svn-id: r54994
"
"a87c52bdb0d66007f9a2f03777bc1da6ba361ca9","2010-12-21 23:18:38+00:00","MOHAWK: Add Framework of getVar(), setVar() and toggleVar() to Myst Mechanical Age Script Parser.

svn-id: r54995
"
"67cf6a0601f42f8e43d52a194f8d7c00608d977f","2010-12-22 02:46:30+00:00","MOHAWK: Add Framework of getVar(), setVar() and toggleVar() to Myst Channelwood Age Script Parser.

svn-id: r54997
"
"1dde0156c23214be7776054a3aee1d04ed7201f1","2010-12-22 05:52:58+00:00","MOHAWK: Add further getVar() code to Myst Channelwood Age Script Parser.

svn-id: r54998
"
"e20c9028128670f18cc741abbc2788175edf2058","2010-12-22 09:09:38+00:00","HUGO: Add music debug level, some cleanup when opening driver

svn-id: r54999
"
"ada3c01cc1568ad3a1d39496dc65e25e40aed6ac","2010-12-22 09:22:14+00:00","HUGO: Set some volume levels to get the MAME adlib emul working

svn-id: r55000
"
"5a3ed29a4be47cca6d0ab34b26a228317f15d817","2010-12-22 13:17:19+00:00","SCI: Changed the check for NULL values inside kArray(Cpy) to only ignore such values in SCI3

svn-id: r55002
"
"430dc10c4944922894e32d1b29852794c9f27b7b","2010-12-22 13:51:35+00:00","SCI: VMD video related changes
- VMD videos are now properly started from the associated play subop of the
kPlayVMD kernel call, and are now properly positioned on screen, and doubled
only if the games require them to be
- Added an enum for VMD video flags

svn-id: r55003
"
"166f3f2dfd1201a19c107ef9550ca43afbae034c","2010-12-22 13:52:25+00:00","SCI2+: Set pictureCels to 0 after deleting them

svn-id: r55004
"
"a5db8902600a217c5acfbea391a8a3c55dc47f93","2010-12-22 13:58:28+00:00","SCI: Sync in-game speech/subtitle options with the ones from the ScummVM GUI.

- Obtain speech/subtitle options from the ScummVM GUI and set them in CD games.
- Also, set simultaneous speech and subtitles in games that support them
(currently SQ4 CD and Freddy Pharkas CD). There is no GUI option for setting
simultaneous speech and subtitles in Freddy Pharkas CD, so this is the only
current way of achieving this (unless the text speed slider inside the Freddy
Pharkas options window is repurposed - but that will require extensive changes)

svn-id: r55005
"
"f922c290023df48366027383bf2cbe76fdc5d9ca","2010-12-22 14:04:39+00:00","SCI: Limit the speech/subtitle settings sync to SCI1.1 CD games only. Earlier
versions (like SCI1, e.g. KQ5CD and Jones CD) didn't have such settings

svn-id: r55006
"
"1d98bf484e04fb3660c36064af4a30bb3bc9df7c","2010-12-22 14:19:38+00:00","SCI: Also reset flags when resetting the video state

svn-id: r55007
"
"c309bbde28a70a23a4d0199244f6db574d7c7189","2010-12-22 14:23:22+00:00","HUGO: Slight formatting fix.

svn-id: r55008
"
"6817d4b300f272f7ae51b8e3f5ab245f56d72780","2010-12-22 14:48:51+00:00","PLUGINS: add ELF memory manager to solve fragmentation

Following lordhoto's suggestion, I implemented a simple allocator that grabs the size of the biggest available plugin in memory. This is an elegant solution to the fragmentation problem, with the caveat that memory is wasted. As such, it's not suited for the DS, so I added a #define to disable it there.

svn-id: r55009
"
"48ce90419f48fe1c3e8f3f0336aae3445e850ea9","2010-12-22 15:07:14+00:00","PLUGINS: Fix ELFMemoryManager::pluginAllocate signature.

svn-id: r55010
"
"0134ffd86ef46da8f9311b284ecdd0c5a9fe0957","2010-12-22 15:09:42+00:00","PLUGINS: Only enable ELFMemoryManager when dynamic plugins and the ELF loader is enabled.

This should fix compilation on desktop systems, where for example memalign
is not present.

svn-id: r55011
"
"a79ccfed55b881c30de598b7fadd479860b15adf","2010-12-22 15:33:46+00:00","PLUGINS: replace all size_t's with uint32's and add #include <malloc.h> to memory manager

uint32 is all we need since we only handle ELF32 anyway.

svn-id: r55012
"
"51e9cdb12c2384aac30bcf9f2c8a80f35bbfe3dd","2010-12-22 17:51:07+00:00","HUGO: Fix little bug in sound player

Mute/unmute sound and music at the same time

svn-id: r55013
"
"d9cc9d5800a0b20c7d18770928871185e756477d","2010-12-22 18:25:48+00:00","HUGO: Replace function comments by doxygen comments

svn-id: r55014
"
"5e92b6049b2e436d5ba0e9aadd41d8637f99eeeb","2010-12-22 21:08:02+00:00","MOHAWK: Add Framework getVar() code to Myst D'ni Age Script Parser.

svn-id: r55015
"
"cc30fa378ed9b17952c095c1c8fd187d98ac423e","2010-12-22 21:08:26+00:00","MOHAWK: Add Framework getVar() code to Myst Credits Stack Script Parser.

svn-id: r55016
"
"8e26ae0f92ded60f6241c68349812770b8d3c3fe","2010-12-22 22:18:21+00:00","SCI: Fixed bug #3037618 - 'PQ2 : Restoring in Scuba Van causes Parser Issues'

svn-id: r55017
"
"6d30449d5aeaf21c810e31ee15776cf9a4522251","2010-12-22 22:25:52+00:00","HUGO: Implement syncSoundSettings()

svn-id: r55018
"
"18d3e588258bc104c70621b76eb07fa5164fc46c","2010-12-22 22:56:42+00:00","HUGO: Suppress some obsolete volume related variables

svn-id: r55019
"
"8cc28b218c3727a1b55fe135ba60a336760b70b1","2010-12-22 23:11:41+00:00","HUGO: Suppress two obsolete defines

svn-id: r55020
"
"81dd62f3cb5b1fa6c303bbc240a759e0d5324086","2010-12-23 07:54:54+00:00","PLUGINS: don't fully load each plugins at startup for single plugin method

The reason to load each plugin was to figure out if it's a sound or engine plugin. Since all our plugin files are currently engines, there's no reason to load every file. If we get dynamic sound plugins, it'd be a good idea to make a quick and easy way to know which kind of plugin it is (e.g. a prefix or suffix in the filename).

svn-id: r55021
"
"f891323f1f9a79d0b301aa7f4bfd63e544f901b3","2010-12-23 12:54:47+00:00","SCI: Fixed typo

svn-id: r55022
"
"401a8c355d1b8af353db0df6dab6117cb725f756","2010-12-23 13:11:10+00:00","SCI: Some initial work on the sound of robot videos (doesn't work yet, seems to be a problem with the encoding of the customized SOL audio files in robot videos)

svn-id: r55023
"
"ee2b1092ab35be717c728ea641d18baa7f817536","2010-12-23 13:38:37+00:00","PLUGINS: switched plugin manager to inheritance rather than #defines

The reason for this was that I found issues where the wrong functions were called in EngineManager for single plugin operation. Rather than inserting more messy #defines, I preferred to change the PluginManager to use virtual functions, which also makes EngineManager simpler.

svn-id: r55024
"
"5b2071487f4df5adbb0c9a67d8c6077c0747d781","2010-12-23 14:03:58+00:00","SCI: Unbreak script loading on big-endian machines. Thanks to [md5] and wjp.

svn-id: r55025
"
"a03a3fd411aaac571413fae4f95c576845995e10","2010-12-23 14:05:16+00:00","Fix code formatting

svn-id: r55026
"
"10b96eb94d34518120107c7005b946e989201704","2010-12-23 14:37:03+00:00","PLUGINS: PluginManager minor cleanups

svn-id: r55027
"
"1dce5fa11ddb32796fd1aecf06e939f26b97e605","2010-12-24 02:09:59+00:00","ANDROID: Remove obsolete reference to ANDROID_TOP in build instructions.

svn-id: r55029
"
"04b516322857829758a4269794d39919ba9f1b80","2010-12-24 10:52:02+00:00","MOHAWK: Fix Myst's combination book pages drawing at the bottom of the screen.

svn-id: r55030
"
"938b63323897e9e673191e12e0339b2ec032a624","2010-12-24 11:04:25+00:00","MOHAWK: Fix playing sound from aliases in Myst ME.

svn-id: r55031
"
"9af30a25468f1e31432dda3dbcabd43febb1ae23","2010-12-24 14:47:47+00:00","SCI: Now saving/loading the list of synonyms (set by kSetSynonyms), like SSCI did

This is a more correct way of fixing bug #3037618 than in rev #55017.
- Changed replaceant/replacement to be uint16's (they're very small positive
values, usually smaller than 4096)
- Changed SynonymList to an Array (so that it can be saved/loaded)
- Removed the PQ2 script patch to Game::replay()
- Added savegame history

svn-id: r55032
"
"5e5410f8919800c26e30d3f376489b20494f6393","2010-12-24 14:56:04+00:00","SCI: Only sync the synonyms vocabulary if the game actually has one (thanks wjp)

svn-id: r55033
"
"bc9442d6d88f295e84c495190cd2a159f4a092e3","2010-12-24 15:53:06+00:00","SCI: Fixed bug #3059860 - 'LB2CD: Glitch in Act 6 coroner answer buttons'

svn-id: r55034
"
"85da9de3bf0297d95ed0e335355dcfce6412931c","2010-12-25 18:45:29+00:00","MOHAWK: detect/load the Rugrats Adventure Game

svn-id: r55035
"
"4c0b02fe21eebea3a55e75d1d7dd043447a12e83","2010-12-25 18:45:48+00:00","MOHAWK: LB CD-ROM title prefixes aren't Windows-specific

svn-id: r55036
"
"1897e5e132bda062f84d38cbb0a3bef4d7087245","2010-12-25 19:52:24+00:00","MOHAWK: detect the European versions of Zoombinis

svn-id: r55037
"
"64a8652cd6786fc7c063c28c849be6b8bfdcc454","2010-12-25 19:52:54+00:00","MOHAWK: Add subimage drawing/caching code

svn-id: r55038
"
"8347b44fb2ea8166c6bb41bfa12b79ce9a164d38","2010-12-25 22:10:51+00:00","KYRA FM-TOWNS: improved cd audio music fading

svn-id: r55039
"
"98783a15e870802e95b83d92bc85bbf66d5a7aa3","2010-12-26 13:58:39+00:00","HUGO: Fix MIDI Player Memory Leak in H3 Win.

svn-id: r55040
"
"6cd890aaac265654b3cad9af9ed3b6ca9de17cdb","2010-12-26 14:31:03+00:00","MOHAWK: Merge classes MystVariables and MystSaveLoad to form MystGameState

svn-id: r55041
"
"63e58baae11f25d3a57527afecca4a9d970e1892","2010-12-26 14:32:38+00:00","TOON: Fix problem when exiting the king cave

svn-id: r55042
"
"1bbe49dba923ca576271d9d5d294a682ab0d9b06","2010-12-26 14:56:51+00:00","SCI: Silence a gcc warning

svn-id: r55043
"
"918c4febb00ec3cac8158c0d171d4636cf3246be","2010-12-26 14:58:15+00:00","MOHAWK: Fix a typo

svn-id: r55044
"
"f2495a42f64af999941ed82b78231513e7ac26d9","2010-12-26 15:10:33+00:00","MOHAWK: Move myst_saveload.* to myst_state.*

svn-id: r55045
"
"1528a3d9044382afa2939d0d900d0da06d6cc157","2010-12-26 15:28:02+00:00","SCI: A more efficient solution for bug #3037874 (SCI high CPU usage), which will hopefully
not clash with the speed throttler. This is a more proper fix for bug #3058865, and a
partial fix for bug #3127824

svn-id: r55046
"
"f9409fc7d50de09186ba30b28fe9ae1ad58067ca","2010-12-26 20:14:04+00:00","TOON: Fixed Bug #3124527 with Dungeon freeze

Bug #3089974: 'TOON: Game freezes in act 2 when thrown to the prison'

Wrong pointer increment in conversation process code.

svn-id: r55047
"
"4f3623964465a6d42d99b0fa37ba9073e948c79f","2010-12-26 20:44:19+00:00","PLUGINS: fixed resource leak that caused PSP to crash

The leaky file handles didn't show up when debugging using the shell since that uses the Windows file handles, of which there are many more.

svn-id: r55048
"
"e7e92a7577fcaadd4d63483a41ab2a71d913c3d6","2010-12-27 14:02:17+00:00","SCUMM: Fix bug #3143039 - ACTIVITY: Circus Stormin' crash.

svn-id: r55049
"
"fe12e08dd68766ee460e5fcf8f61cdafd70b9b39","2010-12-27 14:07:53+00:00","SCUMM: Fix bug #3145951 - DIG: Subtitles won't turn off (regression).

svn-id: r55050
"
"1b8678d5de278caf7470f4e418e038251a015a38","2010-12-27 21:56:52+00:00","TOON: Path finding bug fixes

Allows Flux to walk close to Drew if really needed to prevent total path block.
Prevents path finding if the character is out of the screen

svn-id: r55051
"
"cfbac503addad7af26a5d9f8795edfd229faefb0","2010-12-28 05:43:03+00:00","SCUMM: Another fix for bug #3145951 - DIG: Subtitles won't turn off (regression).

svn-id: r55052
"
"ccb8a01b179a40847d670f1510bf715d99b96fbd","2010-12-28 06:05:57+00:00","SCUMM: Correct fix for bug #3145951 - DIG: Subtitles won't turn off (regression).

svn-id: r55053
"
"bccf4606c9a1daa87390cceca55aa88d1e53ffd9","2010-12-28 13:11:17+00:00","TOON: Removed useless confusing code in conversation process part

svn-id: r55054
"
"ab01c8e5fc68a3445f4fe2d0edb49fbc6fc3fa49","2010-12-28 13:13:55+00:00","TOON: Fixed memory corruption in several rooms

Some mask line drawings were writing outside the buffer.

svn-id: r55055
"
"7bc1ff065b4d63c233e7b5a286f7065ec349a973","2010-12-28 21:05:30+00:00","SCI: Fixed script bug #3038870 - 'SCI Fanmade - Demo Quest: ScummVM hangs with typo' and
removed a related FIXME

svn-id: r55056
"
"4a94eba80a83cad1cb54f88fd97db473f7667bcb","2010-12-28 21:19:31+00:00","TOON: Add mapping for upper 'ç' and for plenking, both used in french version

svn-id: r55057
"
"fef667cbe976bdcbca52b786f2b7fc4929485619","2010-12-29 09:50:48+00:00","CINE: Fixed mismatched deallocation in ScriptVars reported by Valgrind.

svn-id: r55058
"
"7bc8fe8ef5d4ea49ba57c11dbd72e770310d4389","2010-12-29 09:53:58+00:00","CINE: Fix Memory Leak in PCSoundFxPlayer.

Found this using Valgrind when loading a Future Wars savegame from the launcher.
Occurs since the load() method called stop() but this did not unload() the allocated playing
resource data unless it was still playing. Fixed in stop() by calling unload() in all cases.

svn-id: r55059
"
"77a6dc70469eac1480263763be450cfe2547dd20","2010-12-29 15:16:31+00:00","CONFIG-MGR: added ability to add other non-game domains

The way we determine if a domain is a game domain or not when loading from the config file is by checking for a 'gameId' key. This required changing the method of loading somewhat. MiscDomains (ie. non-game domains) are saved to the config file before game domains but after the main domains.

This change shouldn't mess anything up but it could probably use a look-through just in case.

svn-id: r55060
"
"8f36a5f887609ab5bf00309412312c563a5bafe9","2010-12-29 15:25:21+00:00","PLUGINS: single plugin model now saves plugin filename to config file

After searching for the right plugin once, the filename will be saved to the config file under the domain 'plugin_files'. The key is the gameid and the value is the plugin file. The backup mechanism is searching plugin by plugin.

svn-id: r55061
"
"5e88223e8e4aa4e04c12f13c5eac8a24c1e79df0","2010-12-29 15:37:57+00:00","PLUGINS: fixed MSVC build

svn-id: r55062
"
"6c9a4d36ec3171cfc16f4ed7cd767a462bda87a7","2010-12-29 19:33:49+00:00","MOHAWK: Implement Myst opcode 214, Stellar observatory initialization

svn-id: r55063
"
"7558331550b98643f2c5ff72034b920214c899e1","2010-12-30 08:01:58+00:00","PLUGINS: rename ONE_PLUGIN_AT_A_TIME define to UNCACHED_PLUGINS

ONE_PLUGIN_AT_A_TIME is too long.

svn-id: r55064
"
"14cd97cc773f42dad16f8a0c2820fab8914f8c06","2010-12-30 13:53:14+00:00","MOHAWK: Implement Myst opcodes 129 to 132, and 192 to 197, Stellar observatory buttons

svn-id: r55065
"
"1dd31423309cad43890ab878e1dc91f99d512d56","2010-12-30 21:07:38+00:00","HUGO: Fix several bugs reported by D. Gray

svn-id: r55067
"
"542f946155450589480ed95e4ab2f49846d1d2ab","2010-12-30 22:07:12+00:00","HUGO: Fix default values in object_t structure for viewx field and followings.

This fixes some other bugs reported by D. Gray

svn-id: r55068
"
"9f9035c3df7aa4accec62cbb72c54dc680eb68f9","2010-12-30 22:43:20+00:00","FMOPL: Fix GCC warnings when DBOPL_WAVE is not WAVE_TABLEMUL.

svn-id: r55069
"
"c9330fb79eb5703aa3fccfe31a4631209ceecbc0","2010-12-31 09:07:44+00:00","CINE: Close Memory Leak in PCSoundFxPlayer.

This leakage was reported by Valgrind while playing Operation Stealth.

svn-id: r55070
"
"f96c8f6e39e39a92adfeeb07db78861ee7383226","2010-12-31 09:14:49+00:00","CINE: Fix CollisionPage Uninitialised Reads in Operation Stealth.

The collisionPage is only initialised with values when loadCtFw() / loadCtOS() is called.
However, currently during the display of the Delphine Software Logo in Operation Stealth,
checkCollision() is called, but the collisionPage has not been loaded.
To fix the invalid reads, have added code to set the page to zero after allocation.
Shouldn't cause any issues to FW as this will load over the top anyway.

Have also added debug output around this behaviour so that if this is not sufficient i.e. a collision page load is actually missing, then this will aid investigation.

svn-id: r55071
"
"c71c3ab591c6fb453f6379135fee314577f44887","2010-12-31 10:58:59+00:00","MOHAWK: Minor Correction to Graphics Debug Output.

svn-id: r55073
"
"04043240b162c2b63c48adc08fc8eb4ccb0ff407","2010-12-31 11:00:50+00:00","GOB: Minor Correction in Debug Console Header.

svn-id: r55074
"
"e48b07e3bd5934b92a5349cde56188994f8ca78e","2010-12-31 11:32:19+00:00","SCI: Added workaround for script bug #3148418 - 'QFG2: Script Error On last screen'

svn-id: r55075
"
"1df582aecb7f11ecc9e75de1de6a4b442595d8d4","2010-12-31 14:50:22+00:00","HUGO: F6 now also closes inventory in Win versions

svn-id: r55076
"
"aa9786604c5beb5d04506284f78053fef442075c","2010-12-31 15:19:42+00:00","JANITORIAL: Remove unnecessary semicolon.

svn-id: r55077
"
"11d47425205d7d26f2368a4326f96657f590d6f1","2010-12-31 16:25:28+00:00","HUGO: Saving a game is no longer authorized when gameOverFl is set

svn-id: r55079
"
"3358001c3951240562bf4fdbcf9f03dc36977fe1","2010-12-31 22:44:16+00:00","HUGO: Add CTRL-l and CTRL-s keys used in Win versions.

CTRL-n has been added too, but is currently only a STUB

svn-id: r55081
"
"6a299ce0b8b74897a08a522add1852b9b482ed67","2010-12-31 23:04:49+00:00","COPYRIGHT: Update copyright year - Happy new year!

svn-id: r55082
"
"473ddccf507989af006ddd9f99bbe6f310211ee6","2011-01-01 10:13:42+00:00","HUGO: Reduce CPU usage by adding a delay in the main loop

svn-id: r55083
"
"5d6771e3df2ecba333faf98c042c3357c0e40c1c","2011-01-01 10:51:57+00:00","HUGO: Midi are no longer looping. Add handling to default playlist

svn-id: r55084
"
"d44a105e7ff78d9ba303e0b291172012b01b6227","2011-01-01 12:43:09+00:00","SCI: Disable continuous list checking by default

svn-id: r55085
"
"32d7e687ee506e6e9610ee3f7a59169fc9d4e386","2011-01-01 12:48:12+00:00","SCI: debugC calls no longer require a debug level of 2 to show output

svn-id: r55086
"
"319fdf40b29d922be0a32a3ad8d4cc3d0bb3380b","2011-01-01 22:36:33+00:00","COMMON: Fix comment about getButtonState.

svn-id: r55087
"
"fcf40ad6267a10456351404bea2f488f742fcc6c","2011-01-01 23:57:50+00:00","HUGO: Some space/tab cleanups

svn-id: r55088
"
"c4095aabc5bb2d53bb8bb1c97e94f39cf3d81355","2011-01-02 10:08:02+00:00","PLUGINS: for uncached plugins, first check the loaded plugin before looking elsewhere

There are some calls to EngineManager::findGame() from within games, such as when loading saved games. It's critical not to unload the plugin from memory or other threads may crash. Therefore, we first scan using any plugin that's already in memory.

svn-id: r55089
"
"d063b074cd6fac667f33e0216a5f7fad1e76a5df","2011-01-02 14:06:42+00:00","JANITORIAL: Suppress some useless includes

svn-id: r55091
"
"fd5754d6af59f7c6da499230273503014e4be2e4","2011-01-02 14:15:15+00:00","MOHAWK: Fix checking Myst rocket sound puzzle before moving all the sliders.

Fix a off by one graphical glitch that happened when moving sliders.
Implement opcode 300.

svn-id: r55092
"
"1f579add9fdb98015e30a4c39026f5fca517e1b2","2011-01-02 14:23:18+00:00","MOHAWK: Don't delete the MIDI driver before the parser.

The parser was trying to call into the deleted driver.

svn-id: r55093
"
"940e4f936eac2aecb6b422e3809082835be4e4e9","2011-01-02 14:57:20+00:00","MOHAWK: Don't leak the MIDI data.

svn-id: r55094
"
"7e0744aa4aa1e7128a1ea95d74db040ceb22a3a0","2011-01-02 14:57:49+00:00","VIDEO: Stop leaking surface data in several codecs.

svn-id: r55095
"
"83f0a286230b5a461f8a33f43c1686aa1eab25f7","2011-01-02 17:06:43+00:00","MOHAWK: Implement Myst opcodes 134 to 137, and 170 to 177, Stellar observatory sliders

svn-id: r55096
"
"eeaeab93e8b60a81cf2de2d90b7fe9043f5c730a","2011-01-02 21:32:56+00:00","HUGO: Fix 2 bugs that were causing several crashes using the mouse

svn-id: r55097
"
"e00c17712c142763d5fca42f5ebb69062f8648a3","2011-01-03 11:36:39+00:00","M4: Removed redundant colour index recalculation in palette manager

svn-id: r55098
"
"04a9082d0256597e61724e2418f388b61b4ba792","2011-01-03 12:23:50+00:00","GUI: Implement PicButtonWidget

It is a button with picture intead of text. To be used by Hugo engine

svn-id: r55099
"
"30b40c47459e47f39beece2f089393a2d2cf39aa","2011-01-03 12:38:13+00:00","HUGO: Stub for the top menu

svn-id: r55100
"
"3d2104460de2d3b836243e44b4f62749d45d5b25","2011-01-03 12:48:28+00:00","HUGO: Show bitmap on first button in menu as a proof of concept

svn-id: r55101
"
"e670e698f1571fab1c21c0d09b5003c2772e58d1","2011-01-03 16:15:52+00:00","TOOLS: Add button bitmaps to create_hugo

svn-id: r55102
"
"42a41ebd85dce3c07c68303e7df35812662819eb","2011-01-03 16:19:00+00:00","HUGO: Load bitmaps from hugo.dat

- set menu bitmaps to 'on' buttons by default
- rename menu entries to match a bit better the original

svn-id: r55103
"
"2c95f1f8e1546e464d45aea9b4b1fab8054a1d9f","2011-01-03 17:37:52+00:00","MOHAWK: Implement Myst opcodes 133, Stellar observatory go button

svn-id: r55104
"
"3344d1b5aa7087f38e0b629be3810606458c5a22","2011-01-03 18:17:13+00:00","HUGO: Implement top menu autoscaling

svn-id: r55105
"
"def3c562cbbf1a4e7c55375458ba2e007615fd65","2011-01-03 18:45:04+00:00","MOHAWK: Silence a gcc warning

svn-id: r55106
"
"f517b6d3446e383936a8a42dc538b975860333dc","2011-01-03 19:08:10+00:00","HUGO: Added stub for menu commands and implemented menu closing

svn-id: r55107
"
"cdb5e55f75652f218549508838c68a6906f0489a","2011-01-03 19:44:30+00:00","HUGO: Renamed the 'cmd' parameter to 'command', as 'cmd' is a struct in game.h

svn-id: r55108
"
"8a77f49a59fd9e4f1444072fe67f27c7a86d97b1","2011-01-03 20:40:07+00:00","MOHAWK: Cleanup some spacing, formatting, and naming

svn-id: r55109
"
"9074a2721105cc0d504296932481a54f5f03237d","2011-01-03 20:44:27+00:00","MOHAWK: Use integer math where floating point isn't required

svn-id: r55110
"
"2c8b4161ff5030a953cfe450478de6fe6b828db3","2011-01-03 22:52:50+00:00","MOHAWK: Add/update some resource FourCC entries.

svn-id: r55111
"
"4fe73d47fd07cbb6b6c01f565a2b7a9f459aa836","2011-01-03 22:53:12+00:00","MOHAWK: Add game type/detection for CSTime.

svn-id: r55112
"
"e59eb31ba94cf80cd905fe954970c1b926d1c3a4","2011-01-03 22:53:34+00:00","MOHAWK: Add stopMidi() function.

svn-id: r55113
"
"9ee74fee8a8cc296ccd4a22bc34900afefc7438e","2011-01-04 08:36:03+00:00","HUGO: Implement menu commands

Also did some cleanup, and had to comment out
handleMouseUp() as it's currently not working really well

svn-id: r55114
"
"77a1915377f175282029358e49eae422c44d12ed","2011-01-04 09:09:56+00:00","SCI: Some changes to the naming scheme of some games

- For remakes like KQ1, KQ4 and LSL1, the 'SCI remake' bit has been moved to the game
description (as it's part of the description, not the extras)
- The 'VGA' bit has been removed from the extras. Only the 'EGA' bit remains for EGA
versions, to distinguish them from their VGA counterparts, when they exist

svn-id: r55115
"
"d050b811bb27e1c552cf42af8c9890653c32db3e","2011-01-04 12:29:23+00:00","SCI: Slight cleanup to the garbage collector

svn-id: r55116
"
"2477c733dae07de28eb172826b6b69408c49f0c1","2011-01-04 14:18:43+00:00","HUGO: Use several 'off' buttons in the menu

svn-id: r55117
"
"9fe6540dd9bd17ce68ed0b777f4ccd99d84e139b","2011-01-04 19:23:05+00:00","SCI: Corrected game description for LSL1 (thanks Raziel)

svn-id: r55118
"
"34ae92033ce0235fa56f7b4282619cfbcdcfa4f5","2011-01-04 19:46:18+00:00","SCI: Moved the 'SCI' bit to the extras field, to preserve the original naming of the games

svn-id: r55119
"
"bee912ff54422ded754a36bd47c9d70ae15c765b","2011-01-04 20:39:27+00:00","GRAPHICS: Add support for Windows FON/FNT fonts

As required by Hugo and Mohawk.

svn-id: r55120
"
"11780744c296e997178791755204363d08c6f68a","2011-01-04 21:45:09+00:00","HUGO: Proper implementation for menu closing when clicked outside of it

svn-id: r55121
"
"f2234f8ee369d701467e723a92ac15be3a1ae534","2011-01-04 23:11:19+00:00","SCI: Fixed part of bug #3150767 - 'KQ5 French crash on startup, only partial English text'

This is a regression from r54510

svn-id: r55122
"
"2d5dc8c6382e52c22b2833488b9ea09b38a947e3","2011-01-04 23:19:04+00:00","SCI: Cleanup

svn-id: r55123
"
"0a8189fd41e3995ba866967b57ea1a0c25b8e94d","2011-01-05 13:04:08+00:00","AGI: cleanup

svn-id: r55124
"
"4e05e450c381b6deb9999ec4122c4d9028d510e2","2011-01-05 18:06:46+00:00","VIDEO: Mirror QuickTime's mishandling of its own mdat atoms

While the specs say that the 'mdat' ('media data') atom is required in all QuickTime files, QuickTime makes no check if the atom is actually present. This allows for some videos with typos in the atom tag in them to play in QuickTime anyway. The offsets in the 'stco' atom are only used instead.

This will fix a video in DS2 Mac and a music file in IHNM Mac (although this is not needed for either just yet).

svn-id: r55125
"
"0ac25c43a04508de583b35d6ba7fefb606d44f0a","2011-01-05 22:28:37+00:00","HUGO: Use Win2 fonts in intro.

Win1 font is loaded too, but fails as it's not yet supported

svn-id: r55126
"
"7b1e6bd2f8d9c7ac4ce8219595bfb272a578e200","2011-01-05 22:35:07+00:00","HUGO: Fix warning using GCC

svn-id: r55127
"
"9dde7e2b87e4284ca19faea79175634f022734e5","2011-01-05 23:39:36+00:00","HUGO: Little cleanup

svn-id: r55128
"
"0338febe57c08ab6ccb54d58cd0ec2d756ebf655","2011-01-05 23:48:44+00:00","HUGO: Correct font sizes used in the Hugo1 DOS intro

svn-id: r55129
"
"ccc3830b49e143943a1b9714236745e5700e7204","2011-01-06 00:43:36+00:00","SWORD25: Update configure Script to set LUA platform configuration for linux*

This changes removes the tmpnam warning when building the Sword 2.5 engine.
This fix sets the top level define which is used by engines/sword25/util/lua/luaconf.h to configure the LUA interpreter build, but only for linux* targets.
Other targets may need a similar fix.
Note : LUA_USE_POSIX is used in preference to LUA_USE_LINUX as this causes another warning associated with the dlopen usage.

svn-id: r55130
"
"bb9ad6afe44e2411742985dad6d7888a276970fe","2011-01-06 07:54:23+00:00","HUGO: Improve intro in H3 Dos

After a check on youtube (clone2727), fix the character used
in the map during intro in H3 DOS

svn-id: r55131
"
"46e514926942f019a5365de624cd752e675357fd","2011-01-06 14:06:04+00:00","HUGO: Implement DOS player

svn-id: r55132
"
"910d2d577a5539f732fc5b119b7da1573efefb5a","2011-01-06 14:16:23+00:00","HUGO: Fix GCC warnings

svn-id: r55133
"
"fc130351f3cd5ca53607d109e31948dddc6db4a3","2011-01-06 14:30:34+00:00","HUGO: Fix GCC warnings, second try (sorry)

svn-id: r55134
"
"4b2f92b5e56a1fc273c8c8d2e69b747f938ea92f","2011-01-06 21:11:24+00:00","AGI: Rewrote predictive code matcher

The new code is simpler, avoids a potential buffer overrun
(by avoiding to to use a buffer in the first place), and
hopefully has slightly more sane matching properties.

svn-id: r55135
"
"a6994413ea3084914c4035298f4644e1dc9dbfe5","2011-01-07 00:05:14+00:00","SCI2.1: Show the kernel table used in the 'version' console command

Transitive SCI2.1 games (e.g. QFG4CD and PQ4CD, as well as GK2 demo) used a SCI2 table,
with some added functions. If a SCI2.1 game is loaded, show what kernel table it uses

svn-id: r55136
"
"49f965a547ddb4b71c2abc29d50592dabdb21447","2011-01-07 00:07:33+00:00","SCI2.1: Added a sanity check for VMD video positioning, for the demo of Lighthouse

svn-id: r55137
"
"1796e7afdd5f276757e847f17ca3611d1f4be23e","2011-01-07 00:12:18+00:00","SCI2.1: Kernel function changes (after looking through all of the SCI2.1 games)

- Replaced the stub kWinDLL (unused), as well as the not fully implemented kPrintDebug
functions with empty function calls
- Marked several unused or debug kernel functions as stub
- Added some games where the rest of the unimplemented SCI2.1 kernel functions are used

svn-id: r55138
"
"576efc526b0fe3628f273bf9ef69d7c7710a8f08","2011-01-07 00:19:54+00:00","SCI: The SCI2.1 SVGA version of MUMG is named 'Mixed-Up Mother Goose Deluxe'

svn-id: r55139
"
"2817f80db82dbe619583eec64a0245828a538633","2011-01-07 12:26:01+00:00","GRAPHICS: Add some doxygen comments to Surface.

svn-id: r55142
"
"f9ebeb330b1a07829162a925fe8bb10a3c598dbb","2011-01-07 12:43:00+00:00","GRAPHICS: Some basic documentation for Font.

svn-id: r55143
"
"710e41c3e8e55dfd643aa08752bb6565de1efe57","2011-01-07 14:40:25+00:00","DC: Check plugins for required symbols

Make sure that all the required symbols exist in generated plugins.
If not, the strip command may have removed them...

svn-id: r55144
"
"868717b444ff0755663037a6c9aa4ccdc8437010","2011-01-07 15:14:38+00:00","TOOLS: Add Dos intro music number in hugo.dat

svn-id: r55145
"
"75d7ee9bd61b52dfd145a0e06365393531d265e7","2011-01-07 15:17:07+00:00","PARALLACTION: remove code duplication in NS sound code.

svn-id: r55146
"
"9dd0e0f94c5c05dc09693936eb49b3f6706df750","2011-01-07 16:00:08+00:00","PARALLACTION: fix music playback (bug #2879793).

* Do not restart character theme is already playing.
* Play the correct tune in the night club.
* Do not play muisc in the location meant to be silent.

svn-id: r55147
"
"31ffb399391fe6d557e53a554e9aed5656491768","2011-01-07 16:19:13+00:00","PARALLACTION: keep music playing during the intro (fix bug #2879791).

svn-id: r55148
"
"176be9adaddaf3ff48d3cb046e221b3984c6725e","2011-01-07 16:25:05+00:00","DC: Ensure creation of output sections .{c,d}tors

Add an object with an empty .ctors and .dtors section to the build
of each plugin.  This ensures that there will be an output section
.ctors and one .dtors in the output file (they could be empty though).
If these output sections were to be removed, the symbols defined inside
by the linker script could disappear as well, and we don't want that.

svn-id: r55149
"
"2f7c04e54b74f82e7005b09d634c1ceba7ada424","2011-01-07 17:44:20+00:00","GROOVIE: Fix a memory leak reported by cppcheck.

svn-id: r55150
"
"6b250f8c9be45a4076504263fddab77f58ee9a6a","2011-01-07 18:25:38+00:00","SCI2/2.1: Improvements to the find_callk debug function, and some kernel function updates

- Improved the find_callk function to properly find the end of script objects, by
monitoring jump calls
- Added three extra special calls to find_callk: find kernel function calls to dummy,
unused and unmapped kernel functions
- Updated several kernel function calls because of the above functionality
- The above functionality has also uncovered a VM bug in some SCI2/2.1 opcode - added
a FIXME for it

svn-id: r55151
"
"b55e593cddd9b7b340c89f5521aaba4c49cc692f","2011-01-07 19:26:31+00:00","MOHAWK: Merge Myst intro opcode 100 with generic opcode 40 into engine method changeStack

svn-id: r55152
"
"59d00fca17455ee3548d8f7ea1919142e1ec8e2e","2011-01-07 19:31:19+00:00","SCI: Removed leftover end markers from the opcode formats array

svn-id: r55153
"
"2b87eebdb0da3b2f0c47220854cb81d28e271a38","2011-01-07 20:24:49+00:00","SCI: Moved the handling of the op_line debug opcode inside readPMachineInstruction()

The handling has been moved inside readPMachineInstruction(), instead of run_vm(), as a
lot of parts of the code depend on this function handling all opcodes correctly (e.g. the
script dissassembler, the features class, find_callk etc)

svn-id: r55154
"
"46befe8492b223bf9935fd0726595091925b0ea9","2011-01-08 03:14:31+00:00","SAGA: Include scummsys.h to force rebuild after reconfigure

svn-id: r55155
"
"6a28d05676841042d7f12713c3f13d49a632f5ec","2011-01-08 03:27:13+00:00","BUILD: Include scummsys.h to force rebuild after reconfigure (thanks LordHoto)

svn-id: r55156
"
"3ac598624d3e9a3bf86bfc1bcf435b73a663c164","2011-01-08 03:36:21+00:00","BUILD: Include scummsys.h to force rebuild after reconfigure

svn-id: r55157
"
"fc83afc5f2456d0c560aade835d8c505694b732a","2011-01-08 10:23:27+00:00","SCI2.1: Added/documented some functionality used by Shivers 1

- Added kFileIO subop 17 (create save slot)
- Added information about a (probably debug) kernel function used in a puzzle, kCelInfo
- Added some information on two kSave subops
- Added 2 workarounds for uninitialized variables

svn-id: r55158
"
"87a3fcaf0381993aa1f0233a6ecb25a5ee435bad","2011-01-08 10:25:12+00:00","SCI: Fixed a typo

svn-id: r55159
"
"dd026268aa78a481cf80165d2d28de094d0d0e34","2011-01-08 10:34:04+00:00","SCI: Fixed typo

svn-id: r55160
"
"c2acabd710ec48ca0eb5bf3d6cc0cd7791edece0","2011-01-08 11:19:20+00:00","SCI2.1: Some functionality for Phantasmagoria 1 and MUMG Deluxe

- Added a stub for kSetLanguage, used in MUMG Deluxe - this needs support at the resource
manager level
- Made kGetSierraProfileInt a stub function (it's used in the Windows version of
Phantasmagoria 1 to override the video speed setting obtained from kGetConfig)

svn-id: r55161
"
"12b44f2fc01b05c1fe1d34be8bc2556543967bca","2011-01-08 12:28:47+00:00","SCI2.1: Some stubs used by SQ6

- Added a stub and some info about the (large) kScrollWindow kernel call
- Added info about kMovePlaneItems

svn-id: r55163
"
"1a18e99e69962d3e7486571923d24e8fb6feb2c9","2011-01-08 12:34:41+00:00","MOHAWK: Changed Myst intro stack to behave like the original. ie fully skippable intro.

svn-id: r55164
"
"dd6fd0ef27d0eb5617bc0f34054e3b1d2ded207e","2011-01-08 12:44:11+00:00","SCI2.1: Added some information about kSetPalStyleRange, kNewRoom and kMorphOn

svn-id: r55165
"
"b24aab30527feb67f32e0f7a43dc8be4eb0fc0da","2011-01-08 16:05:27+00:00","OPENGL: Skip empty texture updates.

This fixes some hangs when calling the GMM while running Fascination.

svn-id: r55166
"
"2665194e6feb99af15937003d2e89e9e0f87b446","2011-01-08 16:56:52+00:00","HUGO: Merge inventory object and mouse cursor when selected

- Merge inventory object and mouse cursor into a new mouse cursor (looks better)
- Use 16 color mouse pointer
- Clean-up

svn-id: r55167
"
"896d4947daa722b16e7734c0ec8a59b616a812be","2011-01-08 17:26:39+00:00","HUGO: Fix an assert when mouse hit the top of the screen

svn-id: r55168
"
"0d1955700e64b3d43f1d302ae0bb76c69918e923","2011-01-08 17:27:02+00:00","MOHAWK: Set needsRedraw when changing LB palettes.

svn-id: r55169
"
"d202e4c9dcd3df04c2992b450c5c620637351f3b","2011-01-08 17:40:29+00:00","MOHAWK: Change Myst credits stack not to use the var store

svn-id: r55170
"
"98e057603cff921a06b21024735bf8895fb6a29e","2011-01-08 20:33:07+00:00","DC: Implement logMessage()

svn-id: r55171
"
"59945ac2d03f77e829669922e3b48fb91818444a","2011-01-08 20:34:54+00:00","DC: Fix a compilation warning

svn-id: r55172
"
"910e2f076073dcc98c0345ba4ec25288373c7929","2011-01-08 20:51:25+00:00","DC: Sync legacy makefile with recent changes

svn-id: r55173
"
"2001719241a21a57e6ec03420863f189e9183d9e","2011-01-08 21:11:31+00:00","MT32: Fixed compilation warnings

The conversion specification '%f' converts a double, not a float,
so floats need to be converted to doubles before passing them to
vprintf().

svn-id: r55175
"
"da52b3a267cdfa33dcf54d41afb23cd0427f1476","2011-01-08 23:14:11+00:00","SCI2.1: Added a comment with the SCI2.1 games using a SCI2 kernel

svn-id: r55176
"
"8c554a8ec29c216e807f0cd0a85e0740a17c6b0d","2011-01-08 23:15:10+00:00","SCI2: Updated comments

svn-id: r55177
"
"505e1888e5ff8c34d52cffeaa59e8b33274d283f","2011-01-08 23:16:44+00:00","SCI: Some function renaming

Draw_Status -> DrawStatus
Draw_String -> DrawString

svn-id: r55178
"
"cf94a99bb7551e8338d4d127094295deec1d489d","2011-01-09 00:32:26+00:00","SCI: Changed the bShow parameter of GfxText16:Box() into a bool

svn-id: r55179
"
"9265c85c4967fa3ae3efba1ca5fe0f315237052a","2011-01-09 10:14:40+00:00","MOHAWK: Implement minimal D'ni stack. Lacking movie control.

svn-id: r55180
"
"3c8689fb7b8ba5bba07d5bb2a52627c582aa479e","2011-01-09 10:16:55+00:00","HUGO: Modify hint position when an object is selected

svn-id: r55181
"
"5d7729be320ec149a6bb1bab1a4dece89b431e16","2011-01-09 13:21:19+00:00","SCI: Cleanup

svn-id: r55182
"
"6b6e7fcfb3891b343285ec2a90daaf810ca63367","2011-01-09 13:27:00+00:00","SCI2: Some documentation/stubs

- Fully documented the parameters of kSetShowStyle
- Added another subop stub for kCreateTextBitmap

svn-id: r55183
"
"db11b626c7314db14a4db89158b3b9d31fc16120","2011-01-09 13:28:34+00:00","SCI2: Implemented proper text splitting

svn-id: r55184
"
"9058a83ad9ec3eb0325ac4b13428a3828c884b3a","2011-01-09 15:31:08+00:00","MOHAWK: Myst zip mode improvements

- Save visited zip destinations in the game state
- Only allow zipping to visited zip destinations
- Save zip mode setting in the game state

svn-id: r55185
"
"42713ef1fc71f9790b037afda8c7644d4ff7f0fe","2011-01-09 15:53:03+00:00","CINE: Add FIXME about Operation Stealth Memory Leak.

svn-id: r55186
"
"81d29aa303c0b5d0ccaa8eb01ebe6d827a7bb0a6","2011-01-09 16:13:31+00:00","MOHAWK: Add a stub for Myst var getter 308

svn-id: r55187
"
"cd6d818ca30fc054ef60dbc6c103bc420232c7db","2011-01-09 17:26:22+00:00","MOHAWK: Cleanup named video handling

svn-id: r55188
"
"d54fa49b5f01e624f11a057b80e150b2fcad97c3","2011-01-09 18:12:30+00:00","CINE: Add console command 'labyrinthCheat' to help with Operation Stealth Playtesting.

This command activates a cheat for the Operation Stealth Scene 6 arcade section i.e. Chased by Guards in Labyrinths in Otto's Mansion. These puzzles are quite hard and thus discourage playtesting beyond this point, especially since it is not possible to save (This may be a bug compared to the original interpreter).

Also, added extra debug output to aid script debug output.

svn-id: r55189
"
"bbd2cd460f716379d96c9fcf18031071586d3f49","2011-01-09 18:18:16+00:00","SCI2.1: Some further work on robot files

svn-id: r55190
"
"2b7acd6919d6c6321bf170a101c1e51647f9fd6e","2011-01-09 18:26:51+00:00","MOHAWK: Always restart anims on kLBOpTogglePlay.

This may not be the right place for this, but for now it fixes several bugs
where animations didn't play after they'd already been played once.

svn-id: r55191
"
"01e43fa8dc2201247d4a330f75044bfd774b646e","2011-01-09 22:42:56+00:00","HUGO: intros are now skippable

svn-id: r55192
"
"a9d3e5c2844c32fb4470a55f2a262edea285713e","2011-01-09 22:43:25+00:00","HUGO: Fix typo in help message

svn-id: r55193
"
"c0da18e9b8f9a20d5adfda5cdf55e781f5b6dc48","2011-01-09 22:54:04+00:00","CINE: Added fix for Operation Stealth Loss of Inventory after Scene 6 Labyrinth Maze.

It is now possible to open the office safe and get the envelope, though the engine now asserts with a palette issue in the next scene as the Russians board the Jetskis.

svn-id: r55194
"
"a1739f72448ff66740eed344e05bf5522874c062","2011-01-10 00:35:45+00:00","CINE: Modified Palette::rotateRight() function to cope with all positive values of rotation.

This fixes the assert in Operation Stealth in Scene 7 when the Russians mount the Jetskis.

svn-id: r55195
"
"1abb955a975535b804f648383087a4b168afc003","2011-01-10 14:59:25+00:00","MOHAWK: Fix the Myst ME Mac intro and cleanup

svn-id: r55196
"
"645ba4c379b07bf2296eac66a0de31ae55ebb2b0","2011-01-10 22:20:51+00:00","SOUND: Get rid of unused forward declarations in mixer.h.

svn-id: r55197
"
"71c7ae9fbb981883095d1b1c02d199484cb78b9d","2011-01-11 01:35:38+00:00","CINE: Extend 'labyrinthCheat' console command to cover Operation Stealth Scene 8 (Rats' Maze).

These arcade puzzles are hard, but solvable. This command is intended to aid debugging and rapid playtesting.

svn-id: r55198
"
"dd47d644d37982b6539fca3e0de68eba64a6b213","2011-01-11 03:03:40+00:00","COMMON: Fix a few space formatting issues.

svn-id: r55200
"
"0089d3b338819ca28ba9100ba61d344be86057b3","2011-01-11 16:50:26+00:00","CINE: Fix for Operation Stealth assertion when caught by rat in Scene 8 Rats' Maze.

This converts the assertion on selection of null background into a test and warning.

svn-id: r55201
"
"3bb5a9fe719a666fe85300831e570e6b375d612e","2011-01-11 17:27:31+00:00","VIDEO: Add a SeekableVideoDecoder class

svn-id: r55202
"
"3cb7224c108485fa5f1f3c6ff5257ab4c676b10c","2011-01-11 17:27:37+00:00","VIDEO: Add seeking capability to QuickTimeDecoder

svn-id: r55203
"
"ee081dc476153a49ac010cbef58039d0a1c4fe15","2011-01-11 17:27:43+00:00","MOHAWK: Adapt the VideoManager to allow for seeking; cleanup

svn-id: r55204
"
"1f043e15c759e2f15d5170ce96494800509633c9","2011-01-11 17:27:47+00:00","MOHAWK: Play the telescope moving video (now that seeking is available :))

svn-id: r55205
"
"d03ff6e036c3ff2818ccd9e2e27d63b56f11d18b","2011-01-11 19:23:24+00:00","MOHAWK: Allow for Riven to update specific portions of the screen

svn-id: r55206
"
"f6b7979277cc83e29ac9c6a7dc28a1e1e0dccfbf","2011-01-11 19:44:55+00:00","MOHAWK: Implement Riven's whark number puzzle

svn-id: r55207
"
"b1de27ed8f54b7321eaee165f69c90ac73d262f7","2011-01-11 19:52:58+00:00","MOHAWK: Implement Myst imager videos seeking / looping

svn-id: r55208
"
"f3f3b3bd62992a058891e22b7feee0109aab937e","2011-01-11 20:00:57+00:00","MOHAWK: Play the right parts of Myst's tower clock bridge movie

svn-id: r55209
"
"55c0658c8d00568ee4c87fefadd695bc560b01b6","2011-01-11 20:35:30+00:00","MOHAWK: Set the system palette on 8bpp videos when in 8bpp mode

svn-id: r55210
"
"0f04b4609c42850fff12ab9bf71e0acb1bffaf47","2011-01-11 21:33:23+00:00","VIDEO: Fix QuickTime timing when seeking without audio (thanks bgK)

svn-id: r55211
"
"72b3d1f546564d08a21c6446258ab2f2462fdc3b","2011-01-11 21:48:49+00:00","MOHAWK: Cleanup Mohawk wave parsing

svn-id: r55212
"
"3da25986d2e96a8e546e1ee9182676a3aa3154fa","2011-01-11 23:16:57+00:00","HUGO: Improve mouse support in DOS versions.

- Fix default verb for 'open door' in first screenActions
- Add 'go to' values on objects
- improve hotspot info related to objects

svn-id: r55213
"
"30f8365502dcd6f1f3e23c4c4f5a3fe6800f5786","2011-01-12 19:11:27+00:00","MOHAWK: Add a basic LBCode implementation.

This is enough for the Rugrats Adventure Game to play the introduction
videos, but is still in a very preliminary state.

svn-id: r55215
"
"d8682a74a5a876a14426301db494e23b47716a0f","2011-01-12 23:30:59+00:00","SCI: Simplified the kMoveCursor code

svn-id: r55216
"
"c215d85c33b1a983e0cbf860373fbd1b5f2d6000","2011-01-12 23:33:30+00:00","SCI: Added a workaround for script bug #3156472 - 'King's Quest 5 cdrom version crash on escape'

svn-id: r55217
"
"bb3fd747d4a6e504a9beafe32484ff197f4a40b3","2011-01-12 23:53:14+00:00","SCI: Fixed bug #3155550 - 'SQ4 Russian: Script error in Scate-o-rama'

svn-id: r55218
"
"ac6c88869e23e15cc79b9b92f6b5146f89b6b837","2011-01-13 00:32:10+00:00","HUGO: Improve mouse support for DOS versions

- Enlarge Exit hotspots
- Fix newspaper issue in H2 Dos (screen 33)

svn-id: r55219
"
"a7a05fc05385c7b1bee0b13079075ecb3542c6cb","2011-01-13 01:39:05+00:00","PARALLACTION: Fix Valgrind Error When Displaying Location Balloons In Big Red Adventure.

svn-id: r55220
"
"731a75adb8ab09eff5e37bfc13cbf13914845092","2011-01-13 03:25:57+00:00","PARALLACTION: Fix for Valgrind Uninitialized Error in Big Red Adventure Walk Code.

svn-id: r55221
"
"42c8cacde64abe526bba656491bd5c9909a7cb94","2011-01-13 11:30:37+00:00","CONFIGMANAGER: small changes to support old config files with no 'gameId' keys. As discussed on -devel.

svn-id: r55222
"
"82448c0cc49433bd24da95cf23ea69c7877e7009","2011-01-13 11:47:17+00:00","NEWS: added PSP news about new image viewer

svn-id: r55223
"
"095384b90faf0e0fdd28840f9c2cb2bafe95c210","2011-01-13 14:45:14+00:00","GRAPHICS: Use the pixel height instead of the ascent as the WinFont height

svn-id: r55224
"
"ecdd8661178ae0fa4c652f85f278c7c73db82ddb","2011-01-13 15:33:15+00:00","PARALLACTION: Close Memory Leak in Big Red Adventure When Changing Location.

svn-id: r55225
"
"f09d6d70734971749144603107e874ab3035ff3c","2011-01-13 15:34:18+00:00","PARALLACTION: Close Memory Leak in Big Red Adventure MIDI Playback.

svn-id: r55226
"
"4e56df4dbd70c6610263a645c029a03e79801a0d","2011-01-13 16:06:35+00:00","GRAPHICS: Begin to parse Win1 fonts based on our sole Hugo1 sample (still WIP)

svn-id: r55227
"
"da6fdff421d8f8ccb37d3c31c12dec12fab4cea4","2011-01-13 16:38:14+00:00","COMMON: Some slight formatting fixes in config-manager.cpp.

svn-id: r55228
"
"9118d2915cf12f5bfac36895e4628358882fcfa0","2011-01-13 17:26:00+00:00","PARALLACTION: Close Memory Leak in Big Red Adventure Subtitles.

svn-id: r55229
"
"75a2c36ecd9ff0f9dc268166b908450c7c6b90b2","2011-01-13 19:30:00+00:00","MOHAWK: Implement video seeking Myst's rocket link book

svn-id: r55230
"
"460f8c277b3b40b2fadbb9523fa1dfc502555979","2011-01-13 20:06:23+00:00","PARALLACTION: Fixed Limit Values in Big Red Adventure Walker Code.

This corrects the Valgrind invalid reads associated with the IS_PATH_CLEAR() check reading beyond the data buffer and probably improves the pathfinding behaviour.
Thanks to fuzzie for suggesting this patch.

svn-id: r55231
"
"00d78dd3d5ad8ac985018e5781d15e57138d38b8","2011-01-13 21:58:54+00:00","PARALLACTION: Fix for DoorData Memory Leak in Big Red Adventure.

svn-id: r55232
"
"28e7ea8c2217bceee9fd581cb78c9c198cf3c6fd","2011-01-14 00:13:27+00:00","PARALLACTION: Fix Valgrind Error on Engine Exit.

The automatic destruction of engine member '_char' of type Character at end of the destructor causes an invalid read in the destruction of the AnimationPtr which is a SharedPtr. To stop this happening, the SharedPtr is reset() prior to the destruction of Gfx, so it's dependencies on Gfx are still present. This will affect Nippon Safes as well as Big Red Adventure, but is unlikely to cause any issues and it is likely this exists in NS as well.

Thanks to fuzzie for this code.

svn-id: r55233
"
"81729b87e85955d919f0b3e5b6a0967e4724a3df","2011-01-14 03:25:39+00:00","PARALLACTION: Add debug console command 'showmouse'.

This command forces the mouse state to Enabled and Visible.
This is intended to help playtesting in Big Red Adventure, which has an issue currently with the mouse pointer getting stuck in the hidden state in some cases.

svn-id: r55234
"
"06acd962440ea25c40cd890aab984aeeaba2de45","2011-01-14 08:10:51+00:00","SYMBIAN: Updated revision history

svn-id: r55236
"
"8ce55fbcde93149bb7644c4fe3c1def8cebe4908","2011-01-14 13:01:57+00:00","VIDEO: Reset the pause start time when seeking while paused

svn-id: r55239
"
"a191190cf21ed623d660c70fe3464c74d87b351a","2011-01-14 15:40:46+00:00","MOHAWK: Fix the beetle animations in Riven

svn-id: r55240
"
"311c643c1e01982bbdd7dd0716ddfc61a3f153ce","2011-01-14 16:07:46+00:00","MOHAWK: Don't delete the wrong video.

svn-id: r55241
"
"0eeacfe43eca0a6dc178881ef517cc9a6c8cb410","2011-01-14 16:39:34+00:00","MOHAWK: Simplify some code

svn-id: r55242
"
"e49b35d7068aa872bb1c172f46343b7507b3adc6","2011-01-14 19:47:25+00:00","SYMBIAN: Fix some small issues in the README file (M4 isn't included)

svn-id: r55243
"
"ca249f5c65b39f440fe6cea3916022c7b4c47e48","2011-01-14 20:08:27+00:00","MOHAWK: Implement video looping for Myst's green book

svn-id: r55244
"
"aa38ad519ce331170e2f74a13feb12e5bd2c15d1","2011-01-14 21:42:33+00:00","MOHAWK: Implement Atrus videos in D'ni

svn-id: r55245
"
"cd108d3a81cf0370dbe72c80318df0e030a8708a","2011-01-15 00:29:02+00:00","SCI: Fixed bug #3034974 - 'SCI: Music out of tune after loading a save'

svn-id: r55246
"
"47d109a093f0df7db3947e051d3f097d41224eee","2011-01-15 09:28:42+00:00","SCI: Bugfix for r55246: Don't send init commands when resuming a sound

svn-id: r55247
"
"cc9f2944ede11bd9adf2633daab34f12500b8a6d","2011-01-15 09:43:02+00:00","MIDI: Fixed unnecessary casts of return values to void, reported in bug #3153076

svn-id: r55248
"
"c8b3200dd355d0f54928fdb04472bf2363df80fe","2011-01-15 11:54:20+00:00","SCI: Extended the bpk debug command so that it can also disable a breakpoint on a kernel function

svn-id: r55249
"
"0f9c33e02f1cb2c740c1eb0dcaad96dd22ec29e7","2011-01-15 12:18:13+00:00","SCI: cleaned up checkSelectorBreakpoint()

svn-id: r55250
"
"f680e24146452172dfe87eddf3f15d29c04af60d","2011-01-15 18:25:10+00:00","SCI: Added a hack to fix bug #3122075 - 'LB1: Game play freezes when taking shower'

This is a regression from the new kInitBresen/kDoBresen functions, enabled in r52467.
Many thanks to waltervn for his work in bisecting this. The actual bug should be
found, but since only this death scene has an issue, it's not really worth the
effort. The old functions are based on observations, so there are many differences in
the way that they behave. If another test case is found, then this shall be examined
further. Until then, this simple and unobtrusive hack will do.

svn-id: r55251
"
"295550b26c2261f371bc86950ec768b1ef460fbd","2011-01-15 18:39:29+00:00","MOHAWK: Get rid of the DETECT_BRODERBUND_TITLES define.

svn-id: r55252
"
"09c35e99b8d06a883eeab10a4f3955c0a3777973","2011-01-15 19:11:53+00:00","MOHAWK: Implement Myst's clock tower gears puzzle

svn-id: r55253
"
"0309f365523cd43d0a8d27f921d70d20a4deae7b","2011-01-15 23:55:35+00:00","SCI: Plugged 2 memory leaks, reported by digitall

- Plugged 2 memory leaks in the SCI0 menu code (the lists of menu and submenu entries)
- Got rid of the _listCount variable

svn-id: r55254
"
"da4201440282afa825f298874ca7482dfac8d024","2011-01-16 08:15:47+00:00","SWORD25: Fix main menu button text colour

In the other cases I've found in the code, the colour components are
stored in the order B, G, R and A. Assume that's the case here too. I
hope that is correct. It doesn't seem to break anything obvious.

svn-id: r55255
"
"9339428fc1ac8acb0ccd185994520638dad3ad95","2011-01-16 11:02:49+00:00","MIDI parser: Stop hanging notes when a notes off event is called

This is the same fix as the one in r54429 for the MIDI parser of the SCI engine, based
on patch #3116608. Probably fixes (or is indirectly related to) bugs #2825928 (for
MADE), #2948281 (for SAGA), #2797283 (for tinsel), #2016549 (for SCUMM) and #2138118
(for kyra), as these engines are all using the MidiParser class internally.

svn-id: r55256
"
"23c1184d80fead3aea38f9f614fd223b91132039","2011-01-16 16:26:52+00:00","VIDEO: Simplying the video buffers

svn-id: r55257
"
"afd101c526872272558a8c23f3e2cb67de8da7dc","2011-01-16 16:27:22+00:00","VIDEO: Add range checks to deLZ77()

svn-id: r55258
"
"faa66fc01a343c66b1006e6ee22045770094b7b7","2011-01-16 16:27:52+00:00","VIDEO: Add color mode methods

To query the video's color mode and notifying the decoder that
the system's color mode changed.

svn-id: r55259
"
"7de179c2c816700629e8e53307ae7c1d995edae0","2011-01-16 16:28:17+00:00","GOB: Add setBPP()

To allow converting the surface's bytes per pixel
without destroying it first.

svn-id: r55260
"
"e063ced21a4522638b901b343710b83ed7424826","2011-01-16 16:28:47+00:00","GOB: Add setTrueColor()

To change ScummVM's color mode on-the-fly

svn-id: r55261
"
"b451d3b51c7b9c1db0e4203791793020f330cb07","2011-01-16 16:29:19+00:00","GOB: Add the property switchColorMode

To allow the videoplayer (and ultimatively the demoplayer)
to switch color modes if necessary.

svn-id: r55262
"
"32b94cc236c5c0d0ec4bf73d7bf87bd2e3c67bc9","2011-01-16 16:29:43+00:00","VIDEO: Implement internal-codec 16bit VMDs

svn-id: r55263
"
"518e858d85dff6582bb4cadc666e9b5436b6b6ee","2011-01-16 16:30:15+00:00","GOB: Allow true-color VMD cursors

svn-id: r55264
"
"84cda62d1f91899674dc3458b21fa66dbdc2935c","2011-01-16 16:41:27+00:00","VIDEO: Implement internal-codec 24bpp VMDs

svn-id: r55265
"
"c0434258f9459187711ab24bd1441567c5675bb7","2011-01-16 19:38:22+00:00","TOOLS: Fix Win64 MSVC project files.

This is done by adding the 'SDL_BACKEND' define to x64 MSVC project files, otherwise linker errors would occur, since certain SDL code would not get compiled.

svn-id: r55266
"
"2633a70018f576b916f021fa8b35c3fa9d80e5a6","2011-01-16 20:12:55+00:00","GUI: Fix language popup in the game options.

r49786 introduced a regression which made the game options menu set the
game language to 'zh-cn' in case '<default>' was selected. Also in case no
language key was present in the game's config domain no text was shown at all,
now it shows '<default>' in that case again.

svn-id: r55267
"
"5742a11510c0d3de73260088afcf009810a0ae42","2011-01-16 20:24:58+00:00","SCUMM: Prefer 'Could not' over 'Couldn't' in some error messages.

svn-id: r55268
"
"199b5d06af044b9a9fa134af62fb248dcc294637","2011-01-16 22:27:48+00:00","GOB: Remove unused declarations

svn-id: r55269
"
"68ebdf20d5e8ae24029b0e1d7cfa1e3e89e455f9","2011-01-16 22:28:20+00:00","GOB: Don't clobber the global palette

svn-id: r55270
"
"0d11ae143f8734ddf0632e9981558120acbabd28","2011-01-16 22:28:49+00:00","GOB: Add a method to get a true palette color

svn-id: r55271
"
"58228919fcf0cb669684a69d42fffedf20a0a074","2011-01-16 22:29:18+00:00","GOB: Use the correct font and shade color in Urban Runner

svn-id: r55272
"
"e6d04b8ad61200716e376533bb075f8891739c20","2011-01-16 22:29:49+00:00","GOB: Adding a proper shade method

svn-id: r55273
"
"8a1e9c8256fe8021e32ceea5e76d095f50a4d490","2011-01-16 22:30:19+00:00","GOB: Remove unused old shade functions

svn-id: r55274
"
"da65a3cbf39cf23e4b803bfe9b498d0c5e1c36ec","2011-01-17 09:48:42+00:00","GOB: Fix the flow rate gauge in Urban Runner

svn-id: r55275
"
"6c6d85908fd475eb6c32031f3fdfa16bd5bae3d9","2011-01-17 12:09:06+00:00","GOB: Fix o2_pushVars()

Fixes Urban Runner loading.
This being broken has the potential of messing up
/everything/ in unpredictable ways, so saves of games using
this opcode may be borked. Thankfully, I *think* it's just
Urban Runner, which isn't working/supported yet anyway.

svn-id: r55276
"
"db13af5337e06472c82684cbf362598598d158d3","2011-01-17 13:37:14+00:00","GOB: Make the variable stack endianness-independent

Since Urban Runner casts int16s to uint32 before pushing them onto the
stack and after popping assumes it's little endian, we have explicitely
preserve the variable space endianness while pushing/popping.

svn-id: r55277
"
"3fa01f4030ae5cd283d1ed6300104d2b730413ad","2011-01-17 16:10:48+00:00","MOHAWK: Implement the Riven pin controls

svn-id: r55278
"
"3ebf1e5962f202612a0ba40929b5cbfd48adfd19","2011-01-17 23:00:52+00:00","PARALLACTION: Some Improvements To Big Red Adventure Walk Code.

* Renamed and retyped 'int _fieldC' to 'bool _stillWalkingTowardsNode' to aid readability and clarity of code. Thanks to fuzzie for naming.
* Added assertion to prevent use of invalid memory as reported by Valgrind when walk point p is constructed from an empty list.
* Added code to stop walk if buildPath fails, though this causes an assertion instead currently.

svn-id: r55279
"
"c6750a7a650f668627ab5e86352f66aef6257f7e","2011-01-17 23:12:59+00:00","PARALLACTION: Minor Whitespace and code complexity reduction in walk.*

svn-id: r55280
"
"f042e398eaea1bc15f76fd1739f98b3245c33cd0","2011-01-18 00:22:47+00:00","PARALLACTION: Fix Big Red Adventure Walking To Stop On Path Build Failure.

Walking now works correctly, with no valgrind issues, lockups or assertions.

svn-id: r55281
"
"2a808be80436e84a93742b039fadec924897c884","2011-01-18 00:42:16+00:00","MOHAWK: Implement xgrviewer so the right viewer on gspit is usable

svn-id: r55282
"
"92ddccec091cf837ebcd680fee91c570f8b0eed8","2011-01-18 00:56:48+00:00","GOB: Add chroma values linear interpolation in drawYUV

Fixes the blockiness and apparent color shifting in some Urban Runner menu icons.

svn-id: r55283
"
"283bec822d4c0a8e812e46aa824b8ea0b4d7227b","2011-01-18 04:19:33+00:00","GOB: Add a sanity check in oPlaytoons_readData

svn-id: r55284
"
"d509941eca5b7e49af654d2e95e1b10d3253c177","2011-01-18 05:09:43+00:00","VIDEO: Clip render rect to the surface's dimension

...And not to the video's. Oops :P

svn-id: r55285
"
"e73484b2599c3dd5013fa840160bb2a58fa84677","2011-01-18 06:30:47+00:00","GOB: Fix Urban Runner hotspot texts

Thanks to SylvainTV :)

svn-id: r55286
"
"dd01e4c303241d04096149cc978af0a049beca6d","2011-01-18 07:02:42+00:00","GOB: Increase debug level for a debug message

svn-id: r55287
"
"94f5bec0f61f68f797534b5ee516efafeaa1eedd","2011-01-18 07:03:12+00:00","GOB: Fix Woodruff video offsets

svn-id: r55288
"
"f33b84ff3d1b1f1a8efac54696046983be5f5de7","2011-01-18 07:03:42+00:00","GOB: Fix Woodruff object videos

svn-id: r55289
"
"61b90c43d81474f5d253e8e1c43302c99382cbb0","2011-01-18 08:14:23+00:00","GOB: Fix a stupid typo in o2_readData()

svn-id: r55290
"
"839926ef10f4352bb360431cd34bbae4ec3b35bc","2011-01-18 08:32:10+00:00","HUGO: Clean-up

Modify debug level for 2 debug messages,
Suppress obsolete comments,
Fix typo in comment

svn-id: r55291
"
"4413754ad2b51fd07c97223f0790695c1f2d2235","2011-01-18 09:16:52+00:00","HUGO: Improve mouse support in H3 DOS version

- Fix description of Penelope lying (when using mouse)
- Use H3 Win logic in order to handle horizon
- Add a workaround for a data bug in scenery1.dat, fixing the
pathfinding bug in Crash screen

svn-id: r55292
"
"efe0dea82c6c8fcbf4a50b950af2bf9cf82092d0","2011-01-18 09:27:32+00:00","GOB: Implement Urban Runner autosave

Makes the 'Try again' after a death work

svn-id: r55293
"
"a6073a649a9cd9a363085297df1336ba71a1964d","2011-01-18 10:42:26+00:00","GOB: Add some sanity checks

svn-id: r55294
"
"1c63862f2bd13606899c28e556645f95bd374c72","2011-01-18 11:51:45+00:00","GOB: Add a workaround for Inca2

The scripts seem to depend on var32_236 to be cleared at the
start of each new script file.

svn-id: r55295
"
"d4357c5c3f37237094869f601cfaa07da310223d","2011-01-18 11:52:24+00:00","GOB: Give Inca2 its own Inter class

svn-id: r55296
"
"b4e12e6a896fd0c2be34d08978129b247dd12793","2011-01-18 11:52:44+00:00","GOB: Fix the indenting :P

svn-id: r55297
"
"b38b5d24849524ba10d1c44e39cdb1b694c33b17","2011-01-18 11:53:21+00:00","GOB: Give Inca2 its own SaveLoad class

Add an quick hack to fudge reading of the 'voice.inf' file,
so that the voice match the selected text language.

svn-id: r55298
"
"245b7337f8720db022acdab0bb15e5b99ad313ad","2011-01-18 14:26:26+00:00","MOHAWK: Implement the village part of the left viewer on gspit

svn-id: r55299
"
"5da1718beb7bdc1b034e12739be783873fd133df","2011-01-18 14:51:03+00:00","MOHAWK: Implement the whark response to the red light

svn-id: r55300
"
"503fdb61470484d952634fc1fab5200371810c3f","2011-01-18 16:18:10+00:00","GRAPHICS: Add a getSurface() function to JPEG to automatically convert to RGB

svn-id: r55301
"
"b956f102d90aad0a166020c05d1e5994aca36242","2011-01-18 17:03:21+00:00","MOHAWK: Fix the gear puzzle in Myst ME Mac

svn-id: r55302
"
"5cd4bd3ce774b9880882561e28aadcaa6125f92a","2011-01-18 17:08:17+00:00","MOHAWK: Cleanup wrapMovieFilename()

svn-id: r55303
"
"c35fa646ce4e40ab0e3223a5aec4049e8cb7bbc8","2011-01-18 17:42:34+00:00","MOHAWK: Move Myst's o_quit opcode to the base class

svn-id: r55304
"
"e24f1ff40a09e4f4a0f5cd5810000775e8614d26","2011-01-18 17:51:48+00:00","Added Code::Blocks project files for the create_project tool

svn-id: r55305
"
"6e857ec39634f60ec8702bc366d3fa48c6a0637d","2011-01-18 17:57:27+00:00","create_project: Add the lpcrt4 library normally in the libraries section of Code::Blocks,
not as a command switch

svn-id: r55306
"
"801561e6bc789cbf83704efe612ba6ec704ef326","2011-01-18 18:26:33+00:00","HUGO: Clean up

- Suppress some obsolete comments
- Get rid of some magic numbers

svn-id: r55307
"
"58c9e219b676357f9254939f0ad40e44239bb792","2011-01-18 19:17:24+00:00","MOHAWK: Add gulls and butterflies to Myst

svn-id: r55308
"
"da1669c6669b31a3a7dd8cb09019081651b223fc","2011-01-18 19:22:48+00:00","MOHAWK: Add a sanity check to waitUntilMovieEnds()

svn-id: r55309
"
"f343bb9185461a94489b6abd33eaf037de879d32","2011-01-18 19:30:32+00:00","MOHAWK: Add a workaround to prevent a crash when pulling the gears puzzle reset lever in Myst ME.

CL1WLFCH.MOV is not the same for Myst ME and Myst win31. The proper fix will need backwards playing for QT movies.

svn-id: r55310
"
"bf06c49544a63f927889e20617b2b1c3edc815a4","2011-01-18 19:32:36+00:00","MOHAWK: Implement channelwood pipe valves

svn-id: r55311
"
"0761ab7b3a5789815e65e49d40d92539f10c481c","2011-01-18 20:30:16+00:00","MOHAWK: Rename some VideoManager functions so we have some unified naming between versions

svn-id: r55312
"
"99f62728a3c2ded09421f7ee3f17d4b46da2bfc9","2011-01-18 21:03:13+00:00","GUI: Fix implicit signed to unsigned conversion warnings for some compilers.

svn-id: r55313
"
"2aca6d383846583de2d7639dcee0e9ad4aab602f","2011-01-18 21:10:58+00:00","MOHAWK: Rename some Myst-specific sound functions; cleanup

svn-id: r55314
"
"4ad14abef3ea125a1cbc4939b3c5ed57bd8d58ab","2011-01-18 21:13:47+00:00","COMMON: Some style fixes in config-manager.cpp.

svn-id: r55315
"
"6a586881af7764918e2bb4da039ce9c0b03fc2ed","2011-01-18 21:32:18+00:00","HUGO: Rename objNumb to objIndex when used as an index

svn-id: r55316
"
"22c3e7b1de17403e246e2a0f8a1e238de0cc9310","2011-01-19 00:16:13+00:00","VIDEO: Don't assert() when a needed codec isn't compiled in

svn-id: r55317
"
"3ba7a21c622f63bfbebe39279a4f40507e74f7f4","2011-01-19 00:49:49+00:00","HUGO: Merge the 2 versions of doAction, cleanup

svn-id: r55318
"
"4bc730f256c7bbda7e6185174c0a24ac9b7241cc","2011-01-19 07:40:10+00:00","SWORD25: Strip off unportable functions

svn-id: r55319
"
"c52876581463cb27bbd88a1b0816b290abd0dbfc","2011-01-19 07:40:30+00:00","SWORD25: getSoundTime() is not used. Remove it.

svn-id: r55320
"
"12ff4f51f15aeb9c78f381e7d2e9f2f6ca69dcef","2011-01-19 09:01:38+00:00","GOB: Add save stub and temp sprite for Inca2

svn-id: r55321
"
"2e30eca6d0c61e0c44836dbee6882397f41d1984","2011-01-19 09:02:07+00:00","VIDEO: Don't segfault when no audiostream is present

svn-id: r55322
"
"adbeb20f3b8311982f45fd57a2db472fb04b8480","2011-01-19 09:02:39+00:00","GOB: Add preliminary Inca 2 save support

svn-id: r55323
"
"679a8d6ad60a2f8a0ae8f714a147f25b821a8cd8","2011-01-19 09:03:09+00:00","VIDEO: Recreate the audiostream if necessary

svn-id: r55324
"
"9058b6a88b7b33cb58164f65bb92a19b976281dc","2011-01-19 14:45:18+00:00","HUGO: Add specific decodeString() for H1 Dos

This fixes act3 logic.
Also move some functions from public to protected.

svn-id: r55325
"
"a44df1e693a21cfed0109a7318fb4ab2f920b195","2011-01-19 15:00:53+00:00","MACOSX: Fix make bundle when compiling with libtheoradec

svn-id: r55326
"
"e2d9a34bee1568b0deb9aad960f61421442230dd","2011-01-19 15:22:39+00:00","MOHAWK: Cleanup some Riven code

svn-id: r55327
"
"017ab4c50356608ff617da1c843495465999c1c6","2011-01-19 16:36:34+00:00","MOHAWK: Add some supporting code for cue lists.

svn-id: r55328
"
"6b123c0d113ba20e994fdf7064d9550b39be7ec5","2011-01-19 16:36:50+00:00","MOHAWK: Fix comment in resource.h.

svn-id: r55329
"
"918a21cd7b0a6a3a99815338441a127cd54d794a","2011-01-19 16:52:47+00:00","MOHAWK: Use a separate SndHandle for Myst's background sound

svn-id: r55330
"
"16ba5717f40c202b4879a59b619a595ef849d27f","2011-01-19 16:55:47+00:00","MOHAWK: Properly initialize Myst's background SndHandle

svn-id: r55331
"
"878bedf454a8440b3d3c8887bc021a698dbb5605","2011-01-19 18:02:53+00:00","HUGO: Move mouseHander() out of runMachine()

svn-id: r55332
"
"bad7f1ce9a67e71eaaa390ac56ae5a3720c3fb7a","2011-01-19 18:57:43+00:00","GOB: Implement 'live' (non-blocking) videos

Many thanks to SylvainTV. :)
Urban Runner might actually be completeable now.
One caveat: Hotspots at that hotel sequence are a bit glitchy...

svn-id: r55333
"
"a3e9197805f0d94cf17da366aeaa7b82a6b5e670","2011-01-19 20:53:28+00:00","MOHAWK: Add getSubImageSize function.

svn-id: r55334
"
"d68c8547c5479e2e781819ecfa74b445a2249ff0","2011-01-19 22:41:12+00:00","MOHAWK: Don't use a fixed-size array for cue lists.

svn-id: r55335
"
"0443ab70e1f2bd73302492f6e7d04e970e6b93e4","2011-01-19 22:59:39+00:00","I18N: Update translation template and all translation files

These are only minor changes concerning the source code line numbers.

svn-id: r55336
"
"d338e543aae41f675b2445902cc0683973ccd076","2011-01-19 23:00:28+00:00","I18N: Update Norwegian Bokmaal translation (patch #3142039)

svn-id: r55337
"
"a9bbfb1fcdea020057e36a29260384057f7781bd","2011-01-19 23:02:45+00:00","I18N: Add Norwegian Nynorsk and Danish translations

Norwegian Nynorsk translation was submitted in patch #3142157
Danish translation was submitted in patch #3153476

svn-id: r55338
"
"024b7758c5122bae99f1a92fc38fce3ad231d1f6","2011-01-19 23:05:06+00:00","I18N: Update credits and NEWS file after adding two new GUI translations

svn-id: r55339
"
"d77899e158e2ae2076d7d8185a92c544b4a06351","2011-01-20 03:22:43+00:00","GOB: Make Urban Runner's '3D view' work again

svn-id: r55340
"
"8c80f80697049259bbaba4ca4137dca46f29c670","2011-01-20 03:27:09+00:00","VIDEO: The getTimeToNextFrame override is useless now

svn-id: r55341
"
"744eaf013416f36519205e09d04cf0aa8edae017","2011-01-20 04:54:43+00:00","TOOLS: Add Indeo3 codec to the list of features in create_project

svn-id: r55342
"
"82b0a9b003b8bcbe0eff8789acd19cbcd1cf7575","2011-01-20 04:57:06+00:00","LASTEXPRESS: Add macro for end of entities logic functions

svn-id: r55343
"
"bd3f9ad1e21a791dafee1943099492d6b49d32be","2011-01-20 05:19:41+00:00","GOB: Use Surface::blit() in VideoPlayer::copyFrame()

svn-id: r55344
"
"dd3894a44248e2c5b2c646b4cc1d1353442b7fbb","2011-01-20 07:29:45+00:00","TOOLS: Allow compilation and linking from inside the Code::Blocks IDE with create_project-created workspaces

- Fix include directory search order
- Add custom tool command for asm files
- Change linker search directory to SCUMMVM_LIBS/lib/mingw (libraries from the precompiled mingw package will need to be renamed to match the names from the MSVC precompiled package and be of the form lib<name>.a)

svn-id: r55345
"
"6b85f809d9fcb2e7140944b5a8be14373b8fc081","2011-01-20 10:20:57+00:00","GOB: Urban: Fix missing visuals at Cemetary/Lab

Urban Runner decouples _frontSurface and
_spritesArray[kFrontSurface] at that screen... *sigh*

svn-id: r55346
"
"6e403b38bad648cd52eeb5a1f0b71d75ab4256a7","2011-01-20 10:21:27+00:00","GOB: Reverse-blit the final frame of a live video

Fixes some glitches at the end of live videos

svn-id: r55347
"
"75c840b52782489639e95509495bd3ddf3513fea","2011-01-20 12:28:22+00:00","VIDEO: Add hasVideo()

svn-id: r55348
"
"3976342ec0120fb2b9817dc06cbf05e48ab521c3","2011-01-20 12:28:46+00:00","GOB: Don't not play videos with only sound

svn-id: r55349
"
"f015e175dff6592744a6a937ae424f6d01ab0db2","2011-01-20 12:31:13+00:00","GOB: Change a warning() into a debugC()

Because it gets on my nerves :P

svn-id: r55350
"
"75eb1f7f10e75be8b5ebdfd57e2203c91b57cc60","2011-01-20 12:39:54+00:00","GOB: Also ignore writing to kSaveModeIgnore files

svn-id: r55351
"
"cba4bccf99324de24ef7eba1f076c1dc6b540880","2011-01-20 12:40:17+00:00","GOB: Removing a useless debug warning

svn-id: r55352
"
"862596bbd4a5158a32ef07aff19e52f42ba03e83","2011-01-20 12:40:42+00:00","GOB: Ignore a few more dummy files

svn-id: r55353
"
"adf8820aee35ce2fa38b5420aab50461653f705f","2011-01-20 15:29:32+00:00","GOB: Make blocking videos default

svn-id: r55354
"
"715560edb9e369fe5e55567d3725e853b11e3e91","2011-01-20 17:06:50+00:00","GOB: Don't temper with the break key for live videos

svn-id: r55355
"
"33ed3fa8a072c5260c1dd5c6662fc2162470bd04","2011-01-20 17:07:17+00:00","VIDEO: Don't delete, just finish the audiostream on video end

svn-id: r55356
"
"fd7159075d1d7f1a0425999b316e820d00fb23c6","2011-01-20 17:07:46+00:00","GOB: Give sound-only videos 500 extra ms for good measure

svn-id: r55357
"
"03415868b07cedd956185c5f5a56ff2daf09c735","2011-01-20 17:08:14+00:00","GOB: Decrease the number of debug warnings

svn-id: r55358
"
"bb6c230587c65c92e1719809977e4625322dd2cb","2011-01-20 18:17:39+00:00","GOB: Implement looping live videos

Needed for the buttons in the Playtoons series

svn-id: r55359
"
"30a94d2af65a3cb53d8aa733db4edb6f630b3f9b","2011-01-20 19:33:31+00:00","HUGO: Cleanup: Remove some C-style comments

svn-id: r55360
"
"1e2ac8bc13d264d3bfe7766a501df7454f972c7d","2011-01-20 21:34:19+00:00","MOHAWK: Add shared view code.

The design/code here is still very much in flux, because it's still
unclear exactly how the code is used by some games.

svn-id: r55361
"
"b10f072c9e735b85edc297d243b12ae50a9fb833","2011-01-20 21:35:00+00:00","MOHAWK: Add CSTime engine.

svn-id: r55362
"
"5a7e25a3a64b4f383c4e0d585c82e1dee8297658","2011-01-20 22:31:05+00:00","HUGO: Close Memory Leak in TopMenu Surfaces.

svn-id: r55363
"
"6412b1d2c70bd6a611ad1bfdac8437b9adc38738","2011-01-20 22:32:30+00:00","GUI: Fix Memory Leak from PicButtonWidget _gfx Member.

This widget is only currently used by Hugo.

svn-id: r55364
"
"a321f2a007b325943750e78635bd93465cfa96bf","2011-01-20 22:50:50+00:00","HUGO: Merge misc versions of display, intro and scheduler classes

svn-id: r55365
"
"572dfd2a23d3b6789b83bfe102c62650113ad9b7","2011-01-21 00:29:55+00:00","MOHAWK: Added a FIXME and fixed a logic bug

svn-id: r55366
"
"476eeb69e64046f3ba4bbe3027807fb23bedf4c9","2011-01-21 01:55:44+00:00","COMMON: Move SCI's DCL decompression code to common

svn-id: r55367
"
"7ed456f268d9f6db71b07fd3e7e8859556295e6c","2011-01-21 01:58:53+00:00","MOHAWK: Add support for installer files from Riven and other Broderbund games

svn-id: r55368
"
"14d74d206381cb23e717557ea71910efa74b1e11","2011-01-21 03:25:01+00:00","PARALLACTION: Fix Un-initialized Memory Errors and Leaks in Nippon Safes Amiga Demo.

These were found using Valgrind.

svn-id: r55369
"
"94ac240761e19c3fa03e57d09cf4755cc6a30210","2011-01-21 10:59:49+00:00","MOHAWK: Fix two CSTime cursor shape/state checks.

(Thanks to [md5]/thebluegr.)

svn-id: r55371
"
"f5b4f96404d8f47b526908cc60042b5ae11adf03","2011-01-21 11:53:44+00:00","MOHAWK: De-hardcode CSTime font paths.

The original Broderbund release had the installer data in a different
directory.

svn-id: r55372
"
"398c95a331c408cad596e1d0e7aca2653495bea9","2011-01-21 12:24:18+00:00","MOHAWK: Remove non-state uses of ~0 from CSTime.

svn-id: r55373
"
"8b3f2955a458ea9c677491a4e41f9fc95c806b8d","2011-01-21 13:28:35+00:00","GOB: Make the Cemetary/Lab screen work correctly

Saving there still won't work though

svn-id: r55374
"
"e95254ffa5d1de2b640a5357fe7067deee19f311","2011-01-21 13:29:23+00:00","GOB: Urban: Fix loading/saving in the Cemetary/Lab screens

svn-id: r55375
"
"100b25a29ec0cd3e2b3ed353289b19ef3ffb70d3","2011-01-21 13:29:51+00:00","GOB: Remove the now useless SaveConverter_v6

Since I just invalided the old Urban Runner saves anyway...

svn-id: r55376
"
"678b5f361aaf287d4ce1f7a5497895f22247603f","2011-01-21 14:15:00+00:00","GOB: Fix copypasta mistake

svn-id: r55377
"
"58c7e668000b956fefa09b472053af6a00447b56","2011-01-21 14:17:49+00:00","MOHAWK: Implement CSTime big note display.

svn-id: r55378
"
"c31e483a6f83802955f9bf0f15262fb44484ab50","2011-01-21 14:20:48+00:00","MOHAWK: Add casts to remaining uses of ~0.

This silences some warnings for now.

svn-id: r55379
"
"fc8f135a6181a285584556714b75b34b392d0a33","2011-01-21 14:28:43+00:00","COMMON: Document which engines use DCL

svn-id: r55380
"
"e55ac4f419db480b1ce87087d7f063aa5297099f","2011-01-21 14:37:46+00:00","SOUND: Update which engines use what decoder

svn-id: r55381
"
"0e33dd91645bb26c51731cc79b2f142b3883047c","2011-01-21 18:53:35+00:00","SCI: Partial robot support, currently disabled since it does not run
asynchronously as it should.

svn-id: r55382
"
"9e338a170f8253fea2accf2b95f44806dfdf24f8","2011-01-21 19:15:10+00:00","GOB: Add support for saving true color sprites

Not exactly the 'nice', since up-depthing the sprite data to 24bit
happens after it has been adapted to the current system's color
format, so we're going to gradually lose precision when the save
gets passed around different systems. Still, this is the least
headachy solution, I guess...

svn-id: r55383
"
"af7c96cff19f8a53ac4d895fca87095f4768e112","2011-01-21 19:15:43+00:00","GOB: Urban: Fix saving/loading in the Secret Room screen

For some reason, the original engine saves the console sprite to
disk instead of reconstructing it after loading the actual save...

Invalidates the Urban Runner saves again. Should be the last time,
though.

svn-id: r55384
"
"a7df59a0ac72bad5823e35b1bd765658d56a2b50","2011-01-21 19:25:24+00:00","TOUCHE: Fixed Uninitialised Read in first call to ToucheEngine::res_loadBackdrop().

svn-id: r55385
"
"74f8462a7bc61f85614e3e024df6a7f356cbbc43","2011-01-21 19:33:36+00:00","SCI: Fix GK1 breaking into the debugger when watching the intro

svn-id: r55386
"
"0c797cf359c0191ee78f0fbcf391af87059c017c","2011-01-21 19:45:08+00:00","MOHAWK: Use the provided drag flags when dropping a feature.

svn-id: r55387
"
"13eb46eb9900bef3ed33da38454f2d196104a5c4","2011-01-21 19:45:33+00:00","MOHAWK: Fix disabling inventory features in CSTime.

svn-id: r55388
"
"bb2ae25626ae6e0cdbf53f41afc00261d86f1ced","2011-01-21 19:45:58+00:00","MOHAWK: Implement kCSTimeEventRemoveItemFromInventory.

svn-id: r55389
"
"cd62c3ae42b9f85540f8b112f580413a631aceb6","2011-01-21 19:52:52+00:00","SCI: Fix robot memory leak

svn-id: r55390
"
"4818b2ae080b29fbf896a03d555867ba1311e5e8","2011-01-21 19:56:23+00:00","SCI: Add comment for GK1 workaround.

svn-id: r55391
"
"bbb1379def2f26663aa2006152e25f63df49328f","2011-01-21 20:08:11+00:00","PARALLACTION: Minor Whitespace fixup in walk.cpp

svn-id: r55392
"
"d5cb146f4ce9a0378da443f4bbc20d9f02ad6568","2011-01-21 20:26:25+00:00","TOON: Fix all the glitches in smacker video playback

Handle manually 2x scaling when it is needed now.

svn-id: r55393
"
"efec8d886423f4d04eb1706c084c49bffa427dd1","2011-01-21 21:24:24+00:00","MOHAWK: Implement Channelwood generic lever opcodes, and bridge opcodes

svn-id: r55394
"
"f7f453a92595b7e071480d107fe9cdd1ab964ccc","2011-01-21 21:40:06+00:00","MOHAWK: Fix channelwood var getter 3, water flawing to temple elevator.

svn-id: r55395
"
"5469aa1687180f9c236df9f780731c6f75afc4e6","2011-01-21 22:04:41+00:00","TOON: Fix double declaration warning

Thanks to clone2727 ;)

svn-id: r55396
"
"9f1904d661eb9779a3d4e6ce0424742247ec4741","2011-01-21 22:50:30+00:00","SCI: Fix robot palette activation

svn-id: r55397
"
"8cacde95e7dabb1694c911a1db087a94569da368","2011-01-21 22:56:22+00:00","TOON: Always reset video playback to lowRes when loading new movie

svn-id: r55398
"
"f9422fb7260b8e5f0f45b93f22e0e4504a9e140b","2011-01-21 23:24:17+00:00","TOON: Bug #3153351 fixed with disappearing Drew

Bug #3153351: 'TOON: Drew vanishes when fixing churnatron'
Made sure the scale is never zero.

svn-id: r55399
"
"cb7eb365ae195f966be78e3ba472f19dcdd55d63","2011-01-21 23:43:02+00:00","TOON: Fix Memory Leak when opening Inventory.

svn-id: r55400
"
"e8e6df91062d4098de9a57176cedeaba5122cc79","2011-01-22 00:00:30+00:00","TOON: Fix for Memory Leak during Savegame Loading.

svn-id: r55401
"
"39de104c5c78d52fccbd82a3738e3bb9c10b949d","2011-01-22 01:07:14+00:00","TOON: Fix Uninitialized Memory Read During Cursor Animation on Load.

This was mainly due to _mouseX, which along with the associated variables was not defined until the first mouse event. This was detected by Valgrind.

svn-id: r55402
"
"75b232c67d520d65029d00643dbbc36a95af3565","2011-01-22 02:31:30+00:00","COMMON: Update documentation of the MacResManager

svn-id: r55403
"
"84a04d6876aa1894b7f54633343856a5316066be","2011-01-22 02:51:39+00:00","SCI: Code formatting

svn-id: r55404
"
"8928dc3cf536a781c8a7ba73b0175bdc185604f4","2011-01-22 03:28:14+00:00","SCI: Changed the expensive and inaccurate floating-point divisions to integer divisions. Fixes asserting of 90.rbt in Phantasmagoria (the game's logo video)

svn-id: r55405
"
"e7006f2cf171c108de1825a7c50e9523c7340e96","2011-01-22 04:14:33+00:00","GOB: Urban: Save an empty sprite if necessary

svn-id: r55406
"
"d99ca6e58c6e3f4d409edac08b9b703557cd2b61","2011-01-22 04:39:39+00:00","GOB: Don't mess with the break key in Urban Runner

To be able ESC videos, you need to switch on ESC in the settings
in the right part of the menu, because the scripts needs to
trigger the drawing of the last frame of the ESC'd video.
Otherwise, the graphics e.g. stops mid-frame during a turn.

svn-id: r55407
"
"243fe811ef7d5be175ea27fa73b3eb2d6e0a53e8","2011-01-22 05:21:51+00:00","TOON: Fix Further Memory Leaks in Savegame Loading.

svn-id: r55408
"
"e1e299d0b8d1ebc229036a6796c5f1dab2c3b66e","2011-01-22 07:20:16+00:00","VIDEO: Correctly correct the _blitMode 1/2 coordinate differences

This fixes the figure lights position in the Secret Room, while
still leaving the flow rate gauge position in the Labyrinth correct

svn-id: r55409
"
"95e557c564fb05f95f5b9c682a5c3d9b2db913f0","2011-01-22 08:00:57+00:00","VIDEO: Seek a video seek glitch

Observable when ESCing a 16bit or 24bit video, for example
the fuses in Urban Runner's Labyrinth screen.

svn-id: r55410
"
"5660b42a897018c4c6e92ed5f6b63142024f8cc5","2011-01-22 09:31:02+00:00","GOB: Another (?) non-blocking video flag

This fixes the intro needing an extra ESC.
Interestingly, the intro movie is actually interactive. You can
influence the paths Max takes by pressed the arrow keys at the
right times.

svn-id: r55411
"
"552648c225560d8029dd2f73b290457f48176d68","2011-01-22 09:37:56+00:00","MOHAWK: Complete Channelwood opcode 101, pipe bridge

svn-id: r55412
"
"2fabd9093742ab3b3bcf68b15ce48aa16cf524ed","2011-01-22 10:09:01+00:00","MOHAWK: Implement Channelwood opcodes 108, 127, 128: elevators

svn-id: r55413
"
"5f87a5b9a8667dd3c7beafb138278c6817ac08db","2011-01-22 11:36:43+00:00","MOHAWK: Add some proper group removal logic to CSTime.

svn-id: r55414
"
"db8f0fdce3dde08ebbc3ff5288b5ffb34b7e24b2","2011-01-22 11:37:01+00:00","MOHAWK: Implement a couple more CSTime events.

svn-id: r55415
"
"e23fef92ddecb5a2b7748ab6d64989fd7c28fe38","2011-01-22 11:37:19+00:00","MOHAWK: Finish hard-coded logic for CSTime case 1.

svn-id: r55416
"
"86b90fe8a69868d1b28009e36730523652a69d17","2011-01-22 11:37:37+00:00","MOHAWK: Add some debug commands for CSTime.

svn-id: r55417
"
"6e254c4f010a6b4f1ff49297e073d1ee59cafbb6","2011-01-22 11:39:03+00:00","GOB: Actually, startFrame == -2 seems to be the only live video flag

svn-id: r55418
"
"1d8272044708ba593525239c0ef483f2d875ea48","2011-01-22 12:12:07+00:00","MOHAWK: Hide mummy at startup in CSTime case 1.

svn-id: r55419
"
"477ae820fbccfe767b8d747d3441c45729f3aa94","2011-01-22 12:15:42+00:00","MOHAWK: Implement Channelwood opcodes 106 and 109: Stair door switch

svn-id: r55420
"
"7c14cf2b1bddaf4ec9403f49a1fc09ec750ee6c6","2011-01-22 12:26:31+00:00","GOB: Fix some of the live-video glitchyness

svn-id: r55421
"
"89087b18c79885680ad1f0d17d36975ea7b06f13","2011-01-22 13:01:10+00:00","SCI21: Allow the game scripts to sync robot videos, like in SSCI. Also, references of the SciEngine class to itself via g_sci have been removed

svn-id: r55422
"
"f48cc4119c7cded01331ad28edf5a85ba972252b","2011-01-22 13:03:54+00:00","MOHAWK: Implement Channelwood opcodes 118 and 203: Sirius's drawer

svn-id: r55423
"
"dc27a2202622a1457c3aef038e2037ab080e9d30","2011-01-22 13:12:01+00:00","SCI: Added stub for playing robot audio from the console

svn-id: r55424
"
"185a0b90707b38da695ed141bb0802d62c61a121","2011-01-22 13:19:16+00:00","GOB: Fixes the return value of dummy shooter in Last Dynasty

Mission 34 shooter must return 1 in order to proceed to the point & click part of the game.

svn-id: r55425
"
"40a4b092461976fbb8b57199379e7f869499f19c","2011-01-22 14:23:03+00:00","GOB: Fix the save list width

The length of the slot 0 string determines the list's width

svn-id: r55426
"
"8a44af63af743f5fc3c5e263df3fb14efdc3e1d6","2011-01-22 14:32:39+00:00","SCI/robot: Correct detection of null preload

svn-id: r55427
"
"7dd28c024aa68f76be48de23b66f27dc6cec90cc","2011-01-22 14:58:17+00:00","SCI: Moved the robot audio playing test code inside GfxRobot::playAudio()

svn-id: r55428
"
"2bb8cf25df3f3fb8bb9eebb11d22d812b9310f2f","2011-01-22 15:06:12+00:00","GOB: Force live videos onto the backSurface

Fixes some inventory list uglyness in live videos.
It still flickers when mousing over it though, and keeps popping
when mousing over the register during the hotel scene

svn-id: r55429
"
"a8e6fa3346a9cf5107629397545cb04e44b831c6","2011-01-22 15:39:52+00:00","GOB: Don't blit dirty rectangles while playing a live video

This fixes the inventory list flickering in live videos :)

svn-id: r55430
"
"755558de042d76751e4684fb8e56bd9463cfef89","2011-01-22 16:16:30+00:00","MOHAWK: Update the ADPC chunk code

svn-id: r55431
"
"cbbafc962d6a35d9b8744cd6d0094dfd976dc30f","2011-01-22 16:29:54+00:00","GOB: Extend the good-measure wait to all videos with sound

Fixes a glitch in Bambou, where the intro movie is cut off to
soon.

svn-id: r55432
"
"c1e68ac94da1f8429462b75e0d51b9d6c2dc2f2f","2011-01-22 16:35:25+00:00","MOHAWK: Fix meaning of the sound loop variable

svn-id: r55433
"
"aeff7cf12c9fc5effa6671b6c5571a08d226b86c","2011-01-22 16:44:00+00:00","MOHAWK: Implement Channelwood's remaining opcodes

svn-id: r55434
"
"37aa5138155bc865cf0a7ecfb6f09844bcbcba65","2011-01-22 16:46:32+00:00","I18N: Add polish translation (patch #3162838)

svn-id: r55435
"
"7fee6f9740133d14caf0e52d610dba2d5f82c5a6","2011-01-22 16:48:51+00:00","GOB: Proper live video looping

Fixes the Yes/No robots in Bambou

svn-id: r55436
"
"3f162962aaa1c6807ac36736a422f79761ea516d","2011-01-22 16:56:02+00:00","GOB: Oops, -10 = close video, < -10 = looping

svn-id: r55437
"
"5b4183fa2734fedd613b4fcd7ed56c0de37a06a8","2011-01-22 17:19:58+00:00","GOB: Or actually, *this* should be the correct loop flag handling

svn-id: r55438
"
"caccceb02b7de1812190114373f69e574e570308","2011-01-22 17:26:09+00:00","MOHAWK: Dragging resources / levers code cleanup

svn-id: r55439
"
"de4b5645324a9019344dd94877c7ecc2139b5cd0","2011-01-22 17:33:44+00:00","MOHAWK: Add/use visit count for scenes.

svn-id: r55440
"
"a9c840c3d5863f39b1812f5ce80fa0a65fca56c4","2011-01-22 17:34:01+00:00","MOHAWK: More CSTime event stubs.

Case 1 is now playable up to the 'next case' event.

svn-id: r55441
"
"66a715ea99f0c6afccf3e95bdbd058cdd958c15d","2011-01-22 18:09:06+00:00","MOHAWK: Silence a warning

svn-id: r55442
"
"0722df94721e6e356bd126bdb97f51b9a4a0ef1e","2011-01-22 19:28:23+00:00","GOB: Hacking in multiple live videos

Needed for Bambou. The narrator voice and the 'Do you want to quit?'
voices are live videos that should continue while the live video
buttons are playing.

svn-id: r55443
"
"00cabdad11ea7b2bac21eb0e06aa99d325be31b5","2011-01-22 19:37:25+00:00","GOB: Only let one video with sound play at a time

svn-id: r55444
"
"bfe0307300a36042e7b82fcc3275d317126b3af4","2011-01-22 21:22:12+00:00","MOHAWK: Implement kCSTimeEventCharSomeNIS55.

svn-id: r55445
"
"bbfbb7e74a8a5db2a808e03df8076125371300f7","2011-01-22 21:22:29+00:00","MOHAWK: Minor CSTimeChar bugfixes.

svn-id: r55446
"
"49c3cab2e86743212e831e31caecbc18aefbaccd","2011-01-22 21:22:49+00:00","MOHAWK: Implement CSTime help system.

svn-id: r55447
"
"7e46c479fcda5f88eb00462d023d0b07a14ae849","2011-01-22 21:23:06+00:00","MOHAWK: Add hardcoded help code for case 1.

svn-id: r55448
"
"bcf62fa8b9b395b0ce372c2aa9a84a582b4526bd","2011-01-22 21:58:33+00:00","SCI/Robot:Don't ifdef out ::playAudio, since it is only used for debugging

svn-id: r55449
"
"257a6b2e6d432cd343e213218474a61f61a72980","2011-01-22 23:31:21+00:00","VIDEO: Fix QuickTime audio buffering on the last frame

svn-id: r55450
"
"3f6496d5b5b2caf0b935b27bca557ae53a880302","2011-01-23 00:05:52+00:00","HUGO: Cleanup

Suppress almost all defines, rename constants

svn-id: r55451
"
"93409aa381b6d953599491cb6b7f3a4c3f117d5a","2011-01-23 00:08:47+00:00","HUGO: Fix GCC compilation

svn-id: r55452
"
"7f4e1bde1edd3f1c08848b1a1f77505758f2ea13","2011-01-23 00:19:40+00:00","HUGO: Fix several warnings

svn-id: r55453
"
"caab21426026ab70799d39607b23bad382332620","2011-01-23 00:29:08+00:00","HUGO: Fix on more GCC warning

svn-id: r55454
"
"57521f7574791b634402a68ee21c1632a309b264","2011-01-23 01:27:40+00:00","VIDEO: Update documentation on which decoder is used by what engine

svn-id: r55455
"
"c039b06c3c35c725e19fa5f8027747e402749d46","2011-01-23 03:46:38+00:00","VIDEO: Fix createSurface() for the case that there's no video

Fixes clicking on the Piano in the Apartment in Urban Runner.

svn-id: r55456
"
"fd3188a6fcb370364a178b4b61841b9916bcc5b2","2011-01-23 05:12:50+00:00","MOHAWK: Cleanup Riven opcode 12 (now known as stopSound())

svn-id: r55457
"
"52c0d678ce1f20b602dabf16144f244fd13688c1","2011-01-23 06:02:46+00:00","MOHAWK: Enable the Riven easter egg shortcut

svn-id: r55458
"
"27d9ee3de1b175f68384d4bae74d2edc0614ebcc","2011-01-23 06:54:35+00:00","MOHAWK: Do not stop ambient sounds when finding no matching Riven SLST index

This fixes the ambient sounds in the Rebel Tunnel puzzle and Temple Island maglev among other places.

svn-id: r55459
"
"191d85f174128c36890f7616689084ac343a5bfc","2011-01-23 07:02:49+00:00","MOHAWK: Implement Riven's stopSound() and fadeAmbientSounds() opcodes

svn-id: r55460
"
"411d41d3d0a3e4d14187d4a980c25c0a2e41ad9c","2011-01-23 11:00:57+00:00","GOB: Change the NOCD workaround for Urban Runner a bit

Seems like the game does close the CD1.ITK too, so we just
open all ITKs right at the start, lest it might blow up when
it wants to close the top ITK and that's actually CD4.

svn-id: r55461
"
"00a0f8d15df8f241741e4a9a68a71641715ae062","2011-01-23 14:49:50+00:00","SWORD25: Removed the custom log class and replaced it with warning/error/debugC calls

svn-id: r55462
"
"04af67d736979272e17b0dcd0e3e4371fc0d07cc","2011-01-23 14:57:21+00:00","SWORD25: Fixed compilation

svn-id: r55463
"
"125078582262b40dfa53695c5e3e30d48f1ec380","2011-01-23 15:01:24+00:00","SWORD25: Replaced BS_ASSERT() with assert()

svn-id: r55464
"
"806defa98e2a92129f709246de00e46447bf8ced","2011-01-23 15:07:46+00:00","SWORD25: Fix format string warnings.

svn-id: r55465
"
"ccd5129588cd78eb4234c8c3d2b2770a5d19cf40","2011-01-23 15:33:30+00:00","GOB: Pass engine pause to the VideoPlayer and decoders

Entering the GMM or the debug console during a video will not
mess up audio/video sync anymore.

svn-id: r55466
"
"160517da93b7edd1907aa9ab52bc419d045697d5","2011-01-23 16:14:51+00:00","SWORD25: Simplified the YUV->RGBA conversion code

svn-id: r55469
"
"78af2212cf299fb9fb1ae2d4c3ec5e5e40df3f09","2011-01-23 16:15:26+00:00","MOHAWK: Detect CSTime demo (thanks to Strangerke for finding it).

svn-id: r55470
"
"ba7e9827432f6b28689fba7367d5c0724f1ca1a1","2011-01-23 16:18:03+00:00","NEWS: Add Urban Runner and Bambou

svn-id: r55471
"
"36ed9be335217ef6fcf8e07b257fb6a1ee1ed8f2","2011-01-23 16:22:15+00:00","SWORD25: Fixed compilation (oops...)

svn-id: r55472
"
"806ccf5d25ebe337103942cdb6b5cf8800de115a","2011-01-23 17:14:43+00:00","GRAPHICS: Move graphics/video/ to video/. Step 1/2

svn-id: r55473
"
"f123802f4c33d9d146f6e53f8c4691ea3067f8a8","2011-01-23 17:37:17+00:00","GRAPHICS: Move graphics/video/ to video/. Step 2/2

svn-id: r55474
"
"85406467e2fc234066f87628709c7cbf094556ad","2011-01-23 17:52:29+00:00","SWORD25: Remove unused yuvtorgba.h file

svn-id: r55475
"
"b0321af3434dcc7e9330d79fa5d0ed083e50631e","2011-01-23 19:00:35+00:00","COMMON: Added some very simple operators to the Point class (+, -, += and -=), taken from the BS25 Vertex class

svn-id: r55476
"
"b17d4ada86ec699213f449d5a26b03b6b4402ca3","2011-01-23 19:02:36+00:00","SWORD25: Removed several unused methods from the Polygon class

svn-id: r55477
"
"3d15871ee2d6a9c0ce4819a6ab5925638bafa8b9","2011-01-23 19:06:35+00:00","SWORD25: Removed several unused methods of the Vertex class, and made a subclass of the Common::Point class

svn-id: r55478
"
"caa6684752a310e916b179125a4125a8b3be36f0","2011-01-23 19:08:09+00:00","VIDEO: Move video classes to Video:: namespace

svn-id: r55479
"
"2f4b89e9b1b36cba2cc0d3923f9fa5bbbd1f0d77","2011-01-23 19:18:44+00:00","create_project: Add the video directory to the list of base directories

svn-id: r55480
"
"9b31b9c21439e1b319d52ba18e6c2c391d39ff6c","2011-01-23 20:16:24+00:00","GOB: Fix a clipping issue

svn-id: r55481
"
"2c2ef3973af95a56eb7fb333cff3f63181583652","2011-01-23 20:51:16+00:00","SWORD25: Fix GCC Compilation Warnings.

svn-id: r55482
"
"7bf8dda27ff4b8aab2a386cb745227706a5a3779","2011-01-23 21:59:26+00:00","JANITORIAL: Remove unnecessary backslash

svn-id: r55483
"
"c81be09bcd9b2654b3af3bf30ad7b4b387b62e44","2011-01-23 22:08:14+00:00","MOHAWK: Fix the Riven demo intro sequence (a regression from r55188)

svn-id: r55484
"
"f7f42fba21583ed5733268dedcc04f28e26372c2","2011-01-23 22:51:12+00:00","HUGO: Get rid of (almost) all the remaining defines

svn-id: r55485
"
"86513a19aad390c11eb060454bcc6a27822a94c1","2011-01-23 22:52:15+00:00","MOHAWK: Fixed possible use of uninitialized variables in Myst Selenitic Age code.

svn-id: r55486
"
"a7f7b90aee9569817da161f1673584da2495b61e","2011-01-23 23:25:34+00:00","SCI: Fixed possible use of uninitialized variable in SCI Script Debugger.

svn-id: r55487
"
"1f1cb1f1402206b3b120a50fe759a36388b1be4d","2011-01-24 00:03:09+00:00","SWORD25: Removed the logErrorLn and logWarningLn wrappers

svn-id: r55488
"
"092da739293c8c14c4fb194e253c550d25fd0f99","2011-01-24 00:04:32+00:00","SWORD25: Documented a FIXME

svn-id: r55489
"
"9961e054d0b5b7d301eabdfdc54549609b49dbcf","2011-01-24 00:46:06+00:00","SWORD25: Fix linker breakage from DECLARE_SINGLETON() in renderObjectRegistry.h.

svn-id: r55490
"
"0f07082a78355b8607bf04dd4e1ba42e14fc636f","2011-01-24 01:58:43+00:00","PARALLACTION: Improve safety of PathBuffer::getValue().

This will now avoid invalid memory reads and instead emit warnings if it is called with values outside of the expected data buffer or on a NULL buffer.

svn-id: r55492
"
"d6a4ff36392b14afea6da749c2b2f4f14906ed64","2011-01-24 02:43:07+00:00","MOHAWK: Recheck the current hotspot if a script has changed the enabled hotspots in Riven

svn-id: r55493
"
"e70efa2fad9e8c6a1f40329f7d77543ec907f27e","2011-01-24 05:50:49+00:00","MOHAWK: Properly initialize the bspit-gspit magcar variables (thanks, digitall)

svn-id: r55494
"
"5564926e06d3ed6538f7413816d500f173e45e22","2011-01-24 06:30:39+00:00","MOHAWK: Fix Gehn's music player when clicking on it the first time (thanks, digitall)

svn-id: r55495
"
"d706ab3ee8acaab4244c3baada96974fba349294","2011-01-24 10:31:19+00:00","GOB: Urban: Write intro.0xx to file too

This fixes retrying after dying in the Secret Room.

svn-id: r55496
"
"3b61cb57d495a56933aed79f4d170180107b9c15","2011-01-24 10:57:19+00:00","SCI/Robot: Fix typo

svn-id: r55497
"
"aa5e8e6c2bbd57bb183fd3c1f936b52767fe3941","2011-01-24 11:17:47+00:00","SCI/Robot: Simplify ::setPalette()

svn-id: r55498
"
"d18a96fb0ee00df4903f953b63145389e7974693","2011-01-24 12:41:02+00:00","TOOLS: Add better Code::Blocks support to create_project

- Update searchs path and library names to use the mingw precompiled libraries directly
- Enhance batch file to handle the same arguments as the MSVC one

svn-id: r55499
"
"03faae85517b9b5642d7ab9ccf1218e09d6b27c3","2011-01-24 12:41:16+00:00","LASTEXPRESS: Add Italian release (and update file dates for German and Spanish releases)

svn-id: r55500
"
"6dc0999c6d000c08175e961da7e19c1b9a68e4c8","2011-01-24 14:00:55+00:00","SWORD25: Cleanup

svn-id: r55501
"
"6ca13f926d6dbadf423ec71c26a21cfbae0dc5e7","2011-01-24 14:09:47+00:00","VIDEO: Don't fill empty sound slices at the end

svn-id: r55502
"
"9eea8c6bca530e48e8c1725b3829de189f2aec0e","2011-01-24 14:10:15+00:00","GOB: Wait for the exact moment of the video sound's end

This should fix all cut-off sound issues in Urban Runner

svn-id: r55503
"
"ffb3de5bc05cbc9ef1c7431bf43f157d30f17c00","2011-01-24 14:59:21+00:00","SWORD25: Fix some invalid writes / crashes

On my system, sizeof(png_uint_32) == 8, while sizeof(int) == 4.

svn-id: r55504
"
"3e29897bb72da519c9ff4aa04488fcb0fe8ba131","2011-01-24 16:06:27+00:00","VIDEO: Fix a gfx glitch

Visible in some Inca 2 videos

svn-id: r55505
"
"45a4dfa44d595d3c81858b46f9896fdbf6ea02ad","2011-01-24 21:12:44+00:00","MOHAWK: Improve support for installer archives (partial directory support)

svn-id: r55506
"
"2846ce14f35afc029fe058b3ed50c229ef856615","2011-01-25 00:32:48+00:00","HUGO: Move text arrays to a separate class

svn-id: r55507
"
"176e49975c52d3686b8391c4f76f1e0af04ce657","2011-01-25 00:50:26+00:00","GOB: Adding stubs for Addy

svn-id: r55508
"
"1a44ed588f86a6be2929f0232edbccd2ce535c03","2011-01-25 01:28:31+00:00","GOB: Some more Addy stubs

svn-id: r55509
"
"ccb1faef7eae4325a44f636c4c13f3eabd4b8e79","2011-01-25 01:58:26+00:00","PARALLACTION: Removal of unecessary returns and whitespace fixes to saveload.*

svn-id: r55510
"
"0fd380441a87249c467bb2648744b85d244ba6c8","2011-01-25 02:16:29+00:00","LASTEXPRESS: Add some subtitle support to Sound class

svn-id: r55511
"
"8f7418556a1e6dfd19c53ab44c7e567413df5aa0","2011-01-25 02:16:45+00:00","LASTEXPRESS: Fix typo in Francois logic

svn-id: r55512
"
"8db6eb7b87b11229df91f59a70c7d7820a696e9e","2011-01-25 02:17:05+00:00","LASTEXPRESS: Add per-entry sound stream (this fixes all dialog being cut as soon as a new sound is queued)

svn-id: r55513
"
"0b5af778b00e0908cad98843f9a58498b8a1f90c","2011-01-25 02:50:26+00:00","GOB: o7_draw0x8C is o7_getSystemProperty

svn-id: r55514
"
"c8997d0ef8714cd7a12b22626d102b0ceefcd5e4","2011-01-25 02:50:56+00:00","GOB: o7_draw0x44 is o7_displayWarning

svn-id: r55515
"
"c293eb60738c9f5941d011fdffe41a857f9f8d69","2011-01-25 02:51:26+00:00","GOB: o7_draw0xC4 is o7_opendBase

Not implemented for now, of course

svn-id: r55516
"
"a875901485145174d5ac8c04d8c5a8fb5cf73c08","2011-01-25 02:51:51+00:00","GOB: o7_draw0x90 is o7_loadLBM

Stubbed for now

svn-id: r55517
"
"64da68cb0d7f9f1090f7bb9def05c1b2aaa23937","2011-01-25 02:52:19+00:00","GOB: Adi 4 should get a Inter_v7 too

svn-id: r55518
"
"f9c54abee8b12cff17c14152c1feb1dbd03e74db","2011-01-25 03:11:27+00:00","LASTEXPRESS: Corrected format warning in state.h

svn-id: r55519
"
"d183a3618dad5643f418dbf9d3cf1a351e74df1e","2011-01-25 03:22:37+00:00","LASTEXPRESS: Fix accidental assignment in sound.cpp.

Checked with Littleboy that this was not intentional.

svn-id: r55520
"
"2ce333bf1615222b1492d2ccad19fc2b683ab66f","2011-01-25 03:44:07+00:00","GOB: o7_draw0xA1 is o7_getINIValue

svn-id: r55521
"
"e5304457b4aa17cd7a96f8404ecca7c3db152909","2011-01-25 03:44:34+00:00","GOB: Add o7_oemToANSI

I don't think that we'll need that :P

svn-id: r55522
"
"6400659ead45000485ddfbeb22ba9d48f1b7bde2","2011-01-25 04:25:06+00:00","LASTEXPRESS: Correct typos in Alexei logic and sound code

svn-id: r55523
"
"b52859323c68fa87a167fed8af5c8f3f945e6cd8","2011-01-25 08:24:57+00:00","LASTEXPRESS: Fixed Memory Leak in Subtitles.

Also, fixed minor uninitialised read in animation event polling.

svn-id: r55524
"
"e1a9c866bf40abf487030aca9fe8a5fa90cefe79","2011-01-25 10:21:44+00:00","SCI3: Fix script abort during startup on Big Endian platforms

svn-id: r55525
"
"c8f58b4e194fe7b8f9cc985505d7ba0dd34cfb6f","2011-01-25 11:01:51+00:00","GOB: o7_draw0x0D is o7_loadCursor

Not implemented yet, because they're in cursor32.dll as PE resources...

svn-id: r55526
"
"ff13458eb74348960baa852e0c6bdcdc97faf88e","2011-01-25 12:13:42+00:00","GOB: o7_draw0x57 is o7_intToString

svn-id: r55527
"
"0432ca6d0f4240b7e5640197f4fbce6d512b0f4b","2011-01-25 12:14:05+00:00","GOB: Add a FakeFileHandler

For temporarily storing save 'files'

svn-id: r55528
"
"d1b53b1b81c507153ac9bd8ac3fe643926e6364d","2011-01-25 12:14:31+00:00","GOB Add save stubs for Addy Junior

svn-id: r55529
"
"bf60f061052b1700038d2c7cc383d4a69390ae8c","2011-01-25 13:00:38+00:00","GOB: Add a workaround for taking the music sheet from Dr. Dramish's car

svn-id: r55530
"
"3e5cd6d9de56513edffb2026e4372cbce28f8244","2011-01-25 13:00:58+00:00","GOB: o7_draw0x8A is o7_findFile()

svn-id: r55531
"
"491393790dab28a6dbdae7a70aff9a9f09840d69","2011-01-25 14:12:45+00:00","SCUMM: Restore the missing copyright for the PE code (wrongfully removed in r27024)

svn-id: r55532
"
"f01b8b98a4108413333b039bce617803db3965ef","2011-01-25 14:19:52+00:00","GOB: Add a small manager for INI configs

svn-id: r55533
"
"e32c9a10bfdfc9989530be9b4751f1855480b933","2011-01-25 14:20:19+00:00","GOB: Implement getting/setting values from INI files

Setting is non-permanent for now

svn-id: r55534
"
"330acb21688c56140ff2e4f4303c6ac9be4d6e93","2011-01-25 14:20:47+00:00","GOB: Add a sanity check assert()

svn-id: r55535
"
"e3f1d020441eaf5018d34d7db7419737792b0047","2011-01-25 15:13:37+00:00","GOB: Add o7_zeroVar and partially implement draw0x89

svn-id: r55536
"
"a3baa1874a90093c3cbaa5abdbe3a82c131c6324","2011-01-25 15:14:07+00:00","GOB: Add a sanity check to o1_freeFont

svn-id: r55537
"
"b79743b2215a7a1b018e2969b3da78bffd488fdf","2011-01-25 17:35:53+00:00","MOHAWK: Read kLBEventNotified data after commands.

This fixes some pages in Maggie's Farmyard Adventure, at least.
Thanks to clone2727 for testing this.

svn-id: r55538
"
"fec516e2b05a85ea55922b72749e0c7c7e8f9a9d","2011-01-25 20:21:57+00:00","SCI: cleanup

svn-id: r55539
"
"177b656edfc04ad2f681b49487382afb8881fff2","2011-01-26 00:21:54+00:00","HUGO: Fix some save/restore issues

Invalidates current savegames! (now version 3)

svn-id: r55540
"
"04f971370c642aa30722af6ccad848ee99b5d835","2011-01-26 10:43:38+00:00","LASTEXPRESS: Add some more error handling to Savegame and Sound classes

- Add some const modifiers where applicable
- Add some missing casts

svn-id: r55541
"
"190bd60505e2ca0fb3c99f995d7b618915c895ad","2011-01-26 16:51:18+00:00","SCI: Make SCI3 propertyId endianness hack a bit cleaner

svn-id: r55542
"
"b13d6026c76ff0147de44630bf5659f8d97d6ccd","2011-01-26 18:40:28+00:00","MOHAWK: Detect 'The Cat in the Hat'.

svn-id: r55543
"
"e5f9eb30d36768352ebd677a0809bf30572e2053","2011-01-26 19:01:42+00:00","GOB: o7_draw0x93 is o7_setVolume

svn-id: r55544
"
"1686ecdf8395a511e93c9a69ef179403e3d17cf2","2011-01-26 19:02:20+00:00","GOB: Increase kEnvironmentCount to 20 for Addy

svn-id: r55545
"
"2c2476b203c10699973950f08f6d8a4b3866408e","2011-01-26 19:02:39+00:00","GOB: Add a small playTot change for Addy

svn-id: r55546
"
"a2afc0f4d19f8eff5e9ebc49d51035970d4bcb8c","2011-01-26 19:03:13+00:00","GOB: Check font index for kFontCount

svn-id: r55547
"
"f23b4af68214a4d08059353756e26a5ee54a0581","2011-01-26 19:03:37+00:00","GOB: Increase kFontCount for Addy

svn-id: r55548
"
"7a41cd7fa958c1dff2383c55af45ae2251ca7c5a","2011-01-26 19:04:03+00:00","GOB: Add stub save handlers for Addy 4 (Grundschule)

svn-id: r55549
"
"d71125dc214c122d753b95624077960df7e0bb8d","2011-01-26 19:04:24+00:00","GOB: Use a fake cursor for Addy for now :P

svn-id: r55550
"
"efdcf921ea60f33fb37802577b9e6b7c607b1bea","2011-01-26 19:04:42+00:00","GOB: Another fake file path

svn-id: r55551
"
"1d59d3ecb005efe1b866e75f26bbdcb81aed9ba0","2011-01-26 19:05:04+00:00","GOB: Another fake Addy 4 save handler

svn-id: r55552
"
"437a3eb63b97f7db06172eef0ad5a01134f5b07f","2011-01-26 19:05:36+00:00","GOB: Add 2 Addy 4 base fake save handlers

svn-id: r55553
"
"214d8f1e3e89fdf36585e070cbe5bc20b36d6b40","2011-01-26 19:13:53+00:00","MOHAWK: Introduce a new CursorManager for LB v2+ (they do not use exe cursors)

svn-id: r55554
"
"b0def1089238259aba6da3c839ac7bda689a3468","2011-01-26 20:03:12+00:00","HUGO: Ensure savegames are not impacted by unexpected ANULL actions, by replacing delEventType() and delQueue() in H1 Dos

svn-id: r55555
"
"dc31f4b3e2ed828fb992a0003bcef25a7077f4fb","2011-01-26 22:50:36+00:00","HUGO: Cleanup: Suppress an obsolete warning and a comment

svn-id: r55556
"
"b7a8444992b8f17ea553f9e2a2c7a9989e4f0ad6","2011-01-26 23:18:26+00:00","HUGO: As requested by D. Gray, use 'exit' (DOS) command in Win versions

svn-id: r55557
"
"d55626722eb53650bee43b1a5ed3f544824f2b7f","2011-01-27 02:57:07+00:00","AGOS: Fix Memory Leaks when playing Simon 2 Win.

These were identified with Valgrind.

svn-id: r55558
"
"861fab3fb16f3704b08f5dead562adc82c9a5550","2011-01-27 04:13:10+00:00","AGOS: Fix Memory Leaks in Feeble Files.

Found with Valgrind.

svn-id: r55559
"
"73a440cfe250e3a06c46e832eaf76b7f668b91e2","2011-01-27 07:58:57+00:00","DRASCULA: Fix Memory Leaks in Rooms Table.

Minor whitespace fixes as well.

svn-id: r55560
"
"a6e9fe69c368464cf57487b4f79f10a51e9622aa","2011-01-27 10:49:11+00:00","SCI: Set the printLang and parseLang selectors again when restarting, if necessary.

This sets the language again correctly to the language selected in the launcher when
restarting multilingual games.

svn-id: r55561
"
"e237ff362826e9f1fef982952f476a588dc7134e","2011-01-27 13:26:34+00:00","GOB: Some Addy gameflow stubs

svn-id: r55562
"
"20d74edf8b2d24be7f9c86d1e7f90eb46fe2efd4","2011-01-27 13:27:04+00:00","GOB: Add o7_draw0x59 stub

svn-id: r55563
"
"95ed10addee68cc91c2e2b8f2450b63022c61162","2011-01-27 13:27:29+00:00","GOB: Add SoundDesc::swap()

svn-id: r55564
"
"eb3667d7c9efcefe3a9e4e57edc3aefa603d6416","2011-01-27 13:27:58+00:00","GOB: Implement backuping of sprites, sounds, fonts in totSub

svn-id: r55565
"
"0760c929082f8a7d4fd99cf90d095d7b0ee4685b","2011-01-27 14:07:45+00:00","DRASCULA: Fix Memory Leak in drascula.dat Loading.

svn-id: r55566
"
"2126aa588f178f4b7a676120627cfb310565c0db","2011-01-27 14:17:59+00:00","SDL: Don't send key up events for special keys that are handled by handleKeyDown()

Fixes bug #3166522 at the SDL level (fix 1/2)

svn-id: r55567
"
"5b958eb0d17c744c5dda0ad4d7f01023f17f0061","2011-01-27 14:20:16+00:00","TOON: Check for the state of modifier keys (control/alt/shift) when handling game hotkeys

Fixes bug #3166522 at engine level (fix 2/2)

svn-id: r55568
"
"fb8b4e1016695c1ddb156d054f04e4d625b27f09","2011-01-27 18:43:02+00:00","HUGO: Handle mouse 'UP' events instead of 'DOWN'.

This fixes the multiple clicks on object + message reported by D.Gray

svn-id: r55569
"
"57dc8f6fc264597bbc80faba4a837f22ff145691","2011-01-27 19:20:27+00:00","MOHAWK: Add detection for the LB sampler

svn-id: r55570
"
"ecd2e0f3a04066abd0c4ca332c4d078f06d3b4b5","2011-01-27 20:38:58+00:00","GOB: Add sanity checks to Pixel and ConstPixel

svn-id: r55571
"
"b25a5d18628ef4febe48da00b4036a420b708eb5","2011-01-27 20:42:19+00:00","HUGO: Fixed crash when an incorrect hugo.dat file is found

svn-id: r55572
"
"6513748c460424bef3b2f95dba1648a6be39f72e","2011-01-27 20:50:18+00:00","GOB: Add Pixel::isValid() and ConstPixel::isValid()

svn-id: r55573
"
"261a640a9386f2504149b48b7518e3b501df6f47","2011-01-27 20:50:43+00:00","GOB: Stop drawing a letter on surface boundaries

svn-id: r55574
"
"03adf7fdf64cf9f739b2d78a613acec16165ed86","2011-01-27 21:12:27+00:00","GOB: Only draw text when coordinates are within the surface

svn-id: r55575
"
"67c057dc15f3e6c67d9d5fac7f93d6e50321413e","2011-01-27 21:12:34+00:00","MOHAWK: Allow videos to be paused individually

svn-id: r55576
"
"7baf4d2ed3f28532de8f6e0f0b720ac3113c16d5","2011-01-27 21:13:34+00:00","MOHAWK: Implement Stoneship chest puzzle

svn-id: r55577
"
"590ce4762e25bdf600b1ed59e258d6175de0cfe4","2011-01-28 01:04:42+00:00","DRASCULA: Fix uninitialized reads of mouse position variables.

svn-id: r55578
"
"e2abf3b000060fea2bf873644409a81849c181ca","2011-01-28 01:05:17+00:00","DRASCULA: Fix minor cut and paste error in Console 'room' command.

svn-id: r55579
"
"c17e3d38bd83eee6967d378a16be7222c07a33ff","2011-01-28 01:09:27+00:00","DRASCULA: Fix for Duplicate Registering of Archive.

A warning occurs that the archive, Packet.001 has been added twice.
This is due to a hack to get the detector priority listing correct.
This fix prevents this causing a multiple add of the same archive.

svn-id: r55580
"
"44035c303337832dba27688ff54bac9643c9f942","2011-01-28 02:30:25+00:00","DRASCULA: Remove unecessary destructor from ArchiveMan.

svn-id: r55581
"
"f7e1ed37628973d5dc515fdf4e2ce27fbc3e1e26","2011-01-28 02:56:07+00:00","COMMON: Fixed memory leakage in unarj readHeader().

This manifested in Drascula.

svn-id: r55582
"
"96174d6842fafe24afde9964e48967bc44b6badd","2011-01-28 08:07:50+00:00","DRASCULA: Fixed Code to allow Quit/RTL Function and avoid Memory Leakage.

A memory leakage was traced down to a failure to call the engine destructor.
This was due to the engine directly calling OSystem quit() i.e. _system->quit(), rather than
just allowing engine::run() to return.
Have removed this code and implemented the changes required to allow graceful Quit/RTL to occur.

svn-id: r55583
"
"e395aeff05e73162b39652148a650c03b0f98f4b","2011-01-28 08:37:27+00:00","MOHAWK: Removed direct OSystem Quit calls from Myst Mohawk Interpreter.

This avoids the same issue that caused leakage in other engines.

svn-id: r55584
"
"baf6af4fa6f47885b0ffa7355860464a5628bb10","2011-01-28 09:37:11+00:00","GRAPHICS: Rename JPEG::_str to _stream

We use _str to denote strings almost everywhere, so this
was a bit confusing. Another alternative would be to use _s.

svn-id: r55585
"
"96d91ec1822a8bf898d900792a69cffd2f898ada","2011-01-28 09:46:39+00:00","GRAPHICS: Turn sqrt(2) and cosine values into constants ;)

svn-id: r55586
"
"c44f9bdb1d5122f3f7b7f08a4ff51ca58d4ef4e1","2011-01-28 09:50:05+00:00","GRAPHICS: Make JPEG::getComponent error out if component was not found

svn-id: r55587
"
"a35a45aa2e2f1a31a819add3f9b090efa4adaa5d","2011-01-28 10:27:50+00:00","Patch #3149416: Support for linking with 'as-needed'

svn-id: r55588
"
"2187411977dc41911c6948b806401aa1330cae94","2011-01-28 12:35:20+00:00","SCUMM: Fix bug #3167036 - BluesBirthday: Crash in the demo.

svn-id: r55589
"
"dd7bc67f82179b40ad0118d3cb81a226e5e53a0a","2011-01-28 13:24:32+00:00","Replaced char* with Common::String in balloon code.

svn-id: r55590
"
"7760628bdba085f57711b18c3fa9fdff6c12a38b","2011-01-28 14:19:39+00:00","PARALLACTION: Flexible monologues in BRA (patch #3021740 by fuzzie)

Some dialogue answers are set to the literal 'null', which is used in NS to
simulate a fixed monologue ('null' instructs the engine to jump to the first
entry in the list of available questions, which is always made of a single
item in this case).
BRA has flexible monologues that depend on the game state, so this patch goes
and checks all the available branches before picking the correct one.

svn-id: r55591
"
"a2f960017931ad871c37bf1d9c197418aa8afca9","2011-01-28 16:13:12+00:00","SWORD25: Disabled the mechanism which precaches all of the game's resources on startup.

This reduced the initial memory used by 100MB for me, though the game keeps allocating
new resources in each scene without deleting them, because of the missing functionality in
getUsedMemory(). This change also slightly reduces the loading time on game startup.

svn-id: r55593
"
"c63ff39a7f79df2cdac8b28d8c0e0220b3574d11","2011-01-28 16:54:55+00:00","SWORD25: Resources are now cleaned up correctly

The original checked the total amount of memory occupied by all resources. This has been
changed to a maximum number of simultaneous resources instead, so the game resources
are no longer leaked. Also disabled the unused or debug functions getUsedMemory(),
setMaxMemoryUsage(), setMaxMemoryUsage(), isLogCacheMiss(), setLogCacheMiss(). Performed
some cleanup on code related to the above.

svn-id: r55594
"
"7ed5a928231f87e01ef717316c2f949c62fe9d2d","2011-01-28 17:02:02+00:00","SWORD25: Removed some more unused/unimplemented debug code

svn-id: r55595
"
"eb59444d1e4f2c986a6fe05b9d6be691ae2e28bd","2011-01-28 17:03:15+00:00","SWORD25: Removed some now unused variables

svn-id: r55596
"
"5978d8f63d5f67ece8d275f7959d99ccc92ac171","2011-01-28 17:29:08+00:00","SWORD25: Marked several unused LUA callbacks as dummy functions. Some cleanup.

svn-id: r55597
"
"cfca829e46d40381142c5f024d7f3c555a34564f","2011-01-28 19:54:48+00:00","HUGO: Add a function to display exit hotspots in God Mode

svn-id: r55599
"
"42670975acf72ca52bbf73c0f0c0295b07c0a50a","2011-01-28 20:52:52+00:00","SWORD25: Removed a lot of debug/unimplemented/unused functions

svn-id: r55600
"
"cf4f041c636fa128717d3758d664b8b476dffbee","2011-01-29 07:20:26+00:00","PARALLACTION: encapsulate dialogue state changes to aid debugging.

svn-id: r55601
"
"6d4d253ec44408006b37f5e08d9c284618175ff9","2011-01-29 07:20:42+00:00","PARALLACTION: Improve dialogue debug output.

Print out the current question or the available answers when debug level is 9.

svn-id: r55602
"
"d39d75779e876154ac94e6626029de69bda0d354","2011-01-29 07:20:57+00:00","PARALLACTION: Don't show 'null' answers in dialogues.

Skip a 'runanswer' state when the text of the only answer available is 'null'.

svn-id: r55603
"
"c3698a2cd5c98bf69ed7eb5425398f15f3453021","2011-01-29 07:21:13+00:00","PARALLACTION: Clarify strategy for choosing (answer) dialogue paths.

svn-id: r55604
"
"e1046d3eae8207bc3c65cd6a558dd20191aede3c","2011-01-29 07:21:31+00:00","PARALLACTION: Simplify text comparisons in dialogue code.

Encapsulate text comparison into string owners and removed some ugly
double negative logic.

svn-id: r55605
"
"bcd18232ad80097f45181594628eb193700b93e0","2011-01-29 07:21:48+00:00","PARALLACTION: Cleanup dialogue code.

Hide mood and balloon winding extraction into Question and Answer objects.

svn-id: r55606
"
"2856e959be74d7ec062d48f6560d33c227c6a6b3","2011-01-29 07:22:04+00:00","PARALLACTION: Cleanup dialogue code.

Turned 'no answer selected' into a constant.

svn-id: r55607
"
"bf01059be1c8d01e66bce0b2facce78b13818b42","2011-01-29 08:08:58+00:00","PARALLACTION: Add default case to silence GCC warning.

Not that I understand exactly what this function does, but since it's
a piece of debug code I figure I don't really have to.

svn-id: r55608
"
"128e36275de02f9895a8beec5450beaffd94304a","2011-01-29 09:56:23+00:00","GOB: Remove unnecessary semicolon

svn-id: r55609
"
"d3ae7da133fa0a299145ed37b2825a2b21842b36","2011-01-29 10:42:40+00:00","PARALLACTION: Cleanup dialogue code.

Shorten long lines to increase readability.

svn-id: r55610
"
"865f12a6431e97ecaaa2b488eadc7c70bf193137","2011-01-29 10:42:56+00:00","PARALLACTION: Use CursorMan to control cursor instead of backend functions.

svn-id: r55611
"
"6ed7f484422548c9d3907b0bc91311dc61d2746e","2011-01-29 10:49:15+00:00","MOHAWK: Implement more Stoneship puzzles, up to linking back to Myst

svn-id: r55612
"
"1da472a2db3b5ec721c1d363e0e974c58a9cf50b","2011-01-29 10:56:34+00:00","SWORD25: Translated some comments, and removed some superfluous ones

svn-id: r55613
"
"946bdcd3898deeebf24f85d2a4377b244729e74d","2011-01-29 14:10:47+00:00","HUGO: Display all (clipped) object zones in God Mode

svn-id: r55614
"
"fad6d32e021459a8219c1d1e3782fed2ddb48091","2011-01-29 15:27:30+00:00","NEWS: Add proper punctuation.

svn-id: r55615
"
"896b87c71016b41a2836e4eca792d856b20929ca","2011-01-29 16:02:20+00:00","TOON: Bug #3166570 fixed. Magnifier effect when selecting Enigma book

Bug #3166570: 'TOON: Wrong mouse-cursor for Item 'Book-Enigma'

svn-id: r55616
"
"83866978be7c7b3db33c28cdf04a0201f0df1432","2011-01-29 16:19:55+00:00","TOON: Reenable keyboard events

Was disabled when some sticky keyboard flags were activated

svn-id: r55617
"
"f050e2d66fd384c2d102152aa9371474b08e8664","2011-01-29 18:18:29+00:00","KYRA: Close Memory Leaks in Kyra 3 (Malcolm's Revenge) Menu.

svn-id: r55618
"
"450dac35c714c5e5bf1f4ef66b2d2acda4b45a55","2011-01-29 18:20:38+00:00","KYRA: Fix Valgrind Uninitialized Memory Read at end of VQA Playback.

svn-id: r55619
"
"2cc3bd880f778bbec64f4cf080995547302cac5c","2011-01-29 18:40:04+00:00","KYRA: Clean up main menu code in Kyra2/Kyra3.

svn-id: r55620
"
"875a840a7a873a8a624bfc94e3c2f3e3a8b7b782","2011-01-29 18:42:33+00:00","TOON: Fixed crash of bug #3166533

Bug #3166533: 'TOON: crashes when leaving room'

svn-id: r55621
"
"e2b3ac9f2830ca070d2637024c2b80b800190edb","2011-01-29 18:45:45+00:00","MOHAWK: More Stoneship progress, hologram viewer and drawers

svn-id: r55622
"
"d925e38acfaa646e7191a4fd6e5197f323df491d","2011-01-29 19:03:50+00:00","KYRA: Hopefully fix valgrind warnings in the HoF intro when text is disabled.

svn-id: r55623
"
"96f4cc4b8a4273ec728419645363952d35f8ebe0","2011-01-29 20:12:27+00:00","TOON: Pathfinding & walking improvements

Use direct line path if possible
Smooth facing direction to avoid flickering (entering zanidu shuttle for example)
Fix possible lockups

svn-id: r55624
"
"7765c245588ffb8fd4007efcbf172299a40a0c7d","2011-01-29 20:59:46+00:00","TOON: Fix some palette issues

- In fade out when leaving certain rooms
- When loading a game in a cutaway/closeup state

svn-id: r55625
"
"c450ac28e9031e35a93415dab29f77962b97d6a9","2011-01-29 22:15:57+00:00","TOON: Add workarounds in transformed barn scene

Drew does not disappear anymore in the barn when filling his can.
Slowed down the talk animations a bit

svn-id: r55626
"
"14678f059b65e9e5eb3704bde557d8c4d76063f3","2011-01-29 22:44:06+00:00","GOB: Move OpcodeFunc's return flag into its parameter

To make the meaning of the flag more clear and make the func
opcodes more similar to draw and gob opcodes.

svn-id: r55627
"
"05d5d64d6c108bcf57e67ff3976c1cd0324a30ef","2011-01-29 22:44:36+00:00","GOB: Rename 'skipPlay' to 'function' in playTot

svn-id: r55628
"
"0c3a33c354c027ee238186794d96c3047d0a4ce2","2011-01-29 22:45:15+00:00","GOB: Change _curTotFile and _totToLoad into Common::String

svn-id: r55629
"
"ce3d4b5d1b06644a210fd7198373488ad4c8cdf4","2011-01-29 22:45:51+00:00","GOB: Add GobEngine::isCurrentTot()

svn-id: r55630
"
"9b9c34a378be4f1964d97f5a15aa1ac5f7c54ee6","2011-01-29 22:46:16+00:00","GOB: o7_draw0x59 is o7_callGroup

svn-id: r55631
"
"b54416b46ee0d26fd39adbfcaba1a451f6293236","2011-01-29 22:46:41+00:00","GOB: Stub o7_loadGroups

svn-id: r55632
"
"40bf0286a1054b09eeb95445499518f7c84aaa04","2011-01-29 22:47:14+00:00","GOB: Rename Script::evalBoolResult() to Script::evalBool()

svn-id: r55633
"
"65bc46d3ab7ba1102c46c475bb145a4c64403109","2011-01-29 22:47:53+00:00","GOB: Add Script::evalInt() and Script::evalString()

svn-id: r55634
"
"d2c9893327891a6cc1c2402593c1b8f62c650b7e","2011-01-29 22:48:18+00:00","GOB: Remove the long obsolete inter_execPtr

svn-id: r55635
"
"ffc4af820f9dbdb6af75ce15c56e3677db3af567","2011-01-29 22:48:44+00:00","GOB: _environments doesn't need to be a pointer

svn-id: r55636
"
"993a543432e57a519bd660902fc64d52dff41b45","2011-01-29 22:49:15+00:00","GOB: Add Inter_Playtoons::getFile()

svn-id: r55637
"
"ec288c0603ab819061a329db1f290849bfd1e2ae","2011-01-29 22:49:40+00:00","GOB: Rename loadGroups/callGroup to loadFunctions/callFunctions

svn-id: r55638
"
"078162c665bfb7cbb481424acd7fe49772c8a194","2011-01-29 22:50:11+00:00","GOB: Add setExtension()

svn-id: r55639
"
"4e6628038850f423b8d9673f25c5b9a63a10b9e0","2011-01-29 22:50:41+00:00","GOB: Implement o7_loadFunctions and o7_callFunction

svn-id: r55640
"
"9c17cedd406d5a05cbb4c544eeb426c45d93f004","2011-01-29 23:03:08+00:00","TOON: Bug #3124518 with disappearing inventory items fixed

Bug #3124518: 'TOON: loss of inventory items in Bricabrac's machine room'
Was caused by recursive walkTo that were not canceling out.

svn-id: r55641
"
"98e329bbd190a687df6b6728e523fd315f24a694","2011-01-29 23:05:12+00:00","HUGO: Cleanup drawRectangle() and keyHandler()

svn-id: r55642
"
"d635c7b950448c312434a23f96a428a11d04bff3","2011-01-30 00:01:43+00:00","GOB: Fix Inter_v6::probe16bitMusic()

svn-id: r55643
"
"0793e5c0a3ac67f667773ec8ae489ad7531bdeb3","2011-01-30 00:02:14+00:00","GOB: Adibou has background atmosphere

svn-id: r55644
"
"c498d70dd206432fbceffaa4637b520b936cf3f5","2011-01-30 00:02:42+00:00","GOB: Change SPRITES_COUNT into a const

svn-id: r55645
"
"4588d4cc97aafad974651a50cb8d58d7123dde54","2011-01-30 00:03:12+00:00","GOB: Add Inter_Playtoons::readSprite()

svn-id: r55646
"
"e4a9cafab8a620163f2a908265b6fb75171a3c2e","2011-01-30 00:03:35+00:00","GOB: Add a sanity check to the copyFile stub

svn-id: r55647
"
"fc59e0b6b31d12d11cf55fa64074cd8ee2b77642","2011-01-30 00:04:04+00:00","GOB: Add o7_playVmdOrMusic

svn-id: r55648
"
"01c32f7287481e6784619167d5de344fe8209c12","2011-01-30 00:44:51+00:00","TOON: More Drew visibility fixes

In the castle, Drew disappeared if you clicked twice on the closed door.

svn-id: r55649
"
"5934ccd184a302720103f7e803bdf4c9157db54b","2011-01-30 02:18:53+00:00","TOON: Fix the last known z-order issues

Rewrote the Z-order management, it's now very close to the original code

svn-id: r55650
"
"aba8451744c692dc2108e2dd860731d46ab207e8","2011-01-30 07:53:44+00:00","HUGO: Fix a crash in maze and a bug in lineHandler()

svn-id: r55651
"
"a95f69c502d4198e9dfd5840d97e745a7d461781","2011-01-30 12:33:39+00:00","MOHAWK: Implement Stoneship cloud orbs

svn-id: r55652
"
"c88ee19478a84334dc1703212ea306ec7bc9dc1b","2011-01-30 13:14:32+00:00","GOB: Stub some Adibou mult stuff

svn-id: r55653
"
"f8d61c9e55c4ec569a8709313d3a6aee64469f67","2011-01-30 13:14:54+00:00","GOB: Work around the unimplemented copyFile :P

svn-id: r55654
"
"3cd1ac9ca6cd48a5ba40f8f1e225776d22fb5659","2011-01-30 13:31:13+00:00","TOON: Add coordinates clamping for safety

In some rare cases, Drew position is outside the valid area.
Made sure it does not crash in these cases.

svn-id: r55655
"
"b43fae5c1800900e1aab117bbd8f91df1f22a2a3","2011-01-30 13:44:01+00:00","MOHAWK: Myst, display a warning when trying to play a movie backwards.

svn-id: r55656
"
"0b69b6a842b3527a6ad73f99d6840d7b7c05b4bf","2011-01-30 13:54:39+00:00","MOHAWK: Myst, pass the playback direction from the calling script to the movie player.

svn-id: r55657
"
"7d5dcc2a0a97e902c6ef68bd98c5045ba1ca8131","2011-01-30 14:41:27+00:00","SWORD1: Fix possible uninitialized memory read in Screen object.

This was detected during playtest with Valgrind during Act 5 (Spain).

svn-id: r55658
"
"b644c6d466621edc532ba9edb0bed5fbf09fe724","2011-01-30 14:53:47+00:00","SCUMM: Remove direct usage of OSystem quit() function in SCUMM engine code.

This would cause leaks, but occurs in development code only.

svn-id: r55659
"
"ec885e5665b662f5c531d790e80fd064b3c4c428","2011-01-30 16:50:55+00:00","SCUMM: Fix Valgrind mismatched delete errors in SMUSH channel base class.

This was due to the SMUSH channel base class using new/delete to manage buffer, but the imuse_channel and saud_channel classes which subclass and override this using malloc/free.
The more C++ solution of moving all to new/delete was tried, but the buffer is passed into a MemoryReadStream and free()'d there, so all classes have been moved to malloc/free instead.
This is not a critical problem as the buffers are byte primitive type anyway.

svn-id: r55660
"
"867c0d9645a6475e000cd7f49d72450517aea9aa","2011-01-30 17:28:35+00:00","COMMON: Add an erase method which takes an iterator to HashMap.

Currently there is no iterator returned from this method, to have some
similarity to associative containers of the STL.

I also 'added' one unit test for this method, which is basically just
a copy of the HashMap::erase(const Key &) test with the required adaptions.

svn-id: r55661
"
"5257d91e99775c583f998a2508011ebd4a372fec","2011-01-30 20:21:45+00:00","TOON: Fixes two movie issues

- Can't skip the videos with left button anymore, now the Nefarius video on the
TV is played normally and not skipped.
- Last video playback 2x too big in height.

svn-id: r55662
"
"2e42c2d11d27ae51431a7c287fab061fca38e23c","2011-01-30 20:34:47+00:00","SWORD25: Some translations, and a bugfix. Disabled a hack.

Translated some comments, and pushed the indirect rendering define to the header
file, so that the engine won't try and update the screen with direct movie rendering.
Also, the thumbnail hack has been disabled, as it doesn't really work (at least not for
me: all the thumbnails are gray)

svn-id: r55663
"
"9d6e398e74348d397e99915b20d96cd06e69ed15","2011-01-30 20:36:17+00:00","SWORD25: Added alternative code for video frame blitting (currently disabled)

svn-id: r55664
"
"77d2110101c06022e80968d0e01c5d664b2ef0a6","2011-01-30 20:37:59+00:00","MOHAWK: Implement Stoneship telescope

svn-id: r55665
"
"d4e1260b7e8363fba9e920ba2f3e301a26b86239","2011-01-30 20:39:02+00:00","SWORD25: Some optimizations to the Theora decoder

- Optimized and cleaned up translateYUVtoRGBA()
- Disabled a lot of seeking-related functionality
- Replaced some calloc() calls, used for audio buffer creation with malloc()

svn-id: r55666
"
"b7362876dd72ba5889cb5c6e12e1ff4e6e8f9c28","2011-01-30 21:00:23+00:00","SWORD25: Disabled the video save/load code, and made it error out instead.

Videos are never saved or loaded, thus when this happens, it probably indicates a game bug
or a corrupted saved game

svn-id: r55667
"
"c7808b90919201f6aa7e98e971d6e64fa43572db","2011-01-30 22:42:37+00:00","MOHAWK: Handle kLBAnimOpSetTempoDiv better.

svn-id: r55668
"
"a07d37d3a5cefad04ca1d7797f8ad9dfe6c2bb47","2011-01-30 23:08:05+00:00","HUGO:

- Replace several char* by Common::String
- Fix a bug in showDosInventory()

svn-id: r55669
"
"785f1776c4e88f5f48ad91d20fdf45874b74f5ad","2011-01-30 23:19:30+00:00","HUGO: Fix warning reported by GCC

svn-id: r55670
"
"9573b1d2f54818f9bdac4a91e0a90b306ade7810","2011-01-30 23:21:40+00:00","TINSEL: Memory Leak Fix in Coroutines.

This fixes the leak from the COR0_BEGIN_CODE macro's CoroContextTag allocation.
Setting the _sleep value to negative values prevented the deallocation of these.
Have tested for obvious regressions, but a full DW/DW2 playtest should be done to confirm that this doesn't cause any issues.
Thanks to fingolfin for indicating this solution.

svn-id: r55671
"
"c11fdabab9d694d37f53e68d5e288133cfc3dcfd","2011-01-31 07:44:40+00:00","TEENAGENT: Fix Memory Leaks.

svn-id: r55672
"
"a256b74e0aa870cee4342826d6cc80183647cc7b","2011-01-31 08:51:37+00:00","TEENAGENT: Further Memory Leak Fixes.

svn-id: r55673
"
"90d58cf487c8d2f63a6aeff952b02b410e320b19","2011-01-31 10:46:52+00:00","SAGA: Rewrote the MacBinary resource loading code

This simplifies the overall code and makes it easier to understand. Also, a bug with the
speech in the MacBinary packed version has been corrected, so there are no more clicking
sounds before each sample.
The Common::MacResMan code isn't really useful here, since it doesn't expose the offsets
and sizes of the actual files, which is what is needed in SAGA.

svn-id: r55674
"
"0f0dbe7b7871079c1bd6cc5e2c85fe4ca1629942","2011-01-31 10:49:03+00:00","GOB: o7_draw0xC4 is o7_closedBase; o7_draw0xC6 is o7_getDBString

Stubbing those for now

svn-id: r55675
"
"b187551a019c56f85972abf8514f878c9c4dc6cf","2011-01-31 10:49:43+00:00","GOB: Add support for dBase III files

Implementing o7_opendBase, o7_closedBase and o7_getDBString

svn-id: r55676
"
"e0314f9ecd22504290ca3fb1d6e6b6db30dd6719","2011-01-31 11:36:14+00:00","SAGA: Turned several unnecessarily inherited classes into typedefs

svn-id: r55677
"
"8bd7ace4d277e68ee0cdf7d6ab275d08d432ddde","2011-01-31 11:40:40+00:00","SAGA: Split the resource patching code into appropriate game-specific resource methods

svn-id: r55678
"
"83d7ac7e1f61f2cdf50024a234ffd5e996855f44","2011-01-31 11:45:24+00:00","SAGA: Fixed some typos, and removed an obsolete comment

svn-id: r55679
"
"7cc8d8d40315bdc55a177782af067dda6fd416e3","2011-01-31 12:01:24+00:00","SAGA: Fixed compilation

svn-id: r55680
"
"9810ec14420466830a182d17e384c2037ca0034b","2011-01-31 13:28:55+00:00","GOB: Make Font::_itemSize unsigned

This fixes a font drawing error in Adibou.

svn-id: r55681
"
"a8d62921c74fb08c795754e8e819d50fbd75990d","2011-01-31 13:29:19+00:00","GOB: Fix text end positons for non-monospaced fonts

Fixes Adibou's recipices.

svn-id: r55682
"
"dce4f404e6639861bc1a4ec1c26b9bfadeaa538d","2011-01-31 14:05:47+00:00","SAGA: Fixed compilation with MSVC

svn-id: r55683
"
"7cb4b49db961590700d6181da80d73201d76f053","2011-01-31 14:08:33+00:00","GOB: Fix a compiler warning

svn-id: r55684
"
"fc02bd37221f07646388fb2eb128f95a46ef6dd5","2011-01-31 15:05:45+00:00","DRASCULA: Fixed a warning

svn-id: r55685
"
"d45a2a97a3fee377f72e81da65f42925038450a5","2011-01-31 15:25:29+00:00","TEENAGENT: Hopefully fixed an issue reported by Valgrind (found by digitall)

svn-id: r55686
"
"4a07ae68291bf0fde9b207af9b8b5277fb5049e5","2011-01-31 16:11:49+00:00","SAGA: Simplified loadActorResources() and removed the unused _disabled field

svn-id: r55687
"
"309cb47572e602fbdecb3a6bfea789f50df7c4f3","2011-01-31 18:03:27+00:00","MOHAWK: LB anim sound improvements.

The parent animation now keeps track of sounds, and animations don't
emit a done event while their sounds are still playing.

svn-id: r55688
"
"250f5a97fa8546bf555edfb4fc6cfe13d05976c7","2011-01-31 18:18:39+00:00","SCI: Add missing initializations

_resourceData, _imageStart, _audioStart and _audioLen

svn-id: r55689
"
"1799c4f04507e46f30d8321447061a7f93d5dcda","2011-01-31 18:22:20+00:00","Hugo: Some cleanup

svn-id: r55690
"
"b8743962198622417fa34873a866fbe9e1d50675","2011-01-31 20:42:16+00:00","GOB: o7_draw0x45 is o7_logString

svn-id: r55691
"
"a29282eefd6de551efc70317e3402531c3518ecb","2011-01-31 20:42:41+00:00","GOB: Fix last updated month's range

svn-id: r55692
"
"1c1cfaf867673226337a7d8d6e30a83304124e09","2011-01-31 20:43:04+00:00","GOB: Set the language before opening the database

svn-id: r55693
"
"a3a51efa807843993dc31fdfe5b5b5a6efc321fb","2011-01-31 21:01:50+00:00","GOB: Actually, draw opcode 0x90 is loadImage

Not just loadLBM. The image can be a TGA, LBM, BRC, BMP or JPEG.

svn-id: r55694
"
"5c1e21818ae85a97dbf0bb10054af6fca341ccfb","2011-01-31 21:02:13+00:00","GOB: o7_draw0xA4 has something to do with LBMs, though

svn-id: r55695
"
"4c8a9ab24ae17d34f9e7323d7b83c77b8ac68ece","2011-01-31 22:45:51+00:00","SCI: Add support for Mac SCI1.1+ resource compression

Mac SCI1.1+ games should now start up. QFG1 and Hoyle4 are playable. GK1 starts its scripts, but errors out soon after. There are still some View bugs with each (somehow, view decompression seems to be adding a blank line after each line?).

*Much* thanks to Walter for his help.

svn-id: r55696
"
"956dc54e3d14fe7ae113ffa3d535fdc64f684616","2011-01-31 23:09:22+00:00","SCI: Update the Mac version detection comments

svn-id: r55697
"
"e2d3521d7daf3a7f4caa994ada46a777b800f875","2011-01-31 23:10:18+00:00","MOHAWK: LB detection/path updates.

Mark the v2.9x games as v3, mark Rugrats as v4, add detection for
CarmenTQ and add its install directory to the path.

svn-id: r55698
"
"c0ce8a839e20a2bcce6009aef492e5959d9c6b5f","2011-01-31 23:19:00+00:00","Silenced some MSVC warnings

svn-id: r55699
"
"088b5f774382b6fe66fcfdeb78461d0053969a00","2011-02-01 00:08:12+00:00","HUGO: Use a separate thread for honker player and fix ticks per seconds

This fixes the speaker music stopped by message boxes, and the speaker music itself.

svn-id: r55700
"
"403a33b11c797ba628a13de96fa9b72847e06d1a","2011-02-01 02:47:24+00:00","MOHAWK: Add detection for The Berenstain Bears Get in a Fight

svn-id: r55701
"
"e47ac9f9375cf9591327bea6215fa8d3e219a62b","2011-02-01 02:54:51+00:00","MOHAWK: Add detection for Arthur's Computer Adventure

svn-id: r55702
"
"6ae0198ae8ff6c6d736f1bceb74df5226c6bdff3","2011-02-01 03:00:42+00:00","MOHAWK: Add detection for the Mac LBSampler v3

svn-id: r55703
"
"ac4bf4ffb88a9ded5176df32ac5ea2f2790c432d","2011-02-01 03:05:18+00:00","MOHAWK: Add detection for the LBSampler v1

svn-id: r55704
"
"1ac0680a77df8ee59ba2435362bb620ac2bf6e97","2011-02-01 03:50:29+00:00","SCI: Fix SCI1.1+ Mac views with uint16 rle lengths (thanks, Walter)

svn-id: r55705
"
"4d094feb3a4b98d8e82cf8b613ef49b1db99af1b","2011-02-01 12:57:34+00:00","MOHAWK: Allow mode changes from LB's debug console.

svn-id: r55706
"
"4ea38d3f33bb3ce87fd2d7be7c0d9e0edace7cae","2011-02-01 13:39:24+00:00","MOHAWK: Remove broken LB anim items stopSound calls.

svn-id: r55707
"
"26f5523156efd1ec98ea85a5ce72cfa0cb3453c0","2011-02-01 15:17:39+00:00","SCI: Mac SCI1.1+ games can use SYNC as the resource type for sync resources too

svn-id: r55708
"
"ee200c946dd66cee714855005aa16a1b488ebfce","2011-02-01 18:09:01+00:00","MOHAWK: Add LB poetry mode logic to updatePage.

svn-id: r55709
"
"31fc032c275a9f3a5641b7cfac92a07237fd7be5","2011-02-01 20:45:22+00:00","HUGO: in the menu, show modified button before closing the menu, with a short delay.

Thanks _sev for the help!

svn-id: r55710
"
"e1bdfe16e38e6ef66ab6141d63140aec162cc132","2011-02-01 21:15:26+00:00","SCI: Make Hoyle4 workarounds without names so they work in the Mac version (that has no class names)

svn-id: r55711
"
"40a9b710a50417c09c62e9861994489b2335e62a","2011-02-01 22:00:37+00:00","MOHAWK: Handle some LB script entry params.

svn-id: r55712
"
"22f87250e990da409b049a0f57625692f16a867a","2011-02-01 22:00:57+00:00","MOHAWK: Handle a few more LB notify opcodes.

svn-id: r55713
"
"7ad42416499a73198939a92009d791e29bff5ca0","2011-02-01 23:26:54+00:00","TOON: Remove misc/ from paths since it's in global folders

Caps'ed the filenames, even if it should not matter normally

svn-id: r55714
"
"1e14752d4d748d03b2d01317c6e3ac4181126274","2011-02-02 00:23:46+00:00","SCI: Add support for Mac audio36/sync36 resources in resource forks

svn-id: r55715
"
"a6891a4372ec267fec31e082b66f87d0dcb82880","2011-02-02 02:20:25+00:00","SCI: Fix Mac sync resource support

svn-id: r55716
"
"e3713746a0063746e0207ba469561a3dae88e51f","2011-02-02 14:15:13+00:00","GOB: Fix Databases constructor

Ooops, a leftover I forgot to remove.

svn-id: r55717
"
"8afafd89eb3ee1c343a9d6d05a4cf6d1250ccbd3","2011-02-02 14:36:09+00:00","MOHAWK: Fix GCC-3 cast warning.

Seen with a number of buildbot chains.

svn-id: r55718
"
"47b2611f50590f949af021a98cd5a3329b0374aa","2011-02-02 14:52:02+00:00","SCI: Add comment about GK1 Mac using kSetFontRes

svn-id: r55719
"
"3c04db1ebff91fc4ec26ab8fd56e6c85d1390afc","2011-02-02 15:21:24+00:00","SCI: Set Mac cursors as a non-compressable type too

svn-id: r55720
"
"24e983610dfb118c943d6a1867bf3ea5d81e18e4","2011-02-02 15:33:33+00:00","SCI: Fix GK1 Mac views, the game now starts

svn-id: r55721
"
"a4a09ac2845f3bf4d3ba5985285f9b393546da66","2011-02-02 15:35:05+00:00","SWORD25: Added a cache minimum and maximum limit, so that the resources loaded will always be inside these limits. Resources can now be forcefully unlocked when the upper limit is reached

svn-id: r55722
"
"a86cb87b98f0ec904dcc8e46b5b2c4b3d2f81aca","2011-02-02 15:43:45+00:00","GRAPHICS: Implemented a PNG decoder, and set it as default for the sword25 engine

libpng is still needed for PNG encoding (for thumbnails in saved games of sword25), but
since we'll probably drop support for the original saved games anyway, the PNG encoding
code will ultimately be removed

svn-id: r55723
"
"f1f86646def1b5f50a127331bdb2bc8e56592b62","2011-02-02 16:15:49+00:00","SCI: Fix SCI32 Mac pictures

svn-id: r55724
"
"d3e30f303896ab0fd075fb4537343e591372f387","2011-02-02 16:22:58+00:00","SCI: Fix SCI32 Mac fonts

svn-id: r55725
"
"e6f2f7e615ded18db50b878ac6cbe27b318d0218","2011-02-02 16:40:39+00:00","GRAPHICS: Updated the copyright information regarding LodePNG. Removed the obsolete reference to ysflight, as no code is actually used from or based on that project

svn-id: r55726
"
"076b9c9e534a1c83969a44d6893e56deffb4b6c1","2011-02-02 16:48:04+00:00","GOB: Remove the vidMode parameter from Video::initSurfDesc

svn-id: r55727
"
"113d5a5a9a633c7218b72328c4ad892a015fbed6","2011-02-02 16:48:46+00:00","GOB: Make flags optional in Video::initSurfDesc

svn-id: r55728
"
"812680d187e1e0802a383d374e8370d04477ffe9","2011-02-02 16:49:20+00:00","GOB: Rename Draw::kSpritesCount to Draw::kSpriteCount

svn-id: r55729
"
"b9b7b449b90f4bdb1a3ef5bd3166cb74574c6682","2011-02-02 16:49:49+00:00","GOB: Stub o7_loadImage further

svn-id: r55730
"
"729be647a03970710d8dc15f3105f581abb4bb27","2011-02-02 16:50:23+00:00","GOB: o7_draw0xA4 is o7_loadLBMPalette

Stubbing that one for now.

svn-id: r55731
"
"63c6d4432c2e7a032875c9b82a798f45314350ee","2011-02-02 16:50:57+00:00","GOB: Implement LBM loading

svn-id: r55732
"
"3d0edd71c9f43c0888fa7ea1bbd4f33eba4eb953","2011-02-02 16:51:31+00:00","GOB: Implement o7_loadLBMPalette

svn-id: r55733
"
"fed0adacb7fd063e0d2666f52550a105cef8b8d0","2011-02-02 17:03:14+00:00","GOB: Close the just ended live video, not the first one

svn-id: r55734
"
"1d38568bc133aaba001912f5c2e746fa0ee2d29a","2011-02-02 17:28:28+00:00","GOB: Fix detection of JPEG images

Thanks, clone :P

svn-id: r55735
"
"832cfddf341345554967079374c553ee1822bb5b","2011-02-02 19:32:04+00:00","SWORD25: Cache related changes

- Increase the resource cache limits
- Added a check before forcing resources to be freed
- Only force free image and animation resources, with a warning. It seems like there is
a bug in the resource reference code and several bitmap resources are not freed - added
a FIXME
- Clarify that initializeAnimationResource() is used with XML resources

svn-id: r55736
"
"c1967c1a0a4ca016b6dceff2a911faba7ace0694","2011-02-02 19:52:47+00:00","GOB: Add o7_gob0x201

svn-id: r55737
"
"c3e7b03b4632ee82e4744aa2ce9998005a61713b","2011-02-02 19:53:22+00:00","GOB: Add o7_findCDFile

Stubbing that for now

svn-id: r55738
"
"b9b8b4d3eb9cdd280bf0c1162a93087e4cb8f876","2011-02-02 19:56:24+00:00","GOB: Oops, set the correct opcode :P

svn-id: r55739
"
"441c5e02111461e901f1f886f62e63f3afb131e3","2011-02-02 21:05:38+00:00","SCI: Fix memory leaks in GfxRobot

svn-id: r55740
"
"426354953618135c0cffd6e9f34caf606066e363","2011-02-02 21:12:51+00:00","HUGO: 'Constify' engine as much as possible

svn-id: r55741
"
"2f08dcb667a0c577d6c18552e0aa896b2ce4e89b","2011-02-02 21:18:10+00:00","GRAPHICS: Fixed a bug with indexed PNGs in the PNG decoder (a byte can't hold 256 entries)

svn-id: r55742
"
"cf39749dcb299541549195b6d172263a3115714c","2011-02-02 22:26:05+00:00","IPHONE: Fix Unsigned to Signed Comparison Compiler Warning.

svn-id: r55743
"
"c62e50789064615d5663c4f0ba125127f0357cb9","2011-02-02 22:29:14+00:00","SCI: Fix GK1 Mac scaling

svn-id: r55744
"
"149082c9e98e80140d2c8143b918ddfca20cdf7e","2011-02-02 23:22:45+00:00","N64: Fix Signed to Unsigned Comparison GCC Warning.

svn-id: r55745
"
"9b8c04045bad8422ce8da7d6a7b30c03f1ceb2a5","2011-02-02 23:27:59+00:00","MIDI: Fix for bug #3170988 - 'MONKEY2: Messed up MT-32 music'

This is a regression from r55256. Apparently, SCUMM has issues when sending a sustain
off on a notes off event. Thus, this has been turned into a feature, which is disabled
by default. Since MADE, SAGA and tinsel all share the same music code and play regular
MIDI files, and this feature fixes hanging notes for them, it has been enabled for them.
Also, applied a patch for a bug regarding the notes off event in MADE and tinsel,
which has been applied in SAGA already

svn-id: r55746
"
"9e761d6f291e956a6fb1dcedcd1d7424b17d88e4","2011-02-03 01:47:41+00:00","TOON: Switched configure script to build Toon Engine by default.

Needed to allow Toonstruck playtesting with daily builds.

svn-id: r55747
"
"4c0af01d6a2a860c09dbd047563ac4f727425492","2011-02-03 02:26:57+00:00","SCI: Disable the special QFG1 Mac icon bar

The original interpreter completely ignores it in favor of the regular one.

svn-id: r55748
"
"4088e735a962fd597049ff08e6e3710eb491c884","2011-02-03 04:06:22+00:00","SCI: Properly reset the array/string segment ids

svn-id: r55749
"
"7c3d65912da2cae2568095e714c0877faf05a8b3","2011-02-03 05:10:24+00:00","SCI: Fix GK1 Mac messages

svn-id: r55750
"
"496ca9a669dc81f64fe6199ae12628044d37035f","2011-02-03 12:42:52+00:00","SCI: Fix KQ6 Mac audio resources

A regression from r55715

svn-id: r55751
"
"74caf6cd714cdb031db78f2fd44cff0378d3f08c","2011-02-03 14:37:50+00:00","SCI21: Some robot related changes

- Don't reallocate the frame buffer on each update if its dimensions haven't changed
- Don't attempt to display the currently unsupported v4 robot files (used in PQ:SWAT)
- Signed/unsigned fixes
- Disabled the unused getFrameRect() function
- Some cleanup and reordering

svn-id: r55752
"
"c4861605df3964f3ea89a6cdf3873a1c87c48f12","2011-02-03 14:44:58+00:00","SCI: Fix a typo, the interpreter can handle robot video versions 3 - 5

svn-id: r55753
"
"4d088332a2f5bb6cb8aea9031a79d834dbb258e4","2011-02-03 15:51:51+00:00","SCI: Add support for GK1 Mac high-res fonts

svn-id: r55754
"
"be1f62af23b6a525e60a9585ac40009da95f0b1c","2011-02-03 18:07:47+00:00","SCI: Add a stub for kFont which calls kSetFontRes as a subop

svn-id: r55755
"
"e1cea3b879037dc5b52ae7a2043824baa82112c6","2011-02-03 18:18:36+00:00","SCI: Robot related changes

- Reverted accidental changes in r55752, and moved all the deletion code in freeData()
again
- Now skipping v6 videos (in SCI3), instead of throwing an error

svn-id: r55756
"
"38444a3712543f60f5daf8106ef3b2d66c6f9ab9","2011-02-03 18:24:55+00:00","SCI: updated comments concerning robot videos

svn-id: r55757
"
"935b3187982afb8a8c1aebded8b5ddc607e27f0f","2011-02-03 18:25:38+00:00","HUGO: Suppress static variables (except one)

This also fixes the multiple-RTL related music bug reported by D. Gray

svn-id: r55758
"
"11e2f2226c3f162bf630c0d0b2f8b75537c7e451","2011-02-03 19:47:36+00:00","SCI: Robot v6 support. I _think_ this is complete.

svn-id: r55759
"
"80bfecb6256d60d47e99db7b63f6c8e3878f8e7d","2011-02-03 20:51:59+00:00","GOB: Fix a regression that broke Lost in Time

svn-id: r55760
"
"2be57434a1f7381c19be06bd2af4d4bf64df360f","2011-02-04 15:27:56+00:00","COMMON: Only take the md5 of the resource fork data section

Since various apps can modify the type/creator of the files, we can't rely on the header of the resource fork to take the md5. I've therefore also recalculated all of the detector entries (all 5 of them) that use the Mac resource fork code.

svn-id: r55764
"
"c18035c07a3c582e78c61843ddd6c17d0a99c809","2011-02-04 15:42:58+00:00","GROOVIE: Disable other T7G Mac entries as they should no longer be needed

svn-id: r55765
"
"209f5bd77e9fa5f9b8d671b0f8a0e9a7e2530a25","2011-02-04 15:53:44+00:00","GOB: Move storeValue/storeString to class Inter

svn-id: r55766
"
"6a99b6f34044594e511dd8223c777e9c1c06d1cd","2011-02-04 15:54:21+00:00","GOB: Add Inter::readValue()

svn-id: r55767
"
"0efcd484ea1cbd3ec5d3e1f26d3f0f7b9b63e6c6","2011-02-04 15:54:52+00:00","GOB: Implement case -2 for oPlaytoons_getObjAnimSize

svn-id: r55768
"
"b6d2e521c55a2a1df19d81ba54fd41980524766d","2011-02-04 15:55:20+00:00","GOB: Add oPlaytoons_loadMultObject

svn-id: r55769
"
"e3ceff83f43942e7052eee8339b6d733a47e9734","2011-02-04 15:55:54+00:00","GOB: Add the 'envir' directory to the search path for Adibou

svn-id: r55770
"
"94b6d23d44ee9d48b4e4631f7d38d16c012bf56b","2011-02-04 16:16:07+00:00","GOB: Silence a compiler warning

svn-id: r55771
"
"512bcf8b907edd69ed7bed2c988f6aa0b8cdfe69","2011-02-04 17:51:59+00:00","SCI: Rewrote the robot playing code in a way similar to other video decoders

- The code now streams videos instead of loading them in memory, without utilizing seeking
- Removed the sound-related robot code from the graphics classes
- Started implementing the code for the sound in robot videos (still not finished)

svn-id: r55772
"
"ec36d39f250de646a90ab4f8cb7f4350b04e4f0c","2011-02-04 19:02:40+00:00","TOON: Fix Amiga compile

svn-id: r55773
"
"6a93178341b361274ef7a12f60da6768eb9c0357","2011-02-04 19:24:34+00:00","HUGO: Fix menu icon order (bug reported by D. Gray)

svn-id: r55774
"
"118ee375db7d2ed5504ba95ff0d345100f51e87f","2011-02-04 21:51:10+00:00","HUGO: Increase the height of window view

This fixes a bug related to hotspots in H3 Win reported by D. Gray (in witch hut)

svn-id: r55775
"
"4a4a6cd585e25eaec364ca3df33c47afe48c5b66","2011-02-04 23:03:05+00:00","SCI: Properly initialize a Robot variable so we don't segfault on quitting

svn-id: r55776
"
"4aaa0450172377c1cd1fad63f8e7711ecff8a01a","2011-02-04 23:38:40+00:00","TOON: Fixed two dialog color mistakes

svn-id: r55777
"
"ad9486e1a808e2d8f529850e289ff4208c93edf3","2011-02-05 07:49:21+00:00","SCI: Throw a warning when trying to play a Mac robot file (big endian)

svn-id: r55778
"
"cb6d30a915ef4857a93cbf4fc41293ac5f5e64b2","2011-02-05 08:14:05+00:00","SCI: Add detection for Phantasmagoria Mac

svn-id: r55779
"
"53d862af0be3cdec5231f065e05fb80260ec9429","2011-02-05 08:16:29+00:00","SCI: Add support for BE selector name tables

svn-id: r55780
"
"a08fa00d49afef7f31970dd6f4712d4243377e52","2011-02-05 08:18:03+00:00","SCI: Fix detectHires() for Mac SCI32 games

svn-id: r55781
"
"0a7887ac8af0b576c06959e1ed1d2a0acfcd3b99","2011-02-05 08:20:06+00:00","SCI: Oops, fix compilation

svn-id: r55782
"
"0bf787736c7171b82b4c3eaf394cf720b8a7095f","2011-02-05 08:27:33+00:00","SCI: Fix Mac SCI32 subdirectories

svn-id: r55783
"
"c1a9857837d7527cb8b7e9149a186cfd50ffff0b","2011-02-05 08:52:52+00:00","SCI: Fix SCI32 Mac picture palettes

The palette offset should be 32-bit, not 16. The GK1 Mac intro now plays properly.

svn-id: r55784
"
"47dbd520bb6bfe92fb05566b08a77a3e77eb7554","2011-02-05 10:34:37+00:00","WIN32: Try to fix compiler error for mingw-w64 buildbot build

svn-id: r55785
"
"58884b1244e2ff88aeeec4d5f281c56ec9ba3139","2011-02-05 12:11:57+00:00","TOON: Add some sleep if the game refreshes too fast

Prevents the game from using 100% CPU?

svn-id: r55786
"
"69a88e315cd4e5cb2062b80c206b3ce5c965369a","2011-02-05 13:12:42+00:00","TOON: Fix formatting issues

svn-id: r55787
"
"bc77c8534cd83b7102b1b80f86d32bc4d61b25f7","2011-02-05 14:07:30+00:00","HUGO: Fix 2 uninitialized variables

svn-id: r55788
"
"e990453a4d675eb801f06828a3736b150ef06596","2011-02-05 14:45:36+00:00","HUGO: Fix leak (thanks digitall)

svn-id: r55789
"
"36b6d961c202f4a6c06b362159f41b06a2d18248","2011-02-05 21:58:44+00:00","TOON: Ensure minimum delay in worst case of render() loop to allow thread scheduling.

This should ensure that CPU usage is not pegged at 100%.

svn-id: r55790
"
"46404940b55dd07849548d185836b261c22dcf69","2011-02-06 00:05:27+00:00","SCI: Improve Mac SCI1.1+ cursor support

The scripts can pass a list of view id's from the DOS version that get remapped to CURS/crsr id's. GK1 cursors now work and Phantasmagoria uses the correct ones.

svn-id: r55791
"
"ec03425c0fe20a5ee9f90da3310fac22010e0ced","2011-02-06 10:17:54+00:00","PARALLACTION: update MIDI driver commands description for BRA.

svn-id: r55792
"
"91491006298bea91e415edb937e83c309e963048","2011-02-06 11:51:21+00:00","SCI: Several changes related to robot files

- Added WIP robot sound support (which has pops between each frame for some reason)
- Now handling a lot of previously ignored fields
- Now handling the chunk before the palette chunk properly. Fixes some v6 videos
- Added known robot related TODOs

svn-id: r55793
"
"e7a57de38ba56f2708403f28ea78ed56c9061ac6","2011-02-06 13:43:40+00:00","GRAPHICS: Improved JPEG decoder performance

Replaced the 2D IDCT by two 1D IDCT (rows, then columns).
JPEG images now decode about twice as fast as they used to.

svn-id: r55794
"
"aa64cf1d6298dd02c6e19079dcca0a25536ec366","2011-02-07 01:51:09+00:00","SCI: Fix SCI1.1 Mac picture palettes further

The palette color start is actually a byte, not a uint16.

svn-id: r55796
"
"cf918d72e5c959b10b0de162db6cbcfaf08c5e82","2011-02-07 01:56:30+00:00","SCI: Add support for Mac robot files

svn-id: r55797
"
"5167cd390ca3c28698f7ee6ba77877b8a4a0f474","2011-02-07 02:35:17+00:00","TOON: Added workaround for obvious glitch in first intro video.

This glitch occured in the original interpreter and is probably due an encoding error of 209_1M.SMK.

svn-id: r55798
"
"cd599216a595c9ca7d36aa034b054c1da38d4591","2011-02-07 05:53:30+00:00","SCI: Add support for v4 robots

svn-id: r55799
"
"d7fb5239e7ed9b95442b8a481cdd9e6c25a9acc5","2011-02-07 09:03:58+00:00","SCI: v4 robots are only used in the PQ:SWAT demo, the full version uses v5. Some cleanup

svn-id: r55800
"
"6f9ac84f77f140c8008ffec0e57fcf2ddd17a10e","2011-02-07 12:24:09+00:00","SCI: Converted the robot decoder into a regular video decoder, and decoupled it from the
SciEngine class

- Robot videos are now shown in frameOut(), like they should, and kRobot(sync) is only
used for syncing with the game scripts
- Hooked video playing into the 'play_video' console command

svn-id: r55801
"
"dda8266ec810d2e289e4d0f661078f60d69d9903","2011-02-07 13:36:59+00:00","VIDEO: Fix a leak in the Smacker decoder.

If audio was not yet started when a video was closed, the audio
stream would be leaked.

svn-id: r55802
"
"a0c0331bcdb9a0736c8b5fa85de18a0319c675a2","2011-02-07 13:49:03+00:00","SCI: Unified the SEQ and robot palette code, and fixed the include safeguard of the SEQ decoder

svn-id: r55803
"
"653196640ad5ce4777af3399311866400df02e6a","2011-02-07 16:39:10+00:00","HUGO: Spelling fix.

svn-id: r55804
"
"8981fa3f164aa8f397df2af8b85d6edfa4bdd883","2011-02-07 17:47:20+00:00","VIDEO: Inline SMK palette

svn-id: r55805
"
"ab039812e7d0a0202317c61a2cb64874e4d0c410","2011-02-07 17:52:38+00:00","COMMON: OSystem now has a PaletteManager

svn-id: r55806
"
"da01896ee01c00d3a155e3b8c5e5847f8e04b3e4","2011-02-07 17:52:58+00:00","BACKENDs: Fix const correctness in 'null' graphics manager

svn-id: r55807
"
"57c932abddfbd0201daac2a034ec179f8351a54b","2011-02-07 17:53:15+00:00","BACKENDS: Reduce header interdependencies

svn-id: r55808
"
"2c00aed172f09285c8131d437b64de9d000d1762","2011-02-07 17:53:34+00:00","SCUMM: Avoid hiding overloaded virtual method

svn-id: r55809
"
"357c225f64ac91d63d31f23858f50471c158b065","2011-02-07 17:54:16+00:00","VIDEO: Rename VideoDecoder::load() to loadStream()

svn-id: r55810
"
"12f919a8e85a3ab2c867ec88c848698db90acfd1","2011-02-07 18:16:45+00:00","VIDEO: Try to clarify VideoDecoder docs a bit

Also re-arranged the methods a bit, into what I hope is a slightly
more logical ordering.

svn-id: r55811
"
"4a16e0911f99cfb6d767cfbd33e80dbc53591736","2011-02-07 18:20:17+00:00","typo

svn-id: r55812
"
"04748b17446d485a1343e1f1ad9b499a41f5728f","2011-02-07 18:32:42+00:00","SCI: Fixed compilation

svn-id: r55813
"
"85aabef6fe370766fa52ba92a7cf63c558bac772","2011-02-07 22:57:35+00:00","VIDEO: Replace Video::VideoTimestamp with Audio::Timestamp

svn-id: r55814
"
"41121be4d6fecbc727897471e0ceed1fd4c76bd7","2011-02-07 22:58:22+00:00","GUI: Rename SaveLoadChooser::runModal to runModalWithPluginAndTarget

This avoids hiding an overloaded virtual method, which in turn can
cause weird bugs (see also the next commit).

svn-id: r55815
"
"7bac92388f9d9eb14f2032a20f63a67e3bb9914f","2011-02-07 22:58:42+00:00","MOHAWK: Fix MohawkEngine_Myst::runLoadDialog

This incorrectly invoked (indirectly) the runModal() method of a
SaveLoadChooser, but for that one should use runModalWithPluginAndTarget
instead.

svn-id: r55816
"
"377b4c67d99503b19e866ff47c685c57dd2a56e0","2011-02-07 22:59:00+00:00","GUI: Change SaveLoadChooser to not 'public subclass' GUI::Dialog

svn-id: r55817
"
"2d1c8a35331d4c73032a6fcd50ab3f7a27513dbb","2011-02-07 23:01:06+00:00","ALL: Fix whitespaces / indention

svn-id: r55818
"
"452048b271702508059ae41a4573d5f01680add7","2011-02-07 23:18:47+00:00","QUEEN: Avoid hiding an overloaded virtual method

svn-id: r55819
"
"1a525d1bb78a34e124aafae090901005333b716d","2011-02-08 01:44:03+00:00","PARALLACTION: Avoid hiding overloaded virtual methods.

svn-id: r55820
"
"3c53b1c020f264b649f1ce3179ee3febd7480513","2011-02-08 04:23:29+00:00","MOHAWK: Add detection for the v2 lbsampler

svn-id: r55821
"
"464f49d705a42d3b7bd2fedb9564a665716f2a1a","2011-02-08 04:24:25+00:00","MOHAWK: Fix poetry mode for v2 games

svn-id: r55822
"
"8b1970477100c37e0fa075e7f38b3444ef0d00da","2011-02-08 05:01:42+00:00","SCI: Fix Mac SCI1.1+ view white/black/transparency

Since Mac OS required black to be at 0xff and white to be at 0x00, the original Sierra programs had to hack around that in various sections of the code to keep things in line with the PC versions. We're changing the view pixels instead so we only have to change in one location.

svn-id: r55823
"
"92d09d236ee802ef44deb905189c84d9fcf40a88","2011-02-08 05:39:50+00:00","SCI: Fix Mac robot palettes again

My fix from r55796/r55797 was erroneously removed in r55801.

svn-id: r55824
"
"8f3324f6ba648381953bd5538a0f1aa1507da480","2011-02-08 14:26:39+00:00","SCI: Do not flip clearKey for Mac SCI1.1+ views.

svn-id: r55825
"
"85f8dc5dee6fbe78fc5cd30094205cf2ed259fec","2011-02-08 15:03:23+00:00","SCI: Add detection for Freddy Pharkas Mac

svn-id: r55828
"
"656afd6daa2b468fdf2731f082d1fd5897e43110","2011-02-08 17:32:40+00:00","MOHAWK: Add detection entry for 'Dr Seuss' ABC' Macintosh version.

svn-id: r55829
"
"72a9706950675cc3fd04e39d0f842193d66a5f9e","2011-02-08 19:50:45+00:00","SCI: Some work on robot videos

- The size of the videos is now calculated when they are loaded (this helps remove some
nasty hacks and constant memory reallocations and simplifies the code)
- Some work on frame placement (e.g. in robot 1305, Phantasmagoria)

svn-id: r55830
"
"4917740b44da8d7bac8b689febe98b183f1a8278","2011-02-08 20:52:26+00:00","HUGO: Cleanup : some refactoring and encapsulation (thanks fuzzie for the help)

svn-id: r55831
"
"89bc8bfdb21f06a81a2d9181d603dce361f0e0b1","2011-02-08 22:25:35+00:00","I18N: Add Czech translation (patch #3174438)

svn-id: r55833
"
"9fceb200125ffa6991033a928d050ddf1a9c599d","2011-02-08 22:28:32+00:00","CREDITS: Add credits for Czech translation

Also add missing html entities conversion for rtf and tex outputs (hopefully
I got them right).

svn-id: r55834
"
"949000a144705991737fc3894b95afec3876e2f1","2011-02-08 22:58:34+00:00","VIDEO: Fix the documentation of VideoDecoder::getPalette.

svn-id: r55835
"
"9cf8d4d54818a8920b13a70aec56b3afdaeaed83","2011-02-08 23:00:28+00:00","VIDEO: Fix the documentation of VideoDecoder::setSystemPalette.

svn-id: r55836
"
"93d22c21b58685a7044bcedefcd174c68f02e2a1","2011-02-08 23:07:11+00:00","SCI: Changed the warning when applying script patches into a debug output call

svn-id: r55837
"
"2184326dbc428d7b6ef1eda510ae299838d5a2d2","2011-02-09 00:11:39+00:00","COMMON: Add comment that explains strange <= checks in gcd()

svn-id: r55838
"
"97bfd60e61991be9ed6686d6eb70370a901d4371","2011-02-09 00:12:02+00:00","COMMON: Reduce overflow risk in Common::Rational += and -= operators

svn-id: r55839
"
"633b8ed27784814e264edd943797e0c6d44366db","2011-02-09 00:12:22+00:00","AUDIO: Forbid adding timestamps with differing framerate

We used to allow this, but the result is a timestamp with a framerate
potentially different from that of both original timestamps, which can
lead to completely unexpected behavior. For example, consider this code
snippet:
a = a + b;
a = a.addFrames(1);  // frame rate changed!

svn-id: r55840
"
"805a5b2996ea331b4503b40e70ff85609a0f0883","2011-02-09 00:12:58+00:00","VIDEO: In overloaded methods, invoke correct parent implementation

This should not cause any code behavior changes at this time, but if any
of the intermediate VideoDecoder classes ever starts to overload stuff,
this would become important.

svn-id: r55841
"
"4cfa520dce72cf7805cf299f67c7faa9fc165922","2011-02-09 00:13:20+00:00","AGOS: Change private to protected, Instead of making subclasses friends

svn-id: r55842
"
"ee7056542c258e6ed920c0b04f3d50f3bc135990","2011-02-09 00:13:42+00:00","AGOS: Reduce header interdependencies

svn-id: r55843
"
"d7370f11e4369f9bd110ec6200862f95e49a3149","2011-02-09 00:14:06+00:00","VIDEO: Remove unused SeekableVideoDecoder::seekToFrame method

svn-id: r55844
"
"6a6caa80a3ca05e9226b9bec364afa6495d85df6","2011-02-09 00:14:24+00:00","AUDIO: Tweak Timestamp docs; move class member decls to the end

svn-id: r55845
"
"6b477ee33e0a2aeb0f7e4990cc2c00f7dd2e585b","2011-02-09 00:23:35+00:00","LASTEXPRESS: Refactor inventory handling

- Rewrite menu icon part of Inventory::handleMouseEvent()
- Add proper support for icon brightness
- Add drawItem method in place of macro

svn-id: r55846
"
"0250fd45712d134b3e16ed334b980b9f623bf79d","2011-02-09 00:23:49+00:00","LASTEXPRESS: Properly update cursor when hovering Egg and inventory items

svn-id: r55847
"
"058d75b70810965a508fa5d56d449fed242a6cf8","2011-02-09 00:24:06+00:00","LASTEXPRESS: Implement proper Inventory::open() and Inventory::close()

svn-id: r55848
"
"386203a3d6ce1abf457c9110d695408ec5f01b85","2011-02-09 00:27:50+00:00","SCI: Do not try to dereference object name when it's not a pointer.

Stops flood of warnings in some Mac titles.

svn-id: r55849
"
"42ab839dd6c8a1570b232101eb97f4e54de57935","2011-02-09 01:09:01+00:00","AUDIO: Rename sound/ dir to audio/

svn-id: r55850
"
"ab78737abd273b02c5d9606493e57265dd2357aa","2011-02-09 01:11:58+00:00","MIDI: Fix bug #3153076 (warnings in SEQ driver)

svn-id: r55851
"
"936d15673e80b29c7b99acaca0697b8f66c5a335","2011-02-09 01:27:24+00:00","TOOLS: Update create_project for change from sound/ to audio/

svn-id: r55853
"
"f83fb856b38514b4d4890bb7fd191fcab0d094b9","2011-02-09 02:05:44+00:00","JANITORIAL: Update NEWS for changes since 1.3.0

svn-id: r55854
"
"f751f5b0e1a0db3cf1e1db4ca874cfd9ce31f617","2011-02-09 03:40:00+00:00","LASTEXPRESS: Add support for item highlight in inventory and scene restore

- Properly show egg not highlighted by default
- Fix GCC warning in drawItem()
- Remove unused code

svn-id: r55855
"
"8bde4ab0af138133ea514bd72b9a5504c4c11d77","2011-02-09 06:58:04+00:00","NEWS: Fix spelling

svn-id: r55856
"
"77fe90d95e8b73fc254eabd90719b36ecb15b128","2011-02-09 11:03:36+00:00","MIDI: Really fix bug #3153076 (this time also for Timidity)

svn-id: r55857
"
"dc4dd174af04144c8f31396290fee42226649d67","2011-02-09 11:44:07+00:00","NEWS: Added all of the changes made in SCI0 - SCI1.1

svn-id: r55858
"
"aac6bd518152571e8e119a733c76b9c2ade45cfb","2011-02-09 17:54:34+00:00","SCI: Improve speed of Mac resource fork sources

svn-id: r55859
"
"d0a01c16891cdb362233022b7c62078b969729af","2011-02-09 20:07:55+00:00","MOHAWK: Implement Stoneship battery depletion

svn-id: r55860
"
"ece050e26c8397e32038662fcdc451bfa6e28351","2011-02-09 20:52:46+00:00","MOHAWK: Complete Myst opcode 209, fixing the bookcase door lintel updates

svn-id: r55861
"
"9f6dc040ff56d6e1b4f77275acb3a1d4750a38e6","2011-02-10 01:05:48+00:00","CONFIGURE: Add basic support for ICC.

svn-id: r55862
"
"a9361da157da8ad1672fdb930758952017dbf7b8","2011-02-10 01:19:24+00:00","KYRA: Remove superfluous const in type conversion.

svn-id: r55863
"
"24eab0ac73f293f5f05344c3278ca5dcfd76dacd","2011-02-10 01:19:48+00:00","KYRA: Rename KyraEngine_MR::runDialog to doDialog to avoid name clashes with Engine::runDialog.

svn-id: r55864
"
"d915560f4475a30ab7ff961b3af8e109e3e8ffa7","2011-02-10 12:40:48+00:00","SCI: Moved some audio resource code to resource_audio.cpp

svn-id: r55865
"
"c7c0198e274a3802d350a029636c10ff0f04212c","2011-02-10 12:57:43+00:00","SCI: Renamed  addInternalSources -> addAudioSources and separated the script chunk loading code

svn-id: r55866
"
"c093925763fa808ad76b7c082c576facd769ba27","2011-02-10 13:39:01+00:00","SCI: Fix (rare) leak in kSaveGame, tweak kFileIOFindNext, cleanup

svn-id: r55867
"
"631d2de74539508add200b98a6066d9acdc81680","2011-02-10 15:12:06+00:00","SCI: Fix Mac SCI1 view transparency

This was a regression from r55825.

svn-id: r55868
"
"0e95f791d03d031b9a8f8aa047a3e71c1194a638","2011-02-10 15:52:45+00:00","SCI: Added a short explanation about each of the different resource source types

svn-id: r55869
"
"67d38dc5c3cc95ffc2610e93ef5d0a0a3407df9a","2011-02-10 15:53:28+00:00","SCI: Fixed typo

svn-id: r55870
"
"80347e96303ff707d394759297547b3392fdb64b","2011-02-10 15:56:35+00:00","SCI: Don't fallback to views in SCI1.1+ Mac games

svn-id: r55871
"
"e4b46bd159419c96c683a6a19b63416fb368e6d8","2011-02-10 16:48:29+00:00","SCI: Added resource manager support for changing the audio directory dynamically. Also,
moved some audio-specific resource code inside resource_audio.cpp

This functionality is used by kSetLanguage(), called when switching the language in
MUMG Deluxe from the game's main menu.

svn-id: r55872
"
"745c04194a22d8d00e043385aba9ff34887c170e","2011-02-10 16:49:46+00:00","SCI: Added a workaround for MUMG Deluxe

svn-id: r55873
"
"2ceb4339e942e45372399691e13b33a92cb4d862","2011-02-10 16:58:13+00:00","SCI: Changed the comments of r55869 to Doxygen format (thanks, fingolfin)

svn-id: r55874
"
"6a4ea3abd30dac9d79cc3424b2457fc596b75191","2011-02-10 21:10:49+00:00","SCI: Added comments to the FB-01 and MIDI drivers. The original driver files are only
needed in SCI0 early games, which didn't include separate sound patch resources. Thanks
to waltervn for the information he supplied

svn-id: r55875
"
"247e882711e1e20d84ba1262c2c76b7a05587d01","2011-02-10 21:41:59+00:00","VIDEO: Added some skipping when bad data is found in Indeo3

Some Urban Runner videos are badly encoded and contain
corrupted data. When the decoder realizes that there is
some bad data, it skips the rest of the frame.
The original Indeo3 DLL decoder does the same.

svn-id: r55876
"
"61c33feabab1b73692871f4beaabf6617f0a5a92","2011-02-11 04:23:38+00:00","VIDEO: Fix QuickTime audio seeking

svn-id: r55877
"
"d8d9305c22969e98ac8e0c987ac27e7508ff705c","2011-02-11 05:13:37+00:00","TOON: Fix memory leak

PAK files were not being unloaded because closePackage() was being
called with a slightly different file name than than openPackage().

svn-id: r55878
"
"3c5fb26a913b1b8c97da6a0ef0b6b0f2f1498b4b","2011-02-11 07:12:29+00:00","HUGO: refactoring: move boundaries to object class

svn-id: r55879
"
"7bca1f136c5a96cf4f0812bb8d238bf06ff34926","2011-02-11 07:24:42+00:00","HUGO: Fix regression in H3: game exits at the end of the intro

svn-id: r55880
"
"fffb8f5617f175d0b947c65d75f3d938b61e0555","2011-02-11 07:42:35+00:00","HUGO: Fix warning 'virtual function override intended?' reported by LordHoto (thanks for the explanation)

svn-id: r55881
"
"0544977daaf278c041d61a3fbbe959c814e49d6f","2011-02-11 15:02:15+00:00","VIDEO: Fix QDM2 audio

A regression from r55474

svn-id: r55882
"
"a9b051beff3157e1aa88b8090852850f55440e9b","2011-02-11 17:05:27+00:00","SCI: Simplify SegManager::saveLoadWithSerializer, cleanup

svn-id: r55883
"
"87ab737e6bc4b97950e83d981ef5828665ce9b72","2011-02-11 20:27:48+00:00","HUGO: Cleanup: fix style issue in Doxygen comments

svn-id: r55884
"
"0d19171ce50de617661bbb8fc5b0b855c74fc65b","2011-02-11 21:42:51+00:00","SCI: Fix platform for the GK2 demo, videos will now play

svn-id: r55885
"
"191d21678588d22d5c09e97d20f7a87225622c07","2011-02-11 21:46:28+00:00","VIDEO: Add another AVI stream type used by Indeo3

svn-id: r55886
"
"69d907151bf466f67d4e4546a5690befc65ebac4","2011-02-12 08:13:35+00:00","HUGO: Cleanup based on Fingolfin comments

svn-id: r55887
"
"56366c4c41aa9dcff1b154b321d6387ad500d329","2011-02-12 09:13:04+00:00","WII: Whitespace (buildbot upgrade test)

svn-id: r55888
"
"84a8bdc86ba488057052a7c87fab62dd916e43df","2011-02-12 10:00:52+00:00","JANITORIAL: Remove duplicate #include's

svn-id: r55889
"
"3354204f53bb41b28f6dbf260646df3ee70d279b","2011-02-12 10:36:35+00:00","JANITORIAL: Remove extraneous parentheses

svn-id: r55890
"
"4ec51bd84368579f53d4e290bc84868e23ae94fb","2011-02-12 11:03:27+00:00","MOHAWK: Implement Stoneship's last opcodes, tunnel alarm

svn-id: r55891
"
"4ad7f20b77cd7239d43f1b2c61ea424d0d826ffa","2011-02-12 14:37:59+00:00","HUGO: little optimization in decodeString(), cleanup

svn-id: r55894
"
"c846231af3ccf9a910c5cfd5276a38a2244e325d","2011-02-12 16:20:57+00:00","HUGO: Replace Common::File by Common::ReadStream in several functions

svn-id: r55897
"
"a4227638332c74d2e08e0935e7c49f276b701c61","2011-02-12 16:43:57+00:00","BUILD: Remove explicit references to SVN in revision variable names.

svn-id: r55898
"
"92fca9c8db5d2c5a6ec532d89f4a8b6db2795ff5","2011-02-12 18:00:39+01:00","GIT: Add .gitignore
"
"c04682b3ae0b2bdfc0aec849ecc9a005ffda9c93","2011-02-12 19:01:46+01:00","HUGO: Start to simplify hugo.dat loading
"
"d794bfc4fa94acb994460dc687da408f65bbf977","2011-02-12 18:54:19+01:00","GIT: use git for describing the version.
"
"dfe62d6ec40a4650c6bc6f881542ea47611f47e4","2011-02-12 19:18:50+01:00","GIT: `git describe --dirty` is too new.

do it manually via diff-index
"
"1036979de3049a95dddacc6202483cd563bfd6fb","2011-02-12 19:29:56+01:00","HUGO: Fix a bug in engine destructor
"
"f2e5b126cf1b64e547998606cc0d24bc55085f5e","2011-02-12 19:35:19+01:00","Merge branch 'master' of github.com:scummvm/scummvm
"
"d11b57e60935c1799b07445caf817c871391f2cf","2011-02-12 20:12:32+01:00","MOHAWK: Implement Mechanical var getters 4 and 15
"
"337044e11f6682e9cc9a50eeb71b4f9e8a6b94d5","2011-02-12 20:19:00+01:00","MOHAWK: Implement Mechanical opcode 125
"
"78e580135b683a792434ad52c12648e7525aeace","2011-02-12 21:12:03+01:00","Add ScummVM.app to .gitignore
"
"cb9ddad8985fbfbfc8b3f1b729df960c47be415b","2011-02-12 21:19:05+01:00",".gitignore: add vi swap files.

how could you forget vi users? HOW? :\
"
"87e832809bd6e23fa71071fb4fd7a3a27f88f12e","2011-02-12 22:16:53+01:00","JANITORIAL: Remove unnecessary semicolon

I'm glad there's always a supply of those, because they make for
great test commits.
"
"15b3bffb7ff8f0ee8091e62cddb1682f2bf8d2d2","2011-02-12 18:30:26-05:00","SCI: Fix the console's hexgrep command
"
"2c9d30e7370dabf2132dba8631748d8841e61517","2011-02-12 18:33:52-05:00","SCI: Don't limit the number of resources to 999 in hexgrep
"
"e8a303d27ae3d254f176300521ec64b0ae3e2668","2011-02-13 01:33:36+01:00",".gitignore: Add several windows-only and/or MSVC files
"
"43d9fb6c5ae2053b75f0ff1d4f0d900bd8ce22c2","2011-02-12 22:04:49+01:00","GIT: Add Eclipse projects to .gitignore
"
"30c33c6e6beb7a61ff79e2b8fab3cc3704f1195a","2011-02-13 12:15:37+01:00","MOHAWK: Add Achenar's crate state to Mechanical state
"
"c68bee08b2babcd5d5dd1c7b5a427005d28023ee","2011-02-13 12:24:11+01:00","MOHAWK: Add var getters / togglers to Mechanical, pages can now be
taken
"
"93ed359669104f6414e9f3d94a63e55ae46eda30","2011-02-13 13:16:03+01:00","MOHAWK: Implement Mechanical's crystals
"
"e5783d9c27f09456c3f4bb279ce44977210bebda","2011-02-13 13:22:50+01:00","MOHAWK: Implement opcode 105, Mechanical fortress staircase movie
"
"3cc86aedacb0c673c313df7922d19eeb0912494d","2011-02-13 13:27:01+01:00","MOHAWK: Remove Myst's var store from the build since it is not used
anymore.

Keep the files are to be kept around for reference until Mechanical is
finished.
"
"4e6c02563341184c98f231db95c5d1972b59d03b","2011-02-13 15:19:43+01:00","SCUMM FM-TOWNS: minor cleanup (git test)
"
"87c81566b429693d96ef7da7196d5503c33cde91","2011-02-13 22:07:34+01:00","AUDIO: Fix assertion triggered by SubSeekableAudioStream constructor.

This assertion was introduced with 633b8ed27784. I change the code to first
convert all parameters to the audio stream's framerate to avoid a possible use
of operator- on two AudioTimestamps with different framerates.
"
"0be58b2694c2517c24a66035b3ea716bf9ac5fb6","2011-02-13 01:50:27-05:00","SCI: Fix VMD coordinates

The suffix check for 'vmd' failed for uppercase files.
"
"b4ca2da72ebf587fd067f82551b2ccff3cc29a40","2011-02-13 01:56:57-05:00","SCI: Switch to true color mode for the GK2 demo Indeo3 video
"
"d096b78acaa510e02cb9be9a2e2dc17e53f80e3e","2011-02-13 16:11:22-05:00","MOHAWK: Add support for Mac LB v2 games
"
"2087e2325bd97a31c3518d87918ba87727faff3c","2011-02-13 16:13:44-05:00","MOHAWK: Fix comments for the LB sampler v2
"
"a5b198b23337e3b4f44dabefccb9f097b37b3198","2011-02-13 22:34:29+01:00","Remove erroneous comment. It reflected a false belief resulting from
a missing parameter check, which has also been added.
"
"dbc6910eae6a174fbab08a39a7e5e0fcfb135793","2011-02-13 17:22:07-05:00","SCI: Add support for Phantasmagoria 2 CLUT resources

My test of ising the clut associated with the intro video produced a decent quality color conversion. This is not yet hooked up to the video player.
"
"71edec7b80c5fe060b05132ec2cb8f7f11bd1862","2011-02-13 17:45:30-05:00","SCI: Add detection for GK2 Mac
"
"fad3e645507030a2c34e4d6e5a37ec1bcd526105","2011-02-13 18:00:39-05:00","SCI: Fix GK2 Mac picture 2315

It hardcodes the picture so it doesn't get run with the decompressor
"
"97852d473e05b03a1b9a18facc9c2cf0c3ac8a92","2011-02-14 08:31:01+01:00","HUGO: Some more refactoring

Move _hotspots to mouse class and encapsulate it, rename some variables in route class
"
"ae986410a905131b33be173962a04d51392a1181","2011-02-14 02:41:02-05:00","TOOLS: Switch create_project revision script check order to Git -> Hg -> TortoiseSVN -> SVN
"
"1e989c44ed13e63cd1d128be2250bd1eddaf3e40","2011-02-14 02:57:13-05:00","GIT: Ignore more files and directories used by Visual Studio
"
"f621f6a5059ec619ae9ea1045548e62a27e99ab4","2011-02-14 01:12:40+01:00","SKY: get rid of timer based gfx updates

on most platforms timers are implemented using threads. never ever make
gfx updates from another thread other than the main one. seriously.
replace the whole timer crap in sky with timestamp based updates.
this fixes crashes when OpenGL is enabled (android included).

needs more testing.
"
"7042d95cfee6cb2eead81fce497eeaf0da28d297","2011-02-14 20:37:27+11:00","TSAGE: Added the engine in a separate branch
"
"be125291156f2e129508aafe1c439adc95b5dff3","2011-02-14 11:21:27+01:00","GIT: ./tools/update-version.pl 1 3 0 git
"
"a53a10eff4bbc046500fa11a409879f793f5d472","2011-02-14 22:16:15+11:00","TSAGE: Bugfix for speaking text being hidden when the same speaker speaks multiple times
"
"75423cfad2311276e741d521289ec29e75f029c3","2011-02-14 12:41:55+01:00","NEWS: Mention sky changes from f621f6a

because it needs a complete re-test for the next release
"
"898f7d12447946d4f6b7801218fc4ce4adbd8ec4","2011-02-14 12:49:04+01:00","MOHAWK: Center InfoDialog text.

This is the same as the fix for scumm in 0e32d533.
"
"e0430e6e9e3c08167d48df9540f61843c3faac80","2011-02-14 10:34:18-05:00","MOHAWK: Correct the variable used for the lab book in Riven
"
"18ff02a2fa0469eaf6e4bc608ad37243937a054e","2011-02-13 14:29:00+01:00","GRAPHICS: Update PaletteManager documentation for RGBA->RGB change.
"
"813f503884806c62a28e515ad36f40c7bffd6c0b","2011-02-13 14:37:19+01:00","SDL: Adapt SDL graphics module to the setPalette/grabPalette RGBA->RGB change.
"
"6adfbe5f54b3f36057f1980fa49611f6ff902a91","2011-02-13 14:37:39+01:00","OPENGL: Adapt the OpenGL module to the setPalette/grabPalette RGBA->RGB change.
"
"021ecca3b09778c2819e81dfb6c1a7a5c242397e","2011-02-13 14:42:35+01:00","AGI: Adapt to setPalette RGBA->RGB change.
"
"f53f1af062d4f0612b7e3f1055373f8c2fcb0bdd","2011-02-13 14:45:14+01:00","GRAPHICS: Adapt thumbnail code to grabPalette RGBA->RGB change.
"
"05f0855efc611289173a6ca9b9490316651839db","2011-02-13 14:58:07+01:00","GRAPHICS: Update CursorManager documentation for RGBA->RGB change.
"
"7b8b73f64ae035a4bc883bf97d7686a6db06aa70","2011-02-13 14:58:44+01:00","GUI: Update cursor palette handling for RGBA->RGB change.
"
"9623ea05d6ff535cdee9098193ea32e04589d534","2011-02-13 15:11:29+01:00","CINE: Adapt to setPalette RGBA->RGB change.
"
"0a389b310cc1794191762d142777004b5096cbb5","2011-02-13 15:24:16+01:00","CRUISE: Adapt to setPalette RGBA->RGB change.
"
"8db9fca56ced10acbcaa104de4eeb9c362009301","2011-02-13 15:32:36+01:00","DRACI: Adapt to setPalette RGBA->RGB.
"
"04d4162357d4de5f29ba65e6c373c0304a0cad6d","2011-02-13 15:36:11+01:00","GOB: Adapt to setPalette RGBA->RGB change.
"
"5d9e69146cef195c0b94e528bfc0a608956f34e3","2011-02-13 15:44:01+01:00","GROOVIE: Adapt to setPalette/grabPalette RGBA->RGB change.
"
"c796dbe7c28b0375fa26ac0423b95b7b22eb9530","2011-02-13 15:54:31+01:00","HUGO: Adapt to the setPalette RGBA->RGB change.

This is currently done by converting the internal palette from RGBA(?) to RGB
when setPalette / replaceCursorPalette is called.

This change is not tested, since I do not have any Hugo game.
"
"9216c7e3de6cca4b6e3857e6ba71b102e070705d","2011-02-13 16:02:42+01:00","KYRA: Adapt to setPalette/grabPalette RGBA->RGB changes.
"
"68b17128c12b1e47ba56c014fa38de5632b0a810","2011-02-13 16:34:30+01:00","LURE: Adapt to setPalette RGBA->RGB change.

This is currently done by converting the internal palette from RGBA(?) to RGB
when setPalette is called.
"
"81111e2d59ecb8aa2cc7a281c058f3e2b675d2a4","2011-02-13 16:39:18+01:00","MADE: Adapt to setPalette RGBA->RGB change.

This change is not tested. It should work just fine though, since it just
removes the RGB->RGBA conversion before calling setPalette.
"
"3f8e860a2316d1a0e002324371ddc2aac76c1091","2011-02-13 19:29:08+01:00","MOHAWK: Adapt to setPalette RGBA->RGB change.

Currently in some places the RGBA palettes are converted to RGB before they are
set up. There might be a better way, but this should work fine for now.
"
"51c8871b9b5b5a5d16440eb3da043749d8b91a9c","2011-02-13 19:33:22+01:00","PARALLACTION: Adapt to setPalette RGBA->RGB change.

This change is not tested, but should hopefully work fine.
"
"46f232656e14eb5dbb050ef6cde358a4b1cb66ed","2011-02-13 19:35:35+01:00","QUEEN: Adapt to setPalette RGBA->RGB change.
"
"6d2c3230505765c3d4df64a0ac6d5ed4ffd8680a","2011-02-13 19:42:57+01:00","SAGA: Adapt to setPalette RGBA->RGB change.
"
"bba430eebc2a0701b9cea5fd5cc57ec1da87a5c9","2011-02-13 19:54:15+01:00","SCI: Adapt to setPalette/grabPalette RGBA->RGB change.
"
"bb9e82c3b3f56ac9fd985c8f8d22f6d1dc0cc5e7","2011-02-13 20:10:34+01:00","SCUMM: Adapt to setPalette RGBA->RGB change.
"
"39861271d6c67b493e20d16ff88f37a807b2a65d","2011-02-13 20:20:44+01:00","COMMON: Make MacResManager::convertCrsrCursor to return a RGB palette.
"
"fb71d66e97ffd151971817ea4cb5c0572af508f8","2011-02-13 20:26:02+01:00","MT32: Adapt to setPalette RGBA->RGB change.
"
"42bc90dde00b8df925e5284bb26efd4ff13bb12a","2011-02-13 20:30:57+01:00","TOON: Adapt to setPalette RGBA->RGB change.
"
"16ac1290ddaf29e65893ed95bad7b7e5602e87ef","2011-02-13 20:33:48+01:00","TOUCHE: Adapt to setPalette RGBA->RGB change.

This change was not tested, because I do not have any touche copy.
"
"362b0cd5e4a71a0b2610ff8abb6aeecddc842cf0","2011-02-13 20:43:17+01:00","TUCKER: Adapt to setPalette RGBA->RGB change.

This change has not been tested, since I do not own copy of Tucker.
"
"02f93b4aeb1e80cff4c0bdb88004f1dd2de65228","2011-02-13 20:45:54+01:00","TESTBED: Adapt to setPalette RGBA->RGB change.
"
"f66009c6544ade60467634a50f2b2bb4de1a4f91","2011-02-13 20:53:40+01:00","TEENAGENT: Adapt to setPalette RGBA->RGB change.

This change has not been tested.
"
"f850ad2ced921e15b226a3f9db551fb96042e0dd","2011-02-14 11:38:02+01:00","WII: Adapt to [set|grab]Palette RGBA->RGB change.
"
"2e9bf212e889de78c66d9c4e3564327727389e6e","2011-02-14 12:18:34+01:00","SKY: Adapt to [set|grab]Palette RGBA->RGB change.
"
"0da6b15539c4dbb1371cd18ae77b90688ef3f764","2011-02-14 18:16:35+02:00","SCI2+: Point out that there is a hack in the text splitting code

This particular hack causes issues in GK1, when talking with Grace, because the
width of the associated plane isn't set correctly.
"
"ae25d185d5976f9210f70c02c7951171db3497bb","2011-02-06 15:29:22+01:00","BUILD: Add HOSTEXEPRE as prefix for EXECUTABLE

the android port needs to link a shared object for scummvm
"
"51a966e9e6f57630e30f3d84a7ef24e6d2f806dd","2011-02-06 15:23:47+01:00","ANDROID: Use the official NDK toolchain

- use NDK r5b
- cleanup
"
"57bc9b3f956674e3aa90ca7c8e5f753b6f9078ea","2011-02-13 11:28:33+01:00","ANDROID: Allow monolithic builds to run

this gets rid of the 'no plugins found, go to market, kthx' message,
which doesn't make sense on monolithic builds (market only has
ancient apk's anyway)
"
"29d1df94db1c2c16646eba116591456fdc0d65a4","2011-02-06 15:38:42+01:00","ANDROID: Allow out-of-src-tree builds, cleanup

- move all android specific make stuff from module.mk to android.mk
- don't create automatically generated files in the source tree
- don't fail when building outside of the source tree
- clean android build files on 'make clean'
- cleanup
"
"8de5edde9599b6ca00c23e753c00676d7bc9b335","2011-02-06 16:03:52+01:00","ANDROID: Protect port files with our define

get rid of -DANDROID and -DANDROID_BACKEND
"
"bf237c8d2c270014a95c40b7567db80ed787a67a","2011-02-06 19:37:17+01:00","ANDROID: Unify log prefix

adb logcat ScummVM:\* \*:S
"
"21c2dda5ba42d65cba71c3f27bb6679ecdd01c9e","2011-02-06 19:38:15+01:00","ANDROID: Use and reinit texture on screen changes

- EVENT_SCREEN_CHANGED must happen _after_ we have a new surface,
not when the the old surface vanishes. fixes port on galaxy tab
- textures have to be redefined with glTexImage2D() to make
glTexSubImage2D() not fail on screen changes
"
"ea2cfc44c0ce91267aa87173cfd02eb1c69d3147","2011-02-14 17:51:58+01:00","ANDROID: Fix assert() to log output

add bionic replacement __assert2(), so we actually see what's happening
"
"2586e15e4ea6a365eced1888759630907b6b5870","2011-02-14 18:48:33+01:00","ANDROID: Fix JNI calls for the timer thread

JNI calls can happen through the timer mechanism (hence from another
thread). Attach the timer thread to the VM to prevent assert()s
"
"ad94ac343a7159578c3091f27e2acfc7149bd583","2011-02-14 20:25:17+01:00","ANDROID: Adapt to [set|grab]Palette RGBA->RGB change.
"
"7ecab9a982e68e6f500b8c056987acafb1ae1552","2011-02-14 20:27:54+01:00","TOON: Disable quick save/load from the main menu screen.

Saving is pointless and loading doesn't work right. Unless it's
really easy, making quick load work from the main menu is hardly
worth it, since it has a perfectly usable load button already.
"
"31539697dc4551790f8da0b0a20f4f8008b1b1aa","2011-02-14 16:01:04-05:00","SCI: Fix loading pre-version 28 saved games

This is a regression from a9b051beff3157e1aa8
"
"50129178efcd2a6defae679f059bd9de796a3122","2011-02-14 22:00:01+01:00","WII: Fix 16bit cursors on some HE games
"
"8ef4594f9b9016f6b93fc176dd8aea8bdd7d85cf","2011-02-15 01:30:33+02:00","SCI2+: Set the correct segment for SCI32 strings/arrays when loading

This was an omission, observed after a discussion with clone2727
"
"ee09af6a12e26f100a9a0457dcb552707abd4288","2011-02-14 22:38:12-05:00","SCI: Fix loading SCI32 games

The frames/items in GfxFrameout need to be cleared upon loading
"
"f1030515d0875c2d306f0e97517f8dfac1375f6c","2011-02-14 23:14:13-05:00","GIT: Ignore Visual Studio precompiled headers folder
"
"c45d141dae4b022fa7e3cc3a9b6b4b1d90117fe0","2011-02-15 19:50:57+11:00","TSAGE: Bugfix to load walk region areas correctly
"
"402ac930fe440af42354bd0c635abb07a69cfc4a","2011-02-15 10:15:21+01:00","HUGO: more refactoring and encapsulation
"
"9505becefa114e9da12d3ef40de16f0a46527a2c","2011-02-15 11:25:54+02:00","SCI: Removed several redundant helper functions

Removed validate_arithmetic(), signed_validate_arithmetic(), validate_unsignedInteger() and validate_signedInteger()
"
"c9e3636863a665e296bb60db5b030cdb726cbe41","2011-02-15 11:26:45+02:00","Merge branch 'master' of github.com:scummvm/scummvm
"
"96df5dfa82e6d281cbf84da1606a4639ff0a6f1f","2011-02-15 21:55:38+11:00","TSAGE: Bugfix to correctly clear the walk region intersection lists when changing scenes
"
"489a4598a12f66cb9450b574f874b50578ea00e6","2011-02-15 12:10:55+01:00","MOHAWK: Detect the French version of Rugrats.

Thanks to Strangerke.
"
"f9423570adc45f512586171abe3bdc3c7286273c","2011-02-15 23:38:57+11:00","TSAGE: Bugfixes for the player pathfinder
"
"2f3d3d3d9cf2a5e87f056a3539560dd0807d017b","2011-02-16 00:04:55+11:00","TSAGE: Another pathfinding bugfix
"
"acc8e6319aa8ac031ccb964ef1d3881d0ad9d225","2011-02-16 00:11:17+11:00","TSAGE: Yet another pathfinding bugfix
"
"fb86bbff332f461a80ad632e8dcce424059c20c0","2011-02-16 00:35:47+11:00","TSAGE: Replaced some old delete's with proper calls to remove() method
"
"5d619c5bf80a638b9bd62ee0878b3fab14b19514","2011-02-16 00:36:38+11:00","TSAGE: Fix to Scene 50 for player to correctly face the direction he's moving towards
"
"bd64c5078c3d07bb9cf80ef8e72f151bec8beec4","2011-02-15 15:43:10+02:00","SCI: Cleaned up kMapKeyToDir and removed an incorrect heuristic

The heuristic in question was used to detect the pseudo mouse control
functionality, however the change in controls seems to have occurred with the
transition to cursor views. Fixes keypad control in Conquest of the Longbow.
Moreover, the code also checked for key scan code 76 when checking for the middle
keypad button, which seems to be a mistake, as that case never occurred.
"
"ea679567683c8e43255a0636e32ccf7c683c6997","2011-02-15 10:45:43-05:00","VIDEO: Add some stubs for QuickTime edit list work

The edit lists are actually read in now. Minor cleanup of streams as well.
"
"325a301a4feac17d8aa4bba80c6112116a1ceb1a","2011-02-15 11:02:01-05:00","SCI: Fill in the remaining Mac-specific kPlatform subops
"
"2f0b35bbb51dc94c379d48ef336dcb8502bb2db5","2011-02-15 19:30:15+01:00","HUGO: Replace cypher by a global variable, clean engine destructor
"
"2d094af90c41e2c57f451b687490e95344e7ef74","2011-02-13 16:49:32+01:00","MOHAWK: Implement Mechanical opcode 200
"
"a76badf30746aea70745f0bf5bb87d44df2d9116","2011-02-13 16:57:32+01:00","MOHAWK: Implement Mechanical opcode 100
"
"7e52ae2f5e3534ba0c2f425361c4a3bc51f813f4","2011-02-13 17:14:56+01:00","MOHAWK: Implement Mechanical opcodes 203 and 104, snake box
"
"30f1eead192b8cf6a8c3e3526d9ab6c01670a0aa","2011-02-13 19:04:53+01:00","MOHAWK: Add a workaround for a missing image when going up the stairs in Mechanical.
"
"c6e86c672bdd3edddad6414a70646f4d458beee2","2011-02-13 19:07:06+01:00","MOHAWK: Implement Mechanical opcode 201, staircase init
"
"fc605427a8021029b1e20ea7fca38eef450cc209","2011-02-15 21:24:05+01:00","MOHAWK: Put togeter the Myst stack classes in a namespace
"
"369db4fdfd5dac16858505f91cb37f4ae386fe80","2011-02-15 21:42:00+01:00","MOHAWK: Shorten Myst stack classes names
"
"83f66284a71b496f761b06d675dd9637d863809f","2011-02-15 22:14:23+01:00","SWORD1: Adapt to setPalette RGBA->RGB change.
"
"3b9da7f03b52c57c66ba79cc28d60ffdda5ec970","2011-02-15 22:15:33+01:00","VIDEO: Adapt VideoDecoder::setSystemPalette to setPalette RGBA->RGB change.
"
"74e4b5a6cdada50fcf5ab32f73da16c356a1d16a","2011-02-15 22:52:15+01:00","SWORD2: Adapt to setPalette/grabPalette RGBA->RGB change.

Thanks to eriktorbjorn for helping me with this.
"
"2078024ee41b83f87732d9d4cdceadaba8c79609","2011-02-15 22:57:34+01:00","MADE: Revert a little behavior change in setRGBPalette.

This was introduced when converting to the new RGB data setPalette call. It
should not have caused any troubles, since start is always 0 it seems, but
better be sure about this one and keep the original behavior.
"
"2b62f6bec3639ab816f6f841218d4b19f70b201e","2011-02-15 23:22:30+01:00","AGOS: Adapt to setPalette RGBA->RGB change.

I only (minimally) tested this change with Simon 1 + 2 DOS CD.
"
"acf8679d00232aaadc01195016ca8eef97db63df","2011-02-15 23:25:12+01:00","Merge branch 'dhewg-osystem-palette' of https://github.com/dhewg/scummvm into dhewg-dhewg-osystem-palette
"
"01d511bf1b6df74254a2f6bd3007e884cd0c0dde","2011-02-15 23:32:41+01:00","TINSEL: Adapt to setPalette RGBA->RGB change.

This is done by converting the internal RGBA palette data to RGB before
calling setPalette. This might not be the best solution, but looking a bit
into the engine it seems like changing all the code to work with RGB instead
of RGBA might require some bit of work.
"
"a02454644af514c4f50b861cc718e2951d4c46dd","2011-02-15 23:40:06+01:00","Merge branch 'master' into osystem-palette

Conflicts:
backends/platform/wii/osystem_gfx.cpp
"
"3c968128ea82166d4fe1672f00d25c6aa36417f6","2011-02-15 23:49:49+01:00","IPHONE: Adapt to setPalette/grabPalette RGBA->RGB change.

This change is not tested, but should hopefully work fine.
"
"4d30c6f7c91dcf7376cb8a6711b3cc9cdc92012a","2011-02-15 23:57:35+01:00","PSP: Adapt to setPalette/grabPalette RGBA->RGB change.

This change is not tested, but should hopefully work fine.
"
"aafebe138921f3fc2c5595c7d63f95bdd0c9382b","2011-02-15 23:59:31+01:00","DS: Adapt to setPalette/grabPalette RGBA->RGB change.

This change is not tested, but should hopefully work fine.
"
"ea857a6f804d324722379f15826ead63282a5c1b","2011-02-16 00:03:21+01:00","SKY: Stop intro sound before freeing the buffer.
"
"2eb67edd0f48d60ff63207c7a561824d57cf0486","2011-02-15 23:57:07+01:00","SKY: Fix array access in debug code.

The script data is already byteswapped at load time.
"
"12fd50929533a5ba1ea26ccc1e5de0b5c3f83f50","2011-02-15 23:46:57+01:00","SKY: Restore old sequence delay behaviour.

Since f621f6a5 processSequence() waited 60*3ms instead of 60ms. Restored
that while getting rid of SEQ_DELAY. That in return allows us to relax
the call frequency again (more sleeps, less cpu hogging).
"
"a52b16ceb31eb1ae3b3005ab343011d0d9a25dbc","2011-02-16 00:02:48+01:00","N64: Adapt to setPalette/grabPalette RGBA->RGB change.

This change is not tested, but should hopefully work fine.
"
"462f06d8061748d2819371056dabc7a0e0fc456e","2011-02-16 00:04:25+01:00","DC: Adapt to setPalette/grabPalette RGBA->RGB change.

This change is not tested, but should hopefully work fine.
"
"46c5732ba54be263019f59a98d3ea7a2118e60a4","2011-02-16 00:10:40+01:00","PS2: Adapt to setPalette/grabPalette RGBA->RGB change.

This change is not tested.
"
"7d0f5c9f1cb089c0d1f89989655a640b3e837840","2011-02-16 00:14:37+01:00","Merge branch 'master' into osystem-palette

Conflicts:
engines/sky/screen.h
"
"c9a9f7b48fabd5905927b8dd5eaea037a33dd3b6","2011-02-16 00:44:14+01:00","IPHONE: Remove erroneous write in OSystem_IPHONE::grabPalette.

Thanks to dhewg for reporting this!
"
"123f81f837f62169971da10c89d0caf3866400d9","2011-02-16 00:51:33+01:00","WII: Fix OSystem_Wii::setPalette after the ScummVM upstream merge in a024546.

I accidently removed two lines when doing the merge since I read the log
incorrectly. Thanks to dhewg for reporting this.
"
"c44538a01e33e71e9f85554d343d67a7c8dfe3ed","2011-02-16 02:00:00+01:00","PARALLACTION: Fix half bright palette.

Thanks to peres for pointing this out to me.
"
"772fb6d39570e4cc6989b20fe27ec05b35f2aeb9","2011-02-16 18:55:14+11:00","TSAGE: Fix another pathfinding bug that was causing infinite loops in some cases
"
"68e468ee01b243e31b154a7fab42396c9b24e5f0","2011-02-16 09:51:32+01:00","N64: revert fix in svn r55745 and added a FIXME

The sign comparison fix requires a little more work than int->uint change, else it
throws an exception on the N64
"
"6b76c82da6bc8f6d32e140144644e355b2e59def","2011-02-16 21:59:11+11:00","TSAGE: Bugfix for SequenceManager sequences ending immediately
"
"c74537bc45706f78a1eb4e6b736644f3ebbd8347","2011-02-16 22:09:43+11:00","TSAGE: Completed Scene 50 - By Flycycles
"
"dd43dfc81c81f489d161ae66fd286ea50bb3e3ce","2011-02-16 12:25:11+01:00","GROOVIE: Simplify the cursor palette reading.
"
"60d639f366318b80c061edabb8b3f2e97a3f54e6","2011-02-16 23:25:10+11:00","TSAGE: Bugfix to correctly draw objects on-screen in double-width scrolling screens
"
"7b40f36ef1d40aabba6f96a3cb9281ce25bea419","2011-02-16 23:26:43+11:00","TSAGE: Rework the logic for showing the cursor in new scenes.cpp

I'm still not completely happy with how it's implemented, and the original code is very obtuse when it comes to cursor display; it will likely need further investigation later on so the cursor doesn't appear in cut-scene scenes
"
"36b1fe111ea20ccb83f66e675e01773376aa7f7b","2011-02-16 23:27:40+11:00","TSAGE: Bugfix to set the visage correctly in one of the Scene 20 objects
"
"145b0d83df1cbf6caecb61b5641bdf732fcf80e0","2011-02-16 16:00:42+01:00","PARALLACTION: Use signed math in fadeTo.

This fixes corruption during fades when low palette values end up negative.
"
"4115c97883fcc50b994a6fafb097d3aff69395b6","2011-02-16 16:22:52+01:00","BACKENDS: Adapt DefaultPaletteManager to setPalette/grabPalette RGBA->RGB change.
"
"d7e700f370c258a5f4786d972af3666b93b71f94","2011-02-16 16:23:44+01:00","KYRA/LOL: fixed hand item cursor bug

This fixes a bug when loading savegames with different active hand items via GMM. The mouse cursor was not set to the active hand item in these cases.
"
"e23696d90077bbda05421a72ee3290bb00e52b22","2011-02-16 16:31:22+01:00","KYRA/LOL: add comments for last commit
"
"84db0f60b02414b2f223da190f2797cd9381df8d","2011-02-16 16:32:26+01:00","Merge branch 'master' of https://github.com/scummvm/scummvm
"
"758e4958724bf557013e587789425bed0bc1a6a5","2011-02-15 21:47:29-05:00","SCI: Add support for the KQ5 FM Towns resource format

Thanks to alexbevi for providing details on the format
"
"e19d6a2462c559577a1009f20e1fc6bc7a7ba730","2011-02-16 13:44:34-05:00","SCI: Add workaround for uninitialized read in KQ5 FM Towns

Thanks to alexbevi
"
"bfcf0e85b4b1c5cdd18c710460884e6f39bd8086","2011-02-16 13:51:45-05:00","SCI: Fix Mixed-Up Mother Goose FM Towns

Thanks to alexbevi
"
"8156c70f77ea5a75b60dfb96f467dc540cead9ae","2011-02-16 14:52:01-05:00","add TSAGE to the engines list
"
"75c99ac175c235956b76cc230c6bd44e42de58eb","2011-02-16 14:58:22-05:00","TSAGE: fix tokenization issue in SYNC_ENUM in GCC

This needs to be tested in MSVC to ensure it doesn't now break Windows
builds with a different error ;)
"
"1a84b04ce139cb026cb4a90dea6b8ce2b6fd716c","2011-02-16 15:32:47-05:00","Merge branch 'tsage-linux-compatibility' into tsage
"
"b5d1c669158951d4ea1633d3c10c58729d28fda5","2011-02-16 23:30:03+01:00","KYRA: Set type for NULL MIDI driver to PC Speaker.

This avoids a dialog about MT-32 to General MIDI conversion shown when running
Kyrandia 1. Formerly the NULL MIDI output type was set to General MIDI, which
caused the aforementioned dialog to show up, because Kyrandia 1 has no General
MIDI tracks.
"
"3c454685c21a7e2f659c13899959f1cf56e93285","2011-02-18 00:02:21+11:00","TSAGE: Started fleshing out the SoundHandler class
"
"266806d8925330ec0d9e020fafffd74a2cb272e6","2011-02-17 13:13:30-05:00","SCI: Fix Mac icon bar palettes

The Mac icon bar uses a palette from the executable and keeps those entries in the palette constantly.

In addition, we're now performing gamma correction on the Mac-based colors so that they are in the same gamma as SCI. The color matching now works with this and using the same color finding as the Mac Palette Manager.
"
"d3e3eca6a30d8aa9f23b1811b3ae86b8d2419b7f","2011-02-17 13:28:34-05:00","SCI: Fix Mac icon bar vertical positioning
"
"ec94ef4e642b4b6ee8f9febce0fa710e79939b4f","2011-02-17 21:11:13+01:00","TOON: Fix TextResource on big-endian.

Fix for bug #3183943 ('TOON: No speech and no text').
"
"be7fd9be5090cff9035378d0ce17280514a4b534","2011-02-17 21:45:45+01:00","TOON: Initialise all locations.

This stops the location save code from walking off the end of _rifBoxesFlags
due to _numRifBoxes being invalid.
Fix for bug #3183934 ('TOON: Crash on save').
"
"41a5fc8476620d138227c369e2a2767e6e04f6d7","2011-02-17 22:20:22+00:00","TOOLS: Add debug output of output file position to skycpt tool.
"
"399b59a583b0ac92941cfe7756712d80970e47ee","2011-02-18 08:11:55+01:00","HUGO: Avoid duplicated code in functions related to HUGO.DAT
"
"d16b89d8f97430cdb1b7847ab6ec759e2b223780","2011-02-18 20:21:07+11:00","Merge of GCC compilation fixes
"
"da77a057d17c3985632e704b5cff88ef6729beed","2011-02-17 14:35:11+01:00","TUCKER: fix #2627967 - Slow Walking

The waitForTimer calls in fade*Palette are actually
duplicated ; mainLoop already handles timing.
"
"d9140ab62683c624a8f2fc294df027cc94c01c84","2011-02-17 15:02:34+01:00","TUCKER: fix #2628056 - Text Dialogue is out of sync

always synchronize text with speech sound. Note, some
subtitles present in the datafiles are inconsistent
(written text different from spoken).
"
"a0d74d0459a05bcbd3f1973eb2c072553c12d13d","2011-02-17 15:16:57+01:00","TUCKER: fix #3106520 - Prison water drop leaves a line
"
"3557ff5747cbbc8578f2b7ef934b3344d252e4a0","2011-02-17 15:42:28+01:00","TUCKER: fix #3106536 - Punk stuck (moving in background)
"
"e552b5a8c3b36871b40be49855553865d2471a66","2011-02-17 16:09:38+01:00","TUCKER: fix #3106542 - Ego drawn behind background

Looks like an original game glitch, the location 14
background bitmap contains some pixels in range
[0xE0-0xF8] which is usually reserved ; add workaround.
"
"0bffd77dfefc33d5c6490383751f366f1b7ee0ed","2011-02-17 18:43:20+01:00","TUCKER: fix #3106766 - Bubbles in Plugs Shop too heavy
"
"34f428ea9123840f1a4d45f0f3a9cc9fcd9d1b9e","2011-02-17 18:47:58+01:00","TUCKER: cleanup
"
"8a5078966290a3fbc0ee78d662cafa66a910b029","2011-02-17 16:11:55+01:00","TOUCHE: fix op_not/op_neg opcodes naming
"
"8cddb2a401f7604bc7ffa7d7dfcafbc90cf2bada","2011-02-18 17:18:27+01:00","Merge branch 'dhewg-android'
"
"55a6e5af760aa365ecd74564a9a5ec94cbf4f873","2011-02-18 18:39:26+01:00","AGOS: Fix mouse cursor color in Simon 1.
"
"106380d481a2fe841d89ff05ab0a54f4cdaee918","2011-02-18 20:11:46+01:00","DC: Don't use $(VER_REV) with git

It seems unlikely that git will ever be able to produce a $(VER_REV)
of 6 characters or less (the requirement for the version field in
IP.BIN), so don't even try to use it.
"
"1b41de4ad86f054380dc444a127d0ff6f6aa04bd","2011-02-18 19:47:13+01:00","ANDROID: dist target for buildbot
"
"106253b8b9a2ff1e764cd8bfc4871141664eeb35","2011-02-18 21:32:37+01:00","ANDROID: Formatting

and hoping for buildbot to pick up the toolchain now
"
"84e632cc9d62e41bd7d87530c1e5f0e0212713d2","2011-02-18 21:38:26+01:00","ANDROID: Formatting

maybe now?
"
"7b5792d6d2c605eded73118a8f73ceb2c29627e1","2011-02-17 22:24:39-05:00","SCI: Fix window height for some Mac SCI1/1.1 games

Some games have removed the menu bar from the screen. This also fixes King's Quest V's icon bar.
"
"a6593c294efc848460126f3bd0270d96053fab9e","2011-02-18 19:00:43+01:00","ANDROID: Disable mt32emu and timidity

mt32emu is using floats everywhere, and we don't have hardware-assisted
floating point computations on this armeabi. most (if any) devices can't
handle this
timidity doesn't make sense, because there's no daemon to connect to
"
"ec559360ab48b2c1044dd36ae54e01d9a180055c","2011-02-18 22:24:32+01:00","HUGO: Move several short function bodies from headers to cpp files
"
"3a86b5f285ec97b32afda7d8fc0eea35659f1c75","2011-02-18 22:25:59+01:00","ANDROID: Remove outdated build instructions

See http://wiki.scummvm.org/index.php/Compiling_ScummVM/Android
"
"81a3538706c768c45e4166c1be10045355dce459","2011-02-18 17:51:49+01:00","TUCKER: fix #3106714 - Wrong animation after TV off

Some negative values are prefixed by 2 minus signs, skip one
before passing the string to strtol.
"
"2ad969bcac7c46fe0ee8dce152e243c803f5ebae","2011-02-18 22:43:38+01:00","HUGO: Remove extra spaces at end of lines
"
"1055c8a8d03416007f7f8dfc89f197c791c7ce98","2011-02-18 22:56:34+01:00","SCI: Fix compilation using MSVC 9
"
"0962f332cb42afaf9d83bc0b3a7434f255c83835","2011-02-19 12:11:09+01:00","TUCKER: fix #2872348 - walk bug by switching places in museum

Looks like an original game glitch, prevent hard-coded sequence
execution on location switch (after using map).
"
"c53abb0abaf62ca3f2e510894148304da803fa73","2011-02-19 15:37:24+01:00","TUCKER: fix truncated action string in english version
"
"855b676cd408e4923c20e24ca467c813b1a944da","2011-02-19 15:52:03+01:00","TUCKER: cleanup, removed unused variables
"
"f5bfe8eb1160a84199fb0ba1b3c4c8cb02008c5b","2011-02-19 17:14:59+01:00","QUEEN: fix #1858081 - Jetty: 'sign' at wrong position

Off by one error in original object trigger ; since this is
minor glitch, this patch only fixes new game state (ie. existing
savegames are still affected).
"
"d7422de7f78e6d4d88a32cad3994a5910e2cced1","2011-02-19 18:04:19+01:00","ANDROID: Fix make dependencies for parallel builds
"
"4e88d75eb6db2f7bb88d41ee4b8598f0e7f93bd9","2011-02-17 17:33:36+02:00","SCI: Refactored the reg_t related operations and comparisons

This refactoring reduces a lot of code duplication, allows for better control,
makes the code more readable and allows us to remove a lot of now unneeded
workarounds
"
"914fe95903373ebf953e92aba9c2d0ef90125ad9","2011-02-19 20:12:24+02:00","SCI: Added a FIXME for the KQ5 FM-TOWNS resource handling code
"
"7cf482e7217cd2f88129c4d1b925f085d8043cd0","2011-02-19 20:30:57+02:00","SCI: Reverted r914fe95, and silenced a false positive warning
"
"1606ff1d4eee88b9616cf849fce54e172cb4a8ba","2011-02-19 19:57:19+01:00","SAGA: Convert Gfx::palFade to the setPalette RGBA->RGB change too.
"
"feb0efe767ce19c353b1b0ca2d0e8188b97ae740","2011-02-19 16:18:15+01:00","ANDROID: Formatting
"
"435069fe4a548fe872ab7df0c13df3726359e155","2011-02-19 18:26:57+01:00","ANDROID: Supress warning
"
"229e3ca5bf4bbc91b6bf85a5fe6dd9356a97a5ef","2011-02-19 16:49:45+01:00","ANDROID: inline some GLESTexture members
"
"adf2225eb414b04a0e58f1fad221cdef27017391","2011-02-19 17:30:30+01:00","ANDROID: Move helper defines in a new header file

- added a few macros for convinience
- use them
- replaced CHECK_GL_ERROR with GLCALL
- spam GLCALL
"
"d05fb0cba653ca018f30e4c2cbf3b1494e13fedb","2011-02-19 21:30:31+02:00","SCI: Some spacing fixes and typos
"
"3aba54b8b0c6d5272d9b485738804a9f8bfaaa87","2011-02-19 20:24:54+01:00","OPENGL: Fix documentation of OpenGLGraphicsManager::MousePos.
"
"9954eb5a996a137a9a26abb766212e3fa471e3fe","2011-02-19 20:40:45+01:00","OPENGL: Get rid of adjustMouseEvent.

Rather than that I introduced a function which converts hardware screen
coordinates to overlay / game screen coordinates.

The logic which converts mouse movement events with hardware screen
coordinates to overlay / game screen coordinates is now inside notifyEvent.

This is still broken design, since one should not abuse an observer for that.
"
"32d0e4c15fb33f80db194087850466664a43516a","2011-02-19 20:44:06+01:00","OPENGLSDL: Avoid warping in warpMouse when the logical coordinates did not change.

This fixes a slight move of the mouse cursor when the hardware mouse position
is at a subpixel from the logical coordinates.
"
"b26f30b98793c522265a3eeb48fb3b41034663c6","2011-02-19 21:19:45+01:00","DRASCULA: Adapt to setPalette RGBA->RGB change.
"
"e21d6e0d1120e917a4a019a4070ec4db5e988b9b","2011-02-19 21:42:34+01:00","Merge branch 'osystem-palette' of https://github.com/lordhoto/scummvm into master

Conflicts:
backends/platform/android/android.cpp
engines/sci/graphics/screen.cpp
engines/sci/graphics/transitions.cpp
"
"accab0e00f82ce1fe081c4f71fdab6326417620c","2011-02-19 23:01:40+01:00","MOHAWK: Change bitmaps to use RGB palettes.

Thanks to clone2727 for reviewing this patch.
"
"92fac11c5feb21e16d8a7b895cc14ec4f3173d46","2011-02-19 23:12:53+01:00","MOHAWK: Update LBPaletteItem for RGB palettes.
"
"ef38e4f57f32f495b7f1d8289306e6d829394aeb","2011-02-20 00:18:27+02:00","SCI: Moved the gcCountdown() code inside the op_callk case, since that's the only place where it's used
"
"28dae010fb859b0b42e4f433bc4f72b08c036fbb","2011-02-20 00:19:08+02:00","SAGA: Fixed palette setting inside Gfx::setPaletteColor() (thanks to LordHoto for noticing this)
"
"6c123974c0537609318583ffe23da386129eb6ea","2011-02-19 21:55:25+01:00","ANDROID: Fix cursor when hotspot coords > 0
"
"90fa5087dc884aa2646cee4024631e62fffbe74b","2011-02-19 21:58:50+01:00","ANDROID: Fix cursor scaling
"
"292f1971426de8d7947ed2d2792902c6bfef1424","2011-02-19 23:44:36+01:00","GRAPHICS: Remove note about alpha channel removal in PaletteManager.
"
"10e2cec6b95f0e185f0522fdc7f10a076de24c7e","2011-02-20 03:20:06+00:00","M4: Updated for OSystem Palette RGBA->RGB Change.
"
"e6c7544fe296b7dd427265151a6170f3a4eb05bf","2011-02-20 05:43:04+01:00","GRAPHICS: Fix cursor palette buffering after RGBA->RGB change.

Thanks to clone2727 for noticing this.
"
"f8df58f9578fbacaea0910435e42c096c20226c7","2011-02-20 04:47:54+00:00","MOHAWK: Fix Un-initialized Read In Myst Library Tower Rotation Control.
"
"098581b3b5ec22f2e50075414f74f378ad24c2ae","2011-02-20 00:43:18-05:00","GRAPHICS: Use the DirectBits size instead of the overall PICT dimensions

Fixes some Myst ME images
"
"5091f846a78c82d619b41530ff670de04bc05387","2011-02-20 00:45:59-05:00","GRAPHICS: Switch PICT's palette from RGBA to RGB
"
"a92528636193220d29dcc75e5b4899a1e80cfa5f","2011-02-20 06:12:21+00:00","COMMON: Correct NE Resource Loader for Osystem RGBA->RGB Palette Change.
"
"c9223b9b9b65242ed41906f960c5d2017a8e1ea5","2011-02-20 10:37:41+01:00","HUGO: Some more refactoring
"
"bb51d090a83c4c038050b8efe5ab98ff900974c2","2011-02-20 10:39:32+01:00","HUGO: Fix a bug in setCursorPal() introduced by recent palette modifications
"
"ae88f41596b1331496db4dce30e84d5948244518","2011-02-20 12:20:40+02:00","SCI: Slight cleanup
"
"93f25b73be2b6aca7d5ea0321c8aba5252e86d54","2011-02-20 11:32:00+01:00","HUGO/TOOLS: reorder things in HUGO.DAT, move from RGBA to RGB
"
"38f70f66f0e95cac7b81cd770326979bf76fa625","2011-02-20 11:33:17+01:00","HUGO: Fix crash when Hugo.dat not found (or wrong version detected)
"
"98cd1b6e0c8aac5a88e2058c37801ab20d2ac462","2011-02-20 11:54:45+01:00","MOHAWK: Add detection strings for Harry and the Haunted House
"
"33f3c1bc98ad39fa1b3a394570ca0b92d16fcb1e","2011-02-20 11:30:46+01:00","NEWS: Mention merged GSoC tasks
"
"cc129d94ca5b52f5a69ae76c81aff2286d389ae2","2011-02-20 11:34:59+01:00","NEWS: Mention Wii fix from 50129178
"
"9d7548b2a1eceafbed4db0153d43cee6ed5af9b2","2011-02-20 11:46:07+01:00","NEWS: Mention recent android fixes
"
"adf6c8f09eab48f9268b9e96c1e546ea550fa810","2011-02-20 12:03:44+01:00","SCUMM: More DISABLE_TOWNS_DUAL_LAYER_MODE mess

Uglify more code to fix compilation for DS
Only compile-tested
"
"417dd6314b5355f74423cb2de22c18da1b0e968b","2011-02-20 11:47:10+01:00","MOHAWK: Fix LB palettes which don't start at 0.

(Thanks to LordHoto for pointing out this was crazy.)
"
"805acaa81e836761fc5dee8f94b5f09e7831ed99","2011-02-20 12:36:08+01:00","MOHAWK: Ignore out-of-bounds LB words.
"
"2f312e9e1a5a577ebf167ba004ffea19a767c7de","2011-02-20 13:03:28+01:00","DS: Disable symbol garbage collection

Only applies when using loadable modules.
This requires a second compile run or black voodoo linker tricks.
Not implemented at this time. Disable it, so we get DS build failure
reports from buildbot (which are useful with all the DISABLE_EVERYTHING
defines).
The resulting binary might be too big to be usable.
"
"9fa6b48e1ae574c0af5be3ed2f9815c3d98be655","2011-02-20 13:42:40+01:00","MOHAWK: A zero matchFrom matches everything.
"
"00f85fb58056fef0eb9e6993990393ee1a195b9b","2011-02-20 13:43:04+01:00","MOHAWK: Fix kLBAutoSync notifies.
"
"42ec234a1f32724cc713bd045cdb96d871c7d2c0","2011-02-20 13:43:35+01:00","MOHAWK: Make LBLiveTextItem call done() when finished.
"
"0fe3ecd6d7091d347fb1c2b7c899de5ad2c35b28","2011-02-20 13:44:19+01:00","MOHAWK: Don't display LiveText phrases too early.
"
"fe250d275564e9dfcfbbf16926852d9cfcf17fc1","2011-02-20 01:19:20-05:00","SCI: Don't error out when a Mac resource has size 0
"
"dceb1391cb92126891b805494b4645272c7fddbe","2011-02-20 01:20:04-05:00","SCI: Cache all icon bar images from the start
"
"257bae431ac7e9a966e0cc1e41c7f10dc0125092","2011-02-20 11:47:52-05:00","SCI: Fix KQ6 Mac video positioning
"
"0933325b7cc6d512327a02716f95748fc9a16bba","2011-02-20 12:35:15-05:00","SCI: Add support for enabling/disabling Mac icon bar images
"
"16be240ab1260117c0c9affe9cb4037e847a5df2","2011-02-20 21:30:23+01:00","KYRA: Fix regression in Screen::setInterfacePalette.

This fixes an out of bounds write introduced with 9216c7e.
"
"75ee5af7c964ec9b37d9c0ba3cbaafb2b0d737de","2011-02-20 21:33:10+01:00","GRAPHICS: Remove leftover RGBA reference in PaletteManager documentation.
"
"bb2daae936783e844dcc00a3b84e7f811e4f7264","2011-02-20 21:33:56+01:00","AGI: Remove leftover RGBA reference in comments.
"
"10c7c5327a24d9274c83d0b29a00cffbbced23fc","2011-02-20 21:36:39+01:00","CRUISE: Remove leftover RGBA reference.
"
"22489cbf8ec58e26fe1b3db41c4f6d398b34fd30","2011-02-20 21:37:07+01:00","TESTBED: Adapt documentation to the palette RGBA->RGB change.
"
"9afc89e67c287c3253e20a0a724774e84fa244f3","2011-02-20 21:43:24+01:00","GRAPHICS: Let PNG::getPalette take an uint16 for the palette entry count.

This is in analogy to r55742 / 2f08dcb.

I also took the freedom to clarify that the PNG loader uses a RGBA palette
format.
"
"601e8c0de128899d78353a6b1ee49181c92f55f1","2011-02-21 05:18:21+02:00","SCI: Added a custom modulo reg_t operator

This version only handles signed integers. The modulo operator was changed in
SCI0 late (Iceman, and perhaps all SCI0 0.000.685 and later) so that it handles
negative numbers as well. We need to see if there really is a need to keep two
different modulo operators (which will only be necessary if any SCI0 game asks
for the modulo of a negative number by mistake, or a number larger than 32767).
Thus, error out in such a case for SCI0, so that this can be investigated
properly
"
"969a96622d59937458ed560110927cb3a275cfee","2011-02-21 05:22:08+02:00","SCI: SCI1.1 script also compare pointers with integers (e.g. QFG3, room 440)
"
"8a52e4bf0055104047afd70ba2c6de0fcb0b630a","2011-02-21 06:37:03+02:00","SCI: Throw a warning instead of an error if there ever is a modulus calculation
with negative numbers in SCI0 games older than 0.000.685
"
"4766774b3dbd8824276ad7ff2e3c916b6dc1de37","2011-02-21 20:43:54+02:00","SCI: Fixed script bug #3040722 in QFG3
"
"0ec91de76df9fbe452bc62775d337114179b2fe0","2011-02-21 14:32:21-05:00","SCI: Spell 'canister' correctly
"
"ff597ec048fe4383b5f3f5ac3d235bbac9f0c8e2","2011-02-22 01:51:50+02:00","SCI: Added support for patching save/load dialogs in SCI2 games
"
"4402153a095e152132655c13a94e1098375fe0d3","2011-02-21 20:22:22-05:00","SCI: Fix disabled Mac icon pseudo-shading
"
"6db22dde64ca00c31d99c20790063f9ba782552d","2011-02-21 20:32:30-05:00","SCI: Fixed freddy's Mac icon bar palettes

(hopefully for good now)
"
"91287b2e184b9755662b5fbb6f7d443a02dc018b","2011-02-22 01:47:11-05:00","COMMON: Add basic PE EXE parser

Much thanks to fuzzie for her assistance
"
"d5c494a239ec4380dca7bbbbe68e0aa453c2a658","2011-02-22 02:02:00-05:00","COMMON: Add default Windows PE types
"
"07c054d6c63bec5a9abd1b77781958f4a83969bc","2011-02-22 07:17:22+00:00","CRUISE: Reinstate Copy Protection errorneously disabled in r51834.

r51834 (f4d38ccd407f2a007050d69e4841ba7fc53cd401) was a commit to add
English Floppy version of LoL to Kyra, but a file was accidently
committed to Cruise as a sideffect.
"
"814678b24ef5da11da5f043ec1227f311658a7a6","2011-02-22 23:06:07+11:00","TSAGE: Initial implementation of more game scenes and support classes
"
"cf904b1156091c65486bf3124e3ef1d3fd1b6f8f","2011-02-22 18:52:44+02:00","SCI: Added code to aid in detecting infinite loops in scripts

When the ABORT_ON_INFINITE_LOOP define is defined in vm.cpp, the VM will now
abort in cases where a conditional statement is followed by an unconditional
jump (which will most likely lead to an infinite loop). Aids in detecting
infinite loop bugs such as #3040722.
"
"8e7178a538d21c815b44692f30657600b4f866bc","2011-02-22 19:06:29+02:00","SCI: Fixed the detection entries for PQ4CD and QFG4CD
"
"a9620d938dc7031e47533f0dadf3295cd6488ca8","2011-02-22 19:11:35+02:00","SCI: Some work on kRemapColors, and added a note that it operates on an RGBA
palette
"
"3995610ce376e49208ba9489d2079c5f6beac1e3","2011-02-22 11:14:38-05:00","COMMON: Add a convenience function to ignore the language field
"
"3a3fd9f009e253b9943dcbc56324a0c935324d04","2011-02-22 11:19:47-05:00","SCUMM: Use the new PEResources class for HE cursors

Putt-Putt Saves the Zoo HE72 still works fine for me
"
"bc39d327acd6fe5622848f7f98f4159c0e4afb4c","2011-02-19 08:58:20+01:00","MOHAWK: Implement Mechanical elevator rotation
"
"e507115405d50a2e2f8c006238b33f0910db2354","2011-02-19 09:06:59+01:00","MOHAWK: Implement Mechanical elevator movies
"
"285d33d9c2aca243ede2af3117c7c94e6dd818e2","2011-02-19 10:03:06+01:00","MOHAWK: Implement Mechanical elevator top movie
"
"db7dea36cff7fc398976724b05c927a635574161","2011-02-23 01:49:17+02:00","SCI: Fixed bug #3049515 - 'MOTHERGOOSE CD: Tommy Tucker lock-up'
"
"a2a0b13de2cd6fb28787b2821466f3ef7c2210ea","2011-02-22 20:01:19-05:00","COMMON: Begin to merge some NE/PE code

The ID classes are now common to both. The files have been renamed to better illustrate their purpose.
"
"e053373dd344b96e9c29128b97196b3d7f9d2e75","2011-02-22 20:11:50-05:00","COMMON: Add a key color field to NECursor
"
"0d6069e5710714230b243972eeff1003cb0ca70d","2011-02-23 19:46:32+11:00","CRUISE: Bugfix for #3188309 - black text at end of introduction
"
"7a5b633bf9b42fadbbe443f2e33caa0cf380cb10","2011-02-23 22:16:02+11:00","TSAGE: Added proper cursor showing when the scene changes
"
"a01395bb457bd572cdaba824ef4ddd42d8b18766","2011-02-23 13:13:53+02:00","SCI: Cleaned up and segmented the animate code in order to make it a bit more readable
"
"5c9b1e6cbd254923e795495a992146362f49679a","2011-02-23 13:36:31+02:00","SCI: Added a workaround for bug #3036763 - 'HOYLE3 Demo: Bad Dialog Priorities'
"
"03942da718c1e0c679954c261fefac532f80a3a2","2011-02-23 22:37:16+11:00","TSAGE: Reworked code to separate Ringworld specific code from core engine classes
"
"04915a19bc1754ac28ead1b46a55c99c952c5fd7","2011-02-23 23:06:54+11:00","TSAGE: Added code to the sound handler stub methods to properly flag sounds as ending
"
"3a39af766514993a526d1a423070f9ba578bf1d8","2011-02-23 23:07:38+11:00","TSAGE: Added missing death sequence in scene 20
"
"336186900df37cd201f6976674d2f53443074dee","2011-02-23 13:00:09-05:00","SCI: Don't name a variable the same as its function

Silences a gcc warning
"
"0032db14aba32ea9507ddda9002334f29d700f86","2011-02-22 22:13:44+01:00","ANDROID: Sync toolchain flags with NDK r5b.
"
"89986edf4d012422124f7e7478844d3100206158","2011-02-23 14:04:20+01:00","HAIKU: Remove -fhuge-objects.

Not required anymore, patch by Begasus
"
"550cff84f81f016a2b54700e170b4cd9712793f3","2011-02-23 13:52:12-05:00","GRAPHICS: Add support for PE FON files

This hopefully will work out of the box, but requires testing
"
"0f9ad1a52f8df62e5d01b8a190c8d5e87e1ac8bd","2011-02-24 00:10:01+02:00","SCI: Added a patch for script bug #3034579 - 'KQ6CD: Missing speech'
"
"e2aafb603e279506c85d00f4b9fb698934994b2c","2011-02-24 00:09:25+01:00","SDL: Move focus rectangle dummy implementations to .cpp file.
"
"466030443a925b27625a7151679e252dc956c817","2011-02-24 01:11:16+01:00","SDL: Add a debug focus rect implementation.

This implementation currently draws a rect frame around the focus rect area.
"
"87f260a66c94f4632a2f646dd64f45f9f02d027f","2011-02-24 01:15:27+01:00","SDL: Add config file variable to enable the focus rect debug code.

The variable is named 'use_sdl_debug_focusrect' for now. The debug code is
still only enabled, when a ScummVM debug version is built though.
"
"9ad4ad1abc75e6393617ea9c5ca8fdfc2c8de6c4","2011-02-24 02:17:28+02:00","SCI: Fixed two bugs related to music fading

- bug #3037594: 'KQ5: Music not fading when brigands leave temple'
- bug #3044844: 'LONGBOW: Intro skips each first verse of song'
"
"7f139f8dcfab740d6dacc2ea5e3a916618e7ce8f","2011-02-24 01:19:10+01:00","SDL: Output a warning in case the focus rect does not fit inside the screen.

Sadly it seems the engines do not care whether their focus rect really fits
inside the game screen. To ease finding such instances (which might cause odd
clipping by the backend) I added a warning for them.
"
"e04d983f683871d455394fcbf50e2f964aaad365","2011-02-24 04:24:58+01:00","SDL: Use the SDL_Surface's pitch in copyRectToScreen.

This fixes messed up graphics, when SDL decides to add padding bytes to the
lines of an SDL_Surface. Formerly the code always calculated the pitch via
w*bpp, which of course does not work in all cases.
"
"f5e10f33f59dd21c82768dd12dd13cc9e021c760","2011-02-24 05:11:00+01:00","OPENGL: Properly setup pixel data alignment.

If we do not do this, we might end up with a default alignment of 4, which will
fail (as in the graphics will be messed up) in case the screen resolution is
not divisible by 4.

Thanks to digitall for noticing this problem and finding out about
GL_UNPACK_ALIGNMENT.
"
"87a6398f628f94b095bfd87f320a633e3649bba8","2011-02-24 18:36:22+11:00","TSAGE: Standardised class naming for game scene logic
"
"597984abc32f04ba1209e3b7dcc671ba951110b0","2011-02-24 22:24:19+11:00","TSAGE: Bugfixes for Scene 60 - Flycycle Controls
"
"a796f7843d96f2c975b593b357955e74fea4c6df","2011-02-24 14:51:05+02:00","TINSEL: Added enhanced music support for the German CD 'Neon Edition' re-release of DW1 (bug #2827022)
"
"9748e2378bdf3d2b3b8176c44b02999b4d92c50f","2011-02-24 14:56:53+02:00","NEWS: Added news entry for the enhanced music support in the DW1 German CD 'Neon Edition'
"
"8bd01f69b202e12ba656524a8e64691b5fb08414","2011-02-24 16:35:19+02:00","SCI: Added a workaround for script bug #3044500 - 'SQ1EGA: Skimmer-Buyer Dialogue Portrait Backwards Anim'
"
"d81bb9794f59787ced1edde4c867aa307cec68fb","2011-02-24 17:08:51+01:00","OPENGL: Prefer single operation texture updates.

When doing glTexSubImage2D we do not need to assure that the source data has
the same width as the texture when we want to update the data, we just need
to assure that the width * Bpp cound matches the pitch.
"
"020a413247b7963242f0058c8618a9140f432f3f","2011-02-24 18:36:57+01:00","OPENGL: Set _gameTexture to 0 after deleting it.

This fixes a segfault when trying to use the OpenGL backend with 16bpp games,
however this does not make Last Express nor Loom PC-Engine Japanese work for
me. They now fail with a 'Pixel format not supported' error.
"
"3194d2dac6669c421d02a33b4c78348d81a27cbb","2011-02-24 18:55:10+01:00","SYMBIAN: Changed sound path to audio.

Signed-off-by: anotherguest
"
"fbf41fc66a5e6c24903e4fbe51b28c9f03ed1628","2011-02-24 19:59:36+01:00","HUGO:

- Increase savegame version, as it has changed due to RGBa->RGB modification
- Fix regression in restorePal()
- Implement load from GMM
"
"2e1497d835aad64dbe31bb89fb0f0dcb2596a1c4","2011-02-24 20:04:15+01:00","GIT: Simplify and improve filters for MSVC
"
"273a324a7111608329eea4ee2e8c0c3d1636aa7c","2011-02-24 19:47:08+01:00","SDL: Prevent unnecessary gfx manager hotswap
"
"f890c1b6ed3bf465fd7e372c2b2d29bd93cd048c","2011-02-24 21:23:16+02:00","SCI: Fixed video playing in the PQ:SWAT demo
"
"e0ce5a61b54cde3916b9aad51be43e8e9d5ea651","2011-02-24 21:26:00+02:00","SCI: Added an initial implementation of RemapByPercent, which fixes the palette in the PQ:SWAT demo
"
"f3ea868cf6b3603e88e0899fef6e71bcc800e481","2011-02-24 23:04:34+01:00","SDL: Prevent graphics manager hotswapping on startup. (This time for real)
"
"257913676d5a21c6192a6146e662c21f299c9b09","2011-02-20 17:01:46+01:00","ANDROID: Split code into multiple files

And get rid of unnecessary JNI calls to get a pointer to g_system
"
"4af28f96ab4075cb5e512d4050ac085df73a029a","2011-02-20 20:16:51+01:00","ANDROID: Remove unused jmethod Object.wait()
"
"c4706733d45de09803b7cd40c3536a4e04b4f767","2011-02-20 20:46:17+01:00","ANDROID: Move the global back reference to jni.cpp
"
"f80d993860257a8e74936bc74eb99bda2fbfcaa4","2011-02-23 22:44:33+01:00","ANDROID: Wrap JNI code in a class
"
"53b5808d4f16a44779ef5fd8a5c8ca5e262e0379","2011-02-24 00:45:41+01:00","ANDROID: Move rest of everything JNI
"
"0e9b4f3c506d64b0dfd931ac510ed773789f272e","2011-02-21 10:29:19+01:00","ANDROID: We are not a text editor

This was probably set to ensure onCreateInputConnection() gets called,
but it is regardless of this flag. Now the soft keyboard doesn't show
up on startup on devices without physical keyboard, which prevents
unnecessary surface changes.
"
"50a682e7e1c69082735a07b2261d1c0c61ac12c9","2011-02-23 18:58:59+01:00","GUI: Make the ThemeParser less dumb

Instead of running into assert()s due to dumb parser decisions, use
'less than' and 'greater than' width/height conditions on the
'resolution' tags.
Seems better than listing >9000 different android resolutions.
"
"867fa2696def58300cd376d03be6755007abbe43","2011-02-22 22:36:34+01:00","ANDROID: Let's not do that on the stack
"
"d8acbc0311fd126b0b3a2298082dadc98022f933","2011-02-23 20:35:27+01:00","ANDROID: Deuglify overlay gfx

Use the native surface resolution of the device if its not too big.
If it is, use a clean scale factor of 2 to prevent eyecancer.
"
"36135443b9263e0125c8f9f2834818c2f9465983","2011-02-23 21:13:25+01:00","ANDROID: Disable zoning for now
"
"a636d41ca8c066adfed4fd16d9a2e46de5fab871","2011-02-24 18:24:27+01:00","ANDROID: Check thread origin when debugging GL
"
"c8551b80dd917c35d367c1f15f4b9c2618da3684","2011-02-24 21:53:13+01:00","GUI: Properly clear the screen buffer

Don't operate on the overlay, it might be a pointer to a texture
used by the hardware. This get's rid of some annoying flickers on
androids
"
"a017cb3d00293c2f4c916c375fff172a6d962e33","2011-02-24 22:32:32+01:00","GUI: Fix two-step rendering

This is used when changing directories in the 'add game' dialog or when
choosing another tab in the option dialog. Only blit to the overlay on
the final pass. Gets rid of highly annoying flickers on androids
"
"ff11ab284adb30b0de9b80b7a8a9a19b3861e977","2011-02-24 23:49:07+01:00","Revert 'GUI: Properly clear the screen buffer'

This reverts commit c8551b80dd917c35d367c1f15f4b9c2618da3684.

Turns out the flicking comes from an updateScreen() call in
android's clearScreen(). Besides, this broke GMM... a little
"
"e06b7431e8e199c169dd55b675bf7b8e70251e61","2011-02-25 00:06:18+01:00","ANDROID: Remove weird workaround in clearScreen()

This resulted in flickering all over the GUI
"
"972cdaea358160f56880ef82b2527c1ebb320c8a","2011-02-25 03:35:55+01:00","OPENGL: Add support for RGB555 output format.
"
"4f3a244f16baeaf06825dbbc7b65f453011fb07c","2011-02-25 03:36:45+01:00","OPENGLSDL: Add RGB555 to the supported format list.
"
"f1b16fe0840336dbf87f4c6d1a767c3d2c9dd3d4","2011-02-25 04:01:37+01:00","OPENGL: Implement support for non CLUT8 cursor.

Currently all the cursor data is converted to RGBA8888 to allow for
easy colorkeying.
"
"63cc9de1df7326bf92da3df7d2e38f86a43be506","2011-02-25 04:04:56+01:00","OPENGL: Cleanup cursor refresh code a bit.
"
"8024f406387a748718496e9592ffccb3a6a51d26","2011-02-25 21:45:39+02:00","SCI: Changed the fix for the intro of Longbow (bug #3044844) into a hack for that scene. Fixes the freeze in LSL6 (bug #3192166). Fading in KQ5 is unaffected by this.
"
"93fdcbfa05f6cd19137d43b6e6828abacb6137dd","2011-02-25 20:34:22+01:00","ENGINES: We have resetGraphicsScale(), lets use it

If highres games pass defaultTo1XScaler=true to initGraphics(),
use resetGraphicsScale() instead of hardcoding '1x' (which doesn't
exist on the OpenGL backend)
If an OpenGL mode is selected, it now doesn't switch back to plain
SDL now for those games.
"
"a441069a4983f3a2b3c6402f1c8697003415fa55","2011-02-25 20:40:32+01:00","OPENGL: Reset the scale on mode changes

Resets defaultTo1XScaler when going back to the launcher
"
"67aee1ebd85963b3034103a8681efabb33ea7b85","2011-02-26 05:15:23+02:00","SCI: Slight cleanup in the animate code
"
"318c51a2027b554a5c0bc8b045103026657b7073","2011-02-26 05:16:35+02:00","SCI: Added support for reading data off the MT32.DRV driver found in LSL2 early (bug #3192627)
"
"8571083700e8bc9c81d05bb17e55b49dcd0771e7","2011-02-26 06:13:08+02:00","SCI2+: Mention that the actual problem with text wrapping happens because of the unimplemented kTextSize kernel call in SCI32
"
"f26707e353d5bedac683777c5490b2bc0d110f2b","2011-02-26 08:55:55+01:00","OPENGL: Fix 16bit cursors
"
"8add05f9b3bcbba4593f78b2917c81a638583f34","2011-02-26 10:54:05+01:00","BASEBACKEND: Remove resetGraphicsScale() hack

All backends that derive from BaseBackend are consoles and/or portables
without any connection from graphics modes to scalers.
The default implementation of resetGraphicsScale() is now a noop, which
seems correct for all current backends.
This fixes unwanted mode changes since 93fdcbfa.
"
"f78f2dff496598c9263d6155d485748073baedae","2011-02-26 10:18:36+00:00","MOHAWK: Correction for uninitialized read in Myst Cabin Door State.
"
"3fb85835a10eb75c7a5b2f40504004abd94c73c3","2011-02-26 11:18:12+01:00","ANDROID: Allow softkeybd on all devices
"
"bd191e178733dbf49b5b9b8394b8f0554fc6127b","2011-02-26 11:58:41+01:00","AGOS: Respect the screen pitch for movies

Fixes DXA and Smacker movies on Android
"
"3a601812d22afdb0178ffd261a864a0a9e3cc88a","2011-02-26 22:15:22+11:00","TSAGE: Bugfixes for drawing objects in wide screen areas
"
"5a606d86e1349598405189f0cf049223c7c09016","2011-02-26 23:51:24+11:00","TSAGE: Bugfix for credits animations in Scene 1000
"
"756a343cb85760093d1906cc91644e4d10522382","2011-02-26 14:06:30+01:00","HUGO: Fix graphic glitches in DOS versions
"
"033747ceb560dd4ff4f950499030b173fe532640","2011-02-27 00:16:47+11:00","TSAGE: Bugfix to enable palette rotation
"
"88235cee7cd48c03401f956579abdeaf95227993","2011-02-26 15:27:01+02:00","SCI: Some slight fixes for the code that reads the LSL2 early MT32.DLL driver, thanks to waltervn
"
"0cd4b885c8cff779adf27a99b690b09f99042e14","2011-02-27 00:28:38+11:00","TSAGE: Fix for inflinite loop setting scene zoom percents
"
"49f3f5e1e8a97a30040ba7f604ae32317099910d","2011-02-26 16:30:47+02:00","SCI: Fixed a memory leak. Thanks to digitall for finding this using Valgrind
"
"ab256842e4a23acf8de28ea5e74344d47677d029","2011-02-26 18:47:23+02:00","SCI: Added a TODO concerning the workaround for SQ1EGA, as we don't know if it happens in the original version
"
"fe04339909ad9a78cd49a057d3188cc5f54aa713","2011-02-26 19:07:31+02:00","SCI: Removed the SCI32 version of kernelDrawCel() and placed its code inside the debug function cmdDrawCel, as it was hacked together to be used specifically in that command (thanks to salty-horse for spotting this)
"
"9bd5e8ff15dc22cf43281365e5835fc028a7caad","2011-02-26 19:10:12+02:00","SCI: Cleanup
"
"765540a5fd58238c51ea50f96e5a5940dbbf88ef","2011-02-26 20:01:02+02:00","GOB: Avoid hiding overloaded virtual methods
"
"da62869baf6900f08452264ddea0a645b37dca17","2011-02-26 21:22:03+02:00","SCI: Avoid hiding overloaded virtual methods
"
"a99b394836150bef7be8bc79cf656c343d703782","2011-02-27 01:04:49+01:00","HUGO: Better fix for graphics glitches in DOS versions, fix H3 ending animation
"
"ee87c69a3437523382d7d1a5edb3b7b347e11642","2011-02-27 16:28:37+11:00","TSAGE: Fixed bug with scene mode being used incorrectly as the scene load flag
"
"2f3831d12b54150295e57354bb81487de35af8a7","2011-02-27 16:29:30+11:00","TSAGE: Minor bugfixes for Scene 90 (Shipyard Entrance)
"
"e7ca134b1a17f5d66b26441c445abe9984a2bbfc","2011-02-27 16:46:49+11:00","TSAGE: Separated Scene 1000 into a seaprate code file

This is mimicking the original engine, which breaks the entire game into groups of scenes
"
"7e595d0b35461c80c62f033ca3cce02319fdf34e","2011-02-27 19:04:16+11:00","TSAGE: Added Scene 1001 (Fleeing Planet)
"
"6b1c575d1d6471a922978559c69426b1f9856768","2011-02-26 12:34:55+01:00","ANDROID: Remove another weird workaround
"
"983e16b36a68292021833aa9b69305a37ffe2f91","2011-02-26 12:51:13+01:00","ANDROID: Formatting
"
"d50482d92be141c2de84d5c8954214ecca459930","2011-02-27 19:04:33+11:00","TSAGE: Bugfix for correctly setting object frame numbers
"
"25d895b859af0df8ea6daa85ba6ec5a0acb81f9d","2011-02-26 14:53:02+01:00","ANDROID: Rework audio system

Move the audio thread to the bright side
"
"bea57f695064c6f084ff26405d91b812848fee33","2011-02-16 19:59:15+01:00","AUDIO: Make mixCallback return the sample count

The RateConverter::flow result was never used, pipe it through
Channel::mix to MixerImpl::mixCallback, so backends can decide
if they want to waste cpu cycles while playing empty buffers.
"
"0e869a5cf0e455f7cd5ce5c39192f3433b931e97","2011-02-26 18:44:17+01:00","ANDROID: Pause the AudioTrack when possible

Only works in situations without any registered channels (or all paused)
at the mixer (like on the launcher or GMM).

CPU usage before (Galaxy Tab):
~5% scummvm
~15% mediaserver

After:
~2% scummvm
0% mediaserver

;)
"
"d4c0501d1fcc8c98d39b2b7ba627cccb29cbc476","2011-02-26 22:23:17+01:00","ANDROID: Check audio buffer for silence

Most games register a music channel, and when there is no music,
they still stream silence (and run through all the Converter::flow
code!). Scan the buffer for that to pause the AudioTrack. Ugly, but
worth it - reduces CPU usage on many games and hence saves battery life.
"
"a73b2ec97279b1ef1562ece18c7905591e6a7cc4","2011-02-26 23:04:18+01:00","ANDROID: Remove unnecessary code
"
"1c95d47cfaf1f39b3c3012aa649ce3ced90ed147","2011-02-27 10:10:44+01:00","SWORD2: Respect screen pitch while postprocessing

Fixes subtitles on androids
"
"aa2a2e046b0a5979709c79deb84b6eea3c8f09d5","2011-02-27 10:13:18+01:00","SWORD2: Reduce overhead
"
"2fd68087034452f348fdc61762afdbf24e70f1b2","2011-02-27 20:41:09+11:00","TSAGE: Bugfix for loading scenes without a palette
"
"685c47f63f115d561bd16a5f2edb4b18c3ddf68d","2011-02-27 20:42:23+11:00","TSAGE: Initial implementation of Scene #1250 - But scene doesn't seem to be used
"
"02e51f9de5ab01956a0fd162607d981073a85005","2011-02-27 11:10:09+01:00","HUGO: Set all the palette instead of only one color in remapPal.

This fixes the palette issue after the cave in H3
"
"b702cd0fdf2b7e39825be6bad9a548529af5d760","2011-02-27 21:42:19+11:00","TSAGE: Implemented Scene #1500 - Ringworld Space-port
"
"2a2a33a14cbb2cf4e48cd652f230668958271499","2011-02-27 22:52:35+11:00","TSAGE: Initial implementation of Scene #1400 - Arriving at Ringworld
"
"72889ee24fc290ba9353084bbf1e1a3fa47a115c","2011-02-27 11:23:11+01:00","ANDROID: Remove dead code
"
"24a332bd22073257ae9ed33dc0549bfde4538f1b","2011-02-27 11:25:03+01:00","ANDROID: Prevent AudioTrack unpause on startup
"
"db89e9a42c2fc5334a10e2efceb0d51d1646e467","2011-02-27 14:52:13+01:00","SCI: Don't set b_movCnt to moveSpeed while walking

This fixes moonwalking in LSL1 and movement speed in KQ5.
It appears to be have been a RE bug.
"
"37d610efd3ab76d7684cf2cc6cf728b561b7bd55","2011-02-27 16:15:33+02:00","SCI: Improved the readability of the kDoBresen code a bit
"
"65b9e1784dff7237ec77b7391b26631b0d9b3d6e","2011-02-27 14:41:15+01:00","SCI: Detect the version of PQ SWAT from gog.com
"
"72f65b3946278661db95fc02511444ff1658a3bf","2011-02-27 16:48:53+02:00","SCI: Renamed SCI_VERSION_1_EGA to SCI_VERSION_1_EGA_ONLY

This renaming allows us to better distinguish that this version is for games
that only had an EGA version, and avoid confusion with newer SCI1 game releases
with EGA graphics (e.g. KQ5 EGA). The only game with this SCI version is QFG2,
a SCI1 EGA game with a parser. Also, added some games for each SCI version.
"
"d7112b5bbc17e80065534d5308f24ea0fefeedaf","2011-02-27 15:44:12+01:00","SCI: Remove kDoBresen special case for SCI_VERSION_1_EGA_ONLY

Confirmed with QfG2 disassembly (the only 1_EGA_ONLY game)
that it behaves the same as SCI_VERSION_1_EARLY games, except
for the uninitialized read already mentioned in kDoBresen.
"
"332abb91f32bcf721d6aee126631e753afb50c69","2011-02-27 16:55:28+02:00","SCI: Fixed GUI option flags for PQ:SWAT
"
"d17a88940078f573b843de5a9415feb5292dffc3","2011-02-27 18:17:22+01:00","SCI: Fix negative window origin alignment.

SSCI does a shr 1; shl 1 here in SetOrigin.
This fixes a crash in the ending scene of SQ3 (#3194199).
"
"ee3e08bbc2b4b11ce2b96abdabd72a33425b616d","2011-02-26 19:38:21+02:00","AGOS: Avoid hiding overloaded virtual methods
"
"d90c7a831457ee01f501d564e628fa88374f0419","2011-02-27 22:32:50+02:00","TOON: Avoid hiding overloaded virtual methods
"
"4d3392343675faec3b2427a7cd2d19ddce69884b","2011-02-28 00:15:47+02:00","SCI: Cleanup of the save/load dialog patching code and the lofs type detection code
"
"c7bfbc31e2f23f899dcf884ef9a9ba3a7bd0ebe8","2011-02-28 00:18:23+02:00","SCI: Fixed bug #3106107 - 'QFG3: Crash when saving outside palace'

Ignore requests to alter a song's hold value while it's being faded, and reset
a song's hold value when fading starts. This ensures that the song will actually
stop when fading is done and won't keep looping forever.
"
"1dcce4445c28720cd093b6a36b376a36758138eb","2011-02-28 01:06:29+02:00","SCI: Reverted rc7bfbc3 and fixed the actual cause of bug #3106107

While fast forwarding a song, disable its hold value together with any possible
sound looping, so that the song won't loop forever.
"
"a4d4dc81a9f33d2430ee146394c982895ff0981e","2011-02-28 00:58:25+01:00","HUGO: rewrite saveEvents() and restoreEvents() in order to be endian and platform safe
"
"1b16b482f944ae1f4d3a5b4517e08dd110b3a8f9","2011-02-28 00:59:38+01:00","HUGO: Remove forgotten debug message
"
"9a60c58a8d1c91eb5731eaae0093b0ee4b68958f","2011-02-28 10:17:35+01:00","SCI: Add FIXME comment to workaround
"
"eecce7ae33adc49546b66eff88a25bc46d997e0c","2011-02-28 21:56:44+11:00","TSAGE: Implemented Scene 2000 - Cockpit cutscenes
"
"0d555c497d7208d0fa686f1b2369a52841873990","2011-02-28 14:22:16+02:00","SCI: Moved hunk pointer handling to the GC, and removed some related workarounds

SCI scripts can contain stale pointers, which are used later on. We now delete
the contents of hunk entries without invalidating the relevant pointers and let
the GC clear the references. Many thanks to waltervn and wjp for all their work
and help on this.
"
"33d90412c19002b4c892d5ac693c051cbe81905d","2011-02-28 19:16:18+01:00","SWORD2: Plug a memory leak in psx version

Free buffer used to resize psx sprite in drawTextObject
"
"3550e1056884995a524db51fab56d0097c5b6398","2011-02-28 19:22:22+01:00","SWORD2: fix leak of previous commit properly

Memorize psx sprite buffer pointer to properly free it
"
"baa9cbf45c3b66faca1af3fc7bcff49dc02a63b8","2011-02-28 21:20:54+01:00","SCI: Add workaround for PQ:SWAT.
This is a bug in the SCI32 class library, and there are similar workarounds
for a number of SCI32 games.
"
"7c10e4e3d8a5bb6b5c6455ee9c142bdf6381ae13","2011-02-28 22:23:32+02:00","SWORD2: Silence an MSVC warning (false positive)
"
"9fb1cbfc4ec4c826031de7a55015001a715bb550","2011-02-28 22:24:21+02:00","SCI: Added CD flags to the CD versions of LSL6
"
"194081e7ae79a632ce446653cc7119b74d3a6fac","2011-02-28 22:32:41+02:00","SCI: Removed several workarounds which are no longer needed, after the changes regarding hunk pointers in r0d555c4
"
"3574235ba4b3888493bd978ff7fe5bc462072870","2011-02-28 22:33:45+02:00","SCI: Removed the script patch for the scrubbing scene. The crash no longer occurs with the latest fixes to kDoBresen
"
"ce288024b495032d15940dc4b93069a3bc845f48","2011-02-28 20:31:33+01:00","SCI: Fix crash with hunk refs in logkernel output
"
"db536da8d3838bc69cd2c18f49d62e9151d425a5","2011-02-28 20:32:46+01:00","SCI: Skip Ports when iterating over Windows in GC
"
"560eb302f16f2eb143c110a318904dd3a31009d0","2011-02-28 21:58:10+01:00","HUGO: Fix assert while saving under linux
"
"41927e0f6dcbfc3a3d9dccf573f81db7980a0c3b","2011-02-28 23:15:06+01:00","HUGO: cleanup, fix several bad indirections (thanks LordHoto)
"
"d05428015eae456b74d47d2f70642a3ed7492f99","2011-03-01 00:44:28+01:00","HUGO: Rewrite saveActions() and readActions() in order to be platform and endian safe.

This breaks (again) the savegame file formats... Hopefully for the last time
"
"2d46c9b6a212edb6243da63dc1f721c50406fc2a","2011-03-01 04:18:13+01:00","GUI: Increment theme version.

With 50a682e7e1c69082735a07b2261d1c0c61ac12c9 we changed the resolution string
in a way which is incompatible with old resolution strings, thus all old theme
files are not usable anymore and will cause problems. To avoid that we just
increase the version string and thus it is not possible to use them anymore.
"
"06e88662d92bc60a5f04a81ac44534a1c1fa8163","2011-02-28 22:19:02-05:00","AGI: Add detection for the 'AGI Combat' fan game
"
"ee6853daf29357c55aa125a25cde348e1e1e70be","2011-03-01 04:48:33+01:00","GUI: Fix default mode bug in initCommonGFX.

Formerly when a game which used defaultTo1XScaler was run with '-gdefault' from
command line, it was run with a 2x scaler in case of the SDL backend, since it
defaults to 2x (see SdlGraphicsManager::getDefaultGraphicsMode).
"
"484107907540bd07a5822bee075b450a1ade817c","2011-03-01 05:32:14+01:00","OPENGL(SDL): Use the whole window/screen size for the overlay.

This makes the overlay looking nicer in fullscreen mode.
"
"5ffecd85b332a73ef803b5755f80b6180883153e","2011-03-01 05:45:56+01:00","OPENGL: Limit maximum cursor scale.

This avoids too big cursors when the screen resolution is really high.
"
"95b1bfa0bee99f6ab6396b463ad188b3c0ade31c","2011-03-01 06:59:41+00:00","HUGO: Correction for Schedule saveActions() mistake.
"
"22ebc2b724df5d8d717dec0d225e802d57514f79","2011-03-01 07:37:26+00:00","HUGO: Correct 2 Memory Leaks in DAT Object Loading.
"
"4a5b30e21f4c4158caf0e3e7b08cb379bb2cb8e7","2011-03-01 10:32:17+02:00","MIDI: Updated documentation on MDT_PREFER_MT32 and MDT_PREFER_GM
"
"e99dcac2f6888cc23828dd0b95c92069976c5111","2011-03-01 12:22:19+02:00","AUDIO: Set default values for the MT-32 and GM device settings

This fixes the case where an MT-32 music type is erroneously returned with
the default GUI audio settings if an engine specifies MDT_PREFER_MT32. Many
thanks to wjp and fuzzie for their help and work on this
"
"87d7044a3ffdb9dc3de668f5871a588c4221d9fb","2011-03-01 12:24:28+02:00","AUDIO: Removed comment about MDT_PREFER_MT32 and the MT-32 emulator
"
"5b50113bc089a885290a0b7d2d9db0aadad78c0b","2011-02-27 01:24:35+08:00","CREDITS: Credit madmoose Smacker video decoder
"
"d149405d79c2f6d1acf7faa31d95491b98fb17ad","2011-03-01 16:28:08+02:00","SCI: Fixed bug #3039188 - 'LSL2 Amiga: Failed to Initialize Sound Driver error'

This was a signed/unsigned issue. Also fixed compilation when DEBUG is
enabled. Thanks to waltervn for his help on this.
"
"acb9879bb1d2efdeae261653f03f034e1cb0ba14","2011-03-01 18:29:34+02:00","SCI: Fixed the background color of the status bar in Amiga versions
"
"bc48b124f05f0f602d80bf26eecc1f7237c83da3","2011-03-02 00:48:21+01:00","SCI: Change workaround for hoyle3-demo's rendering order

This behaviour much more closely matches SSCI.
"
"ed7c481e93e7563751cd6260ee89ea29df7e4f7f","2011-03-02 08:24:31+02:00","SCI: Cleanup
"
"c3d8f5610f6e5e4259e93b4f59fa7a8c73b7d652","2011-03-02 08:25:35+02:00","SCI: Fixed script bug #3059871 - 'SCI Fanmade - Ocean Battle: Crash while playing'
"
"5972a6bbe9723b9672d90a815c8d5078e8d9988f","2011-03-02 08:37:22+01:00","SCI: Fix variable name
"
"74e99328ec0fa43074c52b69d21922407153a1aa","2011-03-02 10:48:44+02:00","SCI: Fixed bug #3039775 - 'KQ4: Graphics glitch in the mansion tower'
"
"9d6156ace057cbbaf735da6b8d3fd946f2411ec4","2011-03-02 19:51:56+11:00","TSAGE: Started work on Scene 2100 - Cockpit
"
"6a0a70b4ddbbc9b26b8bf0c7a298abe0d69d1383","2011-03-02 19:55:13+11:00","TSAGE: Added placeholder comments for remaining scene groups
"
"e9dad7859c43f87c4f4076dfcfd287af6eb1d139","2011-03-02 14:07:46+01:00","HUGO: Silence GCC warning
"
"50ace75cd234772d0e0a7be98ba9d4c67a5dda20","2011-03-02 14:08:30+01:00","NEWS: Sort ports alphabetically
"
"36e3dede0f741a7b592a2ea7c2ff004723d33de7","2011-03-02 14:11:58+01:00","NEWS: Attempt to improve consistency
"
"840178a9071971a816c0fa184e262dfff379fa07","2011-03-02 16:33:12+02:00","SCI: Bug fixes to the reg_t addition operator

Thanks to fingolfin's comments regarding these
"
"167ff5dd1b6a9670be5e712c36bff92d9d6a4bf0","2011-03-02 10:19:52-05:00","SCI: Fix garbage collection for SCI32

SCI32 has no ports
"
"ba42c6ff7db37266062d8a03e83a2ff96714b8af","2011-03-02 20:07:46+02:00","SCI: Fixed text positioning in the credits screen of Dr. Brain Amiga

The additional text positioning code in kDisplay was added in SCI1
middle, not SCI1 late. Also, did some slight cleanup
"
"b1055a3c86028d517d54fbae0bef9c500facf8c7","2011-03-02 20:38:21+02:00","SCI: Fixed bug #3040161 - 'LONGBOW: Textbox glitch'

GetLongest() could exceed the maximum width with the very last
character of a word. The same fix has been applied to the SCI32 code.
"
"807971f8af9430ee19f66c7bac7cc9566fccf432","2011-02-27 20:16:52+01:00","ANDROID: Don't use warning()/error() in a thread
"
"2f008d0cd6ffa84071fe2f5c343ef19328cc83ae","2011-02-28 19:48:41+01:00","ANDROID: Don't use warning() in JNI functions
"
"b84b56b2481bac8ad92ffe6870b28b288011bf6a","2011-02-28 00:09:36+01:00","COMMON: Remove newlines from debug()

They were interfering with my precious debug spew :P
"
"2333a32697cda8f5f73861856889001839f38f25","2011-02-27 20:13:48+01:00","ANDROID: Untangle JNI interweaving

- make the startup sequence more linear
- use SurfaceHolder events
- get rid of the surface lock
- remove unnecessary JNI calls
- make the ScummVM class implement Runnable
- cleanup
"
"bd7e3e9bb20dada6d40143557c473fabd373b5ed","2011-03-01 22:16:10+01:00","ANDROID: cleanup
"
"82a9beff2b52b2dd3eb7368dd46d8d50cb9f2d9f","2011-03-02 19:38:40+01:00","ANDROID: Move swapBuffers to the native side
"
"d6e838e1b38a568869ffd655a9bebd225593ffad","2011-03-02 19:45:07+01:00","ANDROID: Merge FIND_METHODs
"
"ccfe427eb542235070e8576b4cc47217d92046fd","2011-03-02 19:48:29+01:00","ANDROID: Check for a surface in updateScreen()
"
"25ef065a4172443eebdd1031c8a387f30f930ec4","2011-03-02 20:25:47+01:00","ANDROID: Implement pause/resume

Don't just kill the whole process when the Activity is stopped. Instead,
use its events to pause or resume audio and the running engine (if any).
Of course not every engines implements that... but at least an incoming
call doesn't kill the game now (lol).
"
"c2d4cce429baa56b5a0962a854ece6163270995f","2011-03-02 22:26:15+01:00","ANDROID: On pause, put all threads in a coma

Since not every engine respects pauseEngine(), or they're in a state
where it simply gets ignored, put all threads in a group coma. Without
this, code still kept looping and wasting cpu cycles, while the user
might want to do use her/his droid for something else.
"
"2d4a64d18493b142b1899a822202015339733cfa","2011-03-02 23:00:48+01:00","ANDROID: Properly release texture resources

When calling glDeleteTextures() we need a valid surface.
"
"719d22918d8058cba68923b4c11b792dbe76f22f","2011-03-02 23:41:59+01:00","ANDROID: Respect the pause level.
"
"a55179177ed3dff9ebb2ece424b41cc2c18ec9ce","2011-03-02 20:05:48+01:00","Revert 'SCI: Fixed bug #3039775 - 'KQ4: Graphics glitch [...]''

This reverts commit 74e99328ec0fa43074c52b69d21922407153a1aa.
SSCI takes care of this issue in a different manner, which
the next commit emulates.
"
"1ef1f3e67183b8b2f19bc9ba22b04d774381f9f9","2011-03-02 23:33:00+01:00","SCI: Call Graph(RedrawBox) from EndUpdate for SCI0/01

Confirmed this behaviour in KQ1sci, KQ4, Iceman, and that
it isn't present in QfG2 and KQ5CD.

This fixes the graphics glitch in KQ4 when falling down the
stairs in room 61 (#3039775).
"
"3f052213346e7887c85b6a2a5d31b24015d672bc","2011-03-02 23:36:13+01:00","SCI: Always add new windows to back of list up to SCI_1_EGA_ONLY.

Confirmed this behaviour in KQ1sci, KQ4, Iceman and QfG2.
Hoyle3-demo remains an exception.
"
"9d6ed4de3191702ab839c6cafec308dd449b3d1f","2011-03-03 01:47:08+02:00","SCI: Slight cleanup of some sound drivers
"
"9af4453ee5fd078e58e061854f363c56d3913943","2011-03-03 11:18:59+02:00","SCI: Don't ignore SysEx messages at the driver level but warn instead

SysEx messages in the driver are usually the result of a bug which should
be investigated and not silently ignored
"
"d2acad39c87183c6b1debfbba1ded5127086557b","2011-03-03 12:45:03+02:00","SCI: Always clear looping and hold before jumpToTick() is called

Fixes a crash in LSL3 Amiga
"
"ad2aa17a0654634ac658668c32cca9692f4c3cbe","2011-03-03 22:10:07+11:00","TSAGE: iImplemented custom SceneArea class needed for Scene 2100
"
"ee86d6eb613d2692490066f4c7fbb3912656f8e9","2011-03-03 16:34:23+01:00","SCI: Make some reg_t methods private resp. inline
"
"1aed9a1f3401477d4d56e278fec63cd90fafd81d","2011-03-03 19:31:47+02:00","SCI: Applied save/load dialog patching to all SCI0-SCI2.1 early games

Games that have the newer SCI2.1 kernel functions (i.e. kSave instead of
kSaveGame/kRestoreGame) aren't supported yet
"
"51437ba5e6e418d7e79cf341606bc6c1c50fd50b","2011-03-03 19:34:11+02:00","SCI: Fixed path finding in Amiga SCI1 games

Added wrapper functions to read/write from dynmem segments, as these are
treated as BE in Amiga versions (as we treat them like raw data instead
of reg_t's), whereas the rest are LE. Thanks to waltervn and wjp for their
help on this
"
"00b37f8552962c26412eda347024db80de3d99ac","2011-03-03 19:38:30+02:00","SCI: Simplified arithmetic reg_t operations, based on fingolfin's comments

- Folded all comparison operators in a single function, cmp()
- Simplified the + operator, and removed the SQ1 workaround, as it's not
needed anymore
- Removed the workaround for uninitialized variables in the * operator
- Removed division by zero workarounds in the / and % operators
- Added a better description of pointerComparisonWithInteger(), based
on fingolfin's description and comments. Also, changed the SCI versions
where this is used to SCI0-SCI1. The SCI1.1 case in QFG3 was a script
bug
"
"ea232049c95018053b5368975e7559575d024de4","2011-03-03 19:49:09+02:00","SCI: Fixed a silly bug in WRITE_SCI1ENDIAN_UINT16, and unified the way
that the utility READ_* and WRITE_* operations are made
"
"f9354eb4d8c6ff02c801d936b5278c6d76d90f88","2011-03-03 20:45:22+02:00","SCI: Fixed comment in pointerComparisonWithInteger()
"
"1e3c96b3efaea537dfe82b1d535d1d46cc82a8a0","2011-03-03 11:20:37+01:00","ANDROID: Formatting/whitespaces
"
"a7a7542d1de3f6bb8d076b04cf63a761f01472e1","2011-03-03 11:35:21+01:00","ANDROID: Remove an indirection when pausing
"
"3df060b6567d37a1a3bee314a686bb2435e482f6","2011-03-03 11:55:51+01:00","ANDROID: Rename member vars according to our style
"
"7157454e9b30db91462cb684dd20a61204a7fa43","2011-03-03 19:11:42+01:00","ANDROID: Implement surface resizes

Split surface code into helper functions to avoid code duplication, and
distinguish between screen resizes and surface recreation. The former
happens when toggling the softkeyb, where we just have to reset the
viewport. Fixes garbled textures in those cases.
"
"ce9796baa3185417af53969e1258350648c2fc5a","2011-03-03 20:41:04+01:00","ANDROID: Don't wipe paletted textures on reinit

The content of a paletted texture is in _surface.pixels. When recreating
the surface, don't wipe its data unnecessarily. This fixes gfx garbage
on CLUT8 games/cursors when leaving and going back to ScummVM
"
"aaa6c9a071f7ed91370934779b63511151b936be","2011-03-04 00:14:46+02:00","SCI: Improved debug output of validate_property()
"
"c8225c9c0e1dbdc3ff423c962cd473132829aefb","2011-03-04 00:16:08+02:00","SCI: Amiga SCI1 middle games use the new PC SCI1 late transition effects
"
"e286b1b5f147a2494b6576febef37d246cdc687d","2011-03-04 00:17:38+02:00","SCI: Removed a hack for SCI1 Amiga games in setOnScreen()
"
"9cc12cfc97028e71ebaede1db67a076e408edaeb","2011-03-04 00:18:36+02:00","SCI21: kSave(1) is kRestoreGame
"
"1bdc6db980ffb72c4466d3b1a37f631f78ef59b9","2011-03-04 00:20:28+02:00","SCI21: Now replacing save/restore dialogs in SCI2.1 and newer games
"
"78c00744c21b95e98f022f037dbb38591112a104","2011-03-04 00:27:28+01:00","SCI: Add fixme for EGA flood fill bug (#3078365)
"
"18c0dae5fcd0314a77cf30ac0bd7c6494961de24","2011-03-04 01:42:09+02:00","SCI: Removed warning from kReadNumber
"
"08af1d9d3fcd8c288f04f0175f6cc6b1ead10dfa","2011-03-04 01:42:53+02:00","SCI: Don't patch save/restore dialogs in Phantasmagoria

That game has its own custom made save/load system
"
"20c45cafae8cb0f64c1ae03675fb445515b29cef","2011-03-04 01:43:16-05:00","NEWS: Remove SVN references
"
"8cfcf53b88df94e588f560bc3ecdbf1879fda6e2","2011-03-04 11:43:34+02:00","TESTBED: Update rotatePalette() to use an RGB palette
"
"4314a61ab41644159f56a6eb886e74731d0729df","2011-03-04 14:26:23+02:00","SCI: Fixed a issue with signed characters in setChar()

This was visible in the password of LSL5 Amiga. Thanks to waltervn for
finding this
"
"6b41673fab3da5603b4947aad0839570efcfe165","2011-03-04 14:27:25+02:00","SCI: Amiga SCI1 middle games are actually SCI1 late

This fixes a lot of glitches, caused by the differences between the two
versions
"
"fe7d2026b1aae2915fea7de0426eca7f1e1d5af8","2011-03-04 14:37:41+02:00","SCI: Added a comment for the additional code in kDisplay

This extra code that is responsible for changing text placing has been
found in SCI1 middle (i.e. LSL1VGA) and newer games
"
"d74cc379cc40318da7c55a53a30136e1a1517ce8","2011-03-04 23:46:23+11:00","TSAGE: Implemented all the action classes for Scene 2100
"
"ef939772b39d3988ad31a77ea0bdc1bc149aa54a","2011-03-04 17:16:54+02:00","SCI: Added support for 16/32 color view and picture patches

16 color patches (*.p16 and *.v16) are used in 16 color EGA SCI1 games
32 color patches (*.p32 and *.v32) are used in 32 color Amiga SCI1 games
Removed a workaround for SCI1 EGA (bug #3044500), as that bug has been
fixed already in the view patch. Thanks to waltervn for observing this.
"
"b40b87fdb5b4ee869cce55d852af409896b20c98","2011-03-04 18:24:46+01:00","SCI: Fix flood fill matching in EGA mode

In EGA games a pixel in the framebuffer is only 4 bits. We store a full
byte per pixel to allow undithering, but when comparing pixels for
flood-fill purposes, we should only compare the visible color of a
pixel.

This fixes bug #3078365 in Iceman.
"
"bc992d77de75076aae5badde98755b1db6b9d9a5","2011-03-04 21:46:43+02:00","SCI: Enable fade transitions for SCI1 EGA games
"
"5b9677da72efadf566be2a666bd9ca44ca35adc8","2011-03-04 21:49:19+02:00","SCI: Cleaned up some view type checks
"
"d95b5331fb266de492c45d348ccb8313ca7824aa","2011-03-04 21:56:14+02:00","SCI: Some palette related changes

- Moved palette color count inside the GfxPalette class
- Enabled all of the kPalette subops for 16 color SCI1 games, apart from
the ones for intensity palette animation, and palette resource loading
- Removed isVGA() and isAmiga32color() methods from the resource manager -
they ended up in having inconsistent code
"
"f96e93047a6407eeb5c9e59825e55648f74c6a3d","2011-03-04 21:07:52+01:00","SCI: Use BE string handling for Mac games.
"
"39902452a2d659ac6eddde2febdfddbebd7c771d","2011-03-04 21:08:42+01:00","SCI: Fix reg_t ASCII printing in debugger for BE.
"
"62c1c1b821c309faab0f076be7c1b9eee69a2792","2011-03-03 21:56:20+01:00","ANDROID: Remove 'persistent' from the manifest

That's a flag valid only for apps build into the system image
"
"03347a25e148e264383a8139c9b5c0be0d7981fa","2011-03-03 22:15:10+01:00","ANDROID: Reindent manifest
"
"12a561f119eef769d6d37c2a099b235357138ab4","2011-03-04 20:17:17+01:00","GROOVIE: Mark overwritten members as virtual
"
"1b0d4724f4526e1fccec3d457be72eb911908a90","2011-03-04 21:22:16+01:00","ANDROID: Fix slightly off while loop

CursorMan allows to push cursors with a width/height of zero. If such a
cursor is restored, we don't need to call glTexSubImage2D() 0xffffffff
times... This fixes delays of multiple minutes when closing GMM
on groovie and sword.
Also, I want that last hour of my life back.
"
"f639466ab2417cb8b6052b362b7d624ea739fc8b","2011-03-04 21:30:53+01:00","ANDROID: Cleanup
"
"a913d360f27f300633a8da5997686343e95e56a3","2011-03-04 21:41:55+01:00","ANDROID: Clear game texture on initSize()

Gets rid of leftovers
"
"23dcd3c7612205c822f81d7ebdc25b0076a18600","2011-03-04 21:51:55+01:00","SCI: Remove SCI version check from READ/WRITE_SCI1ENDIAN_UINT16.
"
"a2b75466da399e34fa0d4ee1d4287dd60f1d1fc3","2011-03-05 01:15:06+01:00","SCI: Add comment.
"
"dbaad1a89633fe51eabb64a910568fe3995734ec","2011-03-04 19:47:21-05:00","SCI: Fix Mac icon bar palette match order
"
"c66233f83e2d86b72f45aff20fb3198976850e42","2011-03-04 23:17:57-05:00","GRAPHICS: Split the NE cursor code from the NEResources class

Now the code lies in Graphics and all cursors are not cached upon opening an exe. The engine is now in charge of caching which cursors it wants.
"
"b8607ae1ce1fdbc7686e073442db76892dea6fec","2011-03-05 19:44:12+11:00","TSAGE: Implemented hotspots for Scene 2100
"
"e51fd00f0c87d31a4cd4a249923689948e1171c5","2011-03-05 20:45:26+11:00","TSAGE: Bugfix for Kzin in Scene 2100
"
"68378150beb96159db7d959d9625107b721eef57","2011-03-05 10:02:56+01:00","ANDROID: Remove some vtable overhead on textures
"
"4ee0a9f43a3ccb70872b059a753485349529166d","2011-03-05 10:05:35+01:00","ANDROID: Merge updateTexture()
"
"83b00526d0da2265eef8d59767cafd16190ec092","2011-03-05 10:10:50+01:00","ANDROID: Reduce mem usage of fillBuffer()
"
"69a026192e30c544379cf938efa6b545a62e3a08","2011-03-05 10:32:56+01:00","AGI: Kill the timer based counter

Using the timer mechanism for just a simple counter is not just
overkill, its also inaccurate. When using a call frequency of x,
and waiting for y callbacks, the passed time will not be x*y.
The problem amplifies on slower platforms and/or fair thread
schedulers.
Use absolute times instead. Most notably, the walking speed of
the avatar is now smooth on android, but probably on all other
handhelds we support too.
"
"dbd3f440d2edb976bd304320daa8d150385261af","2011-03-05 18:39:17+02:00","SCI: Added some support code for Longbow Amiga
"
"b16967fecea8d7df19cdfa05f511e98c2b53f1d1","2011-03-05 18:40:31+02:00","SCI: Cleared up the different view types and ordered them by color count
"
"7d506ef853a66cc35816926fe739785c2fd1f2d1","2011-03-05 18:27:34+01:00","MOHAWK: Implement Mechanical opcode 122, elevator go down timer
"
"94db3403a3fbe228aa25cdde310e2a8daa5c33eb","2011-03-05 18:21:35+01:00","ANDROID: Add initial 16bit gfx support

Supported pixel formats: 565, 5551, 4444
Missing: 555 (doesn't exist on GLES)
"
"d2dd614996452f653d8a2710b55b9b3799350688","2011-03-05 18:38:00+01:00","ANDROID: Clear screen on initSize()
"
"6143fe965bb5332d8f32709ff1cce3624cd0e51d","2011-03-05 13:36:55-05:00","GRAPHICS: Add support for PE cursors in WinCursorGroup

Only 1bpp still
"
"1ad4feaf05e8630f2a29819ec4cbaeb70ec7e795","2011-03-05 21:46:03+01:00","SCI: Further clarify comment
"
"6873e9673213516539acca37c08b1d6c0bfaa350","2011-03-05 23:01:25+01:00","TOON: Integrated resource cache patch by eriktorbjorn

Reduced global memory usage of the game
Global PAK files are not loaded entirely anymore
"
"a2c02367f7fe76a6a76fbd872908274f679e4b4d","2011-03-05 19:39:46+01:00","ANDROID: Rename function for less confusion
"
"53ee7c551369cf00b5073f10c21b836759b8c302","2011-03-05 21:22:45+01:00","ANDROID: Proper fillBuffer() for non CLUT8 colors
"
"12fb8177519c6ba760b898a1f79bf770bfd6e6ac","2011-03-05 21:31:03+01:00","ANDROID: Fix 16bit cursors

I hate this code
"
"433429dcf4075df7bc892e36d8a37680ad4f41d8","2011-03-05 23:55:16+01:00","ANDROID: Fix warning
"
"a658c4b30a7d0a911f8d40675875c3d9a95e5139","2011-03-06 16:33:37+11:00","TSAGE: Bugfix for correctly erasing on-screen text when it gets removed
"
"9df6d50813169808feccffcb86d4b28c63fa091a","2011-03-06 16:34:55+11:00","TSAGE: Implemented Scene #2120 - Encyclopedia
"
"67f0e5530afaf9bb115ffd0f6f836a577f8106fd","2011-03-06 18:26:27+11:00","TSAGE: Bugfixes for Scene 2100 - Encyclopedia
"
"14843c3b87fb891c476540b18709a7c00a86585e","2011-03-06 18:36:33+11:00","TSAGE: Fix stack overrun in the pathfinder
"
"6f3201dd14f9f73202b5211847d943eaa8f7acdd","2011-03-06 20:49:03+11:00","TSAGE: Changes to cursor handling that more accurately replicates the original
"
"0698ee61abc98346c687098e79d6487904930825","2011-03-06 17:30:14+02:00","SCI: Some changes to picture drawing

- Fixed picture drawing for Longbow Amiga (view drawing is still wrong,
though)
- Added debug output for picture drawing
"
"0b24fc3accc2ce232377a5828871dd408d594e8f","2011-03-06 15:49:50+01:00","OPENGL: Fix compilation for --disable-16bit
"
"bc73a6bd76140e4ff83d83388a60c4411b69476d","2011-03-06 17:52:39+01:00","TOON: Fix global package loading
"
"95a1624f6d6091d143a6f203b9083f96df152871","2011-03-06 17:54:03+01:00","TOON: Improve music fading between rooms
"
"7d36aabd4271212e2c0b741172a40d07871e5b4c","2011-03-06 18:08:24+01:00","TOON: Fix crashs when toon.dat is not present
"
"d2ad7898d93fae702ec634af71c172bb3f1a6de9","2011-03-06 19:22:32+02:00","SCI: Merged the cel data unpacking code for views and pictures
"
"6a8fadeec83822b100c4eaaa511eabb285dd4765","2011-03-06 18:39:26+01:00","SCI: Silence GCC warning
"
"adfa5e1b861c4b55720b497412e940cbb95a7afe","2011-03-06 12:44:11-05:00","SCI: Fix Mac SCI1.1 view decompression

A regression from d2ad7898d9
"
"df1a800d01918ddda9159e3b9f42e8ef8d701456","2011-03-06 18:13:17-05:00","SCI: Fix KQ6 Mac inventory cursors
"
"5b907e828b519c71d1a042483ab0214f758a8ffd","2011-03-06 19:53:17-05:00","GRAPHICS: Fix PE cursors

Initial work on 8bpp cursors has also been added
"
"6582b77f1c3c6f373d2aa3a55f30c254f5f0e244","2011-03-06 19:57:18-05:00","SCUMM: Use the new WinCursor code in SCUMM HE

Also, updated the MacResManager cursor code to reflect the SCUMM resource extractor code changes
"
"d49f3a8a781b28ba46e22e8f8a2c486a146b7e8c","2011-03-07 00:53:40-05:00","GRAPHICS: Improve support of Windows 8bpp cursors
"
"ad7400524b8e024577169f7dd4cb4d586ee37fa0","2011-03-07 01:07:53-05:00","MOHAWK: Make Riven use original executables for cursors

It will try both Windows and Macintosh executables. The hardcoded cursors have been removed.
"
"3cb933fcc9159b5e24d6fd8569f9785d88c6f6d5","2011-03-07 22:04:39+11:00","TSAGE: Implemented Scene 2150 - SpaceShip Level 2
"
"4ddc66d68ef1439ceb669658ea2651a6a5a06597","2011-03-07 13:23:52+02:00","SCI: Initial handling of the views in Longbow Amiga. Still not right
"
"a95e6d6b1637231102f3c6b21a45d068de44795a","2011-03-08 00:04:40+11:00","TSAGE: Properly implemented immediate fade when drawing active speakers
"
"b0dfe962e6ea18f9bff5ad4b48226f729cf6d84b","2011-03-08 00:05:10+11:00","TSAGE: In progress implementation of Scene 2200
"
"10dad00a799aeb5e05e0fec865d25b21e7745956","2011-03-07 10:56:55-05:00","MOHAWK: Improve error handling when data isn't found
"
"9c7166ccc95af78af6c4ba1169af8babfb7697d7","2011-03-07 11:02:50-05:00","MOHAWK: Error message consistency
"
"4dba6962f579b136a556142e9bd2b3f83af38473","2011-03-07 11:40:54-05:00","GRAPHICS: Fix a missing 'f'

Thanks, fuzzie
"
"826197cf76b85a3f0208ca2c410ce7bc92c5bb33","2011-03-07 13:11:28-05:00","COMMON: Make the operator=(String) function be a const reference instead
"
"d2f8103a3bc6f719e57a7f06e9350e08def3e90c","2011-03-07 13:12:43-05:00","COMMON: Fix WinResourceID::getID()
"
"c7d7e50155ddcbca6fc2143e255b6618a628db7f","2011-03-07 13:14:10-05:00","COMMON: Add a sanity assert
"
"bc3638834b6ade93c24d9c96d457579e1675e0e3","2011-03-07 13:18:33-05:00","COMMON: Add TODO to make compressed NE EXE handling transparent
"
"b158a4084463d478ba961434f88971ae2a7aeac2","2011-03-07 13:24:05-05:00","GRAPHICS: Add doxygen comments for WinCursorGroup
"
"29b5b4afa66287dc382adbd2bfcb8add620d2a0d","2011-03-07 19:40:20+01:00","HUGO: Fix registration messages for H1 Dos Freeware version (in intro)
"
"42c6a785c74c200b19ceef6db5003f334c3edf29","2011-03-06 21:27:34+01:00","ANDROID: Texture cleanup
"
"1f90d232e3b4911f725fe22489aaa2cc2253426d","2011-03-07 19:52:44+01:00","ANDROID: Save the game when the process is paused

The OS can kill the activity at will after onPause() or onStop()
to free up memory for other application. Provide a parachute when
the engine allows it.
"
"212b58ad429718bcb0366541a413fc52db25f615","2011-03-07 16:27:58-05:00","MOHAWK: Remove unused runLoadDialog() function
"
"4e7b66b1bc948f9fc22ba3ce67f76f8dfe2f5f99","2011-03-07 16:37:12-05:00","GRAPHICS: Cleanup WinCursorGroup functions a bit

ScopedPtr is now used on the streams to avoid having repetitive delete calls.
"
"e8151026594c16a84d390059faa5aaaeafa621da","2011-03-07 17:07:59-05:00","Merge branch 'pe_exe' of https://github.com/clone2727/scummvm into clone2727-pe_exe
"
"2cbefc8bb5644847a29427272757d4a234cfdf13","2011-03-07 23:21:27+01:00","SCI: Constify some code
"
"920bae62c07d4248869637ff6896f09db5163c66","2011-03-07 17:27:17-05:00","MOHAWK: Fix Riven's cursor in the main menu

Actually call the showCursor() function now...
"
"e71fb5b0eb9c9c68bf328d557f09a3191e0c8b8f","2011-03-07 21:49:51+01:00","ANDROID: Move the overlay initialization

There's no point in doing that in initSize() every time
"
"905d5e76b463870fba69d6683c96ac93d6fda623","2011-03-07 23:41:34+01:00","ANDROID: Move misplaced assert

Leftover from the recently introduced 16bit support
"
"9fb28410b5ea27fa8e79ac5f0ac4ce70ae4cf3c6","2011-03-08 00:19:30+01:00","HUGO: Misc savegame modifications

- Add initial savegame on slot 0
- Save viewstate as it may now contain several different values when saving
- Fix loading from GMM
- Implement ctrl-N
"
"53d6a4f831c9e7c7de594cdaed3c8546b41ea2e2","2011-03-08 00:51:21+01:00","TOON: Decrease CPU usage

Added dirty rects
Reduced the max FPS from 60 to 30
"
"b2a72da6518b30a58a1257ff7217185ae5683628","2011-03-08 00:54:40+01:00","Merge branch 'master' of github.com:scummvm/scummvm
"
"ba94342f6f7a1728d8794faa1b429491ba2e0ec2","2011-03-08 19:19:36+11:00","TSAGE: Bugfix to increment data block lock counter when a Visage is cloned
"
"0c5fdebbd23c98e859e2c9fae1d1c1bae52bc899","2011-03-08 21:24:30+11:00","TSAGE: Completed Implementation of Scene 2200 - Spaceship - AutoDoc
"
"e5888ff6de7769374cd76079d6a26d4838c1c5b3","2011-03-08 22:19:30+11:00","TSAGE: Renamed the core engine Action2 class to ActionExt to avoid naming clashes with scenes
"
"f90debce6e17fb6dedac72dca0211376d45ee9ed","2011-03-08 22:19:59+11:00","TSAGE: Implemented Scene 2222 - Stasis Field Map
"
"6a31e398f76ec37a15d1aa40d7c93b6256cdea25","2011-03-08 13:44:09+02:00","SCI: Comparisons between pointers and numbers are also done in SCI1.1

Fixes SQ4CD
"
"aa452d3aeb3e2506c7386554d5dfbe852b8ae475","2011-03-08 12:53:31+01:00","WINCE: Make scummvm compile and run again for WinCE platform (patch #3202337)
"
"0642b30933b464ddffff591ca672345d0ec55103","2011-03-08 14:46:03+02:00","SCI: Cleanup
"
"92093d267fc17edd0b9f0467c93c08718f959ae4","2011-03-08 15:24:59+02:00","SCI: Fixed typos
"
"2a064a97254f1374da256d0a0c8ca4f46e96d599","2011-03-08 15:45:52+01:00","MOHAWK: Rename variable to fix WinCE build.

Thanks to LordHoto for working out why this was failing.
"
"fc074fef48cff8a6c8cfc93b8f31353233830de5","2011-03-08 14:31:45+01:00","WIN32: Use names for various magic constants in resource definitions
"
"fe89ffe80a1f2eacc9ac48f4b5961e44a07c5b81","2011-03-08 18:14:33+01:00","WINCE: Add -fno-inline-functions to compiler arguments.

WinCE is using -O3 by default, which includes -finline-functions, which in turn
breaks SCI. By disabling that opimization we get SCI working fine again.
"
"12e7d3078b8dade7e9c109d1141889886fa4048e","2011-03-08 20:13:08+02:00","SCI: Cleanup
"
"689b87a3e8944bc9a5ae759032ff530b50370021","2011-03-08 19:46:48+01:00","CONFIGURE: Oops fix a typo.
"
"aebd9c6ea03593abb409a5eb2e9ef15b5cb42c72","2011-03-08 19:48:34+01:00","WINCE: Run astyle over WinCE related event and graphics source files.
"
"0e7dc36792e8472f823af56a43f6d75aba3db29b","2011-03-08 20:11:13+01:00","DRASCULA: Fix a style related warning for WinCE specific code.
"
"b0cd614fd5a9b89765c7c3890a830abddc6d14f2","2011-03-08 20:23:31+01:00","WINCE: Silence/fix some warnings.
"
"eece58df7f20b6411f5e534cbdf7b80c19fdee2a","2011-03-08 22:50:10+01:00","SCI: Remove unused argument to said
"
"906f0248317e1a4167190a666fe308a09334bfac","2011-03-09 01:47:53+02:00","SCI: Cleanup of the event code
"
"463e475bd654104aab1e19cbc6f315b3341ef470","2011-03-09 01:19:12+01:00","SCI: Save mouse position in SciEvent.

Instead of querying the event manager for the current mouse cursor coordinates
kGetEvent now uses the saved mouse positions, which will assure every event
will be processed with the correct coordinates instead of the current ones.
Various other functions using SciEvent directly were adapted too.

This fixes cursor click positions for the WinCE backend.

Thanks to wjp and waltervn for helping me with this.
"
"438f2b2e1bc987080a0dcc500d04f4eb18174763","2011-03-09 02:49:22+01:00","WINCE: Cleanup WinCE event source a bit.
"
"bd82ebd080bf97fad8831d3ad6bdaa01d3158d21","2011-03-09 03:02:46+01:00","WINCE: Run astyle over WinCE source files.
"
"4d41b13890189f654409087187dc87772f90b91f","2011-03-09 19:03:10+11:00","TSAGE: Implemented Scene 2230 - Quinn's Room
"
"0674d8829944868ac32a3696dd0e65655d00ed99","2011-03-09 21:16:12+11:00","TSAGE: Fixed memory leak when changing SceneObjectWrapper objects
"
"e725a69a6018d7e0f9d79b1ba13983101f42e327","2011-03-09 22:41:57+11:00","TSAGE: Completed Scene 2280 - Spaceship - Store-room
"
"7e517b7808569f90d6257310702c6d52ca2d7699","2011-03-09 15:04:31+02:00","SCI: Some cleanup and fixes to the view unpacking code

- Added comments for all the different view unpacking algorithms
- Merged the SCI1 VGA and SCI1.1 VGA unpacking code
- Fixed views in Longbow Amiga (the palette is still broken, though)
- Used memset()/memcpy() instead of looping through
- Fixed a regression of rev. d2ad789 (LSL1 Spanish, bug #3135872)
"
"cd816b24d786935b30fab1ead5cc82f13a11385e","2011-03-09 15:14:12+02:00","SCI: Whitespace fixes
"
"8743838f47efb8b80955e64aca027c954dbf8b51","2011-03-09 13:54:15-05:00","MOHAWK: Add initial support for the Riven credits sequence

The credits start too early for a few of the end game sequences, but otherwise works well (minus missing fade support, but that is throughout the game anyway).
"
"8de370e847e967e736036ccb6620f02dd1054181","2011-03-09 14:10:47-05:00","MOHAWK: Correct start times for Riven credits
"
"0d271324db406bcdfe51ae4b8ebf30eebef32860","2011-03-09 14:11:28-05:00","MOHAWK: Remove outdated TODO
"
"a55a211ddc270e8f9f292874b1a8e5881b572294","2011-03-09 20:18:34+01:00","SCI32: Reroute kSave(5) to kGetSaveFiles(). Any differences to pre-SCI32
kGetSaveFiles() should be worked out there.
"
"354e7d05888c69f1af9778ecd065ffc02505fa4b","2011-03-09 20:19:50+01:00","Merge branch 'master' of github.com:scummvm/scummvm
"
"952d1a084c851a33d8094e384f80890141d63157","2011-03-09 20:50:11+01:00","SCI: Implement Mac iconbar event handling.
"
"5c504739bd16b4a3eecd57b117010baad0d3ef1d","2011-03-09 23:33:26+02:00","SCI: Removed unnecessary parameter from deallocate()
"
"3ee4830b2e95a4fba97b8aaecaae02f10fed9f0e","2011-03-09 23:45:42+02:00","SCI: Don't patch the save/load dialogs in Shivers

Shivers uses a custom save/load system, so we can't replace its dialogs
"
"4ba1c5c106efc1523811731db107e90c7afbca63","2011-03-09 22:21:07+00:00","CREDITS: Add credits for web sites maintainer and new skins

Also add Andre in the credits for Android port.
"
"5ed102ded992a1b22481ddbb73ef292e5f4e2a77","2011-03-09 22:36:24+00:00","CREDITS: Fix typo in previous commit
"
"6fd6291390883506889420564f758590689b1864","2011-03-09 17:22:39-05:00","MOHAWK: Fix typo in the Riven missing executable dialog
"
"cf657d09e84f41ff8234f26e6086c48dfb2e8fb4","2011-03-10 00:25:29+01:00","TOON: Janitorial: Suppress blanks at end of lines
"
"fae2be668fb235c5f145276f98f264c254410d7e","2011-03-10 01:32:03+01:00","TOON: Cleanup
"
"60bad3754b54e7cf178b54a9db6c487403289d71","2011-03-10 03:11:23+02:00","SCI: Fixed regression (shift key) in the latest event code cleanup
"
"40e9374679a48e7d5d1d71078826e578f61d7ad1","2011-03-10 02:53:33+01:00","ALSA: Strip trailing spaces in device name.

This might fix odd problems when storing the device name in the config file,
when the name ends with a space by chance.
"
"601a09e4179835786b3da97edc2186b2817311ae","2011-03-10 04:40:30+01:00","ALSA: Work around a firmware bug in USB-MIDI cables.

Thanks to waltervn (and wjp) for their investigation on this and Walter's SCI
specific workaround which I more or less just copied here so it will apply for
all engines.
"
"ff9653ddea2d5eb959085edb916e13908fd41aa8","2011-03-10 04:45:06+01:00","ALSA: Fix formatting.
"
"91d2d04f90d020ab9a4eee9b16c0f95dcd6737bd","2011-03-10 18:05:59+02:00","SCI: Some renaming related to the undithering code

Renamed some variables, functions and comments related to the
undithering code, to make them a bit easier to understand
"
"0929d1e12d1f03dd115ee98a5b8a85033458e465","2011-03-10 19:18:37+02:00","SCI: Don't try to uninstantiate scripts marked as deleted

Trying to delete a script marked as deleted should do nothing. Hoyle 3
tried to uninstantiate scripts more than once, and we incorrectly
decreased the reference count of associated scripts more than once,
thereby killing them. This properly fixes bug #3038837 (removed the
hack for it). Many many thanks to wjp for his help on this :)
"
"24df295328dc118bd1dcf03abaf9c68c665a7ab6","2011-03-10 21:50:06+02:00","SCI: Made some checks inside unditherBitmap() more understandable
"
"bf62098dd5f114b6cd82342ce9042d6ff9305d36","2011-03-10 19:24:28+01:00","CONFIGURE: Add support for Android's armeabi-v7a

Extended ABI with Thumb-2 and VFP hardware FPU instructions
"
"fb0b9dd7b32ae668c16e92d756007764cacb7d15","2011-03-10 19:42:02+01:00","CONFIGURE: Fix some whitespaces
"
"a5a8af86ee43ead26f1fc73f48661da878603711","2011-03-10 20:11:15+01:00","CONFIGURE: Change Android debug flags logic

Use --enable-debug instead of not --enable-release
"
"bca82642a79c250a958111b437a2fe18c1a1101c","2011-03-10 22:42:17+02:00","SCI: kPurge is the SCI2+ version of kFlushResources
"
"2cbcc76789f72f693763661422e4bf30b2f3441d","2011-03-10 18:45:51-05:00","SCI: Fix uncompressed SCI1.1 views

A regression from d2ad7898d93
"
"9a4e433f88df01918c426ce92e903632730de7d9","2011-03-10 20:02:05-05:00","SCI: Fix mouse positions in upscaled games

A regression from 463e475bd65
"
"f814108d850f7370151f2e7c31d5bea9b9ac4a0e","2011-03-11 14:19:15+01:00","MOHAWK: Fix intro finish notify in LB poetry mode.
"
"2a37ed395c4090b531137722e65b74157f814a95","2011-03-11 18:05:13+02:00","SCI: Fixed bug #3034714 - 'KQ5CD: ScummVM freezes in dark forest'

This is a heap patch for an odd object used in that scene, which will
suffice for now (until we find why this works in SSCI). Thanks to wjp
for his help and work on this
"
"5acac402af8d31cae2b10884fab4d7571fdc2cca","2011-03-11 19:12:05+01:00","MOHAWK: Seek to first frame on kLBOpRewind.

This might need some further thought when implementing more complex
seeking for the later games, but works for now.
"
"ba606e369338dcb77946f82ba02ed1ca266f28d5","2011-03-11 19:15:19+01:00","MOHAWK: Don't warn about odd LB version record sizes.
"
"a2a5083dc9bf51d92f7c001d60fc554b901eade0","2011-03-11 20:43:38+01:00","AUDIO: Work around ARM code volume limits

The ARM specific rate converters work with 8bit volume vars. Limit
volumes to 0xff to prevent crackling.
"
"3d576c184a54d9fb1114e0c46ba96c2a86b88b43","2011-03-11 20:53:25+01:00","AUDIO: Fix some whitespaces
"
"bd6602ea6f3956e4670dd2c22980039c1ddc018e","2011-03-11 23:09:13+01:00","SCI: Clarify fix for KQ5 witch freeze bug #3034714

The cause for this bug turns out to be a corrupt object that as
a side effect accidentally bypasses its own corruption. See the
added comments for details.

Also add a warning that points out similarly corrupted objects.
"
"0b8c57be8482f58d6c5a9ff54102c440cf399dc4","2011-03-12 00:57:45+02:00","SCI: Moved a heap patch from kScriptID() into script_patches.cpp
"
"56db3c17a52973a5f5b0019fa8787d5987ae261c","2011-03-12 10:56:20+11:00","TSAGE: Implemented Scene 2300 - Starcraft - Hanger Bay
"
"7e0d120ce18c7e2fb3d1a8b4f43679e97a8a89d9","2011-03-12 17:21:55+11:00","TSAGE: Separated out detection tables into the standard detection_tables.h
"
"97a674ca09008fc0226b5822173d3a765a460ebf","2011-03-12 17:22:32+11:00","Implemented Scene #2310 - Spacecraft - Copy Protection screen
"
"4afa2c62b979251cb4d8ff7e5a97f5385a6287fe","2011-03-12 09:13:33+01:00","ANDROID: Get rid of ugly casts
"
"99c0d825418de549c42f26532eb444cdfa82e507","2011-03-12 09:15:27+01:00","ANDROID: Cleanup paletted textures
"
"7fe487f9cc4cb4b7ee6a121f33b9d284bfc15ed7","2011-03-12 09:17:58+01:00","ANDROID: Add more paletted texture types
"
"2259f922f8c2a7b2839edf8f4ae9bbe17c1016ab","2011-03-12 09:20:21+01:00","ANDROID: Remove redundant variable
"
"caf21a357bef24ced14d8b67c7f3f6687a767570","2011-03-12 09:22:11+01:00","ANDROID: Cleanup
"
"0cdaff65c104f11954167048455d4258d053e1cd","2011-03-12 09:33:45+01:00","ANDROID: Use 16bit pixel formats on CLUT8 textures

This reduces the CPU usage on 640x480 games by ~5% on my droid when
reuploading the textures to the GPU
"
"429b091ed1a4881bcc3d39686d764e72eb355b9e","2011-03-12 09:35:51+01:00","ANDROID: Convinience make target for testing
"
"aec1aa0b52294edcdb3eb53bdbba363abd68c208","2011-03-12 22:01:41+11:00","TSAGE: In progress implementation of Scene #2320 - Starcraft - Hanger Bay
"
"fc3a7b961c80310e283aadc9174c3bd63827d260","2011-03-12 23:33:14+11:00","TSAGE: Bugfix for cloning the SceneObjectWrapper when a SceneObject is cloned
"
"3148f9264cf92fefcabecbd83505af39b8ec77dc","2011-03-12 23:33:59+11:00","TSAGE: Bugfix to refresh the screen when leaving a close-up conversation
"
"0bc9db7872ca163a2a7ccfde74ab0afa4656345c","2011-03-12 18:33:32+02:00","SCI: Added automatic detection for several selectors

This ensures that these selectors will be detected regardless of the game
ID, when they're missing
"
"5dce3235e97758a76bac899d80e8166dcf33986d","2011-03-12 23:45:36+02:00","SCI: Some changes to the 'dissassemble' command

Fixed a bug (the 'bwt' and 'bc' options were inversed) and added the
ability to skip a defined number of ret calls, useful when a function
continues after a ret call
"
"fa10ee66e46be4a08743f920ec50f11df1017a12","2011-03-12 23:48:56+02:00","SCI: Added proper fix for bug #3048054 - 'LONGBOW: crash when opening hand code'

This was caused by a buggy script, most probably the result of an
incorrect copy/paste while processing the original script. Fixed with a
script patch.
"
"6fe95780d358f2d7854c342448eb61159f267656","2011-03-12 23:43:29+01:00","SCI: Continue disasm until no jumps go past the current opcode

This should ensure disasm will disassemble an entire function, and
not stop at an intermediate ret opcode.
"
"8918d5e66c09b1c06b49b068eda17fe6c97c79ce","2011-03-13 00:27:28+01:00","SCI: Fix warning
"
"1566ef32b6bfd321415df09cc5e7b83ce56a1de0","2011-03-13 04:19:44+02:00","SCI: Added another version of QFG1 / Hero's Quest (bug #3206006)
"
"40333617ee4a0fede7c8cdec81a025ccab06e9e3","2011-03-12 12:24:14+01:00","SWORD1: Don't set the same cursor on every frame

Removes unnecessary overhead on the backend when the cursor has just
one frame.
"
"5b820cee64f54a0c28772fb40256334a7206ea53","2011-03-13 14:46:57+01:00","SCI: Restore full object state after collision in DoBresen

This makes the workaround for the hang in the Colonel's Bequest
shower scene (bug #3122075) unnecessary.
"
"29d0078b7009ccbf0ee406faaf441787f42e73c9","2011-03-13 16:15:09+01:00","TSAGE: Add detection for 'First Wave' ringworld (english)
"
"a93229cae53bd35b320e72bd5fe794e8dd79c318","2011-03-13 14:16:39+01:00","ANDROID: Don't use compressed textures for the game screen

Some GLES drivers suck so much that uploading data to the GPU takes
ages. CLUT8 games now use a faked paletted texture, which internally
uses a RGB565 hardware texture (Android's native pixel format).
This seems to be the only way to efficiently implement constant
changing textures with GLES1 - at the cost of extra buffers.
Then again, we can now use glTexSubImage2D to only update the dirty
rects, which wasn't possible before because glCompressedTexSubImage2D
is only usable on GLES2. This commit does exactly that.
Overall, the CPU usage is massively reduced for CLUT8 games.
"
"2721e287e5bcd1f4d524f869c26156e27f5ba187","2011-03-13 15:51:37+01:00","ANDROID: Buffer 16bit texture contents

Same issue as in the last commit: glTexSubImage2D is slow, so cache
all copyRect*() calls in a buffer, and update the dirty rect once
when drawing. Reduces CPU usage on 16bit games significantly.
Also, lockScreen() returns now pixel data for non-CLUT8 games instead
of asserting.
"
"fa51d82639a500939907fdc9d18497914c60fe2c","2011-03-13 16:37:56+01:00","ANDROID: Prevent unnecessary reallocs
"
"787b27a4b1cde2bd8e750b4eb477189565588e28","2011-03-13 16:42:50+01:00","ANDROID: Add missing updateScreen() calls
"
"0360b4ac95e08d6350f63b0801557ebed9a90796","2011-03-13 18:27:46+01:00","SCI: Add reference to related bug to comment
"
"5a7c2e0df54b2987cf60adc536a822fdb23bd58d","2011-03-13 17:50:40+02:00","SCI: Fixed regression of rev b1055a3c86. Japanese games should work again
"
"d7c8ed0f5d783bbfccbb6e627689064b1149e2fd","2011-03-13 19:34:23+02:00","SCI: Cleanup
"
"fd2c39591f03778be83b44ed3f7ab470f0011644","2011-03-13 23:33:31+02:00","SCI: Fixed the flashing icon bar in the Mac version of Castle of Dr. Brain

Thanks to waltervn for his work and help on this
"
"9e1245c420c8cd4547eb0828c434856c97260c0b","2011-03-13 23:50:40+02:00","SCI: Fixed version and scene transitions for SCI1 Mac games
"
"3964ce81233c3e76b90cd8363781ac2a0558ed12","2011-03-13 23:11:47+01:00","TOON: Add more dirtyRect checks
"
"4267011e3a42b3f633f86e3df6af12c456aa0f60","2011-03-13 22:08:19+01:00","ANDROID: Some texture convinience functions
"
"79d991081dbeaddd0294c6bbf01675d1ec1fbb72","2011-03-13 22:31:28+01:00","ANDROID: Add support for video feature flags

kFeatureFullscreenMode and kFeatureAspectRatioCorrection are supported
now. The former prevents scaling to the full display - it scales one
axis and keeps the game AR.
"
"2dd669d808b89f0d3777d196091b404a4e9baf05","2011-03-13 22:41:07+01:00","ANDROID: Remove leftover TODO

Resolved with a93229c and 2721e28
"
"c63c2a9e59ab9f9013a5e0e1f6c443352ce4f20f","2011-03-13 22:56:44+01:00","ANDROID: Fix texture clear color
"
"df9167c6b33fbfcb259480c14b08be5c32de6fd3","2011-03-13 23:14:42+01:00","ANDROID: Add graphics mode for linear filtering
"
"ecd265b539452cfbd5eee96b5e4817dbed397d72","2011-03-13 23:23:29+01:00","ANDROID: Center mouse on overlay visibility changes
"
"f82121d2a279693f47a25e30e36c34e1e0ff21bd","2011-03-13 23:27:36+01:00","ANDROID: Don't merge mouse move events

Breaks more than it solves
"
"4b6e5e7b06c758d2c6738efaff5dceaaacfed214","2011-03-13 23:45:52+01:00","ANDROID: Clip mouse coordinates
"
"0b9e6675ef7e7c2b11345ac2f556e5891222840c","2011-03-13 22:00:10-04:00","SCI: Add workaround for a QFG1 VGA Mac kFormat bug

Also, fix the kernel signature for kFormat to require two parameters
"
"58498dca8effe5de50890f53c18fb8fc5aeb0939","2011-03-14 13:12:59+02:00","SCI: Removed obsolete comment about kDoBresen()
"
"75319afbfdc1e42179e261065a876bcf6f685bab","2011-03-14 19:59:30+02:00","SCI: Ignore some more leftovers scripts in the find_callk console command
"
"ca1f9a075f7914ae3ceb83b9a01b5b7a193041e9","2011-03-14 20:00:26+02:00","SCI: Got rid of VERIFY() and removed some newlines in error messages
"
"57635fe75cdf01a654d760efa0528a2aa186a391","2011-03-14 17:24:12+01:00","ANDROID: Update screen rects on surface changes

Fixes regression introduced with 4267011e
"
"e1575e57f818f57b022531f31161e521869d7483","2011-03-14 17:50:19+01:00","ANDROID: Extend clearScreen to take care of all cases

Hopefully that'll help me to not forget about the double buffering.
This fixes some gfx leftovers when not running games in fullscreen
mode.
"
"f587b6ee04b18366205277f76c3f048313e971a6","2011-03-14 18:06:08+01:00","ANDROID: Implement grabOverlay()
"
"5b94159f40fba8edaf15bf8961c479898646eb2d","2011-03-14 18:53:38+01:00","ANDROID: Clear fake palette after allocating

Gets rid of funky gfx artifacts on the overlay
"
"6389e70e45864aaec860481cc25208f1a9ca4a76","2011-03-14 18:58:33+01:00","ANDROID: Remove clearBuffer()

Not required. Why did i add that again?
"
"d060b597c38d6332ae4eb79d051427a2381bfc5c","2011-03-14 19:27:10+01:00","ANDROID: Fade out the game screen when the overlay is visible
"
"f706b1568d286bb2c145046e4d3f04f6ee177314","2011-03-14 20:10:41+01:00","ANDROID: Cleanup

Removed not required checks since we now buffer texture contents
"
"9e7ee4953ec5ca41a30c178ce778149a86f07b8f","2011-03-14 20:26:35+01:00","ANDROID: Halve the audio buffer size

Also, run into the blocking audio write without sleep. This hopefully
fixes audio hickups on slow devices.
"
"4c5950dff2314aa50cf240543024dab7a13242a6","2011-03-14 21:31:28+02:00","SCI: Fixed find_callk

Create a custom segment manager within find_callk, so that the game's
segment manager won't be affected by loading and unloading scripts in there
"
"c1cdc49ac57880c069607600b53d1ee958b723a2","2011-03-14 20:10:17+01:00","SCI: Add code to enumerate shadowed selectors

If an object defines more variables than its base class, some method
selectors may be hidden. This code tries to enumerate the affected
selectors. It may be useful for mass-scanning objects using
'find_callk Dummy'.

It's disabled by default currently since it does things to partially
uninitialized objects that I can't guarantee are 100% safe at this
point.
"
"0a983e1df5c8db22fe7e480322c1f2bd10cdef26","2011-03-14 23:28:15+01:00","TOON: Fix more dirty rect issues

Especially not refreshing pictures when viewing
inventory items and corrupted last line of the screen.
"
"6864a6084d15bc31cd805c0506427efa742be823","2011-03-14 18:46:47-04:00","SCI: Fix the screen height of SQ1 Mac
"
"8f40a18146a1a16a5a1d3932e08c2f45e53ea000","2011-03-14 18:47:23-04:00","SCI: Remove a space at the end of a warning
"
"7b850c18c7303fa06ff357cf2295e868a16ed1cf","2011-03-14 23:44:43+01:00","ANDROID: Cleanup
"
"6e4af65be1bbb7abb88bd75f5fe2f0260530f6ad","2011-03-14 23:49:18+01:00","ANDROID: Add missing cases to getFeatureState()
"
"20681c21dc9bd65a9f1bd705b65a00366a3c139e","2011-03-16 00:52:51-04:00","GIT: Ignore Code::Blocks project files
"
"6c2bf87dbdb66f48de006b3bb409641f6755fa5e","2011-03-16 16:27:20+01:00","MOHAWK: Warn only when anims reference named sound files.
"
"6b346c1fe04a8e3ed770d6246532391591265ea2","2011-03-15 22:54:01+01:00","ANDROID: Cleanup and extend chooseEglConfig

Add more checks and log all possible configs
"
"e71c2cf850388b2a25200d544d2fb422525b4c88","2011-03-15 23:01:09+01:00","ANDROID: Constify getDrawRect()
"
"adef4c3f4256a690b374b9801279952c39ccf7a4","2011-03-15 23:30:17+01:00","ANDROID: Input system overhaul

Rewritten input system with many new feature.
Fixed related bugs and shortcomings on the way.
"
"3a38a97934e422416271dc5dc5bb46709a1c7c13","2011-03-15 23:31:58+01:00","ANDROID: Reindent
"
"454bad69e998a8007938e0505f5fafe4e3b06eaf","2011-03-16 20:58:57+01:00","AGI: Remove newlines from debug()
"
"6ddfd24c26edabf00b2020b79351dfff372ab269","2011-03-16 21:28:13+01:00","TSAGE: Implement scene7600
"
"53426e6ed761808420f8b153fa7ceba5bdf010a0","2011-03-16 22:39:42+00:00","CINE: Add Opcode 0x40 (o1_closePart) to Operation Stealth.

This silences the warnings and a basic playtest has shown no issues.
"
"093b74e40541842e4f385f92a75e9eee93a24c2d","2011-03-16 23:55:54+01:00","ANDROID: Disable game/overlay blending

Doesn't work on some drivers, need to do it differently
"
"26e9cbccfe08d314f900292221f48fff53120daf","2011-03-17 22:49:14+11:00","TSAGE: Changed walk_regions debugger command to work in scrolling screens
"
"2ea302077c53cc10f456ce9e3416320c37cdadc4","2011-03-17 22:57:24+11:00","TSAGE: Bugfixes for player movement in wide-screen scenes
"
"c8133914550a7ac8bab3761406882bcdfc8347a5","2011-02-28 01:50:06+02:00","HUGO: Renamed menu.* to dialogs.*
"
"901b5e209743dc5fdee136758956809e7eaf7eda","2011-02-28 02:30:41+02:00","HUGO: Initial work on user input dialog
"
"4ea65d0a1e6c300007efc314d32936594818a003","2011-03-17 17:29:40+02:00","HUGO: renamed guard #defines
"
"0389bd0c4b10e8286b6c2e52c726bfc370487ae5","2011-03-17 17:46:38+02:00","HUGO: Fix compilation
"
"cb6f02f7ef6c5c81892cd8f8bd2f5e323e388fa4","2011-03-17 16:48:55+01:00","Merge branch 'sdl-focus-rect' of https://github.com/lordhoto/scummvm

Conflicts:
backends/graphics/sdl/sdl-graphics.cpp
"
"e08683d939d621f20b0376f9da561f06c4944e31","2011-03-17 17:37:42+01:00","OPENGL: Refactor warpMouse.

Now subclasses will not need to worry about the scaling logic themselves, but
just need to implement setInternalMousePosition, which should handles setting
the system's mouse coordinates.
"
"019aa63b1580a2b629f45aa436cae47b0b330794","2011-03-17 17:40:51+01:00","OPENGL: Fix 'Original' mode by setting up the corret screen dimensions.
"
"3c656916f169e0428bd62c390a8ccb7b7dbd150f","2011-03-17 18:15:50+01:00","OPENGL: Always properly set the overlay dimensions in loadGFXMode.
"
"372af10a7bf154a625c9af7e65820a007bd43584","2011-03-17 18:31:35+01:00","OPENGL: Update the OSD texture when visible while the output mode changes.

This fixes annoying graphics glitches, which occured sometimes when resizing
the Window.
"
"42d3b8fcbda7793bf3ef8435db5ed78f7350cf4d","2011-03-17 18:34:22+01:00","OPENGL: Fix compilation when USE_OSD is not defined.
"
"2ea6380040e934802de2ed65abeb074c98304b4a","2011-03-17 18:23:37+01:00","ANDROID: Plug RGB cursor memleak
"
"23213d23dc51d158321ce22c4cefddf771a3a36f","2011-03-17 18:25:23+01:00","ANDROID: Log ASCII code of invalid keycodes
"
"f4fd9e8b504a2e49fbd67d288e591377c466760c","2011-03-17 18:56:22+01:00","ANDROID: Fix cursor visibility
"
"82bcddf8dacb894fe1155ca768df9a072984ef91","2011-03-17 19:03:51+01:00","ANDROID: Init vars to match with the defaults

The feature flags are set too late, so lets fix that here
"
"70e2c4266b20d09e4bc2d89fcd3d3fba6ddaade9","2011-03-17 19:29:34+01:00","ANDROID: Get rid of more gfx glitches
"
"96979f73fc10679fc0112cfbc55d6b661d744b05","2011-03-17 19:47:18+01:00","OPENGL: Slight refactoring.

First step into making all state variables of the OpenGL backend private, to
help making the backend more maintainable, by disallowing subclasses to just
mess with everything...
"
"758aa78acc129c78942246df0e6425f03f2fa968","2011-03-17 19:53:19+01:00","OPENGL: Get rid of _aspectRatioCorrection.
"
"563ac93c166f31864c2bcaa9e99e71e2c5882910","2011-03-17 20:07:24+01:00","Hugo: Use EntryDialog in Box()
"
"8953581ec9dcde966ec7a5e2e7f2c37a4cf4d109","2011-03-17 20:48:44+01:00","ANDROID: Ignore the slop area on all touch scrolls

Prevents initial cursor jumps
"
"0eb5352290ddfea9d90f99b97fa0d89c806d25e0","2011-03-17 21:00:15+01:00","ANDROID: Increase default touchpad mode scale

aka my display is bigger than yours
"
"daf6050d7c5d625bff4516f86cbec205bbd51c80","2011-03-17 19:58:47+01:00","OPENGL: Make setScale non-virtual.
"
"c9f61361108a2b07c02be7656d64540fb568843c","2011-03-17 20:01:54+01:00","OPENGLSDL: Cleanup.
"
"8d87a460b075793c3a06f5339eb5ee14c7498005","2011-03-17 20:17:43+01:00","OPENGLSDL: Handle active fullscreen mode OPENGLSDL internal.
"
"83b199e9212092bcc737e36eb3f0cff0666ddeac","2011-03-17 20:27:00+01:00","OPENGL: Move setFullscreenMode to OpenGLGraphicsManager.
"
"f490e6f361e55c2347b51611eb8f03a721630421","2011-03-17 20:29:48+01:00","OPENGLSDL: More refactoring to avoid direct access of OpenGlGraphicsManager's members.
"
"8d35d91bdf3eab421233c6b971d6dec39b2f45b0","2011-03-17 20:35:04+01:00","OPENGL: Cleanup switchDisplayMode.
"
"83c638ad02709b39d72c5c575b3683bfd76dbbaa","2011-03-17 20:43:59+01:00","OPENGL: Setup the correct header size for BMP screenshots.

This fixes an color bug in the resulting screenshots.
"
"8ab136dafb2cef66e48ae24db6bd994e134f91e3","2011-03-17 21:19:28+01:00","OPENGL: Fix screenshots when the display width is not divisible by 4.
"
"47e9db8fdff9c538698450725cc0a369e6e9eab5","2011-03-17 22:02:17+01:00","ANDROID: Fix KeyEvent NullPointerException

Could happen with some special symbols from the virtual keyboard
"
"9dad957454f2d4f7e8c7949e46d252346fbdd66b","2011-03-18 22:58:36+11:00","TSAGE: Corrected background scrolling on wide-screen scenes
"
"5ee5dd76f50fb59d7a438471974b3ff197702835","2011-03-08 17:43:55+01:00","SWORD25: C++ify some code, remove obsolete stuff
"
"4130f66af2fbb44e32060f40ff1f5843c9a9a6b8","2011-03-08 18:01:32+01:00","SCI: Remove unused MAX_SAVE_DIR_SIZE
"
"90c3ae249326eddfe2f501752629e1974ac5eb35","2011-03-08 18:44:27+01:00","ENGINES: Change GUIErrorMessage to take param by ref, not by copy
"
"004df22752b47e26f757100b6faac04dd7b707e0","2011-03-18 21:24:50+01:00","GOB: Add an Italian version of Urban Runner

As supplied by 'Alex' on my Gobsmacked blog:
<http://drmccoy.de/gobsmacked/?p=407&cpage=1#comment-2070>
"
"b7215472136c91841d44decd6955b4eb3e3e2ce1","2011-03-18 21:05:46+01:00","ANDROID: Implement trackball click
"
"e056bfca9c0ef1a07f4a9703d842ffa669096b0d","2011-03-18 21:22:48+01:00","ANDROID: Seperate DPAD codes
"
"3e3619feb87c9b63a0dae08c2dd29ed43dc1bc82","2011-03-18 22:14:54+01:00","ANDROID: Cleanup
"
"03f9f0e740c79d67c74b044a30d1dc79491fcaed","2011-03-19 00:05:38+01:00","TSAGE: Scene 7000 (imperfect)
"
"bda0d536228fe7749fb36924ffae49167627b4d7","2011-03-19 00:06:49+01:00","TSAGE: fix compilation on GCC
"
"3924fc0bada989332b66292204e328341f6ab72e","2011-03-19 01:56:10+02:00","COMMON: Enable math constants under Visual Studio
"
"156f1c01785aee64ecac831e38d6d38d04eb6990","2011-03-19 01:57:39+02:00","SCI: Added another leftover debug script in the find_callk console command
"
"0eb2c4709ebba9b8c63c7e42be3ba83e109ecbc5","2011-03-19 02:22:06+02:00","SCI: Changed several places that use PI to use the standard M_PI instead
"
"19d3972f1673c5cb5fe6bd0521044b3d95f4bff6","2011-03-19 02:29:22+02:00","VIDEO: Changed several places that use PI to use M_PI instead
"
"334e1cd675d01a92046bb7296c97394d4daabe99","2011-03-19 02:30:03+02:00","GRAPHICS: Silenced a warning
"
"a6aacc73e2dc00b6cdeaa5ec08e07b9b285b2fb6","2011-03-19 02:30:32+02:00","AUDIO: Changed several places that use PI to use M_PI instead
"
"be3ca5216881ae01a9a3db7794fb7c685b29fd65","2011-03-19 02:32:19+02:00","MOHAWK: Changed usage of PI to M_PI (normally defined in math.h)
"
"8af0d35a5ff17e8e4f52401a0758cf6f04e0e17a","2011-03-19 02:32:53+02:00","TESTBED: Changed usage of PI to M_PI (normally defined in math.h)
"
"d602a420b622ce77c4a7e3782a4e7cad3a09e480","2011-03-19 02:33:09+02:00","SCUMM: Changed usage of PI to M_PI (normally defined in math.h)
"
"23aabc950a2b8ac2fb986dba1988319246b6881d","2011-03-19 02:34:02+02:00","COMMON: Removed custom PI define (M_PI should be used instead)
"
"a4c05b1632940b3f2003055e0c64970b4b053f32","2011-03-19 04:01:28+02:00","Fixed compilation of the N64 port
"
"8246758e7eb8b43c13173f2ec1714a3ed622cb0c","2011-03-19 14:20:15+11:00","TSAGE: Implement original engine scene scrolling optimisations

Wide screens are broken into 160x100 chunks. When scrolling, sections of the scene which have already been previously decoded for display can be reused, rather than re-decoding them from scratch
"
"10836d20f6be451cdb62a8dcb98d2175c03d3947","2011-03-19 14:58:30+11:00","TSAGE: Added command to show the priority regions of a scene
"
"47be9eee49b1f8eae03fb5d2b834d3cf51b055a6","2011-03-19 14:59:26+11:00","TSAGE: Correctly handle priority regions when drawing in a wide scene
"
"f173b6862f1d98a60b67a454484ac34731007747","2011-03-19 15:03:20+11:00","TSAGE: Replaced some values with proper constants
"
"223ffde8ce9660bb2bcb02ccee6255130c6fec64","2011-03-19 16:10:45+11:00","TSAGE: Bugfix to the sequence manager to treat parameters as signed integers
"
"93b5873836a534e62dd4d7fdf4ae1f6cf4af068d","2011-03-19 16:11:24+11:00","TSAGE: Added support to priority_regions to display a single specific priority region
"
"d5ecc4e7889327cd2e315ecd2e9cae4c5a17dbf4","2011-03-19 18:11:18+11:00","TSAGE: Completed Scene #2320 - Starcraft - Lander Bar
"
"ec7e7519112247470e3e539a43040022a6e12c6e","2011-03-19 21:07:04+11:00","TSAGE: Implemented Scene 2400 - Descending in Lander
"
"2def212de75b3885738c4db188f0a42b712bd48f","2011-03-19 11:24:06+01:00","ALL: s/PI/M_PI/

Tip of the day: git grep -w PI
"
"88b909b26df5a5d40e8d5792e3d6b502740c332f","2011-03-19 22:16:29+11:00","TSAGE: Corrected bugs in Scene #1400 - Ringworld Wall
"
"69e271225f43e7c6c34fbc9c1e0cf73afeedfe18","2011-03-19 12:17:43+01:00","ANDROID: Log some system properties
"
"0d9a852f464e484d5733de6268d6d0b917294120","2011-03-19 12:36:27+01:00","ANDROID: Implement OSystem::getSystemLanguage()
"
"eb1c1e7e6aa398a957a13929e463da2fbcb96eab","2011-03-19 22:46:19+11:00","TSAGE: Implemented Scene #3500 - Ringworld Scan
"
"a3efe915d30da6ce8d81157fcec5b5d7a51a6184","2011-03-19 15:22:15+01:00","PREAGI: Cleanup volume levels initialization
"
"f8271e0d07db5af850934595cb2c708f7d61bfaf","2011-03-19 14:50:28+01:00","AGOS: Cleanup syncSoundSettings()
"
"e5056cab91843ec0de9b2c9d1b6d91ed49189da9","2011-03-19 14:51:28+01:00","CINE: Init volume levels on startup

Add syncSoundSettings() to set the volume for kPlainSoundType and
respect the global mute setting
"
"562e502d7888e9b3a0a64725c9420c9e6484b5a9","2011-03-19 14:53:43+01:00","CRUISE: Cleanup syncSoundSettings()

And init volume levels on startup
"
"e43d54fa96fd354416c5e17e92dcb585c8779f4f","2011-03-19 14:54:31+01:00","DRACI: Init volume levels on startup
"
"d12278b4cce4f8a7cc76bf8868363c6397245322","2011-03-19 14:55:14+01:00","DRACI: Respect global mute settings
"
"a3616473aa3c1ee12d90b080be1938ecdacc2992","2011-03-19 14:56:20+01:00","DRASACULA: Init volume levels on startup
"
"3eda4c16ac5fe3256217ce10e3f974bbe7707d71","2011-03-19 14:56:52+01:00","GOB: Init volume levels on startup
"
"79ba16a89d9d498974034de3449c8b7910a884d0","2011-03-19 14:58:21+01:00","GROOVIE: Set global volume levels
"
"dfa5f743dec33ebd4910d008015dd93b65fb3bd4","2011-03-19 15:00:10+01:00","HUGO: Init volume levels on startup
"
"a0bdb6e5df2fbfbf0b0eb5f78109c38b1d428668","2011-03-19 15:00:30+01:00","LASTEXPRESS:  Init volume levels on startup
"
"69dcb993690b45c1012a9850c7e82c33de9a011f","2011-03-19 15:00:48+01:00","LURE: Init volume levels on startup

And set global volume levels
"
"dc6c88f3502ba4a4c5c535aff3e03aece4f6ebb5","2011-03-19 15:02:15+01:00","M4: Init volume levels on startup
"
"a42360ce3d32213cf6aa0d0e3057630edd0047d7","2011-03-19 15:02:36+01:00","MADE: Cleanup syncSoundSettings()

And respect global mute settings
"
"3dd2e0c3f6822dddd8ddbf717bdc4914fc2d66d6","2011-03-19 15:03:39+01:00","MOHAWK: Cleanup volume levels initialization
"
"5b6479c55aca2103f7442e9b07ebfd5ae83eb40c","2011-03-19 15:04:29+01:00","PARALLACTION: Init volume levels on startup
"
"b5af156839c3fc7704e3f49879b8e8dec8e5ece1","2011-03-19 15:04:58+01:00","QUEEN: Init volume levels on startup

And cleanup syncSoundSettings()
Also, respect global mute settings
"
"2cb664178654e4cbe388bd63ae5bdda62b6640ca","2011-03-19 15:07:06+01:00","SAGA: Cleanup syncSoundSettings()

And respect global mute settings
"
"fa11a6e8cffc0ed177329aaa0e8bf15387a15d49","2011-03-19 15:08:37+01:00","SCUMM: Cleanup syncSoundSettings()
"
"5e8907fc3cff41cd27e04bbbe5d434f2017fca88","2011-03-19 15:08:59+01:00","SKY: Cleanup volume levels initialization
"
"02956eaf0b220fb7395ee82971c26cb3e4502d8d","2011-03-19 15:09:21+01:00","SWORD1: Cleanup syncSoundSettings()
"
"606ac754cb7a15ef9e736eb6aacc710ccd2cc834","2011-03-19 15:09:48+01:00","SWORD2: Cleanup syncSoundSettings()
"
"e5b6146b78741033973ed830cf7132809a57b4b6","2011-03-19 15:10:09+01:00","SWORD25: Init volume levels on startup
"
"58f1e2f6effe194fef411264d069552f97d51f8c","2011-03-19 15:10:37+01:00","TOUCHE: Cleanup syncSoundSettings()

And respect global mute settings
"
"6650e69a3068e3b57e74f603a629c38359dbaaae","2011-03-19 15:12:14+01:00","TUCKER: Get rid of syncSoundSettings()

And respect global mute settings
"
"46e397fb25faf947085349ec4daec4cfdc2cd6a8","2011-03-19 17:51:02+01:00","ENGINES: Mute kPlainSoundType in Engine::syncSoundSettings()

The 'Mute all' option rarely muted all audio streams, since we have
this abomination called kPlainSoundType (and there is no volume slider
for this type). Both, not-really-muting, and adding yet another slider is
a horrible user experience imho - especially on handheld ports.
So mute this sound in the default implementation, and unmute it to the
maximum volume.
When an engines has a volume level settings for sounds it plays with
this type, it should overwrite said member and set it there.
"
"c7b9a1fd82800b6001405fcc487be5e650308632","2011-03-19 18:57:32+01:00","NEWS: Consistency
"
"0e9af50d486acded5f1bcac309dcc3cee86943ca","2011-03-19 19:52:01+01:00","ANDROID: Add port specific README

First version, just describing the controls and related hacks
"
"90ccc84305e85fdc079459256c442eae0d327a5a","2011-03-19 19:52:48+01:00","NEWS: Mention recent Android related changes
"
"c1abad7a7905061f4e66a2411b77dba7c53a19e3","2011-03-19 20:11:37+01:00","TSAGE: Implement scene 7200, fix some bugs in scene 7000
"
"2907f7d65219f93420cb2f9ec304408994f30857","2011-03-19 22:11:33+00:00","SWORD25: Fix MSVC Compilation.
"
"63a710dfbc839fb3681fd1ea69936761be1a42e6","2011-03-19 23:25:05+00:00","MOHAWK: Removed now unused Myst Variables Storage Class.
"
"492b6573ede1d6c24aeb2ef5523157e695fe0ad7","2011-03-20 02:08:12+02:00","NEWS: Added some updates on SCI, and clarified some SCI related news items
"
"ae29b57edbca8738768043af1c88973ab6ab8f3b","2011-03-20 11:12:11+11:00","TSAGE: Initial implementation of Scene #3700 - Remote Viewer
"
"4b371a9e7a73b08454be053134a5751b5f5152b3","2011-03-20 03:02:02+02:00","SCI: Disabled the BTTR entry for LSL1 Amiga

This version it contains a broken resource.002 file inside disk 3, which
contains a large chunk of zeros and several broken resources (e.g. pic
250 and views 250 and 251).
"
"1e68000def927dcb7312dc641caabb01cf241744","2011-03-20 04:10:29+02:00","SCI: Added a new console command, 'animate_list' or 'al'

This shows the current animation list, along with object properties,
positions and the scripts they belong to
"
"27e2201ce24e1408f25da4fa428bd7b55505cbd5","2011-03-20 10:09:27+01:00","GOB: Fix Urban Runner fallback feature flags
"
"e6c8d151f90b0d517d17c06202cd39e4b236ac90","2011-03-20 10:13:26+01:00","GOB: Add another US version of Urban Runner

As supplied by Collector9 in bug report #3228040
"
"e2af308ad2c4b35d8325dbf8357d299dd9606fc0","2011-03-20 20:26:09+11:00","TSAGE: Added new speaker classes
"
"3e1bea3f17999c7eef1395979d08b34d5c1fa3ee","2011-03-20 10:28:17+01:00","CONFIGURE: Fix PS2 compilation

newlib system include files suppress M_* defines under __STRICT_ANSI__
"
"aee359811d694ea106ba99b63c83687625a276c9","2011-03-20 11:53:57+01:00","QUEEN: Reenable speech per default

Regression (typo) from b5af1568
"
"948c97f31bf9d5c6b80b35739964ec5edcbb3102","2011-03-20 12:01:27+01:00","QUEEN: Fix the journal's music volume slider

Another regression from b5af1568
"
"c77e7f75a66c5236347fc6fc907e67f053a048fb","2011-03-20 13:29:21+01:00","ANDROID: Trust ASCII kbd codes on unknown keys
"
"a43689550e46b0d2299de48c777848adaca9f189","2011-03-20 14:54:36+02:00","SCI: Removed forward references to obsolete classes
"
"4df049f4d7fccb794db45c932e5188296907dbc8","2011-03-20 14:56:13+02:00","SCI: Added a new console command 'window_list' or 'wl'

This can be used to see a list of the currently open windows. Also, added
a sanity check for the 'al' command and performed some minor cleanup
"
"89f9c5a9c35834856bb3692fb30a9eb42606ec91","2011-03-20 15:29:12+02:00","SCI: Moved the engine hunk pointer processing code inside the GfxPorts class

This allows us make _windowList private again
"
"bdafdbd485b9776738b571bb33e4d168d4d7cd7d","2011-03-20 14:30:26+01:00","TSAGE: Implement scene 7300
"
"6502e191b939ad836c92dc602a6f0e4e4c75b044","2011-03-20 17:29:08+01:00","OPENGL: Handle aspect ratio correction as flag instead of having a special mode for it.

This partly fixes the OpenGL mode mess, but now OpenGL Normal and OpenGL
Conserve will feature the same semantics when aspect ratio correction is
enabled... That is still something to solve.
"
"33cf1f8f598f1137c710f17c6676784bb6b3674a","2011-03-20 17:30:23+01:00","OPENGL: Get rid of unused switchDisplayMode.
"
"ac7c1533151372503f33e396eae6175903f7c4e9","2011-03-03 14:49:09+01:00","NEWS: mention Tucker fixes
"
"3d0f255912e8440de9e6e4098f7303457f48918b","2011-03-20 18:31:18+01:00","TUCKER: add missing code for kSupportsLoadingDuringStartup
"
"96c7f0d22d26e46f40c2c6499f620e2a1e3ecb9b","2011-03-20 16:12:09-04:00","MOHAWK: Implement the Ytram trap
"
"3ed9e9f5754c47897c79717ffbd4f403a0358bd3","2011-03-20 23:48:22+01:00","TSAGE: Implement scene 7100.

There's a problem with _object1 and _action11: a NPC doesn't start
"
"c064fa5c5bb0f0fd15342e27b047dadfcbf08d56","2011-03-21 00:43:16+01:00","OPENGL: Fix mouse cursor position in Normal mode when AR is enabled.
"
"3ca8360b28005464a20986c8f7847675600df14f","2011-03-17 22:49:14+11:00","TSAGE: Changed walk_regions debugger command to work in scrolling screens
"
"370adb55eb9ed844296c3c48f262e33841648164","2011-03-17 22:57:24+11:00","TSAGE: Bugfixes for player movement in wide-screen scenes
"
"5e2eab6e4fff391022ef355a6df6050f7190bc0a","2011-03-18 22:58:36+11:00","TSAGE: Corrected background scrolling on wide-screen scenes
"
"2a374fb360903acdcd7a50c3321684ba93138b72","2011-03-19 14:20:15+11:00","TSAGE: Implement original engine scene scrolling optimisations

Wide screens are broken into 160x100 chunks. When scrolling, sections of the scene which have already been previously decoded for display can be reused, rather than re-decoding them from scratch
"
"b9955a3de676922313b39264e33ff6e3678d751a","2011-03-19 14:58:30+11:00","TSAGE: Added command to show the priority regions of a scene
"
"5df908a8063f54ef9a8dc060cd241841d5508e8f","2011-03-19 14:59:26+11:00","TSAGE: Correctly handle priority regions when drawing in a wide scene
"
"65fc9a375a23870be5b32dc5550a5728ee576977","2011-03-19 15:03:20+11:00","TSAGE: Replaced some values with proper constants
"
"c84da24261916b753385e6f0a781b8847c307f71","2011-03-19 16:10:45+11:00","TSAGE: Bugfix to the sequence manager to treat parameters as signed integers
"
"215afe224b6a0cfea676c60e801b55a1d65bcfb7","2011-03-19 16:11:24+11:00","TSAGE: Added support to priority_regions to display a single specific priority region
"
"d0dff8c47cd65f1051c00f73ca2df81f4e7f6222","2011-03-19 18:11:18+11:00","TSAGE: Completed Scene #2320 - Starcraft - Lander Bar
"
"dd29c4695f2127b37340197ba500736c1f53649c","2011-03-19 21:07:04+11:00","TSAGE: Implemented Scene 2400 - Descending in Lander
"
"b1af59029864710ae66b0890d9208c6b674e0c26","2011-03-19 22:16:29+11:00","TSAGE: Corrected bugs in Scene #1400 - Ringworld Wall
"
"51602483a408bd115d507f6b5ae482f6bf1f527d","2011-03-19 22:46:19+11:00","TSAGE: Implemented Scene #3500 - Ringworld Scan
"
"08918b512ef646a7a0e843b793215ab614dec500","2011-03-20 11:12:11+11:00","TSAGE: Initial implementation of Scene #3700 - Remote Viewer
"
"1c6d46ce834f4d114ef0b74eca854fee93da0b8e","2011-03-20 20:26:09+11:00","TSAGE: Added new speaker classes
"
"09fc6d6ee46ed43fd8e53ea68489d04333d1d04a","2011-03-16 21:28:13+01:00","TSAGE: Implement scene7600
"
"2b22b9e8fb61549c50df489f5144c08b9465e6b9","2011-03-19 00:05:38+01:00","TSAGE: Scene 7000 (imperfect)
"
"efaa811d4211bfd0554152c4921cf2ef33b98693","2011-03-21 08:06:18+01:00","TSAGE: Add some comments about Scenes in group #8
"
"b2ce645c1e3e501c36b460ff2049b5cb989ddfa1","2011-03-21 08:33:55+01:00","TSAGE: Cleanup after git merge epic failure
"
"458ebbafd25d729da88eced603a88af9a05b79b3","2011-03-21 12:53:50+01:00","HUGO: Split Utils::Box -> new funcs Utils::yesNoBox and Utils::promptBox

This also fixes a bug in the kBoxPrompt code (it returned a pointer to
the content of a temporary string object).
"
"4c765a0e6438e872c6c773244911ed046b936877","2011-03-21 23:04:18+11:00","TSAGE: In progress work on Scene #4000
"
"dd88f39bc7078f96fd06170260bf2ff332b4ca82","2011-03-21 13:07:23+01:00","HUGO: Replace Utils::Box by Utils::notifyBox + Common::String::format
"
"66ad86397ea08c00a30ae0bc7863b0b655498d57","2011-03-21 23:42:16+11:00","TSAGE: Bugfixes for animations in Scene #4000
"
"bf4dc80419b12bb2415d42ee413162bf56019288","2011-03-21 14:36:25+01:00","SWORD25: Reduce code duplication; formatting
"
"54ac6ade49393dba039c19117b094a72675812c6","2011-03-21 11:46:21-04:00","MOHAWK: Don't error out when the ReturnStackID cannot be converted
"
"cb948934abe14058bde1dc373da8ece04fd1e904","2011-03-21 12:06:35-04:00","MOHAWK: Add workaround for loading the bytramtime variable
"
"40c496d7301d1c0c6e80bfb0b5851a851237e167","2011-03-21 13:21:47-04:00","MOHAWK: Implement the hardcoded Catherine idle videos
"
"94c27e4657279aaae8c98aee58477265625b7a27","2011-03-21 18:27:10-04:00","VIDEO: Add a getDuration() function to SeekableVideoDecoder

This function returns the total duration of the video
"
"cdc4c3bfa88a3d94d3c75c9766e97fd87053241f","2011-03-21 18:27:49-04:00","MOHAWK: Add a getDuration() function to the VideoManager
"
"6b80d25f6e1eca3cca15a58aa8016c5c3fc5ee78","2011-03-21 18:28:02-04:00","MOHAWK: Implement the prison viewer
"
"273ba73d5fae0dd0d3b3f7c5f15f03d02c0af1b4","2011-03-21 18:33:48-04:00","MOHAWK: Minor cleanup and consistency fixes
"
"df80ff2f51f7dd3d0fd92e76037dc041323ca287","2011-03-22 19:05:11+11:00","TSAGE: Implemented Scene #4000 - Village
"
"0e35331302c2a132e092fb699b9ae1bcee8f1d17","2011-03-22 20:45:27+11:00","TSAGE: Implemented Scene #4010 - Village - By Lander
"
"71354fdf13f84573acba278b420c9d87ede16925","2011-03-23 00:31:29+11:00","TSAGE: Initial implementation of Scene #4025
"
"92f922aabe5811fcf595697bc1316aa57b4c9b66","2011-03-22 15:53:43+01:00","SCUMM FM-TOWNS: cleanup (thx LordHoto)
"
"ea79336ac90e12fe53242cfd9153db9d7087ca0f","2011-03-22 15:55:17+01:00","Merge branch 'master' of https://github.com/scummvm/scummvm
"
"55231f18cd8bb0cf5b64bcfc3effb30c12932ae7","2011-03-22 17:50:40+01:00","CONFIGURE: Apply patch #3193021 (AMIGAOS4: Typo in configure)
"
"d91c33ca26e8757ac0408ab4232dc0d749cc25d3","2011-03-22 14:10:53-04:00","MOHAWK: Implement xrwindowsetup
"
"2053936959f6d079c927866da8936cf5dcc7edde","2011-03-22 14:27:32-04:00","MOHAWK: Ignore other 'time' variables when loading saves too
"
"bb12acfa0ffc0c1fe0a907e6b63c3dd0c2acaec5","2011-03-21 22:50:21+01:00","AUDIO: Cleanup

Is it just me or is overwriting-but-not-marking-as-virtual
irritating?
"
"18d9654ca2b86033aff58c1e20ec9683cb97c47f","2011-03-22 11:53:10+01:00","TIMER: Cleanup
"
"5f96dc6867a509291af4e9b2632ae5c548101707","2011-03-22 20:29:08+01:00","ANDROID: Fix timer frequency to match SDL
"
"5277c86482d955d19441a1cd4b7363a61bd1a230","2011-03-22 16:46:31-04:00","LASTEXPRESS: Fix sound timer to only run every 17 milliseconds
"
"541a9b87033825d53cbb4575f8c7e5cfca69b6f5","2011-03-21 22:14:13+00:00","I18N: Add Swedish translation from path #3232066
"
"a6f11186c5495870a90fd5e631f90e42ef83beda","2011-03-22 08:12:32+00:00","I18N: Change language name from Swedish to Svenska
"
"14b13f54ae38d0fb65a6b072e1fa43ab9f6060df","2011-03-22 08:21:51+00:00","I18N: Update translation template from source code
"
"300c8b81e5f700aa108fdaf599ee2087c7b93de3","2011-03-22 08:23:01+00:00","I18N: Update translations files from template
"
"6f59d02db7c591d0efc062948d032e4d94677404","2011-03-22 08:44:22+00:00","I18N: Regenerate translation data file
"
"649304db3c067c25d64f3ef785d0c960e96281fc","2011-03-22 08:45:00+00:00","CREDITS: Add credits for Swedish translation
"
"c2d20b90d838ed0614fbfe56318e57d82afda2d7","2011-03-22 21:30:29+00:00","BUILD: remove obsolete rule for translation support
"
"fb4e5f7f8457ae56d3ba526ec93a2c5d348b0966","2011-03-22 22:07:15+00:00","I18N: Break keyboard shortcut translation by key

In the scumm help dialog, translate single keys, e.g. 'Ctrl' or 'Alt'
instead of asking the translator to translate individually  'Ctrl a',
'Ctrl b', 'Alt a', 'Alt b', Ctrl Alt a' and so on. This reduce greatly the
number of strings to translate.
"
"9adb25444ca7c18e097106a0f006d9050ec36d36","2011-03-22 22:08:55+00:00","I18N: Regenerate translation template and update po files

This follows the modification done in the scumm help dialog to
reduce the number of strings to translate.
"
"3e630ea09b9d13764f87074e88810a1f7797286d","2011-03-22 22:18:09+00:00","I18N: Clean po files (remove obsolete strings)
"
"ca772d14608e7fc3348e8d37c38ccb52ca566202","2011-03-22 22:19:31+00:00","I18N: Update translation data file
"
"92716d71edfe1b23482306e74a1d249c4f43bb0b","2011-03-22 22:32:18+00:00","NEWS: Mention new Swedish translation
"
"8982fff1b79aa3cc53a5c328b283e0f102cb647f","2011-03-21 15:42:17+01:00","AUDIO: Add pure virtual MidiDriver::isOpen() method

This in turn enables modifying MidiDriver_MPU401::close() to allow
it to be called on a midi driver that has not yet been opened.

The specific issue that triggered me to make these changes was a
crash-upon-quit in HUGO, caused by it instantiating a midi driver,
then encountering an error (missing hugo.dat) *before* having
opened the new midi driver; the general cleanup code then tries
to close the (not yet opened) midi driver -> kaboom

Also fixed some engines which were leaking MidiDriver instances.
"
"f40b74d496f53c2864ab9573b175498a978d0e0e","2011-03-22 19:12:49-04:00","MOHAWK: Handle launcher load fails more gracefully
"
"a730d30f0cf4ae0752635d2ab0b515c17ebf64b1","2011-03-22 19:52:55-04:00","MOHAWK: Cleanup installer handling
"
"4d6c020cf4c3f6c5acc5d025bbf9d5b4e879e129","2011-03-22 20:04:46-04:00","MOHAWK: Remove the Riven 'restart' console command

This ancient console function has no purpose any longer and is half-broken anyway.
"
"1ca67818594a9fb3ca5acfa3d7bb8f5e6c6c98c7","2011-03-22 20:13:01-04:00","MOHAWK: Minor cursor call cleanup
"
"e82e5e32ff750adc2f1454cba0949ce89d9e04cd","2011-03-22 20:31:54-04:00","MOHAWK: Begin to implement Riven opcode 38

Also, renamed it to better reflect its purpose
"
"bc1c84e6c8fd94e7043c6af3ec9c3abbb67e0cf2","2011-03-22 20:54:24-04:00","MOHAWK: Rename OldMohawkBitmap to LivingBooksBitmap_v1

'Old' is very ambiguous ;)
"
"50a35193c92cbab0b9824abed2399b400aaba1e3","2011-03-22 21:16:27-04:00","MOHAWK: Remove 'old' from the LB v1 sound function too
"
"5e6cc67e2e9b4ccd2cf6b02ec6b1a92841eae421","2011-03-23 19:16:09+11:00","TSAGE: Implemented Scene #4025 - Village - Puzzle Board
"
"649a5adb10eb5c28cd1db9110a6a1a7d05f57d97","2011-03-23 22:25:33+11:00","SWORD25: Commit of patch translating German comments to English
"
"f612695a33288729062293a6e4fb33d343244054","2011-03-23 22:56:51+11:00","TSAGE: Implemented Scene #4045 - Temple Antechamber
"
"44b466512fc00be2efa05f728212f850b584f321","2011-03-24 00:27:41+11:00","TSAGE: Initial implementation of Scene #4050
"
"4172414e358099bb937044629d6d9c794637629c","2011-03-23 11:26:41+01:00","COMMON: Remove TODO from struct Event

I moved this TODO to the Wiki TODO page and extended it there. Yet
while I originally wrote it, I now think that we are probably best off
keeping things as they are.
"
"756f592b61c0c1ca98b78c30a9be46b5560f0c69","2011-03-23 11:27:58+01:00","SCUMM: Remove unused iMuse MIDI 'passthrough' code
"
"99dbecf3b4a14382fa867610a43201fc150bfda9","2011-03-23 11:46:11+01:00","TINSEL: Make MidiMusicPlayer::_parser and _mutex protected
"
"7b02dac3c5678bb47216495fc97130b98ff2bfe4","2011-03-23 11:47:07+01:00","ENGINES: Use Common::StackLock in more places
"
"2bc842dcee9552b302ac1acc927e6305ab6fad19","2011-03-23 11:50:37+01:00","AGOS: Sanitize the mutex locking in MidiPlayer::startTrack
"
"a539be098d3b5598422e52a65457c68b43042e4a","2011-03-23 12:58:01+01:00","AUDIO: Update some comments, remove some obsolete ones
"
"c70c8864f131bfe42437b05d03f77ab198f59247","2011-03-23 13:04:46+01:00","AUDIO: Introduce a new MidiDriver_BASE base class.

The actual MidiDriver derives from it. MidiDriver_BASE only
provides the minimal API necessary for transmitting MIDI data.
The idea is that this is all MidiParser needs, thus allowing
us to simplify the various MidiPlayer classes in our engines.
"
"29847ea42da3e597d3496972c80ce49bea76da20","2011-03-23 15:23:26+01:00","AUDIO: Change several fake MidiDrivers to MidiDriver_BASE subclasses

Many engines follow the advice in audio/midiparser.h and create a
'pseudo-MidiDriver' subclass. But MidiParser really only needs a tiny
subset of the MidiDriver capabilities, namely those found in
MidiDriver_BASE. So we try to subclass from that whenever possible; this
allows us to remove many stub methods, and enables further future
simplifications.
"
"e70fd59b3505619cccb6f3280a4cf0fb57aefa97","2011-03-23 16:14:39+01:00","ENGINES: Further simplify pseudo MidiDrivers; fix some regressions

The regression affected AGOS and maybe some others; specifically,
the real MidiDriver would have been deleted twice -- I previously
missed that the Engine instances takes care of freeing the real
MidiDriver, not the MidiPlayer wrapping it.

This commit should clarify the ownership of the real MidiDriver for
most pseudo MidiDrivers.
"
"088bd7a70bc02aafab8d16385774efee55e270d2","2011-03-23 17:07:48+01:00","ENGINES: Remove unused MIDI pass-through code
"
"aaf05b2a5986fbbaed817fdaa5d2e8f961987dd7","2011-03-23 21:32:27-04:00","MOHAWK: Begin using a hashmap to store Riven variables
"
"b3e27bc0d6daa31783315b7f5f40316182971e95","2011-03-23 21:45:39-04:00","MOHAWK: Make Riven's save/load code use the variable map directly
"
"4235358fad5a6721728291c275000ecd0df1f65b","2011-03-23 23:14:59-04:00","MOHAWK: Use direct access on the hashmap for Riven variables now
"
"b3471354d050eaed62226f807cb73e4bc6ccf083","2011-03-24 20:48:58+11:00","SWORD25: Commit submitted patch of German comments translated to English
"
"0b9d36cb6bb46380e9dda610936f5d0967f3baa6","2011-03-24 22:49:20+11:00","TSAGE: In progress implementation of Scene #4100
"
"754c250c65ca746d7620d74928ce91af4e5ef228","2011-03-24 14:09:22+01:00","HUGO: When erroring out due to a missing file, tell the user which file is missing
"
"00932cc71540350e64c1f3b3dd495d8425500865","2011-03-24 14:59:44+01:00","QUEEN: Fix incorrect 'all notes off' handling
"
"2d4dff8cb46dbe249e5e7918aa50f6adfc5cf6ea","2011-03-24 14:59:52+01:00","DRACI: Fix incorrect 'all notes off' handling
"
"e9570c3a4b18984669bd17ba4c80c98c77f3f6f1","2011-03-24 16:33:17+01:00","AUDIO: Added Audio::MidiPlayer class

This code is currently not complete, but contains enough code to
allow several engines to switch their pseudo MidiDrivers to be
based on this class, greatly reducing code duplication.
"
"f4b30ecf6ebb8095eddfc62bb1e832b83b9d6527","2011-03-24 16:35:07+01:00","AGI: Change SoundGenMIDI to derive from Audio::MidiPlayer

As a side effect, this fixes the incorrect handling of 'All Note Off'
in SoundGenMIDI::send.
"
"4780eb7393cc8cc30dd822966eb82507bb61f6eb","2011-03-24 16:38:31+01:00","DRACI: Change MusicPlayer to derive from Audio::MidiPlayer
"
"94e7a231fe7a975886ba74bc1670cb4a34619316","2011-03-24 16:39:08+01:00","HUGO: Change MidiPlayer to derive from Audio::MidiPlayer
"
"e76a8a8eb6c68b1ffc048385c41cd1b542623449","2011-03-24 16:40:11+01:00","M4: Change MidiPlayer to derive from Audio::MidiPlayer

Also fix the _driver double delete regression I recently introduced
"
"84d68f31e8734d06febfbbff1493147f0ef680c5","2011-03-24 16:40:48+01:00","MADE: Change MusicPlayer to derive from Audio::MidiPlayer
"
"7cc04f25ff614df96a805fb1c64b12c422e7022e","2011-03-24 16:41:23+01:00","PARALLACTION: Change MidiPlayer impls to derive from Audio::MidiPlayer
"
"47e347b9227e4472fdefbfa8f2811dd95d0e7a2f","2011-03-24 16:41:46+01:00","TINSEL: Change MidiMusicPlayer to derive from Audio::MidiPlayer
"
"6b797ccb2e82a954cc9a74fb9e8c47d5015ccf50","2011-03-24 16:44:34+01:00","QUEEN: Rename some MidiMusic members to match Audio::MidiPlayer
"
"06b5432e94d2bb102852f404dfe53ec6ceb154e7","2011-03-24 16:46:08+01:00","SAGA: Rename some MusicDriver members to match Audio::MidiPlayer
"
"9a646cde46c1d61ab14c057a0142e851e9ec3a91","2011-03-24 16:46:37+01:00","HUGO: Turn FileManager::getBootCypher into a const static variable
"
"62f5c475f3bf7482526ce58bd90f37343ef523a6","2011-03-24 16:49:46+01:00","AUDIO: Expand MidiPlayer docs / goals a bit, mention deadlock bug
"
"397fd31a17f007a610aa7b673170983414efb5d5","2011-03-24 18:54:14+01:00","ANDROID: Cleanup
"
"e6080087c8453b5a0345bf62b2cd3809e46f7591","2011-03-24 18:54:49+01:00","ANDROID: Fix cursor's keycolor

Don't wipe the RGB bits, fixes wrong colors on BASS cursors
"
"bcb9179a8b4128469700af62463674febf2785c6","2011-03-24 20:59:20+00:00","SCI: Close Memory Leak from kAnimate Calls.

This was due to a missing destructor in the HunkTable.
Thanks to wjp for this patch.
"
"19c407ca69ea2b98623203948bb62d84729645b3","2011-03-24 21:22:44+01:00","ANDROID: Fix texture double release
"
"973e3e827e39fc81a4b62490d3f1a60e5bc56518","2011-03-01 15:00:07+00:00","GP2X: Remove incorrect GP2XWiz define from the GP2X event code.

* My plan is to move all of the GPH devices into the GPH backend
but for now this is just a merge mess from the GSoC-OpenGL branch.
"
"cf8dcf45494dcee0ef7b9655dcd656c518cc6d42","2011-03-08 20:26:11+00:00","GPH: Cleanup GPH backend and adapt to newer modular backend model.
"
"16e28747c7cfd00ccb4cd44493f15bb38faff958","2011-03-08 20:31:22+00:00","BACKENDS: Add GPH event and graphics files to the build.
"
"0fb15847c6c195945b186aad9cc29dead154078a","2011-03-24 20:17:39+00:00","SDL/POSIX: Update main guard to add OpenPandora.

- Also mention GPH_DEVICE not each backend on it's own.
"
"b95013dfe25d75d39c7deb69ee1a63f93a4a495f","2011-03-08 20:38:56+00:00","OPENPANDORA: Refactor OpenPandora backend and move events and graphics into modular backend style.
"
"b9e4d77ade60a3293f426f6d01e176e33d729f95","2011-03-24 22:43:12+00:00","GPH: Removed some unimplemented and unneeded definitions.

- Thanks to digitall for proving that 2 sets of eyes spot a really simple
problem much quicker than one set ;).

mount.sh: Fixed some small errors#	../../../../scummvm.gph
"
"5a1874e3d946002c21af9ed315f762bfb467ef3f","2011-03-21 12:24:16-04:00","COMMON: Add SaveFileManager::copySavefile() and update SaveFileManager::renameSavefile() to use it
"
"b4a6c89662700b448db41d1e0c99cdf39a2dc5e0","2011-03-25 00:35:47+01:00","ANDROID: Always set the surface properties

Didn't happen on the shortcut, which led to wrong properties and
surface functions scribbling over memory
"
"c144bbf9570e6d4498072374ee24edb33b6c9126","2011-03-25 00:38:25+01:00","SCI: Add two TODOs
"
"c2274e90653c381d15c912b05472a78c048ac33e","2011-03-25 07:41:55+02:00","SCI: Make sure that planeOffsetX is always correctly initialized

Fixes several issues with the menu in KQ7. Thanks to vakons for his patch.
Fixes bug #3231867 - 'KQ7 scrolling bug'
"
"1f5c3a69678b924c9311c17df344f0a266c6cb6a","2011-03-25 07:42:27+02:00","SCI: Extended a workaround for KQ7 to apply in all rooms
"
"4ceb4838ed9c153337a7a07fc03d3d1e78351af4","2011-03-25 13:25:38+02:00","SCI: Cleaned up send_selector()

- Placed all of the associated debug code in a separate function
- Unified debug output
"
"d86504ef887c5f10fedbc081476a050295241cb4","2011-03-25 13:26:20+02:00","SCI: Cleaned up the BreakpointType enum and documented the bpe command
"
"10d1a58cb295993ddf4dbe4ab0869a01a6cbfa3b","2011-03-25 14:09:09+02:00","SCI: Reordered some functions
"
"00ad039b4cb0959b602592579d16adfac89bffc1","2011-03-25 10:58:40+01:00","TOUCHE: Change MidiPlayer to derive from Audio::MidiPlayer
"
"bd637b4c5c159c2eeefe14634a7c227c1e2df800","2011-03-25 11:00:31+01:00","TOUCHE: Move _gmToRol to midi.cpp
"
"6bf4745a1bdd2116702e8b53107315ed621c6627","2011-03-25 11:13:43+01:00","HUGO: Move MidiDriver creation into MidiPlayer constructor
"
"9ffc4e015138098fa21d234bb195c99a29b17380","2011-03-25 11:14:21+01:00","PARALLACTION: Move MidiDriver creation into MidiPlayer(_MSC) constructors
"
"61ff5de0cfb286443e0554d83ad74ee3577c51ae","2011-03-25 11:15:06+01:00","AUDIO: Rename 'channel' to 'ch'
"
"f333d93fe8985ad2b50f1ef936737cde40d926e9","2011-03-25 13:00:37+01:00","TINSEL: Remove unused TinselEngine::_musicVolume member
"
"db3802b02140d80e1a4e8ead91c1b7e39ee940c5","2011-03-25 13:15:37+01:00","AUDIO: Whitespace fix
"
"7949d7c6def2df6f3d44db4f55e9d1d3a87a0412","2011-03-25 14:10:02+01:00","AUDIO: Move more common code to Audio::MidiPlayer

This also should fix some regressions from the previous
commits, related to MidiParser's either being leaked,
or being deleted and then used again (i.e., crashing).

I tested as many games as I had available, but further
testing of all affected engines is called for anyway.
"
"0e6cdfd67580f75e912c5e92abb26821d032f74b","2011-03-20 21:54:59+01:00","ANDROID: Experimental MIDI Driver

Based on the SONiVOX® Embedded Audio Synthesis (EAS™) library, which is
part of the base Android OS.

CPU stats (Cortex A8 1GHz, monkey1 intro, peak values):
MAME OPL: 30%
DosBox OPL: 26%
EAS: 19%
"
"bb6a5c3685ef555ab63ee1fd39173dbdad9a2a13","2011-03-25 14:56:31+01:00","SWORD25: more translated comments from gfx/image (patch #3238507)

Plus some extra white space changes by myself.
"
"0c09dafdbbcccfae5838ac1f59589cb315095a0a","2011-03-25 15:02:33+01:00","Merge branch 'copysavefile' of https://github.com/Littleboy/scummvm into Littleboy-copysavefile
"
"baeb28d0e160cb469d8c34e8f9863f2f29b2c132","2011-03-25 16:20:43+01:00","QUEEN: Remove leftover class forward declaration
"
"9e65daef3bed3218d6a593f58b1c9a04c0d09f0a","2011-03-25 16:59:54+01:00","SAGA: Change Sage to use Audio::MidiPlayer
"
"6cc0aca5b23cc63c51e8b0fb3f708854c0431d58","2011-03-25 17:01:36+01:00","AUDIO: Document issues with semantics of Audio::MidiPlayer::isPlaying()
"
"8eefc1f986b29e37c8d66da5036f92943eebd613","2011-03-25 18:10:40+01:00","SAGA: Add missing include
"
"68908773ac0ef335f491a257473358269616ab69","2011-03-25 19:52:33+01:00","ANDROID: Use 'our' ASCII codes for special keys

Fixes stuff like enter key on SCI games with text input
"
"1827c7e7421d35f2a95bb2c9a50939c14547a9c6","2011-03-25 23:28:19+01:00","TSAGE: Implement Scene 7700
"
"cc074b013f36338d070699b9e5916debe6b93ff8","2011-03-26 02:37:10+02:00","SCI: Refactored and cleaned up the VM call stack handling code

- Removed the CallsStruct intermediate stack. Calls are inserted directly
in the execution stack
- Added a constructor for the ExecStack struct and removed
add_exec_stack_varselector() and add_exec_stack_entry()
"
"af80cb99abb7371e6789a3ef649f5c2300d129ac","2011-03-26 09:32:55+01:00","TSAGE: Fix some bugs in scene7700, rename some known objects
"
"41762892e03695bbc0fa0cc556cf4cb83ec3768f","2011-03-26 10:32:07+01:00","ANDROID: Fix MIDI packet size

Instruments are now not reset to the grand piano due to trailing
zeroes.
Thanks to waltervn for noticing this.
"
"703af39be5ae936b7047a94689805b1acf4f81eb","2011-03-26 11:09:43+01:00","ANDROID: Add code to dump the EAS stream to a file
"
"6ec9c9f62d149b91854e180b8089633660836450","2011-03-26 12:25:48+02:00","SCI: Removed the READ_VAR and WRITE_VAR wrappers
"
"153e67b37c6b510e975e16bf6ccc591fdc60838f","2011-03-26 11:41:06+01:00","ANDROID: Maybe working support for EAS DLS soundfonts
"
"c0b376ad9ab145869d4c1761c4d8019c53a9393e","2011-03-26 22:12:16+11:00","TSAGE: Implemented objects in Scene #4100
"
"99de6343c07dc03418a3d789e66d3cf6b0ed69e6","2011-03-26 22:41:03+11:00","TSAGE: Completed scene #4100 - Village - Chief's Hut
"
"5af474ec7c6a613aa6fc825f822a66b8d290a586","2011-03-26 11:08:07-04:00","MOHAWK: Stub off LB mini games

greeneggs can now continue to completion in 'play' mode
"
"739d75fb09d84dff9dde8b562c42726237461965","2011-03-26 17:20:49+01:00","NEWS: Mention Android's MIDI driver
"
"6501a8609507dbf4f0d0ef976911e2f225ef6f52","2011-03-27 00:04:28+01:00","SCI: Fix default pan value in MIDI driver.
"
"6487d05ddf4ae25d49918f9a2f8b70903c8855d3","2011-03-27 01:43:36+02:00","SCI: Moved some debug functions from vm.cpp to scriptdebug.cpp
"
"2a911701bc23b1782647cea19777db5974c04fd1","2011-03-27 01:19:44+01:00","TSAGE: Implement Scene 9999
"
"4c804b9d93b9bf57ae685b97fdeb961a756c4be4","2011-03-27 22:43:34+11:00","TSAGE: Implemented Scene #4150 - Village - Bedroom
"
"ea744d0b2e3ceb9fc7a28f8ac84a749a6952a587","2011-03-27 14:25:04+02:00","TSAGE: Implement Scene 9750
"
"2caaf045f6c7545abb5fd58aa6e0c36015c88d90","2011-03-27 14:29:21+02:00","Merge remote branch 'dreammaster/tsage'

Conflicts:
engines/tsage/module.mk
engines/tsage/ringworld_logic.cpp
engines/tsage/ringworld_logic.h
"
"6a9991a027d628225192ed2406532b69ed7a002c","2011-03-27 14:37:50+02:00","TSAGE: Fix compilation after merge
"
"1b0d5e8877a9f999966b3324cab40245e1825a28","2011-03-27 15:23:48+02:00","Merge branch 'tsage' of http://github.com/dreammaster/scummvm

Conflicts:
engines/tsage/module.mk
engines/tsage/ringworld_logic.cpp
engines/tsage/ringworld_logic.h
engines/tsage/ringworld_scenes1.cpp
engines/tsage/staticres.cpp
engines/tsage/staticres.h
"
"69ee2ff09ee42883845834cc545bf673da3a8be0","2011-03-27 15:25:34+02:00","TSAGE: Fix compilation
"
"b8a118eb0c2fb6085a65e3796c3d3d05f73a5197","2011-03-27 15:30:17+02:00","ANDROID: Use the midi gain option for EAS
"
"def47fd87472a456fe373f9639e541653d590502","2011-03-27 11:44:02-04:00","MOHAWK: Correct title of Dr. Seuss's ABC
"
"95a41b20fcc6287f383b43b8d6b8b6db7b5360f6","2011-03-27 15:04:24-04:00","README: Fix typos and cleanup
"
"76b68bf88cf91c2b114f2f0682b602ac339bf073","2011-03-27 18:09:56+03:00","SCI: Set the GC_INTERVAL define to its hexadecimal equivalent
"
"9adae61df3372e6cfdac97e65a6b7573bf18ae00","2011-03-27 18:11:26+03:00","SCI: Error out when kMemorySegment() is requested to save more than 256 bytes
"
"413394585037996b8c4afe60ac4e868d5aacca55","2011-03-27 18:13:42+03:00","SCI: Renamed restAdjust to r_rest (like r_acc and r_prev)
"
"e18230f0427fec43868a2c888c5e978aaf205186","2011-03-28 08:28:08+02:00","TSAGE: Implement scene 9350
"
"110f6b9be772aa64347d79621fbd712c7c19e4ea","2011-03-28 20:57:01+11:00","M4: Corrected incorrect case in cheat key handler
"
"519057fbf7837b3a99c1c214a9323bca9e15f186","2011-03-28 22:30:54+11:00","TSAGE: Implemented Scene #4250 - Village - Near Slaver Ship
"
"55d433203d4a1efe4aa7a1e86c126aa3f19ed27e","2011-03-28 10:05:40-04:00","CONFIGURE: Enable Mohawk by default
"
"9efa8faa31f146ae30667390eb8fbc49a25627b6","2011-03-28 10:33:44-04:00","README: Add Living Books games
"
"ecde861446b7d2814b5b906e845c923878a3636d","2011-03-28 10:33:56-04:00","NEWS: Mention Living Books
"
"88247e35703dd75fd7e9a702f7b7be3ccc443c1e","2011-03-28 10:38:34-04:00","NEWS: Cleanup
"
"a33ee051d05ffc5e30e4fc4728714128028e89b1","2011-03-28 17:53:31+02:00","CREDITS: Update Mohawk credits.
"
"8c931fd1e8c0ced874f4cb5fe77197b39b940528","2011-03-28 18:06:24+02:00","AUDIO: Add Audio::MidiPlayer::createDriver(), let some engines use it
"
"ef3324f8b27862e2112a80c129c1a888dcc0ae33","2011-03-28 19:07:17+02:00","SCI: Add detection entry for my GK1 floppy version.
"
"344369c294e4ade7b6f72de27daf794b0d23d3e3","2011-03-28 22:45:01+01:00","SCI: Fix Compilation with --enable-release set.
"
"e5811cd6c39333cf7a51eb4943bf4ead0aff681c","2011-03-28 15:20:30-04:00","MOHAWK: Allow disabling compilation of Myst
"
"4a7572d893fd50c25ff7576bdb7064bc3a85711d","2011-03-28 15:31:14-04:00","MOHAWK: Allow disabling compiling cstime
"
"b101fd6f0324a3775a5383d1768700141757af25","2011-03-28 15:43:57-04:00","MOHAWK: Allow disabling of Riven compilation
"
"4b19c1bf32cd8ae62afa5937b0f4ffaff6154f09","2011-03-28 23:41:32-04:00","MOHAWK: Don't compile RivenOptionsDialog when Riven isn't enabled
"
"f208c33593f29fd36df2b63c9db7ab0e377f21a1","2011-03-29 12:10:00+02:00","TSAGE: Implement scene 7700.

Also move doAction() to core when related to sceneHostpot_3.
"
"f5fb832b634f5101dc88f121d9413ef04b5868bf","2011-03-29 12:32:30+02:00","GOB: Use memmove instead of memcpy in Surface::blit()

Inca 2 actually blits surfaces on themselves...
"
"8291732c946039de5d6e85e6552039fb78616d9c","2011-03-29 12:39:51+02:00","VIDEO: Fix deLZ77() bound check

The Inca 2 video where Atahualpa walks through the gate after
solving the wisdom challenge now only warns (and graphically
glitches) instead of segfaulting.
"
"97966c36e1ef2a00d30410c9d4daae491c1bd994","2011-03-29 12:47:20+02:00","VIDEO: Add a workaround for the Inca 2 wisdom gate video

When decompressing directly onto the output surface fails (because
it's too small), retry decompressing into the video buffer first,
which then gets blitted onto the output surface.
"
"86fcca5a878fa464f4b5751fa5fb9ad0a7d69f9e","2011-03-29 15:06:46+02:00","MOHAWK: comment text after #endif
"
"9bf08000323515b300bf7e267f9523c994b0383b","2011-03-29 15:07:45+02:00","MOHAWK: Fix LB debug message to use the right name.
"
"ad7b6f68173db0ecb6d5a7925770c423874ded8b","2011-03-29 15:08:21+02:00","MOHAWK: Don't fail to delete consecutive items.
"
"bd526aac1dc64ead135b42b08e46566636ba5a90","2011-03-29 15:09:15+02:00","MOHAWK: Destroying an LBGroupItem destroys the whole group.
"
"bcc0adb8fa213210147c3b36e5283fe8f752d55c","2011-03-29 16:28:24+02:00","MOHAWK: Handle LB item sound priorities.
"
"04cb669ff37689c78336ab5cd2e5c9c14b4202f3","2011-03-29 16:49:42+02:00","MOHAWK: Fix priority check in LB's lockSound().
"
"e1883a6cf49ce174aadaf49b3290aa8bb59ff653","2011-03-29 10:52:11-04:00","SCI: Limit SCI32 view scaling to when we're actually scaling

Fixes bug #3253208
"
"1557890b7a4c44242d51cc90ae38b44f987900cb","2011-03-29 19:23:16+02:00","MOHAWK: Stop playing LB anim sounds on seek().
"
"5bc5e95e12f414a294909bce03be43e9eac40d0b","2011-03-29 13:40:24-04:00","SCI: Add workaround for a GK1 pointer comparison
"
"ff9f08aa411c68e027f594eca16404d920f7c820","2011-03-29 20:13:06+02:00","MOHAWK: Only stop the last-played sound in LB's playSound.

This might need a version check, but seems to be fine without.
"
"fe613524e5f93b2f66613ef2e77608407eba2dd6","2011-03-29 20:15:12+02:00","MOHAWK: Looks like LBAnimation ignores sound priorities after all.
"
"f4e2cda89dc7d627ad6d1f6b91b3892cdacd2620","2011-03-29 21:14:16+02:00","TSAGE: Cast fmt into a SceneObject in Scene7700.

This makes the drawers useable, even if there's still a problem with _globals->_parent._field8C
(the animation displayed is always a closing drawer)
"
"feefced3ce98232c6c31a4ae482949c99ad6764c","2011-03-29 21:18:55+02:00","MOHAWK: Add Sound::isPlaying() function.
"
"01b7a2c774cdda3dd0640c37cc41124e4c80743d","2011-03-29 21:19:46+02:00","MOHAWK: Check isAmbient in LB sound priority code.
"
"08318134618ab00ac204e56be9148056a87b2aa5","2011-03-29 20:29:43+02:00","BUILD: Remove -Wglobal-constructors from Makefile

It's already handled by configure
"
"dc4c60851f91989cb8b0b0d7d53ef12958b08d35","2011-03-29 20:34:26+02:00","BUILD: Get rid of -Wimplicit

It's already implied by -Wall, and GCC 4.6 complains about it for C++
"
"8c70f2a58492335e9045c5abfd291887b2d7a339","2011-03-29 21:46:05+02:00","M4: Fix twisted assignment

Thanks to -Wunused-but-set-variable
"
"d83a83ef5021c1e329127d3c6402088aeb1c1dd1","2011-03-29 21:55:21+02:00","JANITORIAL: Remove/comment unused vars

Found by GCC 4.6's -Wunused-but-set-variable
"
"b065007c8f7cd7ca55c1878080d24ade4758ad61","2011-03-29 22:13:31+02:00","COMMON: Unbreak EventRecorder a little
"
"882c042a734eed9006d1d6878865ceb994b7a6d3","2011-03-29 23:54:47+02:00","HUGO: - BSF file is no longer mandatory for H2 and H3 Dos.

- Replace error by a notifyBox in BSF related functions
- Fix cypher (broken in previous commit)
- Add checks on distributor in intro
"
"046a34bd42ecfc975e7658ffade8cf6768047ad9","2011-03-29 23:53:10+02:00","MOHAWK: Add LB detection entries from pacifist.

This adds entries for Harry and the Haunted House, Ruff's Bone,
Stellaluna, and Sheila Rae, the Brave.
"
"7b47bf4638462d44fb9e11b9f346bc2811f6f1f7","2011-03-30 00:07:10+02:00","TINSEL: Remove dead variables
"
"3be61257d00fa71c422ea1a5f297a657b63309e2","2011-03-30 00:10:25+02:00","HUGO: Fix cypher fix ;)
"
"7c16f9ac3c2a88b8a480d59ada1e433982c9db2e","2011-03-30 00:21:40+02:00","HUGO: Fix s_bootCypherLen *for real*
"
"bf8d5f3d2809ae2e0380b39a2e55613f42cf1647","2011-03-31 00:38:09+11:00","TSAGE: Implemented Scene 4300 - Slaver Ship
"
"db812c985cc24268818fb9ed7a31d12e64d34636","2011-03-30 17:35:02+02:00","MOHAWK: Use tryLoadPageStart where needed in LB.
"
"00d01d9b00a9d35f186d5e8c8924ea93f22aeb59","2011-03-30 14:42:34-04:00","MOHAWK: Add detection for Just Grandma and Me 2.0
"
"3a4fc2f0d6cc94652754eecf0d3cb0588c4678dd","2011-03-30 21:06:12+02:00","MOHAWK: Parse LB page options from the outline.
"
"40d922206bbbd23e3b55dd43432042b0fc2af1ed","2011-03-30 21:26:48+02:00","SCI32: Support for views with 640x400 native resolution
(fixes Wolfgang closeup, room 720)
"
"023cb90842fde98e3cfa78ab8278b2c984c7cea2","2011-03-30 21:41:11+02:00","MOHAWK: Strip slashes from beginning of LB Windows paths.
"
"9a0693d168ba058398c5f6cef2fd721a86d13939","2011-03-30 21:59:20+02:00","TSAGE: Implement scene 9100
"
"2a2c7f5bef6b7ddcc6df3aca62683501cc740030","2011-03-30 16:00:46-04:00","SCI: Minor cleanup
"
"dd1c52fd8294daaf32e9047936d24c0c737f07da","2011-03-30 23:38:22+02:00","ANDROID: Map right click to Camera/Search
"
"ae58ca42c535a672b9a135d44bafeded86f708be","2011-03-30 23:41:43+02:00","ANDROID: Document Camera/Search mapping
"
"e5533401dc5c10609072794b596a87a0be2c3786","2011-03-31 00:17:33+02:00","MOHAWK: Nicer names/info for some LB data.
"
"e705759b7bac28dd1c00d8a655289366535bb0d1","2011-03-31 01:16:47+02:00","MOHAWK: Implement kLBSetHitTest.
"
"8d25157923dabf207e46ae26db14e412d3257840","2011-03-31 01:18:32+02:00","TSAGE: remove useless variable
"
"05df97214e54e2f8537eb3ed8822682d22343035","2011-03-31 01:18:50+02:00","TSAGE: Add scene 9150
"
"28d62b22eace2efca53dba6f0e76280141b0df99","2011-03-31 01:19:44+02:00","TSAGE: Add new sceneObject
"
"8c02f87e5564f91a3e9fd69c74f861c767c09a8a","2011-03-31 22:10:32+11:00","TSAGE: Implemented Scene 4301 - Village - Slaver Ship Keypad
"
"8bb6b94080054f1c8fc8747955b5e59eab5d7524","2011-03-31 20:09:40+02:00","TSAGE: Fix Scene9350:Object1::postInit (thanks dreammaster), first real uses of quickInit
"
"fd1ad6b5a682bebf166784e4ddf44050ee82b34f","2011-03-31 20:19:57+02:00","Merge branch 'tsage' of http://github.com/dreammaster/scummvm

Conflicts:
engines/tsage/ringworld_logic.cpp
engines/tsage/ringworld_logic.h
"
"84c45eae37542685bedfe8163fd62d4fa3ee38cf","2011-03-31 15:51:09-04:00","MOHAWK: Use ScummVM GUI fonts for the cstime demo

The demo is now playable without using fonts from the full game
"
"66269fa2088a4f47f70b15e6c3c57006353b05d4","2011-03-31 22:35:40+02:00","MOHAWK: Toggle the post-intro LB menu anim at the right time.
"
"73c15cebe8b60dcc9289f5e3accb808153c01253","2011-03-31 22:38:32+02:00","MOHAWK: Update LBAnimationItem running state when anim is done.
"
"ab97a5e493ba0f6fa9a4369bc445cb36ef8393cb","2011-03-31 22:39:17+02:00","MOHAWK: Tweaks to LBAnimationItem::setEnabled.
"
"759040d6793b1a2302f9150ae587634fbff25b91","2011-03-31 22:39:46+02:00","MOHAWK: Add/update some LB debug/warning stuff.
"
"c0d815413153b799f7a589d11f32a9a53f0d4de5","2011-03-31 19:29:17-04:00","TOOLS: Update Code::Blocks project generation

The Sword2.5 engine needs access to vorbis and theora headers. This patch adds the scummvm libs include directory to the include search path for this engine.
"
"1f543652b7cb6a092896f626aa334e56a55c47ec","2011-04-01 14:43:22+02:00","MOHAWK: Handle waiting for sound cues in LBAnimation.
"
"8d0feb01b944f091aeca03e981a644d4834c43f1","2011-04-01 23:47:39+02:00","TSAGE: Implement scene 9200
"
"8f02cdeed2416fb4a1892979e1d8cb2011151fef","2011-04-02 02:00:34+02:00","CREDITS: Pull Jerome Fisher out of retirement (for one final mission, etc.).
"
"cbfe04fc1fae8e062e7531b22fea4814dbe59e74","2011-04-02 11:30:20+11:00","TSAGE: Implemented Scene 5000 - Caverns - Entrance
"
"6247ed5b45803f79b0d6eab4b831964b05ba79ea","2011-04-01 20:30:29-04:00","SCUMM: Stub off file append mode in o72_openFile()

This is used in several Backyard Sports titles. This stub is required for now so that baseball2001 can continue after trying to save the Hall of Fame data.
"
"211842c2fbb79d53ed62b8f88e44fd2290512bd5","2011-04-01 22:52:12-04:00","SCUMM: Make sure finalize is called from o60_closeFile()
"
"dfc87237264a76e820015bd9f7ebc8c1e5583d2c","2011-04-02 00:59:29-04:00","SCUMM: Add support for append mode to o72_openFile()

The baseball2001 hall of fame data saves properly now
"
"068fb01747ba0eb36b07d178764c7e4b206b2c96","2011-04-02 08:23:55+02:00","TSAGE: Implement Scene 9300
"
"65e5a51eaf8eb2d35a4d46db7a10c1d8d8a04f6d","2011-04-02 09:36:13+02:00","TSAGE: Add Scene2 class for scene group 10, getting rid of _field30A
"
"a8bed05922dd48b9a1395a1bd71470b0b2409cca","2011-04-02 18:50:02+11:00","TSAGE: Fixed bug with decoding large compressed resources
"
"2103c93afd0f3ebbba3373c20149006ed05fd702","2011-04-02 19:47:41+11:00","TSAGE: Bugfixes for Scene 3700 - Remote Viewer
"
"499d1751c747fb481c9390513a2ec90653af852f","2011-04-02 20:00:29+11:00","TSAGE: Fixed zoom problems with viewscreen in Scene 3700
"
"23ad90b781c15249dc9214c552654589b51f5147","2011-04-01 16:37:05+02:00","SCI: Replace not required emumidi header
"
"bceab2656bdff4aa99f99b047f6bbd18ad5f86fc","2011-04-02 13:30:38+02:00","ANDROID: Attempt at working around some HTC fail
"
"e7165a23b4f588962afa4d4f0db265612eaa6100","2011-04-02 11:08:05-04:00","MOHAWK: Fix title of Arthur's Teacher Trouble
"
"fdb01b0ea9f9e13572d113bd48cf8f6aaccf52b6","2011-04-02 11:09:22-04:00","MOHAWK: Minor grammar fix
"
"80f51e5768db35c4ce3b379bc240e43bf1c36532","2011-04-02 18:00:58+02:00","TSAGE: Implement Scene 9360, move Scene9350::Object1 to a separated subclass, Fix bug in scene 9350
"
"753dcda5036223211824332c903d5feec0988ddc","2011-04-02 18:06:53+02:00","Merge branch 'tsage' of http://github.com/dreammaster/scummvm

Conflicts:
engines/tsage/module.mk
engines/tsage/ringworld_logic.cpp
"
"71bfe714c184169723ad47eb64e47b4f3f44c2d6","2011-04-02 19:14:39+02:00","MOHAWK: Fix issues with LB's hardcoded UI logic.
"
"3ea76f39f90e4bfa6fab7f1021a5614d70b5571d","2011-04-02 19:53:26+02:00","SCI: Fix SQ1 droid zapping issue with a script patch, thanks to
dhewg for reporting.
"
"50a1d033daab313b7d3f750e9d15906443209628","2011-04-03 02:35:16+03:00","CRUISE: Fixed odd check, introduced in rev d83a83ef50
"
"1df668bd1e674c5c72c4a92c9de9bc01bf6d4479","2011-04-03 10:50:52+10:00","TSAGE: Properly implemented the PlayerMover2 class
"
"d8eb24f97464d4d274168d9384a8e3a692ec3b97","2011-04-03 10:57:01+10:00","TSAGE: Fix use of PlayerMover2 class
"
"66d85a1edab649f1835af52a3856f4fe30274812","2011-04-03 11:17:17+10:00","TSAGE: Fix compilation break in previous commit
"
"06ff6c514e849390bc047b82702064f3ec1dc487","2011-04-03 11:21:33+10:00","TSAGE: Implemented Scene 5100 - Caverns
"
"9fb10f98e2749382df7a19d1de8c255f8d9637ae","2011-04-02 22:34:58-04:00","SCI: Fix Mac SCI32 picture transparency
"
"7676cca67ac91189f948878f4192311b5923cbec","2011-04-03 17:25:07+10:00","TSAGE: Implemented Scene 5200 - Caverns - Throne-room
"
"2c8bac69bbe9890b6722383c66a0f0eea85a9f39","2011-04-03 19:14:14+10:00","Merge remote branch 'remotes/Strangerke/master' into tsage

Conflicts:
engines/tsage/ringworld_logic.cpp
engines/tsage/ringworld_logic.h
"
"9f0dab873dfbfbf653458fde64f1b2611862db0b","2011-04-03 20:03:53+10:00","TSAGE: Fix movement bug with the ObjectMover2 class
"
"51f733b2a6e2413a7a97442fc2389209da8a72f0","2011-04-03 14:31:40+03:00","SCI: Changed debug console hotkey to Control-Shift-D instead of Control-D.

Applied from patch #3258985.
The previous hotkey interfered with the hotkeys of some games (e.g.
the 'time of day' hotkey in QFG2, bug #3250996).
"
"96540686597cb033281e98de79ddc9622e650057","2011-04-03 14:33:06+03:00","SCI: Fixed bug #3266480 and partially fixed bug #3041738

Hopefully, this will fix some of the oddities happening because of music fading
"
"407b9c9b2eedcb59abf9756fc89adf21f52e284a","2011-04-03 15:19:19+03:00","SCI: Added a workaround for script bug #3268076 - 'MOTHERGOOSE: Crash after finishing the game'
"
"e5aaaa4199bd3ee3546f0bd89c68758212029173","2011-04-03 22:48:31+10:00","TSAGE: Implemented Scene 5300 - Caverns - Pit
"
"28e6859a692a34662fb44d9b0e3e3c31d55c16cb","2011-04-03 15:04:20+02:00","GUI: ThemeEngine.cpp/.h formatting fixes.
"
"801f576f9c36025068d13cb852082e5fc9d21e87","2011-04-03 16:39:00+02:00","ANDROID: Log the ScummVM version
"
"6d90b0739a2c96cadee6642a691152c6e9df0895","2011-04-03 19:01:20+03:00","SCI: Show object names in the songlib console command
"
"bfef0f5a6fabdef5bb42cffd8b078d4511cf2a80","2011-04-03 19:02:14+03:00","SCI: Fixed fading-related bugs #3267956 and #3041738
"
"101d4b66e234fda4670edb4c81262381bcf661ab","2011-04-03 19:11:49+03:00","AGI: Added the Spanish version of SQ2 (bug report #3260349)
"
"1692605b0840cd869a83bd87055e9372acda0e76","2011-04-03 17:33:10+02:00","ANDROID: Helper define to debug hanging GLES calls
"
"fba1c6360c0194e5cad6133dc312c1c8ae80ac39","2011-04-03 20:25:31+02:00","ANDROID: Ignore unrelated surface changes
"
"ea4223d941ec9dcbcca0530ed633cf8b5d05be40","2011-04-03 20:26:27+02:00","ANDROID: Always use the surface size for the overlay

When coming back from standby, there might be an indermediate surface
change
"
"38b3f18029cbcb5bca476164eeaf63800e527a7d","2011-04-03 23:43:36+02:00","TSAGE: Fix SpeakerGText, Add SpeakerOR, implement Scene9400
"
"78e83134a7dea1bf2563255fd8669f78e9e5dae2","2011-04-04 16:56:18+10:00","TSAGE: Some work on fixing Scene 6100
"
"f4905eafd1b64fb371c7aa87a4399313e7187b8b","2011-04-04 09:59:20+03:00","SCI: Added workaround for script bug #3272735 - 'SCI: QFG2: Crash when typing 'read sign''
"
"a4eea36b84b60db158fa14e15a620a6f3e72cc37","2011-03-30 13:33:39+02:00","SCI: Initialize newPlane fully before adding it to _planes
"
"c4ae3b90db9fe28130c00e9736fdc388088e7a35","2011-03-30 13:34:31+02:00","COMMON: Fix (harmless) int <-> uint mismatch
"
"b188e60f4415e7a2d7dc08ce5471edc818e94076","2011-03-31 13:35:43+02:00","AGI: Avoid global constructors (due to global refs)
"
"6eeebfb19125b79e4a77e8c35a0d04cf1a5d97bd","2011-04-04 09:56:50+02:00","SCUMM: Check for cutSceneStackPointer underflows
"
"449e9cf33923f2685356596f82bc596e1f05407c","2011-04-04 12:21:30+02:00","ANDROID: Fix non-fullscreen corruption on HTC devices.

HTC's drivers don't preserve the color buffer between frames (as allowed
by the spec, apparently), so we have to force-clear it every frame when
we're not rendering a texture over the whole screen.
"
"0725be325f60fa578b918aaaaef1d5f4008d310a","2011-04-04 13:02:12+02:00","SCUMM: Extend workaround for bug #1668393 (see bug #3267665)
"
"6bd180646df50af6de80612f8c500dc6b473c345","2011-04-04 13:04:10+02:00","SCUMM: Extend debug command 'object' to allow querying state
"
"b4051db14273616b60744bee65e14668fbc62d28","2011-04-05 10:23:51+03:00","SCI: Extended the script workaround for the sign reading script (bugs #3272735, #3275413)
"
"9640048ad6e65c209251f68153dbc1560ee65676","2011-04-05 12:28:39+02:00","GUI: Update the screen after handling events

Fixes crash on droid:
game -> gmm -> save -> click entry (EVENT_SCREEN_CHANGED due to vkeybd
beeing shown) -> delete -> confirm
another EVENT_SCREEN_CHANGED gets in simultaneously (due vkeybd being
deactivated) and the parent dialog updated Rects out of bounds.
"
"92aac3addc190f19c4fd063fb825651c9f31f725","2011-04-05 20:58:05+10:00","TSAGE: Reimplemented the old _sceneObjectListeners as _altSceneObjects
"
"1c8fc0538815b1418bb7824e4eefda65eb2719d9","2011-04-05 13:57:09+02:00","ANDROID: Temporarily enable GL error checks

There's a black screen issue on Samsung devices running 2.2.1 which I
can not reproduce. Hopefully this helps hunting it down.
"
"760c6bea3e5181e9062241d05e1efb8487f2512b","2011-04-05 14:12:47+02:00","TSAGE: Add scene 9450 (not perfect)
"
"ea253ff26d2d5ffeec85d34a79c00f0f50598111","2011-04-05 15:07:07+02:00","ANDROID: Use a faked paletted texture for CLUT cursors

Same change as for the game screen, reduces CPU usage a little
"
"4440aa431070897215b8b5b588aefe8eeb9b4be2","2011-04-05 15:09:46+02:00","ANDROID: Remove code for paletted textures

Unused now, because the performance isn't good enough on weak GLES
drivers.
"
"0adfe7296664b2bd7edaf9b1e351c069631addc4","2011-04-05 15:14:58+02:00","ANDROID: Remove commented workarounds for Nexus 1

Reports suggest that its working and not required
"
"a12dada82249cb713e2a9162b26ad3207127726c","2011-04-05 11:13:08+02:00","SCUMM: Fix off-by-one mistakes in out-of-bounds checks; name some constants
"
"55e65cee8099d91ae4797f7772cb5e459089892a","2011-04-05 13:43:54+02:00","SCUMM: Cleanup
"
"d7a6bf58461ca4d780d354403fc40c9c91f66988","2011-04-05 11:36:38+02:00","SCUMM: Move ActorHE into its own header, move some HE specific stuff out of scumm.h
"
"fb5330384708a345d0c3728691d3ea36295b29d0","2011-04-05 11:39:07+02:00","SCUMM: Rename InfoStuff to SaveStateMetaInfos
"
"f19b27388cb5e07b307eed21a1302d961c01ba1c","2011-04-05 11:51:14+02:00","SCUMM: Split ScummEngine::generateFilename, move HE specifics to class ScummEngine_v60he
"
"827561911ac8ca8136ee062908717225947596ea","2011-04-05 12:10:05+02:00","SCUMM: Move _heV7DiskOffsets from ScummEngine to ScummEngine_v70he
"
"7ce3719587cf370b0172dc06f85ded25b3c1f263","2011-04-05 13:44:50+02:00","SCUMM: Move _heV7RoomIntOffsets from ScummEngine to ScummEngine_v70he
"
"d50e7af797266e20dda17a80a45c1af45b176d3d","2011-04-05 18:25:37+02:00","ANDROID: Fix endless loop in AndroidAssetArchive

Can happen on empty member filenames, seen on some Samsung firmwares.
"
"507bff8233662019e7b7078b645ce035e796af5b","2011-04-05 19:01:51+02:00","ANDROID: Log device manufacturer, model and brand
"
"811b1fcc2a2d8e938c2e06489a04388c97715f48","2011-04-05 19:10:35+02:00","ANDROID: Use the manufacturer string for workarounds

Some fingerprints don't contain it, so this should be more reliable.
"
"2e86dd0e80fa7bc91c1ad86cfb2175352c0f5c5c","2011-04-05 20:13:39+02:00","Merge branch 'tsage' of http://github.com/dreammaster/scummvm

Conflicts:
engines/tsage/ringworld_scenes10.cpp
"
"a33001388b9b33c798bdfa9df8b53927d4f4015f","2011-04-05 20:18:03+02:00","TSAGE: Add scene 9500
"
"1383aed468a2159f07d0fca568d43abbca510283","2011-04-05 19:55:40+01:00","I18N: Update Ukrainian translation
"
"e4d7f708053a5738028a76d03bdbcd677bd6fd96","2011-04-05 21:22:00+02:00","TSAGE: rename an object in scene9500, fix 2 bugs, remove debug strings
"
"80e362f6eacda54d1553b353320efedc7d21f6c1","2011-04-06 09:48:55+03:00","SAGA: Fixed bug #3275973 - 'IHNM: Dialog options vanish'
"
"430c462031a25f598b3515d9164034c4389b0257","2011-04-06 11:30:01+02:00","Revert 'ANDROID: Temporarily enable GL error checks'

This reverts commit 1c8fc0538815b1418bb7824e4eefda65eb2719d9.

Commit d50e7af7 confirmed as fix, so it wasn't a GL issue at all
"
"b45640c47b97c36442d01c35e73b4cae9ad5648e","2011-04-06 15:21:31+02:00","ANDROID: Fix off-by-one when clipping mouse coords
"
"a565e63c48b2bb55b9e1197addddd3c03cf85c48","2011-04-06 18:08:38+02:00","ANDROID: Add multitouch support
"
"4f09018b00007fc9acc6ac7b7930aa57ae392d02","2011-04-06 21:15:15+02:00","ANDROID: Allow linear texture filtering on the cursor
"
"3dc87c4f3d775a75034779cf162129f914bd5a8c","2011-04-06 23:07:11+02:00","TOON: Fix several Valgrind issues

Maybe caused random crashes on reading invalid memory
"
"f4dde644064cd717cd82b3cf873d866a58d15a23","2011-04-06 23:40:56+02:00","KYRA: Slight cleanup.
"
"6d0bb19a51ac2996e8563f176ae2f2af1925369e","2011-04-07 00:08:47+02:00","KYRA: Cleanup static variable usage in LoK.
"
"3bbeee90c02e613ab2fcf870a26dbcfb3aad60e1","2011-04-07 00:26:27+02:00","MOHAWK: Handle alignment byte for some targeting modes.
"
"bbe2c437a86c6435012d5699dad8e9b4c88ca60c","2011-04-07 00:30:09+02:00","MOHAWK: Replace most of the LBCode interpreter.
"
"40dd4f89baed798e431b671954e28755ca1aa73b","2011-04-07 00:33:11+02:00","MOHAWK: Support LB script flow control.
"
"f19e2019b8e86f9fe4c95296428a7b31417666ac","2011-04-07 01:00:41+02:00","KYRA: Cleanup background music looping of Kyra3.
"
"eb731514f7b27ca61b697ece0295dd79c29c141a","2011-04-07 01:09:52+02:00","KYRA: Slight cleanup.

This more or less silently fixes the silent music introduced with f19e201, by
me setting volume to 'true' instead of '255'. Whoops.
"
"5fad3d536245860d4e9446c21a2f5c7c1dca5b4e","2011-04-07 09:56:43-04:00","MOHAWK: Implement the quit notify LBCode command
"
"be09bef7f7c8fc6f6f8a3c9a9b3534a54c8a41e4","2011-04-07 23:02:28+02:00","MOHAWK: Add getItemByName for LB.
"
"f65840feef59557d3c759e7fa44996ae76d199be","2011-04-07 23:05:22+02:00","MOHAWK: Add some more LBValue helpers.
"
"ac1522e177de979d6d9ef3248c0747de3dba00b5","2011-04-07 23:07:04+02:00","MOHAWK: Implement some more LBCode ops.
"
"10454194bc8ba1bdcc02899ca3b28f8ac6f8ea97","2011-04-07 23:08:55+02:00","MOHAWK: Implement some LBCode rect commands.
"
"b6a4d3e3918e0db611e5075ac6b080e1ceb1d9d4","2011-04-07 18:13:32-04:00","MOHAWK: Detect CarmenTQ's Custom Question Creator

(Same LB version as the main game)
"
"f0c42f10bda5c8a489fe1ada356eb420c0fa3685","2011-04-08 00:21:49+02:00","MOHAWK: Implement LBCode logical operators.
"
"6c54c0926ca9733134dd704d041fd077578adc36","2011-04-08 11:48:18+02:00","MACOSX: Update ScummVM icon (shading is slightly different now)
"
"88b3fc7c66d327370a34dd8cc5c168aa6f4f7f34","2011-04-08 20:43:41+10:00","TINSEL: Added numeric key mappings for function keys
"
"0240838f649addf9da40d0b388fc247352776874","2011-04-08 21:35:58+10:00","TSAGE: Fixed problem with pathfinder add extra unnecessary steps
"
"fefcf7720d37debe1015868e1f10173f4d79cb17","2011-04-08 21:42:39+10:00","TSAGE: Renamed OBJFLAG_100 as OBJFLAG_HIDE
"
"1c6b64448331719d8cea084d005f2a856ea74373","2011-04-08 21:49:13+10:00","TSAGE: Renamed other previously unnamed object flag constants
"
"7f951c65a3317d5f3dd4815bdd085f5c8ad1596f","2011-04-08 13:50:10+02:00","Merge branch 'tsage' of http://github.com/dreammaster/scummvm
"
"9466d3908e8f1232f984afa1c363d38a7a0f53c5","2011-04-08 14:08:05+02:00","Tsage: Add scene 9850 (with several bugs :/) and skeleton of scene 9900.
"
"699a28de60811294d429d07b266cf52415d7da92","2011-04-08 14:37:25+02:00","TSAGE: Fix typo
"
"c66d360a2175412fe0e490dc97fefe284c125f20","2011-04-08 15:56:57+02:00","TSAGE: Move SceneHotspot_3 to Scene10, rename unknown fields, fix sword bug in scene 9850 (thanks Dreammaster)
"
"d2843da22402a2fd1465310d63316c17783d2f83","2011-04-08 23:57:52+10:00","TSAGE: Switched the startup scene from Scene #30 to Scene #1000 (Title Screen)
"
"ab0b31eb30dd1d2dd474dc9564c520b479e9b6ec","2011-04-08 16:16:30+02:00","TSAGE: Rename SceneHotspot_3 to NamedHotspot
"
"bd253a62aca2a0571ad61a3167278d3c5437467a","2011-04-08 16:16:59+02:00","BUILD: Support newer MinGW compilers.

It seems the recent MinGW gcc versions use the 'TMP' env variable to determine
the temporary file path. Since we use that variable to hold temporary values it
will make g++ crash since it cannot access the path.

I 'fixed' that problem by renaming the TMP variable we use to TMPR.

Tested with mingw-g++ 4.5.2.
"
"9e6a640d8dbfcf94d6213a46a993c01e8813a53a","2011-04-08 16:51:15+02:00","TOOLS: Allow compilation with MinGW for all our tools again.
"
"0a176b5476ded335ee4f7402a1abdb741f972caa","2011-04-08 18:50:02+02:00","CREATE_PROJECT: Fix wrong paths for linker and resource compiler in MSVC7/8.

This is a regression from 500ae85c, which accidently removed the
AdditionalLibraryDirectories settings for the VCLinkerTool and set the value
of AdditionalIncludeDirectories of the VCResourceCompilerTool to the former
AdditionalLibraryDirectories value.
"
"45083a167fda90e4ea4757e24f00343dbe6d9594","2011-04-08 18:55:29+02:00","CREATE_PROJECT: Slight formatting fix.
"
"2aba8a81bd4ab20038109f70036d0dbbdbcab9a8","2011-04-08 22:09:11+02:00","TSAGE: move NamedHotspot back into core. Replace HotspotBase4300 by NamedHotspot and suppress it.
"
"b4870a5b29819f089c938304d4a1289057b671a7","2011-04-08 22:10:32+02:00","Merge branch 'tsage' of http://github.com/dreammaster/scummvm
"
"9a1fad3e6b00c2e5f28c0a957036b70268787cd8","2011-04-09 00:38:57+02:00","TSAGE: move SceneHotspot_2 to scenes8, rename it to NamedHotspotMult, rename unknown fields
"
"dbacaa90a4cc5a35c642130cc3ee3d774566a566","2011-04-09 10:37:32+10:00","TSAGE: Compilation fixes for GCC
"
"4f9bfa049c9aee9287601fb01e5461d90ba29c0f","2011-04-09 10:43:42+10:00","TSAGE: Clarified ObjectMover _field6E as _regionIndex
"
"d10453d162d87237636502ed918d19c9d8211969","2011-04-09 14:17:54+10:00","TSAGE: Some bugfixes to calculating object distances in Scene #6100
"
"a79ba2b4f4ef069f9400a18505be8a29da2d0228","2011-04-09 14:45:13+10:00","TSAGE: Corrections to palette rotation
"
"b912b3662a753e2766bca4fb8a0d666cdebce349","2011-04-09 15:12:17+10:00","TSAGE: Slight re-ordering of method calls in SceneHandler::dispatch

This fixes a problem in the title screen where the game title briefly appeared at full size.
"
"fc57b0433fd7bac7eebf6da3aa152f2097aa6d0a","2011-04-09 09:47:08+02:00","TSAGE: move SceneObject3 and 4 to scenes8 and 10, rename them their unknown fields, and fix a glitch in scene9150
"
"48542fb364e3fd27d1557b8eb1a86ff330f6a0cb","2011-04-09 10:06:38+02:00","TSAGE: Cleanup: rename quickInit() methods into setup() for naming consistency
"
"8b790e03883ad5ea5c47b9a330a414a2580ec763","2011-04-09 10:12:09+02:00","Merge branch 'tsage' of http://github.com/dreammaster/scummvm
"
"ee32440cdee393ca313061ea0c24faec3e473b7e","2011-04-09 19:12:03+10:00","TSAGE: Fix to disable palette rotations when the scene changes
"
"f5d22217d66e568b92230b8c8d799ab3dedc05e8","2011-04-09 19:12:54+10:00","Merge remote branch 'remotes/Strangerke/master' into tsage
"
"e2a0c096924df7ba2ba0c0d8888341563e6e3995","2011-04-09 12:48:41+02:00","CONFIGURE: Use FORCE_RTL for the Wii backend
"
"44ab256101c8beec0860538127c2c7d602366c71","2011-04-09 12:49:41+02:00","CONFIGURE: Use FORCE_RTL for the Android backend
"
"747295e9b452cc906821c275bea948560438d03e","2011-04-09 21:27:25+10:00","TSAGE: Fixing memory leaks
"
"81a5fcb5d16fc5107b4065df33317a0872598939","2011-04-09 21:28:01+10:00","TSAGE: Clarifying field names in Scene #6100
"
"2ed8a255e53b54bfbf2e58ac02f0cfb6b3703b2c","2011-04-09 23:14:47+10:00","TSAGE: Fixing uninitialised read errors identified by Valgrind
"
"90f47c7b1d9725c13d972a0e2a61b2cd966bbab5","2011-04-09 18:28:02+02:00","ANDOID: Replace mkmanifest.pl with sh/sed code

Removes build dependencies like perl and its XML modules
"
"b0351e1b85a550ec4f2422d4439e5ce17150f5a3","2011-04-09 18:37:06+02:00","ANDROID: Automate the Manifest's versionCode
"
"0db4498bd9af61274672f02f627ccb371e2b4f75","2011-04-09 19:07:20+02:00","TOON: Fix more valgrind issues

Fix potential more invalid read issues in RIF loading
"
"845125278624e23f1ce3bf473aa45d774ad0b392","2011-04-09 19:29:32+02:00","TOON: Fix potential var underflowing
"
"ae49865e9e48b8569922d2ea1792541fb23b4a64","2011-04-09 21:01:27+02:00","MOHAWK: Move per-page data into LBPage.
"
"6cf1de87acdb878e3a3e4ef7cc33d45adee4a592","2011-04-09 23:47:35+02:00","DEVTOOLS: Renamed 'tools' directory to 'devtools'
"
"9842dd9268951ab1631f1e2d098c5b4b0dc50d71","2011-04-10 09:20:00+10:00","TSAGE: Simplified the custom surface code in GfxSurface
"
"718660c7f12b04bc26f82b937c4ebf8e7490688d","2011-04-10 09:29:42+10:00","TSAGE: Fix memory leak in the GfxSurface class
"
"2c41aaa17bb050d2e624006cc57e4b507b645674","2011-04-10 10:31:13+10:00","COMMON: Revert change in icon file path
"
"0a1a8810ae641ee441cde08608aaf99a52c87b7c","2011-04-10 16:50:10+10:00","TSAGE: Lots more bugfixes for Scene #6100
"
"6c0bca8aae3c84d55f1a8abbbe4ee3c52e2a2427","2011-04-10 11:12:40+02:00","ANDROID: Add missing mkdir
"
"fc582bfc8fa74992e55d1395166fbac60a577084","2011-04-10 11:23:02+02:00","Revert 'CONFIGURE: Use FORCE_RTL for the Android backend'

This reverts commit 44ab256101c8beec0860538127c2c7d602366c71.
"
"b48e3a83bb16ba8bf77b8d684074960894797917","2011-04-10 11:23:14+02:00","Revert 'CONFIGURE: Use FORCE_RTL for the Wii backend'

This reverts commit e2a0c096924df7ba2ba0c0d8888341563e6e3995.
"
"1a1e760800c2b99b894879a2debf00c41c08f21d","2011-04-10 20:13:25+10:00","TSAGE: Fixed bug in Scene #6100 with sunflowers briefly appearing too large
"
"d2d6c9e2ba934a600ad6061328cac982fa5e3f64","2011-04-10 05:45:25+03:00","MOHAWK: Silenced an MSVC waning about an uninitialized var (false positive)
"
"3fde0306a44e1649d8922d59ea209a74736df8f2","2011-04-10 05:47:29+03:00","TINSEL: Removed the useless LookAtBuffers() function
"
"69ec4fbf1be753f67c8de06fc9efc58786a255c3","2011-04-10 05:48:20+03:00","TINSEL: Removed the dummy ForceEntireRedraw() function
"
"b31f39e6c6f97d8e05814ee9a14737580f96b94e","2011-04-10 05:53:42+03:00","TINSEL: Changed cdFlags to be non-static and constant
"
"d1c4b56223e0d586a4f5a9b21bbf7420bb194da7","2011-04-10 14:17:52+03:00","TINSEL: Cleanup - removed obsolete defines
"
"c89f2276d1b52a99f08861c5acd86fedb349c718","2011-04-10 14:19:28+03:00","TINSEL: Merged NewName() inside DoSave() in order to remove a static var
"
"cd085b1ae889dfa12d1b525810b218342c61a7a6","2011-04-10 14:26:24+03:00","TINSEL: Removed some unused global static variables
"
"e8be5ba95ba8df20001671af7a007fe023f60e21","2011-04-10 19:22:06+02:00","TINSEL: Make the cdFlags array in drives.cpp static again.
"
"1244f122e09d7b11a562ce8f4e14a63c28026c2f","2011-04-10 21:21:43+03:00","DEVTOOLS: Remove unused svn helper script
"
"ee4699a49557ab47a4c6660ce97e968676bb5f8b","2011-04-11 00:20:55+02:00","KYRA: Get rid of non-const static variables in HoF.
"
"8fe9f8e73a0ac0a4f0a18a94db705f934f58ad34","2011-04-11 00:31:24+02:00","KYRA: Cleanup.
"
"93f591580a31b0a4553994be40a2eb0b227e3a56","2011-04-11 00:34:16+02:00","KYRA: Get rid of non-const static variable in Kyra2 code.
"
"073da68efa75045530afd201e8b82886326072a9","2011-04-11 00:35:28+02:00","KYRA: Constify static data table in LoL code.
"
"d9441aeb802cd99cbef7f392301ff77e625a4f94","2011-04-11 00:36:03+02:00","KYRA: Add some assertion to prevent out of bounds access.
"
"18e35a638d3eaf1ea9941507e97c1f1eedf0abb0","2011-04-11 16:27:17+01:00","OPENPANDORA: Cleanup header for events.
"
"5661570e4efd6ac64cfdbca68515c78329d11a77","2011-04-11 16:31:29+01:00","GP2X: Commit some cleanup/fudges with a view to collapsing into the GPH backend.
"
"bb6bc31813e77b5547b365dc401c0b239952d7c3","2011-04-11 18:15:14+01:00","GP2X: Mask off the graphics and events code behind a GP2X_OLD define.

* This is a temp thing while I finish up merging the GP2X and GPH code.
I do not want the GP2X backend code dropped yet until this is complete.
"
"6f1c7cf30ac3c36d6ececdadc77ff5cfac3dce66","2011-04-11 18:22:58+01:00","GPH: Change backend to mask backend code to GPH_DEVICE.

* This is mainly to make it easy to drop the old GP2X into the
same codebase (I really have no desire to manage 2 sets of 99.9%
identical code ;)).
* Code paths for just one of the supported devices can be runtime
worked out or just defined for that device.

mount.sh: Fixed some small errors#	../../../../scummvm.gph
"
"38ed8d2fcda04e8fb84b73416320fbf2344b5fd3","2011-04-11 18:24:36+01:00","CONFIGURE: Move GP2X to build with the GPH backend by default.
"
"3769f30529f924c480cfc9d34d83a78ae2cbc93a","2011-04-11 13:00:42-04:00","MOHAWK: Add more versions of LB demos

From bug #3275626
"
"214f93e6aa7ea698672946f9650103e96ab37109","2011-04-11 23:21:46+01:00","MOHAWK: Add Default Values to LB NotifyEvent Constructor.

This silences a number of warnings about possible uninitialized
parameter use.
"
"f8a73665d3c23e1b0c0176af76a1f5a8bf36befe","2011-04-02 22:36:18+02:00","WEBOS: Add build support for webos
"
"72d206dc738b41379d468f9f256c3225e20425f0","2011-04-02 22:47:49+02:00","WEBOS: Add WEBOS define

Using SDL_INIT_VIDEO flag for WebOS because without it the application
won't start.
"
"7c5c6803abe774cd77dcc38dd4ede00e7eec76e4","2011-04-03 00:01:26+02:00","WEBOS: Add webos backend

IPK can be built with 'make webosrelease'.
"
"b17f7d20c28eda883b8c21ad3fedc6619ee04d5d","2011-04-03 00:45:20+02:00","WEBOS: Strip binary before packaging it
"
"a4e757834e1ea227c207072868ca732f9872ed59","2011-04-04 00:28:14+02:00","WEBOS: Create webos backend with custom events

Currently only contains test code.
"
"48dbbdcd74e4e0f8b21d77fb9850d348a082c03d","2011-04-06 21:17:42+02:00","COMMON: Fix usage of wrong variable when keymapper is active
"
"aa79a2634d94ad98e1e32aaa923c2cd9fbe99893","2011-04-06 22:43:21+02:00","WEBOS: Enable keymapper, implement FORWARD key and right+middle button clicks
"
"ba97f8daf32027e0d0f0884615a69fa4f5133796","2011-04-06 22:48:20+02:00","WEBOS: Correct package name, fix default key mapping
"
"a899ec286f1726781ba1ed772fcda4dab81c40c8","2011-04-08 21:13:49+02:00","WEBOS: Correct package directory name
"
"2160ecfe3a81eb9ab4fff9b5ac1b2c96200d3a07","2011-04-03 23:28:04+02:00","WEBOS: Disable vkeybd, fix more directory references with wrong package name

The vkeybd XML can't be read for some reason.
"
"e5dab6672c673d8827d5e471d98074220ff6b75c","2011-04-09 13:29:59+02:00","GIT: Add Eclipse .settings directory to gitignore
"
"6c94353eff3aeee9c985d22b311959d1c5751b0e","2011-04-09 18:03:19+02:00","WEBOS: Complete rewrite of key/mouse events handling

Touchscreen is now always used like a touch pad.
"
"874ef4a73f0c5d4812df771c607dfe32ac599dd9","2011-04-09 18:05:02+02:00","WEBOS: Add a README file
"
"20863c761bda22ef34581db90231d09280c9a623","2011-04-09 18:20:15+02:00","WEBOS: Add installation instructions to README
"
"872e6f9b8c475700fdb79eed033fccb37dd3b75f","2011-04-09 18:41:09+02:00","WEBOS: Move scummvmrc to ScummVM data directory

scummvmrc is now located in ScummVM data directory and no
longer in app directory so it is accessible via USB drive mode.
"
"2a2d65051da0edd6075da74b0adcb6e8c8469f3d","2011-04-09 18:42:14+02:00","WEBOS: Correct executable flag on start script
"
"1bc38d25323d3ca7b3e07f8d2d4b8ea48b7e0618","2011-04-09 22:12:43+02:00","WEBOS: Use STRIP variable to strip the binary
"
"91e43bb136b00ab890118cfe6fb362d002ab0eba","2011-04-09 22:14:58+02:00","WEBOS: Correct indentation of WEBOS preprocessor check
"
"bc0ed249156fe5a88c9cc1394cba59bb7ff417ff","2011-04-09 23:43:42+02:00","CREDITS: Add credits for WebOS backend
"
"a16e9c0920b6b2c380f7c9060b2b6e37432abdea","2011-04-10 02:01:31+02:00","WEBOS: Add PDK paths to LDFLAGS & INCLUDES; enable dynamic plugins support
"
"c9da4a278547e9651f55dc71c72b09d605846fba","2011-04-10 02:03:22+02:00","GIT: Ignore /plugins directory
"
"fbc58d21ffe7e869b6d6387c72c02fdba32431d8","2011-04-11 00:20:26+02:00","WEBOS: Disable opengl support; move --sysroot to LDFLAGS where it belongs
"
"15bdb29248db3acc5408dacc2bc696e0904d6869","2011-04-12 10:39:38+01:00","GPH: Add separate button defined buttons for each supported device.

* No default buttons set any more as I would want the build to fails
if you don't provide the backend with a device.

* Also commit some small cleanup to the bundle files.
"
"e2adf5babcc7c04368fbb5c9fb8df170bbfdd7d0","2011-04-12 10:42:57+01:00","GPH/GP2X: Tweak wrapper script to export LD_LIBRARY_PATH.
"
"d61ad0153017f67e6eb6aaa87b54c1d6fec566ad","2011-04-12 20:16:34+10:00","TSAGE: Reworked the 'probe approaching rocks' cut-scene to work correctly

The problem is the original game presumed that rendering a single frame would take at least 10 ticks (at 60Hz). Since the ScummVM renders it faster than then, the cutscene wasn't working. A new 'ProbeMover' class has been created to ensure the probe shrinking keeps correct pace with the probe's movement.
"
"f5ff6e9e181c984f62000bd4dab4ac0c61dc52b4","2011-04-12 16:06:33+02:00","TINSEL: cleanup
"
"a8b3501252c46c3fc4fd129fa0a945eb87f47d0a","2011-04-12 16:41:36+02:00","COMMON: Drop totally obsolete & outdated DEC C++ 'support'
"
"0ce2ca4e006a70d787481040fa844c85aac43222","2011-04-12 16:53:15+02:00","COMMON: Replace MKID_BE by MKTAG

MKID_BE relied on unspecified behavior of the C++ compiler,
and as such was always a bit unsafe. The new MKTAG macro
is slightly less elegant, but does no longer depend on the
behavior of the compiler.
Inspired by FFmpeg, which has an almost identical macro.
"
"58b4cc02205569689a71cfe57bd364de7145a7ae","2011-04-12 17:04:49+02:00","COMMON: Use correct MKTAG definition, stupid
"
"f1471689cf6b11412da0d8d09526a558ff33e9d0","2011-04-12 17:23:21+02:00","COMMON: Let MKTAG always return an uint32
"
"65fc72e30a885f6adca99505ee869e010f94c1c3","2011-04-12 17:23:32+02:00","COMMON: Add some testcases for common/endian.h
"
"842d37711824a74a9415369c0cc1e38c7a238ad9","2011-04-12 22:02:36+02:00","Merge branch 'tsage' of http://github.com/dreammaster/scummvm
"
"c1e58c1415f75e90fd5ff5041541a801f33e2180","2011-04-12 23:39:10+02:00","TSAGE: Implement most of the scene 9900. New palette animation is currently broken, to be fixed
"
"a2d1fdd3655a27e23a3df0bb68f32d27cd4b3319","2011-04-13 07:42:58+02:00","TSAGE: Fix a crash using the new palette effect. It still doesn't show much...
"
"cb3e3e7125274dba4437f0beb35b461405eb3442","2011-04-12 12:05:56+01:00","GP2X: Move build support files into the GPH backend.
"
"da688dbb7f20d08371a160d9fcc29776418d502d","2011-04-12 12:08:46+01:00","GPH: Move caanoo build support files into device folder in the backend.
"
"a18bb2e73d2580722fe418db7c307f9bc307e091","2011-04-12 12:11:37+01:00","GPH: Move GP2XWIZ build support files into devices folder.

* Also add a common folder with the shared bits.
"
"1986c1d82b83ea7a8a510e12ca7e78127de1da80","2011-04-12 12:13:38+01:00","CONFIGURE: Add _timidity=no to the GPH devices to stop Timidity
support being built.

* This is for the GP2X, GP2XWIZ and Caanoo devices that use the
GPH backend.
"
"22046d24802c3162cd99fd9b26c0930410f96d2f","2011-04-13 10:29:24+03:00","SCI: Added handling for another version of mt32.drv (bug #3285556)

This is used in another version of KQ4 early (0.000.274)
"
"e000ed22d56e8ac8ab6680a8106bfa99b4f178fd","2011-04-13 10:11:20+02:00","MOHAWK: LB's 'self' is case-insensitive
"
"79f514a397c9e558e25a28fa5f92a02f42d7828a","2011-04-13 11:24:25+02:00","TOON: Make ADPCM tables const
"
"29962bfc73879845da8c58e31f75d53ff51bd10b","2011-04-13 11:24:41+02:00","SCUMM: Move ADPCM decoder into separate function
"
"b52b6b8d2b5f038717c008362a9e11009dbf88d8","2011-04-13 11:40:47+02:00","SCUMM: Resolve some code duplication
"
"9c2ff87db77235fc32bb782f40a8b4ed96d1e602","2011-04-13 11:48:07+02:00","SCUMM: Fix bug #3187622 (COMI: incorrect decoding of audio codec 13/15)
"
"aadb4f74591f4044c82cf9de5cbac1694b9cd55c","2011-04-13 20:46:24+10:00","WEBOS: Moved #include lines inside #ifdef WEBOS to fix MSVC compilation
"
"b9296a189e12c94e110ea15c490d9f46dcf4a802","2011-04-13 12:22:57+02:00","AUDIO: Expose ADPCM decoder internals via a new header

There are tons of ADPCM variants out there, and it is impractical to
stuff them all into a single adpcm.cpp file. By exposing the internals,
engines can implement their ADPCM decoder variants more easily.
"
"7607e351cc7b58efb90e14839bc4cd4af7e6371e","2011-04-13 12:24:34+02:00","TINSEL: Move custom ADPCM decoders to tinsel engine
"
"e0a30e00399366f0a7130071c961cb368444d1b3","2011-04-13 12:29:17+02:00","AUDIO: Stop adpcm.h from including common/stream.h
"
"393c6f6ade927c332aecc1271b3363891f256423","2011-04-13 12:47:42+02:00","AUDIO: Expose some internal ADPCM data tables
"
"1759209b3b89b0edacaa79383ea54f850f22235b","2011-04-13 12:48:10+02:00","SCUMM: Use shared ADPCM data tables
"
"8f70e089ac721176fb543b88f00b4c97ac945b14","2011-04-13 12:48:37+02:00","VIDEO: Use shared ADPCM data tables in VMDDecoder
"
"169512852e7ddf06061075e142bdb5331ed25053","2011-04-13 12:48:49+02:00","TOON: Use shared ADPCM data tables
"
"e6090415b62907b1ccc3163a43e04e8cea992693","2011-04-13 21:08:05+10:00","Merge remote branch 'remotes/dreammaster/tsage'
"
"0600f0c018942c2a3e09b1696b2dc71b2e00d0b3","2011-04-13 21:25:57+10:00","TSAGE: Change palette code from 4-byte to 3-byte palettes
"
"4852a38f3648d7778da29402addb87590662a1ce","2011-04-13 21:30:26+10:00","Merge branch 'master' of github.com:scummvm/scummvm
"
"48dbcbe8a1c469e98b60221350b4caec623c4131","2011-04-13 22:02:40+10:00","TSAGE: Fixed warnings identified by Buildbot
"
"3be6ff23d7f83254e8282d801d38dedfc36b51a1","2011-04-13 14:07:11+02:00","TSAGE: Fix warning
"
"deb46ab38b8a904543ede68ff2d2315f40168096","2011-04-13 09:43:08-04:00","AUDIO: Split the Intel DVI ADPCM into its own class

IMA is really just the definition on how to decode a sample from a nibble, DVI is just a way for those nibbles to be stored in the stream.
"
"0234c9ff95e3456bdb2c0eb0f2763516f6748c29","2011-04-13 16:10:38+02:00","TSAGE: Fix compilation on Linux/amd64 with g++ 4.5.2.
"
"6db40e0c6c6c575696a7eaaa44b68c7579664d36","2011-04-13 17:08:16+02:00","TSAGE: Cleanup custom List usage.

This makes the code use Common::List for all cases where synchronization can
not be done with tSage::List::synchronise. Furthermore I renamed the custom
List class to SynchronisedList to stress its purpose.

I also removed clear2, contains and forEach and replaced them with algorithm
usage from Common:: or in the case of 'contains' replaced them with a simple
inline function which uses Common::find.
"
"f864fef8e9fb95199424996fbf4a43d1d042560d","2011-04-13 18:54:21+02:00","TSAGE: Fix compilation on Mac OS X PPC.

Mac OS X PPC's standard C(++) library does not feature any sqrtf function,
since the parameter is double anyway I changed it to use sqrt for now.

We might want to consider adding some global macros for that on such
platforms. Another instance where the same issues caused problems in the past
is the MT-32 emulator. See audio/softsynth/mt32/synth.cpp lines 30 to 43 for
reference.
"
"fc59a52e7a58db857c7f83e9dc17c04fccb1960b","2011-04-09 17:15:51+02:00","SCI: Remove left-over fixme comment

It should have been removed in b40b87fdb5b4ee869cce55d852af409896b20c98
"
"5c87136b5f045d5ddcaf534185fb2259264cbabd","2011-04-13 19:11:22+02:00","TSAGE: Fix compilation on NDS.

It is not safe to assume one can construct a va_list by using NULL. Instead I
created a temporary (uninitialized!) dummy, which is passed in the call to the
Action::attached implementation. I added a TODO to resolve this temporary hack.
"
"848b0d1b0be8719c8b690eb59a969821ab1a280d","2011-04-13 19:12:25+02:00","MOHAWK: Stupid padding fix.
"
"fb9a8620dbefc0f4c05001df83f4b54f7ea9e2e7","2011-04-13 19:17:29+02:00","TSAGE: Fix build as dynamic plugin.
"
"a132bbb10c2f7349862c6c35d03d829ff76d5dea","2011-04-13 19:28:49+02:00","CONFIGURE: Fix tsage engine entry position.

The engine list is (apart for subengines and SCUMM) sorted alphabetically,
thus tsage should be between touche and tucker and not between toon and
touche.
"
"66b43f2312578f35e0718d0699de207a7bf77f1a","2011-04-13 21:27:46+02:00","TSAGE: 'Cosmetic' cleanups
"
"4e75a95f863d588892a5112243b7baebc7b86ff3","2011-04-13 21:59:54+02:00","TSAGE: Fix two GCC warnings (which were bugs). Thanks LordHoto for reporting those.
"
"f9e9ecd454057f27a2352a936eec955e6906ebcb","2011-04-13 22:21:58+02:00","TSAGE: Move two functions from .h to .cpp (thanks fuzzie for reporting that)
"
"cc82bacc775731dab91c036240b31d6c2b7b44fe","2011-04-13 22:33:41+02:00","TSAGE: Always initialise the event in getEvent()

This fixes Valgrind warnings when getEvent() is called when there are
no pending events at all.
"
"c2d66be88d3841e12ecf7b02a751d15161f8cf54","2011-04-13 22:37:29+02:00","TSAGE: Suppress some dead code, rename a variable (thanks fuzzie for pointing that)
"
"c8b418036f6215729edfcfa373053f88fa3f2129","2011-04-13 22:51:53+02:00","TSAGE: Replace the recently added error() by a warning(), allowing to play the CD version
"
"41706cb4d9c2fe383de11bf84b73e46b9f9147f9","2011-04-13 23:31:41+02:00","TSAGE: Silence uninitialized variable usage warning.

Instead of passing an uninitialized dummy va_list to Action::attached we just
pass the va parameter from SequenceManager::attached to it now, since that
parameter is not used in Action::attached, it is safe to do that.
"
"12a31200f29cfd36e93aa407fc56de28db31028d","2011-03-20 23:44:46+01:00","AUDIO: Add per sound type mute flag setting to Mixer(Impl).

This also adapts our default implementation MixerImpl to handle the newly
added flags properly.

Now we do not need to set the sound volume for all types to 0, in case we want
to mute them, but instead just set the mute flag for all types to true. This
allows engines to be a bit more agonstic about mute support, when it comes to
volume options etc. since they can just setup any volume they like, but are
still muted (and thus will not break muting anymore).

MIDI sound is of course not affected by this.
"
"f9a459d70e0a0de620ac931716481a938a725733","2011-03-20 23:45:52+01:00","ENGINES: Make Engine::syncSoundSettings use the Mixer's mute flag directly.

This fixes an annoying behavior in the Sword2 option's dialog, which set all
sound type volumes to 0, in case it was opened when the user used the global
mute setting.
"
"507dd88f9c43a8a038da519bdfe2e9b62456e7fe","2011-03-20 23:58:08+01:00","TINSEL: Clean up code a bit, since we now handle digital audio muting differently.
"
"f61eff4404751ad4bf53e8295ea4d5b77847bbed","2011-03-21 00:30:22+01:00","DRACI: Adapt to new muting style.
"
"3d1dcefd4605df27e2dce0425dfce159a20c5a9e","2011-04-14 01:56:47+03:00","TINSEL: Removed an unused global variable
"
"4ab51a8b26c8964a731ff61f212751f6af2e7069","2011-04-13 23:08:34+02:00","SCUMM: Typo
"
"1c3a4f37352f9fe619c07df3998bd0ab6212d4fa","2011-04-14 20:48:16+10:00","CREDITS: Added TsAGE engine credits
"
"4e8c047d4a1f1f859b22a5c25e5c0cdae87aceb5","2011-04-14 20:53:03+10:00","CREDITS: Added credits for TsAGE
"
"c679aa72c3623383a591ad30ebf36286c7ce47df","2011-04-14 13:04:29+02:00","TSAGE: Big Endian fix
"
"8a0495a5f37d35a66e4c4b6b702f32e68e404301","2011-04-14 21:39:53+10:00","TSAGE: Added replacement hierarchy for palette modifier classes that better matches the original
"
"64c4e65201ca3097cc25b295359683eafaf25b07","2011-04-14 14:03:07+02:00","KYRA: Enforce use of American English in comments.
"
"84184aabc00251374a181fe296487619afa779ed","2011-04-14 14:12:27+02:00","ALL: colour -> color
"
"2e095e25f2435f0d066d2826176e394bda5c4a9c","2011-04-14 14:34:28+02:00","ALL: centre -> center
"
"8aa6d25c7776ca0a9ee1e5ea85f6b65e10813a98","2011-04-14 14:42:21+02:00","ALL: centerd -> centered
"
"f035c2630194ee523dba83ce10eb4140cc6828ff","2011-04-14 10:20:51-04:00","AUDIO: Fix a typo
"
"2ac86f8140adde218086a8ccd17880e5eb90887d","2011-04-14 18:36:34+02:00","GRAPHICS: Replace PNG_HEADER macro with MKTAG
"
"a762173794935efe4ab4d229fdc73f4d9c65e5ab","2011-04-14 18:45:42+02:00","SWORD25: Always create the MoviePlayer, even without USE_THEORADEC.
"
"6ecc460b419690ba8bef8bbc3deb5af3f6c7bbc6","2011-04-14 21:06:06+02:00","SWORD25: Fix rendering on big-endian.
"
"c60e773981be82ae0be2c649e9a079da4dae26a9","2011-04-14 21:08:03+02:00","GRAPHICS: Handle 4bpp paletted PNG files.
"
"8305f9c2a0e3de16a0e39fc8af65ef71decff092","2011-04-14 21:08:52+02:00","SWORD25: Simplify text rendering code slightly.
"
"cfacca1a26e233f3054d5b04858316a3c1ae8be7","2011-04-14 21:47:56+02:00","GRAPHICS: Tidy up 4bpp handling a little.
"
"eef6c5dd90d17b0166f1c13a4f6ec50d67e90646","2011-04-14 23:02:18+02:00","SWORD25: Silly whitespace fix.
"
"15b921327ee84c439a92ed720b4ea33db5406cd0","2011-04-15 00:25:56+03:00","SWORD25: Removed several unused files from the pluto directory
"
"8f09386ec8341f4bf00db06fb7c9334c36a179b6","2011-04-15 00:32:51+03:00","SWORD25: Removed the duplicate header files inside the pluto/pdep directory
"
"d23150ff786dcaafd7025804201530b421b41247","2011-04-14 23:46:53+02:00","AUDIO: Name the ADPCM status struct.
"
"6c4f09c058d15e18e4e95d9eeda60719a35c2343","2011-04-15 11:13:35+03:00","SCI: Silenced the warning for kMacPlatform(1)

This warning produces a lot of spam in the console (e.g. it pops up
whenever the icon bar is opened in Dr. Brain Mac), thus it has been
silenced
"
"9a987001d4ea2d637f230f8a280ce2fa162d18b9","2011-04-15 11:19:28+03:00","SCI: Some initial work on supporting patch.005 in KQ1 Amiga
"
"dd6ab8d306ed1f8b3e999ae753d5777e1dcaed5c","2011-04-15 11:01:24+02:00","TSAGE: Scene40: The hero may now use his stunner on the assassin. Scene still broken.

Also move some display() to display2() for consistency with the rest of the scenes in group1
"
"54e6941ec408110ef9b8f91bc0ba3699a9bc8f58","2011-04-14 22:59:11+10:00","TSAGE: Changed palette code back to using a byte array
"
"20e662e5a6a01930f773878b22a2a2be38b2ee67","2011-04-15 13:56:20+02:00","CONFIGURE: Explain more about --enable-all-engines.
"
"8e9dbe5c3dfde9e180cd1008cb888618f77c64fa","2011-04-15 21:40:51+09:30","GROOVIE: Use uint32 when searching for a video id by name

This brings ResMan::getRef into line with the rest of the engine.
"
"f33810a8c0617641d16953fd026b8598bd090a50","2011-04-15 21:45:32+09:30","GROOVIE: Implement resource search-by-name for v2 games
"
"82483cb5d1f246f1760acbf61d9531f51a36b53d","2011-04-15 14:56:22+02:00","TSAGE: Fix several problems in scene 20. That fixes the intro and probably the evasion.

Also add some comments in scene postInit in order to clarify the different actions available
"
"9ca6562dc60a769199a3085beab0a72b72382deb","2011-04-15 20:36:54+02:00","TSAGE: Cleanup. For coding consistency, remove default parameters when calling startSound() in scene groups 8 and 10
"
"ab2626f201dde85ecb811980ea06fef263881fd5","2011-04-15 23:04:29+02:00","TSAGE: Fix several problems in scene 40, including the blocking one (killing the assassin)
"
"94e956e265e3bb6783f7ac5c3c73a45887fba16d","2011-04-16 10:57:46+02:00","TSAGE: Rename some objects in scene 60 and fix the master button behavior.

This fix the blocking problem in scene 60.
"
"550615f157a5a52932f0dc18757e00435b463b4e","2011-04-16 15:10:12+03:00","HUGO: Implement prompt text box

Still it sometimes asserts with repeated dialog launches.
"
"601d66df4fbc2b1973c7e24ce3e01b255cf16f98","2011-04-16 15:54:01+03:00","HUGO: Fix crashes
"
"8df814b6256361d36a02bbddf8c5db5f070c23b6","2011-04-16 15:55:16+03:00","HUGO: cleanup
"
"6224b74f34f0c055b6d9e2511bf9688d02c946c3","2011-04-16 16:18:59+03:00","GUI: Let EditTextWidget notify when the editing is finished
"
"dfadf40d4273a0ef593188ccef47de486e5e87c6","2011-04-16 16:19:44+03:00","HUGO: Close prompt box dialog on Return key
"
"6b0ccbb095917d5f98722b26bef07d4a0816bb3b","2011-04-16 18:20:37+02:00","AUDIO: Renamed mute related functions in Mixer.

This renames setMuteForSoundType to muteSoundType and getMuteForSoundType to
isSoundTypeMuted.
"
"1d60b266879d58663827e7ce0b727c201433394d","2011-04-16 18:32:14+02:00","AUDIO: Cleanup sound type settings handling in MixerImpl.
"
"5cb4fc130b018522c765c2ce68b169702efa2682","2011-04-16 19:40:21+02:00","HUGO: Announce support in the NEWS file
"
"bec42f78b7e6ff36e1896d1dde7060f935b723e7","2011-04-16 19:40:59+02:00","HUGO: Remove debug message
"
"f53724bf2e4df7e67a70b5960717891611c9c1e9","2011-04-16 20:28:06+02:00","HUGO: Fix a typo in special thanks
"
"ca7d1550e9afa16a36f7c6f8e6dd759e16277e24","2011-04-16 20:32:49+02:00","HUGO: Fix the typo in the PL file too...
"
"34093ac9a966e99426f94b537cd6dbeb9bdf835c","2011-04-16 20:36:38+02:00","CREDITS: Update credits files.
"
"12707e2e1b884ab83b52ece015e27be91d72ef6d","2011-04-16 21:02:39+02:00","NEWS: wrap text in order to stay below the length limit
"
"8fe65b52cf770ab9b503b1ee38dc789d06b82edb","2011-04-17 00:37:35+02:00","TSAGE: Add workaround for scene 40 (glitch in animation of dying Kzin falling)
"
"e9a1035f521a8a0acb024706306d748cbc7a0f04","2011-04-17 08:37:11+10:00","TSAGE: Disable GMM Save/Load buttons when saving/loading not allowed
"
"e2f34d19c88a9a0b37c57afbaa07d44c85f1f205","2011-04-17 09:33:53+02:00","TSAGE: Add flag commands to the debugger
"
"2fb7acb0009b3ac60bd6000bf398b743394626b8","2011-04-17 11:20:08+02:00","TSAGE: Add listobjects and moveobject commands to the debugger
"
"f1d890beb7eaee012f5779729e5982dead9c2148","2011-04-17 19:51:56+10:00","TSAGE: Fix glitches with incorrect pixels on the edges of zoomed objects
"
"85adc95f79b97c179d82291b670acf11ccf1b60c","2011-04-17 12:24:06+02:00","TSAGE: Remove redundant parameter
"
"9363e19667d5b4c7af2237bc6f22a636fed1dc0f","2011-04-17 12:27:04+02:00","TSAGE: Suppress strict-alias warnings on older GCCs
"
"64c3332138bee36905e3df07ba58d0a7ca2c4206","2011-04-17 13:35:29+03:00","SAGA: Fixed bug #3276033: IHNM: Savegame reminder not reset
"
"886ea29bbfe5556729843d97637ea9f691382ddc","2011-04-17 13:46:58+03:00","SCUMM: Add md5 from bug #3264965 for fbpack
"
"f79b91548de6daf2c3bf9661e2a002b23744e99e","2011-04-17 22:00:31+10:00","TSAGE: Bugfixes for Scene #2300 - Starship Hanger
"
"a383fe452f5b62a74fc92b8734425bd8ab793402","2011-04-17 14:18:29+02:00","TOON: Fix palette issues in alligators scene

Bug #3264989: 'TOON: Palette problems'
"
"ce0cc0ee857740cb0bd1ebd3b4bfa6eefc31aee6","2011-04-17 14:48:27+03:00","COMMON: Partial fix for #3087922: COMMON/BASE/BACKENDS: Code analysis warnings
"
"27d53fd28347cced213ab3912c33a28beedb681b","2011-04-17 22:24:47+10:00","TSAGE: Removed redundant call to memory manager deallocate
"
"dcc8f226c02087e5960952d261615f5833c58094","2011-04-17 22:54:06+10:00","TSAGE: Have copy protection turned on for all versions of the game

I'd previously incorrectly assumed copy protection would be disabled in the CD version of the game without actually playing all the way through to that point to find out.
"
"a1509af8b67a8d1419eb81ce63aca2eee9932d88","2011-04-15 17:00:47+03:00","GUI: Fix theme change ignores cancel on options window.

add new protected value _oldTheme. It keeps theme at the init of
options window, and cancel button reapplies old theme.
"
"8463649f49fd07736389113e08c3f6a7b1e2bc73","2011-04-15 17:15:36+03:00","GUI: Fix apply old theme even if theme is not changed.

There was no control if theme was changed. If you click cancel, it
always changes theme to which options panel opened with. This is
unneccessery if theme is not changed so a if statement added before
applying old theme.
"
"9990ae6aa0bca8e9713018dff83827d5f27c6a60","2011-04-17 14:21:49+01:00","CREDITS: Add buildbot skin to billwashere crontibutions
"
"f809e94dd23f57e42b4c6e83fe39bdaccf635e85","2011-04-17 15:27:18+02:00","TOON: Fix dirty rect issues with fonts
"
"908dde34bafdcc3d167f85db0003970351f8c42f","2011-04-17 15:39:05+02:00","HUGO: Enable the engine by default
"
"cccaaf3a0a98e845bc8ebd96e13d2751523d3392","2011-04-17 15:40:02+02:00","TSAGE: CD version don't use protection page 1, 17 and above
"
"d20a85d4f13acd641c8e59e2673095d393a82cad","2011-04-17 16:22:24+03:00","GUI: Fix indentation problems. Remove unwanted space.

All cosmetic changes, nothing changed.
"
"1fd034f3263fcb7043846e3f962921739cd75d6e","2011-04-17 15:46:55+02:00","TOON: Fix Flux staying outside of the dressing room
"
"055b766f7026128f614c482b6099611b0b8444e2","2011-04-17 15:47:53+02:00","Merge branch 'master' of github.com:scummvm/scummvm
"
"c824ef16a69387570a86aa9b6c62e10690fa549c","2011-04-17 21:44:29+02:00","Merge branch 'master' of https://github.com/enginmanap/scummvm
"
"5f9fe1383a52b14a9179b9f52d38a8bc85cafeed","2011-04-17 23:07:51+02:00","TSAGE: Fix subtle bug in StripManager. This fixes scene 2222.
"
"8f544d578c0c9e90bd0385ce1c4eea62a0014d7f","2011-04-17 23:11:25+02:00","TSAGE: Fix initialization of MTEXT speaker
"
"afb296f38cae42f0e50fba6215bba6285bea4172","2011-04-17 23:12:21+02:00","TSAGE: Fix a glitch in scene222:postInit. Suppress a useless comment.
"
"1f16090f276aabf7bacbedbcd503db93a586b0d3","2011-04-18 01:19:24+03:00","NEWS: Mention support for Amiga SCI games and Mac SCI1 games
"
"3c1fb00455ced1486ec56b9dff8816189792a01f","2011-04-18 01:24:58+03:00","NEWS: Fixed full stops in the end of each news item
"
"bd3e358d62618ee311d7ddd7bf62c6bc82e029ac","2011-04-18 08:18:01+02:00","TSAGE: Fix bug in scene 1500
"
"da0ade2beddd66f8d531c0b1e7aa86188201d5d4","2011-04-18 08:42:00+02:00","TSAGE: Describe scenes fro group 8 and 10
"
"e34739aaef74ec48227ce0bed3990fa4d51147b5","2011-04-18 09:16:15+02:00","TSAGE: Fix a couple of problems in Scene 2320, still broken
"
"26501fb46c86ad5473a6258359dc30bd1c1d92f1","2011-04-18 20:13:30+10:00","TSAGE: Initialise scene zoom percents in constructor. Fixes crash at the end of Scene #1400
"
"962d8481969150e591f9fc28e60b0dbee2b44c52","2011-04-18 20:37:24+10:00","TSAGE: Removed InventoryDialog allFlag parameter.

This was intended to be used to simultaneously support the cheat mode dialog with all the inventory items. But that is going to need to be implemented as a completely separate dialog.
"
"4486131ca6d2e66376e8bf69e72eb1a1868a892a","2011-04-18 20:37:57+10:00","TSAGE: Fix bug with selected inventory item remaining selected after restarting game
"
"cec59bd124039509e79ee0fbcdac0f05235eebe3","2011-04-18 20:45:42+10:00","TSAGE: Fix palette corruption in savegame files.
"
"12af50f2ffd7b000ac97a5cea0a596c96fb54924","2011-04-18 13:44:59+02:00","TSAGE: Fix bug in scene 4045 'missing character'.

I also renamed several objects and functions.
"
"7b4a4d9fa65fb843c1fed77197e7cd21ca7f93b8","2011-04-18 15:57:04+02:00","Merge pull request 'New mixer mute handling.'

See https://github.com/scummvm/scummvm/pull/12 for more information.
"
"5563b25faf27717de31c358fe26ee98557f508bb","2011-04-18 16:12:57+02:00","MOHAWK: Speed up drawRLE8 a bit.
"
"0402ec4ea2b51a2e1ebaefc90bdad3272a8dabb4","2011-04-18 13:59:10+02:00","SYMBIAN: Clarify vsnprintf.h legal header a little bit
"
"63a7698a8678ee5f842ae39ebb4868165fc369e4","2011-04-18 14:02:03+02:00","SYMBIAN: Use astyle to slightly reduce code formatting mess ;)
"
"e9c228564a97267bd439704b96cb659986511224","2011-04-18 16:37:50+02:00","TSAGE: Fix region 8 in scene 4045
"
"73f04118f3d03e25fa1139cfea2b1330f0098bd4","2011-04-18 17:39:31+02:00","COMMON: Rename Error to ErrorCode, introduce new Error class
"
"bac8fa70fdd4c32d06288b3579ee30ba40e77ece","2011-04-18 17:43:19+02:00","COMMON: Cleanup error messages
"
"7ccba1fced2f35a49b396ec58081e5bf084b6cab","2011-04-18 17:43:26+02:00","COMMON: Fix typo
"
"7c13aa48cd3f103564ac1807f1152d94f1863979","2011-04-18 17:45:35+02:00","COMMON: Tweak extra text handling in Common::Error
"
"cd2fcaf4ca338400ed8ee44566b9a767287efd69","2011-04-18 17:50:54+02:00","COMMON: Remove kInvalidPathError
"
"1037ed247042485df1ad312d9ddfbd17251ed907","2011-04-18 17:51:08+02:00","COMMON: Clarify error naming conventions

Not all error codes comply with these yet.
"
"3a574199b0b3e848d786d71a50a1107536507479","2011-04-18 18:19:53+02:00","COMMON: Cleanup names/handling of some error codes
"
"b929699ad20dc06a379fedb3704a28aec0f82347","2011-04-18 18:20:40+02:00","SCUMM: Make use of new Common::Error type
"
"55f1fa8dba78c6c11365b98b358d249209db99fc","2011-04-19 19:18:34+10:00","TSAGE: Bugfixes for graphics glitches when using the lift in scene #2320
"
"d18f8e8564de7feb890ca8fe183c6508c64acc41","2011-04-19 19:37:26+10:00","TSAGE: Fixed button highlighting in inventory dialog
"
"5dcfd1e32c185e88b09a3ff1341aaf78b674572b","2011-04-19 21:02:27+10:00","TSAGE: Reworked the saving code to fix crashes

Note that this undoes the recent compilation fix for GCC, since it didn't work. For now, used an explicit void ** conversion as previously suggested.
"
"95b4713ffaf3be9e31bf54cad71c76aa637de510","2011-04-19 21:07:37+10:00","TSAGE: Changed Scene::_sceneNumber to avoid confusion with SceneManager::_sceneNumber
"
"b7c9bf4b3306cd8006bc312bbb06ee9d491fa265","2011-04-19 21:33:56+10:00","TSAGE: Simplified the new Saver::getObjectCount method
"
"5985320c5e61a1abdbf1d097e0f1c6df6b5eff99","2011-04-19 21:42:43+10:00","TSAGE: Removed original game that uses 'Intro.txt' to indicate whether the introduction has played
"
"c37f36d0a87917a72afd860a960f8c83f8d0552d","2011-04-19 15:09:21+02:00","GPH: Replace defunct MIXER_DOUBLE_BUFFERING by working code
"
"b49f313dd4c735d4598441584ec0d8dca0b5489c","2011-04-19 15:09:35+02:00","OPENPANDORA: Replace defunct MIXER_DOUBLE_BUFFERING by working code
"
"489d4d62cdf0a9949773a382d1137f9ffcae6f5e","2011-04-19 15:19:19+02:00","BACKENDS: Fix compilation for Caanoo and GP2xWiz.
"
"10b0294c9405356a0bd426285d260a108e66c3d2","2011-04-19 17:04:05+02:00","TSAGE: Suppress empty format string warning of g++.
"
"c6112f738312ff6243b3fca1373d4d44ef08ee32","2011-04-19 18:08:47+02:00","COMMON: Do not call ReadStream::eos in SubReadStream::read.

Instead I moved the call to ReadStream::eos into SubReadStream::eos.

fuzzie pointed out that in certain cases this resulted in a lot of eos calls
before. Those were rather needlessly, since checking the eos bit of the
decorated stream in read does not give any advantage over checking it when
the client code really wants to test the eos flag.
"
"8d3c289dd06017c7e4b790e8b0e31755c722cfeb","2011-04-19 19:13:08+02:00","LURE: Enabled clickable menus for WebOS.
"
"551cc744f9df2405332a1d3ea1e2612c6bd560af","2011-04-18 23:41:34+02:00","TSAGE: Rename several objects in Scene 4000
"
"3897e6f5e06a0c92f9d4dfb6353964e7fde47342","2011-04-19 22:53:19+02:00","TSAGE: Fix blocking bug in scene 4100.

That unlocks the infamous 'Alcohol? Cool, get my daughter!' scene :P
"
"ecf5d62a1039c770602384ab86f232ebb6813a60","2011-04-20 00:00:07+02:00","TSAGE: Fix double-Miranda bug when Rock is drunk (scene 4100)
"
"e0478c2a9b49b8ef60203c6f0d1c29860795a01d","2011-04-20 10:27:12+02:00","SYMBIAN : Updated folder names audio, added video, added M_PI define
"
"cd5a76eff287635e64d9b300415fd60205b28a26","2011-04-20 18:47:03+10:00","Merge remote branch 'remotes/kayahr/lure'
"
"74a81d7a997c0401a0bd87ccf57dc87bd0dcd9e5","2011-04-20 12:36:04+02:00","SYMBIAN: Changed sound to audio in macro.
"
"1f67138b7dfa14388d46ab5f698386e52b838190","2011-04-20 12:36:54+02:00","Merge branch 'master' of github.com:scummvm/scummvm
"
"432771b5d931b5722c28d3158c5d82774c16c632","2011-04-20 21:05:03+10:00","TSAGE: Properly destroy cloned objects when removed from a scene
"
"1eb75f789228f881c623d4ca72df4d5cba25ea68","2011-04-20 21:17:12+10:00","TSAGE: Fix problem with text appearing with random background colours after scene changes
"
"3fee10eb604d31aa731362404fc7eaa080032642","2011-04-20 23:02:07+10:00","TSAGE: Cleaner bugfix for text colours being incorrect
"
"c15b858765e9ad606c8e84bdf48744957983a49a","2011-04-20 22:22:01+02:00","HUGO: Silent several warnings reported by littleboy
"
"804f0f3e477a933ecb0cade7de9cbb35e30a51e4","2011-04-20 23:10:00+02:00","GOB: Shut up VS2010 code analysis warning
"
"eb8b1a962b26ffe9af003a2045aade36734240cb","2011-04-20 23:37:53+02:00","SCI: Fix precedence (bug #3087872)
"
"21421d2e86cf44a3236dd39da847ee15b366d95f","2011-04-20 22:30:01+02:00","DC: Move dynamic plugin handling into the platform
"
"8a8742930665010b83ed6518fe019b68b7b9ae7f","2011-04-20 23:43:33+02:00","DC: Provide some feedback when loading plugins

Display the names of the plugins being loaded, and display amount
of free memory while doing so.  This should make it easier to spot
the case that too many engine plugins have been placed on the boot
medium.
"
"6d66988ad5a1c50e2848cd320469cb5137d30013","2011-04-21 01:03:54+02:00","TSAGE: Fix broken animation in scene 60. Renamed more or less everything
"
"f236ecb5d310ea66fe02623b671697910ee18e48","2011-04-21 01:04:48+02:00","TSAGE: Fix a bug in Scene 4100
"
"44e79c70fa2908e0abdb7c9effa1dd039404a520","2011-04-21 08:05:00+02:00","MOHAWK: Don't initialize a null pointer, to make VS2010 happy.
"
"b0008d2d33c394fbba358c08b032c5872e6a909d","2011-04-21 20:22:12+02:00","FM-TOWNS AUDIO: fix memory leak
"
"204644b001d85612742426b5731b8149b0a24f2e","2011-04-21 20:29:25+02:00","Merge branch 'master' of https://github.com/scummvm/scummvm
"
"dda6df668a23cc5c0bb9225f6693b862a3e53d1c","2011-04-21 22:13:09+02:00","SCI: Avoid (unused) sqrt of a negative number

This fixes bug #3289799.
"
"1d93c80c148e3fc1310cbe9cd1a8f60b1c7c3642","2011-04-22 03:55:22+01:00","DRACI: Fix VS2010 Code Analysis Warnings Reported in Bug #3290634

Minor correction to use integer value, rather than boolean.
"
"4d02cf52d217e4a6c956b80540a3d0611ff7d21d","2011-04-22 08:28:09+02:00","TSAGE: Fix initialization bug in scene 4100.
"
"fca9c28ea75f3d7fed11035747d124d938e6d75a","2011-04-22 10:28:26+02:00","SYMBIAN: Add support for TSAGE engine
"
"8f1a26ea3e86f1278d1fce58db13f3684b5d391f","2011-04-22 10:56:05+02:00","BUILD: Move ARM_ASM flags to configure

So they're used again if a port overwrites _port_mk
"
"1f660237a4c5b4e80af6515848e6cf0bcd7c74bc","2011-04-22 14:10:14-04:00","CREATE_PROJECT: Change build events to also be run in release builds

Unofficial builds using MSVC in release mode will benefit from having a revision number available
"
"b9262bd70c8bf9aa1660bd93a36f59253179bb7e","2011-04-22 14:39:16-04:00","MOHAWK: Silence MSVC warning (bug #3290528)
"
"26b5b21bfc668268efe095f0e8fde6de4f2c974f","2011-04-22 19:52:48+01:00","I18N: Remove inexistent file from list of files for translation template

The file has actually been moved to a different place, but it does not
contain any translatable string. This fix an issue that prevented the
scummvm.pot template file to be updated.
"
"6e94f26208f959e340f82052b8849958f97d64bb","2011-04-22 19:56:54+01:00","OPENPANDORA: Remove unneeded translations.h include.
"
"44c1d3822239376deca8a41bf33b184553bce9d8","2011-04-22 19:57:33+01:00","DOTT: MM message can now be translated.
"
"dd6e09c1f2a98ff0fe34df0f977bf6beb3056fb4","2011-04-22 19:58:05+01:00","I18N: Update translation template file.
"
"f6b1fdecbe49e66d6dad7c16f8e3d245ce6d934b","2011-04-22 20:00:22+01:00","I18N: Update translation files from template.
"
"42408c0d95d59666ee3bf9f915eaf512aee1ad0d","2011-04-22 20:01:22+01:00","I18N: Update translation data file.
"
"0ebf92ee384d00deb89bcd7c672e01ed43edf1cd","2011-04-22 21:28:06+02:00","WINCE: Add Tremolo support
"
"e15f9cc0720c25a8afcf3e08ed8db56e7b5fe03c","2011-04-22 21:43:42+02:00","AUDIO: Fix Tremolo support

Include by used library, not by backend
"
"4a7360d29be53dc8ab4ccd2cd8f508cd21ed1c7c","2011-04-22 21:46:38+02:00","SCUMM: Do not pass non-string literal but '%s' + string to displayMessage.

Since displayMessages usualy vsnprintf internally it is not quite safe to pass
any string to it, since it might include a format argument like %n, which is
unsafe.
"
"8fd3c688d12d71837f4a4676e21e65b45a9fda07","2011-04-22 23:12:31+02:00","TSAGE: Fix an inventory bug (ale)
"
"a8dfcd61944e1dd079387db3f7b9e9691a3feb49","2011-04-23 01:21:56+02:00","TSAGE: Fix Miranda in scene 4000, 4040 and 4045
"
"b4f8a63171967814d43a1e3883055b03f6d5b8ac","2011-04-23 03:20:20+02:00","ASM: Replace .equ with .set in proc3ARM.s

gas from the iphone failchain doesn't know about .equ, and .set is
synonymous with .equ - which it supports
"
"983b044ccb9b82eabd8d3b667822c3693ddb4e6d","2011-04-23 03:28:26+02:00","ARM: Global symbols get an underscore prefix on darwin

apply same solution as for the sound/smush ARM asm here
"
"e19fe1c53fb9433a188618d94cc8a3f5a15fd5d8","2011-04-23 03:30:19+02:00","ASM: Defines do not get mangled
"
"8651f9739f20c1a3cb70b8c060fa411de7b8b451","2011-04-23 08:31:04+02:00","HUGO: Fix Endianness issue in H2 and H3 Dos
"
"13804db8886b0ba6bc833cf78ff0ccbe0a9b2b9b","2011-04-23 14:39:53+02:00","TSAGE: Scene 4000: Fix several bugs that were blocking progress to the chimney
"
"f246382f4b70c75ae8b084d79e64fea237bb5603","2011-04-23 21:06:36+02:00","TOON: fix main title crash - Bug #3291725 fixed

Bug #3291725: 'TOON: Crash on the title screen'
"
"52c05acd959bd873306177a39e6c159e67e5f165","2011-04-24 12:28:22+03:00","AGI: Fix bug #3087825: AGI: Code analysis warnings
"
"5441d5099f9333e447ca6d9d95b96b1513033f6c","2011-04-24 10:35:11+01:00","I18N: Update Czech translation from patch #3291903
"
"bc777b9b481718d3ccb00206369a2b0697c99eee","2011-04-24 10:38:02+01:00","I18N: Update Hungarian translation from patch #3291991
"
"7a9157bb567e5fa96e55332f954b1af31bc5668e","2011-04-24 10:38:57+01:00","I18N: Update translations data file.
"
"60a21245713489caac4a288b4172af3a74174810","2011-04-24 12:01:35+02:00","MOHAWK: Add detection for Arthur's Birthday.
"
"d3ca972ab4ebed4863eb28da4c8c4b18355a9c9f","2011-04-24 12:10:07+02:00","MOHAWK: Add detection for The Berenstain Bears In The Dark.
"
"0f2eaf848fde4832dc52f7ffdd73930073822a01","2011-04-24 16:34:49+03:00","TEEN: Fix duplicate header guard
"
"c2eb927ab351b5133fe641c83108e774a4c879bb","2011-04-24 14:33:20+01:00","DRASCULA: Avoid crash in engine destructor after it failed to start.

This happens for example if the drascula.dat file is not found.
"
"bfe0b5f41d048da2eb555aad2b6eece1bca82397","2011-04-24 14:35:12+01:00","DRASCULA: Update German subtitles for Von Braun cutscene.

The first string of the old subtitles was too long.
"
"d2245e421a69803cf7fdfb700282ca2bf1e4c4b4","2011-04-24 14:49:35+01:00","I18N: Update German translation.
"
"03adb274f93037ae96df6ac5030058b0c4378171","2011-04-24 14:55:25+01:00","I18N: Update Italian translation.
"
"9b47a42ebdfb9d56463fba552a30d0749b1f131e","2011-04-24 14:56:18+01:00","I18N: Update translations data file.
"
"06ef66cd35b9185305cf2244108d51eff4859bff","2011-04-24 18:28:47+02:00","TSAGE: Implement missing Scene4050::signal() and Scene4050::dispatch(), fix several bugs.

It's now possible to complete scene group 5 despite a couple of glitches in scene 4000 and 4045
"
"4f708b021269c67da42177df8170a86d073c6e49","2011-04-24 22:29:27+02:00","HUGO: Hopefully fix the valgrind error reported by Digitall in bug #3292391
"
"11b907ebf45f5a0707c2748b8f7413b2910976a8","2011-04-24 12:34:57-04:00","CREATE_PROJECT: Update revision number support (fixes bug #3280881)

Replace existing environment variable based revision number support by a file-based method
- Generate a special header file in the build output folder with the current revision number
- Include the new header file from internal_version.h when a specific define is set
- Update create_project to define SCUMMVM_INTERNAL_REVISION as needed and add the build output folder to the include path
- Remove support for git-svn clones in the revision script (not useful anymore after the switch to git)
"
"878d72b387d13bdb7713b142abae32bc28a51047","2011-04-24 13:33:23-04:00","CREATE_PROJECT: Move project-specific information to configuration file

User-visible output and project-specific names are now defined in a config header.
This allows an easier usage of the create_project tools in other scummvm-derived projects (such as residual).
"
"62e823300993fe1932173f8800b4088a20b75924","2011-04-24 17:08:07-04:00","COMMON: Fix MSVC warning in PEResources::parseResourceLevel()
"
"3de8b25003ad5aafdcb7ae091383339e6313ce8e","2011-04-24 23:22:39+02:00","HUGO: Fix BE issue in getSound(). Thanks wjp for finding that issue.
"
"de5ec741ffbc491ec33100f7b60d1e4928e8f302","2011-04-25 00:08:39+02:00","HUGO: Add a black background behind the score line. This should fix bug #3291959.
"
"ea9774f689a36e967c481c56999075671d2463b7","2011-04-24 22:45:36-04:00","GUI: Add basic validity check to ThemeEngine::themeConfigParseHeader (workaround for #3103051)

When loading a corrupted zip, the data returned for THEMERC will be garbage, which will cause an assert in isspace() when trying to trim the data.
This checks that the first character of the header is in the range [0;127] and bails out if not.
"
"9d8874c7072709c3739efdad317454cdccf82683","2011-04-24 23:14:14-04:00","AUDIO: Cleanup MS IMA handling

- Split The Last Express' ADPCM to the engine. Using the MS IMA routine was really a hack.
- Fixed stereo MS IMA ADPCM, the old routine was completely wrong.
"
"1d58ccac8172d81c4e4a983e148ebd7929b9a5a5","2011-04-25 17:06:35+10:00","TSAGE: Combined the resource files into a single generic overall ResourceManager
"
"db24f1e068c2d4bcf6784a67f3caff0e72e9f5d2","2011-04-25 07:04:40+01:00","GROOVIE: fix for bug #3093310

Instead of crashing if the save game isn't writable, popup a
gui message and then skip
"
"d0142270b829a56f7c2c8d72ec5569da017ba4c4","2011-04-25 18:21:33+10:00","TSAGE: Added detection entry for Ringworld Demo
"
"a8115d4c00c27b9df7b314df898aaea7de438384","2011-04-25 11:22:18+02:00","WEBOS: Improved build system. Now supports 'release' and 'beta' packaging, supports a custom base package ID and automatically determines the app version by merging the ScummVM version and a specified package version.
"
"c68641584b8fb45d53307040f0b18d39fe42cf24","2011-04-25 19:39:45+10:00","TSAGE: Added framework for playing the Ringworld demo
"
"c17f200ccf70bc6c6d6762383197b19999175ccf","2011-04-25 20:11:12+10:00","TSAGE: Added new file for Ringworld Demo
"
"55650f364cdf9d0b0ff36479dba0e599004e10ca","2011-04-24 23:53:24-04:00","COMMON: Add proper error handling to the ZipArchive class

- Add check in listMembers and skip files that can't be enumerated.
- Add checks for all function calls in createReadStreamForMember (and no longer return a stream from an uninitialized buffer when the file cannot be read).
"
"836f99e2ef04a2b35846ef0e9ff5781652b3c295","2011-04-25 21:41:13+10:00","TSAGE: Bugfixes for Ringworld demo - demo is now completable with some remaining gfx glitches
"
"aaff18cd3853011c3504e3b96ad69c92d2488de1","2011-04-25 22:10:27+10:00","TSAGE: Fix text not being skippable in Scene #5000
"
"6959ee22e4451bca5d15141028777e4d63377401","2011-04-25 14:28:19+02:00","HUGO: Fix bug #3292400 : Overlapping help windows when using the menu bar
"
"aee0fa34bf5ea2ce474a2ae67f7722df4929d4a5","2011-04-25 15:26:23+02:00","BASE: Remove unused variable in DO_OPTION_INT.
"
"33a88e5cacb35e04c947abe38565423544605fcf","2011-04-25 15:45:05+02:00","PNG: This PNG::getPalette.

Formerly the palette parameter was a value copy, which was assigned in
getPalette. That did not make much sense, thus I changed it to be a reference.
Since I am not quite sure whether this really shouldn't make a palette copy
I added an TODO comment about it.
"
"98affc01a6f5cce4ce4db2a164c3972203e7a068","2011-04-25 15:50:41+02:00","TSAGE: Add virtual destructor to Game class.
"
"c9c6d01d368dea8f2b40d5a2043e8d06918fae75","2011-04-25 20:25:53+02:00","HUGO: Fix bug #3292382 : 'Whodunit? & Jungle of Doom set music to off by itself'
"
"34ec9f6439f7cd0b5e23a209d01629d27197f928","2011-04-25 20:29:09+02:00","GUI: Make git revision string fit in the modern theme's launcher again.
"
"3d83a7882f0045959ae46dea4e212ff8c4b8919e","2011-04-25 12:40:01-07:00","Merged pull request #27 from kayahr/build.

WEBOS: Improved build system
"
"3587c3fd8ffb7a2dfde36f46b6bf9f1d30520af0","2011-04-25 12:45:13-07:00","Merged pull request #24 from clone2727/msima-stereo-fix.

AUDIO: Cleanup MS IMA handling
"
"25d97593c50ae88ce1b62f7338233cb478c3160c","2011-04-25 12:46:39-07:00","Merged pull request #25 from Littleboy/corrupted_theme.

ZipArchive and corrupted themes
"
"4b0bf07099e0e9272f433fcb09f731e1f99504fb","2011-04-25 23:00:44+01:00","I18N: Update Norwegian Nynorsk and Bokmaal translations.
"
"ff0f391a9cc90fa4600cc5c20935fb91e7bfaac5","2011-04-25 23:03:00+01:00","I18N: Update translations data file.
"
"09bf964807d35328a073fad3942a3e89f84c1ea6","2011-04-26 00:10:08+02:00","HUGO: Add workaround for bug #3292389: Penelope splits up when dying in chasm
"
"8fddf47e8ca5991b105d748304b64bf32c81c6de","2011-04-26 09:25:25+10:00","TSAGE: Implemented scene priority changes introduced in Ringworld CD & Floppy Demo #2
"
"42a0ebc5ff2042db92bd4551ef6afaab306ba662","2011-04-26 09:48:39+10:00","TSAGE: Gave proper names to several previously unnamed fields
"
"6839e4342ff8ad08a340353b28c34a6544786098","2011-04-26 14:40:30+10:00","TSAGE: Implemented loading walk regions for Ringworld CD and Demo #2
"
"b06f81b4bc63dfe3a5a7f2cb81b3e13620bc61a4","2011-04-26 08:21:18+02:00","TSAGE: Fix a tiny bug in the initialization of scene 5000
"
"ce704575a937d6f8b4b15af9d116c71019410748","2011-04-26 02:09:21+03:00","SCI: Updated the view type descriptions in the 'version' console command
"
"f752b1b2fcb5df46971b88eeba92f89b5aa880a1","2011-04-26 03:13:01+03:00","SCI: Fixed several uninitialized variable script bugs in Hoyle 4 Bridge

This fixes bug #3292332, along with other related issues
"
"1ba3d462d29494d8c831a594023f71e1d9ce73b8","2011-04-26 12:55:06+03:00","SCI: Fixed 2 script bugs in Hoyle 4 - hearts

This fixes bug #3292333 - 'HOYLE4: Hearts bug'
"
"759cac0abc94f4ffab09c229d0218d6a89403d5b","2011-04-26 14:24:38+02:00","GUI: Fix warning on systems where char is unsigned
"
"c24d388468fff09509965c603cc73c49520594fd","2011-04-26 18:23:43+03:00","SCI: Fixed script bug #3292251 - 'SCI: QFG3: Script error when buying robe'
"
"14865cbf9c2ffd56a450f941bcecee43dfd70d93","2011-04-26 19:08:02+03:00","SCI: Fixed script bug #3292334 - 'HOYLE4: Gin Rummy bug'
"
"78725365c50805b06fe627a7d23be70e26518c78","2011-04-26 17:12:25-04:00","SCUMM: Begin work on the soccer u32 code

Players no longer appear in the upper-left corner of the screen and play can actually hault now (ie. the ball can go out of play). The players/ball do not move from their positions yet, but it's a start.
"
"68d0602b0dc49f0ca1c3561613dc868ef5a94f93","2011-04-26 17:32:34-04:00","SCUMM: Avoid long double usage
"
"d418cd0fd7ebc3847fcf7097281bb1580324295c","2011-04-26 22:31:37-04:00","TOOLS: Add virtual keyboard feature selection to create_project
"
"ae9e9a89bd399ea7f722c3d12ff85bd355ce5370","2011-04-27 14:44:25+10:00","Add Inno Setup installer script for Windows builds
"
"716c74e3b095ed661be2fe8939c616668a960714","2011-04-27 08:03:27+02:00","TsAGE: Add some comment and fix 2 crashes in scene 5100
"
"bc0e373da88155e6fe694ff727ca430a40081c88","2011-04-27 11:31:52+02:00","DETECTOR: Reserve 16 bits for generic ADGameFlags
"
"d28344bb55b836d477e02ad670fba3193dc17490","2011-04-27 13:12:05+03:00","SCI: Removed unused variables

Thanks to LordHoto and the trusty -Wunused-but-set-variable option :)
"
"c06dd901420fa9aebfb14a26b47e241910a7778b","2011-04-27 13:12:40+03:00","SAGA: Removed unused variables

Thanks to LordHoto and the trusty -Wunused-but-set-variable option :)
"
"3ab0a133b3fca2e9e28be9d9d6d6efd3a4c2cb88","2011-04-27 13:29:51+03:00","SCUMM: Fixed compilation with MSVC

Both double and float parameters were passed to atan2(), which didn't match
any variants of atan2()
"
"99e30284593a58fb95edf35a74b5ba2374b485e3","2011-04-27 13:43:03+03:00","PNG: Improved code readability a bit
"
"27e4a1dee524fb4979a3ba2430b6c82d486be853","2011-04-27 13:44:19+03:00","PNG: Changed getPalette() to properly return a copy of the image palette
"
"f584f2f3120c33492ba0309bde33a1b4c473c1e1","2011-04-27 10:08:40-04:00","SCUMM: Implement soccer u32 opcodes 1013, 1019, 1020, and 1021
"
"58d8f8c932d7353c819fadb99bbe92f4d4545ca6","2011-04-27 20:39:48+02:00","TsAGE: Fix dialog bug in scene 4150 (thanks [Md5] for reporting it)
"
"15f2487244baba2c6ba51803ad60a8afb0124492","2011-04-27 20:37:42+01:00","I18N: Update Spanish translation.
"
"836ca2b4e2ed1f8eb03cdbbe65e0385717bb0fec","2011-04-27 20:40:30+01:00","I18N: Update translations data file.
"
"606f3fd855724c568ae13bc94d4fef09fa085f21","2011-04-27 20:42:27+01:00","CREDITS: Remove nickname for Spanish translator.

He asked me to keep only his full name and remove the nickname.
"
"595570a117de6024f8fd89462d3e52c8d18826ef","2011-04-27 22:22:54+02:00","TSAGE: Fix 'map' bug in scene 4050. Thanks MD5 for reporting it.
"
"c76502fe1174d5e75e4ba5b2575000c0cb6305d8","2011-04-27 23:52:20+03:00","TSAGE: Added temporary fix for some saved games (e.g. scenes 4050 and 5000)
"
"801c27bd224f20370e152372941510964a85a6c3","2011-04-27 17:00:38-04:00","TOOLS: Exclude .o files from projects files generated by create_project
"
"a38377c226c21a7746b8427058cfc8cf57d79bba","2011-04-28 00:20:01+03:00","TSAGE: Fixed assert after loading a game in scene 5000 and changing scene
"
"c371d0153a519326fbaaf1281a2e6f3170344780","2011-04-28 02:27:42+03:00","TSAGE: Fixed 2 script logic bugs (scene 5100, 5300) and two typos

These fix the following issues:
- Loss of control after freeing the bat in scene 5100
- Loss of control after drinking from the bat's pheromonone bottle in
scene 5300
- Crash when the two flesheaters appear on the path in scene 5300
"
"1331c998e35a91b94c6c54cfc5d0eb2adf0eb028","2011-04-27 20:06:13-04:00","SCUMM: Add separate game id's for soccermls and soccer2004

There are subtle differences in their u32 code that we need to handle
"
"af28efae4191a3885b2a19a9fe8a4c34f242985b","2011-04-27 20:09:00-04:00","SCUMM: Fix differences in soccer's u32 op_1011
"
"5654e1257551bf176c7fd06c756612bec3d79033","2011-04-28 04:13:44+03:00","SCI: Added a more specific workaround for bug #3267956. This fixes bug #3291115 - 'KQ6: Game freezes when getting paper from web'
"
"8e95310889f7a9c653f5297b9c856377efaa37ea","2011-04-28 08:17:10+02:00","TSAGE: Suppress the 2 workarounds previously added, use of a proper fix
"
"b95ea8dccde620b0a562ef654870b58a4a668b5d","2011-04-28 08:33:47+02:00","TSAGE: Fix a little bug in scene 5100, when looking at the speaking bat
"
"d855092f968c555cea4984e937d8badbbde9a50e","2011-04-28 10:21:26+03:00","SCI: Clarified comment in rev 5654e12

It's a bad idea to write comments when half asleep :P
"
"de531a39e0c6494a074913ae330dc0cfb47322b7","2011-04-28 10:56:57+02:00","NOHAWK: Add detection for Just Grandma and Me 1.0.
"
"80c90a569eb06f6a12ca0f0f256d0cbb028f19be","2011-04-28 19:14:37+10:00","TSAGE: Added code to handle visual differences in Demo help dialog
"
"cd6ee0589d0556d3d9e81d835c8b900636083de5","2011-04-25 22:29:26+03:00","JANITORIAL: Format forward declarations to follow convention
"
"3e01d35281c2a279ed3ad6873c87cddddb926a36","2011-04-25 22:29:26+03:00","JANITORIAL: Format more forward declarations to follow convention
"
"9f74a6eda2355bb09b9b963be41509ed67016a6c","2011-04-28 12:00:27+02:00","SCI: Clarify comment from rev 5654e12 further
"
"1651ac8ca2548a8f81af975d20894498008edf99","2011-04-28 20:39:09+10:00","TSAGE: Proper bugfix for problem saving/restoring game in Scene #5000 and others
"
"13efaff2ad15e6cef488d14a274a1d7b679e3adf","2011-04-28 20:40:08+10:00","TSAGE: Proper setting of startup cursor for full game versus demo
"
"4924c12b854d84aca57f1d0921ba1d2cc4abbb67","2011-04-28 21:02:35+10:00","TINSEL: Fixed code analysis warnings in bug #3087863
"
"845db59e088796df6628fcadb263ddc75f00f691","2011-04-28 14:04:58+03:00","VIDEO: Fix incorrect, renamed, guard for TrueMotion1 support
"
"9414d7a6e287ff8abfb5746b564e92c8f0e6de58","2011-04-24 11:34:27+03:00","JANITORIAL: Reduce header dependencies in shared code

Some backends may break as I only compiled SDL
"
"0c0dde62b91dfd0dc57cbe27621e70dba62fcdf5","2011-04-28 22:15:28+10:00","TSAGE: Slowed down Scene #6100 to a reasonable speed, and finished code for hitting sunflowers
"
"c6fa23a3d1af0256b43503439abe5c0083c03cfd","2011-04-28 22:32:12+10:00","JANITORIAL: Add in necessary include files to fix compilation in MSVC
"
"7d03da14cb621f60c610a752b676c9c2b32e00b0","2011-04-28 15:39:17+02:00","KYRA: Clean up of header includes.
"
"05bcfd512f1415000241b3427fed689c0d3f9914","2011-04-28 15:54:14+02:00","TSAGE: Don't use NULL for an int parameter
"
"a0fc266c82f89fe09b410d3e2c75706d43efd5a4","2011-04-28 15:55:41+02:00","MACOSX: Fix compilation
"
"7f889c61011e0d780e190e5aecdb4c157862560c","2011-04-28 16:42:16+02:00","CREATE_PROJECT: Get rid of variadic macro usage.

Variadic macros are C99 and ugly in C++. If we would want to do it differently
we should rather rely on C++0x's initializer lists. But since we cannot assume
all compilers we want create_project to build support that we cannot do that.
"
"78a0db127ab5ccbe53adf86dde1f040364ad3282","2011-04-28 16:45:54+02:00","CREATE_PROJECT: Add a FIXME related to our warning lists.
"
"781e178df3c71441adf96c15c92edad6eab2b59d","2011-04-28 17:06:03+03:00","TOON: Reduced fragmentation by using a fixed value for pathfinding allocation

Toon makes some rather big allocations for pathfinding, alternating between 3MB and 6MB). In small devices, this creates really bad fragmentation which can cause crashes. I set the size at a fixed 6MB.
"
"1279264c373ad7f84a1a500ab9514e16847f1812","2011-04-28 17:44:17+02:00","CREATE_PROJECT: Replace macros by proper functions/methods.
"
"9fb92f4b7ebbedbe6f853be2b9117714506f23a7","2011-04-28 18:16:01+02:00","KYRA: Fix compilation when LoL is disabled.
"
"3f7d45770ee985b9f1c7b1ff02ed0f498b3f0693","2011-04-28 19:51:22+03:00","WII: Fix compilation
"
"ae1047257515aed03332bb3b2570120e7ded6627","2011-04-28 19:54:45+03:00","GPH: Fix compilation
"
"a88e355b2d53a0561ba42169e06f9a786fa7c040","2011-04-28 19:58:45+03:00","COMMON: Fix compilation on backends that USE_RGB_COLOR
"
"c46e4a47f23f98022722f64a7b3bfbb0e0f0256d","2011-04-28 20:00:19+03:00","VIDEO: Fix compilation on SCUMM_BIG_ENDIAN backends
"
"1b681e85a8a0345d0ce848a7584a7654ad629f07","2011-04-28 20:05:01+03:00","ANDROID: Fix compilation
"
"130d96e36017a78f3f5f413fccf97006f6819280","2011-04-28 20:07:43+03:00","PSP: Fix compilation
"
"81e3f6f02738d94f1f42c5702e3965e41b1d9a35","2011-04-28 20:24:24+03:00","MOHAWK: Fix compilation
"
"42c8737411b16cb40335c41bb60ebd84d69e840e","2011-04-28 20:27:16+03:00","KOM: Delete engine added accidentally. The world is not ready for it
"
"52c0b2e28c85658d0ae2d2522e6e2d02c4db8796","2011-04-28 20:53:01+03:00","ANDROID: Another attempt at compilation fix
"
"1a7e84f376bc44d9435bfb2930dcd421ea6172ca","2011-04-28 20:55:00+03:00","DC: Fix compilation
"
"8feac89bc7329f002d3c4beba370d9c6ea05e798","2011-04-28 20:02:01+02:00","ANDROID: Fix compilation some more
"
"ca236589082bd3e748610f101f54de26eb90ebd9","2011-04-28 21:03:12+03:00","MOHAWK: Fix compilation when only default engines are enabled
"
"bf159468164076282bf0f59b7d8f16a23c98cfc2","2011-04-28 21:05:40+03:00","MOHAWK: Remove duplicate #include
"
"a05e2b0f435f0f874b63d7c3aa22e0482bdb8772","2011-04-28 20:07:37+02:00","ANDROID: Fix compilation harder
"
"f484ec302acd9d88df412d359875ac19b85210c6","2011-04-28 20:07:57+02:00","ARM: Fix compilation really hard
"
"6f9c56c63d8acbb97a8866c299a0deb84cc8cf88","2011-04-28 21:35:44+03:00","TEEN: Fix incorrect keyword in forward declaration
"
"e52d54b55e0c79a83c0a47b139b3b588ce8dd0c4","2011-04-28 22:19:35+03:00","NDS: Fix compilation
"
"4d485fc7413544e51d7e00fd837e7b46b2e5962b","2011-04-28 23:11:26+03:00","BACKENDS: Fix compilation for various backends

Affects:
* PS2
* GPH
* ELF
* MOTO
* IPHONE
* N64
* DINGUX
* WINCE
* PSP
"
"46cb9c785bfe12b95d06e1d2fc1eac05db332c55","2011-04-28 23:59:22+03:00","JANITORIAL: Yet another attempt at fixing compilation
"
"6e0b35806db1754bebcf08c3d2a221b50b44dec6","2011-04-29 00:53:50+03:00","TSAGE: Fixed 2 bugs in scene 5200 (flesheater throne room)
"
"57578c302f90024a26661da5ded366a93f2bdde1","2011-04-28 23:47:30+01:00","BACKENDS: Fix compilation on ports using Virtual Keyboard.
"
"7046e0951370eb907f4d11ecc6bb1b48424ef8bb","2011-04-29 01:06:41+02:00","TSAGE: Fix bug in scene 4025 'The comet is turn in the wrong sense, screwing the palette animation'
"
"89362b5af4a4ebd9430f2a5a1179e8ef171cf0c3","2011-04-29 02:27:29+03:00","TSAGE: Added two temporary hacks for scenes 5100 and 5200 and added some comments

With these two hacks, it's possible to progress a bit further
"
"6d05012bda9fe3529209a6584db14d9942972043","2011-04-29 03:06:15+03:00","SCI: Fixed bug #3289744 - 'Hero Quest 1 demo crashes'
"
"8d2189f1bbefc583567b1a4a2f9833644eeb480e","2011-04-29 01:54:15+01:00","WINCE: Fix Mixer Compilation after header changes.
"
"d5207ed6eada110c13309fa6bffb178f41c1d365","2011-04-29 11:47:49+02:00","fix AmigaOS 4 build (thanks to Raziel^)
"
"2fd2247ab8045f2e565c2b54e18edcb758834160","2011-04-29 12:51:33+02:00","WEBOS: Tweak configure script to simplify support for WebOS on buildbot
"
"cc9ffb58faa4a34228dd12826989e74804269b10","2011-04-29 12:53:58+02:00","BACKENDS: Fix compilation of keymapper code
"
"5dd3c24238f2a8f2b2cc489d986b7554ff5c9b8c","2011-04-29 12:58:01+02:00","BACKENDS: Really fix keymapper
"
"79b45cf53500297e1365d78612ce7e4d1d18e204","2011-04-29 14:05:21+03:00","AMIGAOS: Fix CAMD compiler warning
"
"7f74c477c62ea63ebce7c27b2c8068263fa14b47","2011-04-29 13:15:54+02:00","BACKENDS: Really *really* fix keymapper code
"
"dbca3045cdb52a0b6b8146405bf2db865899a20f","2011-04-29 13:16:02+02:00","WEBOS: Fix compilation
"
"6d0451105b2268431b31de3dd503795644c7ca71","2011-04-29 12:51:57+01:00","OSYSTEM: Clarify doc for getGraphicsMode()
"
"b3e1329cb3f750adfec76478b099d183a11df5b8","2011-04-29 22:13:51+10:00","TSAGE: Bugfix in Scene #2320 for getting the flycycle
"
"35d44737ac37f71a9e973e4d3d3dc14651050b7f","2011-04-29 22:55:17+10:00","TSAGE: Proper bugfix for the route used in Scene #5100 to escape the caves
"
"77db46ad339d6a4f0ad2d02217c103051565006c","2011-04-29 16:14:07+03:00","TSAGE: Fixed saved game ordering in the save and load dialogs
"
"beb77e3ee6fc46dadf70abb64ad796924daeb4f2","2011-04-29 23:30:55+10:00","TSAGE: Bugfix for Scene #2320 after having returned from caves
"
"55316e4aebd6dae13d6cdef96460daede49d2fd0","2011-04-29 17:12:08+03:00","TSAGE: Fixed the book inside the sky lab (it contains the sheet of paper, not the key)
"
"22c74bf23ec24ed5d5b881f093eb732eb61c60e2","2011-04-29 22:22:58+02:00","DC: Aesthetical improvements to plugin loader
"
"c3463e77d2d7453e15c703a15df6e44745c7b6b4","2011-04-29 22:25:09+02:00","DC: Create a 'dcdist' target for buildbot

The 'dcdist' target creates the directory dcdist/scummvm and copies
relevant files from the nightly build into it.  This is is they do
not have to be enumerated in the buildbot configuration.
"
"2bd4c3c38cc9d5c9337d35d972e53d4b78effc14","2011-04-29 16:55:23+02:00","TSAGE: Fix bug in scene 4050: The rope may now be used to climb too
"
"67c83ffffa55a11be076fea0ea11ae28b044600e","2011-04-30 00:21:23+02:00","TSAGE: Fix a couple of big graphical glitches in scene 2100
"
"410367ced003c53c2df5ebc7b2eee7b63c7f453b","2011-04-30 14:58:11+10:00","TSAGE: Reintroduced the show introduction code using a ConfMan flag
"
"5cbf6347d1af9aaf58a0aea1bd656e5813885a3a","2011-04-30 16:31:09+10:00","TSAGE: Fixed problem in pathfinding when clicked position is outside walkable areas
"
"e5698d123d8c40aa43ca095d0d191b4c8af786fa","2011-04-30 16:35:17+10:00","TSAGE: Removed hack from Scene #5200 now that pathfinding has been fixed
"
"9fc1ed2c6059e68ebf857a646b767de7811e0f00","2011-04-30 16:40:01+10:00","TSAGE: Added a print out of region details to the walk_regions debugger command
"
"c08fc15cbef49d61dbed3ad78515ea9ca6fbdb80","2011-04-30 16:40:40+10:00","TSAGE: Fix for GUI dialog appearing when clicking on some hotspots in Scene #5200
"
"a77164e9b9e619486e027923a95a05fe3d7bed00","2011-04-30 09:26:23+02:00","TSAGE: Fix some more bugs in scene 2100. It's now playable again
"
"a9652ab936eba0b9a3a31a6da219807c38752b66","2011-04-30 17:51:20+10:00","TSAGE: Fix a hotspot's use/look descriptions in Scene #7700
"
"849094c884e889ad8395677101f320b3e1e7cd6d","2011-04-30 10:13:35+02:00","TSAGE: Rename setPriority2 to setPriority for disambiguation
"
"712c3bc201de28dc202c0c4141c9ac3223293086","2011-04-30 11:07:22+02:00","MOHAWK: Fix CSTime-only builds.
"
"6abcefb679a1ac72fcf772abc1791febeb9274a4","2011-04-30 19:46:40+10:00","TSAGE: Bugfixes for stool in Scene #7700
"
"9f37451e014e7f0312051f20196facd10a9e1ce6","2011-04-30 20:24:39+10:00","TSAGE: Bugfixes for getting the key, opening the safe, and getting the translator
"
"d673fbc6a84358840d5f91774aea9fe48b4477f6","2011-04-30 20:38:41+10:00","TSAGE: Silenced compiler warnings
"
"78f202826b867503b0bc38602b268b39be090857","2011-04-30 16:57:09+02:00","TSAGE: Fix bug in scene 2100: Now the sunflower field is reachable
"
"96965b4896a15aca8a26f2b517b8a634738aa0de","2011-04-30 18:12:50+01:00","PARALLACTION: Fix BRA Compilation After Common Header Changes.
"
"54ddd000dcbe43f4b58d30b6b7e98775233bff01","2011-04-30 22:00:17+02:00","AmigaOS4: Adapt configure to latest SDK (Patch created by Raziel^)
"
"4ac0e73907a9e7a0f82f1dbc65e5a53014b2a953","2011-05-01 01:08:46+02:00","TSAGE: Fix several glitches and bugs in scene 7000
"
"de592e07f33ff8d29110ec6d592b8d6171875969","2011-05-01 10:35:03+10:00","TSAGE: Bugfixes for inventory dialog display with a large number of items
"
"b08d1660d9627ff8fda57f3fa029ac7a484cea76","2011-05-01 11:06:19+10:00","TSAGE: Fix for interacting with Skeenar in Scene #7000
"
"69dcca74da1364706fe0b0d3495c12f9fc2c720a","2011-05-01 03:23:39+02:00","CONFIGURE: Remove incorrect '+' added with 54ddd000dc.
"
"bee92b30f76b392455a9cff0f6f979ae9c792814","2011-05-01 12:25:58+10:00","TSAGE: Fix giving Translator, Jar, and Waldos in Scene #7000
"
"dedc12a1988cea7b1d12f92aa76d5e5cb07944e5","2011-05-01 13:37:14+10:00","TSAGE: Fix for animation of Skeenar presenting the stasis box in Scene #7000
"
"9585aa24f5d97ded4bc97fcdd9a116acbd0fb562","2011-05-01 13:45:17+10:00","TSAGE: Give player the correct stasis box from Skeenar in Scene #7000
"
"831f974cb42c5993ec66d785858e5bd962f2b864","2011-05-01 11:12:51+02:00","WEBOS: Added compiler options that should enable support for the Palm Pixi. Can't test it because I have no Pixi but at least it still works on the Pre.
"
"77161e231a047da4e9f9dc5912bed28729e8d87d","2011-05-01 20:36:06+10:00","TSAGE: Fixed NamedHotspot fields to be synchronised to savegames
"
"e1d6b9602c1519bb17386771f1ac5b3cb32e847f","2011-05-01 20:37:10+10:00","TSAGE: Bugfixes for movement in Scene #9100
"
"6d8d9a45283a68a45f1a1830ebceb09b043551b9","2011-05-01 20:51:03+10:00","TSAGE: Fix timing delay when clicking to remove on-screen messages early

This fixes a problem with the text being removed, but the game still waiting for the original period until doing another action
"
"d876e0f31176f5904d33d27c77f274d1dd091e95","2011-05-01 21:15:13+10:00","TSAGE: Bugfix for having eagle fly away in Scene #9150
"
"40df14a7558728019e9755bce57ddd7fd0ab877e","2011-05-01 14:43:36+03:00","RELEASE: Tag branch-1-3-0 and set version
"
