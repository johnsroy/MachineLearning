"commit id","commit date","commit message"
"757a28909cde5674fa8b8902f93cb2443a12e362","2009-01-19 21:44:21+00:00","Update news

svn-id: r35926
"
"98ba7247b1a72269f0aa5dd724f95110468f2bd5","2009-01-19 21:44:58+00:00","This is 0.14.0svn

svn-id: r35927
"
"017b39eae0891c485671f52d53b5a60ac1dff195","2009-01-19 23:35:27+00:00","LOL: some work on the music handling

svn-id: r35929
"
"57d118e9308137c62a6023323d5df9be6a429469","2009-01-19 23:57:49+00:00","Added ISO9660/Joliet DVD support

svn-id: r35930
"
"a27e456ace3d8e6a2bc080a6282c781989b609b0","2009-01-20 00:03:35+00:00","Some basic work on the vkeybd code

svn-id: r35931
"
"85d40630004d5a615a7708d76f99d4507886c396","2009-01-20 00:33:26+00:00","Some WIP code for the kSupportsLoadingDuringStartup engine feature

svn-id: r35932
"
"f60e2836b05c922b2ae89b121b4f23fea60de3fc","2009-01-20 02:54:30+00:00","Fixed warnings (nice example of why heeding warnings is useful: one of the changes seems to fix a NULL deref)

svn-id: r35933
"
"c77ecdc0500d424a5a12c95561fbee811e9ee870","2009-01-20 02:56:32+00:00","Fix another warning

svn-id: r35934
"
"6a999bdc055028d077ecfdac6eb5059ea8114314","2009-01-20 05:43:57+00:00","Fix bug #2522556 - FEEBLE: Cutscene not found, Crash.

svn-id: r35935
"
"87d2d96d91e5ad40c0a225eb61d2f44ef44558e6","2009-01-20 09:22:16+00:00","- Moved some script related code to script_lol.cpp
- Renamed opcodes from o2_* to olol_*

svn-id: r35938
"
"6d2278fb81e902137b3ba33ca32fa8ddbe99421b","2009-01-20 09:30:20+00:00","- Fixed formatting
- Added FIXME about falling through case blocks

svn-id: r35940
"
"f3a18d6da5eca8d00163e947f7f8be9f8d0d83b7","2009-01-20 09:30:41+00:00","Re-encoding the cutscenes in The Feebles Files is no longer required.

svn-id: r35941
"
"bcae0570a6dcea636092bb24b090530741c68fb2","2009-01-20 09:32:43+00:00","Yet another two small formatting fixes.

svn-id: r35942
"
"577c8ff27d20a91d7774328af787ed6d7d4fc855","2009-01-20 09:38:55+00:00","Cleanup.

svn-id: r35943
"
"3e611e1eb79dad1b3a2213446df42261d5b5bf71","2009-01-20 10:39:16+00:00","Adapted fixed-sized arrays to cope with the larger dialogues in BRA. Maybe they should be turned into dynamic data structures...

svn-id: r35944
"
"545b76876a6945d6951b5eb3db91997ea49a9acd","2009-01-20 11:07:27+00:00","Character is now placed at the right spot when a new location is entered. Size may be still not right, though.

svn-id: r35945
"
"9b116c81c511bcd78771c8a540051c3193a21f7b","2009-01-20 11:20:52+00:00","Moved libdb to the right spot in the Makefile

svn-id: r35946
"
"c0cd121ffda81d2aa8a101f5781e765541c87ae4","2009-01-20 12:37:05+00:00","Fixed typo in comment.

svn-id: r35948
"
"cd952a7c2790725a495a0e1ff4c4b9b164dccd40","2009-01-20 12:44:44+00:00","Whoops it seems the comment used 'backslashes' instead of 'slashes' in other places too.

svn-id: r35949
"
"b2a9393eeebb5b24f1d70cf163c21ef9c0ccd4c5","2009-01-20 12:47:39+00:00","Replacement an immediate with the appropriate #define constant.

svn-id: r35950
"
"311b267863d6c0202e5723504e98aa78206763e2","2009-01-20 15:21:47+00:00","merge SurfaceKeyColored into Surface

svn-id: r35951
"
"15b3c680da7cef0490f6b737d70eebb737bf6619","2009-01-20 15:24:47+00:00","added ImageMan to vkeybd

svn-id: r35952
"
"089548fb817ef1a1d8110828e9e64642abdf1adf","2009-01-20 15:26:15+00:00","use Surface instead of SurfaceKeyColored

svn-id: r35953
"
"1e5165bd849e9a02475df8057e275001efc15317","2009-01-20 15:27:13+00:00","added proper ImageMan includes

svn-id: r35954
"
"60beb35a5af68d42e16dd65063b4b306c6ab78ad","2009-01-20 15:28:07+00:00","added the required XML header to vkeybd.zip

svn-id: r35955
"
"fbfec8e63e7d3fc3fdcf24afb04493872bb4b390","2009-01-20 16:00:36+00:00","protect all vkeybd code with ENABLE_VKEYBD

svn-id: r35956
"
"f67bb6c8f127a38efac71207542a0351b321e1b7","2009-01-20 16:13:08+00:00","fixed vkeybd.zip loading

svn-id: r35957
"
"cb8ffaf3a91780518bf3fcfe1f35d60b01f19a45","2009-01-20 17:30:23+00:00","Implemented loading from the command line and the GMM for tinsel (kSupportsLoadingDuringStartup)

svn-id: r35958
"
"496ab478a26742e49520d2c4ea8af068d1af8602","2009-01-20 17:38:48+00:00","Some formatting.

svn-id: r35959
"
"4c62af49c24a93704b32d9515609924a9499d987","2009-01-20 18:31:35+00:00","Removed ImageMan again, now the code uses Graphics::ImageDecoder directly.

svn-id: r35960
"
"94db14feccee8e17ce700c19459f08dc5e0113f6","2009-01-20 18:37:09+00:00","Whoops committed from the wrong directory. Removing ImageMan leftover.

svn-id: r35961
"
"79e4b6b2b2db45559fe6e5d7994b287219e80b25","2009-01-20 22:46:34+00:00","Changed configure to add ENABLE_VKEYBD and ENABLE_KEYMAPPER to DEFINES, instead of config.h

svn-id: r35962
"
"f8da825177a8554e46deed6008916819574bdbae","2009-01-20 22:49:59+00:00","Bypass copy protection screen completely in Waxworks, since copy protection is disabled in Good Old Games release.

svn-id: r35963
"
"c210b7187618111ee71c1f3d8404dc6ef23042e2","2009-01-20 22:52:29+00:00","Moved Surface::blit to backends/vkeybd/virtual-keyboard-gui.cpp

svn-id: r35965
"
"299736c9e11dfb84d84ba942e7b9982acc02cb14","2009-01-20 23:19:42+00:00","some code cleanup

svn-id: r35966
"
"7273d025288ee15df3c852999ec6a1f5a75dc246","2009-01-20 23:40:35+00:00","Implemented getDebugger()

svn-id: r35967
"
"71421c996641f4f14a1fe6ca661c4efe60f223cd","2009-01-20 23:50:07+00:00","Mention that kSupportsRTL is problematic in tinsel

svn-id: r35969
"
"9abce1b894b9b3b551fbae91395d0449f9aafa08","2009-01-21 01:26:04+00:00","Some cleanup / code simplification

svn-id: r35970
"
"250acd4c8d345301c1b7e831c3c0f485c77d8ac7","2009-01-21 02:02:55+00:00","more cleanup

svn-id: r35971
"
"99c6943e3d1ff16652e63fe999730ea0dbda2e8f","2009-01-21 02:07:23+00:00","Fix what I believe to be an error in Keymapper::cleanupGameKeymaps

svn-id: r35972
"
"b7f7a8c660a0a16addb84101f2b594eb4a0ac6e1","2009-01-21 02:11:25+00:00","Yet more cleanup

svn-id: r35973
"
"53cd1361c503fded70b9d1636c8dc4d6e54834e0","2009-01-21 02:23:09+00:00","Made Common::Stack return refs, thus ensuring that it matches exactly the behavior of FixedStack; added unit tests

svn-id: r35974
"
"edbf8c6720b3295224b7cdee368ee5582dd4c565","2009-01-21 02:28:14+00:00","Yet more cleanup

svn-id: r35975
"
"023fcd05a3e6e1b7087f4125789b482220225964","2009-01-21 04:03:22+00:00","cleanup

svn-id: r35976
"
"39e3c76436a8fd9dcdb9c3381f03b2559b96778c","2009-01-21 04:27:32+00:00","More cleanup

svn-id: r35977
"
"980917e54588f36be928a9ed32287c3cc4927783","2009-01-21 04:46:31+00:00","More cleanup of the DS port

svn-id: r35978
"
"ceefbd19b97fe50c2a3721c303fcd087f2762b5b","2009-01-21 15:23:30+00:00","Fixed vkbd drawing and GUI drawing on screen change while vkbd is shown.

svn-id: r35979
"
"d3fb5c1ecc9407c1ed70e2e54192a69189e92a4c","2009-01-21 15:36:31+00:00","Fixed GMM save/load functionallity in kyra1.

svn-id: r35980
"
"b50f5ebe9cfa4ede9500b98fbf769cff738dacee","2009-01-21 16:15:07+00:00","configure: changed order of backend detection and engine listing (backend detection may fail, e.g. when sdl-config is not found, while engine 'detection' never fails)

svn-id: r35982
"
"9a5ac6007f3734dee3038bfd02129d5fa44e5d33","2009-01-21 17:16:58+00:00","configure: changed 'Running on x86' to 'Compiling for x86'

svn-id: r35983
"
"c65e670295caa7fed756ed12fe2dbc02a14d191a","2009-01-21 19:11:47+00:00","added ENABLE_VKEYBD, ENABLE_KEYMAPPER (both not mapped yet) and ENABLE_AGI

svn-id: r35984
"
"e94378511e1bf3cc56318341d24776db817bf3e5","2009-01-21 19:29:02+00:00","made ISO9660 support optional via USE_WII_DI

svn-id: r35985
"
"248605800e97f75b2c048c4ed4200fa409df57be","2009-01-21 19:46:51+00:00","Don't allow the nul character in savegame names, since that terminates the
string. This happens, for instance, when pressing the Shift key. (I usually start
my savegame names with an upper-case letter, and I couldn't understand why it
didn't seem to register any of my keypresses.)

svn-id: r35986
"
"a2c671da977acda9f9503413fb38490dcceda76d","2009-01-21 20:00:26+00:00","Clear the list of savegames before re-populating it. Otherwise, even save names
that have been entered before cancelling the dialog will remain in it.

svn-id: r35987
"
"abc06ca18e69c336d701707933b4dc490dd86e94","2009-01-22 04:35:10+00:00","Moved Graphics::PixelFormat into its own header file; turned RGBToColor etc. into methods, and added an operator==

svn-id: r35993
"
"17f5d4eeea9b22e833b4f9fb2f7f2670af27b4fa","2009-01-22 04:45:19+00:00","Got rid of gBitFormat in thumbnail scaler code (and even simplified it in the process)

svn-id: r35994
"
"0034aa3b9c7a1f0123df9e809a6a5d0d58bd9bd1","2009-01-22 04:59:09+00:00","Got rid of several occurrences of gBitFormat

svn-id: r35995
"
"d5d7175691ea3cde7aa941886e3197763c1398c6","2009-01-22 06:41:57+00:00","Speed up HQ2x/HQ3x C versions by reordering tests in diffYUV: most likeliest to be taken now is first, least likely is last

svn-id: r35996
"
"5b8105afb3a345cfd66efa795726329f509572c3","2009-01-22 13:04:29+00:00","- Added support for The Manhole EGA version
- Support for 'chunked' picture resources and EGA pictures
- Improved the mouth sync in RtZ (still not perfect, though)
- Removed obsolete TODOs
- Fixed sfPlayMovie to return if the movie playback was aborted or not; this is used by RtZ to determine if it should display the credits screen after the intro movie

svn-id: r35997
"
"adf15c100765608a054143fdf0e1af98c077bd51","2009-01-22 15:53:05+00:00","Added an '!=' operator to PixelFormat.

svn-id: r35998
"
"d9cf723ee9911cd8a84baa5cc39fe39fffe5ff39","2009-01-22 16:56:22+00:00","Minor cleanup (got rid of a dynamic array).

svn-id: r35999
"
"6692330c41c7a38cf2e9b2044372b5eba8c0ea1e","2009-01-22 18:33:02+00:00","Fix warning

svn-id: r36000
"
"cc1efb91375ed9faeb270c82721bfcf16c58ffe8","2009-01-22 18:45:06+00:00","Fix buggy images in GUI when switching overlay mode (e.g. on Mac OS X when toggline full screen and windowed mode)

svn-id: r36001
"
"ba469d3cbb5d8d06c268e12599c28effae895f5c","2009-01-22 19:09:05+00:00","Silenced MSVC warnings

svn-id: r36002
"
"4e8b5b76d122bc4fd10817f66af881b59e4a941b","2009-01-22 20:36:47+00:00","Replace some binary names with $(EXECUTABLE)

svn-id: r36003
"
"2859b65ce26ffb337b59d1e30b9e6ef881f1ee33","2009-01-22 22:29:14+00:00","Fix the compilation of the Wii port

svn-id: r36004
"
"5a77895274e8e38b89c35714ba54e7350205345f","2009-01-22 22:56:31+00:00","Removed incorrect Common:: prefix from stuff that is not part of namespace Common

svn-id: r36005
"
"e260598bc9295d3c0ab6ea8eadc23a506e29af27","2009-01-22 23:03:12+00:00","Revert my previous commit. File still produces error  'wrapCompressedReadStream' is not a member of 'Common' with gcc 4.2.4, though

svn-id: r36006
"
"94bfe1aa6fc71872214784128461709a6e421eac","2009-01-22 23:14:16+00:00","Get rid of the wrappers around the zlib stream wrapper wrappers ;)

svn-id: r36007
"
"6f10ef21507946f2ca3687aae7b00963786cf429","2009-01-23 02:29:32+00:00","Made InitLUT use a PixelFormat instead of a ColorMask

svn-id: r36008
"
"83b3f336b4c4af45756c4986b3bab124dcd46c8c","2009-01-23 02:30:09+00:00","cleanup

svn-id: r36009
"
"4455a9fc2f3aaaf889450fdde3b11330c70afb70","2009-01-23 02:44:30+00:00","DS: Fix compilation

svn-id: r36010
"
"72702130d95477eb84904f22b0024ea30765922b","2009-01-23 03:06:21+00:00","DS: Apply an old cleanup patch of mine from last August

svn-id: r36011
"
"3e7155981e020bc19540abc8486b816cb57c8a41","2009-01-23 03:23:30+00:00","DS: Nothing is supposed to use time(), so don't globally include <time.h> -- in particular, no need to fake a time() impl if the only code using it is the backend itself ;)

svn-id: r36012
"
"e4b013f616818f6da4cf7a1896f31d1429ef8f04","2009-01-23 03:30:40+00:00","Renamed OSystem::openConfigFileForReading & openConfigFileForWriting to createConfigReadStream & createConfigWriteStream, in order to make it clear that the *caller* is responsible for deleting the streams (i.e., 'owns' them)

svn-id: r36013
"
"8f16458e9ba830fe80f177cc2fc3bcf2af84ebef","2009-01-23 03:41:36+00:00","Renamed FSNode::openForReading / openForWriting to createReadStream / createWriteStream, again to make ownership of the returned stream clear

svn-id: r36014
"
"a925b5e7b70493b797ce40a8338e6177c69b35ab","2009-01-23 03:48:04+00:00","Oops

svn-id: r36015
"
"8914ef89eaeedf8bd2f788d8ee136ed54b932546","2009-01-23 04:01:38+00:00","Remove last use of time() in AGOS engine.

svn-id: r36016
"
"c36eb092374dfdd5279fbf29c07540a9333bf163","2009-01-23 04:05:10+00:00","Remove unused shutdown() code.

svn-id: r36018
"
"d5c12447bd6240e842a61e3a9d1554c18b506475","2009-01-23 04:09:57+00:00","Trigger error in German versions of Elvira 1/2 and Waxworks, since we still lack the font table data.

svn-id: r36019
"
"9861afd8fde386ffc740ab12fad26f2d41213821","2009-01-23 04:36:18+00:00","Renamed ArchiveMember::open -> createReadStream, and made it a cv member (const); same for Archive::openFile

svn-id: r36020
"
"14c5bbbccf30f333b92092ca55063b338335c3a5","2009-01-23 04:45:44+00:00","Renamed Archive::openFile to createReadStreamForMember

svn-id: r36021
"
"2d866c0483231a4814c7a7e6c11f303a4dfe6af2","2009-01-23 04:57:18+00:00","Renamed Kyra's Resource::getFileStream to createReadStream

svn-id: r36022
"
"a8562cf64bbb1e023680a6e113b5140590546127","2009-01-23 12:17:12+00:00","- Implemented sfGetMusicBeat (used in several games as some kind of timer)

svn-id: r36023
"
"04517f17ad7752ad3273c08f230c0e4a8a245a9b","2009-01-23 22:05:40+00:00","Added some comments to hq2x/hq3x asm code

svn-id: r36024
"
"4d5702606f7eb4c62ee07587724c1f21873bc096","2009-01-23 22:56:14+00:00","Remark that the HQnx ASM code only works in 565 mode

svn-id: r36025
"
"5556fc7f72856fde1746c89792d97bd826da33a2","2009-01-23 23:50:54+00:00","Changed Graphics::ImageDecoder to allow custom PixelFormats

svn-id: r36026
"
"17b82253e9aeed06cbfb7051cb25ed6d0d2c4d88","2009-01-24 01:03:06+00:00","Removed leftover test code for MADE V1, used in Manhole EGA (though the sound effects in Manhole EGA are still not working)

svn-id: r36028
"
"de341291aa068d7ad2bb6e11c62b98f3e3120552","2009-01-24 01:23:04+00:00","remove 'HACK': don't use _cd.playing to indicate emulation

svn-id: r36029
"
"a8ae95cc10ce05329ca9d4c48fcfb06f615de58b","2009-01-24 01:29:52+00:00","fixing #2531282: don't fall back to a real audio CD when playing enhanced midi tracks

svn-id: r36030
"
"dfab0ee6d079b5c94ef5e87c062c96197d7ab3cc","2009-01-24 05:02:08+00:00","Initialize variables that might not be initialized but still used later on line 422 in a debug function call (Fixes MSVC's warnings about 'potentially uninitialized local variable').

svn-id: r36031
"
"75518d5a6ecaac63683434440ad2820864ef9903","2009-01-24 06:06:14+00:00","Update detection table with known file sizes.

svn-id: r36032
"
"ab5e3db9e3d1fae2abf97cf4770c8caab8ae81cc","2009-01-24 06:26:43+00:00","Moved 565 mode specific bits of HQ2x/HQ3x asm to 'variables'

svn-id: r36034
"
"2c11490d698d7fb065938fe5acfa3101f046f378","2009-01-24 12:26:14+00:00","pollCD() should only return true, if CD audio is actually playing.

svn-id: r36035
"
"8ff3f14e2909e71538a2ddec1572af1160501b16","2009-01-24 16:27:52+00:00","Fix for bug #2533091 'MAC: Cannot add games in the launcher in fullscreen mode'.

svn-id: r36036
"
"ae60d362c85a7cac0360904e97f95fcd154d80dd","2009-01-24 18:27:09+00:00","Remove the unused OSystem parameter of launcherDialog() (noticed by syke)

svn-id: r36038
"
"3c79c6229ca52d6e0ddd787861bdf4662a8dd1be","2009-01-24 19:19:24+00:00","fix near-infinite loop and segfault in ARM costume asm when len == 0 (should fix #2340221)

svn-id: r36039
"
"446c837bc7d9ba7e6e7dadaf046bb439a4dba990","2009-01-24 19:33:18+00:00","fix compilation

svn-id: r36040
"
"ab30f4417159a580e55030fe0ed9fc5963115ec9","2009-01-24 20:35:16+00:00","fix typo

svn-id: r36041
"
"454610ff5ac5d7cc4760e63ff2d96c09208148b0","2009-01-24 20:46:20+00:00","don't append '/' to path in getChildren()

svn-id: r36042
"
"e5feb689dfa8afc3d6af3ae6e66343cfc61b855c","2009-01-24 21:03:44+00:00","added detection entry for playable demo and some code differences

svn-id: r36044
"
"16e7a7cd30e3523a53c0038b4e04289e07424479","2009-01-24 23:06:58+00:00","Turned two vars of the HQ2x/HQ3x ASM implementation into global vars, to make it possible to adjust them for 555 vs. 565 mode (555 mode is still a bit buggy, due to the interpolation code they use)

svn-id: r36046
"
"b93db9f30f9dca7398f56c3be1a5f04cbdbd3e8d","2009-01-24 23:27:21+00:00","HQX: Removed some more branches (like in my previous commit) from interpolation macros (they are meant to speed up things, but in reality cause a slowdown -- branches are expensive on modern CPUs)

svn-id: r36047
"
"6297561f7caefe5a7f5bf65ec8ca5e3eaa87f2c4","2009-01-25 01:58:16+00:00","- Implemented sound decompression for Manhole EGA

svn-id: r36048
"
"dd586e0e209d60e15a1f061d1171f36e80a0f0a3","2009-01-25 04:29:25+00:00","Renamed lowBits -> kLowBitsMask and highBits -> kHighBitsMask

svn-id: r36049
"
"a27f4203e08dc9a3d9574c1cca73cd8cf280339a","2009-01-25 05:44:18+00:00","Minor cleanup and changed g_cruise to _vm for consistency

svn-id: r36050
"
"d3319ad6a8529683c00ce714e5dfa453bba4f1cb","2009-01-25 05:49:18+00:00","Introduced a static string list for language dependant strings, and changed the options and inventory menus to use it

svn-id: r36051
"
"7eff8a012b96bb3b7f6f3c9ec43302d6169d91ad","2009-01-25 05:56:04+00:00","Updated the MSVC projects with the new cruise/staticres file

svn-id: r36052
"
"908ed665098a610d19aacf179370d1f6bbcfe0c7","2009-01-25 09:06:46+00:00","fix compilation

svn-id: r36053
"
"ed0bca5b360f88f08a2f6b1a2b349d959a26d378","2009-01-25 09:13:23+00:00","Fixed compilation

svn-id: r36054
"
"e46c1100a04471546bc118895ea9e50fa7afc967","2009-01-25 09:37:53+00:00","Removed leftover debug code

svn-id: r36055
"
"3fb9e1e23a56c94368a570d93230f99ee7ef2a53","2009-01-25 10:16:00+00:00","Added some information on sfPlayNote, sfStopNote, sfPlayTele, sfStopTele

svn-id: r36056
"
"79709646fb8902cecea1d7433ec95991805b5dd9","2009-01-25 10:46:48+00:00","Added some unused opcodes in Rodney

svn-id: r36057
"
"a0824205afaac86bd69c6bf14e4e3d5238cbc48d","2009-01-25 11:02:34+00:00","some DW2 endian fixes

svn-id: r36058
"
"0a7b4fd14640fad30a94f165e749cf7c2967987b","2009-01-25 11:15:30+00:00","Fixed warning.

svn-id: r36059
"
"7f594fa21d820520f6e19559e5934bd495c96deb","2009-01-25 12:10:06+00:00","TUCKER: modified flic playback to make use of dirtyrects

svn-id: r36060
"
"4999677c579631cd54b4919a5766dcb8f2201366","2009-01-25 18:08:26+00:00","added a few more code differences, demo version is now completable

svn-id: r36063
"
"53c71f8e4db7989b40da991ac6c631f6ca91a276","2009-01-26 04:22:19+00:00","Add support for text compression in the AtariST version of Elvira 1.

svn-id: r36065
"
"52df26d4b2b6991dc8594dabc772e225a7811a97","2009-01-26 06:53:23+00:00","Implemented the Engine::getDebugger method

svn-id: r36068
"
"9b707ed951f9ffe4db07ce4fc6898c4bc17a390c","2009-01-26 07:10:41+00:00","Backport of bugfix for incorrect fight animation offset in French version

svn-id: r36070
"
"c2847572f1e6faca8983833a72d44e0cb962c13b","2009-01-26 09:22:43+00:00","Add German Atari ST version of Indiana Jones and the Last Crusade.

svn-id: r36072
"
"508f254ff7f962b01055bcd5cde23f43668016f2","2009-01-26 16:39:05+00:00","error out when no renderer was created due to unknown/unsupported PixelFormat

svn-id: r36074
"
"2042c6d5701e5bf9431f5886e5440f68d3e57d38","2009-01-26 16:45:21+00:00","Slightly improved interpolate32_1_1

svn-id: r36075
"
"80ba7ec844be2f2619b2854fce1cc393e341d37a","2009-01-26 17:37:59+00:00","made fix from r36039 more efficient

svn-id: r36076
"
"4098ff66aac1116f6447761eb695ef5fdb463aa6","2009-01-26 18:31:06+00:00","Removed use of LUT16to32 in HQx asm versions, replacing some MMX code with 'plain' x86 code. Advantage: got rid of a 256kb table (reduces cache load, so over here the code is about as fast as before; in particular, since the affected interpolators are not used that often, it seems). Moreover, the new code is more accurate than the old ASM code, which actually differed from what our C++ HQx did (sacrificing precision for speed, i.e., cheating ;-)

svn-id: r36078
"
"7a7cc77d0326dcb463700e360aeddbfae69d0f3a","2009-01-26 22:15:08+00:00","Correct md5 checksum for German Atari ST version of Indiana Jones and the Last Crusade.

svn-id: r36080
"
"ca730e8f7ee2865eba8fbdd35653936fcafb0559","2009-01-27 00:38:56+00:00","Allow quitting Simon 2 during the intro

svn-id: r36082
"
"c08cc29b965f31dd7c233714d0a052ab357c4bc5","2009-01-27 00:41:41+00:00","cleanup

svn-id: r36084
"
"8e447d1ee93d3238d35a665c5ec63671ed890210","2009-01-27 00:42:43+00:00","Extended makeWAVStream by a 'disposeAfterUse' param; changed makeWAVStream to directly return the AudioStream created by makeADPCMStream

svn-id: r36085
"
"153b32391faff822a657851e82b986dd6a340e12","2009-01-27 00:55:28+00:00","New code for interpolate32_1_1 overflowed in 565 mode, so reverting to the old code (with some variable name changes to match the other interpolators)

svn-id: r36086
"
"980970946854eee26b4576483c2dedc29e0177c8","2009-01-27 01:23:04+00:00","Speed up HQ2x/HQ3x C++ version a bit (about 20% faster with -O3 on my system)

svn-id: r36087
"
"97153f9c3b17bb603e7f51fd872b0633924d0fe1","2009-01-27 01:29:22+00:00","Removed interpolate16_2 and interpolate16_3

svn-id: r36088
"
"379fe274dfe713c508cff6908444ae87c722d124","2009-01-27 01:35:21+00:00","Replaced small lookup table in 2xsai by direct computation

svn-id: r36089
"
"e338205066c7d794973e8f31e943ac7d1339bdec","2009-01-27 01:46:29+00:00","Added new interpolate16_1_1_1_1 func, got rid of interpolate32_1_1_1_1

svn-id: r36090
"
"bce799366fe3784966db23f9201e02c6c3c95e80","2009-01-27 03:10:56+00:00","Fix regression, the original stream shouldn't be deleted.

svn-id: r36091
"
"82a741419728a7c908ee31709051e9a0de0daa10","2009-01-27 03:13:13+00:00","Fix regression, the original stream shouldn't be deleted, unless disposeAfterUse is set.

svn-id: r36092
"
"f002e06fe058c4c0fe11d44fc844f88ff90a389a","2009-01-27 03:21:05+00:00","Add looping support to makeVOCStream().

svn-id: r36093
"
"f9d0d2a44a726f417911adfb03aee9caf22adebf","2009-01-27 03:26:51+00:00","Add/Update comments.

svn-id: r36094
"
"6ef26264f46b26a2d479d6de2a91cbb19f415cfe","2009-01-27 10:27:07+00:00","Added a debug subcommand to enable a hotspot's position to be changed

svn-id: r36095
"
"13552cce55f6ccd09ac5e83c8a7dc3f2101dfa73","2009-01-27 11:46:54+00:00","Add support for looping ADPCM sounds. I'm also adding decoding of the 'standard' IMA ADPCM code (aka Intel DVI ADPCM). This is from Mohawk. ;)

svn-id: r36097
"
"34e76afb1636fec8ca668d4c238a4d4551f23622","2009-01-27 11:49:53+00:00","Remove leftover comments.

svn-id: r36098
"
"b6c17e396ba2dc1994c8f75105be5598cacafb59","2009-01-27 14:48:49+00:00","Re-enabled ASM versions of HQx scalers (oops)

svn-id: r36099
"
"a359f7c1da3e0b6dd08a7e7cb779c417ca5fd8f2","2009-01-27 17:08:09+00:00","Silence MSVC warnings

svn-id: r36100
"
"1d04e168aea927e142f297cced9a9189440c4883","2009-01-27 17:27:51+00:00","Fixed bug #2538838 - 'Wrong accented char. in italian fan version [Regression]'

svn-id: r36101
"
"fa71814c077a2c4ceb50f321e8951b7f17efaf99","2009-01-27 17:39:11+00:00","Proper fix for accented characters in the Italian version of ITE

svn-id: r36103
"
"4952dd6661d616feb6a8b26397e3845506af7aa7","2009-01-27 18:35:36+00:00","Disable autosave (fixes [2516389]).

svn-id: r36106
"
"8aa122b157cd4b767499d834208116df9c0cbfec","2009-01-27 18:43:00+00:00","Need graphics/colormasks.h for Graphics::createPixelFormat.

svn-id: r36108
"
"e5bff7bf9235330195b177f190f3c029ae7395d2","2009-01-27 19:58:30+00:00","typo

svn-id: r36109
"
"8cabfc677f5b1948313e7cc73c2f584c9fc59172","2009-01-27 19:59:50+00:00","remove _firstSlot offset from getSavegame*, fixing autosaves (#2537059)

svn-id: r36110
"
"c27c9c37b7548b785c38df8bfbd7437dc1a73bbd","2009-01-27 20:24:08+00:00","Protect save slot 0 from being overwritten and/or deleted by the GMM save/load menus

svn-id: r36112
"
"1c0d2c5ab958790565a82ebce2aeb747417c561a","2009-01-27 21:44:24+00:00","Fixed hq2x ASM scaler

svn-id: r36115
"
"b63d4a777df6d67850c01bd92a255895ca584b74","2009-01-28 10:08:42+00:00","Update Adventure Soft credits.

svn-id: r36119
"
"8315753ddaa9c6bbb26f22af5da4ee4ff1d77a66","2009-01-28 10:27:14+00:00","Bugfix to allow characters to start moving when some other object (such as a door) has marked part of the area the character is standing on as occupied

svn-id: r36120
"
"b866cf5d22a6663f6228e763d7e6f2e465d1ee80","2009-01-28 21:11:18+00:00","Silence GCC warning.

svn-id: r36122
"
"3f06e9c4eb9d5aadd7d00b9722ffa10d1ffa12c6","2009-01-28 21:43:26+00:00","fix #2543067 'crash on Bud Tucker in Double Trouble german version', don't copy rect if w or h <= 0

svn-id: r36123
"
"a0a82d911c77b63f2069dbc39ab26394fe4d377d","2009-01-28 23:29:19+00:00","T7G: start background music at start of input loop (0x0B). Should fix 2474078, but might break other things so I'm not going to backport it.

svn-id: r36125
"
"ac59693be26b4239aaaf380896a1e1b753172546","2009-01-29 05:26:12+00:00","A ton of code formatting fixes; also fixed warnings about single line loops like 'while(cond);' by inserting newlines

svn-id: r36127
"
"abc76c6ddc3b5fac0c6d7bb9600c5d2006476bd4","2009-01-29 17:43:55+00:00","cleanup

svn-id: r36128
"
"164a099c7fdf7dd64923a29eae5b42f27176a2fe","2009-01-29 21:31:44+00:00","restrict charwidth table patch to french version, should fix #2523924

svn-id: r36129
"
"7eaafd933f1abed7146a8099df3aac0ffc3aea9a","2009-01-29 22:09:06+00:00","Be paranoid about g_system being set

svn-id: r36131
"
"28cf213605ff916ddac62d6c07e02beb915a9a8f","2009-01-29 22:13:01+00:00","Moved AdvancedDetector from common/ to engines/

svn-id: r36132
"
"42b26e0f56752646f7396fbfdea2cf9bba3063ab","2009-01-30 01:15:17+00:00","cleanup

svn-id: r36133
"
"1d097d9791b99b78790d68133a4ecf07057a28e6","2009-01-30 01:17:12+00:00","Moved debug() etc. and special debug flag handling code to common/debug.*; also some tweaks to the code

svn-id: r36134
"
"c69ebfd798777fa5db487fe321af274d26baaf3b","2009-01-30 03:35:47+00:00","Moved default implementations for various OSystem methods into a new class BaseBackend

svn-id: r36135
"
"601175cb32de785bb3c49df713baa1480206ba74","2009-01-30 04:04:10+00:00","Reorder modules to fix linker issues when all engines are disabled (this order is weird, but for now seems to work)

svn-id: r36136
"
"4d87acf8b4a0abf8a9895298f2cfcfac7ee82aed","2009-01-30 04:07:41+00:00","AGOS: Added TODO about the possibility of using special debug levels

svn-id: r36137
"
"9861da62f049fcd3436df38ff06d8e8839dbfdab","2009-01-30 04:41:57+00:00","cleanup

svn-id: r36138
"
"de7c89e38143ccac34e5228d5591a2738f27a661","2009-01-30 04:42:30+00:00","Some work on the 'special debug levels' aka 'engine debug levels' code

svn-id: r36139
"
"76deee02d6b2638cd04be6cfb50aaf217b6252ee","2009-01-30 04:52:53+00:00","Some more 'special debug levels' tweaks

svn-id: r36140
"
"7b50c293e6c509142e204e1aa11d51204cda9073","2009-01-30 05:03:04+00:00","Switched special debug levels to using a hashmap internally

svn-id: r36141
"
"7cb437b56f95bff06b0c79be93cd619b95662346","2009-01-30 05:10:24+00:00","Renamed SpecialDebugLevel to DebugChannel

svn-id: r36142
"
"341bc64aaf5aebe299aa736f5584d647daa781a9","2009-01-30 05:25:17+00:00","do not include common/debug.h from common/util.h

svn-id: r36143
"
"26210ad9765f88bc023bdc493cc6e85ac7d6060b","2009-01-30 12:22:30+00:00","Bugfix to stop characters changing rooms if the entrance in the other room is blocked by another NPC

svn-id: r36144
"
"de8fa39b25df33b4a7777e9283d286b5178e0fa2","2009-01-30 14:26:34+00:00","Fix for bug #2548995: AmigaOS4: Compiler error (and taking care of some potential errors in WinCE & GP2x, too)

svn-id: r36146
"
"e21f5febdc66ae796a57bdd70fbea2eaf26e1f56","2009-01-30 15:41:23+00:00","Don't use g_engine to access the mixer

svn-id: r36147
"
"f465abb75d81a248e3c553aa5706031b52c7189d","2009-01-30 15:43:45+00:00","Removed unused area convolution code from VectorRenderer

svn-id: r36148
"
"716f88f57127e32916ce22f756b1a3f2d2eff9d6","2009-01-30 16:04:39+00:00","Avoid using g_engine if possible

svn-id: r36149
"
"f49e0667a4a2bfb55022705f58b4c2608d86b2b5","2009-01-30 16:16:52+00:00","Document OSystem::copyRectToOverlay params more explicitly (esp. the pitch param, which differs from that of copyRectToScreen)

svn-id: r36150
"
"e354c4b4f28ec5e67817fe3161ce163bd60e4748","2009-01-30 16:18:58+00:00","Got rid of VectorRenderer::surfacePitch() &  VectorRenderer::bytesPerPixel(): the latter was not used, for the former it is silly to go through a virtual method to compute that value; all in all, this code performs too many unnecessary divisions ;)

svn-id: r36151
"
"e7afcecda279ff06b375a826cd7e49441dd6cf7e","2009-01-30 16:23:41+00:00","Removed default implementations of OSystem::getOverlayHeight() and getOverlayWidth()

svn-id: r36152
"
"13c7397837a5cd5bbd8ebbefc84b11a2a01cc701","2009-01-31 01:58:10+00:00","Bugfix to properly have one NPC character move out of the way when two NPCs bump into each other

svn-id: r36153
"
"7cab9115329e60c7ed16d5288ed898d777410a04","2009-01-31 07:57:41+00:00","Disable the 'press c for credits' hotkey (which wasn't in the original anyway)
because of strange rumors about the credits running spontaneously every few
minutes. I don't know if this is a temporary or permanent measure.

svn-id: r36155
"
"b2b37d3d67ab9cdadac416437c38529a26d201ca","2009-01-31 09:44:27+00:00","fixed invalid dirty rect for infobar ; added code difference in infobar display for DE version (tracker items #2523881,2523924)

svn-id: r36160
"
"31d40307bcc9d95c4caab2199293f6814812ea3c","2009-01-31 12:00:20+00:00","Fix for bug #2551436 'KYRA2: ScummVM quits after death'.

svn-id: r36161
"
"71dcc140f9e51ab1c6dc99bfd75223557e44cec3","2009-01-31 12:06:33+00:00","Fixed o2_loadSoundFile implementation.

svn-id: r36163
"
"e2baabcab918165e4fc09345ad48343111342ba8","2009-01-31 12:15:21+00:00","Enabled runtime save/loading from the GMM menu, and fixed launcher listing of savegames

svn-id: r36164
"
"f8963cf550abb6ece7e7c64976dbeabbcac735e0","2009-01-31 12:26:44+00:00","Disable GMM Save/Loading when a cut-scene is playing

svn-id: r36165
"
"20d1e78fa6e7471a3d7b381ea8b2086cbf7d69bb","2009-01-31 15:16:51+00:00","o2_loadSoundFile is a dummy for non DOS versions.

svn-id: r36168
"
"b1c58328a56a4e5e60e3f2034550bc96763f9c24","2009-02-01 09:05:23+00:00","T7G: revert r36125 until I figure out why it broke general midi music

svn-id: r36170
"
"6abcac40de30bb42a16899b0f0dd7f6332fa736f","2009-02-01 09:49:24+00:00","don't test existence of file in AmigaOSFilesystemNode::getChild (bug #2487481)

svn-id: r36171
"
"6438c40958a09561f785631d8a5dddf0a37f52d0","2009-02-01 11:56:12+00:00","T7G: Fix for 2474078 (hopefully). Check if volume has fallen to correct level at end of applyfading, in case it gets set to correct level during it.

svn-id: r36173
"
"f90e4545c27fa92cc6ba835f80551556929df43d","2009-02-01 14:56:19+00:00","Merged r36175 from branch-0-13-0:

Fixed alpha blending in the UI dialogs by adding alpha
computation to the blendPixelPtr() function.  To minimize
impact, pre-multiplied alpha is assumed, meaning that the
blending of the R, G and B components is the same both
with and without hardware alpha.

svn-id: r36177
"
"784c99b3dac507c5ee0686cc314c96caa7349ef3","2009-02-01 19:27:01+00:00","svn-id: r36178
"
"dda109ead30d3d97d1f69cb017d0a395dd2a9898","2009-02-01 19:53:12+00:00","Fixed compilation for now.

svn-id: r36179
"
"1626c624bacd688c2f7271945719611133e10a5d","2009-02-01 19:56:30+00:00","Fixed out of bounds memory access.

svn-id: r36180
"
"ce4c7f4a118f741021a81eb6fe2f6ffa8b9e509b","2009-02-01 20:11:05+00:00","Removed obsolete fixme.

svn-id: r36181
"
"68b7cb265d268bda7a78a69e4710f096660b66e5","2009-02-01 20:13:05+00:00","Oops removed accidently commited code.

svn-id: r36182
"
"90184e6812d25645c5e5c3218de8d2a2f77abe45","2009-02-01 20:21:01+00:00","Moved some code to newly added files sequences_lol.cpp (more static sequence code is coming up in the future anyway...)

svn-id: r36183
"
"574a7924df26d9ebb072c6cd582442f4e29a5213","2009-02-01 20:35:51+00:00","Implemented per voice volume control. (Used for example in LoL intro)

svn-id: r36184
"
"f1ebbebd7b8f7aa62256b08d73086df2f6b5cb28","2009-02-01 20:52:53+00:00","Silenced MSVC warning (MSVC is being silly here...)

svn-id: r36185
"
"1aa84d4b5e3662fbcc844fa6062adb8de42ef5d4","2009-02-01 20:53:30+00:00","- Fixed mismatching new[] / free.
- Fixed bad casting

svn-id: r36186
"
"4662333b81eb238daa96c69897e8f62635e132b3","2009-02-01 20:54:24+00:00","Oops wrong parameter in last commit.

svn-id: r36187
"
"2648f42fc56d5b5e4d2d2462f4874dca668dabf0","2009-02-01 20:55:16+00:00","Removed uneeded setupPrologueData calls.

svn-id: r36188
"
"aacaf0d41d520ed9316700afb6385ccd43b93a30","2009-02-01 21:06:02+00:00","Updated the kyra MSVC project files for the newly added files

svn-id: r36189
"
"8f91046af4d6056746d0dcbe92bfaa6c9349974f","2009-02-01 21:09:29+00:00","Updated the MSVC project files of the scummvm project with the latest changes to the files

svn-id: r36190
"
"9df7f7385cbde0b05931a7faafa10d65e615e429","2009-02-01 21:11:03+00:00","- Cleanup
- This time fixed the real cause of the mismatching malloc / delete[] call.

svn-id: r36191
"
"222165087940bffa22d7856c662228bbf09a0433","2009-02-01 21:26:56+00:00","Fixed graphics glitches when replaying intro.

svn-id: r36193
"
"71b4f84c4688abc6588eea0676fc53f25a36a144","2009-02-01 22:06:43+00:00","Fixed incorrect usage of a boolean (boolean variables are not supposed to be used as indexes to arrays...)

svn-id: r36194
"
"dd39274391c3d6ed5eea1e3526f905a4908337db","2009-02-01 22:21:57+00:00","Fixed regression in the ADPCM decoder. DW2 music should be played correctly again

svn-id: r36195
"
"00e5b84f9fc18af7b14dee52a24414a68a1d6ad0","2009-02-01 23:06:35+00:00","endian fix

svn-id: r36196
"
"1bd7520e12b3ffefaf2f426d91d03c8e7346216a","2009-02-02 12:36:41+00:00","more endian fixes

svn-id: r36197
"
"427e1471e7f1588408f0a41daa1aeff9457f2275","2009-02-02 14:54:08+00:00","t2PlayReel() endian fixes

svn-id: r36198
"
"c59cff9bf3588d2c969a910774facd1fa9276cc0","2009-02-02 15:40:11+00:00","endian safety

svn-id: r36199
"
"f969404ff5c0ce9b272d8390298c39f309958386","2009-02-02 18:32:36+00:00","Fixed warning about implicit signed -> unsigned integer conversion

svn-id: r36200
"
"eb5ec2369f5aac4269bb4ea561a5eaf7ae491417","2009-02-02 18:33:38+00:00","#define usleep on BeOS

svn-id: r36201
"
"08f7d0ac1abbc7576b194bc08afbbe23d1805d4d","2009-02-02 19:31:35+00:00","Missed script update for future SAGA2 engine

svn-id: r36204
"
"eb9ac6648fadf1fa822b9b0b90f6dfa8992dde72","2009-02-02 21:35:57+00:00","Update for part building

svn-id: r36206
"
"44e6c3c6303556f88dc209c8732d666a3ae5b46f","2009-02-02 23:20:55+00:00","KYRA: cleanup

svn-id: r36207
"
"0a42482fc3869d99d979c5f7f80c1cd90cb4c272","2009-02-03 10:38:56+00:00","Removed newlines from debug statements.

svn-id: r36208
"
"d1b71335d65912a75e1f2bea4d56c73ba5400efc","2009-02-03 10:42:27+00:00","Fixed support for walking zones in BRA:
* patches are not applied if the zone is not visible when loading
* when applying a patch, always overwrite the existing data instead of OR'ing

svn-id: r36209
"
"e504c0d8abb53d934c090c1b0cc10d43c2293bcd","2009-02-03 17:02:57+00:00","Removed unused code

svn-id: r36210
"
"885922240ef8223977fd53f3c205349eda825dbb","2009-02-04 05:52:14+00:00","Fix startup of AtariST demo of Elvira 1.

svn-id: r36212
"
"8be011c77035e966b5b28cec33a7e5c8a591ba84","2009-02-04 16:08:32+00:00","endian fix

svn-id: r36214
"
"e8e3397a3c3a266d9c4b8adb82a9562851b292a2","2009-02-04 16:40:44+00:00","make readBufferTinsel*() output in native endianness, rather than little endian.

svn-id: r36215
"
"9de91ecdeaf5fc1e7b32094ba72076eca1d3f875","2009-02-04 17:08:04+00:00","DW2 endian fixes

svn-id: r36216
"
"22812367aa3db0f31856ad910f250cea83d609a4","2009-02-04 19:15:12+00:00","- Fixed/completed cd audio support (sfPlayCd and sfGetCdTime) for Manhole:N&E and RtZ CD

svn-id: r36217
"
"b89031b8d2427e07e88d215233654c1fe65a1f56","2009-02-04 19:52:00+00:00","DW2/Tinsel2 endian fixes.  Apart from some palette glitches the game is playable now.

svn-id: r36218
"
"fdce2ea425962e38605a2cd652f0640b89f6df91","2009-02-04 20:55:15+00:00","Fix palette on big endian

svn-id: r36219
"
"627241de8582e48c95da75b982a59a1773401ad5","2009-02-04 22:05:57+00:00","correct endianness in SetActorRGB()

svn-id: r36220
"
"7c0a16e422649b3b7250264464777b4562e41a8a","2009-02-05 19:25:52+00:00","Allow ScummVM to quit while a character is talking in Kyra3.

svn-id: r36221
"
"30189f09d98cadd590955c5b68e6c6b2a5001f10","2009-02-06 22:16:04+00:00","Removed special case when redrawing the dialog stack. Fixes bug #2555710 and several lesser graphical glitches with classic theme.

svn-id: r36225
"
"108d4cfbd065b81a34c117e982ae1c77a95d49ce","2009-02-06 23:28:08+00:00","Reverted previous commit.

svn-id: r36226
"
"341873c9d3c1f4742c6bb2ccf9a4435c09930c7e","2009-02-07 00:23:53+00:00","Third attemp at fixing release-critical #2472185. Also fixes regression reported in #2555710.

svn-id: r36227
"
"b2332744e4ccf9d0e19a7b1c46a4a66f46a453e4","2009-02-07 01:11:51+00:00","Cleanup.

svn-id: r36228
"
"3a4cc4b88d24bbe0133b7471f5314049059d230d","2009-02-07 01:45:32+00:00","time.h include no longer required.

svn-id: r36229
"
"5de19ecb28d51ce4b7aa973ea643c73448751ef1","2009-02-07 03:36:36+00:00","Cleanup.

svn-id: r36232
"
"89063a38ce63ff962c7963fc020a3eca5235665c","2009-02-07 04:32:33+00:00","Cleanup.

svn-id: r36233
"
"934a59941d54d62e93f40d24a033abf2543e63ad","2009-02-07 04:40:39+00:00","Fix sound noise regression in CD32 version of Simon the Sorcerer 1.

svn-id: r36234
"
"8c84ec82fc9b392f4c17ccd2318ce1c885cd041c","2009-02-07 04:49:10+00:00","Fix sound noise regression in CD32 version of Simon the Sorcerer 1.

svn-id: r36235
"
"4131d3d07feec064fa129e1675d39eb3b14d4e8e","2009-02-07 05:05:14+00:00","Fix sound noise regression in CD32 version of Simon the Sorcerer 1.

svn-id: r36236
"
"9f2d6d82ca05c4dfe5e649bcda4586c78cb420f3","2009-02-07 06:47:19+00:00","Make the subtitle settings in Options section of the global main menu optional, and enable only for game engines where subtitles settings are synced.

svn-id: r36237
"
"990eee73f19f80729b96d7586a9dbcc2d4a7a1f3","2009-02-07 07:05:08+00:00","Use Ctrl F5 for global main menu, since any single key would conflict with some games.

svn-id: r36240
"
"c7bd68dc958e96edf9d00abea81b1658a5bdffc4","2009-02-07 09:22:47+00:00","Add another version of Blue's Birthday Adventure demo.

svn-id: r36241
"
"12d203867d083615a7e6faf52b7c6af903bfd40e","2009-02-07 09:43:27+00:00","Add Amiga Italian version of Ween, and resort Ween entires by platform.

svn-id: r36243
"
"25b7a425477adfe3b51f3298996ef99880317776","2009-02-07 12:55:39+00:00","Handle endianness difference in RestoreActorReels() -- fixes bug 2569407 - DW2: Big Endian crash on loading saved game

svn-id: r36245
"
"634deef6834a8f3407423b14d2232d1b5597f6f4","2009-02-07 19:47:26+00:00","Add detection entry for Gold Rush! 3.0 (Bought from The Software Farm, reported by Muyfa666 on the forums and in the bug report #2565036).

svn-id: r36246
"
"bd6a085888f0957830d04a4ab59f6038d554d10a","2009-02-08 10:12:29+00:00","Remove key statement in PKG file

svn-id: r36248
"
"1a93a4e8336a6e6623a5656def74c4c7fee7060e","2009-02-08 15:24:14+00:00","Updated the GMM hotkey documentation and the list of engines features according to the wiki

svn-id: r36249
"
"8b4c44373c36de45bc543ac7398df4eb8a4dddbf","2009-02-08 21:36:43+00:00","Silenced MSVC warnings about uninitialized variables

svn-id: r36251
"
"7238358e6ebed522dd4e2254ba996b69884be02c","2009-02-09 11:30:18+00:00","Changed the save/load process to use a common serialiser

svn-id: r36253
"
"0ff8d326756b99dc9e7731f4aa41c75fe0433439","2009-02-10 10:16:49+00:00","Cleaned up the input loop, using ScummVM keycode constants and some newly defined constants

svn-id: r36255
"
"d23474fcf9ad84e9556a9a3660b78520a2e81ddd","2009-02-10 23:38:07+00:00","1555 is ABGR (not ARGB)

svn-id: r36257
"
"41eaf2c575d79f80303a96dde867433abd40dbd9","2009-02-11 09:02:30+00:00","Removed deprecated method

svn-id: r36258
"
"c2afb25ec556b78947d7caa47a24f8db10f529db","2009-02-11 10:03:01+00:00","Added debugger console

svn-id: r36259
"
"2ada930eec37d644aa4a5b492065ce50f932efda","2009-02-11 12:24:38+00:00","Fix bug #2583230 - Waxworks: Can't drag and drop items.

svn-id: r36261
"
"546744fec445799f3d853768e68951228ebdbd78","2009-02-11 12:33:37+00:00","Code difference no longer required (fixed by revision 35327).

svn-id: r36262
"
"a898c4290cd31d1f6851ae0ca0c58a7f58822ce2","2009-02-11 13:15:35+00:00","Add suggested code changes for bug #2580705 - COMI: Jerky camera movement.

svn-id: r36264
"
"b2a085b26d342fbae37994e8d44461a04a8acfba","2009-02-11 15:36:13+00:00","Fix for bug #2538123 - 'AGI: loading from launcher disables hotkeys'

svn-id: r36266
"
"15a56d9256d306cdefeac7b6072eeebb33e6b56a","2009-02-11 17:33:39+00:00","sync .spec files from 0.13 branch

svn-id: r36269
"
"dc385c1fa154f189e1635c711402bee10f0c1862","2009-02-11 22:51:15+00:00","cleanup

svn-id: r36270
"
"4942ce18f1c43a6af4f8010505dff3434a240f4a","2009-02-11 23:00:31+00:00","Patch #2553049: Remove clem's name from forum design, following his request

svn-id: r36272
"
"248d9db3b18623c8e31b18cab1feb8967d882f93","2009-02-11 23:22:52+00:00","Restore correct camera values for old saves games of FT, Dig, and COMI.

svn-id: r36274
"
"5f634212aa97bd3d5b6e31b45352b5cb985ef636","2009-02-12 04:34:57+00:00","GUI renderer: some cleanup; added comment on sqrt implementation (on my system, plain sqrt is 50x faster -- on highest optimization levels, otherwise it is something like 200x)

svn-id: r36277
"
"521cc089110501c456844a4bc5963bd6d8e4df5c","2009-02-12 09:52:31+00:00","Cleanup of the GP2X backend. It's been sat on my HDD for a while and it really should be in SVN.

svn-id: r36278
"
"0015657caad6d4824a3b146fb34c4255aeeff72b","2009-02-12 15:13:52+00:00","Fix for bug #2541237 - 'AGI: Restart quits ScummVM'

svn-id: r36279
"
"3c163dbb4e2f79906fa7a64be706a512a94eb7fe","2009-02-12 16:53:57+00:00","Slight formatting fix.

svn-id: r36280
"
"adbc453163ef1408da4592913e8eda7f71ee1907","2009-02-12 22:05:07+00:00","Fixed working Keys button in in game options dialog
Fixed key mappings dialog layout

svn-id: r36285
"
"2844c2213614c8db5068026e2fc0d11efb3d7e74","2009-02-13 00:00:36+00:00","Fix GUI themes zip files

svn-id: r36287
"
"a3516483587b736922901ae74305dcf6f043987c","2009-02-13 00:03:13+00:00","Rewrote VectorRendererSpec & VectorRendererAA to use a Graphics::PixelFormat, instead of relying on color masks -> should fix bug #2537212, possibly at a slow down on low-end systems (a regression which we certainly could resolve, though). Note: I left the PixelType template param in on purpose, in case we want one day to compile in both 16 and 32 bit pixel support simultaneously

svn-id: r36288
"
"d13acd8dafa1015f8b0585afd77891cb3ad0e081","2009-02-13 00:11:16+00:00","cleanup

svn-id: r36289
"
"edfc00a7400d1efa32bee0edfd192fee12e81ef0","2009-02-13 05:09:46+00:00","Fix memory leak, when exiting AGOS engine.

svn-id: r36290
"
"01581b24c0a77eba38442ed880ee069b3cd5699a","2009-02-13 05:10:36+00:00","DS: Removed code from GBAMPSaveFileManager::getSavePath() which was for compatibility with 0.6.1 config files (NDS port 0.1 was based on 0.7.1); added FIXME comment

svn-id: r36291
"
"740ee411b08976587fa47f2b3b5a3709cac00c4b","2009-02-13 05:32:06+00:00","Fix another memory leak, when exiting AGOS engine.

svn-id: r36293
"
"a55aa87ba70fbd020e242e0d885a8d533dc0d0e6","2009-02-13 05:42:28+00:00","Fix memory leaks, when exiting Waxworks.

svn-id: r36294
"
"1eb9c35255f05d5384c1bc1a21621e4b4202f524","2009-02-13 05:50:17+00:00","Fix another memory leak, when exiting Waxworks.

svn-id: r36296
"
"5bf56fe991ef585b554ca836aa5a6ffc44afe67a","2009-02-13 06:17:43+00:00","Changed OverlayColor from int16 to uint16 to fix the strange colours that
appeared in the GUI with r36288. At least, it fixes the problem for me. I hope I
didn't accidentally break anything else.

svn-id: r36298
"
"501b3215323fac6efbd5cbd5168e6118263f2809","2009-02-13 10:04:17+00:00","Revert talkspeed changes, while still only using the game specific talkspeed setting (if it exists). And clarify the talkspeed differences between games in the README.

svn-id: r36299
"
"f051fbb9d811d63c20c4a8d1232c877574922b4a","2009-02-13 16:55:16+00:00","Formatting changes / consistency

svn-id: r36304
"
"2c9d1567d0afc98395de84d1012ba8fcf28582af","2009-02-13 17:02:21+00:00","Synced the cruise engine MSVC 2002/2003 project files

svn-id: r36305
"
"655676b26083edb47d7a4df9ad1b3870d7fe2927","2009-02-13 17:30:59+00:00","Build a dynamically linked executable on Amiga by default (as discussed with Raziel^)

svn-id: r36306
"
"a45aacf9691400e302e93b0e92cd012760e4cd29","2009-02-13 18:00:12+00:00","Don't try to distribute the SDL Readme in Amiga as it isn't included in its SDK anymore

svn-id: r36307
"
"aa25651331c8c8ae945a68060386a7ae3f858fb0","2009-02-13 19:00:46+00:00","cleanup

svn-id: r36309
"
"b1038f97a2daedaafc733a780dca0cdd0f55115a","2009-02-13 19:22:52+00:00","Changed DotMatrix to use pixelformat instead of bitformat/colormasks

svn-id: r36310
"
"4dbbbc13583314b5f738689afed20935969da652","2009-02-13 19:24:32+00:00","GUI: Fixed long-standing bug in calcGradient (gradients look a bit better now)

svn-id: r36311
"
"fe6854d5b8accc8b942ad0cdb76dabb9a620c861","2009-02-13 20:01:50+00:00","Fixed bug #2485123 (weird looking game load dialog).

svn-id: r36313
"
"ade4313695aaef0274e01dc482359de3f9c2c444","2009-02-13 23:32:00+00:00","Fix bug #2596028 - FREDDI3: Game does not start German version.

svn-id: r36315
"
"aa82c6fa7bd5dad43e1f5506714ffc2b6329aac9","2009-02-14 00:10:51+00:00","Changed the list of language dependant strings from being hard-coded to dynamically being loaded from the 'delphine.lng' file

svn-id: r36317
"
"f7b963101f8e04aa837ee598c442e5faed96bfec","2009-02-14 00:21:53+00:00","Fix 1690836: 'BASS: Speed difference'

The original game's delay was 4 50hz ticks = 80ms (1000 / 50 * 4).
Changing gameSpeed to match this makes it run at exactly the same speed as in dosbox.

svn-id: r36318
"
"f065524949ff2919a692dbc1ae42ea56fe3f61ac","2009-02-14 00:51:07+00:00","LOL:
- implemented some input code
- you can walk around now (not very far though, since doors don't work yet). Keyboard control is still missing
- processButtonList isn't really implemented yet for LOL. I'll still have to check which features are  needed here.

svn-id: r36320
"
"0d09d302a3b3679071fc30d6493291dde3695c79","2009-02-14 12:52:14+00:00","Add missing code difference in wordMatch().

svn-id: r36321
"
"ad42ab051683ec5a1171f78cb4641c5efe7ab2be","2009-02-14 12:56:09+00:00","Ooops, remove excess bracket.

svn-id: r36322
"
"c13155b83da4d5189b764e9a4351d2c0bc1004a5","2009-02-14 13:29:22+00:00","LOL: add missing debug info to some script functions

svn-id: r36324
"
"dfaaf2fd45d38b3e443117c73c031fe6b26f8fe2","2009-02-14 13:33:06+00:00","reverting rev35505 since this change breaks the video output using RGB cables

svn-id: r36325
"
"02c149e174137f179ac94c98979622a51720be31","2009-02-14 13:55:00+00:00","LOL: fixed bug in text displayer and some cleanup

svn-id: r36327
"
"6c586b3d4436abc994b5bae39d0c91427259b7b4","2009-02-14 14:33:26+00:00","LOL: fixed a bug in moveParty() and implemented some more gui code

svn-id: r36328
"
"6d700452288010202ffff4915c172df2fc086cbe","2009-02-14 15:52:31+00:00","Fixed bug #2599531 ('SWORD1: truck.dxa plays striped'). The last parameter to
copyFrameToBuffer() is the pitch of the destination buffer, not the frame.

svn-id: r36330
"
"7fc721617599b82b2e53f6dd1d62193e72689875","2009-02-14 18:16:21+00:00","add assert(g_system) for backends that call InitScalers() from their OSystem ctor (at which point g_system is still NULL)

svn-id: r36332
"
"6103e821c69ff2607ddc3f9748c3b501bce041ed","2009-02-14 18:17:27+00:00","remove InitScalers() call, since the PSP port doesn't use scalers, and we no longer need to set gBitFormat.

svn-id: r36333
"
"af900a2e14239f16f22e3e9d0526084f175a45de","2009-02-14 18:34:10+00:00","clear full screen before playing movie in BS1 (fixes #2599573)

svn-id: r36334
"
"7acb4f01ac2111e70221867ae16d9959b7d0e953","2009-02-14 18:59:46+00:00","update to newer overlay interface

svn-id: r36336
"
"c228259fff347edafd19d8222593847ac23ef4c0","2009-02-14 19:12:01+00:00","added USB keyboard support

svn-id: r36337
"
"493eb0c5a43bf2ab7db4ae578cd8e768441cbdc3","2009-02-14 19:42:18+00:00","apply patch by Fingolfin to optimize scalers + more

svn-id: r36338
"
"7853ff65db072c3a80c2b206fec645ec3d0c5046","2009-02-14 21:50:13+00:00","Updated the MSVC project files for commit #36007 (removed /backends/saves/compressed/*)

svn-id: r38182
"
"3f3921333530f32a584937db0641771c57095eaa","2009-02-14 22:46:54+00:00","ignore any keypresses in the volume control dialog

svn-id: r38183
"
"d4ee8455cb29e78c9fd6a9a804304b5f861dc8aa","2009-02-15 00:39:59+00:00","Fixes for the changed keyboard API. Tweaked the PAD mappings to add GMM and VKEYBD.

svn-id: r38185
"
"36767120e1d3553217809af262d844474f926c03","2009-02-15 01:48:18+00:00","correct sprite state for location 43 (fixes #2600759)

svn-id: r38188
"
"16a57f299cdad82a87c1d397b56b663a9426c38e","2009-02-15 03:36:30+00:00","LOL: - implemented proper button processing (works exactly as in Kyra 2 and 3, so we do have some code duplication atm, I just fixed right mouse button support for LOL)
- keyboard control now works

svn-id: r38190
"
"7c148ddf021c990fa866b7600f979aac9a5b26c9","2009-02-15 03:46:05+00:00","Fixed warnings.

svn-id: r38191
"
"fa6e10e9cec163845aa29e7940c86e9c9ab8a2bc","2009-02-15 06:10:59+00:00","Import the SCI engine sources from the FreeSCI Glutton branch (it doesn't compile yet)

svn-id: r38192
"
"76e3172f4a18bde523efc0970834532bbacd176a","2009-02-15 08:07:50+00:00","Add Amiga and DOS Italian versions of Gobliins 2, and resort gob2 entries by platform.

svn-id: r38193
"
"002d55bc93578b8d443074242a14dae490a7daec","2009-02-15 08:09:42+00:00","SCI: Fix the worst compilation problems

svn-id: r38194
"
"79f7b51c1630b77d95bcf6e46f06cfd85f8e5b3d","2009-02-15 08:10:01+00:00","Ooops, remove excess space.

svn-id: r38195
"
"75f4c44fd0644e10ceb556b2fbeaa7737d521a85","2009-02-15 08:11:58+00:00","Removing various unused files (backups remain in vendor/sci/, of course)

svn-id: r38197
"
"206eb0573ea33d3f927a89f0e7c9573976557254","2009-02-15 08:20:53+00:00","SCI: Updated some stuff to recent ScummVM changes (fixes compilation of files in engines/sci/scummvm/)

svn-id: r38198
"
"5262a87a44337112ee811d0be7a19c4cc51fab0d","2009-02-15 08:22:24+00:00","Minor cleanup

svn-id: r38199
"
"1ef23afe6b0441393b6b43ee136552e887c80707","2009-02-15 08:31:38+00:00","added initial sci.vcproj

svn-id: r38200
"
"003317e89d890944fc12e622190aa916aad6418c","2009-02-15 08:34:13+00:00","SCI: Get rid of the include directory hack (it compiles but it doesn't link yet)

svn-id: r38201
"
"2cd61fad4cebe00ec346816879dcb34a5c2bb026","2009-02-15 09:13:17+00:00","fixed include paths

svn-id: r38202
"
"41f78a6641ffcf892e02229d810f7d44cea4d112","2009-02-15 09:17:23+00:00","update

svn-id: r38203
"
"c3af1a22d67df73380243c66c2a70e5fd9272e98","2009-02-15 09:23:46+00:00","define missing strcasecmp for win32

svn-id: r38204
"
"11b4bc25dc25fefdd413194c9c33108cc3d2c5c1","2009-02-15 09:34:39+00:00","revert last define, will be defined in diffrent place

svn-id: r38205
"
"958c72cfe541edcfc0e0b45b0092b23b821a78e0","2009-02-15 09:35:14+00:00","Portability fixes

svn-id: r38206
"
"06b5b22a8cae7eb8baad17c280383c37e699e2de","2009-02-15 09:44:23+00:00","Fix link problems

svn-id: r38207
"
"311344b4451894120fa4688e431c67d5f08bd2fe","2009-02-15 09:56:04+00:00","fixed msvc9 compilation

svn-id: r38208
"
"25aaf973006f1b7d5d7d373bb12007b2e5b7c11e","2009-02-15 10:04:29+00:00","include win32 build too

svn-id: r38210
"
"0a532dfc306ea367c8ccf6875455b9f766f31e78","2009-02-15 10:07:50+00:00","Add interleave parameter to FMOPL as needed by SCI engine

svn-id: r38211
"
"3fb25cf100abb955f7dda5a27066af2993039cc9","2009-02-15 10:10:04+00:00","revert, not needed

svn-id: r38213
"
"c399437479e8489da3d3bd64bcfbd1446ee44a7d","2009-02-15 10:10:23+00:00","- Remove unneeded files
- Make whole thing finally compilable

svn-id: r38214
"
"986a8b0e772ef0ae9bf5ecef59adb4e0b17686bc","2009-02-15 10:10:48+00:00","fixed compilation

svn-id: r38215
"
"59588685039bcc0b87e4c2785fcf7ad0c7b23cf8","2009-02-15 10:17:20+00:00","Fix crash at startup

svn-id: r38216
"
"5e2def9ca5c1b1e90435e38adf3585964c32e655","2009-02-15 10:21:22+00:00","Fix mingw compilation.

svn-id: r38217
"
"89cad681d7e7884294b62fcdd6d153e9ede32886","2009-02-15 10:24:32+00:00","Silenced some MSVC warnings

svn-id: r38218
"
"eaf403d22d1edeecbb330b54ee96744f8dde03a9","2009-02-15 10:25:58+00:00","fmmatch() doesn't exist in any win32 builds.

svn-id: r38219
"
"aef228ac27200bf70904cd7d38027306f86e98d2","2009-02-15 10:28:03+00:00","updated mscv9

svn-id: r38220
"
"1dcc6b79c9ba6d90cc6a17a26ee1c681b48e21ec","2009-02-15 10:29:34+00:00","Silenced some more warnings

svn-id: r38221
"
"4e66e6db70cfee879f2498550a8d5878f9a23b99","2009-02-15 10:32:06+00:00","Fixed compiler warning about loss of precision

svn-id: r38222
"
"61359f95bf2447714fd7e9a08dc1f9a1414b76ce","2009-02-15 10:33:31+00:00","remove DLLEXTERN

svn-id: r38223
"
"7ec7c4399e4ebc57d16347050873326db8b1f4e2","2009-02-15 10:38:39+00:00","Run SCI games :P

svn-id: r38224
"
"e9f742806362a84ffdb176a7414318dd2ab4df89","2009-02-15 11:03:21+00:00","- Move sci/scummvm/ contents to sci/
- Rename scumm_engine.cpp to sci.cpp
- Remove unneeded gfx drivers
- Rename scummvm_driver.c to gfx_driver.cpp

svn-id: r38225
"
"e241843bec22600ab4ef98e7a085e82aac73fc93","2009-02-15 11:39:07+00:00","- Remove some unneeded files
- Mass rename .c to .cpp

svn-id: r38227
"
"38087c4f24079cde228942169a361b9a7d6e2851","2009-02-15 11:44:14+00:00","Fix compilation. How ugly without templates. Yuck!

svn-id: r38228
"
"8b38d0677ad3f2e1239f5a0acc1485176a9c61ac","2009-02-15 12:11:27+00:00","portability fix for platforms with unsigned char

svn-id: r38229
"
"25ddb004360a332ee1d362e5b34286d97242bc68","2009-02-15 12:23:16+00:00","Silenced more warnings

svn-id: r38230
"
"8b34730107184afd28b6845aa5fc6ef89469c645","2009-02-15 12:23:54+00:00","Make MSVC happy and rename timer/scummvm.cpp to timer/timer_scummvm.cpp

svn-id: r38231
"
"07242061562b45c841bdb870333a6bc7117bc03d","2009-02-15 12:29:09+00:00","fixed compilation and linking with msvc9

svn-id: r38232
"
"47a1cd754586a8f61381db7ac7147987bbaa27dc","2009-02-15 13:17:25+00:00","Add Amiga English version of Space Quest 4.

svn-id: r38235
"
"781d7da6b1f0ff9ad7dd4b28b51ed1e3064d222b","2009-02-15 13:29:48+00:00","Applied my patch for the BS1/2 video player
- Support for the MPEG2 videos in BS1/2 has been dropped. The MPEG2 videos were lossy, and support for them complicated the code a lot.
- Support for the non-existing enhanced MPEG cutscene packs for BS1 has been dropped. As a consequence, the credits player and the splitted audio stream players used for these packs has been removed
- The original Smacker videos for both games are now supported, using our Smacker player (which is based off publically available specs and FFMPEG)
- The animations now use the common video player code. Both the Smacker videos and our DXA video packs are supported

svn-id: r38236
"
"2ef26fcd4ac2902a83603d63671c37ef6fed0dbb","2009-02-15 13:43:44+00:00","Oops, fixed Smacker video playing in BS1

svn-id: r38237
"
"01625a01abc71fff54501d929bee5a6079bd3ee8","2009-02-15 13:54:53+00:00","Fix offset error in clearVideoBackGround(), that could cause menu glitches after fighting in Elvira 1.

svn-id: r38238
"
"5b86801553966b0fc71ae9b357506fac4e37a944","2009-02-15 13:58:15+00:00","Merged revisions 36329, 38212, 38226and 38234 from branch-0-13-0 to trunk: iPhone backend updates

svn-id: r38240
"
"a99e3e3fa64eebe5b427edcc193ad01fb75cd222","2009-02-15 14:00:41+00:00","Merged rev 38209 from 0.13 to trunk: XML parsing fix

svn-id: r38241
"
"c3cd2b7f064ab34e668c4db58d6d7462841fa844","2009-02-15 14:17:54+00:00","allow keyboard hotplugging.

svn-id: r38242
"
"24dc986944b1c663b0903965da482a5c03a9aa14","2009-02-15 14:26:33+00:00","Silenced a ton of warnings, and disabled several unreferenced functions (dead code) - hopefully, compilation hasn't been broken...

svn-id: r38243
"
"0082a84b8d956bf25c6aaef153d401d641f0923d","2009-02-15 14:42:27+00:00","make keyboard support optional with USE_WII_KBD since libwiikeyboard is not in the official libogc svn.

svn-id: r38244
"
"9daed50e0165f387f597fec4d06b57805e1f717c","2009-02-15 14:46:42+00:00","Fixed lots of warnings and errors (on my system) by backporting a patch I had sent the FreeSCI folks some time ago (but apparently it never made it, or only made it to a branch not imported?)

svn-id: r38245
"
"dee51a77b57bcebcb20bb14a8fe1314b9e194a55","2009-02-15 14:49:01+00:00","LOL: fix bug in kyra.dat

svn-id: r38246
"
"aa3f10b2fdabd123c08354131949f7920399df70","2009-02-15 14:52:51+00:00","Fixed compilation under MSVC, and silenced some more warnings

svn-id: r38247
"
"3ea3141e9091e349b6dbcd4b6a79ceba5f62e14f","2009-02-15 14:52:52+00:00","Some more warning fixes

svn-id: r38248
"
"e1b36cf2cd8a78782c9e177cb6f06c290bfeb585","2009-02-15 14:59:03+00:00","Fixed some warnings.

svn-id: r38249
"
"a988ed0d0fcec9f7d2556400a9d39f0938c0bc87","2009-02-15 15:00:31+00:00","moving towards const-correctness of files generating savegame.cpp.

svn-id: r38250
"
"6c9e4d200417cea222bccd834abed6451d7ec834","2009-02-15 15:06:14+00:00","Fixed more warnings.

svn-id: r38251
"
"8e7a05989bd86b4f525107d7d92e859a515bfa8d","2009-02-15 15:09:45+00:00","initialize variables

svn-id: r38252
"
"bc7e76ec5dd18ed949edc5453c930cb687a00269","2009-02-15 15:10:47+00:00","Yet more warning fixes.

svn-id: r38253
"
"8228f3bcb2bc6b25b232227bf7dfd116cbea36a4","2009-02-15 15:15:26+00:00","Yet more warning fixes

svn-id: r38254
"
"f1baf289695dec92348a3c3c1263fdd6f074761e","2009-02-15 15:19:00+00:00","update

svn-id: r38255
"
"60a913e9dd5b67ad2f08fcc297952172cecdbf21","2009-02-15 15:21:54+00:00","typo

svn-id: r38256
"
"7d29bde4ed6807282427b2631d9db2e92a88bb38","2009-02-15 15:24:43+00:00","Fixed unused variable warnings.

svn-id: r38257
"
"b882723f20b7b5cd90e1ab8314bbe34d55ef6253","2009-02-15 15:28:05+00:00","moved the keyboard event thread to libwiikeyboard.

svn-id: r38258
"
"3a6da187ad5984ccbfad04873acd8293fc42098f","2009-02-15 15:36:53+00:00","don't allocate state_t gamestate on stack as it will be freed

svn-id: r38259
"
"4d4cabba0a90b4e96098c20cb02b17b0b0930f26","2009-02-15 15:39:44+00:00","better error checking when setting up threads, and free() the stacks when done.

svn-id: r38260
"
"4b31a6cd634c8f70576e79444efbb6e477efdb28","2009-02-15 15:43:39+00:00","moved the supported graphics modes to a static array.

svn-id: r38261
"
"faa156c9d5437fc8deaa51b27231e8c2419e77a3","2009-02-15 15:51:56+00:00","fix string unmangling (which I broke earlier)

svn-id: r38262
"
"f046858d5dfe3924bc2455b931dfab8eea41401c","2009-02-15 16:09:55+00:00","fix race condition: sfx_exit could stop and delete the mixer while the mixing callback was being executed

svn-id: r38263
"
"aff0a0daac4d2bff6e2731e7c1ecaf25ce4f1eb8","2009-02-15 16:21:53+00:00","add support for USB keyboard modifier keys.

svn-id: r38264
"
"06186502b2bfa413e7d09c12ed691e9bcf6acbaf","2009-02-15 16:45:39+00:00","Silenced more warnings

svn-id: r38267
"
"79086b1b1f6bde6cf3ef7668a7b08fcb15f8e50a","2009-02-15 16:57:36+00:00","Synced the MSVC project files for earlier versions of MSVC

svn-id: r38269
"
"b27053c71e98e68aed4fc17219123d72538cbf6e","2009-02-15 16:59:48+00:00","Silenced some more warnings

svn-id: r38270
"
"9920d40924f36236d2783181ad24b830d753e7f9","2009-02-15 17:20:31+00:00","fix compilation

svn-id: r38271
"
"8392dd3aab36824d53d957fbf0879b6d95abe24e","2009-02-15 17:26:59+00:00","consts

svn-id: r38272
"
"d8a0e9d46681bfa64add34edd012c328881b7406","2009-02-15 18:34:39+00:00","add support for tucker

svn-id: r38273
"
"544bda60faa33baec0517155b68879536fe0d829","2009-02-15 18:36:36+00:00","enable tucker and groovie engines

svn-id: r38275
"
"17014c4f472a2325fa75b4a14cf1acace3464020","2009-02-15 18:45:53+00:00","Merged internal 'matchPath' method of class Archive into global matchString function (via an optional 'path mode' in the latter). Also changed Archive::listMatchingMembers to use path mode when matching, just like FSDirectory::listMatchingMembers

svn-id: r38277
"
"3ceb1482dbc8559dde0346f3c38b93be6bc1f976","2009-02-15 18:53:27+00:00","Quick dirty hack to make the engine run again on PalmOS

svn-id: r38278
"
"e28ed6b4c9bd406fe9fda7cb244e9d7054567b8d","2009-02-15 18:58:10+00:00","SCI: Got rid of HAVE_FNMATCH_H

svn-id: r38279
"
"650749d401d25bb2269f6ce975d69047cd0ab6bf","2009-02-15 19:09:59+00:00","Compatibility fixes for the official iPhone SDK

svn-id: r38280
"
"270165522ba6bba8fa972c64e7a312fd924aa6e4","2009-02-15 19:12:21+00:00","XCode project for the iPhone official SDK

svn-id: r38281
"
"a49d29cf6f7be49895c1c6a846ea93f0be3e0fee","2009-02-15 19:15:43+00:00","cleanup, fixed warnings

svn-id: r38282
"
"c137d7578437b8bac9bc0e6f3965f37f0d9af17c","2009-02-15 19:45:36+00:00","T7G: print out the current script pos in decimal too (to match ST's decomp's ;-)

svn-id: r38283
"
"d7dea4ff17cd5ee6737cbe50e5d47c13e946f86c","2009-02-15 19:52:44+00:00","T7G: Fix for #2511456. Volume is now only reset to 100 on playing a new track, and the background track starts on beginning of input loop (not at end of main track).

svn-id: r38284
"
"7d0d96ecc1ff743bdb9828e1da52d20d67eabc72","2009-02-15 20:02:43+00:00","fixed compilation with msvc

svn-id: r38285
"
"78282ea586a4cfbf16b57782c4905d751911e210","2009-02-15 20:15:24+00:00","remove defines from msvc project files

svn-id: r38286
"
"da3516248cb1f71b8afe94ac769c87617a378842","2009-02-15 20:19:06+00:00","Fixed compilation (along with it const correctness).

svn-id: r38287
"
"faadabe20cbbe4312d73d85205fcba77488e4e83","2009-02-15 20:22:07+00:00","add support for groovie

svn-id: r38288
"
"cd4f1273303bbf9d0fa543c34b9494da940f445a","2009-02-15 20:29:43+00:00","Add announcement for dropped MPEG2 cutscene support in Sword1/2.

svn-id: r38290
"
"32dd0fff3b1bf123a0b2682aae41152ed334a267","2009-02-15 20:31:42+00:00","Add unkown release date for 0.14.0 (to match how it used to be with unstable versions).

svn-id: r38291
"
"1436fbe05d2b0c3a734d6fbd5f63172150949716","2009-02-15 20:34:36+00:00","Announce GUI changes.

svn-id: r38292
"
"3d5b349b7c881c6b208ceff7b0960a5a324b561c","2009-02-15 20:38:51+00:00","check the result of PAD_ScanPads() to trigger button up/down events only once. requires a not yet official libogc patch.

svn-id: r38294
"
"b484e828214db53176403a425c5b26065ce762af","2009-02-15 20:40:49+00:00","retreive->retrieve

svn-id: r38296
"
"b8156760583ae3482299febee4a8c843ca34ba71","2009-02-15 20:47:01+00:00","Talkspeed vs. Talkdelay patch in SCUMM was reverted, thus removing the news line mentioning it.

svn-id: r38297
"
"175de19bd167ae8ab0efe66e2300d2510b645b09","2009-02-15 20:51:14+00:00","Mention that the original Smacker cutscenes are now supported in BS1/2

svn-id: r38299
"
"5c63409d3e76f15df7028e8e3569f6fb41973435","2009-02-15 20:54:20+00:00","temporarily re-include fnmatch to fix compilation and case-insensitive matching

svn-id: r38300
"
"8e056b309269d9e6995c0f54b9b14d8f85380422","2009-02-15 21:04:32+00:00","Removed unused code

svn-id: r38301
"
"0641af5d1c3c83d319c090c22a9d14ce4252e1a2","2009-02-15 21:11:25+00:00","Better (?) fix for scicore/tools.cpp -- don't add Win32 specific code in a section of code which is supposed to only be used on Windows anyway... :)

svn-id: r38302
"
"e29d90be3e2213313c2884d80656198d8fed65ef","2009-02-15 21:12:21+00:00","SCI: Fixed more warnings

svn-id: r38303
"
"5417f6bacb73d5996b26229513c2ce01db27bf6a","2009-02-15 21:20:21+00:00","- Replace OSystem::clearScreen with OSystem::fillScreen as discussed on -devel.
- Update BaseBackend and DC port to properly implement OSystem::fillScreen (now only PalmOS has to be updated).
- Update all client code which relied on OSystem::clearScreen so far.

svn-id: r38304
"
"e90eed4ff338f833067f28e0374d58ccfdf6cbf1","2009-02-15 21:27:42+00:00","SCI: Changed _WIN32 -> WIN32; _DREAMCAST -> __DC__; removed _DOS stuff

svn-id: r38305
"
"3e3f4e450f4cd6b761de8257be0c5e6294cc1faa","2009-02-15 21:39:17+00:00","close sound when exiting

svn-id: r38307
"
"6ffc8e4aea54c281af5a50fca052798584ba8315","2009-02-15 21:39:59+00:00","Silenced another warning (disabled an empty switch statement)

svn-id: r38308
"
"7a72318a12bec184885beeef9b58b5f968c7b3bc","2009-02-15 21:57:51+00:00","Compile fix for OS X

svn-id: r38309
"
"4eff1002f99c15c213144c2aef1bf49c1bbb65e6","2009-02-15 22:01:09+00:00","SCI: Got rid of a nasty hack where class, delete, new were re#defined because FreeSCI used these C++ keywords for variable names

svn-id: r38312
"
"26f45be083d67eafe1e2f6f30a2e717b43d3d31d","2009-02-15 22:07:19+00:00","properly (re)select game after adding/editing domain name in launcher

svn-id: r38313
"
"f86403ed22757edc76722b6f36ab797ecd5cfd97","2009-02-15 22:14:04+00:00","Attempt to fix compilation problems on MSVC 7 (I wonder why it compiled elsewhere, actually ;)

svn-id: r38314
"
"7adf7214928a11ae53035db593566beb9422f08d","2009-02-15 22:25:34+00:00","Proper endianness handling in MatchingLevels().
Fixes #2603000 'DW2: Long pause entering Shades (big endian)'

svn-id: r38316
"
"57434d955fc6eaa77ab1ef5c408f733a59dabbcf","2009-02-15 22:28:12+00:00","SCI: Run astyle to make the code be more compliant with our Code Formatting Guidelines: engine dir

svn-id: r38317
"
"5ecfecd3bc795446581186eb7f0e04b1c0caa0e3","2009-02-15 22:28:50+00:00","SCI: Run astyle to make the code be more compliant with our Code Formatting Guidelines: scicore dir

svn-id: r38318
"
"78e0d055eae23f701b1fc2467c1b2f90041c3679","2009-02-15 22:32:57+00:00","SCI: Run astyle to make the code be more compliant with our Code Formatting Guidelines: include dir

svn-id: r38319
"
"d2e8256439423dcf9721c951de681b69a4e477b5","2009-02-15 22:33:18+00:00","defer BS1 palette update from newScreen to updateScreen, based on patch by eriktorbjorn for bug #2599963. Maybe suitable for branch-0-13-0 after more testing.

svn-id: r38320
"
"921e6ff5cf3944c1a62a3ad9a91c29bb21aa9942","2009-02-15 22:33:36+00:00","SCI: Run astyle to make the code be more compliant with our Code Formatting Guidelines: gfx dir

svn-id: r38321
"
"29611bc7ead4d3d5fc9df63c04dd9e2577805557","2009-02-15 22:34:41+00:00","SCI: Run astyle to make the code be more compliant with our Code Formatting Guidelines: sfx dir

svn-id: r38322
"
"4a51b55b65da2b8f121c378d6cc90fcef091d91a","2009-02-15 22:34:57+00:00","Mention BASS speed correction.  Maybe this should go into 0.13.0 as well, but I feel uneasy committing it without at least a full playthrough test.

svn-id: r38323
"
"43093c2d809f48ab1b265a89ef2b9adb9e253daf","2009-02-15 22:42:09+00:00","Mark kq1sci as 'SCI Remake' instead of 'VGA Remake'. It's not in VGA ;)

svn-id: r38324
"
"f3ab80b4e8eeb7f175c94c6c3e8b10410a268dd7","2009-02-15 22:43:13+00:00","SCI: Run astyle to make the code be more compliant with our Code Formatting Guidelines: rest

svn-id: r38325
"
"49d90127b9bfbbcc4a079072dda17db1eff4ba89","2009-02-15 23:01:27+00:00","Removed OSystem_Dreamcast::fillScreen implementation after discussing it with Marcus.

svn-id: r38327
"
"08b62c7827b7fbc1c8e65c0edf5f835996e9821f","2009-02-15 23:06:21+00:00","AtariST Elvira 1 demo specific code in restoreBackGround() is no longer required.

svn-id: r38328
"
"c556589d74b4439391d3968975e44c02cdea9818","2009-02-15 23:24:00+00:00","Make failure reports in adv game detector a bit more verbose (show data path, useful if you mass add and then don't know which games are unknown)

svn-id: r38329
"
"296686e81217700c0b94c8fe386a396ace81de3b","2009-02-15 23:39:31+00:00","SCI: Header cleanup (avoid #include <> where possible)

svn-id: r38330
"
"033ade4f5cb954cd3af870136859ccf7ec6ac8aa","2009-02-15 23:49:42+00:00","Fixed more warnings (and at least one case of uninited data)

svn-id: r38331
"
"87bfde321f7ac505b797efa7ed72f087fd5e9b42","2009-02-15 23:59:29+00:00","Fixed more warnings

svn-id: r38332
"
"7ecb41027c2ed21b6a53ab6d60a57873c96b4f85","2009-02-16 00:16:58+00:00","SCI: Moved old_objects.* to tools, as it is only used by tools/scriptdump.cpp, as far as I can tell

svn-id: r38333
"
"ffa7f53377d7891c8a06d04edb7816f2dbe1ae30","2009-02-16 00:17:27+00:00","SCI: Removed some unused files

svn-id: r38334
"
"ddaa25cf29c3bbf55d090db92daf5c9736360922","2009-02-16 00:34:40+00:00","SCI: cleanup

svn-id: r38335
"
"74132ed71aa69f2b651815b181ce54a835b448b2","2009-02-16 00:35:22+00:00","SCI: cleanup

svn-id: r38336
"
"0a621d89ae175b4667383f5b7e9055f1ea1b8811","2009-02-16 00:43:18+00:00","Fix win32 compile of SCI engine.

svn-id: r38337
"
"bf6a7c1d72c0c3120c253f1e955d7495860519f4","2009-02-16 01:04:19+00:00","cleanup

svn-id: r38338
"
"6098cadde3f986e4b5ab250c66a0366078d7ba0b","2009-02-16 01:58:20+00:00","More paranoia checks

svn-id: r38339
"
"6af056c89d16ae506aab0c7a29ae43edf8105925","2009-02-16 01:58:30+00:00","Reimplemented reg_t_hashmap using Common::HashMap

svn-id: r38340
"
"7fc7234312b0e056a3172d3c88cad346bb128b10","2009-02-16 04:45:29+00:00","Fix startup of the Amiga versions of Manhunter NY/SF, which seem to require the older platform value of 20.

svn-id: r38341
"
"de0c772a01382eeb93a9977feb096a505123e75b","2009-02-16 06:02:21+00:00","Blank the palette correctly. (Fixes Valgrind warning.)

svn-id: r38343
"
"a57e773a0ee200e7775ff04454990ae7539257ea","2009-02-16 06:11:37+00:00","Removed unnecessary tests. (It's ok to free a NULL pointer.)

svn-id: r38344
"
"f9705960820c1d8f8b29096cf0ad7a02ee9ee3b5","2009-02-16 06:23:41+00:00","Limit platforms to specific SCUMM versions, when selecting the music engine to be used. To help prevent issues, if user manually selects the incorrect platform.

svn-id: r38345
"
"81eb4b83caf67b45f8075b493adc5732a28526d5","2009-02-16 06:26:54+00:00","Remove unneeded code, as _musicEngine is already set to NULL by default.

svn-id: r38346
"
"0a04d307535bec99c57d5a469b7c449da8f5e469","2009-02-16 06:43:33+00:00","apply patch #2603528: PCX loading (convenience only)

svn-id: r38348
"
"75a4540791d3ccad3f08d4bb93a20b034e571785","2009-02-16 07:02:11+00:00","Revert r38254 as pointed by waltervn (SCI1 games work again)

svn-id: r38349
"
"36d74955775ca5f57b73d028ae3d5d191cb2514e","2009-02-16 07:06:12+00:00","fixed compilation

svn-id: r38350
"
"2a7d22702cce12f3d0ab04b6f0d1c187346c72f3","2009-02-16 07:17:36+00:00","initialize palette buffers (compiler warning)

svn-id: r38351
"
"1bd700b51ec9917dbb62fe6314857201f256a1c6","2009-02-16 07:27:04+00:00","fix random crashes on vga devices when using exotic scalers

svn-id: r38352
"
"fd9c7198f5d87068f682da4fbeed2f4f0785f55e","2009-02-16 08:16:52+00:00","Removed reference to deleted reg_t_hashmap.cpp

svn-id: r38354
"
"7a3c7c1e9a85cb83c3149503adb1e8247986bc7d","2009-02-16 08:32:45+00:00","Added zlib support and SCI to the xcode project for iphone

svn-id: r38355
"
"2d0a897d16d25f10035e97a79ceab4d6036e5c60","2009-02-16 09:17:49+00:00","Replace strcasecmp with scumm_stricmp.

svn-id: r38356
"
"56894d00efa561b8e635cdf034d4b884b59417c3","2009-02-16 09:21:36+00:00","replace one more instance of strcasecmp by scumm_stricmp

svn-id: r38357
"
"0e3692dbc788b12c4c521432733970e4c48e4d4a","2009-02-16 09:23:58+00:00","SCI: Moved seg_manager.*, int_hashmap.* to sci/engine (they are only used there); merged hashmap and int_hashmap

svn-id: r38358
"
"42cb3a55d9e556f63c5bccabeff21b8f5ec18c44","2009-02-16 09:29:07+00:00","Replace strcasecmp with scumm_stricmp.

svn-id: r38359
"
"ee92dbbe41c2789e7e237f524d184de11de47eef","2009-02-16 09:40:25+00:00","SCI: Committed stuff I forgot in my last commit; changed int_hash_map_t to a C++ class

svn-id: r38360
"
"954aa46b8ae1fa34ee2f3e134904de08f138a0af","2009-02-16 09:44:00+00:00","SCUMMVM define no longer required.

svn-id: r38361
"
"a27262621045b1770c3fc0e01c1a9b369a7df877","2009-02-16 09:53:34+00:00","Replace strncasecmp by scumm_strnicmp

svn-id: r38362
"
"271758dbb8c3f70bb875d4629c36902e20965b10","2009-02-16 10:14:58+00:00","Sync

svn-id: r38363
"
"4fdd92c6105b5a1186a654a1b94571e3fcba2cd7","2009-02-16 10:52:45+00:00","Fixed compilation

svn-id: r38364
"
"2ced8f361dc2b11d91048f41d669a8d7cc7816d6","2009-02-16 11:28:35+00:00","Updated the MSVC project files of the SCI engine with the latest changes to the file structure

svn-id: r38366
"
"63f4ef742781df1bc6a890f669a897124d21e298","2009-02-16 13:43:44+00:00","Add alternative filename prefixes for German versions of puttcircus and puttrace.

svn-id: r38367
"
"74b654e9b5d5647c70fbc22e363a9bd7d39e9251","2009-02-16 14:15:14+00:00","Add German versions of several games.

svn-id: r38369
"
"39ea68173ab4b2cb58e0cfb8eeb0b35f55e6fc4c","2009-02-16 15:35:35+00:00","Add detection for the Shivers demo and split the Torin's Passage entry into multiple as their main data files are the same.

svn-id: r38370
"
"d053a4575d9969c1ce44b25111e4b5842e09d045","2009-02-16 15:36:26+00:00","Add build support for SCI.

svn-id: r38371
"
"ee1cae3ebcad65ac30c2ce84853b3c07ce4568f7","2009-02-16 15:50:27+00:00","Removed unused variable

svn-id: r38372
"
"c8a3a05a5d83758582e0b89c4646476c535f84b0","2009-02-16 16:23:48+00:00","SCI: Changed pcm_device and timer 'driver' functionality to use directly the ScummVM modules

svn-id: r38373
"
"a43b0bc2dc0bbad04855adf44b948e88a7a4551e","2009-02-16 17:17:15+00:00","LOL: - more work on the user interface
- fixed non interactive demo

svn-id: r38374
"
"6dbd7e21eb3024387607f2d2ebbac3dab258c85f","2009-02-16 18:37:28+00:00","Use MIN with correct template <int>

svn-id: r38375
"
"2a38e8fcde41349ccbc4fa3f70b0f85ff6f7f4b2","2009-02-16 18:40:36+00:00","isblank is not available on all platforms. Needs to be handled in a different way.

svn-id: r38376
"
"c4fb8cf4f13cdd7d98b466afa122cdad8c970343","2009-02-16 19:07:41+00:00","Fixed VectorRenderSpec for no fancy theme!

svn-id: r38377
"
"2bc44930feb20eb8103ae6d15e2c657944c2b3fe","2009-02-16 19:48:00+00:00","Add advanceddetector to Symbian base makefile

svn-id: r38378
"
"9c8b1acf6b1b7231842826154651d7dd15c7607f","2009-02-16 19:50:56+00:00","Add base-backend.cpp to Symbian base make file

svn-id: r38379
"
"0d927db83856ef12f8d819410331cf946a646674","2009-02-16 21:06:28+00:00","Removed obsolete FIXME.

svn-id: r38380
"
"11862f3db3e462ef2c795e4ab75d29d5606d4f5d","2009-02-16 21:17:14+00:00","Cleanup.

svn-id: r38381
"
"2bb7b23748d2f16427ffd454554b08ff759bf446","2009-02-16 21:19:02+00:00","Change formatting to match our code guidelines.

svn-id: r38382
"
"57749fc9af12f2e94db5970b92c917b035fa15b0","2009-02-16 21:46:02+00:00","LOL: fixed invalid memory access

svn-id: r38383
"
"dbb8ad9da18a4289071bec086f64b8e79f92fb19","2009-02-16 21:57:22+00:00","If the DXA cutscene audio fails to play for whatever reason (shouldn't happen in
BS1 since all the cutscenes have an audio track), assume audio and video are in
sync.

svn-id: r38384
"
"6ec40aa9f64101c82daa621610bb9d66a85b4001","2009-02-16 22:45:23+00:00","Removed unused code and defines

svn-id: r38385
"
"d61b83814b9295d6fc4192344a96422fed2fe07d","2009-02-16 23:21:18+00:00","Updated the iphone xcode project to include dependency libs, and fixed config/savegame paths

svn-id: r38386
"
"a3adca29f22ecebdd2a3d5388d5fe22327f73ec7","2009-02-16 23:28:24+00:00","Removed a lot of unused and compiler-specific debug code. Note that for MSVC, the corresponding checks are enabled by default in the debug build, so there's no need to set them again programmatically. Also, removed the 'codebugging' related code

svn-id: r38387
"
"6da742f47fb909eee89eaf0ecd58b4497b8eb9d1","2009-02-16 23:31:53+00:00","Updated xcode project with latest changes

svn-id: r38388
"
"cc653bc3b0a4584e9b355f09906e32f9492e69d4","2009-02-16 23:37:06+00:00","Updated the SCI MSVC files

svn-id: r38389
"
"6f9906d4c189f9381d0bb1bb901c4f7e5768343d","2009-02-17 00:37:55+00:00","another update for the new libwiikeyboard API.

svn-id: r38392
"
"4f436e311d5a24f13d35de213e30f28a32d193bc","2009-02-17 07:41:40+00:00","Remove functions not used, and thus the dependency on isblank.

svn-id: r38393
"
"0e33a5647883c0a0f02f012b250aca98b549fea7","2009-02-17 08:55:48+00:00","Removed unused code

svn-id: r38394
"
"ffc07febeb08dfade2242441c9b963805634e742","2009-02-17 09:15:17+00:00","Removed unused SFX code

svn-id: r38396
"
"0443c5fe9e086cab0c5cd4a56ca2af68457ddb1f","2009-02-17 09:15:29+00:00","current versions of BEOS no longer support snooze according to Begasus on IRC

svn-id: r38397
"
"241d99558666c57b6a9e3bc4d6809c22122dc49e","2009-02-17 09:41:21+00:00","Clear cutsceneOverride for all scripts (except current), when restarting any game, fixes bugs:
#1923193 - MONKEY: cannot restart during the intro
#2518226 - FT demo: debugger at end of demo

svn-id: r38398
"
"963af0ab02631cedb5763832db5de812b3f1c1b8","2009-02-17 09:53:27+00:00","Removed dead/unused code

svn-id: r38400
"
"73b104ec4fbcca79c2dddef261cee876c98b54e6","2009-02-17 10:01:35+00:00","Updated the SCI MSVC project files

svn-id: r38402
"
"7f8f0e96f7f72a6252e25c6abacb2ce98e39c395","2009-02-17 10:25:26+00:00","Removed directory which is not part of the SCI engine - the code can be referenced from /vendor/freesci/glutton/src/sfx/mt32_GM_mapping

svn-id: r38403
"
"d6b5855800713f5f932c65e5239a0f96604ddbd5","2009-02-17 10:33:16+00:00","Removed more directories which are not part of the SCI engine - again, the code and documentation can be referenced from /vendor/freesci/glutton/src/sfx

svn-id: r38404
"
"b8d2c41cdd5b6a1af38aec3f0f0ccda4c2c304f0","2009-02-17 12:20:40+00:00","Remove VECTOR_RENDERER_FORMAT check and related documentation.

svn-id: r38405
"
"d39d83e525d4a62e5b73727c65c7864d0adf2865","2009-02-17 13:51:52+00:00","Replaced sci_free() with free() - it's OK to free a NULL pointer, so the checking that sci_free() performed is not necessary

svn-id: r38406
"
"9ae02c978c9131b5448293a7ee791025bfc3f202","2009-02-17 14:13:42+00:00","SCI: Added a bounds check on the index when setting palette.

svn-id: r38407
"
"22a009d3c6e591ba55b089b8ec04d258cede84b0","2009-02-17 15:02:16+00:00","Update headers. engine/

svn-id: r38408
"
"c0dbe787d57daa6fc53a1f87ffc1bbcac2e64c32","2009-02-17 15:05:16+00:00","Update headers. includes/

svn-id: r38409
"
"b0abacf7cda0e8179e93d66e5f3700da4d5103db","2009-02-17 15:07:44+00:00","Update headers. sfx/

svn-id: r38410
"
"87e7f8541085de2813be0276ad898d627f133f79","2009-02-17 15:09:09+00:00","Update headers. scicore/

svn-id: r38411
"
"76024785fec4d5537046ffa3afeb00f9854b13eb","2009-02-17 15:17:01+00:00","Update headers. gfx/

svn-id: r38412
"
"3e0519e4eee4d4e7d1e11b7b50788d15e6adcaa3","2009-02-17 15:20:21+00:00","Update headers. rest

svn-id: r38413
"
"2a68f8c1cba68051b7cae4adf9c917fcbb262b18","2009-02-17 15:21:38+00:00","Remove unneeded files

svn-id: r38414
"
"e676bec0b8f9c28a61e994f1a4f3bd7c0c45c713","2009-02-17 15:27:31+00:00","Remove dead/leftover code.

svn-id: r38416
"
"409f47516f38771972ba9db53d1fcd6cd3e661a6","2009-02-17 15:46:00+00:00","SCI: ran astyle

svn-id: r38419
"
"2ef866690d0e81044546afde97c7132086f4de96","2009-02-17 15:54:15+00:00","Fixing compilation for me

svn-id: r38421
"
"d53b66b3522b31fd8a640d5187cc90173d674568","2009-02-17 15:59:52+00:00","Setting SVN keywords property. rest

svn-id: r38423
"
"b3cf9ef9a946571bb31d826384cb68a49bcc8820","2009-02-17 16:26:18+00:00","Remove vector renderer define

svn-id: r38424
"
"33934251cbd5ce7f4db3e5e44fd7ae2741233093","2009-02-17 17:17:47+00:00","Fix for long delay while fading palette in Zanthia's home, when mixing potions.

svn-id: r38425
"
"57176cdce18fd6651c0aaab3acc688dfecc76df1","2009-02-17 17:37:01+00:00","Removed unused file

svn-id: r38427
"
"5b8d0a77ff26e2643d45d7ffa4cc0494fc605871","2009-02-17 17:44:04+00:00","Added an 'equals' function to Common::Rect (used by SCI)

svn-id: r38428
"
"bc39dc9d758aa901b88a1f0927945446bb40019a","2009-02-17 18:01:52+00:00","Fix valgrind warning about mismatched delete.

svn-id: r38429
"
"515dfac64c3a6baec4696f1c0141c5fb473297ef","2009-02-17 18:16:31+00:00","SCI: -Wno-variadic-macros not needed anymore

svn-id: r38431
"
"cd8f4c5ae247b8acf823a662928958496c30690f","2009-02-17 18:16:41+00:00","SCI: Silence 'check always true' warnings with a trick (temporary, that code needs to be revised anyway)

svn-id: r38432
"
"f245cf55b842ed81294e42f87369684630a22572","2009-02-17 18:16:48+00:00","SCI: Merged main_ into SciEngine::go()

svn-id: r38433
"
"471f630c2e2da507cf4c0d52e55279e1d20177c1","2009-02-17 18:17:01+00:00","SCI: Moved sfx_pcm_urat_t from  include/sfx_pcm.h to sfx/mixer.h

svn-id: r38434
"
"e77e56bec1718a6bbbd1007fef09620ec4a3343b","2009-02-17 18:21:27+00:00","Revert changed I accidentally commited *sigh*

svn-id: r38435
"
"a113102d52486c3650b8f5105b4d2bf2a514f54a","2009-02-17 18:21:46+00:00","SCI: removed unused code

svn-id: r38436
"
"e28439bebce7579eae3d793bc943b9030df80287","2009-02-17 19:15:37+00:00","point_t -> Common::Point

svn-id: r38437
"
"23dd0d861d596f526b1f51eefa4355a371ecf6d4","2009-02-17 19:39:25+00:00","Updated the xcode project to generate Info.plist, and use the correct icon

svn-id: r38438
"
"2294621e5a97b3eeaca24228dc2630d12fcfbdd5","2009-02-17 19:53:04+00:00","clarify scumm debugger error message

svn-id: r38439
"
"f23b6f91b7ef54befddeeb12a02047f89efff4c8","2009-02-17 19:54:11+00:00","typo

svn-id: r38440
"
"e5def6fbeabce50c03b7aa79c4c6f033fea4a2a5","2009-02-17 19:57:29+00:00","Add SCI team to credits

svn-id: r38441
"
"d428b4da6c73632f1b9fefb52dce2b8275f80b5c","2009-02-17 20:06:17+00:00","remove not needed anymore SCUMMVM define

svn-id: r38443
"
"ebff01c4632d08a8103e6dee1bdb010eb2993a9e","2009-02-17 20:26:57+00:00","shat up ARRAYSIZE redefine compiler warnings

svn-id: r38444
"
"4fcbc4f7121227177047c721c073abfce590121d","2009-02-17 20:34:19+00:00","fixed unsigned/signed comparisons warnings

svn-id: r38445
"
"4a241753c4718ec2a31648faa78dd6590474cdb6","2009-02-17 20:43:37+00:00","fixed compiler warning about potentialy uninitialized variable

svn-id: r38446
"
"a2c9faed29c422654d7640be34e69d4574f3d9f5","2009-02-17 20:50:30+00:00","Fixed bug #2609755 (GUI memory corruption).

svn-id: r38447
"
"fc34cb3bd38dd46acc606cbe290cd851cf57b171","2009-02-17 21:02:47+00:00","When adding games from a directory the user had no permissions to, instead of exiting with an error we'll (for normal adds) show an error message and (for mass adds) just continue in the list.

svn-id: r38448
"
"83656cc9ad8230b530d49fd122c605b1aa612c30","2009-02-17 21:18:11+00:00","don't attempt display resource type name if it's out of array, so it give access violation

svn-id: r38449
"
"ddbad0197b158f2a27d9ca4eb5c9ecb542a9feeb","2009-02-17 21:55:53+00:00","Add detection for the Space Quest 3.5 fan game.

svn-id: r38450
"
"53ef1bd4fd6d588e460db54995d8aa24f30b6513","2009-02-17 22:53:09+00:00","Removed already implemented graphic capability flags, and used CLIP inside scummvm_draw_line() to clean up the code a bit

svn-id: r38451
"
"143a539ee3f2b4563866833089e2415bdd8691bb","2009-02-17 23:12:29+00:00","Cleanup

svn-id: r38452
"
"650eeec5768f8dab09d7d0ffc1fabaf3c92e7940","2009-02-18 03:42:44+00:00","Add Italian versions of several games.

svn-id: r38453
"
"f0a0f3f609c3822a72788c75838ca418d66c9bb9","2009-02-18 03:58:55+00:00","Add a few more German versions, and resort via platform.

svn-id: r38454
"
"4e98d781b9bab502c7a7c83a6d826155750348f5","2009-02-18 04:21:51+00:00","Updated actions with tucker and groovie.

svn-id: r38455
"
"f51990a3de8fb88173898c4bc5b1ed2ac582c751","2009-02-18 04:43:39+00:00","Updated revisions in PKG scripts to 0.14.0

svn-id: r38457
"
"056a13f7102f636687eb6ac2a8f4463fa8cec11d","2009-02-18 09:09:37+00:00","Moved game version checking to ScummVM's detector and removed the FreeSCI version checking routines

svn-id: r38458
"
"f0947f9e5858974586452b435da0978a80ee2044","2009-02-18 09:58:52+00:00","Updated and synced the SCI engine MSVC project files

svn-id: r38459
"
"526ad1d1d00d721f9ecead2438d98106a504a665","2009-02-18 10:07:55+00:00","We no longer verify the SCI version number against the original executables, so remove the exe file reader code

svn-id: r38460
"
"ce885af5caf60423fcab5a01ce8c5799740c3ff2","2009-02-18 10:10:24+00:00","Remove the huffmake Perl tool, and the unused hufftree.* files

svn-id: r38461
"
"effc556fd378311096b49a0e568c02994c055a80","2009-02-18 10:14:41+00:00","Updated and synced the SCI engine MSVC project files

svn-id: r38462
"
"95cc0493b357869909ba850233c02265532029e1","2009-02-18 10:20:48+00:00","Removed the unused memtest, memdup and sci_memdup functions

svn-id: r38463
"
"5d931adb70e952557ae433c034240ac182753264","2009-02-18 10:28:16+00:00","Removed the unused queue code and memfrob() definition

svn-id: r38464
"
"1ccedde91aadc6dea2156e40c0dc094578092cf4","2009-02-18 10:37:22+00:00","Disabled unused functions

svn-id: r38465
"
"fa59ce0d9f6282e08d52209d3afad3cc9f702ebb","2009-02-18 10:49:17+00:00","Removed the unused sci_get_homedir() function

svn-id: r38466
"
"1db017a6c22137ba26276a75a3901a0f99ccedca","2009-02-18 11:03:44+00:00","Removed the cfsml.pl tool from the SCI engine (eventually, it should go to /tools, together with the other ones...)

svn-id: r38467
"
"1b81383dcbacc33c3bc3b1060657f3cfa736bb90","2009-02-18 11:14:05+00:00","Removed files which are not part of the SCI engine (will be moved to /tools, together with the others)

svn-id: r38468
"
"0d82e05bb68215ee59a463b4771f2df7c72e29dd","2009-02-18 12:09:11+00:00","Added FIXME concerning crash when exiting a SCI game

svn-id: r38472
"
"d16311f8bbf5183d264f03999fbb90c3fe448cdc","2009-02-18 12:26:37+00:00","Removed some unused GFX driver capability code and flags

svn-id: r38473
"
"b9d3c752b16f9239fccac2f9c9474245f12fce10","2009-02-18 12:35:24+00:00","Include the SCI engine when building ScummVM under MSVC

svn-id: r38474
"
"22340b6c3d7f1376e33e5315ad0554a9a99333a5","2009-02-18 13:28:52+00:00","Use 4444 overlay on PSP (instead of 1555).

svn-id: r38475
"
"cd6a141815677e3f36a0497f3e23ec5fee44cdee","2009-02-18 13:30:35+00:00","report kFeatureOverlaySupportsAlpha (knowing that nothing queries it, and it may even be phased out at some point).

svn-id: r38476
"
"2b8eba751e3bd88fb7f311bf2a8dc29111ac713e","2009-02-18 13:48:14+00:00","Honour alpha bits in applyScreenShading() (used in 'add game', 'edit game' and 'options' dialogs).

svn-id: r38478
"
"9658836f5d332b9e63605df9cde27be16ab11c4a","2009-02-18 14:08:21+00:00","Reverting commits which moved cfsml.pl and said.y, part 2
Hopefully, compilation should be fixed again

svn-id: r38479
"
"4c406e69eed2afa6cdb7216a163acc698435e172","2009-02-18 14:28:32+00:00","Added missing file savegame.cfsml (hopefully, compilation should REALLY be fixed now, sorry again...)

svn-id: r38481
"
"88bb21f9e12eecb374e0e828e8e5e0b8904b7d73","2009-02-18 14:49:24+00:00","Removed unused file

svn-id: r38482
"
"af3eb953b2920790072afd10f57119ca271b46c7","2009-02-18 14:57:03+00:00","Adding the files properly. Part1

svn-id: r38483
"
"8dc171afa929e050e993495c5da540995d5c0293","2009-02-18 15:05:00+00:00","restore removed files

svn-id: r38485
"
"802f28b96306b773e5fcd43af238d9cfca49b349","2009-02-18 15:06:24+00:00","move cfsml.pl to the tools/ directory

svn-id: r38486
"
"fd0d88f27f87b5ba070c4b96b36083344890445e","2009-02-18 15:07:19+00:00","Fix makefile

svn-id: r38487
"
"12b2757cf7b43e3597f092e8b67fd163237ae1aa","2009-02-18 16:11:54+00:00","add -DDISABLE_TEXT_CONSOLE and -DDISABLE_COMMAND_LINE

svn-id: r38489
"
"1cb39726e5e2f1e12c7df67cd900d1e1a883ac4b","2009-02-18 16:35:24+00:00","Fix documentation, warning prints to stderr not stdout.

svn-id: r38490
"
"ec3fd15268090bc5dd133ad441e408cfb82e8533","2009-02-18 17:54:16+00:00","Updated the cfsml tool to silence MSVC warnings and to remove memory testing

svn-id: r38492
"
"7dfb902019684b8f54ab1c4f3196be029b174208","2009-02-18 17:57:57+00:00","Updated the savegame.cfsml file to remove unused functions and generated the appropriate .cpp file using the cfsml tool

svn-id: r38493
"
"70e3670f0220989cafe8ebc10d0a459207724b70","2009-02-18 18:03:52+00:00","Fixed warnings.

svn-id: r38494
"
"c13afb4fe63804a9764b3d2a15ba12c0d0897288","2009-02-18 19:10:17+00:00","remove not used code

svn-id: r38495
"
"c01b069b91c519b191f809d595e03967a04c118d","2009-02-18 19:12:13+00:00","missed to remove code from latest removal

svn-id: r38496
"
"766783b493b147076e434214a6aff6b3c2f8cd9b","2009-02-18 19:14:40+00:00","SCI: Some random cleanup

svn-id: r38497
"
"4493c757b533b6b8fa4222cbe2ce911c9e9b21f8","2009-02-18 19:19:29+00:00","SCI: Added G_DIR_SEPARATOR to scicore/resource.cpp for now (I'll remove it again soon)

svn-id: r38498
"
"dd30cc63825784e52879bf6c4acf0c4053d797e5","2009-02-18 19:35:35+00:00","remove dreamcast mixer platform code - no use for scummvm

svn-id: r38499
"
"57f78e5c0c24f83629c8814bd3150698b804104f","2009-02-18 19:45:34+00:00","update README

svn-id: r38500
"
"d059f38cf2fb73beb68d682e4831505c42f3bf00","2009-02-18 20:03:32+00:00","SCI: Moved util.h to the sci tools, as old_objects.* is the only code using (and requiring) it

svn-id: r38501
"
"a501d4dca0312db095ce15c9ba72e4b3ef3f0294","2009-02-18 20:08:49+00:00","Added methods to get information for the detected game version

svn-id: r38502
"
"18ea8081c03ca26a0604b9e8b8090d5af3672743","2009-02-18 20:59:12+00:00","XCode project updated with latest SCI changes

svn-id: r38503
"
"2af3529b1befeb06585b45d8228740606c6bdf40","2009-02-18 21:05:05+00:00","Added initial implementation of the fallback detector for unknown versions (version detection from the original executable will be readded and displayed in this part)

svn-id: r38505
"
"3e32b0a7916818ed79f0204d6a00c11b89e5ff65","2009-02-18 21:57:15+00:00","remove not used includes

svn-id: r38506
"
"46eb365c77d53bef8d1424f72bd730ebb5bcbbcb","2009-02-18 22:04:06+00:00","update msvc9

svn-id: r38507
"
"7d73e8ccc4d014a582c72f9877a95d8005fc7c20","2009-02-18 22:07:15+00:00","cleanup

svn-id: r38508
"
"7e5dba8940166dc737e90d7570749813e1c2f802","2009-02-18 22:20:28+00:00","Readded the code which reads the version from the original executable to the fallback detector (still very hackish...). This is probably the only known way currently to determine the version used by each game variant and add appropriate game flags

svn-id: r38509
"
"e6179b7ebd8e0dbff5436bf26975a82da9e612a8","2009-02-18 22:28:17+00:00","Synced the SCI MSVC project files

svn-id: r38510
"
"b500162ea95b6a986876edb87deabd6595cfdf48","2009-02-18 22:41:57+00:00","formating

svn-id: r38511
"
"288445abb2ba373dd541ba663837bc00af8e7096","2009-02-18 22:46:01+00:00","formating

svn-id: r38512
"
"60094239df23cd3fd41028f46a4857981081bf2a","2009-02-18 23:17:05+00:00","sync

svn-id: r38516
"
"030f8b2e4a88cd1095ae191220634272e16a518a","2009-02-19 00:08:35+00:00","The background sounds option, only applies to Simon the Sorcerer 2.

svn-id: r38518
"
"ad4f3fb4101638d88f253ecb3a7e521c7a0f8a94","2009-02-19 00:17:08+00:00","Last minute fix (enabling/disabling widgets mid-frame).

svn-id: r38520
"
"e7ee119603a6f2ca6a7893d145cc973b6cba637b","2009-02-19 00:37:34+00:00","Fixed regression in Options menu and disabled Save/Load buttons.

svn-id: r38524
"
"5778350053e96859844f5998a06056e890da40c1","2009-02-19 00:59:34+00:00","scan_file returns 1 if there's a failure, not 0; correct version_detect_from_executable to use that properly

svn-id: r38528
"
"ee16e35bb6c86323d69937992e34ac214e2005c2","2009-02-19 02:04:31+00:00","- Fix finding versions from exe's
- Fix fallback detection
- Make getVersion() return an int instead of a uint16 which makes the version lose precision and the 'major' version can get lost.

svn-id: r38529
"
"3c7d122ad2da98133c1a8a72a36563ab563eac2b","2009-02-19 02:18:46+00:00","Update win32dist.

svn-id: r38530
"
"a427d11c27a751acdd5f622b0a39e6d514059950","2009-02-19 02:26:09+00:00","Fix kq4 start (it was using the wrong version).

svn-id: r38531
"
"b595d2815b5ea2a6dc84eff98a517a2862f15b6f","2009-02-19 03:05:35+00:00","Update SCI version for Kings Quest 4 (Amiga).

svn-id: r38532
"
"bc6f48472a78775eb9fc61287b7cac86cc6eec96","2009-02-19 03:12:04+00:00","Update SCI version for Leisure Suit Larry 2 (Amiga).

svn-id: r38533
"
"3d78df8d638584f8529c7abe37ec092170869d9a","2009-02-19 04:14:16+00:00","Update SCI version for Space Quest 4(Amiga).

svn-id: r38534
"
"0ac07498102218f1c0ba83b82bff15dcd439abf4","2009-02-19 04:16:20+00:00","Fix SCI 1.1 detection.

svn-id: r38535
"
"f3d8087dd3a5aa92ff020b38536bc9c6ac496b23","2009-02-19 08:18:50+00:00","Updated so z:\ paths will be reported properly as a directory and valid path.

svn-id: r38536
"
"8ca98d41a23d7f26162bae3784fb3be3e5e5fcac","2009-02-19 08:43:28+00:00","formating

svn-id: r38537
"
"2f2f262062d54e80811e2c53cecebc7ce8137203","2009-02-19 08:44:53+00:00","formating

svn-id: r38538
"
"fc6221e781001f3f59e5b6822d94c00c24bae51c","2009-02-19 09:55:40+00:00","Moved a set of static arrays into the staticres.cpp file

svn-id: r38539
"
"935e748e624b307647208c7072bd6a8c8424cf08","2009-02-19 09:57:39+00:00","In progress work on cleaning up the font system - giving proper variable names, types, and converted memory accesses to endian safe structures

svn-id: r38540
"
"b2c0f6181701f55ba4ae90ab21f451f2d848b6bd","2009-02-19 09:58:33+00:00","Initial work on correct engine pausing

svn-id: r38541
"
"59db1e85f3dfcad29a6e030aedce039cb2a67661","2009-02-19 11:08:11+00:00","Merged the contents of fontCharacterTable into staticres

svn-id: r38542
"
"6f4a8dedbe8142d81e6b35a9010005887ea8d1ce","2009-02-19 12:42:32+00:00","Rewrote the EXE reading routines (the LZEXE compression stuff is still not completed, and will be implemented in a follow-up commit)

svn-id: r38543
"
"2ce63815f3bab79bbe1534420bbfef2080079e48","2009-02-19 12:45:32+00:00","Updated the MSVC project files of the SCI engine

svn-id: r38544
"
"6fdf95e9b8482e7ef0f3761e889ec32e2f38f81d","2009-02-19 13:36:38+00:00","Add patch #2615978 - Fix SCI version for Eco Quest.

svn-id: r38545
"
"b433a18bcf1023f8bcd73f369dd2ce72ffefbcbc","2009-02-19 13:44:10+00:00","Add patch #2616093 - Add/update Quest for Glory 4 details.

svn-id: r38546
"
"f134763553a5502b3d3ac58f574a38fbda15f9fa","2009-02-19 13:51:45+00:00","Add patch #2611827 - Add English versions of Laura Bow/2.

svn-id: r38547
"
"3abc4c8842b87c7302f9443bc9baa7cc9d6727da","2009-02-19 13:54:50+00:00","MKID_BE() does not work that way. Moreover, it even fails to compile on my 64bit system because of 'loss of precision'.

svn-id: r38548
"
"9ac6dbf9ebc2e8ade82b2bff596f2a674d9160f1","2009-02-19 14:40:24+00:00","Fixed version checking for unpacked executable files, and updated the SCI version for an entry for PQ2

svn-id: r38549
"
"1bbc8cf5e8e2da10db3ad2dea6fdceecfe3edb6a","2009-02-19 14:47:30+00:00","Corrected erroneous use of MKID_BE

svn-id: r38550
"
"af7ecbf06085a1e7a35cef9494daa460eb7af050","2009-02-19 16:17:08+00:00","use READ_BE_UINT32() function to read a 32-bit Big Endian value.

svn-id: r38551
"
"6c1b9b6d956dae8c7683dff37008cb41a4f41815","2009-02-19 17:40:13+00:00","Fix #2614150 - DW2: Repeating SFX that should stop/pause don't

svn-id: r38552
"
"6a0ffca914a019221460f005da3c51b46e443eb5","2009-02-19 17:40:55+00:00","Used the LZEXE unpacker from the teenagent engine. The SCI version detector now works with LZEXE packed executables too

svn-id: r38553
"
"352802bba68ac2ad59e7d8c4a67ecdc1910ee9a4","2009-02-19 18:02:51+00:00","formating

svn-id: r38554
"
"4e052e4d1c07fc179416557dc4a34d0a0ade08b8","2009-02-19 18:08:44+00:00","formating

svn-id: r38555
"
"ade3c8f56551d01aad7fc7d4f710e3a19088392e","2009-02-19 18:11:05+00:00","formating

svn-id: r38556
"
"c6e9e3d9bc2d33d03aadff65e128c94e721707c8","2009-02-19 18:33:43+00:00","formating

svn-id: r38557
"
"7beba8edc996cedb956fd8a689980cbbeb38bcb4","2009-02-19 18:40:03+00:00","formating

svn-id: r38558
"
"680684c66faa5a61228f694b8361379edba77d28","2009-02-19 18:45:09+00:00","The current list in the detector is not really useful. We need the SCI version used for each variant of every SCI game. Therefore, all the detection entries have been disabled, apart from the few versions which I have and was able to verify the SCI version used. Please, specify the SCI version in disabled entries and re-enable them.

This was done to prevent issues with incorrect game entries in the future, as game entries with incorrect SCI versions won't work correctly

svn-id: r38559
"
"427196cde4398168eec75ae06dd0b8d8bb1c2b98","2009-02-19 18:52:00+00:00","formating

svn-id: r38560
"
"51f0a3bf7edac01d0d7036b3f1d0e7aa16aea504","2009-02-19 19:03:41+00:00","enable Larry 3 DOS English.  The MD5s match and its sciv.exe has 0.000.572

svn-id: r38561
"
"2595783e9fc522e5c6d37672b230b409024e34e5","2009-02-19 20:20:14+00:00","Function call order in expressions isn't well-defined. Also fix missing shift and moved some comments.

svn-id: r38562
"
"09c38836120def69debed41e58c1c75488835f87","2009-02-19 20:47:06+00:00","don't give up scanning files after one potential executable (such as sierra.ico...)

svn-id: r38563
"
"65f92d652588c27284ef0258327f760197c8a30a","2009-02-19 20:50:55+00:00","formating

svn-id: r38564
"
"cf559f631ba32cd15861f72fa91fb1c932fd8ce8","2009-02-19 22:02:22+00:00","Re-enable some entries which I have verified (or Kirben verified in some earlier commits). Also, remove the printf's from the fallback detection code; it would appear when detecting non-SCI games, which is not the intended effect.

svn-id: r38565
"
"f0aa58da1f0ddad2a201007fb5b0b6a08d5acb60","2009-02-19 23:01:04+00:00","- Do not break after finding an executable in SCI fallback detection, as we may not have found the resource files yet.
- Re-enabled codename iceman amiga and fix amiga fallback detection.

svn-id: r38566
"
"58854c6acb35046cddc1738129fa7faa15755aab","2009-02-20 00:17:56+00:00","Updated some versions in the detector

svn-id: r38567
"
"034f63f0950e18d231a9a971741e0c966d980522","2009-02-20 00:27:27+00:00","Re-enable some more Amiga entries.

svn-id: r38568
"
"45d3382c9ad76395ca352e983396a0c1b6a6f7d4","2009-02-20 00:31:22+00:00","We only got 1 mixer - removed the unneeded file mixers.cpp

svn-id: r38569
"
"a566728ab84110b8f4b983ba61f762e2e9d25903","2009-02-20 00:33:23+00:00","Updated the MSVC project files of the SCI engine

svn-id: r38570
"
"ed0c75e73f6f5b78761740ad632c1ffcb7db3d1c","2009-02-20 00:34:15+00:00","Synced the project files of the cruise engine

svn-id: r38571
"
"10f9f18b3af3199a3f5ce414b695da444d9355b1","2009-02-20 01:48:25+00:00","Add entries for some SCI demos

svn-id: r38572
"
"2b214ed5bcae48902f28b3cdd3c2c9a9e8209e18","2009-02-20 03:33:58+00:00","Avoid conflicting targets for King's Quest 4.

svn-id: r38573
"
"422ebda3ba103cbf29ea219df00079b25d27ed7c","2009-02-20 03:46:00+00:00","Add change from Quietust, to fix MSVC 7.1 compile.

svn-id: r38574
"
"21a13c32194da59926e8231eb9c50ffe9bbaaf5e","2009-02-20 03:56:42+00:00","Disable MSVC warning, which is frequently paranoid.

svn-id: r38575
"
"77e2cfb138591eaf14ad485f4e6222fb17d3f577","2009-02-20 04:02:02+00:00","Add another English DOS version of The Island of Dr. Brain

svn-id: r38576
"
"3ec4194924d8ee1056ac9be9fb8015e0957eb827","2009-02-20 04:02:50+00:00","Ooops, remove excess zero.

svn-id: r38577
"
"efb806554ea78c48c249619a1dea0c345a0f2166","2009-02-20 04:09:16+00:00","Correct typo in project files, which caused SCI engine to be disabled.

svn-id: r38578
"
"9e340004ff100e247d51b1b7fd213f5f1120088a","2009-02-20 04:16:08+00:00","Update comments.

svn-id: r38579
"
"0155a1d0b4aeea44c7f27405675bbb2c52d660d6","2009-02-20 04:23:18+00:00","Enable Eco Quest again.

svn-id: r38580
"
"7886aedebb0e09ebfec62498293c42fdece69f02","2009-02-20 10:49:43+00:00","Fixed a nasty regression from the script system rewrite (commit #35670), which will cause crashes under certain conditions, and probably makes SAGA games non-completable.

When a script thread is waiting for another thread, the current instruction offset should not be modified. The thread processing function would incorrectly continue in some special cases, and would incorrectly alter the current instruction offset. This becomes apparent in some special cases only, which made it hard to spot - plus, SAGA games have not been tested for 0.13.0, so there weren't any reports for this.

This change SHOULD go to the 0.13.0 branch, but we've already tagged...

svn-id: r38581
"
"87f1ad3b193c28146b59da096d2b4a1f03d63ace","2009-02-20 11:45:06+00:00","Add COPYING.LGPL to dist/install for several platforms (osxsnap still needs an update).

svn-id: r38583
"
"c9df4610711a8f111a81034c37e80bc055558059","2009-02-20 12:32:48+00:00","Remove scummclassic.zip from packages, since it is built in.

svn-id: r38588
"
"20d0395b6931aeb2b78bafbb9fb91096c279221f","2009-02-20 14:45:28+00:00","- Moved SciEngine code to sci.cpp
- Fill the platform on fallback detection
- Report unparseable version strings
- Map known non-numeric version strings to their numeric counterparts
- Fix a crash caused by uninitialized LZEXE data

svn-id: r38589
"
"c3ffac5e6245a20b3311cedf619e3a6f5e40b02c","2009-02-20 15:20:48+00:00","SCI: Removed unused file

svn-id: r38591
"
"a2aba2f18e7bac99f21d095b9ccaaa19924e2e46","2009-02-20 15:24:22+00:00","SCI: Renamed resource_mgr_t -> ResourceManager; added remark to 'the other resource manager' that it should be renamed to GraphicsManager or so

svn-id: r38592
"
"f78f2aeafcbd40059765a46d4d4bd7c11e1af84e","2009-02-20 15:41:58+00:00","SCI: Renamed resource_source_t -> ResourceSource; some cleanup

svn-id: r38593
"
"7422e98f8f3be70347243b353144178dfd248fcd","2009-02-20 15:44:22+00:00","SCI: Added TODO suggestion to change the vm opcode switch/case to an opcode table with methods for each opcode (helps to separate code and deal with changed opcode numbering in other SCI versions)

svn-id: r38594
"
"617c63c1ede44de5f64ffab29842b233575032c1","2009-02-20 15:47:37+00:00","SCI: Removed unused allow_patches param/member

svn-id: r38595
"
"e736b7fa625f6155737fdad333d337dd282096a8","2009-02-20 15:55:59+00:00","SCI: Renamed some ResourceManager members, cleanup

svn-id: r38596
"
"bc360ee5258b44ab2e08adb70d619a230027ee29","2009-02-20 16:03:50+00:00","SCI: Started rewriting file handling. Warning: This will likely introduce
regressions, but we just have to start somewhere.
- factored out some common code in engine/kfile.cpp into a separate func
- replaced many uses of chdir, getcwd, sci_init_dir etc. by equivalent
or better functionality from SearchMan etc.
- replaced many uses of sci_open and sci_fopen by using Common::File
and Common::Stream
- C++ified some stuff
- simplified ResourceSource a bit (loosing some unused functionality)

svn-id: r38597
"
"5066e2c4be7cee089ae5c35b77a2b78015b83e42","2009-02-20 16:18:08+00:00","formating

svn-id: r38598
"
"823d924064a11cb2f58df76451e2d038dc41220f","2009-02-20 16:19:29+00:00","fixed compilation

svn-id: r38599
"
"f4719cf79c32ba8797ef6803100acd65bf925572","2009-02-20 16:22:09+00:00","formating

svn-id: r38600
"
"75f9d5457ad62b72c4aae95bdced0c19e66f6f13","2009-02-20 16:30:22+00:00","formating

svn-id: r38601
"
"2f4fc293e79025150a621c41a268f86da031957d","2009-02-20 16:34:21+00:00","Used parentheses to indicate operator precedence (I hope I got them right)

svn-id: r38602
"
"ac4fe7a4bc492f1d83f80f2fef4f6c2b652bee1b","2009-02-20 16:59:05+00:00","formating

svn-id: r38603
"
"61231c2a366de64d7e09697a6ca78869dcd8cf4b","2009-02-20 17:05:47+00:00","formating

svn-id: r38604
"
"b70f3ba6030344de7dcac9d2c63fc1f4606ddfef","2009-02-20 17:09:22+00:00","formating

svn-id: r38605
"
"947a296d33c63a1b82ad5a205b5dd2a204cac864","2009-02-20 17:23:54+00:00","formating

svn-id: r38607
"
"2f224a9efab1ca5a8569340fa62c1598cce31b19","2009-02-20 17:29:22+00:00","add README.PSP to update-version.pl

svn-id: r38608
"
"0fa42dffac8ee2f873bd39b7d708e45aec647d8f","2009-02-20 17:32:03+00:00","remove old file

svn-id: r38609
"
"b4f184c583b2deeec871bc01f1d930cede447f7d","2009-02-20 18:34:06+00:00","Fixed configure on systems without mktemp.

svn-id: r38610
"
"08cd2c8806e7b795655763ced8f417eb2d69ff4d","2009-02-20 19:08:38+00:00","formating

svn-id: r38612
"
"7fdf8021d8853af5d8d3725c3fbcf50bf5c7bfd2","2009-02-20 19:32:27+00:00","use new instead of malloc for int_hash_map_t

svn-id: r38613
"
"054f1fb5145b6e29af786e4f31a49d193f152ecc","2009-02-20 19:42:19+00:00","Slight formatting update

svn-id: r38615
"
"208016649999ae89a2bba1f382f4f9fdbdd519b2","2009-02-20 20:01:31+00:00","formating

svn-id: r38616
"
"ac716ad843e386e69a2c865556a4af6e693f9530","2009-02-20 20:11:12+00:00","Started conversion of debug messages and debug levels to the ScummVM equivalents. Removed the 'stubs' and 'warnings' debug levels and replaced such kinds of messages with normal warnings

svn-id: r38617
"
"61b9086fcffc5cb88b98524599d089330452776e","2009-02-20 20:17:57+00:00","formating

svn-id: r38618
"
"75b91c71dd4983ef9407b2a1713c22988702958d","2009-02-20 20:31:08+00:00","restored formating

svn-id: r38619
"
"1419024bd02aac9c7a3405f34d9cfd6bf38a8447","2009-02-20 20:33:27+00:00","formating

svn-id: r38620
"
"2ddce51a56a73acaa2bc1170d6c6ab087e1170c4","2009-02-20 20:39:02+00:00","Changed more messages to warnings/errors

svn-id: r38621
"
"8a15a72ec81c5c4814e3e989d50966e0e8350ac6","2009-02-20 20:55:35+00:00","formating

svn-id: r38622
"
"9582e485747221341ae189468db8a63284b9f2a8","2009-02-20 21:26:31+00:00","Some initial code for a debug console (still non-working)

svn-id: r38623
"
"720b013ac8ee9998f623f1eab30361f973f92e8a","2009-02-20 21:32:24+00:00","Updated the MSVC project files of the SCI engine

svn-id: r38624
"
"435844c61e098f3e0bcc0acdab6e2fc26740e0b8","2009-02-20 21:38:38+00:00","formating

svn-id: r38625
"
"3ec65a052a6e3f9791dc726402e841ba120736e9","2009-02-20 21:46:49+00:00","remove README, it's pointless

svn-id: r38626
"
"a69ec5686997b9e23437861fa2312790d1d04cb2","2009-02-20 21:47:51+00:00","Fixing compilation for me

svn-id: r38627
"
"77542e8623372645eac417328645644676b894f1","2009-02-20 22:12:48+00:00","formating

svn-id: r38628
"
"637fa528f60e0995368199c69ba5b0b75fdbbad6","2009-02-20 22:17:14+00:00","Changed some non-fatal messages back to warnings

svn-id: r38629
"
"5768eb8c4368e6867355cd461f2a0ea77b084326","2009-02-20 22:18:41+00:00","Add English version of Humongous Catalog Preview and Russian versions of two HE games.

svn-id: r38630
"
"1a9253bc5e505c6cf3af12b726c7ba8cbf8ca7cd","2009-02-20 22:19:11+00:00","Remove unused code (gfxr_interpreter_needs_multicolored_pointers)

svn-id: r38631
"
"701279fb40c1de64a8e2ed0ee57f6370463f8fd5","2009-02-20 22:21:33+00:00","Changed some SCIkdebug() calls to debugC()

svn-id: r38634
"
"037f56f7197590669f0dc0beb6aa5ba8794325d5","2009-02-20 22:29:49+00:00","formating

svn-id: r38635
"
"dbb81ab516316d640336153714d1c90622bbdc1b","2009-02-20 22:32:56+00:00","formating

svn-id: r38636
"
"478257f624cf665b315192ebab48732c54bbcc4b","2009-02-20 22:43:13+00:00","Instead of reading an entire compressed sound into a memory stream, use a
slightly extended SeekableSubReadStream to stream the sound from a file instead.
This change is experimental, so it should almost certainly not go into 0.13.

svn-id: r38637
"
"ab4f1d69adc77d6b899539d83bce568efe57dd00","2009-02-20 22:47:05+00:00","Since opening a compressed piece of music should no longer be an expensive
operation, we can probably keep the mutex locked throughout the entire
streamCompMusic() function. I'm not convinced that it was ever safe to unlock
and relock it partway through. In fact, that's my prime suspect for bug #2614306
('BS2: noise in music or speech').

svn-id: r38638
"
"dc792f22651c8d8d9e08e4ffd90b63aeafad288c","2009-02-20 23:00:27+00:00","Add detection for the SCI christmas cards.

svn-id: r38639
"
"fc28525969dc56b08ec1535ac5d2d29a04729ef7","2009-02-20 23:09:29+00:00","formating

svn-id: r38640
"
"65f7ba86ce4a038ec33559fc8fbf00d5d5901968","2009-02-20 23:17:13+00:00","Reverted #38631 and readded gfxr_interpreter_needs_multicolored_pointers - apparently, it's needed for SCI1.1 support

svn-id: r38641
"
"80868065e64000b4f25ad7d6207376ceffabc969","2009-02-20 23:19:47+00:00","Downgraded some errors to warnings and printf's

svn-id: r38642
"
"880aba2f43218d09e7d4fc66e747753ea9190873","2009-02-20 23:23:58+00:00","fixed warning

svn-id: r38644
"
"c729101d5bc41586d7f8ac63feea56e9d4ee59e9","2009-02-20 23:24:46+00:00","re-enable warnings as errors

svn-id: r38645
"
"f6b4c2544bb6ae8c682bed79fc6806aa90013192","2009-02-20 23:26:30+00:00","Switch errors back to warnings, to fix SCI 1.1 regressions.

svn-id: r38646
"
"6e1250fed10234d79bc808f4c3bca2a397c55e6a","2009-02-20 23:28:25+00:00","ups

svn-id: r38647
"
"c5abad4deaca7f9cdc8f0dedeb656779cac3a703","2009-02-20 23:31:00+00:00","Switch error back to warning, to fix SCI 1.1 regression.

svn-id: r38648
"
"abbca80d6190c1bd183ad3794dbb5b8103a7c833","2009-02-20 23:41:15+00:00","Converted SCI saving to use saveFileMan. Instead of a savegame being
a directory with an id and a state file, a savegame now consists of
two consecutive CFSML-serialized structs: SavegameMetadata and state_t.
The former contains the savegame title, and is loaded when scanning saves.

svn-id: r38649
"
"9b2029a7a8878d3cae7411c48d55c2415bb1736c","2009-02-20 23:47:11+00:00","Minor consistency change.

svn-id: r38650
"
"7bc4b8667ee404a283677484e5c2b271101b3344","2009-02-21 00:18:02+00:00","avoid vsscanf

svn-id: r38651
"
"0901c90654f44f73d2eefb589c38cc76e39364d8","2009-02-21 02:59:45+00:00","Advanced detector: Slightly more verbose debug output

svn-id: r38652
"
"5ea92c4c6776196fe57358714c863fc28edcd3dd","2009-02-21 03:13:21+00:00","SCI: Re-enabled detection of my KQ5 version

svn-id: r38653
"
"e9e2136c1a83be24214ea4d6b0839dc9f621ca18","2009-02-21 03:24:35+00:00","SCI: cleanup

svn-id: r38654
"
"031e3e3b9081ad955d4ef814829c83f4b51792f0","2009-02-21 03:25:23+00:00","SCI: Fixed tons of bugs in error/warning format strings

svn-id: r38655
"
"c8ea2dce5f1beb99f50e741fd66cbd4075ca8345","2009-02-21 03:32:13+00:00","SCI: Fixed more warnings

svn-id: r38656
"
"ecaab0fe944811b44ae1ecf1157264623bda2b1f","2009-02-21 03:59:57+00:00","SCI: Fixed warnings in engine/savegame.cpp, by improving cfsml.pl; also improved the build rule which is responsible for creating engine/savegame.cpp from engine/savegame.cfsml

svn-id: r38657
"
"bcb1a71052948d61474076615d6641f7b2153599","2009-02-21 04:10:21+00:00","SCI: Fixed more warnings

svn-id: r38658
"
"cb6b1fc90303cff2f7bff4533fbb2644c4373bec","2009-02-21 04:23:43+00:00","SCI: Regenerated said.cpp from said.y

svn-id: r38659
"
"7c87b4901dd6de93511cf7995931b64e59d13fef","2009-02-21 04:25:56+00:00","SCI: Use GCC_PRINTF hint to the compiler for _SCIkprintf and sciprintf; fixed tons of bad format strings

svn-id: r38660
"
"fa75bd23e6b710d2f225c9162ca651e7e518ce75","2009-02-21 04:43:49+00:00","SCI: Yet more cleanup

svn-id: r38661
"
"e088f680a689a2bd5fc51e1986af51a51bf14548","2009-02-21 04:44:20+00:00","Fix for bug #2619824. Command list execution is now paused when showing credits. This fixes the Amiga demo of Nippon Safes, which would otherwise quit without displaying the credits.

svn-id: r38662
"
"3874465bdbb6d4449f0bb803e8d8db955757c872","2009-02-21 05:19:35+00:00","Fix for bug #1864270. Music now goes on after the the credits have been displayed in the Amiga demo version of Nippon Safes.

svn-id: r38664
"
"30848dec141c40c0f2f3793de329913903443396","2009-02-21 07:42:23+00:00","formating

svn-id: r38666
"
"65aa80600519277bb9892c66abac177c246c8d39","2009-02-21 07:43:46+00:00","disable warnings as error, said.cpp generate warnings from bison generated parser

svn-id: r38667
"
"328214940b5f99ecb4e385d53793e6776aa641af","2009-02-21 08:16:04+00:00","formating

svn-id: r38668
"
"a58493656894693ef242c9e2d31185c24e822e41","2009-02-21 08:47:07+00:00","formating

svn-id: r38669
"
"ecf0cbe94e8e57a29b5a920623d6884e371de2fc","2009-02-21 08:56:49+00:00","formating

svn-id: r38670
"
"0d3f2573c6ab40c0e8cdd82de1e9f321611d36f1","2009-02-21 09:10:14+00:00","formating

svn-id: r38671
"
"9ad232e5cfac377b8a1b763683e19358b3d56c37","2009-02-21 09:39:10+00:00","formating

svn-id: r38672
"
"ea495756897eafec48ab93f97e978df4c5593f1f","2009-02-21 09:44:53+00:00","formating

svn-id: r38673
"
"14150200d4e91595f6dece83ec4d5f63ce338114","2009-02-21 09:45:34+00:00","Implemented SciEngine::getDebugger()

svn-id: r38674
"
"44ea7966108cf56df4a4eb3fd0b2b7df31d937e1","2009-02-21 10:05:31+00:00","formating

svn-id: r38675
"
"25f7c371718f74eb26fed5bd66a803f220c89c3b","2009-02-21 10:23:36+00:00","Wrapped the SCI engine in the Sci namespace.

svn-id: r38676
"
"5d67e3de0f941fc3008c0609f8f9e8bb08ff1713","2009-02-21 10:44:06+00:00","Updated xcode project

svn-id: r38677
"
"3cc6cdf71942aba796f8d282020d1955f2fd84ef","2009-02-21 10:47:56+00:00","Replaced 'typedef struct _state state_t' with 'struct EngineState'

svn-id: r38678
"
"d8d6aaa461ad8e72b97cb6cc05ee5809943ddf3a","2009-02-21 11:04:47+00:00","Replaced 'typedef struct _seg_manager_t seg_manager_t' with 'struct SegManager'

svn-id: r38679
"
"c3068549da7bf05483263ce041b3fd863d9ef92d","2009-02-21 11:22:56+00:00","Cleanup.

svn-id: r38680
"
"17def116585b3cad1a4f0ee882c89921b97d7793","2009-02-21 11:24:16+00:00","map dpad right to the predictive dialog

svn-id: r38681
"
"c39b5f5c6f2a692d60488c12c35f30ac55910d06","2009-02-21 11:26:50+00:00","force inventory redraw after a game state load (inventory should now be ok when exiting GMM, should fix #2603197)

svn-id: r38682
"
"baa7c7b997d68d434f78a917725368234871bdfc","2009-02-21 11:26:54+00:00","remove some endlines from warning() calls

svn-id: r38683
"
"ab11da060221e05a0f0d4ee12a9ad3becd372606","2009-02-21 11:27:04+00:00","Allocate the background sound handle dynamically. Otherwise, it seems to me as if
it should be invalid as soon as the makeMoviePlayer() function ends. While that
never caused any noticeable problems for me in Broken Sword 1, it broke things
in amusing ways when I tried to rewrite the Broken Sword 2 cutscene player along
the same lines.

svn-id: r38684
"
"db7073b15a063c6e4f683076bb25d413e3cd3a28","2009-02-21 11:29:56+00:00","cleanup

svn-id: r38685
"
"f582debaa926297158a0baed9484a09153806060","2009-02-21 11:53:27+00:00","formating

svn-id: r38686
"
"2784e08a90c1279e431374051ee5515010eabefd","2009-02-21 12:08:52+00:00","disable BREAKPOINT macro and remove exit() macro, as they conflict with SCI building (and aren't used anymore anyway)

svn-id: r38687
"
"f069c04c60abf8616b258c9550f31b6b58ece787","2009-02-21 12:16:35+00:00","formating

svn-id: r38688
"
"3988062776a0b1c3775807b8f733382c4c1d838f","2009-02-21 12:21:15+00:00","replace #ifdef WORDS_BIGENDIAN by SCUMM_BIG_ENDIAN

svn-id: r38689
"
"1cbe5c327dce7fe1a03d1917e171415921bcdcd6","2009-02-21 12:26:10+00:00","replace obsolete creat() with open()

svn-id: r38690
"
"7e2bc28184db1473d9e98f9ab791ed9012130d4f","2009-02-21 12:33:24+00:00","formating

svn-id: r38691
"
"c0b2ec8dd2ef2585e4d1c1df759a92e709b453df","2009-02-21 12:42:06+00:00","formating

svn-id: r38692
"
"d11948a01cc234c84f122f7c9febc69b39a00d8f","2009-02-21 12:43:37+00:00","formating

svn-id: r38693
"
"177c4169d1bbf838316de55e61acfb8136e9c794","2009-02-21 12:58:09+00:00","error() calls don't need \n, as it is already appended in error() itself

svn-id: r38694
"
"7ce7993c30225f3c28ce2a8d68935ef03a6e7175","2009-02-21 13:19:44+00:00","Remove excess \n.

svn-id: r38695
"
"34f90ac043230f049c58aaaf843ac347e0fc5c21","2009-02-21 14:11:41+00:00","revert large parts of r38621. error() is for fatal errors and does not return. warning() is not for debugging status messages.

svn-id: r38696
"
"6e2848ff9825125f43c67a59ad4c922398d9255c","2009-02-21 15:07:05+00:00","Rewrote the cutscene player to be more like the one in Broken Sword 1. This fixes
a subtitle colour regression, but mainly it simplifies the code. The 'dummy'
player has been removed. There are almost certainly regressions, but I'm hoping
it's stable enough for testing now.

svn-id: r38697
"
"58fa6822c6fe24f9c89d90ff9bec429912dc62b5","2009-02-21 15:20:41+00:00","formating

svn-id: r38698
"
"98fc4c20c5910e92a76cfbdb39c12752b4850b65","2009-02-21 15:25:37+00:00","formating

svn-id: r38699
"
"03769a6d561168fa54af647785321564056483f1","2009-02-21 15:30:47+00:00","formating

svn-id: r38700
"
"e514d9780afa2703c6293c782e1f50712ad764fa","2009-02-21 15:40:14+00:00","use OSystem::getMillis() for last_wait_time and get rid of game_start_time

svn-id: r38701
"
"e643565c2c6a6b9cae13bd338261706ffb597a0e","2009-02-21 15:58:50+00:00","Compensate small lags in Util::waitEndFrame(), so that the CD audio intro sequences in Gob1 and Gob2 CD hopefully won't de-sync so easily

svn-id: r38702
"
"7c26fb94d9466105af29fa36c70f36382908605f","2009-02-21 16:04:16+00:00","missed a file in r38701

svn-id: r38703
"
"709d98be7c1d800c9102a28dee937670521f206f","2009-02-21 16:07:51+00:00","GFX_ERROR messages need \n

svn-id: r38704
"
"1ee65390cd634ba9b432843f11d51cdff0401320","2009-02-21 16:08:04+00:00","formating

svn-id: r38705
"
"d23166c2a1bc8747dbc0684320eeba5f4ffd254f","2009-02-21 16:20:53+00:00","formating

svn-id: r38706
"
"dc446169ba12eb7170874e8f24c4f0d8e19e8cfe","2009-02-21 17:13:05+00:00","fix translation of F-keys

svn-id: r38707
"
"a0cc744aab81339653ad0b185cfb90bb90cf4410","2009-02-21 17:15:26+00:00","fix translation of shift-F-keys too

svn-id: r38708
"
"f18d5500b1a3fc78c3190c8c2dbce8c6abf5095c","2009-02-21 17:23:28+00:00","formating

svn-id: r38709
"
"51bb24626a422664684e1d70484944b7c9809557","2009-02-21 17:24:02+00:00","update

svn-id: r38710
"
"8a95f02abfabb04972a6c85fbc655e53ae7a54f6","2009-02-21 17:24:50+00:00","LOL: some work on inventory/item handling

svn-id: r38711
"
"a5cf6bfd856df282360b1b04646e2fe0dc33dae6","2009-02-21 17:29:03+00:00","cleanup

svn-id: r38712
"
"199121a04e1e753cf732ed0d6e4a4d50487339c4","2009-02-21 18:06:00+00:00","SCI: Replaced sci_sched_yield based 'mutex' in SCI mixer by a regular ScummVM mutex

svn-id: r38713
"
"3cd9706c63330403e8d9ef3071697909bbb1f652","2009-02-21 18:12:02+00:00","Now that we've placed everything under the Sci namespace, the Sci:: bits can be removed

svn-id: r38714
"
"11b2ddfc5450fda4638dd264f576e48d17d85b12","2009-02-21 18:13:03+00:00","SCI: Simplified gcd (and fixed crash when a = 0, not that it would be relevant ;)

svn-id: r38715
"
"426def4f44a2997163632058cd4b6b21a61e533c","2009-02-21 18:16:17+00:00","Turned back all fprintf/exit(1) bits into error()

svn-id: r38716
"
"6acf734ab83f113b56403e96b0d8ab2aa01ea047","2009-02-21 18:17:08+00:00","Oops

svn-id: r38717
"
"273271767b1a38a35765b3525b35273b0f22835f","2009-02-21 18:20:40+00:00","When using error, no need to add a trailing newline

svn-id: r38718
"
"b6c9b12e64426e57c24dc4742bed641546bbe395","2009-02-21 18:21:00+00:00","SCI: Got rid of sci_sched_yield

svn-id: r38719
"
"0d41ca8d38ce6c604a2a7c9c763b9bf92dd5a9c9","2009-02-21 18:28:38+00:00","SCI: Moved scicore/tools.cpp to tools.cpp, and include/resource.h to tools.h

svn-id: r38720
"
"9f2c0dcc6f5c278fa06be8d0fdfaf69c27b40282","2009-02-21 18:39:53+00:00","SCI: Tons of cleanup

svn-id: r38721
"
"9036c0fee0887f2567a3c04a2f29c95fc46d049d","2009-02-21 18:46:03+00:00","Renamed SCI's console to sciconsole (MSVC has problems with files with the same name under different directories). ScummVM's console can be enabled correctly under MSVC now

svn-id: r38722
"
"9260fd38b85fe5c3aba863aaa2108f1bad3bbc69","2009-02-21 18:56:17+00:00","Fixed compilation under MSVC

svn-id: r38723
"
"6bb73e3b685118cf6d906f985c25d766860767ad","2009-02-21 18:58:32+00:00","Fixed startup of my floppy version of SQ4

svn-id: r38724
"
"c5e00f3de2f52db870b329fecdc22dd5149b6553","2009-02-21 19:01:32+00:00","SCI: More cleanup

svn-id: r38725
"
"798a795b5ed78b1ae4817d8e49bb281d65ad921b","2009-02-21 19:01:34+00:00","proper fix for random crashes with vga devices

svn-id: r38726
"
"f00f020d0821bed6dcf041cc65980134487ae67b","2009-02-21 19:04:27+00:00","SCI: Moved sci_dir_t and GTimeVal to tools.h

svn-id: r38728
"
"6f022278e6ce10cf1df9b6b2696c09deaeb757d9","2009-02-21 19:06:34+00:00","SCI: Removed unused header

svn-id: r38729
"
"c9793552af624510eba3ed4d0c97c60bd5bad08a","2009-02-21 19:16:38+00:00","replace sci_gettime

svn-id: r38730
"
"d451c7794d0980524ed470bc8b0dbcd14d7e8e2b","2009-02-21 19:21:55+00:00","update readme for release 0.13.0

svn-id: r38731
"
"1bbde7be4ebcd2d61ee1f10a7bd49c6546837c8a","2009-02-21 19:27:06+00:00","SCI: Changed decompressors to take advantage of Common::ReadStream::readUint16LE; cleanup

svn-id: r38733
"
"dbfe031ef21c3f143e1fb229fda3dc9f1419d87d","2009-02-21 19:28:06+00:00","Updated the MSVC project files of the SCI engine

svn-id: r38734
"
"eb37789f6f5fc4c37e93c612d9959fdaf65d1247","2009-02-21 19:33:01+00:00","SCI: Renamed include/gfx_*.h to gfx/gfx_*.h and likewise for sfx header files

svn-id: r38735
"
"c6e27ebfcd81318360b41ff1a3317959674d855f","2009-02-21 19:35:30+00:00","Fix compilation by implicit including of sys/stat.h

svn-id: r38736
"
"991dbfff2fa1396d82ee794c4fa8c9664022981d","2009-02-21 19:43:11+00:00","update

svn-id: r38737
"
"05107eaac1629776fc958a9560a4febdd2b661b7","2009-02-21 19:52:40+00:00","SCI: Changed getUInt16->READ_UINT16 and putInt16->WRITE_UINT16 in scicore/decompress01.cpp

svn-id: r38738
"
"a25c7debe1d730cbbb5509b81fe8d26bfd412d39","2009-02-21 19:53:20+00:00","update older msvc

svn-id: r38739
"
"041869ed360551d9ebc435a1e7dac418578f6a3b","2009-02-21 19:54:15+00:00","SCI: Untangling #include dependencies a bit

svn-id: r38740
"
"579e7628e3f24c977c7189b7748da3bcc1c69eef","2009-02-21 20:04:04+00:00","Fixed release data in the trunk NEWS file, too

svn-id: r38741
"
"7570cfcb576fe4144bcc9868a24acbf8f8314cc4","2009-02-21 21:05:16+00:00","use LE functions for getInt16/putInt16

svn-id: r38744
"
"2acb44d1574abb831c99e11f52f6f956d40b6d8b","2009-02-21 21:07:51+00:00","SCI: Changed WRITE_UINT16 -> WRITE_LE_UINT16 and READ_UINT16 -> READ_LE_UINT16 (oops)

svn-id: r38745
"
"ff17899d8ef0a9bf82334819444646b4c323b29e","2009-02-21 21:16:41+00:00","SCI: Got rid of include/scitypes.h

svn-id: r38746
"
"6288e0456fb2c83269d16b19cf245cb35ec1e5a7","2009-02-21 21:22:07+00:00","SCI: Removed setjmp code

svn-id: r38747
"
"dbafa5c45674dfc80e57448d8e75e17a65ac4509","2009-02-21 21:22:50+00:00","SCI: Removed c_sleep console command (what was/is the idea behind that one, anyway?)

svn-id: r38748
"
"9ce5092be436f7b729772c66846369e60b5225f3","2009-02-21 22:00:24+00:00","substituted some more sci_gettime

svn-id: r38749
"
"da190b30fcf79edb14b58e560b243f797fb17820","2009-02-21 22:03:58+00:00","re-add LSL1VGA, LSL2, LSL5 and LSL6 from the LSL collection with the correct SCI version

svn-id: r38751
"
"8430b662a99d96100fbeb3428a61595444fc3526","2009-02-21 22:06:42+00:00","SCI: Changed typedef struct -> struct

svn-id: r38752
"
"a84e6c89ac6f536da29e824cb4177d3ff5715616","2009-02-21 22:13:59+00:00","re-add PQ3 & PQ4 from the PQ collection

svn-id: r38754
"
"b18c96ca8710c600dee584c2a5c9b9539766a1f4","2009-02-21 22:14:26+00:00","SCI: Replaced evil MIDI_WRITER_BODY with C++ subclassing; some compile fixes to currently unused files

svn-id: r38755
"
"145d5c44939a1bed6d7ddbc16a1ff92f3f9759bf","2009-02-21 22:35:35+00:00","fix hang on 64bit platforms

svn-id: r38756
"
"41b1f19a5da839ce5aaf6d433d6a85557ad2bc77","2009-02-21 22:38:17+00:00","add entries for my SQ4CD, SQ6CD, LSL6CD and LSL7 versions

svn-id: r38757
"
"d6e397233f7abb76b60bae6c4a0dc8052c1b3e17","2009-02-21 22:40:58+00:00","SCI: More cleanup

svn-id: r38758
"
"fe60f82e031f2d629469db2f2d17d8ac5e334326","2009-02-21 22:46:58+00:00","Updated Broken Sword 2 entry.

svn-id: r38760
"
"6f13850161c75151a24356ab94b3d25b2fe9964c","2009-02-21 22:50:35+00:00","SCI: Moved include/menubar.h -> gfx/menubar.h, untangled headers some more

svn-id: r38761
"
"7a12a67ce8ed7be60670338e68d2e211f1ec070f","2009-02-21 22:54:15+00:00","SCI: Moved aatree.* files together into engine/

svn-id: r38763
"
"ebc3de4a82eef3c226ffa79ac2b72e67dc5499eb","2009-02-21 22:59:50+00:00","cleanup

svn-id: r38764
"
"b18ccb755a1fd7b39618d3f64f997d7123f81c26","2009-02-21 23:16:03+00:00","multiply before dividing to improve timer resolution

svn-id: r38765
"
"b5b4cb66a173bfea3792058e160f6b9a0b30e2ff","2009-02-21 23:20:14+00:00","LOL: implemented timers (only text fading for now)

svn-id: r38766
"
"817fde6cdddc700650e16018e9d6184ae29d1ecf","2009-02-21 23:27:24+00:00","SCI: Convert the segment manager into a class

svn-id: r38767
"
"c0e132a826a0deaa8390675ffb20d7388bd24ee9","2009-02-21 23:44:17+00:00","Added MD5 for Orion Burger Russian version

svn-id: r38769
"
"a46a2d9c92aaf82c3e5c099f9353c6014fc041df","2009-02-22 00:38:39+00:00","Fixed compilation under Windows

svn-id: r38770
"
"78f5828f5a763a7badd21243c0615585523de6b6","2009-02-22 00:53:10+00:00","Updated and synced all MSVC project files

svn-id: r38771
"
"8db5bb6dbb2fe115d765aa8ccd28563c7283ac7d","2009-02-22 00:56:21+00:00","Updated the MSVC project files for the tinsel engine, which were not updated for some reason...

svn-id: r38772
"
"e35e7c04157740652ed7dc0809993f19f597d99c","2009-02-22 01:01:40+00:00","Removed include/aatree.h from the MSVC project files

svn-id: r38773
"
"85fe96b72d3fb11b3d07548486822940d5d301b2","2009-02-22 01:11:06+00:00","Add remapping of Amiga version strings and re-enable detection of kq5 amiga.

svn-id: r38774
"
"fcf5e87de6f589a9b8757f4561541faaadf75d38","2009-02-22 01:33:16+00:00","- Made ResourceManager accessible from _vm
- Replaced c_version by its corresponding ScummVM equivalent command

svn-id: r38775
"
"edc73529af19c57926291656b05b68501b173eb0","2009-02-22 03:40:51+00:00","Add resource version option to game detection table, for games version(s) with undetected/unexpected resource types.

svn-id: r38776
"
"a44fd9f967da37d3daa31cd264db5b89668e4e59","2009-02-22 04:04:03+00:00","cleanup

svn-id: r38777
"
"a4968c1cf68293471bc6eca93d68106ce952dec1","2009-02-22 04:04:33+00:00","SCI: Resolve FIXME in decompression code

svn-id: r38778
"
"d9a98ddc215cd4244c21673552f31331126abcb9","2009-02-22 04:22:53+00:00","SCI: cleanup

svn-id: r38779
"
"f6de07921e92a57210cc44a0daffc95491136d42","2009-02-22 04:40:10+00:00","Changed Common::File and FSDirectory to invoke FSNode::exists a few times less, reducing overhead

svn-id: r38780
"
"7d21acd18b65d8d213755754ce16f7b075c52039","2009-02-22 10:20:45+00:00","replace sci_gettime in gfx/

svn-id: r38781
"
"ac409a2ab7a15c08bde95f0647847dc71407ed88","2009-02-22 12:18:22+00:00","SCI: Converted 'segment interfaces' into classes

svn-id: r38782
"
"b5ce8d93200d60c3a752720300d77773750bf583","2009-02-22 13:11:43+00:00","Whitespace cleanup

svn-id: r38783
"
"462ef2c78c0f232472e7f11e736e55a8e8137a2f","2009-02-22 14:04:07+00:00","Clipping the rendering to the output surface.
This should fix the crash in the Italian version of Woodruff (#1981031 - 'Crash after dancing at Puh-Let Party!!')

svn-id: r38784
"
"8fb7fd06814bd3aec3c8af9ce4761db8dfd90460","2009-02-22 14:40:56+00:00","Add detection entries for the SCI Fangames.

svn-id: r38785
"
"c397b37bfb2bbd0cd304e1f45c1323c726a120f2","2009-02-22 16:27:48+00:00","Modified ZipArchive::createReadStreamForMember to check whether the zip archive contains a file with the given name

svn-id: r38786
"
"9b45dd2849359c1dd2405ef9f957625c9ca80b6e","2009-02-22 16:48:02+00:00","Modified FSDirectory::lookupCache to return a FSNode *pointer*, so that we can distinguish between lookup failures and invalid cache entries. Also changed SearchSet::createReadStreamForMember to not use hasFile anymore, based on the assumption that any Archive::createReadStreamForMember implementation has to verify whether the member name is valid anyway (clarified the doxygen docs accordingly)

svn-id: r38787
"
"20eb924bb1e05efd5b4a0b839a4bf1abf13cbee3","2009-02-22 17:54:38+00:00","Add Cascade Quest and the SCI Companion Template (fan games)

svn-id: r38788
"
"a5e6684151c65cd0a16659692256a699c52ceba8","2009-02-22 18:31:40+00:00","Re-enable kq1 SCI Amiga and Mixed Up Mother Goose SCI Amiga.

svn-id: r38789
"
"8997a45773a51583b2e686907cfa60f85b79bfc2","2009-02-22 19:45:53+00:00","SCI: Replaced two uses of sci_fopen by Common::File; moved is_print_str() to the only spot it is used

svn-id: r38791
"
"fa16c9d3868f488d544f5b888006f85474984c6d","2009-02-22 20:06:25+00:00","The two hardcoded fonts, 5x8 and 6x10 were used for FreeSCI's debugger and game menu, so they can be safely removed now

svn-id: r38792
"
"4a6d6e8988da69ea992c7305f91906a8cae363d8","2009-02-22 20:48:42+00:00","SCI: Moved the code which iterates over the current dir into a small class

svn-id: r38793
"
"1687a5e8d05284a63105eb9ae48d4d11a76d0a5d","2009-02-22 21:38:46+00:00","SCI: Rewrite the way file handles are managed

svn-id: r38794
"
"4c1349e0f436c273b79073c39ced1b224f6a4371","2009-02-22 21:41:00+00:00","SCI: Fix what looks like a bug in the save/load system (?)

svn-id: r38795
"
"a5a29a44e9f129a3bff8cc93a02b71b17b7e9163","2009-02-22 22:07:30+00:00","Check for end of file more often while reading CFSML

svn-id: r38796
"
"5cc8d71cacb50f1eb1957cc96920aac5a05d7993","2009-02-22 23:32:28+00:00","Ms. Astro Chicken! (aka Add detection for Ms. Astro Chicken)

svn-id: r38797
"
"506e49b123d5183426d9aca92e5d1f9633d66b7a","2009-02-23 00:10:36+00:00","Don't generate extra whitespaces (forgot to commit it before)

svn-id: r38798
"
"81c6da565846a2132f75c3daa43b5b1faa26a7e4","2009-02-23 00:14:51+00:00","SCI: Fix saving/loading (regression introduced in r38767)

svn-id: r38799
"
"db343c72874d81234121f50b9caff6b6e9f16c6a","2009-02-23 00:39:00+00:00","Removed unused antialiasing code (plus, we do antialiasing at the OSystem graphics backend)

svn-id: r38800
"
"0c8d8b20d9d8e22fc810eb72f9e2a332f29d6d16","2009-02-23 00:40:59+00:00","Updated comment

svn-id: r38801
"
"c327ed3faf31241ed0f385884bb7ef3268de0b09","2009-02-23 01:01:28+00:00","Updated the MSVC project files for the SCI engine

svn-id: r38802
"
"ce7377ff5bb6bdd38ae66d11e2b57554f7651414","2009-02-23 01:59:04+00:00","SCI: Fix incorrect usage of struct tm in date function of kGetTime

svn-id: r38803
"
"327f5c9f7720ec2ed3b2e7281ee33238ae536fc3","2009-02-23 02:17:26+00:00","SCI: Simplified code for selector lookup map generation a bit; got rid of an unused var

svn-id: r38804
"
"9744fc615ca646f3d963675905c07d18bd0fa62d","2009-02-23 03:04:52+00:00","SCI: Changed selector name table to a Common::StringList

svn-id: r38805
"
"6147bd3ed9410f5c61b94c2d27e4bf26a78df074","2009-02-23 03:51:22+00:00","SCI: Merged kDeviceInfo_Win32 & kDeviceInfo_Unix; added lots of debug calls to the file I/O code, to make it possible to analyze usage patterns; some cleanup

svn-id: r38806
"
"2413a5690e588f71b3b9dea56f60f63bf45a80f0","2009-02-23 04:31:11+00:00","SCI: Got rid of resource_dir & work_dir (temporarily disabled f_open_mirrored for that)

svn-id: r38807
"
"094c3264a0f0e63d3c10caba0c5afce8844608f9","2009-02-23 04:35:06+00:00","SCI: Added some demos (they don't work, so disabled for now. Would be way cool if all demos worked, for testing)

svn-id: r38808
"
"152ed65c5079b7d25edae12af234f9a14421aeec","2009-02-23 04:36:40+00:00","SCI: Don't chdir to the gamepath anymore

svn-id: r38809
"
"c21e6c382d5ca19112d6ab3a7db7b87609bfb651","2009-02-23 04:37:35+00:00","SCI: Moved file specific stuff from tools.h & tools.cpp to kfile.cpp

svn-id: r38810
"
"376e4f86d64a8008ea135eb49d5639556506ed17","2009-02-23 04:48:29+00:00","SCI: cleanup

svn-id: r38811
"
"5e1ab5be9b3d7ff22d92c3e32f2138d53786aad0","2009-02-23 09:03:12+00:00","Replaced get_uint_16() with READ_LE_UINT16()

svn-id: r38812
"
"e7fd931afa88e4b9afdf7da303bd4db76e288083","2009-02-23 09:39:09+00:00","Replaced lineColor2 with Graphics::drawLine

svn-id: r38813
"
"edaf382d2fb46403fa437e6113c90754230dc2e9","2009-02-23 11:50:10+00:00","* Refactored drawAnimations to be more easily extensible when adding game-specific features.
* Added a new zonesToUpdate list to keep track of movable zones.

svn-id: r38815
"
"9bef5a0cfc5dcc0708d9f7d10e63b0b550d3243b","2009-02-23 11:55:25+00:00","Rewrote the sarcophagus puzzle in Nippon Safes, since I finally understood how it was implemented in the original!

svn-id: r38816
"
"e3afa772e2ad494175b91e011304558150b8901a","2009-02-23 12:17:25+00:00","Cleanup.

svn-id: r38817
"
"837ca0683e758f7a822452c53b2bff69fa554099","2009-02-23 20:17:53+00:00","LOL: - some more work on the interface (you can now click on the banners and windows) and some bug fixes

svn-id: r38818
"
"90c12b3b3cc052c1ed28dd299d940cfab9709c85","2009-02-23 22:09:06+00:00","Must intialize _keysDialog to NULL

svn-id: r38819
"
"25738df2d34be0f7933000d6b622f439f558a6d4","2009-02-23 22:36:19+00:00","SCI: reinstate pointer scaling for xfact/yfact

svn-id: r38820
"
"4dca30cfe9896378540d955ba09946d12fa0abd1","2009-02-23 22:36:39+00:00","reinstate line drawing for xfact/yfact > 1

svn-id: r38821
"
"6c3a758cf6ee9763dabbc62a1b2365cd438daffa","2009-02-23 23:49:11+00:00","SCI: translate cursor's palette to global palette

svn-id: r38822
"
"35e33646750a7a315fd2c3fd15cdbe2ffc29131c","2009-02-24 02:59:50+00:00","SCI: Renamed int_hashmap to IntMapper, and added docs that explain that this is *not* a hashmap (at least not a plain hashmap)

svn-id: r38823
"
"d7b3c04588119eb122b23a1e923c5429492d2de5","2009-02-24 03:22:34+00:00","Moved FSDirectory implementation from common/archive.cpp to common/fs.cpp

svn-id: r38824
"
"62126681f31e51edb4764214044232c29b09a1f2","2009-02-24 03:43:44+00:00","SCI: Removed unused header file event.h

svn-id: r38825
"
"3a8dd2b4677a7a85a51b4edc49e058da3e45f5d3","2009-02-24 04:01:53+00:00","SCI: cleanup

svn-id: r38826
"
"82e0b2061317204411f338f74649b03b342cf2b8","2009-02-24 04:30:41+00:00","SCI: Turned circular list code into a small class

svn-id: r38827
"
"735701983cb1172c54640b79068140c164a5dda7","2009-02-24 04:56:35+00:00","SCI: Rewrote parts of the pathfinding code to use Common::List; also renamed some types

svn-id: r38828
"
"8c9bd00b510cf6f4b014927223690ea5001d151d","2009-02-24 05:07:15+00:00","SCI: Replaced vertex list used for dijkstra algo by Common::List; got rid of include/list.h

svn-id: r38829
"
"325d2ec66b15d63f44e5e11239c18503e7021942","2009-02-24 05:23:42+00:00","SCI: More pathfinding cleanup

svn-id: r38830
"
"47bc0d787949faab3705d3e04388d6f0d4892609","2009-02-24 05:30:45+00:00","SCI: Last batch of pathfinding cleanup

svn-id: r38831
"
"1e4db221e5fe6867e4558528b0d93db2c1de4170","2009-02-24 05:39:10+00:00","SCI: Moved engines/sci/include/sci_memory.h and engines/sci/scicore/sci_memory.cpp into engines/sci/; moved macros from the header into the source file

svn-id: r38832
"
"b5df97ad2b3e81b7aba9feff7a5a3b2399e7d74f","2009-02-24 05:51:55+00:00","SCI: Moved kernel.h and kdebug.h from include/ to engine/; untangled header deps some more

svn-id: r38833
"
"7105df20fa34e7819f5b416526405424cf9b36b5","2009-02-24 05:56:26+00:00","SCI: Moved vm.h from include to engine

svn-id: r38834
"
"d19ba951e825ce8ee4ae7c1c058ba517c678eb68","2009-02-24 06:00:10+00:00","SCI: Moved sciconsole.h and sys_strings.h to the dirs their *.cpp counterparts are in

svn-id: r38835
"
"659c9fb901bcbc3db1252ed0c9a7eb49c09853b4","2009-02-24 08:42:46+00:00","Changed interface to walk code, to better handle the differences between games. Moreover:
* merged PathBuilder_BR into PathWalker_BR
* implemented checkTrap routine for BRA

svn-id: r38836
"
"5dff53a2fa8d2f7314d23e229d3c79aa3c0fc3bc","2009-02-24 09:18:20+00:00","Added preliminary code for following walker support in BRA.

svn-id: r38837
"
"6334125d1c0264278f2907d13cff8e6ba418bcc8","2009-02-24 11:20:45+00:00","Implemented follower support, except that:
* follower is forgotten when location changes (see freeLocation)
* the final walking frame is screwed

svn-id: r38838
"
"8dab4eb461b3ccd7a1fca46b3245da4f1108956a","2009-02-24 12:01:28+00:00","SCI: call updateScreen after every copyRectToScreen; removed internal front visual buffer

svn-id: r38839
"
"cda5d6989bc568f0428aa23d14a9bd8c2af6b254","2009-02-24 15:14:15+00:00","Fix some warnings.

svn-id: r38840
"
"b3d2429b04a9afdf8af6af91e251b6bee96404e7","2009-02-24 15:21:53+00:00","Fixed shadowed name.

svn-id: r38841
"
"a27285f117494290d26b23242cfd68e2dcc65d4d","2009-02-24 15:33:40+00:00","Normalized guard #defines

svn-id: r38842
"
"c9f245a84014ccd4a6e41e230816ce361aef85db","2009-02-24 15:40:19+00:00","oops

svn-id: r38843
"
"3082586230688f27badf707faf95cadc8f761b21","2009-02-24 18:21:12+00:00","fix forward declarations to match the actual ones

svn-id: r38844
"
"357299c5705d6856e070e537610275f1943e6653","2009-02-24 18:31:05+00:00","substitute all time related functions, removing sci_gettime sci_get_current_time altogether.

svn-id: r38845
"
"b4cf9e5a2633bf0346d710d0c67288337536be85","2009-02-24 18:47:13+00:00","fix typo in parse rule

svn-id: r38846
"
"e29c3346015eb82b9bcfe2f366bce1b991252aa6","2009-02-24 18:47:53+00:00","state_t to EngineState

svn-id: r38847
"
"7176a61a85c236116dcdf435315b1a0e1cb179a6","2009-02-24 18:51:42+00:00","Small UI updated with smaller HELP dialog to fit a 320x200 screen. The help text does not fit though.

svn-id: r38848
"
"241340a07ea138c6badd3727683097e863ef35f0","2009-02-24 20:11:10+00:00","Fix compilation

svn-id: r38850
"
"220270586c5a42f7352277bc338c54b22e8b7372","2009-02-24 20:33:31+00:00","SCI: Removed usec_sleep from gfx_driver_t (call OSystem::delayMillis directly instead); added remarks that busy-waiting like this with delayMillis is maybe not the best way, and that gfx_driver_t should be either removed or turned into a class

svn-id: r38851
"
"0be30cdc5d25f85a7a0bbf3a2c2aeddae3d301d7","2009-02-24 20:39:34+00:00","SCI: Renamed gfx/gfx_operations.h to gfx/operations.h (matching the source file); moved include/sci_widgets.h to gfx/ (matching location of source file); renamed gfx/widgets.cpp to gfx/gfx_widgets.cpp (matching the header)

svn-id: r38852
"
"7d5e45fa8383070944ba9981e7b82c8dc3799fab","2009-02-24 20:49:52+00:00","update

svn-id: r38853
"
"7d2a2ece38b91292d811c355d4cf1d3214087891","2009-02-24 20:50:09+00:00","SCI: Replaced gfxop_usleep by gfxop_sleep (taking millisecs instead of microsecs)

svn-id: r38854
"
"9bb135ac25077c86f9bef03ca51785ed8ff7caae","2009-02-24 20:52:18+00:00","not needed anymore

svn-id: r38855
"
"859477c968828f0ff413a9e9fd0635127f20c64f","2009-02-24 20:55:43+00:00","not needed anymore

svn-id: r38856
"
"91ee9a3eb8b23fdfbfa568e309dfa55542f5f248","2009-02-24 21:13:32+00:00","not needed this includes anymore

svn-id: r38857
"
"d3b715817d15ac9548586e3461cd9030945a2cc8","2009-02-24 21:15:23+00:00","Add some remarks on OSystem::updateScreen() properties

svn-id: r38859
"
"6eef86ef4ce95e1b6b904acf2c94d29128812681","2009-02-24 21:22:04+00:00","Fix my wrong comment on OSystem::updateScreen(). Now it is hopefully correct

svn-id: r38860
"
"c102e30e735c52b110e5f31ac0eba90727d6c405","2009-02-24 21:43:07+00:00","SDL: Tweak the way the mouse is drawn/erased, so that it is not erase and drawn again if nothing changed

svn-id: r38861
"
"64ca675b5118af984021998b9da7d055bd504cd6","2009-02-24 22:01:10+00:00","not needed include anymore

svn-id: r38862
"
"c2c02ceffd03881ebecacc309d5a83988d2565ea","2009-02-24 22:24:58+00:00","remove code related __GNU__XX defines

svn-id: r38863
"
"9784c2dac1d42a8582647e8e1877f20f405a9633","2009-02-24 22:25:39+00:00","Fix a valgrind warning (free -> delete)

svn-id: r38864
"
"a9dfa2575a7f0406afcbfa9ceec5db31a89f5d20","2009-02-24 22:33:39+00:00","Removed some non-required struct declarations

svn-id: r38865
"
"e7b0c975d9ff3c8c1053f30c89d3fe4b7e992685","2009-02-24 22:40:54+00:00","bring back comments but as TODO comment

svn-id: r38866
"
"595c6557668e3bf8c753093b9e4ce9cac32a6928","2009-02-24 22:41:58+00:00","SCI: Moved (kernel) debug stuff from tools.cpp to a new file engine/kdebug.cpp

svn-id: r38867
"
"1dff55f90132f12fbf266d83b9ccdb309f1176a5","2009-02-24 22:48:39+00:00","Process modifier keys (capslock, numlock, scrollock)

svn-id: r38868
"
"936e807ef3094af4f22c71649832762036af841d","2009-02-24 22:51:19+00:00","Removed unused resource macros

svn-id: r38869
"
"5618a81cff5f9f171764ec2b350944eabd0ec5dd","2009-02-24 22:58:44+00:00","Replaced some of the internal SCI scan codes with the ones from ScummVM

svn-id: r38870
"
"4f8e9511a137c1755b826b3680d58217aba78ed1","2009-02-24 23:15:49+00:00","fix warning

svn-id: r38871
"
"e5a7b99cee400ca9ff0e3d59f748eca935c37d01","2009-02-24 23:16:42+00:00","SCI: Don't #include headers in other headers if a forward declaration of a few types suffices (reduces header interdependencies)

svn-id: r38872
"
"04588b1fa25c3aeaa0e1ebc4987cf07b96886044","2009-02-24 23:19:52+00:00","update

svn-id: r38873
"
"8280089d28977e6739234ba74740214832e7c1a6","2009-02-25 02:05:43+00:00","cleanup

svn-id: r38874
"
"8ba9e804a89d4ae49460e94734840ae4accbb1f7","2009-02-25 03:52:16+00:00","Fixed segfault when quitting BRA.

svn-id: r38875
"
"93666ef53c284c2aae282949729bcd9ff53b5c2a","2009-02-25 08:53:58+00:00","Updated all for(;;) loops to use prefix increment on iterators.

svn-id: r38876
"
"301e9d73d1ccd28803f8f74a1a185e76c3e84f6b","2009-02-25 09:15:53+00:00","* Rebased Parallaction_br to inherit from Parallaction instead of Parallaction_ns
* Same as above for CommandExec_br and ProgramExec_br
This should finally kill most issues with destruction, at the cost of some code duplication.

svn-id: r38877
"
"98a7ba4ec3899e7d6b154169a39427a998c4758c","2009-02-25 17:36:38+00:00","Don't truncate keycode in queued events.

svn-id: r38878
"
"9ed544679a352d50cef9b1a9a0c12dd3dd63ea61","2009-02-25 18:23:28+00:00","Interpret NONBLOCK as PEEK; poll while sleeping.
Also use Common::List for internal event queue.

svn-id: r38880
"
"3a000f3d84531288690a665297ec0180daab8b2d","2009-02-25 18:59:00+00:00","SCI: Simplify event polling code a little bit

svn-id: r38881
"
"71a07c7c9f7fd1de145c5e0466a0d4fe56f9d19b","2009-02-25 19:05:54+00:00","SCI: Added remark that we don't track capslock, numlock, scrlock properly

svn-id: r38882
"
"ec26d4f24b2971b6c77bece0dd15055506d0b62e","2009-02-25 19:28:20+00:00","SCI: Removed code for software rendered mouse cursor

svn-id: r38883
"
"b990add13e6009fc7c6fa9f40f60bfb36a14ba68","2009-02-25 19:28:46+00:00","SCI: Restored ability to warp the mouse cursor

svn-id: r38884
"
"c199c6c6c4652306c4660e4736f054175e4f0b25","2009-02-25 19:30:11+00:00","cleanup

svn-id: r38885
"
"71ae2d3aba4a47a3fecf2cea02528ec2763ee6fc","2009-02-25 19:52:17+00:00","Reverted my wrong commit #38870. Most of the key codes are handled by the engine itself, however there are cases where they are handled by the game scripts, e.g. in save/load dialogs. The arrow keys in the save/load dialogs should work properly again. The numpad keys still look to be broken by some other commit

svn-id: r38886
"
"1786ecabbf567b60cf628d0235b52b5343c013ad","2009-02-25 20:40:05+00:00","Initial fix for the keypad keys. We still don't know the initial state of the caps lock etc keys, so an appropriate method will need to be added to OSystem

svn-id: r38887
"
"9af7fba681fa1f0b48ec7c8d13305404b5f82efb","2009-02-25 21:43:57+00:00","reintroduce game_start_time (removed it in r38701), since the interpreter can be restarted and it can be retrieved via script function (eg. LSL3 about box)

svn-id: r38888
"
"522063b28cf3afe2fcdd5539d6769986d0babb00","2009-02-25 23:50:16+00:00","fix read_SegManagerPtr to not read from an uninitialzed pointer

svn-id: r38889
"
"28d1fdcf24861485bbbd7ae537fdf13c6da721e4","2009-02-26 02:04:30+00:00","- Fix cursor drawing bug on (cursor) palette change
- Fix cursor drawing when it was hidden before and no dirty rects are present
- Diese und die folgenden Zeilen werden ignoriert --

M    sdl/graphics.cpp

svn-id: r38890
"
"5093167fde0bf02c0160aa753fbe60afbaaad305","2009-02-26 02:21:55+00:00","cleanup

svn-id: r38891
"
"d5d006bb303ddce4401a11132f52e4d3e17f63ac","2009-02-26 06:16:35+00:00","Cleanup of CommandExec and ProgramExec, and pushed down dependencies from exec.h.

svn-id: r38892
"
"3efffe511b2c9282f79ecfdb937e6b8fc1d330c1","2009-02-26 09:12:29+00:00","Fixed crashes and leaks when quitting BRA from menu and splash screen.

svn-id: r38893
"
"76283e3f736ba7c93ed703b960821e22439cfcef","2009-02-26 09:42:08+00:00","Merged walk code for NS, and simplified handling.

svn-id: r38894
"
"6f939ff6c89c9a3b4cc374473bd76fab99fddb3b","2009-02-26 09:44:06+00:00","Cleanup. Readded FIXME

svn-id: r38895
"
"2fbf626d095303ea00799e6ca972c124673897b1","2009-02-26 10:31:48+00:00","Cleanup

svn-id: r38896
"
"88efc8603ec15e726b9a0c3663588f7afe57e0d2","2009-02-26 10:44:01+00:00","Removed null*Ptr dummy objects, using SharedPtr's reset method to null pointers instead.

svn-id: r38897
"
"387fcd101dd0e0b9ad4c8168e22d9ea59a843fef","2009-02-26 10:44:25+00:00","Cleanup

svn-id: r38898
"
"d262d7773aca3d2db91daeb12bcc18129f64f29f","2009-02-26 11:32:02+00:00","Fix regression introduced with r38890, where the mouse cursor was redrawn every updateScreen call.

svn-id: r38899
"
"1377a4b64cdeba148ba23bd10c8623a2d0a5fc8d","2009-02-26 12:10:11+00:00","Clarify behaviour of gfxop_get_event().

svn-id: r38900
"
"868b589af62d8afec68265651d807c183c4659bf","2009-02-26 13:54:21+00:00","Commit patch #2641592 'Wrong type promotion for SharedPtr' with a slight formatting change.

svn-id: r38901
"
"b76ad3dc4ff3448c360e23e9af4aaf80ca2e1501","2009-02-26 14:42:03+00:00","changeLocation now uses the internal variable _newLocationName instead of an input parameter.

svn-id: r38902
"
"09196a35ad2a7dc226dc6f5ba4e3f5997fb83c42","2009-02-26 14:53:57+00:00","Added filter to preserve needed Animation across location switch.

svn-id: r38903
"
"edc4e58c9c88bf6b97ea573c5ed5dd8b9ab87ed5","2009-02-26 16:16:13+00:00","SCI: Replaced #define hack to fake subclassing in C by regular C++ subclassing

svn-id: r38904
"
"9515ae4ddca85993c159198bf033959c9aaed478","2009-02-26 16:16:22+00:00","SCI: Moved gfx_line.cpp to line.h and turned _gfx_draw_line_buffer into a template

svn-id: r38905
"
"e140188541c120e3d8ff350cded178f584edb8ae","2009-02-26 16:16:30+00:00","SCI: Some nitpick FIXMEs on incorrect opcode number comments ;)

svn-id: r38906
"
"900dc048f45fb782b4a0435a887a8480934aa7c3","2009-02-26 16:16:38+00:00","SCI: Turned the crossblit code into a template

svn-id: r38907
"
"fde001ce8148caef9a3c6480cc870a1f0727ed6a","2009-02-26 16:16:46+00:00","SCI: Changed 'typedef enum { } NAME' into C++-style 'enum NAME { }'

svn-id: r38908
"
"3343dca6dc9dfe18d4f5e5a280c1e9ffe50da3d3","2009-02-26 16:16:53+00:00","SCI: Modified gfx_new_mode to take a Graphics::PixelFormat

svn-id: r38909
"
"79417f4d3290d511f895dd09648bc3c7ed2278f9","2009-02-26 16:33:48+00:00","cleanup

svn-id: r38910
"
"73f1e8c85f9e3ab4769f42ec2e93900b00523bb9","2009-02-26 18:59:41+00:00","Updated the MSVC project files of the SCI and parallaction engines

svn-id: r38911
"
"84daa0410f27571915d5b718f90e6d44e97b8f81","2009-02-26 19:28:21+00:00","reinit sfx in game_init() when it got deinitialized in game_exit(), this unmutes the game after a restart.
shutdown sfx in game_exit() only if there is no EngineState successor (restored game) since gamestate_restore() already reinitialized it.

svn-id: r38912
"
"dbe632e8edc54591d30bbe141494d329ba0d141b","2009-02-26 19:32:22+00:00","protect the sfx timer with the callbackMutex to fix the race the condition when restarting or restoring a game.

svn-id: r38913
"
"f8648767e4882de9adb8f23c9bae8d5146dc3fd9","2009-02-26 20:08:04+00:00","fix graphics regression in Iceman caused by r38909

svn-id: r38914
"
"2d1fd81f90ca0583d1e28b57926079cec3d6c48c","2009-02-26 21:17:53+00:00","start out with an empty array of file handles, so the Enginestates matches between startup and restart. really check its size before accessing it (fixes LSL3 restart)

svn-id: r38915
"
"6c879e96d122aa4746276d94a46d339595c9f0d4","2009-02-26 23:03:35+00:00","- Removed engine/sys_strings.*
- Renamed sys_string_t -> SystemString, sys_strings_t -> SystemStrings

svn-id: r38916
"
"c1fb06c162196de85150ca138663b3333bdb7cd0","2009-02-26 23:04:50+00:00","Updated the MSVC project files of the SCI engine

svn-id: r38917
"
"5a5c51bb489d9b88bc3477dfda5af533e37b19a7","2009-02-26 23:13:00+00:00","Reset successor variable after use.
This fixes a crash in SQ3 after reloading followed by restarting.

svn-id: r38918
"
"bf0860fc5e2013883292dc8efabde1e2f919d9d7","2009-02-27 01:17:24+00:00","SCI: Commited file handling revamp, work in progress

svn-id: r38919
"
"170916201c2dd8b75dccefb9a39c6fee572a4ec9","2009-02-27 02:23:00+00:00","SCI: Moved almost all files from include/ to other dirs; only include/engine.h remains

svn-id: r38920
"
"479751104f6496d42057cd0419c7b78b5d289ca0","2009-02-27 02:23:40+00:00","SCI: Renamed include/engine.h to engine/state.h; added a corresponding .cpp file with the EngineState constructor

svn-id: r38921
"
"c053ef8c87d55d7e534c585c49abe075f27405ad","2009-02-27 02:24:29+00:00","SCI: Remove empty include/ dir

svn-id: r38922
"
"349fce7454cf621b4481577d3d11b947d7239339","2009-02-27 05:20:37+00:00","Committed a slightly updated patch #2602772 ('Patches for BS1 bug ID #1977094')
to replace some missing subtitles with hard-coded ones.

svn-id: r38923
"
"7922eb5e327c0759f01a9dac212cb9a993ef934c","2009-02-27 05:22:16+00:00","Overhaul to the README:
* Added a quick start section
* Reduced indention for many lists, to use screen space better
* Rewrapped most sections to a column limit of 72 chars (not
enforced strictly, though, tried to make a compromise between
readability, uniformity, good looks and common sense ;)
* Corrected/added a few minor things

svn-id: r38924
"
"53572f6c0782109c66559bcab9d99e6dc4eb7cf4","2009-02-27 05:52:22+00:00","Committed patch #2606844 ('Fix crash when using BS1 without portuguese data').
Admittedly, I'm not really that familiar with BS1 resource management, but as
far as I can tell the patch just adds sanity checking, so it shouldn't hurt.

svn-id: r38925
"
"ce4d9bc06651418f3d254c3d5d2b1f4711b255ee","2009-02-27 05:58:08+00:00","Changing the visibility of the mouse means it has to be redrawn. At least, this
fixes a regression in Broken Sword 1 when using one inventory object on another
(if the cursor is partly beneath the inventory bar) for me.

svn-id: r38926
"
"e17a14001997552dd51c99275b623f5fa6b1b9ca","2009-02-27 08:46:39+00:00","Improved debugger output.

svn-id: r38927
"
"44906f574fa46f1f02d8e9f9d5113ab1b35cf759","2009-02-27 08:56:19+00:00","The engine has now to build the drawing list for the graphic department, instead of setting visibility flags; the new field _prog has been added to GfxObj to help sorting the list.
The outcome is that cleaning up unused resources on location switches is now easier to manage, and less error prone.

svn-id: r38928
"
"4042eb8259cbd06f9516b2460508e230ec46dd8c","2009-02-27 11:10:44+00:00","update

svn-id: r38929
"
"d53c75fc8f816a150db1e160b29f25b8ba6df25c","2009-02-27 12:59:02+00:00","Fix code formatting

svn-id: r38930
"
"debd029f10af9e89b29037ab5afc058782962a12","2009-02-27 16:38:35+00:00","corrected some typos

svn-id: r38931
"
"ede680738b5594d8400bb3c60f284d6c1020cdda","2009-02-27 19:37:29+00:00","sync savegame.cfsml with include/ dir changes

svn-id: r38932
"
"fb552121d234ab200caf8857f007df57085ca7ec","2009-02-27 19:38:20+00:00","fix warnings and memleaks in savegame.cfsml

svn-id: r38933
"
"fb8fafaf560b5546858312cd4f552d04b149ab5a","2009-02-27 19:50:22+00:00","Fix reading corrupted saves.

svn-id: r38934
"
"59744522919d58de828754f92aebca11de0f0c55","2009-02-27 22:10:25+00:00","Fix bug #2642654 - SIMON2: Cannot load savegame, also in CD DOS?.

svn-id: r38935
"
"9a89280527ad1b41843779b0a1763915de1e03cb","2009-02-27 22:14:18+00:00","Add detection of another version of the Black Cauldron. (See bug #2628354).

svn-id: r38936
"
"de239a4bc5c6cdeb48b4fca0775dc34df787b84e","2009-02-27 22:19:33+00:00","Clarify timer API.

svn-id: r38938
"
"d3e60f2ae3133da09f2ac53abe2ba74ab7c49713","2009-02-27 22:20:11+00:00","Depend on backend timer API instead of a new mutex

This fixes a deadlock between the backend's timer mutex and
the sound callbackMutex that would occur while restoring a game.

svn-id: r38939
"
"4fbda3b8b075b200e0bdda9b5d957882bff1d13d","2009-02-27 23:38:37+00:00","Fix typo.

svn-id: r38940
"
"6eeec1d295c9cbb09c7619d346a7bff95a5cac72","2009-02-27 23:53:52+00:00","Add FIXME: We need a pcm_device->exit() function,
to release the mixer channel allocated for pcm_device in ScummVM's mixer.

svn-id: r38941
"
"0315465fde30ec6b0447de66cae7844fd870f8bc","2009-02-28 00:12:21+00:00","Elvira 1 uses slightly different font data table, shared for all languages.

svn-id: r38942
"
"c1a712c4e848dd56601c43fc7fdd3c75d83e03df","2009-02-28 00:13:14+00:00","Add German font data table for German versions of Elvira 2 and Waxworks.

svn-id: r38943
"
"a26b3bfde6411a4d9aeee75b9fc952b5a8e0e4c4","2009-02-28 06:14:42+00:00","SCI: Get rid of extra layer around our timer manager

svn-id: r38947
"
"4bd19f7a7f9c45cbd480633f631325589fa267b6","2009-02-28 06:21:24+00:00","Improved debug output when listing animations.

svn-id: r38948
"
"413ded4ce4d9b99b209eb949d992c38121849e79","2009-02-28 06:48:53+00:00","SCI: Get rid around the first layer around the ScummVM audio mixer. Also resolve the FIXME about releasing the mixer channel we allocated

svn-id: r38949
"
"6f72cc45a355a0546620a71112e5b26c55093747","2009-02-28 07:23:31+00:00","cleanup

svn-id: r38950
"
"c76dc0b71c0d448a63a1a3eef989b4f4521a5998","2009-02-28 10:04:40+00:00","Initialize mixer feed variables

svn-id: r38951
"
"4febcde1706d20c445b226855b373b004380950d","2009-02-28 10:05:07+00:00","Make CFSML writers take const arguments

svn-id: r38952
"
"c62834cc0c4033acb2d37a65dbcd6a998b88cc76","2009-02-28 10:33:06+00:00","sync

svn-id: r38955
"
"5aa50ec889109864cbdd13298b4026c8ed78f484","2009-02-28 10:46:33+00:00","Patch #2638336: Broken Sword PSX Support

svn-id: r38956
"
"440fcb1d5abb1100074b3fdf69f8df26850c390a","2009-02-28 10:53:45+00:00","Patch #2638336: Broken Sword PSX Support  Part 2 of 2

svn-id: r38957
"
"78f28d3f307613a00e20143ae1f9bc60dccce168","2009-02-28 10:58:46+00:00","Shutting up a compiler warning

svn-id: r38958
"
"3bfc3453500372c3caf438134d7dfa912e074eb2","2009-02-28 11:07:36+00:00","Add support for saving Common::String objects.
Use it to simplify SavegameMetadata handling.

svn-id: r38959
"
"d3b2a4ede9faa3a9bf648ded5ac00b3bd86deda3","2009-02-28 11:09:38+00:00","Fixed MSVC compiler warning

svn-id: r38960
"
"501e4bb91a9f1bf91e6632dc158ee343dc1e069e","2009-02-28 11:12:59+00:00","SCI: Renamed some kernel types and general cleanup

svn-id: r38961
"
"6ccd2d4db920953267073ab1efb71e57b7e47d04","2009-02-28 11:32:34+00:00","Updated the MSVC project files of the SCI and SWORD1 engines

svn-id: r38962
"
"166941cde847fa826e06b2ecad99a30f2ddce0dc","2009-02-28 11:32:51+00:00","Patch #2590824: DRASCULA: further improvements in italian translation

svn-id: r38963
"
"aff4aeae14033053fd1753e319d12a0659362461","2009-02-28 13:39:56+00:00","set the correct OPL2 frequency for Wii

svn-id: r38964
"
"b2cd5beb9e125c1da97aa12d04f558c95c650e9b","2009-02-28 13:41:43+00:00","clean up some warnings

svn-id: r38965
"
"993d21d8400a444e6a302929d8e769b499ea43ae","2009-02-28 13:45:29+00:00","Enable SCI for Wii

svn-id: r38966
"
"fad05b5354f779740ca99f3214783e04e339c5b0","2009-02-28 13:54:41+00:00","set DEPDIR; copy COPYING.LGPL for the dist target; use debug level 3 when uploading the binary

svn-id: r38967
"
"0302aee44607333616c2a2583b4e15d236c4c486","2009-02-28 13:56:27+00:00","copy pred.dic for the dist target

svn-id: r38969
"
"1befd93475a8a92b55555a17752ccf68b7cd224c","2009-02-28 15:32:01+00:00","Added detection for more SCI games and demos

svn-id: r38970
"
"9cc4f5630e26d2dc474623635a6978210a7a16da","2009-02-28 16:06:32+00:00","Fix warnings.

svn-id: r38972
"
"2d1a6309f85321e7333bc651299b2a70b1f8c44e","2009-02-28 16:11:02+00:00","Disable xfact/yfact scaling in embedded views.

This inadvertently broke colours in KQ5 as a side effect.

svn-id: r38973
"
"c388d6c4555ae11e46421ec9f56067306079492d","2009-02-28 16:12:52+00:00","Increase colour refcount when allocating colour

svn-id: r38974
"
"26cb1657bc580dac1fa3188bd899d0fbd40f7555","2009-02-28 16:17:14+00:00","Fix warnings.

svn-id: r38975
"
"f38e6b0d766a0cb19e91b816d0f42a77d368b730","2009-02-28 18:07:14+00:00","Fix annoying warnings in the default savemanager

svn-id: r38976
"
"460131f5d35fffba4126cdf4ea24f2f32cfebc25","2009-02-28 19:31:42+00:00","Remove misleading comment.

svn-id: r38977
"
"4dd1b7dad55333fdbfefb6c1ea7acb55a5127863","2009-02-28 20:45:36+00:00","Turned ResourceManager into a class, along with all related functions

svn-id: r38978
"
"4f3a50913e3305d5e13986ada915451312cd3707","2009-02-28 21:05:21+00:00","Added keyboard mapping for global menu.

svn-id: r38981
"
"61ab59138a1e1ba1bac9cdb0dbf3c5372667930d","2009-02-28 21:59:49+00:00","resource_t struct replaced with stub Resource class for future objectifying. Also the crash when exiting SCI1 games was fixed

svn-id: r38982
"
"e1599798693eedc88e7fa2545e0976d89d9fa736","2009-02-28 22:10:07+00:00","strip trailing newline in SCI debugger

svn-id: r38983
"
"d7b06b7d4267c0ea6ff537455f940deed303eefb","2009-02-28 22:19:22+00:00","SCI: Renamed ResourceManager::sci_version to _sciVersion, to avoid var shadowing warnings; some other tweaks

svn-id: r38984
"
"f179dbfc71eafb4f84d342b8d2dac0d11dd4ecdf","2009-02-28 22:36:48+00:00","Add a particular release of Conquests of the Longbow.

svn-id: r38985
"
"8e39ac9f12fb95ffda80116389d03f050beabd90","2009-02-28 22:59:27+00:00","Fixed the SCI version in a version of Longbow, and fixed a typo in the MD5 of a version of SQ5

svn-id: r38986
"
"7050c7b03f0f7b107df62488fd4dc2f37b704d3b","2009-02-28 23:46:50+00:00","SCI: Use the ResourceType enum instead of integers where it makes sense

svn-id: r38988
"
"82872a7033946868045cd36b9c20916050654ede","2009-03-01 00:18:30+00:00","SCI: Start converting MessageState into a class

svn-id: r38989
"
"40a2485050db287e36162f80848a115df87a5b2a","2009-03-01 00:51:14+00:00","fix for tracker item #2627942 TUCKER: Brainroom/Information Room Graphics glitch

svn-id: r38990
"
"478fa21838a87aed89260b9a53e3ca74e605610b","2009-03-01 00:51:59+00:00","fix for tracker item #2628896 TUCKER: Invisible Raincoat bug

svn-id: r38991
"
"8dfef3103c4c226224620a1884fcc5c62c3a8e63","2009-03-01 01:52:50+00:00","Added default kernel functions table to be used if vocab.999 can't be loaded in SCI1
Added SCI1.1 kernel functions table reader

svn-id: r38992
"
"c51d5835a078ada1e01bf6cb9e8094874a9f20ef","2009-03-01 02:16:44+00:00","Moved mouse cursor definition data into staticres.cpp

svn-id: r38993
"
"aa3462871303a7dc32053b4e4fd778fff11b90d3","2009-03-01 02:19:06+00:00","Cleaned up parts of the font display system. Note: Cruise used two almost identical routines for text display - one which creates a draw structure, and the other draws directly to the screen. Since there don't seem to be any other differences, the immediate draw version has been changed to use the rendering version and then draw the results

svn-id: r38994
"
"57c7593325c23719cbf3845a9a042b0c630b1b83","2009-03-01 02:20:22+00:00","Implemented proper support for the Pause 'p' key

svn-id: r38995
"
"3fb5e15072c9769a8d793711aef11360a9a8c48a","2009-03-01 02:25:46+00:00","Formatting fixes

svn-id: r38996
"
"3b16073a38f1869698ed7ea0066d91f4fbfc7e04","2009-03-01 03:31:52+00:00","Fix warnings.

svn-id: r38997
"
"9ffd6a8768c0d65b36fb58eb2ad41bc652fd4e2c","2009-03-01 03:45:42+00:00","Fix regression in AppleII/C64 versions of Maniac Mansion.

svn-id: r38999
"
"ce42d6e538e205fadda09fc426206a0e35bd2220","2009-03-01 04:07:04+00:00","Fixed windows and text drawing problem in SCI1

svn-id: r39000
"
"d0c2484502d195d05676065febe488393b490be5","2009-03-01 04:29:09+00:00","SCI: pass gfx_pixmap_color_t instead of r,g,b triple, makes calling code a bit easier to read :)

svn-id: r39001
"
"3fcbda829a2aa17cbaf6423d34f69214b91b0e6c","2009-03-01 04:30:55+00:00","Merged Engine::go() and ::init() into a new run() method (currently implemented by calling the existing init&go methods; to be cleaned up by engine authors

svn-id: r39002
"
"dd98126423d915c19baf43184ba40fb0d9a68b64","2009-03-01 04:42:46+00:00","Engines: Fused several init&go methods into a single run method

svn-id: r39003
"
"6742caa87a08e8c468b2eec5cf96c1dbc86fcb3a","2009-03-01 05:15:51+00:00","Text/window color matching improved by using an existing gfxop_set_color() instead of mine _gfxop_matchColor()

svn-id: r39004
"
"6454a3dee147ce8ce2fb02449df52123a8459782","2009-03-01 06:01:48+00:00","SCI: Replaced fake struct 'inheritance' (using #defines) with regular C++ subclassing

svn-id: r39005
"
"25e7d3a08d68b4e3f0c8df203c6f9f77ac8ebf2b","2009-03-01 06:02:17+00:00","SCI: Renamed some sfx header files

svn-id: r39006
"
"6f290b7cd67c31a22b9cc4d7fafee53c6b06a720","2009-03-01 06:02:26+00:00","SCI: Removed some unused code from the SCI mixer

svn-id: r39007
"
"4e0ee7abea422b844b11143c94cea88b309e0c68","2009-03-01 06:02:34+00:00","SCI: cleanup

svn-id: r39008
"
"d0c477e9305c8b4ff66077233a8a494d9ede4c75","2009-03-01 06:02:42+00:00","SCI: Removed unused pause/resume methods from the mixer, and rewrote the feeds handling to use Common::List

svn-id: r39009
"
"7ee049ab8f24500171ec56233d686e241ccf52c5","2009-03-01 06:17:52+00:00","SCI: Forgot to commit a couple files after renaming sfx headers

svn-id: r39010
"
"3571da7a94a4eb00cd6f793fc190c3164e5dd5b0","2009-03-01 06:43:46+00:00","Correctly fix position of icons in AtariST version of Elvira 2.

svn-id: r39011
"
"b08c22b283fa2df5d67a04c09fa436370934174c","2009-03-01 07:14:13+00:00","Fix bottom palette in AtariST version of Elvira 2.

svn-id: r39014
"
"ecb6b7bf54e66cc0ba0f4a79f4111abc42db08c2","2009-03-01 08:28:10+00:00","Added an explicit clearing of all animation fields for new animations - this fixes a problem where the player could disappear if he had to rotate to face a selected object

svn-id: r39019
"
"6ece2b10b8d5eb9243df69f740f39075b8e22a14","2009-03-01 08:41:03+00:00","Merged iphone keyboard fix in from branch-0-13-0

svn-id: r39020
"
"b9a5562ab85bacd60fb371b97038e8d1915b7f06","2009-03-01 09:04:19+00:00","Updated iPhone xcode project

svn-id: r39021
"
"99df3ccd73962a5ae8f85e212c6fcfcfb14010c6","2009-03-01 09:05:48+00:00","When built with the xcode project, the file browser will now start browing for files inside the application bundle directory

svn-id: r39022
"
"e5e733781e5b3b1776ff68c44f959aec600424b3","2009-03-01 09:12:32+00:00","Groovie: Merged init() and go() into run()

svn-id: r39023
"
"c9d440bf5b8309ca143d9592af10d73765103098","2009-03-01 09:17:05+00:00","Remove extra whitespaces

svn-id: r39024
"
"741d8b36fe473e995c066329a38c4601fbabb111","2009-03-01 09:47:19+00:00","Cleaned out some unneeded stuff from the C blitting routines

svn-id: r39025
"
"fdb9cd9ce2c560486a62d959efdaa8519919e279","2009-03-01 10:09:27+00:00","Add DOS demo of Elvira 1.

svn-id: r39026
"
"3e56c3a40973d89c0ae6f95d46d2f982becdde1a","2009-03-01 10:25:33+00:00","PalmOS Backend updates:
- Removed old clearScreen backend method and keep it for internal use only
- Fixed save path with missing end slash
- Added use of the new audio mixer
- Added new file system factory
- Added missing getOverlayWidth/Height
- Changed color encoding from int16 to uint16 as required by the new ScummVM code
- Fixed ColorMasks use with missing namespace

svn-id: r39028
"
"34add265e9fd56c5852fd0fdc8da7ba12b1b5bfe","2009-03-01 10:28:15+00:00","Fixed PalmOS FSNode which was failing in some cases

svn-id: r39029
"
"7361906f8c43c4fd96f1e9cac80347adafd245b0","2009-03-01 11:52:54+00:00","rescanned all amiga version from back2roots.org and added the onces which used to run with r39005

svn-id: r39031
"
"3429c17ac457bcff59f47dc68d2a11f4d1b48308","2009-03-01 12:00:44+00:00","Removed some (the last?) remains of the BS1 MPEG cutscene player.

svn-id: r39032
"
"82e4168d47488f88330a05ba11f376d27ecc6035","2009-03-01 12:08:44+00:00","Don't free a sfx_pcm_feed_t that's still in use.

It's a rather hackish fix, but this feed-wrapping code should only be
temporary anyway.

svn-id: r39033
"
"b2cffb1364ee0e4065cb14abcf8c98eff7c08fab","2009-03-01 12:08:56+00:00","Don't use the words 'MPEG' and 'Broken Sword' in the same sentence. Ever.

svn-id: r39034
"
"40c4733124a43fb2e921efd07a782ed1688cbc90","2009-03-01 12:19:28+00:00","By default, do not check for libmpeg2. Currently, there's no engine that needs it
though I guess it's possible that some will in the future.

svn-id: r39035
"
"7ea5cefef4fb1ef9db52cbf5df7f884770113684","2009-03-01 14:45:30+00:00","LOL: implemented some monster related code (monsters now get placed in the maze, but they still don't do anything)

svn-id: r39039
"
"f20554d38993406b68a53b7933f861e8d6967cf9","2009-03-01 15:15:51+00:00","Check for 'track01' as well as 'track1'. (I hope I didn't break compilation by
modifying Windows-only code.)

svn-id: r39040
"
"9e7cf21ee857b86ebd3b4f2e62064a399fb26117","2009-03-01 16:19:52+00:00","verified/added a couple of amiga versions.

svn-id: r39041
"
"1761e6bc990f49ba5ed048208f179b83329ae720","2009-03-01 17:45:57+00:00","modified patch in bug #2644574: fix build

svn-id: r39043
"
"7153410a5203c0e4f84e2d8f34f82f0c6156b9db","2009-03-01 17:48:29+00:00","slight correction

svn-id: r39044
"
"df205f26b874940c1c1640b626a652afbf967cd9","2009-03-01 17:56:42+00:00","Updated the MSVC project files of the Kyra engine

svn-id: r39046
"
"097641f021d924721ad48c9efa0bb59fb52349a1","2009-03-01 19:08:01+00:00","remove spurious links

svn-id: r39047
"
"bf894deb06f7a26e3962031cd4e7e53c51e7d87b","2009-03-01 19:46:07+00:00","silence compiler warnings: the names of some tinsel defines were shadowing standard winapi defines

svn-id: r39049
"
"b42b7a8b40cacdd226b05fe70882a8e5c69e2b55","2009-03-01 20:37:57+00:00","LOL: implement some opcodes for dialogue sequences

svn-id: r39051
"
"a718713925ef79ddfa9dd545134a46eb918441ba","2009-03-01 21:03:46+00:00","only center vertically in DW2

svn-id: r39052
"
"00db87563ae01ef60a86c4da6c7b376e74f10a8b","2009-03-01 21:23:44+00:00","SCI: Reimplemented the SCI mixer based on the old SCI DC mixer by walter, and by taking advantage of ScummVM's mixers capabilities. Got rid of sfx_pcm_mixer_t

svn-id: r39053
"
"81943a9f8ccec40fbed7326556dcd4c0b4e869a7","2009-03-01 21:47:57+00:00","COMMON: added a debugC variant which only takes a debug channel mask

svn-id: r39054
"
"8022122bb921c5b04dbbb5a2675aa5a5538a4592","2009-03-01 21:48:39+00:00","SCI: Added kDebugLevelDclInflate; changed decompressors to *not* use fprintf or printf

svn-id: r39055
"
"f509f65023d79e7f609a683c2614f9623552dcb7","2009-03-01 21:54:53+00:00","add virtual keyboard backend hints for savegame name

svn-id: r39056
"
"4f2f82adc2d9ce83407d2decf2fc2f8526d01b1c","2009-03-01 22:03:37+00:00","SCI: Unified some of the decompression funcs (they share so much code, would be nice to reduce the code duplication)

svn-id: r39057
"
"454225833664bc12b4a146d77e59caf379a1cdd7","2009-03-01 22:09:46+00:00","Fix documentation, debug(C/N) prints to stdout not stderr.

svn-id: r39058
"
"c7d7ce88881a3ff66b049b5df785791bc3808402","2009-03-01 22:13:48+00:00","better detection of aspect-scalable resolutions

svn-id: r39059
"
"0e134d5871246a546f49fa3ab0006b2f1fe91e11","2009-03-01 22:19:49+00:00","Partial revert of 'Fix handling of parentheses in said specs' (20080705)

This fixes, among other things, 'get up' followed by 'get shirt'
at the start of Iceman.

svn-id: r39060
"
"f78d6b2fae2280010dd0dcf8828a2a09fa7ca3e1","2009-03-01 22:35:14+00:00","add support for tinsel engine (off by default for the time being)

svn-id: r39061
"
"813bd1ac7ac86b012ef5245ce4c2e8fc55d1807a","2009-03-02 06:14:25+00:00","Fixed overflow in flag table.

svn-id: r39062
"
"da6315bb4c0b93cfd60dbb0ad2117caa530116e7","2009-03-02 08:32:38+00:00","Formatting fixes, and added extra constants and function name corrections

svn-id: r39063
"
"33a8fe7a7e596b13b05e091c52a0f1a2d5296394","2009-03-02 08:36:42+00:00","Initialize and save zones flags and follower position when a location switch occurs.

svn-id: r39064
"
"f1044e85b2d75c449ce687fda6b170077a37a454","2009-03-02 08:44:30+00:00","Fixed selection of zone and animation for removal in BRA. This enables the follower animation to follow the main character across location switches.

svn-id: r39065
"
"2d9705311e9acafd01f5f8fa1b617915c1cd6fb0","2009-03-02 09:14:36+00:00","Bugfix for frequent freezes when doing actions - the main movement state switch statement was actually relying on falling through case statements to work properly

svn-id: r39066
"
"310036788af846adb818ab12b42aaf425ebde03d","2009-03-02 09:16:03+00:00","Enabled walking delay for follower animation.

svn-id: r39067
"
"f72e3354e8fffd20057a29ea5c5a905a1ee1869c","2009-03-02 10:34:31+00:00","Slight cleanup

svn-id: r39068
"
"286670d424d176677a03f78714c9bf2cfe682a0c","2009-03-02 10:41:37+00:00","Slight cleanup

svn-id: r39069
"
"08a2de9447b5eba84d6cc43d77b129479ece33e7","2009-03-02 10:59:14+00:00","Changed the way Broken Sword PSX parallax are handled to improve speed

svn-id: r39070
"
"023320215097f69d99a4c907c847ce867e8069a0","2009-03-02 11:12:41+00:00","Formatting changes in older PSX related functions

svn-id: r39071
"
"ed65593bb3341df18eeb9c2794c88d89ba78390f","2009-03-02 11:30:23+00:00","Avoid using unnecessary buffers in psxBackgroundToIndexed

svn-id: r39072
"
"11a49681e45b5f5c39418248bc89c9a0d87036c7","2009-03-02 11:58:40+00:00","Implemented 'open', 'close' and 'leave' commands.

svn-id: r39073
"
"2913a561cc6eebc05d038f27076ada8a6bb6a6f7","2009-03-02 13:46:50+00:00","Avoid using unnecessary buffers in psxShrinkedBackgroundToIndexed

svn-id: r39074
"
"040da3353f98ec5e92bede2ec07c49d4bb87239d","2009-03-02 15:31:07+00:00","Marked PUT, PRINT and WAIT commands as not used in the scripts of BRA (thus they won't be implemented).

svn-id: r39075
"
"5422e81718b59af3ca40c354d6ffb03e9cc252db","2009-03-02 18:04:44+00:00","Make the file browser bigger in 1x mode

svn-id: r39077
"
"3690d9aed93cfef91744e95782fb1997f6c396ce","2009-03-02 19:54:14+00:00","Mention Broken Sword 1 PSX in the NEWS and the README.

svn-id: r39079
"
"59e847dc2d2ee056f85ef7217ce63d48cd0f7235","2009-03-02 21:45:31+00:00","Cleanup

svn-id: r39081
"
"f31990f8978ec035c4e7c56601c3438a9a00c39b","2009-03-02 22:16:44+00:00","Gave decompression methods more descriptive names. Some cleanup

svn-id: r39082
"
"0077889eeb6ad459ef299cd33527d2fb99632dd1","2009-03-02 22:37:09+00:00","Add playtime feature support to sword1

svn-id: r39083
"
"236b42bcffae68974abff22a6aaf8ea0eec35f50","2009-03-03 09:00:49+00:00","Formatting fixes

svn-id: r39086
"
"f3a9274a4590b9310b10a9999f242f6f8a5eea38","2009-03-03 10:10:35+00:00","Changed the int16[5] array used in pathfinding to a structure with explicitly named fields

svn-id: r39087
"
"eb610d66bdff66a6a768ab9fc7409a17959b17ab","2009-03-03 11:08:03+00:00","Corrected click handling when a text message is displaying to properly dismiss the text, rather than trying to immediately perform another action

svn-id: r39088
"
"cbb6f919676bd1a44d91bf672487f11973094e97","2009-03-03 14:27:49+00:00","SCI1: Improved color mapping when drawing line/box/text. Text with transparent background now displays correctly.

svn-id: r39089
"
"5f13e5ebcd770b8d2b9955eae756b37e735c1d64","2009-03-03 16:27:56+00:00","Cleaned up some comments

svn-id: r39090
"
"a4e4de9ecd5b4f23a795fbc52b3944f7b7f4b6f4","2009-03-03 17:20:02+00:00","Fixed crash in SQ4

svn-id: r39091
"
"0c378768302ddb736933a53a874c080407ebf03a","2009-03-03 17:50:30+00:00","Merged unpackDCL_hdyn() and unpackDCL() and removed some unused code

svn-id: r39093
"
"ea4f25fd308b243a322836d6546f70963363ddf6","2009-03-03 19:49:50+00:00","Renamed parameter to silence warning.

svn-id: r39094
"
"7fc8bb81a74f58d46b82b7d555ef3da4c0076ee9","2009-03-03 20:05:00+00:00","Enabled and hopefully fixed GMM saving/loading for sword1

svn-id: r39095
"
"1956c1c68f4822943a48ae58fcfbdccb44055be4","2009-03-03 21:33:45+00:00","Added missing checkCd() execution when loading through GMM

svn-id: r39096
"
"3f2af1e8a1f7033846747f744fc0f53875824e4b","2009-03-03 22:32:39+00:00","LOL: implemented some walking code for the monsters

svn-id: r39097
"
"bc3702dcdb57814da4460469722c258ca10e6327","2009-03-03 23:07:06+00:00","- ResourceManager uses HashMap to store and access resource info.
- Changes and clean-ups in resource loading code.

svn-id: r39098
"
"3a35b5b5f25a6ff5d20be5374bdb505f51ee3a43","2009-03-04 00:45:34+00:00","- Make Lands of Lore compileable optionally as suggested by _sev. (via ENABLE_LOL define)
- Change default build system to support LoL as a subengine of KYRA. LoL is currently disabled by default.

(- Minor enum name fixes for Lands of Lore code.)

svn-id: r39099
"
"804910c42219ddbbc428f619515952c1474e9096","2009-03-04 03:55:00+00:00","- 0.13.x friendly ;-)

- new GUI/themes

- no more funky colors!

- load/delete saved games


- cleaned-up Makefile.PS2 :
- dropped multiple extra paths
- dropped deprecated deps (UCL, MPEG2)


- all possible devices are supported to store, play and save games:

- CD
- HD
- USB
- MC
- REMOTE ! (this could actually be anywhere on the internet
as long as you run 'ps2client listen' on the machine on
the other side that hosts the games)


- tested from :
- ps2link
- uLE
- toxicOS


- tested with:
- bass
- bs1
- mi1
- comi
- indy4
- ft
- ite
- ihnm
- elvira1
- dig
- kyra
- lure
- simon2
- goblins1

Played all those games in 1 session using RTL. Very smooth,
sub-second RTL experience. No crash!


- new PAL/NTSC detection : we are now reading the flavor from PS2 ROM,
it should work on all PS2 slim too


- new PAL TV centering : no more missing chunk of games on top/bottom


- we can now read the savefiles from Linux/SDL and other backends!
if you add that you can read them from remote together with the
games that you already have there, you can imagine the fun ;-)


- we fully implement RTL with every games/engine


- we nicely reboot / shutdown on quit


- fully support for themes/savegames paths. Run from MC, play the
games on remote and store your data on USB or HD. No limits!


- universal write/read for every media (of course no write on CD/DVD!)


- fully async / DMA read-write access to every media (even MC!)


- optimized cache/read-ahead for every media - now COMI is fast and
enjoyable from remote as it is from CD ;-)


- non polluting MC storage, just 1 folder + 1 icon, so that you can
copy all your settings / saved games to another MC in one go!

svn-id: r39102
"
"2943234d6fa9ccfad6aac096668f6681ce7d66ed","2009-03-04 04:35:06+00:00","SCI: Fix warnings

svn-id: r39103
"
"51d25d0086f3249b13fe53da36579d873f54b7cb","2009-03-04 05:00:15+00:00","Removed stale READ_PS2.TXT

svn-id: r39104
"
"57e0d1611268efc5f4dda8fd02fb4dfe11b0eb5b","2009-03-04 05:09:35+00:00","SCI: Added TODO (rect_t should be replaced by Common::Rect), minor tweaks

svn-id: r39105
"
"302a99a2c0223bceb3a1f553f1b4ec0bf4b13fea","2009-03-04 05:19:19+00:00","SCI: cleanup

svn-id: r39106
"
"900fdc514cb772c0f98084eff59e0835d864389a","2009-03-04 05:22:29+00:00","SCI: Reduce header interdeps

svn-id: r39107
"
"66b78a81dd5c80ed53df44f168780826dff6f175","2009-03-04 05:25:31+00:00","SCI: Moved script.cpp from scicore/ to engine/ (because its header file is there, and it seems its funcs are only called from stuff in engine/)

svn-id: r39108
"
"59b374505f3a8fc4017352ff29266046a116884b","2009-03-04 06:08:30+00:00","Fixed weirdness in groovie (as reported on scummvm-devel)

svn-id: r39109
"
"92eceb741ae713c5b2341543e249799e08c89b0d","2009-03-04 06:23:14+00:00","SCI: mixer cleanup

svn-id: r39111
"
"673a21b249d9a1753cb2622be1085636299e0990","2009-03-04 06:58:28+00:00","Added Audio::Timestamp class, based on SCI's sfx_timestamp_t; also provide a unit test for it, based on the old (and very outdated) timetest.cpp. To be used by Audio::Mixer one day...

svn-id: r39112
"
"0a206fb031152a7b36877fe8e547f250b52c4b0b","2009-03-04 06:58:51+00:00","SCI: Use Audio::Timestamp instead of sfx_timestamp_t

svn-id: r39113
"
"edc6cc642a92116d3183b072e5a684e1e1410f37","2009-03-04 07:22:29+00:00","Added capabilities to allow BT Mouse support

svn-id: r39114
"
"e783859d5c58546b05649c1eb92c6bdbf66b5bb2","2009-03-04 07:31:31+00:00","SCI: Replaced sfx_iterator_make_feed and associated code by Audio::makeLinearInputStream

svn-id: r39115
"
"ac2d012ae5ee9b7d7431432f2ce312d9f0b8e391","2009-03-04 07:38:49+00:00","SCI: Merged sfx/mixer.cpp into sfx/player/polled.cpp

svn-id: r39116
"
"ce5c6f3a9526fdbe03cc08be4699639ff4ebb749","2009-03-04 07:46:27+00:00","SCI: Added FIXME about Opl2 driver hardcoding sample rate. well, we probably should ditch that one and use our fmopl...

svn-id: r39117
"
"dbb59ce3a1a7e3981e7a1193bdca753759bd2141","2009-03-04 07:59:33+00:00","SCI: Merged polled player & PCMFeedAudioStream -> PolledPlayerAudioStream

svn-id: r39118
"
"2a7eef19c0722752200713d3834f53637a2ecd5e","2009-03-04 08:04:28+00:00","SCI: Removed unused FEED_MODE_DEAD, extended FIXME comment for FEED_MODE_RESTART

svn-id: r39119
"
"928a276c04f485ed0ca2d83d8b0827a81a33dff0","2009-03-04 10:33:29+00:00","sword1: enable thumbnails when saving through GMM

svn-id: r39121
"
"f6028bc8224fb20bca13c947e76a1146753a975d","2009-03-04 10:39:12+00:00","sword1: disable saving/loading through GMM when in game menu

svn-id: r39122
"
"f006f9491498a09f47ca84ebbe5285c806fd1c89","2009-03-04 10:53:36+00:00","Fixed compilation when ENABLE_LOL is not set

svn-id: r39123
"
"565c075e3b7491a20618b46df09403cf323efed7","2009-03-04 11:14:14+00:00","Updated the MSVC project files for the SCI engine and the ScummVM common code with the latest changes

svn-id: r39124
"
"efd7c2eac972e86c6e0d4699dcb8f2ce38649587","2009-03-04 11:53:25+00:00","Ease conditional LoL compiling with build systems not based on the default one.

svn-id: r39125
"
"b594af53893ea16ee3f2c0e44c41afbdc72a867b","2009-03-04 12:00:03+00:00","Enabled LoL for MSVC

svn-id: r39127
"
"7270c879194837627968af9717ff7100e46741cf","2009-03-04 12:28:23+00:00","Fix bug #2621207 'GUI: Debug console glitch'.

svn-id: r39128
"
"cdc9f46bd921b5135f5f8a5881823377cebd6e55","2009-03-04 12:44:55+00:00","sword1: removed custom checks for thumbnails, using graphics/thumbnail.h functions instead

svn-id: r39130
"
"047f116515e07cdebb54284a1078a6d581595158","2009-03-05 12:04:58+00:00","Renamed MetaEngine::getCopyright() to getOriginalCopyright() to better match the meaning of the returned string, as discussed some time ago in scummvm-devel

svn-id: r39132
"
"2017d1c9ea12968e80a7aaeed1d9289f39c3a96e","2009-03-05 19:43:12+00:00","Added a missing NULLing

svn-id: r39134
"
"05b4370c21b3abf7a1ff6aa83194cf95ab73579c","2009-03-05 20:37:53+00:00","Fix for bug #2664460: Various SeekableReadStream::seek() implementations (as well as our unit tests, ouch) handled SEEK_END incorrectly (using -offset instead of offset), contrary to what the docs said and what fseek does. Hopefully I found and fixed all affected parts, but still watch out for regressions

svn-id: r39135
"
"e75178f383edd20ad8ab1b74dead78b2199f9476","2009-03-05 21:38:17+00:00","Add minor verb code differences in Elvira 1/2.

svn-id: r39136
"
"7ef3a59a2cbea1046c31161e3a37a89ed0252dce","2009-03-05 21:50:01+00:00","don't crash if sound has been disabled or the backend driver failed to initialize.

svn-id: r39137
"
"5e133bbf933941eb37157d7e5b12b85f97b1d4bb","2009-03-05 22:19:29+00:00","readResourcePatchesSCI0 and readResourcePatchesSCI1 merged. Some clean-ups

svn-id: r39138
"
"b7ad1cf1f2a665c9dd297914c44f45196ce10a53","2009-03-05 22:28:00+00:00","Removed Resource.location_dir_name

svn-id: r39139
"
"865b213439d624b5eced128ffa3eb6a318ab37b7","2009-03-05 23:27:02+00:00","- Change Resource::LRU to use Common::List
- Real patch filename stored and used instead of calling patch_sprintf_funct()
- some fprintf()s replaced with debug() and warning()

svn-id: r39140
"
"6d870649507594a87c40d8fae0f5aa204d0b4520","2009-03-06 00:21:06+00:00","Implemented _overlayFormat in Gs2dScreen

Modified PS2FSNode openForReading -> createReadStream
openForWriting -> createWriteStream

Started Common::EventManager *OSystem::getEventManager()
on backend side...

svn-id: r39141
"
"5df197f5791ee0561b14cd6ddc5da41e86dd2337","2009-03-06 00:24:18+00:00","Oops!

Forgot to commit backends/fs/ps2/ps2-fs.cpp in #36014
(here it comes!)

svn-id: r39142
"
"344a4f5199d50127bb7e66dd1a6a69b4c205d30e","2009-03-06 00:26:48+00:00","Added more ps2_* pseudo-posix entries for PS2 backend in
fs/stdiostream.cpp to properly support eof / clearerr.

svn-id: r39143
"
"188d8f4414dc3451620ac8adacc3be2a23997b1e","2009-03-06 00:28:39+00:00","Removed the defined(__PLAYSTATION2__) case to re-enable extra paths for PS2.

svn-id: r39144
"
"0c681f85a4035d44948e53584cc4d5c8ca324ba9","2009-03-06 00:41:46+00:00","cleanup

svn-id: r39147
"
"5e2ee01b39392eecd966624e1d0efc75ee41bc10","2009-03-06 07:25:06+00:00","SCI: Renamed lots of classes related to song iterators; allocate song iterators via new/delete instead of malloc/free

svn-id: r39148
"
"f8d9e4fdcc6bc2e3eab60b69cb31be070fed73d0","2009-03-06 07:25:15+00:00","SCI: Restructured PolledPlayerAudioStream::readBuffer a bit

svn-id: r39149
"
"24dac898fe9596ee5d0b3fc5c563694c6e4f8657","2009-03-06 07:25:25+00:00","SCI: Converted SongIterator::get_pcm_feed into a virtual method

svn-id: r39150
"
"018d19e0204c874a6198fdfe513595c0cf5ac619","2009-03-06 07:25:37+00:00","SCI: Some cleanup to the SongIteratorMessage code

svn-id: r39151
"
"0f3d67c1ac939bf93b1c9d315e629f1a0cbd0884","2009-03-06 07:25:48+00:00","SCI: C++ifyed SongIterator and its subclasses

svn-id: r39152
"
"d16b4ef949aabced00fbcb7ab4642f8d483f335f","2009-03-06 09:22:03+00:00","Switch pause key to Pause in AGOS engine, and drop the debug keys.

svn-id: r39153
"
"b8a2b38e4168c34813aa8ab6f3b8d371e799fbad","2009-03-06 11:06:04+00:00","SongIterator is a class, not a struct

svn-id: r39154
"
"c4a09af0afd5a4599a45366a47a8a5f90f20f067","2009-03-06 13:09:10+00:00","Cleanup and unification. Merged decryptinit3() inside decrypt3()

svn-id: r39155
"
"e3ac2ecfaad517c0d6b020efc45f2e45fadc9b43","2009-03-06 17:39:15+00:00","SCI: Started to revamp the song iterator death notification system (which currently is mess :)

svn-id: r39156
"
"e134281b5c7e25dc0d322cba108c646d35e5ae1e","2009-03-06 17:39:46+00:00","SCI: Fixed (I hope) song iterator death listeners; and some cleanup

svn-id: r39157
"
"763275f2699f0718d45e7732efe25434161f0c7c","2009-03-06 17:53:11+00:00","SCI: Continued C++ification of SongIterator code

svn-id: r39158
"
"54e1256b0e6d4fdab26ae820b49e3e2faaff6240","2009-03-06 18:11:12+00:00","SCI: Reduce SFX header dependencies

svn-id: r39159
"
"d34aa2a6cab93ec0fe0565e3b3331ee97de22eb8","2009-03-06 18:14:44+00:00","Add LOL as an enabled engine to enable compilation

svn-id: r39160
"
"19437c2c1f18bea4746300f18caa16b924a5e7f2","2009-03-06 18:18:52+00:00","Handle subengine LOL in perl script

svn-id: r39161
"
"9fba36dcdefee76037d1c573c0688aa31c162fcf","2009-03-06 18:26:48+00:00","Add subsection for subengine LOL in kyra

svn-id: r39162
"
"b98bd77d3fa0db5c8994f830fa69c0ecac3a0b2d","2009-03-06 20:27:34+00:00","Add initial support for VKB and keymapper shortcuts.
Add missing fnmatch function

svn-id: r39163
"
"3753d0b5f8f4fde1c7d5be10deb980bbc1bcda65","2009-03-06 21:41:13+00:00","Added save action for Cruise

svn-id: r39164
"
"8639e34b41a22336301bff08827dfc7f0988424c","2009-03-06 22:53:08+00:00","LOL: - doors can now be opened and closed
- some more work on monster walk code

svn-id: r39166
"
"fc4df48e135dea9ea87d8e914ca59fe300dba3fe","2009-03-06 23:52:12+00:00","SongIterator is a class, not a struct

svn-id: r39167
"
"d262073193906c1d60050c2a24a2c3200026581e","2009-03-06 23:59:12+00:00","LOL: - some opcodes for the first throne room sequence

svn-id: r39168
"
"f028f53d3e9b077c7a821b244a717124f631ac10","2009-03-07 00:59:38+00:00","Map/volume loader and version detection functions cleaned and reworked.
Autodetection still misdetects some SCI1/SCI1.1 games though.

svn-id: r39169
"
"18efc4476832a1799c304c38e74cdf667e869c7a","2009-03-07 01:08:34+00:00","Use map/volume versions from detection.cpp if set

svn-id: r39170
"
"7fe1dbdf16be645f0ea0ccf0859ea3a4303181f4","2009-03-07 04:42:59+00:00","Cleaned / reworked readResourceMapSCI0 and readResourceMapSCI1
Removed unused functions and #defines

svn-id: r39171
"
"f1dd168aae21d3139d47f3e121e1b09731a42f36","2009-03-07 04:49:34+00:00","Merged scicore/resource_map.cpp and scicore/resource_patch.cpp to scicore/resource.cpp because these remaining functions are members of ResourceManager

svn-id: r39172
"
"ccf9dedecbfa82767137620483242ee6257d0b93","2009-03-07 05:01:56+00:00","Modified HashMap ctr to skip _defaultVal() on PS2 to avoid gcc 3.2.2 ICE

svn-id: r39174
"
"de2083880406bd43a27f4d08027d5b3e77f50bcb","2009-03-07 05:44:36+00:00","Added detection of SCI1.1 and SCI32 resource volumes

svn-id: r39175
"
"4f555bf36edf3c8a1f5c804d422eabf42793ded6","2009-03-07 05:55:42+00:00","SCI: Removed resource_map.o and resource_patch.o from module.mk

svn-id: r39176
"
"c2f08b10d2849e72f38dab7dcbedd3b9ab5a7e50","2009-03-07 06:56:39+00:00","SCI: More cleanup in the song iterator codebase

svn-id: r39177
"
"18b34542800215b085702f853b0441c86a303aaf","2009-03-07 06:57:17+00:00","SCI: Replaced linked list of Sci1Samples by a Common::List

svn-id: r39178
"
"63eda8cf3c4401eac700c5534198cc4e204cf176","2009-03-07 06:57:59+00:00","Added Greg and myself to SCI engine credis

svn-id: r39179
"
"979c1e0f6ad0376ab35f908f28377528fd6aad69","2009-03-07 07:12:10+00:00","Fixed some method parameters, changed the main loop to a method of the engine class, and moved the frame delay code to the main loop to make the game more responsive to events

svn-id: r39180
"
"dd10e99c2eb800425b9e10e1813531731f319dde","2009-03-07 07:29:33+00:00","Bye bye FNMatch

svn-id: r39181
"
"32e49fe2cf9c9fc1036b583dd39b8e2c351f81b4","2009-03-07 13:29:11+00:00","Fix buffer overflow in matchSaveGame().

svn-id: r39182
"
"7a88744b749e45efa8fb7339cf0989c5572f3863","2009-03-07 13:40:00+00:00","Patch #2671477: Fix wrong usage of strncat

svn-id: r39184
"
"309fb5f60be43f59553de2f6960484c5089e729a","2009-03-07 14:40:58+00:00","Fixed crash when reading some SCI1 resource map

svn-id: r39185
"
"c252147a40994875d760d6b5f447fbb3e7ab4ade","2009-03-07 15:29:52+00:00","Don't crash if a cutscene is missing. (Like they are in the demo, for instance.)

svn-id: r39186
"
"826638d45be45972a94dd683eb156f0753ecaa32","2009-03-07 15:46:21+00:00","LOL: - implemented some opcodes(

svn-id: r39187
"
"f05e49433ca8980ca533036613038c40ae8fa9ac","2009-03-07 15:48:54+00:00","Removed unused code

svn-id: r39188
"
"1e29983d8e1b29adb75d478454be79dce7a113b4","2009-03-07 16:14:20+00:00","Replaced getInt16, getUInt16 and putInt16

svn-id: r39189
"
"f7e980b56e19157ced359650446fa1c15fbcf6d6","2009-03-07 16:17:01+00:00","Replaced gfxprintf

svn-id: r39190
"
"f3a953e4f79956b6cbf251cc6985a6e68dcea3e4","2009-03-07 16:34:27+00:00","Updated xcde project

svn-id: r39191
"
"91f2553260e6269889bf98db194cbb1c2c9eb573","2009-03-07 17:08:31+00:00","Merged all the different cursor drawing functions inside gfxr_interpreter_get_cursor()

svn-id: r39192
"
"950937c4467af993f2b6e7d6afd035434b96743f","2009-03-07 17:12:42+00:00","Updated the MSVC project files of the SCI engine

svn-id: r39193
"
"041af01f7d2053cad29f022865325602cb44d39b","2009-03-07 17:27:18+00:00","Don't show a warning dialog for missing cutscenes in the demo. As noted in bug
#2669360, the demo tries to play cutscenes which really aren't there.

svn-id: r39194
"
"cdb4cdf070e72ed1da539df6cf16df01af6d8df9","2009-03-07 17:32:11+00:00","The ScummVM debug console is now working (though only the 'version' command is assigned, for now)

svn-id: r39195
"
"73a4664552d5bfcba2a87d03fbf7aa53b622908c","2009-03-07 17:55:00+00:00","Replaced getInt15 in intstrument-map.cpp as well

svn-id: r39196
"
"5c8ea3ccf4a5c587c4e6a9ad007a0b814a0ef1f4","2009-03-07 18:43:15+00:00","Updated savegame.cfsml

svn-id: r39198
"
"0a99cfb4ed12338a643368ab312d1307b4207c5f","2009-03-07 19:23:32+00:00","SCI: Moved scummvm_get_event to operations.cpp (the only place where it is used), to ease future refactoring of the event handling code

svn-id: r39201
"
"2dfae035ac7351b1161d0466405c1d44d69f701a","2009-03-07 19:23:47+00:00","SCI:  Reduced header interdependencies some more

svn-id: r39202
"
"f9ecd95d6960341e696ab1aa8262e48135908d51","2009-03-07 19:24:31+00:00","Whitespace cleanup: Convert space followed by tab to just tab

svn-id: r39203
"
"89cb6b09c790bc38e49d11306d171162fec967a7","2009-03-07 20:33:29+00:00","Enable the MADE engine by default

svn-id: r39204
"
"e7defa3820df233866f364edb35c58c7f9835464","2009-03-07 20:54:34+00:00","Fixed bug #2665117 - 'ITE: Italian Floppy version wrong size'

svn-id: r39205
"
"c73740f2c008ccad4d58f5a9a4d70eb87cea3708","2009-03-07 21:38:34+00:00","Added comment about a possible FIXME.

svn-id: r39207
"
"cc89a46a0ef8b9bd62e69ab0d6a8c1e28bc46781","2009-03-07 22:11:38+00:00","Fix compile of SAGA2 game engine.

svn-id: r39208
"
"e23fd08dfbdac9d6eedb78813d3504eeccba31a5","2009-03-08 02:17:14+00:00","LOL: fixed bug reported by MD5 (crashes and freezes caused by calls to non-existent sub scripts)

svn-id: r39209
"
"edc18a22994cbbe5b497d847440d0fc3cb776ac5","2009-03-08 03:26:21+00:00","LOL: some opcodes for the library room (so that the game will at least not freeze when clicking one of the books)

svn-id: r39210
"
"aad0ad3fa69979754ef2be0fa17766314b507aa4","2009-03-08 08:15:56+00:00","SCI: Added new header gfx/font.h and removed some dead code

svn-id: r39211
"
"877629cb2e9c24622cd03d9e3433ab37c7207902","2009-03-08 08:16:08+00:00","SCI: replaced get_int_16 by READ_LE_UINT16, and got rid of inverse_16

svn-id: r39212
"
"7cf72e8a177b0cbc1c7f9c9e838cf8596ab9e849","2009-03-08 08:17:18+00:00","SCI: Renamed vocab.cpp to vocabulary.cpp, to match the name of the header file

svn-id: r39213
"
"efa5493b2d01efed5c9488b3c324469969812296","2009-03-08 08:17:43+00:00","SCI: Changed suffix list to be stored as a Common::List; also fixed spelling: suffices -> suffixes

svn-id: r39214
"
"7bfab75a0814d0655a2504bf4c461df0000da0e4","2009-03-08 08:17:59+00:00","SCI: Fixed regression in new_fast_forward_iterator

svn-id: r39215
"
"2620d6836c001f2f295cb6efd6beab78f5a3c50f","2009-03-08 08:45:21+00:00","Add initial support for Personal Nightmare.

Thanks to dreammaster for file decompression and icon decoding code.

NOTE: setjmp/longjmp code will require conversion for portability.

svn-id: r39216
"
"6b76f72f322d4b3e5d9d9dc18ace84c6c1b8f919","2009-03-08 09:31:35+00:00","Re-use save game slot, if the name matches, when saving in PN.

svn-id: r39217
"
"a630759d6db2d3f0aae4b7baf9a1e0fcf323f2e1","2009-03-08 09:53:52+00:00","Don't attempt to load save game slot in PN, if no match found.

svn-id: r39218
"
"56189fcf30e0f0bcf086d82896a26e6bda2b0bc0","2009-03-08 10:08:09+00:00","Clarify several errors messages.

svn-id: r39219
"
"68490c5c1e74b094da946ba53f69bd5faa8b60d7","2009-03-08 12:13:10+00:00","Move Greg Frieger from Tinsel to SCI in credits as intended by r39179

svn-id: r39220
"
"275cf8a383a58262c939b7662f1b7ec02f69cb86","2009-03-08 13:11:06+00:00","Cleanup.

svn-id: r39221
"
"1937dca584ab38db4af7084649a59ccd3c3bf1ca","2009-03-08 13:18:07+00:00","Cleanup.

svn-id: r39222
"
"e8a00262ed860386c91b16365a01bb9e2f4841ee","2009-03-08 13:19:19+00:00","Correct error in hitBox8().

svn-id: r39223
"
"3524032314b44e56cbfa56c692f1aea75af3cf95","2009-03-08 13:28:22+00:00","Cleanup.

svn-id: r39224
"
"8318750f4131a36d0470f9f7ced672f3efc3a5d6","2009-03-08 13:32:27+00:00","- Cleanup
- Add FIXME

svn-id: r39225
"
"feabf9d33f8bbf98aa8afd2be8303b34a084c410","2009-03-08 13:43:11+00:00","Fix boxes not blocking control/priority map.

This is a regression from r39089 and caused text to be hidden behind
trees in the KQ5 introduction and missing text in longbow.

svn-id: r39226
"
"e5e9797d9ceae790a6f6a0b0e127bd47abfcc4c3","2009-03-08 14:15:59+00:00","Cleanup.

svn-id: r39227
"
"52f3b24668b9b73f4df83ee20fd1151db6599ca4","2009-03-08 14:27:35+00:00","Restore potentially useful info deleted in r39188

svn-id: r39228
"
"ca2c1b35b4fe2f122387610924b578870bed544d","2009-03-08 14:28:05+00:00","Variable _oneClick is a byte, so we can't compare it to boolean true/false

svn-id: r39229
"
"de6f1ec597106f062cb1475844936693dd03cff3","2009-03-08 14:33:18+00:00","Oops, fix size argument to memset call.

svn-id: r39230
"
"70ef87a38badd329663bbda0c925402f71f8d256","2009-03-08 14:36:09+00:00","Updated the AGOS engine with the additional files for PN. Also, warnings are not treated as errors in AGOS, cause MSVC throws a warning about the currently non-portable setjmp code in PN

svn-id: r39231
"
"ef2758fd71bf282af763e6d2009986034889d6cd","2009-03-08 14:37:41+00:00","Updated the MSVC project files of the SCI engine (added gfx/font.h)

svn-id: r39232
"
"468f9c43b7e0fee68edc796213639648877a738f","2009-03-08 14:39:04+00:00","Correct more errors in hitBox8().

svn-id: r39233
"
"9d7111006dcdbbe0465b95d5c5adb2c5affe790c","2009-03-08 15:39:19+00:00","- Reworked the different file types a bit
- Some initial work on Dinotopia's intro sequence

svn-id: r39234
"
"44f479c82ead58dafbf1de4d3ab437e28cec3a86","2009-03-08 15:40:46+00:00","Updated the MSVC project files of the SAGA engine

svn-id: r39235
"
"ef1e3ebc3c4d173704ca76cc82f0e3a09a84db86","2009-03-08 15:57:59+00:00","Patch #2658710: 'Add comments to specify which engines use which decoders'

svn-id: r39236
"
"0c51a5f3939f739567baa794eb66d3e0203944c3","2009-03-08 16:05:49+00:00","Added game object data files for dino and FTA2

svn-id: r39237
"
"b5e40034bcc00cb41644895dbd21c69a39ddb1e4","2009-03-08 16:09:25+00:00","The xcode project can now compile a native Mac OS X build

svn-id: r39238
"
"fcb2faa18a7552cb3cdbd44ddf4de186a175940e","2009-03-08 17:02:06+00:00","Added proper icon for the mac os x target

svn-id: r39239
"
"6c0ac7f692e46d669d992bebf6d386306b6c42e6","2009-03-08 17:20:33+00:00","Resurrection of SCI tools. Step 1.

svn-id: r39240
"
"85f6f204195c0859ecf4119e63d5f53b91fb5684","2009-03-08 18:58:09+00:00","some cleanup

svn-id: r39241
"
"ced40b2266976d0129294a1c5925b7d88024b2de","2009-03-08 20:17:01+00:00","Use new Palette class to manager pixmap palettes.

There are some remaining regressions with text colour in SCI1 games,
but overall it should fix more than it breaks.

svn-id: r39242
"
"77d056654fd37119b70b1be1c3b63365beeb377d","2009-03-08 20:43:36+00:00","Fix missing return.

svn-id: r39243
"
"e123621cf99117143b7d80e70b911086daad766a","2009-03-08 20:51:30+00:00","Fix warning.

svn-id: r39244
"
"9068ae84246eae5b4915d18ca88fc23308a64875","2009-03-08 21:05:39+00:00","Formatting.

svn-id: r39245
"
"6ccb7bea5b1ec48b4a212ff94464d687f9730b08","2009-03-08 22:44:47+00:00","Added more missing NULLing

svn-id: r39246
"
"b2ec4050119d8a2cbfef8a7cdcb7c96051a4b63e","2009-03-08 22:51:19+00:00","Add loading of hard coded icon data in the AtariST version of PN.

svn-id: r39247
"
"2abfb968a601031e211e01d742f7d78f9b5e8134","2009-03-08 22:54:00+00:00","Replace samewrd() function, with scumm_strnicmp.

svn-id: r39248
"
"6cb3f665aff572fdbdb12c940ace9c4bfe912138","2009-03-08 23:28:19+00:00","LOL: some more work on the text displayer so that it handles longer texts (needed for some library books)

svn-id: r39249
"
"6d9a047276d55c1e7299bfa503a7637205acf27f","2009-03-09 00:54:27+00:00","LOL: minor fix for text displayer (text pages now advance automatically when the speech has reached the next part)

svn-id: r39250
"
"76ab92f8ec6735c81dc80bb1ea836599f38abe2c","2009-03-09 01:57:42+00:00","LOL: added scene animations (like that fountain right at the start)

svn-id: r39251
"
"b2d49eaeef32b34353c787884f23892411e169f9","2009-03-09 02:07:06+00:00","Add comment to getlong().

svn-id: r39252
"
"2bd2fe43c5b2514b9dc3e5d851dcb3affec78167","2009-03-09 02:25:29+00:00","Change Personal Nightmare support to optional, until setjmp/longjmp code is converted.

svn-id: r39253
"
"93240b003adb08d83703b03e192bd5905aa61884","2009-03-09 02:50:25+00:00","cleanup ;-)

svn-id: r39254
"
"e080a593378bcaf44a7b44c297dcb291a2b584a8","2009-03-09 03:45:23+00:00","Renamed SMKPlayer -> SmackerDecoder and DXAPlayer -> DXADecoder, as well as some other tweaks

svn-id: r39255
"
"563d76d34292bf8e83bbb6fb254799af2ebe9fb8","2009-03-09 03:45:33+00:00","AGOS: Changed _leftButtonDown & _rightButtonDown from byte to int

svn-id: r39256
"
"7cd40da1be0278b31bc012005544b41aab6cf231","2009-03-09 03:45:40+00:00","Added some comments to Audio::Timestamp

svn-id: r39257
"
"269754759f3c4f7ebb2e33f55f429239b1345aae","2009-03-09 03:58:18+00:00","Changed _inputting & _inputReady from uint8 to bool.

svn-id: r39258
"
"93deecccefe3d299c584fd38c719a6e532753a05","2009-03-09 04:16:27+00:00","Minor cleanup.

svn-id: r39259
"
"2ff57df1e5c61a2047f820a4c96c60580f7ca889","2009-03-09 04:37:31+00:00","Cleanup.

svn-id: r39260
"
"b771aa5f0d51d9410c234f8a5c9e1915f7aa55d5","2009-03-09 08:38:02+00:00","Add more code differences in PN.

svn-id: r39261
"
"77b40251ca9f22b71680888ee6dd69e027f765ba","2009-03-09 16:15:25+00:00","Added some more Audio::Timestamp unit tests

svn-id: r39262
"
"4e6a7d83d116dc9ae81d51a7f0ac61134486304d","2009-03-09 16:15:35+00:00","SCI: Rewrote handling of song wakeup times & (iterator) delays, to avoid rounding issues between ticks (1/60s) and milliseconds; also fixed a bug (coming from Glutton ;) where delays measured in millisecs were treated as ticks instead. Thanks to Walter for the precursor of this patch

svn-id: r39263
"
"72897a4b0993dce0dcdae62c06429e46e0159211","2009-03-09 18:03:46+00:00","Added LGOP2 detection entries:
- German, supplied by windlepoons (bug tracker #2675695)
- French and Spanish, supplied by goodoldgeorg (bug tracker #2675759)

svn-id: r39270
"
"f52557549542d9a3b36c73ca28c02608432ebf5f","2009-03-09 18:19:53+00:00","- Applied patch #2668849 by sunmax

svn-id: r39271
"
"d2514d20b97c43402835574ef9b5d2258ac3c4a7","2009-03-09 19:44:10+00:00","Reset child iterators on deletion.
This fixes an illegal access in ~TeeSongIterator.

svn-id: r39272
"
"7ec2a981776d2935deff007f2566255fcafda00f","2009-03-09 19:55:18+00:00","SCI: Added BaseSongIterator copy constructor which invokey sci_refcount_incref

svn-id: r39273
"
"a00559136ff5d4d09f3ee3c0a879c8766ae0c24e","2009-03-09 20:31:43+00:00","Fix uninitialized color meta-values.
This fixes holes in text boxes in Iceman, among other things.

svn-id: r39274
"
"cbf2602783b6c29ef0108030509a851c3fff1e21","2009-03-09 20:34:36+00:00","LOL: - fixed inventory bug
- fixed monster speed

svn-id: r39275
"
"1e4c9488f20dc21e47d67053411cd1901afb4e20","2009-03-09 21:11:39+00:00","Don't adjust data pointer in makeStream.
It is already adjusted in getAudioStream.

svn-id: r39276
"
"f3e50fba7c7e7715c2e54f8d7de22434f87beae5","2009-03-09 21:42:10+00:00","Personal Nightmare is part of the AGOS engine.

svn-id: r39277
"
"6c932497151f54f31d7b6fbf34a2ee24fd362d63","2009-03-09 22:25:33+00:00","SCI: result_word_t -> ResultWord; switched to Common::List for storing lists of ResultWords

svn-id: r39278
"
"5181546c639b67fa821b849ca18e37f4bf846cb1","2009-03-09 22:26:02+00:00","Rewrote Common::List iterator code to ensure const correctness is preserved.

We tried to implement the list iterators in a clever way, to reduce code
duplication. But this is essentially impossible to do properly, sadly --
this is one of the places where the ugly drawbacks of C++ really show.
As a consequence, our implementation had a bug which allowed one to
convert any const_iterator to an iterator, thus allowing modifying
elements of const lists.

This rewrite reintroduces code duplication but at least ensures that no
const list is written to accidentally.

Also fix some places which incorrectly used iterator instead of const_iterator
or (in the kyra code) accidentally wrote into a const list.

svn-id: r39279
"
"00c6d2c91c3216e8687fd67e4a87aca30a7413e5","2009-03-09 22:39:53+00:00","Fix compiler warnings.

svn-id: r39280
"
"52b52d3c5e28d46b279f35be37920130a85ca2de","2009-03-09 23:08:44+00:00","Fix for bug #2671611: T7G: Checksums for unknown english 7th Guest cd version

Now instead of showing partial list of files detector will provide 'submit
md5' message only if at least one entry with every file present will be
found.

svn-id: r39281
"
"940f19dc232b61092cc60f118053a4ad1551bee4","2009-03-10 00:19:44+00:00","Groovie: Initial support for different opcode sets

svn-id: r39282
"
"2809c23fc9f70ce6542dcd2d1ee713d67965754c","2009-03-10 00:26:40+00:00","Add snap scroll option from original games (SCUMM3-5), and enable for earlier games too.

svn-id: r39283
"
"f2a066e42fd8da2a6924e8094e680ad61e94a9b8","2009-03-10 00:32:20+00:00","LOL: - some opcodes and interface code so that you can at least get out of the shops and Geron's room

svn-id: r39284
"
"d666af279c8d0915ac492f75e20ed3fdd6df9636","2009-03-10 00:36:56+00:00","Alter/revert last changes to moveCamera(), as VAR_CAMERA_FAST_X is used by a few scripts in Indy3 too.

svn-id: r39285
"
"30856ddc4d046886ea0ec6cd9ec8782b2f834083","2009-03-10 00:44:33+00:00","SCUMM: Fix snap scroll dialog messages

svn-id: r39286
"
"073cc060e9594cf61bb556d4576689742648caef","2009-03-10 02:41:35+00:00","Fixed warning in list code

svn-id: r39287
"
"842a42b1bd91f881493856408a9ab8bc8b69b480","2009-03-10 02:41:56+00:00","SCI: More SongIterator refactoring.

* Added SongIterator::clone()
* got rid of songit_clone()
* removed SIMSG_CLONE and related code
* removed SongIterator::flags
* turned songit_new_tee into TeeSongIterator constructor

svn-id: r39288
"
"6b5897353611421bad8d05df42bef5c2eccce798","2009-03-10 02:42:22+00:00","SCI: Renamed SongIteratorMessage -> SongIterator::Message; cleanup

svn-id: r39289
"
"7f1a9b385dd515fc48e797b2e167dc70e3f67ecb","2009-03-10 02:57:30+00:00","SCI: SongIterator::Message only needs to transfer a single argument, so get rid of the second slot

svn-id: r39290
"
"a4ad40235c55a1a1fc11affccf67379aa16367c5","2009-03-10 07:35:06+00:00","Fix graphics corruption in 11H FMV streams

svn-id: r39291
"
"c908f3c3321fb04fbe5741a949ad4d20c85dfd68","2009-03-10 10:36:43+00:00","- Renamed files inside gfx/resource
- Merged sci_picfill_aux.cpp and sci_picfill.cpp into picfill.cpp (as this is the only place where the auxiliary fill functions are used)

svn-id: r39292
"
"d7b767d90c2c5bb19e3a76432a3ae6292324c89e","2009-03-10 10:55:36+00:00","Reverted some of the changes of commit #39192. The cursor reading code has been placed back in a separate file, and not in the resource manager (but it's now 1 function)

svn-id: r39293
"
"519e16b9e2745777cfb16bc0ba23ead60cc0b0eb","2009-03-10 11:00:50+00:00","Updated the MSVC project files of the SCI engine and ScummVM

svn-id: r39294
"
"4de1cd89ca675ccdcbb10e829b39e10f8c610942","2009-03-10 11:16:07+00:00","Fix compile of SCI engine.

svn-id: r39295
"
"cbfd80a5d17314790751ab59cffdf318a4b592b5","2009-03-10 13:48:42+00:00","Fix GMM loading disabled after loading savegame from ScummVM menu

svn-id: r39296
"
"3cddcb1660c32b902052e0e65b75e434e0f1035c","2009-03-10 14:52:02+00:00","String fragments support
WIP: No regressions in this part, I hope

svn-id: r39297
"
"d8824d631afb553b9e9a637f8912f7f5225621c1","2009-03-10 16:24:40+00:00","Fixed warnings

svn-id: r39298
"
"49393c79e5f7e28627164fec6b5ac9d646d5ea9b","2009-03-10 17:41:58+00:00","Minor fix to deallocate STRING_FRAG segments properly

svn-id: r39299
"
"9b4f52aefd9144918e68e17692a5d44f1cdfbb11","2009-03-10 18:10:22+00:00","Add missing file.

svn-id: r39300
"
"74cea8d75d1a173dfb6dae74980ece32fb9f50d4","2009-03-10 18:22:10+00:00","- Fix warning
- Fix missing return in stringfrag_getchar (someone check out the FIXME there, please)

svn-id: r39301
"
"073a1b3f9689478d5d1bc3d19034ad6fa06233d5","2009-03-10 18:33:36+00:00","Formatted code to conform to our coding standards. Also, added parentheses to clarify '&' operator precedence

svn-id: r39302
"
"2a4c6bdb71c18a803734a203a08f7d7b1f948e62","2009-03-10 18:35:13+00:00","Added missing SVN keywords

svn-id: r39303
"
"39359479ea4e3a2bf7a335a51c9e28c7515669ff","2009-03-10 18:42:18+00:00","- Fix code indentation
- Some (minor other) fromatting fixes

svn-id: r39304
"
"4da6fbbb76987ea6f2c7cef70da6a9e497fddf2d","2009-03-10 19:08:07+00:00","SCI: Memory 'ref counting' code is only used by song iterators -> move it there, make it private (to be replaced one day by something else, e.g. Common::SharedPtr)

svn-id: r39305
"
"1bc84955a3cbfa8c6261058f6cf3f654d47e5189","2009-03-10 19:11:35+00:00","SCI: Removing unused line from savegame.cfsml, fixing SongIteratorMessage -> SongIterator::Message in it

svn-id: r39306
"
"ba0d4296949bc8164f14cc35fb178f7632f9dcd1","2009-03-10 19:17:52+00:00","SCI: EVIL temporary hack to ensure savegame.cpp is rebuilt when any of the headers it uses have been changed (to track mistakes like me forgetting to rename SongIteratorMessage -> SongIterator::Message in the CFSML, too). If anybody knows how one can 'copy' the dependencies of one target and add them to another, please let me know.

svn-id: r39307
"
"d5d7bd73d5c9ae55647f12e7f44b3c2e631ba87f","2009-03-10 19:20:32+00:00","SCI: Moved cfsml.pl from tools/ to tools/sci/; also fixed circular dependency

svn-id: r39308
"
"c72cba069bc7c5b3345b99e25596c60ed5399f72","2009-03-10 19:32:38+00:00","Use pow() instead of powf() when compiling with MinGW32 to work around a libstdc++ cross-compile bug, see #2673362

svn-id: r39309
"
"24e6587b169cb28340398c357b09a7b9e10fb873","2009-03-10 20:37:54+00:00","Palette-class for Cine-engine, WIP: Take 2. Testing, using and documentation still TODO.

svn-id: r39310
"
"0a38541cc50d0dc36172b337dc7eab4ae9ec5bb2","2009-03-10 21:44:03+00:00","Resource decompression functions moved to scicore\decompressor.cpp and turned into classes.

svn-id: r39311
"
"e6d0a83bb1544b582ee17bb59fa402bee80c66dd","2009-03-10 21:47:53+00:00","Fix compile of CINE engine.

svn-id: r39312
"
"2f61d7d77b1b1784fc4d10ff148fd2fed68ac0b3","2009-03-10 21:54:45+00:00","- Convert some file references from uint16 to uint32 to suit 11H
- Add some 11H opcodes

svn-id: r39313
"
"915b29c3f5a484506a3cde54b197f9dbe1f002b1","2009-03-10 21:55:32+00:00","Synced the rest of the MSVC project files for the SCI engine

svn-id: r39314
"
"54e2aedb46518ad6c12c6ef802bad7b9f564be4c","2009-03-10 22:04:48+00:00","Added FIXME for heap corruption occurring when exiting SCI games

svn-id: r39315
"
"eaaa703c62eb22dbe2e0ebec5d81ee29d4e8db43","2009-03-10 22:07:42+00:00","Updated the MSVC project files for the SCI engine (added engine/stringfrag.cpp)

svn-id: r39316
"
"333d2c8e34e50d827c7e19dfa7e3efa9fd587c1e","2009-03-10 22:09:10+00:00","- Fix warnings
- Formatting

svn-id: r39317
"
"b4ef8aba75262374a3446f5edbb75f17305e6d88","2009-03-10 22:11:11+00:00","Made Decompressor's destructor virtual. (fixes compilation and should fix possible leaks)

svn-id: r39318
"
"91ce0ce12356eb49febddb381fc1914a201baacb","2009-03-10 22:18:16+00:00","Formatting.

svn-id: r39319
"
"e7d806188fe504b35bb8ddc2de0720d49935858f","2009-03-10 22:30:38+00:00","Yet another few tiny formatting fixes.

svn-id: r39320
"
"e2d33d81ab557a15d68b74c7b7b4bfe82c934ad5","2009-03-10 22:36:06+00:00","Add FIXME comment in AgiEngine::syncSoundSettings.

svn-id: r39321
"
"738160d17a551505f4b234dcad0d146a60f21c61","2009-03-11 00:23:18+00:00","Some clean-up of DecompressorComp3 class

svn-id: r39323
"
"486900a8e54e33f464fbf5d227acdf5e01d553f9","2009-03-11 00:41:31+00:00","SCI: Fix warning

svn-id: r39324
"
"47cf6a0151114ab560b4ed0aaf9eef7e5163a63f","2009-03-11 01:40:08+00:00","SCI: Formatting changes (using astyle)

svn-id: r39325
"
"e3b5e5a74c7db8f1adbeb7891518348390c9e608","2009-03-11 02:05:49+00:00","SCI: Restored code to triger debugger console by Ctrl-d (accidentally removed it in rev 39201)

svn-id: r39326
"
"b52025ec82f3d6f029d936c6817df4bf658555c7","2009-03-11 02:16:21+00:00","...

svn-id: r39327
"
"862c9547c6580dece7e0d1f12707ccb0a97f5dda","2009-03-11 02:32:20+00:00","SCI: Removed some dead code

svn-id: r39328
"
"17664dce40ddc2c7a12579383760df5df8a49fcc","2009-03-11 04:38:54+00:00","More clean-ups in decompression classes

svn-id: r39329
"
"35c4aec93f3445b37a4ef8f8a5c45949cd3fa9bd","2009-03-11 16:13:28+00:00","Formatting.

svn-id: r39330
"
"aacb916e5ebe8ae3fee955e54e5b27ad7fc1b04b","2009-03-11 16:50:12+00:00","Got rid of misc_payload and stopped passing the whole graphics state structure in places where it's not necessary

svn-id: r39331
"
"3e7fe64a2248d95bccc937aef8aced0a80e984c7","2009-03-11 17:09:30+00:00","Untangled the parameters in gfxr_interpreter_get_view() as well. Updated comments

svn-id: r39332
"
"6ccf0161276bc21852889a5ce149af56392a380b","2009-03-11 20:04:08+00:00","Fix assertions in palette loading function to really test that each color component fits inside a single byte (Easier to parse that way).

svn-id: r39333
"
"eca41c0d11fd0ff1d0e11a2099bf63bcaa921f29","2009-03-11 20:15:42+00:00","ResourceManager:
- Keep a list of opened volumes to avoid redundant file opens
- Internal functions moved from public to protected

svn-id: r39334
"
"9e54b1c9634e2e1350957d5e641fe2ed7ab33fd2","2009-03-11 20:39:31+00:00","Fixed bug #2619802 (Game name overwrites scroll bar).

svn-id: r39335
"
"4cbd3678f86956e0cc97e51c73bddfc0b5211cd0","2009-03-11 20:44:16+00:00","Add saving functions to Cine::Palette (Now one can output the palette in other formats too).

svn-id: r39336
"
"c6767861463924aa0cfc5743237506baa0330083","2009-03-11 21:03:09+00:00","Add saving in original palette format and the OSystem's palette format to Cine::Palette.

svn-id: r39337
"
"e01e4d6dbe80cf2010d865329eca58394092d745","2009-03-11 21:05:21+00:00","Formatting.

svn-id: r39338
"
"bac7bd00be2ed9dc2da799f35bf01a43303c84c6","2009-03-11 21:11:52+00:00","Cine::Palette: Move color format setting to setColorFormat-method.

svn-id: r39339
"
"88b44cef241b49a84a31226fee86c739edbb77da","2009-03-11 22:50:06+00:00","Fix heap corruption when assigning the save game directory

svn-id: r39343
"
"5fd0b88ffe1b273515c945a1189813f282141cd8","2009-03-11 22:50:36+00:00","Fix assertion (Doh! That was supposed to be the other way).

svn-id: r39344
"
"35d0744f31869176d1802c73e9763b403067f188","2009-03-11 22:52:54+00:00","ResourceManager:
- RESOURCE.MSG and MESSAGE.MAP added to source List
- Small changes in patch processing code to avoid loading wrong files

svn-id: r39345
"
"f496f9932d5d18e8ead9a6182c2782f9f4405684","2009-03-11 22:58:26+00:00","Wrap the code in text_lol.* around ENABLE_LOL checks

svn-id: r39346
"
"966972def67485b51e2e59958af4a3ab6a3ffefd","2009-03-11 23:44:22+00:00","Fixed another crash right at the beginning of SQ4

svn-id: r39347
"
"26135a175cf94084cb8bc259e0389b33c01086c7","2009-03-11 23:47:00+00:00","Changed a case inside inline_lookup_node() to non-fatal, for now, to make it possible to walk around in SQ4 (check the FIXME comment)

svn-id: r39348
"
"ca4bdb8572cd5da8e2457f91c62b44578913dca0","2009-03-12 02:40:04+00:00","SCI: Removed some dead code

svn-id: r39349
"
"25b39e217a2734afcb2928a46e7471e2845bc51b","2009-03-12 03:26:03+00:00","TINSEL: Added Serializer::skip() convenience method

svn-id: r39350
"
"40b313c28ee947f3e5a908f56efacbbcedf63a88","2009-03-12 03:26:21+00:00","SCI: Moved savegame specific stuff from state.h to a new header savegame.h

svn-id: r39351
"
"642bad22d8978ffdfcdd9efaea553f7bd5c7cc9c","2009-03-12 03:26:47+00:00","SCI: Removed most uses of the 'inline' keyword. It is  usually better to let the compiler figure out what to inline. As it is, most of these looked as if they were randomly placed ;)

svn-id: r39352
"
"6a2efdd36df220581cdbf0742910007bada5147b","2009-03-12 03:26:58+00:00","SCI: cleanup

svn-id: r39353
"
"fd14ebba143f0c9775d80d38b45c63bee4a8e61c","2009-03-12 08:14:05+00:00","PMV player: stop reallocating the frame buffer on every frame, if its size hasn't been changed

svn-id: r39354
"
"36a801ad1400c5e293bfb6e1b9daec9d71496a60","2009-03-12 08:14:55+00:00","EngineState is a struct, not a class

svn-id: r39355
"
"ca8d85eaa9288e480addf805e0155fb3e74f6762","2009-03-12 13:11:37+00:00","Update HE version for German version of Freddi Fish 2.

svn-id: r39356
"
"98af715fcdb87b76b80e7dc6a30cae8ab13caec2","2009-03-12 13:16:50+00:00","Add patch #2685000 - SCI : 8 checksums.

svn-id: r39357
"
"3a5a82245667426e52e8a24d0354c07f5cffbde7","2009-03-12 14:40:27+00:00","Groovie: We need to save gameids to distinguish different entries detected from the same game files

svn-id: r39358
"
"a784baaae95a62a9396b89bf5a10297494002c9a","2009-03-12 17:07:13+00:00","Added the Italian and French versions of Return to Zork, as supplied in bug report #2685032

svn-id: r39359
"
"5b8cdd502f21a957c6475fe379ccfd23aaf120f6","2009-03-12 17:32:13+00:00","Added file sizes of the various CD versions of Return to Zork to the detector, as supplied in patch #2629804. Also, updated the game descriptions to provide more information on the version detected

svn-id: r39360
"
"70673ad2d91670f844bf701ba7f2face8068b57d","2009-03-12 18:05:13+00:00","Added detector entries from bug reports #2644547 and #2670691

svn-id: r39361
"
"99d1a5d67cc7698b200c226938be859b2e723732","2009-03-12 18:15:51+00:00","Added the correct SCI version for German LSL7 from bug report #2662260. Also, added 'sier' to the list of executable names (matches sier.exe, sierw.exe and sierw5.exe)

svn-id: r39362
"
"8cfdca5ee8fe96854724d015277185845a9d714c","2009-03-12 22:04:18+00:00","formatting fix, aka buildbot rebuild incentive ;)

svn-id: r39365
"
"90df1b4be1eb5f76a8b64c0cb8ceda965115259c","2009-03-12 23:23:46+00:00","Commited syke's patch as-is

svn-id: r39366
"
"6751eace05f8620abef0eb535f584cec5dac92c0","2009-03-13 01:26:51+00:00","Applied gregfrieger's fix on decodeRLE()

svn-id: r39367
"
"f4eb159eb8f96bc9f50d5067f76c113bf0532541","2009-03-13 01:36:07+00:00","LSL5 no longer throws an assertion after the intro

svn-id: r39368
"
"091652376323a54a55327d114c0da994ec859d80","2009-03-13 07:56:06+00:00","Added an explanatory comment for commit #39368

svn-id: r39369
"
"7854a01f14aa76f9e95101838606354ab05d8514","2009-03-13 10:36:57+00:00","Changed the parameter passed to isprint() to be unsigned, according to MSDN (thanks wjp)

svn-id: r39370
"
"364ce5874de28a39d1dfa18024c18fd8812f7f9e","2009-03-13 16:31:38+00:00","SCI: cleanup

svn-id: r39371
"
"50ab52a12f24921ba6913c230686875fcf6cfa69","2009-03-13 16:31:53+00:00","Added --enable-all-engines and --disable-all-engines to configure script

svn-id: r39372
"
"feedf970c5fee8aa71ecbbad0c1e1873f823f9a2","2009-03-13 16:39:46+00:00","fixing stupid, stupid mistake in previous commit. yet another proof that I need to use git to prestage all my commits for one day. Yay for 'git commit --amend' ;-)

svn-id: r39373
"
"f5129b7cb7c4d66e81ba5e6971397b00182a2e61","2009-03-14 00:02:01+00:00","Removed the unused struct 'internal' inside gfx_pixmap_t

svn-id: r39374
"
"b78001f7ca1fb433ce3605fb141ecc18ad436d7c","2009-03-14 00:05:01+00:00","Changed the 'internal' variable inside gfxr_pic_t to priorityTable (cause that's what it is), and changed its type to int * to avoid unneeded casts

svn-id: r39375
"
"31c66b5931e8305de8e55a92c1c2f8b732d35e39","2009-03-14 00:12:23+00:00","Removed two empty switch statements to silence an MSVC warning

svn-id: r39376
"
"8dc86556da056dcfaed90d6835863d359581cb0c","2009-03-14 00:16:02+00:00","Add the ENABLE_LOL flag to release builds as well

svn-id: r39377
"
"0796c72e97e73a217214e4e905ac92d816e6afc9","2009-03-14 00:17:12+00:00","Updated the MSVC project files of the SCI engine (added engine/savegame.h)

svn-id: r39378
"
"150b38ffb74344eea6177e38f09da2780b2e2638","2009-03-14 01:44:53+00:00","SCI: Removed more dead code

svn-id: r39379
"
"636a3dd2c19cf3f878f2cc3b9eb58196c8655e92","2009-03-14 01:45:00+00:00","removed obsolete comment

svn-id: r39380
"
"f91eaf9f1a380fb9cc6548c40ebb563ed205a207","2009-03-14 01:45:11+00:00","SCI: Fixed warning

svn-id: r39381
"
"f64d223e071b2afd435e3377d150be522cfbeba2","2009-03-14 01:52:14+00:00","cleaning up after myself again *sigh*

svn-id: r39382
"
"b5cc1eec7ef7ac6148f91c92566cf8f7f1fce4c2","2009-03-14 04:17:03+00:00","Some rewrites and clean-ups in decompressing functions. View and Pic post-processing functions reverted back to FreeSCI ones.

svn-id: r39383
"
"d00a9e9a7d2ca2520c107d9e2481759bc4cc9251","2009-03-14 08:41:11+00:00","Fixed SCI32 Map detection

svn-id: r39384
"
"782c394dd78e31f1d4bca76d75e7cd91cd490f14","2009-03-14 08:43:28+00:00","- LZS Decompressor added
- Some code clean-up

svn-id: r39385
"
"ad58bca65a3b7b7e55191bc696f40538877f19c1","2009-03-14 08:44:14+00:00","Add more detection entries from bugreport #2670691

svn-id: r39386
"
"57b983604b505730bb67c3b572d8116bcae5d7a1","2009-03-14 10:55:52+00:00","Avoid polluting of global gameid namespace and restore compatibility with
0.13.0

svn-id: r39387
"
"f2a1e593c99082237d7a9e863480dc49c6c154e9","2009-03-14 11:26:46+00:00","Give more meaningful names to detected entries.

svn-id: r39388
"
"7da95bbd0072fefa84460b9bbdbbd282304d2235","2009-03-14 12:23:35+00:00","Pushed up the simple script stack function in the header file (this helps isolate them too, so that script.cpp only contains script command functions now)

svn-id: r39389
"
"6225bf905f95addf161790fb74268cf5fb0954c7","2009-03-14 13:42:43+00:00","Do not update the screen while waiting

svn-id: r39390
"
"092f2a37e3e8ef1283ee04281727ed113061ff27","2009-03-14 13:48:12+00:00","LOL: - complete support for the three 'special rooms' in the castle

svn-id: r39391
"
"498a355a74822974733ade011875e3446f655e96","2009-03-14 14:58:19+00:00","Reduced CPU usage of the MADE engine by about 10% (by profiling the code)
- Added delays in places where the screen gets updated
- Moved event polling inside sfPollEvent() (cause that's where events are polled), instead of after each opcode

svn-id: r39392
"
"7fe0592f0facda5444124a9171cd2d95de4c0755","2009-03-14 15:06:02+00:00","LOL: magic atlas can now be picked up (but it can't be used)

svn-id: r39393
"
"8723afd6f4a6c5d7163d509b0fa22cd562de3233","2009-03-14 15:09:31+00:00","* Added a generic sound manager that hides engine-specific managers and allows accessing them through a simplified command/parameter interface.
* Updated client code to use the new manager.
* Moved Nippon Safes sound code from sound.cpp to sound_ns.cpp.

svn-id: r39394
"
"14ced31851d3136bba55c57e58abef93502b1a4f","2009-03-14 15:34:28+00:00","Fixed building on 64-bit architectures.

svn-id: r39395
"
"68520809162c8e0212a4ae10fb178a21339fb87f","2009-03-14 15:43:37+00:00","Merged loadRGBPalette() inside setRGBPalette() (that's the only place it's used and where the screen palette is set). Added a wrapper for copyRectToScreen(), to remove some duplicated code inside the ScreenEffects() class

svn-id: r39396
"
"6398e56d09976b21cca7f071e06caf51c7487615","2009-03-14 17:02:28+00:00","Added midi support to BRA. So far music starts, but related script commands haven't been implemented yet.

svn-id: r39397
"
"c7df3e2f7aa94161c61bebfcdf5156757f34f3ce","2009-03-14 17:07:07+00:00","Applied part of patch #2684986

svn-id: r39398
"
"7c8a73f3bd627d1f4917b3442080d1f7d3564692","2009-03-14 17:10:22+00:00","Patch #2684984: desktop-file-validate warnings

svn-id: r39399
"
"5433adc69ba55f0a6be017cd1a5d5f20f49b0240","2009-03-14 17:11:31+00:00","SCI: Fixed warning

svn-id: r39400
"
"79d84321285fd1bbdc7594a6eca402afc528ea04","2009-03-14 17:32:43+00:00","Simplified screen effects. Removed copyRect() and reposition()

svn-id: r39401
"
"d953ddd376cfab892379ff0ae539c4b9588ffdfa","2009-03-14 17:42:48+00:00","GfxObj is a class, not a struct

svn-id: r39402
"
"480527153937efefb46765eca0387359aaf9ed99","2009-03-14 17:45:41+00:00","Updated the MSVC project files of the parallaction engine

svn-id: r39403
"
"8b725eef83b031de5b201ff3ea0382f10e05e68c","2009-03-14 19:47:23+00:00","Reduced the CPU load of screen effects, by reducing the number of palette changes. The visual differences are negligible, but CPU load went down by around 10%.

svn-id: r39404
"
"814f27a72ee93804686871eae35890bb6d6fc18f","2009-03-14 22:36:05+00:00","Cine::Palette revamp part 2: Fix save-function, add Cine-palette formats etc.
- Removed excess convenience functions, made the used palette formats
publicly available instead (Cine::kLowPalFormat, Cine::kHighPalFormat etc)
- Fixed output conversion i.e. save-functions.. Hopefully they work ;-)
- Renamed some parameters for unification (colors -> buf, numBytes -> size)
- Added some documentation, e.g. for the load- & save-functions.

svn-id: r39405
"
"efa319ff6747d0b078d9e739cd419b78414007d3","2009-03-15 03:51:03+00:00","Groovie: Added basic alpha channel support to the ROQ player

svn-id: r39406
"
"82e1d15aef81f4ecbd26c52f3333b2727360ce16","2009-03-15 04:29:26+00:00","Added missing initializations.

svn-id: r39407
"
"f903e32c51d8cad2304e1c0651f5b337cf4f69ab","2009-03-15 04:34:00+00:00","Groovie: Add non-uniform scaling to the ROQ player

svn-id: r39408
"
"a6497584cc6601f56a861183365bb96cfd519a7b","2009-03-15 06:07:57+00:00","Enable music in Amiga version of BRA too.

svn-id: r39409
"
"cbf9996abb02a1e730cbcb8956dfccf6847db8f7","2009-03-15 06:20:52+00:00","* Improved ILBMDecoder to also handle files with width non divisible by 8.
* Changed PackBitsReadStream to discard padding bytes on ditto files.

svn-id: r39410
"
"13497da82e37f2e9c5c8c05ad66738c37131d6ab","2009-03-15 06:23:16+00:00","Ooops, actually set _mixer.

svn-id: r39411
"
"bcabf5e53f079eaf3babb5d4e81d7e2e6c3ac73e","2009-03-15 08:17:57+00:00","Fixed regression from r39410, by reimplementing the decompression routine. The backgrounds in the DOS version of Nippon Safes are compressed by something that looks like PackBits, but is not PackBits. Hence, the change to make PackBitsReadStream behave as the standard broke it.

svn-id: r39412
"
"7f99a190cbc82ae05d1a4ab6cd6227144c417f85","2009-03-15 09:29:25+00:00","Fix loading objects in the Amiga version of BRA.

svn-id: r39413
"
"e27d2f71448c1978e3be115cca3ef84a930a0dce","2009-03-15 09:39:16+00:00","Set mouse buffers in Amiga version of BRA, so selecting inventory object no longer crashes.

svn-id: r39414
"
"08638c5f772667ea70807bd8780164f0084df147","2009-03-15 09:51:02+00:00","The Amiga demo of BRA doesn't have quite as many icons.

svn-id: r39415
"
"647276b8859210223c10abe51c09aac5fb6e9159","2009-03-15 10:25:22+00:00","Moving sword1/vag.* into sound/, to be used by Broken Sword 2 PSX

svn-id: r39416
"
"1f299bb24ac9ab8ded2542aaeeffad77b53faa9b","2009-03-15 11:36:16+00:00","sword2: added detection for Broken Sword 2 PSX, and a check to say wether pc or psx version is run

svn-id: r39417
"
"e48637415285b7d1197ef48c1910635e464de965","2009-03-15 13:28:20+00:00","Fix crash regression in the Amiga BRA demo, by checking if mask buffer exists, before using it.

svn-id: r39418
"
"6ecc3991ed7253a39a9868699a7f872178b1e38a","2009-03-15 14:17:01+00:00","Fixed typo in r39418.

svn-id: r39419
"
"0e8bd97367a450b5f25e82b8fcb0e188d0b607c7","2009-03-15 14:48:08+00:00","Fix for loading Kyra1 Amiga PAK files.

svn-id: r39420
"
"f1079ef624ff39aa9b09b3fc220244a99256aad6","2009-03-15 14:55:48+00:00","Cleanup.

svn-id: r39421
"
"dcf32be3f656b0adda3feb3c07c1f5940ebfa979","2009-03-15 16:48:20+00:00","LOL: - added some missing animations for the shops
- added support for dropping/picking up items (no throwing yet)

svn-id: r39422
"
"adde70537a29d891247c8c9ce19d6e1dcd0d4e67","2009-03-15 17:11:34+00:00","Updated MSVC project files for commit #39416 (moved vag.* from engines/sword1/ to sound/)

svn-id: r39423
"
"c826106e44c529fff84eee3dd052ae4895916c47","2009-03-15 18:21:33+00:00","LOL: - implemented original style random number generator for moving around the monsters

svn-id: r39425
"
"77d5d3093a6c70d9de8949635a529bf760aabcf9","2009-03-15 18:29:47+00:00","Fix small cursor for modern theme.

svn-id: r39426
"
"9cbed926cdab8a450c6000b750b3f16c5a24d583","2009-03-15 20:30:57+00:00","Moved Tinsel::Serializer to Common::Serializer, so that I can use it in the SCI engine

svn-id: r39428
"
"7df4e2a80f7e6252dc313a2f9b451dca66273112","2009-03-15 20:31:15+00:00","SCI: Indention changes, changed 'songlib_t' params to 'const songlib_t &'

svn-id: r39429
"
"466ba4bbfe2a378ed3833d1c1209a4ce25ef8d7e","2009-03-15 20:31:29+00:00","SCI: Rewrote the save/load code, see also patch #2687400.

The new format is incompatible with the old one, and is still subject to
some further changes. Also, regressions are quite possible, so watch out.
Finally, the new code still contains some TODOs and FIXMEs. Several of
these will be more or less automatically resolved once other code gets
C++ified.

svn-id: r39430
"
"6e1b154484c1684802cfe44000cb371105de099f","2009-03-15 21:17:37+00:00","Added the SVN revision to SCUMMVM_VERSION. The variable has be be set externally, e.g. 'make SCUMMVM_SVN_REVISION=x'

svn-id: r39431
"
"4d84ae9f2055e5c091f4fe00f1b436b572cecace","2009-03-15 21:25:15+00:00","Align ScummVM version string properly.

svn-id: r39432
"
"baca0728447971eee804fef3eb116c6f80346085","2009-03-15 22:52:40+00:00","Call updateScreen() from the delay() function, like we do in so many other
engines, to ensure smooth mouse movement.

svn-id: r39433
"
"9e792deb3ed6cb03318604e3d2adc063f73f4ead","2009-03-16 00:03:22+00:00","Added mouse cursor to BRA Amiga. To be perfected.

svn-id: r39434
"
"4bd84b7311da285f369605bce9d47b9e17bae530","2009-03-16 00:07:12+00:00","Replaced 'xl' with 'width' and 'y1' with 'height' in places where rectangles are used

svn-id: r39435
"
"f233b89463352c99bda6186c43f8433bc2108bb0","2009-03-16 03:55:09+00:00","SCUMM: Modified version of patch #2674880 (FOA: unique filename for IQ-points file)

svn-id: r39436
"
"ffa97e6626e43adf9c94de9a7322138e46436af4","2009-03-16 04:15:03+00:00","Patch #2658665: Implement getDevices() in backends/midi/dmedia.cpp

svn-id: r39437
"
"e44f07f988ee6a2a7574a42169d08b3d7a112eba","2009-03-16 04:45:12+00:00","SCUMM: Modified version of patch #1687041 (Scumm: Load-/Save-support for the original save-dialog)

svn-id: r39438
"
"c5e8c48c5e1a4c3af266a71c500f57c2f93c42d3","2009-03-16 05:44:20+00:00","SCI: Removed sbtree code by Common::Hashmap

svn-id: r39439
"
"6a83723b0cf8461d85727f54b2ef8ff9cc8abbb5","2009-03-16 07:45:47+00:00","Updated the MSVC project files of the tinsel, sci and scummvm projects for the file changes which occurred in commits #39430 and #39439

svn-id: r39440
"
"1ac00f210b38b88c689397d733e090583a287529","2009-03-16 09:11:51+00:00","Fixed most palette issues in BRA Amiga.

svn-id: r39441
"
"52d6f3323b258470157cdeae37de08c22e784a60","2009-03-16 09:16:56+00:00","Added a syncString variation needed for the Cruise engine

svn-id: r39442
"
"57b0038e5e83f913b703077a5c1778d65aade07c","2009-03-16 09:17:49+00:00","Converted the Cruise engine to use the new Common::Serializer class

svn-id: r39443
"
"7d85194eaae2e741ca9b2e55c91eaa2cdf4ff0c3","2009-03-16 09:38:20+00:00","Fix crash regression in BRA introduction for now.

svn-id: r39444
"
"34d3d7c74dcdd36acf6172c02ca3874c75073852","2009-03-16 09:45:37+00:00","Code formatting, added further constant references, and corrected method signatures

svn-id: r39445
"
"5aaa9870b19d055d7124f70c88f366e3660a6f1f","2009-03-16 14:35:18+00:00","Add talk position adjustment to loadTalk for Amiga version of BRA too.

svn-id: r39446
"
"24c629f6231e0282a8fde0d2c8ff23dff3e513f2","2009-03-16 14:37:40+00:00","Removed duplicate tobigun entry in COPYRIGHT file

svn-id: r39447
"
"99bd2b4d4040f09c9b48183c01d216cd34ecea48","2009-03-16 14:38:57+00:00","Update main menu items, to match original Amiga version of BRA.

svn-id: r39448
"
"0e8dfe09c98d2e326a6317f8826530a6f9913907","2009-03-16 15:36:09+00:00","Replaced some rect_t operations with our common ones. For now, two helper functions are used to easily change types between Common::Rect and rect_t, until rect_t is removed

svn-id: r39449
"
"7cd1ac52319f33444a0ef750fbbb7ca3973cca61","2009-03-16 17:25:13+00:00","Changed the temporary helper functions to defines

svn-id: r39450
"
"9ec640633d96946369a1ba331ebf0a09956a7c7e","2009-03-16 19:19:59+00:00","It seems that the SCI GUI code tries to show rectangles with negative height. Added some sanity checks for this, but the *real* problem lies elsewhere

svn-id: r39451
"
"739a31db124ed568de9eddcabae87b9fb326a1dd","2009-03-16 20:24:28+00:00","Add endianness handling to Cine::Palette's load and save functions.

svn-id: r39452
"
"9dc2f16f16e4a76a6c957af6bbfc8272736e1512","2009-03-16 20:57:17+00:00","Prefix Cine's endian types with CINE_ so they don't clash with already defined LITTLE_ENDIAN and/or BIG_ENDIAN on some platforms.

svn-id: r39453
"
"97887377f0784bab34f2cb69638174b3243d380c","2009-03-16 21:10:15+00:00","Cine::Palette: Make saturatedAddColor-methods more like their old counterparts transformPaletteRange and transformColor.

svn-id: r39454
"
"52726344b7d7da0a625fb60713f1f7c04c98cd7c","2009-03-16 21:20:34+00:00","LOL: - implemented item throwing

svn-id: r39455
"
"6e3bf6af79daf4bb706480d5a152da6b28fff871","2009-03-16 21:30:15+00:00","Fix for warnings on trunk-lenny-x86_64-build (Yay \o/ Buildbot!).

svn-id: r39456
"
"03a807fa2bb3540eefe22054f1cebf80ac38ad8d","2009-03-16 21:42:35+00:00","Add FreeSCI contributors

svn-id: r39457
"
"5681531bbddc31813861b17d93ac6877b142a85a","2009-03-16 21:45:21+00:00","Sync

svn-id: r39458
"
"c40d2d2f50e83b5c3b10a6599ffe17557e0a4114","2009-03-16 22:25:37+00:00","sword1: added caching for train.plx when playing psx version

svn-id: r39461
"
"88ff058bd7d7c5e77ddd774d9996206733fa7717","2009-03-16 23:10:50+00:00","sword1: cache decompressed psx version backgrounds, to avoid uncompressing them at every screen update.

svn-id: r39462
"
"5f087d5ad68206d845c304b4c7209cf8a8bda272","2009-03-16 23:58:19+00:00","Cleanup.

svn-id: r39463
"
"331399db9bd2539ce3698bf89630b8954c64c123","2009-03-17 00:00:29+00:00","Change adjustForPalette(), to skip transparency color (zero).

svn-id: r39464
"
"1817dd9bc5d59b61e8ee769599f67af751e6a728","2009-03-17 02:35:43+00:00","Do not use TO_LE_16 for the IMA ADPCM decoder as it breaks sound on BE systems.

svn-id: r39465
"
"0434c13713eef1dae0ff61a7326cb0c0cb2473be","2009-03-17 03:32:03+00:00","Enable sound effects in the Amiga version of BRA.

svn-id: r39466
"
"7d1aed7c83fb8e83fbd0dcb05a6446be881110ad","2009-03-17 03:58:57+00:00","Add support for loading palette files in the Amiga version of BRA.

svn-id: r39467
"
"2e321f81ed11b647e7caebf9111d7437c72f8bd1","2009-03-17 04:07:02+00:00","Sound files don't always exist in the Amiga version of BRA.

svn-id: r39468
"
"4a45b4408cf93896bd28f2ca83a8196f69812b21","2009-03-17 04:07:56+00:00","Sound files don't always exist in the Amiga version of BRA.

svn-id: r39469
"
"6df028151eec602f9d2bf6bcbc1a3e7d1c80dc06","2009-03-17 04:32:12+00:00","Fix regression in the Amiga demo of BRA, the common sub directory doesn't exist in the demo.

svn-id: r39470
"
"e47c9189d4939d5651a0e026bb3cfa59f7815ba5","2009-03-17 04:41:23+00:00","Fix graphical glitches in the Amiga version of BRA, the height seems to be off by one.

svn-id: r39471
"
"cb837c3fe030e2a975727f94889e78b2338db8ca","2009-03-17 05:29:59+00:00","Fix regression, caused by my change to adjustForPalette().

svn-id: r39472
"
"17d38f27636e4416d6399b36a4a09860e2e9f3ec","2009-03-17 06:57:49+00:00","Fixed the remaining palette problems by loading the shadow (mask) file for static objects.

svn-id: r39473
"
"92c93656503615ea8d659c094675952744c445fb","2009-03-17 07:02:14+00:00","Additional palette is loaded on colors 1-15.

svn-id: r39474
"
"3c9b4e0f073ad5c2c583123fad158cf244ab4286","2009-03-17 07:46:04+00:00","sword1: enable psx background caching for screen 54 (bull's head) too

svn-id: r39475
"
"ebfdd92727456174a5a2e8fe752c193f75805daf","2009-03-17 07:57:02+00:00","Removed the 'About FreeSCI' menu as discussed in -devel, now that the FreeSCI contributors have been moved to the AUTHORS file

svn-id: r39476
"
"a9da116ceb318d3223bb515cad46f613dfdc0d36","2009-03-17 08:03:29+00:00","sword1: optimize drawing routine for screen 54

svn-id: r39477
"
"80c243e5ca48680bf85c752c976f4ccc11941fb0","2009-03-17 08:03:42+00:00","Renamed some defines:
- FREESCI_CURRENT_SAVEGAME_VERSION, FREESCI_MINIMUM_SAVEGAME_VERSION -> CURRENT_SAVEGAME_VERSION, MINIMUM_SAVEGAME_VERSION (saved games are not compatible with FreeSCI's ones anymore)
- _K_VIEW_SIG_FLAG_FREESCI_STOPUPD -> _K_VIEW_SIG_FLAG_STOPUPD (like the rest of the flags)
- Removed FREESCI_KFUNCT_GLUTTON (unused)

svn-id: r39478
"
"f7e4f1521868d09c2f992523453dcc05fa3b50cf","2009-03-17 08:22:51+00:00","sword1: cleanup

svn-id: r39479
"
"81cfb9ffd560e65e1befb6729f69154a1ceef875","2009-03-17 09:21:14+00:00","sword1: clean background buffers before writing on them in psx decoding functions

svn-id: r39480
"
"3c0d117dd82f6a4131fa799c18900147cea0ad0d","2009-03-17 16:07:18+00:00","SCI: fix warning

svn-id: r39483
"
"3c23ba7d7338bf8566eb581eb7567340951e6481","2009-03-17 16:07:58+00:00","SCI: Got rid of various SegManager::free_* methods

svn-id: r39484
"
"95c58e76d646cf9a14374d2ba1010ada7723e874","2009-03-17 16:08:25+00:00","SCI: Added TODO: Merge SegInterface and MemObject? And some cleanup

svn-id: r39485
"
"7697fd9cc7b25f35623a8381376c9168c6b6950e","2009-03-17 16:45:09+00:00","Fixed the transparency problems of static objects in BRA.

svn-id: r39486
"
"769184c483eb58029ba10adda89ed5030ef9c960","2009-03-17 18:27:56+00:00","LOL: added some new drawing code required for some shapes and fixed a minor text displaying bug

svn-id: r39487
"
"3a98786bc0c1e36575702283a293c064df3e9da4","2009-03-17 19:04:59+00:00","Removed one of the overloads of SoundMan::execute(), to make retarded compiler happy. Added a couple of explicit casts from bool to int, so that other compiler don't complain instead.

svn-id: r39489
"
"dc2002348d1aad230615accb7f4e93c0f40733d2","2009-03-17 19:13:45+00:00","Another explicit cast for a historic compiler.

svn-id: r39490
"
"71f8b83c4731e04f6a4afee8b892a6854fb7d24f","2009-03-17 19:36:38+00:00","Fixing the last commit, by using the right type in the cast.

svn-id: r39491
"
"063ce3938d6cbd98843d062a6d5a0f6738d888ef","2009-03-17 21:08:33+00:00","Started objectifying the graphics resource manager (refer to patch #2689887)

svn-id: r39492
"
"da142af5d4d6761cb9a1e70ead561396827ca780","2009-03-17 22:09:33+00:00","Changed grabOverlay() and copyRectToOverlay() to use OverlayColor instead of int16.

svn-id: r39493
"
"f5cb75e2e1bdd0b632f7a42369cac01e566755b3","2009-03-17 22:18:33+00:00","Removed superfluous semicolon.

svn-id: r39494
"
"f7a6e858637b51d0978c4f970be0a4c915ccb420","2009-03-17 22:19:11+00:00","Removed superfluous comma and namespace specifier.

svn-id: r39495
"
"6cc6603e9be22d456809a8b3aa324e723d94c3a4","2009-03-17 22:41:54+00:00","engines need to be listed before gui in MODULES, because stuff in libengines.a use stuff in libgui.a.

svn-id: r39496
"
"cdc05e2ea59ee0e17a8b26e207479ee42f043c90","2009-03-17 22:49:00+00:00","tail on e.g. Solaris does not support the use of '-n 1'.  Use the good old '-1' syntax instead.

svn-id: r39497
"
"4edee56b3f44bf43fc0fb568bb68bd44ce422da4","2009-03-17 22:56:20+00:00","Fix warning.

svn-id: r39498
"
"e546c609483d4098301f2e3edd8845e39aa89a12","2009-03-17 23:30:57+00:00","Further objectification of the graphics resource manager

svn-id: r39499
"
"4c498d34561b4f2fdc9c7f43d15e104d24fd22df","2009-03-17 23:39:28+00:00","Updated the MSVC project files of the SCI engine for commit #39499

svn-id: r39500
"
"5a77b89f92b8dd9aa8c102d334a54d8c6388e450","2009-03-17 23:43:32+00:00","Cleanup

svn-id: r39501
"
"9a99eb221a297e8896c2230814da18aa964d108c","2009-03-18 05:12:45+00:00","Add another Spanish DOS version of Loom (EGA).

svn-id: r39502
"
"717102578ba4a6721c88235435ac5b51a97fa4be","2009-03-18 06:06:16+00:00","Minor corrections and cleanup.

svn-id: r39505
"
"b670070c6cf387dbd7ae087c1c4db97b8a818734","2009-03-18 07:59:46+00:00","Cleanup

svn-id: r39506
"
"7918852b1df4dde88bdd2c7d569cdebbd27674e1","2009-03-18 08:09:02+00:00","Added some missing header files to the MSVC project files of the SCI engine

svn-id: r39507
"
"d4fd77c8de8f2c587f92989ed558f59ffd0effc1","2009-03-18 09:42:47+00:00","Fix bug #2684645 - AMIGAOS: Build breaks in base/commandline.

svn-id: r39508
"
"506f7ff612230bc5971aec119f65ed0eac3f5ccb","2009-03-18 10:06:42+00:00","Update aos4dist.

svn-id: r39510
"
"e5a640b0976c29e5c62ff4316c988234f85fc838","2009-03-18 10:34:57+00:00","More updates to aos4dist.

svn-id: r39511
"
"739181c3b7bdc9dac18c696e0928819a836e1bf0","2009-03-18 10:55:05+00:00","Postpone loading of mask and path data on BRA. This fixed locations in which mask and path are defined before the screen bitmap.

svn-id: r39512
"
"c9eff6e1f87231f63b3cd4a5dce4b04ffac96075","2009-03-18 11:07:29+00:00","Cleaned up graphics initialization a bit

svn-id: r39513
"
"abc842b677fcc6f34e87af5aca3fc626f1552d16","2009-03-18 11:25:23+00:00","Slight cleanup

svn-id: r39514
"
"bc37ec4ce13e2742b3fcaa2d8cd2b3a6224c0c72","2009-03-18 13:24:47+00:00","Renamed resmgr.cpp -> gfx_resmgr.cpp
Moved all files from gfx/resource/* to gfx/*

svn-id: r39515
"
"28036e8f0c5015188aa2c1c970b579df7b5da38d","2009-03-18 13:26:13+00:00","Updated the MSVC project files of the SCI engine

svn-id: r39516
"
"ab4812b734e28e2701c395ccca7275400c4e9b14","2009-03-18 14:04:57+00:00","Fix compile of SCI engine.

svn-id: r39517
"
"723bc879f8eb424b6c715dbc93338f997350cbbc","2009-03-18 16:43:12+00:00","Changed abs_rect_t to Common::Rect

svn-id: r39518
"
"125a34c7722188c3a82efed28470ec127898adb1","2009-03-18 20:58:11+00:00","Moved the _build_{hq_,}scalers tests to after the host checks, because they may try to disable scalers on a per-host basis.

svn-id: r39519
"
"e47e0242c994ff50da4e8a4e3039b5c2c37af511","2009-03-18 21:07:28+00:00","Create a variable _host_alias defaulting to $_host_cpu-$_host_os, which is used to pick the cross compiler.  This allows 'special' hosts to override it.

svn-id: r39520
"
"55eb3b0b261c0d5db6ac492f431e047808bf7069","2009-03-18 21:51:56+00:00","configure: We don't use tail anymore, so don't check for it; move (hq) scaler check from the middle to nowhere to a more appropriate spot

svn-id: r39522
"
"f32fd48930db015f123a67a5d99628f412f1750a","2009-03-18 23:17:54+00:00","Use host-specific ranlib when crosscompiling for darwin (Mac OS X)

svn-id: r39523
"
"114d9f211cd37245cb3257c9e0ebb147c4db1a19","2009-03-18 23:38:25+00:00","Initial support for building the Dreamcast port using the configure
script.  Dynamic modules are not supported just yet.

svn-id: r39524
"
"8dc12da206cc850b3bd2bd456e4607ded695704d","2009-03-19 09:09:31+00:00","Added another version of SQ4

svn-id: r39525
"
"b5bcc1a23af73761f6ff40f79db0a5beb8ae82f1","2009-03-19 09:51:40+00:00","Merged Neil's NDS changes into trunk

svn-id: r39526
"
"38e295773986ef16e4c4a65b47375849e653eac4","2009-03-19 18:36:45+00:00","Fixed the tremor check. Instead of a ogg symbol, it now checks for a tremor one ;)

svn-id: r39527
"
"2292dc28b06e57d83685a29f0749f38d698b542e","2009-03-19 18:39:47+00:00","Try to use the working copy revision if it's available

svn-id: r39528
"
"845f8d018b139a38acf00107f1f95c67a69c363e","2009-03-19 18:47:01+00:00","Extended the FLAC test to detect a libFLAC version which was compiled without libogg support

svn-id: r39529
"
"a0545c413330d5993806e8d7956a1c254d77020b","2009-03-19 18:52:38+00:00","Moved -pedantic from Makefile to the end of configure script

svn-id: r39530
"
"38baf3b19f0369c4b4dcceca1fd03aca5e076d67","2009-03-19 18:56:54+00:00","Added configure support for the Wii and Gamecube port

svn-id: r39531
"
"21c87385bc53c5d4d9cdcee928ead8719033591c","2009-03-19 19:17:29+00:00","Added some more debug messages

svn-id: r39532
"
"e8c018a9d0fd0bbf48b1ad7e5ade7511c2db5f04","2009-03-19 19:42:22+00:00","Use the current SVN revision as a default when distributing a snapshot sources

svn-id: r39533
"
"11601f88e1b1f83c2b1932baf4a4f525d723e8de","2009-03-19 19:52:05+00:00","Fixed issues with commit #39449, fixing some graphical glitches with the GUI widgets

svn-id: r39534
"
"3b507db4f0af00d63d63cc64425ab2d30f6975af","2009-03-19 20:38:29+00:00","Silenced some warnings about potentially uninitialized variables

svn-id: r39535
"
"cae2c70c6f41caebdf295a8c7595823e7fb64ece","2009-03-19 20:40:05+00:00","Silenced some warnings about potentially uninitialized variables

svn-id: r39536
"
"1301de37956947ec0dcd5b47bc29ec9fd027c8a3","2009-03-19 20:49:22+00:00","Added support for specifying which prefix directory to link in static libs for (for mac os x and iphone bundles), and use a build-specific strip command

svn-id: r39537
"
"4367d1c184ebdebb4cc5ed22d09a1c3209530212","2009-03-19 20:53:33+00:00","Whitespace fix

svn-id: r39538
"
"21e35c4f6790e316c95c1f69841dc7a422bc31cc","2009-03-19 21:17:44+00:00","We're now statically linking in zlib, for static osx builds

svn-id: r39539
"
"3d5ad1e6a37d9b35eb6f87ca469deed1e597e62d","2009-03-19 21:27:01+00:00","Cleaned up gfxop_draw_rectangle(). Also, removed a check insode BASIC_CHECKS() which is impossible to occur

svn-id: r39540
"
"428b0ec80023361b7079759b5767647d1024be57","2009-03-19 21:42:50+00:00","configure: rearranged some stuff

svn-id: r39541
"
"e59b4587b706bb91b7875b4675cfdcdf68ae493c","2009-03-19 21:43:27+00:00","COMMON: Added a new IS_ALIGNED macro (for now using size_t, we can change it if this turns out to be not portable enough. Also added a doxygen comment to the ARRAYSIZE macro

svn-id: r39542
"
"348d48abe50103e3d438c5ca8195fdee700c0af0","2009-03-19 22:06:46+00:00","Hopefully, this fixes the warnings thrown when attempting to print the 'size' variable (which is of type type_t)

svn-id: r39543
"
"a45ed16fc402266dc9ba3f61292920b88713221e","2009-03-19 22:47:30+00:00","SCI: converted aatree into a class

svn-id: r39544
"
"e82464a528729f7f1eb14c772d5d3afff35fa0fe","2009-03-19 22:49:26+00:00","Use IS_ALIGNED

svn-id: r39545
"
"f81e5747bdc3742dd081a3dee395cd4aa98cbe85","2009-03-19 22:49:54+00:00","SCI: removed aatree.o from module

svn-id: r39546
"
"b9656ae391db0e637a1c1ae2ebe19397ef849501","2009-03-19 22:51:42+00:00","Fix warning.

svn-id: r39547
"
"160acbd9f56ca138d4e3430ee8ba62d1e260fe97","2009-03-19 23:23:28+00:00","Hopefully, this fixes compilation of the AGI engine on 64-bit platforms

svn-id: r39548
"
"7077ea36e0a805c356e7b7492fce6945854f95bb","2009-03-19 23:31:20+00:00","Fix compilation

svn-id: r39549
"
"51109a5cfcc8d9f817813499c39f243016aa170f","2009-03-19 23:40:59+00:00","Adding simple support for protracker playback

svn-id: r39550
"
"9f43c32c2595289f0bf8453a247890b122f7a6f0","2009-03-19 23:42:19+00:00","Adding detection and title music playback for Little Red Riding Hood (Amiga version)

svn-id: r39551
"
"b61d22b155a28ad3c4e6a47a87f964ddb659de36","2009-03-19 23:52:30+00:00","Hopefully fix compilation with mingw64.

svn-id: r39552
"
"7b6ad08eabbae78e8148526e4c676714488a4f09","2009-03-20 00:03:16+00:00","Hopefully fix mingw64 compilation (borrowed from engines/scumm/saveload.h)

svn-id: r39553
"
"d806ef27691bff4c2bf0647709b7060559fbc045","2009-03-20 00:11:22+00:00","Fix compilation on mingw64.

svn-id: r39554
"
"cd8eeb7e473cd56db4a5cefc4bc7e4f64c80846a","2009-03-20 00:12:45+00:00","Oops forgot one line in last commit, now the file should compile cleanly with mingw64.

svn-id: r39555
"
"931c8c27e204f61417454ebe02fca33847d80d2c","2009-03-20 00:20:29+00:00","Fix parameter in Windows MIDI backend (this is according to API documentation from M$).

svn-id: r39556
"
"356e803a955a30e31a25b4ea0473397c7eba1bf0","2009-03-20 09:59:40+00:00","Add work around for bug #2686883 - WAXWORKS: Crash in Jack the Ripper Zone.

svn-id: r39557
"
"3f2212241300837404c10dc4ad648cceabbaba4e","2009-03-20 10:01:00+00:00","Correct vertical offset, when print stats in the AtariST version of Elvira 2.

svn-id: r39558
"
"f81d5275f244f0bcd01cbe1161790ac9759f9d73","2009-03-20 10:12:20+00:00","Correct initial palette in Amiga and AtariST versions of PN.

svn-id: r39561
"
"b64b7d28959046d907201a8d31bb83bba9ef7142","2009-03-20 10:13:10+00:00","Removed #include nds/jtypes.h from common/scummsys.h -- it already gets loaded by portdefs.h

svn-id: r39562
"
"a4a8249a9ca76685a216a1c7ae6ddc127e8bee1c","2009-03-20 10:23:08+00:00","Clarify entry in the credits.

svn-id: r39563
"
"1365b22359eb610752ea571595a0ae808f2c8843","2009-03-20 11:34:40+00:00","Add missing code difference in getUserFlag().

svn-id: r39565
"
"ed292fb498bc14f4482a82ba5a40a4bf3c7870f1","2009-03-20 13:30:10+00:00","silenced some warnings

svn-id: r39566
"
"6f4b5671245827866aa4fb59fdb9c602cfe3d482","2009-03-20 16:33:58+00:00","SCUMM: Split intern.h into multiple headers

svn-id: r39567
"
"559190904d7356dd408c62ce2da799537a23c37e","2009-03-20 16:35:34+00:00","Set svn:keywords on asm files

svn-id: r39568
"
"40e55d25931a090bab6665547f05e94bf068998b","2009-03-20 17:33:08+00:00","Remove line that was (probably) accidentally committed in r32745.

svn-id: r39569
"
"317de0f4847c912a405e318368331f86f1e0f0cd","2009-03-20 19:02:32+00:00","Fix some warnings in the Wii backend.

svn-id: r39570
"
"286abed4e77e01d1a688b43c0d81eb3d2cb673a1","2009-03-20 20:37:06+00:00","Added more flexible IFF parser and ILBM decoder.

svn-id: r39571
"
"742c9c9d6aec635d3c9d35bfbb4271558397aadc","2009-03-20 20:37:58+00:00","* Reimplemented routine using the old ILBM decoder to use the new one
* Fixed all remaining issues with masks.

svn-id: r39572
"
"db5150dd7c034ab291aeda433dcb48adcc04751e","2009-03-20 20:38:33+00:00","Added TODO's about replacing usage of the old ILBM decoder in Nippon Safes.

svn-id: r39573
"
"16c2c37dba441ad461e054774b43c52dde129bb4","2009-03-20 21:22:30+00:00","Fix namespace name

svn-id: r39574
"
"f66789984a8e6cab83fa4e1f20e4b74fa138aba4","2009-03-20 22:16:57+00:00","Removed garbage character from argument to sleep.

svn-id: r39575
"
"a591d65cc7db9aff5323e3ea73f76ae8e69667c5","2009-03-20 22:33:45+00:00","Include 'scumm/scumm_v6.h' in some places where it is needed.
(Including 'scumm/scumm_v8.h' is a no-operation if ENABLE_SCUMM_7_8
is not defined.)

svn-id: r39576
"
"9890b343903e91faee39038df452f854bc6bccb7","2009-03-20 22:55:42+00:00","Moved hardware initialization to a constructor, to make it run really early.

svn-id: r39577
"
"7245fce099a3729a926bbac80f9fc14a88a10f43","2009-03-20 23:02:20+00:00","SCI: cleanup

svn-id: r39578
"
"fe62c72e7a7e68f057bed12280bfafa222ac972b","2009-03-20 23:02:40+00:00","SCUMM: cleanup

svn-id: r39579
"
"bd8b94ee8a0c17802ddfc6d7edbfbbaf1f7b1eef","2009-03-21 01:08:04+00:00","Fix regression when loading icons in Amiga versions of BRA.

svn-id: r39580
"
"b55602180decd888084797a7e7a8fb8778d6c7ee","2009-03-21 14:30:25+00:00","LOL: The guards will now attack you when you throw certain items at them. They can't do any damage though, since this isn't implemented yet.

svn-id: r39582
"
"9682ae59479f713b1d870d9bb46eacf98255a97f","2009-03-21 14:58:36+00:00","Extended the IFF parser to handle 1 and 5 bits deep images.

svn-id: r39583
"
"14e27934499dc8ef2a31bee14a8e169c8cdff009","2009-03-21 15:00:44+00:00","Changed Nippon Safes to make use of the new ILBMDecoder.

svn-id: r39584
"
"8f57c621d2e99c7eef2541d902747020f5d5391a","2009-03-21 15:01:46+00:00","Some Surface tinkering, and added TODO's about it.

svn-id: r39585
"
"c3bac3d851c25a0a1389d97fc24f8f1c56d6d87a","2009-03-21 15:13:02+00:00","Fix build.

svn-id: r39586
"
"760133e8caea4872ebdb379f90193755b36336fa","2009-03-21 15:15:29+00:00","Added support for dynamic plugins on Dreamcast to the configure script.

svn-id: r39587
"
"ed24cf667bec6a5da1909c34b5361f9efbe87ddd","2009-03-21 15:21:24+00:00","Use -isystem instead of -I to include ronin stuff on Dreamcast (gets rid of some corny warnings).

svn-id: r39588
"
"29ebafb5d55961fde145691397fac3a21b9ccbd1","2009-03-21 15:33:16+00:00","LOL: implemented some missing drawing code for dead monsters

svn-id: r39589
"
"e3ca4afb595e63e1acfabd2c6e5de75ec6461e07","2009-03-21 15:47:45+00:00","Fixed some warnings.

svn-id: r39590
"
"bce96bd55d3745858bfd50fe41cb022ff1a9fac5","2009-03-21 16:07:46+00:00","argv should not be modified; make it plenty const.

svn-id: r39591
"
"a8672bc492c67ce034d5f59242a7d759380d82db","2009-03-21 16:24:07+00:00","Updated the MSVC project files of the Gob, Parallaction, SCI and SCUMM engines

svn-id: r39592
"
"2ea883adb250c2ddee3d994f86558b6792ca0eb6","2009-03-21 16:42:45+00:00","Cleanup

svn-id: r39593
"
"779bdd93b0b35cf55b5e1748dfe10d6d823eaa88","2009-03-21 17:07:15+00:00","xcode project update with latest engine changes

svn-id: r39594
"
"e7a94e9dfecb0828b481ef8a86180e9f5cb8b73e","2009-03-21 18:00:41+00:00","Set the right colors for dialogue text in BRA Amiga.

svn-id: r39595
"
"11df88f9ee0c083d096fb06a54995dd6cb33f9e5","2009-03-21 18:17:24+00:00","Added an entry for the DOS version of Little Red Riding Hood

svn-id: r39596
"
"8f9a655769ef0b5b96ee6f5626c59ab260ea8905","2009-03-21 19:38:33+00:00","Check for a suffix of '-iq' when saving the iq points. Should fix bug #2701064.

svn-id: r39597
"
"c26a162606a00711ee619eda6f6f94cbbb1d990c","2009-03-21 19:57:54+00:00","Converted some leftover tinselV1 code, so that the engine builds when DEBUG is set

svn-id: r39598
"
"0ce597db80bf76124d41649cf9e7ab5a1746c578","2009-03-21 20:24:36+00:00","LOL: - added drawing code for certain gfx (blood and slime spots on the floor, teleporters, ice walls)

svn-id: r39599
"
"0c5959ce8a946c5a98da86d362cbba555e3198e0","2009-03-21 21:48:44+00:00","Updated iphone/osx build rules a bit, to make them more consistent

svn-id: r39600
"
"16cd161df51374e0a28288313fcec46c8229beab","2009-03-21 22:11:16+00:00","Fix running the testsuite when building outside the source tree

svn-id: r39601
"
"0dc0f24bcdb1869b1e05a364610db25921bb8ced","2009-03-22 03:09:41+00:00","OSX configure fix

svn-id: r39603
"
"117d72e4977afa89f7e936ecef14122326c253dc","2009-03-22 09:37:49+00:00","Bug fixes for handling 5-bit layered sprites correctly - this fixes the black boxes appearing in the first room during the fade-in

svn-id: r39604
"
"871c8d83491f931adbe1b626ef078dbb554dba43","2009-03-22 11:24:23+00:00","- Grouped default settings
- Grouped related functions
- Add 'backends/platform/$_backend' to MODULES for all backends
- Some bits of formatting

svn-id: r39605
"
"734e9dd377b5766f3155f44b5b43160100225106","2009-03-22 13:50:37+00:00","SCI: Fix warnings

svn-id: r39606
"
"f4ae5a45725c882e6f58f9fd509fa4f7780fccc6","2009-03-22 13:50:51+00:00","Fixed configure on OSX (no idea what this will do to the iPhone, but now at least compiling on OS X is possible again)

svn-id: r39607
"
"631e0aaed554fda923da020ffd0e6f9b18234ef9","2009-03-22 15:25:55+00:00","Changed Disk code to provide SeekableReadStream's to sound routines as well.

svn-id: r39608
"
"2b8140d7658705a6f032e6d7969de2505fda88ab","2009-03-22 15:30:42+00:00","Added simple IFF type verification to the parser.

svn-id: r39609
"
"8bb60d62000ad549dfc65e9acc0ec7fcba667815","2009-03-22 16:46:45+00:00","Reverted vinterstum's 'unification' of iPhone and Mac OS X configure code. There is no reliable way to distinguish iPhone OS X and 'regular' Mac OS X via the host type only

svn-id: r39610
"
"07cc19df38f735a8afcb3bdc82f928a0ed45bba6","2009-03-22 17:48:42+00:00","Fix compilation of the iPhone port.

svn-id: r39611
"
"09ecda7ca485fc63334d44c26636dacf3ffa6e4a","2009-03-22 18:27:08+00:00","SCI: Some cleanup; avoid taking square root unnecessarily

svn-id: r39612
"
"2463b148a920d03bd67da59b63376b77063ed66b","2009-03-22 18:27:39+00:00","SCI: Renamed Vertex::entries::cle_next -> Vertex::_next, analog for cle_prev. Replace code for reversing a circular list by a new method CircularVertexList::reverse()

svn-id: r39613
"
"8f4831a1d9a535ffd90891f2024ca2139b50c13e","2009-03-22 21:12:15+00:00","Don't just 'return' from the script if  == no (leftover from r39541, where that code was inside a function)

svn-id: r39615
"
"277b8e6190d67e816694a78dc22f99f1c9b45d20","2009-03-22 22:02:25+00:00","SCI: Fixed nasty bug in simulate_stippled_line_draw, caught only thanks to warnings by the Wii compiler.

svn-id: r39616
"
"7714b20abff459c52490381c5ef658bce9578d13","2009-03-22 23:02:09+00:00","TINSEL: cleanup

svn-id: r39617
"
"00907f32bdc76dbca34ed84933573769952d0756","2009-03-22 23:02:54+00:00","TINSEL: More polygon code cleanup

svn-id: r39618
"
"77c97670a3cb57f5fb11e68a3d99be37f9507a08","2009-03-22 23:07:08+00:00","Added support for 3 bit deep ILBM images.

svn-id: r39619
"
"052a6ea1f904079f85854cac9d255b7934130b84","2009-03-22 23:07:51+00:00","Stop erroring out if mask or shadow files are missing: not all location/objects have them.

svn-id: r39620
"
"e3f9acc3e6c66ab42e6e992536c933069771c99e","2009-03-22 23:11:43+00:00","Further objectification of the graphics resource manager

svn-id: r39621
"
"71f42a954988bfe490d9c76e16edfa06873fe1b8","2009-03-23 00:56:05+00:00","Fully implemented scrolling.

svn-id: r39622
"
"5c714cb46eb7c94f1b98d726b635081363c74c98","2009-03-23 08:00:39+00:00","Implemented MOVE script instruction.

svn-id: r39623
"
"4f2e22e87ac7b7c8f4c0f1f104c47dc1b06962b9","2009-03-23 08:05:20+00:00","Partly implemented the STOP script instruction.

svn-id: r39624
"
"93ff05cb6de0ed8b199eab31812421e03a94809c","2009-03-23 08:31:14+00:00","Removed unused variables from a DEBUG method

svn-id: r39625
"
"a6f49a636bf0e8cef76bc416d80ed10020a1924a","2009-03-23 08:43:53+00:00","- Moved palette initialization inside the graphics resource manager
- The static palette is no longer needlessly referenced directly outside the graphics resource manager
- Moved the SCI interpreter version inside the graphics resource manager, instead of gfx_state_t

svn-id: r39626
"
"f405dff025b0a5e12b1b05d210f2bca9723f4a61","2009-03-23 08:49:05+00:00","Bugfixes for incorrect Poly class usage in the CheckNPathIntegrity DEBUG method

svn-id: r39627
"
"4f21bc467fed2724d117204e9df8b29e0337fe4a","2009-03-23 09:16:26+00:00","Correct the fonts used by Amiga version of BRA.

svn-id: r39628
"
"e48cd66daba37192682fb939bf757090fc2e66d7","2009-03-23 10:07:22+00:00","Correct label font used by Amiga version of BRA.

svn-id: r39629
"
"ca993d8b00e54c8523b5b9e708c94d3fc871e6db","2009-03-23 11:10:16+00:00","SCI: some avoidpath cleanup

svn-id: r39630
"
"d18274d0ee2bf8effcb36b726fc833503f7924aa","2009-03-23 11:38:09+00:00","Implemented all variants of IF script instruction. Program class has been changed to store an Array of instruction instead of a List, so that references to instructions are integers.

svn-id: r39631
"
"92e788dbb60e782151a81f33c22185b5de37b6b3","2009-03-23 12:30:47+00:00","Fix pallete for label font in the Amiga version of BRA.

svn-id: r39632
"
"3b5a14916d43b2133c103ec168678bc98e224512","2009-03-23 14:24:10+00:00","Cleanup

svn-id: r39633
"
"082c1f782d52413403be7e27b92095de992fb825","2009-03-23 15:47:45+00:00","Fix compiler detection if CXX is preset to a working compiler but contains a space

svn-id: r39634
"
"7c5f8e8714f7eea43a61455266474dbffd52fe0d","2009-03-23 17:40:46+00:00","Distinguish between the native and the host executable extension, so that nasm gets properly detected when cross-compiling. Also removed the '_have_x86=yes' overwrite for mingw, since it gets detected fine and breaks mingw-w64.

svn-id: r39635
"
"8cebcaf01731736bc357b229099a0fe9be0a77ad","2009-03-23 17:42:08+00:00","Pushed down dependencies from parser.h

svn-id: r39636
"
"b3b3e9da5970250836a17e0fdf772290745bd6f0","2009-03-23 20:07:17+00:00","Initialise _fullRefresh. Fixes a Valgrind warning.

svn-id: r39638
"
"e8ccbd93ed2f8e1b781ff051430be364011bcb81","2009-03-23 20:17:56+00:00","change debug levels to be less verbose

svn-id: r39639
"
"9ed052f38e0786246b7184005420a045cf23d6e6","2009-03-23 20:20:00+00:00","change debug output of script interpreter to more clearly print script number and offset

svn-id: r39640
"
"1a0dea396d21c84b364b511759253a4b33c71bfc","2009-03-23 20:25:25+00:00","Made the music and sound file names part of the class, instead of local
variables. This fixes another Valgrind warning when SndRes::load() tries to
access the file names. (I could also have made the variables static, but I've
never been very fond of static variables.)

svn-id: r39641
"
"a3e0a879701c7b8ca9bffd642fa2414f634557b4","2009-03-23 20:25:57+00:00","Silenced an MSVC warning

svn-id: r39642
"
"7f641cc6becc7481460d77c3e3b78a2eeb5788b0","2009-03-23 20:31:19+00:00","Added MSVC project files for the create_lure tool

svn-id: r39644
"
"2223627c7541651efd49f0718bbfe71a1625cee3","2009-03-23 20:41:54+00:00","Merged GetData, HearData, SpeakData, PathData, ExamineData, MergeData into TypeData struct. This simplifies life a bit especially in the parsers.

svn-id: r39645
"
"52b1c9e32f687d2c090c7afc38ad933cedede295","2009-03-23 20:42:53+00:00","Oops.

svn-id: r39646
"
"d82aea1e5449e08e45a346398d7e53060d56faf8","2009-03-23 22:34:46+00:00","Turned ZoneTypes into a regular numeric id (no more a bitfield).

svn-id: r39648
"
"6a4c475bb2475372f70976e6562bdb6fece4e600","2009-03-23 22:34:53+00:00","Patch #2676453: INDY3/FOA: series IQ with ScummVM GUI

svn-id: r39649
"
"0998f53cb08fe087ad1842b67b9a9743db9e9742","2009-03-23 23:17:33+00:00","Refactored the zone type parsers.

svn-id: r39650
"
"74a82ef4273aec05cb3fcefa4b77ab8a57cdc863","2009-03-24 05:35:48+00:00","Finally fixed the Valgrind warning that was confusing me so yesterday.

svn-id: r39651
"
"e9b4124f1d82f0bfcafdbbb40797c7d767e16c91","2009-03-24 07:18:16+00:00","LOL: - implemented lots of opcodes and fixed a few bugs
- it's now possible to leave the castle

svn-id: r39653
"
"76c0d0820059d5e9e4addeb40de35adbd99e061a","2009-03-24 08:20:08+00:00","* Pushed evaluation of 'following question' from dialogue parsing to dialogue execution.
* Removed all the question forwards declaration code

svn-id: r39654
"
"95d92b0d244275c768f7b98c2500f7aafaa4e7fd","2009-03-24 08:33:24+00:00","Make sure that the currently buggy dirty rectangle handling code is not used. Also, make sure that the resource data pointer is initialized to zero

svn-id: r39655
"
"c1ff3aec3e8e5ca9606c9b43d720dc564ad5815d","2009-03-24 09:01:44+00:00","Removed paranoia check.

svn-id: r39656
"
"48d73ff6bf7f3c25ba9060f7d1717cbf044ff53f","2009-03-24 11:30:37+00:00","CRUISE: Fixed bug when loading backgroundIncrustStruct::saveWidth (don't divide by 2, rather *multiply* by 2); also some cleanup

svn-id: r39657
"
"47f9b2eb6d2248e41a58c1e60498c829c41a6317","2009-03-24 11:30:52+00:00","cleanup

svn-id: r39658
"
"9ea32d4aa12329d3bfe163664f5d84d7318c01db","2009-03-24 11:31:16+00:00","SCI: C++ify menu code

svn-id: r39659
"
"c1be6e1ed68fdb9826a5fe189f01c520238e37af","2009-03-24 12:01:54+00:00","SCI: Fixed some leaks introduced by my previous changes

svn-id: r39660
"
"608b839720a028b5ecffa5955b024387740583d7","2009-03-24 12:14:22+00:00","SCI: moved sci_strndup to menubar.cpp

svn-id: r39661
"
"33895c0220c114653ee77a347452f03e8b8654f7","2009-03-24 12:14:41+00:00","SCI: Only pass the pointerpos to Menubar::mapPointer, not the full gfx_state_t

svn-id: r39662
"
"b76f7fea4eee59eb88d8028120bb1cae780f1c00","2009-03-24 12:46:48+00:00","SCI: Changed some char* into Common::String

svn-id: r39663
"
"c65013faf27f45ae2321e7ad9883893f9cb7d4e1","2009-03-24 13:33:47+00:00","Fixed a regression of commit #35473. Fixes bug #2703595 - 'ITE: Crash when clicking on items inside the hangar'

svn-id: r39664
"
"4e0ca5bbb9d5eb5a2d4eb572b18b8709800b0f44","2009-03-24 15:11:43+00:00","Updated the NEWS file

svn-id: r39666
"
"3e2c1a39e2fd9ac613c3f7d14e152df0332b3908","2009-03-24 15:17:25+00:00","SCI: Added workaround for duplicate polygons being passed to kAvoidPath.

svn-id: r39668
"
"d38590e6d4053939390ae5a853397f9574d9982e","2009-03-24 17:41:26+00:00","SCI: Turned synonyms list into a Common::List

svn-id: r39669
"
"65b96f6a1bf1f4ca8a062f785996306dabbfedf3","2009-03-24 17:41:46+00:00","SCI: Changed vocab_tokenize_string to  not 'return' the list it generates, but rather pass a reference to an existing list to it (this is a bit more efficient, and allows us to return an error value)

svn-id: r39670
"
"1e94b9cd3c7cd889d6b3cd0d8a9aa1b28f2cdda6","2009-03-24 17:42:12+00:00","SCI: Rewrote vocabulary code to use a Common::HashMap<String,ResultWord>

svn-id: r39671
"
"86e54ffa58e9ce86971c05788249b59f18ed4236","2009-03-24 17:56:01+00:00","remove unsigned qualifier, as byte already is unsigned.

svn-id: r39672
"
"fc9e5b6beb919ca248075536b80cce5c7972f237","2009-03-24 19:56:41+00:00","Fix smaller error introduced in r39671 refactoring (this check used to be 'res == 0').
Thanks to syke for spotting it.

svn-id: r39673
"
"e8b38af014a2a3da6251e0e7b11637795a05f4d8","2009-03-24 21:03:50+00:00","SCI: Added workaround for broken polygon in LSL1 room 350.

svn-id: r39674
"
"b85b6929bdd7c238a58ca0ab1ad0158e457d949e","2009-03-24 21:18:06+00:00","SCI: build fix.

svn-id: r39675
"
"51751cd0691b25bcdb882b72ab8c8347d8b3cfbb","2009-03-24 21:45:35+00:00","Cine::Palette: Add fillWithBlack and saturatedAddNormalizedGray-methods.

svn-id: r39676
"
"ee42d06a437e5c0b9d96cee65c33e4f88c258dee","2009-03-24 23:30:48+00:00","Patch from bug #2710315: INDY3/FOA: bug in patch for series IQ with ScummVM GUI

svn-id: r39677
"
"6bc9547324035d387dd0f8700b50d4b5b0be2c4a","2009-03-24 23:43:51+00:00","Add German DOS version of Waxworks.

svn-id: r39678
"
"42d67b4a3ae60afc4e2b4405d3d5da20ff0818c8","2009-03-25 00:33:31+00:00","SCI: AvoidPath cleanup.

svn-id: r39680
"
"91d8f6e228cd2fedf26f9434560d1ca8c6cd0908","2009-03-25 08:06:04+00:00","Add French DOS version of Waxworks.

svn-id: r39681
"
"67201f6a7154e4e10f4c2f3ea9d923fcb2b3144e","2009-03-25 10:04:45+00:00","revert yesterday's change -- apparently this different behavior was intentional.

svn-id: r39683
"
"bd240eb60ac86ba20586db1d7fa9dd6e9a6b4a6c","2009-03-25 10:49:52+00:00","Added myself to the MADE engine credits

svn-id: r39684
"
"006b2d62afe341031b0b3ef7fc947f292c271240","2009-03-25 12:07:10+00:00","Changed some flags to enums

svn-id: r39685
"
"df5239e89e652fb351f10d03756d18dcdcf503c2","2009-03-25 12:11:49+00:00","Remove superfluous comma

svn-id: r39686
"
"34d75e455b50ccf246dc8a63e0eff89b22461c41","2009-03-25 12:52:03+00:00","- Renamed gfx/sci_widgets.* to gfx/gfx_gui.*, as these files contain GUI elements mostly, like windows and status bars
- Moved kWindowAutoRestore from gfx_widgets.h to gfx_gui.h

svn-id: r39687
"
"0501542b79e630fa70f676319df91c74b30f8137","2009-03-25 12:58:22+00:00","Fixed compilation

svn-id: r39688
"
"4723f80fe26ba0d6f4b21a9583af35fbf24aff25","2009-03-25 16:37:50+00:00","Merged sciw_select_item() and sciw_unselect_item()

svn-id: r39689
"
"a3a7893f163bdff7845a23c5a4f29709eaffb4a0","2009-03-25 17:51:22+00:00","Changed the font flag defines to an enumeration

svn-id: r39690
"
"39f7484c9e5255592c7cd244d65e5904ce095eed","2009-03-25 19:52:08+00:00","Cine::Palette::saturatedAddNormalizedGray: Use fractional representation (dividend/denominator) of the normalized gray value in range [-1, +1] rather than a floating point.

svn-id: r39691
"
"02b178f4dbfa8242b5ef72927f4aeb6463170c91","2009-03-25 20:07:44+00:00","Update MSVC project files for r39687.

svn-id: r39692
"
"1a5f531d23d454d953a76e805c7f3d3289ed4d8a","2009-03-25 21:58:16+00:00","Allow building of psp backend via configure (Part 1 - Still need to add the fixup + EBOOT packing steps).
Thanks dhewg and fingolfin for assistance. :)

svn-id: r39693
"
"58a66cb3cd7f3582343ea5771cfc6fecdf87b05a","2009-03-25 22:37:08+00:00","Use the default kernel vocabulary names for SCI1 games, instead of reading the unreliable (in SCI1 games) 999.voc resource. KQ5 and EcoQuest 1 now work properly, and all other SCI1 games seem to be unaffected and working with this change. If there's any SCI1 game with different kernel vocabulary names, we can add special flags to it to our detector, so this change fixes more than it breaks :)

svn-id: r39694
"
"831d3d542e639cff3d111769009f5032a77da67e","2009-03-25 23:14:08+00:00","Changed the primitive equality check to not use Common::Rect, as the two primitives being compared might not actually be rectangles (e.g. they may be lines, in which case the 'width' and 'height' might be negative)

svn-id: r39695
"
"2b1ad19b7f88e4304c249e5b79cf6747ed282c69","2009-03-25 23:14:31+00:00","Added another version of Eco Quest 1

svn-id: r39696
"
"b4b0e35841e19dc3f472762c09d7e5598c3cbfe5","2009-03-25 23:26:24+00:00","Remove a workaround in the line drawing function - it shouldn't be necessary anymore

svn-id: r39697
"
"c592bf3300339a755b692906e7364bb6c9ed76f4","2009-03-25 23:47:16+00:00","SCI: Cleaned up the decompressor comments and code a little bit

svn-id: r39698
"
"ab31f4667691632784d2bdb03de794fe790affa7","2009-03-26 11:16:34+00:00","Corrected the positions of two library functions in the library function list

svn-id: r39699
"
"fb364ee28177270e7cf0cb70e845acd597c4cd3c","2009-03-26 13:11:11+00:00","Changed doxygen comments in sound/midiparser.h to match with our usual formatting conventions

svn-id: r39700
"
"c21110f36ee9618fd94f306eba39fe9208eb887d","2009-03-26 13:11:30+00:00","SCI: Match signature of readResourceMapSCI0 and readResourceMapSCI1 (helpful if we ever want to turn this into overloaded methods of ResourceManager subclasses, one subclass for each SCI version)

svn-id: r39701
"
"e5e16152808bfc44681a5ea217685fb474339064","2009-03-26 13:52:43+00:00","MidiDriver cleanup: findMusicDriver now returns a pointer (makes it possible to distinguish 'no match found' from other results); updated parseMusicDriver accordingly; some methods now return MidiDriverType instead of int

svn-id: r39702
"
"053b7b8a9b9105f5b94df485c74d537366caeff6","2009-03-26 20:24:16+00:00","Theme selection dialog now automatically selects the currently active theme. Fixes bug #2706967.

svn-id: r39703
"
"d75959c3540c21344d462c5074a1be55a984c588","2009-03-26 21:52:04+00:00","Added a note about the potential invalid rectangles created when drawing lines

svn-id: r39704
"
"146597dd2de21ea3874edb4b0b519eddeac014da","2009-03-27 05:57:19+00:00","Adjusted calculation of scanline width for ILBM files to account for occasional padding bytes. This fixes the loading of some backgrounds in BRA.

svn-id: r39705
"
"95a8c28dd59c3e66bd2fe33875a905e12336a6ad","2009-03-27 12:04:43+00:00","Fixed bug where screen wasn't automatically updated when changing theme, unless you moved the mouse.

svn-id: r39706
"
"07d3ae07aca1ca7c7d6437365c04e061d6a6eb43","2009-03-27 13:49:11+00:00","Fix regression from r39702: look up music_driver in config

svn-id: r39707
"
"32495abc384d043d6717e55053aac17e2a746a46","2009-03-27 14:12:42+00:00","Improved configure support for the GP2X port.

svn-id: r39708
"
"f7da5230e31ad91d6eb5a289c7218c6172e570fb","2009-03-27 19:11:00+00:00","Cine::Palette: Add setGlobalOSystemPalette-method for setting the global OSystem's palette from the Palette object's internal representation.

svn-id: r39709
"
"80ab6ccf441914c2cecacf6a53c74a6db5379e6a","2009-03-27 20:03:38+00:00","Cine::Palette: Remove unnecessary and needlessly complicating saving of the last loaded palette data's endian type.

svn-id: r39710
"
"d85e3b72d24998e52030b602b86b2b0a09138a9b","2009-03-27 20:56:15+00:00","Add color component bit count (rBits, gBits, bBits, aBits) and maximum value (rMax, gMax, bMax, aMax) convenience functions to PixelFormat-struct (If someone objects to adding these, holler and/or revert this commit, I can live without 'em but they'd ease some parts of Cine::Palette-code).

svn-id: r39711
"
"6ef983335e527e2747b445e59579553f033c4d3f","2009-03-27 20:59:46+00:00","Make Cine::Palette use the PixelFormat's convenience functions introduced in r39711 (This way I don't have to cache the rMax, gBits etc values and I'm left with less member variables to keep up to date).

svn-id: r39712
"
"ce414e66719161461367f6ec065f61b1ac42248a","2009-03-27 21:31:03+00:00","Cine::Palette: Add a black palette constructor and a clear-function for clearing the palette of all data (Releases used memory etc).

svn-id: r39713
"
"e860473d80a7f3235b3db6014194b64a2f0990d1","2009-03-27 23:01:13+00:00","SCI: AvoidPath workaround for intersecting polygons in Longbow, room 210.

svn-id: r39714
"
"9131f20587485237956ce8971e12dab533e651da","2009-03-28 06:45:22+00:00","Change the detection of Amiga versions of BRA, to a required data file (request.win).

svn-id: r39715
"
"49791796219a0dbd0638b84b79ea6ee53f95cc79","2009-03-28 09:56:39+00:00","Add sound effects support for PC version of BRA.

svn-id: r39716
"
"97abfc9181e0689aada9ee97cde5899e6b28c366","2009-03-28 10:06:43+00:00","Add sound effects support for Amiga demo of BRA.

svn-id: r39717
"
"8875fdcdedc08710517295f770acaf6931912041","2009-03-28 11:58:22+00:00","LOL: - Level temp data now get stored in memory so you can now return to a level without everything being broken. Temp data isn't saved to disk. Since total memory requirement for storing this data won't exceed ~100kb I'd rather save memory in other places (like removing some screen page buffers)
- Implemented some more opcodes and fixed some bugs (You can now safely pick up coin pouches. The lamp seems to work fine, too).

svn-id: r39719
"
"8dda5f4070609863e98a7e9294c2f3e5b906f5ed","2009-03-28 12:08:43+00:00","Formatting.

svn-id: r39720
"
"7bfa1455bcc4461286ebb1395a66f6c3b713277b","2009-03-28 12:58:34+00:00","LOL: - implemented opcode required for operating the floor plates in the thugs' cave)
- fixed bug (only one of the two thugs in front of the cave was deleted when sneaking into the cave)

svn-id: r39721
"
"a9f5340cbaea79c12f66e0f50c82ab44c037752f","2009-03-28 14:03:51+00:00","Save zone and animation flags when a location is closed. This fixes bug #2718462.

svn-id: r39722
"
"f2d7875db66b8c89a3f6786335045c05a36a1d07","2009-03-28 14:17:17+00:00","Added initialization for _index and _locationIndex in Zone objects.

svn-id: r39723
"
"329c3321e8eb62ce7b73daa41c4bed3e0880a452","2009-03-28 14:38:19+00:00","Added workaround for script bug in ticket #2718449.

svn-id: r39724
"
"adbcfabcb1148009ab266b38c09275f6b01ba199","2009-03-28 16:07:56+00:00","Cine::Palette: Add empty() and isValid() functions.

svn-id: r39725
"
"9a21bd26e98e01f1b7b9713ad20c8e5cd88b40a9","2009-03-28 16:34:47+00:00","Cine::Palette: Add constants for normally used palette color counts and byte sizes.

svn-id: r39726
"
"2b7af654bdc66ac81cbf3e4218a2a4e1ab262330","2009-03-28 16:35:54+00:00","Fix invalid memory writes.

svn-id: r39727
"
"a329b64eccfafdddec562e5618e6fade971402a4","2009-03-28 17:04:46+00:00","Cine::Palette: Revamp palette constants so they can be used for e.g. allocating a constant sized byte buffer from stack.

svn-id: r39728
"
"1b356fe5435374e85d5b782252dea293b40667d0","2009-03-28 23:39:59+00:00","Fix bug #2691034: AMIGAOS: Makefile.common broken.

svn-id: r39729
"
"5c020b9efe575107c6d07af31e1dbe0739db0dd4","2009-03-28 23:47:14+00:00","Fix bug #2684645: AMIGAOS: Build breaks in 'base/commandline'.

svn-id: r39730
"
"cda1bf5ca91f178e9e156c4b0246c55a4264f7c3","2009-03-29 01:56:03+00:00","Eco Quest 1 continues after the intro now

svn-id: r39731
"
"28465d73bbb7a5f7e23f4baa3fa34db097c80a03","2009-03-29 10:18:09+00:00","Merged CommandData into Command.

svn-id: r39732
"
"e930f4c79238cd84191e21e5ffe52a5521b0eb87","2009-03-29 11:22:49+00:00","Added missing parenthesis in M4Engine::delay

svn-id: r39733
"
"09d96e24f95d97e69b168e791e5bfe55c7668f36","2009-03-29 11:56:32+00:00","Fixed the colors of the window frames in KQ5

svn-id: r39734
"
"8b3f6b029944bae3378afc06c127a4feb8530c7a","2009-03-29 12:10:17+00:00","Set main menu text height to the actual font height.

svn-id: r39735
"
"01812f083028b95a796a3e7ca89749bff62db7b3","2009-03-29 12:11:10+00:00","Fixed several free/delete mismatches.

svn-id: r39736
"
"d883cb209eab63268338b3f86843ce32c1027fdb","2009-03-29 12:28:24+00:00","Fixed the colors of the widgets in KQ5's options menu

svn-id: r39737
"
"011b73a09ba1e3d51a403ed65cedcd9394d6bfb0","2009-03-29 12:41:00+00:00","Commands now evaluate their reference Zone at runtime, thus handling of forward references in the parser is no more needed.

svn-id: r39738
"
"340b0e632eabec16a9ee07545bc57b9ca6f78660","2009-03-29 13:17:34+00:00","Ensure zone and animation flags are restored when a location is reloaded. This should definitely fix bug #2718462.

svn-id: r39739
"
"666f0720ab801e8e9df4a8e65f452044b110f7b2","2009-03-29 13:56:16+00:00","(Re)link bounding animations after location has been completely parsed. This avoids problems due to forward references.

svn-id: r39740
"
"34c2546fdd18d5193560748006ea92008144fe10","2009-03-29 14:03:11+00:00","Added declaration for Amiga BRA callables.

svn-id: r39741
"
"5fa83a26e642038806fe2536f5694ae783ec57cf","2009-03-29 14:09:24+00:00","Implemented IFCHAR command. This makes part 3 of BRA completely explorable.

svn-id: r39742
"
"fbc76a89e110eb5db9e703cff5698d815f21e5d2","2009-03-29 14:47:57+00:00","Added a stub for the palette fadeout/fadein effect, so that we remember it's currently missing

svn-id: r39743
"
"661644f3c1ee773bde80f1e06219cae391e12867","2009-03-29 15:08:50+00:00","Added stubs for the missing palette effects in kPalette()

svn-id: r39744
"
"50624014236638c2e2d256735c8092e1526ef59e","2009-03-29 19:09:23+00:00","fixed 'if' statement as should be/was.

svn-id: r39745
"
"b524e3d285d04a7f9df139cc55fea13472eacf31","2009-03-29 21:46:26+00:00","SCI: remove some debugging printfs

svn-id: r39746
"
"968856780bb474dde5ea5685c079cbcd60230377","2009-03-29 21:46:49+00:00","SCI: Merge static palette into global palette at startup

svn-id: r39747
"
"6c6f95afe98e1b1624e0215ea8e99cee0c77fbfa","2009-03-29 21:47:09+00:00","SCI: don't delete static palette twice

svn-id: r39748
"
"30473e313d8e4513a11dd29ea353db297d5223b4","2009-03-30 03:44:26+00:00","Fluidsynth requires additional libraries, for mingw build.

svn-id: r39749
"
"e130aecc4f2650d86a41ee4d963b66e5421226bb","2009-03-30 07:53:32+00:00","Wrapped all the still WIP SCI32-specific code around appropriate ifdef blocks. SCI32 has fundamental differences from previous SCI versions (e.g. direct point addressing is no longer possible), most of SCI32 games use SVGA resolutions and currently a lot of SCI32 specific code is missing (like, for example, the newer string and array handling functions, the widget system etc). This has been done in the same manner as in the SCUMM and SAGA engines.

svn-id: r39750
"
"6e075e8a348f5fab5680b5d99cd5010ffe53db28","2009-03-30 07:57:10+00:00","Fixed compilation

svn-id: r39751
"
"dd32b974e4aef065907311632d4f009bef2efba6","2009-03-30 08:09:02+00:00","Added build rules for SCI32 games

svn-id: r39752
"
"6460511603b2c780ec8fbf5f46418f503254578b","2009-03-30 08:31:30+00:00","Add GF_EGA feature flag for PN, to allow easier support of PC VGA version in future.

svn-id: r39753
"
"bfeded3b98ba4c5cc5f0b4b71a49c62c11bc67fb","2009-03-30 08:37:49+00:00","Changed the SCI version of the French version of LSL3 to match the other ones. Hopefully, this fixes the crash described in bug #2719017

svn-id: r39754
"
"627c3d8f89ea79c9db8786f9f9622dcdc11a4bf1","2009-03-30 08:43:34+00:00","Verified the SCI version of a version of Laura Bow 1 - The Colonel's Bequest, from bug report #2720682

svn-id: r39755
"
"37ddffc1d270e2d7b4b146c8b884ec552722040f","2009-03-30 09:02:03+00:00","Added another version of Hoyle 1, from bug report #2719227

svn-id: r39756
"
"5ef85a20ed3cf419f527ab064853da3ce4c12035","2009-03-30 09:10:28+00:00","Drop Cygwin support, the -mno-cygwin option is been removed from GCC in the future.

svn-id: r39757
"
"252dc302930fa784229357625dd64697563e3c21","2009-03-30 11:35:12+00:00","Added another version of Quest for Glory, from bug report #2718784

svn-id: r39758
"
"0ea7589e2ca4fce7dd07e9e757b8527652e2ac58","2009-03-30 12:08:12+00:00","TINSEL: Commit of parentheses patch from salty-horse. (from -devel 'Enabling -Wparentheses in the Makefile').

svn-id: r39759
"
"a619443dbc2124d7a40a976c901226931b1f7db5","2009-03-30 12:09:03+00:00","PARALLACTION: Commit of parentheses patch from salty-horse. (from -devel 'Enabling -Wparentheses in the Makefile').

svn-id: r39760
"
"67a881f44402a3b0110d837270e113ead0211753","2009-03-30 12:10:10+00:00","SCUMM: Commit of parentheses patch from salty-horse. (from -devel 'Enabling -Wparentheses in the Makefile').

svn-id: r39761
"
"c8aec4c696b38aa19c2234aa55db9e7920833b32","2009-03-30 12:11:22+00:00","SWORD1: Commit of parentheses patch from salty-horse. (from -devel 'Enabling -Wparentheses in the Makefile').

svn-id: r39762
"
"4076bdecbce2a93e8254eb09cb01460ce693d906","2009-03-30 12:12:20+00:00","Remove -Wno-parentheses switch for g++ 4.3.

svn-id: r39763
"
"0c1bae6b15c941cd6d8e6dfb98c0e6ddf8c3eb4c","2009-03-30 13:42:28+00:00","Rate selection is now possible for VAG audio decoder, also decoder doesn't die with incomplete/corrupted files

svn-id: r39764
"
"f7748cfefcdcc9714982aec6fc73c31c924ed87e","2009-03-30 14:06:07+00:00","Disabled some unused code

svn-id: r39765
"
"5f0083e9961d538fe4e156f38e4565363f3c7fd6","2009-03-30 20:51:09+00:00","Ignore the unreliable resource vocab.999 in SCI1 games. This allows us to use the hardcoded table in vocabulary_get_knames1() instead (also check commit #39694). KQ5 floppy works now without FreeSCI's custom vocabulary file

svn-id: r39766
"
"9c5cf77287fd7672592bd3bf1605e7ca688d8a02","2009-03-30 21:04:19+00:00","vag: delete stream after use

svn-id: r39767
"
"936482f03c9d7009797edf837719a4cb19df2f67","2009-03-30 21:41:29+00:00","This should really fix the issues with vobab.999/999.voc in SCI1 games (e.g. KQ5)

svn-id: r39768
"
"6b499ebf4b3a04a9ae79669db5bf794a4439c3e1","2009-03-30 21:52:46+00:00","Initialize _staticPalette when creating the graphics resource manager. This allows KQ6 to start (and then sit idly doing nothing in the main menu :) )

svn-id: r39769
"
"b08b0f64afbc6c697d3334f17284f132cef8cb51","2009-03-31 06:49:44+00:00","Character doesn't need a reference to the engine anymore.

svn-id: r39770
"
"66de3bb9059a96485e877135f06c3ed8d574d825","2009-03-31 07:48:44+00:00","Got rid of the gfx_res_mod_t struct

svn-id: r39771
"
"9880a2e5780aceeca11eef0a8c8c3b6d24e10722","2009-03-31 14:35:06+00:00","There have been subclasses of DialogueManager for a while, so now we use their constructors for something.

svn-id: r39772
"
"86a1926c19bf32f4a0b315c6f7d7d1f3567e555d","2009-03-31 15:45:44+00:00","Added basic multiple inventory support. This will be used for the GIVE and SWAP commands.

svn-id: r39773
"
"0a2ff7f18fd710ed7f65a58f71d13ac5008034cc","2009-03-31 17:00:36+00:00","Fixed dialogue balloon appearing in the wrong position after commit 39772.

svn-id: r39774
"
"7e3af1e0e466782aa916491292f70a63f0acab5f","2009-03-31 20:11:56+00:00","Added the German version of EcoQuest 1, and enabled a version of EcoQuest 2 which had incomplete details

svn-id: r39775
"
"2fafa720d2baacf956d2ca1dcfef7fa929de9a11","2009-03-31 20:25:47+00:00","Fixed a typo in the German version of Eco Quest 1 and enabled the German versions of Laura Bow 2 and Larry 3 which had incomplete info

svn-id: r39776
"
"71d9eafd02c5a832f4141eb7949fa8d6067ba50c","2009-03-31 20:35:14+00:00","Added the German versions of PQ3 and PQ4

svn-id: r39777
"
"adf7b3a2a4af38135bf5606434c2f02a7c9d2e9b","2009-03-31 20:57:13+00:00","Added another English version of SQ4 floppy and German versions of SQ3, SQ4 and SQ6

svn-id: r39778
"
"64fa2b1ed64f692b4e28371834c0c367f9be08de","2009-03-31 21:04:48+00:00","Added Mixed-Up Fairy tales, and corrected information on some versions of SQ4

svn-id: r39779
"
"feef5d0e2236c912ce55b65ba8c8d61f1f9a198a","2009-03-31 21:27:54+00:00","Added the German version of QFG3. Also, enabled Phantasmagoria 1 and 2, as apparently there was only one version of each one

svn-id: r39780
"
"4d64856687dbdb51f5f69be88ecc281548fd56a1","2009-03-31 21:39:59+00:00","Added 2 versions of QFG4 and updated the information of the German version of SQ5

svn-id: r39781
"
"162e9b15f49be60ee70de15d38d62dc0e7751b6b","2009-03-31 21:57:18+00:00","Added 2 versions of Mixed-up Mother Goose and enabled RAMA and Shivers (apparently, there was only one version of them)

svn-id: r39782
"
"6ef8534e9a914af0d6a251952730cdabb9fecd90","2009-03-31 22:35:21+00:00","Added 2 more versions of GK1 (apparently, all versions of GK1 used the same interpreter) and enabled GK2 (again, only one interpreter version was used for it)

svn-id: r39783
"
"a518301e6601ad7310cb7b1d75f432f11d8cb311","2009-03-31 22:48:25+00:00","Enabled 2 versions of Freddy Pharkas, and added the German version of QFG1

svn-id: r39784
"
"d093adbb55e054e22d9ef976bf83dc2d5e04c9ce","2009-04-01 10:38:14+00:00","Replaced resource type numbers with existing constants

svn-id: r39785
"
"d42d6122d963237ea35afc8e7015a2ae5b087523","2009-04-01 10:43:24+00:00","Laid the basics for music handling

svn-id: r39786
"
"ef81dc0f983b639e61232a3f6e9cf6643f2c35d8","2009-04-01 10:45:36+00:00","Added Cruise sound.cpp/.h to the MSVC projects

svn-id: r39787
"
"f0456d67a873f8d6dd8d0c8262dd454bacb235b9","2009-04-01 11:03:06+00:00","Laid the basics for music handling

svn-id: r39788
"
"a9e424f177605de071673001902d0995008bea89","2009-04-01 13:59:53+00:00","Formatting.

svn-id: r39789
"
"bf94fc6e4eae19d205d66a57235037ea67ef1133","2009-04-01 14:00:17+00:00","Fix warnings.

svn-id: r39790
"
"44025f03d56bab2160448166235a20a9e95602d9","2009-04-01 14:02:55+00:00","Fix compilation via manually implementing strToUpper, instead of relying on strupr.

svn-id: r39791
"
"0a9febc3007a8b56ee006dad12bf389ba8541c92","2009-04-01 16:19:48+00:00","Update MSVC project files (MSVC9's cruise.vcproj bas broken in r39787).

svn-id: r39792
"
"b6f6fdced4a2d9541b887d52cd8f19f3e6db8890","2009-04-01 17:16:22+00:00","Add default constructor for Cine::Palette (Creates an invalid, empty palette).

svn-id: r39793
"
"1e8bd16c1e89dd2ab528a1e502291c5d1800a4cb","2009-04-01 20:32:45+00:00","- Wrapped all the code for custom graphics options around a CUSTOM_GRAPHICS_OPTIONS define. Most of these options don't work in 256-color mode, plus there is currently no way to actually set/change them somehow (other than modifying the code)
- Added a FIXME for the abuse of the pic_port_bounds graphics option - it's actually set by the game itself in kSetPort()
- Added some test code for setting palette intensity in KPalette() (currently disabled)

svn-id: r39794
"
"7257fe0da121b5eb923d3d37cda9042867c04463","2009-04-01 20:55:24+00:00","Cine::Palette: Add saturatedAddNormalizedColor-function (Going to be used to combine FWRenderer's and OSRenderer's transformPalette-functions into one later on).

svn-id: r39795
"
"09d5508b01d84560b6860ba60ae25ee407de515c","2009-04-01 21:48:42+00:00","- Updated the details of 2 versions of Freddy Pharkas and of 2 versions of SQ5 (to distinguish the English from the German versions)
- Enabled the Italian version of KQ5 and added the Polish version of KQ5

svn-id: r39796
"
"3dc820796df294f68ca7d543899c9f9185518a87","2009-04-02 00:04:20+00:00","SCI: Avoidpath cleanup.

svn-id: r39797
"
"88ec6f407cabadfe31c7c652648b9a234329e497","2009-04-02 15:28:34+00:00","SCI: AvoidPath cleanup.

svn-id: r39798
"
"9180f3a9a154af6dd350bda82f83f1437cdda64f","2009-04-02 16:30:42+00:00","Fixed compilation under MSVC by implementing roundf()

svn-id: r39799
"
"6fe12a0888c065f906836b59c123530df03d7fc0","2009-04-02 16:38:33+00:00","pic_port_bounds was only set from command-line parameters it seems, so it's safe to put it together with the rest of the options

svn-id: r39800
"
"44443badc5cf5d1f6f869754092500391ac4628c","2009-04-02 16:54:21+00:00","Disable some (quite chatty) debug output - the savegme system looks stable enough

svn-id: r39801
"
"8ae0ed17061a98233a26c4efe70d4bf2f27d89d8","2009-04-02 19:37:56+00:00","Applied fingolfin's suggestion to remove the roundf() implementation and make the code in that bit simpler and more readable (since points are always positive)

svn-id: r39802
"
"342b335ea9c9f134a954bd5ff29319d5c9c8808a","2009-04-02 20:19:10+00:00","Added the German versions of KQ5 and KQ6, sorted out the different versions of KQ6 and enabled the Spanish version of KQ7

svn-id: r39803
"
"6c21af058e523920cfd00709c702c557b78ad44a","2009-04-02 22:33:27+00:00","Added the German version of KQ7

svn-id: r39804
"
"d2b8eb76e0adb878a3eb1141ad50aa37d1d387a4","2009-04-02 23:37:21+00:00","Added the English DOS version of Hoyle 2

svn-id: r39805
"
"faa252391c7bcc2c482f5ac9617ac0205ebdd353","2009-04-03 07:52:17+00:00","Merged the SCI1 and SCI11 cel drawing functions

svn-id: r39806
"
"c4e054848e8c21aa982d32b1eca9daafbd904a55","2009-04-03 08:10:58+00:00","Changed some references from 'FreeSCI' to 'SCI' or 'ScummVM'

svn-id: r39807
"
"c92210296e9078c28eca489514baebf5c7508467","2009-04-03 08:23:02+00:00","Some more FreeSCI <-> SCI changes

svn-id: r39808
"
"fb6d0a7119c839efd13ee51e05f68337362bd84b","2009-04-03 14:53:15+00:00","PARALLACTION: Fix silly Mingw 'shadowed declaration' warnings

svn-id: r39809
"
"cf3265a1c9e089fb7943ea744590cecb169b96a0","2009-04-03 14:53:56+00:00","SCI: Fix warning on OSX

svn-id: r39810
"
"52261c0bef6ce3da5ecbafa51f73c6e4ef547214","2009-04-03 15:08:26+00:00","Make svn commands in Makefile.common slightly more robust against localization.

svn-id: r39811
"
"21ebc88b000d74cfcb6add52ae6053e553ced9e9","2009-04-03 15:12:46+00:00","GUI: Commited fix for bug in ThemeParser::parserCallback_defaults (at least I think this is the correct fix, somebody should review this)

svn-id: r39812
"
"58df840a1353ab64c894a4205b45a517311a4648","2009-04-03 16:32:47+00:00","Moved Nippon Safes specific code from Parallaction to Parallaction_ns and adapted client code.

svn-id: r39813
"
"20bdfe4173c76a200e3c2c94dfa203c4f2b0c438","2009-04-03 17:09:12+00:00","Moved background and character loading code from LocationParser_br to the engine for BRA.

svn-id: r39814
"
"92018a0038ccc4241a1b70bb75ed602c9d8f2757","2009-04-03 19:21:31+00:00","- Added the German version of Longbow
- Added Fun Seeker's Guide
- Removed some leftover detection entries from FreeSCI

svn-id: r39815
"
"002cda6c5babe4a9e2e2b2da28f7f889a9a3e99a","2009-04-03 20:43:55+00:00","Cleanup of decompress_sci_view(). Also, ALL of the cases where that function returned 1 are fatal, as the resulting object will be invalid (null) and will crash ScummVM, so they've all been changed to asserts instead of warnings

svn-id: r39817
"
"9638c7ec4bc90a8c8df9f6decde9914376f4186b","2009-04-03 21:32:50+00:00","LOL: - added support for magic atlas
- fixed minor palette bug

svn-id: r39818
"
"c3dc501f23f29ee937a0ee1343814728b9639ac7","2009-04-03 22:03:06+00:00","Removed the non-working Chrono port code, after discussing with Lars

svn-id: r39819
"
"e03eb7d4ce6643b164bd60e278738fd9ca6ba4b5","2009-04-03 22:48:55+00:00","Removed leftover chrono-related code (refer to commit #37721 for the changes to kgraphics.cpp)

svn-id: r39820
"
"3d556dd9e0aaae9fb086b7b22214cd7b4d3564c4","2009-04-03 23:06:42+00:00","Fixed compilation (a signed byte cannot hold such big values)

svn-id: r39821
"
"121f174d611ba99c5f809696b87bc3cec1f53f31","2009-04-03 23:27:38+00:00","Fixed incorrect palette range usage so room fade-ins happen correctly

svn-id: r39822
"
"3d608dda3e63da9159c38d9a41960dea1cc16e24","2009-04-04 00:19:34+00:00","LOL: - reverted last commit which would break map shape drawing (I have now changed the map shape coordinates to decimal numbers though since some compiler seems to complain about signed hex numbers)
- added support for placing items in wall niches (like that one in the thugs' cave)

svn-id: r39823
"
"07fb7735b5859c216e3de96aa75bcb738d55ec5c","2009-04-04 01:21:25+00:00","Replaced all occurrences of the constant '257' with the existing constant 'NUM_FILE_ENTRIES'

svn-id: r39824
"
"89d457fc0f4c64ddb51fbc3eeeccc75f25da7adc","2009-04-04 03:50:01+00:00","Add more German version of HE games.

svn-id: r39825
"
"7816c988921d21d6c7ccf25a94f7e7e5ec69c08f","2009-04-04 03:52:21+00:00","Ooops, remove excess space.

svn-id: r39826
"
"2dd4789fc08befcbbfe92a73b88a871c5ce5be92","2009-04-04 05:42:12+00:00","Update prefix for German version of puttzoo.

svn-id: r39827
"
"d9e91f99c1a5a6802c933fdcfcb67c4b94672ec0","2009-04-04 05:50:21+00:00","Update prefix for German version of puttzoo.

svn-id: r39828
"
"6bb7576a459e09ca2723215f2e134db4f01ac7d6","2009-04-04 06:01:03+00:00","Update prefix for German version of puttzoo.

svn-id: r39829
"
"2bf567d988d67b3cae63da6095e9f770571f0ecf","2009-04-04 06:03:09+00:00","Fix possible regression in HE games re-releases.

svn-id: r39830
"
"5b968d9c35e4b17c787ebf0916d8e60d150b7134","2009-04-04 06:19:18+00:00","Update German version of puttzoo.

svn-id: r39833
"
"3687838d192ffe471601de9285bb036a3aa38dcf","2009-04-04 08:03:24+00:00","Updated xcode project

svn-id: r39834
"
"b82707463accf9f7e988ceb19ab01cd6645686f4","2009-04-04 10:10:15+00:00","Remove the obsolete IPHONE_BACKEND define

svn-id: r39835
"
"31118416ab2bcd10513fcec1da73d14cd8d4a688","2009-04-04 12:56:49+00:00","LOL: - minor sfx bug fix

svn-id: r39836
"
"efa4e918d22c55e013401fa22d8596f945d2cf88","2009-04-04 13:13:14+00:00","Fix warning.

svn-id: r39837
"
"942dd9b84573df0ef750b61481fb51b0d613a08c","2009-04-04 13:15:41+00:00","Fix warnings.

svn-id: r39838
"
"bff93a38aea26cdc2eb1b5b343443f52bfa7f278","2009-04-04 13:19:33+00:00","Formatting.

svn-id: r39839
"
"caf585bcb137464d753cc35892d327d78b46a586","2009-04-04 14:10:53+00:00","LOL: - minor item drawing bug fix

svn-id: r39840
"
"11aebedd35e152438d3808e1165fb7078f01da2e","2009-04-04 15:37:53+00:00","Updated NEWS for 0.13.1

svn-id: r39847
"
"353e0bef7af7bdd642c853add5842c82685d55a0","2009-04-04 16:13:52+00:00","LOL: - this should fix a text displayer bug that occured when speaking to the compass gui

svn-id: r39848
"
"3efc9ad51eb39b0c8ac8680fc79be1b34767d2dd","2009-04-04 16:41:21+00:00","LOL: correct character portrait positioning for 'full screen sequences' (like grey eagle inn) when playing without sub titles

svn-id: r39849
"
"af0efd8938f896305e18a10f4cdd260f426f2b24","2009-04-04 17:57:00+00:00","Add saturatedAddColor-function in which you can specify the added color's format (This replaces saturatedAddNormalizedColor).
Make colorFormat()-accessor function to return a const reference for speed.

svn-id: r39851
"
"44fa38b2afa2279a19a09a973dc157606b865008","2009-04-04 21:10:35+00:00","LOL: implemented compass

svn-id: r39852
"
"7bd305397bf994f2e7a954fe61432f719d07aa3c","2009-04-04 22:49:14+00:00","LOL: fix magic atlas back/forward buttons

svn-id: r39853
"
"d52d81fd1caddf99dc8c63a26692f6dff784e0b0","2009-04-04 23:35:00+00:00","LOL: implemented opcode for throwing items into or out of the thug's cave

svn-id: r39854
"
"197c2bbb99771228f0161ede64b15b456881b28f","2009-04-05 00:06:22+00:00","SCI: Replaced AATree by Common::List in AvoidPath. AATree does not help when
the input size is this small.

svn-id: r39855
"
"d90a343790ca40933418ea75fa8ff702427dcbe2","2009-04-05 07:51:31+00:00","Created stub manager class for sound effects

svn-id: r39856
"
"5f1c08505f3881b7154cca07731d911fe55b7741","2009-04-05 07:52:21+00:00","Implemented many of the remaining library functions

svn-id: r39857
"
"bf160a91b83c42ca51b2b48a88b8654d17bab30d","2009-04-05 11:36:38+00:00","LOL: fix speech bug, which would cause a hang up when entering roland's house

svn-id: r39858
"
"dfdd0e4428ede8f32a094189371bcd83318d61a6","2009-04-05 12:11:20+00:00","Add another German version of Simon the Sorcerer 2 (DOS Floppy).

svn-id: r39859
"
"a528efb93ddc387e7a63154df09f0586b5745cb0","2009-04-05 12:13:21+00:00","LOL: implemented two more opcodes (for roland's house and for the sequence where the king gets poisoned)

svn-id: r39860
"
"f6b313e879a15d80eca978f008810e52aeb55980","2009-04-05 12:59:54+00:00","SCI: Include sciduv.exe in version scanning.

svn-id: r39862
"
"38737e9c07c04f53f2f00f81f1bade3e70ca7f12","2009-04-05 13:15:33+00:00","LOL: fix monsters' strange sliding to the left (like that thug at the beginning)

svn-id: r39863
"
"f5fb20680f6524b6e317ba487efdc370e1f1f9ce","2009-04-05 15:58:27+00:00","Apart from a 'const', the volume() and getVolume() function were identical.
Removed the volume() function.

svn-id: r39868
"
"52c5b7547c064ec43490f801ec15ab5edf4746ff","2009-04-06 10:25:27+00:00","SCI: Made said_parse_spec static, regenerated said.cpp from said.y

svn-id: r39870
"
"9cbc563ea43a3610087cb3f2b74847e14eefb923","2009-04-06 13:45:08+00:00","Sync NEWS.

svn-id: r39871
"
"1c7894caf3dffa1d8bdc6bd6c55a09fccb436f0e","2009-04-06 13:59:36+00:00","Correct Parallaction section of NEWS.

svn-id: r39874
"
"74fdcca04e6a2f9270d6f061540068043b2015e1","2009-04-06 17:09:02+00:00","LOL: startup fix for floppy version

svn-id: r39875
"
"fe1584c140d911ebe86a1afe5a39882b705ebfaf","2009-04-06 17:13:07+00:00","Fixed an issue with the password screen in LSL5 and kStrAt(). The game password, saved in file memory.drv (which can either exist in the game directory, or is created in the saves folder by ScummVM) is now working correctly, and the game can be started. Note that it's NOT currently possible not to set a password (you'll get the password screen anyway the next time, and it won't work).

svn-id: r39876
"
"2ab995557723d87c2e616973179cc712896bcf6a","2009-04-06 17:15:31+00:00","Fixed a crash in LSL5 when opening the inventory

svn-id: r39877
"
"0e05ec8cc8122e92400925496e3a21e3980fe20d","2009-04-06 17:21:23+00:00","Cleanup of Balloon and Dialogue code:
* moved version-specific code into DialogueManager's derivatives
* reworked construction of BalloonManager's derivatives
* moved a couple of globals used in dialogues (NS specific) to engine

svn-id: r39878
"
"8151a1d878f73280bb9497a88005e3449ec76ccb","2009-04-06 17:31:22+00:00","Removed useless references to the global _vm.

svn-id: r39879
"
"7444665152c24f0ad473baf8a4db4f1f9130e59b","2009-04-07 10:41:23+00:00","GOB: Gave some numerical constants a name. This codebase is a bit of a mess ;) (tons of duplicate code, unnamed constants, etc.)

svn-id: r39882
"
"37bfe22a54a6f4b48ac9e26935e8e2586f1b4a91","2009-04-07 13:20:29+00:00","GOB: Some more code cleanup. My respect for the developers of the original GOB engine is at an all-time low :)

svn-id: r39888
"
"3f22e4b4018059be3b8b33f981d773813443db97","2009-04-07 13:21:20+00:00","GOB: Gave tons of opcode explicit names. As a result, found potential bugs in parse_v2.cpp (related to OP_LOAD_VAR_UINT8 and OP_LOAD_VAR_UINT16, see FIXME comments in parse.h)

svn-id: r39889
"
"1d1307de0129f2855a56a81910eb6f2ef5d71ebb","2009-04-07 13:29:13+00:00","GOB: Some more cleanup

svn-id: r39890
"
"d700bc57db0a6b6094dedfe3521ec10bf7cbc56e","2009-04-07 13:38:51+00:00","SCI: Fix endian-unsafe read [bug #2739122 ]

svn-id: r39891
"
"2d83233503ea4b8cbf2b27a4e89acca8f1845dd8","2009-04-07 15:05:53+00:00","Print out the SCI interpreter version and not the resource version when saying what version we're emulating

svn-id: r39892
"
"dc8e67900a365ba7c6a50336dce8b67a099cdf6e","2009-04-07 16:53:38+00:00","Fixing the parser-related FIXMEs. 17 and 18 are int16 and int8, respectively

svn-id: r39893
"
"81f7c8b746c8c025daac12cf8e9032778b4b64f0","2009-04-07 17:26:42+00:00","SCI: Swapped x and y parameters of IsItSkip. Added IsItSkip to kernel table.

svn-id: r39894
"
"b80abe318d65679d5c0cd8a94a8c106534d240ea","2009-04-07 17:43:49+00:00","SCI: Do not skip last entry in kernel table for SCI1.

svn-id: r39895
"
"dc9c538a62d64b40c3a39a673d2f680fa9422f41","2009-04-07 19:52:46+00:00","Sword2: PSX version support, and GMM loading/saving

svn-id: r39896
"
"9c7e3a289822d9df3651882409ca774bebca9c4c","2009-04-07 22:29:36+00:00","Fixed the language of the German version of Longbow

svn-id: r39898
"
"ab08824b654bf6b99797cb708dc3525f6792120f","2009-04-07 22:31:00+00:00","The PlayStation 1 version of Broken Sword 2 is supported now.

svn-id: r39899
"
"c111bb97f4b7a4af10fc1c2251cdee2de4b21802","2009-04-08 16:48:12+00:00","Fixed misleading error message.

svn-id: r39903
"
"068e11fee9c6e7077ef862ab4e0bd8bfdf6ae660","2009-04-09 03:38:41+00:00","Judging by bug #2727536 (and a forum post) we should recognize 'IQ-' as a valid
prefix for the Fate of Atlantis IQ points file. (Either that, or make the
comparision case-insensitive.) So let's do that.

svn-id: r39904
"
"fadd224285cd54adc58eb1c39b84f7607cbcaa70","2009-04-09 08:49:42+00:00","SCI: Clarify hack in kgraphics.cpp based on what lars wrote on scummvm-devel

svn-id: r39905
"
"d3d641e4874344788d35fbb387c011672f4ea050","2009-04-09 15:59:22+00:00","Sort the list of savegames. (I suppose this fix, or a better one, should go
into 0.13.1 as well.)

svn-id: r39906
"
"da90b7e015970e30b8e95893b9f7745cf6a48176","2009-04-09 17:07:00+00:00","Patch #2735283: GSOC09: A few unit tests for Common::Rect

svn-id: r39907
"
"a2b5829101e256d5dfd1dc304ffc7d89b83c3e99","2009-04-09 17:07:24+00:00","TINSEL: Added some doxygen comments to the Tinsel coroutine code

svn-id: r39908
"
"9d4c917f59bae0fc072d11c4b6b2c7e42ea9295b","2009-04-09 17:07:38+00:00","GUI: Rewrote the dirty rect handling code. Previously it was possible that the dirty rect list got clobbered by many rects containg other rects in the list. Also got rid of some obsolete params to addDirtyRect as well as the obsolete return value

svn-id: r39909
"
"c473fa849d7539444c1810ce48cb83dec31a7916","2009-04-09 17:07:53+00:00","SAGA: Make the dirty rect handling here match the one in the GUI code (some more cases of mutually contained rects are deteceted here now, too).

svn-id: r39910
"
"a1dc2ecc6342f77a4c663057ce00c388092124f2","2009-04-09 17:08:09+00:00","Rewrote Common::Rect::contains(Rect) to do what the name suggests (check whether one rect contains the other). Previously, foo.contains(foo) would return false. Added/enabled unit tets for this

svn-id: r39911
"
"0c8ffc80fd3de5aa35be0780c8f3ad086ee6a7c0","2009-04-10 14:06:21+00:00","GUI: Fixed nasty typo

svn-id: r39913
"
"2d54d2717e2aa8f63d79d0600d2cd4d63c36b775","2009-04-10 21:47:10+00:00","Removed obsolete TODO

svn-id: r39914
"
"202f0fc49de8f4d30e3981c634c25d00f87a01a1","2009-04-10 22:33:29+00:00","Added a new console command, 'wake_up_threads', which can wake up threads that are block waiting

svn-id: r39915
"
"46ddb35d9fa8520aa3effe7139c248db65d5fb8a","2009-04-11 00:28:49+00:00","SAGA: Removed some dead/obsolete code

svn-id: r39919
"
"7412b0f8e87a0139ff26309bf9db8024a63b4fb9","2009-04-11 00:29:12+00:00","SAGA: Stop needlessly using operator*() and operator->() (many of the resulting &* uses can be removed if references are used instead of pointers everywhere, which would be a good idea anyway)

svn-id: r39920
"
"7db2648ba00137d5cc5b7fc26f1ab54584dd3ad0","2009-04-11 00:29:34+00:00","COMMON: Added unit test for Common::List::size(); made List::size() slightly more efficient; same for remove() and operator=

svn-id: r39921
"
"1c5110e725e8d5bd2682727b5cbbc9d7b959b95f","2009-04-11 00:29:52+00:00","SAGA: Got rid of some more SortedList methods

svn-id: r39922
"
"64fc4253e8df69f7539809f8eabba20e1ca029db","2009-04-11 00:30:11+00:00","SAGA: Fix yet another mistake in the revised dirty rect code *sigh*

svn-id: r39923
"
"271f8b58b594aee76dcee625251a6ca9f517fcd8","2009-04-11 09:04:50+00:00","Removed move SortedList methods

svn-id: r39924
"
"02ca56eec864c6e4e74b614a9d4be6c331e99eef","2009-04-11 09:23:40+00:00","Removed all but one of the functions of the SortedList, apart from the custom insert() operation. It's only used in one place now (in _drawOrderList)

svn-id: r39925
"
"cf052e5a96f31f2a595639ff9e4b2512c59c574f","2009-04-11 09:31:54+00:00","Fixed compilation (hopefully)

svn-id: r39926
"
"c1a517e383a7b29af2e9ebe68f2565e2db022558","2009-04-11 09:43:42+00:00","Fix compilation

svn-id: r39927
"
"728745767294ecc3abf7fcb730370ff8951999ed","2009-04-11 09:54:55+00:00","Got rid of SortedList

svn-id: r39928
"
"5749b363d58d49c79db0a63f7eb136b34e3c641f","2009-04-11 09:57:57+00:00","KYRA: Replaced Rect class by Common::Rect; replaced dirty rect handling code by code similiar to the one used in SAGA and the frontend GUI code

svn-id: r39929
"
"57f367acb5804f8cd8a530e1247bbc6668ec194b","2009-04-11 09:58:30+00:00","SCI: Renamed bp_flag -> breakpointFlag; replaced global send_calls_allocated & send_calls vars by a local Common::Stack instance

svn-id: r39930
"
"65393be446355f97c8c0db0281ed1e660cbccc1b","2009-04-11 12:08:02+00:00","Removed unused (and wrong) code for IHNM

svn-id: r39931
"
"0dc02a2cbe0cb39d7780a8bc91f7cc7369ed03a5","2009-04-11 12:34:16+00:00","Updated the SAGA and SCI MSVC project files (removed saga/list.h and sci/engine/aatree.h)

svn-id: r39932
"
"3cc8059ce67851f90f47f7473f90649fe1ad80bf","2009-04-11 12:44:27+00:00","Cleanup.

svn-id: r39933
"
"448a98b8859c222155399462c646c10592ffe2e4","2009-04-11 12:46:00+00:00","Changed ScriptThreadList to hold a list of pointers, not a list of instances. This avoids the whole &* mess, as well as the strange references to the list head

svn-id: r39934
"
"bb012ee082567990d883d0a387e83d7736b5cdba","2009-04-11 12:55:22+00:00","Plugged memory leak introduced with rev #39934

svn-id: r39935
"
"b3b862486927d6b5d7c1a9e5f78ed8d401a8dc2e","2009-04-11 14:44:03+00:00","Plugged another memory leak introduced with rev #39934

svn-id: r39936
"
"91b724451bb25133280ef523d91584baed3ec849","2009-04-11 15:38:13+00:00","Committed my patch for bug #2748110 ('IHNM: Fade glitch when Benny falls
asleep'), after discussing it with [md5]. It may not be exactly like the
original, but it looks a lot closer now.

svn-id: r39937
"
"8fe3735f69307894d52efc4ae2ff061549940946","2009-04-11 17:12:17+00:00","Fixed bug #2706939 (Enabled button not drawn correctly) and other similar cases.
Fixed background shading weirdness when opening many dialogs on top of each other.
Fixed some modal dialogs not redrawing properly when closed.

svn-id: r39938
"
"a784e6ab980976d03c141d2cf68e0e601e596d2b","2009-04-11 20:16:37+00:00","When dragging the save/load dialog's scrollbar handle past the top of the
scrollbar, stay at the top. Don't jump to the bottom.

svn-id: r39939
"
"82f862c6b20de0f2449eb012d4a26e371d87dd52","2009-04-11 21:38:14+00:00","SAGA: Simplified Scene::skipScene, changed loadScene to take a LoadSceneParams ref instead of a ptr

svn-id: r39943
"
"41bd7cd94b6c26ea06da5a2f3f0aefdf4adc5c90","2009-04-11 21:38:41+00:00","SAGA: changed _threadList back to a list of ScriptThread objs, instead of ptrs to instances.

svn-id: r39944
"
"bbd423b82aa623a2fee6f5fe0864604083f809fe","2009-04-12 14:02:20+00:00","Backporting fix from rev #39918: Memory leak when thumbnail header
couldn't be skipped.

svn-id: r39945
"
"1666b074b92b5ff96c448ae086706301a4acfdf3","2009-04-13 11:56:26+00:00","Synced NEWS with 0.13 branch.

svn-id: r39948
"
"2758ae34ea7759c689fdf59a2033a8d4b8fafac0","2009-04-13 20:41:16+00:00","commit slightly modified version of #2759353 - GSoC 2009: Correction in README.PSP

svn-id: r39949
"
"27e3ddc628b75e21f09adf503dc01386b5ee4d9c","2009-04-15 01:54:24+00:00","Update renderString to match original code in The Feeble Files.

svn-id: r39951
"
"570f2c66b83425e88aab53979d2349aedb4ccc8b","2009-04-15 02:03:34+00:00","Update renderString to match original code in The Feeble Files.

svn-id: r39952
"
"695bc36b9affeaaf2d2e635b0d72278915a3997b","2009-04-15 10:45:59+00:00","SCI: Added a new song player (work-in-progress).

svn-id: r39953
"
"2558350d1ca96338ec5f409ecea9e25b3b672481","2009-04-15 21:55:12+00:00","Added md5sums of Kyra1 Mac CD as supplied with fr #2766454 'KYRA1: Add support for Macintosh CD' (experimental change, not for 0.13.1 yet)

svn-id: r39955
"
"432e7917a5c9c7b1b14f2ffa3f1988484c3e1a4e","2009-04-16 09:26:37+00:00","SCUMM: Switched opcode tables to use Common::Functor0 (a bit like Kyra does it)

svn-id: r39956
"
"99df028d35a80a8cf932415a9e6bfc09179adf3e","2009-04-16 09:27:02+00:00","SCUMM: Got rid of o6_invalid

svn-id: r39957
"
"cbe9e520d3b2b515428d33a4da8726e1a2dd82f1","2009-04-16 09:27:22+00:00","SCUMM: Compacted various setupOpcodes() implementations by using the fact that opcode tables tend not to change much between most SCUMM versions

svn-id: r39958
"
"9a23f069feba73a2b366bfec3ed6b9bf59904486","2009-04-16 10:28:12+00:00","Tiny update to the GP2X readme on branch (remove SVN build ref.).

svn-id: r39959
"
"08eb58aab8c3c368129107a47f64755abb85e704","2009-04-16 10:40:14+00:00","Push local cleanup into the 0.13 branch in prep. for 0.13.1.

svn-id: r39960
"
"52fa15561a282d6ac7b1a6e34312482d40de6b67","2009-04-16 11:19:44+00:00","Backout previous 'ooops' change (while shaking a stick at SVN and trying to convince people (badly) that is was not just simple user error ;-)).

svn-id: r39961
"
"3deae9fc8b34fbcfed3c7fa7c99c1cb6491a05d3","2009-04-16 12:31:17+00:00","Add HACK to support DOS music in Kyra1 Mac CD based on patch #2767489 'KYRA1: Support for Mac CD'.

svn-id: r39962
"
"5cd22613822797a7405ae60c35a7ccae4196b9b1","2009-04-18 03:15:34+00:00","We probably only have to update the screen once every updateInfo(). And, since
it's triggered by mouse movements, only when the cursor is visible.

svn-id: r39975
"
"0b2e06e4a4225a6ede1be4e9f6c09fe2cd4caf16","2009-04-18 08:37:22+00:00","sword2: add support for BS2 PSX demo

svn-id: r39977
"
"15252ad83c49c0246fabb24856c02fb6bb81ced5","2009-04-18 10:16:08+00:00","Added support for the global menu save/loading, and changed the savegame format to store the savegame name and thumbnail

svn-id: r39979
"
"9efb96ce6957c4a22e1c0754fcb2857c12817119","2009-04-18 11:20:05+00:00","Changed the 'Exit' game menu option to exit gracefully, rather than using exit()

svn-id: r39980
"
"f53b4d3de4ce1676ca79630c26ae9557ef70b9b5","2009-04-18 12:03:21+00:00","Implemented the 'Start Again' menu option to properly restart the game

svn-id: r39981
"
"741548cda66133e595852eb8776738684214f221","2009-04-18 13:52:30+00:00","iPhone: Updated input event system to firmware 2.x standard

svn-id: r39984
"
"213c3eb143f1d5bccb8864bc369728893a6c1a92","2009-04-18 14:04:44+00:00","Fixed a crash happening when an engine dirtied the full screen, and called initSize() before calling updateScreen (fixes bug 418820, specifically about Lost in Time crashing after the title screen)

svn-id: r39985
"
"e246c0d94f28372a2e90b2d6280d4a98f90b04e4","2009-04-18 21:12:32+00:00","Patch #2761396: 'Typo fixes to README and comments'

svn-id: r39993
"
"8c60930aaa0c4cc8b2ee55d0465c2918a68acf8c","2009-04-18 21:18:23+00:00","Part of patch #2738575: 'GSOC09: Upd copyright add about line, fix MSVC warnings'

svn-id: r39995
"
"e1c82543fcaae786d2c6d7588338b92810af01d6","2009-04-18 21:18:30+00:00","Retreive -> retrieve

svn-id: r39996
"
"e2394f3a55faec38335820fa8e2f09b8ff75c63d","2009-04-18 21:23:23+00:00","Setting 0.13.1 release date

svn-id: r39999
"
"5d9b095a9f1aa178118a3b0b51808cadc6d84262","2009-04-18 21:23:45+00:00","Add TODO.

svn-id: r40000
"
"2870b81d557eea4fa5cb68cd30da3e15506abaf2","2009-04-18 21:24:13+00:00","40000 commit

svn-id: r40001
"
"d093d141ff8390482fc5fc6758aa20ce93b57159","2009-04-18 21:28:30+00:00","Fix outdated comments

svn-id: r40003
"
"812c7452351e8e6789e81fea71827b50087f3bec","2009-04-18 22:56:08+00:00","Disable MSVC warning in autogenerated code

svn-id: r40005
"
"514c2be4a90f9d2fc2f197c5006f565d96252073","2009-04-18 23:34:28+00:00","Add patch #2769163 - Mac additions for Freddi Fish 1 and Putt-Putt Parade.

svn-id: r40006
"
"56a31019b7fad58454061e05ec8209d60714597f","2009-04-19 00:59:28+00:00","SCUMM: Added stubs for V3 & V4 opcode tables

svn-id: r40007
"
"9655fa831e74bbce015a8d7c03790df78c9d911a","2009-04-19 00:59:50+00:00","SCUMM: Turned PARAM_1,2,3 into an enum; minor tweaks

svn-id: r40008
"
"b32e9f00b0ba73e26ca170c20dc20832807d1930","2009-04-19 01:00:11+00:00","SCUMM: MovedScummEngine_v5:: o5_pickupObjectOld to ScummEngine_v4::o4_pickupObject

svn-id: r40009
"
"31eeb37107031d36073f6fed460f2ab5ea159da1","2009-04-19 01:00:31+00:00","SCUMM: Moved ScummEngine_v2::o2_setBoxFlags to ScummEngine_v3::o3_setBoxFlags

svn-id: r40010
"
"25d0e7d4bc5c0d4bedb49381fc3eec9edbd9c354","2009-04-19 01:00:49+00:00","SCUMM: In v5, only opcodes 0x05 and 0x85 are mapped to o5_drawObject; in v3 & v4, several other opcodes map to it. Capture this properly in the opcode tables

svn-id: r40011
"
"57c624b24da7ffe65bd82f008e612fc18404fb6d","2009-04-19 01:01:09+00:00","SCUMM:  ScummEngine_v5::o5_oldRoomEffect -> ScummEngine_v4::o4_oldRoomEffect

svn-id: r40012
"
"0e82403daa80424fb9c6089632f7dcfd9015689d","2009-04-19 01:01:28+00:00","SCUMM: o5_ifNotState and o5_ifState are actually not part of v5, only in v3 & v4 -> renamed and moved them accordingly

svn-id: r40013
"
"3044593da01c055ad274b2ae552b8a285ce4fdb0","2009-04-19 01:01:54+00:00","SCUMM: Moved o5_saveLoadGame and o5_saveLoadVars to ScummEngine_v4 (the highest SCUMM version to implement these opcodes. Actually, our code was bugged in so far as we only ever invoked o5_saveLoadGame in V3 games, never in V4 games (but this properly never mattered ;)

svn-id: r40014
"
"d30033fc0499491487a872fd8a99738f781a9541","2009-04-19 01:28:27+00:00","Fix possible overwriting of sound data in earlier games, and cleanup.

svn-id: r40015
"
"bedd33ef792cad47b9230ff83a13edc8cc1d13a5","2009-04-19 10:28:00+00:00","Updated Mac OS X and iPhone bundle creation a bit (copying in more docs, and removed the version name from the mounted volume directory to avoid manually updating the DS_Store file every release)

svn-id: r40018
"
"b238d0de008a114cacc7fe1ae0f79df1ff475062","2009-04-19 13:49:59+00:00","VAR_VIDEMODE value 50 is only used by the Macintosh version of Indiana Jones and the Last Crusade.

svn-id: r40020
"
"199ca291ee8936f978d13f79ac20f89cb9ae13bd","2009-04-19 13:52:05+00:00","tinsel: adding (disabled) detector entry for Discworld 1 PSX UK version

svn-id: r40021
"
"56e50ed97880d8c342a03afd7b9c678601d0935f","2009-04-19 18:27:11+00:00","Add Broken Sword 2 PSX support into NEWS file

svn-id: r40022
"
"e15dd070f8bf38c9a2d209f3f554d4db689b9f91","2009-04-20 05:19:42+00:00","Fix sound effects regression in Waxworks.

svn-id: r40023
"
"4cf0f0a9a50f6a87a9a769c51f7a7958c13844a7","2009-04-20 10:07:18+00:00","Enable the arrow keys in Elvira 1/2.

svn-id: r40024
"
"6a7bb77305dc280e6af2afb4beb5cc06ca6350b8","2009-04-20 12:35:17+00:00","SCUMM: Introduced new method ScummEngine_v5::jumpRelative; unified some v0 and v2 opcodes

svn-id: r40025
"
"faa911794953679a1fff24999878f79612dfc7f3","2009-04-20 19:26:50+00:00","TESTS: Code formatting; also changed some  TS_ASSERT to TS_ASSERT_EQUALS

svn-id: r40026
"
"78cf5a4ccfe4e36f33230bb196aad34eb3cf89f7","2009-04-20 19:27:11+00:00","COMMON & TESTS: Added new constructor to Array<T>, namely Array(const T* data, int n), which makes it possible to clone a regular array into a Common::Array; added a unit test for that and slightly extended existing Common::Array unit tests

svn-id: r40027
"
"a64b49c73b94f5a7703805d4add9369722bfb663","2009-04-20 19:27:32+00:00","SCI: Mapped BREAKPOINT macro to error() for now

svn-id: r40028
"
"0f2ffdf456295fe9d79c3bfb9810ceac024a295e","2009-04-20 19:27:50+00:00","SCI: cleanup

svn-id: r40029
"
"d56748281876b7e1997ecbfbc084a7bb1bd5c841","2009-04-20 19:28:08+00:00","SCI: Moved list of kernel func declarations to header file, where it belongs

svn-id: r40030
"
"5325f9b76e0c84ee99743f4f5d5fc78da7b20042","2009-04-20 19:28:33+00:00","SCI: Renamed global array 'formats' to the slightly more descriptive g_opcode_formats

svn-id: r40031
"
"3eab407cd58103e5246e47b7945f9b5428e3558c","2009-04-20 19:28:55+00:00","SCI: Replaced memory ref counting code in the SongIterator code by a simple Common::Array<byte> object; also doxygenified some source comments

svn-id: r40032
"
"acc86f5c62b12345c15a9fe9c79aee1d17736ae1","2009-04-21 04:42:45+00:00","Fix regression in SCUMM0, by calling ScummEngine::fetchScriptWord() directly. Since fetchScriptWordSigned(), still uses the overloaded fetchScriptWord() function.

svn-id: r40033
"
"64fef497dfae0dd5cf96d7b57ab2313525404b12","2009-04-21 04:48:50+00:00","Ooops, keep that comment.

svn-id: r40034
"
"dadcc3289f76da1cd6a6ca7f80e781ea69b0a6be","2009-04-21 10:50:30+00:00","run psp-fixup-imports after linking

svn-id: r40037
"
"b01e82488d6c3252621bb64389df9a996581c9da","2009-04-21 11:26:19+00:00","Fix for Kyra 1 Mac CD music (check bug report #2772727 'KYRA1: Sound effect loops continuously (Mac CD)').

svn-id: r40039
"
"5e1ee4914898e3bde1dee20c5dfe70cab77a8a11","2009-04-21 11:32:10+00:00","Mark PC98 CD version as CD version (like it is already done with FM-Towns).

svn-id: r40040
"
"7ed4419c01b9996604b4146964a07cea5e424919","2009-04-21 11:41:00+00:00","Remove ADGF_CD flag from Towns detection entries.

svn-id: r40041
"
"9d8d3fdb2f2a7424d9d33fa7b255ccb141f340e5","2009-04-21 13:41:29+00:00","Patch #2776913: Fix MSVC dists to include new necessary files

svn-id: r40047
"
"319a4f8aa92a3ff8fb31c9c82bb418abd45464a6","2009-04-21 14:01:43+00:00","Add work around for bug in English 4CD version of The Feeble Files.

svn-id: r40048
"
"7caad280d1c58bdb7acc502c4526a0c8fb0d223e","2009-04-21 17:02:09+00:00","COMMON: Removed copy constructors / assignment operators in cases where they are identical to the automatically generated ones. Also removed a pointless 'explicit'

svn-id: r40049
"
"4050d0eea7b5d11e6619c3449a0f13bc335fbe72","2009-04-21 17:02:21+00:00","Patch #2737410: GSOC09: Punctuation fix

svn-id: r40050
"
"283788ec4e39018ce10909d4b9f543025103bf5c","2009-04-21 17:02:34+00:00","Patch #2709976: GSOC09: README fix

svn-id: r40051
"
"1453f1849b254d7e68675d0ff3da990b5749f82b","2009-04-21 19:14:11+00:00","Fix warnings (patch for array.h was supplied via salty-horse on IRC).

svn-id: r40054
"
"c48159aa63d9e60cef41e7b4d1cfa188a7b5277f","2009-04-21 19:17:39+00:00","Removed per-picture port bounds, which were set to the global port bounds

svn-id: r40055
"
"e93de28aa4bbf1d98d3bc1dab33dacb3d1abed2f","2009-04-21 19:49:47+00:00","- Typo fixes
- Command line parameter updates
(Thanks to salty-horse for the patch)

svn-id: r40056
"
"20cc4f3dd772a493a61038d1d1b22be87984a7bd","2009-04-21 19:57:11+00:00","Restored the ability to change the active port bound, by moving it inside gfx_state_t (it makes much more sense for it to be there, instead of inside user-defined settings). Placed notes inside gfxr_draw_pic01() and gfxr_draw_pic11() for the usage of the current titlebar size in there

svn-id: r40057
"
"3c580662063b91e1a81468a441261d608381fc3d","2009-04-21 21:37:03+00:00","- Fixed some of the GUI graphical glitches in SCI1 games (e.g. the inventory screen in several SCI1 games and the menus in PQ3). It's still not right, but it's better than nothing
- Removed the confusing ADD_TO_CURRENT_BG_WIDGETS and ADD_TO_CURRENT_FG_WIDGETS defines, which had the same functionality

svn-id: r40058
"
"ee929136835a98a108073965315dd87028ed3f12","2009-04-21 21:44:37+00:00","Patch #2725859 : Added some MD5 to the gob engine, modified the way the first STK and TOT is declared, added inter and draw skeleton for Fascination

svn-id: r40059
"
"bffc442beeadc218387e86c379959ce6d42b9991","2009-04-21 22:59:37+00:00","Updated some of the detector entries for KQ5

svn-id: r40060
"
"6206ea92bb8f194eec3db85a964018b2f76a16f0","2009-04-21 23:03:12+00:00","Updated the MSVC project files of the gob engine

svn-id: r40061
"
"ad1f7385df43929f4ea0a2610ae4525aa9d62600","2009-04-22 03:46:49+00:00","Fixed compilation.

svn-id: r40062
"
"d6247fa0e00aa2027c2f03b9863989144a20507b","2009-04-22 10:19:10+00:00","Fix crash that occurs when OmniTV video is played completely, in The Feeble Files.

svn-id: r40063
"
"3591548003bb3df122c7ed840fb0afe78b9c3bec","2009-04-22 12:44:58+00:00","Sync.

svn-id: r40075
"
"ab05e797157890f4f33c9b9e98c84174bd9bec22","2009-04-22 12:57:23+00:00","AGOS: Merged timerCallback and timerProc; removed checkTimerCallback declaration without implementation

svn-id: r40076
"
"b98f79fe120f3859cace579d21731f137376d5fb","2009-04-22 17:52:56+00:00","COMMON: changed class StringList to a simple typedef; enhanced the Common::Array constructor which converts regular arrays to Array objects to be more flexible in its type (allows e.g. to assign an array of char* to a StringList

svn-id: r40077
"
"b1e43f3ca0d4830bd87a99334dc127e9d20555b1","2009-04-22 17:53:29+00:00","SCI: Changed knames (kernel function name table) to Common::StringList

svn-id: r40078
"
"7a71fd35aeede3bd1f262e5d0b229235a36a2aeb","2009-04-22 17:53:46+00:00","SCI: getInt -> READ_LE_UINT16

svn-id: r40079
"
"3af8918e1a0888d46df13eff088104dce4c88974","2009-04-22 17:54:11+00:00","SCI: Changed kfunct_table to a Common::Array

svn-id: r40080
"
"3774b9cd0c6e45bc77a6f4c55a4c3aa25bcdd4b1","2009-04-22 17:54:30+00:00","SCI: Slim down struct SciKernelFunction

svn-id: r40081
"
"17a92f6a70ab0ba18f31c79ec870ba72b95d87a3","2009-04-22 20:08:59+00:00","Cleanup

svn-id: r40082
"
"0638a8a27a20927878c87f3aa479fae7c25d3a59","2009-04-22 20:18:12+00:00","Renamed some variables and parameters to match their real use.

svn-id: r40083
"
"e7506eb99e9e9008a53013c1ee805d1aaf3e546a","2009-04-22 20:51:33+00:00","Rename adlib_read to adlib_get_reg_value, since it return the (cached) register value, which can not be achieved by read AdLib read.

svn-id: r40084
"
"63fb936667825615fda65e3b65793478625b378d","2009-04-22 21:14:59+00:00","Fix typo in special case gcc version detection

svn-id: r40085
"
"33180805aded60535a5be7b16a2bff8a2d8aff1b","2009-04-23 15:29:34+00:00","tinsel: Enable Discworld PSX detection and begin adding some function to support Discworld PSX graphics

svn-id: r40090
"
"a016ed90ba814541af587cb185c0844164e16941","2009-04-23 16:17:22+00:00","tinsel: start wiring some Discworld PSX graphical functions into engine

svn-id: r40091
"
"bd2c2b0e500bfa46077978d42e8a8c9e38582f4c","2009-04-23 18:17:35+00:00","WIP code for kGetMessage (tested with Eco Quest 1). Currently, it doesn't always work for some reason...

svn-id: r40092
"
"efc28c1be6b344a72cd1011a20ba2924515de334","2009-04-23 18:46:41+00:00","Fixed the GetMessage kernel opcode. Eco Quest 1 text is showing up correctly now

svn-id: r40093
"
"001699becbe2d8e6124051ac588095acca385d01","2009-04-23 19:11:01+00:00","Removed a FIXME concerning CanBeHere and CantBeHere and added an explanation. Also, removed some unused code.

svn-id: r40094
"
"78f892f87c03603d635d1ccef9c0febc214be5d9","2009-04-23 20:37:41+00:00","The mouse cursor is now working in Eco Quest 1, though the hotspot is still wrong. Many thanks to waltervn for his findings on this.

svn-id: r40095
"
"f2bd65339c7825b7208ef5840333bca7e1ae0ca0","2009-04-23 21:06:34+00:00","Changed the 'Intersections' opcode to 'MoveCursor', after verifying it with Greg's SCI implementation and discussing it with waltervn. Also, the cursor hotspot is now fixed for Eco Quest 1 and probably SCI11 games as well (e.g. the game menu in KQ6 is now working)

svn-id: r40096
"
"457acf5e427a7dfaa0c8d6a44ebb2c6cc6c0404e","2009-04-23 22:22:46+00:00","Fixed a very stupid error in the RLE decoding function of the VMD frame decoder

svn-id: r40097
"
"d22aeae5fc64a05ade74e06e78084ee1d8ad2464","2009-04-24 10:07:34+00:00","Fix pausing during video play back.

svn-id: r40098
"
"7b11ef429edde1d0b5b85063019bf7b0dfcc8bd4","2009-04-24 10:11:58+00:00","Minor cleanup.

svn-id: r40099
"
"486f10edaf813e19ce55812f7ab75e0b6d349fb6","2009-04-24 10:42:53+00:00","SCI: Store parse_tree_branch_t in a Common::Arraay

svn-id: r40100
"
"eb0710c2cd50b3ca0f156641109c503ac740a54f","2009-04-24 10:43:42+00:00","SCI: Some const corrections, removed dead stuff, cleanup

svn-id: r40101
"
"6fef323ec7bd028107118a01030844e019372dd3","2009-04-24 10:44:10+00:00","SCI: Changed GFXERROR to be fatal

svn-id: r40102
"
"86b36574767f0ab43e9e1f25dbe611ab7b35bf78","2009-04-24 10:45:09+00:00","SCI: Started to C++ify the gfxw_widget_t codebase

svn-id: r40103
"
"9445439c4ff745ef90c38403d82035abadf87ef2","2009-04-24 10:46:20+00:00","SCI: Renamed gfxw_widget_t and subtypes to GfxWidget etc.

svn-id: r40104
"
"22a803cc692a8040770806b2d0a27e1b2693e289","2009-04-24 10:46:46+00:00","SCI: Rewrote the port_refs code (fixing at least three serious bugs in it. Wow, crappy)

svn-id: r40105
"
"80794a6b5aa02be8a8c0e7879c5e3f48ee8a2646","2009-04-24 10:47:38+00:00","SCI: font_nr -> _font

svn-id: r40106
"
"ebcfd9b016da9969377c2847ca8033f498a13792","2009-04-24 10:48:25+00:00","SCI: Got rid of GFXW() macro; turned GfxWidget::widfree into destructors

svn-id: r40107
"
"6343b2eee059ff43c6f7849fb45ef72b33b4bf9d","2009-04-24 10:48:51+00:00","SCI: Changed GfxWidget::set_visual function pointer to virtual method setVisual

svn-id: r40108
"
"df81ef750c819a483514f423599366c155057b90","2009-04-24 11:54:10+00:00","tinsel: added Discworld PSX palette converting function

svn-id: r40109
"
"c0805599ca3627ce0ed23dd00171a0b422bdefb7","2009-04-24 12:30:57+00:00","SCI: Fixed mouse cursor hotspots in ECO1.

svn-id: r40110
"
"2f453cf852ff3f592c8569b8bbd60df4ef47f300","2009-04-24 13:59:21+00:00","Fix regression in handling of keyboard keys.

svn-id: r40111
"
"78213397429af712d19ffac7d5f2ff8b3ebd3e72","2009-04-24 14:20:01+00:00","SCI: Doxygenified some comments

svn-id: r40112
"
"dadae135458e2e7028e328fbf9511b8742220f28","2009-04-24 14:20:31+00:00","SCI: Turned GfxWidget::print function pointer into virtual method

svn-id: r40113
"
"bd9a44969f6fe32b6f11f9451b10e314db4ee53d","2009-04-24 14:21:16+00:00","SCI: Turned GfxWidget::tag function pointer into virtual method

svn-id: r40114
"
"6f60e0dd48aea56c47af0b682ab9ddcc4fcc570b","2009-04-24 14:22:14+00:00","SCI: Turned GfxWidget::draw function pointer into virtual method

svn-id: r40115
"
"8d3cb3bd5f60895fe41bb515b3106d19959b98cf","2009-04-24 14:30:27+00:00","SCI: Fix transparency in view-based mouse cursors.

svn-id: r40116
"
"db8b3cef617038c2f83a382285ba0b6300ecc257","2009-04-24 14:50:01+00:00","SCI: Fix signature of kPalette().

svn-id: r40117
"
"d7180316ddeb81fac528424233f843ea788106b4","2009-04-24 15:13:04+00:00","SCI: Fix sci_max_allowed_unknown_kernel_functions[], it was missing an entry.

svn-id: r40118
"
"10caf646189307ada4eb2070fd31e68d4d18dc83","2009-04-24 15:14:26+00:00","tinsel: begin modifying drawing function to support psx 4-bit cluts

svn-id: r40119
"
"ea7b19874847fd139095901f0c2d06786c86cfa1","2009-04-24 16:47:56+00:00","Merged kSetCursor and kSetCursorNew, and changed KQ5 CD to use the newer kSetCursor version

svn-id: r40120
"
"7d4618d1657a498944397b9b6db7ad77c9dc79fe","2009-04-24 17:19:20+00:00","Fixed typo.

svn-id: r40121
"
"893a3fc7e2cc1032a3899fb0947f1878e2ee336c","2009-04-24 18:23:17+00:00","Added support for SCN-based non-interactive demos

svn-id: r40122
"
"3b40c5fbd88870f387d1d19d671b357621513a77","2009-04-24 18:23:31+00:00","Added the Woodruff and Playtoons non-interactive demos

svn-id: r40123
"
"1c2021caa140542d7ac1fdebd42188152cb6d345","2009-04-24 18:38:40+00:00","Changed an error to a warning, to make Longbow playable again

svn-id: r40124
"
"de9f2a2b5a64b81bbac05f55318bedd971ce3a15","2009-04-24 18:40:15+00:00","Updated the MSVC project files of the gob engine for commit #40122

svn-id: r40125
"
"8baccf8d6458c058b43611816c0cccdd727870d1","2009-04-24 19:00:55+00:00","Adding support for the non-interactive SCN-based Urban Runner demo. No image though :/

svn-id: r40126
"
"beee12a520acf85d70d7016061a62542804911b7","2009-04-24 20:09:52+00:00","Long messages in Eco Quest 1 are now shown correctly

svn-id: r40127
"
"d8972c3f2cc9a28e750dcaee38d6cf84380d95eb","2009-04-24 21:30:40+00:00","The video now works correctly in the non-interactive Urban Runner demo

svn-id: r40128
"
"383a2b332226acdd8eb69535837965bb723bfc68","2009-04-24 22:29:17+00:00","Added supported for BAT-based non-interactive demos, namely the Inca2 one

svn-id: r40129
"
"2d64d45275df4e32c3dba4d8892630cc33fdfd06","2009-04-24 22:49:20+00:00","Gob - Add 12 dummy functions used for the OpcodeGoblinEntryFascination.

svn-id: r40130
"
"6ed9adab929ee6591d418b45acddfe94173b3f3f","2009-04-24 22:50:24+00:00","Gob - Add entries for different Little Red Riding Hood languages selection

svn-id: r40131
"
"204174180d6a29ae07f44e527d6044efc7f0915d","2009-04-24 23:05:08+00:00","SCI: Initialize pixmap to transparency before decoding cel RLE data. This
fixes some of the views in KQ6.

svn-id: r40132
"
"6411c84b3166c4dcbdf3d33f298c956a3ab8576d","2009-04-24 23:26:57+00:00","Removing the extra \n in warning()s. warning() already adds '!\n'

svn-id: r40133
"
"f9c433353da884fdb20f37654a6c396b1f183cea","2009-04-24 23:31:10+00:00","Ooops, changing a const argument is evil, copying it now

svn-id: r40134
"
"951edc014a28d4d3f4d4ba7cebf5167f463c96f0","2009-04-24 23:43:04+00:00","Added a workaround for the inca2 demo's cons2.imd / cons.imd mix-up

svn-id: r40135
"
"15eac04bd35593871bd9054f138388dcdf4d47fd","2009-04-25 00:01:53+00:00","Complete general function 0 and 1 based on DrMcCoy suggestion (Hardcoded IMD loading and playing)

svn-id: r40136
"
"e575683c65ff9f03290b48d02e12a567f794568c","2009-04-25 00:07:30+00:00","MSVC project files for Gob : Add demoplayer and batplayer needed to compile

svn-id: r40137
"
"8601e5af13d2a7cce90b8c3aa90dad87ddd45e5b","2009-04-25 00:28:40+00:00","svn-id: r40138
"
"fa191f251a4975143fa2b69aee290ee195003f47","2009-04-25 00:38:59+00:00","Gob Compilation - last fix ... (mixed up 7.1 and 7.0)

svn-id: r40139
"
"d594211ab3fe8782dc1f01e8a8730f109dfa5a92","2009-04-25 06:36:20+00:00","Bugfix to the coroutine handling in CdDoChange

svn-id: r40140
"
"86debbd679d20f1188d2ba015e9d108cbbc85f1a","2009-04-25 06:42:01+00:00","Added code to enable Discworld 2 to play directly from the CD (only the first CD - Cd swap still doesn't work) or from files copied to the hard disk without the .smp/txt/idx files being properly renamed (again only for the first Cd).

svn-id: r40141
"
"f1893d8f25b8f4fc5f6ed48e61dec0c2050bd567","2009-04-25 08:50:42+00:00","WIP (still non-working) code for speech sync in CD talkie games (like e.g. KQ5 CD and SQ4 CD), taken from Greg's SCI implementation.

svn-id: r40142
"
"ccb64ad81e6c56eaa2350197f964d470d8610ed9","2009-04-25 13:15:05+00:00","LOL: - Started implementing the fighting system. The damage inflicted is wrong, however (at least the damage inflicted by the monsters). I'm sowewhat clueless about that bug atm.
- added support for monsters with distance attacks (like those orcs in front of roland's house)
- lots of small bug fixes
- Some startup support for the pc-98 16 color version. The intro will run, but the font drawing/coloring is still wrong.

svn-id: r40144
"
"ca3195b1adccc91fbaff7be04f312ac814de1ae7","2009-04-25 13:58:54+00:00","Fixed warning.

svn-id: r40145
"
"bac2239709d558b05b70624bf415b1fbeab62ed8","2009-04-25 17:58:23+00:00","Fascination
- Squeeze _goblinFuncLookUp and OpcodeGoblinEntryFascination to the max to spare memory
- Added Amiga-only geUnknown1000-2 functions. At this point, they are not unknown, but hang the Protracker player
- Modify some few comments and variable/function names

svn-id: r40146
"
"dfd02452739858c7bfd56d28f5b136f6c3aca9ff","2009-04-25 23:31:03+00:00","SCI: DoSync should work now, but the lip-syncing mechanism also needs DoAudio
(currently stubbed), so it hasn't been tested yet.
so it hasn't been tested yet.

svn-id: r40147
"
"97f3277f8f7feed441b7aede7cc8b4efe1375efb","2009-04-25 23:42:47+00:00","The 'attacker' parameter is an unsigned integer, so we can't pass a negative number to it (hopefully this doesn't break anything)

svn-id: r40148
"
"9af7d48a04ab8307e20543557717ba130dc37bf5","2009-04-25 23:57:26+00:00","Changed the attacker parameter from 0 to 0xFFFF in inflictDamage() (which was probably the original intended value) and added a FIXME

svn-id: r40149
"
"5eb4bdce66357b01414faba7a5cfccc9c9a3fd7e","2009-04-26 02:00:36+00:00","Added all the different cases of kDoAudio as enums

svn-id: r40150
"
"b45f2e21fa87fcaade9f2ac083effe150294ef79","2009-04-26 10:25:41+00:00","tinsel: changed PSX CLUT converter to report effective number of colours used in the palette

svn-id: r40151
"
"ed87cbab9080fa80beddc1edb3b45fdd43443216","2009-04-26 19:40:50+00:00","Ooops, actually delete[] the correct pointer (yeah, syke, I should have valgrind'd it again ;))

svn-id: r40153
"
"84f0e1d986c5b650f3d91e1ef1be4039694e64f6","2009-04-27 11:11:42+00:00","COMMON: Added Common::List::front() and back() method (similar to std::list)

svn-id: r40154
"
"b73301748ad6f393d04c68dde1e0c74501299bea","2009-04-27 11:12:08+00:00","SCI: Renamed gfx_state_t -> GfxState

svn-id: r40155
"
"356288ce8d826204e629a452ad1edc1b845d116c","2009-04-27 11:12:25+00:00","SCI: Rewrote dirty rect code to use Common::List

svn-id: r40156
"
"4fa4513d61bca2a6f547c93b59d7c00af24b28bf","2009-04-27 12:19:21+00:00","Added a German Urban Runner version, as supplied by goodoldgeorg in bug report #2770340

svn-id: r40157
"
"3817fbf7d05b7f4f79640681a7a3b01b0e338343","2009-04-27 12:21:14+00:00","Fixed a method name clash, and changed the Restart dialog to properly use the renamed method, rather than just setting the global variable directly

svn-id: r40158
"
"5881abb213449ad8ac169c4dea729b7e7bca535f","2009-04-27 12:29:51+00:00","SCI: Removed unused vars; doxygenified some comments; cleanup

svn-id: r40159
"
"462e3bd49da49efd2bbee611467e8940c6e41177","2009-04-27 12:30:42+00:00","COMMON: Added Functor2Fun; fixed some typos

svn-id: r40160
"
"b5e9d79e157d4460f4b9038d19bfc31cf279c5f0","2009-04-27 12:31:27+00:00","SCI: Turned classtable into a Common::Array<Class>

svn-id: r40161
"
"6322478508e4a2a412efdb819b38d54c067cbbb6","2009-04-27 14:21:39+00:00","SCI: renamed gfx_text_handle_t -> TextHandle; changed some string code to use Common::String

svn-id: r40162
"
"e579f91b5c1b0949954037acf5bb4b364bfeb2b5","2009-04-27 14:23:20+00:00","COMMON: Made sure Common::List and Common::array each have all  front/back/push_back/push_front, as have their STL counterparts

svn-id: r40163
"
"7f20f3bb3e30c9b9cb78ea1f9033677d30c00a04","2009-04-27 14:25:16+00:00","COMMON: Improved efficiency of some Common::List methods; added more unit tests and some doxygen comments for Common::List and Common::Array

svn-id: r40164
"
"f177c7142c996fbeed564fe06316f5bc6f6b6914","2009-04-27 14:40:14+00:00","Fixed some silly warnings

svn-id: r40165
"
"c88b077fcc9f8f06b36f882285f14e0fe7a8a5a6","2009-04-27 18:56:28+00:00","Some minor clean-up

svn-id: r40166
"
"6e566a9b1ed14d63497686ad1f61fb4192c0c8f9","2009-04-27 19:38:28+00:00","LOL: added some drawing code and fixed some bugs

svn-id: r40167
"
"80a331423f68a76232a9a4163b1a6fea352d1a4b","2009-04-28 08:29:58+00:00","Added some more non-interactive Playtoons demos (thanks jvprat!)

svn-id: r40169
"
"f4c294a613499b4938e8c40344f0a29131795a1f","2009-04-28 08:31:34+00:00","Added a small safeguard to play()

svn-id: r40170
"
"9a971c7d80e7ef79a0a2a2d1ba99b385ff50c083","2009-04-28 10:23:08+00:00","fixed a typo

svn-id: r40171
"
"f52a0df4223ec7d2524c273d403f12b155768d7a","2009-04-28 10:23:26+00:00","COMMON: Made Common::List::clear more efficient

svn-id: r40172
"
"70d181b838b092d23db9ac7ecdb8bf154518ed01","2009-04-28 10:23:44+00:00","Added a phrase to the 'report bugs' section in the README, asking people to file each issue separately

svn-id: r40173
"
"d82f49a9e41d47584d997550a2c42fd38a9c132d","2009-04-28 11:18:43+00:00","The Playtoons game seem to be more like Last Dynasty than Urban Runner (paletted video mode)

svn-id: r40174
"
"19bd929a5d84aa057da397a882ed2208fd9776e3","2009-04-28 12:23:52+00:00","* Disk code cleanup.
* Added ability to load in-game menu graphics.

svn-id: r40175
"
"9108871833313f88b2f10aa5c5998fa3fb23e008","2009-04-28 12:25:41+00:00","Added in-game menu for BRA. Load/save is not supported yet.

svn-id: r40176
"
"e6a7b8ef343f7e4fd2637500afe800794fe03a78","2009-04-28 12:32:59+00:00","SCI: Renamed text_fragment_t -> TextFragment and changed TextHandle to store the text fragments and pixmaps in Common::Arrays

svn-id: r40178
"
"7cfa3bb6d905b429d82ef0ead88354209a1f53a5","2009-04-28 12:33:38+00:00","SAGA: Moved some code from actor.h to actor.cpp; replaced Actor::_pathDirectionList and related members by a Common::Array<PathDirectionData> inside Actor::fillPathArray()

svn-id: r40179
"
"a4cb413d7038be2780271fedb39f2505177fdc6f","2009-04-28 12:33:59+00:00","SAGA: turned Actor::_pathNodeList into a Common::Array<PathNode>; likewise for Actor::_newPathNodeList which also turned from a member var into a function local var

svn-id: r40180
"
"01fceec37c83ba855ed60b284d47c7e6a84d2f1d","2009-04-28 15:00:56+00:00","Implemented quit dialog box in BRA.

svn-id: r40181
"
"294bd0dc071d0e38719de1c1260ad30be8199618","2009-04-28 15:58:19+00:00","SCI: Renamed execution_stack -> _executionStack and turned it into a Common::Array

svn-id: r40182
"
"36fcc55c06042a2b35b93f8bb4b2f73fbb19a223","2009-04-28 15:59:40+00:00","SCI: Removed the evil macros in engine/heapmgr.h, by manually instantiating them where used (this enables us to further modify the code later one)

svn-id: r40183
"
"6ca348c9d0154ca52e2371fd62ae425c1e0a5572","2009-04-28 16:00:59+00:00","SCI: Further restructured the SegManager heap tables

svn-id: r40184
"
"bc3dcd468a3ba785fe0caaa6f29fe7df24360341","2009-04-28 18:13:24+00:00","Set ADGF_DEMO flag for kyra2 seq player based LoL demo.

svn-id: r40186
"
"7661d82ace55e1795587ec305cc486c304267535","2009-04-28 18:56:54+00:00","Some code for the intro only LoL demo. It is disabled currently though.

svn-id: r40187
"
"c69208c0dac1f4996fcd8f53def81dc073217c71","2009-04-28 22:03:00+00:00","Added a Spanish Urban Runner

svn-id: r40188
"
"d62b4c62c4521b21067289ff879ef8cb1f85bba3","2009-04-28 22:04:03+00:00","Reorder :P

svn-id: r40189
"
"ed914d6740fda4ea057c23ef8d2ae51dc93df033","2009-04-28 22:56:44+00:00","SCI: Improved the Table template a bit by taking advantage of C++ features

svn-id: r40190
"
"9a78f6ef41b30e28973551ebc9c19bbc1ac1d8dd","2009-04-29 05:30:58+00:00","* Refactored existing save/load code to ease extension
* Added load/save dialogs using ScummVM's overlay for the moment (no actual saving is performed yet)
* Plugged the main menu so that it displays the load dialog when needed.

svn-id: r40191
"
"6b962cda4e97158a7eeeafd399e042feeb7f7053","2009-04-29 05:41:44+00:00","Add support for unpacked data files, in the PC version of PN.

svn-id: r40192
"
"804cd38c8310d9a7e8f4dd610b2c68157e672c18","2009-04-29 05:47:10+00:00","Enable music and sound effects in BRA, by default.

svn-id: r40193
"
"a8cccd0ced0275ff4bdd1ad868cdb5491e86a581","2009-04-29 07:33:01+00:00","Removed obsolete TODO.

svn-id: r40194
"
"eaf22dc66c86aaa020569a510439cbf2e49e61d4","2009-04-29 10:24:00+00:00","Decreased the dithering LUT's depth to 5 bit per color component.
The results still good and generating it is fast enough to do at each start (so we don't need to save it anymore)

svn-id: r40195
"
"4a2e5bb79356b7f3433d548ea03a0a00a464f3ad","2009-04-29 10:37:00+00:00","Re-introduced the ability to skip the title scenes in Discworld 1. Since the exact scene numbers differed between language versions, this new version simply relies on skipping the first four screens - hopefully, none of the various versions will have any extra title screens.

svn-id: r40196
"
"4f9ea1c920390bfe4e24012b5718a860cf4c3c03","2009-04-29 11:31:59+00:00","Fix out of bounds array access (as reported by DrMcCoy).

svn-id: r40197
"
"7dbfb326cc0bf6fa8ba417e57ae5b7de1db0069c","2009-04-29 11:33:43+00:00","Fixed dword alignment warning (as reported by salty-horse)

svn-id: r40198
"
"c0cce2a52f1f7cb0548b1061fdbd1c659a0c9f87","2009-04-29 11:34:23+00:00","Cleanup.

svn-id: r40199
"
"9c560ed94b5089abb31ca6984702809b54a9b47a","2009-04-29 11:50:13+00:00","Cleanup.

svn-id: r40200
"
"eade2fdb44f4ce3c1075713b8ed9d25acab423f9","2009-04-29 15:19:05+00:00","Formatting.

svn-id: r40202
"
"9d2e1617a8afdf880f8bcfeb087a05b15eb77863","2009-04-29 15:48:41+00:00","More formatting.

svn-id: r40203
"
"c5bc18e070b689b8b73068ece84b1a28f2b9f555","2009-04-29 15:54:35+00:00","fix warning

svn-id: r40204
"
"00368c0742159e33f056f479f65179b23cf61c0b","2009-04-29 16:21:12+00:00","Gob - Add some MD5s for Win-Lost in time, Win-Inca2 and ADI/Adibou environments (unhandled, though)

svn-id: r40205
"
"4ff69f6cd0aec143525bb7693846748c39fbc2cc","2009-04-29 16:23:38+00:00","Gob- Add a fascination-specific (and yet unknown) renderflag vaue

svn-id: r40206
"
"93e2e75a9e6d6d56c024e6a87d24d92ad89c8a1d","2009-04-29 16:36:08+00:00","- Added a game_fascin skeletton, as specificities are now proven
- Added a new game time, adibouunknown, used to reference the ADI/Adibou/Addy generic environments
- Replace oFascin_cdUnknown10 by a real function
- Fix a detail in oFascin_cdUnknown11
- Suppress double declaration for types Gob2 and Ween

svn-id: r40207
"
"a61089a7305db4b7d48fa6f40fbe84e19383baa8","2009-04-29 16:41:04+00:00","Gob - Add game_fascin.cpp file

svn-id: r40208
"
"4688811024992e6370a1e4995301329b33da08ad","2009-04-29 16:43:07+00:00","Fix build

svn-id: r40209
"
"3607c637587c6b9e2442bc668fc4c8c9459c0168","2009-04-29 16:59:10+00:00","Refactoring.

svn-id: r40210
"
"d0c88ca6a096e1c3bfcd28b65d50544d5abc3132","2009-04-29 19:58:43+00:00","Playing half-sized videos fullscreen in the demoplayer

svn-id: r40211
"
"ced59ea5e90fafff585f72395ca75aa1b7b829e8","2009-04-29 23:54:29+00:00","Moving the demo-related stuff into a demos-subdirectory

svn-id: r40212
"
"ee10b1a1969313bb9a1d573da14e93875edc25e3","2009-04-30 09:36:22+00:00","Updated Gob project for files moved to the demos folder

svn-id: r40214
"
"df9932669a5d8b046f9b78fc7004982adc4b119b","2009-04-30 15:55:59+00:00","Plugging leaks

svn-id: r40215
"
"ae46e8e1cabbee8662bd81e647d15fe5991549e2","2009-04-30 15:57:10+00:00","Adding a strdup-like inline function

svn-id: r40216
"
"afc0052c435871ec8d9cd70550bd920431c6ad10","2009-05-01 05:23:55+00:00","Fix inventory regression in the PC version of PN.

svn-id: r40222
"
"385bf15b513c512c417552fdcddd58f126695fcd","2009-05-01 05:39:06+00:00","Fix regression in the PC version of PN.

svn-id: r40223
"
"858b72d15e0891baf82c5e854096e4fb2b477b28","2009-05-01 07:25:19+00:00","Gob - Add MD5 for Addy 4 basis CD (supposedly used by all Addy 4)

svn-id: r40224
"
"912b3f64bbefa9fc9db3ec10f44f7e43164a51f6","2009-05-01 07:36:50+00:00","Gob : Fascination - put back o1_freesprite and switch to o1_animPalInit after verification of the original code in Gob1. Modify or suppress some warnings.

svn-id: r40225
"
"bb2540a4d11a9ed66ef40b193fb6b2f89d75326c","2009-05-01 09:09:07+00:00","Renamed aspectRatio to aspectRatioCorrection in the SDL backend to match the accessor functions
(don't worry, o reader, for this is the only modification going to the SVN :) )

svn-id: r40226
"
"600a4711224e5a699143013f111e9bf69dd7f13f","2009-05-01 10:37:41+00:00","SAGA: fix SAGA_DEBUG&ACTOR_DEBUG enabled compilation; move Actor::_debugPoints into a Common::Array<DebugPoint>

svn-id: r40227
"
"50ddc0daf0818fc12beb692d03b7e40083f10b1b","2009-05-01 11:53:52+00:00","Add the non-interactive German demo of Simon the Sorcerer 2.

svn-id: r40229
"
"a287eae15de6458350dfd32daeb519d7aed485a6","2009-05-01 14:31:59+00:00","Add bit2 and bit3 options to debugger.

svn-id: r40231
"
"52ccf2af949f217351da13e96fcb3314492fe4fc","2009-05-01 15:32:15+00:00","SAGA: move Actor::_pathList into a Common::Array<Point>

svn-id: r40232
"
"ad4cb49e3b1eb8966e7a400ead1f08ac379bf137","2009-05-02 05:18:09+00:00","Fix the ending of CD demo.

svn-id: r40233
"
"64498f074dfd6ebfeddc24cc3a3ee28af57e0160","2009-05-02 05:44:40+00:00","Add German floppy demo of BASS.

svn-id: r40234
"
"99e5936a30f28fd2d49817daea6bac0d6bbc5fd6","2009-05-02 08:53:45+00:00","Gob - Fix MSVC7, 7.1 and 9 VCPROJ, as compilation failed (demos classes were teleported to a demos subdir by some evil entity) ;)

svn-id: r40235
"
"8225e4f84b5a100a273412176486bd20d9621a4d","2009-05-02 09:52:35+00:00","Add the DOS CD demo of Sam & Max.

svn-id: r40236
"
"7740f5d322794f2bc1308ef35c8bef13ae1bbb2a","2009-05-02 13:14:10+00:00","Add English DOS demo of Space Quest 3.

svn-id: r40241
"
"7f1a054cdb84c4f7c0f257d0655293a2f23e3138","2009-05-02 13:34:45+00:00","Add English DOS demo of Conquests of Camelot.

svn-id: r40242
"
"f09f243bf2e861e58e042c2be90bebb5bfb5962d","2009-05-02 13:49:39+00:00","Add English DOS demo of Leisure Suit Larry 2.

svn-id: r40243
"
"f0cfb657cf96ef0c436191c923a5a52012fea0a1","2009-05-02 15:35:57+00:00","- Moved the extra information (like executable version, VERSION file contents or floppy label versions) into comments with a common format, in anticipation of engine versions being removed to use feature flags
- Added information about the games I own

svn-id: r40244
"
"dd4797b82301a677d47985df2f1292dfb9585937","2009-05-02 18:14:35+00:00","Updated xcode project

svn-id: r40245
"
"88f2bd813e19a478d2f555bc6b2014b2ceab3192","2009-05-02 22:59:56+00:00","Nintendo DS hack should only apply to the CD version of Simon the Sorcerer 1.

svn-id: r40246
"
"656638f12a6f4f7378b1aa8c1ed91771f8ada816","2009-05-02 23:02:18+00:00","Nintendo DS hack should only apply to the CD version of Simon the Sorcerer 1.

svn-id: r40247
"
"b73fb35203a2bf16f4fd356af53daa3bc847366f","2009-05-02 23:30:08+00:00","Add alternative work around for bug in The Feeble Files.

svn-id: r40248
"
"fa019b0ee6a6a095184285a1e895f1beba0933a9","2009-05-03 04:30:18+00:00","Nintendo DS hack should only apply to the CD version of Simon the Sorcerer 1.

svn-id: r40249
"
"9d1b9d67d4150a617ea2e3a29509dbe0779898bb","2009-05-03 07:00:21+00:00","Add DOS French demo of Gobliiins.

svn-id: r40256
"
"c61a147668a103a1e98dfde811118d65521ded5f","2009-05-03 07:33:59+00:00","Gob - Added detection for WinGob 1, 2 & 3 german, Last dynasty interactive demo german, Addy 4 Sekundarstufe basis CD and fix title of Addy 4 Grundschule Basis CD.

svn-id: r40260
"
"c379927d3a6c0a568e618d7f8113f340f7afe6d5","2009-05-03 09:00:13+00:00","Added unit test for Common::Array::resize()

svn-id: r40261
"
"4d57c1f9a9e849f5d8cd3d56da6bcb51da0789d5","2009-05-03 09:00:53+00:00","COMMON: Changed Array::resize to not shrink the internal storage if we shrink the array

svn-id: r40262
"
"5ef0e38fdd4381b174ae7742ff18390dd86a53a2","2009-05-03 09:17:55+00:00","SCI: Changed VM GC code to use Common::Array

svn-id: r40263
"
"240be613f9cd141470eda1e08bb07ee2c7d7e503","2009-05-03 09:18:25+00:00","SCI: Removed dead code

svn-id: r40264
"
"2a89c7d1d4532f082c2050ec5631f36f6707dc23","2009-05-03 09:18:56+00:00","SCI: Removed MEM_OBJ_RESERVED and related code

svn-id: r40265
"
"cac28ebdbba52474cfe5313038bdecaf9bfd7aaa","2009-05-03 09:19:21+00:00","SCI: Doxygenified various comments

svn-id: r40266
"
"9d970009a6cca467773e0d776454c61463951551","2009-05-03 09:19:46+00:00","COMMON: Simplified Common::Stack methods using the recent Common::Array improvements

svn-id: r40267
"
"58ee0314aec034f83ed0fa2a70456ff321c81b2f","2009-05-03 09:20:21+00:00","SCI: Added SegManager::getScript method and modified code to make use of it; moved VERIFY from seg_manager.h to seg_manager.cpp

svn-id: r40268
"
"d695c24b9b1e922a4c2431aceb906e9edec5ae15","2009-05-03 09:21:08+00:00","SCI: Changed various params of type MemObject* to the more specific type Script&

svn-id: r40269
"
"ba57b21d09ea3265b445f674610b1280af428636","2009-05-03 09:25:15+00:00","SCI: Changed SegManager to subclass Common::Serializable

svn-id: r40270
"
"50c8821072b31d24783fba9f058f805a176a4d7a","2009-05-03 09:30:33+00:00","SCI: Renamed MemObject::type and ::segmgr_id to _type resp. _segmgrId, and added accessor methods getType() and getSegMgrId()

svn-id: r40271
"
"79b0711cfd1c91f49de9528b1710da014c149003","2009-05-03 09:30:59+00:00","SCI: Begun conversion of the MemObject union (used to implement poor man's fake inheritance) into a base class of all the various union members

svn-id: r40272
"
"418a2a422ebbbed3212e1aa61a322cc229058d97","2009-05-03 11:04:37+00:00","SCI: Got rid of the LIST_ALL_DEALLOCATABLE macro

svn-id: r40273
"
"5e955ea04594810e0d46b05937412e52e5212a6a","2009-05-03 11:07:07+00:00","SCI: Continue transition from MemObject to MemObjectNEW

svn-id: r40274
"
"c7a5a17acfa1353c221be8c09576503b395c29ef","2009-05-03 21:11:09+00:00","SCI: adlib support (work-in-progress) for the new music player.

svn-id: r40287
"
"f108a31ad71404f115de776366dae985dd8e4f48","2009-05-03 22:45:13+00:00","SCI: Made SegManager::heap_size unsigned

svn-id: r40290
"
"882c24d2ee9f71640bfc3be811b8dcddd91c9988","2009-05-03 22:45:31+00:00","COMMON: Check for failed memory allocations; changed Common::String to use new/delete instead of malloc/free

svn-id: r40291
"
"6a632b51ad7433cc9e04e2e5d68a108e6ba324b4","2009-05-03 22:45:46+00:00","COMMON: Optimized MemoryPool::freeUnusedPages (if many pages are phased out at once, don't copy everything multiple times around)

svn-id: r40292
"
"82f2672008de3994c301aee92b3723f8deac6d98","2009-05-03 22:46:11+00:00","SCI: Changed SegManager to store the heap pointers in a Common::Arrray

svn-id: r40293
"
"d960c1e2a524116acab72d4486fc3372e97d80ea","2009-05-03 22:46:38+00:00","SCI: Completed transition from MemObject (a union of various structs) to MemObjectNEW (a baseclass for these structs)

svn-id: r40294
"
"a41069d69b7381981dc79ed1bb141865da10e452","2009-05-03 22:47:04+00:00","SCI: Started adding methods to MemObject subclasses: constructors, destructors, dereference() (and currently commented out refs to Common::Serializable

svn-id: r40295
"
"1ce07f5e88bbde55e90b74e419e57976198805d0","2009-05-04 02:05:28+00:00","Add code different for PN in vc32_saveScreen(), to fix crashes.

svn-id: r40296
"
"511483adc92f7e6f9d865c9cd11e4140d1e3715e","2009-05-04 09:13:34+00:00","Always reset VGA memory pointer, when load zone in PN, since only a single zone is used.

svn-id: r40297
"
"3fc6c9217276ddaa7e9a6a94db1933647479792c","2009-05-04 09:16:00+00:00","All versions of PN share the same saved game format.

svn-id: r40298
"
"42bb8b95bec94165fa204eac9baa17ab1f8a0e78","2009-05-04 09:17:31+00:00","Fix the car chase scene in PN.

svn-id: r40299
"
"5450bf66306eca53024076c8ffdd0eeb45db423d","2009-05-04 12:55:04+00:00","Fix input been displayed during ending sequence in PN.

svn-id: r40300
"
"c33a875d9f46792f10cc66d8ac68623ed81f1cb2","2009-05-04 14:20:17+00:00","Fixed new[] / delete mismatch in Common::String

svn-id: r40302
"
"3cf4d1d71a5217a1112494e5edf2b8728f05a04f","2009-05-04 15:04:26+00:00","SCI: Added doxygen comment to MemObject::MemObject

svn-id: r40303
"
"689511a56f4af2ef5f6ac2b1403f9146de985abc","2009-05-04 15:04:39+00:00","COMMON: Made Array::resize() init/zero the memory it allocates

svn-id: r40304
"
"88317c1944eb38ee4d648a21e0bdebf7f8e15130","2009-05-04 15:04:55+00:00","SCI: Fixed savestate loading

svn-id: r40305
"
"6e6a8f8d6cb791bdbecb86da49cd769f6813f8b2","2009-05-04 15:05:11+00:00","SCI: Unified serializing code for Table subclasses, using template specialization. This whole syncWithSerializer / DefaultSyncer / ArraySyncer code is experimental work in progress ;)

svn-id: r40306
"
"27b74756d8039fe5aaed61bd4866087c64226faf","2009-05-04 15:05:25+00:00","TINSEL: Added FIXME comment about a valgrind warning (calling strcpy on overlapping strings is unsafe)

svn-id: r40307
"
"f2da4bc4477ade50f53753e8f7702e072ad3cf8c","2009-05-04 15:23:33+00:00","SCI: Got rid of heapmgr.h; further improve the Table code

svn-id: r40308
"
"6a8a9740a19cbb51a847467f4a6b75a4b04b16f8","2009-05-04 16:35:47+00:00","Fix valgrind warning

svn-id: r40309
"
"e63b7785416bea132fd733599ef566b3a4442816","2009-05-04 16:52:13+00:00","This should fix linking on PSP.

svn-id: r40310
"
"e1208f7b2bb578bac6dc265b2bd8ec4eaafe4a2b","2009-05-04 19:54:53+00:00","Fix compilation without --enable-pn

svn-id: r40311
"
"274d890f5b9430c44fdaa24a2c67faf54fd4cb18","2009-05-05 01:51:39+00:00","SCI: Support for 0x4e control changes in new adlib driver, and some cleanup.

svn-id: r40312
"
"66067b0b6afc755497aa24be9fb9a2e5b2051303","2009-05-05 10:54:56+00:00","Fix keymapper compilation

svn-id: r40320
"
"36f58b6378a5eea8565300096b9a9af9c26d66eb","2009-05-05 12:00:51+00:00","SCI: Fixed out of bounds access in (still incomplete?) string frags code

svn-id: r40321
"
"29809407887bbc178a49f215e08f18918e41c4e7","2009-05-05 12:20:28+00:00","SCI: Simplified internal_stringfrag_strcmp and internal_stringfrag_strncmp

svn-id: r40323
"
"7e51eb647842e03326eb4b1d41401538f9903eb6","2009-05-05 12:23:05+00:00","SCI: Actually, it turns out the SystemString is more messed up than I thought: In some places it allocates a memory block of max_size bytes; sometimes max_size+1 bytes; and sometimes max_size*sizeof(reg_t) bytes. And sometimes strings frags are accessed as plain C strings (e.g. when saved), sometimes as a string encode as a series of reg_t values. Ouch :/

svn-id: r40324
"
"c36694764de80af0fe65005599ce5ad91a12398d","2009-05-05 12:28:12+00:00","SCI: Fix my previous changes to internal_stringfrag_strcmp (side remark: Another bonus when using git resp. git-svn, and not SVN: you can commit stuff and test it some time before going public, thus avoid stupid screw ups like this one ;)

svn-id: r40325
"
"61dcaad8886c9e1ced630eeab364f59cd27a4657","2009-05-05 12:29:15+00:00","COMMON: Changed Array destructor to reset _storage and _size to 0 -- this helps to find 'Array used after being disposed' bugs

svn-id: r40326
"
"dc29c404a755dd9583a35d129d73c2b904b43031","2009-05-05 12:33:11+00:00","SCI: Work around an 'Array used after being disposed' bug that occurs when a GfxVisual gets disposed

svn-id: r40327
"
"f4cb6a0b0a98c5b02ea2a846295e888f7dc6c8a0","2009-05-05 12:47:37+00:00","Fix input glitch regression, when examing items in PN.

svn-id: r40328
"
"bb4b2a506005dec449b854a2842550007ed46b1e","2009-05-05 13:40:16+00:00","Fix input glitch regression again, by closer matching original PN code.

svn-id: r40329
"
"e9e9725946e40210c9f92504aade58ec1c1e333a","2009-05-05 16:58:54+00:00","Added detection entry for the German 16-colour version, which was included on
the 'Classic Collection' CD I just bought.

svn-id: r40330
"
"10c29205e6e4f94adc389bfe980f4ccc5f0c3eab","2009-05-05 17:01:22+00:00","Gob - Fix Fascination CD file size thanks to joostp

svn-id: r40331
"
"ad38e0def05ac0bb82f8e4f9a1a6b5f952d5f8c1","2009-05-05 21:34:32+00:00","Update SCI code for the upcoming AdLib emulator changes:
- Switch old 'opl2' code to use less of the MAME specific API.
- Since 'interleave' parameter on 'YM3812UpdateOne' will be dropped, work around that in SCI code by hand.

svn-id: r40332
"
"d9e0499a36004023dea3dfd95312b1d91eca5bbc","2009-05-05 21:40:50+00:00","AdLib emulator changes part1 (breaks compilation :-/):
- Add new directory sound/softsynth/opl
- Move sound/fmopl to sound/softsynth/opl/mame

svn-id: r40333
"
"08581ed69811d50e20eab2a3b491a49b0a494d60","2009-05-05 21:47:12+00:00","AdLib emulator changes part2:
- Add new OPL emulator API (and legacy access API) in sound/fmopl.h
- Add DOSBox OPL emulator.
- Update MAME OPL emulator for the API changes.

svn-id: r40334
"
"16bd3196848cdb24f6238371d776b435b7366c5a","2009-05-05 22:06:54+00:00","At request by DrMcCoy enable DOSBox OPL2 by default whenever DISABLE_DOSBOX_OPL isn't defined.

svn-id: r40335
"
"bd82af01c2390b4feb93d2e58af9024b1b2f21c4","2009-05-05 22:07:50+00:00","SCI: Removed stereo support from the soon-to-be-removed old SCI adlib driver
in order to get it working with the new adlib emulator.

svn-id: r40336
"
"5cc44292a2d47faa418651169f5a66cf99419e78","2009-05-05 22:14:34+00:00","- Remove default parameter from OPL::create
- Add some note that no one should use the legacy API for new code

svn-id: r40337
"
"625f41c135a2dc9b242443a874370e5273ecb638","2009-05-05 22:18:26+00:00","Cleanup:
- Rename OPL_DOSBox to OPL, since it's inside a seperate namespace anyway
- Reanme MAME_OPL to OPL, since it's inside a seperate namespace anyway

svn-id: r40338
"
"6f840550b917499ca5c66597f4eae1003b1b7a37","2009-05-05 22:34:04+00:00","Dual OPL2 initialization bugfix.

svn-id: r40339
"
"eddd7bff8fff4291ab869f73892b506b9dacbc43","2009-05-05 22:36:16+00:00","Commit of patch #2787493 'AmigaOS4: New Icon (better quality)'.

svn-id: r40340
"
"25ca710eae70a30538d736da0374b74279c3a23f","2009-05-05 23:40:54+00:00","Really fix Dual OPL2 initialization.

svn-id: r40341
"
"c35d6db60c54369387597492d04aec94f07cc070","2009-05-06 00:40:37+00:00","Fix feedback/algorithm register write bugs in Dual OPL2 mode.

svn-id: r40342
"
"563c6d59d3cf3ded8c7fddece797eff696c5c605","2009-05-06 01:18:12+00:00","SCI: Modified the new adlib driver for the dosbox adlib emulator, and enabled the new player.

svn-id: r40343
"
"e78ebed32da2b5326296eeae529b4075c4ac870a","2009-05-06 07:56:23+00:00","Gob - Add MD5 as provided by Luca in scummvm-devel for Woodruff ITA

svn-id: r40344
"
"4da318bd11886be2ce07fe3b813c8259be94b0f4","2009-05-06 08:24:53+00:00","Remove duplicate entry (sorry Strangerke, but this one was already in there, a few lines above) :P

svn-id: r40345
"
"af4d23f76260658b1b5e0e9ae40f00f6245bfa4f","2009-05-06 09:12:24+00:00","Const correctness

svn-id: r40346
"
"8f4a2c14764be82ac527d2ab052f9235380e2fee","2009-05-06 09:12:58+00:00","Silence warnings. Const correctness

svn-id: r40347
"
"4e6f862b7ced73c982ce26e6aaed80579d4ddb99","2009-05-06 09:31:55+00:00","Add more file sizes.

svn-id: r40348
"
"f982011f4e009ca04782a436c58ee3dc06076955","2009-05-06 10:01:05+00:00","- Updated the MSVC project files of ScummVM (added the new Adlib player, as well as vkeyb and keymapper)
- Synced the GOB project files
- Synced the SCUMM project files

svn-id: r40349
"
"494000dab7b4684287703cfe7703426ef05228eb","2009-05-06 10:03:22+00:00","Updated the MSVC project files of the SCI engine (compilation is broken with SCI under MSVC)

svn-id: r40350
"
"c02aad90b256fdfac83bbf739f58346e7d7546fb","2009-05-06 10:28:07+00:00","Added a reference to scummsys.h to fix compilation errors

svn-id: r40351
"
"0ac523d561453986bb00483eb095ed33691616c2","2009-05-06 10:29:30+00:00","Added reference to sci\sfx\player\player.cpp

svn-id: r40352
"
"a9d1e5efa981d8edce6f55550d0ab06cdef81986","2009-05-06 11:00:24+00:00","Rename duplicate named files in order to make MSVC happier

svn-id: r40353
"
"efa3d244fa881b4080ec99dc0239f5c19f8c082a","2009-05-06 11:01:58+00:00","Sync with adlib.cpp rename

svn-id: r40354
"
"b7d1ca00d72aae402f23ac0c1519f4b41bfdd69f","2009-05-06 11:06:43+00:00","SCI: Added a comment (taken from a mail by Lars Skovlund) explaining SCI string frags. Also added a 'typedef reg_t *StringFrag' for future use

svn-id: r40355
"
"8d2f80fd51dd84db8f4e5aadb887def9920226e8","2009-05-06 11:07:04+00:00","SCI: Added operator== and !=, as well as an isNull method to reg_t

svn-id: r40356
"
"36ebfc0a904eff6e14ffe050e2c6c9239611c7ac","2009-05-06 11:07:25+00:00","Sync with adlib.cpp rename

svn-id: r40357
"
"25e844655e31f61bf2f74f545a1984315f1fc217","2009-05-06 11:11:44+00:00","Sync with adlib.cpp rename

svn-id: r40358
"
"625f218388742e13654ea938ee052abafa5cec59","2009-05-06 11:16:38+00:00","Fixed SCI compilation under MSVC and added several missing files

svn-id: r40359
"
"47e426f271fdd08c3fe8e1c8b383cecd27cdd951","2009-05-06 13:57:05+00:00","Don't include headers inside namespace scopes. This should fix compilation on NDS at least.

svn-id: r40360
"
"5dc234a4e2497195ccfce87cc257b3c0b876928c","2009-05-06 14:22:13+00:00","Patch #2758080: GSOC09: XMIDI parser switch cases

svn-id: r40361
"
"fd1e6fad1ee4aae653795e3ecdd8ef48c3b0f155","2009-05-06 15:37:41+00:00","Gob - Modify Features of PC versions of Fascination to Adlib. (thank DrMcCoy for fixing my error in previous version)

svn-id: r40362
"
"8803d4b3a60aab20179cfcef360ddebb11e12512","2009-05-06 17:18:38+00:00","Gob - Added atmosphere music to WinGob1, WinGob2 and WinGob3

svn-id: r40363
"
"262363f2b3383f506f6e43838eae8b4b3ea78e30","2009-05-06 20:05:58+00:00","Another attempt at fixing MSVC compiliation. (someone test this please ;-)

svn-id: r40364
"
"b33bf76c70bfaa9933c8c9bb12eb6d29d5cb2a88","2009-05-06 20:19:47+00:00","For the time being rename opl.h to opl_inc.h and opl.cpp to opl_impl.h, so MSVC does not try to compile the former opl.cpp. (Needs cleanup in the future anyway...)

svn-id: r40365
"
"bab6dedcc7236dc4a847d4426b70841551e7e3b7","2009-05-06 20:23:04+00:00","Updated xcode project, and fixed dependency for the iphonebundle makefile target

svn-id: r40366
"
"cd90fdacebb7ec4b138385ac6c0b9e6fd7fe66c4","2009-05-07 08:23:47+00:00","Removed the renamed OPL files from the project

svn-id: r40367
"
"70472c79cd8b338cc25282a5a3c7ddd1ae372fd1","2009-05-07 09:49:13+00:00","Commit of patch submitted by Jaime Abraham Corrales Gonzalez, with minor formatting changes

svn-id: r40368
"
"391cf9d1444446ce62f90e09e71954686ea50a92","2009-05-07 12:05:44+00:00","Correct incorrect byte in corrupt 72.out file, included with some PC versions of PN.

svn-id: r40369
"
"226f8860ca0b8e5666ac412e9489654118c1ffd2","2009-05-07 12:24:42+00:00","Fix an endian bug

svn-id: r40370
"
"bb03043b165578a1ddc0f813fe07fb5ce1c27794","2009-05-07 20:56:33+00:00","More debug info in the error messages when GUI layout is wrong.

svn-id: r40371
"
"76a48947dec0a79ca674948fb199adfdc911d01c","2009-05-08 09:52:51+00:00","SCI: Added workaround for Common::Array<T>::resize() not zero-initing newly allocated memory if T is a scaler type, pointer, POD type. At least on OS X

svn-id: r40372
"
"d8738b9090c1b8d866f18962be428076de6faae2","2009-05-08 09:53:10+00:00","SCI: Started to merge SegInterface into MemObject

svn-id: r40373
"
"b49dd221737bd1291002fb6c4dc08384e176d632","2009-05-08 09:53:31+00:00","SCI: Renamed dstack_t -> DataStack; removed obsolete KF_OLD constant

svn-id: r40374
"
"8d4a4271bb0cf78508f600d80893874d436e9883","2009-05-08 09:53:49+00:00","SCI: Moved freeAtAddress from SegInterface to MemObject

svn-id: r40375
"
"0223b7e490a6cdcc63aea0239cc6d079591c429f","2009-05-08 09:54:06+00:00","SCI: Moved findCanonicAddress from SegInterface to MemObject

svn-id: r40376
"
"574dee8e1f57f126fc4e56e4e8ab839548a990a9","2009-05-08 09:54:24+00:00","SCI: Got rid of last traces of class SegInterface

svn-id: r40377
"
"8346af68eccf16e73b004ee78014a48db1c5ff8a","2009-05-08 11:08:53+00:00","SCI: AvoidPath: added support for multiple contained-access polygons (ECO1).

svn-id: r40378
"
"1c50778e46b763290f51073ea968973a5eb97bb3","2009-05-08 11:24:20+00:00","Fixed compilation under all versions of MSVC (renamed sound/softsynth/opl/opl.cpp and .h into opl_impl.h and opl_inc.h respectively)

svn-id: r40379
"
"c38c0980cddf6b3703f5d86f2004841fdbfca0c3","2009-05-08 12:37:11+00:00","SDL: Modified OSystem_SDL::setWindowCaption to strip out non-ASCII chars (this prevents a crash on OS X). Note that the OSystem specs cleary state that only ASCII may be passed to setWindowCaption(), but we ignore this e.g. in the launcher

svn-id: r40381
"
"c91a6c97ae8f3b10ee33c91225ce2d865c2a268a","2009-05-08 12:37:28+00:00","Clarified docstring for String::insertChar

svn-id: r40382
"
"afa254721d786397d579230463ccdb96dcb9bae5","2009-05-08 12:39:37+00:00","SCI: AvoidPath: Fixed a regression caused by previous commit, and added a
workaround for ECO room 300.

svn-id: r40383
"
"418d80c8a84175bdefb5e8310816d489abf0e1c6","2009-05-08 14:29:20+00:00","SCI: AvoidPath: another workaround for ECO

svn-id: r40384
"
"e34c6316c67a06d9586e217cdca52d3bc6cc0438","2009-05-08 16:00:39+00:00","SCI: Replaced gfx_driver_t::set_palette and install_palette by directly invoking their OSystem counterparts

svn-id: r40385
"
"527463dea2ee7ad30a030df0598ecf7a44853b57","2009-05-08 16:01:25+00:00","SCI: turn the various gfx filters from #define hacks into template funcs

svn-id: r40386
"
"de114d3d52d485a69ce972cfc3e4f051975aaef1","2009-05-08 16:02:22+00:00","SCI: Got rid of code for endian adjusting pixmaps

svn-id: r40387
"
"0ebd41ac5964d1852ccf48f4766e9270fa5756af","2009-05-08 16:03:14+00:00","SCI: cleanup

svn-id: r40388
"
"e933c02fd2b622bb79dcac520e045b405bcb81c8","2009-05-08 16:03:55+00:00","SCI: Folded line.h and crossblit.h into gfx_support.cpp

svn-id: r40389
"
"f4bcd1680fef2d6cc8d66498622c2d6458a22731","2009-05-08 16:21:51+00:00","SCI: GetMessage: lock resource.

svn-id: r40390
"
"138dabe065881a4b14107798548cf5f3061162e5","2009-05-08 21:07:34+00:00","Added detection string for 'Adibou prsente la Magie' (STK2.1), 'Adi Franais Maths CM2' (PAK) and 'Adi Franais Maths CE2' (PAK)

svn-id: r40391
"
"0821784514940cacd8c3926ba14c98fced54179f","2009-05-08 21:15:43+00:00","'??)' is the trigraph for ']'. That isn't what we want.

svn-id: r40392
"
"b0b25acf9619d8dae39fa5df5dbc9c9ae88b876f","2009-05-08 21:25:56+00:00","Added detection string for 'Adi Anglais primaire 7-11 ans' (PAK)

svn-id: r40393
"
"4f4bef88b1eff0bd4aaad704814d52b8e21caed7","2009-05-08 22:44:26+00:00","SCI: Fix return value of GetMessage.

svn-id: r40394
"
"589d1dbd5945285f9b32d3bd03b7ff54b1befb3f","2009-05-08 22:52:47+00:00","Add detection for Adib 2 Ambiente et pour Adib prima elementare : Imparo a leggere e a contare

svn-id: r40395
"
"be7acea2172457121d079c9c4c8ffa67aeecf2a7","2009-05-08 23:10:25+00:00","SCI: Set signature for GetMessage.

svn-id: r40396
"
"a70531f814d4d514a080fbdc14fc9c706db7ed7b","2009-05-09 00:32:05+00:00","SCI: AvoidPath: another workaround for ECO.

svn-id: r40397
"
"90cef59d3b2afb05c70049941b99966e515a3d23","2009-05-09 01:23:52+00:00","SCI: AvoidPath: No longer excludes edges on screen borders for pathfinding, as
only the earlier games seem to do this. We may need to add a SCI version check
here if this change breaks anything in earlier games.

svn-id: r40398
"
"34bdd010c3fbb7dbeaa7eec648a4e39b2da4473b","2009-05-09 09:52:46+00:00","SCI: AvoidPath: Got rid of a warning.

svn-id: r40399
"
"68c8ff242d692e958c951354b739b2f704632f38","2009-05-09 11:25:18+00:00","Added file gfx\gfx_pixmap_scale.cpp

svn-id: r40400
"
"3ae57dbc31f73b9d13d4a46cacda767d8e7157c3","2009-05-09 12:19:15+00:00","remove temporary files on mac os x

svn-id: r40401
"
"5dc9bdc05af51c2dee219f6d5ca9f17c93924d8e","2009-05-09 15:34:13+00:00","Synced all the MSVC project files of the SCI engine

svn-id: r40402
"
"8b813f02b850f7b67c17cdaf4a058c73f2febe2c","2009-05-09 22:25:28+00:00","Converted the iPhone backend to use OpenGL ES instead of CoreSurface for graphics output

svn-id: r40403
"
"87fdc5d544e73a4cb520eb6c794bb12d87f0a6a8","2009-05-09 22:36:57+00:00","Original GSoC'08 keymapper now works.
Plans:
- Make remap dialog less ugly
- Port dialog to other resolutions and classic theme
- Stop polluting config namespaces with keymap
- Improve automapper
- Add support to the engines and backends

svn-id: r40404
"
"e46d81b8225262c371e9f0db0a8ff23f7545791e","2009-05-09 23:01:02+00:00","Fix GUI keymap.

svn-id: r40405
"
"f5094553f7690265f3786c59f38b99c70bd6c311","2009-05-10 06:24:58+00:00","Set the initial SMUSH frame rate, since variable doesn't change and isn't saved.

svn-id: r40406
"
"4f0811b129fc7363c339e036e46b417407dcbbed","2009-05-10 06:46:24+00:00","Correct and move initial SMUSH frame rate value, for the demo version of The Dig.

svn-id: r40407
"
"6b6aca3fa314cf43d79f6957b71d046243022f95","2009-05-10 06:54:45+00:00","Change the work around for sq3.san, so it doesn't alter global smush frame rate (Which is a regression).

svn-id: r40408
"
"75b5bd418a0417033ec7ebc66f433274a19c5d1d","2009-05-10 07:21:35+00:00","Update comment.

svn-id: r40409
"
"af3bf8a57544b402c2d9034dc67bed0b5f6160c4","2009-05-10 09:51:05+00:00","Fix regression that caused F1 to trigger the original load/save menu in COMI.

svn-id: r40410
"
"ceee278def65e1a8641539602db4d7285d7a53fa","2009-05-10 09:53:39+00:00","Disabled some unused code

svn-id: r40411
"
"acd5a87922eb7a5268fa673f659be30d2eb39af6","2009-05-10 10:27:45+00:00","Moved the code which retrieves the current room number in a separate function and merged _sci1_alloc_system_colors inside _reset_graphics_input

svn-id: r40412
"
"05d6edda4fbca0160c855a722a90f95519987a7c","2009-05-10 10:59:08+00:00","Oops

svn-id: r40413
"
"af7a7c95854301c9f87bd7e4efb774c63d3b7bee","2009-05-10 11:06:01+00:00","Patch #2789608: 'recognition of os2-emx in configure'

svn-id: r40414
"
"3e9ca1a638a24f663b0e8ea39578ca95d80cf37f","2009-05-10 11:08:50+00:00","Reverted commit #40413

svn-id: r40415
"
"3b92b0f583384ce01a988ca453daa416f53559ec","2009-05-10 11:43:17+00:00","Add detection for newly discovered AGI demo

svn-id: r40417
"
"11ba91b4de3dd0ea5315bd9f3e957e255b16e5fc","2009-05-10 12:01:37+00:00","Updated xcode project and did some minor iphone optimizations

svn-id: r40418
"
"3592801a5707f42c71971321b26e2cc1da775c25","2009-05-10 13:15:14+00:00","Objectified and cleaned up the MessageState class

svn-id: r40419
"
"dd84aaf648b57220180b84a9aa0825d16bcea5bc","2009-05-10 13:40:28+00:00","LOL: - added some spell casting (spark, heal, swarm)
- fixed several bugs (not the one in the fighting system though)
- added several opcodes. there shouldn't be any real show stoppers in the draracle cave now.
- simplified wsa code (which required 4 lines of code for displaying a frame)
- added support for wsa animations that don't have a last frame (apparently kyra 2 and 3 don't have this type of wsa file)

svn-id: r40420
"
"53f24f3e43f78e974367dfe2c87951e7d2589689","2009-05-10 13:47:38+00:00","Applied patch by waltervn to remove the length parameter from getText() and fixed a silly bug in getLength()

svn-id: r40421
"
"d34d5f56b6a025e305c190e34a0713e4c6399b8f","2009-05-10 14:04:56+00:00","Cleanup

svn-id: r40422
"
"7cd07d958193f591740c9e60225ae82833ac90c8","2009-05-10 14:57:27+00:00","Cleanup

svn-id: r40423
"
"2cc77639715214573637375655442d2208898a38","2009-05-10 17:18:59+00:00","whitespaces

svn-id: r40424
"
"02aa7dfdfd4166c97144835d30ef3a83633f8e32","2009-05-10 17:22:08+00:00","Fix accidental assignment in if condition.

svn-id: r40425
"
"978758190e0cf09f65d3e7737d49bd4e518b59ca","2009-05-10 17:26:46+00:00","Cleanup.

svn-id: r40426
"
"7d79a092b5982c87ac889fb71c6e3b2a2e2bae35","2009-05-10 17:33:31+00:00","Store global keymaps into a separate section

svn-id: r40427
"
"3a392ed05b68b560f744cd06d7eec962aff782a8","2009-05-10 17:49:21+00:00","Oops typo.

svn-id: r40428
"
"c7e5cc2935a1a0c7eb2540ed78e52cf3ff3763b6","2009-05-10 18:04:47+00:00","Actually save keymap after remapping

svn-id: r40429
"
"36818ced2a546ccb5318adaa22f8d90794edca8a","2009-05-10 19:17:11+00:00","Changed Common::Array::resize() to default init new array elements

svn-id: r40430
"
"019f87fd1b25f88c46615edbe09de6618d4b3bf7","2009-05-10 19:17:51+00:00","SCI: Changed object list in Script instances to use Common:::Array

svn-id: r40431
"
"38c48b4f6e23c56ad6d564de03670a69d0cad798","2009-05-10 19:18:19+00:00","SCI: Fixed palette regression from rev 40388

svn-id: r40432
"
"14aa9d70ac1a6dd60a726e070c857460b9cf4801","2009-05-10 20:13:12+00:00","SCI: Replaced Cplain odeBlock array in class Script by a Common::Array<CodeBlock>

svn-id: r40433
"
"98fb95589cd3652e6bab9159527dcb1fad520a57","2009-05-10 20:13:43+00:00","SCI: Changed EngineState::pics to a Common::Array

svn-id: r40434
"
"81cfd774adf14c5fca7f10156c81548ff967dcae","2009-05-10 20:42:46+00:00","clean up AGI fillAudio

svn-id: r40435
"
"e1cc5c309a81db91e6c2aa39a02923eb49f222f1","2009-05-10 20:47:58+00:00","KYRA: fixed typo

svn-id: r40436
"
"2a485abd6d03f94813f6e88904af07f709c10772","2009-05-10 21:20:33+00:00","Make static buffer larger.
This fixes crashes with AGI target names like goldrush-amiga.

svn-id: r40437
"
"7604301c30553828cae69ea69acf8fde057ac5c2","2009-05-10 21:27:57+00:00","Support target names of any length.

svn-id: r40438
"
"665e472ef0bf9cd38c92ebe58975cbda74241a07","2009-05-10 22:05:04+00:00","Keymapper:
- Introduced new OSystem method getHardwareKeySet() with default implementation
- Moved global keymap creation to base/main.cpp
- Moved GUI keymap creation to gui/GuiManager.cpp
- Added various safeguard checks to various keymapper methods

Now it is really possible to add keymapper to all backends.

svn-id: r40439
"
"6d56924bb1854ee9592c4223a4746a32038ade6d","2009-05-10 22:15:33+00:00","iPhone fixes for compiling with the unofficial sdk

svn-id: r40440
"
"4d55f8b8d7013095edc17b5d0771a37216dfca65","2009-05-10 22:25:43+00:00","SCI: Minor changes to Message(). Some of the text in KQ6 floppy should now be visible.

svn-id: r40441
"
"670eb3badf94470283225462e30aa129208cb359","2009-05-10 23:08:32+00:00","LOL: - implemented rest party button
- made button processing code more accurate

svn-id: r40442
"
"3d13c3ea36b36c9e0b84b0f741675d390066d98d","2009-05-10 23:53:05+00:00","LOL: - fix last commit

svn-id: r40443
"
"c5189faf2b796629de6a179aebcb6854458f7415","2009-05-11 06:20:51+00:00","Fixed some warnings

svn-id: r40444
"
"d41db6ae87d64a274d2fd66b4fa9e63c5ccc81f4","2009-05-11 09:01:54+00:00","Define hardware keys for 101 keyboard in SDL backend.
TODO: speedup initialization. Now it is quite slowww.

svn-id: r40445
"
"79777a0076f738633796ee4de40c67bd5ccd96b1","2009-05-11 09:04:04+00:00","Increase HW key ID size so all modifiers fit too.

svn-id: r40446
"
"d82c78c4a3b5d4c9c65414c9c1f3d68e04c81c96","2009-05-11 09:13:43+00:00","Fix compilation

svn-id: r40447
"
"2cb051a394f3c5fa9b1757e17f06fe271d9bd1ac","2009-05-11 09:30:39+00:00","Added the new hardwarekeys.cpp file

svn-id: r40448
"
"911556a824291b9838b7b5f1cd8c6f9624c2bcc2","2009-05-11 10:15:38+00:00","This is the source for the MMUHACK 2.4 kernel module is included with the GP2X backend. This is the code used to build the mmuhack.o module that ships with the GP2X binaries.
-- line, and those below, will be ignored--

A    gp2x/mmuhack
AM   gp2x/mmuhack/flush_uppermem_cache.s
AM   gp2x/mmuhack/flush_uppermem_cache.h
AM   gp2x/mmuhack/mmuhack.c
AM   gp2x/mmuhack/readme.txt
AM   gp2x/mmuhack/Makefile

svn-id: r40449
"
"45ceef870abc84451b275b852bfe137d8cff78f3","2009-05-11 10:56:59+00:00","SCI: Message: Fixed a bug when game requests message with seq != 1.

svn-id: r40450
"
"7c75e8e2ef9268bdd69810a59dc6062f0dff376f","2009-05-11 13:31:17+00:00","SCI: Reduced header deps

svn-id: r40451
"
"d66d1ffab302c6146d0262c873287347c9f69267","2009-05-11 13:31:37+00:00","SCI: Replace global vars cmd_paramlength & cmd_params by Common::Array<cmd_param_t> param to console hook commands

svn-id: r40452
"
"1949133d22a3435c7a3ae4532d59967d27cf7708","2009-05-11 13:32:00+00:00","SCI: Simplified the Table class, by making it use an Common::Array internally. Increased savegame version, breaking compatibility to the previous one -- sorry for that, but some of my previous changes accidentally messed up the table syncing, resulting in messed up savegames anyway; these breakages should be fixed with this commit

svn-id: r40453
"
"2fd66d8eae7c41d291ee7dcbc12c0e142e7a982f","2009-05-11 14:04:44+00:00","some cleanup :
- separated instruction table parsing from instruction execution
- added a few debug calls to monitor game flags changes
- some variables/functions renaming

svn-id: r40454
"
"ca52388f118d4c60750df1ba3464a3f958cfeecb","2009-05-11 17:07:38+00:00","Console is a class, not a struct

svn-id: r40455
"
"b9a026eb20c2cc99c582a5c6fc3f7a1da232a04f","2009-05-11 17:08:31+00:00","Merged find_dev() inside sfx_find_device()

svn-id: r40456
"
"e3e3fbd7d1d5f358515fc0d28b2c0abd715e5b79","2009-05-11 17:10:36+00:00","Moved the 'selectors' and 'syscalls' console commands to ScummVM's debug console (as commands 'selectors' and 'kernelnames', respectively)

svn-id: r40457
"
"95a4b26efedbb4e7f15b7417f54064df95c40775","2009-05-11 18:02:27+00:00","Turned fixed-size lists of debugger/console commands and variables into more flexible data structures

svn-id: r40458
"
"548180663546d6ce2d29436fe2d54d8fe2170a18","2009-05-11 18:02:48+00:00","SCI: Hook FreeSCI console commands into the ScummVM console (incomplete as of now, because printf output is not yet redirect to the GUI console)

svn-id: r40459
"
"d09037fa6cc19e8f1bd3dac5b14369a8811726e8","2009-05-11 18:18:43+00:00","SCI: Hacked stuff up so that debugger commands also print on the GUI console

svn-id: r40460
"
"efbc0f139b3998fc5a67798958a987a076cee212","2009-05-11 18:34:54+00:00","Fix bug #2678272: 'FT: Russian version crashes on windows and psp'

svn-id: r40461
"
"0fe9cab48ae0e4534f562806f87e9610e7c09d8d","2009-05-11 18:40:59+00:00","Fix bug #2595364: 'Virtual Keyboard: number keys not working'

svn-id: r40462
"
"03dffbcc1875615bdb9f8ee7133e1f27afe6962a","2009-05-11 19:03:40+00:00","LOL: - implemented inventory screen status icons

svn-id: r40463
"
"2ba1da41e8e189ea5c89b56bb6d6faca80a0268f","2009-05-11 19:04:06+00:00","Silenced warning.

svn-id: r40464
"
"d5b9437fb315292292ffa21c04b1003e656a2838","2009-05-11 19:31:55+00:00","Fix bug #2055836: 'FW: Music is not restarted when loading a saved game'

svn-id: r40465
"
"0561caa447857445b585327a6e2b087019af8eac","2009-05-11 20:44:43+00:00","LOL: - implemented olol_paletteFlash()

svn-id: r40466
"
"3b9f21be8025c37b5c10ba9fbbfaa1f47746b3a2","2009-05-11 20:53:28+00:00","Use lowercase form for quickselect in ListWidget.
This matches POSIX strcasecmp and MSVC stricmp behaviour.

svn-id: r40467
"
"565c23b601d6c59ad08cfcae189b9ae896f09912","2009-05-11 20:58:55+00:00","Fix bug #1946262: 'LSL1: Age Verification answer input not working'

svn-id: r40468
"
"5f3938d615353b731e422f534ccd9f854711c230","2009-05-11 21:05:48+00:00","Fix MSVC compilation (cast const away explicitly).
Patch by Kerbox.

svn-id: r40469
"
"36c832d455f19fb1fa588ace2fb1746d00ddbf31","2009-05-12 07:07:17+00:00","Added a startOffset parameter to hexdump() (used by SCI's own hexdump method)

svn-id: r40470
"
"1b8c5f483f2dccbac3042cfc9f4b52f1716cc2c2","2009-05-12 07:19:49+00:00","Silenced MSVC warning about unsafe mix of byte and boolean

svn-id: r40471
"
"80254b79cc6e3892e68d8360b2c328dc81a8e9c8","2009-05-12 07:21:44+00:00","Replaced sci_hexdump() with Common::hexdump()

svn-id: r40472
"
"63fe11702cc38f258f0cddac4258bd7ddcb9bb10","2009-05-12 08:14:24+00:00","Moved the 'suffixes' and 'words' console commands to ScummVM's debug console

svn-id: r40473
"
"a5a1aa5542a53cbe72f0457c0949f0dd87513870","2009-05-12 08:22:20+00:00","- Slight cleanup of c_sfx_01_header()
- 'words' -> 'kernelwords'

svn-id: r40474
"
"968aec7627ab397e48ce8039ec1e4789c64c5f37","2009-05-12 08:27:06+00:00","Synced WinCE SDL backend with the changes in commit #40226. Hopefully, this will fix bug #2790461 - 'WINCE: Compilation broken'

svn-id: r40475
"
"17a68490be5478b982023382ef9637ea968dbceb","2009-05-12 10:02:18+00:00","Replace verb numbers with constants in selectVerb() call

svn-id: r40476
"
"4aedfc75f8f6ca7b9d03fa2bb66f43bf50a240d1","2009-05-12 10:20:12+00:00","Changed the hardcoded 'Parler de..' string in the conversation dialog to use the correct language string

svn-id: r40477
"
"7f587a9d6b97930e1ebff2c966a2c72e69bfd729","2009-05-12 11:28:15+00:00","SCI: Message: Added resource-internal recursion (currently untested).

svn-id: r40478
"
"cf3ea8eec29978450c8a7c29f12210dbdaa815da","2009-05-12 12:20:45+00:00","Cleanup.

svn-id: r40479
"
"a79716e3671f7a6c619fe3a38f5f5fd7589f9e81","2009-05-12 12:30:59+00:00","Cleanup.

svn-id: r40480
"
"c299dbeb26b38342e2a5c6b9e59b810e48572cd6","2009-05-12 12:31:09+00:00","SCI: Merged Message() and GetMessage(). Set SCI1.1 to use SCI1 kernel table (for now).

svn-id: r40481
"
"8d1576505995b4c02a5c74e428010492df5cd28c","2009-05-12 12:35:40+00:00","Fix strncpy usage.

svn-id: r40482
"
"eec316443ea6b2775cd2dc13befc0ab7eec777a0","2009-05-12 12:39:46+00:00","SCI: Set resource version for LSL6 floppy (autodetection fails).

svn-id: r40483
"
"e7184402fb6d6bb4fe5d395220f141cf7aa59fab","2009-05-12 12:56:22+00:00","SCI: Sound: Send signal immediately for currently unsupported fade-and-continue.

svn-id: r40484
"
"b13a8090b2de950279994484d324b1d46969fac6","2009-05-12 12:57:03+00:00","set resource version for LSL6 low-res CD version as well + update language comment

svn-id: r40485
"
"2e59107a427e08d9272c89a8715e993517356f89","2009-05-12 13:29:32+00:00","Removed some unused code

svn-id: r40486
"
"fa0fe7fada18be6499694f94164af3d06fdf628a","2009-05-12 13:56:09+00:00","Typo.

svn-id: r40487
"
"8524bf3a25fe8326fda5364f7691c75903b5eb32","2009-05-12 14:18:08+00:00","Change script file loading code to use Common::IFFParser instead of a self written IFF reader.

svn-id: r40488
"
"76984ded25b48064798c66496958eaccd7b5c4a7","2009-05-12 14:35:50+00:00","Add proper error checking in file parsing code.

svn-id: r40489
"
"09224573f53d33ed79ee926f1148caa7802652e7","2009-05-12 14:43:57+00:00","Formatting.

svn-id: r40490
"
"c59f9a9670c0bffd75cfa765d334b40a376982ec","2009-05-12 14:55:45+00:00","Cleanup.

svn-id: r40491
"
"eb8ddbe8f4d32b235209ab7a91cd5f1f3a67422d","2009-05-12 14:58:44+00:00","SCI: Fixed a valgrind warning.

svn-id: r40492
"
"619d107ed773d7d12ae0433e3fe12e9839c22236","2009-05-12 15:06:20+00:00","Add more detailed error message for 'Chunk overread' case.

svn-id: r40493
"
"938db170f3af6eaade05fec36edc8011e155422f","2009-05-12 17:48:58+00:00","Sync with STXes

svn-id: r40494
"
"4f0768b9096aab65961d697ca60d6e939f36eae2","2009-05-12 18:42:44+00:00","- Add support for selecting the OPL emulator being used (config entry: 'opl_driver')
- Make MAME FM OPL the default emulator again
- Add GUI support for selecting the active OPL emulator
- Update themes

svn-id: r40496
"
"a586017bea6810f0e7c3ea76f482914b0196602f","2009-05-12 18:45:17+00:00","Fall back to plain OPL2 emulation, when Dual OPL2 isn't available.

svn-id: r40497
"
"4c156d3c784094ddf07db73ca06b729f505feb0c","2009-05-12 18:53:44+00:00","Fix OPL emulator IDs.

svn-id: r40498
"
"5e83e27bf6990f316d4fb2571b213fd8689dd861","2009-05-12 18:57:28+00:00","Performed some cleanup on the different version checks

svn-id: r40499
"
"ef1a8c8677f4e6803926bd5db32110925aa38901","2009-05-12 19:00:24+00:00","Give hints for better automapping

svn-id: r40500
"
"a0a44ef498a6ee53d67805362ec520ff5ad2dfea","2009-05-12 19:03:42+00:00","Allow creation of KeyState with zero ascii value.

svn-id: r40501
"
"4190e256bf23175a17eb3092f682ec04f8e48c97","2009-05-12 19:03:54+00:00","Cleanup.

svn-id: r40502
"
"72686a5a9e8792b7924fb1fec8e745eda9c5afd4","2009-05-12 19:24:04+00:00","Make 'create' return an OPL2 by default.

svn-id: r40503
"
"9c18a12fa0d7aa02b98b733281ced47ea742fbb3","2009-05-12 19:24:11+00:00","Fixed what looks like an obvious error in loadSong() that Valgrind caught.

svn-id: r40504
"
"68c7aa7ff1131fd1189705bdbbdbde778b809e11","2009-05-12 19:36:09+00:00","Fix invalid pop up widget selection, when no 'opl_driver' setting is present.

svn-id: r40506
"
"536bdeacd49dd5bbf0185133a172d803b27b8610","2009-05-12 19:58:05+00:00","Clarification of a comment.

svn-id: r40507
"
"0cc6b88f581a565c2b94f638e1b759c2608ba9f1","2009-05-12 20:03:10+00:00","When source and destination are the same, there is no need to strcpy(). In fact
it may even be harmful when source and destination overlap. (This happens when
loading savegames.)

svn-id: r40508
"
"e280f301e7bc8a6b941d3aac2b4019f268493815","2009-05-12 20:12:49+00:00","Rearranged all the different version checks based on SCI version in versions.h, and added some WIP and unused game flags, which will hopefully replace the SCI version numbers

svn-id: r40509
"
"6372a3f5278a24148cc2d3e0ee86ec564a865e1a","2009-05-12 20:13:42+00:00","Surely this function is supposed to return -2 when the memory allocation
*fails*, not when it succeeds...?

svn-id: r40510
"
"ca7cf951a712335846c70444f40d4cfb3d88b30e","2009-05-12 20:40:15+00:00","Allow ESC button also be assigned in keymapper.

svn-id: r40511
"
"8d8e9d3aaa717616c001083913d0c1e6fff2c580","2009-05-12 23:28:49+00:00","Must include common/scummsys.h in graphics/pixelformat.h because it uses type 'byte'

svn-id: r40513
"
"0255cd0213a219fba69860200a987a0d837493a0","2009-05-12 23:30:10+00:00","SCI: Removed sci_memory.h/.cpp

svn-id: r40514
"
"7f2967084398b37c0c25e665c13e751fa350780c","2009-05-12 23:30:42+00:00","SCI: Changed object / script local vars storage to use a Common::Array

svn-id: r40515
"
"e3d79c58f0e94e03a8176a32ea1355e6dbb2a055","2009-05-12 23:31:02+00:00","Make data that is only locally used static

svn-id: r40516
"
"05c3c6ccb3ce41dbe5605073ed54a2290525e179","2009-05-12 23:31:55+00:00","SCI: Replaced SFX_OK/SFX_ERROR by Common::Error, and got rid of sfx/sfx.h

svn-id: r40517
"
"37a0157c970ee710ea704836d68a4c8dbd24d457","2009-05-12 23:32:32+00:00","SCI: cleanup

svn-id: r40518
"
"57caa940815f598c6f50b61c066253df85862ba5","2009-05-13 11:43:24+00:00","Moved the construction of _sound and _music to the constructor, in case the run() method exits before initiaze is called

svn-id: r40520
"
"d116a94e2b3aaed238aa370c11bc21d455b8b5a9","2009-05-13 11:59:49+00:00","Normalized types for several variables. Formatting

svn-id: r40521
"
"a6cf2bf2b1ce16411e5b52cad4faf1f9505bc8e3","2009-05-13 12:31:30+00:00","Reintroduced language string lists as a fallback for DELPHINE.LNG, since not all versions have this file

svn-id: r40522
"
"9cdb4c36a7b474b36cab35215ed66e390becedd3","2009-05-13 16:22:26+00:00","Fixed regression in SCI1 games from commit #40518

svn-id: r40523
"
"e940bcff23f0b5bf340b00a44368944489145535","2009-05-13 16:52:41+00:00","- Simplified SCI version detection a bit and clarified the different version feature flags (not used yet)
- Removed the version verification functions (they were only used for two specific cases, but the SCI executable reader is able to detect the exact SCI game version anyway, so there is no point in having these)
- Removed the empty GameFlags structure and replaced it with a 32-bit integer instead

svn-id: r40524
"
"636776cf441cc03502497ca6a0a3e74f2b2daa2c","2009-05-13 17:00:28+00:00","Updated the MSVC project files of the SCI engine

svn-id: r40525
"
"a866e90342b8797b8fa28fdbcca975daed3f5c05","2009-05-13 17:29:48+00:00","Make g++ 4.4 happy (warning about out of bounds access).

svn-id: r40526
"
"b9ac179b2e601f761cc60d431a3e5428f3740935","2009-05-13 17:33:58+00:00","Silence another g++ 4.4 warning.

svn-id: r40527
"
"f0182121f79685063edb50c9647e4f6f40bd0ba6","2009-05-13 18:12:17+00:00","Fix some variable may be used uninitialized warnings.

svn-id: r40528
"
"e35b77e0a764cd7e7f510a0849a36f90683e0d68","2009-05-13 19:03:12+00:00","SCI: Message: Added a few more subfunctions; cleanup.

svn-id: r40529
"
"d81d26fe2ad44f393df6f7b7ad67d12b666fba90","2009-05-13 20:51:36+00:00","Mention new Adlib emu

svn-id: r40530
"
"68ea155b8841c9404745852415d3f67236ed203c","2009-05-13 20:57:37+00:00","Add option --opl-driver to command line.

svn-id: r40531
"
"923d26d9fb69fa5c8e8da7900147fa0f6fbb7a0c","2009-05-13 21:02:03+00:00","Enable Audio options for a game when OPL driver is overridden.

svn-id: r40532
"
"297a9c6c5f0db09ea94fe9e8545b695fb4550abe","2009-05-13 21:02:50+00:00","Fix spelling of AdLib (it's AdLib not Adlib).

svn-id: r40533
"
"2ab8825e86f8d94cc940577842ddedee05dc015e","2009-05-13 21:04:43+00:00","Fix AdLib spelling in README too.

svn-id: r40534
"
"0f5b6ff730da0a029e1fc463691fcbde2fb8f51c","2009-05-13 21:07:19+00:00","- Fix AdLib spelling in NEWS
- Sync README with latest OPL related config options changes

svn-id: r40535
"
"6cf93ff8c5a7b230fa45b8f0ecdd472848e758ab","2009-05-13 21:08:58+00:00","Oops didn't meant to replace 'adlib' config name with 'AdLib'.

svn-id: r40536
"
"81c7f530e8661c2ab58f2f42128a370230820269","2009-05-13 21:14:12+00:00","Whitespace fix

svn-id: r40537
"
"049618ce15ee7e6656e5d1dd345161ff23bf3925","2009-05-13 21:15:12+00:00","Fix all occurrences of AdLib spelling:
- credits
- options dialog

svn-id: r40538
"
"41af51d645cfa6b5c5e33692c9ff7edd2f386763","2009-05-13 21:22:53+00:00","Simplified and re-enabled the debug code that shows pixmaps on screen and moved sciprintf() to tools.cpp

svn-id: r40542
"
"ab3bd3c3c0a0ccdba55d81fdf5c13b5437bae837","2009-05-13 21:25:37+00:00","Updated the MSVC project files of the SCI engine

svn-id: r40543
"
"9604e9973643a15d236dbf1f0ca5c470aaabd157","2009-05-13 23:08:36+00:00","SCI: Fixes a crash when loading SCI1.1 views without palette.

svn-id: r40545
"
"dd54193f9585b88627355e3da2d8d35581f43ed3","2009-05-14 07:05:51+00:00","Expand dump image code to cover all games, and add options to the debugger.

svn-id: r40548
"
"3117a8d87fe2f858274fad87f166eb16b1147e2b","2009-05-14 07:14:08+00:00","Removed the hack used to check for the existence of the CantBeHere() selector

svn-id: r40549
"
"f63cf2df8f137fc85b7493f9d60b2a1acc3162ea","2009-05-14 07:20:26+00:00","Minor corrections.

svn-id: r40550
"
"2ca7605050c25eff88931fe523c2b005856803f1","2009-05-14 07:28:06+00:00","- Enabled the code which puts the text inside the screen if it doesn't fit for all SCI versions
- Removed the check for the mechanism to resume suspended songs (it's no longer used)

svn-id: r40551
"
"999d46b241a4aade493f76b4f3623a39c4fed930","2009-05-14 09:12:27+00:00","Started using game-specific flags and removed/replaced some SCI version checks with flags.
- The SCI0 new script header and the angles check have been replaced by the GF_SCI0_OLD flag
- The SCI0 new drawpic parameter and the new priority check have been replaced by the GF_SCI0_OLDGFXFUNCS flag
- Removed the code which retries to use the newer script header in SCI0 games if the detected one is wrong, as that case should be covered by the GF_SCI0_OLD flag
- Removed the leftover min_version and max_version variables from gamestate
- Cleaned up kGetTime() a bit

svn-id: r40552
"
"891a8fae05d81f7cbc8da1e191e2da84107e0737","2009-05-14 10:24:39+00:00","- Removed SCI_VERSION_FTU_NEW_GETTIME
- Added defines for SCI0 flags, to simplify game entries
- Removed the leftover version_lock_flag from EngineState

svn-id: r40553
"
"4ec6c4127fec21a4c24e1d98bb93459a5dd182f5","2009-05-14 11:11:56+00:00","Added a feature flag for the SCI1.1 behavior of kSetCursor() in Eco 1 and KQ5 CD. Some cleanup

svn-id: r40554
"
"c3eaef2a958ff94172b2de49913f7f19506209d9","2009-05-14 11:15:36+00:00","Correct typo.

svn-id: r40555
"
"f64df361e0fa786e34092060ee8caa73440f5336","2009-05-14 11:27:54+00:00","SCI: Message: fix K_MESSAGE_SIZE

svn-id: r40556
"
"b3ace666d0744f54886645b8b8f30f2bffc27a63","2009-05-14 11:30:21+00:00","SCI: Renamed GF_SCI0_BEFORE_* macros to GF_FOR_SCI0_BEFORE_* (to emphasise that those are not Game Features); also moved their definitions into detection.cpp, to minimize the risk that they are accidentally used by other code

svn-id: r40557
"
"e03fba03b5362df7133b77ceebe7f86d9fd39caf","2009-05-14 11:46:02+00:00","Cleanup

svn-id: r40558
"
"f75c95045732f8562ce1f231417c345db43e50c4","2009-05-14 12:38:50+00:00","- Replaced SCI_VERSION_FTU_LOFS_ABSOLUTE with the GF_SCI1_LOFSABSOLUTE game flag
- Moved the version defines outside of versions.h

svn-id: r40559
"
"705eba635e1becebc3d85946a79444bcb1384c11","2009-05-14 13:22:42+00:00","Fix bug #2791699 - Feeble Files: Crash after OmniTV video.

svn-id: r40560
"
"4a9e7e43934ccc4d5bbb6cd033f96501bdbd327c","2009-05-14 13:51:42+00:00","Replaced the SCI_VERSION_FTU_DOSOUND_VARIANT_2 version check with the game feature flag GF_SCI1_NEWDOSOUND

svn-id: r40561
"
"abe09307eaf76047b006cb75e4e870d05c19b22a","2009-05-14 13:56:05+00:00","Updated the MSVC project files of the SCI engine

svn-id: r40562
"
"3ab81fa502408d453ce3788f163c0553316583e1","2009-05-14 17:06:47+00:00","Fixed regression with SCI1.1 games

svn-id: r40563
"
"d5e1ca4630d0f8694f059a06ab06155108a7e435","2009-05-14 17:50:09+00:00","- Added a new game flag to distinguish SCI1 EGA versions
- Fixed the wrong detected versions of Laura Bow 2
- Changed some code regarding the resource loader of Jones in the Fast Lane (which is still non-functional)

svn-id: r40564
"
"97bdf32a5974ba1a0504156ad2c4eb7403187a15","2009-05-14 18:55:30+00:00","Added the EGA version of Longbow, and partially reverted my previous commit. SCI1 EGA games should *really* be working now

svn-id: r40565
"
"443aacee79fad00ba17a76e48ffd86c160b9077a","2009-05-14 19:33:03+00:00","Added a parameter to the graphics resource manager to determine if the running SCI1 game is VGA or not (better than modifying the detected SCI resource version)

svn-id: r40566
"
"bf5e4431d828f5ae6aa6273cf3049ecca7fbc122","2009-05-14 19:42:46+00:00","Fixed regression in EGA games

svn-id: r40567
"
"42633c986540ba1be10f822a1ff874e351c4c921","2009-05-14 19:58:42+00:00","Fixed SQ3 Amiga by hardcoding the resource version (automatic resource version detection fails on this one)

svn-id: r40568
"
"185eeb4695f0793138ebda34b63af869c8a65fb4","2009-05-14 21:34:30+00:00","Only load used palette entries with SCI1/11

svn-id: r40571
"
"7fd6a22d72c926b1af3a569b9ec5f8102ad6db82","2009-05-14 21:47:38+00:00","Cleanup

svn-id: r40573
"
"61d9a42c56523388dc22c581c63c5ad0615ff750","2009-05-14 21:51:36+00:00","Fixed the detection entry for SQ3 Amiga, and added a special case for cursor hiding in SQ5

svn-id: r40574
"
"67ce8fee8545deae84bc7bc46a2c725e41c2e153","2009-05-14 22:33:31+00:00","SCI: A provisional fix for the 'invalid selector' problem in KQ6 and other
SCI1.1 games.

svn-id: r40575
"
"a3efc5611c94a6295d00488b0210e5e568c78c50","2009-05-14 23:09:04+00:00","Fixed various GCC 4.2 warnings, among them an actual longstanding bug (3 years :) in the quicktime midi code

svn-id: r40577
"
"cd063606a079f16ee363bcfdc3abc45fa2cf3eda","2009-05-14 23:09:30+00:00","SCI: Changed sci_obj_* enum value names to uppercase, in accordance with our code formatting conventions

svn-id: r40578
"
"ad1563e5dc06f1120958506eaabde705aaa46e34","2009-05-14 23:10:04+00:00","SCI: Stop SCI1.1 games from complaining about an 'invalid' savedir by setting the savedir string to the only value our kValidPath considers valid, namely '/'

svn-id: r40579
"
"7f2a1465970a842a6345a790610aadb0cb75e0fe","2009-05-14 23:10:22+00:00","SCI: Added a paranoia check to find_unique_script_block which causes us to bail out if we are about to get stuck in an endless loop

svn-id: r40580
"
"d2dfa0ac11ec1c5318ecef901919d260a27da30e","2009-05-14 23:39:16+00:00","SCI: cleanup

svn-id: r40581
"
"bd2e21c97afa10901fc8674fd23a76c6e3148fd4","2009-05-14 23:39:36+00:00","SCI: Fixed restoring scripts when loading a SCI 1.1 savestate

svn-id: r40582
"
"e36bb72995b0fc150514569e86ccd2fd95fe28fb","2009-05-15 00:22:53+00:00","Fix bug #2791846 - SAMNMAX: Invalid opcode (regression).

svn-id: r40583
"
"fe795a739e0db7a6e86182e9443b71624a786499","2009-05-15 02:12:11+00:00","Converted some code from fopen to Common::File - it's not currently used, but just in case it's needed in the future

svn-id: r40584
"
"fc87b82861e1a942dc887a4b37b9db03b92be14d","2009-05-15 02:18:51+00:00","Fixed a memory leak in the new unified decodeGfxUnified decoder method

svn-id: r40585
"
"cf62299c4aaee02d8b1461de8a424872e894ba08","2009-05-15 03:52:30+00:00","Removed standard library includes - they were marked with a FIXME to remove, and the current compilation under both MSVC8 and MinGW doesn't seem to need them.

svn-id: r40586
"
"03f5ad5cbbabc93fa0eda4366da5d77da0545014","2009-05-15 04:07:10+00:00","Bugfix for loadSetEntry to ensure graphics get allocated enough space. It's not exactly the way the original did it, but should suffice to ensure grahpics have sufficient space

svn-id: r40587
"
"bb45be960d1762a480ec3523d97955754c7ce9f2","2009-05-15 04:35:47+00:00","Converted various printf statements to use debug, warning, and error.

svn-id: r40588
"
"b7af9831da9d460509aafdac58b9ff6c927744f3","2009-05-15 04:54:45+00:00","Fixes for the backupBackground method when X < 0

svn-id: r40590
"
"24604dfa2275a47d543c64f92892c7f16099b96e","2009-05-15 04:59:45+00:00","Yet another strcpy() where source and destination may be the same...

svn-id: r40591
"
"bee8be58e38c3adadba0a258e84473d360fc2656","2009-05-15 06:29:08+00:00","LOL: implemented pit drop animation

svn-id: r40592
"
"5e5098bb966505e51bcc28fd42250678c0954a14","2009-05-15 06:36:44+00:00","Bugfix to prevent off-screen areas from being restored by restoreBackground

svn-id: r40593
"
"464b8cc7f3cf1f6f80a562ea8eedf4dd47a54f4c","2009-05-15 06:46:56+00:00","Corrected saving/loading of cached background areas

svn-id: r40594
"
"adaa0472c5e64d0ff6cae12368ffdfa61b24d2f7","2009-05-15 07:03:56+00:00","Bugfix to saving the width of a cached background area - the previous code was, for some reason, saving the width divided by 2.. this was causing corruptions during reload for cached areas with an odd horizontal width

svn-id: r40595
"
"565cfa074d25fbfc2458a65fe8fc300d78a2afa8","2009-05-15 09:04:21+00:00","Simplified SCI versions to be SCI version generations, and fixed some game entries in the process. Also, added a sanity check for invalid game entries

svn-id: r40596
"
"75c0d719c9d79eb1093c997960b3c6239c5a8a29","2009-05-15 09:27:07+00:00","SCI: Turned several script related SegManager methods into Script methods

svn-id: r40597
"
"8f0b776afbe57127ee94c8c33293f241fd7a0d3d","2009-05-15 09:27:39+00:00","SCI: Added SegManager::getScriptIfLoaded() method

svn-id: r40598
"
"9c44705f0549fde3aad7be6e991fa21b70f984a9","2009-05-15 09:28:31+00:00","SCI: Got rid of SEG_ID/SCRIPT_ID

svn-id: r40599
"
"d8d18d14ef501048d8e2c83ecfca2a17202de638","2009-05-15 09:29:03+00:00","SCI: Keep a single copy of the versionNames array; this fixes warning about it (well, one of its many copies) being unused

svn-id: r40600
"
"0c1e89f35514d62d2a3b8cc1293d613aacb8667d","2009-05-15 10:21:19+00:00","Add several Dutch Windows demo of HE games.

svn-id: r40602
"
"6ef7b6e1f414afbeda6822a5606f9399f831e27c","2009-05-15 12:39:58+00:00","Merged the 3 Huffman trees into decompressor.cpp, and changed their layout to be a bit more readable

svn-id: r40604
"
"78bf8c490d9cb6017a9fc83a8ebe7b8a14768415","2009-05-15 12:41:27+00:00","Reverted the SQ5 change introduced with commit #40574, as this makes the mouse cursor invisible in games which have multicolored cursors

svn-id: r40605
"
"3771f9aef2f80b3cfe0d3d284c4361267e04ba1b","2009-05-15 12:46:53+00:00","tinsel: fix drawing of some sprites, cursor and fonts in discworld PSX, palette is still wrong though

svn-id: r40606
"
"ce29fec17a9316b5fee0349d013a4d7863af9c03","2009-05-15 13:52:22+00:00","Removed unused defines and merged several different compression errors

svn-id: r40607
"
"87e8f94fde8330e1d5e600cc7b3e5c24225d6158","2009-05-15 14:07:45+00:00","- Moved all the files out of /sci/scicore and into /sci
- Moved /scicore/sciconsole.h into /engine, and renamed /engine/scriptconsole.cpp to /engine/sciconsole.cpp

svn-id: r40608
"
"4b52d7ae2ab355551f27419127bbb589b1e81046","2009-05-15 14:13:06+00:00","Updated the MSVC project files of the SCI engine

svn-id: r40610
"
"a897ee239d9c4ffc3ddd8f23cd94e267a534df14","2009-05-15 14:23:00+00:00","Fix compilation

svn-id: r40611
"
"340b5b93784ddf05b205ef5dc2f1120204c70743","2009-05-15 23:57:08+00:00","Added detection entry for Hebrew Discworld 1 release

svn-id: r40614
"
"c3cf7420bd097df594b1d278091bdfe4acea2cdc","2009-05-16 00:33:49+00:00","Fixed incorrect pathfinding data entry being deleted when a temporary actor animation is removed

svn-id: r40615
"
"358be385b53790d90e6974e0a237936fa59fbbb1","2009-05-16 04:03:37+00:00","Replaced value with proper constant, and named a previously un-named structure field

svn-id: r40616
"
"7ca0ca1dab227380425c314d285da4e0261e1b09","2009-05-16 04:04:35+00:00","Corrected mixed up parameter usage in the LoadFile method

svn-id: r40617
"
"e994b94c814ece7285228598c408b9939e2d3398","2009-05-16 04:50:52+00:00","Added a workaround for a discrepancy in the English version - one of the long messages had a LF in the middle of a word

svn-id: r40618
"
"bce47e7eb68d62476fd2fcd6cc4ec1bf33618d51","2009-05-16 05:34:16+00:00","Add initial support for DOS non-interactive demos of The Feeble Files.

svn-id: r40619
"
"1a427f8a9802db38ec7a5e4ea823fd05afcffc1e","2009-05-16 11:16:34+00:00","Added the font character lookup table for the German version of the game

svn-id: r40621
"
"fd7ffd6f74aa682f439192b45fca9284c388cb5d","2009-05-16 11:18:14+00:00","Add detection for Russian version of DW2.

svn-id: r40622
"
"bc6649ba453ecc196f7dd76730a6e5c774ee3cb2","2009-05-16 11:58:53+00:00","Fix bug #2790461: 'WINCE: Compilation broken'

svn-id: r40624
"
"a9c382a857e14db6970f7e084284f01849d15b75","2009-05-16 12:28:17+00:00","Update to latest version of GNU config

svn-id: r40625
"
"bef36104e3eb68801d70c0325f9c0dc4f283fe78","2009-05-16 12:35:48+00:00","Let ScummVM compile out of the box on FreeBSD

svn-id: r40626
"
"7f5bd2447ec9a87e483fcf7311bf373b1995a7a6","2009-05-16 12:46:59+00:00","SCI: Allow the VM to continue when the invalid selector access occurs at the start of LSL6.

svn-id: r40627
"
"6ebdb0096532f44c56294a38bfa0c94eeb641bb5","2009-05-16 12:53:05+00:00","LOL: some more opcodes for the draracle cave

svn-id: r40628
"
"f010eef04e8410fd48a5c9fe098bf10f7ddf81fe","2009-05-16 14:24:12+00:00","SCI: Turned some relatively harmless yet frequently occurring warnings into debug messages.

svn-id: r40629
"
"d2b163a66d39634ab38d3ee6b78d6324c3aae9ac","2009-05-16 15:32:20+00:00","Fixed problem with building the Dreamcast port in the srcdir:

When srcdir is '.', GNU make strips ./ from the paths before putting
them into $+.  This makes filtering out using the original paths not
work, so make sure the paths are absolute and not starting with ./

svn-id: r40630
"
"4c2d4a453dce998d469fd164d60b07b29a60b2e1","2009-05-16 23:16:02+00:00","LOL: implemented loading and saving via Alt/Ctrl + number keys

svn-id: r40631
"
"3c45ee20eb6c12184da0756c0c189d82abb8bcab","2009-05-17 05:12:10+00:00","Properly named the dialog menu item 'selected' field

svn-id: r40632
"
"17f468bb027ee9ef150a544286deb000b6a49e7d","2009-05-17 05:14:55+00:00","Removed the obsolete game Id list - it seems redundant, and stops the warning message coming up about Target 'cruise' upgraded to 'cruise'

svn-id: r40633
"
"dcca3197fcef3fef49362a2543f426663d63599a","2009-05-17 06:59:19+00:00","Properly named the script structure offset field, and fixed an endian bug

svn-id: r40634
"
"dc55a54365f1bb29b02bb8681dc4bcf0e230a63a","2009-05-17 07:22:07+00:00","Add more game demos.

svn-id: r40635
"
"6f0b6b5aed63f7a2a186442cc83e928554a4185d","2009-05-17 08:44:20+00:00","Changed the FLIC player to the common VideoDecoder interface. Note that currently the double animation in Bud Tucker's intro credits is broken, as the second background animation is not played

svn-id: r40638
"
"3f778de173ca331a332d1a0674f46aece2da8d6d","2009-05-17 08:51:34+00:00","Updated the MSVC project files of the AGOS and KYRA engines

svn-id: r40639
"
"da9b2868e0225e4baba77c25d3cbc55cd2d4cdde","2009-05-17 08:57:35+00:00","The 'frameSize' variable isn't used at the moment.

svn-id: r40640
"
"7d6287dee78ef357b846ef2e6d9c0b249a77c5d9","2009-05-17 10:01:21+00:00","Endian fix in script data access

svn-id: r40641
"
"c0a82959197884e27ecee6cad18f685b5c969614","2009-05-17 10:40:28+00:00","Add more game demos.

svn-id: r40642
"
"31adbb87691a88895925856b0da5202ca7602715","2009-05-17 11:05:10+00:00","Fix mouse cursor color in the demo versions of The Feeble Files.

svn-id: r40643
"
"7ffefa4d869f3cd820e27357b938a66cda84a2be","2009-05-17 12:23:50+00:00","Fixed compilation when LoL is not enabled

svn-id: r40644
"
"883e567f5e99e99b73db4dde793eaf37c86e6718","2009-05-17 13:22:33+00:00","fix display of machine.flc (alternative fix would be to use the COGS00xy.PCX files directly and get rid of this second .flc file)

svn-id: r40645
"
"0ceb92871b404ff598fdb10a0612c9524387fe08","2009-05-17 13:25:08+00:00","cleanup

svn-id: r40646
"
"7c5fbf83f5c72d797aaf490366252314173d4036","2009-05-17 13:37:54+00:00","SCI: LSL6 invalid selector workaround is now always active, not just at
startup. Added support for mirrored pic drawing.

svn-id: r40648
"
"2953f5b93535f4c2b38517ba5d5469969e68beb7","2009-05-17 14:22:05+00:00","KYRA1: fix script code (Japanese version of lephole.emc was broken by recent changes in the parser)

svn-id: r40651
"
"2f798b088fab7cb191ec08ce6ca76126c849690a","2009-05-17 14:53:47+00:00","Simplify cursor code.

svn-id: r40653
"
"b3a50b99fcc2663198f5cf6559eaaa0826d8faa6","2009-05-17 15:02:34+00:00","LOL: - some opcodes for the swamp
- fix last commit (which broke TIM scripts)

svn-id: r40654
"
"70a7fab1e69932b55b5290b19c48de4756e34d5a","2009-05-17 15:54:29+00:00","LOL: - fix animations for fletcher shop in the swamp

svn-id: r40655
"
"1b74d8557a220581d5ce7a609b1c88fcde4d04a2","2009-05-17 15:59:04+00:00","Change workaround to match comment description.

svn-id: r40656
"
"76285301aa191bcfc69aa6ae9b5caafc4eed0102","2009-05-17 21:52:31+00:00","Handle keyboard button press immediately.

svn-id: r40657
"
"1c86e186806d2ab66da377a642fc36627ba3e5d7","2009-05-17 21:55:24+00:00","Disable CD audio for PC98 by default.

svn-id: r40658
"
"6c3ef0f57eea8f4a116c66866b8f3e7ad9c5edcb","2009-05-17 22:12:36+00:00","Audio related cleanup.

svn-id: r40659
"
"dd6484066f701a8c456ed90a2608b05b200bd68b","2009-05-17 22:20:00+00:00","Fix sound file missing warning for DOS version of LoL.

svn-id: r40660
"
"9fec7402e54ab30a6bb1232f02346d7fdf44257b","2009-05-17 22:26:14+00:00","Cleanup.

svn-id: r40661
"
"28b5f1d2903b92f678332b3259f14e99a045baef","2009-05-17 22:41:09+00:00","LoL:
- Cleanup
- Implement support to load save from command line / launcher

svn-id: r40662
"
"bfe63b64a3fe50e2fd7a7699555d258dcb84cda8","2009-05-17 22:44:58+00:00","- Cleanup
- LoL: fix memory leak

svn-id: r40663
"
"380231fc3be9b62b748d10fd2a6d339af377019c","2009-05-17 22:49:25+00:00","Only set 'cdaudio' config entry, when FM-Towns version is present.

svn-id: r40664
"
"d4fbcb35ff333f307fedc2fbffcb8d7509153468","2009-05-17 23:01:35+00:00","Don't protect save slot 0 for LoL.

svn-id: r40665
"
"ffed114ccc19259ef53df2eff406c27dbd462b3b","2009-05-17 23:14:10+00:00","Fix crash after loading game from cmd/launcher.

svn-id: r40666
"
"b48b4fd82d8c2e26872a9accf6b247220015c5fe","2009-05-17 23:15:26+00:00","Fix possible leak.

svn-id: r40667
"
"105f17374a2fa4155941c09972d414e479b50f00","2009-05-17 23:41:16+00:00","Formatting.

svn-id: r40668
"
"aa4964a46feb7d354ccc5fff67740a2834ea5e93","2009-05-17 23:42:54+00:00","- Fix mouse cursor visibilty on load game in LoL
- Only show mouse cursor after cursor change, when the mouse was visible

svn-id: r40669
"
"da0a07b44126757ffb1a3f561754950466bfa7bf","2009-05-17 23:51:42+00:00","Formatting.

svn-id: r40670
"
"8a3f5bd520b387fced513145f4d9e0caee23aaf3","2009-05-17 23:57:42+00:00","Formatting.

svn-id: r40671
"
"50805cb7ea26d2d2220d1a61d943b1ea7086048c","2009-05-18 00:03:27+00:00","Disable GMM save/load in certain scenes.

svn-id: r40672
"
"80ed10fc7244478aa98f9fd86e07f548ae2532e8","2009-05-18 01:39:58+00:00","LOL: - implemented fog spell

svn-id: r40673
"
"243bb790e80dee444e6d895b1a70a98f1c47b836","2009-05-18 06:34:23+00:00","LOL: fix 'rest party' button (broken after changes to the button handling)

svn-id: r40674
"
"1239949ef2acf3179ef76fac1850aaa19792ffd9","2009-05-18 07:55:13+00:00","Changed errors to be fatal, as most of them are fatal conditions. Some of them have been changed to warnings for now, as they occur in certain games (e.g. SQ4 floppy, SQ4 CD and KQ5 CD)

svn-id: r40675
"
"1e547f320c83d276834a432572a8ac61ccfe4fc8","2009-05-18 08:28:04+00:00","Removed the unused file and line parameters from the list and list node lookup functions, and removed the LOOKUP_LIST and LOOKUP_NODE defines. Also, disabled the unused LOOKUP_SPECIES define

svn-id: r40676
"
"76ad23ddbd90fb1cb8bb3ee8a884d763e1186c69","2009-05-18 09:07:31+00:00","Added a workaround for LSL6, thanks to waltervn's comments

svn-id: r40677
"
"ecd893ca48f6082fdf9c0d872c4ec7dcc6e8526a","2009-05-18 09:59:54+00:00","Fixed incorrect order of parameters in the workaround debug message shown for LSL6

svn-id: r40678
"
"e59e65aa993a7af0bedf03e5d3e2b3cfade64fc5","2009-05-18 10:40:22+00:00","Fix crash when any movie is played in the Macintosh version of The Feebles Files, a regression caused by revision 36085.

svn-id: r40679
"
"220fe60424c43890178cefcc636409a49942c865","2009-05-18 11:53:04+00:00","Fix some error/warning calls. (might need some review, from someone familiar with SCI)

svn-id: r40680
"
"3406790cc310881ca6f60d4f3c99ad6df4fae7ef","2009-05-18 11:56:00+00:00","Don't print __FILE__,__LINE__ in *_list related debug output, it would only print klists.cpp and the according line anyway.

svn-id: r40681
"
"dd12c0d06a099b30200e56bf1d58b09221ce5396","2009-05-18 11:57:02+00:00","Oops didn't mean to remove new line from this format string.

svn-id: r40682
"
"fc9096ba1d8a08af5e6d84981087c6b506e86b5b","2009-05-18 12:34:03+00:00","SCI: Replaced SegManager::getHeap() by Script::getHeap()

svn-id: r40683
"
"f59456274530175e6b41d78d29c95b6db1c4299a","2009-05-18 12:34:25+00:00","SCI: Added a FIXME to graph_save_box

svn-id: r40684
"
"5170acd00c9ca7cdeebc72ac172292e9dc3b69fe","2009-05-18 12:34:56+00:00","SCI: Removed the unused member SegManager::gc_mark_bits; changed some int params to SegmentId

svn-id: r40685
"
"62876a5ad5bd03c227188dd8bf297fb4e2096b6e","2009-05-18 12:35:18+00:00","SCI: Changed SegManager to not pre-allocate _heap entries (leave the memory management to Common::Array)

svn-id: r40686
"
"a0b6f21a1a6d9e102bc30df963d011b988e1aae6","2009-05-18 12:35:42+00:00","SCI: Fixed Table::initTable to invoke _table.clear()

svn-id: r40687
"
"99713ca7fa078adf7c2e2b29f210bf8aa85d89ac","2009-05-18 12:36:04+00:00","SCI: Tweaks, cleanup

svn-id: r40688
"
"9da07f21fe5edf8e3820a25f488a12491ccfc9d3","2009-05-18 15:07:04+00:00","SCI: cleanup

svn-id: r40689
"
"790e235ae17382b70f4a90f7a6fa931fde476a64","2009-05-18 15:07:31+00:00","SCI: Removed ENTRY_IS_VALID macro

svn-id: r40690
"
"e0366f00bce7d35807425bd9478a0e73a63b5bf1","2009-05-18 15:07:51+00:00","SCI: Removed SCI_SIMPLE_SAID_CODE and the associated heavily bitrotted code

svn-id: r40691
"
"4ed457850a61fec051996ae892bd43687440bbb2","2009-05-18 15:21:24+00:00","Removed a leftover simple_said define

svn-id: r40692
"
"b2b08cc606597dcbc93dcb346f845083e9dc5182","2009-05-18 16:00:15+00:00","Typo.

svn-id: r40693
"
"b0c1cf52e0e4d1e092f9cc25fce9eb86b68b7670","2009-05-18 18:15:45+00:00","SCI: Got rid of EngineState::execution_stack_pos; overally, the resulting code should be even stricter in detecting invalid VM stack access (and some bugs when loading saves might be fixed now...)

svn-id: r40694
"
"a652e1ae3d3a57a20c9daf487a5ee4c91e7966b2","2009-05-18 18:16:01+00:00","SCI: Added FIXME

svn-id: r40695
"
"b1bdbef419ea9bec09c9a96309ba55cf456d505e","2009-05-18 19:53:57+00:00","Add some code differences for LoL intro demo.

svn-id: r40696
"
"7e11e57339dd70a144966791743b627ccdfca60b","2009-05-18 19:56:54+00:00","tinsel: start adding transparency support to Discworld PSX

svn-id: r40697
"
"b70bbcf3064e7b8f882d7287b02e3408b8179d88","2009-05-18 20:05:30+00:00","tinsel: fixed 'Unknown drawing type' for inventory in Discworld PSX

svn-id: r40698
"
"cc250e002998bfff54553d55580b8bc73fe715e7","2009-05-18 20:07:09+00:00","Don't delay any longer, when engine is asked to quit.

svn-id: r40699
"
"68b3cc89aed973640a5be3b394cf0effeff8b9c5","2009-05-18 20:08:18+00:00","Fixed long standing palette loading bug in WSA v1 code.

svn-id: r40700
"
"d66365f376f2939c53243f58f745d853ecd708cd","2009-05-18 20:28:08+00:00","LOL: fixed automap

svn-id: r40701
"
"eb92554db943dd3a60f79a84ced6380478cbc656","2009-05-18 21:02:52+00:00","Fix bug #2791868: 'GUI: Glitch when closing menu after hovering on option'

svn-id: r40702
"
"1d90907f93fe551e3d8fee5b246ed29226724ff2","2009-05-18 21:35:08+00:00","Fix bug with AGI ignoring music volume.

svn-id: r40703
"
"8576b162dc99dc706e21ee3d5584e86c89ed3181","2009-05-18 21:37:13+00:00","Implement FR#2103654: 'AGI sound volume'

svn-id: r40704
"
"273b93f3a7edfc641b0756b807ac512b3d97f96b","2009-05-18 21:45:09+00:00","Preliminary support for LoL intro demo.

svn-id: r40705
"
"29cf3ed1a43b76ed2bd6da2c24261ce0375f8a50","2009-05-18 21:56:09+00:00","Add support for music in the LoL intro demo.

svn-id: r40706
"
"90b4afd41b834f90520eebefcb9f6e332bacc546","2009-05-18 22:11:56+00:00","Add some simple implementation for type 8 data blocks:
- Fix sound effect in LoL demo

svn-id: r40708
"
"2f72831876f6cd5cc94ddcfa5742886059c784fc","2009-05-18 23:14:37+00:00","Don't crash on debugger shortcut when no debugger is present. (Fixes crash in LoL, when the user tries to press Ctrl+d)

svn-id: r40709
"
"62190b57d875a7bc302b7a7fad1393308971f4eb","2009-05-18 23:21:40+00:00","Don't quit when the user selects 'Load game' in main menu.

svn-id: r40710
"
"8add60bf8c3a524ba8bd1354ed31de6315c4dbc6","2009-05-19 00:02:10+00:00","SCI: Cleanup/paranoia checks

svn-id: r40711
"
"091b347a7e8bfa2162cdade24a9386a92c2e475c","2009-05-19 00:02:44+00:00","SCI: Init the diff .#&$ EngineState::flags field in the constructor and when loading -- fixes many weird crashes upon loading (lesson to be learned: if you add fields to a class, then (a) init it in the construtor and (b) if the class support serializing, make sure the new field is handled when saving/loading :-)

svn-id: r40712
"
"4755fcb130036f34ec5a3191138b2a3de2140896","2009-05-19 00:33:48+00:00","SCI: got rid of EngineState::savegame_version; some cleanup

svn-id: r40713
"
"136fcb3810c556c3a5d0e71ac1cf878c7538eb50","2009-05-19 00:34:10+00:00","SCI: Introduce a new subclass StringFrag of MemObject (does nothing right now); switched MemObject to subclass Common::Serializable

svn-id: r40714
"
"7561bd9dfbf325a15d330caef00438cafc9f7ab3","2009-05-19 01:13:29+00:00","Remov lots of superfluous debug output.

svn-id: r40715
"
"36ace75983e62f423fb6842647d9190fc0ea69bc","2009-05-19 01:20:54+00:00","Improve looping of videos, in the demo version of The Feeble Files.

svn-id: r40716
"
"783fb058b02a638a40cf5a6d1a50cedf0f26cc14","2009-05-19 01:39:18+00:00","Formatting.

svn-id: r40717
"
"789cb98492a46494690414ceac38c3bf62f47326","2009-05-19 01:58:51+00:00","Correct translation error.

svn-id: r40718
"
"df3357159c2262ddeb70bea241364df5bf929418","2009-05-19 02:10:58+00:00","SCI: Added some stubs for LSL6CD (lores).

svn-id: r40719
"
"613ca85bf9577b8f145e6daece1c739da8d2d759","2009-05-19 11:22:06+00:00","SCI: Doxygenified a few comments

svn-id: r40720
"
"c24559877d82d3a936177c9b502a35627ded0c15","2009-05-19 11:22:20+00:00","Updated link to CxxTest homepage

svn-id: r40721
"
"2b32ba7cb375dd80a119f56f661811971c671ca3","2009-05-19 11:22:49+00:00","Converted unit tests to use TS_ASSERT_EQUALS / TS_ASSERT_DIFFERS where possible; also made them comply a bit more to our code formatting guideline

svn-id: r40722
"
"42cd21840055d97315eac8b78f110010e5270d2d","2009-05-19 11:23:13+00:00","Improved Common::Serializer in several ways:
* Added support versioned serialization
* Added a convenience API for handling 'magic IDs' transparently
* Exposed the err()/clearErr() methods of the underlying streams
* Added a basic unit test for versioned loading (more should be added, in particular for saving)
* Removed the syncString(char *, uint16) alias for syncBytes(byte *buf, uint32 size)

svn-id: r40723
"
"4d59f620f9fdc1dfd7ccd6c7d30a0b5de480eb20","2009-05-19 11:30:51+00:00","SCI: Changed K_FILEIO_FILE_EXISTS to check regular files too.

svn-id: r40724
"
"65b5d318140c7ff846455a37ec7ae63e635bcdcf","2009-05-19 11:42:14+00:00","COMMON: Removed Stream::ioFailed() and clearIOFailed(), as they are deprecated; however, retained ioFailed in SeekableReadStream and File for now (so for now this mainly affects WriteStream subclasses)

svn-id: r40725
"
"67f1b6fae7f17e3f4b7672e9145d467fe151562f","2009-05-19 12:39:53+00:00","- Formatting
- Warning fixes
- Rename 'test_read_v2_as_v1' to 'test_read_v1_as_v2', to match behavior

svn-id: r40726
"
"5d942f9d70d7f0da01fe3f8fefe18db67eb7e09e","2009-05-19 15:59:17+00:00","Removed some redundant variables, and renamed some variables with strange names ('foo'?)

svn-id: r40727
"
"4f6bc506153550a16efd02a10b0b377cce54c434","2009-05-19 17:39:03+00:00","Some fixes to the video decoders, thanks to salty-horse's comments

svn-id: r40729
"
"e358b13ef96e15fc1788841633eb09b1f739cc90","2009-05-19 19:56:53+00:00","Changed calculations based on frame delay to be based on the scale of 1ms, not 1/100. This fixes the FLIC player and also makes the overall code a bit clearer and easier to understand

svn-id: r40730
"
"743650506b3157d118c8d5497aeecdc64d851778","2009-05-19 20:30:57+00:00","Fix regression introduced in r40438. Saves were badly broken.

svn-id: r40731
"
"a1364e37f7182d3a88aea659e07fc9e9f196719b","2009-05-19 20:40:21+00:00","SCI: Some debugger fixes and cleanup.

svn-id: r40732
"
"40dd214789ec627624a7703798907b7afbf50b8e","2009-05-19 21:09:43+00:00","Start of fixing bug #2537054: 'AGI: Using GMM to load causes graphics glitches'
The engine still crashes when load from GMM occured with a text box on screen.

svn-id: r40733
"
"358b1a7c7ea08e60c88e7318345494d3e775cda2","2009-05-20 04:07:34+00:00","Removed the 'seamless' flag. It was something I added to cope with the fade
in/out behaviour of the MPEG cutscene player, and no longer seems to be needed.

svn-id: r40734
"
"caf9bf0941babc523be7c37bb10bfbb2213f5c0b","2009-05-20 04:29:09+00:00","Removed the rest of the hard-coded cutscene information. It was only needed to
get the number of frames of a cutscene (to find the 'lead out frame'), but this
information is already provided by both the DXA and the SMK players. (It wasn't
provided by the now obsolete MPEG player.)

svn-id: r40735
"
"6ec870303ff3532873f652fb1a565d72b0079645","2009-05-20 10:43:18+00:00","- Reverted commit #40730, as it introduced rounding errors
- Properly fixed the FLIC player
- The sound chunk tag of DXA files is now read by the DXADecoder's loadFile() method

svn-id: r40736
"
"6be7da1c8395addcfaf04981e593d52ec15f70f0","2009-05-20 17:51:37+00:00","fix warning

svn-id: r40737
"
"f5f48fff3a8de6ac2f0bcb54514dd955009c3742","2009-05-20 17:51:55+00:00","SCI: Moved the few kernel functions that were in kernel.cpp to a new file kmisc.cpp

svn-id: r40738
"
"7d54385dea265b3fa26016a191fb6223203a5f27","2009-05-20 17:52:12+00:00","SCI: Moved some private decls from kernel.h to kernel.cpp; removed pointless (and incorrect) fallback code in k_Unknown

svn-id: r40739
"
"4c786a44c941268356b711c2f374eedf9b7e4db8","2009-05-20 17:52:33+00:00","SCI: Changed EngineState::opcodes to a Common::Array (maybe we shold just remove the relevant code completely, though, it seems useless, esp. as long as we hardcode the way we interpret every opcode

svn-id: r40740
"
"4f55f1e730fa50d354f47c3558d3d0aca68aa0a1","2009-05-20 17:52:49+00:00","SCI: Moved code related to loading/setting up kernel function names from vocab_debug.cpp to engine/kernel.cpp

svn-id: r40741
"
"bba91075bf8820e062d3684c820c6aa9782b77a1","2009-05-20 17:53:31+00:00","removed trailing whitespaces

svn-id: r40742
"
"bfb29080f14499c456c3b760d18a29d5bf0be825","2009-05-20 20:05:53+00:00","Remove superfluous indeo3-includes

svn-id: r40743
"
"43f58b2869f97c055f56aa14f6eb4153d272b2b3","2009-05-20 20:41:10+00:00","Moving CoktelVideo (IMD/VMD) and the Indeo3 code (needed for Urban Runner's VMDs) to graphics/video/

svn-id: r40744
"
"8e4b31f5220d73a211a2e822c27989fd96b65030","2009-05-20 21:00:52+00:00","Fix bug #1544799: 'ALL: Engine creates launcher entry when failing to launch'

svn-id: r40745
"
"c9ff1d74925ad6a381bc714b57ddc8e56c6c235c","2009-05-20 23:13:44+00:00","- Changed the demo player to allow playing directly inlined scripts using a new demoIndex field in the detection array
- Changed the Inca 2 demo entry to use a directly included script instead of triggering on 'demo.bat'

svn-id: r40746
"
"f2668f8a7d8f460435756c31056ec07a578610af","2009-05-21 01:30:28+00:00","simplified sound handling in animation sequences

svn-id: r40747
"
"f3f0be30fd520550ab286d660210dc099a8a3ced","2009-05-21 07:23:48+00:00","Fixed indentation. (Don't worry, it's just a small change, and it matches the
original FFmpeg code, as far as I can tell.)

svn-id: r40749
"
"465da49782171d69e2fa9804c60e260f1e3a8efa","2009-05-21 08:06:15+00:00","Made BRA demos start again by partially reverting commit 39773. Multiple inventory support must be done somehow differently.

svn-id: r40750
"
"b973169a3dbfd84688b2811a12e1d18e713eff9d","2009-05-21 09:56:55+00:00","Added proper dependencies for the 'plugin_dist' target.

svn-id: r40751
"
"50b77d876d2b88433ca46eee468023d6bb46644a","2009-05-21 09:58:12+00:00","Added comment and warning message about possibly missing cases.

svn-id: r40752
"
"234828825afe62b26f9133ad8eee02e52c63e44f","2009-05-21 10:14:05+00:00","Ack, can't use something set with := in the dependency section.  *sigh*  New try.

svn-id: r40753
"
"fddd2a2214ae8d05fb8dc48cd8515427795d44c8","2009-05-21 10:34:13+00:00","Slight cleanup to kGetTime()

svn-id: r40754
"
"11251cf296db70373c00f1761c8b4e6208426618","2009-05-21 10:48:03+00:00","Moved the Coktel video player into its own subdirectory

svn-id: r40755
"
"6bc543d4999f8f2c594d13e9d68fa3bdc53e668b","2009-05-21 10:52:13+00:00","Updated the MSVC project files with the latest changes to file structure

svn-id: r40756
"
"2bf25c3865fe5c8ab3d40805c62275a8060b98a4","2009-05-21 11:49:47+00:00","Micro-optimization:  Don't re-strip plugins which are not modified.

svn-id: r40757
"
"f583a10ec97b3f4ada56ed5e296d4143a4e10e30","2009-05-21 12:46:39+00:00","Workaround for shells that treat an empty list in for as a syntax error...

svn-id: r40758
"
"b7f8990ba81f81db3243ae3f9069c4d9f12754aa","2009-05-21 13:02:56+00:00","Renamed the DXA, SMK and FLIC video decoders to reflect the fact that they're decoders, not players

svn-id: r40759
"
"e51481d69bb583cf0b6f0bacd3353eda960b12c8","2009-05-21 13:13:09+00:00","Remove trailing tabs/whitespaces.

svn-id: r40760
"
"2e04f5263841fa6de9c0805fcde0e73debfb7998","2009-05-21 13:28:32+00:00","I'm no longer sure I've really seen case 12 happen, so don't mention it.

svn-id: r40761
"
"6e93825b2e4d512d082bc8748ee169a09a234a94","2009-05-21 13:38:52+00:00","Move Indeo3 static data from indeo3data.h to indeo3.cpp.

svn-id: r40762
"
"6bd5dea027245d617687b7e4a4b76b52d84ce52d","2009-05-21 16:46:40+00:00","LOL: - implemented freeze spell
- fixed saveload code
- added some opcode for the swamp

svn-id: r40763
"
"54d7bfcd8a12f330c82d1beba8a3c69ed9e7866b","2009-05-21 17:00:25+00:00","Ooops: Forgot to check in my changes in the detection array for the demo changes (r40746)

svn-id: r40764
"
"10b1b28610dedb876187e65836d083c15f3ea6ad","2009-05-21 17:12:33+00:00","Splitting a few helper functions out of gob.h

svn-id: r40765
"
"60b007cfd04625512bc7c62b8aebd7c2923f078b","2009-05-21 17:13:41+00:00","Only process key/mouse press/release events in GUI.

svn-id: r40766
"
"4799cbf1c3666bffc460786db4a9067163cdff5c","2009-05-21 17:18:46+00:00","Removed the PREG, PSTK, IS_NULL_REG and REG_EQ defines

svn-id: r40767
"
"e1b4f63343c3e3f1f9f1f8ebb012b0e0f12478c9","2009-05-21 17:25:29+00:00","Fix some Kyra1 movies.

svn-id: r40768
"
"dfffea1bf4cd4eceb28933f4fc2f1cc76477f0ea","2009-05-21 17:28:43+00:00","Updated the MSVC project files of the gob engine (added helper.h)

svn-id: r40769
"
"25980bc29cd158bf059a1b88106ac9eeebca8eff","2009-05-21 17:49:51+00:00","Changed code to closer match original input handling.

svn-id: r40770
"
"4c1754127612778a8bf8e28f28b80ad20918049b","2009-05-21 21:49:43+00:00","SCI: got rid of vocabulary_lookup_sname

svn-id: r40771
"
"b4312540701c172fc80b50c0be03fd92ab530aeb","2009-05-21 21:50:11+00:00","SCI: Removed the 'save_dir' gui hack

svn-id: r40772
"
"7ed8d7f573da40d19299f14d304491184fe221a8","2009-05-21 21:51:50+00:00","Proper fix for bug #2537054: 'AGI: Using GMM to load causes graphics glitches'.
Save/load via GMM is not allowed in certain situations now.

svn-id: r40773
"
"36fe37443d53c64d0172791a5bc6226c7fe199c0","2009-05-21 22:03:23+00:00","SCI: Added support for KQ6 movies.

svn-id: r40774
"
"b8749923090d60e2e73a602a6f0d62ea1361bde6","2009-05-21 22:23:04+00:00","Attempt to bring event recoredr to life. Still crashes on exit, though.

svn-id: r40775
"
"5076b06bb654abe9eecf98c6fe60ef8a378acf2f","2009-05-21 22:29:49+00:00","LOL: - implemented Lightning Spell

svn-id: r40776
"
"24242bfb4ce5701d9075c27b835a60c75c57fb90","2009-05-21 23:27:12+00:00","Updated the MSVC files of the SCI engine (added the KQ6 SEQ decoder)

svn-id: r40777
"
"31b009e027865eb1e95688415cddde664bdf5031","2009-05-22 00:19:25+00:00","Fix RTL in Lands of Lore.

svn-id: r40778
"
"230277739c5bef9c49808535627030873fde8d1b","2009-05-22 00:21:14+00:00","Cleanup.

svn-id: r40779
"
"f7b1aa2a8eb8482db95e12e17c57e4cb41b4e180","2009-05-22 00:37:41+00:00","Fix crash when playing LoL demo.

svn-id: r40780
"
"32c2e93ecccf999732975c384dcb28f2fc3e112a","2009-05-22 00:58:09+00:00","Properly initialize MT-32 for LoL demos.

svn-id: r40781
"
"274bb7b0dde8d5def988d726c42ad1b227b24ebc","2009-05-22 01:03:14+00:00","Oops typo.

svn-id: r40782
"
"240cef8aa620466f3cfecdf60cb5d4fa8c5d8606","2009-05-22 13:39:57+00:00","Use correct file for MT-32 initialization for Kyra2 SEQ player based Lands of Lore demo.

svn-id: r40783
"
"cc35c15f395bdbcecc38b8699c73ea341886244a","2009-05-22 14:09:51+00:00","Add hack so LoL intro demo will init MT-32 properly.

svn-id: r40784
"
"64e75b91b787e0199b73949a4642cdd665b120f2","2009-05-22 17:15:39+00:00","Fixed a warning: printf('%f') should take a double, not a float.

svn-id: r40785
"
"32533af8cf3787d979303d70d169dccab5e269cc","2009-05-22 18:14:00+00:00","LOL: (temporary) fix for button callback assignment. The automatic list capacity increase seems to fail somehow.

svn-id: r40786
"
"ef4947060ef637d6b7e84c6c1b2981e69db8af91","2009-05-22 22:19:15+00:00","Some initial WIP code on kDoAudio (still not working)

svn-id: r40790
"
"54a170978ad481a142829997f0d27076033b3a5b","2009-05-22 22:28:06+00:00","Handle mouse move events like the original.

svn-id: r40791
"
"89d4bcbf265533f51cfe9ed9ee82c96956acbf65","2009-05-22 22:32:57+00:00","Do not define checkInput as virtual.

svn-id: r40792
"
"017bb21945f91a0f3459ccc7c7eac6608082acf3","2009-05-22 22:43:13+00:00","Change button list handling to closer match original. This fixes a crash when loading via GMM.

svn-id: r40793
"
"b82f2ce538926db40d9b0eeab201ab04f1fa9065","2009-05-22 23:08:58+00:00","struct Button contains non POD members, thus don't use memset on it.

svn-id: r40794
"
"02ff3d29092cea246632b7afe2b7a34c1d99f834","2009-05-22 23:10:52+00:00","Fix crash with MSVC.

svn-id: r40795
"
"37b823531c3cc0cad5a885976f0d3eac0f371e12","2009-05-22 23:16:53+00:00","Yet another fix for MSVC (it seems it initializes all pointers in debug mode to 0xCCCCCCCC instead of 0).

svn-id: r40796
"
"9e000c662b8645257f2fbd66c072ea54ee7786bb","2009-05-22 23:22:13+00:00","Better safe than sorry, add an explicit default constructor for Button.

svn-id: r40797
"
"c87f3199f82c5166a680f1ce9952777e8b4a6068","2009-05-23 00:05:16+00:00","Reserve opcode array entries beforehand, should save some reallocation and copying.

svn-id: r40798
"
"82b9cf95753df845c26ddfcf7bab6e0b5c0ee805","2009-05-23 01:15:20+00:00","Cleanup.

svn-id: r40799
"
"248f415face22b2def45e84630dac66fb407aad9","2009-05-23 01:41:09+00:00","SCI: Added partial support for SCI1.1 adlib music

svn-id: r40800
"
"3811df7aca96071489381a004981b36d578cf427","2009-05-23 10:07:01+00:00","Fixed the incorrectly placed views in the KQ6 intro, by reintroducing port bounds in the graphics resource manager and removing two relevant hacks

svn-id: r40803
"
"2590511c7d90ea408df1a5ef92e17154d1b38c31","2009-05-23 10:22:27+00:00","Turned some errors into warnings, as they occur in KQ5CD

svn-id: r40804
"
"b4126beea2a22a3ca57f756cd9b026cb5e555102","2009-05-23 10:50:24+00:00","The third and fourth parameter in changePortBounds() are x2 and y2, not width and height

svn-id: r40805
"
"f77dfe9d23374733c2553765bcdc7037ed2b649d","2009-05-23 11:56:27+00:00","Fixed the incorrect placement of the copyright message in KQ6 on screen

svn-id: r40806
"
"91d2fa2d0de0292292344736b56b7e646ac9772f","2009-05-23 12:08:36+00:00","Fixed clipping code for texts which do not fit on screen, and added a warning when this happens

svn-id: r40807
"
"39f9894ee58c8f494216647e994566441f68b746","2009-05-23 13:26:45+00:00","Added a stub for SetVideoMode(), and fixed some of the palette glitches in the intro of KQ6 thanks to some comments by waltervn. Also, commented out the bounds rect in gfxr_pic_t, as it's currently unused

svn-id: r40808
"
"cbce9e11790decbce0f2a3b9c9d802db984e9b55","2009-05-23 18:43:04+00:00","LOL: implemented fireball spell

svn-id: r40813
"
"6a7aae788dfb7c6dfb9e84f1afff19d9c5868130","2009-05-23 18:55:56+00:00","Some more WIP code for kDoAudio(), taken from Greg's SCI engine. Sound and speech in KQ5CD should be working now

svn-id: r40815
"
"fc0fab937ac9779311a8c9a341eb371fd3dfb90a","2009-05-23 18:57:47+00:00","Oops, fixed silly typo

svn-id: r40816
"
"8dd601d35e26c7a50ee8cabf3ec69ba72e268d20","2009-05-23 19:59:42+00:00","Moved the 'dump' and 'dissectscript' commands to console.cpp and renamed them to 'hexdump' and 'dissect_script' respectively

svn-id: r40818
"
"434af6e42dfe0eacd7e048f9896bf91a7e2a29cc","2009-05-23 20:21:17+00:00","Adjust credits.pl for new website code.

svn-id: r40819
"
"5878acfc0e5dc6e6f1096d793bcafc0fa94b5d2c","2009-05-23 20:25:09+00:00","Adjust tools make rules for new website code

svn-id: r40820
"
"be6fd784b43ba2f6c6055e939f33d198cdd8d55b","2009-05-23 20:38:08+00:00","Allow for different MOD signatures

svn-id: r40827
"
"a19c23ab7a3f0daaf3e047d96865d78c92f4841c","2009-05-23 22:21:42+00:00","SCI: add (unused) palette revisioning support

svn-id: r40838
"
"5a4b3c54414d7415af6a0838ba558177586a4427","2009-05-23 23:33:31+00:00","KYRA/LOL: restructured voice playing code so that audio compression can be supported

svn-id: r40839
"
"dfb6ca6bae37e54cd8477c8313077c22fcd5a1c7","2009-05-23 23:49:47+00:00","Add support for 'getTotalPlayTime' in LinearMemoryStream again.

svn-id: r40840
"
"b28279accccdfe65096bb58bb8368f8a43c609d3","2009-05-23 23:58:40+00:00","Cleanup.

svn-id: r40841
"
"8989e140c7407706703c9a53973357a2e59b9426","2009-05-24 00:07:23+00:00","Cleanup.

svn-id: r40842
"
"ad4549f28d4ebc5668c0e917a37a3b34473acc84","2009-05-24 00:11:28+00:00","- Reorder supported codecs list
- Add changes for upcoming audio compression changes (file extensions changed to standard ones)

svn-id: r40843
"
"bef88f3b617cd861e7ae76d4fb4964a9701d8f9b","2009-05-24 00:15:34+00:00","Remove leftover (already commented out) code.

svn-id: r40845
"
"c2812140274d1c37e57f732f0a30e8a39d30e2ca","2009-05-24 00:53:22+00:00","LOL: fix valgrind warning

svn-id: r40847
"
"344caa88fcf8ce352e7bee6b2c6d4a8df2df548e","2009-05-24 01:29:09+00:00","Make various Sound functionality SoundHandle instead of filename based.
- This fixes multiple sounds being played at once in Lands of Lore

svn-id: r40848
"
"70f8f1fbf3fc39e7ce280883d43a54cc71bc7760","2009-05-24 01:36:25+00:00","Add color and color component getters to Cine::Palette.

svn-id: r40849
"
"c0302661ed3baac83c67002a6af072eabd08eb3a","2009-05-24 01:37:51+00:00","Cleanup.

svn-id: r40850
"
"57e104c62525a30ff3f44d1b91d1da5bae772047","2009-05-24 04:29:44+00:00","Fixed the display glitch associated with the animated handle in the engine room

svn-id: r40851
"
"5a32f3f502de47486368dfcbbc271e167a596d44","2009-05-24 08:27:33+00:00","tinsel: sound samples and speech support for Discworld PSX using VAG. Based on a patch provided by clone2727

svn-id: r40852
"
"8ab0f0256e343c0e8ee28ab67f1244171d1e5d4f","2009-05-24 09:40:48+00:00","Fixed audio synchronization in the CD version of KQ5

svn-id: r40855
"
"b993eba6a59f4f1edaac5bf75f8338e3ec7cc799","2009-05-24 11:37:24+00:00","Removed the line feed workaround, and added explicit int16 castings to the FROM_LE_16 macros in the font system - this fixes a bug in the engine, allowing it to properly handle all non-printable characters correctly

svn-id: r40858
"
"725ff24170dd23394b4aa6de075d9ca74a7c9199","2009-05-24 12:56:06+00:00","SCI: re-xlate pixmap when palette revision changed

svn-id: r40859
"
"e6b62d945cf27942d69f6f6069967532b34c903d","2009-05-24 13:20:13+00:00","tinsel: disable midi playing for Discworld PSX, as the game uses the proprietary (and unsupported) PlayStation SEQ format

svn-id: r40860
"
"a4b733403a8ebc1acac608c953056eb498d900ba","2009-05-24 13:59:47+00:00","tinsel: take into account clipping when drawing PSX 4-bit images

svn-id: r40862
"
"84a2651e63addeb55c61ed6244c77073f8921193","2009-05-24 14:33:41+00:00","LOL: fixed some input code issues:
- party would move 2 steps instead of one when using keyboad while magic menu was open
- viewing notes would abort at once instead of waiting for the next click

svn-id: r40863
"
"6651cdc97c19571966eb29936e7849af003008b7","2009-05-24 14:37:53+00:00","tinsel: fix graphic corruption caused by wrong clipping of 8-bit images in Discworld PSX

svn-id: r40864
"
"e9401655dd84618e3bf6cf82a58e78c33f41b384","2009-05-24 14:58:40+00:00","Commit patch #2796028 'lol files are always compiled' with some slight extension.

svn-id: r40865
"
"7c1eb057146af11793c627327f3fefe309d27fbb","2009-05-24 15:06:28+00:00","Strip trailing whitespaces.

svn-id: r40866
"
"b3c6751b9b7fc1401fd5e87a034cdaec92b67b20","2009-05-24 15:17:42+00:00","Strip trailing whitespaces in the whole code base.

svn-id: r40867
"
"dd41ba80da92e620c72cd23b53880774d3b806a6","2009-05-24 17:08:03+00:00","tinsel: Changes to psx palette conversion function

svn-id: r40869
"
"fd0578f151193e8fe4f31415c631f08d7179ddf9","2009-05-24 18:41:19+00:00","SCI: reset system palette when loading a new PIC.

This improves the colours of background images, but is still partially
broken. The mouse cursor becomes transparent when changing scenes, and
there is a brief moment of palette corruption between scenes.

svn-id: r40870
"
"c97a1aed74fc54176e0de66fc2b6bbe0767e8de6","2009-05-24 21:53:29+00:00","Also strip trailing whitespaces in C and Objective-C source files. (Seems I forgot that we got those too :-P)

svn-id: r40872
"
"eba025f48f99b1538ebbf71ca5b815e76083b78f","2009-05-24 22:10:12+00:00","tinsel: fix for CLUT palettes in Discworld PSX

svn-id: r40873
"
"8adc9480011757f3c90a718537b0ccf99f70e210","2009-05-24 22:32:21+00:00","SCI: Adlib: added support for rhythm channel

svn-id: r40874
"
"6982ce53c22a4690441536d7aa285199b2dd611d","2009-05-24 23:06:39+00:00","tinsel: fix some uninitialized var used in Discworld PSX

svn-id: r40875
"
"910f43ffd883eed0dfa2d08deb3e7503675672ac","2009-05-25 06:09:48+00:00","tinsel: endianess fix Discworld PSX palette remapper

svn-id: r40876
"
"652bc72ed3753632a8fc76f7d6451a813d690e8a","2009-05-25 06:19:37+00:00","tinsel: add entry in detector for Discworld PSX demo

svn-id: r40877
"
"6143da7ceab4eb6e5b76ced0df02e94e5eb96238","2009-05-25 07:42:01+00:00","tinsel: Discworld PSX uses 'index.dat' as scene index file, not 'index'

svn-id: r40878
"
"5ef58bdfbe443c19d2f185d924b5058f25cab962","2009-05-25 07:57:38+00:00","tinsel: avoid unnecessary iterations in Discworld PSX palette remapper

svn-id: r40879
"
"d59796fb544fea69d1b2f27f89d6eb30bf5d0780","2009-05-25 10:30:19+00:00","Objectified the AudioResource code (used for speech and digitized music in CD talkie games)

svn-id: r40880
"
"409c5e0a7eaf8cbca35ca4516e744ab17f237522","2009-05-25 10:32:36+00:00","Updated the MSVC project files of the kyra engine (added sound_lol.cpp)

svn-id: r40881
"
"ffcf4173f3d0e079f458f140fdb241b347a93af6","2009-05-25 11:01:33+00:00","tinsel: add PSX specific code to workaround the thief bug in past ankh-morpork, i still have to give a better look at this though

svn-id: r40882
"
"5e68c1f4a0482a67a01d08248a0e767268c4b781","2009-05-25 11:14:42+00:00","SCI: Force movie palettes (KQ6).

svn-id: r40883
"
"43d38512f1fdbf6e763c1b4d1807e0c7c79ff3a6","2009-05-25 11:18:29+00:00","tinsel: remove the ugly psx l-space workaround, and instead add a check into PlayMidi for psx version

svn-id: r40884
"
"4470dada57cffc23dd9b07a4667eecd04733b677","2009-05-25 11:44:24+00:00","Fixed crash when starting KQ6

svn-id: r40885
"
"fcc45186a535e5387caa5cdb8a594ae7fff04f65","2009-05-25 12:38:20+00:00","SCI: Adlib: fix crash in SQ4.

svn-id: r40886
"
"c7d9e4dc0c5db02288bfc3d274f469e394e6b288","2009-05-25 12:41:14+00:00","Fix mismatching new[]/delete pair (silences a valgrind warning).

svn-id: r40887
"
"cb5c26dd53d749e355ab30209a81a89fa9289eba","2009-05-25 12:47:58+00:00","- Fix various valgrind warnings in the audio sync code
- Fix crash when qutting KQ 5 CD
(It was caused by resources of type 'kResourceTypeSync' getting allocated an 'Resource' object instead of an 'ResourceSync' object, I hope this is the correct fix)

svn-id: r40888
"
"71cc92ab7f79f6a5a4dc3ac03ecde0f5f27219f4","2009-05-25 13:25:31+00:00","Fixed a nasty bug in the GUI code, which caused the windows in PQ3 and SCI1.1 games to be erased incorrectly

svn-id: r40889
"
"db62ae8b332acf99e944d17e43b30485b153a6da","2009-05-25 13:40:46+00:00","Till we specify an common behavior when loading a game state on startup fails / the user tries to load an non existing save slot, change Tinsel to start up the game as if no slot was specified. (This 'fixes' bug #2796215 'DW: Black screen when loading via command line')

svn-id: r40890
"
"5f7847d88d2c0a98d778ddd42a2f53df39b6a6fc","2009-05-25 16:30:39+00:00","Re-enabled the code for correct text positioning - it should work correctly now

svn-id: r40891
"
"b9b3f126674301e94d01c4a6a8e0e9d6dccb9f4a","2009-05-25 17:51:11+00:00","tinsel: avoid unnecessary checks in discworld psx palette remapper

svn-id: r40892
"
"183c9e56ed10eacef4131c0f40cc110b67d6c5fd","2009-05-25 19:48:52+00:00","SCI: Only let gfxop_set_color use priority/control if mask has their bits set.
This fixes a regression from r39089 where text in the KQ5(floppy) intro
was displayed behind trees.

svn-id: r40893
"
"16d649961774a2ed25f7c92b8b39c1152e9966c2","2009-05-25 19:57:09+00:00","WIP code for the speech in the floppy version of KQ6 (still needs work)

svn-id: r40894
"
"a017594ebd3bfd70596dadba3c95d28c66e56590","2009-05-25 20:46:18+00:00","Added hardwarekeys.cpp to makefile

svn-id: r40895
"
"b9bdded269edea6bb63931894f523254008f46a6","2009-05-25 20:55:49+00:00","Remove leftover debug messages.

svn-id: r40896
"
"9d4776ebc53218786a263279bc5868fc5947b7a5","2009-05-25 22:58:05+00:00","LOL: implemented support for the mine car

svn-id: r40897
"
"de5ca1e472dda7cffcaf7d0938f2d29c3e027ccc","2009-05-26 00:03:41+00:00","SCI: Some small fixes for KQ6CD.

svn-id: r40898
"
"4cc2d06b154736f35e050dda19cfd3ba9dff7f97","2009-05-26 01:25:44+00:00","Fix bug #2687801 - ZAK: Cannot pickup Ladder on Mars Youth Hostel.

svn-id: r40899
"
"5e94e688e96760acc6f2f78cbff9d2e970b3fad0","2009-05-26 07:25:12+00:00","Reserve some space in the Huffman tree arrays before starting to decode the Huffman trees. Hopefully, this will speed up the tree constructing phase somewhat

svn-id: r40900
"
"6fd48c3354451bb1ba6df19dc94cb97846379afb","2009-05-26 08:41:25+00:00","tinsel: add default paths needed by Discworld PSX, now the user shouldn't need to move files around

svn-id: r40901
"
"7f57c2f2c0a9e53f0d341a1549c91978f800c9e9","2009-05-26 08:55:23+00:00","Add some initial documentation for create_kyradat.

svn-id: r40902
"
"9900cbcb70859741e1df6fd26064a82cbc303302","2009-05-26 09:35:53+00:00","Added a brief note about the create_lure tool

svn-id: r40903
"
"780899fb0e0be87bd87386fc5f6aeffb4bc30c42","2009-05-26 10:02:25+00:00","Rewrote the Audio stream parser. The introduction of KQ6 should work more correctly now (apart from Cassima's speech)

svn-id: r40904
"
"4d66b5531626cf72ade256766f4da48cbf74cdbf","2009-05-26 10:10:45+00:00","Fix g++ warning.

svn-id: r40905
"
"ae378632cd4c28bc9d598aa05b1fe4365f7f1023","2009-05-26 10:14:24+00:00","Added brief information about the create_drascula tool

svn-id: r40906
"
"94dfc8f6386ebf0f4a13094e68eaec289a974347","2009-05-26 11:28:38+00:00","Fixed a bug in Common::Array (including a unit test for it), and changed the way the internal storage growth over time.

The bug could result in incorrect results when using push_back (or insert_at)
to insert data from an array into itself if this insertions would cause the
internal array storage to grow. Also added a unit test for this bug.

Furthermore, if the internal storage needs to grow, it will now be resized to the next power of two,
instead of being increased by 32.

svn-id: r40907
"
"7d5f3e1714dff2f0beed0f10bcce01be8204f377","2009-05-26 11:30:21+00:00","Turned some static tables into static const tables; added some FIXME comments to global static vars that should be removed (many more exist in SCI, Tinsel, and some other engines)

svn-id: r40908
"
"1c552779a030f649de0089aa4609fbe66271a707","2009-05-26 11:31:45+00:00","Renamed Common::Serializer::syncMagic to matchBytes, and added version paarms to it (we migh want to add corresponding matchUint32LE etc. functions if needed)

svn-id: r40909
"
"7fbbaff990e9a5b2f372d1c1d9ddb8d1c10644e3","2009-05-26 11:33:18+00:00","SCI: Turned the global 'static MessageState state' variable into a member of EngineState

svn-id: r40910
"
"c5539b4e4e948825c0116194e06ddf3dbde3ed17","2009-05-26 11:35:35+00:00","SCI: Preparing to transform sfx_player_t into a class

svn-id: r40911
"
"1d00cc5df09dd5fcacd3ea007b45ab33e6332e77","2009-05-26 11:49:10+00:00","SCI: Turned sfx_player_t into a class SfxPlayer, and converted the existing players to subclasses of that

svn-id: r40912
"
"7050c5065f875ef3a41312671ad4020444d7db87","2009-05-26 14:09:07+00:00","SCI: removed realtime and polled player, as well as the sfx/device dir, after discussion with Walter

svn-id: r40913
"
"1e2c539e42448acb96b67b0fceee0d537afac757","2009-05-26 14:43:47+00:00","SCI: Removing obsolete soft sequencer files

svn-id: r40914
"
"c96cf97ea7e7651c4b2e247d2a111fc4b538d50d","2009-05-26 14:44:14+00:00","SCI: Merged vocab_debug.cpp into vocabulary.cpp; cleanup

svn-id: r40915
"
"dfdc239d1fc7c898ffb8e88388f4eb4b6c2910a4","2009-05-26 14:54:24+00:00","Silenced MSVC warning

svn-id: r40916
"
"d8c1725fbd7507b9466abcb57e7c039df3cb6604","2009-05-26 14:59:41+00:00","Fixed compilation under MSVC

svn-id: r40917
"
"ae480e2903cb650b1f04975207ed81dfdb8e95f1","2009-05-26 15:01:52+00:00","Updated the MSVC project files of the SCI engine

svn-id: r40918
"
"099a29b6bf5dff9a02100aaff2b70146dc1de674","2009-05-26 15:06:21+00:00","SCI: Added 'opcodes' command to the debugger; fixed output wrapping in the selectors & kernelnames debugger commands

svn-id: r40919
"
"50157fbca9e442d9c376f68edb1a9c73ae91b4b1","2009-05-26 15:46:54+00:00","SCI: Undo commit #40917 (SongIteratorChannel::resetSynthChannels now again does something)

svn-id: r40921
"
"3e29b47ec30bb0a137496ce0589fe81fbbdf18db","2009-05-26 19:05:20+00:00","Fixed a crash when exiting, a regression from the latest music driver changes

svn-id: r40922
"
"d111e33df461429d85f43aa45f32a9ec5100b641","2009-05-26 19:12:09+00:00","Fixed regression of commit #40904, which caused the audio in KQ5CD to be played incorrectly

svn-id: r40923
"
"c6ba88c00a6a0a75a6cc7f24938be3cc62508d94","2009-05-26 19:16:24+00:00","Fixed regression in Longbow

svn-id: r40924
"
"da96ab639e5177cc27d701c60e9a918a3683d64f","2009-05-26 20:30:16+00:00","Gob - Add detection strings for Lost In Time (Hebrew), Fascination (3 disks, Hebrew), Geisha (alternative EN version), Goblins 3 (Hebrew)

svn-id: r40925
"
"fd191a4920b15e168d4c8f4ad9c57ebc698a8ffc","2009-05-26 23:34:57+00:00","SCI: Changed signatures of StrLen and StrCpy to allow NULL pointers. This is
needed for a game bug in KQ6CD.

svn-id: r40930
"
"e3178daf13c438c850dc4a4ddd260869f70d2ae2","2009-05-27 00:24:32+00:00","SCI: Cleanup.

svn-id: r40931
"
"33de8c9a5f73a1281d235211bf1d281df0d99382","2009-05-27 00:34:31+00:00","Add include guard.

svn-id: r40932
"
"cd35616b84ce4e2579abc3dedfe5e0e68b53a93e","2009-05-27 02:25:47+00:00","Typo.

svn-id: r40933
"
"16078599fb139e2e066f899b642808e86140b7e5","2009-05-27 08:48:57+00:00","Added a warning when kDoAudio is called with the new semantics (SQ4CD or newer) and fixed the detection entry for SQ4CD

svn-id: r40935
"
"4dccd309e289113bff4dea162286efc6d85d8a8a","2009-05-27 09:07:08+00:00","- Renamed the Audio commands to kSci*, from kSci1* (since they're pretty much the same for SCI1.1)
- Added enums for the audio sync cases
- Added a warning when kDoSync is called with the new semantics (SQ4CD or newer)

svn-id: r40936
"
"c0d13da750b2579cf94663ff2224a3d2971e91be","2009-05-27 09:52:32+00:00","sword2: base psx demo detection on screens.clu, and let the user decide between full and demo version at the time of adding the game

svn-id: r40937
"
"e0a059394975b0dc9c52f3152488ee3bad0594c0","2009-05-27 12:46:11+00:00","Fixed a typo, and added parentheses to clarify order

svn-id: r40938
"
"2bcf5c0552cf0778eb2642608134c6c0e4f3028e","2009-05-27 14:40:37+00:00","- Moved Sound implementation declarations to the newly added file sound_intern.h
- Added support for PC Speaker sound in all Kyra1, Kyra2 and Lands of Lore
- Slight cleanup

svn-id: r40939
"
"ac6c99eff0f8ca155d6b2fa160eeb667395a46fa","2009-05-27 14:44:26+00:00","Prevent accidental MT-32 initialization for PC speaker output, when 'native_mt32' is set to true.

svn-id: r40940
"
"a378f4543e57014eb0ce8ee09f26d06a4e547826","2009-05-27 14:55:59+00:00","Mention KYRA PC Speaker support.

svn-id: r40941
"
"9fd5611fe4f03c7e8cd61edf077c1f6bcf699008","2009-05-27 15:12:53+00:00","Mention that RtZ, LGoP2, Manhole and Rodney are supported

svn-id: r40942
"
"c75bdbc8e95946e1388fa45b086f8f37566ce886","2009-05-27 16:45:42+00:00","- SQ5 floppy starts now
- Added a new console command, 'room', which shows the current room

svn-id: r40943
"
"4717533deaee057c450a01a78614c29d41b0cdfe","2009-05-27 17:13:42+00:00","Added a fix to get QFG3 working and changed an error to a warning to get EcoQuest 2 working

svn-id: r40944
"
"d89f5cc9b97e800ae4e727e3407a2406ce93a497","2009-05-27 18:47:53+00:00","Changes for the latest libfat update.

svn-id: r40950
"
"1dde062e2a62a6f4a173d2e4fe840d09400a4b4f","2009-05-27 21:25:45+00:00","SCI: Fix crash in seginfo debug command.

svn-id: r40951
"
"0b8412bcfe1f8089a34d0293d466e40f2976a896","2009-05-27 22:41:14+00:00","SCI: Make standard EGA palette a part of gfx_sci0_pic_colors.
This fixes regressions in at least SQ3 and Iceman from r40870

svn-id: r40952
"
"6ca62c05818ff7ce3cd75e3bddc2e4875a8973ba","2009-05-28 08:36:27+00:00","Added new files to the MSVC Kyra project

svn-id: r40953
"
"f0e69a7d0bd5881bf574c4bcbed159c4f7addecd","2009-05-28 08:49:56+00:00","Replaced the original implementation of walk box handling with a cleaner, structure array based one

svn-id: r40954
"
"78b3c80b11e1cee50e6aaef48525b3ea56c35663","2009-05-28 10:28:51+00:00","SCI: Turned vocab_version into a static var, and added several FIXMEs related to it (either vocab_version needs to become a member of EngineState/SciEngine, or we need to derive its value e.g. from the game version/flags, if that's possible)

svn-id: r40955
"
"01252c4aaf77b461928b71617d87c8ef7da83105","2009-05-28 10:29:11+00:00","SCI: Some SFX player cleanup

svn-id: r40956
"
"e23e1ffcb78c88a84514c4038a0e999f102d25c2","2009-05-28 10:29:25+00:00","Added Audio::Timestamp::addMsecs method

svn-id: r40957
"
"d70504c9108dd62bef75386b4462a22ba4705b1c","2009-05-28 10:54:30+00:00","SCI: Renamed sfx_state_t -> SfxState, preparing it to become a class eventually

svn-id: r40958
"
"32975b25f4f7ebbf2bfec32675a3505c81b9a8f5","2009-05-28 11:15:09+00:00","SCI: cleanup

svn-id: r40959
"
"2ae183a48326eb8543ff9b7926364b86800c4467","2009-05-28 12:16:23+00:00","Fix for pathfinding bug that could occasionally stop the player from moving

svn-id: r40960
"
"c50edc8c4676e9a252a73301045f3cfd2ccb3915","2009-05-28 15:15:14+00:00","Merged some of the SCI1 and SCI1.1 view and loop drawing functions

svn-id: r40961
"
"7d5bbd7f7129e1840972d87ebb0abd3245e51f82","2009-05-28 19:18:29+00:00","SCI: Fix potential dangling pointer after reallocation

svn-id: r40963
"
"02ac46565b5086560cd842de416e53503da4ec49","2009-05-28 21:33:36+00:00","Tweak the hq2x/hq3x a little bit (interpolation code is little bit shorter, faster and easier to read... but 70+% of the time is spent on computing diffYUV etc. anyway, so I guess this a bit pointless... whatever... ;)

svn-id: r40964
"
"99b520dd09243a0aefcaf32f3e5640cff82586c8","2009-05-28 22:02:45+00:00","SCI: Merged SfxPlayer/NewPlayer code into sfx/core.cpp

svn-id: r40965
"
"a8748bc45c5d2b5ac458bfac76db74d80c234033","2009-05-28 22:07:52+00:00","oops

svn-id: r40966
"
"212271f1cecee7c6c89600cc68b364f991efa2e6","2009-05-28 22:13:17+00:00","Fix mismatching new/delete[]

svn-id: r40967
"
"804242ae9fa8b52a09f3dbbf6f76ababb1506390","2009-05-28 22:16:42+00:00","SCI: Merged NewPlayer and SfxPlayer

svn-id: r40968
"
"55b2cfa0ab1d2684591d65ac4242f2f2ab37ab81","2009-05-28 22:26:20+00:00","Cleanup

svn-id: r40969
"
"d25ddb5fa92aa7a671392dac01505d525c6b112a","2009-05-28 22:28:23+00:00","Updated the MSVC project files of the SCI engine

svn-id: r40970
"
"67fa1fb59cea20ffe53b20a9ba6b8ea594199c8a","2009-05-28 22:42:18+00:00","SCI: Fix potential dangling pointer more robustly,
by changing the executionStack implementation to a list.

svn-id: r40971
"
"56b1eb7d092188143d2487d08ee258bef1eaa4fa","2009-05-28 22:44:33+00:00","Clean up PC Speaker output implementation. (Stripping out unused code)

svn-id: r40972
"
"d3bd7b622cf84a9d7f5cda9df9b68174953fe1ac","2009-05-28 22:48:15+00:00","SCI: Turned SfxState into a proper class (i.e., convert the sfx_ funcs to member methods)

svn-id: r40973
"
"69d054660a8d2b19a449146d4982294150a073c9","2009-05-28 23:49:41+00:00","LOL: - fix valgrind warning
- fix more input code issues
- add workround for another script bug (some invalid monster sound index in urbish mine level 2)

svn-id: r40974
"
"637a432b1ffd6bc64f85c61b44b6a7ddb5803467","2009-05-29 00:09:56+00:00","Formatting.

svn-id: r40975
"
"e9444e2b93802d1717901232e2bc4ba1bab37060","2009-05-29 08:25:42+00:00","- Rewrote kSetCursor to be a bit simpler to understand, and got rid of GF_SCI1_NEWSETCURSOR
- Removed the 3 mouse pointer view, loop and cell variables (and their 3 'save' versions) from the game state, as they're all actually not used anywhere
- Cleanup

svn-id: r40976
"
"0ad3b7bb7d47492d85206095ec5ea27b2905628a","2009-05-29 08:46:20+00:00","Cleanup

svn-id: r40977
"
"c95e5fceeeefb1e52c6456224626680930ecbd84","2009-05-29 08:59:13+00:00","Moved the 'size' console debugger command to console.cpp and silenced a warning

svn-id: r40978
"
"b242d05563069f70a39c863bd1f2b3ac962602cc","2009-05-29 09:42:11+00:00","- Fixed usage of kSetCursor in SCI1.1 games (e.g. when starting KQ6 floppy)
- Removed a static variable (vocab_version)
- vocab.996 is now freed after creating the class table in SCI1 games, like in SCI0 games

svn-id: r40979
"
"cf5e7e17df26465209a23ef84a421dae8ed89d6f","2009-05-29 10:14:58+00:00","Fixed hopefully the last regression in kSetCursor. KQ5CD should work correctly again

svn-id: r40980
"
"682d95ff59e5811cb7bf9c36f88278369968e737","2009-05-29 10:52:34+00:00","Bugfix for screen redrawing when waiting for mouse click - this fixes a blank screen at 3:00pm

svn-id: r40981
"
"fd34892cd53e9dc9504dff23e7dd2103fded8f0d","2009-05-29 11:07:35+00:00","Cleanup and slight bugfix in drawShapeProcessLineScale* functions.

svn-id: r40982
"
"e23a2299993ec87284b538062383d8973f18fb3b","2009-05-29 11:43:22+00:00","Fix valgrind warnings.

svn-id: r40983
"
"648179f87d97edc80a6e2d8c8945537ac1048a71","2009-05-29 11:45:33+00:00","Add MD5 for another The Last Dynasty FR

svn-id: r40984
"
"1b5a9504dcdca819bfe1ba0fee6c46af60ed0801","2009-05-29 11:47:32+00:00","Bugfix for rendering text that caused corruption when the width was an odd number and a line was completely filled

svn-id: r40985
"
"17b761d1e94466e1b7364334ea24a5340669e50f","2009-05-29 11:58:21+00:00","Cleanup.

svn-id: r40986
"
"b2751ff5069dd0fdbd94d51cdaec9c98d2eaef4f","2009-05-29 12:04:13+00:00","Reduced the word spacing width by one pixel to precisely match the original game

svn-id: r40987
"
"da00b148f4bf344caeb9bd9e6456e1237be63b2b","2009-05-29 12:16:34+00:00","Enable autosaves in Lands of Lore.

svn-id: r40988
"
"eb827d86017dcfffbe18a439215408fa59d6ff75","2009-05-29 12:28:39+00:00","Cleanup.

svn-id: r40989
"
"702f267b192eb469a231b2c4207196527b392aca","2009-05-29 12:38:41+00:00","Add Lands of Lore copyright string to KyraMetaEngine::getOriginalCopyright.

svn-id: r40990
"
"64e6c596c7d485a2e68138b08e573813c4783b59","2009-05-29 12:52:03+00:00","Formatting.

svn-id: r40991
"
"b72c2a29fbef2a89199a4b116c8af45172841240","2009-05-29 13:04:32+00:00","SCI: Removing useless adlib-via-OSS code

svn-id: r40992
"
"813853ccc246088b26b2cdb0260f06eeb5676131","2009-05-29 13:07:14+00:00","SCI: Converted several fprintf(stderr) calls to warning/error (the remaining fprintf calls should probably be replaced by suitable debug/debugC/debugN invocations)

svn-id: r40993
"
"c7ee0a7ec86e1c948a4a840726e17003205663a5","2009-05-29 13:09:26+00:00","More formatting.

svn-id: r40994
"
"b042cab3a9d493077045d40b4cb70b0518b522c5","2009-05-29 13:19:18+00:00","Fixed a bug with the 'size' console command

svn-id: r40995
"
"74e87bf05d584b922546b08cc1930c9af3586186","2009-05-29 13:52:10+00:00","Some WIP code on the speech used in KQ6CD

svn-id: r40996
"
"7d0c8615068c999ab465475c088f777d18ae3adf","2009-05-29 14:16:51+00:00","Merged res_view0.cpp and res_view1.cpp

svn-id: r40997
"
"f728ddefd0afcb09a81c679f3be02e82ff644683","2009-05-29 14:18:46+00:00","Updated the MSVC project files of the SCI engine with the latest changes, and synced the MSVC7 project file of the kyra engine

svn-id: r40998
"
"518e005ec27ef323275b364a3cd16d24d7491674","2009-05-29 14:36:56+00:00","SCI: Revised code for listing savegames

svn-id: r40999
"
"fb79b185717c9aae7c793e7f07d5d6b94aec4abf","2009-05-29 14:38:22+00:00","Changed SaveFileManager methods to take Common::String params (instead of char pointers)

svn-id: r41000
"
"608f855c9d42a46aed29056460d4ff3dcc01387c","2009-05-29 14:38:42+00:00","Removed obsolete files

svn-id: r41001
"
"a4922dad008a5f77fb0da455c61cad857ea7a22e","2009-05-29 14:38:56+00:00","Added most of the missing tools to scummvm/tools/README

svn-id: r41002
"
"d5da63c496cde6a71b0fc7839635ee8a008bfe31","2009-05-29 14:39:10+00:00","atol -> atoi

svn-id: r41003
"
"975d82317443ba810f343045739fe5cc8dc16847","2009-05-29 14:42:34+00:00","Gob (Playtoon) :
- Replace game types kGameTypeArchibald and kGameTypeSpirou by kGameTypePlaytoon
- Add game types kGameTypePlaytnCk and kGameTypeBambou
- Add detection for Playtoon 3, 5, CK2 and LE (Bambou).
- Add fallback for Playtoon 4 'manda' (and for others)

svn-id: r41004
"
"f4b15bb87f08b4c08326a2eb301998ef9906e367","2009-05-29 14:56:53+00:00","Fix warning about unused variable.

svn-id: r41005
"
"d9228d69a76d38d502a6e65bb5875c42d2f0a947","2009-05-29 14:58:08+00:00","Some slight documentation.

svn-id: r41006
"
"e2641cbd251579e58fa3918bbd8966db2a97d09c","2009-05-29 15:07:38+00:00","Fix compilation

svn-id: r41007
"
"95d11e6e37e423ace2c382636e2cd2d4c8d1c725","2009-05-29 17:12:45+00:00","- Add new method 'isVoicePresent' to 'Sound'.
- Change LoL character selection to use it.
- Allow quitting ScummVM in LoL character selection.

svn-id: r41008
"
"797c35876b32988841f84318f1ef0f998f4926c9","2009-05-29 17:16:31+00:00","Remove obsolete comment.

svn-id: r41009
"
"b1997801dad7f5ec30b6cb3c4a2e7574ed0cf590","2009-05-29 17:19:39+00:00","- Moved some debug code into console.cpp, adding 3 console commands: resource_types, sci0_palette and exit
- Removed the 'man' command
- Removed the commands which set the SCI01 priority table flags and the crossblit alpha threshold (they're too specific, and not really useful anymore)
- Removed some leftover debug code from gfxop_clear_box()

svn-id: r41010
"
"51fc019a9b3a5433076e3882a3842f97b3e74c82","2009-05-29 17:21:00+00:00","Implement 'loadSfxFile' and 'stopAllSoundEffects' for 'MixedSoundDriver'.

svn-id: r41011
"
"874e340d25e79d067b7b5c2d72fe82c39da4a934","2009-05-29 17:38:22+00:00","Output a warning to the user, when he tries to play back MT32 MIDI tracks with a General MIDI device.

svn-id: r41012
"
"b43094cec05e639b43e9e14ad7a9001b9c5d7fac","2009-05-29 17:39:55+00:00","- Added brief Doxygen comments to the ResourceSync and AudioResource classes to explain what they do
- Removed the outdated info page on 'codebugging'
- Moved the 'addresses' info page as a comment above parse_reg_t()
- Removed con_hook_page()

svn-id: r41013
"
"0ba9e14ec9ddcf6bafa4b62ea5232cef0ffbfd0a","2009-05-29 17:59:07+00:00","Double volume of DOSBox' OPL emulator, like DOSBox does too.

svn-id: r41014
"
"6668a3d7964309fcc6b1790148a3814e4dd14c3f","2009-05-29 19:27:39+00:00","Adding my German versions of Playtoons 1 + 3

svn-id: r41015
"
"7463fe3f1b8355f8022a533a867aa74f71c2dc2d","2009-05-29 22:36:01+00:00","LOL: implemented opcode required for magic wands

svn-id: r41016
"
"a6abd5c2fc232ab589af0acde95f519cabc75659","2009-05-30 05:16:35+00:00","Bugfix to keep ScummVM responsive even when the displayOn variable is set to false

svn-id: r41017
"
"4960b64b484d3e80258feedea3f711704d7e0743","2009-05-30 09:07:28+00:00","Fixed a silly typo in commit #40979. Suffixes should be loaded correctly again

svn-id: r41018
"
"56c0a41b71256118eda1ffa08f2317aba673faf9","2009-05-30 10:22:53+00:00","SCI: Moved the rest of the console code out of sciconsole.cpp and into console.cpp. 'list' and 'hexgrep' have been added to the console commands. parse_reg_t() has been moved to kmovement.cpp (as it's the only code using it). Note that the debug commands in scriptdebug.cpp have not been converted yet, so they don't work at the moment

svn-id: r41024
"
"c7c9f05cac225b65fb4cd8faf957f167a3b0d576","2009-05-30 10:42:08+00:00","Removed/replaced BREAKPOINT

svn-id: r41025
"
"33a924e766627e97caf926f6699860cc1a45e839","2009-05-30 10:54:25+00:00","Swapped the checks for suffixes and branches to first check for SCI1 resources, and then for SCI0 resources (as in SCI1 games, tree branches are in resource 901, which coincides with the SCI0 suffix vocabulary resource 901)

svn-id: r41026
"
"f42b07706104112b2a0480e2894dc2bf02a90a88","2009-05-30 12:30:13+00:00","LOL: - added English floppy version to detection
- implemented opcode required for Yvel woods

svn-id: r41027
"
"8c443650e508fdc135dadd4f46daf3faa559071b","2009-05-30 12:40:00+00:00","LOL: - added non-installed English floppy version to detection

svn-id: r41028
"
"4dcfaead8dbc4db1ada479066fa8c11f075154ab","2009-05-30 13:04:09+00:00","Moved some script debug commands to console.cpp: 'clear_screen', 'redraw_screen', 'save_game', 'restore_game', 'restart_game', 'class_table', 'parser_words', 'current_port' and 'parse_grammar'

svn-id: r41029
"
"a21f34cf916e98f5d2ed558d79456a58ec9fa683","2009-05-30 13:36:51+00:00","Moved more script debug commands to console.cpp: 'visual_state', 'dynamic_views', 'dropped_views', 'gc' and 'gc_objects'. Removed the 'gfx_free_widgets' and 'sleep' commands (they weren't really useful)

svn-id: r41030
"
"9823f60146bedae98f2e649e7938614390fc4525","2009-05-30 14:13:27+00:00","LOL: - fixed crash that occured when entering yvel city
- added another opcode for yvel woods

svn-id: r41031
"
"69582f0179c9ab9dcdc0afb2acbe659d36a37790","2009-05-30 14:30:39+00:00","Moved 3 more debug commands to console.cpp ('simkey', 'segment_table' and 'show_map') and removed the GFXWC macro. Some cleanup

svn-id: r41032
"
"3490819a66f942f4fb18c4f25f8dcb4bf67ea4c5","2009-05-30 15:40:49+00:00","- Removed debug_mode from the engine state
- Turned all SCIkwarn and SCIkdebug functions to ScummVM's debugC function
- Placed some debug code in appropriate defines: DEBUG_PARSER, DEBUG_AVOIDPATH and DEBUG_SOUND
- Removed the 'debuglog' command and the 'script_checkloads_flag' and 'sci_debug_flags' variables

svn-id: r41033
"
"8e2af8ff7c51e4217dcba3b0910ce6c2affd3cd5","2009-05-30 15:42:29+00:00","Updated the MSVC project files of the SCI engine

svn-id: r41034
"
"86d78bbc8b4f752bf115ec394a5bc20c052de102","2009-05-30 15:52:09+00:00","LOL: - implemented urbish mines gas explosion

svn-id: r41035
"
"ecfb2e5b5dd61b434951f0e6d95536d4b981569e","2009-05-30 16:36:37+00:00","- Moved the print_port, segment_info and segment_kill console commands to console.cpp
- Removed the unused gfx driver debug flags

svn-id: r41036
"
"ca330071bea8cae5d019be7b8ca2e59c5ab720b3","2009-05-30 17:06:30+00:00","Fixed compilation error

svn-id: r41037
"
"2f90c8f398bf41ee571d31ce08dbf46d524cc592","2009-05-30 17:30:54+00:00","- Fix various debugC calls (parameters passed were not correct)
- Fix unused variable warning in scriptdebug.cpp

svn-id: r41038
"
"15d5b8436e768674aeb2564d6f379e906fb0898c","2009-05-30 17:53:12+00:00","Removed the 'sfx_debuglog' command. Sound debug messages are now shown if kDebugLevelSound is specified

svn-id: r41039
"
"4ab05f0b387112b72fb44ed9262fde117a434586","2009-05-30 18:22:55+00:00","- Moved 3 more commands to console.cpp: 'draw_pic', 'draw_rect' and 'fill_screen'
- Removed some FreeSCI-specific variables for checking of the on-screen console
- Removed the Control-1 key combo - the console command 'visual_state' can be used for the same reason

svn-id: r41040
"
"a126a05dc4a6f98ced644b9ed789a520b19976f3","2009-05-30 19:48:13+00:00","LOL: implemented some opcodes required for yvel city

svn-id: r41041
"
"598feb771fffcdbe94feebe8889162e668e41fcc","2009-05-30 19:59:53+00:00","SCI: Fix broken pointer after array re-allocation.

svn-id: r41042
"
"329b93acc8cad97cf5c8c252afac820ae9f69db8","2009-05-30 20:01:43+00:00","Moved 4 mode commands to console.cpp: 'sentence_fragments', 'parser_nodes', 'status_bar' and 'track_mouse'

svn-id: r41043
"
"539094d5a81fdb20e61a7a562ea7bbaed9c54e5f","2009-05-30 20:19:20+00:00","Reverted the vocab loading function to be like it was before commit #40979 (but without the static variable)

svn-id: r41044
"
"70a04c8b51af66fcc30b5b22fad224d0f145a484","2009-05-30 20:37:33+00:00","SCI: Made vocab_version static again (a global static var is bad, but a really global var is worse); also clarified some FIXME comments that we want to avoid *any* non-const global var, no matter whether it is static or not

svn-id: r41045
"
"84473eaf1bd66ecd51e6e08a2ae7064b0b212dac","2009-05-30 20:40:48+00:00","LOL: minor bug fix

svn-id: r41046
"
"9423c75dae4a4957384adf6b85719da7a06e93c0","2009-05-30 20:41:10+00:00","SCI: Added constructor&destructor to SfxState

svn-id: r41047
"
"dcecdc7b94de30f8859cadf7ecf24529e4c711c7","2009-05-30 20:45:57+00:00","Moved the 'songlib' command to console.cpp and removed the non-working 'set_vismap' command - we can view the different maps with 'show_map', but it doesn't make much sense to redirect the game's graphics output to another screen map on demand

svn-id: r41048
"
"c552dd4688c39e439557915678590db60c409c6c","2009-05-30 20:50:08+00:00","Change more Lands of Lore in game voice code to use '_sound->isVoicePresent'.

svn-id: r41049
"
"6059f84f6a9a0173674f32b176963fee7832ec12","2009-05-30 21:03:10+00:00","LOL: implemented opcode for white tower

svn-id: r41050
"
"76406c35ec9cfcc247dc326c44a8d7fc00327fbc","2009-05-30 22:15:00+00:00","Started objectifying the vocabulary functions (WIP)

svn-id: r41051
"
"f2516e648ea1d7a3460895b72068b3c597f48d71","2009-05-31 00:25:05+00:00","LOL: fix some valgrind warnings

svn-id: r41052
"
"bccca104d0635949d328a18d722218ba4bf59f0c","2009-05-31 00:42:44+00:00","- Add support for the Lands of Lore outro TIM file
- Cleanup

svn-id: r41053
"
"abe8cf06255f7398127912354dfbf84daceff569","2009-05-31 01:11:06+00:00","Typo.

svn-id: r41054
"
"c938667d4b60005a926007376305f3da8621f7c7","2009-05-31 01:24:08+00:00","LOL: - fix shape memory allocation/release issue

svn-id: r41055
"
"896df6daf337bf83f27193918eb386321c4b0166","2009-05-31 02:15:43+00:00","- A new save system for the GobEngine, one that is not fundamentally broken and is versioned. Unfortunately, this invalidates most save games created on big-endian machines, since endian-issues was a main problem with the old system
- Removed the now superfluous variables sizes

svn-id: r41056
"
"a4d13cef8c48eecb1f73f2d509437261a663ab05","2009-05-31 02:37:24+00:00","More objectification of the Vocabulary functions

svn-id: r41057
"
"daec4360479bd0f728949080c77dec22d1a22f94","2009-05-31 03:06:19+00:00","public'ing some inner classes since some compilers don't seem to like nested friend'ing (while my gcc 4.3.3 doesn't even complain with -pedantic)

svn-id: r41058
"
"1656f69183fd713af36df2559571c67659d05c38","2009-05-31 03:32:16+00:00","Replacing NULL with 0, since that's normally the C++-way

svn-id: r41059
"
"3b311c65d0140e8bf727910d230ffd7a7f803761","2009-05-31 09:11:45+00:00","gob - Apply DrMcCoy modifications to the save system in the vcproj files. (still not compiling, though)

svn-id: r41060
"
"0999534749f6c4edb9e4d054b95f185b829adba3","2009-05-31 10:02:16+00:00","The error() and warning() functions add ! and newline automatically. (I didn't
look at debug() and debugC(), since I'm really bored with this now. :-)

svn-id: r41061
"
"cb09622c5a820d4b624705b2728df0e0f3176acd","2009-05-31 10:11:25+00:00","Ooops, that's one 'File::' too many

svn-id: r41062
"
"f94025f482ae9231dad845fcaeb9f08a5ad37746","2009-05-31 10:14:41+00:00","Merged the wait for mouse press event loop into the main loop, fixing animation glitch and enabling pausing, player menu, and exiting the game when waiting for a mouse press

svn-id: r41063
"
"555d4038cc053c0c914dd1cb56746066446a1386","2009-05-31 11:37:21+00:00","Slowed down the game to match the original, and introduced the ability to alter game speed using the keypad +/- keys

svn-id: r41064
"
"e317012cce8647a9d50f185cdba5bafc7c48c9a2","2009-05-31 12:05:49+00:00","Further objectification of the SCI vocabulary functions. Removed the 'kernel_words' console command, as it's exactly the same as 'parser_words'

svn-id: r41065
"
"f59176cd4632b363f5531034b7bbd6628d831118","2009-05-31 12:28:56+00:00","Fix various memory leaks in Lands of Lore.

svn-id: r41066
"
"11a5875aa8da7868fe3d83b6be0c023550fd3628","2009-05-31 14:01:47+00:00","- Little bugfix for LoL outro TIM
- Add some initial code to allow easy playback of the LoL outro (credits text is still missing).

svn-id: r41067
"
"be224386484793c519840cff0b752e9fd2a430b1","2009-05-31 14:41:54+00:00","tinsel: workaround for 'missing red dragon in Act IV' bug in Discworld PSX

svn-id: r41068
"
"4441ca4b3e39ed1613c826f7b46b1e7076fcbe14","2009-05-31 14:55:32+00:00","- Further objectification of the SCI vocabulary functions
- Rewrote the sci_opcodes enum so that it's easier to read
- Made the engine error out if data is sent to an invalid selector (which is a fatal condition)

svn-id: r41069
"
"7140dda5e5e8af593c373a27340aea4f72d618c2","2009-05-31 15:07:55+00:00","MADE: cleanup

svn-id: r41070
"
"4fba6e5d4c6c8b174296e189c935b4678e2c4683","2009-05-31 15:08:16+00:00","SCI: Fixed loading; added 'const' keywords to several Vocabulary methods

svn-id: r41071
"
"cf68dc1a7bd1c045a349c28b5811b55cfb49d942","2009-05-31 15:08:47+00:00","SCI: Renamed some Vocabulary methods for clarity; also renamed decypherSaidBlock -> decipherSaidBlock; some cleanup in Console::cmdSentenceFragments

svn-id: r41072
"
"e55388c787886477a2f9f4670fc36cb868423ee5","2009-05-31 15:34:23+00:00","Removed script_error_flag and script_debug_flag, which were used to error out if something went wrong and open the debugger console. Changed all the places where they were used to error() out instead, as ScummVM's debugger console can open on error()

svn-id: r41073
"
"cc8cc6f452eda7ebc9c8b16dda5238c1770181e3","2009-05-31 15:42:26+00:00","LOL: implemented magic viper attack (used by wraiths in white tower level 3)

svn-id: r41074
"
"865e8e642b8bbb00f4b4e1ac972a4f1d45af4bfa","2009-05-31 15:43:51+00:00","Typos: Unkown -> Unknown

svn-id: r41075
"
"010fbadf012324fb4f82ea2acdc77917f83fa4bf","2009-05-31 16:02:10+00:00","Document that debug level 11 turns on all special debug level messages (refer to rev. #28858)

svn-id: r41076
"
"400d2b10af56093e4a4aea650da392bd2c152af8","2009-05-31 16:59:45+00:00","GOB: Replaced many uses of strdupcpy by Common::String

svn-id: r41077
"
"78a887490357393b420e288a3318d94497e59293","2009-05-31 17:00:07+00:00","GOB: Untangled SlotFileIndexed and SlotFileStatic (ATTENTION: This uncovered something which seems to me a bug in SaveLoad_v4::ScreenPropsHandler::getSize)

svn-id: r41078
"
"e072532458b177c281302957c6eda318914e52c2","2009-05-31 17:00:38+00:00","GOB: Got rid of last traces of strdupcpy and strdupcat

svn-id: r41079
"
"dad6073548ee02cd81dbfbc8457f6d8c0252d227","2009-05-31 17:58:19+00:00","LOL: prevent saving/loading in inventory screen

svn-id: r41080
"
"ede3dec88a291d7435708deec88f4108e383224b","2009-05-31 19:31:04+00:00","Add support for the Lands of Lore scrolling credits.

svn-id: r41081
"
"b0f49a6211b1f945c208b19a19840c7d32485334","2009-05-31 22:11:06+00:00","Add unit tests for Common::String operators. These test cases will for example cover tests on String instances, which will be added to itself (foo += foo). NOTE: Those fail currently.

svn-id: r41082
"
"0f8926982a3e9d18b23168d9c70e371fe6ecfbee","2009-05-31 22:19:38+00:00","Extend self asignment test a bit more (both using internal and allocated storage).

svn-id: r41083
"
"8fa5313f1dc17a95ee25efcdd03db45cd8b55f5f","2009-05-31 22:29:06+00:00","GOB: the Engine destructor already calls Mixer::stopAll()

svn-id: r41084
"
"26c583ae5fe08aa2ba6797194fb2ad7944facb21","2009-05-31 22:29:50+00:00","GOB: Got rid of GobEngine::_vm

svn-id: r41085
"
"416f6565befc6eaff0dddf0f6fb41b3a8fd4dbd0","2009-05-31 22:30:49+00:00","GOB: Resolve FIXMEs

svn-id: r41086
"
"b23fd88f6190cba4d9a2741cd51f4cb349b2fc5f","2009-05-31 23:23:25+00:00","Little formatting fix.

svn-id: r41087
"
"cc07d7aeecc5c156224f619ef4978828f09233e5","2009-05-31 23:49:37+00:00","Fixing a regression in the VideoPlayer, introduced by Fingolfin in r41077

svn-id: r41088
"
"9c8c1cb080a72fd143ef6db50f1ab2fd27a6d009","2009-05-31 23:58:05+00:00","Removing the helper-include where it's not used anymore

svn-id: r41089
"
"6e382592702534bb530f5610f19f694d3b4e5429","2009-06-01 00:01:32+00:00","Add a 'flat' option to FSDirectory to allow searching recursively for files in subdirectories

svn-id: r41090
"
"60d53c3cce179ab08649fb78a93ca7118f364869","2009-06-01 00:42:53+00:00","LOL: - implemented opcode for white tower basement

svn-id: r41091
"
"83dbcf8531c7703e3024a45e76c3794fa2327b79","2009-06-01 01:24:17+00:00","LOL: some more opcodes and some minor bug fixes

svn-id: r41092
"
"4269c3a4ea04909edec47669b42b10a9449fe250","2009-06-01 03:27:54+00:00","Converted the saving of perso structure data to proper endian-safe serialisation

svn-id: r41093
"
"76bd1b7c0e7e65cc65c0e6aeb151678d61ddefa7","2009-06-01 07:06:04+00:00","Removed the sci_max_allowed_unknown_kernel_functions array

svn-id: r41094
"
"c730e0290d98f0c18ea88a5b7b75ff8756f2ccdb","2009-06-01 08:00:58+00:00","Replaced kernel_oops with error(), and added an enum to clarify the cases where invoke_selector should stop

svn-id: r41095
"
"5bb449b2bf443c30dd9fa312a426c81d40baf9dc","2009-06-01 08:46:39+00:00","Removed the remaining two FIXME's - my analysis of the data indicates no issues with structure packing, and all multi-byte data accesses are wrapped using loadShort/saveShort, which is endian safe

svn-id: r41096
"
"2abbcd54a457dfabf17c6ef91a4b7f2faa3e81fd","2009-06-01 09:09:44+00:00","Replaced loadShort/saveShort functions with applicable endian macros

svn-id: r41097
"
"b81270fbc0a10da9f4c88dee5c208e745e49b565","2009-06-01 09:18:48+00:00","Removed some out of date TODO's

svn-id: r41098
"
"18f5ef823452d4a1f4b00961504c04d41c7abe82","2009-06-01 10:17:34+00:00","Disabled an old script interpreter hack

svn-id: r41099
"
"660aa716625866ae3a9db2a001ed3af6e108caaf","2009-06-01 13:37:51+00:00","LOL: - extended text displayer and added one more opcode

svn-id: r41100
"
"99c687463030254c5489cd3d47d876970ab7c080","2009-06-01 14:12:43+00:00","Split the kernel functions away from the vocabulary functions (WIP, saving/loading is broken)

svn-id: r41101
"
"c85134bd5eb446116e3574fee51a59ff066eddf6","2009-06-01 15:34:33+00:00","Some fixes for saving/loading (still broken)

svn-id: r41102
"
"19a6eac4cad6dfdc99fc99cf826827a85c0fa5d2","2009-06-01 16:29:13+00:00","LOL: implemented hand of fate spell

svn-id: r41103
"
"42032cf7eccc5bdc9b179c5ce3f575af3396e1f0","2009-06-01 17:50:30+00:00","LOL: - minor fix to the input code

svn-id: r41104
"
"8b59d275abc7a044155c361468c5f0308af10e24","2009-06-01 18:25:43+00:00","LOL: add workaround comment (at LordHoto's repeated insistence)

svn-id: r41105
"
"a10287e787763fb4d56364fdabbe1365773ea9fb","2009-06-01 19:11:56+00:00","LOL: fix warning

svn-id: r41106
"
"12837c968cb8277cb89d4d8f410a6cd73d7cded6","2009-06-01 19:29:04+00:00","Change flip[Short|Long] functions to bigEndian[Short|Long]ToNative to clarify that flipping only occurs on LE systems + some related cleanup.

svn-id: r41107
"
"c7d181d1074e3a914b47488538dcffca06d2ac46","2009-06-01 19:53:11+00:00","don't use FROM_LE_* macros on font data, as it already is in native endianness

svn-id: r41108
"
"ce1c5e2c0baa749ab5cbcb440c389470d1dfcb05","2009-06-01 20:53:19+00:00","change pathfinding variables from char to int8 to ensure signedness

svn-id: r41109
"
"5f7515162a77ea507444d456d696cf52fcdba18f","2009-06-01 20:55:31+00:00","Capitalize the C in Corpse

svn-id: r41110
"
"bdea557d7f98b6aeba3b72efd57c4e4aa39c36be","2009-06-01 21:03:44+00:00","- Fix some valgrind warnings
- Fix original bug in the Lands of Lore credits, which messed up some headings (the original didn't display them at all for some reason)

svn-id: r41111
"
"f57be08d6d24ce196098f39296b5796e6a86ea92","2009-06-01 22:03:27+00:00","- Add some basic debugger for Lands of Lore.
- Allow the 'flags' command in all Kyra games to be working properly with 320x200 GUI.

svn-id: r41113
"
"6782d3efac9dd69cc33f245472b670adc39ce04e","2009-06-01 23:25:10+00:00","Change LoLEngine::delay to be conform with KyraEngine_v1::delay. (remove special iUpdate parameter, just call updateInput, when 'doUpdate' is set to false)

svn-id: r41114
"
"6fcccb3fcdd8624c2bf3a7f1cecdad47c9dfbca3","2009-06-01 23:29:05+00:00","Slight cleanup in LoLEngine's delay and delayUntil.

svn-id: r41115
"
"fb93062def9f8f3a67c9a8aa5715094bc67f8e8b","2009-06-01 23:30:06+00:00","Allow the user to quit ScummVM, when LoL waits via delayUntil.

svn-id: r41116
"
"9a0fff429f51832aafd1ad17fad94c206b68ffb5","2009-06-01 23:38:56+00:00","- Remove LoLEngine::delayUntil it was identical to KyraEngine_v1 in its functionallity anyway
- Change KyraEngine_v1::delayUntil to a somewhat more LoLEngine::delayUntil like implementation

svn-id: r41117
"
"762f63084955e63b40e2c248a05668fd8f805017","2009-06-01 23:53:30+00:00","Cleanup.

svn-id: r41118
"
"fae4192b37847e8a1f7e43b74fb679119f46c548","2009-06-02 00:07:11+00:00","Remove '_smoothScrollTimer' from LoLEngine, it was only used as local variable anyway.

svn-id: r41119
"
"a4292afcdc7be36506871bf5752d9ae0ef564b2f","2009-06-02 00:10:13+00:00","Formatting and whitespaces again.

svn-id: r41120
"
"d532328dd43b9fcd269310edf8b7ba5d099c2f20","2009-06-02 06:03:49+00:00","Fix palette regression in HE99+ games, the HE palette number must be set, before setting the costume palette.

svn-id: r41121
"
"7b31585e39ffc7afa5a9269aa4b5f659b0b056c3","2009-06-02 06:19:41+00:00","LOL: - fixed script bug reported by LordHoto

svn-id: r41122
"
"d405b2880b537b1bac189f4e2a4b83d22b8a3d7a","2009-06-02 07:59:04+00:00","Removed some unused variables from the engine state

svn-id: r41123
"
"c1d01223aa7283e18d42ee0b2680b6b3bc0afe8f","2009-06-02 11:58:30+00:00","Fix bug #2799905 'WINCE: Compilation broken'.

svn-id: r41124
"
"98f64cfa2f76a5faa1cdea5c47e175aea2e75940","2009-06-02 14:16:59+00:00","Removed the gfxw_new_visual and gfxw_new_port wrappers, moved _kfuncTable inside the Kernel class and moved gfxw_find_port inside the GfxVisual struct

svn-id: r41125
"
"780926991e369cefd2409a1149f3bcee4aa9a5c9","2009-06-02 19:03:43+00:00","Moved some more console commands to ScummVM's debug console

svn-id: r41126
"
"ac544e73e96fee97bbb8f0231392a6efdf279b92","2009-06-02 21:07:34+00:00","Moved some more console commands to ScummVM's debug console

svn-id: r41127
"
"d94f920d5003e9ada2f903066d4988cb16725c21","2009-06-02 23:20:14+00:00","Fix warning.

svn-id: r41128
"
"2ce6cca98b2b92d84f7956ecf78042ee566fe392","2009-06-02 23:29:58+00:00","Moved some more console commands to ScummVM's debug console

svn-id: r41129
"
"f82df1d1c44fb9ae7bb3bad21c972b95ae689621","2009-06-03 00:01:07+00:00","Update thumbnail code to capture RGB565 screen.

svn-id: r41130
"
"fc4d1c0affc2623ec5f35d3e10c6c0297eb01a25","2009-06-03 00:31:50+00:00","Revert last change, better to wait for 16bit backend support.

svn-id: r41131
"
"a34fb64f09691ed631867f72f313b1d7dcae3bde","2009-06-03 00:55:36+00:00","Correct sound timer and disable sound offsets, in later HE games.

svn-id: r41132
"
"ba48060b5f856fed6e2b8d6e899a8b591e0ee3c0","2009-06-03 06:24:27+00:00","Sprites are used for subtitles, in all 16bit color HE games.

svn-id: r41133
"
"ad09b501683346b602af708a420c2c1c5c72871b","2009-06-03 06:34:39+00:00","Increase maxHeapThreshold for 16bit color HE games, due to larger resource sizes been used.

svn-id: r41134
"
"59cb31d0134ee936b76bd54722be2671a813f46e","2009-06-03 06:52:39+00:00","Cleanup.

svn-id: r41135
"
"3c7b434b04240be647d0d10f8e1dcecea95f7aac","2009-06-03 09:45:16+00:00","- Sorted the console commands a bit more
- Removed the commands which manipulated variables and turned them into debug variables instead
- Rewrote help so that it's more organized and easier to read
- Unified the debug variable names

svn-id: r41136
"
"cb0aed33037a67c3570059df98ec7bbd167d1703","2009-06-03 11:38:12+00:00","Moved some more console commands to ScummVM's console

svn-id: r41137
"
"dcbc6e7e695dcf35a36fc436c9318fd2648b1099","2009-06-03 14:03:05+00:00","tinsel: removed some warnings related to psx code and cleanup of psx palette remapper function

svn-id: r41138
"
"317da8756e1d350167739d82b128fc5fcd70687e","2009-06-03 14:09:25+00:00","- Moved the engine state and the console to be private members of SciEngine
- Implemented pauseEngineIntern()
- Music now stops and resumes when entering/leaving the debugger

svn-id: r41139
"
"2abb8d9ff6058c6e7b8053ea52c8d474da6faced","2009-06-03 14:24:00+00:00","LOL: fixed minor bug in shakeScene() which caused a graphics glitch when dropping into pits

svn-id: r41140
"
"9673beb082b47d01aa2ddd25431393efcb859e8e","2009-06-03 14:47:32+00:00","Moved some more console commands to ScummVM's console

svn-id: r41141
"
"ee04870cc2067b1717e5d8319f4d25519e312a9c","2009-06-03 16:15:17+00:00","tinsel: fixed endianess issue in psx palette remapper

svn-id: r41142
"
"626765b71a82e3837e039bd2a6d0f9092e86684a","2009-06-03 16:28:09+00:00","Fix warning about signed vs. unsigned comparison.

svn-id: r41143
"
"5206ef16a6f8f47d9e04898f4e1fa08d3204cb07","2009-06-03 16:29:02+00:00","Silence unused variable warning.

svn-id: r41144
"
"0efe78d0f8896e46f8829a829b54db5240da26eb","2009-06-03 17:35:06+00:00","LOL: implemented mist of doom spell

svn-id: r41145
"
"6e079f7ea83bb227a54e32079246fc4a0918b282","2009-06-03 18:43:22+00:00","SCI: Added some of the missing pieces for speech support in CD games. It now partially works.

svn-id: r41146
"
"8c868054152d0ffb6866b1316219607c2fd0f028","2009-06-03 19:11:11+00:00","LOL: implemented opcode required for catwalk caves

svn-id: r41147
"
"f77142c55cbe3dc0aed73ce3d2c8eb180a2c890a","2009-06-03 19:58:06+00:00","LOL: implemented guardian spell

svn-id: r41148
"
"2dbd81f1f2c8d38fdc431cbe2d6cde277bc546ed","2009-06-03 20:03:08+00:00","Silence some unused variable warnings.

svn-id: r41149
"
"3235fd3f65bb9043126900b8fb32850bd49aa0df","2009-06-03 20:48:35+00:00","cleanup

svn-id: r41150
"
"8447a3650e7de2fc780c1c354f70bf0d119622b3","2009-06-03 23:36:23+00:00","Applying the temporary 16-bit SDL hack.

svn-id: r41152
"
"3a64d35dfd9126d7912c4d4496030f7ed120d660","2009-06-04 01:05:47+00:00","Add 16bit color support for later HE games.

svn-id: r41153
"
"634e0234852ebb37d6cb10bc627d84ebaf35d56f","2009-06-04 08:25:48+00:00","Turned debug_weak_validations on by default again, as apparently some games like SQ3 fail in some validations (e.g. when loading). Also, fixed a potential out of bounds access when copying the value of __FILE__ into a buffer (as its value can be quite long in some cases).

svn-id: r41154
"
"70effa46e55100630df3b902918c75e77d505188","2009-06-04 08:28:20+00:00","Reordered the numpad keys so that they make more sense, and simplified the code which returns the values of shifted function keys

svn-id: r41155
"
"929ef3e4a8eaf83e5fda75fb1047feb6647e7799","2009-06-04 08:30:31+00:00","Initial import of the GP2XWiz backend (based on the GP2X and SDL backends). Includes configure changes and one #ifdef to SDL backend. Also updates NEWS.

svn-id: r41156
"
"bf212d7b2f4f3b8851a6cd44c4c922cf0f46f94b","2009-06-04 09:30:12+00:00","Fix regression in copyWizImageWithMask, which caused corruption in readtime.

svn-id: r41157
"
"d1210392ef1c755fc0c513d81e4981141e6963ee","2009-06-04 09:32:36+00:00","Ooops, correct typo in last commit.

svn-id: r41158
"
"d08c592bfd4c1b74e91227847c04afe2b7ca7ff4","2009-06-04 09:36:13+00:00","Update drawBMAPObject for 16bit color.

svn-id: r41159
"
"85950d6f6b25421c86ab79eea0c4cf96f6feb720","2009-06-04 09:48:56+00:00","gob : _spriteBottom incorrectly saved and restored in Draw_v2::spriteOperation

svn-id: r41160
"
"a45b902716aa3a86e56efaefeee1d6ae3113fbd1","2009-06-04 09:49:06+00:00","Ooops, re-enable codec32 code.

svn-id: r41161
"
"fdbc49ab5f4b9320e4cdac8edd427304910d8235","2009-06-04 11:03:45+00:00","Fix the color of Poodles Galore's finger nails in Spy Fox 3.

svn-id: r41162
"
"382ebea3faa5f824ba385b9837c4106b6c1fe3c7","2009-06-04 11:28:05+00:00","SCI: Renamed various debug related global variables to have a g_ prefix; and moved any 'extern' decls of them into a new header file

svn-id: r41163
"
"28242d289b4363a94143432a2e596d5beace0dcc","2009-06-04 11:35:17+00:00","SCI: Support for 16-bit DPCM.

svn-id: r41164
"
"4f08dc538c91874aadb3abdd16eacee9a9ccccf6","2009-06-04 11:44:55+00:00","SCI: cleanup

svn-id: r41165
"
"6b1110b82d37c067dec5668d9ddaa1e51e5d0e91","2009-06-04 11:45:17+00:00","SCI: Moved MemObject code into a separate source file

svn-id: r41166
"
"c0f3c2dbd1d5d14457ac12136127233b3b08a237","2009-06-04 11:45:34+00:00","Code formatting in the gp2xwiz backend

svn-id: r41167
"
"c3206f36717a60bc331d5b3aa857fcae3b570ce9","2009-06-04 12:47:11+00:00","Updated the MSVC project files of the SCI engine

svn-id: r41168
"
"9e196ce9f5094ae0a12f0dea6167748477ad82c4","2009-06-04 14:29:20+00:00","SCI: Message: Added support for escape sequences.

svn-id: r41169
"
"a440d77408cf8e5cb4f570a3eeb0ee28338ab15d","2009-06-04 15:56:11+00:00","SCI: Added support for early SCI1.1 audio maps.

svn-id: r41170
"
"3da455420a122a53b22329ed59297ba0428c1497","2009-06-04 16:18:35+00:00","SCI: Audio: Fixed bug in reading of SOL header.

svn-id: r41171
"
"3091de6735aecac10cd18c7807bf74c7037cef91","2009-06-04 20:50:51+00:00","SCI: Added FIXME comment to not_register()

svn-id: r41172
"
"ae3c6c30531aa1def49939baf5a15c2e227365ae","2009-06-04 20:51:09+00:00","SCI: cleanup

svn-id: r41173
"
"f08f5c3bbf882b817ed6fc04530044e406ddd04f","2009-06-04 20:51:24+00:00","SCI: Slightly modified kAddAfter so that it does not modify its arguments needlessly

svn-id: r41174
"
"23a9b5544cdbb129ce88aaf5ee1835a283b9578e","2009-06-04 20:51:40+00:00","SCI: Added MemObject::isValidOffset method; use it to simplify determine_reg_type

svn-id: r41175
"
"870db34cd1e435891e02f54c1c0dc013f257135d","2009-06-04 21:42:24+00:00","SCI: Renamed _kfuncTable -> _kernelFuncs; and simplified/streamlined the kernel func map in kernel.cpp a bit

svn-id: r41176
"
"10c54394bd2f97a6a59a4fc1aedfcad09c40f1dc","2009-06-04 21:44:39+00:00","SCI: Renamed EngineState::flags and version to _flags and _version (following our conventions); also slightly changed the EngineState constructor to init _version & _flags, and used this to make them constant

svn-id: r41177
"
"4f4005f0b09668b608962ce32988ce63e269e55c","2009-06-04 21:53:45+00:00","oops

svn-id: r41178
"
"29cc1efe3cc6dd344383a8b8b6e9a59b4e78ece1","2009-06-04 22:12:13+00:00","LOL: implemented Vaelan's cube

svn-id: r41179
"
"fa02e0df7b48a3d24984d78117dc2952d0b6c5b4","2009-06-04 22:16:31+00:00","SCI: Made some members of class Resource protected; some cleanup

svn-id: r41180
"
"8e987c80d1d66815687c8aac0efdc5543e2b697a","2009-06-04 23:55:08+00:00","SCI: Fixed some endian bugs related to speech handling. READ_UINT* are not LE,
but use native endianness. Thanks to clone2727 for pointing this out.

svn-id: r41181
"
"be36b352fca2c3e6ec0ae3b0c33d0028927d5343","2009-06-05 00:21:10+00:00","Sound resource 1 is used for queued speech in HE60+ games, and should never be nuked, when expiring resources.

svn-id: r41182
"
"fa2b1add9d2febe7dd2e5691eaa85f8e7725163c","2009-06-05 00:28:07+00:00","Ooops, update asserts in grabScreen565() too.

svn-id: r41183
"
"9911c1bf59048d9661b720f3de6f33176b5ef1e2","2009-06-05 00:33:25+00:00","Fix endian issue, the palette must be in little endian.

svn-id: r41184
"
"de348d6fa8bf41ad30f2b85357cd4d20ad64f3e9","2009-06-05 00:57:58+00:00","Update sound code in HE80+ games, for sound rate differences.

svn-id: r41185
"
"3c58a6ca8f1e74bc9f7ba7022d01b95710d5b03e","2009-06-05 01:12:52+00:00","SCI: Audio: Fixed bug in sample length computation.

svn-id: r41186
"
"e90364c890dcea2ca824941495365ed915146d41","2009-06-05 01:20:39+00:00","Update o72_getPixel() for 16bit color, and cleanup.

svn-id: r41187
"
"9ca2345fc13c9422f118ed00039e2fd900383fd5","2009-06-05 02:35:38+00:00","Fix issues selecting some items in arttime and football.

svn-id: r41188
"
"58d494a7cb11c97834c61f6596d38c1c71c57031","2009-06-05 04:16:32+00:00","Minor cleanup.

svn-id: r41189
"
"1f43d9b860b9c1a6d5e62cc261ff5da94b42d50e","2009-06-05 04:28:07+00:00","Correct error in decompress16BitWizImage().

svn-id: r41190
"
"f8361b5c53b96faddb56024bb932ce46b7005dbf","2009-06-05 06:41:04+00:00","Converted cursor code to use 16-bit.

svn-id: r41191
"
"7edfab28d82f4c15bf95ad63d0ce480676f85c62","2009-06-05 06:47:49+00:00","Ooops, correct mistakes in commit 41162.

svn-id: r41192
"
"662a305752214564a9db0ac2d61594367067efa1","2009-06-05 07:07:56+00:00","HACK not required at this point, since transparency color of 5 is still used for 16bit color HE games.

svn-id: r41193
"
"9789ba7f28d2c0a093adda01435306f28e91fede","2009-06-05 08:09:37+00:00","Corrected backend to be able to accept a 16-bit mouseKeyColor without overflow

svn-id: r41194
"
"ccee18a489ece14c499c4e0c43aeb7fc216451fb","2009-06-05 10:13:19+00:00","Cleanup.

svn-id: r41195
"
"862d1cf42b9d9ce61c1bcf52aa2f7efe75d5249f","2009-06-05 12:20:42+00:00","Tweaks to the code that pauses for a mouse press when displaying many text messages

svn-id: r41196
"
"24cb130b264285ff9635ee8242063ed2afaade11","2009-06-05 18:05:45+00:00","Removed some unused code and performed some cleanup

svn-id: r41197
"
"7c84cca81d4fd7eeadd3d6903d80e1e856c2d5a0","2009-06-05 19:04:14+00:00","Moved some more debug commands to ScummVM's coneole and removed some unused code

svn-id: r41198
"
"90ee879d89ad974df64a5119ae92d40141309496","2009-06-05 21:34:18+00:00","LOL: implemented another opcode

svn-id: r41199
"
"7e5269402541c5e8967cdfc17283fb89f27f69e2","2009-06-05 22:35:13+00:00","Make the PlayStation's abbreviation to all lower-case for consistency and change the description from Playstation to Sony PlayStation

svn-id: r41200
"
"5f005bf93099def8c9fb1bb2eb61df600b0f0ed5","2009-06-05 22:53:36+00:00","LOL: minor bug fix

svn-id: r41201
"
"da36901b0751b9d4faaae30dce230b67d75e04e6","2009-06-05 23:08:35+00:00","Cleanup

svn-id: r41202
"
"d65bbe1d7a5efbcf04831dbb68a45ca833db1ae1","2009-06-05 23:59:40+00:00","Fixes ScummEngine_v70he::setDefaultCursor to work in 16-bit, using a temporary hack.

svn-id: r41204
"
"61a7b7c6259553e2541bb1d16a77961145827ce6","2009-06-06 00:07:18+00:00","SCI: Moved the handling of 65535.map into the resource manager.

svn-id: r41205
"
"8ff3a568fa8fe564749080a9af5e20b897933d93","2009-06-06 00:10:40+00:00","Merged revisions 41154-41156,41160,41163-41181,41185-41186,41188-41189,41196-41202 via svnmerge from
https://scummvm.svn.sourceforge.net/svnroot/scummvm/scummvm/trunk

........
r41154 | thebluegr | 2009-06-04 18:25:48 +1000 (Thu, 04 Jun 2009) | 1 line

Turned debug_weak_validations on by default again, as apparently some games like SQ3 fail in some validations (e.g. when loading). Also, fixed a potential out of bounds access when copying the value of __FILE__ into a buffer (as its value can be quite long in some cases).
........
r41155 | thebluegr | 2009-06-04 18:28:20 +1000 (Thu, 04 Jun 2009) | 1 line

Reordered the numpad keys so that they make more sense, and simplified the code which returns the values of shifted function keys
........
r41156 | djwillis | 2009-06-04 18:30:31 +1000 (Thu, 04 Jun 2009) | 1 line

Initial import of the GP2XWiz backend (based on the GP2X and SDL backends). Includes configure changes and one #ifdef to SDL backend. Also updates NEWS.
........
r41160 | strangerke | 2009-06-04 19:48:56 +1000 (Thu, 04 Jun 2009) | 1 line

gob : _spriteBottom incorrectly saved and restored in Draw_v2::spriteOperation
........
r41163 | fingolfin | 2009-06-04 21:28:05 +1000 (Thu, 04 Jun 2009) | 1 line

SCI: Renamed various debug related global variables to have a g_ prefix; and moved any 'extern' decls of them into a new header file
........
r41164 | waltervn | 2009-06-04 21:35:17 +1000 (Thu, 04 Jun 2009) | 2 lines

SCI: Support for 16-bit DPCM.
........
r41165 | fingolfin | 2009-06-04 21:44:55 +1000 (Thu, 04 Jun 2009) | 1 line

SCI: cleanup
........
r41166 | fingolfin | 2009-06-04 21:45:17 +1000 (Thu, 04 Jun 2009) | 1 line

SCI: Moved MemObject code into a separate source file
........
r41167 | fingolfin | 2009-06-04 21:45:34 +1000 (Thu, 04 Jun 2009) | 1 line

Code formatting in the gp2xwiz backend
........
r41168 | thebluegr | 2009-06-04 22:47:11 +1000 (Thu, 04 Jun 2009) | 1 line

Updated the MSVC project files of the SCI engine
........
r41169 | waltervn | 2009-06-05 00:29:20 +1000 (Fri, 05 Jun 2009) | 2 lines

SCI: Message: Added support for escape sequences.
........
r41170 | waltervn | 2009-06-05 01:56:11 +1000 (Fri, 05 Jun 2009) | 2 lines

SCI: Added support for early SCI1.1 audio maps.
........
r41171 | waltervn | 2009-06-05 02:18:35 +1000 (Fri, 05 Jun 2009) | 2 lines

SCI: Audio: Fixed bug in reading of SOL header.
........
r41172 | fingolfin | 2009-06-05 06:50:51 +1000 (Fri, 05 Jun 2009) | 1 line

SCI: Added FIXME comment to not_register()
........
r41173 | fingolfin | 2009-06-05 06:51:09 +1000 (Fri, 05 Jun 2009) | 1 line

SCI: cleanup
........
r41174 | fingolfin | 2009-06-05 06:51:24 +1000 (Fri, 05 Jun 2009) | 1 line

SCI: Slightly modified kAddAfter so that it does not modify its arguments needlessly
........
r41175 | fingolfin | 2009-06-05 06:51:40 +1000 (Fri, 05 Jun 2009) | 1 line

SCI: Added MemObject::isValidOffset method; use it to simplify determine_reg_type
........
r41176 | fingolfin | 2009-06-05 07:42:24 +1000 (Fri, 05 Jun 2009) | 1 line

SCI: Renamed _kfuncTable -> _kernelFuncs; and simplified/streamlined the kernel func map in kernel.cpp a bit
........
r41177 | fingolfin | 2009-06-05 07:44:39 +1000 (Fri, 05 Jun 2009) | 1 line

SCI: Renamed EngineState::flags and version to _flags and _version (following our conventions); also slightly changed the EngineState constructor to init _version & _flags, and used this to make them constant
........
r41178 | fingolfin | 2009-06-05 07:53:45 +1000 (Fri, 05 Jun 2009) | 1 line

oops
........
r41179 | athrxx | 2009-06-05 08:12:13 +1000 (Fri, 05 Jun 2009) | 1 line

LOL: implemented Vaelan's cube
........
r41180 | fingolfin | 2009-06-05 08:16:31 +1000 (Fri, 05 Jun 2009) | 1 line

SCI: Made some members of class Resource protected; some cleanup
........
r41181 | waltervn | 2009-06-05 09:55:08 +1000 (Fri, 05 Jun 2009) | 3 lines

SCI: Fixed some endian bugs related to speech handling. READ_UINT* are not LE,
but use native endianness. Thanks to clone2727 for pointing this out.
........
r41185 | Kirben | 2009-06-05 10:57:58 +1000 (Fri, 05 Jun 2009) | 1 line

Update sound code in HE80+ games, for sound rate differences.
........
r41186 | waltervn | 2009-06-05 11:12:52 +1000 (Fri, 05 Jun 2009) | 2 lines

SCI: Audio: Fixed bug in sample length computation.
........
r41188 | Kirben | 2009-06-05 12:35:38 +1000 (Fri, 05 Jun 2009) | 1 line

Fix issues selecting some items in arttime and football.
........
r41189 | Kirben | 2009-06-05 14:16:32 +1000 (Fri, 05 Jun 2009) | 1 line

Minor cleanup.
........
r41196 | dreammaster | 2009-06-05 22:20:42 +1000 (Fri, 05 Jun 2009) | 1 line

Tweaks to the code that pauses for a mouse press when displaying many text messages
........
r41197 | thebluegr | 2009-06-06 04:05:45 +1000 (Sat, 06 Jun 2009) | 1 line

Removed some unused code and performed some cleanup
........
r41198 | thebluegr | 2009-06-06 05:04:14 +1000 (Sat, 06 Jun 2009) | 1 line

Moved some more debug commands to ScummVM's coneole and removed some unused code
........
r41199 | athrxx | 2009-06-06 07:34:18 +1000 (Sat, 06 Jun 2009) | 1 line

LOL: implemented another opcode
........
r41200 | mthreepwood | 2009-06-06 08:35:13 +1000 (Sat, 06 Jun 2009) | 1 line

Make the PlayStation's abbreviation to all lower-case for consistency and change the description from Playstation to Sony PlayStation
........
r41201 | athrxx | 2009-06-06 08:53:36 +1000 (Sat, 06 Jun 2009) | 1 line

LOL: minor bug fix
........
r41202 | thebluegr | 2009-06-06 09:08:35 +1000 (Sat, 06 Jun 2009) | 1 line

Cleanup
........

svn-id: r41206
"
"95a4ea15b52062f97bae459983a4f8498dab50a4","2009-06-06 00:53:08+00:00","Bugfix for display when multiple user waits follow each other

svn-id: r41207
"
"3739d82f62e89b6a0690f52934a5489529d81dd5","2009-06-06 01:00:44+00:00","Bugfix to show the title screen at the correct speed when restarting the game

svn-id: r41208
"
"56e5920bba753820c457c078237a8c06241302ed","2009-06-06 01:16:04+00:00","Corrected cursor display errors introduced by revision 41204, reimplemented 16-bit cursor support in a less hacky, but still temporary way.

svn-id: r41209
"
"93375bddf02ae03c3bccced88af6aa0d0ad98b26","2009-06-06 01:39:08+00:00","Disabled the execution of scripts when doing a user wait - this prevents animated backgrounds from jerking to new positions once the mouse has been pressed

svn-id: r41210
"
"f379d7fe1a2b261dbdfbd4c152fb2ff8d7f18277","2009-06-06 07:22:19+00:00","Add initial support for copyMaskWizImage, to fix videos in later Blue's Clues games.

svn-id: r41211
"
"4087a3e6e8ebc0b519fc4c178a29696bd64fdd6f","2009-06-06 08:02:45+00:00","Corrected 16-bit cursor blit errors on GFX mode change.

svn-id: r41212
"
"0323638ce933e1dea7dd81b35a6646a9773a01ea","2009-06-06 08:41:03+00:00","Streamlined the cursor blitting changes introduced in revision 41412

svn-id: r41213
"
"8033a391288de399abc80bd23e988d586fb871a5","2009-06-06 10:21:48+00:00","Objectified the graphics driver

svn-id: r41214
"
"be414833733fb5754b11bb7777f9a8e1a0c168f4","2009-06-06 10:36:38+00:00","Moved the fake 1x1 mode structure to gfx_resmgr.cpp (where it's actually used)

svn-id: r41215
"
"26b03dd359e28ebb058a6c8d1cd2773ebd4a8ab2","2009-06-06 10:40:32+00:00","Some uint8 -> byte conversions

svn-id: r41216
"
"d11d56ae13491f92c667b7210e4f4bac15425349","2009-06-06 10:50:37+00:00","Add logic stub for Backyard Basketball.

svn-id: r41217
"
"06f12248a1ae70ff9136eae089bf89d2e9f01943","2009-06-06 11:01:25+00:00","Merged revisions 41205,41207-41208,41210,41214-41217 via svnmerge from
https://scummvm.svn.sourceforge.net/svnroot/scummvm/scummvm/trunk

........
r41205 | waltervn | 2009-06-06 10:07:18 +1000 (Sat, 06 Jun 2009) | 2 lines

SCI: Moved the handling of 65535.map into the resource manager.
........
r41207 | dreammaster | 2009-06-06 10:53:08 +1000 (Sat, 06 Jun 2009) | 1 line

Bugfix for display when multiple user waits follow each other
........
r41208 | dreammaster | 2009-06-06 11:00:44 +1000 (Sat, 06 Jun 2009) | 1 line

Bugfix to show the title screen at the correct speed when restarting the game
........
r41210 | dreammaster | 2009-06-06 11:39:08 +1000 (Sat, 06 Jun 2009) | 1 line

Disabled the execution of scripts when doing a user wait - this prevents animated backgrounds from jerking to new positions once the mouse has been pressed
........
r41214 | thebluegr | 2009-06-06 20:21:48 +1000 (Sat, 06 Jun 2009) | 1 line

Objectified the graphics driver
........
r41215 | thebluegr | 2009-06-06 20:36:38 +1000 (Sat, 06 Jun 2009) | 1 line

Moved the fake 1x1 mode structure to gfx_resmgr.cpp (where it's actually used)
........
r41216 | thebluegr | 2009-06-06 20:40:32 +1000 (Sat, 06 Jun 2009) | 1 line

Some uint8 -> byte conversions
........
r41217 | Kirben | 2009-06-06 20:50:37 +1000 (Sat, 06 Jun 2009) | 1 line

Add logic stub for Backyard Basketball.
........

svn-id: r41218
"
"a5a0a9536115cc9e0169e9cb75274a9f61c02e73","2009-06-06 11:34:11+00:00","Adding my German version of Playtoons 2 ('Rummelsdorf hoch zwei')

svn-id: r41219
"
"60e02ad6a81bc30d99c3f803893a88515b237c4e","2009-06-06 11:38:20+00:00","Store long-term pointers to object variables in a new ObjVarRef struct.
Storing them as reg_t* could cause the pointers to become invalid
when they pointed into CloneTable since CloneTable can be re-allocated.

svn-id: r41220
"
"94e976287081969c3c52e0e97bd400da09970f44","2009-06-06 12:18:39+00:00","KYRA/LOL: fix input code for japanese game versions

svn-id: r41221
"
"bc6d19aa1a7fea4f1cef3f0bbeb5d42739fafa80","2009-06-06 12:30:13+00:00","SCI: Fix audio regression in KQ5CD, introduced in r41205.

svn-id: r41222
"
"ad1b53472b8a5e9c89b898bd67d16548e9b3e8f7","2009-06-06 14:14:07+00:00","LOL: fixed vaelan's cube

svn-id: r41223
"
"2af195482f1f86fc97b15e0acbb4c9f484929cab","2009-06-06 14:42:03+00:00","LOL: fixed level temp data size

svn-id: r41224
"
"4ee29a020d2fa0b5fc67bc62e1aaf74c02881304","2009-06-06 15:32:42+00:00","LOL: fix last commit

svn-id: r41225
"
"cf194d7bb73fd6c4173dbe810c5219e8e4f42a4b","2009-06-06 15:41:17+00:00","GP2XWiz: Cleanup and start to work on virtual keyboard support for the backend.

svn-id: r41226
"
"e572811aedc5141189d4c1db9069a9ad564f21dd","2009-06-06 16:43:13+00:00","Moved some more debug commands to ScummVM's coneole

svn-id: r41227
"
"18941738526113c9153e05d455926b357cdfa7d3","2009-06-06 16:47:21+00:00","Adding a pause mode

svn-id: r41228
"
"ba134a51582e4c7d7ec33cd65027245e056822b0","2009-06-06 16:48:29+00:00","Adding a general coktelplayer.scn demo file

svn-id: r41229
"
"c2a6ae1db3dae0b8d67bda36af71aab41c47f693","2009-06-06 16:52:45+00:00","GP2X: Small cleanup of control code and start to work on virtual keyboard support for the backend.

svn-id: r41230
"
"22ab4cc4c4cb197432742c59f695937e29af3159","2009-06-06 17:10:15+00:00","Fix unused variable warnings.

svn-id: r41231
"
"4ceec0dfbbc1978c8c59bcf83e3eb75caa9d0e19","2009-06-06 17:21:50+00:00","Virtual Keyboard: Fix detection of v_align option when used in the keyboard definition.

svn-id: r41232
"
"c295f524b23af358192ddb352454ebf995dd51b0","2009-06-06 17:36:06+00:00","Implement feature request #1180217: 'GUI: Mute option'

svn-id: r41233
"
"1d3f194b1d01d05a178125fda303a08dec24e41b","2009-06-06 17:36:21+00:00","Mention new hotkey in README

svn-id: r41234
"
"74c16b007237cda5817c89693260e9330164e05a","2009-06-06 17:36:58+00:00","Add Mute control to all themes

svn-id: r41235
"
"974f47bbbae067a0388986a21c97b80909510c02","2009-06-06 17:37:15+00:00","Implement FR#1522626: 'GUI: Friendlier 'Add Game' session'

svn-id: r41236
"
"cf2ad8fd02773677efb34ef93a3300070f12efe9","2009-06-06 17:37:31+00:00","Implement FR#2090830: 'GUI: RTL should focus game list on the last game played'

svn-id: r41237
"
"c585366ce934403dc7625de62179c24a10520350","2009-06-06 17:37:51+00:00","Decrease number of free memory pages to realistic value

svn-id: r41238
"
"93d62da652d8bf514047b79aedb5412a7380397b","2009-06-06 17:39:13+00:00","Whitespace fixes and C++ comments

svn-id: r41239
"
"194ab100c7c9b729c974e0c90434a2a86c1846ec","2009-06-06 17:39:42+00:00","Fix bug #2434187: 'SQ2: message not displayed, or vanishes too quickly'

svn-id: r41240
"
"a7049e5b3d4d165b59cb509101050177944828ec","2009-06-06 17:40:09+00:00","Fix implementation of prevent.input. This fixes SQ2 intro

svn-id: r41241
"
"3ba873c72bbd2546583987ade7f8ab517ef8502a","2009-06-06 17:40:27+00:00","Fix bug #2026570: 'SQ2: Prompt disappears when it shouldn't'

svn-id: r41242
"
"26d8b2bb727376bdd5fb93f74b2595edcedc087d","2009-06-06 17:40:56+00:00","Fix bug #2721940: 'AGI: Gold Rush! Restart Option differs from original'

svn-id: r41243
"
"a5d762c029b904258cc1346fea54fb255585470f","2009-06-06 17:41:29+00:00","Fix bug #1745954: 'GR: Intro 'jumpy' in parts (Amiga version)'

svn-id: r41244
"
"b26ae991f8b03ee03710f7bf29e134ca4fa42319","2009-06-06 17:41:50+00:00","Store and compare MD5s in the saves

svn-id: r41245
"
"5a07ba9c57ea96cb60ccecfe4852504ba72b2a69","2009-06-06 17:42:12+00:00","Disable save/load when original did not allow

svn-id: r41246
"
"c5f41b29fa1a7baf3e5b03e1d37bb2b95ba2b9fe","2009-06-06 17:42:37+00:00","Stop abusing game flag.

svn-id: r41247
"
"531b96bbbeca327ac6a68edb6831d669b68fee17","2009-06-06 17:43:04+00:00","Remove duplicated amiga busy cursor

svn-id: r41248
"
"ed797c07090a8c41f3f2451f35aa0cc8d5aa4544","2009-06-06 17:43:26+00:00","Implement debug commands 'room' and 'bt'

svn-id: r41249
"
"2eb7e914e809df2e354281199b3a6824c96bc995","2009-06-06 17:43:51+00:00","Fix bug #2026605: 'SQ2: Have to wait after dying to do anything.'

svn-id: r41250
"
"45764de138c130766cb48981052058ac4be0e4e6","2009-06-06 17:44:24+00:00","Cleanup

svn-id: r41251
"
"72d25455e050223b4dbd8fa5a5fa4e5326c7c055","2009-06-06 17:44:46+00:00","Implement scummvm.ini flag features for AGI engine

svn-id: r41252
"
"2113060c43c4975f0c2960d32b3e580ae86bb7ec","2009-06-06 17:45:06+00:00","Implement cancel.line. Consider obj.status.f implemented

svn-id: r41253
"
"1a321a206471bd3e18cd5c2d5d1cc452c051a235","2009-06-06 17:45:52+00:00","Cleanup

svn-id: r41254
"
"c393144b19dc5bd5e7e1c4d28ab56bc0b0affa38","2009-06-06 17:46:19+00:00","Implement hold.key and release.key opcodes

svn-id: r41255
"
"9ff714a2dbe951f7866614806fc9d5e217afb2df","2009-06-06 17:46:38+00:00","Implement allow.menu opcode

svn-id: r41256
"
"8792628a465b56c1a11e24867c5a6979a0c7cc1f","2009-06-06 17:46:55+00:00","Implement hide.mouse and show.mouse opcodes

svn-id: r41257
"
"d6a4dbeb1d41d7d51e58822db9e4036fd1fbeeae","2009-06-06 17:47:29+00:00","Implement fence.mouse opcode

svn-id: r41258
"
"ea3373708c6aaea0f04543b913883dbb74556f52","2009-06-06 17:48:09+00:00","Correct implementation for set.key opcode. Fixes #2605104: 'AGI: Manhunter, F3 hotkey dosent work', removed number of hacks

svn-id: r41259
"
"0057d9b9b2c935cd1b49b05fe78c017868167432","2009-06-06 17:48:30+00:00","Add guard check to set.key opcode.

svn-id: r41260
"
"a3b6b0efb5a4b2472aeb94865fb292641d477001","2009-06-06 17:48:46+00:00","Make PopUp widget look more balanced

svn-id: r41261
"
"41505a00d0d70a9344969c2126417a3dfb6621c8","2009-06-06 17:49:09+00:00","Improved look of popup widget, buttons, checkbox and tab widget

svn-id: r41262
"
"f2547eb62c3ab6a4085f6341a66d304287f39d6f","2009-06-06 17:49:59+00:00","Implement FR#2707442: 'GUI: Improve Mass Add dialog'

svn-id: r41263
"
"b49d23b89810fc196a27e2d3c49e17364fc5f453","2009-06-06 17:50:30+00:00","Sync all themes with improvements of mass dialog. Fixed list positioning

svn-id: r41264
"
"b0f7f2e8d412b65a7bb950f50d1fa511fd6ef946","2009-06-06 17:51:41+00:00","Implement widget property 'textalign'. Added it to all theme layouts

svn-id: r41265
"
"b0db1b5ed0634dee707d234cfda23201c648cf98","2009-06-06 17:52:44+00:00","Implement FR#2507667: 'GUI: Improve PopupWidget rendering / theme layouting'.
- Split out label from PopUp widget
- Aligned every widget on all layouts so GUI becomes to look nice again
- Moved textHAlign to layout properties

svn-id: r41266
"
"dcc90445f6ea424bd4576f04afbc790fc43a5c76","2009-06-06 17:53:25+00:00","Add to launcher not yet functional search widget.
Make EditableWidget CommandSender

svn-id: r41267
"
"5fc047dddfcad4e712bea97aadd561493f4f388c","2009-06-06 17:54:08+00:00","Implement FR#1970293: 'LAUNCHER: Add 'quick search' input field like in iTunes'

svn-id: r41268
"
"f66da82f0375918c59d6edc6ad806d9530cc1387","2009-06-06 17:54:28+00:00","Improvements to laucher dialog
- Made quicksearch turned off in the launcher game list
- Turn ListWidget into CommandSender
- Turn quicksearch off in launcher game list
- Connect laucher list widget with search box so search is initiated by typing

svn-id: r41269
"
"020450465d72cc9c97aa9d9b145ed56984becd9f","2009-06-06 17:54:43+00:00","Fix font size in EditTextWidget on screen resolution change.

svn-id: r41270
"
"f6d06085d5b7e4723117147d84eec477c0b6f9db","2009-06-06 17:54:59+00:00","Fix item selection on filtered out list in launcher

svn-id: r41271
"
"1bd6f6c99fbc3328e2405efe3fdec0dec1bf24e4","2009-06-06 17:56:41+00:00","Added game GUI options to advancedDetector and updated all engines

svn-id: r41272
"
"8eb417e15e978729b6724a9e9da38b9d6897e5de","2009-06-06 17:56:59+00:00","Fix bug with GUI options not set when per-game setting is empty

svn-id: r41273
"
"eb909702af7a1fc48c77b000cc4b4e647ebf4e60","2009-06-06 17:57:39+00:00","Add GUI options support to Sky, Queen and Sword1&2 engines (which do not use AD)

svn-id: r41274
"
"bbac0f1eeae44519032f742e94ed6ea956f8a161","2009-06-06 17:58:08+00:00","Implement FR#862150: 'GUI: Show subtitles/speech options only for speech games'
Add generic per-game GUI options support along the way ;)

svn-id: r41275
"
"472e5906cad12161b39a8723b422221554208ce1","2009-06-06 17:58:29+00:00","Do not change list content if filter was not changed

svn-id: r41276
"
"c8aa63e553dcb727b5eaf5da156ddee19491fc9d","2009-06-06 17:59:04+00:00","Disable load from the launcher button for AGOS and Gob games with use of GUI options

svn-id: r41277
"
"57b17efd782a419a0c0d445378614722a52b6a27","2009-06-06 17:59:54+00:00","Add support for GUI options to SCUMM engine

svn-id: r41278
"
"e572af84aa2f2f9e8465cf8ef6daa0b70a80bd62","2009-06-06 18:02:16+00:00","Removed unused variable

svn-id: r41279
"
"80e78220380862a017fb79f385fe1fcee32218f4","2009-06-06 18:11:05+00:00","Add empty file to cheat git-svn

svn-id: r41280
"
"986a0b83b61146094cb748b7b291ed5e074a832b","2009-06-06 18:21:07+00:00","Disable MIDI controls if GUIO_NOMIDI is set

svn-id: r41281
"
"cda17beff56b0c503f03b5f75be0a5f589dbeedc","2009-06-06 18:21:49+00:00","Patch #1365914: 'SCUMM: CMS support.' Disabled by default. Still plenty to do.

svn-id: r41282
"
"79d082f9c24aa3b148a0b684ec81f42164de88a1","2009-06-06 18:22:18+00:00","Added couple of newly discovered fanmade AGI games.

svn-id: r41283
"
"a0fa307fc5b52e9fc45b5dedd9e837ea02af0384","2009-06-06 18:22:43+00:00","Added CoCo3 version of SQ1

svn-id: r41284
"
"167874cf1a242392c2675d36f4a0f37f39270892","2009-06-06 18:23:05+00:00","Added GUI options for newly added games

svn-id: r41285
"
"da469d6d245555e1bdf353fcad798a030e8cb9d1","2009-06-06 18:23:24+00:00","Shut gcc warning.

svn-id: r41286
"
"fe75d083b79f2aa838568129fb08a31fc99c02aa","2009-06-06 18:27:25+00:00","Bump theme version to 0.5 due to number of recent changes.

svn-id: r41287
"
"6cff94e7c286649a3bf5db653a4e054b219b91d2","2009-06-06 18:32:33+00:00","Restore search.bmp which was lost

svn-id: r41288
"
"41120e22185f9b1398bccfd7fb065864bb2a84c2","2009-06-06 18:33:20+00:00","Fix printf format argument related warnings.

svn-id: r41289
"
"fe967127e261b292b7b860ef171da6d926908bec","2009-06-06 18:38:41+00:00","Updated the MSVC project files of the SCUMM engine for commit #41282

svn-id: r41290
"
"f4360dffe3da2e7ad9bce3e912d810be280c2e26","2009-06-06 18:41:25+00:00","Flag all games without full voice over with GUIO_NOSPEECH.

svn-id: r41291
"
"b43df63b1c335c7c3f03dcbf2bb645ea63c59149","2009-06-06 18:46:07+00:00","LOL: fix flying item hit processing

svn-id: r41292
"
"6c44c7764c3776e6189cd1dfb519709c4864d7fa","2009-06-06 19:04:09+00:00","Fixed assertion when starting mass add and there are no games currently in the game list

svn-id: r41293
"
"2901694486712f6012152f7192afa10d08ffc561","2009-06-06 19:06:47+00:00","Demoplayer:
- Fixing the flawed double mode
- Adding an 'auto' double mode, where the videos get scaled if possible

svn-id: r41294
"
"efc5fc0c8c28f309467a08965f7c424f0ffcb7bb","2009-06-06 19:10:25+00:00","- Flag Kyra3 detection entries with GUIO_NOMIDI
- Get rid of using directive

svn-id: r41295
"
"e8463ff1d2a4407473b32e1a580f99df3cd601b3","2009-06-06 19:20:39+00:00","Bring old 'quick search' behavior of games list back.

svn-id: r41296
"
"24a512cab08a12eb2b8f3b759d7f3d82c6853a21","2009-06-06 19:47:55+00:00","Use GameDescriptor::setGUIOptions instead of setting key 'guioptions' directly.

svn-id: r41297
"
"0989bb0b9087e74662f546d13b2f16544cfba20b","2009-06-06 20:03:13+00:00","GOB: Got rid of class ReferenceCounter; changed SurfaceDesc::Ptr to SurfaceDescPtr (a Common::SharedPtr); and changed many SurfaceDesc pointers to references

svn-id: r41299
"
"d89fbd5b7568203c9634e93994bd28120d4adcc8","2009-06-06 20:05:21+00:00","Virtual Keyboard: 'Ab'use the console font to get a font small enough to be usable on 320*240 virtual keyboards for display_area (GUI and BigGUI take up far too much space).

svn-id: r41300
"
"1f9af832595cb344a2393853c3289a20a884f5ad","2009-06-06 20:22:16+00:00","Made fix for empty game list on starting MassAdd a bit more robust.

svn-id: r41301
"
"7375039158207373b0ec599d5bd4c0ce29c7dec2","2009-06-06 20:29:37+00:00","Moved some more debug commands to ScummVM's coneole

svn-id: r41302
"
"f788920af97b44c9b7158134ee5192045ab9ee42","2009-06-06 20:36:12+00:00","Virtual Keyboard: Add 320*240 support (in addition to 640*480) to the default keyboard pack. Also tweak vkeybd.xml to make it a little more like valid XML). New graphics still to come so excuse the ugly keyboard images for now.

svn-id: r41303
"
"fd94eeead06d99d087197e9b4251ebf7507a5bbd","2009-06-06 20:58:36+00:00","Make script executable

svn-id: r41304
"
"3d3da173b05a6a45ea909aca790bd04c2286dd88","2009-06-06 21:37:30+00:00","GOB: Turned _spritesArray into a Common::Array (of fixed size) to detect out-of-bounds access to it (since access is controlled by scripts, this could (and does :/) easily happen. Also removed an obsolete swap() method, and fixed one case where _spritesArray was indeed accessed out of bounds

svn-id: r41305
"
"ebc9e38ed04a344e8b4438b120916f7dba809ef5","2009-06-06 21:41:22+00:00","Fixing the Woodruff intro: Using a flag that's /not/ already used be the scripts

svn-id: r41306
"
"9f3a628ad5197602ed8f2c2f94b549d45d10591d","2009-06-06 21:45:47+00:00","Fixing the demoplayer's auto double mode and added a REBASE0 option that sets the video's X and Y coordinates to 0,0

svn-id: r41307
"
"f5e25f2152ac597f34a640b08f10bdd12c0f042d","2009-06-06 21:54:12+00:00","Setting the game type of the generic demoplayer to Urban so it can make use of the initial palette

svn-id: r41308
"
"8a0c5753f37c4af0ad5b3188d756e57c696d01d7","2009-06-06 23:22:22+00:00","GUI: Simplified ThemeEngine::getImageSurface (this way it's easier to add more graphics in the future ;)

svn-id: r41309
"
"34d097be204ca448202da34852dd4df397fcd83b","2009-06-06 23:22:35+00:00","GUI: Pressing 'ESC' in the Launcher's quick search field now resets the search filter

svn-id: r41310
"
"f906c4e80f12ebc1c46fe8c80dfa26ff0e4d64aa","2009-06-06 23:22:48+00:00","GUI: Tweaked the launcher so that TAB switches focus between the list and the quick search field

svn-id: r41311
"
"64a920d52ff5dd251d6c2e8b1e9766726d347e48","2009-06-06 23:39:58+00:00","Renamed the evaluateStore opcodes to assign, because that's what they are

svn-id: r41312
"
"f5edbba804d506941f0bf8ec44003b166ba02935","2009-06-06 23:40:11+00:00","Fascination needs o1_assign. o2_assign breaks the DOS floppy version

svn-id: r41313
"
"4416881c0770e4a287cc64fff5c4f91337aa0696","2009-06-07 00:37:30+00:00","LOL: implemented king richard healing sequence

svn-id: r41314
"
"6cfb706faee5020fd6196889de27ddf3e07c4c80","2009-06-07 00:51:19+00:00","Fix WSA v2 code, now the automap remove WSA file in Lands of Lore plays correctly.

svn-id: r41315
"
"b1041bba7fa643a4ef79675976adca7d0b9b3ff4","2009-06-07 00:58:14+00:00","Add support for 'WF_NO_LAST_FRAME' in WSA v1 code too. Since so far every v1 WSA file played fine, it might be unneeded, but better safe than sorry.

svn-id: r41316
"
"77f114ffcbeb1b4a3df4cd99b93e3f5caef2a574","2009-06-07 01:45:09+00:00","Dropping the v1 parser functions in favour of the extended v2 ones

svn-id: r41317
"
"e3d3195a43db521a16c2a0badc126bd8f43a8399","2009-06-07 02:18:38+00:00","SCI: Resmgr cleanup and preparations for moving resource36 handling into resmgr.

svn-id: r41318
"
"c37ff65613731d3484ad7788b6c4047053d63f7e","2009-06-07 08:33:46+00:00","Suppress use of parse_v1 and parse_v2 as DrMcCoy got rid of them.

svn-id: r41322
"
"5db387a4961f14798c6899ec1ed3534898225831","2009-06-07 08:46:15+00:00","Suppress inclusion of a not yet committed file

svn-id: r41323
"
"2c60fc82761b81976f26a90fd749b7a4dcf4529d","2009-06-07 10:03:19+00:00","Mention recent improvements

svn-id: r41324
"
"75ef63a363b42be27f2560c90a7953c18bcc2527","2009-06-07 10:04:41+00:00","Added MD5 from Bug #2796782: 'SCI: LSL1 Russian MD5'

svn-id: r41325
"
"a881ba9d42c92402184ff0b9a102c225d9a3b8aa","2009-06-07 10:13:05+00:00","MD5 from bugreport #2797962: 'SCI: Laura Bows 2 german, md5'

svn-id: r41326
"
"09fe7b31525dc72891a92ac0fbc577b9494ad9db","2009-06-07 10:34:01+00:00","LOL: implemented some missing monster animation code

svn-id: r41327
"
"d3ede78c9a51b46fdfebf907988d13cc410af7ee","2009-06-07 12:01:21+00:00","Since we're in 16bit branch, enable 16bit by default

svn-id: r41330
"
"ed44e68f9d3811d9edb2ed07057c5596cf0d9a8e","2009-06-07 12:37:16+00:00","AGI: Fixed typo in game name ;)

svn-id: r41331
"
"985bc454b20f20f2eccb62a2f3000022ac0d2c99","2009-06-07 12:47:10+00:00","Added an experimental '--upgrade-targets' option (to be refined; and possibly hooked to the GUI eventually). This updates the guioptions,platform and lang for all your targets (and with a source change, also the descriptions)

svn-id: r41332
"
"a39048877a0db397e8412e722af296e7c49643de","2009-06-07 13:04:03+00:00","Added some new method variants to Common::String

svn-id: r41333
"
"de88db5f36ff666f9ae31cd0f4287d79fd25d22d","2009-06-07 13:04:16+00:00","Fix for bug #2802492 (GUI: search query causes game list scrollbar glitches)

svn-id: r41334
"
"6d59856fe1c2302a5e163f3b4799c94a721e102d","2009-06-07 13:07:16+00:00","LOL: implemented two more opcodes for castle cimmeria

svn-id: r41336
"
"a5ff6cc19d47fbe6acd8c6ad459b609a37ca39ec","2009-06-07 13:14:34+00:00","Fixed appending a (substring of a) string to itself

svn-id: r41337
"
"744323ca33ad94f4be7de9d3e394bf02725b5f7a","2009-06-07 15:53:30+00:00","Replaced/removed KP_UINT, KP_SINT, SKPV and UKPV as well as the VIEW_PRIORITY and PRIORITY_BAND_FIRST wrappers

svn-id: r41338
"
"36cdd09223aeb0b1839635e55e42131fc6834b3e","2009-06-07 16:44:57+00:00","Init _opl to 0. This prevents a crash on exit when the Adlib driver is closed, if the game music driver doesn't support music for the currently playing game (e.g. Christmas 1998)

svn-id: r41339
"
"3b687a7a04b08ab2c88b85fc265397f895b6ea6e","2009-06-07 16:50:34+00:00","Replaced KP_ALT, SKPV_OR_ALT and UKPV_OR_ALT

svn-id: r41340
"
"42555118bac45df0a14d2928b89ef44c3a606cd2","2009-06-07 17:05:58+00:00","cleanup

svn-id: r41341
"
"f2ca788004a86d7f1eb1a8ec27c26b552906fce4","2009-06-07 17:06:32+00:00","SCI: Renamed various song/songlib related structs and members

svn-id: r41342
"
"d07e9dfb1306f24fedcf521d3eb27144ad686bb4","2009-06-07 17:06:51+00:00","SCI: Objectified SongLibrary

svn-id: r41343
"
"62f596821e7c1e8c696cb3e4190822b33aa1a98c","2009-06-07 17:07:07+00:00","SCI: Objectified Song struct 'a bit'

svn-id: r41344
"
"21d948ec05e5bc09106edcf259bf839e3e8be964","2009-06-07 17:07:25+00:00","SCI: Simplified SongLibrary code a bit

svn-id: r41345
"
"ee21d82948d55518da2f09443d0113f942f9895f","2009-06-07 17:18:11+00:00","SCI: Fixed the broken SciEngine::pauseEngineIntern code by ensuring that SciEngine::_gamestate is updated whenever the EngineState gets changed (due to loading a savestate)

svn-id: r41346
"
"4dd29a5985a4190f99446865209850a40f12e2e4","2009-06-07 18:51:03+00:00","LOL: minor bug fix in battle system

svn-id: r41348
"
"a6ed05740f1f46639f38ccf0afb9c444564cc84f","2009-06-07 19:15:55+00:00","SCI: Moved resource36 handling into resource manager.

svn-id: r41349
"
"c7861cb65e7bcddc8bb7e51a7df30f6419dcc105","2009-06-07 19:58:00+00:00","Avoid warning about missing SFX file in Lands of Lore (it seems the original misses some datafiles for certain effects).

svn-id: r41350
"
"5c233c447ba9656608b41fd0bd46edcc830e8b13","2009-06-07 20:43:43+00:00","Remove LoLEngine::_gameFlags and convert all Lands of Lore code to use _flagsTable instead.

svn-id: r41351
"
"28a114c70210dffe7bb957da2ed2a041bd64f392","2009-06-07 22:05:57+00:00","Added current keymapper dialog to all themes so it could be tested by other
devs.

svn-id: r41352
"
"0c5dd48395e2974f592c537cdb89e8d5e7e28ffd","2009-06-07 22:15:28+00:00","Applied madmoose's patch from bug report #2794216 - 'Loading large Smacker movies is slow'

svn-id: r41353
"
"6dd009c1533bf80423f8006f87093cddc1610294","2009-06-07 22:17:44+00:00","Formatting

svn-id: r41354
"
"eb4f887ec342e504a3ff8fbc86560b7a652ea3c6","2009-06-07 22:19:48+00:00","Added Clear button for search box. Looks a bit off, but we do not yet have
skinned buttons.

svn-id: r41355
"
"ec38b77b004c8affefb6b1218833b56ad166d653","2009-06-07 22:34:03+00:00","Changed the bitstream buffer used to initialize the big Huffman trees to be a normal byte array, instead of a Common::Array

svn-id: r41356
"
"897c0104c9523eb4ab73fa612b8fd090c87c45e8","2009-06-07 22:41:38+00:00","Remove unneeded functionality from Screen.

svn-id: r41357
"
"77bcc94f80b04ad9f4cade885a7f548335530bed","2009-06-07 22:42:21+00:00","LOL: minor bug fix

svn-id: r41358
"
"0dcb1fa84f095753013e01c80b9b80e7c7dd5a0d","2009-06-07 23:04:34+00:00","SCI: Got rid of g_EngineState

svn-id: r41359
"
"22507d70bbe06b1da8cbb2599cfbf3114ca41fa7","2009-06-07 23:05:11+00:00","SCI: C++ified the song iterator code a little bit more

svn-id: r41360
"
"ed46e223eba88574ec7e58555db933326dd69870","2009-06-07 23:29:11+00:00","Hopefully fixed memory corruption when loading games

svn-id: r41361
"
"b85b40883816751106831966f5b9a89ba6a4a753","2009-06-08 02:26:33+00:00","- Fix Screen_v2::wsaFrameAnimationStep, now the MR album and LoL intro demo WSAs will be correctly played
- Made album page change in MR a bit slower, so it's visible at least

svn-id: r41362
"
"e4a3219103af365be9b6bd86f076e842e5c11c77","2009-06-08 08:21:18+00:00","Virtual Keyboard: Fix default keyboard pack to return correct events for ENTER and !.

svn-id: r41363
"
"95d32180dfec56ca981fca105f0dc4edc83ce183","2009-06-08 08:38:10+00:00","Moved some more debug commands to ScummVM's console

svn-id: r41364
"
"78de280f121503843905bdc2f91c2cd5d2b22211","2009-06-08 08:56:32+00:00","Update details for the Polish version of The Feeble Files.

svn-id: r41365
"
"4ff5a39f757b5b3840d152ae74ad1dcd357107e0","2009-06-08 09:10:12+00:00","Virtual Keyboard: Add source files for the default keyboard pack seperate from ZIP archive (makes it easier to version the packs vkeybd.xml and track fixes) and add script to build keyboard pack(s) ZIP's from source files (based on /gui/themes/scummtheme.py).

svn-id: r41366
"
"60f5ac33009f64e906f1ec3e9480c1665098c679","2009-06-08 11:42:13+00:00","Replaced GFXWARN with warning and GFXDEBUG with debugC

svn-id: r41367
"
"f2fe13b064731a494275ae4858c02a321468544d","2009-06-08 12:20:36+00:00","SCI: Cleanup

svn-id: r41368
"
"14c85028b12088e1b169a34488ece6522c4cf4ab","2009-06-08 12:37:24+00:00","sword1: add Broken Sword PSX demo support

svn-id: r41369
"
"87db37316c6d2cd410592cea278727d700cbc2f5","2009-06-08 14:21:43+00:00","Add Polish font data for The Feeble Files.

svn-id: r41372
"
"e78edd8ef6450a61f89a40ae6d8f7e9656a28237","2009-06-08 14:47:38+00:00","Virtual Keyboard: Move vkeybd.zip into packs folder and rename default keyboard pack to vkeybd_default(.zip) with updates to default-events.cpp. Also update vkeybdpack.py to use zlib compression if Python zlib is found. Update GP2X and GP2XWiz bundle files to get new vkeybd_default.zip.

svn-id: r41373
"
"ddf3336bc18f1fc7091728ce198acbcbb43ec849","2009-06-08 14:50:34+00:00","Add more Polish font data for The Feeble Files.

svn-id: r41374
"
"628e876a46eebe2beb1278626a29b2ecf4c47827","2009-06-08 14:55:11+00:00","Spacing.

svn-id: r41375
"
"2c55c49534f79eb0f191f67511ab96ad8339d918","2009-06-08 15:45:03+00:00","Virtual Keyboard: Fix slight error in earlier commit (failed to rename the XML to match the keyboard pack name).

svn-id: r41376
"
"aef8d2b04bfc2f3e28a5b58e55a7a27fa9da74ee","2009-06-08 17:47:37+00:00","Fix out of bounds memory access in Screen::drawShape.

svn-id: r41379
"
"51d0005af37140451afe4a448c22d14e973f5801","2009-06-08 17:54:44+00:00","sword1: slight cleanup of psx related sound code and comments

svn-id: r41380
"
"0f116f1c38106015c9dbd068e306472c40bfeeee","2009-06-08 18:30:28+00:00","Cleanup.

svn-id: r41381
"
"7f5b28ee8378c031bf39f2937414d61b2f842f96","2009-06-08 20:11:07+00:00","- Cleanup
- Fix regression in Kyra1 outro

svn-id: r41384
"
"8b1a6b1b6d7b56c1f71f573466d5197dfeddf2d5","2009-06-08 20:31:49+00:00","Virtual Keyboard: Add some quick changes to the virtual keyboard to activate submit and cancel events from the default lowercase keyboards. This makes it possible to cancel and submit without having to call Common::KEYCODE_F7 again. Sorry for the nasty (temp) graphics.

svn-id: r41385
"
"cfae0162008fb27dfd8e0e6c8aeab1721974c562","2009-06-08 20:46:21+00:00","Convert FWRenderer and OSRenderer to use Cine::Palette.
Also fix some bugs that came up in testing of Cine::Palette.

svn-id: r41386
"
"03423bbabd6ccca872afb08166772209957a36f6","2009-06-08 21:52:32+00:00","Actually we /did not/ put periods at ends of the sentences in majority of past entries

svn-id: r41389
"
"741de2812c79e9ba96f7698fb3f849fe6597ccbb","2009-06-09 00:00:24+00:00","Correct check for font data table used in The Feeble Files.

svn-id: r41393
"
"4a1029dee41adddc804eaba63dd2f1df2474b684","2009-06-09 06:37:42+00:00","Remove unused old code.

svn-id: r41395
"
"c426dd99a4c4149418fa16996e38f0995ddcaea5","2009-06-09 07:55:43+00:00","Laying the foundation for preliminary bitdepth negotiation. (No functionality changes yet)

svn-id: r41396
"
"ac46c98fb82f124bad5f2ece496b885a344e2cde","2009-06-09 11:26:15+00:00","- Moved Screen_v2::copyWsaRect to Screen::copyWsaRect
- Made WSAMovie_v1::displayFrame code match the original
- Changed WSAMovieAmiga::displayFrame to use Screen::copyWsaRect too
- Got rid of '...' parameter usage in all WSA player classes

svn-id: r41398
"
"fcc0b69c073399d4af0443108eaa22cb630b276f","2009-06-09 15:26:09+00:00","Add (failing) hashmap test case for collision handling

svn-id: r41400
"
"91d62c0a617cd2cefb69c2bb2339cfd08641d36d","2009-06-09 15:34:02+00:00","Changed some lines to tabs instead of whitespaces for identation.

svn-id: r41401
"
"a077fa43482518b2885da14066339752cf5b1deb","2009-06-09 18:14:49+00:00","Win Gob3 is multi-lingual (British, French, German)

svn-id: r41402
"
"5a1e1a167e477252ebbc051d94356c11030eb0be","2009-06-09 18:18:11+00:00","Win Gob2 is multi-lingual (American, French, German)

svn-id: r41403
"
"38c484abb2869f221af4a2c7fb12e76b9c112e3d","2009-06-09 18:19:11+00:00","Win Gob1 is multi-lingual (British, French, German, Italian, Spanish)

svn-id: r41404
"
"412628aaa32d2694afe35c70c8b0afd2a6b5b81f","2009-06-09 18:52:55+00:00","Multi-lingual Inca2 version (American, French, German, Italian, Spanish)

svn-id: r41405
"
"5728ff23cadf6b7695be42fc75a737afd17cf67f","2009-06-09 18:53:17+00:00","Win Lost in Time is multi-lingual (British, French, Spanish)

svn-id: r41406
"
"6f49d1576b54e333f8da9b87ecc0e8ce03c473e9","2009-06-09 18:53:35+00:00","Added a workaround for Win Lost in Time.
It's got VMD files which are still referenced as IMD

svn-id: r41407
"
"5e68fbfe875686c6ab1fda0a85d2a878486656c2","2009-06-09 19:18:48+00:00","SCI: Moved SCI1 audio map handling into the resource manager.

svn-id: r41408
"
"a19622994bc8c8411a64ad458335ee1989a78817","2009-06-09 19:37:24+00:00","Fixed CLEAR

svn-id: r41409
"
"0a793f08a4d198f3f766214ed4ce85ac51ccea5e","2009-06-10 05:35:18+00:00","SDL backend now dynamically generates 8 or 16-bit color surface depending on engine request (using ad-hoc format).

svn-id: r41416
"
"58a348fd18727aab57c0f4f8ab4cc5ad893ee795","2009-06-10 05:35:54+00:00","Scumm engine now dynamically requests 16-bit color based on game features, (using ad-hoc request format)

svn-id: r41417
"
"8a8366aab5ee33857a0574aac6675f27912388c3","2009-06-10 06:05:11+00:00","Correct horizontal flipping in decompressWizImage(), when using 16bit color.

svn-id: r41418
"
"ea0a2bcbbdc0406eec97e161572c69da4e80f61a","2009-06-10 08:18:44+00:00","Clarify that Cygwin is not supported as building platform anymore

svn-id: r41419
"
"b4c44a018b636a9805c725f9a286e58be554afc2","2009-06-10 08:41:33+00:00","Code formatting

svn-id: r41420
"
"ff72f8531cea80be7606e338dbdbd6413b298661","2009-06-10 10:11:24+00:00","Added debugCN() call which does not add newline automatically

svn-id: r41421
"
"f2c1b182424f3e76ab72a770e8d3f059deb8e929","2009-06-10 12:15:50+00:00","Added variable to savegame format so that savegames can be correctly loaded from the ScummVM launcher

svn-id: r41423
"
"e487347921fc751a85b221fa7a8c9c455cc595d6","2009-06-10 12:16:30+00:00","Added support for loading savegames from the launcher

svn-id: r41424
"
"ad98719ba260caa602aa38522ce06f85bb621f1b","2009-06-10 12:47:19+00:00","Fix documentation for debugC and debugCN, relying on special debug levels.

svn-id: r41425
"
"3a32d7711b813e8de1d0a5a05fa48368a8a1206a","2009-06-10 15:01:20+00:00","Fix a bug in disableCursorPalette, where it never allowed the palette to be enabled properly again.

svn-id: r41428
"
"b1b03a33ba1f338d2c8c26c55292c5e2e3b8cf90","2009-06-10 15:04:21+00:00","Gob detection :
- use GUIO_NOSPEECH and GUIO_NOSUBTITLES intensively, as there is no control other them even when they are present
- Replace non-ASCII characters by hex values

svn-id: r41429
"
"be42f800a448798819b5ccedbb0a2aca3133730f","2009-06-10 15:11:17+00:00","Extend documentation for 'kFeatureCursorHasPalette'.

svn-id: r41430
"
"c0ba9d11589edd9183e068ae94ad016a365c4f34","2009-06-10 15:20:52+00:00","Add a convenience wrapper to CursorMan for checking whether cursor palettes are supported.

svn-id: r41432
"
"ccbc5f3abbc85d5c5d165fefc60af2eeb9056bee","2009-06-10 15:33:37+00:00","Point to the Cursor and AudioCD Managers to help engine authors following the right path.

svn-id: r41433
"
"6adbd0c41e79b5a21f0430e060347d4978e9ce78","2009-06-11 05:56:00+00:00","Renamed Graphics::ColorFormat to Graphics::ColorMode, streamlined enum by removing order section and temporarily removing kFormatARGB1555
Converted cursor code to make use of _screenFormat, instead of a parameter passed directly to it by the engine.
Adjusted scumm engine to account for these changes.
This should probably have been two separate commits, but the changes concern the same files...

svn-id: r41443
"
"2ffe5ed25edfaed7bd53a6618286b003c78cde85","2009-06-11 15:45:52+00:00","Added set of CoCo3 AGI games

svn-id: r41452
"
"f5b2e69522153c47438895ea80129ad5e3c9b952","2009-06-11 18:32:35+00:00","Fix Operation Stealth's 2nd arcade sequence's revolving doors.
- Now the doors actually do revolve when before they didn't.
- The fix was to alias the 9th background with the collision
page directly when loading collision page data. This way
changes written to the 9th background go to the collision
page and vice versa (And there were changes in the labyrinth).
- Also converted _bgTable from a pure array to a Common::Array

svn-id: r41453
"
"5fccc0f98dda5cbcec208b17c2e6d36a36fadf1e","2009-06-12 05:03:18+00:00","* Final version of the IFF parsing code.
* Refactored ILBMDecoder usage from disk code.

svn-id: r41458
"
"5915e60452feefc676d8be283af3a930015561da","2009-06-12 06:20:11+00:00","Removed a leftover printf().

svn-id: r41459
"
"df1534ffd058c4c75cbe549cd901bae4be1dad4b","2009-06-12 07:18:01+00:00","* Replaced the A8SVXDecoder class with a function to return an AudioStream in trunk/sound/.
* Refactored sound code in Parallaction to use the new Audio::make8SVXStream.

svn-id: r41460
"
"657e37985e79967b6fc3c51badb6fb669c6680dc","2009-06-12 07:55:44+00:00","Cleanup of sound code.

svn-id: r41461
"
"b9017519fa1408311199bd0b41c271e35afee02c","2009-06-12 08:00:26+00:00","Rename KeyRemapper dialog to KeyMapper

svn-id: r41462
"
"2ee51a8fa189fc7817fd6d78533664ec870fca48","2009-06-12 08:49:45+00:00","Unfinished proof of concept regarding my compromise with LordHoto in IRC.

svn-id: r41464
"
"36828287ad6041de7c8e98d0fe2979730a8b094f","2009-06-12 08:51:05+00:00","* Moved the updated IFF code from Parallaction to common/
* Updated Parallaction and SAGA to use the new decoder infrastructure.

svn-id: r41465
"
"b2e590532751697c464c53bf4b7cadedd25cb836","2009-06-12 09:49:38+00:00","* Adapted Kyra to the new IFFParser interface.
* Adapted the new IFFParser to Kyra (slightly).
The Kyra1 demo on the website works.

svn-id: r41468
"
"5172c83200c7fab38a5264000cea3c72cd33cb15","2009-06-12 09:56:07+00:00","Finally fix build (extra qualifier removed).

svn-id: r41470
"
"20d75f6ec75b112a1aae4353b9ada019e1f437f3","2009-06-12 10:26:15+00:00","Added missing return statements.

svn-id: r41473
"
"66decf21f744d77fe7786fa451ace3a62dfe7b39","2009-06-12 10:26:58+00:00","Fixed disposeStream initialization.

svn-id: r41474
"
"355d3e23785ba6dc90578fcbdd964e246d01e430","2009-06-12 22:35:08+00:00","Fix MSVC compilation : iff.h and iff.cpp were move from engines\parallaction\ to graphics\

svn-id: r41484
"
"019be026d948e91f0ac25921f7f2151ea967cc6c","2009-06-12 23:29:27+00:00","SCI: Added detection entries for Japanese QFG.

svn-id: r41485
"
"1fb78d577f5240db9fb0a5103bc9e7cb61dc39cd","2009-06-12 23:46:23+00:00","SCI: Moved audio code from AudioResource to the sfx core.

svn-id: r41486
"
"06487102850989daccaaf89ac44f2dd16b189f05","2009-06-13 07:54:25+00:00","Oups. disk.cpp was also missing in MSVC files

svn-id: r41487
"
"e434396b258a2a5e056a8789a9867d9fedc450de","2009-06-13 09:40:42+00:00","Updated xcode project

svn-id: r41488
"
"aea120f99175db335f94a75d3f54064c9ee92924","2009-06-13 10:20:12+00:00","Properly updated the MSVC project files of the parallaction engine, fixing compilation. Side note: please, don't include files outside the engine's directory (like files in /common) for engine project files - it's wrong, as the same code will be compiled twice

svn-id: r41489
"
"abd23cf3ca8c9f8592121c20a1022b144841585a","2009-06-13 10:23:23+00:00","Removed duplicate entry of disk.cpp

svn-id: r41490
"
"350dc4290fd5dd8f28af9e63713b48ef2c131f09","2009-06-13 10:24:52+00:00","Fixed cursor code to keep track of cursor formats so that ThemeEngine and/or GuiManager cursors will render properly over the game (on spacebar hit, for instance)

svn-id: r41491
"
"cca9202372e5b8b9f6b5350488da26e4bd3ab8bc","2009-06-13 13:27:21+00:00","Buildfix for gcc 3.3 (moved a template class member into the header file)

svn-id: r41493
"
"e6f874ee9508a6631635504808680e50a4f55c7f","2009-06-13 13:59:41+00:00","Fix possible endian issues.

svn-id: r41494
"
"6eed461c94bb04391b759c4bfed88588a8d170c1","2009-06-13 21:07:05+00:00","Fix erase() sometimes hiding other hash elements.
Like CPython, we now use a dummy node to mark nodes as erased,
so that lookup() can skip over it. All tests should now pass again.

svn-id: r41496
"
"ccb92ebfee9829ff85deeacbe4f8c01e476fd2e8","2009-06-13 22:10:55+00:00","Making TotTextData's item's offsets unsigned. This could fix the crash in the Polish Woodruff version (bug #2804962)

svn-id: r41497
"
"7eaf013bbfe0bbf07e14aa6f5f7c25a75f1f621e","2009-06-13 22:14:58+00:00","Gob - *WIP* incomplete implementation of MDY/TBR

svn-id: r41498
"
"acb0de658018a6554c965b08fceff0ed2810aef7","2009-06-13 22:35:22+00:00","Warn when a sprite operation is to be performed on a nonexistent surface instead of crashing

svn-id: r41499
"
"51dd66817774aa1a05788df38db5a4ac349f4983","2009-06-13 22:40:30+00:00","Strip trailing whitespaces.

svn-id: r41500
"
"d925104b6a5b66d4dc6093acdf2cf3cd952a709c","2009-06-13 22:48:16+00:00","Added sanity checking to stopSound() and a bit more debug output

svn-id: r41501
"
"8095860885891b11613db1eb06a7c47307bcc8f7","2009-06-13 22:48:32+00:00","Added periods to every news entry (actually it seems like we always did that in the past, but were a bit lazier in the last time).

svn-id: r41502
"
"3e8ea400e3b038db49ba56b95de45b1912ffe2b3","2009-06-13 23:04:26+00:00","Added yet another missing period at the end of a line. (I hope I catched all now)

svn-id: r41503
"
"95f02dd86f95bfb5764077da4c9c399c89c35b07","2009-06-13 23:42:39+00:00","Detected games with different language or platform are now
no longer treated as duplicates, even if they have the same
target and directory.  Also, pass these parameters to the
ConfMan, so that the correct version of the game is started.

svn-id: r41504
"
"2f3e5f11cb0f384c81cf37c716c66c33976634d2","2009-06-14 03:39:30+00:00","Beginnings of music support for Cruise, based on the cine engine sound code (note that the music played isn't yet correct, though)

svn-id: r41506
"
"5f5faf71c5ed3b913ceb2c9738c3f8deef6ab08d","2009-06-14 11:08:35+00:00","Fix unused variable warning.

svn-id: r41507
"
"48a8e69546ad5725a0bd6c42e2582fae8594eb2a","2009-06-14 12:19:42+00:00","Fixed an animation speed regression that got introduced when I added a lag compensation for Woodruff

svn-id: r41508
"
"b9d42b87412142a996f9263bf51aa8ad6631e0b3","2009-06-14 14:05:42+00:00","Got rid of a needless 'getEventManager' call. (Using Engine::_eventMan now instead)

svn-id: r41516
"
"d0471f01dbb85f25815e8137214786357dc90093","2009-06-14 14:11:21+00:00","SCI: Added detection entries for Japanese SQ4.

svn-id: r41517
"
"7c5d739ba7591c9448d1968b39a8a565b7dee3a2","2009-06-14 14:24:28+00:00","Cleanup.

svn-id: r41519
"
"5a03e5cca1837ecf18b4dde856a0c6d32392e3c3","2009-06-14 15:07:34+00:00","simplified .raw/.wav data files handling in introduction sequences

svn-id: r41520
"
"d7308e9e3d678ff3052137d0e869f8ac85f30adc","2009-06-14 22:10:17+00:00","Fix groovie's GUI game options

svn-id: r41528
"
"8bcdd8d7f65a784c11f640e79ba5bc413e1bf91f","2009-06-15 07:06:52+00:00","Run AGIMOUSE hack as a side effect always

svn-id: r41536
"
"c672e21fc3346acd4aa9d93c5eca82bf38ae359c","2009-06-15 08:24:01+00:00","Added the missing pixelformat.h file

svn-id: r41537
"
"0e6a23ab3b94a66ec715932d8f20e060c690ad6c","2009-06-15 08:44:35+00:00","Added aliases for the script/breakpoint related commands and added the debugflag related commands to the help screen

svn-id: r41538
"
"8d306ebccfa7e88b2e4f4635bff3987e550f98d3","2009-06-15 09:45:19+00:00","Added kUnsupportedColorMode error code brought Scumm engine and SDL backend into compliance with API outlined in http://scummvmupthorn09.wordpress.com/2009/06/14/how-this-is-going-to-work/
Provided convenient Graphics::PixelFormat constructors for ColorMode enums, and bitformat integers.
Removed last vestiges (I think) of initial cursor hack.

svn-id: r41539
"
"c97bfd16f94873a437cb92a30ebd11879f114e0c","2009-06-15 10:10:22+00:00","made Graphics::PixelFormat(ColorMode) constructor explicit, removed Graphics::PixelFormat(int bitFormat) constructor that was never really implemented anyway

svn-id: r41540
"
"5d61784dae5dace556d15e1603d86d565d66cb31","2009-06-15 11:35:51+00:00","Remove uglyness with PixelFormat initialization.

svn-id: r41541
"
"dcc5e26cab7ea7f24cfe3ac972355e2789aa67d9","2009-06-15 11:37:07+00:00","Fix compilation

svn-id: r41542
"
"0ca17a7f8c79940873a4dc82537310584f03e439","2009-06-15 11:46:28+00:00","Fix compilation when 16BIT code is disabled.

svn-id: r41543
"
"e74ba9af6b95c70cdcdbcf700e0964bf0be0fca1","2009-06-15 13:23:26+00:00","Add error if user attempt to play HE games using 16bit color, when 16bit support is disabled.

svn-id: r41544
"
"3d9d542908323c3d0ce545589e5532175eda9063","2009-06-15 13:50:41+00:00","Fix compilation of SCI engine

svn-id: r41546
"
"f2e3ddf72a91f1b4857a74b4c6ee228aa5d6d0d8","2009-06-15 19:46:00+00:00","Add MD5 for Playtoons 4 FR

svn-id: r41556
"
"583a89be627f300488ea12d8c96c699ff2c684f4","2009-06-15 20:52:09+00:00","LOL: - started on the ingame menu code (death menu, load menu and main menu)
- fixed regression in kyra gui code (broken menu highlighting)
- fixed minor bug in animation code

svn-id: r41557
"
"2f8a0b9936b7d63421f822ec4493cde87d2ab415","2009-06-15 21:28:11+00:00","renamed playtoons target names to insult-free target names (maybe non-definitive names)

svn-id: r41559
"
"650f3a50d2acd1962501e9082e946e7ffa13ae13","2009-06-15 21:39:43+00:00","LOL: implemented quit menu

svn-id: r41560
"
"0906068bff35787c1fca599774ba2f062ae2a3cf","2009-06-15 23:07:38+00:00","Merging parseValExpr and parseExpr

svn-id: r41562
"
"8b5233c5ff3d0d3cdcd421b5d9579d5f54fe30a6","2009-06-15 23:07:55+00:00","Renamed varPos to varBase and split off getVarBase() from parseVarIndex() and parseExpr()

svn-id: r41563
"
"e8a89cffb6cf37a7fa34b5761befff13b33dbdc7","2009-06-15 23:08:09+00:00","Renamed various variables to better reflect their meaning

svn-id: r41564
"
"42007f9d04fc22a18b3d4f99556fa5d7f646acee","2009-06-15 23:08:28+00:00","Propagating variable name changes

svn-id: r41565
"
"75b44536b17f1a5c01a8ae91e734207b8d036bb2","2009-06-15 23:08:44+00:00","Fixing the signness indicated by the OP_ enums

svn-id: r41566
"
"236fad1f192c62e159df118a8164ddd33ee29e42","2009-06-15 23:09:04+00:00","Adding a TYPE_ enum

svn-id: r41567
"
"190dd0d077d3a1e82e7604668fab7e26189d2914","2009-06-15 23:09:23+00:00","Using the TYPE_ enum where applicable

svn-id: r41568
"
"f6ca65206f6e4498541ede7bc936f1700b36c253","2009-06-15 23:09:37+00:00","Renaming some variables in o1_assign() and o2_assign() to mirror the structure in o6_assign()

svn-id: r41569
"
"5c58b9a3a4a8848474aba18c02c0da997fb138a2","2009-06-15 23:09:57+00:00","Using cmpHelper for OP_NEQ too, since the original does a normal strcmp there as well. No idea where the stricmp came from

svn-id: r41570
"
"221953344175d81396675f96c3f51e3d52491cbb","2009-06-15 23:10:10+00:00","Remove some now superfluous comments

svn-id: r41571
"
"58fbca49f56684b4460af9e5b89de9777b364dbf","2009-06-15 23:10:27+00:00","Splitting up parseExpr a bit

svn-id: r41572
"
"67a9ff7dd3a2b51eb8ef113e4f5331550eb2caa2","2009-06-15 23:10:51+00:00","Moving _inter_resVal and _inter_resStr from Global to Parse

svn-id: r41573
"
"1b67620d99955fa8f664aaceb0aa9b51588e6923","2009-06-15 23:11:08+00:00","Renaming _inter_resVal to _resultInt

svn-id: r41574
"
"434be5c65a7c33e9cfcefdc644b28c607c87fa94","2009-06-15 23:11:29+00:00","Renamed _inter_resStr to _resultStr

svn-id: r41575
"
"475c967d0da0bbf281bad393a5395450af4627a0","2009-06-15 23:22:31+00:00","KYRA: fixed regression (broken menu slide bars in HOF/MR)

svn-id: r41576
"
"fb96e826f27b071d6696731f43cb5fa0d8760205","2009-06-16 05:33:11+00:00","Simplified cursor related 16-bit code.

svn-id: r41577
"
"d3283f86fcd6c1a636bf769a3deb5d3afa561b01","2009-06-16 05:34:12+00:00","Simplified colormode enum

svn-id: r41578
"
"2668ea46944a40a1c84993464b1922c10c5b75ba","2009-06-16 07:14:07+00:00","Add MD5 for Playtoons 3 (english)

svn-id: r41579
"
"cb56169a2770c25ce27256db339353011158998f","2009-06-16 09:04:37+00:00","Declared getBestFormat in OSystem base class, and implemented in SDL backend.

svn-id: r41580
"
"db9cfc6f962790a270b357c3d47a5dc0e15a37b0","2009-06-16 09:15:06+00:00","Corrected oversight in earlier ifdef simplification which leads to compilation failure if ENABLE_16BIT is not defined.

svn-id: r41581
"
"975a0d65677a45559b1f5d4262772c0696f405b6","2009-06-16 12:25:53+00:00","MDY/TBR : fix a thing or two. Still far from being OK, but in-game ambiance 'music' is (a little) less buggy

svn-id: r41584
"
"78eed8b7c4c155c709ec17a73043c4d5ce597bc3","2009-06-16 17:52:32+00:00","Fixed warning. (GCC doesn't like commas at the end of an enum list.)

svn-id: r41586
"
"b905602b4c0e454d73b7f0f8b3d1d251b88a431c","2009-06-16 18:58:21+00:00","tinsel: check only english.txt for DW1 psx version detection, and use recursive 'SearchMan.addDirectory()' to obtain subdirs for Discworld PSX datafiles

svn-id: r41587
"
"4aec580f916a1a024ce53afc3ff675297288b9fe","2009-06-16 19:26:44+00:00","Formatting.

svn-id: r41588
"
"1996a8011c447b98091fefc835d464543b49d8ff","2009-06-16 20:14:56+00:00","Encapsulating stack adjustments

svn-id: r41589
"
"a2afe557efe5481528e1bb13c2fb4f038e99f9b4","2009-06-16 20:15:19+00:00","Encapsulating the Stack and StackFrame a bit

svn-id: r41590
"
"c73f11f0d195f7467cb183b71d3e71ed9495fa9d","2009-06-16 20:15:49+00:00","Properly initializing _soundMode, for ADLs too

svn-id: r41591
"
"72fedd3eb0b1e693dcaa2c8308cf5c2f93791d82","2009-06-16 20:39:37+00:00","Including scummsys.h and forward-declaring GobEngine

svn-id: r41592
"
"0b4725d142f56665f9b032e393db1d010b2bde05","2009-06-16 21:23:26+00:00","LOL: implemented options menu (settings aren't saved yet)

svn-id: r41596
"
"3bfca53709a8373da3ed6daaac07fd613f4bba59","2009-06-16 21:59:20+00:00","Disable music for CoCo3 games. It has different format.

svn-id: r41598
"
"25c92dfdef52d6e6ebbd16e6ba8966272246fb45","2009-06-17 04:15:45+00:00","Changed opcodeDraw to be functor-based

svn-id: r41601
"
"8615c5779184d1715b1eefa6cc5477ce7c7eebaf","2009-06-17 04:16:21+00:00","Changed opcodeFunc to be functor-based

svn-id: r41602
"
"6c47f9f4f886edb0d4aae34ea6f4e9fa9ff54e17","2009-06-17 04:16:51+00:00","Changed opcodeGob to be functor-based

svn-id: r41603
"
"f55419ee451070dbe07014bc7d747507e431edf6","2009-06-17 10:03:59+00:00","OSystem_SDL::GetBestFormat will no longer return modes greater than that which hardware supports.

svn-id: r41606
"
"a9755e25475f55c8831c901396ffa78b6f86d971","2009-06-17 10:11:47+00:00","Added ENABLE_16BIT to preprocessor defines in gob's msvc8 vcproj. Fixed preprocessor define list formating in msvc8 scumm.vcproj and scummvm.vcproj (mainly so that my tortoiseSVN will no longer mark them as modified)

svn-id: r41607
"
"95da9c27617bbbc758f6414706b2db3c1ac28404","2009-06-17 18:48:41+00:00","- Modify detection files for Playtoons CK Knights (CK2) as it wasn't making the difference with CK1
- Add Playtoons CK Monsters (CK1)

svn-id: r41611
"
"e1c93e7342770f052bc0aecf4aab760e7008bb65","2009-06-17 22:34:44+00:00","Groovie: Initial support for 16bit screen surfaces

svn-id: r41615
"
"c96ec85dbba1f6bb9e369cd698cc6cbd6cff2873","2009-06-17 23:16:21+00:00","Preliminary support for CoCo3 music.

svn-id: r41618
"
"b07a35e5af6554802f13485644a1dd4ea2d8faac","2009-06-17 23:36:00+00:00","Moved the wiidist target to ports.mk, cleaned it up and automated meta.xml generation.

svn-id: r41619
"
"68cb22d4a95060bcba9b5a44508bc4ab57cb47ed","2009-06-18 01:13:42+00:00","Fix regression, caused by typo in my last commit.

svn-id: r41621
"
"b8a9823f4e868a98ae85862eb457b6d4e7cffe1c","2009-06-18 06:10:13+00:00","Fix regression in scrolling rooms.

svn-id: r41624
"
"5a8f066497feca9b0fa10173d6344b6429246175","2009-06-18 06:18:31+00:00","Correct actor layering method in HE90+ games.

svn-id: r41625
"
"7123fbdd7095257c9c23102f7d86d2c8cf21cfd0","2009-06-18 07:12:53+00:00","Merged revisions 41625 via svnmerge from
https://scummvm.svn.sourceforge.net/svnroot/scummvm/scummvm/trunk

........
r41625 | Kirben | 2009-06-18 16:18:31 +1000 (Thu, 18 Jun 2009) | 1 line

Correct actor layering method in HE90+ games.
........

svn-id: r41626
"
"6f2b46964bd3bee3ee12f2c3cd19b62bbb8aa9b6","2009-06-18 07:31:09+00:00","Fixed error with non-animated 8-bit GUI cursors being drawn incorrectly in debug console of 16-bit games.

svn-id: r41627
"
"9651257a3eb22dad2606b8ed416f8e588a0b214c","2009-06-18 11:37:45+00:00","Removed redundant code that isn't used

svn-id: r41630
"
"c9517af76ee34c415ec15717d5d7c80ea808d11e","2009-06-18 13:27:14+00:00","Replacing some #includes by forward declarations

svn-id: r41632
"
"d4855ff81929b9d8faa854e428122271bbd0b219","2009-06-18 13:27:35+00:00","Splitting an ADLPlayer and MDYPlayer from the AdLib class

svn-id: r41633
"
"23f9cc0e4ec8638649e0ed5e78c0260305f80929","2009-06-18 13:27:48+00:00","Oops, forgot again that Fascination needs o1_assign

svn-id: r41634
"
"ab3d3ae1cf16c3573811dd9ace80658a47118919","2009-06-18 13:50:26+00:00","scumm: added the missing word 'version' in a comment

svn-id: r41635
"
"0324f20e392a7a536471fc44fad2a3e081c3ef12","2009-06-18 18:40:38+00:00","added DIST_FILES_DOCS to Makefile.common, used by some dist targets now, incl. OSX bundles.

svn-id: r41639
"
"224e9840e18e3260ccbeb73496d2fb7b7e69e703","2009-06-18 18:57:17+00:00","Improved the iphone swipe input handling

svn-id: r41641
"
"1772f7d56415546dab2e92684a72f941a0f9a5d3","2009-06-18 19:39:12+00:00","added pred.dic to DIST_FILES_ENGINEDATA

svn-id: r41644
"
"4562fe248a1ded2d64e43800ec4e8fcb43e95d3a","2009-06-18 21:08:51+00:00","Removing the useless _vm->_parse->

svn-id: r41645
"
"2e27c7b49246c1e0dc1d2d2fe8f767dcad15f2cb","2009-06-18 21:47:10+00:00","Replaced 'getRandomNumberSpecial' be RandomSource usage. (This is needed for proper event recording, also the probability for generated numbers is actually nearly the same)

svn-id: r41646
"
"42de7a1573014d787826d8803e2ca0e15275de8b","2009-06-18 22:09:57+00:00","Patch

svn-id: r41647
"
"47d4794876afd83afc7d3ec5fe126f90e91d82c5","2009-06-19 07:56:30+00:00","Fixed a warning about an uninitialized variable

svn-id: r41660
"
"704386d3b09b68f96b6d4160a1a261e3e754f461","2009-06-19 09:28:55+00:00","Removed replaced Graphics::ColorMode enum type with factory methods for Graphics::PixelFormat.

svn-id: r41662
"
"476eaf39b5d522c4f69582841db75c7b99c8d165","2009-06-19 09:42:41+00:00","Ooops, forgot to change the array when copy-pasting the description function

svn-id: r41663
"
"0ae767ae8c4502d308fcba6a892c959c7eccab59","2009-06-19 09:43:01+00:00","Fixing The Last Dynasty again after the opcode dispatcher changes

svn-id: r41664
"
"66c4b021096c9bf1620b4d2491cc12a692ba57a8","2009-06-19 09:44:33+00:00","Added myself to the CRUISE engine credits

svn-id: r41665
"
"91b5d1befb4532f291e7d5f125b439790bafd1fd","2009-06-19 09:55:23+00:00","Added my German version of The Last Dynasty

svn-id: r41668
"
"ec7d86404c672f62368bdddaba1f4258960141de","2009-06-19 17:03:28+00:00","LOL: - implemented bezel cup opcode
- implemented font conversion for certain language specific characters in load game dialogue (only german atm)

svn-id: r41677
"
"d4e01e3a1b56cfc640b1c97753f47106f4f39123","2009-06-19 17:53:25+00:00","Fix some warnings.

svn-id: r41679
"
"f8744fde7587f36a2f8c6bbc4952e6f0f5380555","2009-06-19 18:07:45+00:00","SCI: Fix cel1 y-offset regression introduced in r40997.

svn-id: r41680
"
"66445ae515b7840062e45eb550983d859da17a14","2009-06-19 18:46:19+00:00","LOL: - implemented delete menu
- fixed some bugs in the menu code

svn-id: r41683
"
"8b6ed92376024f43876af93fdfccd72d6fc33ac0","2009-06-20 05:08:07+00:00","Fixed compilation.

svn-id: r41695
"
"f7dd1c15ed38418a0371032966144eb6c2e004cb","2009-06-20 05:23:09+00:00","renamed ENABLE_16BIT define to more accurate ENABLE_RGB_COLOR

svn-id: r41696
"
"c0c0aed4880763bd5a1fc15a7138a5e2c4f1d904","2009-06-20 05:31:23+00:00","Factory constructors for ARGB BGR ABGR and BGRA pixel formats.

svn-id: r41697
"
"114f67284e75c6351252e0596e98c2616b927c29","2009-06-20 05:39:30+00:00","Update.

svn-id: r41698
"
"d7e0c52a860f964e8ad192583cba11b297067331","2009-06-20 06:20:12+00:00","Added explicit casts to _fontConversionTableGerman for systems where char is signed

svn-id: r41699
"
"8cda2728ebeb10d600708f2eac550d9c040ea560","2009-06-20 06:48:47+00:00","Finally tracked down the difference/bug in the music playing code - music playback now works

svn-id: r41700
"
"61f20f4d88c7264b31a97cc15d6ddeda16a69956","2009-06-20 07:36:12+00:00","Bugfix to fade out any currently playing music when the game is restarted

svn-id: r41701
"
"4f622ab295f53ad9d2417d1d1ee2b1fddfa98298","2009-06-20 08:15:01+00:00","Added proper saving of music state to savegames so music resumes when a savegame is loaded.

svn-id: r41702
"
"31ace2c66cba4e2e689daef8fb28fc8f3ab0b14e","2009-06-20 08:15:39+00:00","Implemented the library function Op_SongExist

svn-id: r41703
"
"1da48cfd552556c9e8b4eeef20fa43bdb7994063","2009-06-20 10:52:55+00:00","fixed OPL 0xB0 register write. the return value of findNote() already includes the octave, no need to readd it.

svn-id: r41704
"
"89599dd4ce9ed36eddb78ea5a0dcb9ab295c3bff","2009-06-20 11:48:42+00:00","split loadKeyboardPack(), fallback to the current dir when searching for packs, and free memory in the case of an error.

svn-id: r41705
"
"774a8eecd242dce37591388a49a2bb5565a3bbec","2009-06-20 11:50:15+00:00","added vkeybd_default.zip to the Wii dist target.

svn-id: r41707
"
"874ad3c0c805f7348e32d55e5e34445fff291fc7","2009-06-20 11:53:31+00:00","oups, wrong spot.

svn-id: r41708
"
"6cc4140cf4372ca67ecc74e8e27f0f9bca2b119d","2009-06-20 12:02:08+00:00","Changed many file reads and manual conversions from endian format to instead use file readSint16BE/readSint32BE calls

svn-id: r41709
"
"8d26c58372c9878a26e220c69c76e5500f1f942f","2009-06-20 14:26:01+00:00","LOL: implemented save menu

svn-id: r41713
"
"cb06b0983ee262f18110996049f3038bf3d205b8","2009-06-20 15:09:55+00:00","LOL: cleanup

svn-id: r41714
"
"164c4a517757c296e10da4fef8f04a42012777f2","2009-06-20 16:36:26+00:00","LOL: minor fix for save menu

svn-id: r41715
"
"d4248b10c81f5e8cbc40c5e1eb5e0d4df2b44871","2009-06-21 01:14:57+00:00","Prevent font code to draw characters not included in the font.

svn-id: r41718
"
"89607d994b2ca93788a62cab87bf8dc66f2804b5","2009-06-21 01:15:09+00:00","Fix drawing of sharp s.

svn-id: r41719
"
"db7484b7ba00ef9c06240799dcc8dc7e4ff3364c","2009-06-21 01:15:24+00:00","Moved CP850<->ISO-8859-1 conversion to Util.

svn-id: r41720
"
"872e9258070aea2819a6645b6f3e8043fbeb5f9b","2009-06-21 01:15:37+00:00","Enable proper umlaut handling in kyra 1-3.

svn-id: r41721
"
"ed16d2d63f0a3ee7f3b1d85cf02dce1ce431da30","2009-06-21 01:15:47+00:00","Fix umlauts for original interpreter saves.

svn-id: r41722
"
"0fa9b569bf6d617cbad0618f4f31517dcc6612a6","2009-06-21 01:22:23+00:00","Cleanup.

svn-id: r41723
"
"382af0407f1ed5e1447a783822a327d3cc4f17cd","2009-06-21 05:13:29+00:00","Bugfixes to pre-loading and handling of resources such as sound files

svn-id: r41724
"
"31f40cd47e691e92088552246649d42bcaa1e661","2009-06-21 11:42:45+00:00","Changed .SPL (sound effect) loading to load the Adlib version of sound effects - sound effects now work

svn-id: r41725
"
"b14fa66f9f7b105d18b00488c9bd620f77082fab","2009-06-21 11:53:11+00:00","Minor fixes to the individual note playing code

svn-id: r41726
"
"245a2764fca6bf4ed4798b4e68fd82e4c61bb33c","2009-06-21 13:06:08+00:00","Cleanup

svn-id: r41727
"
"f1b05956310621c43c386fc1097f0651b985cfc8","2009-06-21 14:43:06+00:00","Add initial support for captureWizPolygon.

svn-id: r41728
"
"5b0b0051c15ff23ed8daf801d4b56cbaadf2f101","2009-06-21 16:59:51+00:00","LOL: - implemented audio menu
- menu settings now get saved
- remove white spaces

svn-id: r41729
"
"76eee406d63b7f614bd3f6e8e5e3f70aff97c921","2009-06-21 19:00:50+00:00","Cleanup: Change LoL code to use KYRA volume handling.

svn-id: r41730
"
"67119f9c52a9c5bdb0c0019e8ccdf626053f5c28","2009-06-21 19:01:04+00:00","Cleanup: Change LoL specific config entries to use underscores instead of whitespaces.

svn-id: r41731
"
"198e35a79f059ab0d14bf8ded6811a25d8330d69","2009-06-21 19:49:20+00:00","Fix slider buttons in LoL (and some minor cleanup).

svn-id: r41732
"
"7eaf539b23c0d4a52c7c562532649e6bff69be90","2009-06-21 20:10:45+00:00","Cleanup.

svn-id: r41733
"
"df611a52784a41660c578fe22aed190d71101740","2009-06-21 20:40:31+00:00","LOL: - implemented support for 'floating cursors'
- prevent complete refresh for audio menu whenever a mouse button is pressed

svn-id: r41734
"
"8e9de2b7625700f7a1d85e437d40f9ba9bf811a9","2009-06-21 21:05:06+00:00","LOL: minor fix for floating cursors

svn-id: r41735
"
"3424dfda98c59543ec1bea464723dca2221a6965","2009-06-21 21:17:41+00:00","Cleanup.

svn-id: r41736
"
"2a1a1576f225e5d20d3b9049160d209ffb1828be","2009-06-22 00:35:08+00:00","Cleanup.

svn-id: r41737
"
"b448d506b89209d79bc153b6b0759ad926fa8794","2009-06-22 02:34:35+00:00","Start refactoring palette handling into new class 'Palette'.

svn-id: r41739
"
"9da52cb28280e0164db7073b0d3ea5abb4d20934","2009-06-22 02:35:04+00:00","Got rid of Screen::_currentPalette.

svn-id: r41740
"
"882662977f2cdf574e5aab041ceaaf626386d0f2","2009-06-22 02:35:45+00:00","Changed Screen::getPalette to return a reference to a Palette object.

svn-id: r41741
"
"4bb392b593c492299dd916784548dc56bc0b25cb","2009-06-22 02:36:16+00:00","Add wrapper functionality for copying full palettes.

svn-id: r41742
"
"73ea378dee4e7ec31c7a898e7fcc3a65a9eb6cc1","2009-06-22 02:36:54+00:00","- Changed the following Screen functions to take a reference to a Palette object:
-> setScreenPalette
-> fadePalette
-> getFadeParams
-> fadePalStep
- Fixed initialization of 256 color palettes

svn-id: r41743
"
"d2e5166dae41d8972151ba3d1471ceace4323478","2009-06-22 02:37:20+00:00","Changed Screen::loadBitmap and Movie::open to take an optional Palette pointer instead of an optional array pointer.

svn-id: r41744
"
"d7432e18eae9e6d632addcea1a0dd6933e5b0770","2009-06-22 02:37:41+00:00","Changed Screen::loadPalette to take a reference to a Palette object instead of an array.

svn-id: r41745
"
"5767277d8d2910a9f9817a6b845ea5a91caec6bf","2009-06-22 02:37:57+00:00","- Fixed regression in Screen::fadeToBlack
- Fixed some palette regressions in Kyra1 Amiga (only the intro works currently)

svn-id: r41746
"
"4c01d4a954efeedc8aedade64b92f80f8af547e5","2009-06-22 02:41:56+00:00","Fix memory leak.

svn-id: r41747
"
"8dfbd0f845689a092615352b157a85bb779a3f1e","2009-06-22 06:17:50+00:00","Implemented the Op_SetVolume method like the original, which simply set a dummy variable and never actually changed the volume

svn-id: r41748
"
"640f322194e81d1959c737f12cd6f946236dca49","2009-06-22 06:35:08+00:00","Added the dummy volume variable to the savegame format

svn-id: r41749
"
"f6717373b5130deb0dcd9d307867bb9aeada3f89","2009-06-22 10:11:25+00:00","Encapsulated access to Parse::_resultInt

svn-id: r41750
"
"1dafcabb4379c205add3d27c428e22c2f970f865","2009-06-22 10:11:53+00:00","Encapsulated access to _resultStr

svn-id: r41751
"
"dd9e62e31e18188f43980b24ac9cc5c2ae00623f","2009-06-22 10:12:33+00:00","Adding DataIO::existData()

svn-id: r41752
"
"962fc19b57a13cb8de2c194f325e6c9b8b4fc1a0","2009-06-22 10:13:37+00:00","Encapsulating script file access

svn-id: r41753
"
"7fbad08fd1cb85363628a71ffab5580c8612fe1c","2009-06-22 10:14:18+00:00","Implemented a call stack

svn-id: r41754
"
"28041433a5749c36352f687581f52449efd03123","2009-06-22 10:14:49+00:00","Removing debug output

svn-id: r41755
"
"82568c66b1a5408050dbc2e2b659a0a92aa35ef2","2009-06-22 10:15:14+00:00","Implemented loading TOTs from video file again

svn-id: r41756
"
"b6a26911a3a65e47a56e97d5e43c3ec0ae3f825c","2009-06-22 10:15:52+00:00","Giving CollisionArea a full-blown Script pointer instead the data pointer

svn-id: r41757
"
"648139dda7e759ebc2ee8d45301698c8b447a63d","2009-06-22 10:16:17+00:00","Removing the now useless cuckoo function and shrink the call stack entries accordingly

svn-id: r41758
"
"850203fc730a0888206e04431425b19fe414e0db","2009-06-22 10:16:45+00:00","Unwinding the call stack before unloading the script

svn-id: r41759
"
"7d005f62c380ffbc9e4cae0e99afc06ed30d1dd4","2009-06-22 10:29:32+00:00","Putting evalBoolResult() and evalExpr() into Script

svn-id: r41760
"
"65fc23f962e408f196f19888fd03d78d00d40f20","2009-06-22 10:29:48+00:00","Removing the Parse object from GobEngine

svn-id: r41761
"
"dc4e06dd6e0e1fcd82401b63bef8bff4e7f2abea","2009-06-22 10:30:09+00:00","Pushing script.o down

svn-id: r41762
"
"4f631e9a8998788e3ebc9d346d7db6a7504c7058","2009-06-22 10:41:32+00:00","Removed redundant variation of the routine to play sound effects

svn-id: r41763
"
"a937dfde96b35738b916e4299cc4e917fc6d2d9e","2009-06-22 11:00:53+00:00","Fix loading/saving in funshop titles.

svn-id: r41764
"
"59c32e72fb03e69518db0b6f06b4a87f3a811be9","2009-06-22 11:53:46+00:00","const correctness

svn-id: r41765
"
"ca10b516a34e36418b9349895c436a145f3c8008","2009-06-22 12:03:58+00:00","Include recently added script.h and script.cpp

svn-id: r41766
"
"58aeec17c0d0f52492e62ba2908584fddfac3c67","2009-06-22 16:29:00+00:00","Removing commented-out declarations

svn-id: r41768
"
"49c46a46f7a6aa8a34b14c9dd0097a8e41496732","2009-06-22 16:29:16+00:00","Adding some comments

svn-id: r41769
"
"565a9f5b0d4528b09531e1c381f81587546a0580","2009-06-22 16:29:31+00:00","Don't assert on pop when no script is loaded

svn-id: r41770
"
"7ba9c46cb0e80eebb2fab718c2f4cd8913ab8890","2009-06-22 16:29:45+00:00","More signess consistency on the reading and seeking methods

svn-id: r41771
"
"487a9bd14b8b8978bfb3f05cf90e712b9b727d59","2009-06-22 16:30:06+00:00","Renaming 'Parse' to 'Expression'

svn-id: r41772
"
"c3aafec1fb516d76fa03c0ffaf2248b90dada7b4","2009-06-22 16:30:35+00:00","Renaming parse.h and parse.cpp to expression.h and expression.cpp

svn-id: r41773
"
"fae143f72dab91171655b3a055c469dc6df8c14f","2009-06-22 16:30:51+00:00","Renaming kDebugParser to kDebugExpression

svn-id: r41774
"
"4597178cf949680e5b64f3f6ea93ea0783149804","2009-06-22 19:46:08+00:00","Fix palette regression in Lands of Lore.

svn-id: r41777
"
"e9ffb841796d3a10c6f548ce073f797398d8d28c","2009-06-22 19:56:06+00:00","rename parse.h and .cpp to expression.h and .cpp

svn-id: r41778
"
"4ab45170163f70a85c400bc50d0e20501e0cd24c","2009-06-22 20:27:47+00:00","Added stream-reading loading wrappers to MDYPlayer and added a workaround to fix TBR reading for the moment

svn-id: r41781
"
"c31b79b7c99b56d1891de716038608f2a6b919dd","2009-06-22 20:51:34+00:00","Properly guarding Script::getOffset() and adding a reverse operation

svn-id: r41782
"
"6c7a790b54ad0e158b379b6937066c795cd11114","2009-06-22 20:51:48+00:00","Removing trailing spaces

svn-id: r41783
"
"3f404ef3c9e5a3c657c9ed1951aa2b9c04542725","2009-06-22 20:52:08+00:00","Removing trailing tabs

svn-id: r41784
"
"a5832d81d3715e42cc47bf8b103e147065771ab8","2009-06-22 21:48:47+00:00","Patch #2810483 (SCI: Convert gfx subsystem headers to Doxygen format), with @brief removed

svn-id: r41785
"
"b629b0cc7811877fcc0261b9e86fac1abe9dc495","2009-06-22 23:09:28+00:00","Fixed NDS compilation when using older devkitpro versions (I accidentally broke that some time ago)

svn-id: r41786
"
"510700b0860e2f109deadcc2523b1232399085ea","2009-06-23 01:01:16+00:00","Bugfixes to keep sound effects to channel #4 like the original (it ignores the channel parameter to the given library routine)

svn-id: r41787
"
"f6118f7a85bfd2b1ef634fc2aeb8ef9ec960ec6f","2009-06-23 01:19:03+00:00","Added Script methods to get the TOT major and minor version

svn-id: r41788
"
"8bd5c0cebad9733cdb1d1969f9d0ce1991635b81","2009-06-23 01:19:21+00:00","Added Script methods to query commun file handling

svn-id: r41789
"
"4fa11436a0f97be92bcb0a8bfcfc6fd55840013c","2009-06-23 01:19:37+00:00","Const correctness

svn-id: r41790
"
"ec5b2d6c9ac7ef9370392f3a0c3e25b136dcb72b","2009-06-23 01:20:05+00:00","Added a method to query the number of variables needed by a Script

svn-id: r41791
"
"8e63d7989f83877e63ee189693470eb2f61ecce5","2009-06-23 01:20:21+00:00","Added Script::getTextsOffset()

svn-id: r41792
"
"43923e8b333e97116c481d4ce266bb08c37bc195","2009-06-23 01:21:06+00:00","Added Script::getResourcesOffset()

svn-id: r41793
"
"3470faa9365445fe39653ba545117dca18e040a5","2009-06-23 01:21:51+00:00","Added Script::getAnimDataSize()

svn-id: r41794
"
"792e77e653bcb8c023919ee3d07110fb84e1cb60","2009-06-23 01:22:30+00:00","Added Script::getStartOffset()

svn-id: r41795
"
"c967db5fa0f523f685991e87bbf7d3510ac45a98","2009-06-23 01:22:51+00:00","Added Script::getCenterOffset()

svn-id: r41796
"
"fcddd5c69a2b7f6496d76af09786c10db042fe7a","2009-06-23 01:23:14+00:00","Replacing the 2 offset functions by a generic Script::getFunctionOffset()

svn-id: r41797
"
"96c13416f141480f3d3552b1f4aad87a6af94e42","2009-06-23 01:23:31+00:00","Stopping the seek() going into the header

svn-id: r41798
"
"b6e1787d72abf55bfb44635482b4e80c3c2ea6d4","2009-06-23 01:23:51+00:00","Also loading TOT properties when the TOT is found in a LOM

svn-id: r41799
"
"7c622423157e29b7206ba0c39a7756443ed1e70d","2009-06-23 02:02:51+00:00","Merged format initialization into InitSize to allow for backends not supporting gfx transactions.

svn-id: r41801
"
"65891626a209f894b5a3d0ebdafaec8dfc3fd011","2009-06-23 08:51:55+00:00","Changing the TBR FIXME into a warning in setVoice()

svn-id: r41803
"
"cf3eab927bb417d02afc01a2fc7b657840fc6d48","2009-06-23 13:24:46+00:00","tinsel: added some comments to psx palette mapper

svn-id: r41806
"
"a44859e01bead5a30d8446a5bc75857d000199d9","2009-06-23 14:06:57+00:00","Fix error in Backyard Soccer 2004, when using Season Play.

svn-id: r41808
"
"30d6e24d595b170fb96b1be14ec3e9133d64ec17","2009-06-23 15:06:38+00:00","Added German Fascination (3 disk version), as supplied by windlepoons in bug report #2809247

svn-id: r41809
"
"c51c4e1cf9262f81b66276d75cc8160186a10af6","2009-06-23 15:08:56+00:00","Added Hungarian versions of gob1-gob3 as supplied by goodoldgeorg in bug report #2810082

svn-id: r41810
"
"23b0b1d4d613720ba85df48e9dcb29a41a9df5bb","2009-06-23 17:37:18+00:00","Binary, not logical ORing the GUIO flags (Strangerke, you fscked up there :P)

svn-id: r41811
"
"1491c67691c909cd4a82ba387353811aaf8e61e6","2009-06-23 17:55:09+00:00","Added support for Hungarian

svn-id: r41812
"
"7ba3205f584e826c2d811f699618256e3e388c35","2009-06-23 17:55:27+00:00","Proper support for Hungarian versions

svn-id: r41813
"
"4a380dc0d8b1a75fa31e0b4511e03b0782b43f89","2009-06-23 20:46:38+00:00","ENABLE_16BIT has been renamed to ENABLE_RGB_COLOR as of r41696, so make sure the Groovie engine uses that too

svn-id: r41817
"
"04d4ce4a8be24bde70933c7e4a1dc41f374a75ad","2009-06-23 23:55:19+00:00","Putting basic TOT handling into its own class

svn-id: r41821
"
"82f1ebcafed7e565ac4dce610f7bc098f45ee67d","2009-06-23 23:55:35+00:00","Putting TOT filename generation and LOM checking into TOTFile

svn-id: r41822
"
"15b39466504e7f0fd3bfe9bd49efaed9a33584d9","2009-06-23 23:55:48+00:00","Added methods to get the file base from a filename

svn-id: r41823
"
"865129a5630017f05d08e778ba1ef430c23cd55a","2009-06-24 06:44:30+00:00","made the cursor's pixel format a member of the cursor object, merged ____CursorFormat functions into equivalent ____Cursor functions.

svn-id: r41825
"
"6c049f6b29591262a30864d0570f2a6128f1594d","2009-06-24 17:01:01+00:00","Silence unsued variables warnings.

svn-id: r41827
"
"06144864e13fb2fb9ed32c68e8a612a68103317c","2009-06-24 19:12:45+00:00","SCI: Partial support for dual-language games.

svn-id: r41833
"
"1d0f4782fc9ef6dc722544a746216be3dfc63df9","2009-06-24 19:26:06+00:00","SCI: Fix regression in r41833.

svn-id: r41834
"
"483c3a51c39da67b53a97f89108e4b5817706225","2009-06-24 21:47:54+00:00","Clarifying some warnings

svn-id: r41836
"
"53c4e66b71bf6fa42ef0281ec848cf2ed2fc3286","2009-06-24 21:48:13+00:00","Checking for the file's existence in DataIO::getDataStream()

svn-id: r41837
"
"ef33f98a1a966b3956990414e62584ec371a550e","2009-06-24 21:48:27+00:00","Added the scriptEnd property

svn-id: r41838
"
"d03dc08b64073044267fb4b3ca6704fd62a19741","2009-06-24 21:49:37+00:00","Wrapping resources (out of TOT, EXT, IM? and EX? files) loading into its own class

svn-id: r41839
"
"4df9dd82fb2a4e9f5772368ec869788e64e380ff","2009-06-25 00:14:07+00:00","After discussing with waltervn, committing my fix for the King's Quest I Demo (original from Patch #2795916). I'm also fixing the full game as well :)

svn-id: r41841
"
"004f6900b11e0ce841816f06e851ec37b8907466","2009-06-25 01:29:14+00:00","Initial support for Kyrandia 1 PC-9801 Japanese 16 color.

svn-id: r41844
"
"857ee03c7d28dc10969193a0e42283621350289e","2009-06-25 01:29:27+00:00","Implement properly colored mouse cursors in 16 color version of Kyrandia 1.

svn-id: r41845
"
"0ec0b1d4981e227fddd03bf7d5be7077a445baae","2009-06-25 01:29:41+00:00","Implement palette fading for 16 color version of Kyrandia 1.

svn-id: r41846
"
"049c9b0c8685a15c0f9d8504b3cc814ea636b965","2009-06-25 01:29:55+00:00","Add config option for Kyra1 16 color, it'll only use dithering when '16_color' is set to true.

svn-id: r41847
"
"6e299e4777b9b3653dea75ece726ccb0f1f2d617","2009-06-25 01:30:12+00:00","Strip trailing whitespaces and tabs.

svn-id: r41848
"
"951e82a9219c6f536f505adea92faae5e1eb669d","2009-06-25 02:38:19+00:00","Readd PC98 palette loading for LoL 16 color.

svn-id: r41850
"
"bd4b5d83368e7b9cd3ed2771923f6168db0d480d","2009-06-25 02:39:00+00:00","Implement proper VGA (a color component in [0, 63]) to our palette format (color component in [0, 255]) conversion.

svn-id: r41851
"
"86b63e0e4edb301d8f448b7bc71274e125de7a83","2009-06-25 02:39:23+00:00","Implement proper AMIGA to VGA color conversion.

svn-id: r41852
"
"215ffb189d23640237ec25d7cb7ac8c6624958b7","2009-06-25 02:41:39+00:00","Mention Kyra 1 PC98 16 color dithering support.

svn-id: r41853
"
"53eb83dc95b825b2bf4f5f3943e8f10d9add3aa6","2009-06-25 08:55:16+00:00","API modification -- replaced 'Graphics::PixelFormat getBestFormat()' with 'Common::List<Graphics::PixelFormat> getSupportedFormats()'

svn-id: r41854
"
"dc873f5e89f2622a8e4d3857a28971f30db932e0","2009-06-25 08:56:00+00:00","added preprocessor defines for ENABLE_RGB_COLOR and GROOVIE_EXPERIMENTAL to groovie msvc8 project

svn-id: r41855
"
"33a836fc5661d1c3b7fcf73248a32aca63e4e9a5","2009-06-25 10:03:23+00:00","Fix compilation issue for MSVC

svn-id: r41858
"
"88062e90a00112e8c959edf7adac83db489198c2","2009-06-25 10:54:35+00:00","Plugging some memory leaks

svn-id: r41859
"
"8343bc6cc05dfbc8480306cfb60fe8cde593deb5","2009-06-25 10:55:01+00:00","Giving the 'backup' arrays their own class, Environments, and really plugging all related leaks

svn-id: r41860
"
"0ef8d1ffed66d6677b0dff850e4d35d745e93aee","2009-06-25 15:22:08+00:00","Implement proper color index conversion for Lands of Lore PC98. (The intro and menu screen work fine now)

svn-id: r41867
"
"e39b5b986e2c1898b8c68e3e85efb46d3a829b61","2009-06-25 15:29:19+00:00","Oops, used git commit --amend wrong, apparently. /This/ is the real Environments change I wanted to push

svn-id: r41868
"
"df6e41e2ba6beb04c212c02614978a4c5d65b725","2009-06-25 15:37:46+00:00","Adding more version entries for a Gob1 Win version, thanks to Hkz

svn-id: r41869
"
"c202a119d401c663d8f53b99077d21248397fe26","2009-06-25 15:53:09+00:00","Fix japanese font colors in Kyra 1 PC98 16 color.

svn-id: r41870
"
"9b2da1ad0aca324fa0c18b9a20fb09a01c7e808b","2009-06-25 15:53:21+00:00","Cleanup.

svn-id: r41871
"
"17a2f52ac68940677d96560c54f113b9e947e5bf","2009-06-25 18:53:36+00:00","Making _numDataChunks unsigned

svn-id: r41875
"
"55cb0c67383d47cf9d4f4a7bb04d24d89fcf91b9","2009-06-25 19:52:49+00:00","Cleanup.

svn-id: r41876
"
"dca6ec26539983fffdf6ae84c390f7dd30ef7ac2","2009-06-25 19:53:55+00:00","Use Screen::loadPalette instead of Resource::loadFileToBuf.

svn-id: r41877
"
"c3672f8433f762e7f7a33651e82a6732dc2ded54","2009-06-25 19:54:41+00:00","Replace yet another palette from file loading with Screen::loadPalette.

svn-id: r41878
"
"b21dd2cb4344dc4b4a9914d3e3ec67a004a726b8","2009-06-25 19:55:25+00:00","Cleanup VQA player a bit.

svn-id: r41879
"
"7a7babad77a7250369af8266ed4f28db6e004698","2009-06-25 19:56:02+00:00","Add a const 'getData' access method to Palette.

svn-id: r41880
"
"6e69a149cd5e22e472f4bb3850d5f8b6561a138e","2009-06-25 19:57:06+00:00","Change Screen_v2::generateOverlay to take a const Palette reference instead of a pointer.

svn-id: r41881
"
"df307cfdc8931acda420a0bf5b4b59e2c72947a5","2009-06-25 19:57:35+00:00","Change Screen_LoL::generateGrayOverlay to use a Palette object internally.

svn-id: r41882
"
"2b87ffc31ebb81954f36769333e2754e5062655d","2009-06-25 19:58:17+00:00","Change Screen_HoF::generateGrayOverlay to use a Palette object internally.

svn-id: r41883
"
"5d4e7b540cd5180e7190b80f2245c744797b20b8","2009-06-25 19:59:06+00:00","Change Screen_LoL genereta overlay functionallity to accept a Palette object as source.

svn-id: r41884
"
"d7d385e75626efdb466e8896dc3fad5571ab96a7","2009-06-25 19:59:56+00:00","Change Screen_HoF::generateGrayOverlay to accept a Palette object as source.

svn-id: r41885
"
"f9b075c50a4e857ba1c13465bc4f6945b195c51b","2009-06-25 20:00:52+00:00","Change Screen_v2::findLeastDifferentColor to take a Palette object as source.

svn-id: r41886
"
"c358145c728eb030586ca356a9c135494185d374","2009-06-25 21:17:50+00:00","KYRA/LOL: - support speech/text settings in LOL intro
- fix possible pc98 music issue

svn-id: r41887
"
"fb06b9217075c1c209f8ce3e928300dc2c6c6392","2009-06-25 23:03:57+00:00","Implement difference in PC98 version. (This actually breaks the text colors in the LoL intro for now...)

svn-id: r41889
"
"fc0d0e2323e1a1bdd8219345af1cdaf1e879d7f4","2009-06-25 23:04:08+00:00","Cleanup palette setup.

svn-id: r41890
"
"7bbad2738ac447f0d91c194017dfa8acbf9c3783","2009-06-25 23:04:21+00:00","Store palettes in a Common::Array instead of a fixed size array.

svn-id: r41891
"
"44e2f4c9297c55d71f11ec55d63a506c053ac797","2009-06-25 23:04:32+00:00","Only initialize palettes with 16 colors in (real) 16 color games.

svn-id: r41892
"
"2ea9084d6409b1284ca6ad2d29baa6e77d19907a","2009-06-25 23:04:43+00:00","For now always enable voices in PC98 version of LoL.

svn-id: r41893
"
"e45a941f9dc39bb48c500748841203cfe051510b","2009-06-26 00:11:56+00:00","Implement PC98 text mode color palette.

svn-id: r41895
"
"e212c068452fa959e560c251f332da1fb38f2821","2009-06-26 00:12:08+00:00","Implement palette difference in Kanji drawing code for PC98.

svn-id: r41896
"
"9f5f2625619d6dbf6eea0d16c6e712939c418cde","2009-06-26 00:12:19+00:00","Implement difference in TIM's displayText code for PC98, this should fix the font color in the intro.

svn-id: r41897
"
"2859c9130462e66df705d534f9a70d1430628be7","2009-06-26 08:50:11+00:00","Changed cursor manager functions to take *Graphics::PixelFormat with default parameter of NULL (and initialize NULL pointers with CLUT8), rather than taking a Graphics::PixelFormat with default parameter of Graphics::PixelFormat::createFormatCLUT8()

svn-id: r41900
"
"27e50db5d7cdbed498d6a61b1ee1ad5405ce33a2","2009-06-26 10:37:00+00:00","Converted OSystem::SetMouseCursor to take pointer to PixelFormat, instead of full PixelFormat. Removed OSystem::setCursorFormat (since I forgot to do so several commits ago)

svn-id: r41901
"
"43d61d598ac281b71d7b4cb099bc5b6b5766a35e","2009-06-26 17:58:27+00:00","KYRA/LOL: fixed minor bug by adding reset() call to pc98 audio driver destructor

svn-id: r41902
"
"5a6573d33de407c69000fba7acbf44cf43eab139","2009-06-26 19:03:37+00:00","Fixing text strings embedded in the TOT

svn-id: r41903
"
"70c9731810b28e910270429b2e5d16e2fe92f604","2009-06-26 22:30:52+00:00","SCI: starting to restore RGB color functionality

svn-id: r41904
"
"fe65f6163c88b77a5997d47eff842b78812085be","2009-06-26 23:04:46+00:00","SCI: Fix typo breaking in-engine scaling

svn-id: r41905
"
"853aec05ba4485f0bfc90e7515322dfd56a8d4af","2009-06-27 05:58:44+00:00","changed initGraphics, and OSystem::initSize to take Graphics::PixelFormat * parameters instead of Graphics::PixelFormat parameters, to save unnecessary pixelformat initialization if ENABLE_RGB_COLOR is not set.

svn-id: r41909
"
"39e957d31320b2bc69a2a2ffcdb06e88c0302065","2009-06-27 08:16:21+00:00","Enabled RGB color support in SCI engine, corrected SCI engine's initGraphics call for modified API

svn-id: r41911
"
"6f644324863437dedecb254bf088b33c914c7241","2009-06-27 10:53:21+00:00","SCI: Use obtained instead of requested PixelFormat

svn-id: r41912
"
"49dd58de45db302214b65af5b296a21f84f02ebe","2009-06-27 12:26:26+00:00","Name Operation Stealth's global variables 251 and 252 and init them in main loop.

These are used as a sort of a backup for the
mouse position (x, y) variables 249 and 250.

Future Wars's VAR_MOUSE_Y_MODE and Operation Stealth's
VAR_MOUSE_X_POS_2ND (251) clash and that's possibly
why executePlayerInput currently works incorrectly
with Operation Stealth. More reverse engineering
is needed...

svn-id: r41915
"
"a7cb4362b430969d21f9dd57554a7dec3a4f16ee","2009-06-27 12:36:12+00:00","LOL: cleanup

svn-id: r41916
"
"7d876f8a199d5b65b2ac8bbf665e1b43f7912170","2009-06-27 13:15:47+00:00","LOL: fixed regression

svn-id: r41917
"
"9b27e2b97cc14954c7ff00719b20da3664e628f2","2009-06-27 16:48:47+00:00","LOL: add workaround to fix map text display when the language is set to French

svn-id: r41922
"
"53c431dc97de8e547be6b753dd0125aa344a28d0","2009-06-28 17:51:53+00:00","change link order in .spec file to produce working binaries when building using the configure script

svn-id: r41929
"
"531e7a8c78d1374e1a5aba606339fd8155eb3dee","2009-06-28 19:56:58+00:00","Silenced the reamining warnings reported in patch #2684986 (gcc warnings with -DFORTIFY_SOURCE=2 -fstack-protector)

svn-id: r41930
"
"a882a6f46779768f15d38e350781785d975e5007","2009-06-28 19:57:27+00:00","GUI: Replaced ThemeParser::_drawFunction hashmap by a static function getDrawingFunctionCallback which maps strings to draw funcs

svn-id: r41931
"
"bb28ed7b7a10535c4f3f275b3bef3643f9ce46d3","2009-06-28 19:58:11+00:00","Changed OSystem::setWindowCaption to expect ISO LATIN 1 encoded input;
also intentionally broke WinCE and Symbian ports (in an obvious way that
can be undo by commenting out some text) -- hopefully this will get the
maintainers' attention during the next release cycle, unlike my emails

svn-id: r41932
"
"d3ca3157610ae8ce2dd1b546ab28e91c7b2afc19","2009-06-28 19:58:30+00:00","PS2: Don't overload fillScreen with a dummy, just use the inherited version

svn-id: r41933
"
"4e17f7251d401248beb226b70612c6680d2ca927","2009-06-28 21:04:24+00:00","Fix PSP port

svn-id: r41934
"
"d120ca8f5ccaf3d431a61ca074740e518740d9e9","2009-06-28 22:20:28+00:00","For consistency, use upper-case letter in hex constant.

svn-id: r41938
"
"beca7b16c4a597d6c486020ed1439834b357d776","2009-06-29 12:33:47+00:00","Indentation fix.

svn-id: r41940
"
"b12496d1dd666829a81be3a9d61034fca1e3251f","2009-06-29 16:05:50+00:00","Modified Palette::load*Palette definition.

svn-id: r41941
"
"c72dac8dd01f09ec3990be655a46292fa93bef92","2009-06-29 16:06:02+00:00","Change LoLEngine::processMagicIce to use Palette objects internally.

svn-id: r41942
"
"f7bbd359bb4edcd6cda67c3c3ee8f71fc63b546e","2009-06-29 16:06:18+00:00","Changed LoLEngine::setPaletteBrightness to take an Palette object.

svn-id: r41943
"
"bf81e432e14c48fa303fb2d36664ced2eca3e11b","2009-06-29 16:06:31+00:00","Change LoLEngine::generateBrightnessPalette to take Palette objects as parameters.

svn-id: r41944
"
"0bf94cb194edcdfe23a53adeb15fec6057e9bc28","2009-06-29 16:07:46+00:00","Chang Palette parameter of LolEngine::setPaletteBrightness to be const.

svn-id: r41945
"
"3bde2647b6ebc4c596c98f8550b3b432441235da","2009-06-29 16:08:00+00:00","Change raw palette read to Screen::loadPalette call.

svn-id: r41946
"
"c09985db2c8222feb2ab0aaa1aa2e562ce423141","2009-06-29 16:08:16+00:00","Change Screen_LoL::loadSpecialColors to take an Palette object as parameter.

svn-id: r41947
"
"3b7f11d4cce9f72fc451fec74559dfc44352c76a","2009-06-29 16:08:28+00:00","Change LoLEngine::generateFlashPalette to take Palette objects as parameters.

svn-id: r41948
"
"6f46b6923684626cb1248872a6448078420ad819","2009-06-29 16:08:39+00:00","Cleanup KyraEngine_MR::updateCharPal.

svn-id: r41949
"
"80a4a2dd8e047298e7d7d385005a7049d25bc675","2009-06-29 16:49:14+00:00","Cleanup GUI_HoF::setupPalette.

svn-id: r41950
"
"bfe8ec6d668a3586ee101da671de73f5fc8bbac8","2009-06-29 16:49:26+00:00","Replaced some raw palette loads.

svn-id: r41951
"
"07cdbd273db8887778a0b15048679ee78b2d72ce","2009-06-29 16:49:38+00:00","Add a 'fill' method to Palette.

svn-id: r41952
"
"179a822b93b3bd4c5ff462441fdf1ca53f672b9d","2009-06-29 16:49:53+00:00","Adapted various code parts to use Palette::fill.

svn-id: r41953
"
"31691eb6bf7332392a862bcedc3fdf0f7438666f","2009-06-29 17:05:49+00:00","Removed some obsolete TODOs.

svn-id: r41954
"
"c2d13aab2aa6299ad213f74fdf045b7b7ddcbf71","2009-06-29 17:06:00+00:00","Update the screen animations while dropping items in Hand of Fate.

svn-id: r41955
"
"fbefe917f229c8d7314575cd76cbce3c9c4fc313","2009-06-29 17:06:17+00:00","Removed more obsolete TODO messages.

svn-id: r41956
"
"11dafd2dedaa06bc9c03e0298d6ab4d623c38131","2009-06-29 17:26:43+00:00","Resolved some TODOs in Kyra3 code.

svn-id: r41957
"
"c810f9645af0259c2ff89a76bcc3d565f2f58601","2009-06-29 17:26:56+00:00","Removed obsolete TODOs in HoF code.

svn-id: r41958
"
"67f69bcaf2a0e425eb0799683fc631213775aabb","2009-06-29 18:00:18+00:00","- Get rid of code duplication for mouse cursor setup
- Fix mouse cursor colors in LoL PC98
(This commit might introduce regressions, since it changes the key color the mouse cursor uses)

svn-id: r41959
"
"cc0b30370ed19bdcfc4018f8892476e1f7ed45fc","2009-06-29 18:49:17+00:00","Fix kyra2/kyra3 mouse cursor related regressions, introduced with r41959.

svn-id: r41960
"
"3919bd2aed36cf31ca33da26aac186e76efc7610","2009-06-29 18:49:28+00:00","Fix palette regression caused by r41949.

svn-id: r41961
"
"e15502d38157498f3cc8dca0014e3099ff6625c4","2009-06-29 19:02:15+00:00","Fix bug in drawShape, which caused invisibility in Kyra1 to be displayed incorrectly.

svn-id: r41962
"
"a12b4e70024530529c596768e0e33c2896e851a3","2009-06-29 20:16:59+00:00","Fix LoL cursor in DOS version.

svn-id: r41963
"
"18940ffd46b93577265b8853979fdbca9b52b3ad","2009-06-29 20:17:10+00:00","Fix bug in drawShape.

svn-id: r41964
"
"267efdc8742fb64e72bc50e78e1d719451f2144e","2009-06-29 23:14:35+00:00","Fix invisible mouse cursor, when picking up items.

svn-id: r41967
"
"b37beb4493f69de1e2338fcf10bb1852ba864bc7","2009-06-29 23:23:29+00:00","Add some more explanation to Graphics::CursorManager::showMouse and OSystem::showMouse.

svn-id: r41968
"
"9e1916bcad3cc33a870bdbff5bd01b39e523492d","2009-06-30 07:30:57+00:00","renamed kTransactionPixelFormatNotSupported to kTransactionFormatNotSupported, retyped all Graphics::PixelFormat * parameters to const Graphics::PixelFormat *, (hopefully) repaired all memory leaks on screen and cursor format changes, provided OSystem::getScreenFormat and OSystem::getSupportedFormats methods for when ENABLE_RGB_COLOR is not set, completely forgot the 'commit early, commit often' mantra.

svn-id: r41972
"
"5e9285e8fa8eb2f0b01abc6caf93dc926f41d795","2009-06-30 08:25:08+00:00","Fixed a few formatting bits

svn-id: r41973
"
"03b501ee2442c8118deacb396af479e32a910dd4","2009-06-30 10:25:44+00:00","Groovie: Converted compile time checks for RGB modes support to runtime checks in order to fallback if the requested PixelFormat isn't available.

svn-id: r41974
"
"f9298ff40310149779b37ccdecc873afba7adf2f","2009-06-30 10:36:50+00:00","Made the music/sfx volume settings actually affect the in-game music/sfx volume

svn-id: r41975
"
"f10946545ad62c0157d1b0bcfcf12dcb614aaedb","2009-07-01 04:06:13+00:00","Allowed for 16, 24, and 32 bit pixel format factory constructors to be used without backend RGB color support

svn-id: r41985
"
"75507138cc6b2ae37ea848d77586128ac1023f69","2009-07-01 06:33:50+00:00","Implemented Graphics::PixelFormat Graphics::findCompatibleFormat(Common::List<Graphics::PixelFormat> backend, Common::List<Graphics::PixelFormat> frontend)

svn-id: r41986
"
"f67f820010665e83e753da097a4ce20559afd36a","2009-07-01 15:06:38+00:00","Add JPEG support to 16bpp branch (if it breaks or is wrong, clone2727 made me)

svn-id: r41990
"
"bf18c79ba602172fb5b01293b9dc2e98b75e2e09","2009-07-01 15:08:11+00:00","Add JPEG support to 11H for ROQ playback

svn-id: r41991
"
"da1f41005cc4eb234cfab9e4a56cc5e4a15500cb","2009-07-01 15:10:30+00:00","Sync MSVC project files for JPEG addition

svn-id: r41992
"
"c753e68024d23f1128934c4730fbd4d7bdee8e61","2009-07-01 15:11:52+00:00","fix compile

svn-id: r41993
"
"4b850a2c0357aa2d94cfc2fcf5d05ed0903278e5","2009-07-01 20:02:33+00:00","Move action inits to engineInit and engineDone callbacks.

svn-id: r42007
"
"62acda5fdbe0daaeae9e1d0f08044b8be4ee98cf","2009-07-01 20:11:44+00:00","Use MIN with correct template parameter.

svn-id: r42008
"
"a6b57dc3a986f749ca8f915b461b184d48390757","2009-07-01 20:51:04+00:00","- Added GCC_PRINTF attribute to several funcs where it makes sense
- change some constants from double to float, to avoid 'loss of precision due to implicit conversion' warnings
- removed duplicate prototypes for some funcs
- fixed some 'increases required alignment of target type' warnings

svn-id: r42009
"
"c4f629533082b065d8399a38822cd9cce08ccce8","2009-07-01 20:51:34+00:00","Fixed some more warnings observed on buildbot

svn-id: r42010
"
"385421e95b59cf904e7e84edfe31d272a66da6b4","2009-07-01 20:51:47+00:00","Flag what looks like a bug in the CMS player code -- somebody should verify and fix this properly

svn-id: r42011
"
"630501fe43af959a26b7c345a31b250347450142","2009-07-01 20:53:47+00:00","oops

svn-id: r42012
"
"341d875ceabcccd75d7921777c0158f287089b2f","2009-07-02 12:15:04+00:00","Added support for compressed sample files (patch #2815426 by m_kiewitz)

svn-id: r42020
"
"8aa667e342e8c8dc203fb6811f01523bacfcffab","2009-07-02 21:16:36+00:00","Enhanced the quicksearch box in the launcher to match words in the search string individually

svn-id: r42038
"
"cea01452a7b6cfe59646c43935cff5877c985c29","2009-07-02 21:37:13+00:00","fixed indention (and trigger a reconfigure in buildbot)

svn-id: r42039
"
"51889298258f651a95f810cebd78c5b431f35472","2009-07-02 22:05:42+00:00","cleanup

svn-id: r42040
"
"650248dbd1871444e88a01b696d5d671e636650c","2009-07-02 22:21:33+00:00","Added -Wmissing-format-attribute to build system

svn-id: r42041
"
"80cb18e87fb2a0a6ecc3c7f96c5b8366550648ea","2009-07-02 23:16:40+00:00","Moved all the debug state variables in a separate struct and re-enabled several places where they're used

svn-id: r42043
"
"c3403ac7395cf9df9c4dad57b42e600b200660b5","2009-07-02 23:58:05+00:00","Moved some more debug state related variables in the DebugState struct

svn-id: r42044
"
"3190bf68f2638f51a3aceb3d3d24ca0d405e6be6","2009-07-03 06:19:20+00:00","Bugfix for loading savegames where the active resource file database isn't completely filled

svn-id: r42047
"
"d81bbae875ee4ef0681d16dcfd7219da80238df4","2009-07-03 06:21:04+00:00","Bugfix for displaying text messages when an auto tracking (cut-scene) changes to a user wait

svn-id: r42048
"
"f3ac0a62c47c33bfb814c89f52f6c2b50092f561","2009-07-03 07:06:48+00:00","Applied patch #2815937 - 'SCI: ReadString fix to repair LSL5 password'. This fixes the problems with the LSL5 password for good

svn-id: r42049
"
"9664050ff07214ccd2ae2189475ddde80e7630ef","2009-07-03 09:01:51+00:00","Simplified the kernel name loading code: Merged the default SCI0 and SCI1 kernel name tables in one table. vocab.999 is only used in SCI0 and SCI01 games if it exists as an override to the default kernel name table  (which works with SCI0/SCI01 demos with no vocab.999, like KQ1 and xmas1998). Removed GF_SCI0_SCI1VOCAB.

svn-id: r42050
"
"c28af8ce941ea92fcf32b726ad03f2f854de342d","2009-07-03 09:33:58+00:00","Provided a virtual method for converting graphics rectangles from screen format to hardware format, for backend developers wanting to provide support for color component orders not directly supported in hardware. (This could probably use a fair bit of looking over, it's ugly and has some fairly arbitrary limitations)

svn-id: r42051
"
"cbea1a11935074090f737737e0a26d43cd708f89","2009-07-03 10:40:49+00:00","Added more GCC_PRINTF attributes, and fixed resulting warnings in format strings

svn-id: r42054
"
"72512db7fb578ea47f916b7f7ef070b7a4d77694","2009-07-03 10:41:03+00:00","SCI: Fixed warning

svn-id: r42055
"
"9b3074d929d6313422677c5fa5b1bf741884e28d","2009-07-03 11:05:59+00:00","If NDEBUG is #defined, then assert does nothing, leading to warnings about 'old_size' not being used -> fix that

svn-id: r42056
"
"c37f1d9d5e5ee2e2745c75f99189fb197c605c63","2009-07-03 11:46:09+00:00","Cleaned up system.h, renamed OSystem::convertRect to OSystem::convertScreenRect (still not very descriptive). Added graphics/conversion.h and graphics/conversion.cpp with Graphics::crossBlit function created from extending original contents of OSystem::convertRect

svn-id: r42057
"
"8f44661611068df6dd40ed7f277bf854c4f97547","2009-07-03 11:54:52+00:00","Add conversion.o to module.mk. Add missing endline.

svn-id: r42058
"
"255e51906298e8d06939cd1aa888e233b0eefa2a","2009-07-03 13:46:47+00:00","Fix some formatting bits

svn-id: r42059
"
"69da51e71d71bb700a4e5e5419f64f482cb9fabc","2009-07-03 14:18:20+00:00","Replaced all calls for manipulating the mouse cursor to be made to the CursorManager instead of directly to the graphics backend

svn-id: r42060
"
"6fa8541aed68e72fd4f1cdeb13a46ec95547b275","2009-07-03 14:22:50+00:00","- Pushed debugstate into debug.h
- When an error occurs, manipulate the execution stack before error() opens the console inside getDebugger(), like FreeSCI did. Added another method for obtaining the SCI console for use by the engine itself.

svn-id: r42062
"
"9a96b20cd0c30dd8b1788637ae8b8b4bb4e5ca38","2009-07-03 21:59:07+00:00","Replaced script_error and CORE_ERROR with error()

svn-id: r42079
"
"d42f054f0b9c20764ac7eed31cd1ad11e69dc426","2009-07-03 23:02:37+00:00","Moved the YUV<->RGB routines to graphics/conversion.h

svn-id: r42080
"
"df9570cb3265f4d81ac41d66d949355491e2df7e","2009-07-03 23:37:08+00:00","SCI0 games using older graphics functions are automatically detected now, from the presence of the 'TimesSin' and 'SinMult' kernel functions. Removed the GF_SCI0_OLDGFXFUNCS game flag

svn-id: r42081
"
"855a9587b94343a563f254998009fd3855ee8227","2009-07-04 01:48:08+00:00","Sync MSVC project files for r42057

svn-id: r42083
"
"6ef485f44896ad778d355bc1201f2f143cc9e770","2009-07-04 04:13:10+00:00","Fixed cursor corruption in non-8bit graphics games when switching back from overlay.

svn-id: r42084
"
"4656019e8a2f92f708a685be6d3d95edd7ee8d6d","2009-07-04 05:56:10+00:00","Merged revisions 41219-41297,41299-41318,41322-41328,41331-41334,41336-41346,41348-41369,41372-41376,41379-41381,41384-41386,41389,41393,41395,41398,41400-41409,41419,41421,41423-41425,41428-41430,41432-41433,41452-41453,41458-41462,41465,41468,41470,41473-41474,41484-41490,41493,41496-41504,41506-41508,41516-41517,41519-41520,41528,41536-41538,41556-41557,41559-41560,41562-41576,41579,41584,41587-41592,41596,41598,41601-41603,41611,41618-41619,41630,41632-41635,41639,41641,41644-41647,41660,41663-41665,41668,41677,41679-41680,41683,41699-41705,41707-41709,41713-41715,41718-41727,41729-41736,41739-41763,41765-41766,41768-41774,41777-41778,41781-41799,41803,41806,41809-41813,41821-41823,41827,41833-41834,41836-41839,41841,41844-41848,41850-41853,41858-41860,41867-41871,41875-41887,41889-41893,41895-41897,41902-41903,41915-41917,41922,41929-41934,41938,41940-41964,41967-41968,41975,42007-42012,42020,42038-42041,42043-42044,42047-42050,42054-42056,42060,42062,42079,42081 via svnmerge from
https://scummvm.svn.sourceforge.net/svnroot/scummvm/scummvm/trunk

........
r41219 | drmccoy | 2009-06-06 21:34:11 +1000 (Sat, 06 Jun 2009) | 2 lines

Adding my German version of Playtoons 2 ('Rummelsdorf hoch zwei')
........
r41220 | wjpalenstijn | 2009-06-06 21:38:20 +1000 (Sat, 06 Jun 2009) | 3 lines

Store long-term pointers to object variables in a new ObjVarRef struct.
Storing them as reg_t* could cause the pointers to become invalid
when they pointed into CloneTable since CloneTable can be re-allocated.
........
r41221 | athrxx | 2009-06-06 22:18:39 +1000 (Sat, 06 Jun 2009) | 1 line

KYRA/LOL: fix input code for japanese game versions
........
r41222 | waltervn | 2009-06-06 22:30:13 +1000 (Sat, 06 Jun 2009) | 2 lines

SCI: Fix audio regression in KQ5CD, introduced in r41205.
........
r41223 | athrxx | 2009-06-07 00:14:07 +1000 (Sun, 07 Jun 2009) | 1 line

LOL: fixed vaelan's cube
........
r41224 | athrxx | 2009-06-07 00:42:03 +1000 (Sun, 07 Jun 2009) | 1 line

LOL: fixed level temp data size
........
r41225 | athrxx | 2009-06-07 01:32:42 +1000 (Sun, 07 Jun 2009) | 1 line

LOL: fix last commit
........
r41226 | djwillis | 2009-06-07 01:41:17 +1000 (Sun, 07 Jun 2009) | 1 line

GP2XWiz: Cleanup and start to work on virtual keyboard support for the backend.
........
r41227 | thebluegr | 2009-06-07 02:43:13 +1000 (Sun, 07 Jun 2009) | 1 line

Moved some more debug commands to ScummVM's coneole
........
r41228 | drmccoy | 2009-06-07 02:47:21 +1000 (Sun, 07 Jun 2009) | 2 lines

Adding a pause mode
........
r41229 | drmccoy | 2009-06-07 02:48:29 +1000 (Sun, 07 Jun 2009) | 2 lines

Adding a general coktelplayer.scn demo file
........
r41230 | djwillis | 2009-06-07 02:52:45 +1000 (Sun, 07 Jun 2009) | 2 lines

GP2X: Small cleanup of control code and start to work on virtual keyboard support for the backend.
........
r41231 | lordhoto | 2009-06-07 03:10:15 +1000 (Sun, 07 Jun 2009) | 2 lines

Fix unused variable warnings.
........
r41232 | djwillis | 2009-06-07 03:21:50 +1000 (Sun, 07 Jun 2009) | 1 line

Virtual Keyboard: Fix detection of v_align option when used in the keyboard definition.
........
r41233 | sev | 2009-06-07 03:36:06 +1000 (Sun, 07 Jun 2009) | 1 line

Implement feature request #1180217: 'GUI: Mute option'
........
r41234 | sev | 2009-06-07 03:36:21 +1000 (Sun, 07 Jun 2009) | 1 line

Mention new hotkey in README
........
r41235 | sev | 2009-06-07 03:36:58 +1000 (Sun, 07 Jun 2009) | 1 line

Add Mute control to all themes
........
r41236 | sev | 2009-06-07 03:37:15 +1000 (Sun, 07 Jun 2009) | 1 line

Implement FR#1522626: 'GUI: Friendlier 'Add Game' session'
........
r41237 | sev | 2009-06-07 03:37:31 +1000 (Sun, 07 Jun 2009) | 1 line

Implement FR#2090830: 'GUI: RTL should focus game list on the last game played'
........
r41238 | sev | 2009-06-07 03:37:51 +1000 (Sun, 07 Jun 2009) | 1 line

Decrease number of free memory pages to realistic value
........
r41239 | sev | 2009-06-07 03:39:13 +1000 (Sun, 07 Jun 2009) | 1 line

Whitespace fixes and C++ comments
........
r41240 | sev | 2009-06-07 03:39:42 +1000 (Sun, 07 Jun 2009) | 1 line

Fix bug #2434187: 'SQ2: message not displayed, or vanishes too quickly'
........
r41241 | sev | 2009-06-07 03:40:09 +1000 (Sun, 07 Jun 2009) | 1 line

Fix implementation of prevent.input. This fixes SQ2 intro
........
r41242 | sev | 2009-06-07 03:40:27 +1000 (Sun, 07 Jun 2009) | 1 line

Fix bug #2026570: 'SQ2: Prompt disappears when it shouldn't'
........
r41243 | sev | 2009-06-07 03:40:56 +1000 (Sun, 07 Jun 2009) | 1 line

Fix bug #2721940: 'AGI: Gold Rush! Restart Option differs from original'
........
r41244 | sev | 2009-06-07 03:41:29 +1000 (Sun, 07 Jun 2009) | 1 line

Fix bug #1745954: 'GR: Intro 'jumpy' in parts (Amiga version)'
........
r41245 | sev | 2009-06-07 03:41:50 +1000 (Sun, 07 Jun 2009) | 1 line

Store and compare MD5s in the saves
........
r41246 | sev | 2009-06-07 03:42:12 +1000 (Sun, 07 Jun 2009) | 1 line

Disable save/load when original did not allow
........
r41247 | sev | 2009-06-07 03:42:37 +1000 (Sun, 07 Jun 2009) | 1 line

Stop abusing game flag.
........
r41248 | sev | 2009-06-07 03:43:04 +1000 (Sun, 07 Jun 2009) | 1 line

Remove duplicated amiga busy cursor
........
r41249 | sev | 2009-06-07 03:43:26 +1000 (Sun, 07 Jun 2009) | 1 line

Implement debug commands 'room' and 'bt'
........
r41250 | sev | 2009-06-07 03:43:51 +1000 (Sun, 07 Jun 2009) | 1 line

Fix bug #2026605: 'SQ2: Have to wait after dying to do anything.'
........
r41251 | sev | 2009-06-07 03:44:24 +1000 (Sun, 07 Jun 2009) | 1 line

Cleanup
........
r41252 | sev | 2009-06-07 03:44:46 +1000 (Sun, 07 Jun 2009) | 1 line

Implement scummvm.ini flag features for AGI engine
........
r41253 | sev | 2009-06-07 03:45:06 +1000 (Sun, 07 Jun 2009) | 1 line

Implement cancel.line. Consider obj.status.f implemented
........
r41254 | sev | 2009-06-07 03:45:52 +1000 (Sun, 07 Jun 2009) | 1 line

Cleanup
........
r41255 | sev | 2009-06-07 03:46:19 +1000 (Sun, 07 Jun 2009) | 1 line

Implement hold.key and release.key opcodes
........
r41256 | sev | 2009-06-07 03:46:38 +1000 (Sun, 07 Jun 2009) | 1 line

Implement allow.menu opcode
........
r41257 | sev | 2009-06-07 03:46:55 +1000 (Sun, 07 Jun 2009) | 1 line

Implement hide.mouse and show.mouse opcodes
........
r41258 | sev | 2009-06-07 03:47:29 +1000 (Sun, 07 Jun 2009) | 1 line

Implement fence.mouse opcode
........
r41259 | sev | 2009-06-07 03:48:09 +1000 (Sun, 07 Jun 2009) | 1 line

Correct implementation for set.key opcode. Fixes #2605104: 'AGI: Manhunter, F3 hotkey dosent work', removed number of hacks
........
r41260 | sev | 2009-06-07 03:48:30 +1000 (Sun, 07 Jun 2009) | 1 line

Add guard check to set.key opcode.
........
r41261 | sev | 2009-06-07 03:48:46 +1000 (Sun, 07 Jun 2009) | 1 line

Make PopUp widget look more balanced
........
r41262 | sev | 2009-06-07 03:49:09 +1000 (Sun, 07 Jun 2009) | 1 line

Improved look of popup widget, buttons, checkbox and tab widget
........
r41263 | sev | 2009-06-07 03:49:59 +1000 (Sun, 07 Jun 2009) | 1 line

Implement FR#2707442: 'GUI: Improve Mass Add dialog'
........
r41264 | sev | 2009-06-07 03:50:30 +1000 (Sun, 07 Jun 2009) | 1 line

Sync all themes with improvements of mass dialog. Fixed list positioning
........
r41265 | sev | 2009-06-07 03:51:41 +1000 (Sun, 07 Jun 2009) | 1 line

Implement widget property 'textalign'. Added it to all theme layouts
........
r41266 | sev | 2009-06-07 03:52:44 +1000 (Sun, 07 Jun 2009) | 4 lines

Implement FR#2507667: 'GUI: Improve PopupWidget rendering / theme layouting'.
- Split out label from PopUp widget
- Aligned every widget on all layouts so GUI becomes to look nice again
- Moved textHAlign to layout properties
........
r41267 | sev | 2009-06-07 03:53:25 +1000 (Sun, 07 Jun 2009) | 2 lines

Add to launcher not yet functional search widget.
Make EditableWidget CommandSender
........
r41268 | sev | 2009-06-07 03:54:08 +1000 (Sun, 07 Jun 2009) | 1 line

Implement FR#1970293: 'LAUNCHER: Add 'quick search' input field like in iTunes'
........
r41269 | sev | 2009-06-07 03:54:28 +1000 (Sun, 07 Jun 2009) | 5 lines

Improvements to laucher dialog
- Made quicksearch turned off in the launcher game list
- Turn ListWidget into CommandSender
- Turn quicksearch off in launcher game list
- Connect laucher list widget with search box so search is initiated by typing
........
r41270 | sev | 2009-06-07 03:54:43 +1000 (Sun, 07 Jun 2009) | 1 line

Fix font size in EditTextWidget on screen resolution change.
........
r41271 | sev | 2009-06-07 03:54:59 +1000 (Sun, 07 Jun 2009) | 1 line

Fix item selection on filtered out list in launcher
........
r41272 | sev | 2009-06-07 03:56:41 +1000 (Sun, 07 Jun 2009) | 1 line

Added game GUI options to advancedDetector and updated all engines
........
r41273 | sev | 2009-06-07 03:56:59 +1000 (Sun, 07 Jun 2009) | 1 line

Fix bug with GUI options not set when per-game setting is empty
........
r41274 | sev | 2009-06-07 03:57:39 +1000 (Sun, 07 Jun 2009) | 1 line

Add GUI options support to Sky, Queen and Sword1&2 engines (which do not use AD)
........
r41275 | sev | 2009-06-07 03:58:08 +1000 (Sun, 07 Jun 2009) | 2 lines

Implement FR#862150: 'GUI: Show subtitles/speech options only for speech games'
Add generic per-game GUI options support along the way ;)
........
r41276 | sev | 2009-06-07 03:58:29 +1000 (Sun, 07 Jun 2009) | 1 line

Do not change list content if filter was not changed
........
r41277 | sev | 2009-06-07 03:59:04 +1000 (Sun, 07 Jun 2009) | 1 line

Disable load from the launcher button for AGOS and Gob games with use of GUI options
........
r41278 | sev | 2009-06-07 03:59:54 +1000 (Sun, 07 Jun 2009) | 1 line

Add support for GUI options to SCUMM engine
........
r41279 | thebluegr | 2009-06-07 04:02:16 +1000 (Sun, 07 Jun 2009) | 1 line

Removed unused variable
........
r41280 | sev | 2009-06-07 04:11:05 +1000 (Sun, 07 Jun 2009) | 2 lines

Add empty file to cheat git-svn
........
r41281 | sev | 2009-06-07 04:21:07 +1000 (Sun, 07 Jun 2009) | 1 line

Disable MIDI controls if GUIO_NOMIDI is set
........
r41282 | sev | 2009-06-07 04:21:49 +1000 (Sun, 07 Jun 2009) | 1 line

Patch #1365914: 'SCUMM: CMS support.' Disabled by default. Still plenty to do.
........
r41283 | sev | 2009-06-07 04:22:18 +1000 (Sun, 07 Jun 2009) | 1 line

Added couple of newly discovered fanmade AGI games.
........
r41284 | sev | 2009-06-07 04:22:43 +1000 (Sun, 07 Jun 2009) | 1 line

Added CoCo3 version of SQ1
........
r41285 | sev | 2009-06-07 04:23:05 +1000 (Sun, 07 Jun 2009) | 1 line

Added GUI options for newly added games
........
r41286 | sev | 2009-06-07 04:23:24 +1000 (Sun, 07 Jun 2009) | 1 line

Shut gcc warning.
........
r41287 | sev | 2009-06-07 04:27:25 +1000 (Sun, 07 Jun 2009) | 2 lines

Bump theme version to 0.5 due to number of recent changes.
........
r41288 | sev | 2009-06-07 04:32:33 +1000 (Sun, 07 Jun 2009) | 2 lines

Restore search.bmp which was lost
........
r41289 | lordhoto | 2009-06-07 04:33:20 +1000 (Sun, 07 Jun 2009) | 2 lines

Fix printf format argument related warnings.
........
r41290 | thebluegr | 2009-06-07 04:38:41 +1000 (Sun, 07 Jun 2009) | 1 line

Updated the MSVC project files of the SCUMM engine for commit #41282
........
r41291 | lordhoto | 2009-06-07 04:41:25 +1000 (Sun, 07 Jun 2009) | 2 lines

Flag all games without full voice over with GUIO_NOSPEECH.
........
r41292 | athrxx | 2009-06-07 04:46:07 +1000 (Sun, 07 Jun 2009) | 1 line

LOL: fix flying item hit processing
........
r41293 | thebluegr | 2009-06-07 05:04:09 +1000 (Sun, 07 Jun 2009) | 1 line

Fixed assertion when starting mass add and there are no games currently in the game list
........
r41294 | drmccoy | 2009-06-07 05:06:47 +1000 (Sun, 07 Jun 2009) | 4 lines

Demoplayer:
- Fixing the flawed double mode
- Adding an 'auto' double mode, where the videos get scaled if possible
........
r41295 | lordhoto | 2009-06-07 05:10:25 +1000 (Sun, 07 Jun 2009) | 3 lines

- Flag Kyra3 detection entries with GUIO_NOMIDI
- Get rid of using directive
........
r41296 | sev | 2009-06-07 05:20:39 +1000 (Sun, 07 Jun 2009) | 2 lines

Bring old 'quick search' behavior of games list back.
........
r41297 | lordhoto | 2009-06-07 05:47:55 +1000 (Sun, 07 Jun 2009) | 2 lines

Use GameDescriptor::setGUIOptions instead of setting key 'guioptions' directly.
........
r41299 | fingolfin | 2009-06-07 06:03:13 +1000 (Sun, 07 Jun 2009) | 1 line

GOB: Got rid of class ReferenceCounter; changed SurfaceDesc::Ptr to SurfaceDescPtr (a Common::SharedPtr); and changed many SurfaceDesc pointers to references
........
r41300 | djwillis | 2009-06-07 06:05:21 +1000 (Sun, 07 Jun 2009) | 1 line

Virtual Keyboard: 'Ab'use the console font to get a font small enough to be usable on 320*240 virtual keyboards for display_area (GUI and BigGUI take up far too much space).
........
r41301 | lordhoto | 2009-06-07 06:22:16 +1000 (Sun, 07 Jun 2009) | 2 lines

Made fix for empty game list on starting MassAdd a bit more robust.
........
r41302 | thebluegr | 2009-06-07 06:29:37 +1000 (Sun, 07 Jun 2009) | 1 line

Moved some more debug commands to ScummVM's coneole
........
r41303 | djwillis | 2009-06-07 06:36:12 +1000 (Sun, 07 Jun 2009) | 1 line

Virtual Keyboard: Add 320*240 support (in addition to 640*480) to the default keyboard pack. Also tweak vkeybd.xml to make it a little more like valid XML). New graphics still to come so excuse the ugly keyboard images for now.
........
r41304 | sev | 2009-06-07 06:58:36 +1000 (Sun, 07 Jun 2009) | 2 lines

Make script executable
........
r41305 | fingolfin | 2009-06-07 07:37:30 +1000 (Sun, 07 Jun 2009) | 1 line

GOB: Turned _spritesArray into a Common::Array (of fixed size) to detect out-of-bounds access to it (since access is controlled by scripts, this could (and does :/) easily happen. Also removed an obsolete swap() method, and fixed one case where _spritesArray was indeed accessed out of bounds
........
r41306 | drmccoy | 2009-06-07 07:41:22 +1000 (Sun, 07 Jun 2009) | 2 lines

Fixing the Woodruff intro: Using a flag that's /not/ already used be the scripts
........
r41307 | drmccoy | 2009-06-07 07:45:47 +1000 (Sun, 07 Jun 2009) | 2 lines

Fixing the demoplayer's auto double mode and added a REBASE0 option that sets the video's X and Y coordinates to 0,0
........
r41308 | drmccoy | 2009-06-07 07:54:12 +1000 (Sun, 07 Jun 2009) | 2 lines

Setting the game type of the generic demoplayer to Urban so it can make use of the initial palette
........
r41309 | fingolfin | 2009-06-07 09:22:22 +1000 (Sun, 07 Jun 2009) | 1 line

GUI: Simplified ThemeEngine::getImageSurface (this way it's easier to add more graphics in the future ;)
........
r41310 | fingolfin | 2009-06-07 09:22:35 +1000 (Sun, 07 Jun 2009) | 1 line

GUI: Pressing 'ESC' in the Launcher's quick search field now resets the search filter
........
r41311 | fingolfin | 2009-06-07 09:22:48 +1000 (Sun, 07 Jun 2009) | 1 line

GUI: Tweaked the launcher so that TAB switches focus between the list and the quick search field
........
r41312 | drmccoy | 2009-06-07 09:39:58 +1000 (Sun, 07 Jun 2009) | 1 line

Renamed the evaluateStore opcodes to assign, because that's what they are
........
r41313 | drmccoy | 2009-06-07 09:40:11 +1000 (Sun, 07 Jun 2009) | 1 line

Fascination needs o1_assign. o2_assign breaks the DOS floppy version
........
r41314 | athrxx | 2009-06-07 10:37:30 +1000 (Sun, 07 Jun 2009) | 1 line

LOL: implemented king richard healing sequence
........
r41315 | lordhoto | 2009-06-07 10:51:19 +1000 (Sun, 07 Jun 2009) | 2 lines

Fix WSA v2 code, now the automap remove WSA file in Lands of Lore plays correctly.
........
r41316 | lordhoto | 2009-06-07 10:58:14 +1000 (Sun, 07 Jun 2009) | 2 lines

Add support for 'WF_NO_LAST_FRAME' in WSA v1 code too. Since so far every v1 WSA file played fine, it might be unneeded, but better safe than sorry.
........
r41317 | drmccoy | 2009-06-07 11:45:09 +1000 (Sun, 07 Jun 2009) | 1 line

Dropping the v1 parser functions in favour of the extended v2 ones
........
r41318 | waltervn | 2009-06-07 12:18:38 +1000 (Sun, 07 Jun 2009) | 2 lines

SCI: Resmgr cleanup and preparations for moving resource36 handling into resmgr.
........
r41322 | strangerke | 2009-06-07 18:33:46 +1000 (Sun, 07 Jun 2009) | 1 line

Suppress use of parse_v1 and parse_v2 as DrMcCoy got rid of them.
........
r41323 | strangerke | 2009-06-07 18:46:15 +1000 (Sun, 07 Jun 2009) | 1 line

Suppress inclusion of a not yet committed file
........
r41324 | sev | 2009-06-07 20:03:19 +1000 (Sun, 07 Jun 2009) | 2 lines

Mention recent improvements
........
r41325 | sev | 2009-06-07 20:04:41 +1000 (Sun, 07 Jun 2009) | 2 lines

Added MD5 from Bug #2796782: 'SCI: LSL1 Russian MD5'
........
r41326 | sev | 2009-06-07 20:13:05 +1000 (Sun, 07 Jun 2009) | 2 lines

MD5 from bugreport #2797962: 'SCI: Laura Bows 2 german, md5'
........
r41327 | athrxx | 2009-06-07 20:34:01 +1000 (Sun, 07 Jun 2009) | 1 line

LOL: implemented some missing monster animation code
........
r41328 | fingolfin | 2009-06-07 21:02:51 +1000 (Sun, 07 Jun 2009) | 1 line

Set svn:ignore
........
r41331 | fingolfin | 2009-06-07 22:37:16 +1000 (Sun, 07 Jun 2009) | 1 line

AGI: Fixed typo in game name ;)
........
r41332 | fingolfin | 2009-06-07 22:47:10 +1000 (Sun, 07 Jun 2009) | 1 line

Added an experimental '--upgrade-targets' option (to be refined; and possibly hooked to the GUI eventually). This updates the guioptions,platform and lang for all your targets (and with a source change, also the descriptions)
........
r41333 | fingolfin | 2009-06-07 23:04:03 +1000 (Sun, 07 Jun 2009) | 1 line

Added some new method variants to Common::String
........
r41334 | fingolfin | 2009-06-07 23:04:16 +1000 (Sun, 07 Jun 2009) | 1 line

Fix for bug #2802492 (GUI: search query causes game list scrollbar glitches)
........
r41336 | athrxx | 2009-06-07 23:07:16 +1000 (Sun, 07 Jun 2009) | 1 line

LOL: implemented two more opcodes for castle cimmeria
........
r41337 | fingolfin | 2009-06-07 23:14:34 +1000 (Sun, 07 Jun 2009) | 1 line

Fixed appending a (substring of a) string to itself
........
r41338 | thebluegr | 2009-06-08 01:53:30 +1000 (Mon, 08 Jun 2009) | 1 line

Replaced/removed KP_UINT, KP_SINT, SKPV and UKPV as well as the VIEW_PRIORITY and PRIORITY_BAND_FIRST wrappers
........
r41339 | thebluegr | 2009-06-08 02:44:57 +1000 (Mon, 08 Jun 2009) | 1 line

Init _opl to 0. This prevents a crash on exit when the Adlib driver is closed, if the game music driver doesn't support music for the currently playing game (e.g. Christmas 1998)
........
r41340 | thebluegr | 2009-06-08 02:50:34 +1000 (Mon, 08 Jun 2009) | 1 line

Replaced KP_ALT, SKPV_OR_ALT and UKPV_OR_ALT
........
r41341 | fingolfin | 2009-06-08 03:05:58 +1000 (Mon, 08 Jun 2009) | 1 line

cleanup
........
r41342 | fingolfin | 2009-06-08 03:06:32 +1000 (Mon, 08 Jun 2009) | 1 line

SCI: Renamed various song/songlib related structs and members
........
r41343 | fingolfin | 2009-06-08 03:06:51 +1000 (Mon, 08 Jun 2009) | 1 line

SCI: Objectified SongLibrary
........
r41344 | fingolfin | 2009-06-08 03:07:07 +1000 (Mon, 08 Jun 2009) | 1 line

SCI: Objectified Song struct 'a bit'
........
r41345 | fingolfin | 2009-06-08 03:07:25 +1000 (Mon, 08 Jun 2009) | 1 line

SCI: Simplified SongLibrary code a bit
........
r41346 | fingolfin | 2009-06-08 03:18:11 +1000 (Mon, 08 Jun 2009) | 1 line

SCI: Fixed the broken SciEngine::pauseEngineIntern code by ensuring that SciEngine::_gamestate is updated whenever the EngineState gets changed (due to loading a savestate)
........
r41348 | athrxx | 2009-06-08 04:51:03 +1000 (Mon, 08 Jun 2009) | 1 line

LOL: minor bug fix in battle system
........
r41349 | waltervn | 2009-06-08 05:15:55 +1000 (Mon, 08 Jun 2009) | 2 lines

SCI: Moved resource36 handling into resource manager.
........
r41350 | lordhoto | 2009-06-08 05:58:00 +1000 (Mon, 08 Jun 2009) | 2 lines

Avoid warning about missing SFX file in Lands of Lore (it seems the original misses some datafiles for certain effects).
........
r41351 | lordhoto | 2009-06-08 06:43:43 +1000 (Mon, 08 Jun 2009) | 2 lines

Remove LoLEngine::_gameFlags and convert all Lands of Lore code to use _flagsTable instead.
........
r41352 | sev | 2009-06-08 08:05:57 +1000 (Mon, 08 Jun 2009) | 3 lines

Added current keymapper dialog to all themes so it could be tested by other
devs.
........
r41353 | thebluegr | 2009-06-08 08:15:28 +1000 (Mon, 08 Jun 2009) | 1 line

Applied madmoose's patch from bug report #2794216 - 'Loading large Smacker movies is slow'
........
r41354 | thebluegr | 2009-06-08 08:17:44 +1000 (Mon, 08 Jun 2009) | 1 line

Formatting
........
r41355 | sev | 2009-06-08 08:19:48 +1000 (Mon, 08 Jun 2009) | 3 lines

Added Clear button for search box. Looks a bit off, but we do not yet have
skinned buttons.
........
r41356 | thebluegr | 2009-06-08 08:34:03 +1000 (Mon, 08 Jun 2009) | 1 line

Changed the bitstream buffer used to initialize the big Huffman trees to be a normal byte array, instead of a Common::Array
........
r41357 | lordhoto | 2009-06-08 08:41:38 +1000 (Mon, 08 Jun 2009) | 2 lines

Remove unneeded functionality from Screen.
........
r41358 | athrxx | 2009-06-08 08:42:21 +1000 (Mon, 08 Jun 2009) | 1 line

LOL: minor bug fix
........
r41359 | fingolfin | 2009-06-08 09:04:34 +1000 (Mon, 08 Jun 2009) | 1 line

SCI: Got rid of g_EngineState
........
r41360 | fingolfin | 2009-06-08 09:05:11 +1000 (Mon, 08 Jun 2009) | 1 line

SCI: C++ified the song iterator code a little bit more
........
r41361 | thebluegr | 2009-06-08 09:29:11 +1000 (Mon, 08 Jun 2009) | 1 line

Hopefully fixed memory corruption when loading games
........
r41362 | lordhoto | 2009-06-08 12:26:33 +1000 (Mon, 08 Jun 2009) | 3 lines

- Fix Screen_v2::wsaFrameAnimationStep, now the MR album and LoL intro demo WSAs will be correctly played
- Made album page change in MR a bit slower, so it's visible at least
........
r41363 | djwillis | 2009-06-08 18:21:18 +1000 (Mon, 08 Jun 2009) | 1 line

Virtual Keyboard: Fix default keyboard pack to return correct events for ENTER and !.
........
r41364 | thebluegr | 2009-06-08 18:38:10 +1000 (Mon, 08 Jun 2009) | 1 line

Moved some more debug commands to ScummVM's console
........
r41365 | Kirben | 2009-06-08 18:56:32 +1000 (Mon, 08 Jun 2009) | 1 line

Update details for the Polish version of The Feeble Files.
........
r41366 | djwillis | 2009-06-08 19:10:12 +1000 (Mon, 08 Jun 2009) | 1 line

Virtual Keyboard: Add source files for the default keyboard pack seperate from ZIP archive (makes it easier to version the packs vkeybd.xml and track fixes) and add script to build keyboard pack(s) ZIP's from source files (based on /gui/themes/scummtheme.py).
........
r41367 | thebluegr | 2009-06-08 21:42:13 +1000 (Mon, 08 Jun 2009) | 1 line

Replaced GFXWARN with warning and GFXDEBUG with debugC
........
r41368 | waltervn | 2009-06-08 22:20:36 +1000 (Mon, 08 Jun 2009) | 2 lines

SCI: Cleanup
........
r41369 | Hkz | 2009-06-08 22:37:24 +1000 (Mon, 08 Jun 2009) | 1 line

sword1: add Broken Sword PSX demo support
........
r41372 | Kirben | 2009-06-09 00:21:43 +1000 (Tue, 09 Jun 2009) | 1 line

Add Polish font data for The Feeble Files.
........
r41373 | djwillis | 2009-06-09 00:47:38 +1000 (Tue, 09 Jun 2009) | 1 line

Virtual Keyboard: Move vkeybd.zip into packs folder and rename default keyboard pack to vkeybd_default(.zip) with updates to default-events.cpp. Also update vkeybdpack.py to use zlib compression if Python zlib is found. Update GP2X and GP2XWiz bundle files to get new vkeybd_default.zip.
........
r41374 | Kirben | 2009-06-09 00:50:34 +1000 (Tue, 09 Jun 2009) | 1 line

Add more Polish font data for The Feeble Files.
........
r41375 | Kirben | 2009-06-09 00:55:11 +1000 (Tue, 09 Jun 2009) | 1 line

Spacing.
........
r41376 | djwillis | 2009-06-09 01:45:03 +1000 (Tue, 09 Jun 2009) | 1 line

Virtual Keyboard: Fix slight error in earlier commit (failed to rename the XML to match the keyboard pack name).
........
r41379 | lordhoto | 2009-06-09 03:47:37 +1000 (Tue, 09 Jun 2009) | 2 lines

Fix out of bounds memory access in Screen::drawShape.
........
r41380 | Hkz | 2009-06-09 03:54:44 +1000 (Tue, 09 Jun 2009) | 1 line

sword1: slight cleanup of psx related sound code and comments
........
r41381 | lordhoto | 2009-06-09 04:30:28 +1000 (Tue, 09 Jun 2009) | 2 lines

Cleanup.
........
r41384 | lordhoto | 2009-06-09 06:11:07 +1000 (Tue, 09 Jun 2009) | 3 lines

- Cleanup
- Fix regression in Kyra1 outro
........
r41385 | djwillis | 2009-06-09 06:31:49 +1000 (Tue, 09 Jun 2009) | 1 line

Virtual Keyboard: Add some quick changes to the virtual keyboard to activate submit and cancel events from the default lowercase keyboards. This makes it possible to cancel and submit without having to call Common::KEYCODE_F7 again. Sorry for the nasty (temp) graphics.
........
r41386 | buddha_ | 2009-06-09 06:46:21 +1000 (Tue, 09 Jun 2009) | 3 lines

Convert FWRenderer and OSRenderer to use Cine::Palette.
Also fix some bugs that came up in testing of Cine::Palette.
........
r41389 | sev | 2009-06-09 07:52:32 +1000 (Tue, 09 Jun 2009) | 2 lines

Actually we /did not/ put periods at ends of the sentences in majority of past entries
........
r41393 | Kirben | 2009-06-09 10:00:24 +1000 (Tue, 09 Jun 2009) | 1 line

Correct check for font data table used in The Feeble Files.
........
r41395 | Kirben | 2009-06-09 16:37:42 +1000 (Tue, 09 Jun 2009) | 1 line

Remove unused old code.
........
r41398 | lordhoto | 2009-06-09 21:26:15 +1000 (Tue, 09 Jun 2009) | 5 lines

- Moved Screen_v2::copyWsaRect to Screen::copyWsaRect
- Made WSAMovie_v1::displayFrame code match the original
- Changed WSAMovieAmiga::displayFrame to use Screen::copyWsaRect too
- Got rid of '...' parameter usage in all WSA player classes
........
r41400 | wjpalenstijn | 2009-06-10 01:26:09 +1000 (Wed, 10 Jun 2009) | 1 line

Add (failing) hashmap test case for collision handling
........
r41401 | lordhoto | 2009-06-10 01:34:02 +1000 (Wed, 10 Jun 2009) | 2 lines

Changed some lines to tabs instead of whitespaces for identation.
........
r41402 | drmccoy | 2009-06-10 04:14:49 +1000 (Wed, 10 Jun 2009) | 1 line

Win Gob3 is multi-lingual (British, French, German)
........
r41403 | drmccoy | 2009-06-10 04:18:11 +1000 (Wed, 10 Jun 2009) | 1 line

Win Gob2 is multi-lingual (American, French, German)
........
r41404 | drmccoy | 2009-06-10 04:19:11 +1000 (Wed, 10 Jun 2009) | 1 line

Win Gob1 is multi-lingual (British, French, German, Italian, Spanish)
........
r41405 | drmccoy | 2009-06-10 04:52:55 +1000 (Wed, 10 Jun 2009) | 1 line

Multi-lingual Inca2 version (American, French, German, Italian, Spanish)
........
r41406 | drmccoy | 2009-06-10 04:53:17 +1000 (Wed, 10 Jun 2009) | 1 line

Win Lost in Time is multi-lingual (British, French, Spanish)
........
r41407 | drmccoy | 2009-06-10 04:53:35 +1000 (Wed, 10 Jun 2009) | 2 lines

Added a workaround for Win Lost in Time.
It's got VMD files which are still referenced as IMD
........
r41408 | waltervn | 2009-06-10 05:18:48 +1000 (Wed, 10 Jun 2009) | 2 lines

SCI: Moved SCI1 audio map handling into the resource manager.
........
r41409 | drmccoy | 2009-06-10 05:37:24 +1000 (Wed, 10 Jun 2009) | 1 line

Fixed CLEAR
........
r41419 | sev | 2009-06-10 18:18:44 +1000 (Wed, 10 Jun 2009) | 1 line

Clarify that Cygwin is not supported as building platform anymore
........
r41421 | sev | 2009-06-10 20:11:24 +1000 (Wed, 10 Jun 2009) | 1 line

Added debugCN() call which does not add newline automatically
........
r41423 | dreammaster | 2009-06-10 22:15:50 +1000 (Wed, 10 Jun 2009) | 1 line

Added variable to savegame format so that savegames can be correctly loaded from the ScummVM launcher
........
r41424 | dreammaster | 2009-06-10 22:16:30 +1000 (Wed, 10 Jun 2009) | 1 line

Added support for loading savegames from the launcher
........
r41425 | lordhoto | 2009-06-10 22:47:19 +1000 (Wed, 10 Jun 2009) | 2 lines

Fix documentation for debugC and debugCN, relying on special debug levels.
........
r41428 | lordhoto | 2009-06-11 01:01:20 +1000 (Thu, 11 Jun 2009) | 2 lines

Fix a bug in disableCursorPalette, where it never allowed the palette to be enabled properly again.
........
r41429 | strangerke | 2009-06-11 01:04:21 +1000 (Thu, 11 Jun 2009) | 3 lines

Gob detection :
- use GUIO_NOSPEECH and GUIO_NOSUBTITLES intensively, as there is no control other them even when they are present
- Replace non-ASCII characters by hex values
........
r41430 | lordhoto | 2009-06-11 01:11:17 +1000 (Thu, 11 Jun 2009) | 2 lines

Extend documentation for 'kFeatureCursorHasPalette'.
........
r41432 | lordhoto | 2009-06-11 01:20:52 +1000 (Thu, 11 Jun 2009) | 2 lines

Add a convenience wrapper to CursorMan for checking whether cursor palettes are supported.
........
r41433 | jvprat | 2009-06-11 01:33:37 +1000 (Thu, 11 Jun 2009) | 2 lines

Point to the Cursor and AudioCD Managers to help engine authors following the right path.
........
r41452 | sev | 2009-06-12 01:45:52 +1000 (Fri, 12 Jun 2009) | 1 line

Added set of CoCo3 AGI games
........
r41453 | buddha_ | 2009-06-12 04:32:35 +1000 (Fri, 12 Jun 2009) | 8 lines

Fix Operation Stealth's 2nd arcade sequence's revolving doors.
- Now the doors actually do revolve when before they didn't.
- The fix was to alias the 9th background with the collision
page directly when loading collision page data. This way
changes written to the 9th background go to the collision
page and vice versa (And there were changes in the labyrinth).
- Also converted _bgTable from a pure array to a Common::Array
........
r41458 | peres001 | 2009-06-12 15:03:18 +1000 (Fri, 12 Jun 2009) | 2 lines

* Final version of the IFF parsing code.
* Refactored ILBMDecoder usage from disk code.
........
r41459 | peres001 | 2009-06-12 16:20:11 +1000 (Fri, 12 Jun 2009) | 1 line

Removed a leftover printf().
........
r41460 | peres001 | 2009-06-12 17:18:01 +1000 (Fri, 12 Jun 2009) | 2 lines

* Replaced the A8SVXDecoder class with a function to return an AudioStream in trunk/sound/.
* Refactored sound code in Parallaction to use the new Audio::make8SVXStream.
........
r41461 | peres001 | 2009-06-12 17:55:44 +1000 (Fri, 12 Jun 2009) | 1 line

Cleanup of sound code.
........
r41462 | sev | 2009-06-12 18:00:26 +1000 (Fri, 12 Jun 2009) | 1 line

Rename KeyRemapper dialog to KeyMapper
........
r41465 | peres001 | 2009-06-12 18:51:05 +1000 (Fri, 12 Jun 2009) | 2 lines

* Moved the updated IFF code from Parallaction to common/
* Updated Parallaction and SAGA to use the new decoder infrastructure.
........
r41468 | peres001 | 2009-06-12 19:49:38 +1000 (Fri, 12 Jun 2009) | 3 lines

* Adapted Kyra to the new IFFParser interface.
* Adapted the new IFFParser to Kyra (slightly).
The Kyra1 demo on the website works.
........
r41470 | peres001 | 2009-06-12 19:56:07 +1000 (Fri, 12 Jun 2009) | 1 line

Finally fix build (extra qualifier removed).
........
r41473 | peres001 | 2009-06-12 20:26:15 +1000 (Fri, 12 Jun 2009) | 1 line

Added missing return statements.
........
r41474 | peres001 | 2009-06-12 20:26:58 +1000 (Fri, 12 Jun 2009) | 1 line

Fixed disposeStream initialization.
........
r41484 | strangerke | 2009-06-13 08:35:08 +1000 (Sat, 13 Jun 2009) | 1 line

Fix MSVC compilation : iff.h and iff.cpp were move from engines\parallaction\ to graphics\
........
r41485 | waltervn | 2009-06-13 09:29:27 +1000 (Sat, 13 Jun 2009) | 2 lines

SCI: Added detection entries for Japanese QFG.
........
r41486 | waltervn | 2009-06-13 09:46:23 +1000 (Sat, 13 Jun 2009) | 2 lines

SCI: Moved audio code from AudioResource to the sfx core.
........
r41487 | strangerke | 2009-06-13 17:54:25 +1000 (Sat, 13 Jun 2009) | 1 line

Oups. disk.cpp was also missing in MSVC files
........
r41488 | vinterstum | 2009-06-13 19:40:42 +1000 (Sat, 13 Jun 2009) | 1 line

Updated xcode project
........
r41489 | thebluegr | 2009-06-13 20:20:12 +1000 (Sat, 13 Jun 2009) | 1 line

Properly updated the MSVC project files of the parallaction engine, fixing compilation. Side note: please, don't include files outside the engine's directory (like files in /common) for engine project files - it's wrong, as the same code will be compiled twice
........
r41490 | thebluegr | 2009-06-13 20:23:23 +1000 (Sat, 13 Jun 2009) | 1 line

Removed duplicate entry of disk.cpp
........
r41493 | vinterstum | 2009-06-13 23:27:21 +1000 (Sat, 13 Jun 2009) | 1 line

Buildfix for gcc 3.3 (moved a template class member into the header file)
........
r41496 | wjpalenstijn | 2009-06-14 07:07:05 +1000 (Sun, 14 Jun 2009) | 3 lines

Fix erase() sometimes hiding other hash elements.
Like CPython, we now use a dummy node to mark nodes as erased,
so that lookup() can skip over it. All tests should now pass again.
........
r41497 | drmccoy | 2009-06-14 08:10:55 +1000 (Sun, 14 Jun 2009) | 1 line

Making TotTextData's item's offsets unsigned. This could fix the crash in the Polish Woodruff version (bug #2804962)
........
r41498 | strangerke | 2009-06-14 08:14:58 +1000 (Sun, 14 Jun 2009) | 1 line

Gob - *WIP* incomplete implementation of MDY/TBR
........
r41499 | drmccoy | 2009-06-14 08:35:22 +1000 (Sun, 14 Jun 2009) | 1 line

Warn when a sprite operation is to be performed on a nonexistent surface instead of crashing
........
r41500 | lordhoto | 2009-06-14 08:40:30 +1000 (Sun, 14 Jun 2009) | 2 lines

Strip trailing whitespaces.
........
r41501 | sev | 2009-06-14 08:48:16 +1000 (Sun, 14 Jun 2009) | 2 lines

Added sanity checking to stopSound() and a bit more debug output
........
r41502 | lordhoto | 2009-06-14 08:48:32 +1000 (Sun, 14 Jun 2009) | 2 lines

Added periods to every news entry (actually it seems like we always did that in the past, but were a bit lazier in the last time).
........
r41503 | lordhoto | 2009-06-14 09:04:26 +1000 (Sun, 14 Jun 2009) | 2 lines

Added yet another missing period at the end of a line. (I hope I catched all now)
........
r41504 | marcus_c | 2009-06-14 09:42:39 +1000 (Sun, 14 Jun 2009) | 5 lines

Detected games with different language or platform are now
no longer treated as duplicates, even if they have the same
target and directory.  Also, pass these parameters to the
ConfMan, so that the correct version of the game is started.
........
r41506 | dreammaster | 2009-06-14 13:39:30 +1000 (Sun, 14 Jun 2009) | 1 line

Beginnings of music support for Cruise, based on the cine engine sound code (note that the music played isn't yet correct, though)
........
r41507 | lordhoto | 2009-06-14 21:08:35 +1000 (Sun, 14 Jun 2009) | 2 lines

Fix unused variable warning.
........
r41508 | drmccoy | 2009-06-14 22:19:42 +1000 (Sun, 14 Jun 2009) | 1 line

Fixed an animation speed regression that got introduced when I added a lag compensation for Woodruff
........
r41516 | lordhoto | 2009-06-15 00:05:42 +1000 (Mon, 15 Jun 2009) | 2 lines

Got rid of a needless 'getEventManager' call. (Using Engine::_eventMan now instead)
........
r41517 | waltervn | 2009-06-15 00:11:21 +1000 (Mon, 15 Jun 2009) | 2 lines

SCI: Added detection entries for Japanese SQ4.
........
r41519 | lordhoto | 2009-06-15 00:24:28 +1000 (Mon, 15 Jun 2009) | 2 lines

Cleanup.
........
r41520 | cyx | 2009-06-15 01:07:34 +1000 (Mon, 15 Jun 2009) | 1 line

simplified .raw/.wav data files handling in introduction sequences
........
r41528 | jvprat | 2009-06-15 08:10:17 +1000 (Mon, 15 Jun 2009) | 2 lines

Fix groovie's GUI game options
........
r41536 | sev | 2009-06-15 17:06:52 +1000 (Mon, 15 Jun 2009) | 2 lines

Run AGIMOUSE hack as a side effect always
........
r41537 | thebluegr | 2009-06-15 18:24:01 +1000 (Mon, 15 Jun 2009) | 1 line

Added the missing pixelformat.h file
........
r41538 | thebluegr | 2009-06-15 18:44:35 +1000 (Mon, 15 Jun 2009) | 1 line

Added aliases for the script/breakpoint related commands and added the debugflag related commands to the help screen
........
r41556 | strangerke | 2009-06-16 05:46:00 +1000 (Tue, 16 Jun 2009) | 1 line

Add MD5 for Playtoons 4 FR
........
r41557 | athrxx | 2009-06-16 06:52:09 +1000 (Tue, 16 Jun 2009) | 4 lines

LOL: - started on the ingame menu code (death menu, load menu and main menu)
- fixed regression in kyra gui code (broken menu highlighting)
- fixed minor bug in animation code
........
r41559 | strangerke | 2009-06-16 07:28:11 +1000 (Tue, 16 Jun 2009) | 1 line

renamed playtoons target names to insult-free target names (maybe non-definitive names)
........
r41560 | athrxx | 2009-06-16 07:39:43 +1000 (Tue, 16 Jun 2009) | 1 line

LOL: implemented quit menu
........
r41562 | drmccoy | 2009-06-16 09:07:38 +1000 (Tue, 16 Jun 2009) | 1 line

Merging parseValExpr and parseExpr
........
r41563 | drmccoy | 2009-06-16 09:07:55 +1000 (Tue, 16 Jun 2009) | 1 line

Renamed varPos to varBase and split off getVarBase() from parseVarIndex() and parseExpr()
........
r41564 | drmccoy | 2009-06-16 09:08:09 +1000 (Tue, 16 Jun 2009) | 1 line

Renamed various variables to better reflect their meaning
........
r41565 | drmccoy | 2009-06-16 09:08:28 +1000 (Tue, 16 Jun 2009) | 1 line

Propagating variable name changes
........
r41566 | drmccoy | 2009-06-16 09:08:44 +1000 (Tue, 16 Jun 2009) | 1 line

Fixing the signness indicated by the OP_ enums
........
r41567 | drmccoy | 2009-06-16 09:09:04 +1000 (Tue, 16 Jun 2009) | 1 line

Adding a TYPE_ enum
........
r41568 | drmccoy | 2009-06-16 09:09:23 +1000 (Tue, 16 Jun 2009) | 1 line

Using the TYPE_ enum where applicable
........
r41569 | drmccoy | 2009-06-16 09:09:37 +1000 (Tue, 16 Jun 2009) | 1 line

Renaming some variables in o1_assign() and o2_assign() to mirror the structure in o6_assign()
........
r41570 | drmccoy | 2009-06-16 09:09:57 +1000 (Tue, 16 Jun 2009) | 1 line

Using cmpHelper for OP_NEQ too, since the original does a normal strcmp there as well. No idea where the stricmp came from
........
r41571 | drmccoy | 2009-06-16 09:10:10 +1000 (Tue, 16 Jun 2009) | 1 line

Remove some now superfluous comments
........
r41572 | drmccoy | 2009-06-16 09:10:27 +1000 (Tue, 16 Jun 2009) | 1 line

Splitting up parseExpr a bit
........
r41573 | drmccoy | 2009-06-16 09:10:51 +1000 (Tue, 16 Jun 2009) | 1 line

Moving _inter_resVal and _inter_resStr from Global to Parse
........
r41574 | drmccoy | 2009-06-16 09:11:08 +1000 (Tue, 16 Jun 2009) | 1 line

Renaming _inter_resVal to _resultInt
........
r41575 | drmccoy | 2009-06-16 09:11:29 +1000 (Tue, 16 Jun 2009) | 1 line

Renamed _inter_resStr to _resultStr
........
r41576 | athrxx | 2009-06-16 09:22:31 +1000 (Tue, 16 Jun 2009) | 1 line

KYRA: fixed regression (broken menu slide bars in HOF/MR)
........
r41579 | strangerke | 2009-06-16 17:14:07 +1000 (Tue, 16 Jun 2009) | 1 line

Add MD5 for Playtoons 3 (english)
........
r41584 | strangerke | 2009-06-16 22:25:53 +1000 (Tue, 16 Jun 2009) | 1 line

MDY/TBR : fix a thing or two. Still far from being OK, but in-game ambiance 'music' is (a little) less buggy
........
r41587 | Hkz | 2009-06-17 04:58:21 +1000 (Wed, 17 Jun 2009) | 1 line

tinsel: check only english.txt for DW1 psx version detection, and use recursive 'SearchMan.addDirectory()' to obtain subdirs for Discworld PSX datafiles
........
r41588 | lordhoto | 2009-06-17 05:26:44 +1000 (Wed, 17 Jun 2009) | 2 lines

Formatting.
........
r41589 | drmccoy | 2009-06-17 06:14:56 +1000 (Wed, 17 Jun 2009) | 1 line

Encapsulating stack adjustments
........
r41590 | drmccoy | 2009-06-17 06:15:19 +1000 (Wed, 17 Jun 2009) | 1 line

Encapsulating the Stack and StackFrame a bit
........
r41591 | drmccoy | 2009-06-17 06:15:49 +1000 (Wed, 17 Jun 2009) | 1 line

Properly initializing _soundMode, for ADLs too
........
r41592 | drmccoy | 2009-06-17 06:39:37 +1000 (Wed, 17 Jun 2009) | 1 line

Including scummsys.h and forward-declaring GobEngine
........
r41596 | athrxx | 2009-06-17 07:23:26 +1000 (Wed, 17 Jun 2009) | 1 line

LOL: implemented options menu (settings aren't saved yet)
........
r41598 | sev | 2009-06-17 07:59:20 +1000 (Wed, 17 Jun 2009) | 2 lines

Disable music for CoCo3 games. It has different format.
........
r41601 | drmccoy | 2009-06-17 14:15:45 +1000 (Wed, 17 Jun 2009) | 1 line

Changed opcodeDraw to be functor-based
........
r41602 | drmccoy | 2009-06-17 14:16:21 +1000 (Wed, 17 Jun 2009) | 1 line

Changed opcodeFunc to be functor-based
........
r41603 | drmccoy | 2009-06-17 14:16:51 +1000 (Wed, 17 Jun 2009) | 1 line

Changed opcodeGob to be functor-based
........
r41611 | strangerke | 2009-06-18 04:48:41 +1000 (Thu, 18 Jun 2009) | 2 lines

- Modify detection files for Playtoons CK Knights (CK2) as it wasn't making the difference with CK1
- Add Playtoons CK Monsters (CK1)
........
r41618 | sev | 2009-06-18 09:16:21 +1000 (Thu, 18 Jun 2009) | 2 lines

Preliminary support for CoCo3 music.
........
r41619 | dhewg | 2009-06-18 09:36:00 +1000 (Thu, 18 Jun 2009) | 1 line

Moved the wiidist target to ports.mk, cleaned it up and automated meta.xml generation.
........
r41630 | dreammaster | 2009-06-18 21:37:45 +1000 (Thu, 18 Jun 2009) | 1 line

Removed redundant code that isn't used
........
r41632 | drmccoy | 2009-06-18 23:27:14 +1000 (Thu, 18 Jun 2009) | 1 line

Replacing some #includes by forward declarations
........
r41633 | drmccoy | 2009-06-18 23:27:35 +1000 (Thu, 18 Jun 2009) | 1 line

Splitting an ADLPlayer and MDYPlayer from the AdLib class
........
r41634 | drmccoy | 2009-06-18 23:27:48 +1000 (Thu, 18 Jun 2009) | 1 line

Oops, forgot again that Fascination needs o1_assign
........
r41635 | Hkz | 2009-06-18 23:50:26 +1000 (Thu, 18 Jun 2009) | 1 line

scumm: added the missing word 'version' in a comment
........
r41639 | dhewg | 2009-06-19 04:40:38 +1000 (Fri, 19 Jun 2009) | 1 line

added DIST_FILES_DOCS to Makefile.common, used by some dist targets now, incl. OSX bundles.
........
r41641 | vinterstum | 2009-06-19 04:57:17 +1000 (Fri, 19 Jun 2009) | 1 line

Improved the iphone swipe input handling
........
r41644 | dhewg | 2009-06-19 05:39:12 +1000 (Fri, 19 Jun 2009) | 1 line

added pred.dic to DIST_FILES_ENGINEDATA
........
r41645 | drmccoy | 2009-06-19 07:08:51 +1000 (Fri, 19 Jun 2009) | 1 line

Removing the useless _vm->_parse->
........
r41646 | lordhoto | 2009-06-19 07:47:10 +1000 (Fri, 19 Jun 2009) | 2 lines

Replaced 'getRandomNumberSpecial' be RandomSource usage. (This is needed for proper event recording, also the probability for generated numbers is actually nearly the same)
........
r41647 | fingolfin | 2009-06-19 08:09:57 +1000 (Fri, 19 Jun 2009) | 1 line

Patch
........
r41660 | thebluegr | 2009-06-19 17:56:30 +1000 (Fri, 19 Jun 2009) | 1 line

Fixed a warning about an uninitialized variable
........
r41663 | drmccoy | 2009-06-19 19:42:41 +1000 (Fri, 19 Jun 2009) | 1 line

Ooops, forgot to change the array when copy-pasting the description function
........
r41664 | drmccoy | 2009-06-19 19:43:01 +1000 (Fri, 19 Jun 2009) | 1 line

Fixing The Last Dynasty again after the opcode dispatcher changes
........
r41665 | dreammaster | 2009-06-19 19:44:33 +1000 (Fri, 19 Jun 2009) | 1 line

Added myself to the CRUISE engine credits
........
r41668 | drmccoy | 2009-06-19 19:55:23 +1000 (Fri, 19 Jun 2009) | 1 line

Added my German version of The Last Dynasty
........
r41677 | athrxx | 2009-06-20 03:03:28 +1000 (Sat, 20 Jun 2009) | 2 lines

LOL: - implemented bezel cup opcode
- implemented font conversion for certain language specific characters in load game dialogue (only german atm)
........
r41679 | lordhoto | 2009-06-20 03:53:25 +1000 (Sat, 20 Jun 2009) | 2 lines

Fix some warnings.
........
r41680 | waltervn | 2009-06-20 04:07:45 +1000 (Sat, 20 Jun 2009) | 2 lines

SCI: Fix cel1 y-offset regression introduced in r40997.
........
r41683 | athrxx | 2009-06-20 04:46:19 +1000 (Sat, 20 Jun 2009) | 3 lines

LOL: - implemented delete menu
- fixed some bugs in the menu code
........
r41699 | dreammaster | 2009-06-20 16:20:12 +1000 (Sat, 20 Jun 2009) | 1 line

Added explicit casts to _fontConversionTableGerman for systems where char is signed
........
r41700 | dreammaster | 2009-06-20 16:48:47 +1000 (Sat, 20 Jun 2009) | 1 line

Finally tracked down the difference/bug in the music playing code - music playback now works
........
r41701 | dreammaster | 2009-06-20 17:36:12 +1000 (Sat, 20 Jun 2009) | 1 line

Bugfix to fade out any currently playing music when the game is restarted
........
r41702 | dreammaster | 2009-06-20 18:15:01 +1000 (Sat, 20 Jun 2009) | 1 line

Added proper saving of music state to savegames so music resumes when a savegame is loaded.
........
r41703 | dreammaster | 2009-06-20 18:15:39 +1000 (Sat, 20 Jun 2009) | 1 line

Implemented the library function Op_SongExist
........
r41704 | cyx | 2009-06-20 20:52:55 +1000 (Sat, 20 Jun 2009) | 2 lines

fixed OPL 0xB0 register write. the return value of findNote() already includes the octave, no need to readd it.
........
r41705 | dhewg | 2009-06-20 21:48:42 +1000 (Sat, 20 Jun 2009) | 2 lines

split loadKeyboardPack(), fallback to the current dir when searching for packs, and free memory in the case of an error.
........
r41707 | dhewg | 2009-06-20 21:50:15 +1000 (Sat, 20 Jun 2009) | 1 line

added vkeybd_default.zip to the Wii dist target.
........
r41708 | dhewg | 2009-06-20 21:53:31 +1000 (Sat, 20 Jun 2009) | 1 line

oups, wrong spot.
........
r41709 | dreammaster | 2009-06-20 22:02:08 +1000 (Sat, 20 Jun 2009) | 1 line

Changed many file reads and manual conversions from endian format to instead use file readSint16BE/readSint32BE calls
........
r41713 | athrxx | 2009-06-21 00:26:01 +1000 (Sun, 21 Jun 2009) | 1 line

LOL: implemented save menu
........
r41714 | athrxx | 2009-06-21 01:09:55 +1000 (Sun, 21 Jun 2009) | 1 line

LOL: cleanup
........
r41715 | athrxx | 2009-06-21 02:36:26 +1000 (Sun, 21 Jun 2009) | 1 line

LOL: minor fix for save menu
........
r41718 | lordhoto | 2009-06-21 11:14:57 +1000 (Sun, 21 Jun 2009) | 1 line

Prevent font code to draw characters not included in the font.
........
r41719 | lordhoto | 2009-06-21 11:15:09 +1000 (Sun, 21 Jun 2009) | 1 line

Fix drawing of sharp s.
........
r41720 | lordhoto | 2009-06-21 11:15:24 +1000 (Sun, 21 Jun 2009) | 1 line

Moved CP850<->ISO-8859-1 conversion to Util.
........
r41721 | lordhoto | 2009-06-21 11:15:37 +1000 (Sun, 21 Jun 2009) | 1 line

Enable proper umlaut handling in kyra 1-3.
........
r41722 | lordhoto | 2009-06-21 11:15:47 +1000 (Sun, 21 Jun 2009) | 1 line

Fix umlauts for original interpreter saves.
........
r41723 | lordhoto | 2009-06-21 11:22:23 +1000 (Sun, 21 Jun 2009) | 1 line

Cleanup.
........
r41724 | dreammaster | 2009-06-21 15:13:29 +1000 (Sun, 21 Jun 2009) | 1 line

Bugfixes to pre-loading and handling of resources such as sound files
........
r41725 | dreammaster | 2009-06-21 21:42:45 +1000 (Sun, 21 Jun 2009) | 1 line

Changed .SPL (sound effect) loading to load the Adlib version of sound effects - sound effects now work
........
r41726 | dreammaster | 2009-06-21 21:53:11 +1000 (Sun, 21 Jun 2009) | 1 line

Minor fixes to the individual note playing code
........
r41727 | thebluegr | 2009-06-21 23:06:08 +1000 (Sun, 21 Jun 2009) | 1 line

Cleanup
........
r41729 | athrxx | 2009-06-22 02:59:51 +1000 (Mon, 22 Jun 2009) | 3 lines

LOL: - implemented audio menu
- menu settings now get saved
- remove white spaces
........
r41730 | lordhoto | 2009-06-22 05:00:50 +1000 (Mon, 22 Jun 2009) | 1 line

Cleanup: Change LoL code to use KYRA volume handling.
........
r41731 | lordhoto | 2009-06-22 05:01:04 +1000 (Mon, 22 Jun 2009) | 1 line

Cleanup: Change LoL specific config entries to use underscores instead of whitespaces.
........
r41732 | lordhoto | 2009-06-22 05:49:20 +1000 (Mon, 22 Jun 2009) | 1 line

Fix slider buttons in LoL (and some minor cleanup).
........
r41733 | lordhoto | 2009-06-22 06:10:45 +1000 (Mon, 22 Jun 2009) | 1 line

Cleanup.
........
r41734 | athrxx | 2009-06-22 06:40:31 +1000 (Mon, 22 Jun 2009) | 2 lines

LOL: - implemented support for 'floating cursors'
- prevent complete refresh for audio menu whenever a mouse button is pressed
........
r41735 | athrxx | 2009-06-22 07:05:06 +1000 (Mon, 22 Jun 2009) | 1 line

LOL: minor fix for floating cursors
........
r41736 | lordhoto | 2009-06-22 07:17:41 +1000 (Mon, 22 Jun 2009) | 1 line

Cleanup.
........
r41739 | lordhoto | 2009-06-22 12:34:35 +1000 (Mon, 22 Jun 2009) | 1 line

Start refactoring palette handling into new class 'Palette'.
........
r41740 | lordhoto | 2009-06-22 12:35:04 +1000 (Mon, 22 Jun 2009) | 1 line

Got rid of Screen::_currentPalette.
........
r41741 | lordhoto | 2009-06-22 12:35:45 +1000 (Mon, 22 Jun 2009) | 1 line

Changed Screen::getPalette to return a reference to a Palette object.
........
r41742 | lordhoto | 2009-06-22 12:36:16 +1000 (Mon, 22 Jun 2009) | 1 line

Add wrapper functionality for copying full palettes.
........
r41743 | lordhoto | 2009-06-22 12:36:54 +1000 (Mon, 22 Jun 2009) | 6 lines

- Changed the following Screen functions to take a reference to a Palette object:
-> setScreenPalette
-> fadePalette
-> getFadeParams
-> fadePalStep
- Fixed initialization of 256 color palettes
........
r41744 | lordhoto | 2009-06-22 12:37:20 +1000 (Mon, 22 Jun 2009) | 1 line

Changed Screen::loadBitmap and Movie::open to take an optional Palette pointer instead of an optional array pointer.
........
r41745 | lordhoto | 2009-06-22 12:37:41 +1000 (Mon, 22 Jun 2009) | 1 line

Changed Screen::loadPalette to take a reference to a Palette object instead of an array.
........
r41746 | lordhoto | 2009-06-22 12:37:57 +1000 (Mon, 22 Jun 2009) | 2 lines

- Fixed regression in Screen::fadeToBlack
- Fixed some palette regressions in Kyra1 Amiga (only the intro works currently)
........
r41747 | lordhoto | 2009-06-22 12:41:56 +1000 (Mon, 22 Jun 2009) | 1 line

Fix memory leak.
........
r41748 | dreammaster | 2009-06-22 16:17:50 +1000 (Mon, 22 Jun 2009) | 1 line

Implemented the Op_SetVolume method like the original, which simply set a dummy variable and never actually changed the volume
........
r41749 | dreammaster | 2009-06-22 16:35:08 +1000 (Mon, 22 Jun 2009) | 1 line

Added the dummy volume variable to the savegame format
........
r41750 | drmccoy | 2009-06-22 20:11:25 +1000 (Mon, 22 Jun 2009) | 1 line

Encapsulated access to Parse::_resultInt
........
r41751 | drmccoy | 2009-06-22 20:11:53 +1000 (Mon, 22 Jun 2009) | 1 line

Encapsulated access to _resultStr
........
r41752 | drmccoy | 2009-06-22 20:12:33 +1000 (Mon, 22 Jun 2009) | 1 line

Adding DataIO::existData()
........
r41753 | drmccoy | 2009-06-22 20:13:37 +1000 (Mon, 22 Jun 2009) | 1 line

Encapsulating script file access
........
r41754 | drmccoy | 2009-06-22 20:14:18 +1000 (Mon, 22 Jun 2009) | 1 line

Implemented a call stack
........
r41755 | drmccoy | 2009-06-22 20:14:49 +1000 (Mon, 22 Jun 2009) | 1 line

Removing debug output
........
r41756 | drmccoy | 2009-06-22 20:15:14 +1000 (Mon, 22 Jun 2009) | 1 line

Implemented loading TOTs from video file again
........
r41757 | drmccoy | 2009-06-22 20:15:52 +1000 (Mon, 22 Jun 2009) | 1 line

Giving CollisionArea a full-blown Script pointer instead the data pointer
........
r41758 | drmccoy | 2009-06-22 20:16:17 +1000 (Mon, 22 Jun 2009) | 1 line

Removing the now useless cuckoo function and shrink the call stack entries accordingly
........
r41759 | drmccoy | 2009-06-22 20:16:45 +1000 (Mon, 22 Jun 2009) | 1 line

Unwinding the call stack before unloading the script
........
r41760 | drmccoy | 2009-06-22 20:29:32 +1000 (Mon, 22 Jun 2009) | 1 line

Putting evalBoolResult() and evalExpr() into Script
........
r41761 | drmccoy | 2009-06-22 20:29:48 +1000 (Mon, 22 Jun 2009) | 1 line

Removing the Parse object from GobEngine
........
r41762 | drmccoy | 2009-06-22 20:30:09 +1000 (Mon, 22 Jun 2009) | 1 line

Pushing script.o down
........
r41763 | dreammaster | 2009-06-22 20:41:32 +1000 (Mon, 22 Jun 2009) | 1 line

Removed redundant variation of the routine to play sound effects
........
r41765 | drmccoy | 2009-06-22 21:53:46 +1000 (Mon, 22 Jun 2009) | 1 line

const correctness
........
r41766 | strangerke | 2009-06-22 22:03:58 +1000 (Mon, 22 Jun 2009) | 1 line

Include recently added script.h and script.cpp
........
r41768 | drmccoy | 2009-06-23 02:29:00 +1000 (Tue, 23 Jun 2009) | 1 line

Removing commented-out declarations
........
r41769 | drmccoy | 2009-06-23 02:29:16 +1000 (Tue, 23 Jun 2009) | 1 line

Adding some comments
........
r41770 | drmccoy | 2009-06-23 02:29:31 +1000 (Tue, 23 Jun 2009) | 1 line

Don't assert on pop when no script is loaded
........
r41771 | drmccoy | 2009-06-23 02:29:45 +1000 (Tue, 23 Jun 2009) | 1 line

More signess consistency on the reading and seeking methods
........
r41772 | drmccoy | 2009-06-23 02:30:06 +1000 (Tue, 23 Jun 2009) | 1 line

Renaming 'Parse' to 'Expression'
........
r41773 | drmccoy | 2009-06-23 02:30:35 +1000 (Tue, 23 Jun 2009) | 1 line

Renaming parse.h and parse.cpp to expression.h and expression.cpp
........
r41774 | drmccoy | 2009-06-23 02:30:51 +1000 (Tue, 23 Jun 2009) | 1 line

Renaming kDebugParser to kDebugExpression
........
r41777 | lordhoto | 2009-06-23 05:46:08 +1000 (Tue, 23 Jun 2009) | 1 line

Fix palette regression in Lands of Lore.
........
r41778 | strangerke | 2009-06-23 05:56:06 +1000 (Tue, 23 Jun 2009) | 1 line

rename parse.h and .cpp to expression.h and .cpp
........
r41781 | drmccoy | 2009-06-23 06:27:47 +1000 (Tue, 23 Jun 2009) | 1 line

Added stream-reading loading wrappers to MDYPlayer and added a workaround to fix TBR reading for the moment
........
r41782 | drmccoy | 2009-06-23 06:51:34 +1000 (Tue, 23 Jun 2009) | 1 line

Properly guarding Script::getOffset() and adding a reverse operation
........
r41783 | drmccoy | 2009-06-23 06:51:48 +1000 (Tue, 23 Jun 2009) | 1 line

Removing trailing spaces
........
r41784 | drmccoy | 2009-06-23 06:52:08 +1000 (Tue, 23 Jun 2009) | 1 line

Removing trailing tabs
........
r41785 | fingolfin | 2009-06-23 07:48:47 +1000 (Tue, 23 Jun 2009) | 1 line

Patch #2810483 (SCI: Convert gfx subsystem headers to Doxygen format), with @brief removed
........
r41786 | fingolfin | 2009-06-23 09:09:28 +1000 (Tue, 23 Jun 2009) | 1 line

Fixed NDS compilation when using older devkitpro versions (I accidentally broke that some time ago)
........
r41787 | dreammaster | 2009-06-23 11:01:16 +1000 (Tue, 23 Jun 2009) | 1 line

Bugfixes to keep sound effects to channel #4 like the original (it ignores the channel parameter to the given library routine)
........
r41788 | drmccoy | 2009-06-23 11:19:03 +1000 (Tue, 23 Jun 2009) | 1 line

Added Script methods to get the TOT major and minor version
........
r41789 | drmccoy | 2009-06-23 11:19:21 +1000 (Tue, 23 Jun 2009) | 1 line

Added Script methods to query commun file handling
........
r41790 | drmccoy | 2009-06-23 11:19:37 +1000 (Tue, 23 Jun 2009) | 1 line

Const correctness
........
r41791 | drmccoy | 2009-06-23 11:20:05 +1000 (Tue, 23 Jun 2009) | 1 line

Added a method to query the number of variables needed by a Script
........
r41792 | drmccoy | 2009-06-23 11:20:21 +1000 (Tue, 23 Jun 2009) | 1 line

Added Script::getTextsOffset()
........
r41793 | drmccoy | 2009-06-23 11:21:06 +1000 (Tue, 23 Jun 2009) | 1 line

Added Script::getResourcesOffset()
........
r41794 | drmccoy | 2009-06-23 11:21:51 +1000 (Tue, 23 Jun 2009) | 1 line

Added Script::getAnimDataSize()
........
r41795 | drmccoy | 2009-06-23 11:22:30 +1000 (Tue, 23 Jun 2009) | 1 line

Added Script::getStartOffset()
........
r41796 | drmccoy | 2009-06-23 11:22:51 +1000 (Tue, 23 Jun 2009) | 1 line

Added Script::getCenterOffset()
........
r41797 | drmccoy | 2009-06-23 11:23:14 +1000 (Tue, 23 Jun 2009) | 1 line

Replacing the 2 offset functions by a generic Script::getFunctionOffset()
........
r41798 | drmccoy | 2009-06-23 11:23:31 +1000 (Tue, 23 Jun 2009) | 1 line

Stopping the seek() going into the header
........
r41799 | drmccoy | 2009-06-23 11:23:51 +1000 (Tue, 23 Jun 2009) | 1 line

Also loading TOT properties when the TOT is found in a LOM
........
r41803 | drmccoy | 2009-06-23 18:51:55 +1000 (Tue, 23 Jun 2009) | 1 line

Changing the TBR FIXME into a warning in setVoice()
........
r41806 | Hkz | 2009-06-23 23:24:46 +1000 (Tue, 23 Jun 2009) | 1 line

tinsel: added some comments to psx palette mapper
........
r41809 | drmccoy | 2009-06-24 01:06:38 +1000 (Wed, 24 Jun 2009) | 1 line

Added German Fascination (3 disk version), as supplied by windlepoons in bug report #2809247
........
r41810 | drmccoy | 2009-06-24 01:08:56 +1000 (Wed, 24 Jun 2009) | 1 line

Added Hungarian versions of gob1-gob3 as supplied by goodoldgeorg in bug report #2810082
........
r41811 | drmccoy | 2009-06-24 03:37:18 +1000 (Wed, 24 Jun 2009) | 1 line

Binary, not logical ORing the GUIO flags (Strangerke, you fscked up there :P)
........
r41812 | drmccoy | 2009-06-24 03:55:09 +1000 (Wed, 24 Jun 2009) | 1 line

Added support for Hungarian
........
r41813 | drmccoy | 2009-06-24 03:55:27 +1000 (Wed, 24 Jun 2009) | 1 line

Proper support for Hungarian versions
........
r41821 | drmccoy | 2009-06-24 09:55:19 +1000 (Wed, 24 Jun 2009) | 1 line

Putting basic TOT handling into its own class
........
r41822 | drmccoy | 2009-06-24 09:55:35 +1000 (Wed, 24 Jun 2009) | 1 line

Putting TOT filename generation and LOM checking into TOTFile
........
r41823 | drmccoy | 2009-06-24 09:55:48 +1000 (Wed, 24 Jun 2009) | 1 line

Added methods to get the file base from a filename
........
r41827 | lordhoto | 2009-06-25 03:01:01 +1000 (Thu, 25 Jun 2009) | 1 line

Silence unsued variables warnings.
........
r41833 | waltervn | 2009-06-25 05:12:45 +1000 (Thu, 25 Jun 2009) | 2 lines

SCI: Partial support for dual-language games.
........
r41834 | waltervn | 2009-06-25 05:26:06 +1000 (Thu, 25 Jun 2009) | 2 lines

SCI: Fix regression in r41833.
........
r41836 | drmccoy | 2009-06-25 07:47:54 +1000 (Thu, 25 Jun 2009) | 1 line

Clarifying some warnings
........
r41837 | drmccoy | 2009-06-25 07:48:13 +1000 (Thu, 25 Jun 2009) | 1 line

Checking for the file's existence in DataIO::getDataStream()
........
r41838 | drmccoy | 2009-06-25 07:48:27 +1000 (Thu, 25 Jun 2009) | 1 line

Added the scriptEnd property
........
r41839 | drmccoy | 2009-06-25 07:49:37 +1000 (Thu, 25 Jun 2009) | 1 line

Wrapping resources (out of TOT, EXT, IM? and EX? files) loading into its own class
........
r41841 | mthreepwood | 2009-06-25 10:14:07 +1000 (Thu, 25 Jun 2009) | 1 line

After discussing with waltervn, committing my fix for the King's Quest I Demo (original from Patch #2795916). I'm also fixing the full game as well :)
........
r41844 | lordhoto | 2009-06-25 11:29:14 +1000 (Thu, 25 Jun 2009) | 1 line

Initial support for Kyrandia 1 PC-9801 Japanese 16 color.
........
r41845 | lordhoto | 2009-06-25 11:29:27 +1000 (Thu, 25 Jun 2009) | 1 line

Implement properly colored mouse cursors in 16 color version of Kyrandia 1.
........
r41846 | lordhoto | 2009-06-25 11:29:41 +1000 (Thu, 25 Jun 2009) | 1 line

Implement palette fading for 16 color version of Kyrandia 1.
........
r41847 | lordhoto | 2009-06-25 11:29:55 +1000 (Thu, 25 Jun 2009) | 1 line

Add config option for Kyra1 16 color, it'll only use dithering when '16_color' is set to true.
........
r41848 | lordhoto | 2009-06-25 11:30:12 +1000 (Thu, 25 Jun 2009) | 1 line

Strip trailing whitespaces and tabs.
........
r41850 | lordhoto | 2009-06-25 12:38:19 +1000 (Thu, 25 Jun 2009) | 1 line

Readd PC98 palette loading for LoL 16 color.
........
r41851 | lordhoto | 2009-06-25 12:39:00 +1000 (Thu, 25 Jun 2009) | 1 line

Implement proper VGA (a color component in [0, 63]) to our palette format (color component in [0, 255]) conversion.
........
r41852 | lordhoto | 2009-06-25 12:39:23 +1000 (Thu, 25 Jun 2009) | 1 line

Implement proper AMIGA to VGA color conversion.
........
r41853 | lordhoto | 2009-06-25 12:41:39 +1000 (Thu, 25 Jun 2009) | 1 line

Mention Kyra 1 PC98 16 color dithering support.
........
r41858 | strangerke | 2009-06-25 20:03:23 +1000 (Thu, 25 Jun 2009) | 1 line

Fix compilation issue for MSVC
........
r41859 | drmccoy | 2009-06-25 20:54:35 +1000 (Thu, 25 Jun 2009) | 1 line

Plugging some memory leaks
........
r41860 | drmccoy | 2009-06-25 20:55:01 +1000 (Thu, 25 Jun 2009) | 1 line

Giving the 'backup' arrays their own class, Environments, and really plugging all related leaks
........
r41867 | lordhoto | 2009-06-26 01:22:08 +1000 (Fri, 26 Jun 2009) | 1 line

Implement proper color index conversion for Lands of Lore PC98. (The intro and menu screen work fine now)
........
r41868 | drmccoy | 2009-06-26 01:29:19 +1000 (Fri, 26 Jun 2009) | 1 line

Oops, used git commit --amend wrong, apparently. /This/ is the real Environments change I wanted to push
........
r41869 | drmccoy | 2009-06-26 01:37:46 +1000 (Fri, 26 Jun 2009) | 1 line

Adding more version entries for a Gob1 Win version, thanks to Hkz
........
r41870 | lordhoto | 2009-06-26 01:53:09 +1000 (Fri, 26 Jun 2009) | 1 line

Fix japanese font colors in Kyra 1 PC98 16 color.
........
r41871 | lordhoto | 2009-06-26 01:53:21 +1000 (Fri, 26 Jun 2009) | 1 line

Cleanup.
........
r41875 | drmccoy | 2009-06-26 04:53:36 +1000 (Fri, 26 Jun 2009) | 1 line

Making _numDataChunks unsigned
........
r41876 | lordhoto | 2009-06-26 05:52:49 +1000 (Fri, 26 Jun 2009) | 1 line

Cleanup.
........
r41877 | lordhoto | 2009-06-26 05:53:55 +1000 (Fri, 26 Jun 2009) | 1 line

Use Screen::loadPalette instead of Resource::loadFileToBuf.
........
r41878 | lordhoto | 2009-06-26 05:54:41 +1000 (Fri, 26 Jun 2009) | 1 line

Replace yet another palette from file loading with Screen::loadPalette.
........
r41879 | lordhoto | 2009-06-26 05:55:25 +1000 (Fri, 26 Jun 2009) | 1 line

Cleanup VQA player a bit.
........
r41880 | lordhoto | 2009-06-26 05:56:02 +1000 (Fri, 26 Jun 2009) | 1 line

Add a const 'getData' access method to Palette.
........
r41881 | lordhoto | 2009-06-26 05:57:06 +1000 (Fri, 26 Jun 2009) | 1 line

Change Screen_v2::generateOverlay to take a const Palette reference instead of a pointer.
........
r41882 | lordhoto | 2009-06-26 05:57:35 +1000 (Fri, 26 Jun 2009) | 1 line

Change Screen_LoL::generateGrayOverlay to use a Palette object internally.
........
r41883 | lordhoto | 2009-06-26 05:58:17 +1000 (Fri, 26 Jun 2009) | 1 line

Change Screen_HoF::generateGrayOverlay to use a Palette object internally.
........
r41884 | lordhoto | 2009-06-26 05:59:06 +1000 (Fri, 26 Jun 2009) | 1 line

Change Screen_LoL genereta overlay functionallity to accept a Palette object as source.
........
r41885 | lordhoto | 2009-06-26 05:59:56 +1000 (Fri, 26 Jun 2009) | 1 line

Change Screen_HoF::generateGrayOverlay to accept a Palette object as source.
........
r41886 | lordhoto | 2009-06-26 06:00:52 +1000 (Fri, 26 Jun 2009) | 1 line

Change Screen_v2::findLeastDifferentColor to take a Palette object as source.
........
r41887 | athrxx | 2009-06-26 07:17:50 +1000 (Fri, 26 Jun 2009) | 2 lines

KYRA/LOL: - support speech/text settings in LOL intro
- fix possible pc98 music issue
........
r41889 | lordhoto | 2009-06-26 09:03:57 +1000 (Fri, 26 Jun 2009) | 1 line

Implement difference in PC98 version. (This actually breaks the text colors in the LoL intro for now...)
........
r41890 | lordhoto | 2009-06-26 09:04:08 +1000 (Fri, 26 Jun 2009) | 1 line

Cleanup palette setup.
........
r41891 | lordhoto | 2009-06-26 09:04:21 +1000 (Fri, 26 Jun 2009) | 1 line

Store palettes in a Common::Array instead of a fixed size array.
........
r41892 | lordhoto | 2009-06-26 09:04:32 +1000 (Fri, 26 Jun 2009) | 1 line

Only initialize palettes with 16 colors in (real) 16 color games.
........
r41893 | lordhoto | 2009-06-26 09:04:43 +1000 (Fri, 26 Jun 2009) | 1 line

For now always enable voices in PC98 version of LoL.
........
r41895 | lordhoto | 2009-06-26 10:11:56 +1000 (Fri, 26 Jun 2009) | 1 line

Implement PC98 text mode color palette.
........
r41896 | lordhoto | 2009-06-26 10:12:08 +1000 (Fri, 26 Jun 2009) | 1 line

Implement palette difference in Kanji drawing code for PC98.
........
r41897 | lordhoto | 2009-06-26 10:12:19 +1000 (Fri, 26 Jun 2009) | 1 line

Implement difference in TIM's displayText code for PC98, this should fix the font color in the intro.
........
r41902 | athrxx | 2009-06-27 03:58:27 +1000 (Sat, 27 Jun 2009) | 1 line

KYRA/LOL: fixed minor bug by adding reset() call to pc98 audio driver destructor
........
r41903 | drmccoy | 2009-06-27 05:03:37 +1000 (Sat, 27 Jun 2009) | 1 line

Fixing text strings embedded in the TOT
........
r41915 | buddha_ | 2009-06-27 22:26:26 +1000 (Sat, 27 Jun 2009) | 11 lines

Name Operation Stealth's global variables 251 and 252 and init them in main loop.

These are used as a sort of a backup for the
mouse position (x, y) variables 249 and 250.

Future Wars's VAR_MOUSE_Y_MODE and Operation Stealth's
VAR_MOUSE_X_POS_2ND (251) clash and that's possibly
why executePlayerInput currently works incorrectly
with Operation Stealth. More reverse engineering
is needed...
........
r41916 | athrxx | 2009-06-27 22:36:12 +1000 (Sat, 27 Jun 2009) | 1 line

LOL: cleanup
........
r41917 | athrxx | 2009-06-27 23:15:47 +1000 (Sat, 27 Jun 2009) | 1 line

LOL: fixed regression
........
r41922 | athrxx | 2009-06-28 02:48:47 +1000 (Sun, 28 Jun 2009) | 1 line

LOL: add workaround to fix map text display when the language is set to French
........
r41929 | joostp | 2009-06-29 03:51:53 +1000 (Mon, 29 Jun 2009) | 2 lines

change link order in .spec file to produce working binaries when building using the configure script
........
r41930 | fingolfin | 2009-06-29 05:56:58 +1000 (Mon, 29 Jun 2009) | 1 line

Silenced the reamining warnings reported in patch #2684986 (gcc warnings with -DFORTIFY_SOURCE=2 -fstack-protector)
........
r41931 | fingolfin | 2009-06-29 05:57:27 +1000 (Mon, 29 Jun 2009) | 1 line

GUI: Replaced ThemeParser::_drawFunction hashmap by a static function getDrawingFunctionCallback which maps strings to draw funcs
........
r41932 | fingolfin | 2009-06-29 05:58:11 +1000 (Mon, 29 Jun 2009) | 4 lines

Changed OSystem::setWindowCaption to expect ISO LATIN 1 encoded input;
also intentionally broke WinCE and Symbian ports (in an obvious way that
can be undo by commenting out some text) -- hopefully this will get the
maintainers' attention during the next release cycle, unlike my emails
........
r41933 | fingolfin | 2009-06-29 05:58:30 +1000 (Mon, 29 Jun 2009) | 1 line

PS2: Don't overload fillScreen with a dummy, just use the inherited version
........
r41934 | fingolfin | 2009-06-29 07:04:24 +1000 (Mon, 29 Jun 2009) | 1 line

Fix PSP port
........
r41938 | eriktorbjorn | 2009-06-29 08:20:28 +1000 (Mon, 29 Jun 2009) | 2 lines

For consistency, use upper-case letter in hex constant.
........
r41940 | lordhoto | 2009-06-29 22:33:47 +1000 (Mon, 29 Jun 2009) | 1 line

Indentation fix.
........
r41941 | lordhoto | 2009-06-30 02:05:50 +1000 (Tue, 30 Jun 2009) | 1 line

Modified Palette::load*Palette definition.
........
r41942 | lordhoto | 2009-06-30 02:06:02 +1000 (Tue, 30 Jun 2009) | 1 line

Change LoLEngine::processMagicIce to use Palette objects internally.
........
r41943 | lordhoto | 2009-06-30 02:06:18 +1000 (Tue, 30 Jun 2009) | 1 line

Changed LoLEngine::setPaletteBrightness to take an Palette object.
........
r41944 | lordhoto | 2009-06-30 02:06:31 +1000 (Tue, 30 Jun 2009) | 1 line

Change LoLEngine::generateBrightnessPalette to take Palette objects as parameters.
........
r41945 | lordhoto | 2009-06-30 02:07:46 +1000 (Tue, 30 Jun 2009) | 1 line

Chang Palette parameter of LolEngine::setPaletteBrightness to be const.
........
r41946 | lordhoto | 2009-06-30 02:08:00 +1000 (Tue, 30 Jun 2009) | 1 line

Change raw palette read to Screen::loadPalette call.
........
r41947 | lordhoto | 2009-06-30 02:08:16 +1000 (Tue, 30 Jun 2009) | 1 line

Change Screen_LoL::loadSpecialColors to take an Palette object as parameter.
........
r41948 | lordhoto | 2009-06-30 02:08:28 +1000 (Tue, 30 Jun 2009) | 1 line

Change LoLEngine::generateFlashPalette to take Palette objects as parameters.
........
r41949 | lordhoto | 2009-06-30 02:08:39 +1000 (Tue, 30 Jun 2009) | 1 line

Cleanup KyraEngine_MR::updateCharPal.
........
r41950 | lordhoto | 2009-06-30 02:49:14 +1000 (Tue, 30 Jun 2009) | 1 line

Cleanup GUI_HoF::setupPalette.
........
r41951 | lordhoto | 2009-06-30 02:49:26 +1000 (Tue, 30 Jun 2009) | 1 line

Replaced some raw palette loads.
........
r41952 | lordhoto | 2009-06-30 02:49:38 +1000 (Tue, 30 Jun 2009) | 1 line

Add a 'fill' method to Palette.
........
r41953 | lordhoto | 2009-06-30 02:49:53 +1000 (Tue, 30 Jun 2009) | 1 line

Adapted various code parts to use Palette::fill.
........
r41954 | lordhoto | 2009-06-30 03:05:49 +1000 (Tue, 30 Jun 2009) | 1 line

Removed some obsolete TODOs.
........
r41955 | lordhoto | 2009-06-30 03:06:00 +1000 (Tue, 30 Jun 2009) | 1 line

Update the screen animations while dropping items in Hand of Fate.
........
r41956 | lordhoto | 2009-06-30 03:06:17 +1000 (Tue, 30 Jun 2009) | 1 line

Removed more obsolete TODO messages.
........
r41957 | lordhoto | 2009-06-30 03:26:43 +1000 (Tue, 30 Jun 2009) | 1 line

Resolved some TODOs in Kyra3 code.
........
r41958 | lordhoto | 2009-06-30 03:26:56 +1000 (Tue, 30 Jun 2009) | 1 line

Removed obsolete TODOs in HoF code.
........
r41959 | lordhoto | 2009-06-30 04:00:18 +1000 (Tue, 30 Jun 2009) | 3 lines

- Get rid of code duplication for mouse cursor setup
- Fix mouse cursor colors in LoL PC98
(This commit might introduce regressions, since it changes the key color the mouse cursor uses)
........
r41960 | lordhoto | 2009-06-30 04:49:17 +1000 (Tue, 30 Jun 2009) | 1 line

Fix kyra2/kyra3 mouse cursor related regressions, introduced with r41959.
........
r41961 | lordhoto | 2009-06-30 04:49:28 +1000 (Tue, 30 Jun 2009) | 1 line

Fix palette regression caused by r41949.
........
r41962 | lordhoto | 2009-06-30 05:02:15 +1000 (Tue, 30 Jun 2009) | 1 line

Fix bug in drawShape, which caused invisibility in Kyra1 to be displayed incorrectly.
........
r41963 | lordhoto | 2009-06-30 06:16:59 +1000 (Tue, 30 Jun 2009) | 1 line

Fix LoL cursor in DOS version.
........
r41964 | lordhoto | 2009-06-30 06:17:10 +1000 (Tue, 30 Jun 2009) | 1 line

Fix bug in drawShape.
........
r41967 | lordhoto | 2009-06-30 09:14:35 +1000 (Tue, 30 Jun 2009) | 1 line

Fix invisible mouse cursor, when picking up items.
........
r41968 | lordhoto | 2009-06-30 09:23:29 +1000 (Tue, 30 Jun 2009) | 1 line

Add some more explanation to Graphics::CursorManager::showMouse and OSystem::showMouse.
........
r41975 | dreammaster | 2009-06-30 20:36:50 +1000 (Tue, 30 Jun 2009) | 1 line

Made the music/sfx volume settings actually affect the in-game music/sfx volume
........
r42007 | anotherguest | 2009-07-02 06:02:33 +1000 (Thu, 02 Jul 2009) | 1 line

Move action inits to engineInit and engineDone callbacks.
........
r42008 | anotherguest | 2009-07-02 06:11:44 +1000 (Thu, 02 Jul 2009) | 1 line

Use MIN with correct template parameter.
........
r42009 | fingolfin | 2009-07-02 06:51:04 +1000 (Thu, 02 Jul 2009) | 4 lines

- Added GCC_PRINTF attribute to several funcs where it makes sense
- change some constants from double to float, to avoid 'loss of precision due to implicit conversion' warnings
- removed duplicate prototypes for some funcs
- fixed some 'increases required alignment of target type' warnings
........
r42010 | fingolfin | 2009-07-02 06:51:34 +1000 (Thu, 02 Jul 2009) | 1 line

Fixed some more warnings observed on buildbot
........
r42011 | fingolfin | 2009-07-02 06:51:47 +1000 (Thu, 02 Jul 2009) | 1 line

Flag what looks like a bug in the CMS player code -- somebody should verify and fix this properly
........
r42012 | fingolfin | 2009-07-02 06:53:47 +1000 (Thu, 02 Jul 2009) | 1 line

oops
........
r42020 | drmccoy | 2009-07-02 22:15:04 +1000 (Thu, 02 Jul 2009) | 1 line

Added support for compressed sample files (patch #2815426 by m_kiewitz)
........
r42038 | fingolfin | 2009-07-03 07:16:36 +1000 (Fri, 03 Jul 2009) | 1 line

Enhanced the quicksearch box in the launcher to match words in the search string individually
........
r42039 | fingolfin | 2009-07-03 07:37:13 +1000 (Fri, 03 Jul 2009) | 1 line

fixed indention (and trigger a reconfigure in buildbot)
........
r42040 | fingolfin | 2009-07-03 08:05:42 +1000 (Fri, 03 Jul 2009) | 1 line

cleanup
........
r42041 | fingolfin | 2009-07-03 08:21:33 +1000 (Fri, 03 Jul 2009) | 1 line

Added -Wmissing-format-attribute to build system
........
r42043 | thebluegr | 2009-07-03 09:16:40 +1000 (Fri, 03 Jul 2009) | 1 line

Moved all the debug state variables in a separate struct and re-enabled several places where they're used
........
r42044 | thebluegr | 2009-07-03 09:58:05 +1000 (Fri, 03 Jul 2009) | 1 line

Moved some more debug state related variables in the DebugState struct
........
r42047 | dreammaster | 2009-07-03 16:19:20 +1000 (Fri, 03 Jul 2009) | 1 line

Bugfix for loading savegames where the active resource file database isn't completely filled
........
r42048 | dreammaster | 2009-07-03 16:21:04 +1000 (Fri, 03 Jul 2009) | 1 line

Bugfix for displaying text messages when an auto tracking (cut-scene) changes to a user wait
........
r42049 | thebluegr | 2009-07-03 17:06:48 +1000 (Fri, 03 Jul 2009) | 1 line

Applied patch #2815937 - 'SCI: ReadString fix to repair LSL5 password'. This fixes the problems with the LSL5 password for good
........
r42050 | thebluegr | 2009-07-03 19:01:51 +1000 (Fri, 03 Jul 2009) | 1 line

Simplified the kernel name loading code: Merged the default SCI0 and SCI1 kernel name tables in one table. vocab.999 is only used in SCI0 and SCI01 games if it exists as an override to the default kernel name table  (which works with SCI0/SCI01 demos with no vocab.999, like KQ1 and xmas1998). Removed GF_SCI0_SCI1VOCAB.
........
r42054 | fingolfin | 2009-07-03 20:40:49 +1000 (Fri, 03 Jul 2009) | 1 line

Added more GCC_PRINTF attributes, and fixed resulting warnings in format strings
........
r42055 | fingolfin | 2009-07-03 20:41:03 +1000 (Fri, 03 Jul 2009) | 1 line

SCI: Fixed warning
........
r42056 | fingolfin | 2009-07-03 21:05:59 +1000 (Fri, 03 Jul 2009) | 1 line

If NDEBUG is #defined, then assert does nothing, leading to warnings about 'old_size' not being used -> fix that
........
r42060 | thebluegr | 2009-07-04 00:18:20 +1000 (Sat, 04 Jul 2009) | 1 line

Replaced all calls for manipulating the mouse cursor to be made to the CursorManager instead of directly to the graphics backend
........
r42062 | thebluegr | 2009-07-04 00:22:50 +1000 (Sat, 04 Jul 2009) | 2 lines

- Pushed debugstate into debug.h
- When an error occurs, manipulate the execution stack before error() opens the console inside getDebugger(), like FreeSCI did. Added another method for obtaining the SCI console for use by the engine itself.
........
r42079 | thebluegr | 2009-07-04 07:59:07 +1000 (Sat, 04 Jul 2009) | 1 line

Replaced script_error and CORE_ERROR with error()
........
r42081 | thebluegr | 2009-07-04 09:37:08 +1000 (Sat, 04 Jul 2009) | 1 line

SCI0 games using older graphics functions are automatically detected now, from the presence of the 'TimesSin' and 'SinMult' kernel functions. Removed the GF_SCI0_OLDGFXFUNCS game flag
........

svn-id: r42085
"
"230e7a8d2cf422d4956b089f779632de6cecf171","2009-07-04 11:24:09+00:00","Newer DoSound() semantics are now detected automatically, by the existence of the 'setVol' selector. Removed game flag GF_SCI1_NEWDOSOUND

svn-id: r42087
"
"8726f0198672c26dfb4f3944bf470a2150d8dc01","2009-07-04 11:33:51+00:00","Removed silly FIXME (mixup between debug and engine debug levels)

svn-id: r42088
"
"49ef8ae5a4a4b4f08ac5a8d6f059bb4f7dd43c3f","2009-07-04 15:22:42+00:00","Added a new console command, 'selector', which attempts to find a selector by name

svn-id: r42093
"
"fddc5915f7f6ff8feb37d356666d32d3162a16b0","2009-07-04 15:39:31+00:00","- Changed some comments to DOxygen style

svn-id: r42094
"
"c5522b37660644666c2842045cf64f1254cc3e17","2009-07-04 15:45:04+00:00","- Kernel function names are no longer loaded from vocab.999, but are constructed from the hardcoded function table, depending on the SCI version used
- SCI0 games using older graphics functions are now detected by the presence of the 'curAngle' selector
- SCI0 games using a SCI1 table (like KQ1 demo version and full version) are detected by the presence of the 'sightAngle' selector (as no SCI0 game seems to have it)

svn-id: r42095
"
"b093511239401c5d64d6b21c0b875d5be6e5f239","2009-07-04 16:30:20+00:00","- Merged the 'early' and 'late' SCI1 versions - these are functionally equivalent, and the code that does the version check is unreliable (e.g. it sets SQ1 VGA to SCI1 'late' and EcoQuest 1 to SCI1 'early')
- Cleanup of the vocabulary setting functions
- Cleanup of the cursor manipulation code

svn-id: r42097
"
"b0c908e3493cd9673d92b9752006d373672ffb85","2009-07-04 16:36:56+00:00","Merged SCI1 versions in one more file

svn-id: r42098
"
"177891a0c1b0a6b03e03b2a81520a1f51ff3ee00","2009-07-04 17:39:43+00:00","Cursors without a palette are now initialized correctly (from patch #2816652). Fixes the cursor transparent color in QFG3

svn-id: r42099
"
"14319442945f67652a9ad757edc3cf1b0c581df2","2009-07-04 18:54:06+00:00","Add GCC_PRINTF parameter.

svn-id: r42104
"
"59aa80b2d27639722d0d38f123bae80ed02ac6b9","2009-07-04 18:54:27+00:00","Fix mismatching format arguments.

svn-id: r42105
"
"eeb5ba9d507014a4429adc419c4c7f019f45af85","2009-07-04 18:54:43+00:00","Kyra1 PC-98 never offered English as language settings, thus remove it. (The CD version *does* supply English files, but those will work as FM-Towns version, so this causes no drawback for the user and is faithful to the original)

svn-id: r42106
"
"c48f71edf49aefbcba601a8b931d8339279d227f","2009-07-04 19:04:39+00:00","After discussing with Max, disable -Wmissing-format-attribute again. Also added a comment explaining why it is disabled.

svn-id: r42107
"
"9255bfc9074b65226dc4d5c012e2a968051572a9","2009-07-04 21:18:20+00:00","KYRA: fix minor bug in Screen::drawShape()

svn-id: r42110
"
"f907dc7fc72594e00b48c76629b40229e76657cb","2009-07-04 23:52:24+00:00","When morphing a TeeSongIterator, transfer death listeners to remaining child

svn-id: r42112
"
"eba5780fc062d26ba2d70d3bc438265a43ef5411","2009-07-05 01:16:53+00:00","When creating a CleanupSongIterator, transfer death listeners to it

svn-id: r42113
"
"48d164a498d188793374921e572aac15f13366c0","2009-07-05 07:21:17+00:00","Bugfix for word-wrapping of text, which sometimes failed for strings with special characters

svn-id: r42115
"
"6d3b2ec3afdb5b137f87b782e5b7f363ea2f1849","2009-07-05 09:34:54+00:00","- Refactorized Groovie::MusicPlayer to make it extensible
- Added an empty MusicPlayerMac to let the Macintosh version of The 7th Guest start

svn-id: r42116
"
"6cb5106a0b1b5f2c4d31dff321a08b134af82d1f","2009-07-05 10:34:43+00:00","Removed validity check for atoi, which prevented console commands from interacting with resources with id 0

svn-id: r42117
"
"5c60d94725764c278aa463b8c206abb796406da9","2009-07-05 11:08:53+00:00","SCI1 games with absolute parameters to lofs instructions are automatically detected now. Removed the GF_SCI1_LOFSABSOLUTE game flag

svn-id: r42118
"
"d2c2386c6ad70cb1e7edd40b1c007c5f863be99c","2009-07-05 11:26:23+00:00","Adding an enum MouseButtons

svn-id: r42119
"
"704895b35ff365525e894f8caf92c4383d446209","2009-07-05 11:26:42+00:00","Commenting prepareStr a bit and renaming it to cleanupStr

svn-id: r42120
"
"e861fab808897b8ec10a03930d94a079f1c7f1bb","2009-07-05 11:27:11+00:00","Added a Key and ShortKey enum

svn-id: r42121
"
"835dea71ceba85fb5c0fcdba7162cb9d92f77874","2009-07-05 11:27:26+00:00","Added a skipBlock() method

svn-id: r42122
"
"18550c1314eb6a47651cd9dbe8b9be28b937bcc9","2009-07-05 11:27:54+00:00","Moving the 'Collision' stuff to Hotspots in hotspots.cpp/.h

svn-id: r42123
"
"86f0669c93c7fa3d8887820470e075b20abe1a71","2009-07-05 11:28:09+00:00","Wrapping the block end marker checks into Hotspots::Hotspot::isEnd()

svn-id: r42124
"
"bc4f27c6b6c5a7cdf6ecc088ecf39f8f0546d976","2009-07-05 11:28:25+00:00","Removing the now empty Game_Fascination class

svn-id: r42125
"
"3b9add8330f2498ba3ea49de5b745f183080c880","2009-07-05 11:28:38+00:00","Fixing indent

svn-id: r42126
"
"4e70129d6033f2d9e4c7ec3d6806de66a61ad5c1","2009-07-05 11:28:57+00:00","Merging Game_v1's and Game_v2's prepareStart()

svn-id: r42127
"
"7be3530ffbc0485d56564e8ff015b4979d90b7ad","2009-07-05 11:29:13+00:00","Merging Game's and Game_v6's totSub()

svn-id: r42128
"
"14172febf717702421332dc599e4970a578336cb","2009-07-05 11:29:30+00:00","Merging playTot()

svn-id: r42129
"
"7e11c18fa2dfa8d4b6d6916b02af84043151a6d2","2009-07-05 11:29:54+00:00","Putting the Urban noCD check into Init_v6::initGame()

svn-id: r42130
"
"7e7c86a33747df93a4d88c6e6984e003a79726d1","2009-07-05 11:30:14+00:00","Removing the now unneeded Game_v* classes

svn-id: r42131
"
"c31d1b3180903405058d274dd6a2cc984a64ed1e","2009-07-05 11:49:05+00:00","- Fixed feature auto-detection for Conquests of Camelot
- Auto-detected features are now printed in the console (to ease debugging)

svn-id: r42132
"
"0b4e5c43d3821b803a4bf9b1699f567e860dfb68","2009-07-05 11:58:42+00:00","Updated the MSVC project files of the gob engine

svn-id: r42134
"
"daaba72677cb12fe9ce3345505dbbcccd2437341","2009-07-05 12:52:14+00:00","Adding a workaround for an invalid expression in Gob1 EGA

svn-id: r42135
"
"d424bee608ea2c1adc5720f081c9e221b2969e26","2009-07-05 13:07:11+00:00","Merged the two SCI1 versions in one more file

svn-id: r42136
"
"4956052ca4d0d9e6fa0d50d3ceaaf442dae5d3aa","2009-07-05 14:11:54+00:00","Got rid of HACK, which was used to setup new cursor on theme change.

svn-id: r42137
"
"c353e8de1fb1afae67fdc69f06db4d399caa2ed5","2009-07-05 14:12:04+00:00","Removed pushing of EVENT_SCREEN_CHANGED on theme load. This event should only be pushed by the backend.

svn-id: r42138
"
"415d0c5b036a9b012c61972e7220e0f4df72db56","2009-07-05 14:57:03+00:00","Refresh the screen if pollEvent() is called without updateScreen() being called for a long time.

svn-id: r42139
"
"501df3adf8c926695707fb3c62487bffdf2cde07","2009-07-05 14:58:22+00:00","LOL: - reduce code duplication

svn-id: r42140
"
"b43664e36810617ac02836d6ea9f50e54787c76a","2009-07-05 16:29:17+00:00","LOL: cleanup

svn-id: r42141
"
"dbdce9616c7c1a38d424dd2d7f1566d28f7a1147","2009-07-05 19:56:03+00:00","Encapsulating hotspot state reading

svn-id: r42142
"
"a7ab6c5e92ccf774930846144cc5a272d7ce1542","2009-07-05 19:56:23+00:00","Correcting an input related mistake

svn-id: r42143
"
"aeb020602a6f89a5cbc5af66ded393fe8da61212","2009-07-05 19:56:40+00:00","More state-related encapsulation

svn-id: r42144
"
"c4dc61edb54c244b4df5c9f1503cb983e2021030","2009-07-05 19:56:54+00:00","Split off Hotspots::evaluateNew()

svn-id: r42145
"
"9f0245094b8eb2ba5626cf96498ee360a3366f27","2009-07-05 19:57:08+00:00","Ooops, fixing monospaced text input again

svn-id: r42146
"
"5a85a1361582b48218a914c380961ae0a8de4f68","2009-07-05 19:57:22+00:00","Split off some drawing related functions

svn-id: r42147
"
"62fcf1177d7782fd30ec908676e3cd287d0ae507","2009-07-05 19:57:37+00:00","More input related split-offs

svn-id: r42148
"
"d6c99ae861aa857b24023ecc66bd1507fa895ecd","2009-07-05 19:57:55+00:00","Renaming FontDesc::extraData to charWidths

svn-id: r42149
"
"c88b9be2a79abf97eed1997337b450a2920afe3b","2009-07-05 19:58:09+00:00","Reordering some methods

svn-id: r42150
"
"50108e9135ad0ad4b6725e7df9677fff869c44bd","2009-07-05 21:39:55+00:00","Renaming the last occurences of 'Collision' to 'Hotspot'

svn-id: r42153
"
"29e97533c1b884e231feb01ed99fd8ae17a3564d","2009-07-05 21:40:20+00:00","Adding some hotspot debug messages

svn-id: r42154
"
"edfaf7bc3c770c008be81f9ccb26835185d7d7d5","2009-07-05 21:40:51+00:00","Added an enum for the hotspot states

svn-id: r42155
"
"4b1c6b526dbfa8d084fbd2475b4d4caa173e442c","2009-07-05 22:57:58+00:00","Groovie: get hotspots working correctly in 11H RGB

svn-id: r42158
"
"c3d9acf309c8616bdf99ebfc8236a984a08de323","2009-07-06 01:41:29+00:00","Adding more comments

svn-id: r42161
"
"08df8dc2721808c7019f49d9051e2eebfe8dad9c","2009-07-06 02:46:59+00:00","Bugfix for node enabling/disabling, which was previously allowing the player to walk through closed doors and into the walls

svn-id: r42162
"
"dc0f6dce7698ce383ad7ca82f8ae1dcba984a044","2009-07-06 06:21:59+00:00","Use graphics surfaces for screen buffers, and always use correct pitch when writing to the frameBuffer.

svn-id: r42163
"
"3ce15cb9b7c77560cd0f2b67e4407b9889ea0f9b","2009-07-06 06:24:04+00:00","Ooops, remove debug code.

svn-id: r42164
"
"f63b02b9200606069a605e27d828f4c8c59119fc","2009-07-06 06:34:40+00:00","Merged revisions 42087-42088,42093-42095,42097-42099,42104-42107,42110,42112-42113,42115-42132,42134-42150,42153-42155,42161-42162 via svnmerge from
https://scummvm.svn.sourceforge.net/svnroot/scummvm/scummvm/trunk

........
r42087 | thebluegr | 2009-07-04 21:24:09 +1000 (Sat, 04 Jul 2009) | 1 line

Newer DoSound() semantics are now detected automatically, by the existence of the 'setVol' selector. Removed game flag GF_SCI1_NEWDOSOUND
........
r42088 | thebluegr | 2009-07-04 21:33:51 +1000 (Sat, 04 Jul 2009) | 1 line

Removed silly FIXME (mixup between debug and engine debug levels)
........
r42093 | thebluegr | 2009-07-05 01:22:42 +1000 (Sun, 05 Jul 2009) | 1 line

Added a new console command, 'selector', which attempts to find a selector by name
........
r42094 | thebluegr | 2009-07-05 01:39:31 +1000 (Sun, 05 Jul 2009) | 1 line

- Changed some comments to DOxygen style
........
r42095 | thebluegr | 2009-07-05 01:45:04 +1000 (Sun, 05 Jul 2009) | 3 lines

- Kernel function names are no longer loaded from vocab.999, but are constructed from the hardcoded function table, depending on the SCI version used
- SCI0 games using older graphics functions are now detected by the presence of the 'curAngle' selector
- SCI0 games using a SCI1 table (like KQ1 demo version and full version) are detected by the presence of the 'sightAngle' selector (as no SCI0 game seems to have it)
........
r42097 | thebluegr | 2009-07-05 02:30:20 +1000 (Sun, 05 Jul 2009) | 3 lines

- Merged the 'early' and 'late' SCI1 versions - these are functionally equivalent, and the code that does the version check is unreliable (e.g. it sets SQ1 VGA to SCI1 'late' and EcoQuest 1 to SCI1 'early')
- Cleanup of the vocabulary setting functions
- Cleanup of the cursor manipulation code
........
r42098 | thebluegr | 2009-07-05 02:36:56 +1000 (Sun, 05 Jul 2009) | 1 line

Merged SCI1 versions in one more file
........
r42099 | thebluegr | 2009-07-05 03:39:43 +1000 (Sun, 05 Jul 2009) | 1 line

Cursors without a palette are now initialized correctly (from patch #2816652). Fixes the cursor transparent color in QFG3
........
r42104 | lordhoto | 2009-07-05 04:54:06 +1000 (Sun, 05 Jul 2009) | 1 line

Add GCC_PRINTF parameter.
........
r42105 | lordhoto | 2009-07-05 04:54:27 +1000 (Sun, 05 Jul 2009) | 1 line

Fix mismatching format arguments.
........
r42106 | lordhoto | 2009-07-05 04:54:43 +1000 (Sun, 05 Jul 2009) | 1 line

Kyra1 PC-98 never offered English as language settings, thus remove it. (The CD version *does* supply English files, but those will work as FM-Towns version, so this causes no drawback for the user and is faithful to the original)
........
r42107 | lordhoto | 2009-07-05 05:04:39 +1000 (Sun, 05 Jul 2009) | 1 line

After discussing with Max, disable -Wmissing-format-attribute again. Also added a comment explaining why it is disabled.
........
r42110 | athrxx | 2009-07-05 07:18:20 +1000 (Sun, 05 Jul 2009) | 1 line

KYRA: fix minor bug in Screen::drawShape()
........
r42112 | wjpalenstijn | 2009-07-05 09:52:24 +1000 (Sun, 05 Jul 2009) | 1 line

When morphing a TeeSongIterator, transfer death listeners to remaining child
........
r42113 | wjpalenstijn | 2009-07-05 11:16:53 +1000 (Sun, 05 Jul 2009) | 1 line

When creating a CleanupSongIterator, transfer death listeners to it
........
r42115 | dreammaster | 2009-07-05 17:21:17 +1000 (Sun, 05 Jul 2009) | 1 line

Bugfix for word-wrapping of text, which sometimes failed for strings with special characters
........
r42116 | jvprat | 2009-07-05 19:34:54 +1000 (Sun, 05 Jul 2009) | 3 lines

- Refactorized Groovie::MusicPlayer to make it extensible
- Added an empty MusicPlayerMac to let the Macintosh version of The 7th Guest start
........
r42117 | thebluegr | 2009-07-05 20:34:43 +1000 (Sun, 05 Jul 2009) | 1 line

Removed validity check for atoi, which prevented console commands from interacting with resources with id 0
........
r42118 | thebluegr | 2009-07-05 21:08:53 +1000 (Sun, 05 Jul 2009) | 1 line

SCI1 games with absolute parameters to lofs instructions are automatically detected now. Removed the GF_SCI1_LOFSABSOLUTE game flag
........
r42119 | drmccoy | 2009-07-05 21:26:23 +1000 (Sun, 05 Jul 2009) | 1 line

Adding an enum MouseButtons
........
r42120 | drmccoy | 2009-07-05 21:26:42 +1000 (Sun, 05 Jul 2009) | 1 line

Commenting prepareStr a bit and renaming it to cleanupStr
........
r42121 | drmccoy | 2009-07-05 21:27:11 +1000 (Sun, 05 Jul 2009) | 1 line

Added a Key and ShortKey enum
........
r42122 | drmccoy | 2009-07-05 21:27:26 +1000 (Sun, 05 Jul 2009) | 1 line

Added a skipBlock() method
........
r42123 | drmccoy | 2009-07-05 21:27:54 +1000 (Sun, 05 Jul 2009) | 1 line

Moving the 'Collision' stuff to Hotspots in hotspots.cpp/.h
........
r42124 | drmccoy | 2009-07-05 21:28:09 +1000 (Sun, 05 Jul 2009) | 1 line

Wrapping the block end marker checks into Hotspots::Hotspot::isEnd()
........
r42125 | drmccoy | 2009-07-05 21:28:25 +1000 (Sun, 05 Jul 2009) | 1 line

Removing the now empty Game_Fascination class
........
r42126 | drmccoy | 2009-07-05 21:28:38 +1000 (Sun, 05 Jul 2009) | 1 line

Fixing indent
........
r42127 | drmccoy | 2009-07-05 21:28:57 +1000 (Sun, 05 Jul 2009) | 1 line

Merging Game_v1's and Game_v2's prepareStart()
........
r42128 | drmccoy | 2009-07-05 21:29:13 +1000 (Sun, 05 Jul 2009) | 1 line

Merging Game's and Game_v6's totSub()
........
r42129 | drmccoy | 2009-07-05 21:29:30 +1000 (Sun, 05 Jul 2009) | 1 line

Merging playTot()
........
r42130 | drmccoy | 2009-07-05 21:29:54 +1000 (Sun, 05 Jul 2009) | 1 line

Putting the Urban noCD check into Init_v6::initGame()
........
r42131 | drmccoy | 2009-07-05 21:30:14 +1000 (Sun, 05 Jul 2009) | 1 line

Removing the now unneeded Game_v* classes
........
r42132 | thebluegr | 2009-07-05 21:49:05 +1000 (Sun, 05 Jul 2009) | 2 lines

- Fixed feature auto-detection for Conquests of Camelot
- Auto-detected features are now printed in the console (to ease debugging)
........
r42134 | thebluegr | 2009-07-05 21:58:42 +1000 (Sun, 05 Jul 2009) | 1 line

Updated the MSVC project files of the gob engine
........
r42135 | drmccoy | 2009-07-05 22:52:14 +1000 (Sun, 05 Jul 2009) | 1 line

Adding a workaround for an invalid expression in Gob1 EGA
........
r42136 | thebluegr | 2009-07-05 23:07:11 +1000 (Sun, 05 Jul 2009) | 1 line

Merged the two SCI1 versions in one more file
........
r42137 | lordhoto | 2009-07-06 00:11:54 +1000 (Mon, 06 Jul 2009) | 1 line

Got rid of HACK, which was used to setup new cursor on theme change.
........
r42138 | lordhoto | 2009-07-06 00:12:04 +1000 (Mon, 06 Jul 2009) | 1 line

Removed pushing of EVENT_SCREEN_CHANGED on theme load. This event should only be pushed by the backend.
........
r42139 | marcus_c | 2009-07-06 00:57:03 +1000 (Mon, 06 Jul 2009) | 1 line

Refresh the screen if pollEvent() is called without updateScreen() being called for a long time.
........
r42140 | athrxx | 2009-07-06 00:58:22 +1000 (Mon, 06 Jul 2009) | 1 line

LOL: - reduce code duplication
........
r42141 | athrxx | 2009-07-06 02:29:17 +1000 (Mon, 06 Jul 2009) | 1 line

LOL: cleanup
........
r42142 | drmccoy | 2009-07-06 05:56:03 +1000 (Mon, 06 Jul 2009) | 1 line

Encapsulating hotspot state reading
........
r42143 | drmccoy | 2009-07-06 05:56:23 +1000 (Mon, 06 Jul 2009) | 1 line

Correcting an input related mistake
........
r42144 | drmccoy | 2009-07-06 05:56:40 +1000 (Mon, 06 Jul 2009) | 1 line

More state-related encapsulation
........
r42145 | drmccoy | 2009-07-06 05:56:54 +1000 (Mon, 06 Jul 2009) | 1 line

Split off Hotspots::evaluateNew()
........
r42146 | drmccoy | 2009-07-06 05:57:08 +1000 (Mon, 06 Jul 2009) | 1 line

Ooops, fixing monospaced text input again
........
r42147 | drmccoy | 2009-07-06 05:57:22 +1000 (Mon, 06 Jul 2009) | 1 line

Split off some drawing related functions
........
r42148 | drmccoy | 2009-07-06 05:57:37 +1000 (Mon, 06 Jul 2009) | 1 line

More input related split-offs
........
r42149 | drmccoy | 2009-07-06 05:57:55 +1000 (Mon, 06 Jul 2009) | 1 line

Renaming FontDesc::extraData to charWidths
........
r42150 | drmccoy | 2009-07-06 05:58:09 +1000 (Mon, 06 Jul 2009) | 1 line

Reordering some methods
........
r42153 | drmccoy | 2009-07-06 07:39:55 +1000 (Mon, 06 Jul 2009) | 1 line

Renaming the last occurences of 'Collision' to 'Hotspot'
........
r42154 | drmccoy | 2009-07-06 07:40:20 +1000 (Mon, 06 Jul 2009) | 1 line

Adding some hotspot debug messages
........
r42155 | drmccoy | 2009-07-06 07:40:51 +1000 (Mon, 06 Jul 2009) | 1 line

Added an enum for the hotspot states
........
r42161 | drmccoy | 2009-07-06 11:41:29 +1000 (Mon, 06 Jul 2009) | 1 line

Adding more comments
........
r42162 | dreammaster | 2009-07-06 12:46:59 +1000 (Mon, 06 Jul 2009) | 1 line

Bugfix for node enabling/disabling, which was previously allowing the player to walk through closed doors and into the walls
........

svn-id: r42165
"
"22e09bedaaf125365c6905187db80e939a86df53","2009-07-06 07:40:28+00:00","Updated doxygen comments on API functions

svn-id: r42166
"
"522b161becfc702350d84cf431b716b1330286db","2009-07-06 10:39:22+00:00","Replaced sciprintf() calls with printf, DebugPrintf, warning and error calls

svn-id: r42167
"
"1f3f4ccdd29e227808eaa29affb7db432756092c","2009-07-06 11:10:35+00:00","Fixed compilation

svn-id: r42168
"
"bceacbd9229cbd3ae4e1f14ab802a987f6a9ac81","2009-07-06 11:15:42+00:00","Added seChanged the warning displayed when a selector can't be mapped to a debugC - it's perfectly normal not to find certain selectors in certain SCI versions. Also, fixed the SCI version enums

svn-id: r42169
"
"87988c69ee0851a317f08c9ecff7d806db60723f","2009-07-06 11:19:19+00:00","Assigned several unimplemented/unused kernel functions as stubs, so that we know when they're used and how they're called

svn-id: r42170
"
"e182cc0b9fd7fff9148e69e3374acf027f72bf77","2009-07-06 11:19:37+00:00","Splitting up the big evaluate() function

svn-id: r42171
"
"250a1a915a6645baa5586aebfe5978730bca9b5b","2009-07-06 11:33:28+00:00","When a song isn't found, send a 'stop handle' event so that the engine won't wait forever (e.g. in SQ4CD, perhaps others)

svn-id: r42172
"
"3abc1e8375989b21d47f383f9184d74ca504951c","2009-07-06 12:33:05+00:00","Removed all the current special cases coding for user (mouse press) waiting, and reimplemented it exactly the way the original did

svn-id: r42173
"
"b38c5f8c5c1f08db12e84d65a32be6462c38d232","2009-07-06 12:44:55+00:00","Proper handling of sound effects marked as music resources

svn-id: r42174
"
"de995433c6f7dcb7aac0c93870d08e5eaebe16c0","2009-07-06 13:09:50+00:00","add workaround for PSP compiler ICE

svn-id: r42175
"
"77c7c1cf813bc9bbc22d2ff3cf2a8d7af754bbf4","2009-07-06 13:52:47+00:00","Loop over the string instead of copying and then editing it (hopefully, the PSP GCC won't ICE again here :P)

svn-id: r42176
"
"69a3e2759ed2682ef2c0cde8d77185bce4052019","2009-07-06 15:23:50+00:00","Groovie: Improve ROQ timing and audio sync (noticeable at least in the Clandestiny trailer)

svn-id: r42177
"
"8f284ad396445549602369c9c2158280b9784fc2","2009-07-06 15:30:07+00:00","KQ6CD should be working correctly again

svn-id: r42178
"
"30d1462da058b8e4f53e43885714556b1eaa0a55","2009-07-06 15:50:44+00:00","Swapped the music and audio resource check for SCI1.1 games. Digital sound effects are now preferred over the synthesized ones

svn-id: r42179
"
"c22010b3d2155c033e260bba267b7eb2409ce2ca","2009-07-06 16:17:03+00:00","Fix RTL from Kyra3 main menu. (It now doesn't quit ScummVM anymore)

svn-id: r42180
"
"219b0de0d2e30b14d1b6f767ec75fa00a7baf21d","2009-07-06 16:22:14+00:00","Renamed SCI_VERSION_01 -> SCI_VERSION_01_EGA

svn-id: r42181
"
"c233459359ba43aeb6421469b32086036901a394","2009-07-06 17:19:50+00:00","Groovie: Fix most ROQ glitches

svn-id: r42182
"
"7f7edabbddbd5b797f4d62d9b9fb724bb3dfa797","2009-07-07 01:14:55+00:00","Bugfix so the game speed will correctly change after showing the credits when the game is restarted

svn-id: r42196
"
"5270c82523a1c224e979e436dbb9a75c95c2ec89","2009-07-07 02:49:33+00:00","Bugfix so that user delays work correctly

svn-id: r42197
"
"7cc82cfea16b97a3660fea524c3b54aecbff8755","2009-07-07 02:51:42+00:00","Added workaround to briefly pause when displaying the first message of the shooting cut-scene, so it can be read properly

svn-id: r42198
"
"3dd21aa218fe0f775fe3e1c1f208d7cd2bb3689a","2009-07-07 06:23:09+00:00","Fix to the return values of the Op_GetMouseButton library function now allows the game's 'Fisticuffs path' to work properly

svn-id: r42199
"
"0a8cd4a27d1b9ad7974697d6524b3455290f8990","2009-07-07 06:29:07+00:00","Removed unused define

svn-id: r42200
"
"2e3419c8cb22a686446777b45042436b5098c47f","2009-07-07 06:53:53+00:00","Prevent a crash when the engine errors out before the game state is initialized

svn-id: r42201
"
"1e568222e470eb711e1f1487de1642fd5c1725ea","2009-07-07 07:02:04+00:00","Set the correct sound rate for Personal Nightmare.

svn-id: r42202
"
"dd4b02c34aaa8f3c7a9bb0ae3ce6dd8fe8f7cb41","2009-07-07 07:09:56+00:00","Merged revisions 42163-42164,42167-42181,42196-42200 via svnmerge from
https://scummvm.svn.sourceforge.net/svnroot/scummvm/scummvm/trunk

........
r42163 | Kirben | 2009-07-06 16:21:59 +1000 (Mon, 06 Jul 2009) | 1 line

Use graphics surfaces for screen buffers, and always use correct pitch when writing to the frameBuffer.
........
r42164 | Kirben | 2009-07-06 16:24:04 +1000 (Mon, 06 Jul 2009) | 1 line

Ooops, remove debug code.
........
r42167 | thebluegr | 2009-07-06 20:39:22 +1000 (Mon, 06 Jul 2009) | 1 line

Replaced sciprintf() calls with printf, DebugPrintf, warning and error calls
........
r42168 | thebluegr | 2009-07-06 21:10:35 +1000 (Mon, 06 Jul 2009) | 1 line

Fixed compilation
........
r42169 | thebluegr | 2009-07-06 21:15:42 +1000 (Mon, 06 Jul 2009) | 1 line

Added seChanged the warning displayed when a selector can't be mapped to a debugC - it's perfectly normal not to find certain selectors in certain SCI versions. Also, fixed the SCI version enums
........
r42170 | thebluegr | 2009-07-06 21:19:19 +1000 (Mon, 06 Jul 2009) | 1 line

Assigned several unimplemented/unused kernel functions as stubs, so that we know when they're used and how they're called
........
r42171 | drmccoy | 2009-07-06 21:19:37 +1000 (Mon, 06 Jul 2009) | 1 line

Splitting up the big evaluate() function
........
r42172 | thebluegr | 2009-07-06 21:33:28 +1000 (Mon, 06 Jul 2009) | 1 line

When a song isn't found, send a 'stop handle' event so that the engine won't wait forever (e.g. in SQ4CD, perhaps others)
........
r42173 | dreammaster | 2009-07-06 22:33:05 +1000 (Mon, 06 Jul 2009) | 1 line

Removed all the current special cases coding for user (mouse press) waiting, and reimplemented it exactly the way the original did
........
r42174 | thebluegr | 2009-07-06 22:44:55 +1000 (Mon, 06 Jul 2009) | 1 line

Proper handling of sound effects marked as music resources
........
r42175 | joostp | 2009-07-06 23:09:50 +1000 (Mon, 06 Jul 2009) | 2 lines

add workaround for PSP compiler ICE
........
r42176 | drmccoy | 2009-07-06 23:52:47 +1000 (Mon, 06 Jul 2009) | 1 line

Loop over the string instead of copying and then editing it (hopefully, the PSP GCC won't ICE again here :P)
........
r42177 | jvprat | 2009-07-07 01:23:50 +1000 (Tue, 07 Jul 2009) | 2 lines

Groovie: Improve ROQ timing and audio sync (noticeable at least in the Clandestiny trailer)
........
r42178 | thebluegr | 2009-07-07 01:30:07 +1000 (Tue, 07 Jul 2009) | 1 line

KQ6CD should be working correctly again
........
r42179 | thebluegr | 2009-07-07 01:50:44 +1000 (Tue, 07 Jul 2009) | 1 line

Swapped the music and audio resource check for SCI1.1 games. Digital sound effects are now preferred over the synthesized ones
........
r42180 | lordhoto | 2009-07-07 02:17:03 +1000 (Tue, 07 Jul 2009) | 1 line

Fix RTL from Kyra3 main menu. (It now doesn't quit ScummVM anymore)
........
r42181 | thebluegr | 2009-07-07 02:22:14 +1000 (Tue, 07 Jul 2009) | 1 line

Renamed SCI_VERSION_01 -> SCI_VERSION_01_EGA
........
r42196 | dreammaster | 2009-07-07 11:14:55 +1000 (Tue, 07 Jul 2009) | 1 line

Bugfix so the game speed will correctly change after showing the credits when the game is restarted
........
r42197 | dreammaster | 2009-07-07 12:49:33 +1000 (Tue, 07 Jul 2009) | 1 line

Bugfix so that user delays work correctly
........
r42198 | dreammaster | 2009-07-07 12:51:42 +1000 (Tue, 07 Jul 2009) | 1 line

Added workaround to briefly pause when displaying the first message of the shooting cut-scene, so it can be read properly
........
r42199 | dreammaster | 2009-07-07 16:23:09 +1000 (Tue, 07 Jul 2009) | 1 line

Fix to the return values of the Op_GetMouseButton library function now allows the game's 'Fisticuffs path' to work properly
........
r42200 | thebluegr | 2009-07-07 16:29:07 +1000 (Tue, 07 Jul 2009) | 1 line

Removed unused define
........

svn-id: r42203
"
"11717150e7c18286fa9b877830ddf5155ee99760","2009-07-07 07:21:32+00:00","Merged revisions 42201-42202 via svnmerge from
https://scummvm.svn.sourceforge.net/svnroot/scummvm/scummvm/trunk

........
r42201 | thebluegr | 2009-07-07 16:53:53 +1000 (Tue, 07 Jul 2009) | 1 line

Prevent a crash when the engine errors out before the game state is initialized
........
r42202 | Kirben | 2009-07-07 17:02:04 +1000 (Tue, 07 Jul 2009) | 1 line

Set the correct sound rate for Personal Nightmare.
........

svn-id: r42204
"
"b50b5ae5a4d896a0319d661f16641e5b35855b60","2009-07-07 07:41:02+00:00","Removed the shooting workaround delay - the overlay number can vary, so it isn't a reliable way of identifying the specific message

svn-id: r42205
"
"c716e43a2bad7fbf7ad6e1ea0594a84cb24ae49b","2009-07-07 07:44:25+00:00","- Added auto-detection for EGA graphics. As a result of this, GF_SCI1_EGA has been removed and versions SCI_VERSION_01_EGA and SCI_VERSION_01_VGA have been merged into SCI_VERSION_01
- Simplified the checks for EGA and VGA graphics
- Fixed a bug in script_adjust_opcode_formats()
- Simplified the code in GfxResManager::getView() a bit

svn-id: r42206
"
"2c5d11b67b35f93b2292c1ca56d0c9fc89608921","2009-07-07 07:50:40+00:00","Removed PixelFormat convenience constructors at behest of Max and Eugene.

svn-id: r42207
"
"45b7e5bbc2ef9d70b004d5c341334f92448c373d","2009-07-07 07:51:18+00:00","Add detection of Playtoons 2 En

svn-id: r42208
"
"e4f6330418d0261c5270d178c39412b8a850c6b7","2009-07-07 07:51:26+00:00","Added a SCI1.1 case in the lofss opcode, like in the lofsa opcode (essentially, lofss and lofsa both load an offset, with lofsa loading it in the accumulator and lofss in the stack). lofss is rarely used in SCI1.1 games, which explains why no lofss-related crashes have been observed in SCI1.1

svn-id: r42209
"
"566c3bb781b8d4fbd86f8a3b24cea3438cd63a75","2009-07-07 09:38:08+00:00","Groovie: Fix a memory leak in still frames

svn-id: r42210
"
"d55f7e72d0af649c472ccc8bb34a408ead3ae7f4","2009-07-07 10:28:05+00:00","Added auto-detection for games with older headers for script blocks, and removed game flag GF_SCI0_OLD

svn-id: r42211
"
"a9aaf56b3e81d46776a6fba574ab9833a8f21be1","2009-07-07 11:14:18+00:00","Cleanup: added an enum for the auto-detected features, removed the selectors which are only used for auto-detection from the convenience selector map and placed feature auto-detection in a separate function. Also, now the automatically detected graphics resources are shown in the console.

svn-id: r42212
"
"1f9c1e4c441ffa0c18f6087fd4240a44e05a2fbf","2009-07-07 11:18:40+00:00","Groovie: Added video skipping functionality in 11h, verified some opcode usage in v2 and some bits of formatting

svn-id: r42213
"
"a0ab8c9c0cb079f21e342d1a53283064bdffebe4","2009-07-07 11:58:22+00:00","- Separate Playtoons gametypes from  in GobEngine::initGameParts()
- Add a specific save/load class for Playtoons as some specific files need to be tested

svn-id: r42214
"
"add4d124b29a6de01d69cc8f2a8d236deb969425","2009-07-07 12:03:27+00:00","- Add a new gametype for 'The Land of the Magic Stones'
- Add detection of the french version
- Add a new game feature for 800*600

svn-id: r42215
"
"74670cc834636b431b168343511415ccbcc97a71","2009-07-07 12:29:55+00:00","Removed the superfluous sci_version_types array (it's essentially the same as the versionNames array)

svn-id: r42216
"
"09efaaa1c91854feaf19ba6fae1b702203984e26","2009-07-07 12:51:21+00:00","Change SaveLoad_Playtoons case

svn-id: r42217
"
"131aaefa0c52393ecbfbb756eb9acad0505a2924","2009-07-07 13:16:23+00:00","Don't #define M_PI in graphics/jpeg.h (it clashes with math.h, and it's bad style to #define constants in a header that you only use locally ;); instead use PI from common/scummsys.h

svn-id: r42218
"
"ab8c3d56b86d93dcd2c0debeb6ad57bf87910fd2","2009-07-07 13:39:24+00:00","Removed the weird checks for a maximum resource number (the sci_max_resource_nr array), as it doesn't serve any real purpose and leads to strange errors: if a resource is found which is bigger than the maximum number, it will be remapped to an incorrect number from this check. This makes KQ5CD work properly again (resources would be remapped to incorrect resource numbers from this code as a result of not updating this array with the latest SCI version merges).

svn-id: r42219
"
"bd87b653aca29c593cadcdedfc2208cec51456aa","2009-07-07 14:04:18+00:00","Properly handle odd-sized JPEG files (ie, those not a multiple of 8 pixels)

svn-id: r42220
"
"862308166645a5f7b5422473b434f0a8ec86d7b2","2009-07-07 14:22:23+00:00","Add generic functionallity to draw FM-Towns ROM. (To be used by KYRA and SCI)

svn-id: r42221
"
"ec2c7cfefa2daeb760cabbd7ded827377bb1121e","2009-07-07 14:22:39+00:00","Adapt KYRA to use the new Graphics::FontSJIS code.

svn-id: r42222
"
"9bdf1a2ab139d364ee30906a18dc05de8c88e487","2009-07-07 17:11:29+00:00","kFeatures800 -> kFeatures800x600 in order to have more meaningful name

svn-id: r42229
"
"62eebc3e17f952defaa779ed1dc770570dac309d","2009-07-07 18:10:35+00:00","- Added support for outlined FM-Towns ROM drawing
- Adapted KYRA to use that

svn-id: r42230
"
"8c65d4d4a94f5a0330b1c86f6378ffada20dd1be","2009-07-07 18:17:30+00:00","- Rename FontSJIS::enableShadow to enableOutline.
- Initialize outline to false by default in FontTowns.

svn-id: r42231
"
"e35dd4df1c1f84e29210a4ce263d4b85ea4caf53","2009-07-07 19:00:39+00:00","Change 'FM-Towns' to 'FM-TOWNS' for consistency.

svn-id: r42232
"
"2a117d9a90df395a388919d2734024d19f24b8f3","2009-07-07 19:00:51+00:00","Add guards to only include SJIS font code, when KYRA or SCI is enabled.

svn-id: r42233
"
"832540f64f6f0c9a77029fce17d4f06516c688ef","2009-07-07 19:18:32+00:00","Simply compile guard of SJIS code and fix comment.

svn-id: r42234
"
"4dc454581cb9a8f673cf10e9508eeb1325570f79","2009-07-07 19:18:53+00:00","Change all uses of FM-Towns/fm-towns to FM-TOWNS.

svn-id: r42235
"
"802abfd8cbaf3143f2c66053a4839ee3914596ce","2009-07-07 20:01:15+00:00","Added a workaround for incorrect font references in LSL1VGA (which was the original purpose of the code removed in rev. 42219)

svn-id: r42238
"
"ee15f8f51ad5ec1a6fd776c4a12fb4167dfec8ed","2009-07-07 20:17:07+00:00","Improved the LSL1VGA workaround after talking with waltervn

svn-id: r42239
"
"a62b26ea8026666fd658337bcc061c1c4e2ab3f9","2009-07-07 20:43:27+00:00","Silenced the very chatty song iterator console messages by converting them to appropriate debug messages

svn-id: r42240
"
"3e47aaa151ff751af867c57344b063c30f5f75f3","2009-07-07 23:24:34+00:00","Merged revisions 42205-42206,42208-42209,42211-42212,42214-42217,42219,42221-42222,42229-42235,42238-42240 via svnmerge from
https://scummvm.svn.sourceforge.net/svnroot/scummvm/scummvm/trunk

........
r42205 | dreammaster | 2009-07-07 17:41:02 +1000 (Tue, 07 Jul 2009) | 1 line

Removed the shooting workaround delay - the overlay number can vary, so it isn't a reliable way of identifying the specific message
........
r42206 | thebluegr | 2009-07-07 17:44:25 +1000 (Tue, 07 Jul 2009) | 4 lines

- Added auto-detection for EGA graphics. As a result of this, GF_SCI1_EGA has been removed and versions SCI_VERSION_01_EGA and SCI_VERSION_01_VGA have been merged into SCI_VERSION_01
- Simplified the checks for EGA and VGA graphics
- Fixed a bug in script_adjust_opcode_formats()
- Simplified the code in GfxResManager::getView() a bit
........
r42208 | strangerke | 2009-07-07 17:51:18 +1000 (Tue, 07 Jul 2009) | 1 line

Add detection of Playtoons 2 En
........
r42209 | thebluegr | 2009-07-07 17:51:26 +1000 (Tue, 07 Jul 2009) | 1 line

Added a SCI1.1 case in the lofss opcode, like in the lofsa opcode (essentially, lofss and lofsa both load an offset, with lofsa loading it in the accumulator and lofss in the stack). lofss is rarely used in SCI1.1 games, which explains why no lofss-related crashes have been observed in SCI1.1
........
r42211 | thebluegr | 2009-07-07 20:28:05 +1000 (Tue, 07 Jul 2009) | 1 line

Added auto-detection for games with older headers for script blocks, and removed game flag GF_SCI0_OLD
........
r42212 | thebluegr | 2009-07-07 21:14:18 +1000 (Tue, 07 Jul 2009) | 1 line

Cleanup: added an enum for the auto-detected features, removed the selectors which are only used for auto-detection from the convenience selector map and placed feature auto-detection in a separate function. Also, now the automatically detected graphics resources are shown in the console.
........
r42214 | strangerke | 2009-07-07 21:58:22 +1000 (Tue, 07 Jul 2009) | 2 lines

- Separate Playtoons gametypes from  in GobEngine::initGameParts()
- Add a specific save/load class for Playtoons as some specific files need to be tested
........
r42215 | strangerke | 2009-07-07 22:03:27 +1000 (Tue, 07 Jul 2009) | 3 lines

- Add a new gametype for 'The Land of the Magic Stones'
- Add detection of the french version
- Add a new game feature for 800*600
........
r42216 | thebluegr | 2009-07-07 22:29:55 +1000 (Tue, 07 Jul 2009) | 1 line

Removed the superfluous sci_version_types array (it's essentially the same as the versionNames array)
........
r42217 | strangerke | 2009-07-07 22:51:21 +1000 (Tue, 07 Jul 2009) | 1 line

Change SaveLoad_Playtoons case
........
r42219 | thebluegr | 2009-07-07 23:39:24 +1000 (Tue, 07 Jul 2009) | 1 line

Removed the weird checks for a maximum resource number (the sci_max_resource_nr array), as it doesn't serve any real purpose and leads to strange errors: if a resource is found which is bigger than the maximum number, it will be remapped to an incorrect number from this check. This makes KQ5CD work properly again (resources would be remapped to incorrect resource numbers from this code as a result of not updating this array with the latest SCI version merges).
........
r42221 | lordhoto | 2009-07-08 00:22:23 +1000 (Wed, 08 Jul 2009) | 1 line

Add generic functionallity to draw FM-Towns ROM. (To be used by KYRA and SCI)
........
r42222 | lordhoto | 2009-07-08 00:22:39 +1000 (Wed, 08 Jul 2009) | 1 line

Adapt KYRA to use the new Graphics::FontSJIS code.
........
r42229 | sev | 2009-07-08 03:11:29 +1000 (Wed, 08 Jul 2009) | 2 lines

kFeatures800 -> kFeatures800x600 in order to have more meaningful name
........
r42230 | lordhoto | 2009-07-08 04:10:35 +1000 (Wed, 08 Jul 2009) | 2 lines

- Added support for outlined FM-Towns ROM drawing
- Adapted KYRA to use that
........
r42231 | lordhoto | 2009-07-08 04:17:30 +1000 (Wed, 08 Jul 2009) | 2 lines

- Rename FontSJIS::enableShadow to enableOutline.
- Initialize outline to false by default in FontTowns.
........
r42232 | lordhoto | 2009-07-08 05:00:39 +1000 (Wed, 08 Jul 2009) | 1 line

Change 'FM-Towns' to 'FM-TOWNS' for consistency.
........
r42233 | lordhoto | 2009-07-08 05:00:51 +1000 (Wed, 08 Jul 2009) | 1 line

Add guards to only include SJIS font code, when KYRA or SCI is enabled.
........
r42234 | lordhoto | 2009-07-08 05:18:32 +1000 (Wed, 08 Jul 2009) | 1 line

Simply compile guard of SJIS code and fix comment.
........
r42235 | lordhoto | 2009-07-08 05:18:53 +1000 (Wed, 08 Jul 2009) | 1 line

Change all uses of FM-Towns/fm-towns to FM-TOWNS.
........
r42238 | thebluegr | 2009-07-08 06:01:15 +1000 (Wed, 08 Jul 2009) | 1 line

Added a workaround for incorrect font references in LSL1VGA (which was the original purpose of the code removed in rev. 42219)
........
r42239 | thebluegr | 2009-07-08 06:17:07 +1000 (Wed, 08 Jul 2009) | 1 line

Improved the LSL1VGA workaround after talking with waltervn
........
r42240 | thebluegr | 2009-07-08 06:43:27 +1000 (Wed, 08 Jul 2009) | 1 line

Silenced the very chatty song iterator console messages by converting them to appropriate debug messages
........

svn-id: r42248
"
"20ca572e4561665e840409b34404c8de82e3bc04","2009-07-08 01:07:41+00:00","Fix recent regression in vc61().

svn-id: r42252
"
"4f39ef18c1eaf04d5187a4f01701980c03ab08d0","2009-07-08 07:09:03+00:00","Synced the MSVC project files of the gob engine

svn-id: r42255
"
"c3a335aacb68eff9638747562a38543d415cbf06","2009-07-08 07:11:43+00:00","Updated the MSVC project files of the scummvm project (added graphics/sjis.*)

svn-id: r42256
"
"570d157ff336d62f3e1c9435ebe1c13ed8332c08","2009-07-08 07:13:56+00:00","The ENABLE_* flags are only checked for *.cpp files in MSVC, so move the ENABLE_* checks to sjis.cpp to fix compilation under MSVC

svn-id: r42257
"
"4e44217047ba7f361412b9b550c7eafa013d8fbe","2009-07-08 07:25:09+00:00","Also added the ENABLE_IHNM and ENABLE_SAGA2 preprocessor definitions to the scummvm project files, not only the saga project files

svn-id: r42258
"
"90422f6bd3e7f4b6c1df82124ce5000986822651","2009-07-08 07:28:13+00:00","Added guards to only include the Shorten audio code when the SAGA2 code in the SAGA engine is enabled

svn-id: r42259
"
"62499054a0639fd9bca6b0573bca3b664e8561fe","2009-07-08 10:25:37+00:00","Some cleanup for the script debugger code:
- Renamed struct DebugState to ScriptState and r_amp_rest to restAdjust inside EngineState. Changed restAdjust to be a uint16 (actually it is a uint16, but it was being casted back and forth from an unsigned integer, so this clears up its type and size)
- Moved the script state variables from inside the run_vm() into the ScriptState struct, so that they can be accessed by the console commands and the script debugger all the time, and removed the weird isValid code

svn-id: r42260
"
"a764f274f83b72c4fafa5ad1c72127462c7c9410","2009-07-08 10:35:51+00:00","Fixed saving/loading again (broken with the latest changes for game feature auto-detection)

svn-id: r42261
"
"d351c7b9cb6cb46da9bb141c9ca90aba021c1602","2009-07-08 10:44:25+00:00","Only the kernel needs to be initialized before anything else, when saving/loading

svn-id: r42262
"
"5ca94c5cce2ca0b42bb678835d9e141456bbae5b","2009-07-08 13:08:51+00:00","- Moved printObject inside the Console class
- Enabled the parts where disassemble() is called

svn-id: r42263
"
"828ed66555b99363fed62b4cbb83c36de68c3024","2009-07-08 16:07:58+00:00","Reinstated static inline Graphics::PixelFormat::createFormatCLUT8(), which I am told was not supposed to be removed with the others.

svn-id: r42268
"
"2950bc28c4d14b5991c9fb4e854644d1c4f93a0f","2009-07-08 20:19:23+00:00","LOL: fix long standing bugs in the battle system (hit chance, damage, etc) by adapting original style random number generator

svn-id: r42269
"
"a212a9da7e28b476ec2d8417e54c9adf9a551291","2009-07-08 20:32:34+00:00","LOL: rename new function in last commit according to LordHoto's suggestion

svn-id: r42270
"
"c7eedb573ac3ac1bd4c8f8e64d75ee8ee931bc50","2009-07-08 21:12:03+00:00","LOL: cleanup

svn-id: r42271
"
"bffeaaae76ebe5b5e981f5157e9b806f48c29a4f","2009-07-09 00:19:00+00:00","Merged revisions 42252,42255-42263,42269-42271 via svnmerge from
https://scummvm.svn.sourceforge.net/svnroot/scummvm/scummvm/trunk

........
r42252 | Kirben | 2009-07-08 11:07:41 +1000 (Wed, 08 Jul 2009) | 1 line

Fix recent regression in vc61().
........
r42255 | thebluegr | 2009-07-08 17:09:03 +1000 (Wed, 08 Jul 2009) | 1 line

Synced the MSVC project files of the gob engine
........
r42256 | thebluegr | 2009-07-08 17:11:43 +1000 (Wed, 08 Jul 2009) | 1 line

Updated the MSVC project files of the scummvm project (added graphics/sjis.*)
........
r42257 | thebluegr | 2009-07-08 17:13:56 +1000 (Wed, 08 Jul 2009) | 1 line

The ENABLE_* flags are only checked for *.cpp files in MSVC, so move the ENABLE_* checks to sjis.cpp to fix compilation under MSVC
........
r42258 | thebluegr | 2009-07-08 17:25:09 +1000 (Wed, 08 Jul 2009) | 1 line

Also added the ENABLE_IHNM and ENABLE_SAGA2 preprocessor definitions to the scummvm project files, not only the saga project files
........
r42259 | thebluegr | 2009-07-08 17:28:13 +1000 (Wed, 08 Jul 2009) | 1 line

Added guards to only include the Shorten audio code when the SAGA2 code in the SAGA engine is enabled
........
r42260 | thebluegr | 2009-07-08 20:25:37 +1000 (Wed, 08 Jul 2009) | 3 lines

Some cleanup for the script debugger code:
- Renamed struct DebugState to ScriptState and r_amp_rest to restAdjust inside EngineState. Changed restAdjust to be a uint16 (actually it is a uint16, but it was being casted back and forth from an unsigned integer, so this clears up its type and size)
- Moved the script state variables from inside the run_vm() into the ScriptState struct, so that they can be accessed by the console commands and the script debugger all the time, and removed the weird isValid code
........
r42261 | thebluegr | 2009-07-08 20:35:51 +1000 (Wed, 08 Jul 2009) | 1 line

Fixed saving/loading again (broken with the latest changes for game feature auto-detection)
........
r42262 | thebluegr | 2009-07-08 20:44:25 +1000 (Wed, 08 Jul 2009) | 1 line

Only the kernel needs to be initialized before anything else, when saving/loading
........
r42263 | thebluegr | 2009-07-08 23:08:51 +1000 (Wed, 08 Jul 2009) | 2 lines

- Moved printObject inside the Console class
- Enabled the parts where disassemble() is called
........
r42269 | athrxx | 2009-07-09 06:19:23 +1000 (Thu, 09 Jul 2009) | 1 line

LOL: fix long standing bugs in the battle system (hit chance, damage, etc) by adapting original style random number generator
........
r42270 | athrxx | 2009-07-09 06:32:34 +1000 (Thu, 09 Jul 2009) | 1 line

LOL: rename new function in last commit according to LordHoto's suggestion
........
r42271 | athrxx | 2009-07-09 07:12:03 +1000 (Thu, 09 Jul 2009) | 1 line

LOL: cleanup
........

svn-id: r42275
"
"3823ae285f92c0b39d141b6132a4187b1e83b6be","2009-07-09 02:54:10+00:00","Giving Font its own real class

svn-id: r42277
"
"22a48e6c39cdeca154f42027a17efea3794edd82","2009-07-09 03:07:30+00:00","Changed the status of the cruise engine to be enabled by default

svn-id: r42278
"
"1d38ead4e78fafa0d2f97dccf889ea392059eb0f","2009-07-09 09:06:31+00:00","Removed #ifdef blocks around new error values in Common::Error and OSystem::TransactionError.

svn-id: r42280
"
"cdad3763dfbacf45599034358a32fc68032e1a30","2009-07-09 09:09:05+00:00","Corrected lingering formatting errors that were introduced by the find-and-replace assisted removal of Graphics::PixelFormat::createFormat functions.

svn-id: r42281
"
"a4f3a8390068fc372a96d4473b91eb09158353ef","2009-07-09 09:10:05+00:00","corrected creation of one Graphics::PixelFormat to reflect the resurrection of Graphics::PixelFormat::createFormatCLUT8

svn-id: r42282
"
"8a7a81ed30697fea81a22c544543295f65f43835","2009-07-09 09:39:51+00:00","Warn instead of crash when a video frame part was found although the header says there's no video

svn-id: r42286
"
"8a783bdd7602f8fa2718fb5967505b00812ed70d","2009-07-09 13:17:46+00:00","Renamed sound/iff.* to sound/iff_sound.* to fix an issue with the upcoming changes to the MSVC project files (sound/iff.* produces iff.obj, which clashes with iff.obj from graphics/iff.*)

svn-id: r42287
"
"aa66cf3fd8e8db52384653240276349fa39e2a15","2009-07-09 15:12:35+00:00","- Rewrote and greatly simplified the MSVC8 and MSVC9 project files so that they use common compilation properties, based on patch #2774908. These common properties make it much simpler to change options and compilation defines globally, similar to how GCC *.mk files do. Also, this fixes problems where an ENABLE_* define was set for one project file but not another (like the situation in revisions 42257 and 42259). It's now much easier to construct a tool which will create the project files dynamically.
- Dropped support for MSVC7 and MSVC7.1 for now (as they don't support common compilation properties and it's no longer easy to construct them from the MSVC8 ones) - hopefully, they will return in the future, once we got a more sophisticated tool to create them
- Simplified the MSVC9 <-> MSVC8 conversion tools a bit

svn-id: r42288
"
"a0a675e42d71df188da25fa3b8fab99249874ee9","2009-07-09 15:15:49+00:00","Reverted commit #42257, as the original issue was with the compilation process of MSVC and the ENABLE_* checks work correctly

svn-id: r42289
"
"b1bd18040808a7632c6d74eed2ccb97d569af1f4","2009-07-09 15:17:45+00:00","Added proper safeguards for shorten.*, thereby fixing commit 42259

svn-id: r42290
"
"a7c96e15268d15a0a13f0cf5321a7c51587aa3f9","2009-07-09 15:32:06+00:00","Cleanup.

svn-id: r42292
"
"a17333ed1b817303ca08b0f73fbdf4bf9bdef1fd","2009-07-09 15:32:25+00:00","Cleanup rollDice (the results of the old and the new function are almost identical).

svn-id: r42293
"
"982153e0ab72214c6a6a51caee32bb018cbbdabb","2009-07-09 15:46:26+00:00","restAdjust should be a signed integer. Fixes crashes with SCI1 games that take absolute lofs parameters (a regression of commit #42260)

svn-id: r42297
"
"717de7800c9bd6b822d56771393beec42f3bc1bb","2009-07-09 15:54:18+00:00","Applied patch #2818845 - 'SCI: resource.map detection for SCI1/1.1 fixed', with some slight formatting changes

svn-id: r42300
"
"0aa83f14c760ae790b738e5957fb8c3d9930697f","2009-07-09 15:59:20+00:00","Fix wrong format arugment.

svn-id: r42301
"
"1ac515c629898f7642d55588141d6168293a9331","2009-07-09 16:16:08+00:00","By comparing the commit log of r42300, it seems that 'off' was renamed to 'lastDirectoryOffset'. I changed the SCI32 specific code to use that now. I can't assure this is anyhow correct, so anyone with knowledge of this code please check it.

svn-id: r42303
"
"5d0d67e5742d9a65ad9c944a86ff3223ff967042","2009-07-09 16:23:22+00:00","Add fixme about SCI32 specific code.

svn-id: r42305
"
"e8e9b882275b8dc5d77db3b1faaf30466c7b7a31","2009-07-09 16:24:59+00:00","Oops specify the correct revsision number in the fixme.

svn-id: r42306
"
"ff208c5387a8566546a384afa9ab48c0a1f356a0","2009-07-09 17:25:06+00:00","fix compile

svn-id: r42308
"
"4e99bee142899dae1385210012dd34453920fe54","2009-07-10 00:07:26+00:00","Merged revisions 42277-42278,42286-42290,42292-42293,42297,42300-42301,42303,42305-42306 via svnmerge from
https://scummvm.svn.sourceforge.net/svnroot/scummvm/scummvm/trunk

........
r42277 | drmccoy | 2009-07-09 12:54:10 +1000 (Thu, 09 Jul 2009) | 1 line

Giving Font its own real class
........
r42278 | dreammaster | 2009-07-09 13:07:30 +1000 (Thu, 09 Jul 2009) | 1 line

Changed the status of the cruise engine to be enabled by default
........
r42286 | drmccoy | 2009-07-09 19:39:51 +1000 (Thu, 09 Jul 2009) | 1 line

Warn instead of crash when a video frame part was found although the header says there's no video
........
r42287 | thebluegr | 2009-07-09 23:17:46 +1000 (Thu, 09 Jul 2009) | 1 line

Renamed sound/iff.* to sound/iff_sound.* to fix an issue with the upcoming changes to the MSVC project files (sound/iff.* produces iff.obj, which clashes with iff.obj from graphics/iff.*)
........
r42288 | thebluegr | 2009-07-10 01:12:35 +1000 (Fri, 10 Jul 2009) | 3 lines

- Rewrote and greatly simplified the MSVC8 and MSVC9 project files so that they use common compilation properties, based on patch #2774908. These common properties make it much simpler to change options and compilation defines globally, similar to how GCC *.mk files do. Also, this fixes problems where an ENABLE_* define was set for one project file but not another (like the situation in revisions 42257 and 42259). It's now much easier to construct a tool which will create the project files dynamically.
- Dropped support for MSVC7 and MSVC7.1 for now (as they don't support common compilation properties and it's no longer easy to construct them from the MSVC8 ones) - hopefully, they will return in the future, once we got a more sophisticated tool to create them
- Simplified the MSVC9 <-> MSVC8 conversion tools a bit
........
r42289 | thebluegr | 2009-07-10 01:15:49 +1000 (Fri, 10 Jul 2009) | 1 line

Reverted commit #42257, as the original issue was with the compilation process of MSVC and the ENABLE_* checks work correctly
........
r42290 | thebluegr | 2009-07-10 01:17:45 +1000 (Fri, 10 Jul 2009) | 1 line

Added proper safeguards for shorten.*, thereby fixing commit 42259
........
r42292 | lordhoto | 2009-07-10 01:32:06 +1000 (Fri, 10 Jul 2009) | 1 line

Cleanup.
........
r42293 | lordhoto | 2009-07-10 01:32:25 +1000 (Fri, 10 Jul 2009) | 1 line

Cleanup rollDice (the results of the old and the new function are almost identical).
........
r42297 | thebluegr | 2009-07-10 01:46:26 +1000 (Fri, 10 Jul 2009) | 1 line

restAdjust should be a signed integer. Fixes crashes with SCI1 games that take absolute lofs parameters (a regression of commit #42260)
........
r42300 | thebluegr | 2009-07-10 01:54:18 +1000 (Fri, 10 Jul 2009) | 1 line

Applied patch #2818845 - 'SCI: resource.map detection for SCI1/1.1 fixed', with some slight formatting changes
........
r42301 | lordhoto | 2009-07-10 01:59:20 +1000 (Fri, 10 Jul 2009) | 1 line

Fix wrong format arugment.
........
r42303 | lordhoto | 2009-07-10 02:16:08 +1000 (Fri, 10 Jul 2009) | 1 line

By comparing the commit log of r42300, it seems that 'off' was renamed to 'lastDirectoryOffset'. I changed the SCI32 specific code to use that now. I can't assure this is anyhow correct, so anyone with knowledge of this code please check it.
........
r42305 | lordhoto | 2009-07-10 02:23:22 +1000 (Fri, 10 Jul 2009) | 1 line

Add fixme about SCI32 specific code.
........
r42306 | lordhoto | 2009-07-10 02:24:59 +1000 (Fri, 10 Jul 2009) | 1 line

Oops specify the correct revsision number in the fixme.
........

svn-id: r42318
"
"637ddaece41048f15eb0d818b0acf895ad6a0833","2009-07-10 00:49:13+00:00","Changed the status of the Tinsel engine to be enabled by default

svn-id: r42322
"
"a5d374bded6204c9250155d572d23b0caef636a5","2009-07-10 06:46:50+00:00","Moved OSystem_SDL::getSupportedFormats function body from platforms/sdl/sdl.h to platforms/sdl/graphics.cpp,
Improved and simplified list-generation method for OSystem_SDL::getSupportedFormats.

svn-id: r42325
"
"689ad3d07c9d0b1c88d4679578ed70190de80b6b","2009-07-10 07:08:54+00:00","removed OSystem::convertScreenRect as unnecessary and bloatful.

svn-id: r42326
"
"03ee1c9f2c7e0050368b2ed453957dc777696051","2009-07-10 08:40:44+00:00","Mention cruise support

svn-id: r42328
"
"cf6d4c0b209e7bdce7a948e2a01882f3f2d53d31","2009-07-10 09:45:26+00:00","Fixed some branch-specific vsprops configuration, that was lost in the merge to using .vsprops files

svn-id: r42329
"
"2f370ef8ab65db8443c496c47de98740b31c4220","2009-07-10 10:43:48+00:00","Overloaded initGraphics to provide for simpler procedures for engines supporting more than one format.

svn-id: r42330
"
"bb1da36710b8ddc5dd3d4bbf7414dd20b7a646b3","2009-07-10 10:45:15+00:00","Simplified SCI and groovie's initial graphics setup making use of the overloaded functions.

svn-id: r42331
"
"ddcab8169f45055c8272648279c3dd96432ba956","2009-07-10 10:47:25+00:00","updated comment on initGraphics as I should have done before commiting r42330.

svn-id: r42332
"
"dfe8ec9be0ede93de536a9bac26974751c7e534b","2009-07-10 18:53:40+00:00","Applied patch #2819665 - 'SCI: cell palette fix for QfG3/SQ5/etc.'

svn-id: r42345
"
"4b37e6ad8c344e7075f67d23146b35250eeac484","2009-07-10 19:06:24+00:00","This is 1.0.0svn

svn-id: r42346
"
"02e639ea0ceaa4b6a530847dbb043a5c2352e4a2","2009-07-10 19:55:06+00:00","Fixed a couple of errors in the new getSupportedFormats implementation.

svn-id: r42350
"
"70c138651dc71f886a4314943c4e9a753dc44607","2009-07-10 19:56:40+00:00","Whoops, and one more.

svn-id: r42351
"
"ad7c50e70d09695abd8a61b5631c2883d7e6b387","2009-07-10 21:49:47+00:00","Fixing mismatched delete

svn-id: r42354
"
"c73e42154fa0251a85243c29ba0b3d46a13496ff","2009-07-10 22:11:36+00:00","Mention the Gob savegame format change and change the version from 0.14.0 to 1.0.0 there too

svn-id: r42355
"
"1f24fe43a237f606f801d7ae97effef957463eb4","2009-07-10 22:13:27+00:00","tinsel: proper detection entry for Discworld 1 Italian only CD

svn-id: r42356
"
"1462efb52dcdfb033f15c0c987bc49d64fdf73d8","2009-07-10 22:29:25+00:00","Recreate FSNode after calling checkPath since checkPath may
have created the directory the FSNode points to, invalidating
its cached metadata. In the future, it might be nice to add
a FSNode::rescan() function for this? This fixes #2793187 .

svn-id: r42357
"
"272e9487aaab6119fd643c3443fddbdfedb2f73e","2009-07-10 22:46:36+00:00","Restored several files after the version update.

.in files are THE sources, and have to be modified, not the files generated
from them.

svn-id: r42358
"
"0577bee93893a55be1b2a067ec18f3c8ad462358","2009-07-10 23:40:21+00:00","Merged revisions 42322,42328,42345-42346,42354-42358 via svnmerge from
https://scummvm.svn.sourceforge.net/svnroot/scummvm/scummvm/trunk

........
r42322 | dreammaster | 2009-07-10 10:49:13 +1000 (Fri, 10 Jul 2009) | 1 line

Changed the status of the Tinsel engine to be enabled by default
........
r42328 | sev | 2009-07-10 18:40:44 +1000 (Fri, 10 Jul 2009) | 2 lines

Mention cruise support
........
r42345 | thebluegr | 2009-07-11 04:53:40 +1000 (Sat, 11 Jul 2009) | 1 line

Applied patch #2819665 - 'SCI: cell palette fix for QfG3/SQ5/etc.'
........
r42346 | sev | 2009-07-11 05:06:24 +1000 (Sat, 11 Jul 2009) | 2 lines

This is 1.0.0svn
........
r42354 | drmccoy | 2009-07-11 07:49:47 +1000 (Sat, 11 Jul 2009) | 1 line

Fixing mismatched delete
........
r42355 | drmccoy | 2009-07-11 08:11:36 +1000 (Sat, 11 Jul 2009) | 1 line

Mention the Gob savegame format change and change the version from 0.14.0 to 1.0.0 there too
........
r42356 | Hkz | 2009-07-11 08:13:27 +1000 (Sat, 11 Jul 2009) | 1 line

tinsel: proper detection entry for Discworld 1 Italian only CD
........
r42357 | wjpalenstijn | 2009-07-11 08:29:25 +1000 (Sat, 11 Jul 2009) | 4 lines

Recreate FSNode after calling checkPath since checkPath may
have created the directory the FSNode points to, invalidating
its cached metadata. In the future, it might be nice to add
a FSNode::rescan() function for this? This fixes #2793187 .
........
r42358 | sev | 2009-07-11 08:46:36 +1000 (Sat, 11 Jul 2009) | 5 lines

Restored several files after the version update.

.in files are THE sources, and have to be modified, not the files generated
from them.
........

svn-id: r42359
"
"8eee50103ce40287058966e201d65aade5f1f688","2009-07-11 00:38:50+00:00","Fix recent regression in AGOSEngine_Simon1::drawImage().

svn-id: r42360
"
"ad67a714dd9e4373cb5a1d78fba2b00e1db32352","2009-07-11 00:47:32+00:00","Fix SAGA outline generation algorithm for characters
that are copies of earlier characters. (5 characters in IHNM.)
This fixes #1904624.

svn-id: r42361
"
"fb38a1b0ba74b3295ab9851448da841194aa82d9","2009-07-11 01:40:53+00:00","Fix bug #2819628 - DETECTOR: Atlantis CD sets wrong gui options.

svn-id: r42364
"
"3080cc2905d86173c5b304434e3bf1cfd654d53f","2009-07-11 01:54:27+00:00","Fix graphics not updating, when loading a save in Kyra1. This fixes problems when loading saves in rooms like Brynn's temple, which play animations directly on scene enter.

svn-id: r42365
"
"a93008713a435d20d145729b2f403d475cd71cc0","2009-07-11 01:54:42+00:00","Removed the now uneeded 'Screen::_disableScreen' flag.

svn-id: r42366
"
"dd9b6fffff8a84e6ee3a6ac8a7f1e6a73da58aba","2009-07-11 05:10:13+00:00","Bugfix to show the mouse cursor when restarting the game after returning to launcher

svn-id: r42368
"
"99d81ac2edd689def2713b7a88e9114343cc4ef0","2009-07-11 05:12:17+00:00","Active background screens are now properly freed when the game exits

svn-id: r42369
"
"2c96ca84f36d42353bed7f8830efd3822e4dde85","2009-07-11 05:14:42+00:00","Added initialisation of paging screens when the game starts

svn-id: r42370
"
"763c6c8ca1fc11acb4206ebb7859e1e904c0454b","2009-07-11 06:19:29+00:00","Fixed regression in the script parser from commit 42260

svn-id: r42371
"
"0b47fa50aeed43fbd2643edbda293c1bd698f5c4","2009-07-11 06:33:19+00:00","Applied a slightly modified patch from clone2727 which adds static selector names to some demos which are missing them (KQ4, LSL1, LSL3, Iceman and Christmas1992)

svn-id: r42372
"
"4f2b8579829d0f32345e6932814af54c181d2cd8","2009-07-11 06:34:25+00:00","Removed an invalid detection entry

svn-id: r42373
"
"28dd343e08afb9eeb8318d06c8c18eb6b48fd210","2009-07-11 06:43:01+00:00","Applied slightly modified patch 2819002 - 'SCI: resource-view-patch on SQ5/German fix'

svn-id: r42374
"
"2b5fac58d5323847042e53f114ad94ce2d526f3b","2009-07-11 06:53:39+00:00","Applied patch 2818733 - 'SCI: Timer iterator for audio resources played via doSound'

svn-id: r42375
"
"9594beb39fa6eb6c9bad7572989f0eb50fc3bc32","2009-07-11 07:03:28+00:00","Only error out, if checkStaticSelectorNames() fails.

svn-id: r42376
"
"6bf91ab66f392df80ae1171d7882127b1ab81dcf","2009-07-11 08:16:55+00:00","Bugfix to properly save the currently playing midi music when saving a scene

svn-id: r42377
"
"d3d06626e41a28c70b489a164a018c0ba65d0547","2009-07-11 09:45:25+00:00","Fix oversight in r42361 and also handle consecutive copied characters in SAGA.

svn-id: r42378
"
"2ceea652e62b301adea4628cebe4116191aa4998","2009-07-11 10:24:06+00:00","Explicitely instantiate the decompressWizImage() templates, so that they won't be optimized away, as they are also used in akos.cpp

svn-id: r42380
"
"e3398c0cc73999524e92774fb889a0d22eea552b","2009-07-11 11:48:01+00:00","Merged revisions 42360-42361,42364-42366,42368-42378,42380 via svnmerge from
https://scummvm.svn.sourceforge.net/svnroot/scummvm/scummvm/trunk

........
r42360 | Kirben | 2009-07-11 10:38:50 +1000 (Sat, 11 Jul 2009) | 1 line

Fix recent regression in AGOSEngine_Simon1::drawImage().
........
r42361 | wjpalenstijn | 2009-07-11 10:47:32 +1000 (Sat, 11 Jul 2009) | 3 lines

Fix SAGA outline generation algorithm for characters
that are copies of earlier characters. (5 characters in IHNM.)
This fixes #1904624.
........
r42364 | Kirben | 2009-07-11 11:40:53 +1000 (Sat, 11 Jul 2009) | 1 line

Fix bug #2819628 - DETECTOR: Atlantis CD sets wrong gui options.
........
r42365 | lordhoto | 2009-07-11 11:54:27 +1000 (Sat, 11 Jul 2009) | 1 line

Fix graphics not updating, when loading a save in Kyra1. This fixes problems when loading saves in rooms like Brynn's temple, which play animations directly on scene enter.
........
r42366 | lordhoto | 2009-07-11 11:54:42 +1000 (Sat, 11 Jul 2009) | 1 line

Removed the now uneeded 'Screen::_disableScreen' flag.
........
r42368 | dreammaster | 2009-07-11 15:10:13 +1000 (Sat, 11 Jul 2009) | 1 line

Bugfix to show the mouse cursor when restarting the game after returning to launcher
........
r42369 | dreammaster | 2009-07-11 15:12:17 +1000 (Sat, 11 Jul 2009) | 1 line

Active background screens are now properly freed when the game exits
........
r42370 | dreammaster | 2009-07-11 15:14:42 +1000 (Sat, 11 Jul 2009) | 1 line

Added initialisation of paging screens when the game starts
........
r42371 | thebluegr | 2009-07-11 16:19:29 +1000 (Sat, 11 Jul 2009) | 1 line

Fixed regression in the script parser from commit 42260
........
r42372 | thebluegr | 2009-07-11 16:33:19 +1000 (Sat, 11 Jul 2009) | 1 line

Applied a slightly modified patch from clone2727 which adds static selector names to some demos which are missing them (KQ4, LSL1, LSL3, Iceman and Christmas1992)
........
r42373 | thebluegr | 2009-07-11 16:34:25 +1000 (Sat, 11 Jul 2009) | 1 line

Removed an invalid detection entry
........
r42374 | thebluegr | 2009-07-11 16:43:01 +1000 (Sat, 11 Jul 2009) | 1 line

Applied slightly modified patch 2819002 - 'SCI: resource-view-patch on SQ5/German fix'
........
r42375 | thebluegr | 2009-07-11 16:53:39 +1000 (Sat, 11 Jul 2009) | 1 line

Applied patch 2818733 - 'SCI: Timer iterator for audio resources played via doSound'
........
r42376 | Kirben | 2009-07-11 17:03:28 +1000 (Sat, 11 Jul 2009) | 1 line

Only error out, if checkStaticSelectorNames() fails.
........
r42377 | dreammaster | 2009-07-11 18:16:55 +1000 (Sat, 11 Jul 2009) | 1 line

Bugfix to properly save the currently playing midi music when saving a scene
........
r42378 | wjpalenstijn | 2009-07-11 19:45:25 +1000 (Sat, 11 Jul 2009) | 1 line

Fix oversight in r42361 and also handle consecutive copied characters in SAGA.
........
r42380 | drmccoy | 2009-07-11 20:24:06 +1000 (Sat, 11 Jul 2009) | 1 line

Explicitely instantiate the decompressWizImage() templates, so that they won't be optimized away, as they are also used in akos.cpp
........

svn-id: r42381
"
"1c02b93b7093c436978d8ad8916dabf43cd1591e","2009-07-11 12:23:42+00:00","Fix pinball type mini game in Putt-Putt Enters The Race.

svn-id: r42382
"
"8dd34921945ea0ce7f77e6c71ec5fbafaeb77622","2009-07-11 15:00:40+00:00","SCI: don't let TimerSongIterator loop forever, and don't immediately
signal completion when starting it. This fixes a sync issue with
the departing spaceship at the start of SQ4CD (after the intro).

svn-id: r42385
"
"848b9cda03ce5417ea2c89612fc411699643ff9c","2009-07-11 16:07:14+00:00","If we fail to auto-detect either the volume or the map version, set the one to be equal to the other

svn-id: r42386
"
"4f0888b8b65531c71c7aefafd9dda0d662a0dfc1","2009-07-11 17:25:49+00:00","Removed the version parameter from GfxResManager

svn-id: r42387
"
"f0892cdcbef2dff7a9f072d2bb7df42aa3d44a14","2009-07-11 19:00:56+00:00","Some work on QFG1VGA (looks like a mix of SCI1 and SCI1.1)

svn-id: r42393
"
"116d2254119476f58b6b135b7a06a207f38fb5d0","2009-07-11 19:38:41+00:00","Changed an incorrect warning back to scidprintf - the relevant message is for testing only

svn-id: r42394
"
"6e45d0c4aee7d129d6f68013c3f09e8a7087f552","2009-07-11 22:58:29+00:00","Merged revisions 42382,42385-42387,42393-42394 via svnmerge from
https://scummvm.svn.sourceforge.net/svnroot/scummvm/scummvm/trunk

........
r42382 | Kirben | 2009-07-11 22:23:42 +1000 (Sat, 11 Jul 2009) | 1 line

Fix pinball type mini game in Putt-Putt Enters The Race.
........
r42385 | wjpalenstijn | 2009-07-12 01:00:40 +1000 (Sun, 12 Jul 2009) | 3 lines

SCI: don't let TimerSongIterator loop forever, and don't immediately
signal completion when starting it. This fixes a sync issue with
the departing spaceship at the start of SQ4CD (after the intro).
........
r42386 | thebluegr | 2009-07-12 02:07:14 +1000 (Sun, 12 Jul 2009) | 1 line

If we fail to auto-detect either the volume or the map version, set the one to be equal to the other
........
r42387 | thebluegr | 2009-07-12 03:25:49 +1000 (Sun, 12 Jul 2009) | 1 line

Removed the version parameter from GfxResManager
........
r42393 | thebluegr | 2009-07-12 05:00:56 +1000 (Sun, 12 Jul 2009) | 1 line

Some work on QFG1VGA (looks like a mix of SCI1 and SCI1.1)
........
r42394 | thebluegr | 2009-07-12 05:38:41 +1000 (Sun, 12 Jul 2009) | 1 line

Changed an incorrect warning back to scidprintf - the relevant message is for testing only
........

svn-id: r42397
"
"31a0c8090513023596351174aa48f787ca6384b3","2009-07-11 23:45:54+00:00","Moved the kernel and the vocabulary outside of the engine state (they're static data, which never changes during a game)

svn-id: r42398
"
"13a1dc0a58a33cdc974a877ccf6208890e9b4e9f","2009-07-12 05:34:46+00:00","Added a temporary work-around for PS2 backend in common/array.h
cause its vintage compiler does not support 'new T[newCapacity]()'
but only 'new T[newCapacity]', this will let it compile through.

It's ifdef'd as __PLAYSTATION2__, so it won't make a difference
for other backends with more modern tools.

svn-id: r42402
"
"17b1c6d0aed188b400c87b2959ef7339d874b913","2009-07-12 05:35:56+00:00","I am re-commiting the FORCE_RTL as a temporary solution
in trunk, so that trunk/1.0rc is au pair feature-wise
with 0.13.x.

svn-id: r42403
"
"55cda3aa258e2c214e0442ad726d964bb787cd0e","2009-07-12 05:38:08+00:00","ScummVM/PS2 bugs fixed by this commit:

- general file write corruption (eg. ScummVM.ini, etc.)

- COMI specific save crash / corruption
(added option in engines/scumm/saveload.cpp to disable
thumbnails on PS2, as emergency fallback in case the
fix should prove to be insufficient)

- implemented _screenChange logic
(fixes grabOverlay & COMI popup menu)

- fixed higher pitch (chipmunk fx)

- made NET IRXs optional to allow it to work on fat PS2 without net+hd

- fixed cursor restore on RTL

- added '.' as R2 to skip single lines of dialog

- added write cache

svn-id: r42404
"
"f278432144347c92027914530597df11bdd5a527","2009-07-12 07:23:50+00:00","Added support for sub-relation message types - this fixes trying to attach the chain to the hook on the deck

svn-id: r42405
"
"c3ce2087bb42ca43f28cdef332ee2772e6feb6c3","2009-07-12 08:51:57+00:00","Add missing quotation mark to error message.

svn-id: r42406
"
"32f1e47effadf6e361f3e6c658ca43a36f37852a","2009-07-12 14:29:59+00:00","Fix typo, which in fact fixes bug #2820353 'GUI: Search doesn't handle uppercase properly'.

svn-id: r42418
"
"d6fb5bb9227aeaf5452af722d27bdde4c6805337","2009-07-12 15:59:27+00:00","Apply patch 2802544: WINCE: Implement OSystem::engineInit to remove hack

svn-id: r42419
"
"810bbca93c54bed741dd6f4f626c4845e65ac0ba","2009-07-12 15:59:56+00:00","fix build with arm-asm routines

svn-id: r42420
"
"b0b12b60ed9c1d744ce2247b2de327c7c55bc07a","2009-07-12 16:40:10+00:00","oops, fix props

svn-id: r42421
"
"bd91c1129d5b00a1cf76d02ffc31891b26829e16","2009-07-12 18:52:38+00:00","Patch #1936137: 'Speech for Mac BS1 english'

svn-id: r42423
"
"a0c37549714a9f02351e85d3503ae129b0aae9b0","2009-07-12 21:58:00+00:00","Split _eof vs. _err.

Latter defaults to false for now, there are hooks
for possible future implementation.

svn-id: r42428
"
"973adc2772a3c84337ab8d8a871a2ddbfd6ee496","2009-07-12 22:00:47+00:00","On PS2 use 'fprintf' (as in 0.13.x ) to print error messages to stderr,
rather than 'fputs', which is buggy in the PS2 implementation.

svn-id: r42429
"
"3427fb3100c84af0d63c8f8136615489fe0c7d47","2009-07-12 22:08:10+00:00","Remove double endline

svn-id: r42430
"
"7d1badc5d53c4540cfa82f361f92a151a0f2c078","2009-07-12 23:54:46+00:00","Merged revisions 42398,42402-42406,42418-42421,42423,42428-42430 via svnmerge from
https://scummvm.svn.sourceforge.net/svnroot/scummvm/scummvm/trunk

........
r42398 | thebluegr | 2009-07-12 09:45:54 +1000 (Sun, 12 Jul 2009) | 1 line

Moved the kernel and the vocabulary outside of the engine state (they're static data, which never changes during a game)
........
r42402 | sunmax | 2009-07-12 15:34:46 +1000 (Sun, 12 Jul 2009) | 8 lines

Added a temporary work-around for PS2 backend in common/array.h
cause its vintage compiler does not support 'new T[newCapacity]()'
but only 'new T[newCapacity]', this will let it compile through.

It's ifdef'd as __PLAYSTATION2__, so it won't make a difference
for other backends with more modern tools.
........
r42403 | sunmax | 2009-07-12 15:35:56 +1000 (Sun, 12 Jul 2009) | 5 lines

I am re-commiting the FORCE_RTL as a temporary solution
in trunk, so that trunk/1.0rc is au pair feature-wise
with 0.13.x.
........
r42404 | sunmax | 2009-07-12 15:38:08 +1000 (Sun, 12 Jul 2009) | 24 lines

ScummVM/PS2 bugs fixed by this commit:

- general file write corruption (eg. ScummVM.ini, etc.)

- COMI specific save crash / corruption
(added option in engines/scumm/saveload.cpp to disable
thumbnails on PS2, as emergency fallback in case the
fix should prove to be insufficient)

- implemented _screenChange logic
(fixes grabOverlay & COMI popup menu)

- fixed higher pitch (chipmunk fx)

- made NET IRXs optional to allow it to work on fat PS2 without net+hd

- fixed cursor restore on RTL

- added '.' as R2 to skip single lines of dialog

- added write cache
........
r42405 | dreammaster | 2009-07-12 17:23:50 +1000 (Sun, 12 Jul 2009) | 1 line

Added support for sub-relation message types - this fixes trying to attach the chain to the hook on the deck
........
r42406 | lordhoto | 2009-07-12 18:51:57 +1000 (Sun, 12 Jul 2009) | 1 line

Add missing quotation mark to error message.
........
r42418 | lordhoto | 2009-07-13 00:29:59 +1000 (Mon, 13 Jul 2009) | 1 line

Fix typo, which in fact fixes bug #2820353 'GUI: Search doesn't handle uppercase properly'.
........
r42419 | knakos | 2009-07-13 01:59:27 +1000 (Mon, 13 Jul 2009) | 1 line

Apply patch 2802544: WINCE: Implement OSystem::engineInit to remove hack
........
r42420 | knakos | 2009-07-13 01:59:56 +1000 (Mon, 13 Jul 2009) | 1 line

fix build with arm-asm routines
........
r42421 | knakos | 2009-07-13 02:40:10 +1000 (Mon, 13 Jul 2009) | 1 line

oops, fix props
........
r42423 | sev | 2009-07-13 04:52:38 +1000 (Mon, 13 Jul 2009) | 2 lines

Patch #1936137: 'Speech for Mac BS1 english'
........
r42428 | sunmax | 2009-07-13 07:58:00 +1000 (Mon, 13 Jul 2009) | 6 lines

Split _eof vs. _err.

Latter defaults to false for now, there are hooks
for possible future implementation.
........
r42429 | sunmax | 2009-07-13 08:00:47 +1000 (Mon, 13 Jul 2009) | 4 lines

On PS2 use 'fprintf' (as in 0.13.x ) to print error messages to stderr,
rather than 'fputs', which is buggy in the PS2 implementation.
........
r42430 | wjpalenstijn | 2009-07-13 08:08:10 +1000 (Mon, 13 Jul 2009) | 1 line

Remove double endline
........

svn-id: r42432
"
"93c91945045b738fb098403228d91bce40b469f7","2009-07-13 00:55:30+00:00","Reverted my previous change (fprintf vs fputs),
and properly implemented fputs for stderr case
on PS2 ;-)

svn-id: r42433
"
"01624bbb28a96376701c8afcfcb7fb651ac2d8bd","2009-07-13 07:55:11+00:00","Fix bug #2820472 - MAZE: Keyboard input fault.

svn-id: r42434
"
"4ea74d7e04012abea7f2dd2c8f729ecdfbd163cf","2009-07-13 14:46:14+00:00","Add one more type of IQ-points filename (for bug #2820803)

svn-id: r42436
"
"e5c2275e80fccf1481e1287cd773ad6887607e55","2009-07-13 16:52:09+00:00","Fix for bug #2669415 (FW: half walking speed in a screen).

svn-id: r42439
"
"242b7ef7087bdfa9aa2624a39fc316a619005ad0","2009-07-13 17:09:40+00:00","Fix compilation under Windows (The fabs-calls were causing error C2668 about 'ambiguous call to overloaded function').

svn-id: r42440
"
"6723a1acd204bf06666b1915c29dd7a8e22b7fb7","2009-07-13 17:28:49+00:00","Add Drascula engine to the credits

svn-id: r42441
"
"43c7f7530a3320311294c7087d652588b137a03e","2009-07-13 17:48:13+00:00","Got rid of Screen_LoL::_paletteConvTable.

svn-id: r42443
"
"1871a2e68d377b45a3b065875faa2dd899e2d301","2009-07-13 18:31:42+00:00","Support transparent guioptions update on game launch for AdvancedMetaEngine.

svn-id: r42444
"
"88e0fc2c43a9f8b1c729bf2f509815601b4d495d","2009-07-13 18:32:03+00:00","Add transparent GUI options update for SCUMM too.

svn-id: r42445
"
"51a9bfc9e2881aa7c7ddaa9cc6b2709acab5e725","2009-07-13 18:47:32+00:00","Refactor GUI options update into a function in Common: updateGameGUIOptions.

svn-id: r42446
"
"79e03a92a5782797dd5beacef3a63ed3dbdee68d","2009-07-13 19:24:41+00:00","Removed an unneeded debug console output from initGraphics

svn-id: r42450
"
"f7a2a9170ff9cbb3b71025c51b4fd870294b5a13","2009-07-13 19:45:25+00:00","Fixed logic error in Graphics::crossBlit which would result in no blit occuring if src and dst have the same format. Converted Graphics::crossBlit to take PixelFormats by reference, instead of copying them for each call.

svn-id: r42451
"
"3ed4f388d7c3a8f162be2463cc12c4c52db88214","2009-07-13 22:08:56+00:00","Unify PS2 and non-PS2 alloc code in Common::Array code (if this causes regressions somewhere, we better find a fix that also works on PS2)

svn-id: r42455
"
"b98fdb997da257732fcbf1098f10cc3faede73d4","2009-07-13 22:11:54+00:00","tucker: fixed issues with dirty rects handling (tracker item #2597763)

svn-id: r42456
"
"230bd03913296fdf50f95af38fcaf76543408748","2009-07-13 22:19:10+00:00","tucker: added workaround for original game glitch (tracker item #2597763)

svn-id: r42458
"
"581be82b8366bca93fc3ea1c70b7aec921ad56a2","2009-07-13 22:19:33+00:00","Completed name of the creator of our logo

svn-id: r42459
"
"6f66d6a42565a803aac300eb6e8541029f682a01","2009-07-13 23:36:22+00:00","Merged revisions 42433-42434,42436,42439-42441,42443-42446,42455-42456,42458-42459 via svnmerge from
https://scummvm.svn.sourceforge.net/svnroot/scummvm/scummvm/trunk

........
r42433 | sunmax | 2009-07-13 10:55:30 +1000 (Mon, 13 Jul 2009) | 5 lines

Reverted my previous change (fprintf vs fputs),
and properly implemented fputs for stderr case
on PS2 ;-)
........
r42434 | Kirben | 2009-07-13 17:55:11 +1000 (Mon, 13 Jul 2009) | 1 line

Fix bug #2820472 - MAZE: Keyboard input fault.
........
r42436 | wjpalenstijn | 2009-07-14 00:46:14 +1000 (Tue, 14 Jul 2009) | 1 line

Add one more type of IQ-points filename (for bug #2820803)
........
r42439 | buddha_ | 2009-07-14 02:52:09 +1000 (Tue, 14 Jul 2009) | 1 line

Fix for bug #2669415 (FW: half walking speed in a screen).
........
r42440 | buddha_ | 2009-07-14 03:09:40 +1000 (Tue, 14 Jul 2009) | 1 line

Fix compilation under Windows (The fabs-calls were causing error C2668 about 'ambiguous call to overloaded function').
........
r42441 | sev | 2009-07-14 03:28:49 +1000 (Tue, 14 Jul 2009) | 2 lines

Add Drascula engine to the credits
........
r42443 | lordhoto | 2009-07-14 03:48:13 +1000 (Tue, 14 Jul 2009) | 1 line

Got rid of Screen_LoL::_paletteConvTable.
........
r42444 | lordhoto | 2009-07-14 04:31:42 +1000 (Tue, 14 Jul 2009) | 1 line

Support transparent guioptions update on game launch for AdvancedMetaEngine.
........
r42445 | lordhoto | 2009-07-14 04:32:03 +1000 (Tue, 14 Jul 2009) | 1 line

Add transparent GUI options update for SCUMM too.
........
r42446 | lordhoto | 2009-07-14 04:47:32 +1000 (Tue, 14 Jul 2009) | 1 line

Refactor GUI options update into a function in Common: updateGameGUIOptions.
........
r42455 | fingolfin | 2009-07-14 08:08:56 +1000 (Tue, 14 Jul 2009) | 1 line

Unify PS2 and non-PS2 alloc code in Common::Array code (if this causes regressions somewhere, we better find a fix that also works on PS2)
........
r42456 | cyx | 2009-07-14 08:11:54 +1000 (Tue, 14 Jul 2009) | 1 line

tucker: fixed issues with dirty rects handling (tracker item #2597763)
........
r42458 | cyx | 2009-07-14 08:19:10 +1000 (Tue, 14 Jul 2009) | 1 line

tucker: added workaround for original game glitch (tracker item #2597763)
........
r42459 | fingolfin | 2009-07-14 08:19:33 +1000 (Tue, 14 Jul 2009) | 1 line

Completed name of the creator of our logo
........

svn-id: r42462
"
"5913895ecc32b630a9645eb985940bf57f10d0e7","2009-07-13 23:42:37+00:00","Allow resource loading from EXT even if the TOT has none again

svn-id: r42463
"
"cdf751accda346f5d96e3fdfa2fd4a1b92ed4d19","2009-07-14 08:27:36+00:00","changed generic Graphics::PixelFormat constructor to take xBits instead of xLoss. Modified OSystem_SDL::getSupportedFormats and ScummEngine::init to account for this change.

svn-id: r42467
"
"dbf968b49e44cc6e0ddf5b04ba2bf1396c42cb59","2009-07-14 08:36:06+00:00","TINSEL: Don't use ioFailed to check if a file was opened succesfuly

svn-id: r42468
"
"aac58c80cc6f21c3ee7dc402520a219c3098d688","2009-07-14 08:57:55+00:00","Removing ioFailed() usage and fixing a leak in case of error

svn-id: r42469
"
"72e2b9fe5aa5ed58ae742bec39257ca7532994f1","2009-07-14 09:44:56+00:00","commit peres' patch for #2813472: BASS: 'showgrid' enabled triggers an assert

svn-id: r42470
"
"fb631a7f38eb88cf46a702eda9fe11aa310111c2","2009-07-14 10:26:56+00:00","Bugfix for player being able to walk through some objects against room walls

svn-id: r42471
"
"324ba3703b73f6b4f3ddf43c5670ceb48c3b5daf","2009-07-14 10:55:51+00:00","Bugfix to cursor updates - it previously required that both X and Y positions had changed before a cursor change could occur

svn-id: r42472
"
"fb247af301a0b77bc55950303e9f962b6a515883","2009-07-14 11:15:21+00:00","add workaround for #2687172: BASS: Occasional loss of speech

svn-id: r42473
"
"e457a3f2513529930d16636155243dfc125035bd","2009-07-14 12:34:42+00:00","Add workaround for bug #1538873 - SIMON1 (French): Text wrongly displayed.

svn-id: r42474
"
"66c0c8300354da943690becea166c96cf2ba3539","2009-07-14 12:55:54+00:00","Updated xcode project

svn-id: r42475
"
"c4437fa013af3858f3dcc0f8fb85fbec107ce6ee","2009-07-14 13:25:38+00:00","Add detection for Playtoons CK 3 (FR)

svn-id: r42476
"
"264e44d14ab5dd39584aa371c217b3c5caaa1d58","2009-07-14 13:48:31+00:00","Fix some typos and grammar in sword1's Sound::checkSpeechFileEndianness-function's comments.

svn-id: r42477
"
"e59c546187b2890b490caaa5c029e3e049340160","2009-07-14 13:50:17+00:00","Change key combination to dump all script, due to conflict.

svn-id: r42478
"
"37c7cf951a482df8281b86be74313cba65fdd520","2009-07-14 13:52:11+00:00","Split the iPhone OSystem class up into several files

svn-id: r42479
"
"cc4fb1277fdcfed48f4ac90b67b48cdaead03469","2009-07-14 13:53:54+00:00","Update workaround for bug #1538873, which effects the Polish version of Simon the Sorcerer 2 too.

svn-id: r42480
"
"845106c3b94f8b530a8e6029525fc1a0a98bba0f","2009-07-14 13:55:10+00:00","Remove last ioFailed() usage in AGOS game engine.

svn-id: r42481
"
"9a2785bc3b3829688ffceccfc6563ed4c69cdc49","2009-07-14 15:02:17+00:00","Partially fix automatic restarting of AGI games (Addresses bug #2798797 ('AGI: larry 1 doesn't restart after dying') but doesn't fully fix it. There seems to be more to the problem still. Automatic restarting after dying of an STD doesn't take away the STD-condition and Larry continues to die in a loop).

svn-id: r42482
"
"810961e685d54ed4758de770918d459e01519320","2009-07-14 15:48:05+00:00","Add detection for Playtoons 4 EN_ANY as supplied by goodoldgeorg in bug #2820006

svn-id: r42483
"
"aa50dd61e9e698e4106ac0d0ad49cf05ec9b5e19","2009-07-14 16:45:18+00:00","Got rid of ioFailed(). I haven't actually tested it, but we don't use the MPEG
decoder at the moment, and it was only used in the BACKEND_8BIT case anyway.

svn-id: r42484
"
"3f1563c8196da151f46f110d8a4ed1b7bffb36f0","2009-07-14 18:14:20+00:00","Got rid of ioFailed in font code, also added another check for err() when loading bdf fonts from text files.

svn-id: r42486
"
"96abaaea6d06dae9bc1a48dc3b3afc936a92468b","2009-07-14 18:15:07+00:00","Fix possible memory leak.

svn-id: r42487
"
"6b98c4c4e7a23089a6cccba573a1c3afd909f52d","2009-07-14 18:24:20+00:00","Got rid of some more ioFailed uses (also fixed a potential leak in graphics/font.cpp, and handle eos correctly in the FLAC code)

svn-id: r42488
"
"464ee013f0ab22616221f4f9b812ccc8932b3f2c","2009-07-14 19:32:25+00:00","Replaced char usage by int8, since char is unsigned on Linux/PPC by default.

svn-id: r42490
"
"ebe3e42fba660204c67fb3254a0c3335ecd612ea","2009-07-14 21:46:23+00:00","AGOS: Cleanup PN code a bit, trying to make sense out of it

svn-id: r42491
"
"cc60b13597b27f6c04c3c6e0ce82faa294b3c3a1","2009-07-14 21:50:22+00:00","AGOS: Fixed potential OOBA crash in AGOSEngine_PN::opn_opcode26

svn-id: r42492
"
"59b35ff5fbb00b47b473c8d0c5ff670bd500e347","2009-07-14 22:47:33+00:00","Fix graphics glitch in LoL PC98 intro.

svn-id: r42493
"
"99fc508609e0def31b9e5c7b59e28fada54c0e1e","2009-07-14 23:03:25+00:00","AGOS: Some more cleanup and added some comments to the PN code

svn-id: r42494
"
"3a3b71622ae653588ca3f1673e5674a789c6d46b","2009-07-14 23:03:40+00:00","Remove ioFailed() usage from AGI engine.

svn-id: r42495
"
"b159517dc3f55f3589bf9b7727607e7d216fde52","2009-07-15 02:06:26+00:00","Fix bug #2821215 - DIG: Skipping planetarium animation disables F5 menu.

svn-id: r42498
"
"9c06549d318be73de69e7e42ccbe49f99bbdc7cd","2009-07-15 05:00:59+00:00","Hack is no longer required, due to revision 42498.

svn-id: r42499
"
"544bf83f33d41499b14e891a8eb395e556673b97","2009-07-15 08:55:12+00:00","Created a system for inserting arbitrary code fragments into game scripts, and added an initial fragment to fix the bug of being stuck in the past in the DW1 SCN version

svn-id: r42500
"
"baabc623f6e328718f94e907ce15112ec3078305","2009-07-15 10:04:50+00:00","Got rid of two more ioFailed uses

svn-id: r42501
"
"7751cea790b962467b67d775bbbd6a6f68f2082a","2009-07-15 13:04:17+00:00","Remove ioFailed() usage from Cine engine.

svn-id: r42502
"
"11e6c92bd8e9b82a634ca300922d809e07809782","2009-07-15 13:10:29+00:00","Fix some typos in TransactionError-enumeration's comments.

svn-id: r42503
"
"a0d05a93f8cdd5e0481f9b9e1c75d861c0399064","2009-07-15 13:19:49+00:00","Fix recent PN regression in vc32_saveScreen().

svn-id: r42504
"
"62d54ae6a65bc6985bc3233d940d0ad9c9ed6371","2009-07-15 13:53:18+00:00","Add Discworld 1/2.

svn-id: r42505
"
"a9a5e20834756b071d2a3c562929e217d9339da4","2009-07-15 13:58:23+00:00","Add Cruise for a Corpse and games from MADE engine.

svn-id: r42506
"
"6b3c3a8a12d9ef7caa316f63d62f92c0ed606881","2009-07-15 15:51:47+00:00","Bugfix: Disallow GMM Save/Load while in kyragem scene.

svn-id: r42507
"
"7b55b5f5e2dbfd59a5936cb4671060d7b3b6ff81","2009-07-15 17:07:45+00:00","Fix 'search' filter being settings lost in launcher, when using the 'Edit Game...' menu for example.

svn-id: r42510
"
"6a15e14d3ff0804efb08020c86c60c6c818aa1b4","2009-07-15 17:23:27+00:00","Fix bug, which caused the ListWidget to draw a widget background around the selected item, when the ListWidget had no focus.

svn-id: r42511
"
"6a26f1b56f0317af4099c978a5cd1511d7fbcb7c","2009-07-15 18:05:37+00:00","For a smoother user experience, use different colors for inverted text of the ListWidget, depending on whether the widget has focus or not.

svn-id: r42512
"
"249b4eb4c35b2f7cea8811bbdc7b13eaaaae68fc","2009-07-15 18:08:54+00:00","Fix formatting of some switch statements.

svn-id: r42513
"
"caae53a25a15983e98936f9b6f182b49d3062ccf","2009-07-15 20:51:31+00:00","New ARM code blending Smartphone landscale scaler for WinCE port. Seems to work
in my mockup - I don't have a smartphone resolution device to test it.

svn-id: r42516
"
"5e38ecbdcbbb4fc0de90137b63fe3979d5d5fcd6","2009-07-15 22:19:16+00:00","Fix ugly spacing between tabs in classic theme (as reported by sunmax on -devel).

svn-id: r42517
"
"c9ebf96d65fb983141c7c544d8cafc346dd2310c","2009-07-15 22:19:31+00:00","Slightly brighten up the active tab color in the modern theme.

svn-id: r42518
"
"aeb2aa6630b49a89992e4f317610b3275ee80ed6","2009-07-16 02:27:26+00:00","Game script fix for bug #2525010 - in the GRA version, the luggage blocked Rincewind's exit from the Inn, leaving him in a non-walkable area

svn-id: r42521
"
"b04e3e79406031001cd80b40fb21b8f2ca0c5af8","2009-07-16 04:06:35+00:00","Added no blocking fix for Present Outside Inn scene as well

svn-id: r42522
"
"00dbbedbad2c3d58f972733a4f0d46935c32887a","2009-07-16 08:13:08+00:00","Added a detection entry for Pepper's Adventures in Time, and fixed an issue with _gfxop_set_pic(), which was causing crashes in that game

svn-id: r42523
"
"efc5f80f5141f42b0d3d1144134d4b883d387522","2009-07-16 08:17:38+00:00","Added the French version of KQ5 floppy (bug report #2812611)

svn-id: r42524
"
"52ed2fe04ce0d4fe21a9ba7af458fe4b33a859e5","2009-07-16 08:21:06+00:00","Added missing information for the newly-added version of Pepper

svn-id: r42525
"
"f01bd0e9a3277909f85a55b88379348c7bbbebbc","2009-07-16 09:31:31+00:00","Added game script fix for bug #2680397 - game hang when using the brochure on the Beekeeper

svn-id: r42527
"
"19e8b39249df45c99bf1a42782664a2a0588c1db","2009-07-16 09:53:19+00:00","Prior script fix also fixes bug #2820788, with stealing wizard's mallets

svn-id: r42528
"
"40d8209bca78b548e41f5895da7febe61152b92c","2009-07-16 11:37:36+00:00","Fixed issue with beveled shapes being drawn outside their shapes. Possible regressions.

svn-id: r42529
"
"16c949d24ae9674158b782c483408be6953cc750","2009-07-16 11:41:45+00:00","Formatting.

svn-id: r42530
"
"a6c41a375fd1ae3395b9662207993739388a5ea0","2009-07-16 11:42:07+00:00","Update classic and builtin theme after r42529.

svn-id: r42531
"
"645e6baa07e71d10b76f3f0fd0950c2e0513a23c","2009-07-16 12:43:42+00:00","Added a proper fix for Pepper (the previous one caused regressions in KQ6)

svn-id: r42533
"
"ff75d68f1ca292733b601b33ab3cfe4aab670174","2009-07-16 17:26:44+00:00","Fixed GCC warning.

svn-id: r42536
"
"af289bdb03d7f0a5e8f01c03e462f230835e0077","2009-07-16 17:29:31+00:00","Fixed bug 2820514 ('Help dialog causes crash')

svn-id: r42537
"
"2422ee06a25a82ce5367a2c36cb72422f61343e8","2009-07-16 17:39:16+00:00","Formatting fixes.

svn-id: r42538
"
"1e3beb40c04ef323f5354e4258659764735fdb0c","2009-07-16 17:44:05+00:00","This commit is just for DrMcCoy. (forgot to fix two usages of whitespaces instead of tabs for indentation -.-)

svn-id: r42539
"
"62de2d9edc7eb51240d944e7a3bfcf894519f5d4","2009-07-16 17:51:12+00:00","Fixed bug: In-game console doesn't stay centered when switching resolutions on the fly.

svn-id: r42540
"
"572b0e6c03ba17f91cb2e0d257939ecf7cbc0eaf","2009-07-16 21:47:57+00:00","Fix bug in 'KyraEngine_v2::runSceneScript6', fixes text line Zanthia says, when picking up the spellbook page in the town.

svn-id: r42543
"
"c0965b2a2aceab1468bccf5368b3c46f7a97efa1","2009-07-17 00:10:10+00:00","Fix using subtitles only setting in The Dig.

svn-id: r42545
"
"cff307e55db7cfe088885214bfc75b545223f9bd","2009-07-17 00:25:27+00:00","Fix bug #2821986 - COMI: setting to 'subtitles only' does not disable speech.

svn-id: r42548
"
"922f721108b2a77c47add7055ff4fb5119f1c745","2009-07-17 00:55:42+00:00","Added some more debug warnings when resources can't be loaded

svn-id: r42551
"
"6c4e87a1d889ffdb6c97393d6d31db3138c291c8","2009-07-17 00:55:56+00:00","Making TOTResourceItem::size unsigned, fixing a graphics bug that crept in

svn-id: r42552
"
"db81b0a1853fa8212bedda90429d180f0fe34297","2009-07-17 05:10:24+00:00","Added an explicit break out of the event processing loop for mouse buttons and/or key-presses - this should allow stylus-based systems to properly process 'mouse down' events before the 'mouse up' is processed

svn-id: r42558
"
"d329232f5c084193ab8eac3711ae141df54a9793","2009-07-17 06:26:37+00:00","Fix input glitch regression, after pausing in PN.

svn-id: r42559
"
"74178f090cf5ac8e692c9c6345b436e33f629104","2009-07-17 09:56:03+00:00","Fix bug #2822956 - ELVIRA2: Crash at the beginning (regression).

svn-id: r42560
"
"9f2f04120058c9a712088430c558c1ce6766af6a","2009-07-17 10:48:30+00:00","Correct error in saveBackGround.

svn-id: r42561
"
"799af694f0945cce3cebd729dd10e12f2a9c4510","2009-07-17 13:35:56+00:00","Replace LGPL header by GPL header.

svn-id: r42563
"
"c353e5389b98cc3d7753aa7bcb5b07d7efc4de0b","2009-07-17 13:50:59+00:00","- Moved SoundAdlibPC definition to new header file sound_adlib.h
- Made the future versions of sound.h GPL only
- sound_adlib.h is dual licensed under GPL and LGPL (so AdPlug can still benefit from future changes)

svn-id: r42564
"
"53756ef1d022a959b24c041e18f55eef34e60dd3","2009-07-17 14:05:22+00:00","Cleanup.

svn-id: r42565
"
"df52a5d58ea5bedba031aed900e228a75eef7c58","2009-07-17 19:22:12+00:00","Adding a workaround for the vanishing Coh Cott bug (#1972466), which is actually an error in that video file

svn-id: r42570
"
"025702ba4084dcad8dbe65c07a718f086320c19c","2009-07-17 20:03:41+00:00","/Finally/ fixing the longstanding flicker bug in Woodruff. I was completely mistaken about its cause, too

svn-id: r42572
"
"aa98f944fe87e21870f375581541926913a4ac82","2009-07-18 00:53:31+00:00","Merged revisions 42463,42468-42484,42486-42488,42490-42495,42498-42507,42510-42513,42516-42518,42521-42525,42527-42531,42533,42536-42540,42543,42545,42548,42551-42552,42558-42561,42563-42565,42570,42572 via svnmerge from
https://scummvm.svn.sourceforge.net/svnroot/scummvm/scummvm/trunk

........
r42463 | drmccoy | 2009-07-14 09:42:37 +1000 (Tue, 14 Jul 2009) | 1 line

Allow resource loading from EXT even if the TOT has none again
........
r42468 | fingolfin | 2009-07-14 18:36:06 +1000 (Tue, 14 Jul 2009) | 1 line

TINSEL: Don't use ioFailed to check if a file was opened succesfuly
........
r42469 | drmccoy | 2009-07-14 18:57:55 +1000 (Tue, 14 Jul 2009) | 1 line

Removing ioFailed() usage and fixing a leak in case of error
........
r42470 | joostp | 2009-07-14 19:44:56 +1000 (Tue, 14 Jul 2009) | 2 lines

commit peres' patch for #2813472: BASS: 'showgrid' enabled triggers an assert
........
r42471 | dreammaster | 2009-07-14 20:26:56 +1000 (Tue, 14 Jul 2009) | 1 line

Bugfix for player being able to walk through some objects against room walls
........
r42472 | dreammaster | 2009-07-14 20:55:51 +1000 (Tue, 14 Jul 2009) | 1 line

Bugfix to cursor updates - it previously required that both X and Y positions had changed before a cursor change could occur
........
r42473 | joostp | 2009-07-14 21:15:21 +1000 (Tue, 14 Jul 2009) | 2 lines

add workaround for #2687172: BASS: Occasional loss of speech
........
r42474 | Kirben | 2009-07-14 22:34:42 +1000 (Tue, 14 Jul 2009) | 1 line

Add workaround for bug #1538873 - SIMON1 (French): Text wrongly displayed.
........
r42475 | vinterstum | 2009-07-14 22:55:54 +1000 (Tue, 14 Jul 2009) | 1 line

Updated xcode project
........
r42476 | strangerke | 2009-07-14 23:25:38 +1000 (Tue, 14 Jul 2009) | 1 line

Add detection for Playtoons CK 3 (FR)
........
r42477 | buddha_ | 2009-07-14 23:48:31 +1000 (Tue, 14 Jul 2009) | 1 line

Fix some typos and grammar in sword1's Sound::checkSpeechFileEndianness-function's comments.
........
r42478 | Kirben | 2009-07-14 23:50:17 +1000 (Tue, 14 Jul 2009) | 1 line

Change key combination to dump all script, due to conflict.
........
r42479 | vinterstum | 2009-07-14 23:52:11 +1000 (Tue, 14 Jul 2009) | 1 line

Split the iPhone OSystem class up into several files
........
r42480 | Kirben | 2009-07-14 23:53:54 +1000 (Tue, 14 Jul 2009) | 1 line

Update workaround for bug #1538873, which effects the Polish version of Simon the Sorcerer 2 too.
........
r42481 | Kirben | 2009-07-14 23:55:10 +1000 (Tue, 14 Jul 2009) | 1 line

Remove last ioFailed() usage in AGOS game engine.
........
r42482 | buddha_ | 2009-07-15 01:02:17 +1000 (Wed, 15 Jul 2009) | 1 line

Partially fix automatic restarting of AGI games (Addresses bug #2798797 ('AGI: larry 1 doesn't restart after dying') but doesn't fully fix it. There seems to be more to the problem still. Automatic restarting after dying of an STD doesn't take away the STD-condition and Larry continues to die in a loop).
........
r42483 | strangerke | 2009-07-15 01:48:05 +1000 (Wed, 15 Jul 2009) | 1 line

Add detection for Playtoons 4 EN_ANY as supplied by goodoldgeorg in bug #2820006
........
r42484 | eriktorbjorn | 2009-07-15 02:45:18 +1000 (Wed, 15 Jul 2009) | 3 lines

Got rid of ioFailed(). I haven't actually tested it, but we don't use the MPEG
decoder at the moment, and it was only used in the BACKEND_8BIT case anyway.
........
r42486 | lordhoto | 2009-07-15 04:14:20 +1000 (Wed, 15 Jul 2009) | 1 line

Got rid of ioFailed in font code, also added another check for err() when loading bdf fonts from text files.
........
r42487 | lordhoto | 2009-07-15 04:15:07 +1000 (Wed, 15 Jul 2009) | 1 line

Fix possible memory leak.
........
r42488 | fingolfin | 2009-07-15 04:24:20 +1000 (Wed, 15 Jul 2009) | 1 line

Got rid of some more ioFailed uses (also fixed a potential leak in graphics/font.cpp, and handle eos correctly in the FLAC code)
........
r42490 | lordhoto | 2009-07-15 05:32:25 +1000 (Wed, 15 Jul 2009) | 2 lines

Replaced char usage by int8, since char is unsigned on Linux/PPC by default.
........
r42491 | fingolfin | 2009-07-15 07:46:23 +1000 (Wed, 15 Jul 2009) | 1 line

AGOS: Cleanup PN code a bit, trying to make sense out of it
........
r42492 | fingolfin | 2009-07-15 07:50:22 +1000 (Wed, 15 Jul 2009) | 1 line

AGOS: Fixed potential OOBA crash in AGOSEngine_PN::opn_opcode26
........
r42493 | lordhoto | 2009-07-15 08:47:33 +1000 (Wed, 15 Jul 2009) | 1 line

Fix graphics glitch in LoL PC98 intro.
........
r42494 | fingolfin | 2009-07-15 09:03:25 +1000 (Wed, 15 Jul 2009) | 1 line

AGOS: Some more cleanup and added some comments to the PN code
........
r42495 | buddha_ | 2009-07-15 09:03:40 +1000 (Wed, 15 Jul 2009) | 1 line

Remove ioFailed() usage from AGI engine.
........
r42498 | Kirben | 2009-07-15 12:06:26 +1000 (Wed, 15 Jul 2009) | 1 line

Fix bug #2821215 - DIG: Skipping planetarium animation disables F5 menu.
........
r42499 | Kirben | 2009-07-15 15:00:59 +1000 (Wed, 15 Jul 2009) | 1 line

Hack is no longer required, due to revision 42498.
........
r42500 | dreammaster | 2009-07-15 18:55:12 +1000 (Wed, 15 Jul 2009) | 1 line

Created a system for inserting arbitrary code fragments into game scripts, and added an initial fragment to fix the bug of being stuck in the past in the DW1 SCN version
........
r42501 | fingolfin | 2009-07-15 20:04:50 +1000 (Wed, 15 Jul 2009) | 1 line

Got rid of two more ioFailed uses
........
r42502 | buddha_ | 2009-07-15 23:04:17 +1000 (Wed, 15 Jul 2009) | 1 line

Remove ioFailed() usage from Cine engine.
........
r42503 | buddha_ | 2009-07-15 23:10:29 +1000 (Wed, 15 Jul 2009) | 1 line

Fix some typos in TransactionError-enumeration's comments.
........
r42504 | Kirben | 2009-07-15 23:19:49 +1000 (Wed, 15 Jul 2009) | 1 line

Fix recent PN regression in vc32_saveScreen().
........
r42505 | Kirben | 2009-07-15 23:53:18 +1000 (Wed, 15 Jul 2009) | 1 line

Add Discworld 1/2.
........
r42506 | Kirben | 2009-07-15 23:58:23 +1000 (Wed, 15 Jul 2009) | 1 line

Add Cruise for a Corpse and games from MADE engine.
........
r42507 | lordhoto | 2009-07-16 01:51:47 +1000 (Thu, 16 Jul 2009) | 1 line

Bugfix: Disallow GMM Save/Load while in kyragem scene.
........
r42510 | lordhoto | 2009-07-16 03:07:45 +1000 (Thu, 16 Jul 2009) | 1 line

Fix 'search' filter being settings lost in launcher, when using the 'Edit Game...' menu for example.
........
r42511 | lordhoto | 2009-07-16 03:23:27 +1000 (Thu, 16 Jul 2009) | 1 line

Fix bug, which caused the ListWidget to draw a widget background around the selected item, when the ListWidget had no focus.
........
r42512 | lordhoto | 2009-07-16 04:05:37 +1000 (Thu, 16 Jul 2009) | 1 line

For a smoother user experience, use different colors for inverted text of the ListWidget, depending on whether the widget has focus or not.
........
r42513 | lordhoto | 2009-07-16 04:08:54 +1000 (Thu, 16 Jul 2009) | 1 line

Fix formatting of some switch statements.
........
r42516 | robinwatts | 2009-07-16 06:51:31 +1000 (Thu, 16 Jul 2009) | 4 lines

New ARM code blending Smartphone landscale scaler for WinCE port. Seems to work
in my mockup - I don't have a smartphone resolution device to test it.
........
r42517 | lordhoto | 2009-07-16 08:19:16 +1000 (Thu, 16 Jul 2009) | 1 line

Fix ugly spacing between tabs in classic theme (as reported by sunmax on -devel).
........
r42518 | lordhoto | 2009-07-16 08:19:31 +1000 (Thu, 16 Jul 2009) | 1 line

Slightly brighten up the active tab color in the modern theme.
........
r42521 | dreammaster | 2009-07-16 12:27:26 +1000 (Thu, 16 Jul 2009) | 1 line

Game script fix for bug #2525010 - in the GRA version, the luggage blocked Rincewind's exit from the Inn, leaving him in a non-walkable area
........
r42522 | dreammaster | 2009-07-16 14:06:35 +1000 (Thu, 16 Jul 2009) | 1 line

Added no blocking fix for Present Outside Inn scene as well
........
r42523 | thebluegr | 2009-07-16 18:13:08 +1000 (Thu, 16 Jul 2009) | 1 line

Added a detection entry for Pepper's Adventures in Time, and fixed an issue with _gfxop_set_pic(), which was causing crashes in that game
........
r42524 | thebluegr | 2009-07-16 18:17:38 +1000 (Thu, 16 Jul 2009) | 1 line

Added the French version of KQ5 floppy (bug report #2812611)
........
r42525 | thebluegr | 2009-07-16 18:21:06 +1000 (Thu, 16 Jul 2009) | 1 line

Added missing information for the newly-added version of Pepper
........
r42527 | dreammaster | 2009-07-16 19:31:31 +1000 (Thu, 16 Jul 2009) | 1 line

Added game script fix for bug #2680397 - game hang when using the brochure on the Beekeeper
........
r42528 | dreammaster | 2009-07-16 19:53:19 +1000 (Thu, 16 Jul 2009) | 1 line

Prior script fix also fixes bug #2820788, with stealing wizard's mallets
........
r42529 | tanoku | 2009-07-16 21:37:36 +1000 (Thu, 16 Jul 2009) | 2 lines

Fixed issue with beveled shapes being drawn outside their shapes. Possible regressions.
........
r42530 | lordhoto | 2009-07-16 21:41:45 +1000 (Thu, 16 Jul 2009) | 1 line

Formatting.
........
r42531 | lordhoto | 2009-07-16 21:42:07 +1000 (Thu, 16 Jul 2009) | 1 line

Update classic and builtin theme after r42529.
........
r42533 | thebluegr | 2009-07-16 22:43:42 +1000 (Thu, 16 Jul 2009) | 1 line

Added a proper fix for Pepper (the previous one caused regressions in KQ6)
........
r42536 | eriktorbjorn | 2009-07-17 03:26:44 +1000 (Fri, 17 Jul 2009) | 2 lines

Fixed GCC warning.
........
r42537 | tanoku | 2009-07-17 03:29:31 +1000 (Fri, 17 Jul 2009) | 2 lines

Fixed bug 2820514 ('Help dialog causes crash')
........
r42538 | lordhoto | 2009-07-17 03:39:16 +1000 (Fri, 17 Jul 2009) | 1 line

Formatting fixes.
........
r42539 | lordhoto | 2009-07-17 03:44:05 +1000 (Fri, 17 Jul 2009) | 1 line

This commit is just for DrMcCoy. (forgot to fix two usages of whitespaces instead of tabs for indentation -.-)
........
r42540 | tanoku | 2009-07-17 03:51:12 +1000 (Fri, 17 Jul 2009) | 2 lines

Fixed bug: In-game console doesn't stay centered when switching resolutions on the fly.
........
r42543 | lordhoto | 2009-07-17 07:47:57 +1000 (Fri, 17 Jul 2009) | 1 line

Fix bug in 'KyraEngine_v2::runSceneScript6', fixes text line Zanthia says, when picking up the spellbook page in the town.
........
r42545 | Kirben | 2009-07-17 10:10:10 +1000 (Fri, 17 Jul 2009) | 1 line

Fix using subtitles only setting in The Dig.
........
r42548 | Kirben | 2009-07-17 10:25:27 +1000 (Fri, 17 Jul 2009) | 1 line

Fix bug #2821986 - COMI: setting to 'subtitles only' does not disable speech.
........
r42551 | drmccoy | 2009-07-17 10:55:42 +1000 (Fri, 17 Jul 2009) | 1 line

Added some more debug warnings when resources can't be loaded
........
r42552 | drmccoy | 2009-07-17 10:55:56 +1000 (Fri, 17 Jul 2009) | 1 line

Making TOTResourceItem::size unsigned, fixing a graphics bug that crept in
........
r42558 | dreammaster | 2009-07-17 15:10:24 +1000 (Fri, 17 Jul 2009) | 1 line

Added an explicit break out of the event processing loop for mouse buttons and/or key-presses - this should allow stylus-based systems to properly process 'mouse down' events before the 'mouse up' is processed
........
r42559 | Kirben | 2009-07-17 16:26:37 +1000 (Fri, 17 Jul 2009) | 1 line

Fix input glitch regression, after pausing in PN.
........
r42560 | Kirben | 2009-07-17 19:56:03 +1000 (Fri, 17 Jul 2009) | 1 line

Fix bug #2822956 - ELVIRA2: Crash at the beginning (regression).
........
r42561 | Kirben | 2009-07-17 20:48:30 +1000 (Fri, 17 Jul 2009) | 1 line

Correct error in saveBackGround.
........
r42563 | lordhoto | 2009-07-17 23:35:56 +1000 (Fri, 17 Jul 2009) | 1 line

Replace LGPL header by GPL header.
........
r42564 | lordhoto | 2009-07-17 23:50:59 +1000 (Fri, 17 Jul 2009) | 3 lines

- Moved SoundAdlibPC definition to new header file sound_adlib.h
- Made the future versions of sound.h GPL only
- sound_adlib.h is dual licensed under GPL and LGPL (so AdPlug can still benefit from future changes)
........
r42565 | lordhoto | 2009-07-18 00:05:22 +1000 (Sat, 18 Jul 2009) | 1 line

Cleanup.
........
r42570 | drmccoy | 2009-07-18 05:22:12 +1000 (Sat, 18 Jul 2009) | 1 line

Adding a workaround for the vanishing Coh Cott bug (#1972466), which is actually an error in that video file
........
r42572 | drmccoy | 2009-07-18 06:03:41 +1000 (Sat, 18 Jul 2009) | 1 line

/Finally/ fixing the longstanding flicker bug in Woodruff. I was completely mistaken about its cause, too
........

svn-id: r42576
"
"6235f9e176c4819c0dc17ad777e661a9c04cbe75","2009-07-18 01:22:43+00:00","Minor tweak to prevent mouse clicks that close a user wait message also being further interpreted as a user walk destination

svn-id: r42578
"
"a1bb715611468ddaef29efe1c51358928bf7b9bc","2009-07-18 12:51:12+00:00","SCI: Fix stepping in debugger

svn-id: r42587
"
"049a636abc1d61a40a786b5643ebf5449f9c45ef","2009-07-18 13:05:36+00:00","Adding a workaround for the guard house card game 'game over' screen in Woodruff

svn-id: r42588
"
"d9c2544a4c5ad3127c7c5046375d342a349489eb","2009-07-18 13:05:39+00:00","SCI: don't leave debugger after bt

svn-id: r42589
"
"1d40f7849965e8b758b88197820daf9c6af4d120","2009-07-18 13:39:21+00:00","Add workaround for bug #1668393 - ZAK FM-TOWNS: Crash when entering Hostel from outside.

svn-id: r42590
"
"24e18ae2154e7affb87368f09d5a4ebf78d2430e","2009-07-18 15:11:19+00:00","AGOS: Fixed backspace under OS X in Personal Nightmare

svn-id: r42591
"
"2250ff1df68bcd37f37ca2d37f5768ff1037219b","2009-07-18 15:12:54+00:00","AGOS: Get rid of one setjmp in PN code (needs testing)

svn-id: r42592
"
"48e065a0ad46613e276312e1f074068f95a05644","2009-07-18 15:15:26+00:00","AGOS: Removed second setjmp in PN code (untested!)

svn-id: r42593
"
"d362ca86f6fbb4c4f12485ed3ef013713709bd9a","2009-07-18 21:26:44+00:00","add '-IQ' suffix test to SO_LOAD_STRING (same as SO_SAVE_STRING) ; fixes french version of atlantis

svn-id: r42596
"
"66b565c9c2db447b3080d781ca60c12f78348dbf","2009-07-18 22:17:56+00:00","Fix crash in tab completion if one command is a prefix of another.

svn-id: r42597
"
"57504cb699c98d3257d5cb39aa6971b6aacf211c","2009-07-18 22:19:07+00:00","SCI: Fix disasm_addr option parsing

svn-id: r42598
"
"8cb1cbfa7ab261054815bf768f34b62ebbf3bd8a","2009-07-18 22:46:07+00:00","SCI: Fix breakpoints

svn-id: r42599
"
"29cd90ec1baf3b4fa6b20673dc957884ec6bf910","2009-07-19 09:09:56+00:00","Add patch #2823590 - Fix music crashes in Waxworks (PC).

svn-id: r42606
"
"bcd98e59e00d18ecab829a1fe2a8fdd98efbd07c","2009-07-19 09:13:17+00:00","Update Waxworks.

svn-id: r42608
"
"3c8e328e5cfdecd54b38a4cd239d6a294025b03b","2009-07-19 10:50:14+00:00","SCI: check shouldQuit() in main loop

svn-id: r42609
"
"c9ac83c2c0537e633a82e194c645ddfb2d6b621a","2009-07-19 11:07:17+00:00","fix bug #2597980 - TUCKER: Sprite glitch

svn-id: r42610
"
"6e5063aed210984e0f6bdebcb5be2d8b2fc2d69a","2009-07-19 12:52:19+00:00","Added the GUIO_NOSFX and GUIO_NOMUSIC flags to the first Discworld 1 demo entry

svn-id: r42611
"
"5b16cab6191093c1f078a719113cb3f2eae3b229","2009-07-19 14:03:35+00:00","Change generic save game name.

svn-id: r42614
"
"c313396aac7bdd3a477c7be022ecf49625b79b55","2009-07-19 14:46:11+00:00","remove dead code leftover

svn-id: r42615
"
"52a160657f4db676e30b6d52abbf513154aad662","2009-07-19 15:00:39+00:00","Fix 16bit color when using the hardware screen's pixel format. The call was never updated after r42467.

svn-id: r42617
"
"4bd5023d235462ccc559f26422f7ba4e6d31ce47","2009-07-19 16:10:55+00:00","whoops, fix non-arm build (why? :-) )

svn-id: r42619
"
"00af395ab6a07250c7f3e7b8870cf328c72cde47","2009-07-19 21:06:25+00:00","Fix compilation with USE_CONSOLE = 0

svn-id: r42623
"
"9e3d42c0cf93cb45126166c43294be710ec1fed7","2009-07-20 05:02:17+00:00","AGOS: Fixed badload(); some whitespace cleanup

svn-id: r42624
"
"0e2f2673297431a4b1c47495de6db972c9ad033e","2009-07-20 08:31:40+00:00","Moved new ports section to more appropriate place. And force buildbot to
recompile :)

svn-id: r42625
"
"b40dc424b3ec2121b6cc62f3648d014f25583256","2009-07-20 09:19:27+00:00","Bugfix for hangs on scene changes in Discworld 1 after having loaded a savegame from the GMM when the title screens are displayed

svn-id: r42626
"
"f9208f1bb0e083a4e7ebc30051599cdbfbcf9d26","2009-07-20 20:55:28+00:00","Make ScummFile::eos() consistent with Stream::eos().
Remove usage of ioFailed from SCUMM engine.
Fix reading up to the end of a SCUMM SubFile.
This hopefully fixes #2820957.

svn-id: r42632
"
"6e6d5e8b989d6bdaa05bbd52b6cc1dde1af42f3f","2009-07-20 20:59:35+00:00","Fixing bug #2823854: Mickey's space adventure crash. There's one too many space characters in a string which causes it to be drawn off the screen.

svn-id: r42633
"
"3f6159a968fcf7fc850b8b0873c32239b668f819","2009-07-20 22:15:37+00:00","Proper implementation of microscope puzzle.

svn-id: r42634
"
"5585e181233856bc47f963c1f56ff8bd7807f861","2009-07-20 22:26:41+00:00","Fix gcc warning (hopefully this is correct).

svn-id: r42635
"
"004b313ae0cbacad98bbc7ee3ae82bcb5ef1780c","2009-07-21 07:02:18+00:00","Update GUI flags for AGOS game engine.

svn-id: r42636
"
"4c797d57d0ce45532e1fd3dc144ba271f2f5f86c","2009-07-21 09:39:58+00:00","Use a BufferedReadStream to buffer ArjFile's input to reduce memory usage

svn-id: r42637
"
"66311e32484d5fd5e18766125c4f09ed0604314f","2009-07-21 10:37:58+00:00","Fix fade effects in Waxworks.

svn-id: r42638
"
"fd63d8c95a7e15e2f1511cfa6dcc9724580bf757","2009-07-21 10:48:32+00:00","Fix bug #2823818 - GUI: unable to select subtitles and speech for Simon 2.

svn-id: r42639
"
"87af626ee91838ecab882cd4deabc1e625c2cf55","2009-07-21 11:26:31+00:00","Making some static const uint32s public, older GCC versions don't seem to like nested classes to access their parents' protected members

svn-id: r42640
"
"4f431e8952d3dd70c4eb07cf18d365329efbb97a","2009-07-21 11:58:58+00:00","Fixing 'Game 'hangs' after first level' (bug #2824414)

svn-id: r42641
"
"3a3e7acf5190b1231211dcaa9ac5273623ed9a3a","2009-07-21 12:14:36+00:00","Fixing the text input in Gob1 (the loading code wasn't printed as you typed anymore)

svn-id: r42642
"
"64ebb586cdd3ab2f2fb34b51cc89a9f4b8d5cc54","2009-07-21 19:39:24+00:00","Add ARM code implementation of Scaler2x, and enable it for the WinCE
port.

svn-id: r42645
"
"227f4a575f8802e05d58eb1dbb8033c64d0af48d","2009-07-22 09:52:44+00:00","Simplify fade code.

svn-id: r42654
"
"f4916b9830e4b784b8d180c151be355ecf9de72e","2009-07-22 10:23:58+00:00","Change the default target to CD version, for games which offer floppy and CD versions. So all GUI options are still available in fan translations.

svn-id: r42655
"
"d4c13b40a535f1269b774fd7ac4309ce66d3a18d","2009-07-22 10:32:35+00:00","Update video script debug table for Waxworks.

svn-id: r42656
"
"7c1df4cbff0fc63123f907741ca1c5fefc1af791","2009-07-22 11:48:51+00:00","Fix bug #2823762: 'AGI: PQ1 All function keys are broken after restart'

svn-id: r42658
"
"88395007fbf7efe248f742794c0fd1d280253789","2009-07-22 12:24:55+00:00","Fix bug #2823759: 'AGI: PQ1 help not showing the first time you press F1'

svn-id: r42659
"
"d106fca42bd9a1dc0a59920cc84bfc5a26e446fc","2009-07-22 12:36:08+00:00","Mention microscope puzzle improvement in T7G

svn-id: r42660
"
"9bd355acf81ac30c06418ad6026bf39b73e87722","2009-07-22 12:38:34+00:00","Since Kyra PC98 version is japanese only don't mention it explicitly.

svn-id: r42661
"
"483a4c0eebd0eb65fa64c87b935c53fdfe3693fd","2009-07-22 15:55:33+00:00","Move functions from agi.cpp to more appropriate files.

svn-id: r42662
"
"0932497cca79bba4f10c8443b2a0d45837310946","2009-07-22 16:26:53+00:00","Fix bug #2798797: 'AGI: larry 1 doesn't restart after dying'

svn-id: r42663
"
"9b031982cf3931c18d0804f23a3fe6779a6204d1","2009-07-22 19:25:53+00:00","Fix bug #1745396: 'MI: Saved game from the credits sequence fails to load'.

Now we specifically disallow saves in room 0 for all v4+ games. Original
has exactly this check in all versions, and such games are impossible to load.

Still the problem is not resolved for v0-v3 and HE games.

svn-id: r42664
"
"4e71153249c5f2337fced281ccf47f2f7f6463b4","2009-07-22 20:37:48+00:00","Fix bug #2825252: 'GUI: Low Res Bugs'

svn-id: r42668
"
"fad11ade6efbfcbd61c4398fb2f077a278057334","2009-07-23 05:48:20+00:00","Simplify the code to check whether loading or saving a game is possible.

svn-id: r42671
"
"46be9c3a1c0cce6b7d5888eeb46398decd6ff466","2009-07-23 05:57:00+00:00","Simplify the code to check whether loading or saving a game is possible.

svn-id: r42672
"
"870e0341bb0ae1c35f69b02b636ccf6d27f9030d","2009-07-23 07:49:28+00:00","Correct error in revision 26678.

svn-id: r42673
"
"68a75c21706928ed8bc20ac96b957e388926ee83","2009-07-23 10:31:06+00:00","Remove keyboard support for mouse buttons, since it interferes with load/save scripts in HE games and input scripts in others games (COMI, FT). It isn't much use anyway, since we dropped support for cursor movement via keyboard long ago.

svn-id: r42674
"
"c8d7b677f864dde05a5544d3b0cb6cac3c22fcbe","2009-07-23 10:33:13+00:00","Fix bug #1726909 - HE Games: Glitches after loading saved games, by restircting HE games to their original load/save interface.

svn-id: r42675
"
"53783575d8291c9cf29db6c78029c2a5ac977081","2009-07-23 10:49:30+00:00","Bugfix for player blocking room entrance causing NPCs trying to enter getting an excessive number of action entries

svn-id: r42676
"
"33929b5248c754d10b018e6f87b9ebe99c968c02","2009-07-23 10:54:12+00:00","Only autosave in supported scenes.

svn-id: r42677
"
"01b8320367f48456471a6f91a47b2dacdd871b57","2009-07-23 19:50:13+00:00","Fixing a bug in the V4 save file handler, produced by a 'neat' feature in Woodruff: The saves remember their position within the list and use that information to load the 'correct' screen properties, making it impossible to load reordered saves correctly -.-

svn-id: r42679
"
"211869d02e69f48479357d0ea8c851f069ce9452","2009-07-24 04:59:21+00:00","Bear Stormin' is the full mini game, and not a demo.

svn-id: r42681
"
"3efecb3afcc5043703c4ab28bac5406f351a0794","2009-07-24 05:20:44+00:00","Fix cursor position, when entering a save game name in HE games.

svn-id: r42685
"
"c78ed9e4233b80ecd2706d0ffda01fd069a6e6ef","2009-07-24 10:45:25+00:00","Adding transparency for VMD video block type 2, fixing bug #2037158 ('n-Game animation shifted(?)'). The problem was that the animation in question has an one pixel wide transparent bar on the left

svn-id: r42690
"
"171061894b8dd1903ab2dbe212b2e4ea7690b9d5","2009-07-24 12:28:53+00:00","Add workaround for bug #2826144 - SAM: Game hangs when talking to bigfoot guard.

svn-id: r42693
"
"035dad7b3c91da84d23e682cc11897d05e12b319","2009-07-24 13:30:26+00:00","Adjust workaround for bug #2826144, to use hard coded offset, that should be safe in all language versions.

svn-id: r42695
"
"441ae56ea959b4039e154af1f69cf5ee50a035b2","2009-07-24 18:58:15+00:00","SAGA: Instead of trying to detect duplicate glyphs,
simply generate duplicate outline glyphs.
This should fix #2826697.

svn-id: r42696
"
"c247e988278fd5256183988ba9a890656d520c95","2009-07-24 19:24:15+00:00","Removed unused variable.

svn-id: r42697
"
"2e60a20ea27fd12df3d7b0c7f4345ad96fee4998","2009-07-24 19:56:46+00:00","This is 1.1.0svn

svn-id: r42699
"
"b36a1ccd11a3437fb0de100878c95ce421a937b4","2009-07-24 20:21:49+00:00","re-enable SCI engine

svn-id: r42701
"
"44fb798a3af69ec7e983b60011d8153b804168ba","2009-07-24 21:29:41+00:00","Adding support for ADPCM sound data (yet another IMA ADPCM variant). What we've called ADPCM before is more like DPCM

svn-id: r42704
"
"adc537161a048939c995475707f70cbe9c34b720","2009-07-24 21:31:00+00:00","Adding subtitle support to Woodruff

svn-id: r42705
"
"02ca620d7ce0c624a82d42a51c2a56682bc44ec3","2009-07-24 21:31:58+00:00","Caching the subtitle font and color, because some don't assign those

svn-id: r42706
"
"bf768ecfb7728450db8ed6a38d00bee05e00dae3","2009-07-24 21:32:45+00:00","Calculating the number of data bytes per initial sound slice, because relying on the standard amount doesn't work for some videos

svn-id: r42707
"
"6e79ba66c9be70ed369a00ee6d59ade9df527e7d","2009-07-24 21:33:22+00:00","Properly reading the video codec fourcc, in case we need other codecs in the future

svn-id: r42708
"
"90d8dcca5f7bcbaf309f72eca8c2a0d3863657d0","2009-07-24 21:33:55+00:00","Adding ADL playback to the demoplayer

svn-id: r42709
"
"b2154f612da6d92cb86338accd8a23f51c49e1f4","2009-07-24 21:34:17+00:00","Adding stubs for newer VMDs found in Addy 5

svn-id: r42710
"
"6a28c0af12bc98c8b2bc8f31f3d6fb63c9efaf9a","2009-07-24 21:34:43+00:00","Added a method to easily dump resources to file

svn-id: r42711
"
"8396e2071330957121ad765df80aeaf0ffe5c4d0","2009-07-24 21:35:06+00:00","Fixing bytes per pixel detection

svn-id: r42712
"
"c4baedc6dbffbec01cf9a0f7d57f1922b0bceaec","2009-07-24 21:35:57+00:00","Renaming getAnchor() to getFrameCoords()

svn-id: r42713
"
"54b63ac239a8b555b191d40733e05090b3b08e3a","2009-07-24 21:36:16+00:00","Moving all implementations into the cpp

svn-id: r42714
"
"3668895abce7445077350f88c55175ff1c66b05f","2009-07-24 21:36:42+00:00","CoktelVideo cleanup: Splitting up some IMD methods and removing the obsolete notifyPaused()

svn-id: r42715
"
"da747553d83a9c75d4678adb965bd15c7ac20b9d","2009-07-24 21:36:59+00:00","Merging Map_v4 into Map_v2

svn-id: r42716
"
"908af0a37f531a4f7a3310fa791c7c3836fa7373","2009-07-25 00:58:44+00:00","Add new event dispatching API.

svn-id: r42717
"
"ba7e01ad7c3a803471a6d0a1f91777fc16ed0096","2009-07-25 00:59:03+00:00","Replace 'EventProvider' class of the DefaultEventManager implementation with 'Common::EventSource'.

svn-id: r42718
"
"7905bbbc5b845854654d75a69876af87f78cdda0","2009-07-25 00:59:18+00:00","Got rid of EventManger::artificialEventQueue.

svn-id: r42719
"
"b4a1bceeacd0e29f04ceccb01c836dc8cd315951","2009-07-25 00:59:30+00:00","Add function 'allowMapping' to EventSource, for testing whether the event source allows mapping (via the Keymapper for example.)

svn-id: r42720
"
"f03753672665aea4015646045bbe255de7f55021","2009-07-25 00:59:39+00:00","Prevent EventMapper events from being mapped.

svn-id: r42721
"
"60e7faf9b6026d73ffb0709dfab44f734fdba332","2009-07-25 00:59:53+00:00","Replaced '_artificialEventQueue' by an EventSource.

svn-id: r42722
"
"dafd5d509b4f31d06a40d03f4b0c96e04703fb95","2009-07-25 01:00:12+00:00","Made DefaultEventManager a subclass of EventObserver.

svn-id: r42723
"
"38309da52193ffb3a2a497b4474667a347b0a5c8","2009-07-25 01:00:24+00:00","- Add marco to easily access the EventDispatcher instance.
- Add events.cpp to module.mk

svn-id: r42724
"
"141ded3063adaee202e4a87ce987d35fba041faf","2009-07-25 01:00:37+00:00","Change DefaultEventManager to use EventDispatcher.

svn-id: r42725
"
"eeaafdf4ee012df99b5f4d0ea5b394ad81e1e23c","2009-07-25 01:00:47+00:00","Moved ArtificialEventSource to common/events.h.

svn-id: r42726
"
"ef7166740369bab9111289122aac3ef07c48c0bb","2009-07-25 01:01:05+00:00","- Adapt DefaultEventManager to use Common::ArtificialEventSource
- Adapt Keymapper to implement EventMapper interface

svn-id: r42727
"
"901f2d5836027ee36bac706b68c8c9a06f515031","2009-07-25 01:01:22+00:00","- EventDispatcher is no longer a singleton.
- Add 'getEventDispatcher' method to EventManager.

svn-id: r42728
"
"bbc8021182b9b3b7c7037a26700bc18b255556ae","2009-07-25 01:01:41+00:00","Add enum which marks global priorites of the EventManager event dispatcher.

svn-id: r42729
"
"41ef4938ac8cfcccba4d42c5e474a5a619d9db2b","2009-07-25 05:39:57+00:00","Add patch #2816140 - MM C64 Costume Animation.

svn-id: r42736
"
"c02ad3b7bfe5813c9bd86672ead37110d21d9bb5","2009-07-25 06:27:41+00:00","Add patch #2821100 - MM C64 Objects / Verb fixes, with minor clean up applied.

svn-id: r42737
"
"93806dae8b482f0e0900db72425b6f8b59f28085","2009-07-25 06:36:41+00:00","Update credits.

svn-id: r42738
"
"b92477f6ab31e34bc041bcc41f6692ed801f868d","2009-07-25 06:55:28+00:00","Fixed GCC warnings.

svn-id: r42739
"
"27efb99ae8b52cc1209bbfae268f0b75c3572302","2009-07-25 07:17:37+00:00","Whitespace changes.

svn-id: r42740
"
"4463e1c084a4822a2c5c130532964ea3372bdef7","2009-07-25 09:36:16+00:00","Whitespace fixes

svn-id: r42742
"
"744112ceb0731da474604f47d27f413828db7009","2009-07-25 10:25:57+00:00","Add Common::String::printf to format a string

svn-id: r42743
"
"e4088702602aadf2db195d76ed19e07f96408c7c","2009-07-25 10:26:17+00:00","Use new Common::String::printf

svn-id: r42744
"
"a69b4d60fc22d4c007d73e19556d84e104f580a6","2009-07-25 10:37:20+00:00","Formatting

svn-id: r42746
"
"24ca40eea5249c279d4d89a07702802740515b19","2009-07-25 12:28:45+00:00","fix unaligned writes

svn-id: r42747
"
"6d1a386471711df4c9ed48be3646a16f81ae0d46","2009-07-25 12:41:46+00:00","remove implicit SoundDigital::Sound ctor call, which is redundant because the required initialisation is done below -- this fixes a linker error with mipspro

svn-id: r42748
"
"7e71865e91a19b022a5ad839802f79a5f300fe8d","2009-07-25 12:59:46+00:00","Move the event recorder to its own class (EventRecoder inside common/EventRecorder.[h/cpp]).

svn-id: r42751
"
"fa4903f19ccef07423bd254e15a683078f763def","2009-07-25 13:00:09+00:00","Strip trailing whitespaces.

svn-id: r42752
"
"ddd2b29beece3c03bfab11daa3530bc924388590","2009-07-25 13:07:17+00:00","fix another aligned write

svn-id: r42753
"
"2e13d8923396b8549cb4d620a08ea386a1494ca8","2009-07-25 13:07:50+00:00","Added word-wrapping to Drascula's conversation options. Fixes bug #2826607.

svn-id: r42755
"
"0e2c8b9be51bc15cbe705dbfe64730bfec4e7f4c","2009-07-25 13:17:31+00:00","Don't hog the CPU while waiting for the player to pick a conversation option.

svn-id: r42757
"
"0927bec0158918437fa0db5d9a07508b2c2b1369","2009-07-25 13:23:51+00:00","Fix gp2x port building.

svn-id: r42759
"
"f8e050fbc22b337a1854f1ee6c8f168dc925568c","2009-07-25 14:09:58+00:00","Yet another fix for the GP2x backend.

svn-id: r42761
"
"581ed45590a632c4b6f1037820aedf0449558647","2009-07-25 15:31:11+00:00","Adept savegame name creation code to use Common::String::printf.

svn-id: r42765
"
"edab6f2d7fe629d8c4e1c9d2c1f3f72ef2e6960a","2009-07-25 16:07:29+00:00","Added a workaround to fix the Last Dynasty video greenness for now

svn-id: r42766
"
"b956c707f45a52a950f9a78eef04323768e8c560","2009-07-25 16:08:31+00:00","Moved the decision whether subtitles should be displayed, so that the broken subtitles in The Last Dynasty aren't shown

svn-id: r42767
"
"6de1975b65c110016b681fd063526beb8a55f220","2009-07-25 16:09:19+00:00","Fixing Woodruff videos again after enabling block type 2 transparency

svn-id: r42768
"
"495d93de1ed839a220f6fe28252843e6cb3625bb","2009-07-25 16:34:01+00:00","Fix palette regression in Kyra2.

svn-id: r42771
"
"1ebcec73bfe274a91aa54a1a240a2bfd3352255e","2009-07-25 16:37:25+00:00","Implement missing bits in KyraEngine_HoF::setCauldronState.

svn-id: r42773
"
"7d238d877970ad906997d2cb36235c65dc38b1db","2009-07-25 17:48:51+00:00","Make sure that 'buf' is properly terminated. Actually, we could probably get
rid of 'buf' completely, and replace it with face = syncChar[p] - '0', assuming
that syncChar only contains digits. But for now, let's make a minimal change.
This might fix bug #2826611 ('DRASCULA: Crash when smashing church window').

svn-id: r42776
"
"81b508e98a9681648db7f66fc27eaa8ab23a58c5","2009-07-25 18:35:27+00:00","use READ_UINT16 macro

svn-id: r42780
"
"8d9e3de37ca30b0b4db36fe35348ea132ac4d010","2009-07-25 18:44:06+00:00","Adding support for (new-style) stereo in DPCM audio

svn-id: r42782
"
"32d74a224735b56f8e28e3bff63f330c33ad25dd","2009-07-25 18:44:24+00:00","Adding more sanity checks to Vmd::renderFrame()

svn-id: r42783
"
"037c02a1f7179bbe5e3b044e6c9a13a94cd9851c","2009-07-25 19:07:28+00:00","GP2X Backend: Volume control code cleanup.

svn-id: r42785
"
"45cde5f6422dcee5ffbe6d5d4c482de738c2b053","2009-07-25 23:36:24+00:00","Add optional readline support to the text debugger console.
Make text/graphical console selectable with an option to configure.

svn-id: r42787
"
"8e60e31db36b18fae9f95eb82db7bf1ad58fa668","2009-07-26 00:27:32+00:00","Changed the events.cpp file to EventDispatcher.cpp, to avoid MSVC name clashes with sdl/events.cpp

svn-id: r42790
"
"dc3d0549ff31ed910fd7466620f0ee26bd0cf282","2009-07-26 00:31:28+00:00","Fixed compilation from file changes to common and gob engine

svn-id: r42791
"
"5870635ba6694807adee8009b7b7b8517b6763d2","2009-07-26 07:07:35+00:00","Formatting.

svn-id: r42792
"
"83c86791278146a271d2d7ec0a79963fc8408e63","2009-07-26 08:37:03+00:00","Moved parser functions arrays to file scope, as they were tripping up the obsolete gcc used for the BeOS/Haiku port. If anybody can work out a better solution please apply it, because this makes me sick.

svn-id: r42793
"
"f15eb91d7726aa3b23786df86c3d8937c854e15b","2009-07-26 09:09:07+00:00","Added a delay to the in-game menu loop to prevent 100% CPU usage

svn-id: r42795
"
"da4367096e292589fc93c9f1296da260caa91532","2009-07-26 09:40:35+00:00","Bugfix for mouse button clicks getting counted multiple times

svn-id: r42798
"
"ad7762ad16cebc96540e0db9344479158811b1bd","2009-07-26 09:48:52+00:00","Added a debug line to allow tracking of script execution

svn-id: r42799
"
"f11435bb6d30e0835fa50d7446b9f80e09726529","2009-07-26 10:10:08+00:00","78 bytes isn't enough for some of the longer conversation options. 128 might
not be enough either, but at least it fixes bug #2827170 ('DRASCULA:
Conversation error').

svn-id: r42801
"
"3fb1b79018952e2106342ee685dde0fd2e0d9315","2009-07-26 12:58:22+00:00","Virtual Keyboard: Update default keyboard pack using slightly tweaked versions of the graphics very kindly provided by Carl Mitchell. Also update xml file to make best use of the keyboard graphics and add the 'delete' event in addition the passing backspace back to the calling textarea.

svn-id: r42807
"
"997f7b9a3b261b263c70f36e262849058b65d54f","2009-07-26 13:50:18+00:00","Reverting my fix for bug #2037158 ('In-Game animation shifted(?)'), because it breaks Woodruff's intro

svn-id: r42809
"
"712e0c80eaef79870a302749ae3e91c637088f81","2009-07-26 14:16:51+00:00","Create base class FontSJIS16x16 for our own SJIS font.

svn-id: r42812
"
"0a612f40eb047fc80fafb1a7df4b8788d2c4fe66","2009-07-26 14:17:06+00:00","Add support for our custom SJIS font.

svn-id: r42813
"
"0a03ae8265a894270f2bd299bde1c0b22d935490","2009-07-26 14:17:21+00:00","Change KYRA to use our SJIS font, when it's available.

svn-id: r42814
"
"cb960ad976bf523704beb71641bc242501a67a53","2009-07-26 14:17:40+00:00","Change the way the font data for SJIS fonts is load.

svn-id: r42815
"
"ebc74a7c9bf9c8066723eb79223970d6238463a8","2009-07-26 14:17:54+00:00","Add a factory method, which tries to open different SJIS fonts/ROMs and returns a font for the first present data.

svn-id: r42816
"
"15662b3cfbfe6bde789c68e20c20ff4b8ef2eb37","2009-07-26 14:18:06+00:00","Print warning, when client code does try to draw an unsupported SJIS char.

svn-id: r42817
"
"be9c906c728087c7ab10b33d55065f6cf3f1d201","2009-07-26 14:18:21+00:00","Specify that the chars passed to FontSJIS::drawChar should be little endian.

svn-id: r42818
"
"ec67b583b05ace5a0e70449cf335deeba6df5e14","2009-07-26 14:18:34+00:00","Add way to overwrite default SJIS font.

svn-id: r42819
"
"84c0bf22d2efd12f8d6391c08da05485487a219e","2009-07-26 14:18:49+00:00","Simplify KYRA's SJIS font loading code.

svn-id: r42820
"
"4b27c43b0aa9074205fc5aef0ee45adb1a55f49a","2009-07-26 14:19:02+00:00","Reflect code to test the magic bytes in the sjis.fnt header.

svn-id: r42821
"
"07c10c07c4d65426a5931a81d4bbe5388aeed802","2009-07-26 14:24:45+00:00","Add NEWS entry about new SJIS code.

svn-id: r42822
"
"d1fed5cee165d9626a7ced40e982b4d7c6a6dc72","2009-07-26 14:40:03+00:00","Instead of only printing a warning, when no SJIS char data is present, just return to the caller.

svn-id: r42823
"
"df7e4ad7ece168da2feed8373d871938614e6e7a","2009-07-26 14:40:44+00:00","Add a todo to FontSJIS::drawChar taking an Graphics::Surface.

svn-id: r42824
"
"dc6fa53bad0b50a747f0f4dfa31a5adef24086a5","2009-07-26 20:41:33+00:00","Create IP.BIN.

svn-id: r42825
"
"6d18ada7ef3df70f59430a6b3466bb76672832f1","2009-07-26 21:06:53+00:00","fix/workaround for cruise crash on OSX

svn-id: r42826
"
"ed763cccfe57774b803e0ae32606d7ec677b297b","2009-07-27 16:04:35+00:00","Fix format string issues (and compiler warnings).
Patch by salty-horse.

svn-id: r42842
"
"816bd9a7ea4f99aaae67c6e82f686b88dd8c728f","2009-07-27 16:29:36+00:00","Add ARM code version of Normal2x scaler.
Add ARM only aspect ratio correcting version of Normal2x scaler.

Make WinCE port use Normal2x by default if the screen is large enough.
Make WinCE port use aspect ratio correcting version if panel is hidden.

svn-id: r42843
"
"d165f85a58d9d5df88e3d1faf14bd89118350391","2009-07-27 17:04:06+00:00","Formatting.

svn-id: r42844
"
"595501b60c86ef41397b82026b0abd0390ff75cd","2009-07-27 17:48:40+00:00","Fix bug #2827459 'ITE: Ingame GUI does not list slots 96-99', by defining in SagaMetaEngine that the last valid save slot for SAGA is slot 95.

svn-id: r42845
"
"ebe6a0ac236058a72e14dfee9d5969cd497e4f1e","2009-07-27 18:05:16+00:00","GP2XWiz: Update GP2X Wiz bundle.sh to copy libraries into the distribution file from the tool chain where the libraries are broken on the device. Also add LD_LIBRARY_PATH 'hack' to launch script to ensure bundled libraries are used over system ones.

svn-id: r42847
"
"17fe3ce29e21e2d88830a88941474221c2fc2b98","2009-07-27 18:19:16+00:00","Oops enabled HACK to prevent multiple OPL instances again.

svn-id: r42849
"
"14114bf3976097ca3d92cb21fa6ac3b8e4abb010","2009-07-27 19:01:17+00:00","Abstracting off the block types from Imd::renderFrame() and Vmd::renderFrame()

svn-id: r42851
"
"f832d0fc5692133bb3c38c1b19e87f315a8a80fc","2009-07-28 15:05:44+00:00","Silencing two 'empty loop body' warnings

svn-id: r42856
"
"f5e9aa67c495a64117cc9d30596a34fbe21ef1d5","2009-07-28 15:19:55+00:00","Changing stuff around a bit so alignment requirements won't increase

svn-id: r42857
"
"550d9cf39de5fbbd1f4173d5b7bd955c7649995b","2009-07-28 16:28:32+00:00","More alignment-related changes

svn-id: r42858
"
"f853376379802198b9b02845dce0c46fec2b0af6","2009-07-28 17:19:33+00:00","Fixed drawing subtitles for cutscenes that are narrower than the screen, and
erase the subtitles manually if they are drawn outside the frame.

svn-id: r42859
"
"7a6329a29bbe755250586693f8bb651fd3521e95","2009-07-28 17:53:59+00:00","Broken Sword 2, unsurprisingly, had the same subtitle drawing glitch for small
cutscenes that Broken Sword 1 had. And a memory leak. This should fix both.

svn-id: r42861
"
"972cbb4b579bb3767b118e666c761422e20b14b0","2009-07-28 20:22:38+00:00","GP2XWiz: Add downscale support to the backend using the PocketPCHalfARM scaler from the WinCE backend (Maybe this should be moved into /graphics/scalers at some point?). Also enable all the ARM optemised routines in this and the GP2X backend.

svn-id: r42863
"
"50cd2750ccc094a18ab8cad51c35b04004829d6d","2009-07-28 22:28:40+00:00","SCI: Avoid using perror (it's not portable)

svn-id: r42866
"
"a565441f0cce65b6a3bee713c1e88f2ad7c67c76","2009-07-28 22:33:20+00:00","Added missing initializer for member Sci::gfx_mode_t::format'

svn-id: r42867
"
"caacc3a6df66f036c4b3e7db89960d018af3d51c","2009-07-28 22:42:08+00:00","Patch #2828644: Support for mingw32ce 0.5.1 toolchain in configure script

svn-id: r42868
"
"eb9600b5e95f105736f01b9adbbd603e69b51638","2009-07-28 23:19:33+00:00","SCUMM: Moved _inventoryOffset to ScummEngine_v2 and save it.
Fixes bug #2828417: Zak V2: inventory position isn't reset when loading.

svn-id: r42870
"
"f6e16537b392bca876e0b72ffb3ec548f7d25673","2009-07-29 08:55:04+00:00","SCUMM: cleanup

svn-id: r42880
"
"41139100a2c175929f8e85f6a7d26c4ee0974ac8","2009-07-29 08:55:17+00:00","GUI: When clicking in a scrollbar to page up/down, don't scroll a full page; rather scroll a full page minus one line (see FR #2821508). This matches the behavior of the page up/down keys

svn-id: r42881
"
"8bf0424832aaeb55f90af4332e5e02e4d69f58ce","2009-07-29 09:19:56+00:00","Sort audio output rates numerically (see FR #2821525)

svn-id: r42886
"
"5213cf9aa21083b6a3f9557a0d75f608913625a2","2009-07-29 10:17:44+00:00","Adding a SoundType parameter to SmackerDecoder, defaulting to kSFXSoundType

svn-id: r42887
"
"fcdd3b03104df163740ebded5a724c7c55696c21","2009-07-29 11:48:20+00:00","SCUMM: Rewrote ScummEngine::inventoryScriptIndy3Mac for clarity

svn-id: r42889
"
"c6dd192ca6a006caf65ccaf8026d8d89106cf66d","2009-07-29 14:54:27+00:00","Fix animation script sound effect opcode implementation in Kyra3.

svn-id: r42890
"
"2eb1a62a96ef19f776fea4067973f501138be621","2009-07-29 15:31:23+00:00","Fix saving of item in hand in HoF and MR.

svn-id: r42892
"
"ca7c35bc9a87a28cc34bbbba430f5b50ebab9463","2009-07-29 15:57:50+00:00","Oops, fixing a regression I created with the Map_v4/Map_v2-merge

svn-id: r42894
"
"057028088545f3c3688a5d44550e616a29d5578e","2009-07-29 16:24:07+00:00","Fix a little bug in KyraEngine_MR::showBadConscience, which prevented Gunther's mouse shapes from showing up.

svn-id: r42895
"
"2205541e863101ec324372a864dc73a36730de99","2009-07-29 18:35:34+00:00","SCUMM: Enable looping in Indy3Mac sound effects

svn-id: r42898
"
"d1cce09149d72c3ad85995e9f4a9d90ff4a33400","2009-07-29 19:39:03+00:00","Fix regression, which prevented saving in COMI.

svn-id: r42900
"
"e779747ca4e86e52ab22b11591fcd16b79902407","2009-07-29 20:03:46+00:00","Fix typo, which made our 'floorf' macro use 'floorf' instead of 'floor' on systems without 'floorf'.

svn-id: r42904
"
"d91d68a9ca03b69d285517736c62d5cd9f70d63b","2009-07-29 20:35:50+00:00","SCUMM: Fix verb/sentence handling in Indy3 mac (there, a double click must be used to trigger a verb/sentence)

svn-id: r42907
"
"6df25f47c3a794eb7d10ecebc7d05cab8552dc9f","2009-07-29 21:39:00+00:00","Removed last traces of clearIOFailed. Yay :)

svn-id: r42910
"
"eedce48aa39b424c7b93c5f5069fd1be89878bdc","2009-07-29 21:39:16+00:00","Removed redundant File::ioFailed() implementation; also turned ReadStream::ioFailed from a virtual into an inline method

svn-id: r42911
"
"e9cd07e582d27d1e329269d4e3d544eea03f0131","2009-07-29 21:39:34+00:00","SWORD1 & SWORD2: Replaced ioFailed by err+eos

svn-id: r42912
"
"affbe860269f89aaf5d644efe3c24cdbd048b47a","2009-07-30 09:36:50+00:00","Patch #2818501: enable scale2x mmx on x86_64

svn-id: r42918
"
"1fea43ab1911a27beb6dcb220876338db4ed5f27","2009-07-30 11:03:16+00:00","Added the character lookup table for the Spanish font

svn-id: r42920
"
"4f85e9d00d7101e3d180e38fb07feda5b3627cfd","2009-07-30 13:41:22+00:00","Use SaveFileMan::listSaveFiles() to build list of old savegames for Nippon Safes.

svn-id: r42922
"
"000dd0a880827bb09f3c9308f2825bfe3443b65f","2009-07-30 13:42:08+00:00","Fixed typo in user message.

svn-id: r42923
"
"7fd0890e14462971df82963cc8cbc3cfc4d17be7","2009-07-30 13:44:50+00:00","Cleanup the header file as I removed one function in r42922.

svn-id: r42924
"
"db232750b2825b7cc9b7e08bea0343613323496e","2009-07-30 14:24:23+00:00","Fix bug which caused the mouse cursor not to update in some cases.

svn-id: r42926
"
"b09ec67fc4feeafa22238125113f40ea5de14011","2009-07-30 15:12:42+00:00","Add tanoku to our GUI credits section.

svn-id: r42929
"
"ffe6ce4cd5dda290f53e13bd2087630fa85937ee","2009-07-30 15:19:15+00:00","Prevent our 'credits' make target updating Credits.rtf, which in fact is not present in SVN anymore, and the outdated docbook.

svn-id: r42932
"
"8c323b6bb8d1a695cad31847aa2ba76f001f059f","2009-07-30 16:43:25+00:00","Fix bug #2829737: 'GUI: Wrong background colours on dialog screens (IRIX)'.

svn-id: r42934
"
"f41b49625511c68dadd5d0d708f31b98576c297f","2009-07-30 16:51:53+00:00","Fixed missing clearing of the low bit of the alpha mask in the 'dim' screen shading function.

svn-id: r42935
"
"31f7f45609b7261ae5184c6f94425e1d36af47ec","2009-07-30 17:48:03+00:00","NDS: Changed jtypes.h to ndstypes.h (this 'newer' name has been in effect even in the older versions of DevKitPro used for compiling ScummVM...)

svn-id: r42937
"
"25d83581dcca46357bd00db35103fbd86b1ec588","2009-07-30 17:52:44+00:00","minor cleanup to scale2x, to avoid confusing the compiler about potential pointer aliasing (only the tip of the iceberg, of course... ;)

svn-id: r42938
"
"f5112efa110f736b53409e357504e5a8570b80ca","2009-07-30 18:27:50+00:00","DS: Started work on a new build system for the  Nintendo DS port, based on configure (and thus suitable for buildbot). Currently only the ARM7 part is 'done'

svn-id: r42939
"
"d6d5da0d9f13fdac51bafbe45785c06634b43658","2009-07-30 19:43:36+00:00","Change code to use our fractional utilities.

svn-id: r42940
"
"387afcc113cf48a0660fd92b02f0024d2f939286","2009-07-30 19:43:53+00:00","Fix Browser dialog name.

svn-id: r42941
"
"c232783dd167493359667103de5034aaabeb2897","2009-07-30 20:46:43+00:00","Overhauled the credits: Retired members are now (partially) back to their old sections, to make sure people really see all people who contribute to an engine/backend. Also added&fixed some entries, and moved the FreeSCI section

svn-id: r42943
"
"745afbf5657dfb8f4c877121a52f87ff72108955","2009-07-30 20:58:32+00:00","Changed 10rdH070's nick back to LordHoto, and added Hkz to the credits

svn-id: r42946
"
"a411a5750e98697dc64da4c528ffe57dff7c9bbb","2009-07-30 21:04:46+00:00","Added Strangerke to credits, and moved wjp from Gob to SCI on his request

svn-id: r42947
"
"3f673b899df123feb4a659e44a49116fc2d8c1da","2009-07-30 21:45:09+00:00","Patch #2828669: CRUISE: Fix cruise compilation with mingw32ce toolchain

svn-id: r42950
"
"91434bd9c522f7d2c998d9f503916dc77015f26c","2009-07-30 21:56:04+00:00","SCUMM: Properly detect & distinguish the three FM-TOWNS double-demos

svn-id: r42951
"
"2fe2fc5101ff0adee996433b3c372c6b3bac7de2","2009-07-30 21:56:18+00:00","cleanup

svn-id: r42952
"
"44a3d917e8421d7b35c51f0d9c270395c5ea2b1a","2009-07-30 23:42:12+00:00","Fixed corrupted theme files.

svn-id: r42953
"
"1383291296c2b3a6b49d12f925af58035a73d80d","2009-07-31 00:22:46+00:00","Prevent high-resolution layouts to be loaded on low resolutions.

svn-id: r42955
"
"a811c1cfeac178d0186737a011e886410025c6e9","2009-07-31 12:39:31+00:00","When renaming old savefiles for Nippon Safes, don't assert if a file that matches the pattern game.* and is not a savefile is found in the savepath.

svn-id: r42958
"
"4888aa9fa07d5db2f144e7a7d14dfdbe6cb3a772","2009-07-31 13:01:28+00:00","GP2X: Clean up README-GP2X and remove HTML version of it from SVN (no one ever reads it and the WiKi is more upto date).

svn-id: r42959
"
"c51298957864acb8bbc5016ac5131afd2bb9292f","2009-07-31 17:10:20+00:00","GP2XWiz: Small cleanup of render code to slave as much of loadGFXMode() code back to the OSystem_SDL::loadGFXMode(). version. Also update README-GP2XWIZ.

svn-id: r42964
"
"ef8597d806611060162459d1b3b865cb24df2fcf","2009-07-31 23:27:19+00:00","Fix bug with the event loop that was discarding pending events rather than leaving them to be processed in the following frame

svn-id: r42965
"
"29a09630423e5e7e5b3143045188ab9c9c721d03","2009-08-01 09:53:21+00:00","Remove obsolete comment from Cine::Palette::saturatedAddColor.

svn-id: r42973
"
"01886d3e5266b1cdb0f8cb0460354215358000f5","2009-08-01 15:42:42+00:00","Added some more information to the 'Compressed sound ... invalid' error. Maybe
this will help in determining what's causing bug #2830364. (It sounds like a
bad data file, but who knows...)

svn-id: r42974
"
"1471f0e3ddffeedd7ff10e44ecb252cca1ad4864","2009-08-02 10:40:27+00:00","When ESCing videos, seek to the last frame that was meant to be played. Fixes graphical glitches (bug #2830985) and crashes (bug #2830988)

svn-id: r42995
"
"87124b1d388ff1294a7f13c0cecc4bee01cf7427","2009-08-02 10:40:48+00:00","Removing _frameWaitLag. It broke normal animation speed in pre-v4 games and didn't even do what it was supposed to in v4+ games anyway. (bug #2830985)

svn-id: r42996
"
"836c9a37f3576942be39bb66d1be4d67044ae505","2009-08-02 12:49:57+00:00","Show a message if saving or loading a game fails.

svn-id: r42999
"
"b9263e172f8fe0aaca54d238818c6e01f00ddf17","2009-08-02 13:54:06+00:00","Show a message if saving or loading a game fails.

svn-id: r43001
"
"5591bf368ca8a431a7a03272e0ec7330befbe8d8","2009-08-02 17:34:57+00:00","rework mixer (re)init. fixes bug #2694722

svn-id: r43003
"
"7d3f68154f4d7194c245461a11e9d81febdc6c42","2009-08-02 17:58:48+00:00","align memory handles to sizeof(void*) instead of 4 (which is just good enough for 32-bit) - this fixes DW2 on 64-bit systems that require alignment

svn-id: r43005
"
"07de4b50e3d4f27e2a82a965736ca1d35aacf5b1","2009-08-02 19:46:18+00:00","GP2XWiz: More cleanup of render code and fix silly screen update bug when reverting to a 320*2xx game from a 640*4xx game. Dirty rect code for downscaled images still needs work.

svn-id: r43007
"
"acec9026a10aaec94577bbaeade91d97689c7b55","2009-08-02 19:50:24+00:00","clean up and fix vga aspect scaler routines

svn-id: r43008
"
"9d360d946b35a1a520a5b43b688f085ab7e18727","2009-08-02 21:18:25+00:00","GP2XWiz/SDL: Fix 2 small typos.

svn-id: r43010
"
"7cf43b9ddaa0f64a3844568d8cf9b19f46b6b627","2009-08-02 21:22:46+00:00","Fix AGI crashes on 64-bit systems that require alignment

svn-id: r43011
"
"0ef0365db553f7b972acc2c06f56ae8b2c121676","2009-08-02 21:44:21+00:00","Make MemoryReAlloc() 64-bit alignment safe

svn-id: r43013
"
"8edc0d09435798cbe8ec83b03c1d0b483a5042e4","2009-08-03 01:19:36+00:00","T7G: Fix bug #2831046 where save names not shown after loading a save from launcher

svn-id: r43020
"
"1cf0eb172732232664f88a16ae6c78061e675f5d","2009-08-03 09:28:06+00:00","Bugfix to correctly reset the music tempo when loading a savegame

svn-id: r43023
"
"9931fb6a443571f104109f0c8a4116d892648a09","2009-08-03 17:18:18+00:00","Fix for bug #2828333 (AGI: KQ1: Greensleeves always plays):
- Made all savegame loading in AGI do the same pre-load and post-load stuff.
- Moved load/saveGameState from AgiBase to AgiEngine
- Added rudimentary error handling to load/saveGameState
- Incidentally also fixes the hanging note from bug #2798797.

svn-id: r43025
"
"c2dc86df08c5d0dc034789d265cc1a7aa7966fc0","2009-08-03 17:52:07+00:00","Fix for #2824798 (FW: crash when clicking 'load' in the GUI):
- Fixed CineMetaEngine::listSaves(const char *target) which was broken.
- Also added explicit initialization of savegame descriptions to
empty strings for safety reasons (e.g. arrays on stack aren't
initialized to zero).
- Added explicit trailing zero setting to savegame descriptions
(Previously using GMM you could write a description of length >= 20
that had no trailing zero when written to description file (e.g. fw.dir)).

svn-id: r43027
"
"6dbdad02e5f48951797c3dafdb48f76055bf730d","2009-08-03 18:38:46+00:00","GP2XWiz: Fix bug with downscaled cursors.

svn-id: r43029
"
"bcb0f07bce97f3f0d34120418a8cd02da98a2936","2009-08-04 12:02:07+00:00","add bindings for cruise engine

svn-id: r43033
"
"c4001cb762008e842ee8e8bde31c95cef17cc72b","2009-08-04 12:19:30+00:00","support made engine

svn-id: r43035
"
"f9efd8b99564565547b0a4b88b9d39da3ba05bb2","2009-08-04 12:39:33+00:00","update Makefile

svn-id: r43037
"
"342cce1b193508887535c2c77e779bdd7f499b57","2009-08-04 12:51:17+00:00","update readme (draft)

svn-id: r43039
"
"73572158a8d32ab1202756b5511f4aec82c181b8","2009-08-04 13:17:33+00:00","commit slightly modified patch #2828646: WINCE: Integrate Windows CE with the master build system

svn-id: r43041
"
"6b11923bc88f7b3a7ee90c21e01225a018455872","2009-08-04 14:20:38+00:00","Cleaned up the MSVC project files of the gob engine

svn-id: r43042
"
"7b4d3c1289085812cbcacbb6868dc8cca9bf6140","2009-08-04 14:53:43+00:00","got rid of superfluous semicolons

svn-id: r43043
"
"d14f0ccfb51d44e36a8508be7e7795306b785ed8","2009-08-04 17:22:18+00:00","Removed the superfluous VGA buffer, replacing it with direct writes to the video buffer

svn-id: r43048
"
"4af0cfbdbdc9feafca2728cee8deca7ae9b472b1","2009-08-04 21:56:59+00:00","Cleanup

svn-id: r43056
"
"baa31cd83dd021a8842e7778c0b0892768553ae0","2009-08-05 02:26:51+00:00","Merged revisions 42578,42587-42593,42596-42599,42606,42608-42611,42614-42615,42619,42623-42626,42632-42642,42645,42654-42656,42658-42664,42668,42671-42677,42679,42681,42685,42690,42693,42695-42697,42699,42701,42704-42729,42736-42740,42742-42744,42746-42748,42751-42753,42755,42757,42759,42761,42765-42768,42771,42773,42776,42780,42782-42783,42785,42787,42790-42793,42795,42798-42799,42801,42807,42809,42812-42826,42842-42845,42847,42849,42851,42856-42859,42861,42863,42866,42868,42870,42880-42881,42886-42887,42889-42890,42892,42894-42895,42898,42900,42904,42907,42910-42912,42918,42920,42922-42924,42926,42929,42932,42934-42935,42937-42941,42943,42946-42947,42950-42953,42955,42958-42959,42964-42965,42973-42974,42995-42996,42999,43001,43003,43005,43007-43008,43010-43011,43013,43020,43023,43025,43027,43029,43033,43035,43037,43039,43041-43043,43048,43056 via svnmerge from
https://scummvm.svn.sourceforge.net/svnroot/scummvm/scummvm/trunk

........
r42578 | dreammaster | 2009-07-18 11:22:43 +1000 (Sat, 18 Jul 2009) | 1 line

Minor tweak to prevent mouse clicks that close a user wait message also being further interpreted as a user walk destination
........
r42587 | wjpalenstijn | 2009-07-18 22:51:12 +1000 (Sat, 18 Jul 2009) | 1 line

SCI: Fix stepping in debugger
........
r42588 | drmccoy | 2009-07-18 23:05:36 +1000 (Sat, 18 Jul 2009) | 1 line

Adding a workaround for the guard house card game 'game over' screen in Woodruff
........
r42589 | wjpalenstijn | 2009-07-18 23:05:39 +1000 (Sat, 18 Jul 2009) | 1 line

SCI: don't leave debugger after bt
........
r42590 | Kirben | 2009-07-18 23:39:21 +1000 (Sat, 18 Jul 2009) | 1 line

Add workaround for bug #1668393 - ZAK FM-TOWNS: Crash when entering Hostel from outside.
........
r42591 | fingolfin | 2009-07-19 01:11:19 +1000 (Sun, 19 Jul 2009) | 1 line

AGOS: Fixed backspace under OS X in Personal Nightmare
........
r42592 | fingolfin | 2009-07-19 01:12:54 +1000 (Sun, 19 Jul 2009) | 1 line

AGOS: Get rid of one setjmp in PN code (needs testing)
........
r42593 | fingolfin | 2009-07-19 01:15:26 +1000 (Sun, 19 Jul 2009) | 1 line

AGOS: Removed second setjmp in PN code (untested!)
........
r42596 | cyx | 2009-07-19 07:26:44 +1000 (Sun, 19 Jul 2009) | 2 lines

add '-IQ' suffix test to SO_LOAD_STRING (same as SO_SAVE_STRING) ; fixes french version of atlantis
........
r42597 | wjpalenstijn | 2009-07-19 08:17:56 +1000 (Sun, 19 Jul 2009) | 1 line

Fix crash in tab completion if one command is a prefix of another.
........
r42598 | wjpalenstijn | 2009-07-19 08:19:07 +1000 (Sun, 19 Jul 2009) | 1 line

SCI: Fix disasm_addr option parsing
........
r42599 | wjpalenstijn | 2009-07-19 08:46:07 +1000 (Sun, 19 Jul 2009) | 1 line

SCI: Fix breakpoints
........
r42606 | Kirben | 2009-07-19 19:09:56 +1000 (Sun, 19 Jul 2009) | 1 line

Add patch #2823590 - Fix music crashes in Waxworks (PC).
........
r42608 | Kirben | 2009-07-19 19:13:17 +1000 (Sun, 19 Jul 2009) | 1 line

Update Waxworks.
........
r42609 | wjpalenstijn | 2009-07-19 20:50:14 +1000 (Sun, 19 Jul 2009) | 1 line

SCI: check shouldQuit() in main loop
........
r42610 | cyx | 2009-07-19 21:07:17 +1000 (Sun, 19 Jul 2009) | 2 lines

fix bug #2597980 - TUCKER: Sprite glitch
........
r42611 | dreammaster | 2009-07-19 22:52:19 +1000 (Sun, 19 Jul 2009) | 1 line

Added the GUIO_NOSFX and GUIO_NOMUSIC flags to the first Discworld 1 demo entry
........
r42614 | Kirben | 2009-07-20 00:03:35 +1000 (Mon, 20 Jul 2009) | 1 line

Change generic save game name.
........
r42615 | knakos | 2009-07-20 00:46:11 +1000 (Mon, 20 Jul 2009) | 1 line

remove dead code leftover
........
r42619 | knakos | 2009-07-20 02:10:55 +1000 (Mon, 20 Jul 2009) | 1 line

whoops, fix non-arm build (why? :-) )
........
r42623 | wjpalenstijn | 2009-07-20 07:06:25 +1000 (Mon, 20 Jul 2009) | 1 line

Fix compilation with USE_CONSOLE = 0
........
r42624 | fingolfin | 2009-07-20 15:02:17 +1000 (Mon, 20 Jul 2009) | 1 line

AGOS: Fixed badload(); some whitespace cleanup
........
r42625 | sev | 2009-07-20 18:31:40 +1000 (Mon, 20 Jul 2009) | 3 lines

Moved new ports section to more appropriate place. And force buildbot to
recompile :)
........
r42626 | dreammaster | 2009-07-20 19:19:27 +1000 (Mon, 20 Jul 2009) | 1 line

Bugfix for hangs on scene changes in Discworld 1 after having loaded a savegame from the GMM when the title screens are displayed
........
r42632 | wjpalenstijn | 2009-07-21 06:55:28 +1000 (Tue, 21 Jul 2009) | 4 lines

Make ScummFile::eos() consistent with Stream::eos().
Remove usage of ioFailed from SCUMM engine.
Fix reading up to the end of a SCUMM SubFile.
This hopefully fixes #2820957.
........
r42633 | mthreepwood | 2009-07-21 06:59:35 +1000 (Tue, 21 Jul 2009) | 1 line

Fixing bug #2823854: Mickey's space adventure crash. There's one too many space characters in a string which causes it to be drawn off the screen.
........
r42634 | sev | 2009-07-21 08:15:37 +1000 (Tue, 21 Jul 2009) | 2 lines

Proper implementation of microscope puzzle.
........
r42635 | lordhoto | 2009-07-21 08:26:41 +1000 (Tue, 21 Jul 2009) | 2 lines

Fix gcc warning (hopefully this is correct).
........
r42636 | Kirben | 2009-07-21 17:02:18 +1000 (Tue, 21 Jul 2009) | 1 line

Update GUI flags for AGOS game engine.
........
r42637 | wjpalenstijn | 2009-07-21 19:39:58 +1000 (Tue, 21 Jul 2009) | 1 line

Use a BufferedReadStream to buffer ArjFile's input to reduce memory usage
........
r42638 | Kirben | 2009-07-21 20:37:58 +1000 (Tue, 21 Jul 2009) | 1 line

Fix fade effects in Waxworks.
........
r42639 | Kirben | 2009-07-21 20:48:32 +1000 (Tue, 21 Jul 2009) | 1 line

Fix bug #2823818 - GUI: unable to select subtitles and speech for Simon 2.
........
r42640 | drmccoy | 2009-07-21 21:26:31 +1000 (Tue, 21 Jul 2009) | 1 line

Making some static const uint32s public, older GCC versions don't seem to like nested classes to access their parents' protected members
........
r42641 | drmccoy | 2009-07-21 21:58:58 +1000 (Tue, 21 Jul 2009) | 1 line

Fixing 'Game 'hangs' after first level' (bug #2824414)
........
r42642 | drmccoy | 2009-07-21 22:14:36 +1000 (Tue, 21 Jul 2009) | 1 line

Fixing the text input in Gob1 (the loading code wasn't printed as you typed anymore)
........
r42645 | robinwatts | 2009-07-22 05:39:24 +1000 (Wed, 22 Jul 2009) | 4 lines

Add ARM code implementation of Scaler2x, and enable it for the WinCE
port.
........
r42654 | Kirben | 2009-07-22 19:52:44 +1000 (Wed, 22 Jul 2009) | 1 line

Simplify fade code.
........
r42655 | Kirben | 2009-07-22 20:23:58 +1000 (Wed, 22 Jul 2009) | 1 line

Change the default target to CD version, for games which offer floppy and CD versions. So all GUI options are still available in fan translations.
........
r42656 | Kirben | 2009-07-22 20:32:35 +1000 (Wed, 22 Jul 2009) | 1 line

Update video script debug table for Waxworks.
........
r42658 | sev | 2009-07-22 21:48:51 +1000 (Wed, 22 Jul 2009) | 2 lines

Fix bug #2823762: 'AGI: PQ1 All function keys are broken after restart'
........
r42659 | sev | 2009-07-22 22:24:55 +1000 (Wed, 22 Jul 2009) | 2 lines

Fix bug #2823759: 'AGI: PQ1 help not showing the first time you press F1'
........
r42660 | sev | 2009-07-22 22:36:08 +1000 (Wed, 22 Jul 2009) | 2 lines

Mention microscope puzzle improvement in T7G
........
r42661 | lordhoto | 2009-07-22 22:38:34 +1000 (Wed, 22 Jul 2009) | 1 line

Since Kyra PC98 version is japanese only don't mention it explicitly.
........
r42662 | sev | 2009-07-23 01:55:33 +1000 (Thu, 23 Jul 2009) | 2 lines

Move functions from agi.cpp to more appropriate files.
........
r42663 | sev | 2009-07-23 02:26:53 +1000 (Thu, 23 Jul 2009) | 2 lines

Fix bug #2798797: 'AGI: larry 1 doesn't restart after dying'
........
r42664 | sev | 2009-07-23 05:25:53 +1000 (Thu, 23 Jul 2009) | 7 lines

Fix bug #1745396: 'MI: Saved game from the credits sequence fails to load'.

Now we specifically disallow saves in room 0 for all v4+ games. Original
has exactly this check in all versions, and such games are impossible to load.

Still the problem is not resolved for v0-v3 and HE games.
........
r42668 | sev | 2009-07-23 06:37:48 +1000 (Thu, 23 Jul 2009) | 2 lines

Fix bug #2825252: 'GUI: Low Res Bugs'
........
r42671 | Kirben | 2009-07-23 15:48:20 +1000 (Thu, 23 Jul 2009) | 1 line

Simplify the code to check whether loading or saving a game is possible.
........
r42672 | Kirben | 2009-07-23 15:57:00 +1000 (Thu, 23 Jul 2009) | 1 line

Simplify the code to check whether loading or saving a game is possible.
........
r42673 | Kirben | 2009-07-23 17:49:28 +1000 (Thu, 23 Jul 2009) | 1 line

Correct error in revision 26678.
........
r42674 | Kirben | 2009-07-23 20:31:06 +1000 (Thu, 23 Jul 2009) | 1 line

Remove keyboard support for mouse buttons, since it interferes with load/save scripts in HE games and input scripts in others games (COMI, FT). It isn't much use anyway, since we dropped support for cursor movement via keyboard long ago.
........
r42675 | Kirben | 2009-07-23 20:33:13 +1000 (Thu, 23 Jul 2009) | 1 line

Fix bug #1726909 - HE Games: Glitches after loading saved games, by restircting HE games to their original load/save interface.
........
r42676 | dreammaster | 2009-07-23 20:49:30 +1000 (Thu, 23 Jul 2009) | 1 line

Bugfix for player blocking room entrance causing NPCs trying to enter getting an excessive number of action entries
........
r42677 | Kirben | 2009-07-23 20:54:12 +1000 (Thu, 23 Jul 2009) | 1 line

Only autosave in supported scenes.
........
r42679 | drmccoy | 2009-07-24 05:50:13 +1000 (Fri, 24 Jul 2009) | 1 line

Fixing a bug in the V4 save file handler, produced by a 'neat' feature in Woodruff: The saves remember their position within the list and use that information to load the 'correct' screen properties, making it impossible to load reordered saves correctly -.-
........
r42681 | Kirben | 2009-07-24 14:59:21 +1000 (Fri, 24 Jul 2009) | 1 line

Bear Stormin' is the full mini game, and not a demo.
........
r42685 | Kirben | 2009-07-24 15:20:44 +1000 (Fri, 24 Jul 2009) | 1 line

Fix cursor position, when entering a save game name in HE games.
........
r42690 | drmccoy | 2009-07-24 20:45:25 +1000 (Fri, 24 Jul 2009) | 1 line

Adding transparency for VMD video block type 2, fixing bug #2037158 ('n-Game animation shifted(?)'). The problem was that the animation in question has an one pixel wide transparent bar on the left
........
r42693 | Kirben | 2009-07-24 22:28:53 +1000 (Fri, 24 Jul 2009) | 1 line

Add workaround for bug #2826144 - SAM: Game hangs when talking to bigfoot guard.
........
r42695 | Kirben | 2009-07-24 23:30:26 +1000 (Fri, 24 Jul 2009) | 1 line

Adjust workaround for bug #2826144, to use hard coded offset, that should be safe in all language versions.
........
r42696 | wjpalenstijn | 2009-07-25 04:58:15 +1000 (Sat, 25 Jul 2009) | 3 lines

SAGA: Instead of trying to detect duplicate glyphs,
simply generate duplicate outline glyphs.
This should fix #2826697.
........
r42697 | eriktorbjorn | 2009-07-25 05:24:15 +1000 (Sat, 25 Jul 2009) | 2 lines

Removed unused variable.
........
r42699 | sev | 2009-07-25 05:56:46 +1000 (Sat, 25 Jul 2009) | 2 lines

This is 1.1.0svn
........
r42701 | sev | 2009-07-25 06:21:49 +1000 (Sat, 25 Jul 2009) | 2 lines

re-enable SCI engine
........
r42704 | drmccoy | 2009-07-25 07:29:41 +1000 (Sat, 25 Jul 2009) | 1 line

Adding support for ADPCM sound data (yet another IMA ADPCM variant). What we've called ADPCM before is more like DPCM
........
r42705 | drmccoy | 2009-07-25 07:31:00 +1000 (Sat, 25 Jul 2009) | 1 line

Adding subtitle support to Woodruff
........
r42706 | drmccoy | 2009-07-25 07:31:58 +1000 (Sat, 25 Jul 2009) | 1 line

Caching the subtitle font and color, because some don't assign those
........
r42707 | drmccoy | 2009-07-25 07:32:45 +1000 (Sat, 25 Jul 2009) | 1 line

Calculating the number of data bytes per initial sound slice, because relying on the standard amount doesn't work for some videos
........
r42708 | drmccoy | 2009-07-25 07:33:22 +1000 (Sat, 25 Jul 2009) | 1 line

Properly reading the video codec fourcc, in case we need other codecs in the future
........
r42709 | drmccoy | 2009-07-25 07:33:55 +1000 (Sat, 25 Jul 2009) | 1 line

Adding ADL playback to the demoplayer
........
r42710 | drmccoy | 2009-07-25 07:34:17 +1000 (Sat, 25 Jul 2009) | 1 line

Adding stubs for newer VMDs found in Addy 5
........
r42711 | drmccoy | 2009-07-25 07:34:43 +1000 (Sat, 25 Jul 2009) | 1 line

Added a method to easily dump resources to file
........
r42712 | drmccoy | 2009-07-25 07:35:06 +1000 (Sat, 25 Jul 2009) | 1 line

Fixing bytes per pixel detection
........
r42713 | drmccoy | 2009-07-25 07:35:57 +1000 (Sat, 25 Jul 2009) | 1 line

Renaming getAnchor() to getFrameCoords()
........
r42714 | drmccoy | 2009-07-25 07:36:16 +1000 (Sat, 25 Jul 2009) | 1 line

Moving all implementations into the cpp
........
r42715 | drmccoy | 2009-07-25 07:36:42 +1000 (Sat, 25 Jul 2009) | 1 line

CoktelVideo cleanup: Splitting up some IMD methods and removing the obsolete notifyPaused()
........
r42716 | drmccoy | 2009-07-25 07:36:59 +1000 (Sat, 25 Jul 2009) | 1 line

Merging Map_v4 into Map_v2
........
r42717 | lordhoto | 2009-07-25 10:58:44 +1000 (Sat, 25 Jul 2009) | 1 line

Add new event dispatching API.
........
r42718 | lordhoto | 2009-07-25 10:59:03 +1000 (Sat, 25 Jul 2009) | 1 line

Replace 'EventProvider' class of the DefaultEventManager implementation with 'Common::EventSource'.
........
r42719 | lordhoto | 2009-07-25 10:59:18 +1000 (Sat, 25 Jul 2009) | 1 line

Got rid of EventManger::artificialEventQueue.
........
r42720 | lordhoto | 2009-07-25 10:59:30 +1000 (Sat, 25 Jul 2009) | 1 line

Add function 'allowMapping' to EventSource, for testing whether the event source allows mapping (via the Keymapper for example.)
........
r42721 | lordhoto | 2009-07-25 10:59:39 +1000 (Sat, 25 Jul 2009) | 1 line

Prevent EventMapper events from being mapped.
........
r42722 | lordhoto | 2009-07-25 10:59:53 +1000 (Sat, 25 Jul 2009) | 1 line

Replaced '_artificialEventQueue' by an EventSource.
........
r42723 | lordhoto | 2009-07-25 11:00:12 +1000 (Sat, 25 Jul 2009) | 1 line

Made DefaultEventManager a subclass of EventObserver.
........
r42724 | lordhoto | 2009-07-25 11:00:24 +1000 (Sat, 25 Jul 2009) | 2 lines

- Add marco to easily access the EventDispatcher instance.
- Add events.cpp to module.mk
........
r42725 | lordhoto | 2009-07-25 11:00:37 +1000 (Sat, 25 Jul 2009) | 1 line

Change DefaultEventManager to use EventDispatcher.
........
r42726 | lordhoto | 2009-07-25 11:00:47 +1000 (Sat, 25 Jul 2009) | 1 line

Moved ArtificialEventSource to common/events.h.
........
r42727 | lordhoto | 2009-07-25 11:01:05 +1000 (Sat, 25 Jul 2009) | 2 lines

- Adapt DefaultEventManager to use Common::ArtificialEventSource
- Adapt Keymapper to implement EventMapper interface
........
r42728 | lordhoto | 2009-07-25 11:01:22 +1000 (Sat, 25 Jul 2009) | 2 lines

- EventDispatcher is no longer a singleton.
- Add 'getEventDispatcher' method to EventManager.
........
r42729 | lordhoto | 2009-07-25 11:01:41 +1000 (Sat, 25 Jul 2009) | 1 line

Add enum which marks global priorites of the EventManager event dispatcher.
........
r42736 | Kirben | 2009-07-25 15:39:57 +1000 (Sat, 25 Jul 2009) | 1 line

Add patch #2816140 - MM C64 Costume Animation.
........
r42737 | Kirben | 2009-07-25 16:27:41 +1000 (Sat, 25 Jul 2009) | 1 line

Add patch #2821100 - MM C64 Objects / Verb fixes, with minor clean up applied.
........
r42738 | Kirben | 2009-07-25 16:36:41 +1000 (Sat, 25 Jul 2009) | 1 line

Update credits.
........
r42739 | eriktorbjorn | 2009-07-25 16:55:28 +1000 (Sat, 25 Jul 2009) | 2 lines

Fixed GCC warnings.
........
r42740 | Kirben | 2009-07-25 17:17:37 +1000 (Sat, 25 Jul 2009) | 1 line

Whitespace changes.
........
r42742 | fingolfin | 2009-07-25 19:36:16 +1000 (Sat, 25 Jul 2009) | 1 line

Whitespace fixes
........
r42743 | wjpalenstijn | 2009-07-25 20:25:57 +1000 (Sat, 25 Jul 2009) | 1 line

Add Common::String::printf to format a string
........
r42744 | wjpalenstijn | 2009-07-25 20:26:17 +1000 (Sat, 25 Jul 2009) | 1 line

Use new Common::String::printf
........
r42746 | sev | 2009-07-25 20:37:20 +1000 (Sat, 25 Jul 2009) | 2 lines

Formatting
........
r42747 | joostp | 2009-07-25 22:28:45 +1000 (Sat, 25 Jul 2009) | 1 line

fix unaligned writes
........
r42748 | joostp | 2009-07-25 22:41:46 +1000 (Sat, 25 Jul 2009) | 1 line

remove implicit SoundDigital::Sound ctor call, which is redundant because the required initialisation is done below -- this fixes a linker error with mipspro
........
r42751 | lordhoto | 2009-07-25 22:59:46 +1000 (Sat, 25 Jul 2009) | 1 line

Move the event recorder to its own class (EventRecoder inside common/EventRecorder.[h/cpp]).
........
r42752 | lordhoto | 2009-07-25 23:00:09 +1000 (Sat, 25 Jul 2009) | 1 line

Strip trailing whitespaces.
........
r42753 | joostp | 2009-07-25 23:07:17 +1000 (Sat, 25 Jul 2009) | 1 line

fix another aligned write
........
r42755 | eriktorbjorn | 2009-07-25 23:07:50 +1000 (Sat, 25 Jul 2009) | 2 lines

Added word-wrapping to Drascula's conversation options. Fixes bug #2826607.
........
r42757 | eriktorbjorn | 2009-07-25 23:17:31 +1000 (Sat, 25 Jul 2009) | 2 lines

Don't hog the CPU while waiting for the player to pick a conversation option.
........
r42759 | lordhoto | 2009-07-25 23:23:51 +1000 (Sat, 25 Jul 2009) | 1 line

Fix gp2x port building.
........
r42761 | lordhoto | 2009-07-26 00:09:58 +1000 (Sun, 26 Jul 2009) | 1 line

Yet another fix for the GP2x backend.
........
r42765 | lordhoto | 2009-07-26 01:31:11 +1000 (Sun, 26 Jul 2009) | 1 line

Adept savegame name creation code to use Common::String::printf.
........
r42766 | drmccoy | 2009-07-26 02:07:29 +1000 (Sun, 26 Jul 2009) | 1 line

Added a workaround to fix the Last Dynasty video greenness for now
........
r42767 | drmccoy | 2009-07-26 02:08:31 +1000 (Sun, 26 Jul 2009) | 1 line

Moved the decision whether subtitles should be displayed, so that the broken subtitles in The Last Dynasty aren't shown
........
r42768 | drmccoy | 2009-07-26 02:09:19 +1000 (Sun, 26 Jul 2009) | 1 line

Fixing Woodruff videos again after enabling block type 2 transparency
........
r42771 | lordhoto | 2009-07-26 02:34:01 +1000 (Sun, 26 Jul 2009) | 1 line

Fix palette regression in Kyra2.
........
r42773 | lordhoto | 2009-07-26 02:37:25 +1000 (Sun, 26 Jul 2009) | 1 line

Implement missing bits in KyraEngine_HoF::setCauldronState.
........
r42776 | eriktorbjorn | 2009-07-26 03:48:51 +1000 (Sun, 26 Jul 2009) | 5 lines

Make sure that 'buf' is properly terminated. Actually, we could probably get
rid of 'buf' completely, and replace it with face = syncChar[p] - '0', assuming
that syncChar only contains digits. But for now, let's make a minimal change.
This might fix bug #2826611 ('DRASCULA: Crash when smashing church window').
........
r42780 | joostp | 2009-07-26 04:35:27 +1000 (Sun, 26 Jul 2009) | 2 lines

use READ_UINT16 macro
........
r42782 | drmccoy | 2009-07-26 04:44:06 +1000 (Sun, 26 Jul 2009) | 1 line

Adding support for (new-style) stereo in DPCM audio
........
r42783 | drmccoy | 2009-07-26 04:44:24 +1000 (Sun, 26 Jul 2009) | 1 line

Adding more sanity checks to Vmd::renderFrame()
........
r42785 | djwillis | 2009-07-26 05:07:28 +1000 (Sun, 26 Jul 2009) | 1 line

GP2X Backend: Volume control code cleanup.
........
r42787 | wjpalenstijn | 2009-07-26 09:36:24 +1000 (Sun, 26 Jul 2009) | 2 lines

Add optional readline support to the text debugger console.
Make text/graphical console selectable with an option to configure.
........
r42790 | dreammaster | 2009-07-26 10:27:32 +1000 (Sun, 26 Jul 2009) | 1 line

Changed the events.cpp file to EventDispatcher.cpp, to avoid MSVC name clashes with sdl/events.cpp
........
r42791 | dreammaster | 2009-07-26 10:31:28 +1000 (Sun, 26 Jul 2009) | 1 line

Fixed compilation from file changes to common and gob engine
........
r42792 | lordhoto | 2009-07-26 17:07:35 +1000 (Sun, 26 Jul 2009) | 1 line

Formatting.
........
r42793 | peres001 | 2009-07-26 18:37:03 +1000 (Sun, 26 Jul 2009) | 1 line

Moved parser functions arrays to file scope, as they were tripping up the obsolete gcc used for the BeOS/Haiku port. If anybody can work out a better solution please apply it, because this makes me sick.
........
r42795 | dreammaster | 2009-07-26 19:09:07 +1000 (Sun, 26 Jul 2009) | 1 line

Added a delay to the in-game menu loop to prevent 100% CPU usage
........
r42798 | dreammaster | 2009-07-26 19:40:35 +1000 (Sun, 26 Jul 2009) | 1 line

Bugfix for mouse button clicks getting counted multiple times
........
r42799 | dreammaster | 2009-07-26 19:48:52 +1000 (Sun, 26 Jul 2009) | 1 line

Added a debug line to allow tracking of script execution
........
r42801 | eriktorbjorn | 2009-07-26 20:10:08 +1000 (Sun, 26 Jul 2009) | 4 lines

78 bytes isn't enough for some of the longer conversation options. 128 might
not be enough either, but at least it fixes bug #2827170 ('DRASCULA:
Conversation error').
........
r42807 | djwillis | 2009-07-26 22:58:22 +1000 (Sun, 26 Jul 2009) | 2 lines

Virtual Keyboard: Update default keyboard pack using slightly tweaked versions of the graphics very kindly provided by Carl Mitchell. Also update xml file to make best use of the keyboard graphics and add the 'delete' event in addition the passing backspace back to the calling textarea.
........
r42809 | drmccoy | 2009-07-26 23:50:18 +1000 (Sun, 26 Jul 2009) | 1 line

Reverting my fix for bug #2037158 ('In-Game animation shifted(?)'), because it breaks Woodruff's intro
........
r42812 | lordhoto | 2009-07-27 00:16:51 +1000 (Mon, 27 Jul 2009) | 1 line

Create base class FontSJIS16x16 for our own SJIS font.
........
r42813 | lordhoto | 2009-07-27 00:17:06 +1000 (Mon, 27 Jul 2009) | 1 line

Add support for our custom SJIS font.
........
r42814 | lordhoto | 2009-07-27 00:17:21 +1000 (Mon, 27 Jul 2009) | 1 line

Change KYRA to use our SJIS font, when it's available.
........
r42815 | lordhoto | 2009-07-27 00:17:40 +1000 (Mon, 27 Jul 2009) | 1 line

Change the way the font data for SJIS fonts is load.
........
r42816 | lordhoto | 2009-07-27 00:17:54 +1000 (Mon, 27 Jul 2009) | 1 line

Add a factory method, which tries to open different SJIS fonts/ROMs and returns a font for the first present data.
........
r42817 | lordhoto | 2009-07-27 00:18:06 +1000 (Mon, 27 Jul 2009) | 1 line

Print warning, when client code does try to draw an unsupported SJIS char.
........
r42818 | lordhoto | 2009-07-27 00:18:21 +1000 (Mon, 27 Jul 2009) | 1 line

Specify that the chars passed to FontSJIS::drawChar should be little endian.
........
r42819 | lordhoto | 2009-07-27 00:18:34 +1000 (Mon, 27 Jul 2009) | 1 line

Add way to overwrite default SJIS font.
........
r42820 | lordhoto | 2009-07-27 00:18:49 +1000 (Mon, 27 Jul 2009) | 1 line

Simplify KYRA's SJIS font loading code.
........
r42821 | lordhoto | 2009-07-27 00:19:02 +1000 (Mon, 27 Jul 2009) | 1 line

Reflect code to test the magic bytes in the sjis.fnt header.
........
r42822 | lordhoto | 2009-07-27 00:24:45 +1000 (Mon, 27 Jul 2009) | 1 line

Add NEWS entry about new SJIS code.
........
r42823 | lordhoto | 2009-07-27 00:40:03 +1000 (Mon, 27 Jul 2009) | 1 line

Instead of only printing a warning, when no SJIS char data is present, just return to the caller.
........
r42824 | lordhoto | 2009-07-27 00:40:44 +1000 (Mon, 27 Jul 2009) | 1 line

Add a todo to FontSJIS::drawChar taking an Graphics::Surface.
........
r42825 | marcus_c | 2009-07-27 06:41:33 +1000 (Mon, 27 Jul 2009) | 1 line

Create IP.BIN.
........
r42826 | joostp | 2009-07-27 07:06:53 +1000 (Mon, 27 Jul 2009) | 1 line

fix/workaround for cruise crash on OSX
........
r42842 | wjpalenstijn | 2009-07-28 02:04:35 +1000 (Tue, 28 Jul 2009) | 2 lines

Fix format string issues (and compiler warnings).
Patch by salty-horse.
........
r42843 | robinwatts | 2009-07-28 02:29:36 +1000 (Tue, 28 Jul 2009) | 7 lines

Add ARM code version of Normal2x scaler.
Add ARM only aspect ratio correcting version of Normal2x scaler.

Make WinCE port use Normal2x by default if the screen is large enough.
Make WinCE port use aspect ratio correcting version if panel is hidden.
........
r42844 | lordhoto | 2009-07-28 03:04:06 +1000 (Tue, 28 Jul 2009) | 1 line

Formatting.
........
r42845 | lordhoto | 2009-07-28 03:48:40 +1000 (Tue, 28 Jul 2009) | 1 line

Fix bug #2827459 'ITE: Ingame GUI does not list slots 96-99', by defining in SagaMetaEngine that the last valid save slot for SAGA is slot 95.
........
r42847 | djwillis | 2009-07-28 04:05:16 +1000 (Tue, 28 Jul 2009) | 1 line

GP2XWiz: Update GP2X Wiz bundle.sh to copy libraries into the distribution file from the tool chain where the libraries are broken on the device. Also add LD_LIBRARY_PATH 'hack' to launch script to ensure bundled libraries are used over system ones.
........
r42849 | lordhoto | 2009-07-28 04:19:16 +1000 (Tue, 28 Jul 2009) | 1 line

Oops enabled HACK to prevent multiple OPL instances again.
........
r42851 | drmccoy | 2009-07-28 05:01:17 +1000 (Tue, 28 Jul 2009) | 1 line

Abstracting off the block types from Imd::renderFrame() and Vmd::renderFrame()
........
r42856 | drmccoy | 2009-07-29 01:05:44 +1000 (Wed, 29 Jul 2009) | 1 line

Silencing two 'empty loop body' warnings
........
r42857 | drmccoy | 2009-07-29 01:19:55 +1000 (Wed, 29 Jul 2009) | 1 line

Changing stuff around a bit so alignment requirements won't increase
........
r42858 | drmccoy | 2009-07-29 02:28:32 +1000 (Wed, 29 Jul 2009) | 1 line

More alignment-related changes
........
r42859 | eriktorbjorn | 2009-07-29 03:19:33 +1000 (Wed, 29 Jul 2009) | 3 lines

Fixed drawing subtitles for cutscenes that are narrower than the screen, and
erase the subtitles manually if they are drawn outside the frame.
........
r42861 | eriktorbjorn | 2009-07-29 03:53:59 +1000 (Wed, 29 Jul 2009) | 3 lines

Broken Sword 2, unsurprisingly, had the same subtitle drawing glitch for small
cutscenes that Broken Sword 1 had. And a memory leak. This should fix both.
........
r42863 | djwillis | 2009-07-29 06:22:38 +1000 (Wed, 29 Jul 2009) | 1 line

GP2XWiz: Add downscale support to the backend using the PocketPCHalfARM scaler from the WinCE backend (Maybe this should be moved into /graphics/scalers at some point?). Also enable all the ARM optemised routines in this and the GP2X backend.
........
r42866 | fingolfin | 2009-07-29 08:28:40 +1000 (Wed, 29 Jul 2009) | 1 line

SCI: Avoid using perror (it's not portable)
........
r42868 | fingolfin | 2009-07-29 08:42:08 +1000 (Wed, 29 Jul 2009) | 1 line

Patch #2828644: Support for mingw32ce 0.5.1 toolchain in configure script
........
r42870 | fingolfin | 2009-07-29 09:19:33 +1000 (Wed, 29 Jul 2009) | 2 lines

SCUMM: Moved _inventoryOffset to ScummEngine_v2 and save it.
Fixes bug #2828417: Zak V2: inventory position isn't reset when loading.
........
r42880 | fingolfin | 2009-07-29 18:55:04 +1000 (Wed, 29 Jul 2009) | 1 line

SCUMM: cleanup
........
r42881 | fingolfin | 2009-07-29 18:55:17 +1000 (Wed, 29 Jul 2009) | 1 line

GUI: When clicking in a scrollbar to page up/down, don't scroll a full page; rather scroll a full page minus one line (see FR #2821508). This matches the behavior of the page up/down keys
........
r42886 | fingolfin | 2009-07-29 19:19:56 +1000 (Wed, 29 Jul 2009) | 1 line

Sort audio output rates numerically (see FR #2821525)
........
r42887 | drmccoy | 2009-07-29 20:17:44 +1000 (Wed, 29 Jul 2009) | 1 line

Adding a SoundType parameter to SmackerDecoder, defaulting to kSFXSoundType
........
r42889 | fingolfin | 2009-07-29 21:48:20 +1000 (Wed, 29 Jul 2009) | 1 line

SCUMM: Rewrote ScummEngine::inventoryScriptIndy3Mac for clarity
........
r42890 | lordhoto | 2009-07-30 00:54:27 +1000 (Thu, 30 Jul 2009) | 1 line

Fix animation script sound effect opcode implementation in Kyra3.
........
r42892 | lordhoto | 2009-07-30 01:31:23 +1000 (Thu, 30 Jul 2009) | 1 line

Fix saving of item in hand in HoF and MR.
........
r42894 | drmccoy | 2009-07-30 01:57:50 +1000 (Thu, 30 Jul 2009) | 1 line

Oops, fixing a regression I created with the Map_v4/Map_v2-merge
........
r42895 | lordhoto | 2009-07-30 02:24:07 +1000 (Thu, 30 Jul 2009) | 1 line

Fix a little bug in KyraEngine_MR::showBadConscience, which prevented Gunther's mouse shapes from showing up.
........
r42898 | fingolfin | 2009-07-30 04:35:34 +1000 (Thu, 30 Jul 2009) | 1 line

SCUMM: Enable looping in Indy3Mac sound effects
........
r42900 | lordhoto | 2009-07-30 05:39:03 +1000 (Thu, 30 Jul 2009) | 1 line

Fix regression, which prevented saving in COMI.
........
r42904 | lordhoto | 2009-07-30 06:03:46 +1000 (Thu, 30 Jul 2009) | 1 line

Fix typo, which made our 'floorf' macro use 'floorf' instead of 'floor' on systems without 'floorf'.
........
r42907 | fingolfin | 2009-07-30 06:35:50 +1000 (Thu, 30 Jul 2009) | 1 line

SCUMM: Fix verb/sentence handling in Indy3 mac (there, a double click must be used to trigger a verb/sentence)
........
r42910 | fingolfin | 2009-07-30 07:39:00 +1000 (Thu, 30 Jul 2009) | 1 line

Removed last traces of clearIOFailed. Yay :)
........
r42911 | fingolfin | 2009-07-30 07:39:16 +1000 (Thu, 30 Jul 2009) | 1 line

Removed redundant File::ioFailed() implementation; also turned ReadStream::ioFailed from a virtual into an inline method
........
r42912 | fingolfin | 2009-07-30 07:39:34 +1000 (Thu, 30 Jul 2009) | 1 line

SWORD1 & SWORD2: Replaced ioFailed by err+eos
........
r42918 | fingolfin | 2009-07-30 19:36:50 +1000 (Thu, 30 Jul 2009) | 1 line

Patch #2818501: enable scale2x mmx on x86_64
........
r42920 | dreammaster | 2009-07-30 21:03:16 +1000 (Thu, 30 Jul 2009) | 1 line

Added the character lookup table for the Spanish font
........
r42922 | peres001 | 2009-07-30 23:41:22 +1000 (Thu, 30 Jul 2009) | 1 line

Use SaveFileMan::listSaveFiles() to build list of old savegames for Nippon Safes.
........
r42923 | peres001 | 2009-07-30 23:42:08 +1000 (Thu, 30 Jul 2009) | 1 line

Fixed typo in user message.
........
r42924 | peres001 | 2009-07-30 23:44:50 +1000 (Thu, 30 Jul 2009) | 1 line

Cleanup the header file as I removed one function in r42922.
........
r42926 | lordhoto | 2009-07-31 00:24:23 +1000 (Fri, 31 Jul 2009) | 1 line

Fix bug which caused the mouse cursor not to update in some cases.
........
r42929 | lordhoto | 2009-07-31 01:12:42 +1000 (Fri, 31 Jul 2009) | 1 line

Add tanoku to our GUI credits section.
........
r42932 | lordhoto | 2009-07-31 01:19:15 +1000 (Fri, 31 Jul 2009) | 1 line

Prevent our 'credits' make target updating Credits.rtf, which in fact is not present in SVN anymore, and the outdated docbook.
........
r42934 | lordhoto | 2009-07-31 02:43:25 +1000 (Fri, 31 Jul 2009) | 1 line

Fix bug #2829737: 'GUI: Wrong background colours on dialog screens (IRIX)'.
........
r42935 | lordhoto | 2009-07-31 02:51:53 +1000 (Fri, 31 Jul 2009) | 1 line

Fixed missing clearing of the low bit of the alpha mask in the 'dim' screen shading function.
........
r42937 | fingolfin | 2009-07-31 03:48:03 +1000 (Fri, 31 Jul 2009) | 1 line

NDS: Changed jtypes.h to ndstypes.h (this 'newer' name has been in effect even in the older versions of DevKitPro used for compiling ScummVM...)
........
r42938 | fingolfin | 2009-07-31 03:52:44 +1000 (Fri, 31 Jul 2009) | 1 line

minor cleanup to scale2x, to avoid confusing the compiler about potential pointer aliasing (only the tip of the iceberg, of course... ;)
........
r42939 | fingolfin | 2009-07-31 04:27:50 +1000 (Fri, 31 Jul 2009) | 1 line

DS: Started work on a new build system for the  Nintendo DS port, based on configure (and thus suitable for buildbot). Currently only the ARM7 part is 'done'
........
r42940 | lordhoto | 2009-07-31 05:43:36 +1000 (Fri, 31 Jul 2009) | 1 line

Change code to use our fractional utilities.
........
r42941 | lordhoto | 2009-07-31 05:43:53 +1000 (Fri, 31 Jul 2009) | 1 line

Fix Browser dialog name.
........
r42943 | fingolfin | 2009-07-31 06:46:43 +1000 (Fri, 31 Jul 2009) | 1 line

Overhauled the credits: Retired members are now (partially) back to their old sections, to make sure people really see all people who contribute to an engine/backend. Also added&fixed some entries, and moved the FreeSCI section
........
r42946 | fingolfin | 2009-07-31 06:58:32 +1000 (Fri, 31 Jul 2009) | 1 line

Changed 10rdH070's nick back to LordHoto, and added Hkz to the credits
........
r42947 | fingolfin | 2009-07-31 07:04:46 +1000 (Fri, 31 Jul 2009) | 1 line

Added Strangerke to credits, and moved wjp from Gob to SCI on his request
........
r42950 | fingolfin | 2009-07-31 07:45:09 +1000 (Fri, 31 Jul 2009) | 1 line

Patch #2828669: CRUISE: Fix cruise compilation with mingw32ce toolchain
........
r42951 | fingolfin | 2009-07-31 07:56:04 +1000 (Fri, 31 Jul 2009) | 1 line

SCUMM: Properly detect & distinguish the three FM-TOWNS double-demos
........
r42952 | fingolfin | 2009-07-31 07:56:18 +1000 (Fri, 31 Jul 2009) | 1 line

cleanup
........
r42953 | tanoku | 2009-07-31 09:42:12 +1000 (Fri, 31 Jul 2009) | 2 lines

Fixed corrupted theme files.
........
r42955 | tanoku | 2009-07-31 10:22:46 +1000 (Fri, 31 Jul 2009) | 2 lines

Prevent high-resolution layouts to be loaded on low resolutions.
........
r42958 | peres001 | 2009-07-31 22:39:31 +1000 (Fri, 31 Jul 2009) | 1 line

When renaming old savefiles for Nippon Safes, don't assert if a file that matches the pattern game.* and is not a savefile is found in the savepath.
........
r42959 | djwillis | 2009-07-31 23:01:28 +1000 (Fri, 31 Jul 2009) | 1 line

GP2X: Clean up README-GP2X and remove HTML version of it from SVN (no one ever reads it and the WiKi is more upto date).
........
r42964 | djwillis | 2009-08-01 03:10:20 +1000 (Sat, 01 Aug 2009) | 1 line

GP2XWiz: Small cleanup of render code to slave as much of loadGFXMode() code back to the OSystem_SDL::loadGFXMode(). version. Also update README-GP2XWIZ.
........
r42965 | dreammaster | 2009-08-01 09:27:19 +1000 (Sat, 01 Aug 2009) | 1 line

Fix bug with the event loop that was discarding pending events rather than leaving them to be processed in the following frame
........
r42973 | buddha_ | 2009-08-01 19:53:21 +1000 (Sat, 01 Aug 2009) | 1 line

Remove obsolete comment from Cine::Palette::saturatedAddColor.
........
r42974 | eriktorbjorn | 2009-08-02 01:42:42 +1000 (Sun, 02 Aug 2009) | 4 lines

Added some more information to the 'Compressed sound ... invalid' error. Maybe
this will help in determining what's causing bug #2830364. (It sounds like a
bad data file, but who knows...)
........
r42995 | drmccoy | 2009-08-02 20:40:27 +1000 (Sun, 02 Aug 2009) | 1 line

When ESCing videos, seek to the last frame that was meant to be played. Fixes graphical glitches (bug #2830985) and crashes (bug #2830988)
........
r42996 | drmccoy | 2009-08-02 20:40:48 +1000 (Sun, 02 Aug 2009) | 1 line

Removing _frameWaitLag. It broke normal animation speed in pre-v4 games and didn't even do what it was supposed to in v4+ games anyway. (bug #2830985)
........
r42999 | eriktorbjorn | 2009-08-02 22:49:57 +1000 (Sun, 02 Aug 2009) | 2 lines

Show a message if saving or loading a game fails.
........
r43001 | drmccoy | 2009-08-02 23:54:06 +1000 (Sun, 02 Aug 2009) | 1 line

Show a message if saving or loading a game fails.
........
r43003 | knakos | 2009-08-03 03:34:57 +1000 (Mon, 03 Aug 2009) | 1 line

rework mixer (re)init. fixes bug #2694722
........
r43005 | joostp | 2009-08-03 03:58:48 +1000 (Mon, 03 Aug 2009) | 1 line

align memory handles to sizeof(void*) instead of 4 (which is just good enough for 32-bit) - this fixes DW2 on 64-bit systems that require alignment
........
r43007 | djwillis | 2009-08-03 05:46:18 +1000 (Mon, 03 Aug 2009) | 1 line

GP2XWiz: More cleanup of render code and fix silly screen update bug when reverting to a 320*2xx game from a 640*4xx game. Dirty rect code for downscaled images still needs work.
........
r43008 | knakos | 2009-08-03 05:50:24 +1000 (Mon, 03 Aug 2009) | 1 line

clean up and fix vga aspect scaler routines
........
r43010 | djwillis | 2009-08-03 07:18:25 +1000 (Mon, 03 Aug 2009) | 1 line

GP2XWiz/SDL: Fix 2 small typos.
........
r43011 | joostp | 2009-08-03 07:22:46 +1000 (Mon, 03 Aug 2009) | 1 line

Fix AGI crashes on 64-bit systems that require alignment
........
r43013 | joostp | 2009-08-03 07:44:21 +1000 (Mon, 03 Aug 2009) | 1 line

Make MemoryReAlloc() 64-bit alignment safe
........
r43020 | scott_t | 2009-08-03 11:19:36 +1000 (Mon, 03 Aug 2009) | 1 line

T7G: Fix bug #2831046 where save names not shown after loading a save from launcher
........
r43023 | dreammaster | 2009-08-03 19:28:06 +1000 (Mon, 03 Aug 2009) | 1 line

Bugfix to correctly reset the music tempo when loading a savegame
........
r43025 | buddha_ | 2009-08-04 03:18:18 +1000 (Tue, 04 Aug 2009) | 6 lines

Fix for bug #2828333 (AGI: KQ1: Greensleeves always plays):
- Made all savegame loading in AGI do the same pre-load and post-load stuff.
- Moved load/saveGameState from AgiBase to AgiEngine
- Added rudimentary error handling to load/saveGameState
- Incidentally also fixes the hanging note from bug #2798797.
........
r43027 | buddha_ | 2009-08-04 03:52:07 +1000 (Tue, 04 Aug 2009) | 8 lines

Fix for #2824798 (FW: crash when clicking 'load' in the GUI):
- Fixed CineMetaEngine::listSaves(const char *target) which was broken.
- Also added explicit initialization of savegame descriptions to
empty strings for safety reasons (e.g. arrays on stack aren't
initialized to zero).
- Added explicit trailing zero setting to savegame descriptions
(Previously using GMM you could write a description of length >= 20
that had no trailing zero when written to description file (e.g. fw.dir)).
........
r43029 | djwillis | 2009-08-04 04:38:46 +1000 (Tue, 04 Aug 2009) | 1 line

GP2XWiz: Fix bug with downscaled cursors.
........
r43033 | knakos | 2009-08-04 22:02:07 +1000 (Tue, 04 Aug 2009) | 1 line

add bindings for cruise engine
........
r43035 | knakos | 2009-08-04 22:19:30 +1000 (Tue, 04 Aug 2009) | 1 line

support made engine
........
r43037 | knakos | 2009-08-04 22:39:33 +1000 (Tue, 04 Aug 2009) | 1 line

update Makefile
........
r43039 | knakos | 2009-08-04 22:51:17 +1000 (Tue, 04 Aug 2009) | 1 line

update readme (draft)
........
r43041 | knakos | 2009-08-04 23:17:33 +1000 (Tue, 04 Aug 2009) | 1 line

commit slightly modified patch #2828646: WINCE: Integrate Windows CE with the master build system
........
r43042 | thebluegr | 2009-08-05 00:20:38 +1000 (Wed, 05 Aug 2009) | 1 line

Cleaned up the MSVC project files of the gob engine
........
r43043 | knakos | 2009-08-05 00:53:43 +1000 (Wed, 05 Aug 2009) | 1 line

got rid of superfluous semicolons
........
r43048 | thebluegr | 2009-08-05 03:22:18 +1000 (Wed, 05 Aug 2009) | 1 line

Removed the superfluous VGA buffer, replacing it with direct writes to the video buffer
........
r43056 | thebluegr | 2009-08-05 07:56:59 +1000 (Wed, 05 Aug 2009) | 1 line

Cleanup
........

svn-id: r43062
"
"aec91dfec48c5f4b2d88de2b4217893ebbc56129","2009-08-05 02:37:19+00:00","Enable keymapper in global config defines, no actual code changes yet.

svn-id: r43064
"
"26b372603bf84ad050d0c7b0db6896eb5279664e","2009-08-05 10:44:37+00:00","Bugfix for music not being stopped when music volume is set to zero

svn-id: r43066
"
"8820b6166ecc5f2c76e926aefdbf4d3ad6f2f062","2009-08-05 13:57:40+00:00","T7G: Fix bug #2831041 by implementing opcode responsible for starting music partway through a video

svn-id: r43068
"
"19609e1bdeafe5d76f059ade3a80b64cc6f53200","2009-08-05 16:27:29+00:00","Added common\EventRecorder.cpp, common\EventRecorder.h and common\EventDispatcher.cpp to the msvc8 project so that it compiles.

svn-id: r43070
"
"8062d37283bcf8390d8fb66cce99c2bfd65668d8","2009-08-05 21:32:42+00:00","Some groundwork for a better implementation of modifier keys. (incomplete, and breaks previous implementation)

svn-id: r43078
"
"b395b1836a8259edeaf6b2c9260b4186dee51796","2009-08-06 18:05:50+00:00","overload showMouse to kill mouse shadows in kyra

svn-id: r43088
"
"e0e09e43b84cf9637fb289bd466235116674c1f2","2009-08-07 01:17:57+00:00","key remap dialog correctly reads keystrokes again, and can tell modified keys from unmodified keys (but does not yet print modifier prefixes, and actions mapped to modified keys still do not trigger)

svn-id: r43091
"
"c9ef2d9809e7683b53d8089584aa497969615fe7","2009-08-07 09:25:06+00:00","Bugfix for #2831159 - Palace guards saying !!HIGH STRING!!

svn-id: r43093
"
"14df573175b0529756598208befe415fc250e205","2009-08-07 10:44:34+00:00","hint backend about virtual keyboard on save, in LoK

svn-id: r43095
"
"08b650c1a6fbcb5070090a1e14ba72b3e177efda","2009-08-07 11:05:58+00:00","show VK in gui_v2 games of kyra

svn-id: r43097
"
"57e45de95bbc91bd54eecff8410646675589c799","2009-08-07 18:16:58+00:00","Merge creation of Info.plist into update-version.pl.
This fixes the static version info after branching (#2820503).

svn-id: r43101
"
"6c54f893103da619fdb7cbfb7aa0522c6dce5ef8","2009-08-07 19:33:39+00:00","mouse up events need the same lovin' as mouse down events do. don't underestimate 'em. fixes bug #2833549

svn-id: r43102
"
"61e0be75b5a5da1b90299f0d3ee6fb76d4b03d9b","2009-08-08 02:23:04+00:00","When opening a data stream, don't read the whole file into memory if not necessary. This vastly improves the loading times of Gob3 on small devices

svn-id: r43107
"
"3e2ee197f186243df03cf4cea15d60c56ecc2bb9","2009-08-08 09:34:23+00:00","Commit of dhewg's patch to fix screen refreshes on the Wii

svn-id: r43112
"
"4f5e8e88cca8643cba1d155e1cbf4067c22d7bf1","2009-08-08 09:38:12+00:00","forward port of wince 3.0 fix for paths from branch 0.13.0, r39978

svn-id: r43114
"
"14574b0d81fb9711d9601f9beb5ecba06c599174","2009-08-08 11:30:56+00:00","tweaked the mapped keys to reintroduce SHIFT for mass adding games

svn-id: r43117
"
"19c27b04b6c919336353e788cea1850aad2a0a9d","2009-08-08 11:42:29+00:00","Add workaround for bug #2820054 'DW1: No intro music at first start on Wii', which actually happened on all systems, when using the multilanguage version.

svn-id: r43119
"
"d593c03c1a9fa6cee9601e7a9f5f3bab609ebe6f","2009-08-08 11:51:15+00:00","Fix for bug #2412336 'DW2: Voices cut off' (commit on behalf of dreammaster)

svn-id: r43120
"
"462d6dc65ced5c08d91a31bdeed69702c681a822","2009-08-08 12:00:34+00:00","Formatting fix.

svn-id: r43122
"
"d14c0fd886cfb46854034cfbada43d6300a35dae","2009-08-08 12:22:34+00:00","Change workaround for bug #2820054 to apply for all GRA versions.

svn-id: r43123
"
"c455e135b2eb89e9bf250dce2c5765a6afb284e0","2009-08-08 13:57:21+00:00","Fix XMIDI looping implementation. Now for example the music in the ferret village of ITE plays fine.

svn-id: r43126
"
"65a39cc2b0ebb989444330c561743ba0466c1a9c","2009-08-08 18:01:44+00:00","Implement FR#2821534: 'GUI: Mute All disable volume sliders'

svn-id: r43131
"
"f805e1b413e3da5abf317225b936f95ed576c5fc","2009-08-08 20:08:22+00:00","Add DS version of Atari MM from Bug #2834054

svn-id: r43139
"
"f45808aeb07932e40ddb18863907744768f76341","2009-08-08 20:16:58+00:00","Patch #2832247: 'GMM: Enable loading & deleting of unnamed savegames'

svn-id: r43143
"
"c0e7f926521b01af6459615a6844b52f202cb436","2009-08-08 20:49:13+00:00","Fix bug #2825565: 'Unable to select subtitles in Atlantis and Simon 1'

svn-id: r43145
"
"256a27350a1896137a4416eb5db26662c7fab2ee","2009-08-08 21:43:07+00:00","Changed the scroll-handling to be more like the original. This fixes bug #2832362 ('GOB3: Scrolling locked after cutscene')

svn-id: r43147
"
"5dbd11abad7c5e1f069a67a63b9be66cbfafc255","2009-08-09 01:05:47+00:00","Changed subtitles display speed to also include the time taken to say voice samples (if voices are turned on). This means subtitles will display for the same time irrespective of whether voices are on or not

svn-id: r43150
"
"82692b117c5c18a32c7f2eb402340adee3ac3f7a","2009-08-09 01:20:08+00:00","Fix bug #2834254 - ELVIRA: Buggy scroll arrows when mixing spells.

svn-id: r43152
"
"6046b8f1348a9a50ca09a257b5781a8ca2970d2d","2009-08-09 01:45:39+00:00","Slight adjustment to Spanish font lookup table, based on mac_es's description of character lookup problems

svn-id: r43155
"
"5f53ec3b294b3f2cccab94ff400bec70ab3504b8","2009-08-09 01:55:34+00:00","Fix bug #2834252 - ELVIRA1 Problem with 8-character-long save names.

svn-id: r43156
"
"c14ee974e764d86a649591a13504db22cc72ecc0","2009-08-09 07:16:08+00:00","Fix bug #2834260 - ELVIRA1: Graphic glitch when bird takes off.

svn-id: r43163
"
"4389b70395c41f3f787c628602f5525a67033701","2009-08-09 10:28:11+00:00","Fix glitch when removing arrows from spell book in Elvira 1.

svn-id: r43165
"
"b1a3bc9ca4286a52d97992723100fece10d9cd38","2009-08-09 12:12:24+00:00","GP2X: Commit local version of backend, contains a 'fix' to work around a GP2X SDL 'feature' that was removing the ability to disable aspect ratio correction. Also misc cleanup and changes to default volume levels to cut down on sample clipping.

svn-id: r43167
"
"a9e55b2f9115c3b61ab4bfdce10043ecff653762","2009-08-09 12:23:01+00:00","Removed redundant code related to Midi handling

svn-id: r43171
"
"24838c297b9b11b86562d99097b6b1c3bea3e26d","2009-08-09 15:37:00+00:00","Fix for bug #2834250 'GUI: Incorrect behavior of sliders'.

svn-id: r43172
"
"443e1b87e99e1b850aedcf11704f4f8931c02d16","2009-08-09 18:34:08+00:00","removing support for flac (good riddance) and mpeg2

svn-id: r43178
"
"9711cb0191eee52e2ea26031f078a8adbc94c16a","2009-08-09 18:37:29+00:00","update news files for 1.0.0rc1 release

svn-id: r43179
"
"ad40f3b46eb898fac1447c7ceb55f312fbed8a8c","2009-08-09 19:11:10+00:00","Cleanup AMIGA graphics conversion.

svn-id: r43183
"
"518cb968b23bfb37cd1248c3a884d004a3309bba","2009-08-09 22:46:25+00:00","Create a 'Font' interface and create a 'DOSFont' implementation for handling DOS version fonts.

svn-id: r43186
"
"300297d557e0fbd75ccb503233159b1ad7445e05","2009-08-09 22:46:43+00:00","Add support for the font format used in Kyrandia 1 Amiga. (font colors are wrong though)

svn-id: r43187
"
"5a7f85fbf6ce7ea41eb05a883d7b25d0607fefa6","2009-08-09 23:23:48+00:00","Unbreak basic Kyra1 amiga in game support, by disabling some palette code for the amiga version.

svn-id: r43188
"
"738c51f88ff4f61009533d23d633805a03427c5c","2009-08-09 23:32:52+00:00","Clear the destination page for bitmap loading, this fixes graphics artifacts in Kyra1 amiga.

svn-id: r43189
"
"6dc54e4496f0c5a3d20287f64783f9c0cbec1eb9","2009-08-10 01:08:20+00:00","SCI: Added detection entries for French versions of Eco Quest 1/2 (reported
by Strangerke).

svn-id: r43190
"
"f16ca2ee19f3c5cf02cdd48782e900899c1df8fc","2009-08-10 01:32:22+00:00","Disable menu text fading in kyra1 amiga for now.

svn-id: r43191
"
"48e86a9e22859aaa7c31ec3a3f2e17670a991c6a","2009-08-10 01:32:39+00:00","Initial support for correct colors in the interface of Kyra1 AMIGA.

svn-id: r43192
"
"6c1bd68aed39fb48dcf72c05ce7354090ba9291a","2009-08-10 01:32:59+00:00","Fix inventory background color.

svn-id: r43193
"
"c85c5030dfd61b2d181b1cec071b9532e4acc8aa","2009-08-10 01:33:18+00:00","Fix text color in character speeches in Kyra1 amiga.

svn-id: r43194
"
"e265084bc37a2b7a867a5e85a6a644ff0bb16215","2009-08-10 01:33:36+00:00","Fix interface text color.

svn-id: r43195
"
"d68706d8edcdf8e605c2e2ddbf7dd05d96785fe9","2009-08-10 01:33:56+00:00","Enable interface text fading in Kyra1 amiga again.

svn-id: r43196
"
"bee9391d95ccd85a13a31b8d3a129f367c8c23c7","2009-08-10 01:34:14+00:00","Use interface palette for mouse cursor in Kyra1 amiga, when it's enabled.

svn-id: r43197
"
"3ad62ee71bbf41a93f18ff789e0521795e29baab","2009-08-10 01:34:29+00:00","Cleanup.

svn-id: r43198
"
"2ccffb9075243a29db435ce545f14b0b1051da44","2009-08-10 01:34:46+00:00","Remove dead code.

svn-id: r43199
"
"b63d787caab4723f4f6417f8ad67355114f13976","2009-08-10 02:32:19+00:00","Fix bug when setting up mouse cursor with inventory palette.

svn-id: r43200
"
"773c1a270b682ddc845907a605085f2f7d505d1f","2009-08-10 06:45:32+00:00","hackishly fixed modified keys not triggering their mapped actions.

svn-id: r43201
"
"44cfd9d615216c479293187b6ad1fcae3c851fba","2009-08-10 10:25:53+00:00","LOL: fix main menu in floppy version

svn-id: r43202
"
"f812d0e7b744910e9df5525f71238078794a8fab","2009-08-10 13:46:17+00:00","Made font color configuration independend from font style configuration.

svn-id: r43205
"
"d8b2baee97f762c491d4f58d263b17af791d73fc","2009-08-10 14:05:14+00:00","Rename 'font_color' attribute for 'text' draw step to 'text_color'.

svn-id: r43206
"
"fe7453be1c32b6187706a6be70a0dbbe4edb3e02","2009-08-10 14:35:28+00:00","Fix copyright string displaying in Kyra1 amiga. Unlike the DOS version it does not use a second print for creating a shadow look.

svn-id: r43207
"
"091ecc8fd09b302e9a0c86375f9b848a576700f3","2009-08-10 16:42:39+00:00","- Fix extraction of Kyra 1 amiga string tables in kyra.dat
- Fix 'taken' string offsets in kyra.dat
- Add temporary workaround for only one 'taken' string being present in Kyra 1 amiga.
- Update kyra.dat

svn-id: r43208
"
"8ac9752f8f098afb494e9066cd45a20cfaab070d","2009-08-10 17:14:03+00:00","Fix GUI strings in Kyrandia 1 Amiga.

svn-id: r43209
"
"f9b657c9f4b318952b1f867b511562afc20b198e","2009-08-10 17:14:22+00:00","Implement item to item name list index mapping for Kyrandia 1 Amiga.

svn-id: r43210
"
"c4e33211dd070d3c33be3a4d9031d154669acc2f","2009-08-10 17:17:19+00:00","Typo.

svn-id: r43211
"
"7c6ffa78e035103625d5d6e0c08d3590a129c8a3","2009-08-10 18:01:28+00:00","Fix GUI font colors and text drawing in Kyrandia 1 Amiga.

svn-id: r43212
"
"19d5aa25dc9997d9c3527e1c3326ed179331f836","2009-08-10 18:03:37+00:00","Fix GUI button outline colors in Kyra1 Amiga.

svn-id: r43213
"
"10b74c336b12104bac47c22eae0678123c67fab4","2009-08-10 18:03:54+00:00","Option 'desired_screen_aspect_ratio' for fullscreen mode in the SDL backend
Shortcoming: the picture is not centered

svn-id: r43214
"
"066dc925516a0deb8a969df863a69aa11239b6d6","2009-08-10 18:04:53+00:00","Fix GUI menu colors for Kyrandia 1 Amiga.

svn-id: r43215
"
"bd71d79e73922dbec5d0e5e8c6b273c9c6310641","2009-08-10 18:13:01+00:00","Remove unused variables.

svn-id: r43216
"
"dd9e5693253784c81fb509a208ca15943a3aadc8","2009-08-10 18:37:47+00:00","SCI: Improved multilanguage support for SCI1 and SCI1.1.

svn-id: r43217
"
"867b1c2b4d0f815a1d8c54911e56e3f6c2312408","2009-08-10 18:43:15+00:00","SCI: Fix warnings.

svn-id: r43218
"
"7dfa30d3fe285590232b48214e296681371234f5","2009-08-10 18:59:59+00:00","SCI: Fix vmvars debug command.

svn-id: r43219
"
"cb8b2d7799391cb65167be5bf0f22afe57178a24","2009-08-10 19:08:00+00:00","- Fix AMIGA to DOS palette conversion
- Amiga version uses 13 instead of 12 palette buffers

svn-id: r43220
"
"a3bbff77e9b5c26f58af5faf08155da8f40c1bc7","2009-08-10 19:09:13+00:00","Fix incorrect converted colors in Kyra1 Amiga speech text color setup.

svn-id: r43221
"
"a245dc44662b26ed2b2165badafc0a50f3668213","2009-08-10 19:10:11+00:00","Implement differences for Kyrandia 1 Amiga in o1_setCustomPaletteRange.

svn-id: r43222
"
"8999f8dbffb253fdd88718633810c3213157531a","2009-08-10 19:31:08+00:00","Add support for Italian MM NES

svn-id: r43223
"
"294f416c4df3f048e2b07f3a9c32ea2a38a13d25","2009-08-10 20:57:26+00:00","gob - Add a workaround for files (at least in Playtoons) that are tested on CD only, with the '@' symbol

svn-id: r43227
"
"1e36bac3537376764b30effc9716bf64bb995526","2009-08-10 20:58:13+00:00","gob - Add 2 files tested and used by Playtoons and Playtoons CK

svn-id: r43228
"
"eaed41215284ac34cc3c70ad4693a241a70eb780","2009-08-10 21:30:16+00:00","SCI: Added several debug command aliases.

svn-id: r43229
"
"a8f5f651a51dc1ebbbbaa33b5610009360af0ac1","2009-08-10 22:18:18+00:00","Cleanup.

svn-id: r43230
"
"1a4e1ef1121fcb8e7278d77c17b57de3499e0820","2009-08-10 22:18:33+00:00","Fix o1_makeAmuletAppear for Kyrandia 1 Amiga.

svn-id: r43231
"
"01fcad751776318f5c90665d92cf3a2c47550a76","2009-08-10 22:18:47+00:00","Fix WSA movies for final sequence of Kyrandia 1 Amiga. (this is just a theoretical fix, the game isn't yet playable till then)

svn-id: r43232
"
"0d4e110d7903afa43b41cd8cea996e2a5b68950d","2009-08-10 22:54:25+00:00","Proper implementation of o1_fadeSpecialPalette for Kyrandia 1 Amiga.

svn-id: r43233
"
"eb214d198f8ae79db32da543256ae1253efbf364","2009-08-10 22:54:45+00:00","Fix cauldron water color in Zanthia's home in Kyrandia 1 Amiga.

svn-id: r43234
"
"753f6cf587206b99dec1ec801d46c66bb9586819","2009-08-10 23:01:11+00:00","Provide a better detection method for Indy3 Mac sound effects. This fixes sounds such as the music that plays when Indy uses the whip on the hook in the giant cork. This also is a proper fix for bug #1852635 -- Sound 54 is actually not a sound effect.

svn-id: r43235
"
"9fe496c74020dd3df9367304bf4d4a7da9b9fc5c","2009-08-10 23:34:35+00:00","Implement different in Kyrandia 1 Amiga in o1_setFireberryGlowPalette.

svn-id: r43237
"
"b8111d2c6c2c2b0731fa0ca76894825c92be123a","2009-08-10 23:35:16+00:00","Fix yet another inventory background color glitch in Kyrandia 1 Amiga.

svn-id: r43238
"
"89787d49ff0d3556a49df1bd6835d1b60068fe27","2009-08-11 00:14:24+00:00","Fix a little graphics bug in Kyrandia 1 Amiga, when jewels are enabled.

svn-id: r43239
"
"714bf3398818658af133b03196987e761553ed0b","2009-08-11 00:14:40+00:00","Disable Kyragem fading for Kyrandia 1 Amiga.

svn-id: r43240
"
"40c58d4ed06b5f6bfa348be34d879c2180c516ec","2009-08-11 00:14:54+00:00","Fix regression introduced with r41081.

svn-id: r43241
"
"1a9630834c5d4e85ab3ce430e4b65bef90b6be87","2009-08-11 01:24:15+00:00","Some fixes for the Kyrandia 1 Amiga outro.

svn-id: r43245
"
"6e9ff8e381ceed150c498eaf01f1f58215c343b0","2009-08-11 01:24:40+00:00","Finally fixed the string extraction for Kyrandia 1 Amiga. This should make the intro/outro strings work fine again.

svn-id: r43246
"
"f49bfc58e4cee19bb8fdcceffa2dd56ef58cef5e","2009-08-11 01:24:56+00:00","Some changes to get the Kyrandia 1 Amiga credits to show up at least.

svn-id: r43247
"
"f419386d71baa34369024e28c2fa39bc9589dc9d","2009-08-11 01:31:34+00:00","Fix in-game GUI text input field colors for Kyrandia 1 Amiga.

svn-id: r43248
"
"7e1949dbbda07cfe9b301478fa4cb3cf83fcb6c3","2009-08-11 01:47:29+00:00","Fix crash when using Will-O-Wisp in the grotto.

svn-id: r43249
"
"1b47344cc173ae424e84d8b0eea6e4d0c84f506c","2009-08-11 02:04:17+00:00","Merged revisions 43066,43068,43088,43093,43095,43097,43101-43102,43107,43112,43114,43117,43119-43120,43122-43123,43126,43131,43139,43143,43145,43147,43150,43152,43155-43156,43163,43165,43167,43171-43172,43178-43179,43183,43186-43200,43202,43205-43223,43227-43235,43237-43241 via svnmerge from
https://scummvm.svn.sourceforge.net/svnroot/scummvm/scummvm/trunk

........
r43066 | dreammaster | 2009-08-05 20:44:37 +1000 (Wed, 05 Aug 2009) | 1 line

Bugfix for music not being stopped when music volume is set to zero
........
r43068 | scott_t | 2009-08-05 23:57:40 +1000 (Wed, 05 Aug 2009) | 1 line

T7G: Fix bug #2831041 by implementing opcode responsible for starting music partway through a video
........
r43088 | knakos | 2009-08-07 04:05:50 +1000 (Fri, 07 Aug 2009) | 1 line

overload showMouse to kill mouse shadows in kyra
........
r43093 | dreammaster | 2009-08-07 19:25:06 +1000 (Fri, 07 Aug 2009) | 1 line

Bugfix for #2831159 - Palace guards saying !!HIGH STRING!!
........
r43095 | knakos | 2009-08-07 20:44:34 +1000 (Fri, 07 Aug 2009) | 1 line

hint backend about virtual keyboard on save, in LoK
........
r43097 | knakos | 2009-08-07 21:05:58 +1000 (Fri, 07 Aug 2009) | 1 line

show VK in gui_v2 games of kyra
........
r43101 | dhewg | 2009-08-08 04:16:58 +1000 (Sat, 08 Aug 2009) | 3 lines

Merge creation of Info.plist into update-version.pl.
This fixes the static version info after branching (#2820503).
........
r43102 | knakos | 2009-08-08 05:33:39 +1000 (Sat, 08 Aug 2009) | 1 line

mouse up events need the same lovin' as mouse down events do. don't underestimate 'em. fixes bug #2833549
........
r43107 | drmccoy | 2009-08-08 12:23:04 +1000 (Sat, 08 Aug 2009) | 1 line

When opening a data stream, don't read the whole file into memory if not necessary. This vastly improves the loading times of Gob3 on small devices
........
r43112 | dreammaster | 2009-08-08 19:34:23 +1000 (Sat, 08 Aug 2009) | 1 line

Commit of dhewg's patch to fix screen refreshes on the Wii
........
r43114 | knakos | 2009-08-08 19:38:12 +1000 (Sat, 08 Aug 2009) | 1 line

forward port of wince 3.0 fix for paths from branch 0.13.0, r39978
........
r43117 | dhewg | 2009-08-08 21:30:56 +1000 (Sat, 08 Aug 2009) | 1 line

tweaked the mapped keys to reintroduce SHIFT for mass adding games
........
r43119 | lordhoto | 2009-08-08 21:42:29 +1000 (Sat, 08 Aug 2009) | 1 line

Add workaround for bug #2820054 'DW1: No intro music at first start on Wii', which actually happened on all systems, when using the multilanguage version.
........
r43120 | lordhoto | 2009-08-08 21:51:15 +1000 (Sat, 08 Aug 2009) | 1 line

Fix for bug #2412336 'DW2: Voices cut off' (commit on behalf of dreammaster)
........
r43122 | lordhoto | 2009-08-08 22:00:34 +1000 (Sat, 08 Aug 2009) | 1 line

Formatting fix.
........
r43123 | lordhoto | 2009-08-08 22:22:34 +1000 (Sat, 08 Aug 2009) | 1 line

Change workaround for bug #2820054 to apply for all GRA versions.
........
r43126 | lordhoto | 2009-08-08 23:57:21 +1000 (Sat, 08 Aug 2009) | 1 line

Fix XMIDI looping implementation. Now for example the music in the ferret village of ITE plays fine.
........
r43131 | sev | 2009-08-09 04:01:44 +1000 (Sun, 09 Aug 2009) | 2 lines

Implement FR#2821534: 'GUI: Mute All disable volume sliders'
........
r43139 | sev | 2009-08-09 06:08:22 +1000 (Sun, 09 Aug 2009) | 2 lines

Add DS version of Atari MM from Bug #2834054
........
r43143 | sev | 2009-08-09 06:16:58 +1000 (Sun, 09 Aug 2009) | 2 lines

Patch #2832247: 'GMM: Enable loading & deleting of unnamed savegames'
........
r43145 | sev | 2009-08-09 06:49:13 +1000 (Sun, 09 Aug 2009) | 2 lines

Fix bug #2825565: 'Unable to select subtitles in Atlantis and Simon 1'
........
r43147 | drmccoy | 2009-08-09 07:43:07 +1000 (Sun, 09 Aug 2009) | 1 line

Changed the scroll-handling to be more like the original. This fixes bug #2832362 ('GOB3: Scrolling locked after cutscene')
........
r43150 | dreammaster | 2009-08-09 11:05:47 +1000 (Sun, 09 Aug 2009) | 1 line

Changed subtitles display speed to also include the time taken to say voice samples (if voices are turned on). This means subtitles will display for the same time irrespective of whether voices are on or not
........
r43152 | Kirben | 2009-08-09 11:20:08 +1000 (Sun, 09 Aug 2009) | 1 line

Fix bug #2834254 - ELVIRA: Buggy scroll arrows when mixing spells.
........
r43155 | dreammaster | 2009-08-09 11:45:39 +1000 (Sun, 09 Aug 2009) | 1 line

Slight adjustment to Spanish font lookup table, based on mac_es's description of character lookup problems
........
r43156 | Kirben | 2009-08-09 11:55:34 +1000 (Sun, 09 Aug 2009) | 1 line

Fix bug #2834252 - ELVIRA1 Problem with 8-character-long save names.
........
r43163 | Kirben | 2009-08-09 17:16:08 +1000 (Sun, 09 Aug 2009) | 1 line

Fix bug #2834260 - ELVIRA1: Graphic glitch when bird takes off.
........
r43165 | Kirben | 2009-08-09 20:28:11 +1000 (Sun, 09 Aug 2009) | 1 line

Fix glitch when removing arrows from spell book in Elvira 1.
........
r43167 | djwillis | 2009-08-09 22:12:24 +1000 (Sun, 09 Aug 2009) | 1 line

GP2X: Commit local version of backend, contains a 'fix' to work around a GP2X SDL 'feature' that was removing the ability to disable aspect ratio correction. Also misc cleanup and changes to default volume levels to cut down on sample clipping.
........
r43171 | dreammaster | 2009-08-09 22:23:01 +1000 (Sun, 09 Aug 2009) | 1 line

Removed redundant code related to Midi handling
........
r43172 | lordhoto | 2009-08-10 01:37:00 +1000 (Mon, 10 Aug 2009) | 1 line

Fix for bug #2834250 'GUI: Incorrect behavior of sliders'.
........
r43178 | knakos | 2009-08-10 04:34:08 +1000 (Mon, 10 Aug 2009) | 1 line

removing support for flac (good riddance) and mpeg2
........
r43179 | knakos | 2009-08-10 04:37:29 +1000 (Mon, 10 Aug 2009) | 1 line

update news files for 1.0.0rc1 release
........
r43183 | lordhoto | 2009-08-10 05:11:10 +1000 (Mon, 10 Aug 2009) | 1 line

Cleanup AMIGA graphics conversion.
........
r43186 | lordhoto | 2009-08-10 08:46:25 +1000 (Mon, 10 Aug 2009) | 1 line

Create a 'Font' interface and create a 'DOSFont' implementation for handling DOS version fonts.
........
r43187 | lordhoto | 2009-08-10 08:46:43 +1000 (Mon, 10 Aug 2009) | 1 line

Add support for the font format used in Kyrandia 1 Amiga. (font colors are wrong though)
........
r43188 | lordhoto | 2009-08-10 09:23:48 +1000 (Mon, 10 Aug 2009) | 1 line

Unbreak basic Kyra1 amiga in game support, by disabling some palette code for the amiga version.
........
r43189 | lordhoto | 2009-08-10 09:32:52 +1000 (Mon, 10 Aug 2009) | 1 line

Clear the destination page for bitmap loading, this fixes graphics artifacts in Kyra1 amiga.
........
r43190 | waltervn | 2009-08-10 11:08:20 +1000 (Mon, 10 Aug 2009) | 3 lines

SCI: Added detection entries for French versions of Eco Quest 1/2 (reported
by Strangerke).
........
r43191 | lordhoto | 2009-08-10 11:32:22 +1000 (Mon, 10 Aug 2009) | 1 line

Disable menu text fading in kyra1 amiga for now.
........
r43192 | lordhoto | 2009-08-10 11:32:39 +1000 (Mon, 10 Aug 2009) | 1 line

Initial support for correct colors in the interface of Kyra1 AMIGA.
........
r43193 | lordhoto | 2009-08-10 11:32:59 +1000 (Mon, 10 Aug 2009) | 1 line

Fix inventory background color.
........
r43194 | lordhoto | 2009-08-10 11:33:18 +1000 (Mon, 10 Aug 2009) | 1 line

Fix text color in character speeches in Kyra1 amiga.
........
r43195 | lordhoto | 2009-08-10 11:33:36 +1000 (Mon, 10 Aug 2009) | 1 line

Fix interface text color.
........
r43196 | lordhoto | 2009-08-10 11:33:56 +1000 (Mon, 10 Aug 2009) | 1 line

Enable interface text fading in Kyra1 amiga again.
........
r43197 | lordhoto | 2009-08-10 11:34:14 +1000 (Mon, 10 Aug 2009) | 1 line

Use interface palette for mouse cursor in Kyra1 amiga, when it's enabled.
........
r43198 | lordhoto | 2009-08-10 11:34:29 +1000 (Mon, 10 Aug 2009) | 1 line

Cleanup.
........
r43199 | lordhoto | 2009-08-10 11:34:46 +1000 (Mon, 10 Aug 2009) | 1 line

Remove dead code.
........
r43200 | lordhoto | 2009-08-10 12:32:19 +1000 (Mon, 10 Aug 2009) | 1 line

Fix bug when setting up mouse cursor with inventory palette.
........
r43202 | athrxx | 2009-08-10 20:25:53 +1000 (Mon, 10 Aug 2009) | 1 line

LOL: fix main menu in floppy version
........
r43205 | lordhoto | 2009-08-10 23:46:17 +1000 (Mon, 10 Aug 2009) | 1 line

Made font color configuration independend from font style configuration.
........
r43206 | lordhoto | 2009-08-11 00:05:14 +1000 (Tue, 11 Aug 2009) | 1 line

Rename 'font_color' attribute for 'text' draw step to 'text_color'.
........
r43207 | lordhoto | 2009-08-11 00:35:28 +1000 (Tue, 11 Aug 2009) | 1 line

Fix copyright string displaying in Kyra1 amiga. Unlike the DOS version it does not use a second print for creating a shadow look.
........
r43208 | lordhoto | 2009-08-11 02:42:39 +1000 (Tue, 11 Aug 2009) | 4 lines

- Fix extraction of Kyra 1 amiga string tables in kyra.dat
- Fix 'taken' string offsets in kyra.dat
- Add temporary workaround for only one 'taken' string being present in Kyra 1 amiga.
- Update kyra.dat
........
r43209 | lordhoto | 2009-08-11 03:14:03 +1000 (Tue, 11 Aug 2009) | 1 line

Fix GUI strings in Kyrandia 1 Amiga.
........
r43210 | lordhoto | 2009-08-11 03:14:22 +1000 (Tue, 11 Aug 2009) | 1 line

Implement item to item name list index mapping for Kyrandia 1 Amiga.
........
r43211 | lordhoto | 2009-08-11 03:17:19 +1000 (Tue, 11 Aug 2009) | 1 line

Typo.
........
r43212 | lordhoto | 2009-08-11 04:01:28 +1000 (Tue, 11 Aug 2009) | 1 line

Fix GUI font colors and text drawing in Kyrandia 1 Amiga.
........
r43213 | lordhoto | 2009-08-11 04:03:37 +1000 (Tue, 11 Aug 2009) | 1 line

Fix GUI button outline colors in Kyra1 Amiga.
........
r43214 | tramboi | 2009-08-11 04:03:54 +1000 (Tue, 11 Aug 2009) | 2 lines

Option 'desired_screen_aspect_ratio' for fullscreen mode in the SDL backend
Shortcoming: the picture is not centered
........
r43215 | lordhoto | 2009-08-11 04:04:53 +1000 (Tue, 11 Aug 2009) | 1 line

Fix GUI menu colors for Kyrandia 1 Amiga.
........
r43216 | lordhoto | 2009-08-11 04:13:01 +1000 (Tue, 11 Aug 2009) | 1 line

Remove unused variables.
........
r43217 | waltervn | 2009-08-11 04:37:47 +1000 (Tue, 11 Aug 2009) | 2 lines

SCI: Improved multilanguage support for SCI1 and SCI1.1.
........
r43218 | waltervn | 2009-08-11 04:43:15 +1000 (Tue, 11 Aug 2009) | 2 lines

SCI: Fix warnings.
........
r43219 | waltervn | 2009-08-11 04:59:59 +1000 (Tue, 11 Aug 2009) | 2 lines

SCI: Fix vmvars debug command.
........
r43220 | lordhoto | 2009-08-11 05:08:00 +1000 (Tue, 11 Aug 2009) | 2 lines

- Fix AMIGA to DOS palette conversion
- Amiga version uses 13 instead of 12 palette buffers
........
r43221 | lordhoto | 2009-08-11 05:09:13 +1000 (Tue, 11 Aug 2009) | 1 line

Fix incorrect converted colors in Kyra1 Amiga speech text color setup.
........
r43222 | lordhoto | 2009-08-11 05:10:11 +1000 (Tue, 11 Aug 2009) | 1 line

Implement differences for Kyrandia 1 Amiga in o1_setCustomPaletteRange.
........
r43223 | sev | 2009-08-11 05:31:08 +1000 (Tue, 11 Aug 2009) | 2 lines

Add support for Italian MM NES
........
r43227 | strangerke | 2009-08-11 06:57:26 +1000 (Tue, 11 Aug 2009) | 1 line

gob - Add a workaround for files (at least in Playtoons) that are tested on CD only, with the '@' symbol
........
r43228 | strangerke | 2009-08-11 06:58:13 +1000 (Tue, 11 Aug 2009) | 1 line

gob - Add 2 files tested and used by Playtoons and Playtoons CK
........
r43229 | waltervn | 2009-08-11 07:30:16 +1000 (Tue, 11 Aug 2009) | 2 lines

SCI: Added several debug command aliases.
........
r43230 | lordhoto | 2009-08-11 08:18:18 +1000 (Tue, 11 Aug 2009) | 1 line

Cleanup.
........
r43231 | lordhoto | 2009-08-11 08:18:33 +1000 (Tue, 11 Aug 2009) | 1 line

Fix o1_makeAmuletAppear for Kyrandia 1 Amiga.
........
r43232 | lordhoto | 2009-08-11 08:18:47 +1000 (Tue, 11 Aug 2009) | 1 line

Fix WSA movies for final sequence of Kyrandia 1 Amiga. (this is just a theoretical fix, the game isn't yet playable till then)
........
r43233 | lordhoto | 2009-08-11 08:54:25 +1000 (Tue, 11 Aug 2009) | 1 line

Proper implementation of o1_fadeSpecialPalette for Kyrandia 1 Amiga.
........
r43234 | lordhoto | 2009-08-11 08:54:45 +1000 (Tue, 11 Aug 2009) | 1 line

Fix cauldron water color in Zanthia's home in Kyrandia 1 Amiga.
........
r43235 | mthreepwood | 2009-08-11 09:01:11 +1000 (Tue, 11 Aug 2009) | 1 line

Provide a better detection method for Indy3 Mac sound effects. This fixes sounds such as the music that plays when Indy uses the whip on the hook in the giant cork. This also is a proper fix for bug #1852635 -- Sound 54 is actually not a sound effect.
........
r43237 | lordhoto | 2009-08-11 09:34:35 +1000 (Tue, 11 Aug 2009) | 1 line

Implement different in Kyrandia 1 Amiga in o1_setFireberryGlowPalette.
........
r43238 | lordhoto | 2009-08-11 09:35:16 +1000 (Tue, 11 Aug 2009) | 1 line

Fix yet another inventory background color glitch in Kyrandia 1 Amiga.
........
r43239 | lordhoto | 2009-08-11 10:14:24 +1000 (Tue, 11 Aug 2009) | 1 line

Fix a little graphics bug in Kyrandia 1 Amiga, when jewels are enabled.
........
r43240 | lordhoto | 2009-08-11 10:14:40 +1000 (Tue, 11 Aug 2009) | 1 line

Disable Kyragem fading for Kyrandia 1 Amiga.
........
r43241 | lordhoto | 2009-08-11 10:14:54 +1000 (Tue, 11 Aug 2009) | 1 line

Fix regression introduced with r41081.
........

svn-id: r43250
"
"d911532770f960dda2938731fee0ae9339eaf39b","2009-08-11 02:12:09+00:00","Disable 'Screen_LoK::fadeSpecialPalette' for Kyrandia 1 Amiga, like the original does.

svn-id: r43251
"
"898f8d571c18449ccd3b3b1c74f301ca82f1d91b","2009-08-11 02:12:24+00:00","Implement palette differences for seq_playDrinkPotionAnim.

svn-id: r43252
"
"b91769c3e256fb1a8812259bac67d6bf4048821a","2009-08-11 07:52:59+00:00","Updated with m4.dat file

svn-id: r43257
"
"76ec45d312dc222ffd367617a2a51e0a6117cef6","2009-08-11 08:01:41+00:00","Updated actions to support tinsel and made (from CE version)

svn-id: r43260
"
"87739a353617a41a301775698652f4cfe4e09e0a","2009-08-11 09:57:44+00:00","Enable virtual keyboard support, since qvga gfx is now supported.

svn-id: r43262
"
"6dc55b5f810f813bcaa43278a25c99f51b493432","2009-08-11 10:18:10+00:00","Include vkeybd default pack into installation file

svn-id: r43263
"
"194e3d674df29bac8c5da912b55f6ba321d8efae","2009-08-11 10:28:15+00:00","Maniac Mansion NES: added workaround to fix dirty screen when loading a narrow room from a full width room

svn-id: r43264
"
"c1c58769e44e4946dbe1c907cae6e920b1967540","2009-08-11 10:51:49+00:00","code formatting fixes

svn-id: r43266
"
"353e9fb36a9677cb9cb38ce993df90fe8e152352","2009-08-11 12:57:51+00:00","SCI: Turn off logging in debugger.

svn-id: r43268
"
"7f667c528916f8d1082bfc582a74c5d2a6b9a4c9","2009-08-11 14:34:33+00:00","LOL: some minor fixes

svn-id: r43269
"
"1c15bcf87d158b7cfb9047015344ebb2717f3c37","2009-08-11 14:42:44+00:00","Add option to disable later games (Feeble Files, Puzzle Pack) in AGOS game engine, which require higher resolution.

svn-id: r43270
"
"676b367978c3795734c71db386e9b6f390e0bc51","2009-08-11 15:34:13+00:00","Fix Kallak's note displaying in Kyrandia 1 Amiga and Kyrandia 1 DOS CD.

svn-id: r43272
"
"5e10c284e56a9b2e49bcefeef7d8fd4eb574040b","2009-08-11 15:34:28+00:00","Implement differences in seq_winterScroll1 for Kyrandia 1 Amiga.

svn-id: r43273
"
"dfd461e35d9e322f2da5cbf7ace86eb17e8feb7f","2009-08-11 15:34:55+00:00","- Yet another minor difference in seq_winterScroll2
- Fix wrong offsets of flasks strings for Kyrandia 1 Amiga in kyra.dat
- Increase kyra.dat version

svn-id: r43274
"
"bea06dedaf57fcee2cbd063564735f165e013828","2009-08-11 15:35:13+00:00","Fix bug in Amiga specific bits of o1_fadeSpecialPalette, this should make the cauldron water change color correctly.

svn-id: r43275
"
"73e07b60d581e5464d9b273ee3fd1f3ce956ad00","2009-08-11 15:35:30+00:00","Fix AGOS compilation.

svn-id: r43276
"
"57576e14cdc0949eee1921bba6b8c291ad07bac4","2009-08-11 16:18:01+00:00","Fix graphics glitch in Darm's abode in Kyrandia 1 Amiga.

svn-id: r43277
"
"786024ebb649f68013bfed123c20d29e5e4c4e21","2009-08-11 16:18:43+00:00","Fix thumbnails for savegames made via the in-game GUI of Kyrandia 1 Amiga.

svn-id: r43278
"
"c1511d3b44f02a234b8d47969714d970a9a4a31c","2009-08-11 16:46:20+00:00","Cleanup.

svn-id: r43279
"
"1a59173a9b2e930ab7fbe6a1f0f79265dfa4d247","2009-08-11 16:46:38+00:00","Enable dirty rect handling for the Amiga version again.

svn-id: r43280
"
"9f3953631f847b46720ae7b2fae2fd2ef0c57e36","2009-08-11 17:44:06+00:00","Fix compilation on MSVC8/9 after r43270: Add ENABLE_AGOS2 and ENABLE_PN to global Visual Studio properties.

svn-id: r43282
"
"0dcb2e11839e7260d4bbee550851ea2963ac0d1d","2009-08-11 18:16:21+00:00","Don't allow menu / inventory usage in o1_waitForConfirmationMouseClick, just like the original does. This prevents creating bad saves like in bug #2835715 'KYRA: GFX glitch in Amiga version at the bridge'.

svn-id: r43283
"
"c3cdaa74108377a8fca16905659b7f571ccd410a","2009-08-11 18:17:07+00:00","Fix for bug #2835715 'KYRA: GFX glitch in Amiga version at the bridge', which was caused by featuring restoring of Brandon's position on save load, which the original did not support.

svn-id: r43284
"
"712522de117ad65774150884e68be03cc3afd572","2009-08-11 18:17:53+00:00","Fix graphical glitches when loading saves where Brandon is in Will-O-Wisp form.

svn-id: r43285
"
"dc0e9083859c2a718bb2ade6cb6f781636c4dd19","2009-08-11 19:11:26+00:00","Fixed an endian bug in the ADPCM decoder (#2211901).

svn-id: r43287
"
"65e9ae163ff757ca15af78da4a753a7ee1d25a16","2009-08-11 20:18:15+00:00","SCI: Added a crude speed throttler.

svn-id: r43289
"
"58238d9ab30da0a075a81ded6397a3c0d2c9bb05","2009-08-11 21:53:06+00:00","Mention support for Kyrandia 1 Amiga in 1.1.0.

svn-id: r43290
"
"c95d36c186fb1d286a15c1c9ccc5fd581ef948b6","2009-08-11 23:40:07+00:00","vc22_setPaletteOld was renamed to vc22_setPalette, since function was virtualized.

svn-id: r43292
"
"f186d9c86094e5be5c0e168e72487b3fb8d2deac","2009-08-12 00:53:35+00:00","Fix building with specific games disabled in MSVC.

svn-id: r43294
"
"c50f3c0241b9d5bffc9e2fe210aacf9787850e4a","2009-08-12 01:21:25+00:00","Fix bug #2835822 - SSPP: Sounds from DIMP appearing randomly in other games.

svn-id: r43299
"
"ab19f3d4d05ffc7dfb2f35c59c7930b47726be40","2009-08-12 01:35:42+00:00","Update status of Amiga version of The Legend of Kyrandia.

svn-id: r43301
"
"9e66b4a3b1b15ff8a35cc078961a0da5e3c9fe43","2009-08-12 01:44:17+00:00","Update status of The Legend of Kyrandia.

svn-id: r43303
"
"8a62c94f80029ad0d3215438174d2b3c498dc261","2009-08-12 02:24:03+00:00","Enable Personal Nightmare by default.

svn-id: r43304
"
"dd9ceafb8b61429d63cb6d961bf5d7c3dd63c844","2009-08-12 04:36:01+00:00","Fix formatting

svn-id: r43307
"
"ca7b4db0ae66fd93b5d4da91e067c80be6c50d3f","2009-08-12 07:37:45+00:00","Removed duplicated functions.

svn-id: r43314
"
"77594f46b1db7ed6bde4413f74d12a48e720cbfa","2009-08-12 09:26:00+00:00","Laying some groundwork for hopefully getting modifiers working in a less hacked-on manner

svn-id: r43316
"
"cf336367e5947f55f1cd79fd6773a5092d6b2352","2009-08-12 14:02:18+00:00","Change SJIS code guard to also check whether dynamic plugins are enabled.

svn-id: r43318
"
"8086aff0511bef674d7e981f74392b2cceafd386","2009-08-12 17:10:47+00:00","Implement difference for the Kyrandia 1 Amiga version in TextDisplayer::printCharacterText.

svn-id: r43320
"
"f7464020a0e74978ec574d13a575228f84784087","2009-08-12 17:11:04+00:00","Cleanup.

svn-id: r43321
"
"20577c15749deb517396931460d7545c665776a8","2009-08-12 17:13:46+00:00","Oops forgot a '{'.

svn-id: r43322
"
"06657efc15fa73abe41002694ae1673b3c7f6ba5","2009-08-12 18:05:41+00:00","Further cleaning up credits player code for Kyra1.

svn-id: r43323
"
"949ade74f0b5e10cb31dca4d88b705309b10cc96","2009-08-12 18:06:32+00:00","Fix graphics glitch in credits of Kyrandia 1 German.

svn-id: r43324
"
"73f38d97b587f1164fa559cf6e140e397ae54581","2009-08-12 18:07:27+00:00","Add a slight paranoia check to drawCharANSI.

svn-id: r43325
"
"8ea2316c3b16d904f9bfb9804464f1ca36076a5d","2009-08-12 18:08:01+00:00","Put some more IHNM / SAGA2 specific code into compile guards.

svn-id: r43326
"
"71750b6d06455728dcc1472c192403c1b029975e","2009-08-12 22:05:09+00:00","Implement special Kyrandia 1 Amiga credits text scroller.

svn-id: r43329
"
"57566ad337415f639cfedbc38a668d75f8272135","2009-08-12 23:16:35+00:00","Properly respect users sfx/music config settings for MIDI output.

svn-id: r43332
"
"bc5a2d02e276665409fcc6806c618039495fbd95","2009-08-13 00:19:26+00:00","Little optimization in Screen::setPaletteIndex, now it only resets the palette, when the color index really changed.

svn-id: r43338
"
"7b6cd29087e930db3b64992a0c3a18f2446cb48b","2009-08-13 00:20:37+00:00","Fix key input in credits sequences.

svn-id: r43339
"
"20c60d1422f8ba42e8968e9b5b6a1cf2efd6d72e","2009-08-13 00:21:42+00:00","Fix serious bug in StaticResource::unloadId.

svn-id: r43340
"
"568ffca0a60339b5c0e2d20ddef57f65f229950b","2009-08-13 00:26:41+00:00","Do not unload credits data after copying it to a temporary buffer in Kyrandia 1 Amiga, since the credits will be looped and need reload every time.

svn-id: r43342
"
"7d9890ff2efb7547a4e141ccb7885f8b0b96f4c9","2009-08-13 00:32:15+00:00","Merged revisions 43245-43249,43251-43252,43257,43260,43262-43264,43266,43268-43270,43272-43280,43282-43285,43287,43289-43290,43292,43294,43299,43301,43303-43304,43307,43314,43318,43320-43326,43329,43332 via svnmerge from
https://scummvm.svn.sourceforge.net/svnroot/scummvm/scummvm/trunk

........
r43245 | lordhoto | 2009-08-11 11:24:15 +1000 (Tue, 11 Aug 2009) | 1 line

Some fixes for the Kyrandia 1 Amiga outro.
........
r43246 | lordhoto | 2009-08-11 11:24:40 +1000 (Tue, 11 Aug 2009) | 1 line

Finally fixed the string extraction for Kyrandia 1 Amiga. This should make the intro/outro strings work fine again.
........
r43247 | lordhoto | 2009-08-11 11:24:56 +1000 (Tue, 11 Aug 2009) | 1 line

Some changes to get the Kyrandia 1 Amiga credits to show up at least.
........
r43248 | lordhoto | 2009-08-11 11:31:34 +1000 (Tue, 11 Aug 2009) | 1 line

Fix in-game GUI text input field colors for Kyrandia 1 Amiga.
........
r43249 | lordhoto | 2009-08-11 11:47:29 +1000 (Tue, 11 Aug 2009) | 1 line

Fix crash when using Will-O-Wisp in the grotto.
........
r43251 | lordhoto | 2009-08-11 12:12:09 +1000 (Tue, 11 Aug 2009) | 1 line

Disable 'Screen_LoK::fadeSpecialPalette' for Kyrandia 1 Amiga, like the original does.
........
r43252 | lordhoto | 2009-08-11 12:12:24 +1000 (Tue, 11 Aug 2009) | 1 line

Implement palette differences for seq_playDrinkPotionAnim.
........
r43257 | anotherguest | 2009-08-11 17:52:59 +1000 (Tue, 11 Aug 2009) | 1 line

Updated with m4.dat file
........
r43260 | anotherguest | 2009-08-11 18:01:41 +1000 (Tue, 11 Aug 2009) | 1 line

Updated actions to support tinsel and made (from CE version)
........
r43262 | anotherguest | 2009-08-11 19:57:44 +1000 (Tue, 11 Aug 2009) | 1 line

Enable virtual keyboard support, since qvga gfx is now supported.
........
r43263 | anotherguest | 2009-08-11 20:18:10 +1000 (Tue, 11 Aug 2009) | 1 line

Include vkeybd default pack into installation file
........
r43264 | Hkz | 2009-08-11 20:28:15 +1000 (Tue, 11 Aug 2009) | 1 line

Maniac Mansion NES: added workaround to fix dirty screen when loading a narrow room from a full width room
........
r43266 | Hkz | 2009-08-11 20:51:49 +1000 (Tue, 11 Aug 2009) | 1 line

code formatting fixes
........
r43268 | waltervn | 2009-08-11 22:57:51 +1000 (Tue, 11 Aug 2009) | 2 lines

SCI: Turn off logging in debugger.
........
r43269 | athrxx | 2009-08-12 00:34:33 +1000 (Wed, 12 Aug 2009) | 1 line

LOL: some minor fixes
........
r43270 | Kirben | 2009-08-12 00:42:44 +1000 (Wed, 12 Aug 2009) | 1 line

Add option to disable later games (Feeble Files, Puzzle Pack) in AGOS game engine, which require higher resolution.
........
r43272 | lordhoto | 2009-08-12 01:34:13 +1000 (Wed, 12 Aug 2009) | 1 line

Fix Kallak's note displaying in Kyrandia 1 Amiga and Kyrandia 1 DOS CD.
........
r43273 | lordhoto | 2009-08-12 01:34:28 +1000 (Wed, 12 Aug 2009) | 1 line

Implement differences in seq_winterScroll1 for Kyrandia 1 Amiga.
........
r43274 | lordhoto | 2009-08-12 01:34:55 +1000 (Wed, 12 Aug 2009) | 3 lines

- Yet another minor difference in seq_winterScroll2
- Fix wrong offsets of flasks strings for Kyrandia 1 Amiga in kyra.dat
- Increase kyra.dat version
........
r43275 | lordhoto | 2009-08-12 01:35:13 +1000 (Wed, 12 Aug 2009) | 1 line

Fix bug in Amiga specific bits of o1_fadeSpecialPalette, this should make the cauldron water change color correctly.
........
r43276 | lordhoto | 2009-08-12 01:35:30 +1000 (Wed, 12 Aug 2009) | 1 line

Fix AGOS compilation.
........
r43277 | lordhoto | 2009-08-12 02:18:01 +1000 (Wed, 12 Aug 2009) | 1 line

Fix graphics glitch in Darm's abode in Kyrandia 1 Amiga.
........
r43278 | lordhoto | 2009-08-12 02:18:43 +1000 (Wed, 12 Aug 2009) | 1 line

Fix thumbnails for savegames made via the in-game GUI of Kyrandia 1 Amiga.
........
r43279 | lordhoto | 2009-08-12 02:46:20 +1000 (Wed, 12 Aug 2009) | 1 line

Cleanup.
........
r43280 | lordhoto | 2009-08-12 02:46:38 +1000 (Wed, 12 Aug 2009) | 1 line

Enable dirty rect handling for the Amiga version again.
........
r43282 | buddha_ | 2009-08-12 03:44:06 +1000 (Wed, 12 Aug 2009) | 1 line

Fix compilation on MSVC8/9 after r43270: Add ENABLE_AGOS2 and ENABLE_PN to global Visual Studio properties.
........
r43283 | lordhoto | 2009-08-12 04:16:21 +1000 (Wed, 12 Aug 2009) | 1 line

Don't allow menu / inventory usage in o1_waitForConfirmationMouseClick, just like the original does. This prevents creating bad saves like in bug #2835715 'KYRA: GFX glitch in Amiga version at the bridge'.
........
r43284 | lordhoto | 2009-08-12 04:17:07 +1000 (Wed, 12 Aug 2009) | 1 line

Fix for bug #2835715 'KYRA: GFX glitch in Amiga version at the bridge', which was caused by featuring restoring of Brandon's position on save load, which the original did not support.
........
r43285 | lordhoto | 2009-08-12 04:17:53 +1000 (Wed, 12 Aug 2009) | 1 line

Fix graphical glitches when loading saves where Brandon is in Will-O-Wisp form.
........
r43287 | dhewg | 2009-08-12 05:11:26 +1000 (Wed, 12 Aug 2009) | 1 line

Fixed an endian bug in the ADPCM decoder (#2211901).
........
r43289 | waltervn | 2009-08-12 06:18:15 +1000 (Wed, 12 Aug 2009) | 2 lines

SCI: Added a crude speed throttler.
........
r43290 | lordhoto | 2009-08-12 07:53:06 +1000 (Wed, 12 Aug 2009) | 1 line

Mention support for Kyrandia 1 Amiga in 1.1.0.
........
r43292 | Kirben | 2009-08-12 09:40:07 +1000 (Wed, 12 Aug 2009) | 1 line

vc22_setPaletteOld was renamed to vc22_setPalette, since function was virtualized.
........
r43294 | Kirben | 2009-08-12 10:53:35 +1000 (Wed, 12 Aug 2009) | 1 line

Fix building with specific games disabled in MSVC.
........
r43299 | Kirben | 2009-08-12 11:21:25 +1000 (Wed, 12 Aug 2009) | 1 line

Fix bug #2835822 - SSPP: Sounds from DIMP appearing randomly in other games.
........
r43301 | Kirben | 2009-08-12 11:35:42 +1000 (Wed, 12 Aug 2009) | 1 line

Update status of Amiga version of The Legend of Kyrandia.
........
r43303 | Kirben | 2009-08-12 11:44:17 +1000 (Wed, 12 Aug 2009) | 1 line

Update status of The Legend of Kyrandia.
........
r43304 | Kirben | 2009-08-12 12:24:03 +1000 (Wed, 12 Aug 2009) | 1 line

Enable Personal Nightmare by default.
........
r43307 | sev | 2009-08-12 14:36:01 +1000 (Wed, 12 Aug 2009) | 2 lines

Fix formatting
........
r43314 | dhewg | 2009-08-12 17:37:45 +1000 (Wed, 12 Aug 2009) | 1 line

Removed duplicated functions.
........
r43318 | lordhoto | 2009-08-13 00:02:18 +1000 (Thu, 13 Aug 2009) | 1 line

Change SJIS code guard to also check whether dynamic plugins are enabled.
........
r43320 | lordhoto | 2009-08-13 03:10:47 +1000 (Thu, 13 Aug 2009) | 1 line

Implement difference for the Kyrandia 1 Amiga version in TextDisplayer::printCharacterText.
........
r43321 | lordhoto | 2009-08-13 03:11:04 +1000 (Thu, 13 Aug 2009) | 1 line

Cleanup.
........
r43322 | lordhoto | 2009-08-13 03:13:46 +1000 (Thu, 13 Aug 2009) | 1 line

Oops forgot a '{'.
........
r43323 | lordhoto | 2009-08-13 04:05:41 +1000 (Thu, 13 Aug 2009) | 1 line

Further cleaning up credits player code for Kyra1.
........
r43324 | lordhoto | 2009-08-13 04:06:32 +1000 (Thu, 13 Aug 2009) | 1 line

Fix graphics glitch in credits of Kyrandia 1 German.
........
r43325 | lordhoto | 2009-08-13 04:07:27 +1000 (Thu, 13 Aug 2009) | 1 line

Add a slight paranoia check to drawCharANSI.
........
r43326 | lordhoto | 2009-08-13 04:08:01 +1000 (Thu, 13 Aug 2009) | 1 line

Put some more IHNM / SAGA2 specific code into compile guards.
........
r43329 | lordhoto | 2009-08-13 08:05:09 +1000 (Thu, 13 Aug 2009) | 1 line

Implement special Kyrandia 1 Amiga credits text scroller.
........
r43332 | lordhoto | 2009-08-13 09:16:35 +1000 (Thu, 13 Aug 2009) | 1 line

Properly respect users sfx/music config settings for MIDI output.
........

svn-id: r43343
"
"6bcc9a45fd63c35f4060fee81989d5cb1c0f833f","2009-08-13 09:56:54+00:00","Initial save handler for Playtoons

svn-id: r43344
"
"fc74ec86466fe949dc89c1ba4d47e43a66083e15","2009-08-13 09:59:44+00:00","- Add a specific OPCODEFUNC checkData to avoid having a Playtoons workaround in working code
- Replace OPCODEDRAW 0x20,0x23 and 0x25

svn-id: r43345
"
"f9560dc35a61f8db46362e70815b1942eb7734ab","2009-08-13 10:00:35+00:00","Suppress no longer needed Playtoons workaround

svn-id: r43346
"
"e9767a80ce6d41d762cc029a40b98a9850fe02bd","2009-08-13 10:08:07+00:00","fix methods

svn-id: r43347
"
"4afa6d18a4d08dcf903bb9a2973ed0b1123e1c6c","2009-08-13 15:55:12+00:00","Implemented support for the 'Lore of the Lands' special of Lands of Lore CD.

svn-id: r43349
"
"54845e7d7ad97f0cd91f648d505c9337e87e3913","2009-08-13 16:41:07+00:00","Move version string in Modern theme beneath the Logo in high res mode, this saves some space and looks nicer.

svn-id: r43350
"
"f829f24459b04657e69b370a649aeca48ee35cd0","2009-08-13 16:50:30+00:00","Little fix of new modern theme layout in the launcher for 3x.

svn-id: r43352
"
"4c5ac578b49512766fa00c171825912f1ff316dc","2009-08-13 17:00:19+00:00","Cleanup.

svn-id: r43353
"
"83216b1d17ff12104a917314a9888001c12fc3ee","2009-08-13 17:00:40+00:00","Cleanup.

svn-id: r43354
"
"a135a7f9385b59b91d5a7f23fd8792ff36afb353","2009-08-13 21:46:41+00:00","Allow VOCs to stream from disk.  Disabled by default, use symbol STREAM_AUDIO_FROM_DISK to enable.  See patch #2834001.

svn-id: r43357
"
"ea4fb712a3f8ff998f13d15c53432b67f3b6de91","2009-08-14 00:44:36+00:00","The Nintendo DS hack for introduction in Simon the Sorcerer 1 is only required for Windows version (WAV format) now.

svn-id: r43358
"
"0064a1bc37aac75fc4c923b622b1b81706ff6f92","2009-08-14 06:42:57+00:00","Updated files from 1.0.0 branch

svn-id: r43362
"
"44e79803648ba7704e97031752506ad42176990d","2009-08-14 08:11:18+00:00","Added proper saving/loading of mapped key modifiers. Fixed modifier recognition in a much less hackish manner, (but still using a minor hack as a stopgap until KeyState can be replaced as the primary lookup type for the keymapper).

svn-id: r43363
"
"5e90ce35365b5496fccd533bcd7a281ff68ce8ea","2009-08-14 15:22:43+00:00","Setting gob3 save/load mode of the temporary sprite 'intro.$$$' to ignore and remove the TempSpriteHandler.
Gob3 doesn't use it at all and Lost in Time only saves (with an invalid index) and never loads

svn-id: r43366
"
"6fae9bc3f44a8579fbf08a885ac7db517868ee02","2009-08-14 16:13:00+00:00","PSP: create an EBOOT.PBP when building via configure

svn-id: r43369
"
"a68b033a534febe4292fa8197a51e592d6977952","2009-08-14 16:44:29+00:00","Fix incorrect memset() call (reported by Peter Bortas).

svn-id: r43375
"
"ddf617e2a7fcb0355cadb18156ef3281c9e9ce28","2009-08-14 16:54:43+00:00","add psp_clean build rule to clean up EBOOT.PBP and scummvm_stripped.elf

svn-id: r43377
"
"edaa4a042237477fa38ddb2957c3a41888730633","2009-08-14 17:18:03+00:00","MIPSpro compilation fixes / workarounds (from a patch by Rainer Canavan)
The hashmap.h change is ugly, but so far the only thing found to work. Suggestions for a better 'fix' appreciated!

svn-id: r43380
"
"17f7c13ba314803d7ee8eba03ac0d24ac24a4d54","2009-08-14 17:49:30+00:00","Little fix for lopping credits in Kyrandia 1 Amiga.

svn-id: r43383
"
"8800cabae51d770aba0feef1791cb6d4012ef531","2009-08-14 18:02:17+00:00","PSP: also create param.sfo when building via configure

svn-id: r43384
"
"cd9134355a4739b57d2c1e311431b3b31b7442b0","2009-08-14 18:34:01+00:00","PSP: add svn revision + build date to SFO title.

svn-id: r43386
"
"2e72ed0f696e590f0320a52686a91ddf6cc6fe56","2009-08-14 23:20:46+00:00","remove double semi-colon -- hopefully this kicks the buildbot back into action =)

svn-id: r43388
"
"f99932b72aa31f39bfdf78ffe03c4d52b209097b","2009-08-15 00:28:59+00:00","SCI: Added enum for map and volume versions. Removed res_version setting from
detection.cpp (should be detectable). Cleanup.

svn-id: r43390
"
"b1cc1b05de4bef050d69ce6e5016cde1c04e7c53","2009-08-15 05:39:44+00:00","Fix compilation.

svn-id: r43393
"
"7ea0646a49a848d2cfa1f18162dba66fc6ddef0b","2009-08-15 08:48:13+00:00","Removed excessive modifier definitions, prevented excessive memory consumption if getHardwareKeyset is called multiple times.

svn-id: r43395
"
"0af775717e30af665c973283c7df69209525a69a","2009-08-15 08:52:40+00:00","Added mandatory includes into hardware-key.h (so it can be included without compile error, without having to separately include several other header files), reworked ActionKey structure, changed HardwareKey::modMask from uint32 into byte.

svn-id: r43396
"
"6ede8310932ab8a79310ebd6b0a14eaf687c1708","2009-08-15 08:55:22+00:00","Added hash function for ActionKey in preparation for replacing KeyStates in the main keymapper hashtable with ActionKeys, removed a duplicated comment line.

svn-id: r43397
"
"8d051e24feeb2e7410d7676328ad66fbf04a95c8","2009-08-15 09:12:36+00:00","Added support for mapping keys to ctrl, alt, shift, or combinations thereof (though ctrl+alt will never trigger for some reason)

svn-id: r43398
"
"7ff9bb3a6b543777891d90a645c669b975e64445","2009-08-15 09:15:09+00:00","Commented a memory leak whose fix requires a fundamental modification to the Action structure (replacing KeyState with ActionKey should do it)

svn-id: r43399
"
"0630c207220cfcbb579115f163ed13babef93908","2009-08-15 10:09:32+00:00","Fix regression, that caused multiple sounds in Simon the Sorcerer 2 to be cut off.

svn-id: r43400
"
"a73523533c4f00d6980c544c024bfb114041ee68","2009-08-15 10:31:20+00:00","Restore code to clear screen, before playing videos with smaller resolution in the Amiga version of The Feeble Files.

svn-id: r43402
"
"aae6c98945122c974292a429cfc1a5ee01605e88","2009-08-15 10:44:58+00:00","Properly implement PSPFilesystemFactory::makeCurrentDirectoryFileNode()

svn-id: r43404
"
"49a4df3c8c3e51d88c03b8f6745c787fb0f6a47e","2009-08-15 11:50:59+00:00","Added Dirty Rect handling functionality

svn-id: r43406
"
"5709e524f99a80258f410246254879670b59580f","2009-08-15 12:09:47+00:00","SCI: Rename sci_version_t to SciVersion

svn-id: r43407
"
"17e7f46501e2f133088b5c9ba1fd771ab79b4ba0","2009-08-15 12:17:23+00:00","SCI: Add missing versions to exe version parsing

svn-id: r43408
"
"762d2dc03a7ae28dc49ad4e13720c4071cb6bae5","2009-08-15 14:13:48+00:00","Removed unnecessary semi-colons.

svn-id: r43409
"
"8e417b0884e676ff5fe297d1642c9d8499ad9b90","2009-08-15 14:50:21+00:00","Fix compile when compiling with --disable-he

svn-id: r43410
"
"02e3f31bf59cbec905c014e5a4cbca6dda417d28","2009-08-15 14:59:11+00:00","Added const qualifiers to static data.

svn-id: r43411
"
"6c3a440aa5b536419f55fe2b5cae0e544d418a14","2009-08-15 15:30:35+00:00","Yet another slight graphic fix for the Kyrandia 1 Amiga credits.

svn-id: r43413
"
"b6a0f3e3716614ee270df048414c7f938299c476","2009-08-15 19:04:21+00:00","Fix for bug #2835581 (KQ3: Game Crash When Leaving Tavern as Fly):
- Use AGI version 0x3149 instead of the previous 0x3086
- Makes ESC pause the game (Identical to original in this respect)

svn-id: r43414
"
"09845556e0383fb187f548c7cfc1a68b22329f7e","2009-08-16 00:20:23+00:00","Revert revision 43410, and add alternative fix.

svn-id: r43416
"
"58486725ec796fe0b2727e8aca4f99c3a139cae5","2009-08-16 00:53:55+00:00","Fix overflow in convertFilePath().

svn-id: r43417
"
"ac45cf6f6f0cf6e41b608561316bcbda115fb6b1","2009-08-16 01:03:09+00:00","Merged revisions 43338-43340,43342,43344-43347,43349-43350,43352-43354,43357-43358,43362,43366,43369,43375,43377,43380,43383-43384,43386,43388,43390,43393,43400,43402,43404,43406-43409,43411,43413-43414 via svnmerge from
https://scummvm.svn.sourceforge.net/svnroot/scummvm/scummvm/trunk

........
r43338 | lordhoto | 2009-08-13 10:19:26 +1000 (Thu, 13 Aug 2009) | 1 line

Little optimization in Screen::setPaletteIndex, now it only resets the palette, when the color index really changed.
........
r43339 | lordhoto | 2009-08-13 10:20:37 +1000 (Thu, 13 Aug 2009) | 1 line

Fix key input in credits sequences.
........
r43340 | lordhoto | 2009-08-13 10:21:42 +1000 (Thu, 13 Aug 2009) | 1 line

Fix serious bug in StaticResource::unloadId.
........
r43342 | lordhoto | 2009-08-13 10:26:41 +1000 (Thu, 13 Aug 2009) | 1 line

Do not unload credits data after copying it to a temporary buffer in Kyrandia 1 Amiga, since the credits will be looped and need reload every time.
........
r43344 | strangerke | 2009-08-13 19:56:54 +1000 (Thu, 13 Aug 2009) | 1 line

Initial save handler for Playtoons
........
r43345 | strangerke | 2009-08-13 19:59:44 +1000 (Thu, 13 Aug 2009) | 2 lines

- Add a specific OPCODEFUNC checkData to avoid having a Playtoons workaround in working code
- Replace OPCODEDRAW 0x20,0x23 and 0x25
........
r43346 | strangerke | 2009-08-13 20:00:35 +1000 (Thu, 13 Aug 2009) | 1 line

Suppress no longer needed Playtoons workaround
........
r43347 | strangerke | 2009-08-13 20:08:07 +1000 (Thu, 13 Aug 2009) | 1 line

fix methods
........
r43349 | lordhoto | 2009-08-14 01:55:12 +1000 (Fri, 14 Aug 2009) | 1 line

Implemented support for the 'Lore of the Lands' special of Lands of Lore CD.
........
r43350 | lordhoto | 2009-08-14 02:41:07 +1000 (Fri, 14 Aug 2009) | 1 line

Move version string in Modern theme beneath the Logo in high res mode, this saves some space and looks nicer.
........
r43352 | lordhoto | 2009-08-14 02:50:30 +1000 (Fri, 14 Aug 2009) | 1 line

Little fix of new modern theme layout in the launcher for 3x.
........
r43353 | lordhoto | 2009-08-14 03:00:19 +1000 (Fri, 14 Aug 2009) | 1 line

Cleanup.
........
r43354 | lordhoto | 2009-08-14 03:00:40 +1000 (Fri, 14 Aug 2009) | 1 line

Cleanup.
........
r43357 | agent-q | 2009-08-14 07:46:41 +1000 (Fri, 14 Aug 2009) | 1 line

Allow VOCs to stream from disk.  Disabled by default, use symbol STREAM_AUDIO_FROM_DISK to enable.  See patch #2834001.
........
r43358 | Kirben | 2009-08-14 10:44:36 +1000 (Fri, 14 Aug 2009) | 1 line

The Nintendo DS hack for introduction in Simon the Sorcerer 1 is only required for Windows version (WAV format) now.
........
r43362 | anotherguest | 2009-08-14 16:42:57 +1000 (Fri, 14 Aug 2009) | 1 line

Updated files from 1.0.0 branch
........
r43366 | drmccoy | 2009-08-15 01:22:43 +1000 (Sat, 15 Aug 2009) | 2 lines

Setting gob3 save/load mode of the temporary sprite 'intro.$$$' to ignore and remove the TempSpriteHandler.
Gob3 doesn't use it at all and Lost in Time only saves (with an invalid index) and never loads
........
r43369 | joostp | 2009-08-15 02:13:00 +1000 (Sat, 15 Aug 2009) | 2 lines

PSP: create an EBOOT.PBP when building via configure
........
r43375 | joostp | 2009-08-15 02:44:29 +1000 (Sat, 15 Aug 2009) | 2 lines

Fix incorrect memset() call (reported by Peter Bortas).
........
r43377 | joostp | 2009-08-15 02:54:43 +1000 (Sat, 15 Aug 2009) | 2 lines

add psp_clean build rule to clean up EBOOT.PBP and scummvm_stripped.elf
........
r43380 | joostp | 2009-08-15 03:18:03 +1000 (Sat, 15 Aug 2009) | 3 lines

MIPSpro compilation fixes / workarounds (from a patch by Rainer Canavan)
The hashmap.h change is ugly, but so far the only thing found to work. Suggestions for a better 'fix' appreciated!
........
r43383 | lordhoto | 2009-08-15 03:49:30 +1000 (Sat, 15 Aug 2009) | 1 line

Little fix for lopping credits in Kyrandia 1 Amiga.
........
r43384 | joostp | 2009-08-15 04:02:17 +1000 (Sat, 15 Aug 2009) | 2 lines

PSP: also create param.sfo when building via configure
........
r43386 | joostp | 2009-08-15 04:34:01 +1000 (Sat, 15 Aug 2009) | 2 lines

PSP: add svn revision + build date to SFO title.
........
r43388 | joostp | 2009-08-15 09:20:46 +1000 (Sat, 15 Aug 2009) | 2 lines

remove double semi-colon -- hopefully this kicks the buildbot back into action =)
........
r43390 | waltervn | 2009-08-15 10:28:59 +1000 (Sat, 15 Aug 2009) | 2 lines

SCI: Added enum for map and volume versions. Removed res_version setting from
detection.cpp (should be detectable). Cleanup.
........
r43393 | dhewg | 2009-08-15 15:39:44 +1000 (Sat, 15 Aug 2009) | 1 line

Fix compilation.
........
r43400 | Kirben | 2009-08-15 20:09:32 +1000 (Sat, 15 Aug 2009) | 1 line

Fix regression, that caused multiple sounds in Simon the Sorcerer 2 to be cut off.
........
r43402 | Kirben | 2009-08-15 20:31:20 +1000 (Sat, 15 Aug 2009) | 1 line

Restore code to clear screen, before playing videos with smaller resolution in the Amiga version of The Feeble Files.
........
r43404 | joostp | 2009-08-15 20:44:58 +1000 (Sat, 15 Aug 2009) | 2 lines

Properly implement PSPFilesystemFactory::makeCurrentDirectoryFileNode()
........
r43406 | dreammaster | 2009-08-15 21:50:59 +1000 (Sat, 15 Aug 2009) | 1 line

Added Dirty Rect handling functionality
........
r43407 | waltervn | 2009-08-15 22:09:47 +1000 (Sat, 15 Aug 2009) | 1 line

SCI: Rename sci_version_t to SciVersion
........
r43408 | waltervn | 2009-08-15 22:17:23 +1000 (Sat, 15 Aug 2009) | 1 line

SCI: Add missing versions to exe version parsing
........
r43409 | eriktorbjorn | 2009-08-16 00:13:48 +1000 (Sun, 16 Aug 2009) | 2 lines

Removed unnecessary semi-colons.
........
r43411 | lordhoto | 2009-08-16 00:59:11 +1000 (Sun, 16 Aug 2009) | 1 line

Added const qualifiers to static data.
........
r43413 | lordhoto | 2009-08-16 01:30:35 +1000 (Sun, 16 Aug 2009) | 1 line

Yet another slight graphic fix for the Kyrandia 1 Amiga credits.
........
r43414 | buddha_ | 2009-08-16 05:04:21 +1000 (Sun, 16 Aug 2009) | 4 lines

Fix for bug #2835581 (KQ3: Game Crash When Leaving Tavern as Fly):
- Use AGI version 0x3149 instead of the previous 0x3086
- Makes ESC pause the game (Identical to original in this respect)
........

svn-id: r43418
"
"34380d933579a2499c5029a01a9c21603e641792","2009-08-16 01:43:18+00:00","Fix using the backspace key on Mac OS X in HE games.

svn-id: r43420
"
"43d57fd333afa54f4e85f30e2ef8231444988066","2009-08-16 01:46:47+00:00","Update branch specific save game changes, to prevent conflicts.

svn-id: r43421
"
"9f981303d2e19a0fa41d9b54e7c9a5570d373d1f","2009-08-16 05:38:03+00:00","Fix options dialog's reflowLayout.

svn-id: r43425
"
"a9ac38ea23ac3892b5f2eff171efd2f483f57f75","2009-08-16 05:38:16+00:00","Added Ninteno DS specific hack, which takes care of tab button width problems. This actually is not a NDS specific problem, but so far the NDS seems to be the only backend, which has a custom (hardcoded) dialog, which makes problems with our theme layouts. Instead of r43423, which enabled auto width calculaction for tab buttons on all platforms, this commit limits this to the Nintendo DS backend. This takes care of possible layout changes, caused by the changes of the commit. I also added a comment with possible solutions to this problem.

svn-id: r43426
"
"871f832fe1f7213a31e80d8667ce37c9ce823aeb","2009-08-16 06:33:34+00:00","Fix valgrind warnings.

svn-id: r43428
"
"cbffcb609f752edcc3f086521c9e0c75b5ee4cc4","2009-08-16 07:40:13+00:00","Replaced KeyStates with ActionKeys in the keymapper, removed SDL ASCII code mismatch workaround hacks, fixed the memory leaks I had previously created.

svn-id: r43430
"
"0e32d53341f7b20eef356d2c8b9a93f7dca487da","2009-08-16 11:28:59+00:00","Fix bug #2838464 'SCUMM: GUI messages misaligned'.

svn-id: r43431
"
"86fdd698ad3c703636830e125443cd70e7a46620","2009-08-16 12:03:48+00:00","Added detection entry for the UK 16 colour version

svn-id: r43434
"
"5a89bc058c844123bb1b167a5881873d00452c46","2009-08-16 12:10:37+00:00","Fix F5's save button in DOTT CD for me. Actually I was able to reproduce the issue before I wrote this code, after reverting it for more testing, I couldn't reproduce it anymore. Probably it was some random problem, at least this code should now assure the 'Save' button's state is always matching the return value of ScummEngine::canSaveGameStateCurrently.

svn-id: r43436
"
"b1c22cfc4215df7c780169a1700301ef05d80f1a","2009-08-16 12:10:51+00:00","For a better user experience, clear all meta infos, when clicking on an unused slot in the GMM save/load dialog.

svn-id: r43437
"
"2b32a651ec3766b6a412d4e4297e0fd8899e1024","2009-08-16 12:11:45+00:00","Cleanup.

svn-id: r43438
"
"a718e608f4dfa7206ebd41ea5fafa3ff736922a1","2009-08-16 13:47:48+00:00","Fix for bug #2838517 (FF: backspace does not work when typing save game name).

svn-id: r43440
"
"ce30a513acdaab2ca5eacd136cc80ade1beabb3a","2009-08-16 14:04:54+00:00","Introduce a better fix for the Mac OS X backspace problem by adding the workaround to default-events.cpp.

svn-id: r43441
"
"418fb485c96141c1533b3e0d62fc6836ecf771ec","2009-08-16 17:35:59+00:00","Fix format arugments in LoL code. (triggered via -Wformat-security)

svn-id: r43444
"
"ecb642305558f52af65b7d91b9ec38c91ef2aa06","2009-08-16 17:36:16+00:00","Fix warning caused by -Wformat-security, also fixed a possible buffer overflow along with it.

svn-id: r43445
"
"c88cf041a4b805f4af161630b37fa2a21d27e068","2009-08-16 17:36:31+00:00","Fix warning caused by -Wformat-security.

svn-id: r43446
"
"582eb13fa2680a60ac5d1770c450fabfbc15a1b5","2009-08-16 17:38:09+00:00","Fix for bug #2838568 'AMIGAOS4: Compiler error in audiostream.cpp'

svn-id: r43447
"
"00f4794c0a0168a86d7e58e3f585f7fa4d02c7c9","2009-08-16 19:18:19+00:00","SCI: Stage 1 of the game detection overhaul. The end goal is to autodetect
as much as possible. All SCI_VERSION_* information was removed from
detection.cpp (much of it was incorrect anyway).

svn-id: r43449
"
"83e541900d1bbd2a85416498618d5b5d86228874","2009-08-16 19:19:26+00:00","SCI: Fix regression in previous commit (QFG2).

svn-id: r43450
"
"2ac6e260b657e5b22facc319bc83e524c64ffc57","2009-08-16 19:20:09+00:00","SCI: Fix whitespace.

svn-id: r43451
"
"0d4fc8169879e0ec476b45fa58601d69e6e0db3c","2009-08-16 19:48:13+00:00","Fix bug #2838551: 'PSP: AGI games are unbearably slow'

svn-id: r43452
"
"445b01676ee13fde91042094585376c2674fe606","2009-08-17 01:42:39+00:00","Merged revisions 43417,43420,43425-43426,43428,43431,43434,43436-43438,43440-43441,43444-43447,43449-43452 via svnmerge from
https://scummvm.svn.sourceforge.net/svnroot/scummvm/scummvm/trunk

........
r43417 | Kirben | 2009-08-16 10:53:55 +1000 (Sun, 16 Aug 2009) | 1 line

Fix overflow in convertFilePath().
........
r43420 | mthreepwood | 2009-08-16 11:43:18 +1000 (Sun, 16 Aug 2009) | 1 line

Fix using the backspace key on Mac OS X in HE games.
........
r43425 | lordhoto | 2009-08-16 15:38:03 +1000 (Sun, 16 Aug 2009) | 1 line

Fix options dialog's reflowLayout.
........
r43426 | lordhoto | 2009-08-16 15:38:16 +1000 (Sun, 16 Aug 2009) | 1 line

Added Ninteno DS specific hack, which takes care of tab button width problems. This actually is not a NDS specific problem, but so far the NDS seems to be the only backend, which has a custom (hardcoded) dialog, which makes problems with our theme layouts. Instead of r43423, which enabled auto width calculaction for tab buttons on all platforms, this commit limits this to the Nintendo DS backend. This takes care of possible layout changes, caused by the changes of the commit. I also added a comment with possible solutions to this problem.
........
r43428 | lordhoto | 2009-08-16 16:33:34 +1000 (Sun, 16 Aug 2009) | 1 line

Fix valgrind warnings.
........
r43431 | lordhoto | 2009-08-16 21:28:59 +1000 (Sun, 16 Aug 2009) | 1 line

Fix bug #2838464 'SCUMM: GUI messages misaligned'.
........
r43434 | dreammaster | 2009-08-16 22:03:48 +1000 (Sun, 16 Aug 2009) | 1 line

Added detection entry for the UK 16 colour version
........
r43436 | lordhoto | 2009-08-16 22:10:37 +1000 (Sun, 16 Aug 2009) | 1 line

Fix F5's save button in DOTT CD for me. Actually I was able to reproduce the issue before I wrote this code, after reverting it for more testing, I couldn't reproduce it anymore. Probably it was some random problem, at least this code should now assure the 'Save' button's state is always matching the return value of ScummEngine::canSaveGameStateCurrently.
........
r43437 | lordhoto | 2009-08-16 22:10:51 +1000 (Sun, 16 Aug 2009) | 1 line

For a better user experience, clear all meta infos, when clicking on an unused slot in the GMM save/load dialog.
........
r43438 | lordhoto | 2009-08-16 22:11:45 +1000 (Sun, 16 Aug 2009) | 1 line

Cleanup.
........
r43440 | mthreepwood | 2009-08-16 23:47:48 +1000 (Sun, 16 Aug 2009) | 1 line

Fix for bug #2838517 (FF: backspace does not work when typing save game name).
........
r43441 | mthreepwood | 2009-08-17 00:04:54 +1000 (Mon, 17 Aug 2009) | 1 line

Introduce a better fix for the Mac OS X backspace problem by adding the workaround to default-events.cpp.
........
r43444 | lordhoto | 2009-08-17 03:35:59 +1000 (Mon, 17 Aug 2009) | 1 line

Fix format arugments in LoL code. (triggered via -Wformat-security)
........
r43445 | lordhoto | 2009-08-17 03:36:16 +1000 (Mon, 17 Aug 2009) | 1 line

Fix warning caused by -Wformat-security, also fixed a possible buffer overflow along with it.
........
r43446 | lordhoto | 2009-08-17 03:36:31 +1000 (Mon, 17 Aug 2009) | 1 line

Fix warning caused by -Wformat-security.
........
r43447 | lordhoto | 2009-08-17 03:38:09 +1000 (Mon, 17 Aug 2009) | 1 line

Fix for bug #2838568 'AMIGAOS4: Compiler error in audiostream.cpp'
........
r43449 | waltervn | 2009-08-17 05:18:19 +1000 (Mon, 17 Aug 2009) | 3 lines

SCI: Stage 1 of the game detection overhaul. The end goal is to autodetect
as much as possible. All SCI_VERSION_* information was removed from
detection.cpp (much of it was incorrect anyway).
........
r43450 | waltervn | 2009-08-17 05:19:26 +1000 (Mon, 17 Aug 2009) | 1 line

SCI: Fix regression in previous commit (QFG2).
........
r43451 | waltervn | 2009-08-17 05:20:09 +1000 (Mon, 17 Aug 2009) | 1 line

SCI: Fix whitespace.
........
r43452 | sev | 2009-08-17 05:48:13 +1000 (Mon, 17 Aug 2009) | 2 lines

Fix bug #2838551: 'PSP: AGI games are unbearably slow'
........

svn-id: r43457
"
"c38f58598bfc35aa6c1a413e6f1369d5f09ca819","2009-08-17 05:55:21+00:00","- Simplified some functions to accept only the parts of the EngineState they need as parameters, instead of the whole EngineState
- Moved the class table in the Segment manager - it's the only class using it directly
- Removed the sci11 flag from save games (we already know this, we don't need to store it)
- Moved script_get_segment() and get_class_address() inside the segment manager class
- Removed the script_locate_by_segment wrapper
- Simplified script_lookup_export() a lot by removing some paranoia checks
- Added some WIP code for automatically determining the game id in the fallback detector (still not working)
- General cleanup

svn-id: r43458
"
"71c9700420237834d2e02a29eb6c0d0508a463b7","2009-08-17 07:36:08+00:00","Fix compilation of the SCI engine. It seems that all of the SCI header files I touched (and probably others I luckily didn't touch) seem to assume that files including them will supply needed types. That looks like a major issue in SCI. Someone with knowledge of the SCI code should look into this and cleanup the includes of *all* SCI headers.

svn-id: r43459
"
"374dccc90563c8a1b67c94bf9fb15d7d5b065c1e","2009-08-17 09:19:53+00:00","Cleanup

svn-id: r43460
"
"f3918d14d692591d0797ad4b9c03f1fe1cbbb94b","2009-08-17 09:50:35+00:00","Added OPCODEDRAW 0x85, with a specific workaround for Bambou hardcoded paths in scripts

svn-id: r43461
"
"e214755107596cf0350e0c411da12b267a36818d","2009-08-17 09:54:49+00:00","Suppress useless parentheses

svn-id: r43462
"
"b8fd79486faa728df92e0f8d95ee8d3cbe55c0d6","2009-08-17 09:57:09+00:00","Formatting.

svn-id: r43463
"
"90336c88acfec04f48c9710e9dfae55f074905eb","2009-08-17 10:05:02+00:00","Add back parenthesis (I wasn't aware of this convention, sorry) in saveload, and mimic this code in oPlaytoons_openItk

svn-id: r43464
"
"b0a5ec8947be27ba8fb99a17f0da905994bd7cd6","2009-08-17 10:48:03+00:00","- Add note about that modifing the parent stream will mess up SeekableSubReadStream and SeekableSubReadStreamEndian.
- Link to SubReadStream documentation from SeekableSubReadStream and SeekableSubReadStreamEndian.

svn-id: r43465
"
"3dfb1c3a96efc5dcd6e220ff5d8698d90c8be4de","2009-08-17 11:06:27+00:00","Made sound effect playing code consistent for compressed and uncompressed sounds. MemoryReadStream is used again instead of SeekableSubReadStream, as there will be issues when multiple sound effects or voices are played simultaneously

svn-id: r43466
"
"a5e4eed30e3a237d220d2777b20b2a56729ec7e1","2009-08-17 11:11:38+00:00","Ignore speech and sound effect samples with unknown compression, instead of trying to play them as raw sound. Some cleanup

svn-id: r43467
"
"c368f60a1d7984ed5e77a7afb3714d92ebcf61ce","2009-08-17 11:36:09+00:00","Fix for some more !!HIGH STRINGS!! when talking to the palace guards

svn-id: r43468
"
"a9eb98c2184d670ab1f0e730ff75f189e925ae8c","2009-08-17 11:49:07+00:00","Simplified the sound playing code by removing the boolean variables for signed, stereo, endian and sample bit information - now sound flags are used instead. Some cleanup.

svn-id: r43470
"
"58ec3e67eff75f6f8c6a7d9802dc42544a0f6b03","2009-08-17 11:51:42+00:00","Switched event loop while/do to do/while, to ensure event handling occurs even when the game is under heavy load

svn-id: r43471
"
"b7b637046355522ce75c3b18dfbc8f3e8cc0aa76","2009-08-17 12:22:15+00:00","Cleanup: don't copy the Kyrandia 1 Amiga credits data in a temporary buffer, and thus keeping it twice in memory.

svn-id: r43473
"
"09a8fa4efb531b9420a621419101ceb2cad6f407","2009-08-17 12:22:30+00:00","Clear input queue before displaying the credits in Kyrandia 1.

svn-id: r43474
"
"e548e71ba1092a1091da79c5d4652c9d52578e65","2009-08-17 12:47:57+00:00","Fix possible out of bounds access in Screen::drawShape.

svn-id: r43475
"
"62bcb2e51b45e744d0b27b124179cb6ec435188d","2009-08-17 12:57:37+00:00","Commit (slightly) modified version of patch #2831248: Allow suspend/resume for PSP

svn-id: r43477
"
"76a339ecd031369c1f4681b5af02a2d0e3b7e37f","2009-08-17 13:16:40+00:00","Added looping support to LinearDiskStream, needed by SAGA and perhaps other engines. Note that the loop end parameter is still not implemented

svn-id: r43479
"
"77689a05a2e13c5bfaeb286db195cf36b2ce2333","2009-08-17 13:25:44+00:00","- Removed the custom DigitalMusicInputStream used in SAGA for the digital music in ITE CD and replaced it with the common LinearDiskStream class
- Removed leftover code which plays standalone tracks (it's not used anywhere)

svn-id: r43480
"
"516dd5c9a4157ab63b20c6e04b698a63dcf8cd65","2009-08-17 13:49:56+00:00","Slight cleanup to makeLinearDiskStream interface.

svn-id: r43481
"
"260a2019b6c57646ef32274c2fb197658f542803","2009-08-17 15:49:22+00:00","SCI: Add autodetection for DoSound. Cleanup.

svn-id: r43482
"
"4b9bfe2013b3b6da5e34326e3bbdb3795539f94b","2009-08-17 16:07:47+00:00","SCI: Build fix.

svn-id: r43483
"
"4a4ae3382501da9fbd9dc25f502336d55308ca5f","2009-08-17 18:25:51+00:00","Put back the code for playing external digital music, used by the MIDI enhancement project, which was removed in rev. #43480

svn-id: r43485
"
"2fc7660e43f581b811fdc979c25e8c87a17d1456","2009-08-17 23:11:25+00:00","SCI: Fix kernel table for multilingual SCI01 games. Cleanup.

svn-id: r43497
"
"eb11cca7888c01256550d4aac429cc73eb0330e2","2009-08-17 23:54:40+00:00","PSP: increase optimization level and change clock rate to 333mhz

svn-id: r43498
"
"c9402c5559dee28ccc99fb7abca5dc83ec46a330","2009-08-18 06:43:06+00:00","Applied agent-q's patch to the SAGA pathfinding code for all platforms - x and y should not ever be greater than 640 and 480 respectively, so it looks safe enough to be applied

svn-id: r43500
"
"dfaa5acbee5766e59b35697ea1b03122aa4ea2aa","2009-08-18 08:00:24+00:00","Starting to simplify the Action structure, and rework it to facilitate making the automatic mapper smarter, at least when there is a keyboard present. Fixed a minor whitespace issue in a comment.

svn-id: r43502
"
"65ac355efa2cb792278e34de5c397ab11c8a46e3","2009-08-18 09:12:41+00:00","Removed the maxMemory parameter of the resource manager and replaced it with a define

svn-id: r43503
"
"ca9bbce9b3e8771f346eca037bd0c39a7e0360de","2009-08-18 10:01:18+00:00","- Added game ID detection to the fallback detector. We still need to map some of Sierra's internal IDs to our own ones
- The class table is now created in the segment manager constructor

svn-id: r43504
"
"2b945eabf1acc24d289cc8489216fc007899275c","2009-08-18 12:25:04+00:00","Bugfix for Castle Skorl problem reported on the list

svn-id: r43507
"
"766cdac9f392ceed879a4fe073e93b66e6764092","2009-08-18 12:49:34+00:00","Mapped some Sierra internal IDs to our own ones, and added a note about a hack currently used in the fallback detector

svn-id: r43509
"
"db0cd620f6f5766b6287bb0f0aa1ac9c866c4cba","2009-08-18 14:10:31+00:00","Started rewriting the SCI engine to use FSNode instead of file names. This is the proper solution for removing the hack in the fallback detector, but it still needs work. Also, reduced the things needed to be initialized a bit, so that the detection is a bit faster

svn-id: r43510
"
"b33b90ecd0468c58b93e13ff80bf6939e97ed7a6","2009-08-18 15:31:26+00:00","Made AGOS, DRASCULA, GOB, GROOVIE, MADE, SCUMM and TINSEL properly stop CD audio playback on engine quit. (This only problem affected playback from CD, not from ripped audio files)

svn-id: r43512
"
"5c11ec51bc0e246615874876c913371672a725a3","2009-08-18 15:32:26+00:00","- Destory AudioCDManager singleton after user quits a game, this saves a few bytes memory
- Added FIXME to audiocd.h, concering why destroying the AudioCDManager can not quit CD playback right now

svn-id: r43513
"
"426dd7d24149d7d60e9e20d0babe38d08e114b4a","2009-08-18 15:39:47+00:00","PSP: disable dosbox OPL

svn-id: r43514
"
"3ade77dfb06ba0d41f123306fcf529c7007351b9","2009-08-18 15:41:00+00:00","Typos.

svn-id: r43515
"
"ed2a733b2a9841f00e8ea2559193044cc4fca8b0","2009-08-18 17:12:01+00:00","PSP: Make R-trigger act as a context sensitive modifier key, remap ENTER to triangle

svn-id: r43517
"
"a35056b55531edcd384c3fa0dafc9a4ee6bfb6ee","2009-08-18 18:06:50+00:00","Implement setCursorPalette(), correct hasFeature() <-> getFeatureState() mixup.

svn-id: r43519
"
"0762bb7cf6d81632a0fd9621104546fa9ae3da18","2009-08-18 19:42:13+00:00","- PMV player: Use frame count from PVM file and fix incorrect 'invalid chunk type' warning
- Fix sprite drawing glitch with vertically flipped sprites (bug #2825925)

svn-id: r43521
"
"2bd1f51d92492fa88ba61dc65f783fc9bbfd852c","2009-08-18 21:37:31+00:00","Possible fix for #2828330 (AGI: KQ1: Fast text box). If doesn't break anything else then should go to the branch-1-0-0 too, but haven't had the time to do much testing yet - thus committing to the trunk first.

svn-id: r43523
"
"89d7fea4e619cd44d5ce16eee1e46ad417e26c9c","2009-08-19 01:22:43+00:00","Merged revisions 43458-43468,43470-43471,43473-43475,43477,43479-43483,43485,43497-43498,43500,43503-43504,43507,43509-43510,43512-43515,43517,43519,43521,43523 via svnmerge from
https://scummvm.svn.sourceforge.net/svnroot/scummvm/scummvm/trunk

........
r43458 | thebluegr | 2009-08-17 15:55:21 +1000 (Mon, 17 Aug 2009) | 8 lines

- Simplified some functions to accept only the parts of the EngineState they need as parameters, instead of the whole EngineState
- Moved the class table in the Segment manager - it's the only class using it directly
- Removed the sci11 flag from save games (we already know this, we don't need to store it)
- Moved script_get_segment() and get_class_address() inside the segment manager class
- Removed the script_locate_by_segment wrapper
- Simplified script_lookup_export() a lot by removing some paranoia checks
- Added some WIP code for automatically determining the game id in the fallback detector (still not working)
- General cleanup
........
r43459 | lordhoto | 2009-08-17 17:36:08 +1000 (Mon, 17 Aug 2009) | 1 line

Fix compilation of the SCI engine. It seems that all of the SCI header files I touched (and probably others I luckily didn't touch) seem to assume that files including them will supply needed types. That looks like a major issue in SCI. Someone with knowledge of the SCI code should look into this and cleanup the includes of *all* SCI headers.
........
r43460 | thebluegr | 2009-08-17 19:19:53 +1000 (Mon, 17 Aug 2009) | 1 line

Cleanup
........
r43461 | strangerke | 2009-08-17 19:50:35 +1000 (Mon, 17 Aug 2009) | 1 line

Added OPCODEDRAW 0x85, with a specific workaround for Bambou hardcoded paths in scripts
........
r43462 | strangerke | 2009-08-17 19:54:49 +1000 (Mon, 17 Aug 2009) | 1 line

Suppress useless parentheses
........
r43463 | lordhoto | 2009-08-17 19:57:09 +1000 (Mon, 17 Aug 2009) | 1 line

Formatting.
........
r43464 | strangerke | 2009-08-17 20:05:02 +1000 (Mon, 17 Aug 2009) | 1 line

Add back parenthesis (I wasn't aware of this convention, sorry) in saveload, and mimic this code in oPlaytoons_openItk
........
r43465 | lordhoto | 2009-08-17 20:48:03 +1000 (Mon, 17 Aug 2009) | 2 lines

- Add note about that modifing the parent stream will mess up SeekableSubReadStream and SeekableSubReadStreamEndian.
- Link to SubReadStream documentation from SeekableSubReadStream and SeekableSubReadStreamEndian.
........
r43466 | thebluegr | 2009-08-17 21:06:27 +1000 (Mon, 17 Aug 2009) | 1 line

Made sound effect playing code consistent for compressed and uncompressed sounds. MemoryReadStream is used again instead of SeekableSubReadStream, as there will be issues when multiple sound effects or voices are played simultaneously
........
r43467 | thebluegr | 2009-08-17 21:11:38 +1000 (Mon, 17 Aug 2009) | 1 line

Ignore speech and sound effect samples with unknown compression, instead of trying to play them as raw sound. Some cleanup
........
r43468 | dreammaster | 2009-08-17 21:36:09 +1000 (Mon, 17 Aug 2009) | 1 line

Fix for some more !!HIGH STRINGS!! when talking to the palace guards
........
r43470 | thebluegr | 2009-08-17 21:49:07 +1000 (Mon, 17 Aug 2009) | 1 line

Simplified the sound playing code by removing the boolean variables for signed, stereo, endian and sample bit information - now sound flags are used instead. Some cleanup.
........
r43471 | dreammaster | 2009-08-17 21:51:42 +1000 (Mon, 17 Aug 2009) | 1 line

Switched event loop while/do to do/while, to ensure event handling occurs even when the game is under heavy load
........
r43473 | lordhoto | 2009-08-17 22:22:15 +1000 (Mon, 17 Aug 2009) | 1 line

Cleanup: don't copy the Kyrandia 1 Amiga credits data in a temporary buffer, and thus keeping it twice in memory.
........
r43474 | lordhoto | 2009-08-17 22:22:30 +1000 (Mon, 17 Aug 2009) | 1 line

Clear input queue before displaying the credits in Kyrandia 1.
........
r43475 | lordhoto | 2009-08-17 22:47:57 +1000 (Mon, 17 Aug 2009) | 1 line

Fix possible out of bounds access in Screen::drawShape.
........
r43477 | joostp | 2009-08-17 22:57:37 +1000 (Mon, 17 Aug 2009) | 2 lines

Commit (slightly) modified version of patch #2831248: Allow suspend/resume for PSP
........
r43479 | thebluegr | 2009-08-17 23:16:40 +1000 (Mon, 17 Aug 2009) | 1 line

Added looping support to LinearDiskStream, needed by SAGA and perhaps other engines. Note that the loop end parameter is still not implemented
........
r43480 | thebluegr | 2009-08-17 23:25:44 +1000 (Mon, 17 Aug 2009) | 2 lines

- Removed the custom DigitalMusicInputStream used in SAGA for the digital music in ITE CD and replaced it with the common LinearDiskStream class
- Removed leftover code which plays standalone tracks (it's not used anywhere)
........
r43481 | lordhoto | 2009-08-17 23:49:56 +1000 (Mon, 17 Aug 2009) | 1 line

Slight cleanup to makeLinearDiskStream interface.
........
r43482 | waltervn | 2009-08-18 01:49:22 +1000 (Tue, 18 Aug 2009) | 1 line

SCI: Add autodetection for DoSound. Cleanup.
........
r43483 | waltervn | 2009-08-18 02:07:47 +1000 (Tue, 18 Aug 2009) | 1 line

SCI: Build fix.
........
r43485 | thebluegr | 2009-08-18 04:25:51 +1000 (Tue, 18 Aug 2009) | 1 line

Put back the code for playing external digital music, used by the MIDI enhancement project, which was removed in rev. #43480
........
r43497 | waltervn | 2009-08-18 09:11:25 +1000 (Tue, 18 Aug 2009) | 1 line

SCI: Fix kernel table for multilingual SCI01 games. Cleanup.
........
r43498 | joostp | 2009-08-18 09:54:40 +1000 (Tue, 18 Aug 2009) | 2 lines

PSP: increase optimization level and change clock rate to 333mhz
........
r43500 | thebluegr | 2009-08-18 16:43:06 +1000 (Tue, 18 Aug 2009) | 1 line

Applied agent-q's patch to the SAGA pathfinding code for all platforms - x and y should not ever be greater than 640 and 480 respectively, so it looks safe enough to be applied
........
r43503 | thebluegr | 2009-08-18 19:12:41 +1000 (Tue, 18 Aug 2009) | 1 line

Removed the maxMemory parameter of the resource manager and replaced it with a define
........
r43504 | thebluegr | 2009-08-18 20:01:18 +1000 (Tue, 18 Aug 2009) | 2 lines

- Added game ID detection to the fallback detector. We still need to map some of Sierra's internal IDs to our own ones
- The class table is now created in the segment manager constructor
........
r43507 | dreammaster | 2009-08-18 22:25:04 +1000 (Tue, 18 Aug 2009) | 1 line

Bugfix for Castle Skorl problem reported on the list
........
r43509 | thebluegr | 2009-08-18 22:49:34 +1000 (Tue, 18 Aug 2009) | 1 line

Mapped some Sierra internal IDs to our own ones, and added a note about a hack currently used in the fallback detector
........
r43510 | thebluegr | 2009-08-19 00:10:31 +1000 (Wed, 19 Aug 2009) | 1 line

Started rewriting the SCI engine to use FSNode instead of file names. This is the proper solution for removing the hack in the fallback detector, but it still needs work. Also, reduced the things needed to be initialized a bit, so that the detection is a bit faster
........
r43512 | lordhoto | 2009-08-19 01:31:26 +1000 (Wed, 19 Aug 2009) | 1 line

Made AGOS, DRASCULA, GOB, GROOVIE, MADE, SCUMM and TINSEL properly stop CD audio playback on engine quit. (This only problem affected playback from CD, not from ripped audio files)
........
r43513 | lordhoto | 2009-08-19 01:32:26 +1000 (Wed, 19 Aug 2009) | 2 lines

- Destory AudioCDManager singleton after user quits a game, this saves a few bytes memory
- Added FIXME to audiocd.h, concering why destroying the AudioCDManager can not quit CD playback right now
........
r43514 | joostp | 2009-08-19 01:39:47 +1000 (Wed, 19 Aug 2009) | 2 lines

PSP: disable dosbox OPL
........
r43515 | lordhoto | 2009-08-19 01:41:00 +1000 (Wed, 19 Aug 2009) | 1 line

Typos.
........
r43517 | joostp | 2009-08-19 03:12:01 +1000 (Wed, 19 Aug 2009) | 2 lines

PSP: Make R-trigger act as a context sensitive modifier key, remap ENTER to triangle
........
r43519 | joostp | 2009-08-19 04:06:50 +1000 (Wed, 19 Aug 2009) | 2 lines

Implement setCursorPalette(), correct hasFeature() <-> getFeatureState() mixup.
........
r43521 | john_doe | 2009-08-19 05:42:13 +1000 (Wed, 19 Aug 2009) | 2 lines

- PMV player: Use frame count from PVM file and fix incorrect 'invalid chunk type' warning
- Fix sprite drawing glitch with vertically flipped sprites (bug #2825925)
........
r43523 | buddha_ | 2009-08-19 07:37:31 +1000 (Wed, 19 Aug 2009) | 1 line

Possible fix for #2828330 (AGI: KQ1: Fast text box). If doesn't break anything else then should go to the branch-1-0-0 too, but haven't had the time to do much testing yet - thus committing to the trunk first.
........

svn-id: r43524
"
