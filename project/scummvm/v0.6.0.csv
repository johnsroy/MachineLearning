"commit id","commit date","commit message"
"17a888b65a9fb700099b65688d0c8dcfcc95de3f","2003-07-24 04:19:42+00:00","Fix for Bug [775534] 0.5.0 RC SIMON1DOS Random sfx notes during music

Corrected a problem with resource size computation for GMF sound
effect resources. Since GMF resources have no size info, we were
computing sizes with the assumption that each GMF appears in its
own file, so the file size becomes the resource size. This is true
for simon1dos music files but not for SFX files. This fix uses the
resource offset pointers at the beginning of SFX files to properly
compute the size of SFX resources.

svn-id: r9155
"
"34732e48debb701f6fecb3d5e2e09f135adf5b21","2003-07-24 07:07:53+00:00","updated vc7 file

svn-id: r9157
"
"da0db02f6e4fb2fdd626962440987540d1e27153","2003-07-24 10:20:56+00:00","Fix for simon2mac voices problem, bug #776803

svn-id: r9160
"
"f930abe56825080fc0dd4f5ae8b82f993c7ff715","2003-07-24 12:05:06+00:00","Check before releasing memory

svn-id: r9163
"
"55c71f65c0794acb45acd4ac07854bd5b53e4429","2003-07-24 12:32:56+00:00","Another leak

svn-id: r9165
"
"635fea9b178825a404cb6aec5a389ed3d66afc8f","2003-07-24 14:21:56+00:00","Simon games shold only play one voice at a time.
Fixes many voice overlaps
Fixes subtitles been ot of sync with voice, with simon 1 versions that had combi
ned speech/subtitles.

svn-id: r9167
"
"a8bffdf1c92000eb5a9bbe31a6f9d9448a816030","2003-07-24 14:47:48+00:00","scumm_strnicmp

svn-id: r9168
"
"731a1bbbc94d03cb7f3f2030366c9c661c50c1bb","2003-07-24 15:01:01+00:00","Remove palmos fixme

svn-id: r9169
"
"31efc22c976f133b8885bc8384027907af9b8177","2003-07-24 15:05:10+00:00","Add support for strnicmp

svn-id: r9170
"
"316162fe19cfb3572dc04466963028c5ec10245c","2003-07-24 15:15:35+00:00","Ooops

svn-id: r9171
"
"5f3cd3b584158da5a070204bc8d1fb16c1429e54","2003-07-24 16:18:41+00:00","Fix warning (no newline at end of file)

svn-id: r9172
"
"be7597a8c9e406f798b0ebcea7c131825366582b","2003-07-24 16:54:40+00:00","Should be right now

svn-id: r9174
"
"becd70d243d456af9595ae0cc37e72b1489736c5","2003-07-24 17:44:00+00:00","cleanup: encapsulate some more members of class Actor, and rename newDirection -> targetFacing (since it corresponds to the future value of 'facing'; the distinction between 'facing' and 'direction' is extremly fuzzy)

svn-id: r9175
"
"b9d380bba43b25e1654b320a42b05499c060656c","2003-07-24 17:46:38+00:00","new files, based on SoX (http://sox.sf.net): better resampling code. Note that my mixer.cpp changes are on purpose not yet in CVS since they are not complete. Only reasons I checkin these files is that it's much more comfortable to have CVS, since I need to rewrite parts of resample.cpp now (I already have lots of modifications in). Also expect more OO in the future

svn-id: r9176
"
"8146de769395ffacf5483260ce69be31f0612808","2003-07-24 17:49:03+00:00","ambient sfx works fine again

svn-id: r9178
"
"1622ac31dafee837cb3011c558dfcd93c5bb1ca6","2003-07-24 18:20:12+00:00","added RateConverter classes as thin wrappers around st_* functions; renamed InputStream -> AudioInputStream and cleaned up the hierarchy of its subclasses; added makeInputStream() auxillary function

svn-id: r9179
"
"09263a1febc4ff1adf69d81bf4d225340484df02","2003-07-24 21:26:00+00:00","added volume support; some cleanup; provided exactly as many samples as were requested in the 'resample' algorithm (if possible)

svn-id: r9180
"
"f086ab5a0517c1181e38d7e60d6a8593d7800db1","2003-07-24 21:26:46+00:00","whitespace

svn-id: r9181
"
"b15277e5edcb63b1adf8b6b27060ae15c65aff20","2003-07-24 23:33:43+00:00","oops, wanted to move talkFrequency initialisation, but only re-moved it, and didn't add it in its new place. bad me!

svn-id: r9182
"
"95bb74e2b886c22adce2fd0bdd40083b8d8efb53","2003-07-25 01:05:08+00:00","round to nearest

svn-id: r9183
"
"791efd853aacee15bb2f5b2e575c59fd9bb7480d","2003-07-25 01:19:14+00:00","lots of mixer changes: replaced _volumeTable by _globalVolume (applying volume after resampling is more accurate); made more member vars of SoundMixer protected (and thus added some new getter methods); added (untested) support for a second (stereo) channel when playing MP3

svn-id: r9184
"
"9bb773c67d093c5551904d3ee3c9e424e133f20c","2003-07-25 06:55:05+00:00","Use correct frame rate value from disasm, fixes minor timing issue in simon 2 in
troduction.
Correct default _lock_counter value

svn-id: r9186
"
"9937e18ba5801f124c056bd7d28077a463580917","2003-07-25 08:49:54+00:00","Surprised this has not caused major problems

svn-id: r9188
"
"2ae3e45aea23a2e612276b6ce60486d21e889885","2003-07-25 13:34:25+00:00","reduced source code duplication

svn-id: r9189
"
"c520d2d423f90811e2ad2eb6f768d1a88c6c1ca2","2003-07-25 13:42:05+00:00","move AudioInputStream implementations & makeInputStream into separate .cpp file

svn-id: r9190
"
"ce29c4c29558b65b66e05688ac049b63ad820163","2003-07-25 18:07:42+00:00","fixed setActorCostume for COMI; fixees bug #754421 and hopefully also the issue described in patch #696033

svn-id: r9191
"
"226ee61f717221bd2894dfa7d83f9d9c15c97ff5","2003-07-26 01:44:37+00:00","oops accidentally broke the 'old' 8bit resampling code :-(

svn-id: r9192
"
"8b358b120886783e5837fbbea6077104b9ce5012","2003-07-26 19:10:51+00:00","Added gui/about.*

svn-id: r9193
"
"be898b414fa6199d17a4954e912fad2e6d5c6fa7","2003-07-26 19:37:54+00:00","For for Bug [775654] DOTT: Hanging notes

Corrected active notes tracking when switching
between Type 2 SMF tracks. Although Note Off
events from the previous track are properly
simulated, those sustaining notes are cleared
from the active notes list so that jumps
within the new track will not attempt to
sustain them again.

svn-id: r9194
"
"f6984add8f67d53d1521021a2c336647f483f248","2003-07-26 19:52:34+00:00","Fixed unit'd var in Adlib driver

svn-id: r9195
"
"b8ce60ea1872b760e9caecf40260c7ae3eeb8ae9","2003-07-27 12:05:08+00:00","Count amount of save files available so load/save dialog works correctly.

svn-id: r9196
"
"80cbf90a9d613f7b9852f13d54a7e55f22a9e5a3","2003-07-27 12:25:56+00:00","some cleanup

svn-id: r9198
"
"7e54a2f569c4ad435c8dee2252fdc752140e09da","2003-07-27 17:33:28+00:00","fix inventory scrolling V1/V2 games (there were problems with an odd inventory count)

svn-id: r9201
"
"77c8eec439928964c230559569c38ef0fffed0c9","2003-07-27 23:30:28+00:00","oops this was never meant to be removed

svn-id: r9203
"
"ff988094be7b5c3c96c7b304bec7c2439a8cccf4","2003-07-27 23:45:43+00:00","init walkdata (fix for bug #770306); move Actor::Actor constructor from header to source file

svn-id: r9205
"
"0d209fecb654e0302283295a3e020940c8c368c5","2003-07-28 00:04:20+00:00","fix return values in getObjectOrActorXY; turned unsafe derefActorSafe call into derefActor (return value of derefActorSafe was used w/o checking it for 0)

svn-id: r9206
"
"64e0a16a6dba3249c710062e1f87d565c279c5bb","2003-07-28 00:33:05+00:00","adding an assert (better paranoid than letting a null pointer slip thru)

svn-id: r9207
"
"12d872f754b9f46e07d078bab5b41683003b6d92","2003-07-28 01:09:54+00:00","more sanity checks

svn-id: r9208
"
"e87bc6d89e260afd6e116c7eace991876cfa4acf","2003-07-28 01:13:31+00:00","use a single converter for both channels (if input data is stereo), for improved efficency; renamed MemoryAudioInputStream -> LinearMemoryStream and use some template voodoo to make the baseclass of Input8bitSignedStream etc. variable; added (commented out) draf of WrappedMemoryStream

svn-id: r9209
"
"d592095fb942e961773e8177056d973eb1cff092","2003-07-28 01:36:16+00:00","Patch #715991: Quit Confirmation Dialog (feature request #642721) with some tweaks by me

svn-id: r9210
"
"f020d28b5e9297f93d5bedae62885b380c23f517","2003-07-28 01:44:38+00:00","bs2

svn-id: r9211
"
"dc6aa9912c73e1e03c32b6b214c5fbc46aa1eb57","2003-07-28 01:47:41+00:00","bs2 driver

svn-id: r9212
"
"9865deb0bcd1948046607edab7647c2f328338bd","2003-07-28 01:50:45+00:00","bs2

svn-id: r9213
"
"81baae7ddc2b16031af2526455993c06a2f24d25","2003-07-28 01:50:46+00:00","added CopyRateConverter (used if inrate == outrate)

svn-id: r9214
"
"88b70db20f641c7f177935c18db5383400c3f32c","2003-07-28 02:06:49+00:00","make people happy

svn-id: r9215
"
"80bea5bc7201dbee7b1193c22c18cc6219180731","2003-07-28 02:10:24+00:00","fixed some warnings

svn-id: r9216
"
"78c39e150dfb3893606e324dbca5723a27235e2c","2003-07-28 02:12:59+00:00","update for bs2

svn-id: r9217
"
"55cbdd5c5fb2bd0c1c260df467219b233ac9909e","2003-07-28 02:14:28+00:00","more warnings

svn-id: r9218
"
"44048d2434a18295c7981e676e4a0520720f992c","2003-07-28 02:23:04+00:00","fixed more warnings

svn-id: r9219
"
"544168e96b04bbcf0015e9a853702f89fa31a40f","2003-07-28 02:37:47+00:00","fixed yet more warnings

svn-id: r9220
"
"d4933386a973b30be629650fe629cceb3f6450cf","2003-07-28 02:39:40+00:00","big FIXME

svn-id: r9221
"
"ccc40eecc9d826ee359a2a0914ab3f949be29360","2003-07-28 03:12:49+00:00","Compiles on mingw now

svn-id: r9222
"
"0dfde5cabae51e7b7eccfbb3d6743800db888a7e","2003-07-28 03:34:47+00:00","Ooops

svn-id: r9223
"
"42ba1110638cd1ab0165c916b3ff692f5278c302","2003-07-28 03:49:25+00:00","A few warnings

svn-id: r9224
"
"836f82fbbfe65513083c1b10cdc83b7d24a4b33f","2003-07-28 03:52:05+00:00","Ooops

svn-id: r9225
"
"2fbcfb01a012b418643286c640112c81b5e92440","2003-07-28 05:29:37+00:00","missed one

svn-id: r9226
"
"ea5822ed23d7454fcaf65959fa59a6ed0e136fa4","2003-07-28 05:30:42+00:00","it would be nice if people would update functions when adding qualifiers to prototypes

svn-id: r9227
"
"376f78f7f650604d580a3c681ab20b490667f289","2003-07-28 06:53:55+00:00","added vc7 files for bs2

svn-id: r9228
"
"77cf6b7c3e66cca495e9ddbc92dad68a1874ee17","2003-07-28 07:00:15+00:00","add bs2demo target for broken sword 2 demo

svn-id: r9229
"
"a05c4bda0f9217723ea2541b4fd279418a8efc1a","2003-07-28 07:22:40+00:00","-Werror cleanup

svn-id: r9230
"
"b17e45c9bcdb63f57dd9ef60eb72ac1421b5ed0a","2003-07-28 07:31:14+00:00","undefine these functions for now but in the long run we should probably rename them

svn-id: r9231
"
"71a9b1bc2df37018adf166934e52b804e9d4ddff","2003-07-28 07:36:27+00:00","rename _mkdir

svn-id: r9232
"
"d520390cc5c9a90c9fdd8e820e76c4468f4daeb9","2003-07-28 07:47:21+00:00","rename functions with windows specific names

svn-id: r9233
"
"5d309dd171dc2470498ee3721bb6e4fa21016835","2003-07-28 07:52:01+00:00","rename memory struct as well

svn-id: r9234
"
"98b1a0d7ff2d5c4ff853f3e064d549ec558b36d1","2003-07-28 08:04:03+00:00","replace DWORD usage with uint32

svn-id: r9235
"
"84bccaa83b996ef49fbedf6bb52bb64e9f3c5fd4","2003-07-28 08:08:42+00:00","substitute long int for LARGE_INTEGER

svn-id: r9236
"
"f22cca2be21035760c6b2cfb72ad4e1ba5a08182","2003-07-28 09:49:46+00:00","rename _DEBUG define to _BS2_DEBUG to stop it conflicting with VC

svn-id: r9237
"
"2b0c2a20b2ccf78832fe147ebe6a98b5277048ac","2003-07-28 10:28:29+00:00","match prototype

svn-id: r9238
"
"9e051fa5070cd70ff0e69faa647ad26f66b64560","2003-07-28 11:13:01+00:00","instead of 'int channels', use 'bool stereo' (less extensible, but then I don't think we'll ever support 5.1 sound :-)); fixed a bug in st_rate_flow where it sometimes would overflow the output buffer; made CopyRateConverter a template, too, increasing efficency

svn-id: r9239
"
"c1cbd4605e6a3ae3a28462cdb30482454e1b6da0","2003-07-28 11:21:25+00:00","fix some VC7 warnings

svn-id: r9240
"
"deef4a53144be30c2a8b6792e9f34c2387e7ff13","2003-07-28 11:46:32+00:00","correct cflags variables

svn-id: r9241
"
"a57263fa0a456578639d85a4c393e7e19c685b53","2003-07-28 11:48:07+00:00","unification

svn-id: r9242
"
"43cd0cac87e35a219fc2db80a7dd32a407d3ddcc","2003-07-28 11:54:26+00:00","fixed const errors

svn-id: r9243
"
"2ef51278b220945150048ba651662e6e0ffbeed3","2003-07-28 11:56:34+00:00","fix shadow warning

svn-id: r9244
"
"6d392a73e2c2425f7145eff5360c82132b492571","2003-07-28 12:24:13+00:00","fix shadow'd vars

svn-id: r9245
"
"da1cdeb0ec4a74e093340cd1a82695b4c287c11c","2003-07-28 12:59:39+00:00","change version to 0.5.3-cvs allowing room for two follow up minor releases...

svn-id: r9247
"
"462898465acc4960d66ae4fbb5be3fc1cd317573","2003-07-28 14:50:54+00:00","StopSpeech -> StopSpeechBS2 (avoid conflict wiht SpeechSynthesis framework on OS X)

svn-id: r9248
"
"e0ee9d3688f7ac1369f26cee4a31007c404cd3b4","2003-07-28 15:47:46+00:00","Fix for bug #778060 ('DOTT: Subtitle drawing glitch').

svn-id: r9249
"
"7caa1a0c9e0438d154e209e47627e93181c2e969","2003-07-28 16:55:06+00:00","removed _encbyte (it's only used locally)

svn-id: r9252
"
"7ea67048c1305bcf32a48fbe586e1bebf222a2b7","2003-07-28 16:55:43+00:00","more work on WrappedMemoryStream (not yet tested)

svn-id: r9253
"
"5c75ec90e7f84c8c1d6696cede2af08720d30276","2003-07-28 16:56:52+00:00","no need to zero these variables twice

svn-id: r9254
"
"4dfd76fb9db6f56b37a046960438876a50bdf19f","2003-07-28 17:14:41+00:00","<memory.h> is not a standard header file. (Merge from branch-0-5-0.)

svn-id: r9255
"
"13eee4b06fd980ad835312d99d5b13a3e217f9bb","2003-07-28 17:28:29+00:00","rewrote the input streams, this should be more straightforward and inline slightly better (the fact that the main AudioInputStream methods are virtual still means that no inlining can take place there; but of course, if we did change that, all the rate converters would have to exist in 8, instead of currently 2, compiled versions)

svn-id: r9256
"
"475bc7227725cf002558cd6e4224a110831c29f5","2003-07-28 18:01:00+00:00","moved st_gcd to resample.cpp

svn-id: r9257
"
"c6a4a1d37d17a36940e581d3aa7163550a637012","2003-07-28 18:01:56+00:00","make wrapped stream work (I can hear some music in CoMI now before it segfaults :-)

svn-id: r9258
"
"ed6521f332db8557ba701add71f493fc3186fdb2","2003-07-28 20:25:09+00:00","fix for bug #776169

svn-id: r9259
"
"57a413f0288c8f9cedd2ac0bbb4b9ebdc937a0de","2003-07-28 20:42:54+00:00","experimental new rate conversion code (use SOX_HACK to en-/disable it); note that right now only the linear filter works, the high quality resample in resample.cpp is in flux; right now the top priority for me is to get MP3/Vorbis resampling working

svn-id: r9261
"
"5e7988ae6fa43865410f03b3681ece23304d7c8f","2003-07-28 20:59:53+00:00","checkin for LavosSpawn: 'work around bug #778105 (line width exceeded)'

svn-id: r9262
"
"83940e186727f8309b8b2b5335470decd6bc14d1","2003-07-28 21:55:09+00:00","fix vc compilation

svn-id: r9263
"
"c62b74a08fa055b0c9bdd9e9719a54edeff98b12","2003-07-29 00:05:19+00:00","Added FIXME

svn-id: r9265
"
"4e7c115681c1bf21de45027278decb0e52a644c1","2003-07-29 00:05:36+00:00","cleanup

svn-id: r9266
"
"3f99e8d1d4e757dcbc54dba7872a4ffddeab1076","2003-07-29 01:35:37+00:00","Fix mingw compile

svn-id: r9269
"
"1be944755f1f089b5b000852a9fc34c8b5eea017","2003-07-29 01:36:10+00:00","added makeRateConverter factory function

svn-id: r9270
"
"77eb28406227d041d7b5395540727b4af4ca2349","2003-07-29 01:37:03+00:00","added VorbisInputStream

svn-id: r9271
"
"021a70182799d4cf8e3ee23a0530ebb8a7eacc7f","2003-07-29 01:37:50+00:00","hooked up ChannelVorbis to the new rate converter system, using VorbisInputStream

svn-id: r9272
"
"bb35528f43793042473602d1b3fb28e732c8bd0f","2003-07-29 01:43:35+00:00","return immediately after commiting suicide; enable new rate conversion code

svn-id: r9273
"
"04843469eb7eff983c10c9eac42ac9e51d82ec29","2003-07-29 02:21:07+00:00","some cleanup; moved around some stuff, preparing to unify more code of ChannelMP3CDMusic and ChannelMP3

svn-id: r9274
"
"fb7deafaef766b0dff8656fc804024fc2803f362","2003-07-29 02:48:38+00:00","after looking at SAM and DOTT, it seems the actor-voice sync actually is *worse* with a non-zero _silenceCut value - setting it to 0 gives perfect sync for me... odd, when did this change? Anyway, removing _silenceCut. If you notice sync problems, tell me

svn-id: r9275
"
"45ebcdbde19611eef03b4e92cf0188aac2450d06","2003-07-29 03:02:25+00:00","account for the data in the _buffer, too

svn-id: r9276
"
"bbbebd9d14c7360dbe250b5e28e1b6505385f7d5","2003-07-29 06:12:52+00:00","Some basic suport for reversed text for hebrew version.

svn-id: r9278
"
"11aa36ff90be9c0cee214a7fb2a15f9e97bef918","2003-07-29 12:13:39+00:00","Add option for the demo included in Maniac Mansion (Classic version)

svn-id: r9279
"
"f1a6025aa2a8b6c99798e0738eaca4c844933c20","2003-07-29 12:34:46+00:00","turn d_sound.cpp into class BS2Sound

svn-id: r9280
"
"6b470390f7ca2b17a56e0b79a2b42f4e70309fcb","2003-07-29 12:39:41+00:00","cleanup

svn-id: r9281
"
"aa6c99b5da92d9efacf881b31019426fab2a0e08","2003-07-29 13:36:06+00:00","removed some debug output

svn-id: r9282
"
"f4f63d71dbe1d721590e55be49cde6ddb28b6bc2","2003-07-29 21:03:25+00:00","Partial fix for bug #779013. It no longer crashes, but the config file
setting still overrides the command-line option.

svn-id: r9283
"
"7fbd161cadcd069aecd9d7bb881b76191b431172","2003-07-30 01:43:28+00:00","Fix unit'd array and variable in simon

svn-id: r9285
"
"20d06e2c3dc09085c218620e61c384dc0514fabf","2003-07-30 09:26:54+00:00","Fixed MSVC errors

svn-id: r9288
"
"269757dabce941f87afd871c0eab19bb53ce358c","2003-07-30 09:36:48+00:00","vc_10_no_depack_swap implementation

svn-id: r9289
"
"f503013b5a155babf6b4ba6bca9c59d7f5aeb80d","2003-07-30 10:05:09+00:00","Small cleanup

svn-id: r9290
"
"318c245f86c7cd5d89f6051f52659788f2a81c70","2003-07-30 10:14:16+00:00","Added new scummvm/sound modules.
Disabled BS2 references until
MSVC project can be set up.

svn-id: r9291
"
"00bcd731f5d0783eb79e7a00c70ba4bec8f6f613","2003-07-30 11:16:09+00:00","Add/remove/update simon comments

svn-id: r9292
"
"2ddd3a989598b1840bf109c948e5779d72695639","2003-07-30 11:17:51+00:00","typo

svn-id: r9293
"
"e739a9644cf2d4e39b45928dd9713427e45bb179","2003-07-30 16:25:05+00:00","Fix Golum Ring causes graphic glitches, bug #777966

svn-id: r9294
"
"26ed12953da5dc2d1403d22ce127e2c9165af294","2003-07-30 16:40:33+00:00","Update simon1

svn-id: r9296
"
"15378172cdb4f5e7456653e20485f396cff16d91","2003-07-30 18:20:45+00:00","Partial fix for bug #780167 ('SIMON1/2: Sound problems'). It seems to fix
the crash, but the sounds play at the wrong rate, I believe.

svn-id: r9298
"
"cae96f35b071de517b0097419504678c3d271629","2003-07-30 18:24:50+00:00","globally disable 'unknown pragma' warning for VC

svn-id: r9299
"
"26d05c0190c9cca1444cc7a004c1149b3358ab10","2003-07-30 18:40:28+00:00","the VC warning for unknown pragmas is now gloabally disabled, no need to work around it locally

svn-id: r9300
"
"0f85cc306137e866adbe17ff7498e20d61a7938d","2003-07-30 19:25:31+00:00","rename bs2 to sword2 to have the same name as the original engine.
besides this way all our engines start with an 's' ;)

svn-id: r9301
"
"6143058422ab3fb8bf6c6eb21fbabb8940be3da9","2003-07-30 19:43:51+00:00","fixed incorrect MSVC fixes; simplified readSample code (bugs #780167 and #780420)

svn-id: r9302
"
"c2e9916199d119a9d61c4edce54d8af7e85c4b99","2003-07-30 20:01:26+00:00","now how did that happen...

svn-id: r9303
"
"1a70fe4413f5835617d214926a63fe623d8cfdaa","2003-07-30 20:26:59+00:00","version 0.5.3cvs

svn-id: r9304
"
"f64a8793f36e101a923f4648b77ffb68f03bd369","2003-07-30 21:37:53+00:00","update vc7 files

svn-id: r9305
"
"12f9de02b49160714080580037bd6d24456b6565","2003-07-30 21:44:43+00:00","Merged fixes from branch-0-5-0:

* Max's 'adjustment' was incomplete, fixed.
* Initialize shake_pos to 0 (fixes Sky, which never sets the shake_pos).
* Changed sematics of X button to allow boxing in Indy (I hope...)

svn-id: r9307
"
"66635b5e97e6e93cb805154681aa1ac56041bf03","2003-07-30 21:54:50+00:00","disable conversion type warnings for vc

svn-id: r9309
"
"efc32d9dbc8408ed2f59da8c2fc268f45b14f305","2003-07-30 22:04:31+00:00","disable empty statement warnings for vc

svn-id: r9310
"
"b9f227bb90880223e5c41856fac7ad74aae2533e","2003-07-30 22:55:18+00:00","moved turn off warnings into vc7 project files. someone must also update vc6

svn-id: r9311
"
"5225597d85089935eb25ed57c0e8d7d94681ad68","2003-07-31 01:06:01+00:00","cleanup

svn-id: r9312
"
"9b2d4f92aab4ecf52afd49865a3b7efa879391b8","2003-07-31 01:21:38+00:00","removed the AudioInputStream::size method -> only eof() is really needed, and this can be implemented more efficiently stand-alone; implemented MP3InputStream (work in progress)

svn-id: r9313
"
"f74197ce8b777422aabad0302292fc043b47e3d5","2003-07-31 01:36:24+00:00","make use of the new MP3InputStream in ChannelMP3CDMusic - but disabled by default, because it is still quite buggy (e.g. crashes at end of stream etc)

svn-id: r9314
"
"847c7025009c3fb394d5177dda453d97aca13295","2003-07-31 01:57:05+00:00","deactivated loading/(auto-)saving at places where it's not allowed

svn-id: r9315
"
"fc5d38ec50aca76ca4346934330b200f062e305d","2003-07-31 01:59:31+00:00","Small cleanup

svn-id: r9316
"
"e5343ac0384513afc81229a27112953e317396e7","2003-07-31 02:08:00+00:00","applied slightly modified patch #772112 (BASS: Correcting (?) the LINC terminal font)

svn-id: r9317
"
"c9f060573f0d6ffbc1ad32ada2d64e353b13a16e","2003-07-31 02:09:24+00:00","cleaned up autoroute code

svn-id: r9318
"
"e52e1fbfd0727aa0fb942c4df07428d70044579f","2003-07-31 06:44:47+00:00","Changed DISABLE_BS2 to DISABLE_SWORD2

svn-id: r9319
"
"c5de74558008f1b33c6f3a73f306d5d0950aa10d","2003-07-31 06:47:05+00:00","Disabled unknown pragma warning in MSVC-6.

svn-id: r9320
"
"7c16006cc7f2aa7a9a464207db6b023db6966af4","2003-07-31 06:50:13+00:00","Fix for RC bug [780675] MI2: Reoccuring crash

Tightened up OOB track selection handling in
MidiParser. Apparently some SMFs in the Mac
version of MI2 (and other games?) specify
track -1 in their jump commands to indicate
a jump within the same track.

svn-id: r9321
"
"a8b5e40c2bd3ae582545415b8c1843eb4b1642ba","2003-07-31 08:06:40+00:00","remove unused variable

svn-id: r9322
"
"50c3369dddb647fdc1397d9be540bcde28002aaa","2003-07-31 10:21:00+00:00","Correct name

svn-id: r9324
"
"f7ee6d2ce10fb215067ee1a32d4cb124aaa881af","2003-07-31 12:10:13+00:00","use #define instead of enum here because that makes ccache more effective when changing sample rates

svn-id: r9326
"
"1b52e9f19cec1693dc9331b0d503aff07f507427","2003-07-31 12:33:33+00:00","added new header file backends/intern.h; removed some stuff from common/system.h which is either only of interest to backends or code instantiating a backend (->backends/intern.h); also removed fmopl specific enums (->sound/fmopl.h)

svn-id: r9327
"
"6822552a1080dc0f43bbe78e3fadef257bf09672","2003-07-31 14:51:02+00:00","slightly changed version of erik's implmentation of FadeServer

svn-id: r9328
"
"b11c3a6c0bfd75a4716e1ac17b355d3edcb2f705","2003-07-31 15:24:23+00:00","remove bs2 specific osystem var

svn-id: r9330
"
"636b8458b330d52339efd3081dd4843a0976aa81","2003-07-31 15:32:57+00:00","Forward-port ZakV2 hacks from 0.5.0 branch

svn-id: r9332
"
"bb8d0361e7bc0e2208f9cd309c1954228c84edc8","2003-07-31 17:24:51+00:00","More LINC terminal font adjustments: Patch the 'j' character for all
versions, and make the '1' a bit wider so that menus line up nicely.

svn-id: r9336
"
"e5e117006aa762cb485b493f505fe9e742536cea","2003-07-31 18:35:01+00:00","back disable warnings into stdafx.h, vc6 is lack of warnings support

svn-id: r9337
"
"53c65e37d52a8b86ac35fd151e1c98a67777013d","2003-07-31 18:37:37+00:00","update vc7 files

svn-id: r9338
"
"ef9bf10ffb7754ebd842abf7d7db7e7ce9e05fc3","2003-07-31 18:41:05+00:00","fix for bug #780989 (make distclean left some .deps dirs)

svn-id: r9339
"
"c3c39a33c3ca25fdea36dd52319ff9b0cdfa8e47","2003-07-31 18:46:31+00:00","cleanup for some comments & indention

svn-id: r9341
"
"1bcdcffc7d6defa280f4c0d6a08e8cab1ebe2078","2003-07-31 18:55:29+00:00","spelling (bug #781028)

svn-id: r9342
"
"16425977b75b1128bae917f22ca9cec9720fc863","2003-07-31 19:08:57+00:00","icur was not being saved between rate conversion calls

svn-id: r9344
"
"d8494d658b25d65eee1856d127a8ad5e20155bbe","2003-07-31 19:32:38+00:00","fixed MP3InputStream, now seems to work properly (kind of a surprise)

svn-id: r9345
"
"0b4e48b59e18865ddd7785594def2aba872a0258","2003-07-31 20:24:10+00:00","revamped MP3/Vorbis CD 'emulation' code to use a PlayingSoundHandle -> this allows to finally get rid of the hackish isChannelActive/isChannelUsed methods in SoundMixer

svn-id: r9346
"
"643e88b04c8acb2fb6cd7fed4749ecc520b2cd7d","2003-07-31 20:28:11+00:00","get rid of BUGGY_NEW_MP3_PLAYER

svn-id: r9347
"
"86af2b1e29a8c9415a1fa08e7ef67784003c2617","2003-07-31 20:30:55+00:00","never include headers in other headers if you can avoid it -> this cuts down on the number of files that have to be recompiled when a header is modified

svn-id: r9348
"
"9702826aa016728f8b928aa05f01274da75d1d6d","2003-07-31 21:26:27+00:00","added patched messages for BASS's mistranslations.
(also fixed bug about italian menu glitch)

svn-id: r9349
"
"7240c7df183f40c3d0eb7f78018c89a6d13c35ca","2003-07-31 22:57:04+00:00","added support for FT mac demo

svn-id: r9351
"
"64e14fd4ed93b7c4851d956cadb0bb21e09e3ac9","2003-08-01 00:15:05+00:00","changed loading & saving code to fix the bug discribed in the general forum. This bug applies to all platforms, it just seems to cause a crash only on Mac OS X.

svn-id: r9352
"
"b9cf579491cc7b13204b196428527047001ca685","2003-08-01 01:01:28+00:00","more descriptive title for mac ft demo

svn-id: r9353
"
"053d12ef2915c29f833d416df7f5064b4382eb14","2003-08-01 04:42:56+00:00","Small cleanup

svn-id: r9354
"
"a15dab5fb87d105dc35379dc88083f48ed0fee46","2003-08-01 05:41:07+00:00","This should be Microsoft Visual C++ only

svn-id: r9355
"
"479bc9645f9fc2a550df0b836089215b258d1d2d","2003-08-01 05:44:18+00:00","Ooops

svn-id: r9356
"
"c7f4a6ee141add46addf9d2c633675c6d0130bc1","2003-08-01 07:56:16+00:00","vc update from aquadran

svn-id: r9357
"
"64aa3229ad5757d88553531f8c88198711994ac3","2003-08-01 09:17:16+00:00","fix for endline

svn-id: r9358
"
"0df319e9520aa6fdcaff96f91826ccd7cff2c14a","2003-08-01 12:21:04+00:00","#include cleanup (explicityl specify the location for headers from common/, so that we at some point can get rid of -Icommon; exception is made for stdafx.h, since a) we might want to rename it and b) might want to move it to the top level)

svn-id: r9359
"
"d9bd77032a9f70ca34dbd917224dcc9bc37cfa0c","2003-08-01 12:49:24+00:00","implemented raw sound looping; some debug output enabled temporarily

svn-id: r9360
"
"4a2a1fcdd05982c3d4a2ca79e7ea0d8155c8285d","2003-08-01 12:50:19+00:00","enable partial looping: However this is *completely* untested since I have no clue where this feature is used, so i can't test it... if somebody tells me where this occurs, I can fix it, if it's not working already

svn-id: r9361
"
"672ebaf867d4d1401d352fd6be249b3d4f935b30","2003-08-01 13:01:46+00:00","added an explicity CFBundleIdentifier

svn-id: r9362
"
"04cd9d8375100efb062c925937282818a82fa1d7","2003-08-01 13:16:23+00:00","mingw compile broken when include order was changed

svn-id: r9363
"
"35dbf2fe3a74724f88f1230a2424a784922a5bb1","2003-08-01 14:21:19+00:00","This should be Microsoft Visual C++ only

svn-id: r9364
"
"bc7a43dc41c41e252bf3c7fee0d2e62afe54c04a","2003-08-01 14:46:56+00:00","Add config file format documentation update, part of patch #750001

svn-id: r9366
"
"615203cbf56a9b6c96176b018b210c7c139acf25","2003-08-01 15:00:21+00:00","Add a few missing config file options

svn-id: r9368
"
"252b8ed4b92fe0906b1162b4155d94185987553a","2003-08-01 16:12:59+00:00","Add news/readme updates from other branch

svn-id: r9376
"
"1cfa9d90298f826e2485883ce4b90a09cd8a9329","2003-08-01 16:32:11+00:00","let the input stream handle the looping (by pretending to be of infinite size -> this fixes a problem which cause 'gaps' at loop turn-over points)

svn-id: r9379
"
"818de721247ffe5ce19a7b844777a9bd84aebdf6","2003-08-01 17:47:11+00:00","don't use tabs!

svn-id: r9382
"
"deb7d22a08c6a265b7ffc50b555d170674606459","2003-08-01 17:51:26+00:00","some tweaks

svn-id: r9383
"
"7c2713f57a53748b67934d42f70ff34f55d496c3","2003-08-01 20:39:16+00:00","indention fix (so the code adheres to our indention rules)

svn-id: r9384
"
"e972ecf600f62874130a6e09becc1f1e3fea5c2d","2003-08-01 21:29:46+00:00","updated .spec file by wjp; in particular, disable mad and enable vorbis by default (since RH9 doesn't ship with MAD); also correct the format of the changelog to be valid, and update the package descriptions

svn-id: r9385
"
"81b122e04b5c0ab514d9c20482e06d51bc6e3bcf","2003-08-01 22:12:50+00:00","The (long) WinCE FAQ has arrived ...

svn-id: r9388
"
"208a3925e90999e7bd28b53571e27e1b7a1a36cb","2003-08-02 00:29:53+00:00","disable debug output

svn-id: r9390
"
"103112dd3da9e9b8ee0610d4cc6dc4a8320f2b98","2003-08-02 00:36:38+00:00","removed OSystem::set_mouse_pos (I hope I didn't break any backends, but if I did it should be trivial to get them working again)

svn-id: r9391
"
"6da96e17c0478090b67b28ef0883486fe27ace80","2003-08-02 02:11:15+00:00","fix Vorbis music volume

svn-id: r9392
"
"02d061598c1a808264ba732fbda8631644cce88f","2003-08-02 02:12:26+00:00","fix ChannelMP3CDMusic volume, too :-)

svn-id: r9393
"
"a932a74dcb8185bc0ddb8edbe98d6c64eb1a8f97","2003-08-02 02:31:36+00:00","patch #781530 Initial work on StreamCompMusic() by erik

svn-id: r9394
"
"1f58fea23290eede7b3ae54e1b1eab4b3eb72b6f","2003-08-02 02:41:31+00:00","converted ChannelMP3 to use new rate conversion scheme, too. Only thing missing now is FLAG_REVERSE_STEREO support (and of course fixing regressions, and the long term goal is to make resample.cpp usable, too)

svn-id: r9395
"
"326379b95e3c4a4708b7c3f28178ed1853225599","2003-08-02 02:54:56+00:00","oops

svn-id: r9396
"
"471bc5ceb5cb57ec12024d577ada641a890f83ee","2003-08-02 07:00:58+00:00","Improved hebrew support, thanks to Jamieson

svn-id: r9397
"
"0b2bd31010826a32faa129c532b31d19dd167b38","2003-08-02 07:10:30+00:00","Hebrew support for load/save dialog

svn-id: r9398
"
"93482ae5c6d17dd8f3257be86b589bcd724ff887","2003-08-02 09:21:34+00:00","automatically use gcc 3.x specific dependency rules if using gcc 3.x, enable some additional warnings in Makefile.new

svn-id: r9399
"
"29247636f696e547e424f5c2d632155f785d3c0d","2003-08-02 10:09:05+00:00","Add combined speech/subtitles support for simon2 hebrew

svn-id: r9400
"
"40c3f25cd70e452a6a85e121a67112ec23d58e98","2003-08-02 10:15:07+00:00","Add combined speech/subtitles support for simon2 hebrew

svn-id: r9401
"
"ec676d1581aa5a863b7b3c7b7e435aa9f0259f74","2003-08-02 10:42:54+00:00","My last commit caused regression

svn-id: r9402
"
"a4ac513247d1df859037ee7d3709e231186cf6b3","2003-08-02 10:47:35+00:00","I think this fixes bug #780167 ('SIMON1/2: Sound problems'). When
st_rate_flow() had filled the output buffer, rate->icur and rate->ilast
held the same values, which led to some samples being duplicated on the
next call.

svn-id: r9403
"
"03f6ec8a8a3f26167c52819f8f7a2089071734da","2003-08-02 10:48:30+00:00","Always check for null string

svn-id: r9404
"
"8762b47a11dd564543429dfb9940982e4e9e8e5a","2003-08-02 11:04:29+00:00","Make code match

svn-id: r9405
"
"47f0abec39db29aa41ea25a84fb03b8d16548daf","2003-08-02 11:17:11+00:00","GCC3 mode and distclean target were broken

svn-id: r9406
"
"36d72879600e43a887546d155c444815007afdfc","2003-08-02 11:17:59+00:00","double broken in fact

svn-id: r9407
"
"d00a9923ccaba90469cd5abb50dc342f48199bd0","2003-08-02 11:38:23+00:00","previous mod was techincally incorrect, this one should be better (but might still be buggy?)

svn-id: r9408
"
"c57f11f09f7ae7642d7145845bfdc9296c49cba7","2003-08-02 11:42:53+00:00","garhg

svn-id: r9409
"
"ca0cc3b5ab7bcebee7fa2fdcdcc6c8825457068d","2003-08-02 11:44:57+00:00","obsolete

svn-id: r9410
"
"9c91fb9a941dae94dc9fa039e95c9248d01ba753","2003-08-02 14:16:31+00:00","Typo

svn-id: r9411
"
"e894c9c4971fd7e227cbc4239bcc1e503278e553","2003-08-02 14:45:12+00:00","Added BASS to the hotkeys section and moved Alt-Enter to common.

svn-id: r9413
"
"290a730885dd0b1b5f6d24b4c679aca19e6f037e","2003-08-02 14:48:11+00:00","fix for st_rate_flow, code is more straightforward now, too

svn-id: r9414
"
"1bd9026d8ab0bf7fca1b81d8d15e22068f6cc0d3","2003-08-02 14:54:54+00:00","remove debug output

svn-id: r9415
"
"e3b64fa7578896d23db09d6d6ed952aaf70467ed","2003-08-02 16:11:12+00:00","added FLAG_REVERSE_STEREO support

svn-id: r9416
"
"0142ee260e2d4ca6e86114e09149d1ac3aeb34ea","2003-08-02 16:31:31+00:00","cleanup

svn-id: r9417
"
"d82969b3768ea8634adcb06b394cc45d38213e9f","2003-08-02 16:53:46+00:00","correct sound looping, thanks to our new mixer. :)

svn-id: r9418
"
"4cc8c70f25731ab22bc50baecfe47b031a4638c6","2003-08-02 17:22:52+00:00","optimize code flow a little

svn-id: r9419
"
"cc8465aa71188e710b443a776c7cc595ade8457a","2003-08-02 17:27:17+00:00","don't use asserts in these tight spots

svn-id: r9420
"
"bf453ea219accd66d8d27143868cf80498cfa3d9","2003-08-02 18:01:43+00:00","fix compile with vc7

svn-id: r9421
"
"c373ca107d1f1d809e3c655a7245c185eb2e08f3","2003-08-02 18:13:37+00:00","slightly optimized MP3InputStream::eof, and some cleanup

svn-id: r9422
"
"20ba0865117ed865bc92a0e1e633dfc10c431587","2003-08-02 18:29:52+00:00","slightly cut down on the number of times eof() is called

svn-id: r9423
"
"7ec38f5f02ebd44332b34e059d209165fa68fa14","2003-08-02 19:09:52+00:00","some more tweaks

svn-id: r9424
"
"ada236a63b0b6dc5f2490526ff70b4278ba82f6b","2003-08-02 19:17:54+00:00","one addition less

svn-id: r9425
"
"83450bef27037c2b1dacbdca1b798304b37226fa","2003-08-02 19:37:00+00:00","fix autoroute return codes.

svn-id: r9426
"
"32ad85807a7fa3ca810c7b74052de55ddd647750","2003-08-02 19:55:17+00:00","Removed introimg.cpp. Apparently Foster's don't want to be associated with
gap-toothed doddering old fools, so we should just go with whatever image
is in the game data files.

svn-id: r9427
"
"b2d8522b11dc03a89e06fb61e74c8105f14d12cf","2003-08-03 14:25:01+00:00","Ignore bs2 builddir.

svn-id: r9428
"
"3e42d8972f510a75e82929079c54178a55505efc","2003-08-03 14:28:58+00:00","GCC bug workaround... (merge from branch-0-5-0)

svn-id: r9429
"
"4b8ecff9b80bd7df018c650bc4ff2642cfd1e77b","2003-08-03 14:35:17+00:00","Add 0.5.0 release date

svn-id: r9430
"
"fa45a69614ed3cbe476b45cc2ab16d2bb65ec21f","2003-08-03 14:49:10+00:00","Added GCC bugtracking id to workaround for future reference.

svn-id: r9431
"
"c3c9fac55bab535010c6857b8e8e0587d4d2348f","2003-08-03 15:38:27+00:00","Don't use level 1 I/O, it's not part of the C++ standard...

svn-id: r9432
"
"a78508af332748ebaa434f41c61837ff4abec359","2003-08-03 15:45:09+00:00","On second thought, WAVE_FORMAT_PCM probably means uncompressed WAV-data
after all, or at least not ADPCM-compressed. Updated the comments, but I
still don't know how to play it.

svn-id: r9433
"
"3e3366f52122d8bb49ab1f5f138019b942659af5","2003-08-03 15:50:39+00:00","Added 'fast mode' (Ctrl-F/Ctrl-G) like the one we have for SCUMM and Simon.
It does not change the game speed setting, because the most likely use (I
think) is to toggle it on briefly, e.g. while travelling the walkways.

svn-id: r9434
"
"6e8fb1701da859a71a327794e233d8d046821933","2003-08-03 16:07:54+00:00","update dsp files

svn-id: r9435
"
"3b5d44ff511f18b22314e980eaa26ea8391cc791","2003-08-03 16:37:00+00:00","Detect Simon.

svn-id: r9436
"
"0ca4df05b82ff373cf4e8352ca61da8ab855ed6c","2003-08-03 16:49:33+00:00","More const.

svn-id: r9437
"
"d6937ec256d3bc0457e83bf40889f65463a52b81","2003-08-03 17:16:32+00:00","new compact data

svn-id: r9438
"
"31a143dcd48601509e11806c00c443edd1f26b6f","2003-08-03 17:17:24+00:00","new compacts, new loading + saving code (not compatible to old one)

svn-id: r9439
"
"ac2c77f60146b2fa781e4df681cf7d2201a85000","2003-08-03 17:59:45+00:00","More complete keymap.

svn-id: r9440
"
"ffa32a2eca7f2af68bc89cdd9027f3ee6d75b6c4","2003-08-03 18:23:54+00:00","o5_getStringWidth was missing getResultPos() (thanks to _Q for pointing this out)

svn-id: r9441
"
"79a4972698247479a428800fdb2e9faf02573eb7","2003-08-03 18:26:46+00:00","removed obsolete warning

svn-id: r9442
"
"f18627bfd516f3417d247c7fc80c5430db14a63b","2003-08-03 18:34:46+00:00","fix warning

svn-id: r9443
"
"b63088268357882625fe5fa767f687f3202af72b","2003-08-03 19:28:39+00:00","Add Hebrew support for spoken text
Thanks to Jamieson

svn-id: r9444
"
"5a9fe8212129b1ba46127cdd5cc6ad75fcbb4812","2003-08-03 22:51:22+00:00","fix for bug #782132 (MI1: -e null doesn't work)

svn-id: r9445
"
"00861f884141e73a024d1cac57e25c0f16115bd2","2003-08-03 23:34:04+00:00","fix for bug #781903 (ALL: jerky cursor movement regression)

svn-id: r9446
"
"7e3d4b34f2e338f2f3fb8019a820d16547130179","2003-08-04 01:16:11+00:00","fixed dialog skipping

svn-id: r9447
"
"99cb3d571568253b679325d76940d69e7a943fd1","2003-08-04 05:19:08+00:00","Add instructions for simon2mp3

svn-id: r9448
"
"454c92a1d7f1c6484bd58edaf7534b9c92d8ad72","2003-08-04 05:20:09+00:00","Typo

svn-id: r9449
"
"486c1c77e167fbca1e73a0717ade76fa61df45c0","2003-08-04 06:01:08+00:00","Remove line

svn-id: r9452
"
"8bff9b4a22ab095392e919077fb81da010c7da19","2003-08-04 11:43:20+00:00","fix typo

svn-id: r9454
"
"c4cb283d4d033cdbe3b5bd41d44e78de01ba9c0d","2003-08-04 12:07:07+00:00","more fixes from marticus

svn-id: r9456
"
"6d70a2a3c1e687dbdd767ede2ef5b4ac16c0e1fc","2003-08-04 12:42:40+00:00","fix lines exceeding 80 chars in usage help

svn-id: r9458
"
"f38dc3ed4571995db3370afb35bf4f07870fed13","2003-08-04 13:35:09+00:00","ditto

svn-id: r9461
"
"b46aaa690184d1092b4553f668cafc9ab99c9218","2003-08-04 14:18:16+00:00","limit to 80 char again after last change...

svn-id: r9462
"
"996d4f1391f84328e1928d43d9fe08aadbae7893","2003-08-04 16:28:41+00:00","fixed EOF handling of MP3 streams (subtract time from duration timer, instead of adding it...)

svn-id: r9464
"
"679e818b0b401163b8e257be4b9b30a809e204e9","2003-08-04 16:50:26+00:00","oops, accidentally commited this one

svn-id: r9465
"
"d280258e09fccc1ac3c72569a28e4cb69afef488","2003-08-04 22:15:16+00:00","renamed eof -> eos (end of stream); hid MP3/Vorbis stream classes completly (by providing factory methods); new readBuffer method for AudioInputStream for improved speed of the mixer; new MusicStream class (subclassed for MP3/Vorbis sound) which offers a getRate method; some other tweaks

svn-id: r9467
"
"97c31509241dff1ddc1b99a2d25d5538ef59c695","2003-08-04 22:25:51+00:00","while this fixed a problem with sdl_gl on OS X, it causes annoying problems with fullscreen mode with the regular SDL backend on OS X -> disabling it (plus I couldn't reproduce this segfault with the GL backend anymore, too)

svn-id: r9468
"
"8850f858bc8ceb86b84f75602241aad886e8173d","2003-08-04 22:49:29+00:00","not really sure if using readBuffer would give any gain in CopyRateConverter

svn-id: r9470
"
"e1ff91ea7d64a656767770a1c52d6d5eaebe398f","2003-08-05 00:29:37+00:00","get rid of calls to the obsolete AudioInputStream::size method

svn-id: r9471
"
"b96e5501e669dc7e781a780ac810963d08131477","2003-08-05 00:31:00+00:00","catch one potential problem, namely if eos is already reached when readBuffer is called ('This should never happen anyway', famous last words)

svn-id: r9472
"
"b1d3b7ab99e2b504284109c5a0ef1c0c35914706","2003-08-05 00:50:15+00:00","optimized WrappedMemoryStream::readBuffer (It's almost 3 AM, so I don't trust myself, hence I'll leave this as an #ifdef for now :-)

svn-id: r9473
"
"154ca4f2cf071615411776957e03dc627d4b19ff","2003-08-05 00:53:25+00:00","simplified code a bit

svn-id: r9474
"
"1de064ee2c5ac3620f47a256ec03966aae71625c","2003-08-05 01:14:27+00:00","optimized MP3InputStream::readBuffer (once more, I won't gurantee for correctness although it seems to work fine over here)

svn-id: r9475
"
"74188e6143c06beb2f1a08f47750ffc529652dcb","2003-08-05 01:22:09+00:00","and finally VorbisInputStream::readBuffer. Once we verified the new readBuffer methods all work, we can get rid of readIntern again and merge those back into the regular read() methods

svn-id: r9476
"
"ded1df35f95f5aa9ec54a062725a2a9fe692d6f5","2003-08-05 01:41:29+00:00","cleanup; removed some code duplication

svn-id: r9477
"
"2bc604081e4ef7ac8cf39cdde3a89dd494fbb6e1","2003-08-05 01:47:47+00:00","some more cleanup

svn-id: r9478
"
"1eaf41eda40f1777a5e99c19a027ea025cbaeb4c","2003-08-05 02:05:37+00:00","more cleanup (like the previous two, I just moved around code, to clearly separate the old and the new mixer code)

svn-id: r9479
"
"8bf012d966013a12e7cd0cf797b672f6593f357f","2003-08-05 05:21:57+00:00","Add adlib music improvements for indy3/monkeyega/monkeyvga and cleanups from patch #770862

svn-id: r9480
"
"0d5875c7540b4bf98c4a791cc5830b290cf21e87","2003-08-05 07:54:10+00:00","nuke old resource again

svn-id: r9481
"
"5ba31343ddcd59ecf7dd178c1e202d06c4b4253d","2003-08-05 11:19:59+00:00","Humongous Games should use native midi drivers if available, since music resources are MIDI type.

svn-id: r9483
"
"4c4aa4e95744ad90f47874d03b090bbb6cda78c8","2003-08-05 11:30:13+00:00","fix bug #783423

svn-id: r9484
"
"c120fecf0405ca01290a334cc7454fee6c639381","2003-08-05 12:23:26+00:00","fixed VAR_TALKSTOP_KEY for V7 games (descumm6.cpp had it right all the time :-)

svn-id: r9486
"
"87ea0f91955253784c6fb023566a392fb9c653ef","2003-08-05 12:25:24+00:00","removed obsolete FIXME

svn-id: r9488
"
"fb761bd894515cbb13140bb846ff38d9e5ec44c1","2003-08-05 12:39:35+00:00","stdafx.h should always be first

svn-id: r9490
"
"318a6dc4083ad0b749c16eed25a2522a620d1ab6","2003-08-05 12:43:03+00:00","Rvert this non-smallheader adlib change

svn-id: r9491
"
"b11a1cd20fc8d2d6330ae28d3522bd110c836c1c","2003-08-05 15:21:50+00:00","This sam and max demo includes midi tracks

svn-id: r9499
"
"e85cf7dae72cae0a4f2d61904156a1625eb0c272","2003-08-05 15:52:53+00:00","Revert

svn-id: r9500
"
"173e3c5db36eb2ae56dd31ec49b2fac955920816","2003-08-05 16:43:33+00:00","V1 preposition support, but broken.

svn-id: r9502
"
"7cbb06c4a60aeb1bbfe0b593b13c3228160da71b","2003-08-05 16:48:56+00:00","Forgot some V1 prep code

svn-id: r9503
"
"10508d4d2bfeff8baa9615596521a1c1a2c44d07","2003-08-05 16:51:40+00:00","fix warning / whitespace

svn-id: r9504
"
"386b8216dff090609d79f7adbddc727132c60d04","2003-08-05 16:57:47+00:00","Make prepositions work

svn-id: r9505
"
"0d2a3e5e7ea791ca2dad02e968cffcc259aa6857","2003-08-05 17:39:06+00:00","F10 key works in simon1, although it highlights exits

svn-id: r9506
"
"034e2bdb09be31f69cd2e8f77c0c68905325e64e","2003-08-05 17:41:04+00:00","F10 key works in simon1

svn-id: r9507
"
"2e6865b8a3ba6397949ffb10604370736e7e9999","2003-08-05 17:42:23+00:00","oops

svn-id: r9508
"
"59bd4cb49316021a515df32ac4337f5ccad506bd","2003-08-05 17:50:06+00:00","cleanup

svn-id: r9509
"
"4ae47a74bf2c1e79b182ea0301b0bbdd6170e60e","2003-08-05 17:52:47+00:00","added support for output sample rates > 32767 (still limited to a max of 65535, but all we care about are 44100 and 48000 anyway)

svn-id: r9510
"
"995ec987d0f8a9b152b8c5880ffe36dfbb602f2d","2003-08-05 17:58:38+00:00","fix warning, cleanup code

svn-id: r9511
"
"79fd7ee44117f762b4253bc0e9521c38cdafbb08","2003-08-05 18:12:59+00:00","cleanup

svn-id: r9512
"
"7ff88ea392f430ccc78fdd0503136d8ed1aac036","2003-08-05 18:17:26+00:00","more cleanup

svn-id: r9513
"
"c99f6980c70ea60f5aba8f45a0384059f24deabc","2003-08-05 18:18:26+00:00","Hotfixes ...

svn-id: r9514
"
"e738b64bb1d693b0eb433d545cc985e141c7bae7","2003-08-05 19:23:26+00:00","fix for debugger tab completion (thanks wjp)

svn-id: r9515
"
"05eb891492edd549f840adfac308793a7767516e","2003-08-05 19:43:04+00:00","another tab completion fix by wjp

svn-id: r9517
"
"d618ace0c0551c06485ef3f68b5bd583f131d6ad","2003-08-05 21:46:56+00:00","begone, old mixer code

svn-id: r9521
"
"d2c489123ad3e98aa0347f4f347beed837d25006","2003-08-05 22:54:13+00:00","Update right click stuff

svn-id: r9523
"
"48d1739e0ad5e3dfadb2850188248e9fa679c1e9","2003-08-05 23:03:42+00:00","some cleanup; added Channel::getVolume, once somebody tells me what exactly is needed, I can add per-channel volume, and also per-channel panning

svn-id: r9525
"
"c431e229b3279bcb73de15dcdb32422b14162d65","2003-08-05 23:57:37+00:00","removing whitespace

svn-id: r9526
"
"75db41750ef0ae4ad3d2b86f016fe21f67160fc4","2003-08-05 23:58:24+00:00","getting rid of g_mixer; removing lots of whitespace

svn-id: r9527
"
"77d3e9333be2570c808aa8d6fed71bca6fd3b9df","2003-08-06 00:19:20+00:00","must create adlib driver *after* calling _mixer->bindToSystem

svn-id: r9528
"
"0c3c6094420787c4f4cbd86a0ebe41c2ade838ee","2003-08-06 00:28:00+00:00","get rid of some g_system usage

svn-id: r9529
"
"43a1d35064d048895edf6211831e700b8f79a118","2003-08-06 05:47:49+00:00","Reverted too much
Add note about missing code in simon

svn-id: r9531
"
"adbb25cdc1be727eacab42428df1dbb63a036168","2003-08-06 07:58:34+00:00","snmidemo is adlin resources only, other than intro.
snmdemo is midi resources only, double checked

svn-id: r9535
"
"7061819cb8bcfe44cbe1eb19aec109479d0bbf39","2003-08-06 08:07:01+00:00","correct version string

svn-id: r9537
"
"56414ea73d187eb77e0222483ba91ff6a1a318c2","2003-08-06 08:29:46+00:00","Added --demo-mode option

svn-id: r9538
"
"a3629f37cfdf116478bbeda348a17ca8d1018957","2003-08-06 08:31:36+00:00","Disable SWORD2

svn-id: r9539
"
"dc166df2ba099a65d448c266afed590847607dc7","2003-08-06 08:33:38+00:00","Get rid of the bad onehalf array (thx to Mark Fechtner)

svn-id: r9540
"
"249982f721e1baa27e562c33232bdb1857070964","2003-08-06 08:36:33+00:00","Added --demo-mode option

svn-id: r9542
"
"789628bb18d60f09305f976b84a9564b01532b4b","2003-08-06 08:37:52+00:00","Changed

svn-id: r9543
"
"8b3ac82f358e7066070f0f19a2118fd9fc0bdd08","2003-08-06 08:55:23+00:00","update man page a bit, we should probably have another one for the config file at some point as well

svn-id: r9544
"
"e4e9538038a59cb2d47c61fcfb762d02b2abfb8c","2003-08-06 09:10:19+00:00","Add GF_INDY3 feature flag for indy3 games to reduce checks
Remove GF_ADLIB_DEFAULT since it is no longer used

svn-id: r9546
"
"5dd4d3e8e448c430bb581f4097acd3016f1a41f4","2003-08-06 09:30:48+00:00","Add GF_LOOM feature flag for loom games to reduce checks.
Will make it easier to add loom fm towns target in future.

svn-id: r9547
"
"de277d746c51a647fd4af31052bb1412a5e95b76","2003-08-06 09:35:56+00:00","Remove unneeded double brackets

svn-id: r9548
"
"7e2ff83e70e8c003c875c9ddd728ff9770dce92b","2003-08-06 10:06:19+00:00","Fix #783732 : freeze on Pocket PC

svn-id: r9550
"
"1a0d308e041d563e4fa4cfa57392ea0e306fe92f","2003-08-06 11:53:18+00:00","Fixed type mismatch error compiling palmos port

svn-id: r9552
"
"845a3c5f6e7d98ee223be5703aa0312d7b37ee2e","2003-08-06 11:54:05+00:00","Added .ini parameters

svn-id: r9553
"
"3e0cd37cea291a06b510228b4c26cf40db80140f","2003-08-06 12:04:27+00:00","get rid of GF_INDY3 again, and also remove GID_INDY3_256 and GID_INDY3_TOWNS

svn-id: r9554
"
"002f5262e388b9843abef09dcf2ac19c420099e0","2003-08-06 12:11:10+00:00","remove obsolete warning for non-22050 Vorbis files

svn-id: r9555
"
"32107ae69a6f4d8ab55a1ba801a721ee0c838de8","2003-08-06 12:28:06+00:00","sync with 0.5.0 branch

svn-id: r9559
"
"69ee268e7fc0c335962bbc65be9e13f932636429","2003-08-06 17:13:04+00:00","some cleanup

svn-id: r9575
"
"7453cabbbc5aa645f1f8d5b0d825920d61870826","2003-08-06 17:47:29+00:00","Fix for Bug [780918] SAM: Music stops at Bumpusville

Tweaked handling of ImSetTrigger when the triggered
command starts a new song. If the song to be started
is already playing, we stop it (in preparation for
a restart) ONLY if the song containing the command
trigger is actually playing. Otherwise the restart
is likely to never occur (as is the case with the
Bumpusville mansion interior music).

svn-id: r9576
"
"92b06a493c20a8b97571434c68332e2a20c5b95d","2003-08-06 17:51:39+00:00","Tweaked debugger output to avoid wrapping, esp.
in the case of tabular output.

svn-id: r9577
"
"79a804c4014c09d5a8f5b566d8f41ad3f301c906","2003-08-06 18:01:06+00:00","Added backends/intern.h to project tree, little config tweak

svn-id: r9578
"
"1615278ecc376f7de5136e72239e86363cd96134","2003-08-06 18:20:15+00:00","Upgraded IMuse::doCommand() to support more than 8 parameters.
V6 scripts can specify up to 16 parameters to be passed to
doCommand(). In most cases 8 or fewer parameters were used,
but occasional uses of 9 or 10 parameters resulted in
incorrect iMuse behavior due to lost doCommand() data.

ImTrigger was also upgraded to support 8 parameters instead
of 4, since the incorrect behavior that was observed involved
the use of triggered commands that required more than 4
parameters. Since ImTrigger data is not currently being saved
(which is bad), we do not at this time have to go to another
savegame format to support the additional ImTrigger data
(which is good).

This fix corrects a problem in the Tunnel of Love. When the
'execution scene' music finishes and the hidden door opens,
the Tunnel of Love music is supposed to start up again. In
ScummVM, it never would, do to the loss of parameters for a
trigger-based 'Parameter Fade' command.

A bit of miscellaneous cleanup has also been made.

svn-id: r9579
"
"99716fc38e26112777947f9fb0606a9d09668aeb","2003-08-06 20:41:05+00:00","Changed readSample template function
to Fingolfin's new READSAMPLE macro.
Circumvents buggy template function
handling in MSVC6. Props to Fingolfin
for tracking this bug down by remote.

svn-id: r9580
"
"d8464534a5e516f13cd7d096666031cb4a12fad4","2003-08-06 20:44:42+00:00","Added comment to new macro

svn-id: r9581
"
"1c1fd05a72e0afd5706e79f9862e7744697f4a17","2003-08-06 21:07:59+00:00","Remove old tweak that can break the music when restoring now ... Chris, you should check it too :p

svn-id: r9582
"
"7d19b486709a0fe940dbb903cf65388702086106","2003-08-06 23:49:50+00:00","Fix intro timing on WinCE ... guess everybody could use it but I'll leave the engine mainteners decide :p

svn-id: r9583
"
"d910e7b06669f4ce41ac5199f83682cb43b20ba8","2003-08-07 14:33:38+00:00","In fact, Nicolas, this is no more needed :)

svn-id: r9584
"
"0d71a7db1bc6247af8c2aa2811c77ccaa510a1ce","2003-08-07 14:37:18+00:00","This seems to be no more used

svn-id: r9585
"
"88d7a918a348815a1504b4dcbe0d3b8b6eb1f07b","2003-08-07 14:52:04+00:00","No more needed ... Arisme, your turn

svn-id: r9586
"
"51c38eb3e8d10092546d51ca1cf7bdde4a387843","2003-08-07 14:57:55+00:00","Fix newline warning

svn-id: r9587
"
"f67b126f1dee9e14a28d555f10cd556f173b9e3a","2003-08-07 22:19:55+00:00","replace code in readBuffer by slightly less efficient but hopefully working code (at least it fixes an endless loop in COMI for me). I did fix the originaly bug in my optimization, and right now I clueless as to why that code isn't working as it should <sigh>. Need sleep

svn-id: r9588
"
"93c90f46744feb5bc843f8b3fb8f8cf8970fcecc","2003-08-07 23:42:15+00:00","Fix for Bug [780924] IMUSE: Pitchbend isn't reset when changing tracks

When scanning (not jumping) to a target location
in a different track, the current track is first
scanned to the end to update the player state
before starting into the new track.

Miscellaneous scan-related cleanup is included.

svn-id: r9589
"
"ac6bd10c59d08a906438978af47e538bb28cb20f","2003-08-07 23:54:39+00:00","my code was actually right. Rather the calling code is evil, it passes us odd buffer sizes for 16 bit audio data, which of course made no sense -> I added some asserts against this

svn-id: r9590
"
"9d56a50678ef9b514219990d833b07dc150ceae5","2003-08-07 23:54:59+00:00","work around odd cases with odd lens for 16 bit audio data

svn-id: r9591
"
"73eda504b99f1036ef5f36b832ca038a23e7aa4c","2003-08-08 07:06:46+00:00","Added missing break after case

svn-id: r9592
"
"4353f4531c166e8ea1e4f87b4261606ada9eca54","2003-08-08 07:23:11+00:00","Send All Notes Off to every channel on close

svn-id: r9593
"
"8281d8ad426428e35d57ebab6f688c4094706b33","2003-08-08 07:45:41+00:00","Fixed type mismatch warning

svn-id: r9594
"
"0858eed1fd756bf1f4d31d21e764fe3d79658ee0","2003-08-08 09:02:49+00:00","add ability to specify prefix for optional libraries see help for details

svn-id: r9595
"
"6d1ded6992272d96a1c487b3ab600c890cf0c615","2003-08-08 09:09:06+00:00","list -h in help text

svn-id: r9596
"
"c94a9cf8fe006b0cb6c3250e3b56daa03772709a","2003-08-08 09:10:31+00:00","fix spacing

svn-id: r9597
"
"101821015cc1bd0df096b99d5755611c72d151c5","2003-08-08 09:26:09+00:00","remove debug printf

svn-id: r9598
"
"9b297a39b1945f431877159a46e3cdad14cedee8","2003-08-08 09:27:52+00:00","Close music engine on shutdown

svn-id: r9599
"
"456124d109430a29f7ab9f76ed828b37e940c32a","2003-08-08 09:36:37+00:00","Fixed hang from double-lock of mutex

svn-id: r9600
"
"47d98f94db3a5972d4af2b1e7b973dc10700bd39","2003-08-08 09:42:38+00:00","Use shutdown() when quiting via ctrl z

svn-id: r9601
"
"0ca58111c6511e9b00be5ebeaadadfe1b8da697c","2003-08-08 09:48:42+00:00","More Simon shutdown cleanup

svn-id: r9602
"
"f1a3253fa2785901171407a0b192b7c18cf5c5b5","2003-08-08 11:32:40+00:00","remove GF_LOOM

svn-id: r9603
"
"154e872d5aa02845baf1615a86dee50636c1b92a","2003-08-08 11:54:24+00:00","Added generic send() option to MidiChannel.
This circumvents problems doing generic send()
calls to MidiDrivers that support more than
16 MIDI channels (i.e. Adlib). Because of the
way it interacts with MidiDriver, Simon could
have run into a problem if it tried to
allocate more than 15 Adlib music channels
(though this would only happen in very, VERY
rare circumstances).

Also fixed a problem with the channel
numbering scheme used by MidiDriver_Adlib,
in particular the percussion channel number.

svn-id: r9604
"
"dbc42e0fb31fe11df8f4747e18489417832cb9d9","2003-08-08 12:06:14+00:00","Revamped the GM-to-FM emulation tables.
The new tables come directly from the Adlib driver
for the original Sam & Max distro. Sam & Max using
Adlib should now sound essentially identical to
the original distro ('a few more tests'), and other
games without specific Adlib support, such as Simon,
should sound a whole lot closer to the GM tonality.
Percussion support is now comprehensive for Sam & Max
and a lot more thorough for other games.

svn-id: r9605
"
"129ae93ca6ae1a19d419b1e5893e97eb91716f20","2003-08-08 13:13:37+00:00","Lets try and keep this more updated from now on, hmm?

svn-id: r9606
"
"7f7b0af613622825deb94af72093f19fda0fe68a","2003-08-09 19:19:27+00:00","added SoundMixer::pauseChannels for pausing SFX and keeping adlib music running (needed by BASS when menu bar drops down)

svn-id: r9607
"
"3e211794a2487f286d84a6a644f96809d128a084","2003-08-09 19:20:10+00:00","makes use of SoundMixer::pauseChannels() now.

svn-id: r9608
"
"ee3b2ffbfd25d1e5ce4ef3390d1ec958d02dea95","2003-08-09 19:40:55+00:00","don't allow loading of messy 0.5.1 savegames.

svn-id: r9609
"
"5bd62413fcfaf299b3dd47e94a2f7d32bc5ed7c4","2003-08-09 23:21:17+00:00","remove echo that shouldn't have been left in

svn-id: r9610
"
"b0ad2e9da34a8cd2eb27165525289ced3c61d058","2003-08-09 23:52:05+00:00","make use of env vars when doing checks

svn-id: r9611
"
"4f228c71904185ed4180b4224a2c6e8e705cf489","2003-08-10 00:44:03+00:00","stop if we find a configure option we don't know about, add --enable-debug option which currently only adds -g

svn-id: r9612
"
"cb1015730fd1195263a1d7adecf29d5c088c53e2","2003-08-10 06:10:07+00:00","remap F1 to F5 for comi so people don't get the broken in game menu

svn-id: r9613
"
"063d05f9c80bc95e44f38f78affed4eb4db55861","2003-08-10 06:56:53+00:00","Makefile.new -> Makefile, Makefile -> Makefile.noconf default Makefile now requires configure script

svn-id: r9614
"
"4ae8311b34b0d1c703cf7ad144c219c6105ff3dc","2003-08-10 07:16:07+00:00","update readme for configure, debian and osx section will need to be updated as well...

svn-id: r9615
"
"51648f1f08101b8a25cb357c76ce88f1570f7820","2003-08-10 07:34:58+00:00","nice friendly message about having to run configure first

svn-id: r9616
"
"e9ea6e45de5200d38468cb9fdb03d274557fb27f","2003-08-10 07:47:47+00:00","depend on configure for config.mak so we can pick up changes

svn-id: r9617
"
"8cc805121dd79fbfe7e60470bcc783eb4e625515","2003-08-10 07:52:23+00:00","Tweak a little

svn-id: r9618
"
"c2ed4c2d0ec9383e336f1e57062130487349328d","2003-08-10 07:56:05+00:00","Use debug by default for CVS trunk

svn-id: r9619
"
"831826bf48d7dd0c3830023bb944a49c6ef7706e","2003-08-10 09:45:39+00:00","most people have case sensitive filesystems

svn-id: r9620
"
"550bf93656eb0c7677751ee18ba1adaa29dad3ba","2003-08-10 11:39:17+00:00","Added imuse_panic to turn off all music players

svn-id: r9621
"
"e8d04067a08a91f8eae5a9d3178518f9f8cebc78","2003-08-10 11:44:43+00:00","Fix for Bug [785373] SAM: Overlapping music at Bigfoot convention

Included the ImDeferredCommand list when checking for
sounds that have been queued to play. Also added
sound queue processing between execution of exit script
and entry script. In the case of this bug, the entry
script required that the iMuse state be fully up to
date, including last-moment changes from the previous
exit script.

svn-id: r9622
"
"3678fd6106a25aabb94df6e3da1107a3fec2523a","2003-08-10 14:24:30+00:00","Doesn't look like these are used anymore.

svn-id: r9623
"
"5d972a657b7d9f68298563cc6914479ede875e5f","2003-08-10 15:49:06+00:00","Fix for f10 key in simon1

svn-id: r9624
"
"9d09512765bcca0a507361297aa70c8f122ce512","2003-08-10 15:58:38+00:00","Add missing code for f10 key, thanks to Jamieson
Stops multiple flashing star occuring on one character/object

svn-id: r9625
"
"a5aa5c0d73fa3c9faec0ba167cb88d3595f089e5","2003-08-10 20:49:13+00:00","Harmonized SaveFile API with File API a bit.

svn-id: r9626
"
"2ed0eee7115fc749a2cfeb7d722a4817525bbc50","2003-08-10 20:50:50+00:00","Replaced use of File with use of SaveFileManager where appropriate.

svn-id: r9627
"
"8f88764ef04151ad9f3c8709475027269e8efa31","2003-08-10 20:57:41+00:00","stdafx.h needs to be included before scummsys.h because of the #define of free.

svn-id: r9628
"
"117b7d00617f7d1d1b85840e7611d1a6e16e774c","2003-08-11 00:48:32+00:00","Fix regression

svn-id: r9629
"
"02d8fa584d831533c02b961f6bd08ead233901a7","2003-08-11 02:06:35+00:00","A nuke wasn't required after all

svn-id: r9630
"
"957185a62e5ccfdd7013b99f3baffccf01fda3b6","2003-08-11 02:31:03+00:00","this fixme doesn't apply to old bundle games using GID_INDY3 target

svn-id: r9631
"
"f3ec42c59679baba0474e86b1114955e729b36cf","2003-08-11 02:41:30+00:00","Added savefile.* to MSVC6 project

svn-id: r9632
"
"0e831751bc32a0f41448100d071b3cf8e3e1bddc","2003-08-11 03:45:12+00:00","Fix a regression, this code is required for Amiga versions!
Fixes some brief costume distortions

svn-id: r9633
"
"50ce07c3918ffe7931a9030591e34df4a880f4fe","2003-08-11 03:52:34+00:00","Fix for Bug [770364] MI2: Amiga - Segfault when entering bar
Possible fix for Bug [770085] MI2: Amiga version always crashes after a few minutes

Corrected OOB graphics writes in proc3_ami() by fixing the
mask to properly detect negative Y values. Don't know if
this is the right way to fix this -- there are enough GFX
bugs in the Amiga code as to make assessment difficult --
but at least it averts crashes.

svn-id: r9634
"
"45f3db95fd0b5163042e5f385d05fa760a000591","2003-08-11 04:33:17+00:00","Fix for Bug [777589] SIMON1: Sound volume strangeness

Fixed redundant, cumulative adjustments of _masterVolume
on the individual channel volumes. This fixes problems
with individual instruments changing volume by too much,
or dropping out altogether, when changing the master
music volume.

svn-id: r9635
"
"5a1b0ac24ac4d3c060ddc6336f39dbf05f2672ac","2003-08-11 05:25:33+00:00","More music volume management fixes

svn-id: r9636
"
"82328fa0503354f0f550bfa0ad10c393bb22cb9a","2003-08-11 06:24:19+00:00","Ooops that should only be for Amiga scumm 5 games.

svn-id: r9637
"
"5485bddc0c9af94f57de12241f0a6496501f27a7","2003-08-11 08:23:54+00:00","Missing function with new savefile.cpp

svn-id: r9638
"
"e96658506184888213587df03e4e25d1b876cb77","2003-08-11 08:25:11+00:00","Fixed compilation error introduced by Marcus ;)

svn-id: r9639
"
"37a394a660941736ca57fc4aeaef190172833854","2003-08-11 09:48:26+00:00","Fix for Bug [779013] ALL: Fullscreen and -F

Fixed behavior of command line options that
are treated as '[scummvm]' modifiers by
default. I'm not even sure if '[scummvm]'
mods still work (or require special code)
so we might be able to get rid of old code.

Also added --fullscreen and --no-fullscreen
command line options.

svn-id: r9640
"
"a52b44f3fe1cb2b8ea35889fdbc7ed49afc34e86","2003-08-11 14:48:21+00:00","Expanded iMuse debugger commands. All iMuse
commands are now under 'imuse', and underscores
have been removed.

imuse panic - Stop all music tracks
imuse multimidi on/off - Set multimidi
imuse play # - Play a sound resource
imuse play random - Play a random sound resource
imuse stop # - Stop a music resource
imuse stop all - Stop all music resources

Note that 'play #' and 'play random' only attempt
to play a sound resource. If the resource is not
a music resource or is in a format not supported by
the current music driver, it won't play.

You can use this as a mini jukebox, but be sure
you're in a room with minimal activity. The
goal is to minimize interference from the scripts
while playing sounds that are not expected in
that room.

svn-id: r9641
"
"27e65a29c6c73b8af006e8470272a0eb8e859fc3","2003-08-11 17:47:44+00:00","remove meaningless warning

svn-id: r9642
"
"bf1c300c361d9a58d7fafaabe90c9ace3cc8e96b","2003-08-12 02:08:21+00:00","Show Amiga option only for scumm games

svn-id: r9643
"
"aefdffbd2d6b60355e405dec1f24cedea78314e7","2003-08-12 04:53:35+00:00","mention what format a costume is using (ie why it is invalid)

svn-id: r9644
"
"b1f2e66e300414666de20511d4d6b5e8c798ea8f","2003-08-12 05:28:11+00:00","this makes more sense in hex

svn-id: r9645
"
"6e51f394e84333b5305aad5b9e3b176dd15c5668","2003-08-12 06:58:11+00:00","Added GM-to-MT32 program mapping. Allows
GM-only SCUMM games like Sam & Max to
play properly on an MT-32.

svn-id: r9646
"
"442c79671a25dbf3287dd64422bed2467b7f0640","2003-08-12 07:32:43+00:00","Removed unused stuff.

svn-id: r9647
"
"fef62655f85b8f0337cdce661f785e797abc637f","2003-08-12 15:40:24+00:00","Fixed the freqency of one note.  This bug is also in the original Lucas
Arts Games...

svn-id: r9648
"
"b198fbc3bb09080b10e45d97995de1a84bebf301","2003-08-12 16:09:41+00:00","Add adlib music for indy3ega/loom and adlib sfx, patch #770862

svn-id: r9649
"
"50527702134133f69d35008467cbd62e3371f857","2003-08-12 16:43:43+00:00","Allowed derefActor() and derefActorSafe() to treat actor 0 as a valid actor
since the original interpreters appear to have allowed it. This fixes bug
#786380 ('FOA - FISTS, script crash in Crete').

I do not know what the purpose of actor 0 was in the original. Either it's
a no-op, or it's used to store actor default values.

Note that in the FOA case the room-33-200 script will loop - at least with
the provided savegame - until you leave the room. However, this is quite
harmless.

svn-id: r9650
"
"62de919ca0ad6b333a4b68572fa07fd788de280d","2003-08-12 16:53:47+00:00","Update issues

svn-id: r9651
"
"de3f72c676e54c9b3d4eefa195a55a512ec9ab37","2003-08-13 01:46:48+00:00","temp. fixme for music in monkeyega/vga

svn-id: r9652
"
"936db5deccf5ee6d92f3d9d6561685fab72701eb","2003-08-13 01:59:17+00:00","Remove unused var.

svn-id: r9653
"
"603f8b8e3aa8128ffbc5c0cb32cd32b0105fedb5","2003-08-13 02:21:36+00:00","Give pass its own id

svn-id: r9654
"
"124650e0739ca5c3697ec30cfbb31e227228bade","2003-08-13 12:16:42+00:00","Remove debug code that shouldn't have been commit

svn-id: r9655
"
"fb62ba61cab0d4e2e2c0b8f4c7b44c081313f1e7","2003-08-13 14:08:21+00:00","Added PC Speaker and PCjr command line options,
in preparation for Kirben's addition of WA support
for games that already have AD tracks.

svn-id: r9656
"
"a02fe9e46e6b87a879e5800bc0b4992be2b63fbf","2003-08-13 15:29:44+00:00","I didn't realize it at first, but LINC-space uses the same character data
as the LINC terminals, so our patched characters looked very out of place
since they didn't have the black outline the other characters had.

I've fixed that, and tweaked the character data for '' slightly.

svn-id: r9657
"
"bfde325d35089c329334fb6e6e8263dbdd42136b","2003-08-13 15:34:00+00:00","Fix ALWAYS_ADLIB override of native driver selection

svn-id: r9658
"
"679bc2d2711a46258707451f6e288ef2d49c73a4","2003-08-13 15:37:28+00:00","Adds finals changes for choice of sound formats in older games.
Only works wit monkeyvga, since ScummVM has it set as version 4.
Remove some old debugging comments

svn-id: r9659
"
"89a181492daebb8a93da1f635a1c530fd3802c37","2003-08-13 15:42:04+00:00","Remove warning that shouldn't have been committed

svn-id: r9660
"
"00625da3c5ecde00514c67106e0fc2c068dc3f2d","2003-08-13 15:50:56+00:00","Ooops

svn-id: r9661
"
"eba32fbd0c06e8bd57be68e1a9d67652c95fe877","2003-08-13 16:21:35+00:00","Add fixme comment

svn-id: r9662
"
"5dd554c47a02c02b533180a3556b08ce9b014fc9","2003-08-13 16:24:35+00:00","Add 'name' lookup ability to debuggers 'actor' and 'object' commands

svn-id: r9663
"
"2973317f1dca851c20be419e92dc9bdbce8ff53d","2003-08-13 16:38:02+00:00","Fix for bug #787841 ('SAM: Crash when using retriever on Max'). For
whatever reason, o6_walkActorToObj() was trying to find the coordinates for
an object that was marked as being in the inventory.

svn-id: r9664
"
"2ad09e785739f13f4d387e4a9d723b4cef07f890","2003-08-13 17:18:31+00:00","Fix monkeyvga hang when using -epcspk/pcjr

svn-id: r9665
"
"d38a0289966e29506777d5eb2ed8901e332e4247","2003-08-13 17:38:05+00:00","More monkeyvga credits fix for -epcspk/pcjr

svn-id: r9666
"
"da249f0ffacce5c1d7254e536ef5ee13fe399271","2003-08-13 18:14:42+00:00","'make distclean' now removes config.log

svn-id: r9667
"
"0d54ac09c17bbd579f12c3f24b6136ebcf5e843a","2003-08-13 22:01:34+00:00","ZeroInputStream::readBuffer didn't have the same signature as the base class version, making VC.NET 2K3 complain

svn-id: r9668
"
"de082fc7dfe69ff9925df97dc9c5f82db26e838c","2003-08-13 22:07:11+00:00","Added common/savefile.*

svn-id: r9669
"
"0563d61106722e88b9a66b9003aa8d17f239bc52","2003-08-13 22:26:31+00:00","Explicitly stated a bit masking to please VC.NET2003 runtime small types conversion checks.

svn-id: r9670
"
"93ca5cb3aff752c452ec5ee5ae108d8cd0b6e30c","2003-08-13 22:40:57+00:00","Explicitly stated a bit masking to please VC.NET2003 runtime small types conversion checks.

svn-id: r9671
"
"830d1b702ad67793d21d311d994f9c2ec2ad543c","2003-08-13 22:43:08+00:00","Made Player::decode_sysex_bytes const-correct.

svn-id: r9672
"
"1a7bf49f34fbdfc771a5c8a69ee7f46062a7d8bd","2003-08-13 22:45:22+00:00","Made Player::decode_sysex_bytes const-correct.
Explicitly stated a bit masking to please VC.NET2003 runtime small types conversion checks.

svn-id: r9673
"
"03524d071e0ab4491165bde7277604468c58c6c1","2003-08-13 23:07:05+00:00","Explicitly stated a bit masking to please VC.NET2003 runtime small types conversion checks.

svn-id: r9674
"
"cd40c899b2da2b9f0bf857946ac74be119b90bd6","2003-08-14 02:28:19+00:00","Inital support for v1 maniac sound from Hoenicke
Had to move music init for v1/v2 games to get this working

svn-id: r9675
"
"90f77843ad0de45bfae377afab58de0cccb4c3b4","2003-08-14 02:30:54+00:00","v1 maniac sound player

svn-id: r9676
"
"53eec9269589125e8612b113bbb812858a1bd62a","2003-08-14 02:32:40+00:00","Add fixmes

svn-id: r9677
"
"fa6d96086d01b47cf53420189bc4e9f030f68b04","2003-08-14 02:52:52+00:00","Remove debug stuff that shouldn't have been commited

svn-id: r9678
"
"69d8fc567353c9599b2c43356def41618d7b1c84","2003-08-14 05:07:02+00:00","Added player_v1 to MSVC6 project

svn-id: r9679
"
"17be1ad7d5aaba3b8b3019e8970b9b9d6d4fdf11","2003-08-14 05:07:31+00:00","Removed incorrect acknowledgements (copy/paste error)

svn-id: r9680
"
"1e8e59c2b26f478e39ce80641a91bc2a68fa5b41","2003-08-14 05:59:55+00:00","update vc7 file

svn-id: r9681
"
"8781f5e6f6671fe07a6898dac34eb18370be2072","2003-08-14 06:28:54+00:00","Add RO sound reosurce detection to small_header games

svn-id: r9682
"
"a0c71ef5e9047dcb2d7b67dabc35b9fc9479b33b","2003-08-14 08:24:13+00:00","Added music parser for special format of
old-style MT-32 'RO' resources.

svn-id: r9683
"
"3a39c653affe169958b3ba303e5826fe6cea774a","2003-08-14 08:26:59+00:00","Added support for Roland MT-32 music tracks
in monkeyvga/ega. Tested in monkeyvga, but
not in monkeyega yet. There are still wrinkles
to work out, but the parser for the new format
is in and hooked up.

svn-id: r9684
"
"c022f020f1dfa677f1d7d70ac1157b2e7d2c4c90","2003-08-14 08:37:28+00:00","Added RO music parser

svn-id: r9685
"
"6d1272289901a8384f8abe3a53385a12a7812590","2003-08-14 08:47:47+00:00","Rearrange to be safer

svn-id: r9686
"
"7faa06aecd43c38da6e72388c6124708de16de94","2003-08-14 09:27:33+00:00","Revert bad change

svn-id: r9687
"
"57133e526f0cb88024fd662dd351a35a3e50029b","2003-08-14 10:28:16+00:00","Add roland support for loom )ega)
Enable roland support for monkeyega

svn-id: r9688
"
"50482ded7ba3bae14b136d3122747370aa1af297","2003-08-14 10:46:46+00:00","Fix bad check

svn-id: r9689
"
"413f09eff5ad8b26dcfff3a2dc1b98b361153136","2003-08-14 11:40:50+00:00","add maniacnes target, rather prelimary so people would be well advised not to add to compatibility at this point

svn-id: r9690
"
"5922f4c3d432a0698263b0afded5ae4ebb245340","2003-08-14 17:17:11+00:00","changed warning into debug in o8_startVideo func

svn-id: r9691
"
"fa457b95c107838f11728c84fc1e97779adcdfdb","2003-08-14 19:41:40+00:00","Don't create imuse for v1 and v2 games (otherwise getSoundStatus doesn't work).
PCjr support for V1 games, bug fix in speaker support.
set_pcjr is now called by Player_V2 constructor according to midi driver.
Renaming of member variables to begin with an underscore.

svn-id: r9692
"
"876383a9c9b03e7890c3c224484618a651f1498b","2003-08-15 01:16:19+00:00","Don't confuse RO and ROL sound resources

svn-id: r9693
"
"c258337b27b0f8e339f9f7ccba30f803537f2372","2003-08-15 01:18:19+00:00","No need for those brackets

svn-id: r9694
"
"78b6cb41a934e6ee47f2891cac4db9f98ec11935","2003-08-15 01:21:59+00:00","patch #788078 Improved Amiga V3 SFX support by Quietust

svn-id: r9695
"
"9d450bc9ce21b2e702e15f18b9dff2a65c0373bb","2003-08-15 03:15:41+00:00","assert that string variable actually exists before we start doing comparisons against the string

svn-id: r9696
"
"f76980af395bb0b065b6f364bb0bae66c9f50abf","2003-08-15 04:16:51+00:00","Restrict monkeyega/vga music stop hack to ADL and RO sound resources

svn-id: r9697
"
"6b405587f22fdd3743a12f45ec89e955d1e076b7","2003-08-15 05:35:12+00:00","add hack for string resource idx numbers greater than max for humongous games

svn-id: r9698
"
"3ddb50711e906b16406d18c9e0abde289abc12bf","2003-08-15 05:55:33+00:00","Set v1 actor color to static for now, so actors can at least be seen easier.
Change default colors so at least Dave's color look right.

svn-id: r9699
"
"c0730f6cb9d4485d0546a5e6fd909c485f4312fc","2003-08-15 07:10:30+00:00","Fix for Bug [788531] Indy3VGA - Access violation with PC Speaker 'travel' music

Checked for OOB channel clear command. The 'travel' music
in question seems to try to clear channel 4 when there are
only channels 0-3. Now we check and bail if OOB.

Perhaps this isn't quite the correct thing to do. Would
channel 4 be significant, as in perhaps 'clear ALL channels'?
Hoenicke should answer this one.

svn-id: r9700
"
"6f50c852206cc8d85fe60b0014a14d73208cba6c","2003-08-15 07:45:21+00:00","Fixed problem with Adlib sounds being generated
when using -epcspk or -epcjr with V6 games that
don't have PC speaker resources.

svn-id: r9701
"
"f9aea7673ffcbb515e2a3ed32108b00f60598414","2003-08-15 10:07:31+00:00","Correct comment

svn-id: r9702
"
"e1bc6493d858f569716cf2036732e8a1ddf36573","2003-08-15 10:19:24+00:00","Replaced ADLIB_ALWAYS and ADLIB_PREFERRED with a more flexible
list of music types supported. This was done because now
PC speaker support must be treated separately, along with
Adlib and native (GM/MT32) support.

This fixes a problem with games that don't support PC speaker
(including V5 games that don't parse SPK resources yet)
being run with -epcspk or -epcjr. Those games now properly
switch to -enull so that music resources still get parsed
and music/script synchronization mechanisms don't break.

svn-id: r9703
"
"9c378d2f22b57bc61ec7cc84ee41ff5d2a46dfa6","2003-08-15 11:18:21+00:00","The imuse debugger commands now work with playerV2 too.

svn-id: r9704
"
"185d56369055faa2f1a28f6af1ce2e464fab4e84","2003-08-15 12:48:47+00:00","A different fix for Bugs item #788531.
Allocate a 4th channel and map all accesses to out of bounds
channels to this channel.

svn-id: r9705
"
"f86a8cd38be74bf0b714df0bf81684849462c6ad","2003-08-15 13:58:54+00:00","implement the PCjr chunk 1 sounds.

svn-id: r9706
"
"7e611160a9a0ad412e4e1e8d10b41902a88b7049","2003-08-15 14:18:09+00:00","*** empty log message ***

svn-id: r9707
"
"7d11516c9b164b28c8196d0f90dfc356072a0bfc","2003-08-15 14:41:28+00:00","Fix monkey2 missing sfx regression

svn-id: r9708
"
"b82c80a08513ad52acce52bb402e6fee33410d27","2003-08-15 15:10:19+00:00","Typo

svn-id: r9709
"
"2e38b49d276438c44924e537b4dd6a4533f4d073","2003-08-15 15:17:02+00:00","Replaced printf()s with debug() and warning().

svn-id: r9710
"
"a892474a4f53ae5c0755bb4b86092b79f7faccab","2003-08-15 15:17:25+00:00","Fix my fix

svn-id: r9711
"
"3b75fa8d3ce712b0c696eb586f4cd341ad1fb345","2003-08-15 16:40:17+00:00","Changed on_timer frequency in adlib so V3 SFX are correctly timed.
Changed V3 conversion code to adapt to the new (correct) speed.

svn-id: r9712
"
"5a963767bffb6655371f2103e577dd5ab0237703","2003-08-16 05:45:19+00:00","Fix subtitles colors in V1 maniac

svn-id: r9713
"
"2750eabcd5727f0af64360beaa249bc1d1277d9c","2003-08-16 06:01:10+00:00","Add a comment

svn-id: r9714
"
"4da3bf3a61eec24faa48f3cc7fd6defabfe040d2","2003-08-16 06:17:27+00:00","Fixed transpose/detune computations

svn-id: r9715
"
"78fba0a8536711a580e14539fee46888d4a5d22f","2003-08-16 07:19:28+00:00","Changed VAR_SOUNDCARD to 0 for MD_NULL MidiDriver,
and 1 for PC speaker and PCjr. This fixes a hang
in LoomCD if the default MidiDriver happens to be
a native driver. (For some reason the CD version
still has script variations based on whether a
Roland soundcard was selected. WTH?) LoomCD now
always reverts to MD_NULL, so VAR_SOUNDCARD will
always be set appropriately.

svn-id: r9716
"
"5ad330e1456d207e1bb8428cebf56d0c4f72dd94","2003-08-16 08:55:29+00:00","Patch from roarin_elk to fix crash in German V2 Zak (talking to Skolarian on Mars crashes)

svn-id: r9717
"
"18bd921440dcaaff82f3c4f5d6ecbd39f4bbab7e","2003-08-16 09:12:26+00:00","Fixed

svn-id: r9718
"
"8281c2eecc64a1d4a97cc29e2f0af7bfc14cbf3a","2003-08-16 09:20:24+00:00","Revert to old value

svn-id: r9719
"
"121b00a6f718f4b691c77708120083da2fedd018","2003-08-16 09:34:19+00:00","Corrected timing mechanism for RO music streams.
RO streams have built-in timer markers (the
unknown 0xA0 mentioned in FR [742249]) that
override automated methods of updating
VAR_MUSIC_TIMER. Since these timer markers
do not seem to be present in AD resources, the
old mechanism is used if MD_ADLIB is the current
MidiDriver.

svn-id: r9720
"
"806ff4acb3755df6cc01a7bb700fdf88fec9cd93","2003-08-16 10:16:07+00:00","Added fullscreen support to palmos

svn-id: r9721
"
"8cd96c7926f7ef764a22b65c4d6eb9d599e82f31","2003-08-16 10:37:26+00:00","color table for actor subtitles in v1 maniac isn't static after all, fixes color issue in demo mode.

svn-id: r9722
"
"c9ece33b810748abf9edee3b1f2a8964c0da1cc6","2003-08-16 11:00:13+00:00","Fixed aspect ratio scaler

svn-id: r9723
"
"293ba87bbf1e33c412ac2d38bb93dec6acd1ffd5","2003-08-16 14:24:17+00:00","Allow right mouse click to skip cutscene (Instead of both) in old games, since originals were this way.

svn-id: r9724
"
"6db31f464feefabe2e621ab4f744826a204c4321","2003-08-16 14:30:23+00:00","Some Tempo changes for adlib sounds

svn-id: r9725
"
"87542e0edfb8df47090a703fa64b42e0ec356a77","2003-08-16 14:31:27+00:00","Add new music drivers

svn-id: r9726
"
"c67485254a612b0d247c7adbf888ef6772f386c6","2003-08-16 15:13:15+00:00","Fixed hang in MI1 EGA Demo. Hang was the result
of a conflict between two scripts trying to
putActorInRoom() on the same actor. One script
was trying to reset an actor which had already
been appropriated and set up by another script.

A warning is displayed when putActorInRoom()
is ignored, just in case this crops up in other
games and causes undesirable behavior. (I
tested with MI2 up until Woodtick, and didn't
encounter any places where the opcode had to
be ignored.)

svn-id: r9727
"
"a5968af0fa6cd67c81d4e35a09c773d51496e91b","2003-08-16 16:40:04+00:00","Ooops

svn-id: r9728
"
"61162bf359b251ea46f2ea4944383a92f528555a","2003-08-16 17:05:04+00:00","Semantics correction

svn-id: r9729
"
"d7fae3d1cb5921e1256c9313d0ea0bf74db3523d","2003-08-16 17:08:22+00:00","More corrections to the VAR_MUSIC_TIMER
computations, mostly to produce the
exptected output with AD resources.

svn-id: r9730
"
"0914e57d214cd47e8f9cd7b915e8476bc77f7e19","2003-08-16 21:45:00+00:00","Changed fix for hanging MI1 EGA Demo after
finding GFX regressions in Indy3. New fix
runs exit script immediately when nuking
the resource for the current room, and
resets the current room to 0 (nothing).

Again, a warning is output in case other
cases of nuking the current room are found
and have undesirable behavior as a result
of this change.

svn-id: r9731
"
"53d1db8caea6e7e1a9f4fd27f0d516ecaeb0c150","2003-08-17 02:34:34+00:00","Fix regressions in MI1 Amiga
Revert last change to MI1 demo fix and make it monkeyega target only.

svn-id: r9732
"
"811f29fe79ee90735e24013e667cebc8344715a9","2003-08-17 05:46:48+00:00","Add palette tables for v1 costumes, thanks to Hoenicke
Code isn't enabled yet though.

svn-id: r9733
"
"bbbca4f8fe7ec7174709c1361103fcc05f92d8f3","2003-08-17 07:02:33+00:00","Fix text display in verb/inventory area in demo mode of V1 maniac mansion

svn-id: r9734
"
"be2e79624719a20a72f3d650115c6365d3753841","2003-08-17 08:00:26+00:00","OOps

svn-id: r9735
"
"d343ef10b3b5b4ca75feb2ab1ddbab19ecca9d8b","2003-08-17 12:13:17+00:00","Remove c64_ignorePakCols calls for v1 games, since they cause crashes and don't seem to be required.
Makes v1 maniac completable, maybe v1 zak too.

svn-id: r9736
"
"48ceff05456579fc2c93a04a2f6540520b3d8458","2003-08-17 14:07:16+00:00","patch #790060 SWORD2: Initial graphics work from erik very nice indeed :)

svn-id: r9737
"
"970bdea9acc977c59a2f9efef55b9f697701eef5","2003-08-17 16:10:58+00:00","some cleanup in codec47

svn-id: r9738
"
"41ca88939c4e76ae5f1e7049de9843a5d18db754","2003-08-17 16:17:13+00:00","forgot this

svn-id: r9739
"
"9b7773f4a2df1a08b1e8aaf926210353e98ff2df","2003-08-17 16:23:44+00:00","Don't attempt sound in maniacnes

svn-id: r9740
"
"2269031b1f0119cd3dd5fba040e87523212bb752","2003-08-17 16:24:00+00:00","cleanup again

svn-id: r9741
"
"eb5f05fab3327f9de86548fb1053ce403ec8db96","2003-08-17 16:32:36+00:00","More adlib tempo tweaks

svn-id: r9742
"
"bcb78c6ea028a6e4abe8c09c2198df82495a6b37","2003-08-17 16:36:24+00:00","some memory optimization

svn-id: r9743
"
"711c2b76cecf939942b401e74d5cca932800b60d","2003-08-17 16:40:36+00:00",".

svn-id: r9744
"
"1bb575da9df8f02fc0246b1e0aad077e995389b2","2003-08-17 16:53:00+00:00","Enabled the v1 costume palette tables Kirben and Hoenicke added earlier.

svn-id: r9745
"
"d1391b8f2d9c82bd4dfe602dd82a13141301fc48","2003-08-17 19:31:10+00:00","Changed adlib note priorities for small header games

svn-id: r9746
"
"99c677f2a3297b16046bfeeb639a3420a046a1dc","2003-08-18 02:02:43+00:00","add loom towns target

svn-id: r9747
"
"4c6bd7167d3a7df2c0d1a99962dc27d7d274fffc","2003-08-18 02:16:48+00:00","Fix v1 zak costume colors

svn-id: r9748
"
"c21fd14df8c490f676b86f24a000061df8a35497","2003-08-18 04:53:54+00:00","change loomtowns target a tad

svn-id: r9749
"
"f29fbda7acebea50262c0e47adf6e4af227ca1fd","2003-08-18 06:11:37+00:00","added dumping png frames from smush animation

svn-id: r9750
"
"4bad55da8cc8e205df7222e2cf4d81780f4bd0af","2003-08-18 06:29:39+00:00","fixed white spaces

svn-id: r9751
"
"311eb2678fbcfbd57606331bd88ff2cb24edde64","2003-08-18 06:59:18+00:00","Use correct costume color for darkness in v1 zak

svn-id: r9752
"
"c6118886062a46d04d4c7576e8daef7bc99b45a6","2003-08-18 07:46:46+00:00","Added support for opaque surfaces (it's the default now, actually) since it
looks like the sprite renderer may need them.

svn-id: r9753
"
"0c386dd5865829b0047d01d9fb1f55bac560c47b","2003-08-18 10:42:24+00:00","Added fullscreen option

svn-id: r9754
"
"034ea25fa6f0557cbf65f007b75a750f21212ffd","2003-08-18 10:43:41+00:00","Cleanup

svn-id: r9755
"
"9b5eb1137f418dabb4175ae60998287f51c41f47","2003-08-18 10:46:42+00:00","Add support for flashlight in v1 maniac by converting older values.
Prevent warning about dummy function (Which has no purpose) in zak

svn-id: r9756
"
"d4d12864408ba769e749089d259ddecb9ed5b768","2003-08-18 10:47:14+00:00","Added : UX50 support + fullscreen mode, Fixed : overlay, some memory cards related stuffs,...

svn-id: r9757
"
"3c5f641f482ea799f59dcd3759d06bde1f57cff8","2003-08-18 10:48:39+00:00","Removed : read/write led indicator

svn-id: r9758
"
"a47e80cb55af9baff82c86c9e9751e876c83a915","2003-08-18 10:59:21+00:00","Updated globals access for PalmOS

svn-id: r9759
"
"d91320f7ce3b98b04da15c4c9958fcb2184dea8b","2003-08-18 11:09:11+00:00","Remove debug

svn-id: r9760
"
"48c17b76a521d7d76f6663e569519a55d56ab781","2003-08-18 11:15:43+00:00","Added missing files

svn-id: r9761
"
"a3c5ba1da4bdd400ef840e9b99b467c91494843d","2003-08-18 11:25:50+00:00","Updated

svn-id: r9762
"
"d76b92d2b7c3050d26c587dae059fe896b90c60f","2003-08-18 12:53:26+00:00","Make smush player works under PalmOS

svn-id: r9763
"
"4748b92b33b1fefbf5e1761fc92b33f651b93c51","2003-08-18 13:55:12+00:00","Commented MI1 Demo fix.

svn-id: r9764
"
"487084e5ad8a2557b060e1c5ff5b99094379f804","2003-08-18 15:10:22+00:00","fixed mask conversion for v1 games, still need properly handled

svn-id: r9765
"
"c9b054462532325548d02ee01e147d2b3e991b40","2003-08-18 15:13:15+00:00","some changes for smush codec 1 and 3, handled by bomp decompression

svn-id: r9766
"
"8141126e6e0d4fccfb7f992266b14618d00156d0","2003-08-18 17:59:06+00:00","fixed y position of mask in v1 costume rendering

svn-id: r9767
"
"fe94648dd652a8c7f40d1653e0753e9da04005dd","2003-08-18 20:28:57+00:00","fixed debug mode for mask maps

svn-id: r9768
"
"91ab462ce5630f229b8501346e60a1a8a03d079f","2003-08-18 20:32:51+00:00","ops

svn-id: r9769
"
"cc7700f01d98c1f2e56e9f3ad410743dbe2c8f91","2003-08-18 20:36:55+00:00","fix sfx restart after restoring a savegame

svn-id: r9770
"
"f6d697444b56bb341bfe98c4bb6b9c3fe929c670","2003-08-18 23:19:53+00:00","added VersionSettings flag MDT_PREFER_NATIVE for defaulting to midi music

svn-id: r9771
"
"e7fb69e3d93d51b7d265b7930eab4d94de1f49cd","2003-08-18 23:20:27+00:00","added MDT_PREFER_NATIVE flag to BASS VersionSettings

svn-id: r9772
"
"161ef54777385134455aa8a85ca4cc386f0a1bb6","2003-08-19 03:20:09+00:00","Correction for v1 zak faces

svn-id: r9773
"
"d6105a306495eee414de5ebf70115d9e01da432e","2003-08-19 04:15:14+00:00","Cleanup v1/v2 color settings for sentance/inventory/verb area.
Add highlight color for v1 maniac

svn-id: r9774
"
"2dd4c408680d128a61ba6c0919abc3e0c4ee4b66","2003-08-19 04:28:52+00:00","Fix cursor cycle color for v1 games

svn-id: r9775
"
"7771433b20032436333d376aa75e63ca15fe15b6","2003-08-19 04:34:41+00:00","Fix for v1 maniac demo mode not setting text color before displaying text

svn-id: r9776
"
"f25b54159c5752c9c99ace8018aab98693cea765","2003-08-19 04:36:46+00:00","Remove fixme

svn-id: r9777
"
"a34f8895cb160242eecb855500855f407920ca52","2003-08-19 04:47:38+00:00","Revert color change for v1 maniac, which actually used in pool room.

svn-id: r9778
"
"61c320d5875866f295724db4e033838dd02282cc","2003-08-19 07:29:15+00:00","small changes to v1 mask

svn-id: r9779
"
"b6ec652a49d085d356118e276d4a0f8f958e3821","2003-08-19 08:47:09+00:00","patch #791032 from erik SWORD2: Sprite drawing (incomplete)

svn-id: r9780
"
"c284e1b5077a172af52a114ffc658e0f58defe80","2003-08-19 11:11:11+00:00","This is only require for v1 maniac

svn-id: r9781
"
"ec447fdfbbd55bf7e9d5c623f4262e59443f6d7a","2003-08-19 14:57:26+00:00","Remove a bunch of unneeded cruft - but barely the surface of it. This code is depressing and duplicated all over the place... I don't think I can bear to touch this code until it's undergone some MAJOR cleanup :)

svn-id: r9782
"
"a6d7d1521e8135d1e8ef45b4a630ee9219b4ad74","2003-08-19 15:03:27+00:00","Fix 1 memory leak + 102 memory leaks using launcher

svn-id: r9783
"
"f5cdcfa3db1056c5bf79c94e8528bc07dedfea18","2003-08-19 16:10:05+00:00","Fix compile.

svn-id: r9784
"
"050241ff87213d18f393cffb734ce102f09b37fe","2003-08-19 21:42:21+00:00","preliminary cursor code. dirty, hacky and no animation yet. but at least something...

svn-id: r9785
"
"d0faf4c225ffdcc8e661057b3ebd70ddf0ef3876","2003-08-20 06:35:15+00:00","This should fix mouse cursor animations. (Actually, I hardly even looked at
what the old mouse cursor patch did. I simply replaced it with my own.
Sorry about that. :-)

svn-id: r9786
"
"c2df1277a61d224663d17dbd52ab18863dd36bdc","2003-08-20 06:48:07+00:00","This should fix the crash in the demo when you tried to walk down the
stairs to the water. (And probably countless other places as well.)

svn-id: r9787
"
"1100a46242d9be6cde0d948739be24ce66a8f391","2003-08-20 06:51:35+00:00","Cleaned up DrawSprite() and added scaling, based on the 'line doubling'
method in the original code.

There are still a few minor things missing, but it should work well enough
for now.

svn-id: r9788
"
"e135f8a9b9376ba2c4b250277d6e83ad708f44dd","2003-08-20 08:52:36+00:00","Leave masking disable for now, until it works well.

svn-id: r9789
"
"52f3fa76dc8503109a3ae1e2ace222d52a65d566","2003-08-20 11:04:32+00:00","correction from olki that fixes mouse y offset being too high

svn-id: r9790
"
"77f13830ed1f526279fc000d6b8800234f3c890c","2003-08-20 11:13:13+00:00","SetMenuIcon(), other stubs in menu.cpp will have to be done for things to be visible, don't have time to do this at the moment. As a side note the demo is now finishable even though you can't see the inventory :)

svn-id: r9791
"
"264b2d87675d2495ae5e169f8bdbfc23fd5603c6","2003-08-20 11:28:22+00:00","Removed some memset()s that I added earlier out of paranoia. Added a FIXME
comment, noting that DrawMouse() used to handle the 'luggage animations' as
well. I don't know if I broke anything when I moved that part of the code.

svn-id: r9792
"
"7651aa2bb7fac342a6d9aef2c37c25bfa1e9e975","2003-08-20 11:41:43+00:00","Applied a different fix for the mouse offset problem. As far as I can tell,
the old way would have made it impossible to access the (not yet
implemented) menu icons at the top of the window. I hope this one works...

svn-id: r9793
"
"1757d5a4489aa17ef92056a304e2e610fd1e4f53","2003-08-20 11:45:40+00:00","v1 zak costume color almost all right.

svn-id: r9794
"
"cc781cb9b11b4e3342e0661fd06daeec757e18ce","2003-08-20 11:49:22+00:00","Ooops that would have broken v2

svn-id: r9795
"
"327d37ae78608770599a03d6afa5ea3496f470e7","2003-08-20 12:04:25+00:00","v1 zak costume colors should be perfect now

svn-id: r9796
"
"fc005be4d9bb28c50f37db27c7ea0b6f5759cc49","2003-08-20 12:08:44+00:00","Remove my junk

svn-id: r9797
"
"123af301474cac28e53f96b5f23f229429d32eaa","2003-08-20 12:08:55+00:00","fix warning (properly initialise 2 dimensional arrays)

svn-id: r9798
"
"af17c1ac5161b261c4c8c41e360dd5d11b7859d7","2003-08-20 12:12:11+00:00","copied some fixes which only were in 0.5.1 branch.

svn-id: r9799
"
"be0d723e7f421a11b718d0526caf38be96ac7870","2003-08-20 14:01:39+00:00","Change Amiga palette option to Amiga version

svn-id: r9800
"
"f16aec61f0253f6677b91f1d99941f9c24c171c5","2003-08-20 15:19:23+00:00","Fix speedy music regression in monkeyega/vga/pass.
Add unique tag to sfx when converting AD resources, to solve sfx cutting off music issue in monkeyega/vga.

svn-id: r9801
"
"875decf54433bca478bc017bf53498dad0027a98","2003-08-20 15:43:25+00:00","Initial (slightly buggy) support for 'luggage' mouse cursors, i.e. cursors
made up from two different images.

svn-id: r9802
"
"470fd270099409ffbb075f9b82a9c8a4edda5f48","2003-08-20 20:03:50+00:00","Need explicit include of stdafx because of free_check kluge...

svn-id: r9803
"
"8b9158817d7b3f08f752402d0d3ff1c943c42732","2003-08-20 21:17:23+00:00","Lots of cleanup.

Oh, and the menus should work now. :-)

svn-id: r9804
"
"bfefcc3567748e8dadd0eb8d879572f1996a4567","2003-08-20 21:46:00+00:00","Draw combined cursor properly. Thanks to joost for finding out that the
maximum cursor size in SDL is 80x80. This *might* cause problems in some cases

svn-id: r9805
"
"255c7ae5ff8c8f526de349246cdaf73506a85e81","2003-08-21 11:42:27+00:00","When a menu icon reaches its full size it can be drawn directly, without
being run through the shrinker first.

svn-id: r9806
"
"ce42f4d3dd461ced69470ea70e4f840c8abfb246","2003-08-21 13:39:21+00:00","patch #791738 g++ 3.4 compile fix, from Falk Hueffner and a few minor local bits in my tree

svn-id: r9807
"
"a51be5d39e0d69b835f476874c63433b85274baa","2003-08-21 14:58:47+00:00","-Werror cleanup, don't try to free const variables...

svn-id: r9808
"
"446ca58580a6cbcad986ea9d13b64322a06f8fce","2003-08-21 15:33:25+00:00","crude fix for bug #786995 stop arrow keys being sent to scripts as they are currently stolen by the keyboard cursor control stuff. I will soon either gut the keyboard cursor stuff or make it non default as it breaks several things

svn-id: r9809
"
"47c33674ecc2b57caa59ebd10217ab21c9a81f95","2003-08-21 15:51:28+00:00","Fix for Bug [792178] MI1: Intro asynchronity regression

Reverted Hoenicke's change. Why was this change made anyway?
Do not reinstate the 'tempo tweak' before talking to me
about why it was needed.

svn-id: r9810
"
"d9a78a5feb47fd6ee352ab6ed59d423113acf1a3","2003-08-22 01:18:49+00:00","change description of -b option to be more correct, also some consistency in -h output

svn-id: r9811
"
"485852ba6cdc52644a58eed5023e9cc28d0eb5a3","2003-08-22 01:47:15+00:00","change sound queue overflow error to warning as error was supposed to be temporarily apparently...

svn-id: r9812
"
"bcd1f491252dac07a1590613eebfa2193096dc28","2003-08-22 02:24:55+00:00","More tweaks to the PPQN and tempo of AD resources.
Loom, Indy3 and monkeyvga are now all running
at the right tempo and returning appropriate
quarter note counts for the script timers.
Fixes a sync regression with the Indy3 opening
sequence under -eadlib.

Ask me if I care that these numbers may not
precisely match the disasm.

svn-id: r9813
"
"abf7f33dc463c8515ae236ec1e8c6284aa7f6344","2003-08-22 03:14:29+00:00","loom towns needs this as well you can now learn f

svn-id: r9814
"
"5018d206bcb6ab216e42a7c6c353cddbf10b95b9","2003-08-22 06:39:18+00:00","stop bs2 trying to cache clusters

svn-id: r9815
"
"a02eba1bee60281adad2918b0c0e275f20c87be1","2003-08-22 06:40:29+00:00","add sword2 cd dirs

svn-id: r9816
"
"d960058e495fa8726abd3bdb02d035a9fd35be39","2003-08-22 06:58:02+00:00","Enable bs2

svn-id: r9817
"
"812f42ce8ecc985a1b4a97e267c3fa1117970f99","2003-08-22 06:59:05+00:00","Only hide the mouse cursor if both the mouse animation and the luggage
animation are removed.

svn-id: r9818
"
"641d164e2148d067f538ed5790ac926913a31b72","2003-08-22 07:04:50+00:00","Added light mask support (in the demo this is most visible when walking
under the shack), plus some other cleanups. The s->blend & 0x02 case looks
bogus to me, but I don't know where it's used and I can't see that the
original did it differently.

svn-id: r9819
"
"8a87b25fdca8c969714f556c00ef4d956f3e2181","2003-08-22 07:20:33+00:00","*** empty log message ***

svn-id: r9820
"
"ab59623930fbc1387bab7eca5c6602da52f6227f","2003-08-22 07:40:40+00:00","Add screenshot option for sdl backends, patch #590233

svn-id: r9821
"
"0649a8e30db7aa67f413e6d49d333a7f952f4021","2003-08-22 08:40:27+00:00","enable boot param like option for bs2, valid numbers can be found in startup.inf

svn-id: r9822
"
"535b95fffccc7b2b6ee9f32673e50a45c17e2b30","2003-08-22 20:24:06+00:00","Fixed tempo value for Indy3 AD resources. Despite
the comment in the source, the disasm value DOES
sound closer to the original than the alternative
value that came from who-knows-where. The value
being used rendered too slow a tempo.

svn-id: r9823
"
"b113720a6d9ece3306e7d2a0642ada11f87a6728","2003-08-23 07:27:59+00:00","Work around for sound resource in ST versions.

svn-id: r9824
"
"df247cff6259ba24cd5d6704347532b3382f7c53","2003-08-23 13:02:21+00:00","Unstubbed the Create/Draw/DeleteSurface() functions, and removed some
unnecessary stuff from our own Surface class. The former allows the in-game
dialogs to at least sort of work, and the latter gained me a few frames per
second, according to the built-in FPS counter.

svn-id: r9825
"
"c6b5749f03467a4962fb2890d1717adf6d1a3a4d","2003-08-23 13:31:59+00:00","Added explicit 'ASFX' awareness for clarity

svn-id: r9826
"
"5e0f61a8b258a4ab737fa9c34556716d69b82a0b","2003-08-23 13:51:37+00:00","Typo

svn-id: r9827
"
"4df7dd406f13454944fb62e99343708d44e1dffc","2003-08-23 14:33:57+00:00","fix a resman method and make saving work using SaveFileManager

svn-id: r9828
"
"01f020da2b82fcc781f4654aefb90fb3033e2196","2003-08-23 14:42:37+00:00","SetPalette conflicts with an OS symbol on OS X

svn-id: r9829
"
"6cc598250d8490dc8e788642b723188e092a14a6","2003-08-23 15:16:07+00:00","Add comment

svn-id: r9830
"
"6768da3e7689224e5b8fb0c0961b6f0829dd17c9","2003-08-23 16:30:32+00:00","Added comment keyword, per Fingolfin

svn-id: r9831
"
"fda9c872188128862936da88f2a1ec41af5d5dd9","2003-08-23 18:01:21+00:00","little bugfix, safer code

svn-id: r9832
"
"191c4b9b8ee31589f8cb96e24d1eec0a38236c82","2003-08-23 18:03:17+00:00","use startup message, avoid possible race condition on exit

svn-id: r9833
"
"f74aa84b2d499d37b490ad6a9f71a8659d3b5b89","2003-08-23 20:36:46+00:00","sync OS X static build rule with Makefile.noconf

svn-id: r9834
"
"ac3ee2684e2f0c3b424d0212dc09024be6402ee9","2003-08-23 23:33:05+00:00","fix --disable-engine so it doesn't try to compile disabled engine, what was I thinking...

svn-id: r9835
"
"e8cd4604411127250a24c402527ee887a89af38e","2003-08-24 00:40:55+00:00","work around compiler bug in GCC 2.95.x

svn-id: r9836
"
"79036c5a1dc6e280b0f1454a6b640e546bb36b4b","2003-08-24 01:47:45+00:00","Handle hiding of verbs/inventory in v1-v2 games correctly.
According to diasm. the verbs areas is only enabled and shown when (_userState & 128) is true and verbs/inventory area is cleared/redrawn on each state change.

svn-id: r9837
"
"72bfe15f5037b55fb7601a999f69a6f55943d224","2003-08-24 02:11:14+00:00","Update comment

svn-id: r9838
"
"4b6800fcf9b7b4169ca1dca49b8fda94f53fba7d","2003-08-24 02:15:12+00:00","Minor cleanup

svn-id: r9839
"
"14e3dd96e0b0f7617f307c5abe93dd6f74ad0b3e","2003-08-24 02:27:52+00:00","Ooops, inventory still needs to be clear when moving through inventory.

svn-id: r9840
"
"5d1863070b880d72bc3997ed6a77e6ed24f9c1bb","2003-08-24 02:43:44+00:00","return read error in PlayCompSpeech for now so we get subtitles

svn-id: r9841
"
"d50c6f4ef86318295f598398ece9d47b8da778ac","2003-08-24 02:51:33+00:00","we don't need to be told when we've hit a key

svn-id: r9842
"
"cf9ad3aee3d9b672ad46c9491955f42732d156e9","2003-08-24 06:57:32+00:00","bring up the restore game menu when any -x param is specified, this is nicer than telling it to load a slot as it validates the saves and doesn't try to load a non existent save etc, its also similiar to what the original did (any command line params at all would load the restore menu)

svn-id: r9843
"
"e52f4c89c79c4d390ff81957a72254f89049f685","2003-08-24 08:15:01+00:00","correct slashes in paths

svn-id: r9844
"
"070a746de4faf753e4ed1a79ce74788747f58685","2003-08-24 11:39:32+00:00","this should be signed

svn-id: r9845
"
"a8ddcec684125cd2727f1ebed0f54e0325c37fa9","2003-08-24 12:13:03+00:00","be more tolerant of files being in different spots, and living on case sensitive filesystems

svn-id: r9846
"
"2c4f688e597613304d2ef0bd1a817fe0ba523522","2003-08-24 13:18:19+00:00","fix strange keyboard issues by passing the game the values it wants

svn-id: r9847
"
"527fa147c58e352ab1f8b2f6c801d5bbee234fbd","2003-08-24 13:46:42+00:00","make settings use SaveFileManager stuff as well

svn-id: r9848
"
"011d7b897d96029470cf85fe3dafc569185751b2","2003-08-24 14:13:12+00:00","use less generic file name for settings.dat, I assume filenames > 8.3 are ok for everyone?

svn-id: r9849
"
"09368e09f2b1614b70ef28205933bc0e7f8da633","2003-08-24 17:37:28+00:00","fix for bug #786994 (DOTT: no custom cursor)

svn-id: r9850
"
"fcf04ecbfd8731756185ec1070ced2704d64fb5c","2003-08-24 17:38:20+00:00","commented my hack

svn-id: r9851
"
"57493197e87c24aaa6db2ebbb0f0abdcdfa87a3b","2003-08-24 21:54:46+00:00","small cleanup for the Ogg playback code

svn-id: r9852
"
"10d4af4eaebd86853178d41d5b248fd0b22985f8","2003-08-24 21:58:16+00:00","fix for bug #782727 (COMI: no sentence line while inventory is shown) by drawing blast text after blast objects

svn-id: r9853
"
"fcc904a8136d2b45ace86e30b1e0690770b964a0","2003-08-25 06:13:28+00:00","FadeServer() is now called from ServiceWindows(), thus eliminating the need
for the making it a timer handler. This should eliminate the occasional
glitches I've been seeing with fades not being completed.

I'm also hoping that it will fix the problem where the game would sometimes
hang when moving between rooms. I know that at least once when I had that
happen to me the game was busy-waiting for the palette to fade.

At the very least, it's one place less to worry about thread-safety in.

svn-id: r9854
"
"528cde2735f619d200b71b83043fc7e5a842cf8a","2003-08-25 11:30:01+00:00","Clarified the comments for our Surface class a bit. I plan on removing it
completely soon, so don't use it unless you really, really need to.

svn-id: r9855
"
"e40e6bb207d7d5a9f4693bbf7ca64090e1159afc","2003-08-25 13:13:43+00:00","fixed and cleaned up V1 actor masking

svn-id: r9856
"
"2257f8c0cd6877e968d30f7990967b2145b1fcc3","2003-08-25 13:15:59+00:00","enable V1/C64 masking

svn-id: r9857
"
"285570f0d356cc8e067b1fedc40669e364cf3180","2003-08-25 14:17:34+00:00","This fix should be v2 only
Update comment

svn-id: r9858
"
"953e4216b80decd6e658ed4efa266ad73a7b0955","2003-08-25 14:27:29+00:00","implemented V1/C64 object masking, and simplified drawStripC64Mask a bit

svn-id: r9859
"
"95b85581910a02dfe102fbbf1a30a56b20b2073a","2003-08-25 14:54:32+00:00","check for costume format, not engine version

svn-id: r9860
"
"f91c575338cf5e05a615c36eb845617d35734bd9","2003-08-25 20:05:02+00:00","fixing off-by-one buglet (harmless in 99% of cases since the 'invalid' _imgBufOffs entries always contain the value of the last valid one)

svn-id: r9862
"
"8977d6ce079ad6328fbd38d11750f73904fa363e","2003-08-25 20:18:44+00:00","v1 masking fixes

svn-id: r9863
"
"52534e2cc3ac5e35bcb189fb16c360d6c9eaec2d","2003-08-25 20:57:36+00:00","fix actor position in V1 games (by eyeballing the original in dosbox); still seems to be off 1 pixel vertically (?), and actors still leave dirt

svn-id: r9864
"
"6d4475cf0479d441876a817dbebe3bbc6882340f","2003-08-25 21:00:12+00:00","cleanup

svn-id: r9865
"
"f3675261a970ca1c76870f3ebbf3774771d22270","2003-08-26 06:35:38+00:00","Actually, we used to draw blast text after blast objects. I changed the
order to fix the Full Throttle end credits. I guess I should have added a
comment about that. :-)

svn-id: r9866
"
"8277c6cb798552de5ef315311db18f91a25e42fc","2003-08-26 06:53:00+00:00","The graphics detail settings partially work now. They only affect how
sprites are drawn, but I think that's how it should be.

1: No bells or whistles.
2: This setting adds sprite blending, e.g. the smoke at the docks or the
display cases at the Glease Gallery.
3: This setting adds light map support, e.g. when walking under the shack
at the docks.
4: This setting adds better scaling algorithms.

The first three settings should work fine now. In fact, the third setting
is what we used to implement. The fourth setting still needs work and
testing. I've added code for downscaling case, but frankly I'm not
convinced the result is any better than with the simpler scaler. I usually
can't even tell the difference.

Of course, my translation of the original code could very well be buggy.

svn-id: r9867
"
"fda7df57fa2df58818562127aa4c5eb150f55927","2003-08-26 15:19:29+00:00","Handle the fadeNow parameter to BS2_SetPalette() so that the palette is
only uploaded to the backend if fadeNow == RDPAL_INSTANT. Otherwise, assume
that FadeServer() will do it for us, eventually.

I think this is the correct behaviour, and it prevents the bug where the
unfaded room image might flash by briefly when moving the mouse while
changing rooms.

svn-id: r9868
"
"63e89e58829c100ee766b35c07f87be7ae0b059d","2003-08-26 15:56:37+00:00","Fix room colors in v1 zak

svn-id: r9869
"
"b91c182571c3f699e1b387ba94eaa1a16e55c60a","2003-08-26 16:09:09+00:00","Revert v1 zak face costume color nack to 8, since palette is fixed.

svn-id: r9870
"
"3443c5c3d0c9fda270ab9e2ec3c5eeed98522a60","2003-08-27 00:36:01+00:00","Basic speech code, the change in speech.cpp is needed for me, but I am afraid it might break 'speech.clu opening' for someone else..I'm confused as to how this all works. heh.
Anyway, if you hear no voices: this is probably where to look.

svn-id: r9871
"
"69693575051c7495f1dac23fd8f2b8e81a8f5262","2003-08-27 00:48:55+00:00","errr. this shouldn't have been committed

svn-id: r9872
"
"06d07054c355e8c76574fd47d27df3e182c6e8d3","2003-08-27 01:12:18+00:00","Fix room palette issues in small_header games.
Fix is only for EGA games so far.

svn-id: r9873
"
"e37c9305331f9c5863696462ea59f8f0cacccf49","2003-08-27 03:54:50+00:00","Add change ot fix pallete issue in 256 color small_header games

svn-id: r9874
"
"8b91af78db1272af640a8fe162058151bf5d8f2c","2003-08-27 06:32:42+00:00","use file class for speech so people with clusters in different directories get to hear sound as well

svn-id: r9875
"
"48606fc1aa901011fbb841c463db2951c3e3d41b","2003-08-27 06:49:01+00:00","Update news

svn-id: r9876
"
"5f5b9c1e0c2050e39ef0b3a8408b0eff90280a7c","2003-08-27 06:56:54+00:00","Ooops

svn-id: r9877
"
"1ebb3cb7429e119b4876da4a352938fed832e3e2","2003-08-27 07:01:05+00:00","Unstubbed DimPalette() (used when pausing the game) and re-indented the
code to be more in line with the ScummVM coding style.

svn-id: r9878
"
"0119d6d642d8044dc0f41a60f23d1184acd0710b","2003-08-27 07:17:12+00:00","Added code for smoothing upscaled sprites (for the highest detail setting).
I don't know if I got it right - the result doesn't look that great to me -
but at least the infrastructure is there.

This, I think, marks the point where BS2 graphics is pretty much done. Some
functions haven't been unstubbed yet, but I believe they're used for
debugging and/or profiling. I'm not sure they're worth the trouble.

Of course, there is still testing and clean-ups to make. For instance, I'd
like DrawSprite() to use malloc() a bit less.

svn-id: r9879
"
"9154abefa9687f89ab9c65e68f7ad45659998440","2003-08-27 13:31:47+00:00","Add code to check for game-specific scaler and fullscreen settings, like we
do for the other game engines.

svn-id: r9880
"
"221253b9989a4f8a81eab0c5fb25704e977e52e9","2003-08-27 15:13:04+00:00","Force redraw so copy protection screen in monkeyega/vga is shown correctly.

svn-id: r9881
"
"4424687bb7fec71652403ac7f4ec4a5867de0155","2003-08-27 16:12:45+00:00","V1 games are now supported

svn-id: r9882
"
"cde3b3dc6d914b8a2eb0b1df4f807fc97144a4e8","2003-08-28 01:10:36+00:00","Load older Color Cycling resource.
Still need to work out resource differences

svn-id: r9883
"
"aab8d69078000632146ac592983da6de7778515c","2003-08-28 06:13:59+00:00","Fixed format string error.

svn-id: r9884
"
"76df5a2733d7fd4b1d1e78d800649aa4c3e1e773","2003-08-28 06:14:46+00:00","Cleanup

svn-id: r9885
"
"f7ce39763e36af527d85683b47ff18ea2e534174","2003-08-28 06:36:15+00:00","Removed the Surface class in favor of small struct specially made for the
block surfaces. (A block surface is a 64x64 tile of a parallax layer.)

I've also done a few things to try and optimize the drawing:

* The back buffer is no longer cleared between frames. This may cause
regressions, but I do believe that the entire picture area is always
completely re-rendered for each frame.

As a result of this, the menu code is now responsible for clearing the
icon areas itself.

* A few unnecessary copy_rect() calls were commented out in favor of one
big copy_rect() in ServiceWindows().

* Completely opaque block surfaces are copied with memcpy(), one line at a
time.

Unless we manage to add intelligent screen redrawing, I don't think it will
get that much faster than this, though there is some unnecessary data
copying in DrawSprite() that could be removed.

And the game is still a terrible CPU hog. I believe the animation runs at
approximately 12 fps. If there's still time left, it will pump out further
frames to get smooth scrolling. We ought to put a cap on that, and if it
has already reached the scroll target it should sleep for the rest of the
render cycle.

svn-id: r9886
"
"6071e79dcecee386426b216db75fa0de38be85a0","2003-08-28 06:38:03+00:00","Leave small_header color cycle resource disabled for now, since it needs additioal support.

svn-id: r9887
"
"906c7818ece3325a093ac6fc3a3325452723ee39","2003-08-28 10:00:49+00:00","Fix regression that caused subtitles to always be shown in loomcd

svn-id: r9888
"
"0a7dd227b8296446d743aa9c5b32fb2d0ab72881","2003-08-28 10:10:32+00:00","revert previous broken commit which didn't logically make sense as it was checking for negative on an unsigned number, and would have broken several things if it compiled

svn-id: r9889
"
"cf4ae4097fcddb3fdfd0e1f5104312d4f5dc673e","2003-08-28 12:21:35+00:00","Update warnings in mingw makefile.
Add hack to allow nosubtitles in loomcd (Only once game has started)
Revert _roomPalette changes for 256 colors games, caused problems in loomcd, I'm not sure the older 256 color needs these changes.

svn-id: r9890
"
"b8d5342f34a7b07bc495665d2a557d40841bbdba","2003-08-28 12:23:35+00:00","Remove junk

svn-id: r9891
"
"259fb4245982bc3f50454e19533f9afcf45fab55","2003-08-28 12:26:28+00:00","I forgot to commit this file earlier. (It's only a FIXME comment anyway.)

svn-id: r9892
"
"62f94f15be6ac784374b771c1324b85b331906f9","2003-08-28 14:25:29+00:00","clean up humongous v7 index file block handling

svn-id: r9893
"
"876fe0ac8aa0d94274af02ce38eea9ea3e058d90","2003-08-28 15:23:23+00:00","add readINI stub (a HEv7 op)

svn-id: r9894
"
"898bbc85d0aa856c2f80a18acd3163cff59ebe63","2003-08-28 19:20:30+00:00","double cursor animation speed (see bug #757191)

svn-id: r9895
"
"2a89cd9c9dda8693b34fa0391e8ec20cc2e14108","2003-08-28 19:46:52+00:00","fix killLastWord

svn-id: r9896
"
"176803cb90b495457d51dd4dea6ed7004462ad22","2003-08-29 02:39:05+00:00","make the 2nd gen windows based humongous games that have things like a different layout in the MAXS block at least start the bootscript, added pjs-demo target to test with

svn-id: r9897
"
"e32f17d803ccdd409758e21d1473d4d51389881a","2003-08-29 02:45:38+00:00","don't try to read objectRoomTable for HEv7 games right now

svn-id: r9898
"
"cec02390ed9b068bb12c3ab03b0d92c7c70d8c4f","2003-08-29 03:35:15+00:00","Fix for bug [770687] MI1: palette effect missing

Added support for CC resources in small-header
games. Right now this is enabled for monkeyvga
only. loomcd has CC resources but they don't
make any sense, and the game doesn't use palette
effects anyway.

svn-id: r9899
"
"20aaf3c36552cdb5a4c0cd51e1a0e1496a49f4e7","2003-08-29 03:54:47+00:00","Added _roomPalette to savegame.
Savegame version now at 21.

svn-id: r9900
"
"5507d752281c792ffd0037ca80ddeb5da3dc26bf","2003-08-29 04:05:23+00:00","Replaced VER_V* notation for savegames with
a simple number. So that it's still obvious
that the number refers to version, a VER()
macro does nothing to the number but makes
it obvious what the number is for. This
has the exact same effect as the enum that
was going to get more and more lengthy
as the savegame version evolved.

svn-id: r9901
"
"f1d9afc56a64279142e6fdc9c7ae9b10d7a7206b","2003-08-29 04:08:48+00:00","Only needed for versions 1 - 4

svn-id: r9902
"
"d900ea66bdac3f6e4cbda41e085a4665f26a79b1","2003-08-29 06:19:34+00:00","Cleanup.

svn-id: r9903
"
"ed698cb63591963d0eb73c8dee69b95951bd476b","2003-08-29 06:42:34+00:00","Added some code to stop producing interpolation frames if the scene has
already reached its scroll target. This keeps BS2 from using all available
CPU time all of the time.

It may still be that we need a mechanism for throttling the frame rate when
the scene is moving towards a scroll target, but my computer isn't really
fast enough to test that.

Two other bugs fixed in the process:

* I think the last frame of the render cycle was rendered, but not
displayed. If so, that should be fixed now.

* I discovered that there are cases where we do need to clear the screen
(e.g. at the 'Meanwhile...' message when George has found out about the
Glease Gallery), so I've re-enabled the function and disabled it in the
render cycle.

svn-id: r9904
"
"33f9cb35a39604e6e2691e33624050a4ab1bbfd1","2003-08-29 06:46:12+00:00","Change zak room color remapping, so it work correctly after load/save in room with remapped colors.

svn-id: r9905
"
"fb060c6cbdb71caf91d8dac2b8cc046ad364441c","2003-08-29 06:46:52+00:00","Disabled debug output. (I really need to get the debug message level to
work for BS2! :-)

svn-id: r9906
"
"bed0061362e9202ad7605297d16b5489dcd956ce","2003-08-29 06:53:00+00:00","Fix verbs been shown in cutscenes in v1-v2 games if loading/saving during cutscene.

svn-id: r9907
"
"ef4fdd03f008fd096b7e34c6015b1b80020e329b","2003-08-29 07:07:55+00:00","My last commit was wrong, this is correct solution.

svn-id: r9908
"
"ea1cd18354faffe4f2454c2dceb2b015bcc75498","2003-08-29 07:57:20+00:00","fix dottdemo by checking that room exists before trying to set a custom cursor from it, fixes bug #796971

svn-id: r9909
"
"5f8630d41b069e6dbda0b6bc569d5c6c9044e3c4","2003-08-29 08:04:54+00:00","Memory leak

svn-id: r9910
"
"a9173133079fa495b935677d08c59b4c9d7b4dfe","2003-08-29 09:01:19+00:00","Adjust music timer

svn-id: r9911
"
"ae183c8c8cc3ba0ddbcfebc3e6b41346bad5e6ad","2003-08-29 15:06:00+00:00","Opcode change to load/save screen in original loom

svn-id: r9912
"
"f2e8033edc249543c539dbbfea9c1c3665ea8422","2003-08-30 01:32:32+00:00","Adjust music timer for game with no music support.

svn-id: r9913
"
"cf3de3784b822e303ab2cf3c3d537aaf3c83f8b1","2003-08-30 02:38:39+00:00","Fixed bad AND operator. May invalidate savegames from the last 24 hours

svn-id: r9914
"
"8a4eaa51f0722d173f419e1ad1380cb1c473f215","2003-08-30 03:34:46+00:00","Feature Request [778833] '-F' not documented

Added -F and --fullscreen to the ScummVM
--help output. These were added to the README
already as part of the fix for Bug [779013].

svn-id: r9915
"
"f76725b38f5de2dffd4d486993f561f9c2eaa057","2003-08-30 08:03:01+00:00","Update comment

svn-id: r9916
"
"21814137c2cae3aa78bd49b7a8e98baf8384ff11","2003-08-30 09:12:45+00:00","indy3ega [mac] use same sound effects format as indy3ega [amiga]

svn-id: r9917
"
"5fe5bd2e0d0f562ff931b22009ed787d61a8fb7e","2003-08-30 09:15:10+00:00","*** empty log message ***

svn-id: r9918
"
"144b9ed71ccecac2fa0070b32a084b611cf9b0fc","2003-08-30 09:42:29+00:00","Alter last commit, since looping would never be stopped on Mac version.

svn-id: r9919
"
"23ba54ec929c745d3f1f8f126ad167245a4651b9","2003-08-30 10:23:40+00:00","Fixed sprite clipping issues, I hope.

svn-id: r9920
"
"5825a28330fc7be2260407119440b7e1b9b86789","2003-08-30 15:21:51+00:00","properly close down when playing demo

svn-id: r9921
"
"890c5cde042ce1fa1cce0c55e6ef7976dc2bbb9a","2003-08-30 15:32:57+00:00","Very basic sfx support for Amiga version of maniac/zak

svn-id: r9922
"
"a2dad74da12f4d4bd63f79e86d0226c07e16dcc9","2003-08-30 18:06:08+00:00","added sfx support, increased speech support, and music code(streaming works fine but you don't hear anything) newStream, and appendStream doesn't work but playRaw works for music

svn-id: r9923
"
"9c05d44d00ff31ffb9b535da1536e38ab28d150a","2003-08-30 18:12:49+00:00","added func isChannelActive for mixer, and fixed handling numbers of channel 0

svn-id: r9924
"
"bfee72f75716917bf1444e501909353a84750b22","2003-08-30 20:07:09+00:00","If -1 is going to be a valid value for a PlayingSoundHandle, the data type
had better be signed...

svn-id: r9925
"
"e7bebcf7aa718631159f0bb21ccd99d53f076c37","2003-08-30 20:14:30+00:00","Fixed Simon 2 intro regression (and possibly others as well) caused by
recent mixer change.

svn-id: r9926
"
"c684a076eea7fbb79f5b695fe504f76f0ebac45d","2003-08-30 20:25:07+00:00","revert id handle stuff

svn-id: r9927
"
"b321a7a4689dcd96b80566f19c628cfcef0ff24c","2003-08-30 20:27:48+00:00","ah

svn-id: r9928
"
"dfe5d067bb0f2d21c598a297a263b444e925600d","2003-08-30 20:35:07+00:00","Reverted previous change since the mixer change was reverted.

svn-id: r9929
"
"f72681b10a8bfea5d5627752112207378c3ddf1b","2003-08-30 20:36:44+00:00","Made PlayingSoundHandle unsigned again, since the mixer change was
reverted.

svn-id: r9930
"
"7b3aae7c03b1b3355d47d5704d9f202c219fc955","2003-08-30 21:09:13+00:00","fixed not cleared sound handle for music

svn-id: r9931
"
"f00b48b4cf65380a0a8858e6dfad8ccdcaa95c14","2003-08-30 21:58:10+00:00","Set a default music volume so that we can actually hear it. :-)

svn-id: r9932
"
"c54baa429b5ae607c89c86d7374ed6979897a11b","2003-08-30 22:17:59+00:00","BS2 crashed because it passed a buffer of uneven length to the mixer. This
is the only place I can think of where this could have happened, so I've
added a paranoid check to ensure the buffer length is even.

Let's see how that works out...

svn-id: r9933
"
"4ea7eeb5635066f34a5aafca852b3f7b424e5e75","2003-08-31 00:00:09+00:00","fix compilation

svn-id: r9934
"
"f28581cd89d67af4c99941d5e03e3a65a09322c4","2003-08-31 00:34:20+00:00","Add note about roland update for loom/mi1 [ega]

svn-id: r9935
"
"ce23cdfe50904c618a193c90d118b20359c1f194","2003-08-31 01:21:01+00:00","Update indy3
If there are any graphical glitches left, please add a bug report.

svn-id: r9936
"
"25a7c5de67d5f8b0b08fa4a3902e0b553d3c35f6","2003-08-31 03:19:43+00:00","support having speech clusters named speech1.clu and speech2.clu cd.bin is needed if you want to use this scheme

svn-id: r9937
"
"155f4591c97704b6d235e8eb397166b3d432cd65","2003-08-31 10:38:32+00:00","Cleaned up StreamCompMusic(), including some untested endian-fixes.

This should also fix the bug where music sometimes didn't start playing.

svn-id: r9938
"
"3b62d9b4da96e4860ff596b0f11b18cc5ee0ff67","2003-08-31 10:45:14+00:00","No longer assume that all sound effects are 22 kHz. Some are 11 kHz.

svn-id: r9939
"
"f77faa2313deed248cf1dd9fcbeb842cb9a52b59","2003-08-31 14:58:56+00:00","some things needed for supporting original save/load screens in v3 games, doesn't fully work but doesn't break anything either

svn-id: r9940
"
"b5ece53748f8aa5e0a29d1ebbec68c80bf36d621","2003-08-31 15:39:27+00:00","cleanup and make script_v2 use o5_saveLoadGame

svn-id: r9941
"
"e60ee06e2d0a885cfc71fbb46a2b2fe564ba90b4","2003-08-31 17:28:36+00:00","When a fading music channel is freed to make room for new music, or when a
music channel has faded out, destroy the channel immediately. Don't wait
for the mixer to finish it off.

This seems to fix a problem where the mixer would eventually run out of
slots if you left the Quit dialog showing for too long.

Unfortunately I don't know if it fixes the 'out of slots' errors I
encountered once during normal play. Oh well, time will tell...

svn-id: r9942
"
"54f5caedc5f93f6a7ae067f1fda08c2dedd79de1","2003-08-31 18:09:21+00:00","Untested (because I don't have any savegames on this computer) support for
using music1.clu and music2.clu instead of music.clu

svn-id: r9943
"
"2533b23a601b053dd5394e8da9e787504d37e8ba","2003-08-31 20:26:21+00:00","added mixer features: volume and pan control per channel

svn-id: r9944
"
"82fea4967149a5edd92b90d4cefb181b7587a5e1","2003-08-31 20:36:53+00:00","added comments:
volume: 0 - 127
pan: (-127 <-> 0 <-> 127) (left <-> center <-> right)

svn-id: r9945
"
"b43a6f649616ec65d92b7154b0fe08fc348eb89c","2003-09-01 01:50:07+00:00","Override default initial setting of subtitles enabled in loomcd

svn-id: r9946
"
"c5141005e0e1e3ed0ac082d7c357683762e0bb0c","2003-09-01 03:08:32+00:00","Add CD audio check for loomcd
Revert last change, since it wipped out intro. text.

svn-id: r9947
"
"db6cd6819696d2c39243d174e5540d9dd0a1edb1","2003-09-01 05:07:43+00:00","Add work around for color cycling been used in monkeyvga when it shouldn't.

svn-id: r9948
"
"e9727c157e1ffd455adddad7c351e25da03a2094","2003-09-01 06:11:41+00:00","Minor cleanup of color cycle resource loading

svn-id: r9949
"
"beb138d4d80ca3292ac81ff03232c474ac01da2b","2003-09-01 06:13:47+00:00","added warkaround for not exist music stream id at appendStream call

svn-id: r9950
"
"56ca9f03df72d074ca67197390f8f13df13cb607","2003-09-01 06:23:04+00:00","possibly fixes for not exist id stream channel

svn-id: r9951
"
"178b0d82dfcdb923b2835465d87f75ed9271bd1d","2003-09-01 06:40:07+00:00","Another attempt at fixing the music1.clu / music2.clu thing.

svn-id: r9952
"
"97545e41fb44aa37c419061abd5bc9282740f796","2003-09-01 07:50:47+00:00","Add missing break
Skip auto save slot.

svn-id: r9953
"
"ebf9114f68eaf9c6111cfb81ea311f120f763f09","2003-09-01 09:08:48+00:00","Add v1 maniac load/save screen support
Detect save files

svn-id: r9954
"
"e6a0261c7e599abbe95ffef44bcebc3b38e2cb73","2003-09-01 10:12:28+00:00","The channel could be destroyed so changeVolumeAndPan can't access it in that case

svn-id: r9955
"
"743a3fbdaff119eb2aa9461e92d188f7a1ed7cfb","2003-09-01 13:43:22+00:00","added sound handle stuff to mixer streams

svn-id: r9956
"
"db18d4657c782acd5211487e40431277fdc6be9e","2003-09-01 14:02:45+00:00","forgot this

svn-id: r9957
"
"a2b1e9081cb7beea7f3f589eeecf542ba1911736","2003-09-01 15:40:16+00:00","Fix from Hibernatus, indy3 has black shadows

svn-id: r9958
"
"7b26efda21a113ce710048d983f00c6970561785","2003-09-01 17:11:09+00:00","Add sound looping for Amiga zak/maniac

svn-id: r9959
"
"3f2ca2b36ad9de47e8cb4a54ad24f1f1d98330bf","2003-09-02 03:21:14+00:00","Fix from Hibernatus, correct start position for sfx in Amiga maniac/zak.

svn-id: r9960
"
"1f29e0416cf1828c4303ecfeac5371bc22cc7c0a","2003-09-02 06:13:41+00:00","add note about FluidSynth to ALSA section

svn-id: r9961
"
"f59a0633d6c58b1e37aaaa27af5ad6e4115e436a","2003-09-02 07:18:24+00:00","fixed if check

svn-id: r9962
"
"5a6bce590b4261d2ff5615cbdccf2da66e5586e2","2003-09-02 07:49:40+00:00","changed sounds volume to original volume level, and fixed sounds in bass intro

svn-id: r9963
"
"66cdc7900ea74ca64462f97ad8a76e74c423d05a","2003-09-02 09:54:42+00:00","Re-formatted the code to be a bit more in line with the rest of ScummVM.

svn-id: r9964
"
"5270fa2d5ab14e0c932272b065065ac796f81632","2003-09-02 09:55:11+00:00","Re-formatted the code to be a bit more in line with the rest of ScummVM,
and made a few (untested) endian-fixes.

svn-id: r9965
"
"f90b5f06a5b6cb089415229c89a4a1f5b02f8c45","2003-09-02 11:24:05+00:00","This changes applies to both version 3 and 4, according to disasm.

svn-id: r9966
"
"8c61a29c29abfb3501dcde5ba6bcca2416ba00a4","2003-09-02 12:55:20+00:00","Since soundHandleMusic[] is now an array of sound handles instead of
channel indexes, we should use stopHandle() instead of stop() to kill the
music channel.

Am I the only one who finds the distinction between channel indexes and
sound handles confusing at times? :-)

svn-id: r9967
"
"f486997822e2340dfe36efd828b669aedf59c332","2003-09-02 13:48:20+00:00","Added per-channel pausing. Maybe I should have named the pauseChannel()
function simply pause() to be consistent with stop(), but there already is
a pause() function and I don't want to have two functions with the same
name doing different things. (The current pause() function pauses all
channels.)

svn-id: r9968
"
"730e6b8c384f9fbe87febca4dc6af293dc9ce7ab","2003-09-02 13:50:45+00:00","Use the new per-channel pausing. This allows us to play the music for the
in-game dialogs.

svn-id: r9969
"
"60dd216672e3a0caeaaf37f087aec5eb7a65f172","2003-09-02 14:50:58+00:00","Add missing verbOps cse for loomcd, needs work.

svn-id: r9970
"
"907485c1a2681cf2609eddc51f970bb5dabd7a58","2003-09-02 15:11:19+00:00","Another untested endian fix.

svn-id: r9971
"
"145f17c4a97a1203e9588ebea2e0507468cb535f","2003-09-02 15:55:55+00:00","Moved the sound initialisation to the Sword2Sound constructor to avoid
warning messages about uninitialised sound handles.

svn-id: r9972
"
"124a84033f302b21751fc3cf8c5fea83acdd05fb","2003-09-02 16:20:10+00:00","Unless I'm gravely mistaken, StreamCompMusic() should always create a new
stream, in which case the warning about the sound handle being 0 is bogus.

svn-id: r9973
"
"4b49daf3fff4ccad0012b569905be87f94ebefc8","2003-09-02 16:51:51+00:00","Fixed compiler warning that I introduced earlier.

svn-id: r9974
"
"47a2bc6eb62c99d212ea83ae56402241a871f733","2003-09-02 20:32:30+00:00","update vc7 file

svn-id: r9975
"
"7c4e678a874eee9e1de7d9e476f737892e773de0","2003-09-02 20:34:22+00:00","moved volume and pan control into flow func

svn-id: r9976
"
"534fc0f7a258f8570002c3c794c395eb04c580b4","2003-09-02 21:00:08+00:00","imuse digi use mixer volume and pan control now

svn-id: r9977
"
"fee1cc04eaad2ade518ce8c1967fb21a32b6035a","2003-09-02 22:35:36+00:00","remove unused variable

svn-id: r9978
"
"e17a451ac59928d41aca1966e906bda064646b86","2003-09-02 22:38:53+00:00","remove shadow'd var by using variable name from prototype

svn-id: r9979
"
"455d3faf2f626ff1606d2f8bbabcf32acb6747b9","2003-09-03 03:57:23+00:00","fixed interval of fxServer func (why i saw before 1000 miliseconds?), moved init sound data to class sound

svn-id: r9980
"
"b62c527fa0742fdc2f7753a58e5cdda6de82e934","2003-09-03 04:45:57+00:00","some cleanup code

svn-id: r9981
"
"1fc3c0be23f9d8bbf655a376577fd63276b89c49","2003-09-03 05:04:55+00:00","more cleanup

svn-id: r9982
"
"3fba3b3d4c3cf3d46f5f609e994ca26267f3b2a2","2003-09-03 06:03:29+00:00","fixed music fading out. it's 'goto' hack.
originaly dsound has 3 seconds buffer fillled with data enought for fading
this hack continue play music for time while fading is going

svn-id: r9983
"
"ee68d3d198d50d74fb265e1da0aea8d962f1e347","2003-09-03 06:27:25+00:00","Removed fxLooped[], fxCached[] and musCounter[]. They were written to, but
never read.

svn-id: r9984
"
"018d2ee6b1ee81eb7867add2b130b7602bba4f7c","2003-09-03 08:55:24+00:00","add some stub cases for later humongous games, queue loading and a decodeParseString case

svn-id: r9985
"
"0fb53e1f47dfabf6f1061b89c451725ae7bd8044","2003-09-03 10:26:09+00:00","prepare for larger target names

svn-id: r9986
"
"a0f69481504f32e2ccb32d7581aeb1274da4b321","2003-09-03 10:34:04+00:00","add a bunch of known targets for some of the newer humongous games, maybe we should move the target list out into another file? there are a few more to add after they are known as well...

svn-id: r9987
"
"94df02c799c5ef59ecd9c829b43a5d41f9fb3e2e","2003-09-03 17:00:33+00:00","Implement the ACTOR_PAN opcode. The only place I know of where it's used is
between between ship-to-ship combats, so I didn't bother yet to store it in
savegames.

svn-id: r9988
"
"a1e336c1cbb134dc4a6932226dd9fc9fb28bf1ab","2003-09-03 18:59:02+00:00","Added FIXME comment about how we probably need locking for FxServer() and
the functions which access data manipulated by FxServer().

For instance, FxServer() may free bufferFx[i], which sounds potentially
unhealthy to me.

svn-id: r9989
"
"9729256b2be86a9a7132b7672e80df434058f398","2003-09-04 10:58:55+00:00","Added locking to the music code. I'm not really the right person to do this
but at least it doesn't seem to do any harm.

Disabled the sound FX 'garbage collection' in FxServer(). I'm not really
convinced it's necessary at all, and even if it is, doing it from a
separate thread it just begging for trouble. I've modified OpenFx()
slightly to deal with this, but I may still have introduced regressions.

Temporarily disabled the 'goto label1' hack, since it seems to be the main
reason for ScummVM crashing if I allow a piece of music to finish on its
own (i.e. when not terminating it prematurely by triggering another piece
of music).

svn-id: r9990
"
"aa3687c527355ee3eccbc96d746124a825738811","2003-09-04 11:33:46+00:00","Gave the 'monkey' target the same sound flags as the 'monkey1' target. At
least I think they refer to the same game, just with differently named data
files. This should fix bug #800378 ('MI1: no adlib with monkey target
(regression)').

Should the same change be made to the 'game' (Monkey Island 1, SegaCD
version) target, or is that one too different?

svn-id: r9991
"
"2f800e4b3272cdf15338850b3253e813e0088bb2","2003-09-04 11:40:12+00:00","monkey has no native midi resources and SPK isn't support yet.

svn-id: r9992
"
"16f0cce0bb29087607ed2dfb92e9c6cb633e08d1","2003-09-04 15:24:58+00:00","Leave SPK resources in monkey1 disabled too.

svn-id: r9993
"
"df963e48bd3d6b380f55d2e7d7f674e5fc24000a","2003-09-05 03:29:29+00:00","Corrections for Amiga V2/V3 games from unused.

svn-id: r9994
"
"bb9a4bbfcc035d39f28cede8f7eacf05b633d402","2003-09-05 03:46:30+00:00","comment unused label

svn-id: r9995
"
"5f1c67424d2db1a49346a4bd48b6788ea769a5ed","2003-09-05 03:51:56+00:00","Correction from Hibernatus, is used in fm towns games too.

svn-id: r9996
"
"fccc9a2abb3adfd5620f0f6ce5033c8c58210ad9","2003-09-05 03:55:48+00:00","Changeing warning to debug, since we know functions purpuse and it seems to be confusing people.

svn-id: r9997
"
"7bc63a0ce33336684c8b690fea639e79ebbf5d32","2003-09-05 06:22:10+00:00","fixes for uninitialized pan and volume

svn-id: r9998
"
"3187b565dd60896c55b3f7e04e3d0b872b4c7a3a","2003-09-05 07:36:05+00:00","Add atarist and macintosh options, since there seem to be no way to detect version been used.

svn-id: r9999
"
"c3d61acd5c909ba8c8f9445d24d64c12499a2a67","2003-09-05 07:38:36+00:00","Remove warning

svn-id: r10000
"
"36affb339699f5247b6c067490abf9fdc98bb32e","2003-09-05 07:58:37+00:00","Update docs for new flags

svn-id: r10001
"
"d10036187663cf002fe2e6ff0ede5e8a19803b5d","2003-09-05 10:53:57+00:00","Use --platform option, instead of system specific options.
Needs config support added.

svn-id: r10002
"
"2ecbd4ae88243e1329bcde4b0f64616cab32fc66","2003-09-05 11:12:40+00:00","Cleaned up UpdateCompSampleStreaming() and re-enabled music fading. We
currently don't fade music that ends because we reached the end of the
musical cue, though. Only music that ends because it's being replaced by
another cue.

svn-id: r10003
"
"bee5a3820aff53744243d70ecabe775b7bb1829d","2003-09-05 12:19:40+00:00","Removed unused function, StartMusicFadeDown().

svn-id: r10004
"
"8da8c277768da76efe22d89f8a244c0294f2457c","2003-09-05 15:25:31+00:00","Add mac check.

svn-id: r10005
"
"0c4d151381cbc08327880a0c1bfe73a49d71aaf9","2003-09-05 15:28:22+00:00","*** empty log message ***

svn-id: r10006
"
"94ec5238c934112e34818b0d9441ca5a9fb47ab8","2003-09-05 15:37:51+00:00","This fixes another music-related crash for me. I guess it's our
implementation of music fade-out that makes it a bad thing to close the
music cluster file prematurely.

svn-id: r10007
"
"93d262a01f30288be9ca804879a4877a43c63d5a","2003-09-05 15:53:20+00:00","Oops

svn-id: r10008
"
"7400995094116dd77484c7e1ceb797a4f273fae4","2003-09-05 15:56:43+00:00","Cleanup.

svn-id: r10009
"
"cd9496ab3aee61cd9f86043368b3393bfb3353de","2003-09-05 16:07:03+00:00","Added FIXME comment about DipMusic().

svn-id: r10010
"
"0a9d234b52c5ddd4ae4807760f2bc6d11e4ba8c0","2003-09-05 16:12:54+00:00","Fix platform command line and add to readme

svn-id: r10011
"
"47215f39dd766b97e3cb33116ba34e7eac263cfd","2003-09-05 16:30:05+00:00","Add to config as int for now.

svn-id: r10012
"
"a60526babae8f927e57eccb528616a069fd18b80","2003-09-05 20:18:20+00:00","fixed a warning from the IBM C++ compiler

svn-id: r10013
"
"f8f678d98d7b92580d94e79636e8eef3594c28a6","2003-09-05 20:18:28+00:00","updated commented out to work again

svn-id: r10014
"
"4240dcbe34a8eb9975bf9ed3404e94cea6ba0bcb","2003-09-05 20:18:32+00:00","removed outdated comments

svn-id: r10015
"
"4941df93f90ca429551c5244ff8882ef903cce57","2003-09-05 20:35:00+00:00","removed duplicate check

svn-id: r10016
"
"5f2b0b697735652f91a88ed6e4d038d600412c95","2003-09-05 20:47:23+00:00","made default case outputs a bit more consistent

svn-id: r10017
"
"11193b0746b0ac2962c98255663dd1beef3fc2a1","2003-09-05 20:48:32+00:00","cleaned up sound/mixer.h a bit; renamed some mixer methods for consistency

svn-id: r10018
"
"06b6ff9a44b847423ee611d92dbf8c5fbe583499","2003-09-05 21:06:32+00:00","added default volume/pan values

svn-id: r10019
"
"d6e47884574b34f3f3dbddad36e0ef3400ff27d9","2003-09-05 21:12:33+00:00","any reasons for playing bundle sounds at 50% volume?

svn-id: r10020
"
"caf8e8f5fcf712c4f67296579eaeb7a67fdd535c","2003-09-05 21:18:44+00:00","oops

svn-id: r10021
"
"0045dfe9c61ccff708d4b93eaa699ea09cdec1aa","2003-09-05 21:23:28+00:00","added TODO

svn-id: r10022
"
"3aa8454efaf6674ceade07182ae8c4b2d7f12143","2003-09-05 22:09:56+00:00","moved the sound ID param in playRaw before volume/pan

svn-id: r10023
"
"5ed75550d6e7f0ea64d44146e1c3d023c497e8b7","2003-09-05 22:22:59+00:00","init value of _amiga to false

svn-id: r10024
"
"0cff89b779315c392deeaebae8a3c763473a074c","2003-09-05 22:53:25+00:00","some paranoid cleanup

svn-id: r10025
"
"318daabdc771eabf040df1a15f5abab096ac0f78","2003-09-05 22:53:36+00:00","added whitespace, added FIXME comment

svn-id: r10026
"
"457f2fc21172724a167eb10bdb087986de0338e6","2003-09-05 22:53:46+00:00","rearranged GameFeatures constants a bit

svn-id: r10027
"
"eac128f0118314578a19faf4cdcfdca25ca8666f","2003-09-05 23:27:11+00:00","optimized channel volume/pan handling

svn-id: r10028
"
"af78f4dfae1995c60e2743d702288559174d4230","2003-09-06 01:20:15+00:00","Don't let Amiga and Platform options cancel each other out for Amiga support.

svn-id: r10029
"
"8147719ff2ba0751e2254c1d8d4e1e91cbcbad7b","2003-09-06 01:44:29+00:00","Remove sound looping hack for v2 amiga games.

svn-id: r10030
"
"8b4668740e6988cc597da6dec4ed2bf22df926bd","2003-09-06 02:27:03+00:00","Search header of Amiga V2 games for rate and volume.

svn-id: r10031
"
"ff05aeeb9e5d72c83234e5862cf3106cfadc8eee","2003-09-06 03:05:01+00:00","zak256 partial sfx loops are working fine.

svn-id: r10032
"
"40a5138c577ae88d5e74a63921c3855c80460d95","2003-09-06 03:12:04+00:00","Update comment

svn-id: r10033
"
"0780f7e51953e44fbf63e369005c3aa66f2202dd","2003-09-06 03:34:19+00:00","Change version message to debug, to match other games.

svn-id: r10034
"
"6419a5dd56e92cdf75258ecf8eb4fb588a6ec63f","2003-09-06 03:36:54+00:00","Remove outdated comment

svn-id: r10035
"
"422885415d899d175e6f50ccd08660d03db47ff7","2003-09-06 03:41:12+00:00","Default debug level should be zero.

svn-id: r10036
"
"ffe7cd3feb3f3b616aa56e10f45798c5fdc265c4","2003-09-06 03:48:08+00:00","Actually make these game version message shown by default, so users can better report bugs.

svn-id: r10037
"
"3fe6b6ca7fcb2e6d98be3d2efe0b1c871c79284f","2003-09-06 03:56:41+00:00","Game failure message shouldn't be a debug either.

svn-id: r10038
"
"d1c325a8c72d3b92fdee4d606a40fd320a82dc7e","2003-09-06 04:07:20+00:00","Fix debug level, only > 1 should be valid.

svn-id: r10039
"
"52a59049c793b63e52485330adfcfde749391ffd","2003-09-06 08:46:36+00:00","Other v1/v2 resources are invalid, checked again v1 maniac and v1/v2 zak.

svn-id: r10040
"
"c951e5f8420c858b6253b05fecf362646c872c8a","2003-09-06 08:57:19+00:00","OOps

svn-id: r10041
"
"0be019601319c8536cf42a64e97408ba6fb1716b","2003-09-06 10:47:30+00:00","removed pauseMixer method from mixer, and renamed stop to stopChannel

svn-id: r10042
"
"8c34585a6f1e371098bc1d74d99008a4c3d25336","2003-09-06 11:28:12+00:00","Update news

svn-id: r10043
"
"debf9d27550d73c8467a153f35adf3b0355e401e","2003-09-06 12:03:33+00:00","avoid accidental copying of Map

svn-id: r10044
"
"f633ac23688ed31433b048dfc1f9afc69da9d773","2003-09-06 15:15:29+00:00","Remove color table for C64 maniac/zak since it isn't needed.

svn-id: r10045
"
"bbd23e60ceae570e8bd0f220257a21b01f679355","2003-09-06 16:42:28+00:00","added support for codec1 in nut renderer

svn-id: r10046
"
"6ac86b97604a6248e2e26d6bed1d046d0ff06709","2003-09-06 20:21:54+00:00","added EVENT_SCREEN_CHANGED; small tweak to the way quit is handled in NewGui

svn-id: r10047
"
"fb4b0ef8e442a13f40e1001a2af25002a90ccdfd","2003-09-06 20:27:06+00:00","added simple TODO files, with a few items I'd like to see done; feel free to add your own, or to tackle items you see here

svn-id: r10048
"
"d520f2f44cebdb05d4923e38c804d59b8f41ae44","2003-09-06 20:36:29+00:00","Patch #790433: Fix potential buffer overflow

svn-id: r10049
"
"50520b55fac7f43f2910cc1fe4b198513c7552cd","2003-09-06 22:32:34+00:00","removed superfluous newline

svn-id: r10050
"
"c41936e2329d6f1dd3904435a477becd930fc211","2003-09-06 22:44:40+00:00","some more TODOs

svn-id: r10051
"
"1f59b15f91998bf0b2fdd3fe452fbaca947d67ba","2003-09-06 23:29:35+00:00","implemented FOA keyboard fighting

svn-id: r10052
"
"4e07649c972732dd9a97c77927cf9039e65f450b","2003-09-06 23:35:42+00:00","small tweak requested by unused on IRC

svn-id: r10053
"
"76961a90c061d9af3e953dbc2ffcb4e14c24cccd","2003-09-07 00:00:35+00:00","added an assert

svn-id: r10054
"
"b380affbd57cd7a16bf436984e3476472313bfc4","2003-09-07 00:03:55+00:00","cleanup

svn-id: r10055
"
"2fb59884f1d6d9fe049a525004d313dbd7a39af8","2003-09-07 01:51:15+00:00","some endian fixes

svn-id: r10056
"
"418649fca2064617afd642134d07e0eadf732132","2003-09-07 03:08:59+00:00","minor TODO additions

svn-id: r10057
"
"78476c6bd68834fa0a283c1c4b5ecbb140a94472","2003-09-07 03:18:27+00:00","more endian fixes

svn-id: r10058
"
"116af3c30c95460f1f6945adb5946d44f4772f71","2003-09-07 03:21:30+00:00","cleanup

svn-id: r10059
"
"698b2f0be613c39b8eb458d8203af2c9757c6854","2003-09-07 03:38:06+00:00","add some things, start items with capitals, is this intended to replace the existing web based TODO?

svn-id: r10060
"
"9de8a0cfa9953c40ca37a426cfcc2bfada2c4268","2003-09-07 07:23:20+00:00","Add music player for Amiga versions of indy3ega/loom from unused.
Revert last change to common.rules for now, it broke compile.

svn-id: r10061
"
"1c7d05c93f4b6a6acfd66148c3ae5d4c5b0b7491","2003-09-07 07:24:51+00:00","*** empty log message ***

svn-id: r10062
"
"ad162a11b0dd6ddb2989346aefe4b7e92f3a8233","2003-09-07 09:33:00+00:00","Add news files

svn-id: r10063
"
"fb0e7c3fd2946692ab287231dce06a143450cde3","2003-09-07 09:38:29+00:00","updated vc7 project file

svn-id: r10064
"
"6a438b86a9d393c9df740ad4281a6c9c3acb5d15","2003-09-07 09:39:16+00:00","Fix warning

svn-id: r10065
"
"0012f7fa9669939dbdc4b31b5db432d08d2ce276","2003-09-07 16:16:19+00:00","added common base class MusicEngine for iMuse/iMuseDigital/Player_V123 (initial stab, more work to follow)

svn-id: r10066
"
"17b4ce1c59b9b671aee55b953810874e33539be9","2003-09-07 16:28:41+00:00","small tweak (hm, is IMuse::get_sound_active really still needed? or rather, does IMuse::getSoundStatus really have to return an int or can we cast it to boolean safely?)

svn-id: r10067
"
"38402315d5cb34b610db2eaf9025c307ed8ba374","2003-09-07 16:32:23+00:00","make some first use of Scumm::_musicEngine; cleanup; also some changes which *might* cause some breakage, but if they don't, we can build on them to simplify Sound::playSound a little (mainly by removing lots of 'return' statements)

svn-id: r10068
"
"361c3b95d52babd23b78864e6679334ed1c9e316","2003-09-07 17:14:56+00:00","some cleanup; clarified isSoundInUse semantics and the difference between IMuse::get_sound_active and IMuse::getSoundStatus; added lots of const qualifiers to IMuse; rewrote IMuseInternal::getSoundStatus (hopefully not breaking it); added MusicEngine::getSoundStatus

svn-id: r10069
"
"1dbab0237f253f2427e8218b3c5a2c97fdfb3f62","2003-09-07 19:28:45+00:00","cleanup/refactoring

svn-id: r10070
"
"a7676e07c33a15f0ccd40ae4a64fc929a3903913","2003-09-07 19:47:58+00:00","removed the seperate 'MP3' CD methods in class Sound (besides being misnamed, merging them into their parent functions actually seems clearer to me, reading wise)

svn-id: r10071
"
"ea461dfc3caacd476c91a6e9d83e7464d549768a","2003-09-07 20:23:38+00:00","new header file for VOC specific stuff

svn-id: r10072
"
"7342163c7e50a932820b10589f26be87789a87a5","2003-09-07 20:30:02+00:00","make use of voc.h; some cleanup

svn-id: r10073
"
"a9591325ae2cd30aa4b8a3b63f6460669a7d8535","2003-09-07 20:53:05+00:00","properly decode SBL resources by scanning the VOC header in them; added a guess at how SEGA SBLs work (untested, might be completely wrong)

svn-id: r10074
"
"b71e80a8dec4937eadc82acf62484ca698769273","2003-09-07 21:06:43+00:00","updated

svn-id: r10075
"
"6444ebf5dcc4a79e5e66ac4c477dec9a4ce4f62b","2003-09-08 01:42:24+00:00","Amiga V3 music updates from unused.

svn-id: r10076
"
"9e1d85ce4841d63746c9b4f5f264d655fa6f0bda","2003-09-08 03:06:37+00:00","Correct verb position in mac version of indy3ega

svn-id: r10077
"
"aff37c083b2ae179ac64e0464e11ea2f8cee4a5f","2003-09-08 06:32:37+00:00","Hide the menus when displaying full-screen messages, e.g. error messages
from the save/load dialog. (This probably happened automagically in the
original, but we handle screen updates a bit differently now.)

svn-id: r10078
"
"0b86100456736d625951734e4a9880e54a170b5a","2003-09-08 06:38:16+00:00","Complete rewrite of the in-game dialogs (quit, restart, settings, save and
load). The new code is smaller, hopefully a bit easier to read and doesn't
use up all the CPU time.

Of course, it may some new and exciting bugs too. ;-)

svn-id: r10079
"
"3ff18fe4ff0501ca56548cdd19795e5c252a4271","2003-09-08 07:06:18+00:00","update vc7 files

svn-id: r10080
"
"a3aef4e0d6cf46bec99b8b4c7339945a9fc2fef3","2003-09-08 07:07:30+00:00","fix warning

svn-id: r10081
"
"18ddf05a7af8fd82cfe6cbe89ff14fca96f83df4","2003-09-08 07:09:11+00:00","update

svn-id: r10082
"
"3156f0dd2f1e936d1d0d0e61229cb8efecc184b6","2003-09-08 08:54:37+00:00","Reduce PalmOS data segement

svn-id: r10083
"
"c5a3c1235c75d90c46707f819a13316948410482","2003-09-08 11:29:57+00:00","some cleanup

svn-id: r10084
"
"84a87ec24c3b26e4c1c0ee9c6482c0db6fbe8675","2003-09-08 11:41:28+00:00","fix for bug #802396 (LOOMCD: Sound often causes lock up)

svn-id: r10085
"
"ac72d0cec721ccd8420112c6f3092514218e2cc9","2003-09-08 11:54:13+00:00","removed some superfluous newlines

svn-id: r10086
"
"a304d550c074b734f5c3efa2d0d54ac9cf228277","2003-09-08 12:59:08+00:00","Some files are located in a different folder in Atari-ST version of Zak

svn-id: r10087
"
"63cd3051f33f8e8279f36a3436be676e1881f376","2003-09-08 13:28:56+00:00","WORKAROUND bug #770065: Sync issue in lens conversation (this is actually a script bug)

svn-id: r10088
"
"ef373fe2e8f60a8740d6201c8d8928af1a9b6dba","2003-09-08 15:32:37+00:00","start to use code from the original resample codebase, since it uses fixed point math instead of float; however, the code is not at all complete right now, I just commit this to get it off my HD (neither the old nor the new code in resample.cpp work anyway)

svn-id: r10089
"
"c3491bbfab881c8f2e2680031580635ba98daddf","2003-09-08 15:33:26+00:00","adding some comments, reordering some stuff

svn-id: r10090
"
"ea0fcaaea0287e05cbcb883f83153b15c7ee68e8","2003-09-08 15:34:50+00:00","put back my previous changes which Kirben reverted (correctly: I had forgotten to commit the updated Makefile.common)

svn-id: r10091
"
"f23a34c9e5cd236c2454c2dee716841d9dd58acd","2003-09-08 15:38:34+00:00","renamed VersionSettings -> TargetSettings and also renamed some of its members; added GameDetector::findTarget; made launcher use that new method; some initial preparations for Plugin code

svn-id: r10092
"
"bac8a0da5b0f0a14bb76372ca6163b71c55d62a0","2003-09-08 16:10:05+00:00","added a FIXME comment

svn-id: r10093
"
"302974b00319316c98a4e04881b48932388cc181","2003-09-08 16:47:21+00:00","set _musicEngine for V1/V2 games, too

svn-id: r10094
"
"5ecee0f0467808160cd0f4e2f0bb85a80e8ea2a5","2003-09-08 16:48:34+00:00","fix an overflow

svn-id: r10095
"
"07cfd2d0eeb03cb1c44088024b48d919225720da","2003-09-08 16:50:54+00:00","overlooked one 'new Player_V2'

svn-id: r10096
"
"90ec1dc34ea403c0e23ff820d5ca20a7b9ca0140","2003-09-08 17:06:44+00:00","make even more use of Scumm::_musicEngine; added MusicEngine::setMasterVolume

svn-id: r10097
"
"6455c819896d58782f9ec195e0b716a1df32c296","2003-09-08 17:13:40+00:00","more plugin related work

svn-id: r10098
"
"c2070e28fa7345e8e6fd7f0369a627b49ba47d1b","2003-09-08 17:18:38+00:00","Added some code to display the subtitles for the Smacker movies, when
available, since they are separate from the Smacker files themselves.

Next step will be to play the voice-over sounds as well, and to make sure
subtitles settings etc. are taken into account (if they aren't already).

svn-id: r10099
"
"d0949b7035a1697dac2de6c26f710538b43dcd9d","2003-09-08 17:24:00+00:00","Updated comment.

svn-id: r10100
"
"940200f1735190e85d204b109861a6b091f6cc66","2003-09-08 17:25:44+00:00","got rid of version_settings

svn-id: r10101
"
"f61fdef99623f0c76b692aa04fb89dbd613bfd09","2003-09-08 17:30:24+00:00","fixed disabling of modules

svn-id: r10102
"
"3916b973578be838afb15493b836d55e8d68d3ae","2003-09-08 17:42:53+00:00","changes to get a better link order, and to allow building a 'bare bone' scummvm executable

svn-id: r10103
"
"a6661b2070b16cc613c5775ffaf4a42f2060baff","2003-09-08 17:44:26+00:00","Cleanup.

svn-id: r10104
"
"c775614e1b6ecec6ae910c18775f0755e72ea50e","2003-09-08 17:46:54+00:00","fixed circular dependency; moved version string to main.cpp (seems more logical to me, too)

svn-id: r10105
"
"155bac05dad6a37b61c5584ce78d94114c40d42a","2003-09-08 17:48:34+00:00","more logical link order

svn-id: r10106
"
"769f5c291997dba6cde9bd4b89391bff7d4e9872","2003-09-08 18:09:32+00:00","added About dialog to launcher

svn-id: r10107
"
"bc8fd13172bfd4dffa4b4e8df98dc04b6be9b478","2003-09-08 18:09:40+00:00","minor TODO

svn-id: r10108
"
"26a1040886b711791765073ecd87f527eb662a2b","2003-09-08 20:46:25+00:00","turns out that in the GFX usage bit conversion process, we accidentally left out this code. This should fix bug #744794 and potentially others

svn-id: r10109
"
"72b24e8b4729e105497c207fd055fbc2db003a3c","2003-09-08 20:50:35+00:00","actually USAGE_BIT_RESTORED must be cleared, too

svn-id: r10110
"
"738470b02e16b69ffb0ce938bbc09a5e29f0305c","2003-09-08 21:03:31+00:00","moving stuff around

svn-id: r10111
"
"31db86cdb1f3c96b9c5dc91904baef174f4ea5aa","2003-09-08 21:04:17+00:00","fixed yet another bug in redraw logic (which was hidden so far and revealed by my previous fix)

svn-id: r10112
"
"7655513c31037d015ac57e53b92363b24759a225","2003-09-08 22:26:20+00:00","added a TODO

svn-id: r10113
"
"aa61764b2f904b30dcdc8e0d107d2a60f51a7158","2003-09-08 22:38:21+00:00","while 'more logical' the current link order doesn't work if all plugins are disabled. 'sound' has to come before 'backends' or MidiDriver_MPU401 won't get pulled in

svn-id: r10114
"
"b8d72d8854551d3bfc20d118b8e5c6a07cdf3818","2003-09-08 23:18:11+00:00","added comment describing Mac0 format

svn-id: r10115
"
"697ac22c32c3ddc0ea25062a9e7945f4e7e5c8cc","2003-09-08 23:35:36+00:00","mention some GM instrument numbers

svn-id: r10116
"
"821faf9e03cf770d18b28d14ebc0a1291d68a24c","2003-09-09 00:13:19+00:00","added convertMac0Resource (which doesn't do anything yet, but is the place we can add Mac0 support in later); factored out some common code in convertADResource; fixed memory leak when convertADResource was called; misc cleanup

svn-id: r10117
"
"24560608eda1c834b55bcfbf5bf22b23d436e0d0","2003-09-09 00:20:55+00:00","cleanup

svn-id: r10118
"
"6adb8560a857d10f8d4730c184e131857a82d2a7","2003-09-09 01:21:42+00:00","some initial work on Mac0 support. Everybody feel free to pick up here and implement the rest <g>

svn-id: r10119
"
"083be33f1aa8f490c26c9334195eec48db0930a0","2003-09-09 06:37:01+00:00","fix sfx routine

svn-id: r10120
"
"5396901ec6909e3e03c9e70d1b05bd2ef60efa52","2003-09-09 06:49:15+00:00","Simplified the code to decide whether to use speech1.clu or speech2.clu
since res_man.WhichCd() appears to be working now.

svn-id: r10121
"
"e68176f8c390cf431aff9862639b9a384920517a","2003-09-09 06:54:11+00:00","Read Smacker voice-overs from the correct file, same way as speech.cpp does

svn-id: r10122
"
"fb6e8dd62878ea2b1806f98bc9b5bd2a10bacee5","2003-09-09 07:01:04+00:00","Clarified some comments in PlaySmacker(). At this point it should be fairly
trivial to actually play the Smacker voice-overs, but I think the sound
code needs a bit more cleaning up first. (I'm pretty sure it isn't
alignment-safe, and it might not be endian-safe either.)

svn-id: r10123
"
"2b2cdf00aa92a8b79c2259ad9bb4d0f311898673","2003-09-09 08:00:09+00:00","updated vc7 file

svn-id: r10124
"
"f0d926a5f8e825fc0e3992550bc9857ea687133b","2003-09-09 08:53:04+00:00","Resampling is no longer required.

svn-id: r10125
"
"29607a17efcfcd88c76b69c0295e10dc152b0ee1","2003-09-09 11:52:43+00:00","Cleanup

svn-id: r10126
"
"bb5f479a8c11d1189b004f20009508777060e56f","2003-09-09 12:14:08+00:00","Added a WaitForFade() function, to replace numerous while-loops scattered
througout the code.

svn-id: r10127
"
"2c67f7b32fbcdfe78b28da5a13a03d16c558d3d7","2003-09-09 12:34:13+00:00","map 0xD3 in VOC headers to 22050 Hz, too

svn-id: r10128
"
"555dae9feeaaf2559dfe4c9fb4fb5dbcb19404c0","2003-09-09 12:36:41+00:00","map 0xA5 to 11025 Hz, too

svn-id: r10129
"
"5bf1974a0853f9b1d303f74f45c23e6d409ecb5d","2003-09-09 12:45:33+00:00","Our ServiceWindows() never returns RDERR_APPCLOSED, and we always behave as
if we have the focus, so there's no need to check.

svn-id: r10130
"
"123c9035cff9505a40ee2c6bc7bc50b330055fac","2003-09-09 13:23:09+00:00","Up debug level of this warning, since it floods output in loom

svn-id: r10131
"
"ce60ec314550910f141936e89d8e94608df22497","2003-09-09 13:29:18+00:00","added some comments to a FIXME

svn-id: r10132
"
"2fb39d780fde6896e31de60bca3baacd91ed28b3","2003-09-09 14:14:29+00:00","Add indexed readme from 0.5.0 branch with updates.

svn-id: r10133
"
"aab3555460ab602613e0183ab4e9aa0d77dc3674","2003-09-09 14:16:28+00:00","Has not been Amiga AGA port for long long time.

svn-id: r10134
"
"b45d401948a6450f69e7efb1dc9bf1780d93949f","2003-09-09 14:20:00+00:00","Missed config option

svn-id: r10135
"
"bc28dac67dfe47396fde3bf822512a9945f4a3c2","2003-09-09 15:10:07+00:00","In PlaySmacker(), make sure there really is a text sprite to draw.

svn-id: r10136
"
"78afd89698b41943feb9d49b607e7b70895f185a","2003-09-09 15:17:12+00:00","Reworked the last commit a bit, so that PlaySmacker() doesn't need to know
as much about the text handling functions.

svn-id: r10137
"
"d5f42972218a11522ac12bc580b566295fa2f7e4","2003-09-09 15:54:13+00:00","HACK: Display instructions during the cutscenes, so that the user won't
think ScummVM has hung or something.

svn-id: r10138
"
"163ecdc05406edd90dd4b336f23a8853a4b518d8","2003-09-09 16:55:25+00:00","added convertScaleTableToScaleSlot method, preparing to replace scale items with scale slots

svn-id: r10139
"
"07e8084eee1b0397b78aa6ee300855d1a1963503","2003-09-09 17:29:22+00:00","replaced all use of scale items with scale slots. This allowed me to get rid of two big FIXME's, and might fix other scaling bugs in FT/DIG

svn-id: r10140
"
"4b9e30171b79e7e4e0d11b7b3dbb9cae8dee15a2","2003-09-09 17:33:29+00:00","fix for bug #749970 (FT: Animation glitch at the fuel tower)

svn-id: r10141
"
"70df5b782c07f424920275fcb4defd7b1ee47c49","2003-09-09 17:50:20+00:00","another fix for bug #802396 (LOOMCD: Sound often causes lock up)

svn-id: r10142
"
"d875bb69fe436fe071e9ad5363a203e99e793ed0","2003-09-09 19:30:25+00:00","fix for bug #782086 (COMI: a long walk)

svn-id: r10143
"
"deb4f6b78679527735225808161cc223d13dfa78","2003-09-09 20:54:19+00:00","cleanup; fix for bug #795942 (COMI: text display off screen) and #785760 (COMI: Lockup/crash on Skull Island)

svn-id: r10144
"
"94c4cf0e55a2286cba82c5d1317ab85503f5124d","2003-09-10 00:28:26+00:00","fix for bug #770042 (LOOM: Some bits of dialogue are repeated)

svn-id: r10145
"
"87ff23ddc15b15d8b5d1f37ab7900b468bb42cf5","2003-09-10 03:50:03+00:00","Correct RO sound resource size for blocked games.

svn-id: r10146
"
"0cbbfa14105e67d77d739f1f0dedc31c7e84aaf2","2003-09-10 08:30:55+00:00","Add comment

svn-id: r10147
"
"77ae18255bb5ac555087ee3314e8ea9c02a6c436","2003-09-10 11:43:19+00:00","Check for Roland patch in loom and monkeyega, give better error if patch not found.

svn-id: r10148
"
"110152ddcf0ba53528b7f8eaa0a96f2e8349841c","2003-09-10 12:15:51+00:00","moved declaration of error/warning/debug from engine.h to util.h

svn-id: r10149
"
"eae239394c7e230a9e7ad682306a537d21aef544","2003-09-10 12:19:57+00:00","moved declaration of error/warning/debug from engine.h to util.h; added voc.cpp

svn-id: r10150
"
"925ddb1b8605a6659aef426ff0494c7ede8716c2","2003-09-10 12:23:42+00:00","moved declaration of error/warning/debug from engine.h to util.h

svn-id: r10151
"
"07a9646997cca2fe2cdc22708e33bd08b61bb927","2003-09-10 12:31:20+00:00","moved declaration of error/warning/debug from engine.h to util.h

svn-id: r10152
"
"c832c55f90891463668169df0e5c26378d096775","2003-09-10 12:35:29+00:00","Fxo sky module compile

svn-id: r10153
"
"65a6bcb90bfb98522325c77b50b43e28ed6ddfd1","2003-09-10 12:40:41+00:00","moved declaration of error/warning/debug from engine.h to util.h

svn-id: r10154
"
"c0e2d2be66c783a7a3c149b8accc941da894d567","2003-09-10 12:41:14+00:00","fixed module.mk

svn-id: r10155
"
"afe56a4aebd46d77b4c4cfbfda0bdb8533f0e318","2003-09-10 12:43:54+00:00","added refCon parameter to timer class

svn-id: r10156
"
"080128d7485b251736c87fa2df9cb9d0a4a2d90b","2003-09-10 12:45:42+00:00","removed superfluous #include

svn-id: r10157
"
"1ccc58aa035d3d74efe1dc66f7327b432727a8f1","2003-09-10 14:43:42+00:00","cleanup

svn-id: r10158
"
"1080dac5ac0a52782bbdb25928a3485651a111b9","2003-09-10 15:02:58+00:00","instead of abusing the 'recursive' attribute to flag V2 background scripts, use the freezeResistant attribute. This is a bit more consistent. Also, verb 254 should stop *any* sentence script, not just background ones; some cleanup

svn-id: r10159
"
"5b20c4fb91337ffc0ee5cf1c28381a0f39fa72c5","2003-09-10 16:05:26+00:00","disable code because it crashes

svn-id: r10160
"
"87dd04e038e570c3b3c009a2c6e2387a650ce268","2003-09-10 17:15:44+00:00","fix for bug #776807 (MM: Jail Door Closes). Our doSentence implementation should now be pretty close to what the original does. But regressions are possible...

svn-id: r10161
"
"faf32582410a13e51b66cedba340e0b52df089b3","2003-09-10 22:35:35+00:00","cleanup

svn-id: r10162
"
"ba34c1f4cf2c6a20d067020390e4949b2d71df35","2003-09-10 22:36:46+00:00","experimental fix for bug #802396 (LOOMCD: Sound lock up); it turns out this is a very long standing bug (pre-0.4.1 at the least). This fix may cause regressions in games using CD tracks, beware

svn-id: r10163
"
"d711f0a71600d72a76a27c3896550ee9811be44d","2003-09-10 23:29:33+00:00","fix for bugs #782733 and #794364 (hide mouse while smush video plays)

svn-id: r10164
"
"232c050f73059422573d5776fd31571f003cb899","2003-09-11 04:06:18+00:00","Roland updates only applies ot PC versions.

svn-id: r10165
"
"651978bb926cc85bdb4dbdfb64d59ad55a454b72","2003-09-11 09:12:24+00:00","A few if check fixes from Hibernatus, which were checked against disasm. of related games.

svn-id: r10166
"
"c8876de19265602acf188b22d8423af3e4fb9e47","2003-09-11 09:28:50+00:00","Original load/save screen fix from Hibernatus
Allows indy3ega/loom screens to work, although load/save are stuba.

svn-id: r10167
"
"a3bb9f81e0502f66e368b5e58861ffbb5cfdcd41","2003-09-11 10:10:38+00:00","added time.h and math.h to default/precompiled headers

svn-id: r10168
"
"81f10baa68d36f42f4988b971dff312439906a2f","2003-09-11 10:32:15+00:00","cleanup

svn-id: r10169
"
"a323d65cc388245a2396721804684927bc08e556","2003-09-11 12:48:02+00:00","Should redraw in both cases.

svn-id: r10170
"
"06c93b1821c4d3a1ebd2c8281095858f0b080ed4","2003-09-11 13:02:13+00:00","oops

svn-id: r10171
"
"becabcce131f5fd5474abbc27f4bb950b575f7a6","2003-09-11 13:39:27+00:00","fixed version check

svn-id: r10172
"
"e94a0683aacd2baac7faf76ec99630d04f53ada5","2003-09-11 13:40:22+00:00","fixed kBoxLocked handling, bug #771483 (ZAK: Pushing Sarcophagous feet on Mars)

svn-id: r10173
"
"41a8905519b421efb0eb5b0776d139322625a2f9","2003-09-11 13:43:30+00:00","fix for room-scroll regression in V1/V2 (essentially, we never init the camera y-values, except here, for these games)

svn-id: r10174
"
"6c4d6889f549dd09ef8b1e5faba59e77f5676991","2003-09-11 14:11:31+00:00","hum, why was this not commited by CVS?

svn-id: r10175
"
"ce7e59e1ae9685aa0b106e20ff7098cbd941829c","2003-09-11 14:11:45+00:00","V2 walk matrix support

svn-id: r10176
"
"6aa7a63ea0858ebf26e4f1db1c855cc774e584d4","2003-09-11 18:23:53+00:00","fix V1/V2 walkmatrix debug command

svn-id: r10177
"
"c697e0fa6773fa0036065aab20f5fa1eb16e6ea0","2003-09-11 20:49:10+00:00","nicer box matrix output in V3-V8 games

svn-id: r10178
"
"ff225c470cbd336c947e8e783ce6d13d94942794","2003-09-11 22:00:36+00:00","cleanup

svn-id: r10179
"
"f21f830633556cc9fe0747f3a3339e4b49d482d1","2003-09-11 22:12:24+00:00","fix long standing bug in walkActorOld() (though I have no idea if it affects anything :-)

svn-id: r10180
"
"32c0168087310ae945b64c0f1d61c165f19a95fe","2003-09-11 22:26:44+00:00","cleanup

svn-id: r10181
"
"538812d9fc25d572bec89bb9559221c7776aa1f4","2003-09-11 22:36:21+00:00","yet another tiny cleanup.... yeah yeah, I know I am annoying

svn-id: r10182
"
"9e88df9e16bebd907e0f7afe22c09fc56a0696c9","2003-09-11 22:57:06+00:00","some (untested!) support for backends which require unsigned audio samples

svn-id: r10183
"
"0161cd4bb896b626129d35206303905d8d2c414e","2003-09-11 23:23:40+00:00","let getObjActToObjActDist round up when dividing the distance by 8 for V1/V2 games. This helps in fixing bug #774529, but might cause regressions...

svn-id: r10184
"
"7be171f910b9368dc93691886303ee9c964c0c80","2003-09-11 23:31:46+00:00","changed actor walking for V2 games a bit; this fixes bug #774529 (Zak: Annie walking in funny places)

svn-id: r10185
"
"76d8ebf52fa450d57beb6f44aaaa0f7b23ef01d1","2003-09-11 23:44:03+00:00","no need to manually call update_screen after a warp_mouse - if the backend needs to do a redraw in order to move the mouse, then it's the responsibility of the backend to ensure that it gets one

svn-id: r10186
"
"75d4f45a8dc435c44d9c3a218ddc2511f93f4b61","2003-09-11 23:53:38+00:00","moved set_mouse_pos around just to make clear it's not part of the OSystem API anymore

svn-id: r10187
"
"dff4f8f445c636c0b331ad18ab53707fd222d3a2","2003-09-12 00:07:42+00:00","my TODO was correct ;-) fixes regression in Zak

svn-id: r10188
"
"a86f6ed55c297ba4a1995e301f98bcb0129cfc54","2003-09-12 00:42:36+00:00","fix/workaround for bug #770717 (ZAK: Zak walking on spot)

svn-id: r10189
"
"90dd98511b74fff68b1fee39d6e7a6b80c4ccf56","2003-09-12 03:13:51+00:00","A few small updates, query on the status of Indy walk bugs (see FIXME comment in Readme).
I propose 0.6.0 is codenamed the 'Mad Max' release. Any seconds? (reply to -Devel)

svn-id: r10190
"
"c805e260a9a871db17866c2957ccc9042d46763c","2003-09-12 09:50:33+00:00","Fix COMI regression for now, seems to require x min/max values for camera to be set first.

svn-id: r10191
"
"9dc282f1d59c75f4aa0cbda6e85efd6ea30dc347","2003-09-12 18:52:53+00:00","endian fixes

svn-id: r10192
"
"2ce7c27f0b6bd7fc5166de0dcdedde7dea984655","2003-09-12 20:26:54+00:00","properly fixed parallax layers in BE systems

svn-id: r10193
"
"54f284fb3bf569ec5c9064290e0a453e3309e220","2003-09-12 20:46:12+00:00","No need to have convertEndian member of class resMan

svn-id: r10194
"
"e2b842a85a751e42dd43b1a666fb658aab2b6fce","2003-09-12 20:48:28+00:00","move convertEndian around

svn-id: r10195
"
"af14b48b4d224726e586f7ef5cae925a0d371eef","2003-09-12 21:40:44+00:00","cleanup / fix WALK_GRID_FILE case in convertEndian

svn-id: r10196
"
"4d9296d4c4b2b8f81575ff37bea80835d2d98a05","2003-09-12 23:22:45+00:00","cleanup

svn-id: r10197
"
"01fc842d917abc69f94d97043e3d51d004584c82","2003-09-13 00:19:39+00:00","endian fix for walk data

svn-id: r10198
"
"c96ce86cab7e5c0b7d3ddb90893e31332bfdbe91","2003-09-13 01:06:41+00:00","<joostp> *Fingolfin does +5 damage to endian bug.

svn-id: r10199
"
"befc7ed3db33b36690584f14c38bba174bd4d67c","2003-09-13 01:08:45+00:00","workaround for bug #791207

svn-id: r10200
"
"cc427cdcdd55c0a9261018e4e4efa27e7017fb66","2003-09-13 01:42:36+00:00","More Amiga V3 sound updates from unused.

svn-id: r10201
"
"d517558b106b4e258be4811820de5a046a4e3482","2003-09-13 01:45:12+00:00","proper fix for bug #791207

svn-id: r10202
"
"e93964cc4cc620adb7bc6ae75f0484c1ad91a287","2003-09-13 01:50:11+00:00","yet another endian fix

svn-id: r10203
"
"403ba92327072f5764c0351399a80a882ff1c80d","2003-09-13 01:59:11+00:00","cleanup

svn-id: r10204
"
"a00930fbcb32bdc1a591d294eb1d6a9aa7796c90","2003-09-13 01:59:57+00:00","YAEB

svn-id: r10205
"
"f18b68cb09b35123a30f5a6dde896f657a40aaf1","2003-09-13 02:11:05+00:00","wow - now I can walk around in the BS2 demo!

svn-id: r10206
"
"a81ea7667b622667b5ca7a8bf94acc74106f88c0","2003-09-13 02:28:17+00:00","improved heuristic, fixes crash when clicking on the fence

svn-id: r10207
"
"ac8e16cc2e282ae246b339915cc734526f8a1ac3","2003-09-13 04:38:37+00:00","Update comment

svn-id: r10208
"
"e8f7f2a4e1233a8d67ba8692e698e165999a95bb","2003-09-13 06:56:47+00:00","Another fm towns sound fix from Hibernatus

svn-id: r10209
"
"c4d293bab1493e7b20c1613c20fb49c105a618ef","2003-09-13 07:04:20+00:00","Add comments from Hibernatus

svn-id: r10210
"
"5c5faaca2ad71088bdfb349ba4107d6b31538577","2003-09-13 08:49:41+00:00","update vc7 files

svn-id: r10211
"
"adcbedbfdeb8729b0b0566af69c9654575ce6055","2003-09-13 10:31:46+00:00","hack isn't needed anymore

svn-id: r10212
"
"d6eddef542712e9b8e8d222638afec0f9f450be7","2003-09-13 11:26:51+00:00","clarified Loom related comments

svn-id: r10213
"
"9b960e6ceb3b93cf0faad1cdb4b0d2248af7495c","2003-09-13 11:31:47+00:00","trying to fix VC6 project files manually - beware :-)

svn-id: r10214
"
"f6cfd5775e5b1430ea8e0d805da13c51fb27ff89","2003-09-13 11:39:25+00:00","fix LE bug

svn-id: r10215
"
"41a17b9da6ed1f4345bb0d492ac617862d0602f2","2003-09-13 12:03:29+00:00","let the interpreter use native endianess for variables -> this allows us to get rid of various endian conversions, and also fixs lots of other problems on BE systems. Beware, though, this may impair save game exchange between LE/BE: we'll have to adjust save_rest.cpp to convert to/from LE upon save/load

svn-id: r10216
"
"989f3f921533e95b669054f0d13040353f4f1a15","2003-09-13 12:04:48+00:00","Another fm towns sound fix from Hibernatus

svn-id: r10217
"
"f9c28dca49481528fb49d1316811b2312e28847c","2003-09-13 12:08:17+00:00","cleanup

svn-id: r10218
"
"35e5c731276bb9c9853a461f900643e89802182f","2003-09-13 12:12:11+00:00","endian fix

svn-id: r10219
"
"20fe2b83fceb139f9d08d5971595f66f9889df77","2003-09-13 12:15:13+00:00","should have been an int32

svn-id: r10220
"
"f02d38ce5ae19ab92512992db78bc39a2d10e95f","2003-09-13 12:37:21+00:00","a little updated opcode: openFile and deleteFile

svn-id: r10221
"
"49f84b9c41520f8c858e1bac6a78ecca8751fd47","2003-09-13 13:02:44+00:00","cleanup

svn-id: r10222
"
"d2e56ed4a2b7464644ceafce7a8f3469c7425d4c","2003-09-13 13:04:55+00:00","endian conversion in save/restore code (may not be complete, beware!)

svn-id: r10223
"
"bd50e9f3d7ee0a0e89ccb954387232ab8d923c80","2003-09-13 13:05:52+00:00","some more endian fixes

svn-id: r10224
"
"059781c80a3fe3e120914650cad0dd94f353246d","2003-09-13 13:20:28+00:00","fix g_header -> header in comments

svn-id: r10225
"
"c334c1103fbb927d4826bcafd89a71fa7391a093","2003-09-13 13:41:44+00:00","implemented opcodes: openfile and closefile

svn-id: r10226
"
"b6e4fb2ef788f5e286017a87bfad4170c1999735","2003-09-13 13:59:46+00:00","since _hFileTable is only used by Scumm_v6, there is no reason to put it into class Scumm

svn-id: r10227
"
"7f81defbfffe55663828378913f4d1c0b6eb8bb2","2003-09-13 14:09:36+00:00","Revert change, was not needed after all.

svn-id: r10228
"
"6d94352f2fd295f4f561ce44cee54247851b573f","2003-09-13 14:32:40+00:00","fix speech on BE

svn-id: r10229
"
"bcb87f41261358620b0ccc34bbb37db81d046a6c","2003-09-13 15:02:59+00:00","Add a new hull curve entry needed by Indy3. This fixes bug #770698.

svn-id: r10230
"
"1976374521b25bdecb47c2c69da60216ae854c81","2003-09-13 15:23:18+00:00","Re-added BASS-specific hotkey section. (There used to be one, but it seems
to have disappeared under mysterious circumstances.)

svn-id: r10231
"
"0c0f967c596a8f9933ab6584f81993db62658d89","2003-09-13 16:25:33+00:00","implemented fileread opcode

svn-id: r10232
"
"5aa69da8efc79fcd5252811de17b62957a9bab5d","2003-09-13 17:36:31+00:00","convert run lists in the res manager

svn-id: r10233
"
"51703e1014b8d72aa2469819a8c483870a3a503a","2003-09-13 17:36:39+00:00","pack _parallax to be on the safe side

svn-id: r10234
"
"54a6946eee0e8789bf3b9d66b81378119c4852d3","2003-09-13 17:36:53+00:00","cleanup

svn-id: r10235
"
"42bf2a855caf986b26c2ad572ae857c25d0296d3","2003-09-13 18:06:19+00:00","cleanup

svn-id: r10236
"
"2afc2c0ca98ab759e5d39a620abd1002fe1c4d0b","2003-09-13 18:18:02+00:00","fix global vars storing

svn-id: r10237
"
"971fff61b88bbb49f9349f8e237a7c30df9a05e1","2003-09-13 18:36:16+00:00","fixed size logic in readFileToArray()

svn-id: r10238
"
"bd11fd12176a1ea76fbb2ceff8415658ea75b889","2003-09-13 18:45:56+00:00","remove path in filename at delete func too

svn-id: r10239
"
"7eb758f69722a5c201c99c9f9c384494dd2e4cf0","2003-09-13 19:26:44+00:00","I am not happy at all with the slack our team has shown recently! I barely concealed these obvious mistakes, to check who's paying attention. And only one person (olki) did notice, and even he only got 50%... tsk tsk tsk, how shall this go on. What will happen if I make real mistakes instead of purposeful ones? *cough cough* yeah, right

svn-id: r10240
"
"52ff6acc1fa224b3027d5e6268e37e681fdf2031","2003-09-13 20:42:08+00:00","and another endian fix

svn-id: r10241
"
"b735d9031dddc13dd032b0dfb5de61284894dc8d","2003-09-13 20:54:12+00:00","implemented fileWrite opcode

svn-id: r10242
"
"398af102a1fa8c44088a9567c3095b1a565c272d","2003-09-13 20:55:42+00:00","fix for bug #732414 (ZAK256: Some verbs do not highlight correctly)

svn-id: r10243
"
"199e9632b8f4b0d90fc21640e288e1cb56db8948","2003-09-13 21:04:47+00:00","fixed badly commit

svn-id: r10244
"
"30e478589676c64ce37135d1f558c49c4bb48e25","2003-09-13 21:20:05+00:00","simplified code

svn-id: r10245
"
"47827b1f22836fb837787b31752eea6bde07dd40","2003-09-13 23:50:29+00:00","disabled a stone old hack; Ender, maybe you remember some details about this fix? anybody feel like playtesting the Mystery Vortex, please? :-)

svn-id: r10246
"
"dbc29272e9e5ec3a8d2f83a0781bd90549b221ea","2003-09-14 00:37:47+00:00","use old method to decide on text colouring for loom towns, I think the pink distaff when returning to the first room may be the last bug left now

svn-id: r10247
"
"ad09725b3e0f95cc08cc8fb00f14a58cf61b9a72","2003-09-14 12:52:38+00:00","evil fix for #bug 801293 (ALL: Ctrl+alt+b opengl switch) and some cleanup

svn-id: r10248
"
"aa944976318af6276f46ca7b8eac0c0132f592a1","2003-09-14 13:36:49+00:00","reverse my fix for the sarcophagus problem (I reopened that bug report, as this broke lots of other locked boxees. Now that I have dosbox to compared with the original Zak, I see that we are doing something wrong, and have a notion of what that might be; still need to figure out a way how to fix it

svn-id: r10249
"
"f36473e25bc63210d6f232ccb20433018471aeac","2003-09-14 13:42:28+00:00","clarified some TODOs

svn-id: r10250
"
"c902282a0569619d1091c9a603428a9dfe54375c","2003-09-14 15:03:12+00:00","A hack for bug #770581.  This makes the sound much closer to the
original, but I think to make it completely right a bigger change to
the adlib backend would be necessary.

svn-id: r10251
"
"fd7727e9d2a5414e021439eb88d30ca687ac691e","2003-09-14 15:07:39+00:00","Fingolfin, now I am really disappointed with you that you didn't see this bug... ;)

svn-id: r10252
"
"6512592d0f0be9afcc0f3aa30b1b505490ebea54","2003-09-14 18:16:45+00:00","moved Actor x/y to _pos.x/_pos.y -> this makes it much easier to grep for access of the actor position

svn-id: r10253
"
"d91278198b40cb86d9816971904fbad1e9bcfbf3","2003-09-14 20:34:48+00:00","Fix for Bug [805593] MI2: Music stops in LeChuck's fortress

Implemented _cmd_queue save/load. In addition to requiring
_cmd_queue information, this bug arises from a rare assumption
that sound resources are loaded in memory even though they
aren't currently playing. Therefore, a list of sound resources
loaded in memory is included in the savegame, so that all
relevant sound resources are reloaded when the savegame is
loaded. This also fixes an unreported music bug in S&M when
saving a game while outside the Bumpusville mansion.

As a result of savegame format modifications, we are now at
savegame version 23.

svn-id: r10254
"
"fe349d2d998a939c7f258d3a28cf00a148bb6225","2003-09-14 21:10:14+00:00","enable ``proper'' -x loading

svn-id: r10255
"
"ffd39dc95aacfa34d669b469fae9e8ff9946d4ee","2003-09-14 21:45:42+00:00","if saveslot specified with -x doesn't exist, show restore menu

svn-id: r10256
"
"f69d97aadbe579e1451a03c6537102521d6b4988","2003-09-14 22:46:47+00:00","add putttime target

svn-id: r10257
"
"685d44940f21904d7c74ea1bce1a53f13b5e6eaa","2003-09-14 23:39:06+00:00","fix 'Cutscene - Press ESC to exit' message

svn-id: r10258
"
"7eaf33e014a1b94d90f37fcf14e11fba02bd0958","2003-09-14 23:42:07+00:00","actually this is the correct fix to 'Cutscene - Press ESC to exit' :)

svn-id: r10259
"
"8f26c43b49453e599736b9e48b27620775284b03","2003-09-15 19:48:54+00:00","cleanup

svn-id: r10260
"
"e0129c34e7124a3b544fa4e5700e83a20d8d66bd","2003-09-15 21:35:30+00:00","Feature Request [806641] Increase MIDI
performance by omitting redundancies

Removed the use of the _bank member for iMuse Parts.
The member is still being saved/loaded, and a
warning will display if a non-zero _bank value is
set. If it turns out some musical passage is actually
using the _bank, we'll need to reinstate it.
Otherwise, after sufficient testing we can obsolete
it in the savegames.

svn-id: r10261
"
"bc90c04c25638f151f69ab77b833d49b26df52ff","2003-09-16 07:06:17+00:00","Don't call the premix function when the mixer is paused. (This is
particularly noticeable in games with PC speaker emulation, but I could
hear faint noises in AdLib music as well.)

svn-id: r10262
"
"48d07612864ef5ff8414a31a9d359bb7c977b691","2003-09-16 07:11:29+00:00","Some cleanup. More to follow, I hope.

svn-id: r10263
"
"00c1fdce3aa67fae7d314ba48dfbb774879cf221","2003-09-16 09:57:57+00:00","Removed some unnecessary #includes and #defines.

svn-id: r10264
"
"091b41a2787cf7eeb36732cb02aec68c66ab570c","2003-09-16 11:44:48+00:00","Partial fix for Bug [636985] ZAK256: No kazoo tune

Implemented a parser for Euphony music. No
FM instrument support yet, as the FM chip used
by FM Towns is not being emulated yet. In the
meantime, a stock FM-emulated GM instrument is
being used instead.

This at least makes the Zak Towns kazoo tune
and the Loom Towns distaff audible. Emulation
of the FM Towns synth chip, or suitable
emulation using the OPL2 synth, is still
under investigation.

svn-id: r10265
"
"dffa1cbc2f48e36376e016f23ce79dfed4d67a97","2003-09-16 21:28:46+00:00","Removed redundant presets storage.

svn-id: r10266
"
"2536823c23d5bc7cb5a376eefc3444f1b8d3b485","2003-09-17 06:28:27+00:00","cleanup

svn-id: r10267
"
"7d0b682cc950a8cc9865f71e28f0d8e7502342c4","2003-09-17 09:03:40+00:00","Cleanup.

Since this file contains a list of global variables which are accessed
both directly by the engine and - presumably - by the scripts, this could
lead to some nasty regressions. I've triple-checked the list against the
old version, so it *should* be ok, I just thought I'd point it out.

svn-id: r10268
"
"d6c2957d5cc17c121f540938697e4a6ea6e96073","2003-09-17 13:03:13+00:00","cleanup

svn-id: r10269
"
"1d60dc552dc83fa37c7618b6d85770d97fe47744","2003-09-17 13:28:48+00:00","delete name only after closing the file

svn-id: r10270
"
"ccf2eb2cc6c251a0a702e1e84a633c9751e56d05","2003-09-17 14:03:11+00:00","Removed some #includes that seem to be unnecessary. I think we're going to
have to clean up the header files at some point...

svn-id: r10271
"
"27b734a044a07377bb4e99451bf912091ae5708f","2003-09-17 14:33:47+00:00","Rewrote Read_file() to use our File class, and removed the unused functions
Direct_read_file() and Direct_write_file().

This change is completely untested, but that should be ok since Read_file()
(which is now the only function left in tony_gsdk.cpp) only seems to be
used in debug builds.

Perhaps we should remove these files completely?

svn-id: r10272
"
"0604d3ff10b59378a3f0484abde73b1d511dfb71","2003-09-17 16:59:12+00:00","cleanup

svn-id: r10273
"
"f291b13134bf5c88d5b09688b2becec0c08bdbfc","2003-09-17 17:34:04+00:00","cleanup

svn-id: r10274
"
"1f2ee376428d9edf8d61c915522c77c12e0fdcf6","2003-09-17 19:12:45+00:00","BS2 works on BE systems now

svn-id: r10275
"
"0e5e39e64e640160192fe01a1e93964e3bdcb3b2","2003-09-17 20:07:21+00:00","remove unused variable

svn-id: r10276
"
"c0d1061a2dcfd8c50c70ca99b99a41e81207fa86","2003-09-17 20:34:20+00:00","cleanup

svn-id: r10277
"
"468275bb94f975b9e1c2e7e90a03caa37bd0e142","2003-09-17 21:06:16+00:00","added a static method setDefaultDirectory to class File; used this to simplify some code; added a global g_sound pointer in bs2, this cuts down on uses of g_sword2 (of course both should be removed on the long run); some other minor tweaks/fixes

svn-id: r10278
"
"231cb16b5b68cf21f33869b004a3d449489d0450","2003-09-17 21:53:13+00:00","some tweaks to the build system (work toward plugin support)

svn-id: r10279
"
"3f62b662fbf62e57fb751a1942509bd2abe7c57d","2003-09-17 22:13:38+00:00","didn't mean to commit this

svn-id: r10280
"
"0b16afb067a7b3f09a97507675eaa4872a59df38","2003-09-17 22:16:14+00:00","make module convenience libs depend on their module.mk file

svn-id: r10281
"
"c1a678afeb5100a99030bb51782e5de98d771997","2003-09-17 22:41:01+00:00","new module 'base'; moved gameDetector.*, main.cpp and base/plugins.* there (this removes the need for an ugly hack in the build system, and is also conceptionally cleaner)

svn-id: r10282
"
"0eea7999ebbb7b2f580870f538dc7842c1a8d644","2003-09-17 23:02:40+00:00","no need for this evil hackery; just always pretend 'F5' was pressed, the Scumm engine will do the work from then

svn-id: r10283
"
"3c55fd316fb1e9203744fd520c9553eedb15a348","2003-09-17 23:05:07+00:00","cleanup

svn-id: r10284
"
"f6ecb2e95d5934a70e73b0164a745c3131cfce1a","2003-09-17 23:34:56+00:00","removed the module.mk dependency again since it make 'ar' add module.mk to the lib.a file

svn-id: r10285
"
"ec0d41137ca8bf414f674afd6f6103ad6e9bf0ac","2003-09-17 23:59:13+00:00","fix Circular dependency warning

svn-id: r10286
"
"be9d4066e147e1f7eebd5b554f11b876f93f3ae9","2003-09-18 02:07:18+00:00","moved engine.* to base; this fixes some linking issues when building a barebone ScummVM (or maybe I just want to increase our CVS stats? <g>)

svn-id: r10287
"
"3342a205788b361bdaadb1c766696a6f580eea85","2003-09-18 07:27:48+00:00","Extend the ALSA version check to look at SND_LIB_MAJOR as well. They're
bound to hit 1.0 any year now.

Of course, this is completely untested.

svn-id: r10288
"
"420043b76bd76a6834aa4048550d6943df3a089e","2003-09-18 10:24:53+00:00","Remove one more hackery - actually a complete port rewrite would be needed to get rid of all of them, I'm thinking about it :)

svn-id: r10289
"
"0ae88a7dfc748882fc83bf347ee2ad15d15231e8","2003-09-18 10:51:42+00:00","Temporarily disabled this rule since it causes troubles for MinGW

svn-id: r10290
"
"dbb20eaee5c7837d10e02661b83f5360ea7db395","2003-09-18 12:07:56+00:00","This'll also break Makefile.noconf

svn-id: r10291
"
"a15fdcea21272fbc53ee47f7ced7ac0a093b52cc","2003-09-18 13:03:56+00:00","plugin work: right now, only with build rules for OS X. Once I can get it to work here, I'll add more build rules. Work in progress, a lot ain't work, but the plugin stuff is disabled by default, so no harm should arise

svn-id: r10292
"
"dcf77f7a1008e4a6b98c9face6cc7461c6347e1d","2003-09-18 14:07:36+00:00","Added EXECUTABLE to the MinGW makefile.

This slows down the build procedure enormously, but on the other hand it
actually does something now. :-)

Though, for some reason, make always crashes shortly before the end when I
build it from scratch. I have to repeat the command to get it to finish.
Time to check if there's a newer MinGW version to download, I guess...

svn-id: r10293
"
"9470c9f66131d16ca19d111d21948ba57a1a8eb3","2003-09-18 16:01:33+00:00","changed & documented the premixer semantics

svn-id: r10294
"
"c4f053904ab99f0acc0b2452cd2c8377ca0b68fd","2003-09-18 16:11:56+00:00","Change includes, fix BASS slowdowns

svn-id: r10295
"
"60de69b9dab36faa2a09beacceabc5096917718f","2003-09-18 16:12:20+00:00","Add time.h

svn-id: r10296
"
"79f546cb8fe6d61483bd29582232561a74bb95c7","2003-09-18 16:14:38+00:00","Update project files

svn-id: r10297
"
"292cdb02edf409a674b5b6caa8e959eb8cf2ea96","2003-09-18 16:15:38+00:00","just generate the data as stereo, instead of munging the buffer at the end

svn-id: r10298
"
"57bcbfa993585748998e9fd92621759c2593b706","2003-09-18 16:29:22+00:00","trying to fix VC6 project file (beware! I am doing this manually, I may have screwed up)

svn-id: r10299
"
"a83d9a97331feec9fc0cf29521fb59181b7b9bc8","2003-09-18 18:04:06+00:00","updated vc7 file

svn-id: r10300
"
"7fd732f5bb626554d5ac3d72a0dc7ffda76186e9","2003-09-18 18:19:23+00:00","cleanup

svn-id: r10301
"
"f8997ba7cc7cdc59a5f04f13fbabdd0d0114a42c","2003-09-18 18:21:03+00:00","link modules against LIBS, too (right now the only reason for this is that scumm/ needs MAD & Vorbis libs)

svn-id: r10302
"
"209413ed07e931277cf569d260fbfad71406088e","2003-09-18 18:22:15+00:00","disable the custom operator 'new' on Mac OS X, as it cause multiple definition linker error when building ScummVM with loadable modules

svn-id: r10303
"
"6a4663824e573777c512e0ca21a5c5f61865b83c","2003-09-18 18:23:53+00:00","added initial support for building our 4 adventure engines as loadable modules; right now only work on OS X; once we add more build rules, other systems with dlopen() should work, too (e.g. Linux); Windows support may come later. This is still very much WIP

svn-id: r10304
"
"f7d50f7c68f4c48edacf8d1c6fd60bd3e17f5a6d","2003-09-18 19:56:38+00:00","unify legal headers a bit here

svn-id: r10305
"
"1a6d75ef39f0d76b099ed33d95fb4944ccaa2740","2003-09-19 01:12:05+00:00","changed scumm/object.cpp for V1/V2 once again - this time it really should match the original behaviour

svn-id: r10306
"
"349a7bc39908f4bddd35c8f1605bdfb77f343404","2003-09-19 06:41:41+00:00","Cleanup. Apart from reformatting, I've also removed the #ifdef blocks to
skip or mute cutscenes. At the very least, we want to show the subtitles
like we do now.

svn-id: r10307
"
"5628ee74177ac93436dca6cf14e9860721afc0df","2003-09-19 06:42:22+00:00","cleanup

svn-id: r10308
"
"dd261199d01e17d65fa329af3d574defb6ed7fb0","2003-09-19 09:02:03+00:00","This change was made to player_v2.cpp recently, and seems to fix bug
#809036 ('MANIAC64: Sound echoes').

I don't understand the exact implications of it, but I assume it has to do
with the premix function having to generate stereo samples now.

svn-id: r10309
"
"26607c00ce5399f547451a70b00cccc34c9c12a4","2003-09-19 13:55:19+00:00","cleanup

svn-id: r10310
"
"abdc8f1247e81b689584b8aca6f4de70768d065b","2003-09-19 14:13:24+00:00","cleanup

svn-id: r10311
"
"0c8df2838793316b1ed182ad66d569dbbae8312d","2003-09-19 14:43:57+00:00","cleanup; some more fixed need afnow that the premix proc is expected to generate stereo data; (we probably should add a common base class for Player_V1/V2 instead of deriving V1 from V2)

svn-id: r10312
"
"600d4c60d49a258bff159bf8b74449dac2b842d5","2003-09-19 15:01:49+00:00","cleanup

svn-id: r10313
"
"a1735e55023d76294aaa5cb01a385388f2e47ae5","2003-09-19 16:08:54+00:00","cleanup

svn-id: r10314
"
"d9b0a79390d0f149538348e45f49584eaad31c61","2003-09-19 19:11:33+00:00","fixed some pointer cast warnings on systems with 64 bit pointers (like AMD64)

svn-id: r10315
"
"002e2a6f67d2bde82e131b1d2c316ceef9931480","2003-09-19 20:45:35+00:00","cleanup

svn-id: r10316
"
"34b5cd99c388f95c6a708fd8d316cd95d0d5d902","2003-09-19 21:15:13+00:00","fixed warning on systems with 64bit pointers

svn-id: r10317
"
"ed605c38c535eecab9a0cd8c6d1ef336e7a632a2","2003-09-19 21:23:23+00:00","some cleanup, and an (untested) loadable module build rule for Linux

svn-id: r10318
"
"a4675f34a7c056b2ca9a5f78d6bc7af26a5d947c","2003-09-19 21:29:59+00:00","work around silly bug in Microsoft Visual Studio .NET 2003. M$ does not stop at breaking HTML and Java, no, now they have to mutilate C/C++, too. MS-C instead of ANSI-C, anybody? *grmbl*

svn-id: r10319
"
"8fc9d92e320582d29b75531db2a8f720861018d3","2003-09-19 21:36:27+00:00","cleanup

svn-id: r10320
"
"9833fcc3439269d9dbb1d6e1ddd93949e698d22c","2003-09-19 21:47:14+00:00","oops

svn-id: r10321
"
"ce7d4c0a7630aa8ae13e9e224a677a5e1c2708ff","2003-09-19 22:20:53+00:00","one more linux+dynamic fix

svn-id: r10322
"
"6c57e2bb17fb3b1e6b7329f1d2bcbc23a0c96c81","2003-09-19 22:45:54+00:00","let's see if that's better

svn-id: r10323
"
"7840039156b1ec23e92cfb64f4abd857761b5f97","2003-09-20 00:07:37+00:00","yet another fix for linux+loadable modules

svn-id: r10324
"
"3afbb22ad7ceac7a35256d34c6f1746230098d52","2003-09-20 00:37:09+00:00","fix invalid target crash for build using loadable modules

svn-id: r10325
"
"b75626d1ce9fbc0b2ccde68005d7df8886af4c32","2003-09-20 00:47:18+00:00","added explicit virtual destructor; added API which makes it potentially possible to have an overlay with a different size than than the 'normal' screen (e.g. if the game runs at 320x200 and a 2x scaler runs, the overlay could be made 640x400 big, if the backend supports that)

svn-id: r10326
"
"7d95a33922e3bf5bff8b5e5a93e8a5b35b970ef4","2003-09-20 00:47:56+00:00","make use of the new get_overlay_height/get_overlay_width

svn-id: r10327
"
"bfbc6ed39ad3ea9b096ff6212b088a44284209bc","2003-09-20 01:08:08+00:00","prepend underscore before passing symbols to dlsym, at least on OS X

svn-id: r10328
"
"21ce55bc9f19c3c75e20e6dd22e17e98224a9ed6","2003-09-20 01:08:48+00:00","make console height/width based on a float percentage of the overlay size -> the overlay isn't so tiny anymore in COMI

svn-id: r10329
"
"42905672995c1f50e10e2582dc79679bff5ef392","2003-09-20 12:24:53+00:00","Minor cleanup

svn-id: r10330
"
"058273ed7ca93596bca90778a68bb3aa681a6c56","2003-09-20 12:26:55+00:00","The 'colliding' flag is never set to anything else than zero, so it should
be safe to remove it. (I'll remove it completely soon, but I'll start here
to avoid compilation errors.)

svn-id: r10331
"
"f4861af4d22e42d6ca4c6eafaa9bce72e0533d5d","2003-09-20 12:39:19+00:00","Added EXECUTABLE.

svn-id: r10332
"
"6539b8a0e64ffceb90c2bc8eaeae87b9b3dae7a0","2003-09-20 12:43:52+00:00","cleanup

svn-id: r10333
"
"b03c634390bd092b85a00f1214bf61504c8bcd69","2003-09-20 12:51:55+00:00","Clarified comment

svn-id: r10334
"
"c704c30575db24ce2b1e2d0b5370750904de735f","2003-09-20 13:11:15+00:00","cleanup

svn-id: r10335
"
"4eca44704bb8d19f6d2279b83d2ebfa9778ac054","2003-09-20 15:34:53+00:00","Cleanup. I removed the PLOT_PATHS blocks since they depended on some
functions we don't have, and since I didn't deem them useful to us. But
feel free to put them back if you like to.

I'd also like to take this opportunity to say that while I deeply admire
how smoothly BS2 handles the transition between stock animations (e.g.
walking) and special-purpose animations, it certainly needs an unholy
amount of code to do so.

svn-id: r10336
"
"a412dd9fcb28b1cb878be695f5653cc98805a301","2003-09-20 16:39:17+00:00","cleanup

svn-id: r10337
"
"588af50cd6141066780e2a03da87734aec826077","2003-09-20 17:00:14+00:00","cleanup

svn-id: r10338
"
"ffce9177d001c7bb033a4bc1b8393ff231b6c144","2003-09-20 17:48:53+00:00","The usual cleanup, plus make sure to delete SaveFileManager if
open_savefile() fails.

svn-id: r10339
"
"23373b01233687eb36ced32b7cee77a8fe81e989","2003-09-20 18:33:24+00:00","The usual cleanup. Removed the 'run from CD' check.

This pretty much concludes the first stage of the engine cleanup. All of
the files, except for console/debugging stuff and possibly some header
files, have been changed to use the ScummVM brace style.

As for the console, that one could probably do with some rewriting, in
which case cleaning it up first would just be unnecessary work.

The next stages of the cleanup should include renaming of variables and
functions to follow the ScummVM coding standards, and turning everything
into C++ classes. And so on.

Of course, the driver directory should go through a similar cleanup as
well.

This has all been enormously tedious, so don't count on me doing any of
these things at the moment. Particularly not turning everything into C++
classes. I'm really not that familiar with C++. :-)

svn-id: r10340
"
"f539bd72e7191ccb639ed32f4ab920fd057cc9c5","2003-09-20 20:01:32+00:00","fixed AMD64 warning

svn-id: r10341
"
"e13060dcb9f6113d7b215f947d6776c5ea9e5293","2003-09-20 20:58:31+00:00","fixed AMD64 warning

svn-id: r10342
"
"16048e9c14dec9c41c1223819460a381325ac613","2003-09-20 22:26:10+00:00","fix bug pointed out by Merlin0fCha0s

svn-id: r10343
"
"14af07351ff892e1562538c6474ff49ab8e4b048","2003-09-21 04:54:34+00:00","Fix #807291

svn-id: r10344
"
"9af8549c9552fd94ac8e4c4f47f0263b8aa27512","2003-09-21 09:06:13+00:00","Use banners on WinCE

svn-id: r10345
"
"74e3448a4cdb49154e7fe794bff90226ef4b0828","2003-09-21 12:10:32+00:00","added HQ3x filter

svn-id: r10346
"
"078e1ee7996d1e33200ef354cff31773770cc489","2003-09-21 13:10:22+00:00","Few small index corrections pointed out by Dark-Star

svn-id: r10347
"
"bfa5c6173408854ee32e8da581cd67b82671b217","2003-09-21 14:26:25+00:00","Some cleanup - lots more needed!

svn-id: r10348
"
"14813704ae5352e0902e7b3d73a9c75d19587800","2003-09-21 15:46:27+00:00","Applied ScummVM formatting conventions

svn-id: r10349
"
"3c7c60196f149c36c105db1d6a739f234c9b1f9b","2003-09-21 16:11:26+00:00","ScummVM code formatting conventions

svn-id: r10350
"
"dadad7bafa62861a6855528cdf949c1e97d0c1bf","2003-09-21 16:16:49+00:00","Removed original ProcessMenu() code.

svn-id: r10351
"
"df6028b17af1b04432942fabb81714c404018f10","2003-09-21 16:19:25+00:00","cleanup

svn-id: r10352
"
"308e88965a4f440498cb302db71088ef0a56edd8","2003-09-21 17:05:07+00:00","Made Ctrl-Alt 9 the hotkey for the new hq3x scaler, and moved the scanlines
and dotmatrix ones to Ctrl-Alt C and Ctrl-Alt-D.

(Does anyone else feel that scanlines and dotmatrix should either be
rewritten so that they can be combined with any scaler and aspect ratio
correction, or removed? That's why I moved them off the Ctrl-Alt <digit>
hotkeys.)

svn-id: r10353
"
"ab1c58c1b196d0eb5828db7c50ce580c3dff7438","2003-09-21 17:56:11+00:00","fixed InitLUTs for 555 mode; some tweaks

svn-id: r10354
"
"a8c93223e822e6043f575a7fe5422e841701a143","2003-09-21 17:57:34+00:00","mentiond HQ3x in README & NEWS (IMHO the descriptions in the README could be better)

svn-id: r10355
"
"4a70a93590a7d621187e3b844d68b7057a73f817","2003-09-21 18:10:12+00:00","fix convertEndian compilation (thanks erik for giving me some work :-); also removed the #ifdef around it, to prevent such 'incidences' in the future

svn-id: r10356
"
"392651dc1bbb2f3f70b25814261884de2e5e7331","2003-09-21 18:15:28+00:00","removed unused macro

svn-id: r10357
"
"9abd9bb6b55b8843d46e8bd718b607d5fc58506c","2003-09-21 18:15:32+00:00","added WRITE_LE/BE_16/32 functions to match our current READ_ funcs - useful in some places

svn-id: r10358
"
"58721a629d98335f549485e44072472fe6a78e96","2003-09-21 18:25:34+00:00","No need to do endian conversion if you check for 0, as BE 0 == LE 0

svn-id: r10359
"
"18961542f96d0b1983a3e240997ec3da4b6abdb3","2003-09-21 18:39:38+00:00","remove -Wcast-align, it causes troubles and sparc and has no real benefit elsewhere

svn-id: r10360
"
"8e28b0c6b4c004a93b76a89d8cb84926a13a0b4a","2003-09-22 06:36:38+00:00","Cleaned up the sound code enough to add cutscene voice-overs. I haven't had
the time to do much testing yet, but it seems to work for me.

svn-id: r10361
"
"f3f7489b4959950cf2bbdb753b48cae66f292cea","2003-09-22 14:55:17+00:00","Set the mixer to use the maximum volume. BS2 has its own volume settings,
and we want them to go all the way up to eleven.

svn-id: r10362
"
"8a5e6289a5281ff56d1bc4f4ff15ae172237b567","2003-09-22 23:29:47+00:00","use our own ABS instead of the math.h abs(); some tweaks

svn-id: r10363
"
"bd6eece09385fc1090f5e679da3bfb2b2475c7a2","2003-09-23 06:22:36+00:00","Initialize the cutscene voice-over sound handle, in case you press Escape
before there is any speech.

svn-id: r10364
"
"0ac7aa06719a185d4468bfca6bbb98c80b4f6b86","2003-09-23 06:23:29+00:00","whitespace fixes

svn-id: r10365
"
"f8591911abe8ce21e4136bf0c63fa6a14c61ee4c","2003-09-23 06:27:58+00:00","Since we probably won't have anything like the original BS2 launcher menu,
make the 'C' key run the credits. I haven't yet implemented the credits
function, but it does play the music at least.

svn-id: r10366
"
"c7b8a6c01bd74ea6770a6aee65aa1a82f71fbb84","2003-09-23 06:30:52+00:00","cleanup

svn-id: r10367
"
"fa8ccef9a44cd628d766a982dddeca3f6554f869","2003-09-23 06:31:13+00:00","Removed unused code

svn-id: r10368
"
"273e1ac1a090c3a63dff93f11288bda9e201af0c","2003-09-23 06:34:19+00:00","Fixed really brain-dead bug. (I made it myself - I can call it whatever I
want to! :-) Escaping a cutscene while the voice-over is playing should
work now.

svn-id: r10369
"
"698e40ff1bacd1d881d50916cf4ff126f83f2129","2003-09-23 08:56:12+00:00","fixed conversion warning under vc7

svn-id: r10370
"
"23e6bc5777b935e400602c04552aac7bbfd79ffb","2003-09-23 09:01:51+00:00","added two different versions of HE demos

svn-id: r10371
"
"8ccd2934a53ece71609adb2a6240b65537dd7a86","2003-09-23 09:34:07+00:00","correct description, are these demos in the correct section of version ordering by the way? run strings or similiar over the .w32 files and play match the strings

svn-id: r10372
"
"fd6ace361c06d7031575c9b12887df81beb46808","2003-09-23 15:49:33+00:00","CD Audio track support via MP3 on PalmOS

svn-id: r10373
"
"60259a052d76b6ed710b46beb3851dd5d356ec4d","2003-09-23 15:54:20+00:00","Moved PalmFatalError here

svn-id: r10374
"
"d0de9fff86c9e44e9c10b181028d759ebf770f29","2003-09-23 15:58:51+00:00","Split palmstart.cpp into mutiple files

svn-id: r10375
"
"57d99796ea8e5d42989d876d35078b686aebda61","2003-09-23 15:59:52+00:00","Changed the keyboard handling to store 'keyboard events', rather than just
characters. Hopefully this will make things work smoother on the Mac, but I
have no way of testing that.

svn-id: r10376
"
"4428e7eb305118894896482fa2abcefa3a2e3a87","2003-09-23 16:01:52+00:00","Added support for DIA API compatible devices (Zodiac), fixed move_screen function on hi-density devices

svn-id: r10377
"
"e43fa490554d60311d1b01a0b034ed6e35a1f6b1","2003-09-23 16:04:10+00:00","Options flag

svn-id: r10378
"
"18a7f918e1a91be8705705e6455179af39a04a3b","2003-09-23 16:05:37+00:00","Added palmtform option

svn-id: r10379
"
"0f8eca26ab04e0254efca196bb57f5abea421d2c","2003-09-23 16:06:30+00:00","Updated with new files

svn-id: r10380
"
"f2f5f9a9af93b19692fe57c5f6230c6ce336ba84","2003-09-23 16:11:54+00:00","ScummVM Headers were missing

svn-id: r10381
"
"bef1facdbc73741ef34e88fe7d496944a6119391","2003-09-23 16:13:13+00:00","Removed the screenshot code. (The SDL backend already has the ability to
make screenshots.)

svn-id: r10382
"
"95a59bd049928dd4eddda8476920e3155e6c2c1d","2003-09-23 16:38:38+00:00","Must ... make ... space ... for ... FotAQ ...

svn-id: r10383
"
"4ae1674a443bf9be79f1d25fa4d4d60250484511","2003-09-23 16:53:25+00:00","Removed ancient version history. Much of it doesn't apply to us, and was
cluttering up the files anyway. (Though I do feel a slight twinge of guilt
for removing historical records like this. :-)

svn-id: r10384
"
"6e59a2df00a9bf99c536819dcabcb84242d49a97","2003-09-23 17:24:45+00:00","Removed unused / replaced source code. This turned out to be most of the
file. :-)

svn-id: r10385
"
"ec15369d661daefc1fd0adebba646a22905a214d","2003-09-23 18:07:50+00:00","console.h from bs2/ is found before gui/ on PalmOS and cause compilation errors

svn-id: r10386
"
"6a2fff0b5b306c1275e59d86df198944c61aac54","2003-09-23 20:29:50+00:00","added two HE games

svn-id: r10387
"
"908eb0823f1e33726b1c4b6e5aed42479afcb644","2003-09-24 05:59:32+00:00","added HE game putt race

svn-id: r10388
"
"3854ce8f3d060f5bb4c1e248d846f73a7fe2942c","2003-09-24 06:19:30+00:00","Add Acorn version of Simon the Sorcerer 1 Talkie

svn-id: r10389
"
"570e60a48797efa08ae5a6c7102f16678704bae8","2003-09-24 06:33:59+00:00","Whitespace changes

svn-id: r10390
"
"09a01e4cbeada86167d83608cd0dcd77d7a0168f","2003-09-24 06:40:23+00:00","Replaced abs() with ABS and BOOL with bool, plus some minor cleanups.

svn-id: r10391
"
"4a62eb3e3b75944bca5af3bbab9e05dfecd77dcd","2003-09-24 06:56:30+00:00","More Amiga V2/V3 sound updates from _Q_:
1. A Player_MOD class, basically acts as a simplified mixer that mixes at 60Hz intervals (or whatever interval you specify), this gives smooth music playback in player_v3a
2. Some changes to player_v3a as a result of #1, including reduced music volume
3. player_v2a, and the necessary additions to scummvm.cpp/scumm.h

svn-id: r10392
"
"181d774769a18aa670c69c2031ff4a30652d622b","2003-09-24 07:14:38+00:00","Add simon1acorn target

svn-id: r10393
"
"e9dd4dc167c50665317ddda6c5e183aba5acc338","2003-09-24 07:38:59+00:00","Revert change that caused more problems

svn-id: r10394
"
"d60237eab9239626033b4a242674305af0d4f3b6","2003-09-24 07:40:19+00:00","Revert change that caused more problems

svn-id: r10395
"
"e18964e95a5b1c3cff793a85cdd0a1907f57517e","2003-09-24 07:47:40+00:00","Fixed corrupted line endings

svn-id: r10396
"
"c8fbafda9a3f7e3cc40612e6fa2f450a5a6459ff","2003-09-24 08:32:19+00:00","Disable Palyer_V2A on PalmOS, since the source doesn't compile with it

svn-id: r10397
"
"a7dfe35706d6a618476b78d5542e1c2ffd0923db","2003-09-24 09:32:38+00:00","Fix for Bug [805923] BASS: Notes left on when quitting game

Explicitly send All Notes Off messages on every
channel when shutting down music driver. This
fixes hanging notes on exit when using external
synths or some less intelligent internal synths.

svn-id: r10398
"
"c96c900546ba9954d0a76e50036df7d211efd486","2003-09-24 12:57:37+00:00","fix gcc compile

svn-id: r10399
"
"cbcf5d5f7d9472654d42e071c865001126522ce2","2003-09-25 00:02:56+00:00","Can't delete a const pointer, duh

svn-id: r10400
"
"07c3c2dac65f48ae61e51cb37588b28c0408884b","2003-09-25 04:23:07+00:00","Small cleanup to reduce amount of game id checks.

svn-id: r10401
"
"ab66db7cd0d87b9dec35420ad8284c88225be5c0","2003-09-25 04:32:28+00:00","Small cleanup to reduce amount of game id checks.

svn-id: r10402
"
"5f3f0bce7a6e7773ede023367de88f736cebe7b2","2003-09-25 06:08:31+00:00","update vc7 file

svn-id: r10403
"
"99eee3fb8443798fe11e28176c2b4a90474308e1","2003-09-25 06:11:07+00:00","Rewrote the music code to use a premix function instead of a timer. I'm
speculating that the timer didn't always fill the buffer quite fast enough
and that this is what caused the occasional popping noises.

Of course, I may have introduced all kinds of regressions - particularly
since I don't have any big-endian computer to test on - but we're all
friends here, right? :-)

svn-id: r10404
"
"2122f117936988cf6c9db8ecb20432ba43c8d3ed","2003-09-25 06:12:04+00:00","added HE game

svn-id: r10405
"
"b9cc1725b7b11fef693b3b3d0bf653a431b3b625","2003-09-25 10:02:52+00:00","Some minor fixes. Unfortunately I've noticed that there is some major sound
distortion in the credits music, and I haven't yet figured out what's
causing this.

svn-id: r10406
"
"a4b32b67e8dc9f9e74e99573459f6fbbf47a9d5a","2003-09-25 11:35:54+00:00","Reverted part of the previous change. Control panel music should work again
but the credits music is still broken. I'll have to take a closer look at
this later.

svn-id: r10407
"
"f5d8300043fb36b72313707948d803e5e9674bf7","2003-09-25 13:04:46+00:00","Really clear the screen during the credits.

svn-id: r10408
"
"a30eb131bb746efc3134e34db8870c5889deeb1a","2003-09-25 22:32:05+00:00","Fix for Bug [810564] ALL: missing instruments with native MT-32
As defined in Patch [811623] MT-32 patch for Bug 810564

Added a channel mask to MPU-401 devices so that --native-mt32
may force the device to use only the subset of MIDI channels
actually supported by the MT-32. Also added a best-guess
interpretation of iMuse Part priority in the SysEx 0x00 msg,
since part priorities become more of an issue when the
channel count is cramped.

svn-id: r10409
"
"68c060405ce04ba34cb0252498e54ab77d57cc4b","2003-09-26 00:09:09+00:00","Add optional define for no console

svn-id: r10410
"
"c03b99eab6367c22d6a7fced806690e23ae3baa2","2003-09-26 05:34:52+00:00","Small correction for simon1/2 Hebrew

svn-id: r10411
"
"b7a5024dafefab136c9fc9d5af67588349178681","2003-09-26 06:26:18+00:00","Ok, I'm stupid.

The initial sample is, indeed, two bytes, just like the rest of them, but
it really, really helps if you read it from the correct position in the
file.

After fixing that, it turned out that my changing of signedness of the
sample was also wrong. Funny how those two bugs almost cancelled each other
out. Almost.

I've made a few other changes as well, but they're just to clean things up
a bit. The credits music works for me, and I've played the game up to
arriving in Quaramonte, with no obvious music-related problems.

svn-id: r10412
"
"b21208e6a92b4e8082d04994b0c99709e2712472","2003-09-26 10:07:18+00:00","Some more reformatting / cleanup, and removal of comments that did nothing
but say who added what when. (No disrespect intended, but this information
means very little to us.)

svn-id: r10413
"
"7f707acfb6bbcb138dbcb04eddc05d91821477a1","2003-09-26 14:05:33+00:00","Converted the MPU-401 timer to use the Timer class.
Since this was the only place where we were using
create_thread, that method should be removable now.
I also removed the midi_driver_thread overrides
for the MorphOS and YPA1 (Palm) backends. These need
to be tested by their respective porters.

svn-id: r10414
"
"f18b4addb8dec3c12ea0ef827caac99e43711873","2003-09-26 14:19:03+00:00","cleanup

svn-id: r10415
"
"a84f204b726a54befca435f2519001e15d7581d9","2003-09-26 17:33:58+00:00","now more match dissassembly

svn-id: r10416
"
"2ef170833362f224c43a0433e9fac07aa7947f60","2003-09-26 17:51:49+00:00","stop gcc complaining

svn-id: r10417
"
"3745b176b2f072d6239a6cdb04e3e7b7651f6aed","2003-09-26 17:55:50+00:00","added v6 version of stamp object opcode

svn-id: r10418
"
"02efb31591fd0ede44af4f5b00fc3c6a984e7b9f","2003-09-26 17:58:42+00:00","a little better

svn-id: r10419
"
"44bfb7b866ae3aafc2636580cca4a68257f8217d","2003-09-27 02:33:17+00:00","Removed RTTI except where required
(i.e. scummvm/scumm/mixer.cpp)

svn-id: r10420
"
"5f2d799fd22aa95d3fe075c736574a1941f6a5e8","2003-09-27 06:33:22+00:00","updates from _Q

svn-id: r10421
"
"8ad28e3a7e3a4696f05e067ad51f504cda306502","2003-09-27 11:02:58+00:00","More cleanup, and I've replaced most - not quite all - of BS2's debug
message functions with our own.

We still need to go through them and assign sensible debug levels to them.

svn-id: r10422
"
"f9352cfc1cbd537bef08084b52fd3dc64ced9249","2003-09-27 15:01:35+00:00","add alternate sword2 target for people who want to use the gui for game detection when the game is either a) on CD b) in a bunch of seperate directories in a structure like that of the CD.  Of course pointing ScummVM at such things with the normal target via command line or config file work fine.  As everyone awake at the moment only has the sold out version, this is specific to that.  I don't know what files are at the root of the original CD we can use for detection purposes

svn-id: r10423
"
"3278a0dce61407d3bdf5bdb03b96f2201a92c2eb","2003-09-27 15:20:15+00:00","cleanup

svn-id: r10424
"
"442fd0cdf895c26ea26db3291b465e87ac3ff466","2003-09-27 15:30:17+00:00","I don't think UpdatePaletteMatchTable() has to write the table to file. In
fact, I'm not even sure the !data case ever happens.

svn-id: r10425
"
"bac0fab43d7c65fd232ce64174d130c1f4e1fbc1","2003-09-27 15:38:42+00:00","cleanup

svn-id: r10426
"
"d1df7318557e90dc28409523f19a4dd80bd8c034","2003-09-27 15:44:26+00:00","Removed CopyScreenBuffer() since it was a no-op anyway.

svn-id: r10427
"
"796fcfff7e70a4d1951d42ad8b8f39f45914a24e","2003-09-27 16:05:40+00:00","Removed inaccurate comment

svn-id: r10428
"
"e19e7c879a1fc88458a3e26715875e60512d755b","2003-09-27 16:10:43+00:00","Save enough information about the currently playing music before the
credits so that it can be properly resumed afterwards.

svn-id: r10429
"
"49d2a22b428864ccf2298b67841d4cb3cf33b659","2003-09-27 16:54:11+00:00","OSystem changes: removed create_thread() method (not needed anymore; 'pure' threads aren't very portable anyway, better we only use timers); introduced OSystem::TimerProc type

svn-id: r10430
"
"54a2470c9f769418dbbbc82aa40ee62f4728720b","2003-09-27 17:00:15+00:00","Began unifying the function documentation in driver96.h with the one in the
individual files, into what I hope are doxygen ones.

svn-id: r10431
"
"1d831d0cea8cb2dba4c6d3df4c9433c4a333719e","2003-09-27 17:41:02+00:00","cleanup

svn-id: r10432
"
"d87f65ff06f6c35e238ed2e57ee29441036adb81","2003-09-27 18:09:50+00:00","added a FIXME (regarding optimization) to INTERPOLATE; added new template function interpolate16 which is used by hq3x (advantage of the old trick which abused Q_INTERPOLATE: smaller & better optimized code; very easy to adapt the function for other uses, like for hq2x/hq3x. Drawback: scaler.cpp takes even longer to compile now :-)

svn-id: r10433
"
"0b0bbed4e297f08302920586396b6bc7d630155f","2003-09-27 18:18:05+00:00","don't use delete to free memory allocated by malloc

svn-id: r10434
"
"32d85b4ae082f163106c3aa572bbb83f780e7db9","2003-09-27 19:43:06+00:00","some cleanup / removed some code duplication (more should be done, but I don't have the time right now). Since I lack data files to test this, I'd be grateful if somebody could check whether I broke something

svn-id: r10435
"
"36816c0c8db583620032274245d3066dd9e73a33","2003-09-27 20:30:46+00:00","add some descumm TODOs

svn-id: r10436
"
"6f978e9e30ac47a14e1e907b2a86b45d73ebd9cb","2003-09-27 20:31:19+00:00","some minor cleanup

svn-id: r10437
"
"e032e79a4a00797cdfc1ec5072fec9bbe101b536","2003-09-27 21:19:17+00:00","added hq2x scaler (no, I am not going to add hq4x anytime soon. It would be another 4-5000 lines of code, and scaler.cpp already takes far too long to compile. Maybe we should seperate the scalers into several files in common/scaler/ ?)

svn-id: r10438
"
"7d2fff001274e5870ec65f90f2e4158cc2595249","2003-09-27 21:20:00+00:00","added hq2x scaler

svn-id: r10439
"
"90727ece4dcabd1ed6e63a11467f083a42a879e2","2003-09-27 21:22:49+00:00","don't use tabs in the README

svn-id: r10440
"
"e306de219267da2ac8c429e9bb57f14456816e35","2003-09-27 21:23:45+00:00","updated NEWS a bit

svn-id: r10441
"
"24d74274cf7a161e75adc452fb31e83b023b2e26","2003-09-27 21:41:10+00:00","proposal for revised scaler keyboard shortcuts

svn-id: r10442
"
"f9e025d13c96c4556e9c415161be51ad5379854c","2003-09-27 22:12:01+00:00","fix for bug #813136

svn-id: r10443
"
"ca95c17e64255db3c52055a14bd8e26931f987eb","2003-09-27 22:27:12+00:00","merged in some more changes/improvements by _Q; cleanup

svn-id: r10444
"
"80a8bca2c1443b1a3aa6c1e0ef5c285dc1308f8e","2003-09-27 22:53:09+00:00","cleanup

svn-id: r10445
"
"44c0654ffdeb40a686216d56caee9d75ca7c2be1","2003-09-27 22:53:24+00:00","Fixed template function compile quirks under MSVC6.
Apparently MSVC6 does not like overloading of template
functions when the template arguments vary between
versions of the overloaded function. I replaced
interpolate16 with functions that have two different
names, so MSVC6 won't see them as being the same
function with [it insists] the same number of template
arguments.

svn-id: r10446
"
"9b27f7307afe658c1ea6da7d7edf206b08483375","2003-09-27 23:11:25+00:00","cleanup

svn-id: r10447
"
"b2b9a7cb07a24124e4ea3877a72d44cff7bcbff7","2003-09-27 23:11:26+00:00","cheak doxygen comments

svn-id: r10448
"
"072bf0f47626bfb4122b95605426eff3c8d23eb0","2003-09-27 23:41:57+00:00","Fixed program crash when trying to switch to a
video mode that isn't supported (such as going
to fullscreen under COMI with a 3x scaler and
a video card that doesn't like 1920x1440 LOL).

The program still terminates when this happens,
due to the suboptimal way we make the switch to
another video mode. (By the time we find out
that we can't make the switch, it's too late to
revert back). But at least it doesn't crash.

svn-id: r10449
"
"4dcb829e78f969a4e492e9e777b51715c1309e9e","2003-09-27 23:59:00+00:00","Timer services are now available through g_timer, so
you don't have to go through the Engine to get to them.

svn-id: r10450
"
"1d40ce68c2fd93abdef86989ae534b124f175068","2003-09-27 23:59:09+00:00","get rid of explicit redMask/blueMask and use redBlueMask instead (this will be useful should we choose to templatize the scalers for 555/565 mode optimizations)

svn-id: r10451
"
"044bcd5430a9ba1b19e10d4d4e3a193358166991","2003-09-28 00:03:24+00:00","Added terminate() to the MusicEngine and publicized
the iMuse implementation. This allows the termination
sequence to be done BEFORE object destruction, so
that the destructor is not making calls that may not
be appropriate during object destruction. (Virtual
functions were the concern, although I'm not sure any
of that was happening anyway. Oh well, better to be
safe than sorry.)

I implemented an empty terminate() in the base class,
but the other MusicEngine derivatives may have stuff
in their destructors that should be moved to this
method. I didn't check.

svn-id: r10452
"
"58ce94adc37e4d7ff3eb1dced6ca6e1233bc4d04","2003-09-28 00:10:13+00:00","Added music.h

svn-id: r10453
"
"0b923944d256b83e78a39d9578b2062bc54963e8","2003-09-28 00:59:01+00:00","don't try to pass NULL when there is an int argument

svn-id: r10454
"
"c7f6b92e74b8b8252592ebed7c2a25df3befd90e","2003-09-28 03:19:26+00:00","Fix problem of verbs areas always been shown after reload in V1-V2 games.
Seems to fix problem of distaff highlights after reload in loom [ega].
Could cause regression in fm towns games.

svn-id: r10455
"
"250fd8de690086dda3fedab8806161b9159e6e60","2003-09-28 03:48:39+00:00","Update credits

svn-id: r10456
"
"761d9dacb9af7d4ac26b8b77cf68451a38139992","2003-09-28 10:44:31+00:00","add 'plugins' to all target

svn-id: r10457
"
"48da9f38deeab294ce84abb25f5bc980dfccff23","2003-09-28 10:53:28+00:00","add plugins to .PHONY list

svn-id: r10458
"
"1f5d51c2586d8aa53853ebb3336bc58d0a9c085d","2003-09-28 14:08:20+00:00","Alignment fix

svn-id: r10459
"
"49fa159ed4a7edb99891de2c54e5e30b7aaa86a9","2003-09-28 14:13:57+00:00","More cleanup, plus support for cutscene leadout music. For now, we only
play that music for cutscenes that have subtitles.

svn-id: r10460
"
"2d3e97049629c48494ea8d4641e57e699e6a8498","2003-09-28 14:27:08+00:00","Slightly more sensible hotkeys for the scalers. Hq2x is now number 8, right
after AdvMame2x, and 9 and 0 are AdvMame3x and Hq3x respectively.

I agree with Fingolfin that we'll need a better way of handling this in the
future, though.

svn-id: r10461
"
"82fd31618780ce449f1d2ca3794827b4448ca9f3","2003-09-28 15:50:47+00:00","queen initial import

svn-id: r10462
"
"61f0d78034752d76c5f63bd63052b72d7a86618a","2003-09-28 15:59:30+00:00","doh

svn-id: r10463
"
"8782ad0f9156b384e8742f0dbbe35753fe51b865","2003-09-28 16:07:15+00:00","removed old code

svn-id: r10464
"
"4b74eec41846293954fa1c2db47e621cf7f4a3ab","2003-09-28 16:08:23+00:00","this was actually the fix for bug #809547

svn-id: r10465
"
"6e13f4eb2852d244b544e18bcbdbacbc424eedac","2003-09-28 16:26:06+00:00","added two HE games

svn-id: r10466
"
"d4f6639802ff0c99ed0ecd482aa0c0ad483c7a8f","2003-09-28 16:27:51+00:00","cleanup

svn-id: r10467
"
"0ac7630ebbef5c0933099a30f533a366728ba706","2003-09-28 16:38:00+00:00","cleanup

svn-id: r10468
"
"07fe952eef4852f8b1429d58befe0eb529679f6d","2003-09-28 17:48:07+00:00","allow queen to compile as plugin

svn-id: r10469
"
"84ed3e272d7a470fac35e446ad9adbbd2c374f82","2003-09-28 19:57:01+00:00","use new operator instead of malloc() and added generic file loading function

svn-id: r10470
"
"17bf7b95aa8fb28dcacbe01a5ff547032ffbea1d","2003-09-28 21:08:48+00:00","removed duplicate g_timer object (one was global, one was static to timer.cpp); set g_system earlier (might prevent a few race conditions)

svn-id: r10471
"
"6c9476597252d543cccd510ee58645d89060d6a1","2003-09-28 22:23:59+00:00","Improve intro timing a tiny bit on WinCE

svn-id: r10472
"
"de1476c12f5e61fe3ea945cd5c13920a2f1697a8","2003-09-29 01:47:23+00:00","New FOTAQ project

svn-id: r10473
"
"dca25f3c6125c651d5d1a7abbdee3a2c48b11aac","2003-09-29 01:48:13+00:00","Fixed MSVC6 errors

svn-id: r10474
"
"a48c8ff4c1d68f67459555f3f56a0398e66f144f","2003-09-29 02:59:47+00:00","First-revision Amiga icon decompressor.
Thanks for Stuart Caie for the C conversion
that was adapted for this addition. On the
Web at http://www.kyz.uklinux.net/

svn-id: r10475
"
"6a4c977a487228dec4e33fef0e699e51032330fd","2003-09-29 04:15:24+00:00","Added decruncher for Simon 1 disk version files.
Also thanks to Stuart Caie for the C conversion
of the decruncher algorithm.

svn-id: r10476
"
"3f845084f1809d5bfd9eca14df797bcc0640c5ee","2003-09-29 06:32:46+00:00","Fixed iMuse termination sequence to avoid deadlock.
Fixes Bug [813920].

svn-id: r10477
"
"93b8cefe191aec56ff889319433632f59e0fcb94","2003-09-29 06:48:48+00:00","Tiny whitespace / comment change.

svn-id: r10478
"
"1f42fb3a6fa970bac9eebd55d7fae40a5acf40b7","2003-09-29 07:29:09+00:00","Ignores deps

svn-id: r10479
"
"70e8d2780dbd7e9e691b07de1c04c1b46fc6a784","2003-09-29 08:09:38+00:00","Cleanup, mostly related to matching up semantics
between Part and MidiChannel (which Part may
derive from eventually).

svn-id: r10480
"
"756e183953b4ffc41212bd1670b84668e0ba2520","2003-09-29 08:11:55+00:00","The IDE did this. Whatever.

svn-id: r10481
"
"1ecb834d89eff03fabf7bf77eab536dd48f28e8e","2003-09-29 09:45:52+00:00","Added BS2 items.

svn-id: r10482
"
"8284aa204743c5cedd8a92ca4e25b033ba40b1b3","2003-09-29 13:38:17+00:00","cleanup

svn-id: r10483
"
"3cdf7abe68e0413189a76da9eba1ad51d6d96eeb","2003-09-29 13:46:49+00:00","cleanup

svn-id: r10484
"
"33685d83505f34d0b54c8c997e805601791d61b6","2003-09-29 14:06:02+00:00","cleanup (I meant to do this in my previous commit)

svn-id: r10485
"
"4d5f98fd2fb7044a663ae96cc6b800555b480351","2003-09-29 14:19:22+00:00","cleanup

svn-id: r10486
"
"7fff8b0134356b200a9e21982a0436b3e8068d6f","2003-09-29 14:20:36+00:00","Removed - it's the same file as _mouse.h

svn-id: r10487
"
"4a7385b4e742b283045021b1760a1fbf4d6979ac","2003-09-29 16:02:47+00:00","split out scalers into separate source files in common/scaler; some optimizations (in particular, the hq2x/hq3x scalers now are compiled into two versions, one for 555 and one for 565 mode)

svn-id: r10488
"
"c40e7d68a5e814cc8b8e49d92f26c9814657bb0f","2003-09-29 18:38:51+00:00","templatized more of the scalers; also introduced template struct ColorMasks (shortens/simplifies other code a bit)

svn-id: r10489
"
"e342878f84aaeaa43625e584ff8c89c95f7d2c52","2003-09-29 21:58:40+00:00","forgot to add common/scaler to MODULE_DIRS

svn-id: r10490
"
"0c93377f5d4e8dd8e8f40fc6505630f439d232f5","2003-09-29 22:27:08+00:00","added BANK code from Gregory + minor change to loadFile()

svn-id: r10491
"
"d9557d9dbbfe653c9ced47b17e45a427142184bb","2003-09-29 22:30:02+00:00","small cleanup

svn-id: r10492
"
"e75eba1a1fbdf2dd025bca6086d1c8b59d5f252f","2003-09-29 23:03:54+00:00","consistency (must've overlooked these)

svn-id: r10493
"
"7ccafa467cf2d913a8c11a0b440f40c7ba06adf2","2003-09-29 23:34:43+00:00","synced hq2x with upstream changes; some performance tweaks to hq2x/hq3x (I think for bigger speed improvement we'd have to use ASM (with C++ fallback of course)...

svn-id: r10494
"
"bca464fdf48b9c641baa7e5c42571756e500f056","2003-09-30 06:11:55+00:00","Add two more HE targets

svn-id: r10495
"
"b8fa67a8bbd51e25e96d019fa0e2d942bb0bc6c9","2003-09-30 06:40:01+00:00","Changed the 'logic' object to use ScummVM naming conventions.

svn-id: r10496
"
"c118d14098cec7803c5756c60b9eca294e07f0ed","2003-09-30 07:50:20+00:00","Refined Euphony parser behavior, specifically,
added proper handling for F2 events, and
experimental handling for malformed 9x/00 events.

svn-id: r10497
"
"e70fcf1737812b3afa35f5350ba80e07d8359569","2003-09-30 08:25:57+00:00","Fix for Bug [812740] ALL: MT32: some notes cut off early

logicdeluxe's patch to set MT-32 partial reserves
equally for all channels, to ensure that entire
notes don't get cut off. The patch as committed is
slightly modified to reorder the MT-32 initialization
sequence. The mods (1) ensure a brief delay between
SysEx transmissions to give the MT-32 time to process
each request, and (2) hopefully sequence the delays
such that the ScummVM welcome message is actually
readable and doesn't just flash for a split-second
(as was the reported behavior in the past).

svn-id: r10498
"
"568a4bd8394e8ada14c6dabb1dda149c8e5f5608","2003-09-30 09:27:27+00:00","Changed the resource manager object to use more ScummVM-like naming.

svn-id: r10499
"
"1771331d76b1ee0cbbb5db47e3007809aeb139af","2003-09-30 11:13:06+00:00","Add simon1acorn info. for simon2mp3

svn-id: r10500
"
"457f888ea7c6dc7cefc7491c5fc74b057f7ef1eb","2003-09-30 13:18:25+00:00","Fixed MT-32 init not getting called

svn-id: r10501
"
"da1b4f1e3627a6baf242457cb9c69328a7f899f0","2003-09-30 14:37:42+00:00","Moved the memory manager functions into an object of its own (and enabled
debugging levels). This needs further cleanups, but I believe I have
reached a stable point where I can commit it without too much anxiety.

svn-id: r10502
"
"46d195ee02899df46a2062a7375abf4db0e93c7b","2003-09-30 16:07:04+00:00","Clear cutscene subtitles before changing back the palette, and slow down
the subtitles slightly.

svn-id: r10503
"
"c24b06abedf940f372b4899716135173585a72fe","2003-09-30 16:27:59+00:00","More tweaks to the note durations

svn-id: r10504
"
"43fb8e6c6fe22c910e7a16448ca4df0d04b663e8","2003-09-30 16:36:00+00:00","MDT_ADLIB for Indy3Towns (for YM2612 kludge)

svn-id: r10505
"
"4ab0dff9ebb917cb1350824220d41d4a86cd70d1","2003-09-30 16:45:50+00:00","This may be an issue in legit gameplay, but GF_FMTOWNS
games do use _musicEngine for the FM synth stuff, so
don't exclude it in stopSound(). (Is this assumption
made elsewhere also?)

svn-id: r10506
"
"352d87a849d8099ebaa4eec502c9c7292c9dd09d","2003-09-30 16:50:21+00:00","updated TODOs

svn-id: r10507
"
"2aeb5c24144d42589f1566673e64f2ef699207bb","2003-09-30 16:59:01+00:00","added some AltiVec code. Still under development, and notice that this is my first time writing AltiVec code, so I am sure it could be done better :-). I am working on the interpolation function now.

svn-id: r10508
"
"967253c2f76ae7549ab6f8f4d3a1f64d67e0ae1d","2003-09-30 17:03:36+00:00","Fix GCC warning.

svn-id: r10509
"
"748523dbe22033e65eeef6c974dfba57379ea49e","2003-09-30 17:10:03+00:00","Generated signed sound samples (cf. feature request #812913).

svn-id: r10510
"
"9d93e97ed4066729622e4d3d8c5c2302faf289c3","2003-09-30 17:53:42+00:00","Support for FMTowns versions of MI1/2,
submitted by Hibernatus.

svn-id: r10511
"
"9f0b97b91b63b9c2468347b7ab90df7b915d6d25","2003-09-30 17:54:57+00:00","Added new scalers breakout

svn-id: r10512
"
"7c04dc7a86d15795ad55f24b13345b739ee18428","2003-09-30 23:43:59+00:00","patch #815478: fix object leak in V5 opcode

svn-id: r10513
"
"2a41216f086315009e07a7d379ebf72305e7dd1e","2003-10-01 06:36:25+00:00","ScummVM naming conventions and cleanup in the Sword2Sound class.

svn-id: r10514
"
"920c11972eb1e3a2fe49fa9acff9814e2fac0eb3","2003-10-01 07:29:27+00:00","Whitespace changes

svn-id: r10515
"
"cee745dbf93ef1919a2eafec630f4a1991578052","2003-10-01 09:40:28+00:00","Whitespace changes

svn-id: r10516
"
"13773455a40f356dfcd65819587c71d516504de5","2003-10-01 10:00:35+00:00","whitespace changes

svn-id: r10517
"
"eecdf67c636a8ff7a04819db4ffbc8717c278b52","2003-10-01 10:47:19+00:00","disable joystick input by default either command line or config file need to be used to enable it now, ability to choose joystick number to use also added

svn-id: r10518
"
"9bab58179de824c5bfcbd4249dadc827a27e4d55","2003-10-01 11:42:32+00:00","Revert kirbens change on 05Sep. Setting debugmode with debuglevel 0 is deliberate and intended behavior (for enabling engine specific 'debug options' without debug messages)

svn-id: r10519
"
"745497dea4cc3d0698d48338c4c7f06eac6769c3","2003-10-01 15:00:26+00:00","vline -> vLine, hline-> hLine, slightly more in line with ScummVM naming style and more importantly doesn't conflict with the vline and hline Allegro functions

svn-id: r10520
"
"b75a9256409f6067798ff1657df3dc42682770ca","2003-10-01 15:19:12+00:00","Fix for Bug [812737] ALL: pitchbend range with MT32

Manual scaling of pitchbends to account for the fact that the
MT32 doesn't respond to RPN-based pitchbend range adjustments.
Also tweaked the MT32 partial reserve settings per Bug [812740].

svn-id: r10521
"
"b6f85de558e57bcae7932329523ed8478dd83760","2003-10-01 16:39:31+00:00","instead of using a stack array, use regular variables (marked with the register keyword to hint the optimizer) for the color data. At least over here this helps the optimizer *A LOT* - instead of keeping w[] on the stack, on the PowerPC all values stay in registers, for a nice speed boost. Shouldn't hurt x86 either

svn-id: r10522
"
"628f65b639ee9357935d8f141d43d46825506082","2003-10-01 16:47:49+00:00","move INTERPOLATE / Q_INTERPOLATE to intern.h; remove some jumps (pipelin trashers I call 'em :-) from diffYUV

svn-id: r10523
"
"57eb9654b79e088a3cac406fad9b3fedccf30f29","2003-10-01 17:06:36+00:00","make MSVC7 happy

svn-id: r10524
"
"91dc619adfc2136651f6afeed5fda9926c983f23","2003-10-01 17:34:46+00:00","Fix for Bug [812995] MT-32: wrong channel mapping

Implemented channel mask for Simon 1/2
when using --native-mt32.

svn-id: r10525
"
"3e437e4f32d47ff76013ea209facefba0da9d39b","2003-10-01 17:57:09+00:00","Added initial version of QueenCutaway class.

svn-id: r10526
"
"e78b1aeb44ea222b0d4f32c404cc4480bad9d51c","2003-10-01 18:27:31+00:00","A few FmTowns games don't fall under the GF_FMTOWNS flag.
Must not filter them out in stopSound().

svn-id: r10527
"
"9c301608daaebab809fcffe900d1e77dca6b519f","2003-10-01 20:23:29+00:00","added Bob functions to Graphics class

svn-id: r10528
"
"80eb1f8cb91026234cf7f080c50c8623f0061ee4","2003-10-01 20:59:05+00:00","sync with hq2x (in particular, use my Altivec code here, too

svn-id: r10529
"
"f18847d7fb2972972c183569b953da4f4edc7f31","2003-10-01 21:23:41+00:00","fix warnings

svn-id: r10530
"
"7df1576544f7314658770338049fd31d63163a66","2003-10-02 06:38:58+00:00","Must be able to access some data here.

svn-id: r10531
"
"c8de7d508997c26295dbbb6f4853a8a113b74d8a","2003-10-02 07:01:12+00:00","Cleanups, mostly related to sound effects.

svn-id: r10532
"
"906c2eab2ed223357222562880d42522e4bacf4b","2003-10-02 07:54:01+00:00","minor changes to Graphics class (dtor...)

svn-id: r10533
"
"5b5aab8e82545b241fa3d0a078b56b572260c835","2003-10-02 08:49:38+00:00","More member data access.

svn-id: r10534
"
"9e29c7b901c6a639a7e2ee2234a930375a7b09ba","2003-10-02 11:03:34+00:00","Needing area, and it must be signed ints

svn-id: r10535
"
"27db410dfaf2daa7b885be9e59519e97c0f6e101","2003-10-02 11:07:43+00:00","Quite a bit more implemented on cutaway.

svn-id: r10536
"
"db798a3e7dbb4df5cf7f53a66188a8fcececa1ae","2003-10-02 14:37:40+00:00","Fix for Bug [815851] DOTT: MT-32 MIDI priority

Favor 'ROL ' resources over 'GMD ' if
--native-mt32 is selected.

svn-id: r10537
"
"f94b9999388f7a7cd6ac7c6f631c07c122ef2d44","2003-10-02 14:44:51+00:00","findBob function + tweaks in QueenLogic

svn-id: r10538
"
"ab990be6669c3440b38385760cbc8d58034f6dae","2003-10-02 14:55:28+00:00","Handle _sfxName table properly

svn-id: r10539
"
"8fbcb4ac151e0e4cf71dd1753901d04615fc20f0","2003-10-02 15:00:36+00:00","Added MSVC6_COMPAT in order to be able to disable
new additions/optimizations that use constructs with
which MSVC6 is incompatible, such as the revamped
template-based super/hq/tv scalers.

svn-id: r10540
"
"2d216530e6b22ad9e26e2260203bf272fefdeceb","2003-10-02 17:07:50+00:00","fix a warning wjp gets with gcc 3.2.3

svn-id: r10541
"
"67c73b6fee1bc0d2ba375cd5be984979da6648a2","2003-10-02 17:12:51+00:00","some more TODO items

svn-id: r10542
"
"f26d3d1784756fccaaf306f6b13a28cb709ad5bc","2003-10-02 17:28:02+00:00","updated Marcus' copyright

svn-id: r10543
"
"0e645f88ae1586dbac2bf0855fd0fda1f8f11eeb","2003-10-02 17:43:02+00:00","renamed namespace ScummVM to Common

svn-id: r10544
"
"6d29d07cabafdfef5bc10214a04ca87601403bbf","2003-10-02 19:20:00+00:00","Fix bugs, add warnings.

svn-id: r10545
"
"d6c3235c0e01828f3382d41c1a817c3774f545a1","2003-10-02 19:31:43+00:00","- Added QueenGraphics::bob() method
- Match new[] with delete[]

svn-id: r10546
"
"058ec2c7c611457578dc3bcb31e82820a514ac50","2003-10-02 19:37:51+00:00","You did not see the previous version of this code

svn-id: r10547
"
"68810ac106ba538e7fb697e0f7fa6eb699a4c927","2003-10-02 20:22:46+00:00","update vc7 project files

svn-id: r10548
"
"3f55f2669d560489ee017d64f5bdd0f785cf796e","2003-10-02 22:42:03+00:00","renamed class Scumm to ScummEngine (consisten with other engine names; also makes room for a potential 'Scumm' namespace)

svn-id: r10549
"
"bb6765f85d6272f736fa9bbe0981582fa7679ef5","2003-10-02 22:52:57+00:00","cleanup & restructuring; in particular move the midi driver list to its own source file

svn-id: r10550
"
"bb5351f0a8680845eb975a60eab961aa15e08729","2003-10-02 23:09:54+00:00","according to tsuteiuQ, this helps MSVC6 (seems it can cope with the enums but not with static consts)

svn-id: r10551
"
"a02c13a52e2532e50ac768ed0dc730982f4c130e","2003-10-02 23:29:58+00:00","fix scaler compilation for MSVC6. However, the produced code stll seems to be incorrect... Jamieson, maybe the MSVC6_COMPAT should be re-added then after all?

svn-id: r10552
"
"10f83ea0b45357c2ab93766d5de5817d03674a14","2003-10-02 23:50:51+00:00","this has been done

svn-id: r10553
"
"bebaf0e0fc2bed2b8e67812b5b3ac5bce0fb52f0","2003-10-03 00:30:56+00:00","You have been a thorn in my side for far too long Avatar^H^H^H^H^H^H bad code

svn-id: r10554
"
"2ed4677ede3f4a04bf0cf35d029f40a79eae57c1","2003-10-03 00:59:27+00:00","const as const can

svn-id: r10555
"
"e6819e42cf059dafe750dfd8715460fe64859bff","2003-10-03 01:07:35+00:00","added getMusicTimer() to class MusicEngine; this allows some nice code cleanup; also added an error() invocation to find out if certain code is still needed

svn-id: r10556
"
"6c5b9fceee312ce8b9e629ef0467b124f9b69a03","2003-10-03 01:15:31+00:00","some doxygen

svn-id: r10557
"
"5b9aa79c41838fafdcdf2500ca420e4cebdbd2c6","2003-10-03 01:31:39+00:00","This is used in Amiga version of Monkey Island 1.

svn-id: r10558
"
"e6c626b7565ca9f8320ae7f89b0523783d5eb1ee","2003-10-03 01:35:21+00:00","Adjust timer for Amiga version of Monkey Island 1.

svn-id: r10559
"
"2c726548969a33c37b4dd79ac9f72ee5b6f80a7c","2003-10-03 06:47:42+00:00","Fix GCC warning.

svn-id: r10560
"
"10fee205e1d7d064c74040192022440711f3a4ca","2003-10-03 06:54:44+00:00","Some renaming (ironic in the light of Fingolfin's recent namespace
suggestion, but I prepared the patch long before reading the mail :-).

Also, the remaining parts of the control panel etc. have been moved into a
class of their own.

This is still work in progress. I'm well aware that some of the classes
aren't as well separated as they ought to be, and that using global
variables to keep track of the different classes probably isn't pretty.

svn-id: r10561
"
"f0fae232b9569202b1c778401d510285735d794f","2003-10-03 07:45:41+00:00","fixed compilation under msvc7

svn-id: r10562
"
"be1bd35ae5b93646ebad10b7ae837fec675f9d18","2003-10-03 08:18:17+00:00","moved msvc6 and msvc7 project files into dist dir

svn-id: r10563
"
"88de9a21ae44d59e057f6ff85a1c7dcbfbd8b701","2003-10-03 10:30:33+00:00","undo aquadran's recent changes here. If this doesn't compile on MSVC7, fine, simply remove it from your project file - it's not supposed to be compiled ATM

svn-id: r10564
"
"4a19ca4e34f3694895a8c9b8acba79e63687bbfb","2003-10-03 12:55:11+00:00","Use struct and not array for objectData.

svn-id: r10565
"
"d2e7146723e4f479eee39244a1bfffaa9fb69ac3","2003-10-03 13:43:07+00:00","Potential fix for bug #816086

svn-id: r10566
"
"3ead57623e5e5dea1faf5556d6526b40ece3199d","2003-10-03 13:44:12+00:00","make doxygen happy

svn-id: r10567
"
"a6cb5aa76b360abbe899c27a2bee81ab96c2e96e","2003-10-03 13:49:06+00:00","fix another doxygen warning

svn-id: r10568
"
"aed27b35dd0ff860a80fb784c0fda00f58e87334","2003-10-03 13:53:46+00:00","use C++ struct naming instead of typedefs -> this fixes (or works around, whatever you prefer to call it) the GCC_PACK problem in Doxygen

svn-id: r10569
"
"eabeb62e20a8ed2117e19ca3bf04bb1d33637b79","2003-10-03 13:59:44+00:00","fix doxygen comment

svn-id: r10570
"
"d7660a2662be298dad3cf9b320137dac8744d456","2003-10-03 18:33:57+00:00","introduced namespace Scumm; made #include statements use scumm/ prefix explicitly

svn-id: r10571
"
"056974821a9630f8f5c8971320471e5864e7e07f","2003-10-03 18:59:48+00:00","Fix OOB SysEx checksums

svn-id: r10572
"
"5fa23e5fee79e2ce99cdda3d890574c969f10f58","2003-10-03 19:32:18+00:00","Fix for Bug [817242] ALL: MT-32 to GM key velocity conversion

Implemented dynamic range matching for MT-32 tracks
routed to GM output devices.

svn-id: r10573
"
"a4b72c9d6e02470551f71276e5d46bd3dbc921f7","2003-10-03 19:42:27+00:00","Simon namespace

svn-id: r10574
"
"8fb8ea48ec71b3806ed4d8a27f20bed399b58386","2003-10-03 19:47:41+00:00","namespace Queen

svn-id: r10575
"
"d19c7980fb350359003412eab07b6b29d9b3e9ed","2003-10-03 19:59:19+00:00","fix 2 cases not handled in findBob() (stupid me...) and match new/delete

svn-id: r10576
"
"c3d84b1a14b787ba9037b71f11d601d6e40fb4f7","2003-10-03 23:12:42+00:00","Mention mingw as windows compiler.

svn-id: r10577
"
"ad293a5ab8bf59f9535a4e8fbb3681c76f28128e","2003-10-03 23:34:06+00:00","cleanup / doxygenification

svn-id: r10578
"
"afd9119d373e24f457a542b6a5960057a5c6b171","2003-10-04 00:12:30+00:00","small remark

svn-id: r10579
"
"68d923505efb9cb45366b0528f8bf039c1b18902","2003-10-04 00:47:23+00:00","let adlib/native music for indydemo work

svn-id: r10580
"
"5a074e6137dc8368132e4e192c018806c1723222","2003-10-04 00:52:27+00:00","added namespace Sword2

svn-id: r10581
"
"3ef5a410a3337b323b40fc6828df7d11aa4016ae","2003-10-04 01:02:23+00:00","add ability to use boot_param in a config file to specify boot param, this is useful for many things esp loom towns where difficulty select is via boot param

svn-id: r10582
"
"2162df92fc5efbe64bce31c91d880c47e1daa44d","2003-10-04 01:09:29+00:00","removed Sword2 prefixes of most classes (made obsolete by our namespace usage); renamed Sword2State to Sword2Engine

svn-id: r10583
"
"defa0e6ffc178288ada964e7c2ee0abdf9d00a58","2003-10-04 01:09:55+00:00","add indy4 towns target, untested but if the demo is any indication I don't see why it wouldn't work

svn-id: r10584
"
"15a115c5ac3abd4949a753c193d0d7a593810f48","2003-10-04 01:12:30+00:00","fix target name

svn-id: r10585
"
"34542286f6b9951ab02000a8a272276f35f62a72","2003-10-04 03:51:25+00:00","Update settings

svn-id: r10586
"
"1efd91d5154458b5030717150a60ffb87b5b6957","2003-10-04 04:58:49+00:00","update the update and consistently use number instead of int when describing config file options to be more user friendly

svn-id: r10587
"
"4fad04846a1341aa1a115d7e6896c1f1ca7dd3ea","2003-10-04 08:07:03+00:00","Changed to use #include 'bs2/...' and removed the inclusion of standard C
headers. Most (all?) of the ones we need should probably come from stdafx.h
instead.

svn-id: r10588
"
"f8ce610c2bb72330fa43f89b4cf6c07e647526b7","2003-10-04 08:31:20+00:00","Moved some stuff out of driver96.h. Eventually I'd like to get rid of most
Moved some stuff out of driver96.h. Eventually I'd like to get rid of this
file completely. Or at the very least most of it.

svn-id: r10589
"
"3c627375b8e6ad237e2d787618802652510f655c","2003-10-04 08:50:48+00:00","Added gameState to QueenLogic

svn-id: r10590
"
"91da08e1f3f836442c9c2ff39a9d1570f49df24d","2003-10-04 11:39:53+00:00","new header for common structs definitions

svn-id: r10591
"
"d4734bd4f2963168f794691a618869ba4e558aaa","2003-10-04 11:50:21+00:00","use namespace Common a bit more; don't zero the RNG in scumm (else the seed gets reset); remove obsolete 256 color blending code

svn-id: r10592
"
"93f5234e841c9545ba5118290646e8296ce0848f","2003-10-04 22:45:20+00:00","yet another config TODO added

svn-id: r10593
"
"4a84b356f8570fd47ee258c694b7acd722eabe5f","2003-10-04 23:49:04+00:00","revert the 'reverse Y axis' hack

svn-id: r10594
"
"a8da69bca54c422c1d89cf14bfa4a9bfcd136f06","2003-10-05 00:28:23+00:00","fixed some broken scaler related checks

svn-id: r10595
"
"48fd7e39d55e69fd0af624d80ea64d7e5e13eb1a","2003-10-05 00:40:25+00:00","cleanup

svn-id: r10596
"
"03200d83277def6cfe77e0e49825cdc2bbd4ff74","2003-10-05 00:46:46+00:00","Remove unneeded case.
Disable code that causes crash when using opengl from command line for now.

svn-id: r10597
"
"661d58330354cefa2b291b1acdad84f90768b9f7","2003-10-05 00:50:21+00:00","Ooops

svn-id: r10598
"
"9e0b1ca890fb0ae355bd2744f5a95d88455f69a0","2003-10-05 02:58:11+00:00","Use _roomPalette for 256 color 'SMALL_HEADER' games too, since it seems to help some.

svn-id: r10599
"
"834eadcdfbfcadc22a47c63e6c015139791edf60","2003-10-05 04:21:05+00:00","add note about the font encoding  used for kanji

svn-id: r10600
"
"b831c5cf538349354e528b21a359141362214fbc","2003-10-05 06:11:15+00:00","This should fix distaff display after reload in loom/loomcd.

svn-id: r10601
"
"b37853b713ad68bcbfbc3257e38b54443acabcc6","2003-10-05 06:38:07+00:00","correct for towns version

svn-id: r10602
"
"e1128abe6472f4087e6c9585e5c1e8c97e81ff0d","2003-10-05 13:10:28+00:00","create the timer object a bit earlier

svn-id: r10603
"
"48e94ef721b6ddd73c36aed50b9bd2edcea96e8c","2003-10-05 13:10:53+00:00","added doxygen comment & TODOs

svn-id: r10604
"
"84628e217a7478bcf5f782dc3f83f601f71ddced","2003-10-05 13:53:25+00:00","bump version number

svn-id: r10605
"
"8cb0c8c3204b75685dfc6f25d8ac9e49e6c52545","2003-10-05 13:58:46+00:00","bump version

svn-id: r10606
"
"6e73fffcfad1e607db473004f3c6e718ecdebdc4","2003-10-05 14:02:28+00:00","added iterators to List template

svn-id: r10607
"
"a0fb1850de7e4a69cd21946a6fee431cb6beb0c6","2003-10-05 14:02:37+00:00","cleaned up iterator code in Map

svn-id: r10608
"
"fd2c041d79e6b4132d7edeab6be613984dedefd3","2003-10-05 14:03:07+00:00","Make use of new List iterator

svn-id: r10609
"
"bfde7528bab0dfa74bde6173ca31d61818c01bd9","2003-10-05 14:15:31+00:00","no need for an explicit error here; rather, the linker will catch any invalid uses if we don't give a body

svn-id: r10610
"
"b4e5d97994a5827350e030429caea364514dadda","2003-10-05 14:37:16+00:00","factor out common gfx_mode/fullscreen setup code from the game engines into the main code (maybe putting this into the Engine constructor would be better, though?)

svn-id: r10611
"
"16e489753174c27a5d38cde52922b920bd215e42","2003-10-05 14:41:30+00:00","cleanup

svn-id: r10612
"
"2e27e74fb42847c781e61f8acf29f6658a34f292","2003-10-05 15:04:25+00:00","implemented new 'nice' scaler hotkeys

svn-id: r10613
"
"7174a32c8e877627c51da50b657083873aeef1e6","2003-10-05 15:28:15+00:00","Made a separate class for the cutscene functions, removed some unused code
and made some other minor cleanups.

svn-id: r10614
"
"a722d0601e4ae87b15fe09f62b3a1076c6c8646e","2003-10-05 15:36:52+00:00","Preliminary preparation for new YM2612 FM emulator.
All the hooks are in, but actual implementation
needs to be checked for portability.

svn-id: r10615
"
"4089ab534775428569bee8a47f05c5994d5e2125","2003-10-05 15:45:49+00:00","fix compilation

svn-id: r10616
"
"47e3b8f55d55530b6b6593c02d57a33d1767cd4c","2003-10-05 15:49:43+00:00","something I am working on

svn-id: r10617
"
"36ed0b1d3c662743f638fc7c9275f6952542c23d","2003-10-05 16:07:07+00:00","renamed classes (we have our own namespace now) + fixed segfault in logic

svn-id: r10618
"
"052fc3368b0009690ad92bdd4d106a81274241ae","2003-10-05 16:25:06+00:00","removed not compilable files

svn-id: r10619
"
"0954fc1dac5195d86335edb4def33006a2c8be29","2003-10-05 17:32:38+00:00","cleanup

svn-id: r10620
"
"9f537f4b8cbb282af717a66d3912ad51602e174f","2003-10-05 17:42:55+00:00","clarification: premixer must use native endianess

svn-id: r10621
"
"bfce5e500aa09d36b974c29acf91780e0b26b459","2003-10-05 20:21:20+00:00","renamed SkyState to SkyEngine; cleaned the #include dependency mess a bit (try to only #include files when you *have* to -> this reduces compilation time to a minimum when header file changes are made)

svn-id: r10622
"
"3463af574527c54719e9f095165141c5e3cf9087","2003-10-05 21:39:04+00:00","Fixed crash with Euphony looping. (Not that we actually
do looping right now, but I hit this during a test.)

svn-id: r10623
"
"98a16da50bcca223536f0b35e5ad45b4faa5b29a","2003-10-06 00:09:26+00:00","For those us who have to hit Shift to get to +

svn-id: r10624
"
"f16775476f38bebba110579235e9f7ebdfdd485a","2003-10-06 01:01:31+00:00","The real YM2612 implementation. Portable,
and with significant performances optimizations
thanks to Fingolfin, or optimizing emperor. :)

svn-id: r10625
"
"97d7223bcabcfe8c12ed4cd07371e1c3887c4006","2003-10-06 01:08:38+00:00","Fix compiler warnings

svn-id: r10626
"
"ef485006b159e580ee9cb9e8bb7744012a7d6117","2003-10-06 01:24:22+00:00","more optimizations

svn-id: r10627
"
"a4150583cccd85c5275237acc5141571ad2e7666","2003-10-06 01:25:24+00:00","oops - that happesn if you incorrectly re-apply a broken patch =)

svn-id: r10628
"
"94134421bcc9893340b542297d22daca930d78ec","2003-10-06 04:41:25+00:00","More performance optimizations

svn-id: r10629
"
"a93f400e94c0b168371c52c2542db4881f61e5b3","2003-10-06 05:54:55+00:00","turn on exception handling

svn-id: r10630
"
"e04c7608478b0cc54ebc5b7b26e3891066e61b40","2003-10-06 07:32:54+00:00","Removed obsolete FIXME comment

svn-id: r10631
"
"8979adac04dbc1075e6c9f5d14e635202fcc2f2a","2003-10-06 08:10:57+00:00","Should make --disable-queen work, suggested by Nightweaver.

svn-id: r10632
"
"7b87bc6970ec6169c9877cf4cb0720c7be909f12","2003-10-06 08:24:38+00:00","Check array bounds.

svn-id: r10633
"
"c69fa6f4c56560829819462c3d6796a0d82f6143","2003-10-06 10:27:22+00:00","Start on index 1, not 0.

svn-id: r10634
"
"ebd0b962fbc9885d1966b18618e27187c5754a8c","2003-10-06 12:28:52+00:00","Should not apply to loom/loomcd, they only use room scrolling at one point and this causes glitches.

svn-id: r10635
"
"ca13989959ffda548060678043a3777d97fd814b","2003-10-06 12:33:40+00:00","some incremental changes (more will follow, this is step-by-step optimzation, watch it happen in pseudo-real-time and color. icecream is sold at the entrance, please stop smoking

svn-id: r10636
"
"5a1bd7574afa9e094a138c7b4e4eb17c196cd61b","2003-10-06 13:02:06+00:00","some more tweaks

svn-id: r10637
"
"633fb7de0fcaaaaa6435223bbd18217fec79d65c","2003-10-06 13:20:29+00:00","some additions + small readability rewrite

svn-id: r10638
"
"52efd44852246cff7e19a5dc3efac96d847cea71","2003-10-06 13:37:54+00:00","even more optimizations

svn-id: r10639
"
"4ef2541a3afdd88df3266754f00e7d0e9387ea23","2003-10-06 14:01:41+00:00","forgot this

svn-id: r10640
"
"83ace36fcc3bd256040129db699a6fbd75b6002d","2003-10-06 14:08:33+00:00","Per-channel polyphony now > 1

svn-id: r10641
"
"7829083a780819dda8bdb37ca9ca8b53245a4d69","2003-10-06 14:15:01+00:00","malloc/new optimizations

svn-id: r10642
"
"5ca9daeebd9378bbdd8f37fa95f05ec50a3681cd","2003-10-06 14:32:22+00:00","remove <string> include so we don't depend on stdlib stuff (not used anyway) this also stops compile problems arising from our overloaded memory operators here

svn-id: r10643
"
"6cad2556ef5d606634f2a7a3cd04b995d18e1aa0","2003-10-06 15:26:01+00:00","removed unused 'rate' param from nextTick; another tiny tweak to Operator2612::nextTick (avoids one memory store over here, woohoo <g>)

svn-id: r10644
"
"1ebb7cce53723900b0dde2f93a5ee9f0ae563730","2003-10-06 19:21:18+00:00","removed obsolete

svn-id: r10645
"
"8c9dc47ee1f505f68834c55e12d046afaf89dc72","2003-10-06 22:33:54+00:00","fixed warnings

svn-id: r10646
"
"16ee37f81723c68d5221c001e2be97153d390648","2003-10-06 23:04:00+00:00","added resource-table loading from external file

svn-id: r10647
"
"f57a6d74a1b198a8d892f5076b8f5abd3ab5d1ef","2003-10-06 23:12:01+00:00","Fix text when room scrolls in game versions < 3.
Manual redraw of verbs areas isn't require after reload of game in loom/loomcd, causes glitches in some locations.

svn-id: r10648
"
"e5c62af78e4cbe25bca2f85e1bde64d4e2d6f47f","2003-10-06 23:19:01+00:00","added String::emptyString constant

svn-id: r10649
"
"249444e4c63543bf6fc5035e47c297938fa2684e","2003-10-06 23:21:22+00:00","*** empty log message ***

svn-id: r10650
"
"9e585098d8cca0ad8e36294efd8d2f175141278b","2003-10-07 00:26:04+00:00","add Joe struct + get/set functions

svn-id: r10651
"
"dacd8ce4d1714125a07a2507ac53e375bf9181ca","2003-10-07 03:54:49+00:00","FM TOWNS sfx fix, correct sample rate.

svn-id: r10652
"
"5c6469536762483eb149724802381cf362c81e1a","2003-10-07 03:58:29+00:00","Ooops, used wrong one.

svn-id: r10653
"
"c001e4357bc91cd9b1231fd6c6d05f9b891d118b","2003-10-07 03:58:44+00:00","- Add Talk class and begin to use it from Cutaway class
- Move getString() helper function to Talk class

svn-id: r10654
"
"bafce8daf527065f96c8b2452e5c2ce44a2b9732","2003-10-07 03:59:24+00:00","Remove comment, which is no longer needed too.

svn-id: r10655
"
"e04d25f86d2012733a718635e4efd6b913d17bbe","2003-10-07 05:09:53+00:00","update a bit

svn-id: r10656
"
"8937a96e50c377116b63112f1ab1fd5a76ae69d8","2003-10-07 06:56:29+00:00","- Added a debug stub for the selectSentence method
- Added final talk for person Joe is talking to

svn-id: r10657
"
"e8b6016e336567ef9abf9c0b5e1fe3097c02a90e","2003-10-07 07:06:50+00:00","Renamed the FontRenderer class as FontRendererGui since there's another
font renderer for the game itself. (It just doesn't live in any separate
class yet.)

svn-id: r10658
"
"29b646b30a967f1ec1028b4112fd106ed7b24143","2003-10-07 07:07:47+00:00","Some cleanup, some code removal and some unstubbing. Nothing important.

svn-id: r10659
"
"f8400b1c4443f2872e57df9503f2d9e6943b7fd6","2003-10-07 08:22:53+00:00","Fixed assert(). I think -- I don't even get this far before ScummVM crashes
on me. :-)

svn-id: r10660
"
"8177fce048aa19dacd6ff57b830f847ae5648000","2003-10-07 08:24:54+00:00","Make it possible to get game language

svn-id: r10661
"
"e7abb0363d57cacd17cb709424f17139d790ddaf","2003-10-07 09:04:25+00:00","new header for common defines/enums + some additions to Graphics

svn-id: r10662
"
"2485f15e343e67b2c385a1249c7cebf8d2a360b4","2003-10-07 09:34:19+00:00","fixed warnings

svn-id: r10663
"
"3a4cc9fcc2f771b68203718326ad572b71cce142","2003-10-07 11:22:35+00:00","Removed version.cpp

svn-id: r10664
"
"ea482be9872198cf1988ed30ee577b7194c18233","2003-10-07 11:32:43+00:00","Set up MDT_TOWNS on remainder of FM-TOWNS targets

svn-id: r10665
"
"577fe4c5fb97d0d29669b67fbf49abd09a31dded","2003-10-07 12:00:53+00:00","Patch [818296] Modified MT-32 intialization sequence.

svn-id: r10666
"
"f99c8b81dbbdcab69ea40aa8acbf8db9198cbf2d","2003-10-07 12:20:31+00:00","Improved Queen::Talk class

svn-id: r10667
"
"027543b30b1d784bff2e944c347e4a6a5c4bc80a","2003-10-07 13:11:54+00:00","More polyphony tweaks. Sounding a bit better.

svn-id: r10668
"
"f49a741cfb244574bf05ddece0849cc78c4d56e2","2003-10-07 13:12:29+00:00","Remove my trace output. :P

svn-id: r10669
"
"537ee7166fc50701845fd2ad73c5124e0f9be0db","2003-10-07 14:05:56+00:00","some text functions

svn-id: r10670
"
"69964cda56f6570158197def169564a2aa1776ac","2003-10-07 15:13:39+00:00","Corrected MT-32 master volume SysEx

svn-id: r10671
"
"da9fcd9cebf4f381696820e062e368b9be9b610a","2003-10-07 15:15:26+00:00","More Euphony/YM2612 instrument layering and polyphony
fixes. Aside from variations in the instrument timbre,
the output from ScummVM now seems to match up with the
output from UNZ (MAME YM2612 emulator).

svn-id: r10672
"
"0281f6b6d654ebebb7e8c24fe53586d2a2ca3a18","2003-10-07 15:27:53+00:00","fix gcc 3.3 warning

svn-id: r10673
"
"abc23ac28b5d9c4f1e60548c6be2ca7716b0dfea","2003-10-07 17:29:33+00:00","Removed version.cpp

svn-id: r10674
"
"c630856470f771972e3c10a34532d61ed518c717","2003-10-07 18:23:21+00:00","update preoject depedencies

svn-id: r10675
"
"7adf0ff1fcd4e22c957455bb4ab7e24dc7a07e72","2003-10-08 06:58:34+00:00","Some more cosmetic changes while I'm considering the next move. (Or maybe
I'm just hoping that if I stall long enough, someone else will make the
move for me. :-)

svn-id: r10676
"
"802a2a1310cea01a95c5d9a698440a221a418043","2003-10-08 07:38:48+00:00","Fix display of verb name text when verb is selected in Simon the Sorcerer 1 and enable for all versions of the game.

svn-id: r10677
"
"311dea141b37cb78dcf95ed8e7fa5daebe86e3d0","2003-10-08 08:55:07+00:00","added new structures

svn-id: r10678
"
"2be56b398513bc1d416c6bc509356cc5f29a35f1","2003-10-08 11:18:58+00:00","No point in compiling queen at the moment.

svn-id: r10679
"
"91fc9accbb1b7bf4a09baacd9bef35cc6fdfc39f","2003-10-08 11:31:47+00:00","Fixed Indy4-Towns music settings, plus small multi-midi quirk

svn-id: r10680
"
"a1f4dc2c90efd28d30eec2b947ffe9d619ad0989","2003-10-08 17:09:51+00:00","cleanup

svn-id: r10681
"
"a29d128bd3b53847de3e89801426dfc19e2ecbc1","2003-10-08 18:02:53+00:00","Use RandomSource instead of rand().

svn-id: r10682
"
"b41c052ab5b117ca236fd1ea48c9fe7dbe671575","2003-10-08 18:05:20+00:00","renamed createNode() to findOrCreateNode(); added addKey() method; reimplemented merge()

svn-id: r10683
"
"cf3ac50e3c76e3aa0d9e5c30ba4e83e6a4c4d85d","2003-10-08 21:01:50+00:00","add String::lastChar() method

svn-id: r10684
"
"9e5c5e292a5839c9df787afbd44b9ac6f148a100","2003-10-08 21:09:21+00:00","humpf

svn-id: r10685
"
"3c78c0929c553fd67016f87c6cdc38d3f50d7ca2","2003-10-08 21:27:57+00:00","fixed queen build rules...

svn-id: r10686
"
"d1773647159f9ef1393d7a1d33204de5886edce5","2003-10-08 21:59:23+00:00","new config manager. not everything is completed, and some things will still be changed, but it seems to work well enough to put it into CVS

svn-id: r10687
"
"6e09d35090ab1fa600c5fe1e2f2006ffb0e9c131","2003-10-08 22:10:59+00:00","turned PluginManager into a proper singleton

svn-id: r10688
"
"de74ceb60acb166b61461d9a22d14b42138de416","2003-10-08 22:47:41+00:00","fix bug where going up in the root dir would get you back to the (unix) current dir (instead of staying at the root)

svn-id: r10689
"
"e3a72b51499508ad7eb9b9c4bad9c63cf90138ba","2003-10-09 05:27:52+00:00","Add player_v2a - fix crash when playing two identical sounds, patch #820427

svn-id: r10690
"
"94be874b704ae7d761353a92aff37afdfee05166","2003-10-09 05:44:46+00:00","I had this wrong way around.

svn-id: r10691
"
"d3e35bc7316814df3d0111232072ba06079a50d2","2003-10-09 06:52:28+00:00","Temporary (?) fix to stop ScummVM crashing for me. (I don't define any
music driver in my [scummvm] section, which may be what's causing me
problems.)

svn-id: r10692
"
"d5bd6812ee548896fe6331e7a222a1836dd16ec9","2003-10-09 06:57:35+00:00","Some cleanups and clarifications. Mainly, we no longer refer to the
inventory/conversation menu (which is drawn at the bottom of the screen) as
the 'top menu'.

svn-id: r10693
"
"efef7ff6a26c4cff4736a9f463a965c211075144","2003-10-09 08:30:51+00:00","update project file

svn-id: r10694
"
"91aaef03bc57bdf1284c3404b96b983d03695194","2003-10-09 09:09:40+00:00","added walking functions

svn-id: r10695
"
"02b132b31c78fac0afc8b9eff266d42223097cd3","2003-10-09 11:15:54+00:00","make khaleks correct fix a bit nicer; and add similar safety nets to the other parser...() methods

svn-id: r10696
"
"e53923eedac8db01f32bf106cb523a747e898780","2003-10-09 11:33:34+00:00","give this more chance of working properly

svn-id: r10697
"
"21480a2289f216e38b872ceb038d3e661d4a01ce","2003-10-09 11:42:59+00:00","fix ConfMan.set when dom is empty; added some asserts (paranoia)

svn-id: r10698
"
"d03dfdb6f781efcb380f4db1646b85db85b20518","2003-10-09 13:14:16+00:00","minor additions to walk class + get/set functions for Logic::_area

svn-id: r10699
"
"92997ec15ff1653b225c1ae0c73a5cb9dc94aab9","2003-10-09 13:42:55+00:00","- Make _moveData table readable
- Add missing member in last table entry

svn-id: r10700
"
"0de202bfb4a53eee022ceae7d9cbb085ddd83d5f","2003-10-09 14:05:09+00:00","make gcc 2.95 -Wshadow happy (yes fingolfin its a broken compiler :)

svn-id: r10701
"
"1de6c5adb00536bc5d4c8d5cd8a621d389e3f2a8","2003-10-09 14:10:20+00:00","kill reference to old url

svn-id: r10702
"
"3f06651bab55014b97ba299dc700a9ba99034ad9","2003-10-09 14:17:06+00:00","Moved PalmOS initializations out of namespaces.

svn-id: r10703
"
"bbb308c8cbef6184f2bc3ad64fbc929e2e55cec6","2003-10-09 14:20:20+00:00","Disable unused Scumm version (8) in PalmOS port.

svn-id: r10704
"
"768d4c3834d27e723e7a5d9b65d640e6abf73b0d","2003-10-09 15:03:01+00:00","get rid of the copy method again, instead create the sound object on the fly in findSound(): this should avoid a compiler problem with gcc 2.95.2 (see bug #820641) and also reduce the number of unnecessary global objects for everybody

svn-id: r10705
"
"17cbf4d56ce2b778c26770f5ff2dcea364d8a7d2","2003-10-09 16:03:31+00:00","some NEWS updates; use sections (any major news for sky/simon since 0.5.1 ?)

svn-id: r10706
"
"afb96f867cafcf5af089abc1ca365ee35c2f4ced","2003-10-09 16:33:00+00:00","fixed compilation

svn-id: r10707
"
"d93520b223be4f48848598839074fff3d0276900","2003-10-09 16:33:29+00:00","update

svn-id: r10708
"
"7286df0c94a9c7a2236821c38914dc76db3287b3","2003-10-10 09:19:52+00:00","additions/corrections to walking functions

svn-id: r10709
"
"370cf1b9727d914ae2eb99eaa160cd2311003edd","2003-10-10 09:24:21+00:00","oups

svn-id: r10710
"
"4ae7e06a1df247143821c4b0bb051cfd3d051838","2003-10-10 09:45:22+00:00","Improved Talk class.

svn-id: r10711
"
"90d35c0f135ae020c62ef57b277f4042a5c5a07e","2003-10-10 10:03:02+00:00","Add old change from SDL backends, give error if video mode isn't support.

svn-id: r10712
"
"08b74fbf792812f230f6715926adeb073c0cc264","2003-10-10 10:41:57+00:00","a small TODO/idea (maybe we should add an IDEAS file?)

svn-id: r10713
"
"ed5948272dc3f91c793f64f6c82fc1a4b87173ce","2003-10-10 10:42:37+00:00","constness

svn-id: r10714
"
"eece292342f641dbb394496feed3fc7a3d6782f1","2003-10-10 10:42:54+00:00","rearranged code a bit

svn-id: r10715
"
"2dddd0e29a148949148b830f298b3479b4a3b9bc","2003-10-10 11:13:25+00:00","modified version of patch #821018; fix for bug #821083

svn-id: r10716
"
"a8f8ae545268519f7044da25007f94cec6580909","2003-10-10 11:15:14+00:00","added my thoughts on our command line options (please feel free to comment and tell me what you thinkg about it!); fixed program exit code for -z

svn-id: r10717
"
"c11ebb33b6c4ae7c9766d1dd94009f390eedd846","2003-10-10 12:12:56+00:00","cleanup

svn-id: r10718
"
"1f9497cb1fbfcc8c3ffd412ce450144983b2452d","2003-10-10 13:01:14+00:00","Get Graphics object as parameter too.

svn-id: r10719
"
"5301edc38306c27143f38d74085e6c095688f6aa","2003-10-10 13:55:08+00:00","some cleanup

svn-id: r10720
"
"901f569998afa2a8f88ce70443dcb321f2cbd35e","2003-10-10 13:59:05+00:00","New config manager files

svn-id: r10721
"
"bd2bdd4c64a84ba4d3851778f56dccc49952e6fc","2003-10-10 13:59:21+00:00","Small start for variable cross-reference.

svn-id: r10722
"
"413ae8aa3e2ba86ece01cd778c292feb5a5bba75","2003-10-10 14:01:30+00:00","Public constructor/destructor, for the sake of Singleton<>.
Sorry, MSVC6 doesn't seem to properly deal with the line
friend class Singleton<PluginManager>;

svn-id: r10723
"
"251c89b0372200e0f7cd1be1299d9d3cd85160d3","2003-10-10 14:12:01+00:00","fix handling of last argument: if it's not a valid target, treat it like any other arg (in particular, this is now legal: ./scummvm -f -g hq3x)

svn-id: r10724
"
"87d97ead359fbf41423cc94109bd62a434c0d19e","2003-10-10 14:14:36+00:00","fix by hibernatus

svn-id: r10725
"
"504fa5c5e0773174b72f3eb17c952defab1298e9","2003-10-10 14:58:13+00:00","Hmm, that wasn't the problem after all. Apparently
MSVC6 doesn't like the 'using' keyword and consequently
got confused by the namespaces.

svn-id: r10726
"
"bd5f50496a450f6e7b5363923e12adf5787b2e92","2003-10-10 15:57:08+00:00","Added singleton.h. Not really mandatory, but since it's
our tradition to explicitly include the .h files in
the MSVC projects....

svn-id: r10727
"
"ade93aabffb38f96fb70856111c742b91e8c71ae","2003-10-10 16:14:52+00:00","cleanup

svn-id: r10728
"
"4675d193510d4e8191330132b6d58bc85ac5ac5a","2003-10-10 20:03:34+00:00","Graphics tweaks

svn-id: r10729
"
"478e068ca807c9f4a92d7dd1f0cdd9fc40ce7cac","2003-10-10 21:40:25+00:00","Feature Request [781797] Support music in the Mac version of MI1

Finished the Mac0 -> SMF (GMD) conversion code. Sounds
good (albeit thin, with only 3 instruments), except
that the looping songs are not looping with the right
timing.

svn-id: r10730
"
"cd1d7f474df973982b5653ba0bc6e76645822edb","2003-10-11 10:09:23+00:00","preliminary DISP_ROOM implementation

svn-id: r10731
"
"a259809540ad494dc9d0126bc6125da63d5da043","2003-10-11 10:24:12+00:00","update QueenEngine class with new Logic constructor

svn-id: r10732
"
"650581eef80bcf2fbe5bb55218ae329a8673498e","2003-10-11 12:21:48+00:00","Fix warning

svn-id: r10733
"
"02a157e745210d8986df83dd2114c2ee0ae86c88","2003-10-11 12:26:53+00:00","Moved the text drawing stuff into a class of its own. (Adding another
global variable which will hopefully be dealt with later.)

svn-id: r10734
"
"1c3bfd6e73ae04126bba4d27a27ebc68c2fe6f19","2003-10-11 14:13:22+00:00","Patch around another MSVC6 quirk

svn-id: r10735
"
"0aefc625615254236d2cb82dbe50304c22d42e98","2003-10-11 14:16:38+00:00","Added latest FOTAQ modules

svn-id: r10736
"
"487c2c51c308ec4e48632ce45c72faf2393399c8","2003-10-11 15:18:49+00:00","Some Mac0 conversion tweaks

svn-id: r10737
"
"80c6401b9daed7c988b5b2cbc0dbb3900d2a54b0","2003-10-11 21:15:57+00:00","fix for bug #821502 (GUI: Launcher crashes with unexisting targets)

svn-id: r10738
"
"5645fa4266624151b4cc05d893c7d177f84c0416","2003-10-12 00:12:54+00:00","Update issues

svn-id: r10739
"
"44459154031a46682014052b42e65b2131dd930a","2003-10-12 12:03:17+00:00","Missed two spots

svn-id: r10740
"
"a489795d93f6827c244e92ab3ade8427c585ecac","2003-10-12 13:03:34+00:00","Fix WinCE build

svn-id: r10741
"
"70667d14daa4cbecccc56ac62352107381145203","2003-10-12 13:04:46+00:00","Alignment fix in debug message

svn-id: r10742
"
"1e6837281653c8e38afde8c6580592b43a8a71d9","2003-10-12 13:16:35+00:00","DISP_ROOM additions/corrections

svn-id: r10743
"
"b085e51dc539ffaaab3457b7f85d18ea29ff6f05","2003-10-12 13:27:42+00:00","EVC : compile different

svn-id: r10744
"
"de086642a983623d98d930cf6adf97142da5adbf","2003-10-12 13:33:21+00:00","EVC is happy now

svn-id: r10745
"
"7ba572b7b84f9f07c3afe582a1b47e64c854603b","2003-10-12 13:35:31+00:00","New config-manager, Add Broken Sword 2, Whole filesystem scan for smartphone thanks to MS non standard storage mappings

svn-id: r10746
"
"2694c283d949939afb004b288990855514006f73","2003-10-12 13:39:15+00:00","True assert

svn-id: r10747
"
"2502a44e212a315f820f30c0329b3d210aab80d9","2003-10-12 13:40:26+00:00","Re-add right click automatic mapping, lost on the branch

svn-id: r10748
"
"5d42202b2d82999b4fe5b4d6038a64a6294acd1e","2003-10-12 13:44:37+00:00","mac loom uses different var.

svn-id: r10749
"
"a7e2978fa3ec10427ed488c493ed109dacccaa3f","2003-10-12 13:49:09+00:00","Smarter partial blitting and better filter for 640x480 games ... hopefully the last update before the rewrite

svn-id: r10750
"
"4c0057db7de5f9d434bdbba5b204c75cb8ee8407","2003-10-12 13:51:05+00:00","New config-manager updates, misc updates

svn-id: r10751
"
"17c5c86316ce190cfb9a14baddd82d12928793f7","2003-10-12 13:59:24+00:00","Moved build files

svn-id: r10752
"
"c38ca923d8c8646fda3df4da2b5934feffe5395b","2003-10-12 14:31:21+00:00","Fix for Bug [821514] SIMON: No Adlib volume for percussion

Transmit volume with each percussion event. (Necessary
because music and SFX tracks may share the percussion
channel.) This is the same approach used in iMuse.

svn-id: r10753
"
"1b52e11d559aa7c8df48bb114d4dd4dfb02a0770","2003-10-12 14:40:04+00:00","Moved the 'router' code into a new Router class. I'm hoping this is
analogous to the SkyAutoRoute class.

svn-id: r10754
"
"13541879e01578fa6178a7b7944c70e464433a2a","2003-10-12 14:47:44+00:00","Fix for Bug [817286] MT-32 execution checksum errors

logicdeluxe's patch to avoid MT-32 processing
overflows when sending large amounts of SysEx data.

svn-id: r10755
"
"c6bcb0d0e90e27750ca5a00d9d265d1bc7742e31","2003-10-12 15:13:46+00:00","GameX is not supported

svn-id: r10756
"
"a649ff605875066f733c242d64fdc9242527de0c","2003-10-12 15:57:01+00:00","New build files

svn-id: r10757
"
"0b51516c7fc4767b47315a0a3fafa74e0ab532b1","2003-10-12 16:37:56+00:00","minor additions for DISP_ROOM

svn-id: r10758
"
"83f7aa69b5ced7c2dad63a82adb8aa158746a64f","2003-10-12 16:46:23+00:00","Fix for Bug [817871]: Added MT-32 master volume adjustment to pause().

svn-id: r10759
"
"8226fbc14770ced7f0e26c4033530d46e14ec39c","2003-10-12 17:17:43+00:00","workaround for bug #820507 (INDY3TOWNS: Biplane controls are haywire)

svn-id: r10760
"
"7747ef28d327d2bdfe145fa28f9fc25a9b26f1fd","2003-10-12 17:25:27+00:00","sfx_volume and music_volume were swapped

svn-id: r10761
"
"fafb90ddb5483a7e75fcf55ac591fe2e36ca1bb2","2003-10-12 17:33:29+00:00","code simplification

svn-id: r10762
"
"620bf5e962a084fbedd70601352b3dc6b1c87e5e","2003-10-12 17:38:01+00:00","minor initialise() tweaks, added panel zones

svn-id: r10763
"
"b3f8b4010bbc63404e85829b5a4eb89b030f77dd","2003-10-12 17:49:52+00:00","cleanup

svn-id: r10764
"
"c3f4bbf34fe5192fe5bccd87c4319a42e1109422","2003-10-12 18:24:28+00:00","removing last traces of -w/-l

svn-id: r10765
"
"36fd7ec44574a4b1712fff1eb0ec43a76aab8f1c","2003-10-12 18:40:12+00:00","some renaming for more consistent terminology (although we might want to reevaluate this): 'target' is what is in your config file; 'game' is what a frontend provide. E.g. the scumm frontend provides the game 'monkeyvga', and my config file has target 'monkeyvga-ger' configured to use that game

svn-id: r10766
"
"9b41c157c09487f7baee5caa3fdfaabe759d4abd","2003-10-12 18:44:44+00:00","added missing INITIATE() code, added language detection to Resource class, etc.

svn-id: r10767
"
"5325ed83cf8166203ade9565805550a768786264","2003-10-12 18:46:50+00:00","use gScummVMFullVersion for initial window caption; use ConfigManager::kApplicationDomain instead of hard-coded 'scummvm'

svn-id: r10768
"
"31ba12c800f55d3611c36838a18e4276dec239ff","2003-10-12 19:10:17+00:00","some more target<->game cleanup

svn-id: r10769
"
"2e60628c1f80fc6ebbc1ec0a5f75ad637bef4bdc","2003-10-12 19:13:44+00:00","Rename functions

svn-id: r10770
"
"ba281b251af3f9db2305517a20541fab182440c3","2003-10-12 19:16:48+00:00","- Integrate with Joost's and Gregory's latest implementations.
- Implement more...

svn-id: r10771
"
"905e47dc1abc250ac2d3e9692251e49308d6dc4b","2003-10-12 19:17:26+00:00","don't use strstr(), as there is no terminating '\0' at the end of the file

svn-id: r10772
"
"c2907a9b20e2a6c226e0c589a103b341867fdd69","2003-10-12 20:44:52+00:00","amiga= is deprecated, so don't auto-write it into the config file anymore

svn-id: r10773
"
"b8aaf9549ff5c47611613ad4cd05d63645b39d42","2003-10-13 11:28:56+00:00","samdemo doesn't set VAR_SAVELOADDIALOG_KEY

svn-id: r10774
"
"ea510ef616c2da4cb9712ce6fa98733636491c54","2003-10-13 11:38:41+00:00","_roomPalette needs to be reset for all scumm games now.
Otherwise get blank screen in dig/ft/comi.

svn-id: r10775
"
"472e7d679051b6dfa64822ecaa70c040112b0dc3","2003-10-13 11:59:48+00:00","Whitespace change

svn-id: r10776
"
"1f16d325342e129d90d4e306df5538c8e4296b18","2003-10-13 12:17:26+00:00","sufficient to set _roomPalette at the start for V6+ games, since they don't modify the _roomPalette, ever

svn-id: r10777
"
"5acafb15c295b104e280cf3edf5094cebdaa5be7","2003-10-13 12:56:53+00:00","cleanup; got rid of Gdi::_palette_mod in favor of Gdi::_roomPalette

svn-id: r10778
"
"b750398d200e9d93d0d5ef7e07f0f516a5345d6e","2003-10-13 14:21:17+00:00","DISP_ROOM additions + 'Person' functions

svn-id: r10779
"
"d9f247231cade61a3d52a3941161cd7f71c02ea0","2003-10-13 14:31:59+00:00","Logic::personSetData correction

svn-id: r10780
"
"cf47fb1c691676f4f415ca37e6a69a2dfe394aa3","2003-10-13 16:49:53+00:00","dynalum implementation

svn-id: r10781
"
"5fb358365c9cde4baf2b84b5198ecf8af6610862","2003-10-13 18:03:13+00:00","set _debugMode to true if a non-zero debug level has been specified in the config

svn-id: r10782
"
"e3fcae3869b808014c7280bf208f48363907f5aa","2003-10-13 18:09:23+00:00","init random seed with time

svn-id: r10783
"
"5c55660e9b50e4f0d667b3fb55202140973b110f","2003-10-13 18:10:08+00:00","init random seed with time

svn-id: r10784
"
"08b2020543e37163c83d91094cb26113263fd34a","2003-10-13 22:48:45+00:00","This should only apply to 32 color Amiga versions.

svn-id: r10785
"
"15eb5a91b0386f82816329f5808bc8b7500fec33","2003-10-14 06:02:38+00:00","zero is a valid debug level, also change incorrect string; 0 is game only, not engine only. Maybe the game and engine debug levels should be seperated? This only applies to SCUMM as no other engine maintains its own debug level as far as I know.

svn-id: r10786
"
"18ebc6e92efe8ec2c0d6334f24d6b3821c9f4bdf","2003-10-14 06:41:08+00:00","Compare correct actor names.

svn-id: r10787
"
"b1ffc235e0b2f210eb6893215a123374a786e662","2003-10-14 07:06:12+00:00","Using Walk::personMove now!

svn-id: r10788
"
"4cd9694fdc7819a2f9bdf14a5a51ffcd65b08792","2003-10-14 07:41:58+00:00","fix compilation

svn-id: r10789
"
"c21d371e9c90349ddcc4fc1c417accccee48e12b","2003-10-14 07:46:24+00:00","Get numFrames property.

svn-id: r10790
"
"ebd314a9eca1665918c301a97d60427ded3a5504","2003-10-14 07:52:34+00:00","fix debug mode 0

svn-id: r10791
"
"5aadcb8a155071d1a6293a46071fa7e27fdb805d","2003-10-14 07:55:08+00:00","can remove comments again now, since logic.h was commited. Please don't leave CVS broken for more than a few minutes (ideally, only make atomic commits - i.e. only commit a file if all changes in other files on which it relies on are being commited at the same time)

svn-id: r10792
"
"4e3129c64c484f66e8f56fdb4dd5e7fbda06d148","2003-10-14 08:31:56+00:00","Fixed warning

svn-id: r10793
"
"138ee6887a13c0903f4a176b01d7c6d03d43016c","2003-10-14 09:12:01+00:00","preliminary FIND_STATE implementation

svn-id: r10794
"
"e9dacde3c596ff22fb12db3eeb1ddf2e2d3982a8","2003-10-14 09:12:42+00:00","more cross references

svn-id: r10795
"
"0aa58f53c881b541c603f0c1d2e4650db3930f88","2003-10-14 10:24:27+00:00","init RNG for everybody using time()

svn-id: r10796
"
"c009516dfd9eca4db72255f9710d885db06586af","2003-10-14 12:36:32+00:00","Persons must not be in table!

svn-id: r10797
"
"a1dfb5863e5c4e34902c8fe469aa0eab176f363b","2003-10-14 12:37:07+00:00","Working nicely with personMove disabled!

svn-id: r10798
"
"93f64e3357aebd0153e98dceab08fe17960a3c79","2003-10-14 12:55:31+00:00","rewritten Logic::initialise(), making use of 'unserializing' functions

svn-id: r10799
"
"c465b135452a1f07a30d0fb8c6519f8e58ccf158","2003-10-14 15:51:11+00:00","let beos users use configure script, default to assuming unix like system if no match

svn-id: r10800
"
"f5fa6651d71929163b08fb4e758ab022b186b1ee","2003-10-14 19:06:25+00:00","commented a bit various structures

svn-id: r10801
"
"cc9599c7147a278bb8b7bbd2c913acab53978295","2003-10-14 19:06:44+00:00","moved some methods from Queen::Walk to Queen::Logic

svn-id: r10802
"
"2968be7670c0cf5a57f53fafd3164a199f10e705","2003-10-14 20:06:22+00:00","Turn off another annoying MSVC warning

svn-id: r10803
"
"a8e1340c45dcad45415a9699a153881c79f78cd9","2003-10-14 20:52:27+00:00","improved timer resolution -> this helps iMuse *a lot* on my system when there is load

svn-id: r10804
"
"f74a0c18aa2ef244f987c31d3d146207c72e81ee","2003-10-15 02:38:23+00:00","Version 4 games should use older code style too, checked against loomcd/monkeyvga disasm.

svn-id: r10805
"
"8b42d65a7e922a9b9241ebe509968331fe958fb6","2003-10-15 06:40:31+00:00","Dumped most of the remaining 'driver' code into a new 'Display' class. This
touches a lot of the code, of course, and adds yet another global variable
(temporarily, I hope), but everything still seems to work.

Knock on wood.

svn-id: r10806
"
"8c0496194a19bc7e2f8e974863b94d7785b1fad5","2003-10-15 08:46:04+00:00","fix personMove / cutaway problem

svn-id: r10807
"
"ce468f9e1f83549841f192270faae4637d7f9f44","2003-10-15 08:46:18+00:00","DISP_ROOM/REDISP_OBJ() implementation (still missing GRAPHIC_ANIM stuff)

svn-id: r10808
"
"a2d1204e66ea363219aac1c513a117c52eb9e675","2003-10-15 08:47:13+00:00","sorted a bit cross references

svn-id: r10809
"
"83bf2f0e1749412792fdbf53625d78670a0dd224","2003-10-15 09:23:05+00:00","- Make Cutaway use Walk object from Logic
- Added talkSpeed to Logic
- Some more Talk code

svn-id: r10810
"
"f0ffea2d6417ee1aac9ad3e92ffcfd5c8c6ebbd2","2003-10-15 09:40:44+00:00","Disable code which seems to be real cause of lock up in title screen of MI1 demos

svn-id: r10811
"
"233e33cf78d96dcc127715d7a544c403232fa1b4","2003-10-15 10:01:54+00:00","- Use Logic::roomRefreshObject() in Cutaway
- Fix tiny bugs in Logic::roomRefreshObject()

svn-id: r10812
"
"de410e62f2f6ebde22948e2d31f444abeec7279a","2003-10-15 11:33:02+00:00","Improved talking.

svn-id: r10813
"
"57a2b4c453f197becf94a64c80e08c366d0ec717","2003-10-15 16:31:51+00:00","preliminary GRAPHIC_ANIM support

svn-id: r10814
"
"35c23667c3a2ee800472f9104f25c08d8b1c7117","2003-10-15 18:39:30+00:00","Moving heads when talking, but where is the text? :-)

svn-id: r10815
"
"d71160af749b87cb6ecfb22e3b81e2e626a0c9c3","2003-10-15 23:16:52+00:00","removed the kDefault*Volume constants

svn-id: r10816
"
"7cdb08f30726c49e9ba817db72aff49ccd3d4c1d","2003-10-15 23:26:07+00:00","really removed kDefault*Volume this time :-)

svn-id: r10817
"
"195b1d6aa4bcdd41ba26888ba739e5403ef82117","2003-10-16 00:39:29+00:00","Fix spacing

svn-id: r10818
"
"f057e794f713be70d6203ad5b1eb2be45dfeab4d","2003-10-16 04:01:40+00:00","Don't talk too much.

svn-id: r10819
"
"8d656e8efbd66e2ff110ed30eff7fd9052680b1d","2003-10-16 05:49:09+00:00","Add hack from Jamieson, to prevent palette darkening when it shouldn't in Amiga versions of Mi2/FOA.

svn-id: r10820
"
"264c1da85e748000f1cdcc91c8f8038af607fdfa","2003-10-16 06:06:35+00:00","Update error message
Remove outdated fixme

svn-id: r10821
"
"354f1bebf344c3566f5ed0ffc9781a5288629eb3","2003-10-16 09:27:45+00:00","fix body/head problem

svn-id: r10822
"
"27fc80768815076c668f03fa36e124b03919a8a1","2003-10-16 09:41:35+00:00","Minor cleanup

svn-id: r10823
"
"bc072912b625ba2c59cdffd8af8e46f7a104f464","2003-10-16 10:10:48+00:00","Fix a few defaults vars.

svn-id: r10824
"
"db716d5fb13f1524d9aa437dc0d7498e9e7aa083","2003-10-16 10:23:01+00:00","add method to set the xor byte in the file class. Needed as the combined mac data files are only xor'd in the resource files, not the parts of the combined file

svn-id: r10825
"
"bf6be16cbdcddb4c180631c8a099e193085b75b0","2003-10-16 11:15:56+00:00","add some mac related bits

svn-id: r10826
"
"8833f8c4908d8be3a92288bc592cf9ddfd1f568d","2003-10-16 13:54:48+00:00","new Display class, cleanup Graphics

svn-id: r10827
"
"29fc207062d4ffaa557cceff760f311f2d1f96b9","2003-10-16 16:55:13+00:00","Make frames array available.

svn-id: r10828
"
"5daae674042d80cd8f1e5c23e02ef6e996ae189f","2003-10-16 16:57:30+00:00","Talk stuff

svn-id: r10829
"
"ebcfb7c820fd82b491693e9f3c1b5c97257f8977","2003-10-16 16:58:30+00:00","Initialize Joe's scaling.

svn-id: r10830
"
"7c55594afc99f76954e563770ef966cceddedb39","2003-10-16 17:02:32+00:00","Now we're talking!

svn-id: r10831
"
"5e36a5cac8571bc2e1c790df3bd0d190141946e9","2003-10-16 18:57:56+00:00","modified/fixed palette code

svn-id: r10832
"
"7f6c294a1e74c34717b2153a436ffe19781b8fad","2003-10-16 19:40:29+00:00","Play all intro cutaways (some better than others... :-)

svn-id: r10833
"
"0174cf236b01aa30dcc589843a8619f4d8bf3fab","2003-10-16 19:51:19+00:00","Load room before cutaway.

svn-id: r10834
"
"67d3021d13155855ce46b3470d5398ecf55c9822","2003-10-16 22:12:27+00:00","commented this line... for proper compilation

svn-id: r10835
"
"fb74154d57aff02ce2f28b07a0d041e97220c7a3","2003-10-16 22:12:56+00:00","update

svn-id: r10836
"
"2da3e5138d04c0b7f99e6b471bd4d6b882900331","2003-10-16 23:16:00+00:00","fix warning

svn-id: r10837
"
"1c3301049a9916e744d95cd0f4fe5af441ba1851","2003-10-16 23:16:01+00:00","Enable queen

svn-id: r10838
"
"1e56fb8191784a8edbd8d32d831672ce0c0cff3a","2003-10-16 23:16:16+00:00","cleanup

svn-id: r10839
"
"6fc661ffc2c4773974981d72896c91e40104dc66","2003-10-17 03:34:42+00:00","Disable maniacnes for now.

svn-id: r10840
"
"46618451eb0dc9a10c3ce9cca2d0cc54ff0b5c76","2003-10-17 03:59:55+00:00","Do what I actually intended to do.

svn-id: r10841
"
"b2aa63a15e2bbba3088972fd044d643d93d18618","2003-10-17 07:16:36+00:00","Wrote a little TODO

svn-id: r10842
"
"9033d3dbabed039caff1fb6af9624b271348c4a6","2003-10-17 08:15:00+00:00","Make PalmOS port happy

svn-id: r10843
"
"e00c16b4a97753b519e79d8f37664d6eb0ca0b52","2003-10-17 08:26:01+00:00","Player_V2A now compile with PalmOS port

svn-id: r10844
"
"40b231e6fedd344ee98337749b930c2d68d5463b","2003-10-17 08:40:48+00:00","Hack for allowing ScummVM to respond to events during while the intro is
playing. I apologize for adding a global variable, but for now that seemed
like the least intrusive change.

svn-id: r10845
"
"6980358f4d9fd38d34f98cc1ff6900416c96863b","2003-10-17 08:41:31+00:00","fix french characters display (and maybe german and italian too)

svn-id: r10846
"
"e2930bf8be66889b76f71be477790ab5bb177d51","2003-10-17 09:45:12+00:00","partially fixed palette problem when switching room in cutaway intro

svn-id: r10847
"
"7ce63bfe0f8cc213fc11d29aef86fc65c1096c3c","2003-10-17 10:11:09+00:00","wait_for_actor -> waitForActor

svn-id: r10848
"
"b86ae6641bea6d4d7a4e3f8e90cf976b5a63c7b1","2003-10-17 10:22:40+00:00","make FSList inherit 'public' from List (so that we can use List::Iterator)

svn-id: r10849
"
"3e68577bae45636be5c758d8c381a832655d9247","2003-10-17 10:23:52+00:00","added push_back method with List arg (append one list to another one efficiently)

svn-id: r10850
"
"e00848384a55f78c44c882b5fdb04526ef08cbaa","2003-10-17 10:51:07+00:00","fixed crash (atleast it crashes for me on OSX) - can someone please verify if this is a proper fix (and doesn't break anything else?)

svn-id: r10851
"
"7f5c5f0f8bff4e786c28da398589fb1fb5b386c0","2003-10-17 11:11:01+00:00","COMI crashes because for some reasons we get a 0 timer interval. not sure how that is possible, but adding some asserts for now

svn-id: r10852
"
"37085bfe8810f35b753cf234b5b5e8288cc0b823","2003-10-17 11:17:49+00:00","fix (workaround) for bug #825331

svn-id: r10853
"
"d228678a5ab95f5fd4a46533c2c41c84e99e6163","2003-10-17 11:47:21+00:00","Disable some debug output

svn-id: r10854
"
"a935fcfe92bb1177e92c61524945303d7985e9fc","2003-10-17 11:47:41+00:00","- Implement *WT
- Disable some debug output

svn-id: r10855
"
"250f2ea52b1b46cb79c7d9d0b86538eaef6f93e0","2003-10-17 12:00:08+00:00","Fix warning.

svn-id: r10856
"
"79e681282e7c5e84d8d6bbd595bce455ebf4e8f1","2003-10-17 12:04:44+00:00","needed some more work to get Iterators to work in FSList

svn-id: r10857
"
"116dbee1fc1a7d8d2c22abf886d0b8e8fd93db53","2003-10-17 12:18:58+00:00","factored out the game detection code into the Plugin class; this is the first step towards allowing more powerful, plugin specific detection code; also, moved the Plugin GameSettings APIs to a slightly higher level

svn-id: r10858
"
"323c338169672d60b43d924c57b6e03adbd2ca21","2003-10-17 13:12:50+00:00","more palette stuff

svn-id: r10859
"
"f4b5626fd763a22d96d39757c9688ffcf13bb823","2003-10-17 14:26:05+00:00","preliminar parallax scrolling support (Rita/Joe intro scene), not perfect as Bobs coordinates are also modified in cutaway/action_special_move

svn-id: r10860
"
"4fe33a1dae09704835ea29608cdfcdf46eabcd7c","2003-10-17 14:26:23+00:00","also look for TBL file in current directory (useful when running the game from CD)

svn-id: r10861
"
"a70460833e498620122bd60a1e6708d2a263626a","2003-10-17 15:35:46+00:00","moved platform/language constants to common/util.*

svn-id: r10862
"
"aadb0aa237bceded685c32edf12d1eed10a10ede","2003-10-17 15:38:56+00:00","oops, forgot to remove the old Platform enum

svn-id: r10863
"
"df7cda84d33a01555298e258c3502d1390c2d6ab","2003-10-17 15:54:17+00:00","findGame is static class method now

svn-id: r10864
"
"ae6e6a4885e7364d9f96251ca55769dcc84fb237","2003-10-17 16:04:46+00:00","added a listTargets() function (not yet used, soon) and some cleanup

svn-id: r10865
"
"012450de73cbac232be2f779b14e64e28cbdfb92","2003-10-17 16:28:29+00:00","added tag2str helper function

svn-id: r10866
"
"96a8d0ec1cb7410d3790c822f2f9d5ce363daeb2","2003-10-17 16:30:24+00:00","proper fix for COMI timer issue: don't let a Timer remove itself

svn-id: r10867
"
"ad2db089404e99a2750cd059237dc2a8579e045f","2003-10-17 16:39:32+00:00","renamed some Timer methods

svn-id: r10868
"
"4c66e29ffac860460fafb7a0e8251bb90af0afff","2003-10-17 16:41:21+00:00","Added latest modules

svn-id: r10869
"
"1f941c822c7949a195ef6aa232924c960b32d729","2003-10-17 16:42:10+00:00","Make enums public. Fixes MSVC erros with enum usage in member structs

svn-id: r10870
"
"e59ce1cd5a1c6e3870cf275385a5b0390f83d97d","2003-10-17 16:42:49+00:00","Fix MSVC6 warnings

svn-id: r10871
"
"0279ace9aee72d2d3c70e53a2491036e6b3ddadf","2003-10-17 16:46:06+00:00","Added trace output for IMuse doCommand codes that we're not sure
are even used by the game scripts. This is in preparation for a
restructuring of the volume model.

Also removed unused get_music_volume() member.

svn-id: r10872
"
"8ab81c25339770912ea96680ff65e55d8f1c6236","2003-10-17 16:50:35+00:00","fix warning

svn-id: r10873
"
"4ae61964f2684f28931a2d88ab73f34a0efc3797","2003-10-17 17:05:19+00:00","cleanup

svn-id: r10874
"
"0019f9c1eeb8e67af15a639df0fefb525728c6f7","2003-10-17 17:06:58+00:00","removed obsolete FIXME/TODO

svn-id: r10875
"
"b901a24d49c65f8c4ebe24b810fc7b3309614b20","2003-10-17 17:38:18+00:00","Another fix for Bug [817871] re hanging notes on
pause with MT-32. Apparently the first fix doesn't work.

svn-id: r10876
"
"729b5561678864608e2b934537ab81f47c875c30","2003-10-17 18:46:31+00:00","patch #824241

svn-id: r10877
"
"f5a7c671910980f60eeab2044887ab1411dfdf44","2003-10-17 18:52:15+00:00","added russian as a language (part of patch #823031, adapted to recent code changes)

svn-id: r10878
"
"5b1c2e68b99dde553d0a1f481f4b9ce3d280b221","2003-10-17 19:20:00+00:00","patch #823031: Support Russian Full Throttle

svn-id: r10879
"
"1aab20ff2b1190bfc65aea05e24143c396d7fd41","2003-10-17 19:39:13+00:00","new command line parser (README still has to be updated)

svn-id: r10880
"
"6eb03982170a625063c1e8be57e581a7f10d4cc9","2003-10-17 21:22:08+00:00","update

svn-id: r10881
"
"0694eed27393ee7d1cbeccd20e8641fa261f5642","2003-10-17 23:16:53+00:00","moved game detection code out to the plugins

svn-id: r10882
"
"33f2fbff08573634e868c50d5cff3e4d2482a543","2003-10-18 00:22:46+00:00","We proudly present the latest installment of our hit series 'Untangle the mess': 'Help! Space Invaders refactored the music detector'... in other news, I obviously need to sleep now

svn-id: r10883
"
"23b3e4cc7da9797d8dcccf7d93a6dd2571272644","2003-10-18 00:25:13+00:00","fix handling of unknown targets (previously, you could invoke scummvm with a randomg string, e.g. 'scumvmm foobar', and it wouldn't error out as it should)

svn-id: r10884
"
"3a43829b885fe67b3165f2f75778dbbb65d1d560","2003-10-18 08:11:50+00:00","Moved the opcode functions into the Logic class.

svn-id: r10885
"
"a581a2be5ee2369cc6aa67c0b71c7f7754df15a6","2003-10-18 08:11:59+00:00","update references for Display class

svn-id: r10886
"
"be8bbb143e0fbc32b6f0c4d90ec54196347f17ea","2003-10-18 08:12:14+00:00","minor adds + cleanup + fix parallax problem

svn-id: r10887
"
"c518ee26ec394e7359bc565624de78b60f5fb84a","2003-10-18 08:12:56+00:00","minor changes to joeMove() code

svn-id: r10888
"
"65883950d84a1fab5320169b3b765be2d814afbb","2003-10-18 10:58:10+00:00","Make the aeroplane fly (and Joe too... I wonder what he smoked.)

svn-id: r10889
"
"de37ee0c3e064b61b26207b9da3175a477399013","2003-10-18 11:46:52+00:00","- Fix some cutaway crashes
- Implement more cutaway animation

svn-id: r10890
"
"935a476a29a8f045e54e1556e1c25ff76d9b942b","2003-10-18 12:18:43+00:00","Moved function from Talk to Graphics because Cutaway need it too.

svn-id: r10891
"
"d2e65e35e91fc3bd3074e8d44887be90079ffbf3","2003-10-18 12:48:05+00:00","Handle cutaway text.

svn-id: r10892
"
"1a8397a475479827b72b9423e6c9eedb8763746d","2003-10-18 12:59:44+00:00","Fix a little bug.

svn-id: r10893
"
"7eab653832b85f8da29ab4dab50f28948d040e37","2003-10-18 13:04:59+00:00","cleanup

svn-id: r10894
"
"57dc2067c122a2345d8aad39a06e724644c07ad0","2003-10-18 14:01:43+00:00","Special actions for cdint.cut

svn-id: r10895
"
"201c7f129c8e5167d14e92773d303aa536556fa0","2003-10-18 15:33:23+00:00","Fix normal animation.

svn-id: r10896
"
"2a5c965283790ff59a152151fc35f2704367625d","2003-10-18 16:19:36+00:00","Improved the 'special moves' for intro cutaway (but the thugs must be
hiding behind some crate...)

svn-id: r10897
"
"673b211fdadd3c10dc31b013edab2a207aeaab68","2003-10-18 17:09:13+00:00","display Joe at current position during intro. Still have to find out why the truck flashes on talkie version...

svn-id: r10898
"
"eadf6356d385e3be0c8fa793007fe9e4b13da3b4","2003-10-18 17:12:50+00:00","fix bob clipping errors

svn-id: r10899
"
"3fdb2540c0772841af5800f66a8398bc84487e25","2003-10-18 17:42:24+00:00","fix bad access on areas

svn-id: r10900
"
"26aa6c9087c07bec892afc15b819c9b1d2197d9b","2003-10-18 19:40:11+00:00","fix truck intro problem

svn-id: r10901
"
"1836d4a097364500467dbeb79198316f05c17757","2003-10-18 22:06:21+00:00","enabled Altivec on OSX machines

svn-id: r10902
"
"3e1e888c07a0161217e43eb98e4049ff614fe80f","2003-10-19 11:01:23+00:00","- currentImage stuff
- create correct voice file prefix

svn-id: r10903
"
"b7f01db3f720eb3364b5b02826d04bb70aa69238","2003-10-19 11:41:24+00:00","Added scaling of objects in cutaways.

svn-id: r10904
"
"e3d236def0bd8885e40cc68e4f3faa2b2ca1febd","2003-10-19 11:51:41+00:00","Probably play right voice at the right time now.

svn-id: r10905
"
"7897eeac1093f3dff9ba7164bc2c50d8c3f28610","2003-10-19 11:55:55+00:00","Do it right this time.

svn-id: r10906
"
"64aaaa0b25bc29ef7d15edfe47c5734866e150bc","2003-10-19 18:01:05+00:00","Small cleanup, and added FIXME comment.

svn-id: r10907
"
"e25bda32ecb82a45acefaca5a31e1e6eba5e6dc5","2003-10-19 18:52:28+00:00","minor cleanup / comments update

svn-id: r10908
"
"769f033b003d848ed9722dab239670386ce2317a","2003-10-20 08:34:48+00:00","Logic::anim / BobSlot cleanup

svn-id: r10909
"
"59f5854be2283c1f0bc138f7fa08f753bb47274e","2003-10-20 08:39:18+00:00","real Logic::anim cleanup

svn-id: r10910
"
"61a27e1b634ebb9f5cd1526c5816ebe5aa5103f9","2003-10-20 10:26:56+00:00","remaining palette stuff

svn-id: r10911
"
"f83d3bd7008fa27c99704d57173094f85d3e9538","2003-10-20 12:14:39+00:00","cumm V1-2 doesn't use textslots, checked against V1 Maniac, V2 Zak disasm.

svn-id: r10912
"
"6366fd778bae6bd5c60753ab3dd022ca245af28e","2003-10-20 12:24:12+00:00","Restrict Maniac demo mode to V1 Maniac.

svn-id: r10913
"
"78f87331808d23def7ff3a3048cd4a0f964019d9","2003-10-20 12:30:34+00:00","fix missing thugs & Hugh during intro + smoother scrolling + flashspecial (sm37)

svn-id: r10914
"
"811b0a1855eb8cbdd5dd092ea8be57799ead7bad","2003-10-20 13:08:59+00:00","- Disable debug messages
- Write text at correct position

svn-id: r10915
"
"ee6533365df91681df4ba234c656a004172b5079","2003-10-20 13:54:46+00:00","cross reference update / cleanup

svn-id: r10916
"
"d3dd9f6216a3e7f49b3eaf6fdc8d97cfe26c219c","2003-10-20 19:18:02+00:00","allow loading of rebuilt/compressed datafile

svn-id: r10917
"
"89a9a35a0ba7dde96d858da8b9f4f64794aedb58","2003-10-20 20:06:29+00:00","usage string has to be updated (as I explained in various commit messages and in #scummv, but it seems not everybody saw that :-)

svn-id: r10918
"
"ff5fde47ea11fb03007fc3a1f597d3202d5cd25e","2003-10-20 20:12:59+00:00","scrolling timing (copy/paste from SkyEngine)

svn-id: r10919
"
"58dffdb02742138d57f5288dd7b3ebdedd6d03b1","2003-10-20 22:02:10+00:00","fix compile when using dynamic plugin support

svn-id: r10920
"
"01c0bd5eb7d3776c939db78c9812897bb0b48957","2003-10-21 05:48:32+00:00","Stop garbage been left behind with backspace key when entering save game name, in non-English versions.

svn-id: r10921
"
"ed0c30fcbf7f0fdd2633451c894ea7bd4980076c","2003-10-21 06:35:19+00:00","Fix text spacing when backspace key is used when entering save game name in Hebrew version. Need to pass along last character printed, so correct spacing can be used.

svn-id: r10922
"
"3be2f0f1e08fc191e9f092380845919778e77a58","2003-10-21 08:54:50+00:00","Moved some more stuff into the Logic class.

svn-id: r10923
"
"4e2ffd8d9ed31ae2d9b42707d0c92cfc31aad3a7","2003-10-21 09:05:16+00:00","WALK, GRAB_JOE, GRAB_DIR, USE_UNDERWEAR, USE_DRESS and USE_CLOTHES implementations

svn-id: r10924
"
"a1f9ed293c659dcb5ddf89ddf6f2701fda663815","2003-10-21 09:33:49+00:00","fix shadow'd variable, the single letter variable names in the simon code are rather scary....

svn-id: r10925
"
"87fb27d02c2cff934e0c1a00d0941156e8a77389","2003-10-21 09:43:37+00:00","Rename function

svn-id: r10926
"
"54fc5335c086a6f421fa116be7da2ecd74cf2e67","2003-10-21 10:14:42+00:00","Rename a few vars

svn-id: r10927
"
"e4813cfab53916f996b2610b58436a2aac939e85","2003-10-21 10:34:56+00:00","Rename a few vars

svn-id: r10928
"
"c3deeb3daf5ef009fe678b8c7ec0ede8047084ec","2003-10-21 11:41:33+00:00","Correctly reanem var this time.

svn-id: r10929
"
"b582881471012646f8900ba7faadb03dfadafc47","2003-10-21 11:45:46+00:00","Missed one

svn-id: r10930
"
"4e5a40f013e2499b843c8f79752efaffa0135afc","2003-10-21 12:07:33+00:00","Correct string animation.

svn-id: r10931
"
"1744ba3441ff74b240ccf77e23da536c74bb4c28","2003-10-21 12:13:56+00:00","- Better handling of complex animations
- Special action: scale title

svn-id: r10932
"
"5bcf5a901e6391d7f12f9792c71e63c5701492c1","2003-10-21 12:29:37+00:00","add Sound class + call it from Talk::speakSegment

svn-id: r10933
"
"8395184a8f28bf31e393203212c6eb2f88c85ba8","2003-10-21 12:38:01+00:00","forgot to commit this

svn-id: r10934
"
"3cff930d8f0c37774c6cea16cc2955b6328a85f9","2003-10-21 13:17:11+00:00","Disable debug message

svn-id: r10935
"
"3bd08fd48280506bb0a1ccc9ac960cf5f262cf93","2003-10-21 13:18:02+00:00","- Add some missing speech
- Disable debug messages

svn-id: r10936
"
"963d336da5ec5102c51316e9a2fab0affce53202","2003-10-21 17:32:51+00:00","(better ?) scrolling timing

svn-id: r10937
"
"d269b06ba6c9fc9be797bf67313758b8f945baaa","2003-10-21 22:11:53+00:00","update

svn-id: r10938
"
"59b72f2b382de8dbcc782712b42a832fe2c91e27","2003-10-22 06:51:57+00:00","Moved a few remaining pieces of the script interpreter into the Logic class

svn-id: r10939
"
"3d229f6c8cb37a7263e0926e91ee37f7d833f40c","2003-10-22 09:17:31+00:00","Add load/save game failture messages from original games.

svn-id: r10940
"
"48b9e18086d1b1518a73164d03f10c9229e9ed81","2003-10-22 09:20:47+00:00","Remove comments

svn-id: r10941
"
"016c90911ed73b8f4498d6192172c1882062e18c","2003-10-22 11:15:09+00:00","fix gcc 3.3.2 warning

svn-id: r10942
"
"3ccd6704bdc4a6fad19d2fb68a75c089dc4f60ca","2003-10-23 04:49:04+00:00","Don't attempt to play sound in simon2mac if file doesn't exist.
Add fixme for simon2mac, freeing voice at this point which causes crashes.

svn-id: r10943
"
"ad98347eb0f17cf9ff2b72b86589866943ef28dd","2003-10-23 06:44:35+00:00","Initial version of the Input class. Some things still missing.

svn-id: r10944
"
"320b0a405a0d08dc37a4d1ad0ff5b0f50558ba9b","2003-10-23 07:08:09+00:00","Corrected/clarified some debug messages/comments

svn-id: r10945
"
"4f186737a780aa8681038f6bca98d92e1fa19de0","2003-10-23 07:16:05+00:00","Include scummsys.h

svn-id: r10946
"
"b54905f26973fa8226d17b820f073ec592eda31f","2003-10-23 07:21:23+00:00","Stop messing with _fastMode in delay().

svn-id: r10947
"
"472aee900c4aae989f8da96f4e07e9d648ef86c2","2003-10-23 07:25:39+00:00","update

svn-id: r10948
"
"2a42fe77bf82f3b58c50fb9bd60c872bd311ed3a","2003-10-23 08:09:49+00:00","minor changes for future Command class

svn-id: r10949
"
"58df0207177b080548589d40a8a9eb622a55e847","2003-10-23 08:16:31+00:00","forgot these

svn-id: r10950
"
"00e2ee13ffac04b1c4c6d4986aef1cb1ce451866","2003-10-23 18:46:04+00:00","move state related methods to specific class + minor changes

svn-id: r10951
"
"7772adbe1ebf8926029e17e7e583158144d67942","2003-10-23 18:50:47+00:00","Make it possible to quit cutaways!

svn-id: r10952
"
"4e78623eb25ac7c9affdc3bf00b796272dfae78b","2003-10-24 02:26:41+00:00","VC warnings

svn-id: r10953
"
"d2dff9dd8d1197de3a0649908eecf600878abc9e","2003-10-24 08:55:13+00:00","misc fixes/tweaks

svn-id: r10954
"
"dc2dd831e9fa8599cfdb3211a4da5d3764be676f","2003-10-24 15:29:52+00:00","Only free _logic once.

svn-id: r10955
"
"27b22efe17b6998b4bc1361fe1d2338017c2b52b","2003-10-24 17:14:56+00:00","Fixed typo and added FIXME comment for the DotMatrix scaler.

svn-id: r10956
"
"87e1963cffd79cbd5aed472f58a91a9ae973c13d","2003-10-24 18:35:03+00:00","Added sound and input modules

svn-id: r10957
"
"3ad14b06f507d056da5c8e1506d95e607029f75e","2003-10-24 23:09:01+00:00","added extra flag to mixer so we don't use free() on new'd pointers

svn-id: r10958
"
"6fc0cd791325b5e36cb486d36768b9a2a1c7dcf5","2003-10-25 01:11:14+00:00","whatever

svn-id: r10959
"
"0b5da13ffe58aa9b1057fe15471a35883f820de8","2003-10-25 09:11:35+00:00","added GameSettings class + FIND_VERB implementation

svn-id: r10960
"
"b24bb81695b72583a7e0c16e8673ccc4a09e3dd7","2003-10-25 09:12:18+00:00","cleanup Graphics / populate BobSlot

svn-id: r10961
"
"61aaa5b40be6e219939f1388249b49aca7b9fdec","2003-10-25 14:15:21+00:00","Changed the behaviour of the page up/down buttons in the save/load dialog.
LavosSpawn tells me that the previous behaviour was, in fact, what the
original did, but agreed that it was confusing.

The new behaviour is consistent with how BS2 does it, by the way.

svn-id: r10962
"
"8f4f507c33298b6dcecd226d0035fc6984cbc3c2","2003-10-25 14:25:24+00:00","fix bug #828222: Adlib music stops during browsing the inventory

svn-id: r10963
"
"6929b9dd7bd412b4936abf3044f49120d0ca5c8c","2003-10-25 14:36:09+00:00","fix bug #830104: BASS won't start unless music driver chosen

svn-id: r10964
"
"060300339e8324add5ba46f50c8ea1cf48a6813c","2003-10-25 20:26:50+00:00","add some methods to Logic for future Command class

svn-id: r10965
"
"0600e4e0f47f71801df995382896358db7f90b4b","2003-10-26 03:20:13+00:00","Fix simon1dos freezes

svn-id: r10966
"
"bd8cf7ac1348ece601dafc5fe8b401576b09645f","2003-10-26 03:25:53+00:00","Update issues

svn-id: r10967
"
"394bb952c560a7e433a77f59fff400afde61b970","2003-10-26 04:03:51+00:00","Update issues

svn-id: r10968
"
"b051506bf1faa0a19fdb7cb97c6d59b8470d16b9","2003-10-26 04:07:44+00:00","Ooops

svn-id: r10969
"
"b16d51a25766fb61970e56b908520ab4aca41671","2003-10-26 04:35:35+00:00","Rename function.

svn-id: r10970
"
"1b38419b424cc7e16048dfc3860e0915fa568bd5","2003-10-26 04:37:11+00:00","Add more debug.

svn-id: r10971
"
"c7e723ceb4842b5e164e9475a28ecee72b93392a","2003-10-26 05:31:36+00:00","Add combined speech and subtitles support for simon2.

svn-id: r10972
"
"3f6f1e3311827a4fff75b2a01cc6a41edea4b028","2003-10-26 05:48:54+00:00","Ooops

svn-id: r10973
"
"93c533e30e7fecb9ef4b2f660d4a7ef9737fcf51","2003-10-26 12:09:08+00:00","workaround for bug #820357 (FOA: Talk to Sophia -> Atlantis/Great Machine = crash)

svn-id: r10974
"
"1d1f52f8e987e45448706ac795df45f1a6992a9e","2003-10-26 12:44:20+00:00","cleanup

svn-id: r10975
"
"df60e72f77c2f368cba5bd7a8053d70f3d378974","2003-10-26 13:33:49+00:00","updated README and usage/help text

svn-id: r10976
"
"2a139049d621479da4898fcb22c742c52d17eac3","2003-10-26 13:54:26+00:00","cleanup, add comments

svn-id: r10977
"
"7c4cc25cec714073d947e6451b4bf76cd53624ef","2003-10-26 15:42:49+00:00","Enable the debug console. Actually, what I've done is to adapt the debug
console from the SCUMM engine. I decided that would be easier than to clean
up the original console code.

Unfortunately there's a bunch of code that I just copied - a pretty lousy
form of code-reusal. It'd be nice if the console could be made part of the
Engine class, or something like that.

Most of the debug commands seem to be working. Some aren't relevant for
ScummVM, and some are a bit obscure so I'm not quite sure what they're
supposed to be doing.

svn-id: r10978
"
"c86803c0c7ce636b4e3469552db100ba7303d526","2003-10-26 15:58:49+00:00","fix compile

svn-id: r10979
"
"4b52223eb85dd8de44871869e88b3ed9af83ca9c","2003-10-26 17:46:20+00:00","Added a note about making the debugger more easily available to the various
game engines.

svn-id: r10980
"
"b2ea1994bbed76143df1a7669faed946a9d5645c","2003-10-26 17:50:45+00:00","Use #if USE_CONSOLE instead of #ifdef USE_CONSOLE since that's how we do
everywhere else

svn-id: r10981
"
"d581c99ab5caebc8029eea4a14834af2b989faac","2003-10-26 19:16:59+00:00","cleanup

svn-id: r10982
"
"fbd6528e365babdd9e6d59089ef210f04a7eb19e","2003-10-26 21:08:53+00:00","stay within 80 char limit

svn-id: r10983
"
"a4d2a47820ad7ce26de1f52a9a11f6d466ed9610","2003-10-26 21:30:52+00:00","factor out common debugger code

svn-id: r10984
"
"48f29f8559478ca47fe007e516baab0d19aa3ad8","2003-10-27 08:36:37+00:00","Fixed bug #830772, I hope.

svn-id: r10985
"
"dde1fde95efbe71675399974991e32258ee32936","2003-10-27 10:44:12+00:00","Removed TODO entry about debug class. Fingolfin's latest changes should be
pretty much what I wanted.

svn-id: r10986
"
"26a873a2e485c75904ae78e486556ede3ef7030c","2003-10-27 15:00:25+00:00","more stuff for future Command class

svn-id: r10987
"
"e02fe63f2eab159ab9f35fe270e10435665c9d6b","2003-10-28 12:42:35+00:00","added loadFileMalloc() method

svn-id: r10988
"
"31a8ef2e7fd276e8b78f61bbc7bd013abd2e784a","2003-10-28 13:27:37+00:00","cleanup

svn-id: r10989
"
"7418c47b48925b095f7ff9daae9962f92f297cc7","2003-10-28 13:46:28+00:00","If we fail to read the game settings, use sensible defaults.

svn-id: r10990
"
"1ab811c4ec3bdbc97d56fa648ea66954bff3f467","2003-10-28 14:19:11+00:00","Safer use of dynalum.

svn-id: r10991
"
"cb2306373d9b1be5d61e25999af249fb6632865d","2003-10-28 15:05:35+00:00","safer dynalum tweak

svn-id: r10992
"
"ee276b12b829a675043bfd12a92e3cb82b4ca064","2003-10-28 15:26:05+00:00","add OGG playback to queen

svn-id: r10993
"
"0ba347414dfbbf807b534e2c0f2d2320af4a5358","2003-10-28 15:33:45+00:00","forgot this

svn-id: r10994
"
"53db0a8a073784260f3160b5d3cfa38f2de254b3","2003-10-28 17:07:25+00:00","cleanup: removed version/id from GameSettings

svn-id: r10995
"
"8be0e318b6a23c2fc6b9657b6fa3d8b0825c7e96","2003-10-28 18:05:36+00:00","update

svn-id: r10996
"
"2fef2dcb84dc6d9ee2884ac6097fa9fb0bd24e20","2003-10-28 19:51:30+00:00","bs2 -> sword2

svn-id: r10997
"
"8eea63362ed29d888515512f965a298e5cb77bd6","2003-10-28 19:55:12+00:00","handle (x,y) negative coordinates in dynalum

svn-id: r10998
"
"efa51b6013eb3d95cb86e430e4158cf5821cd3a9","2003-10-28 20:58:46+00:00","add accessors for mouse current pos / button + keyVerb

svn-id: r10999
"
"494d5269a2a0274a58e6bb30f211383cdaf5465f","2003-10-29 06:36:06+00:00","Add copy protection bypass for Zak McKracken (EGA) since there was no check in the version included with SelectWare Classic Collection.

svn-id: r11000
"
"d7bd7d44b83fb3dce91567fd0d241758ea706b78","2003-10-29 07:53:05+00:00","Use the ScummVM config manager instead of a separate BS2-specific config
file, plus some other cleanup. I don't know how the config manager decides
if/when to save the settings to file, but we can worry about that later.

svn-id: r11001
"
"774b847a8754ef3af400631ae9544332b76d85ed","2003-10-29 08:09:45+00:00","Document the BS2 config file settings

svn-id: r11002
"
"2a113835234c316b91846d308eef9cc0fe2d3f72","2003-10-29 10:24:03+00:00","Hopefully right this time, last change caused a cheat (Free air travel)

svn-id: r11003
"
"24acd21da4c3470160498059458bf174be4a66f9","2003-10-29 13:06:10+00:00","only one RandomSource for the engine

svn-id: r11004
"
"9ea97c5313b837011b220951bd3fdf01cb0ff998","2003-10-29 13:16:12+00:00","Revert since it still doesn't work right, last change stop messages about needing to go to Seattle.
Need to good way to bypass zak copy protection, without issues.

svn-id: r11005
"
"5ac187ee4899024f979783f5b63cd363dd769fd8","2003-10-29 15:02:54+00:00","doc TODOs

svn-id: r11006
"
"5813950a8360c8b38c6e2a48187eacdafe016b81","2003-10-29 21:04:12+00:00","A commit that has it all:
- Bug fixes
- Refactoring
- New code

svn-id: r11007
"
"a1e794d920c04fa1527b08dda1e0b5b72cae03be","2003-10-30 01:05:08+00:00","Add option to switch between subtitles only and combined speech/subtitles in Simon 2.

svn-id: r11008
"
"28823a2b2af82ea7dd378cdf2f7925df8f03a2e7","2003-10-30 01:09:41+00:00","Spacing

svn-id: r11009
"
"d8ffcaf34009343213ad0d6765024b0b09055b26","2003-10-30 10:56:38+00:00","new Verb class

svn-id: r11010
"
"4db6235db722d42da8bd0631646f6cc982972209","2003-10-30 13:08:38+00:00","add methods needed by Command

svn-id: r11011
"
"4c7b847950ae7302adf8d07e97dcd4627a92d337","2003-10-30 18:19:03+00:00","really return verb name

svn-id: r11012
"
"295e9c6ff9073801a26511a503a5527b7525ba43","2003-10-30 23:20:47+00:00","add support for spanish cd version

svn-id: r11013
"
"6011bd6cdc0d073b2dd5ef99dc89ce7e50f2a983","2003-10-31 07:43:26+00:00","Save the config file when options are changed.

svn-id: r11014
"
"55cb72e5faf954e29991dc88a3e161dd59f01a98","2003-10-31 10:11:27+00:00","add mouse cursor code

svn-id: r11015
"
"23188d5188c658557d34c4a38666981dd96a8ecb","2003-10-31 13:46:45+00:00","initial version of Command class

svn-id: r11016
"
"d1ff236f3c872c16519914e54d5185c832d1509c","2003-10-31 13:47:28+00:00","use Command class

svn-id: r11017
"
"4952fb11ac21b25ef2c2e6d8b829ad8d5eed0615","2003-10-31 20:59:55+00:00","Fix warning

svn-id: r11018
"
"9f33b3abbeb211182e92cebb13c8c6d1175468e9","2003-11-01 01:17:15+00:00","possible fix for bug #833854 - I rechecked the assembly, there actually is a check for box flag 0x20 in there. However, that flag has a differeing meaning in older engine versions, so I put a version check in and updated the comments. Please test.

svn-id: r11019
"
"ca69882256dca801bc8df78d88d1460cdad49ab9","2003-11-01 15:19:30+00:00","Patch #820010: Support Kanji version

svn-id: r11020
"
"6a50ad9fbd98d8d8943df7fdffa559b236665d03","2003-11-01 16:02:14+00:00","avoid using detectname

svn-id: r11021
"
"2c2866641b8c0eb77de24996432f1a9a56ae82f7","2003-11-01 16:03:13+00:00","cleanup

svn-id: r11022
"
"7fc1e3ec92c864d30f3408de38d33ce6d0d54b67","2003-11-01 16:25:25+00:00","get rid of ScummGameSettings::detectname

svn-id: r11023
"
"078091e7f4f67293a414979daf2062f5edfc393c","2003-11-01 16:39:26+00:00","cleanup of game detector functions

svn-id: r11024
"
"94edf540ef57e801efda2145026d97b6606d66b3","2003-11-01 16:55:20+00:00","More moving of stuff into classes

svn-id: r11025
"
"0435658b968fef8736b137ce2a50648e656f0bf5","2003-11-01 17:08:23+00:00","Create the gui object dynamically

svn-id: r11026
"
"ae9fe77479fb7722bda25beb1baaf6507b55862a","2003-11-01 18:12:04+00:00","Instead of having a function that reverses the panning table, we now have a
function that creates the panning table. The difference is that you now
have to tell whether you want one for normal or reverse stereo, so you are
not dependent on the previous state of the table.

(I still think it may be possible to get rid of the panning table
completely, but that's for later cleanups.)

svn-id: r11027
"
"235047d526667a7b124a51108446e56d4debf9f6","2003-11-01 19:12:11+00:00","made SDL backend use config manager

svn-id: r11028
"
"b6d5f750d5f5ff8e565e616011ea5f4d7756c6b4","2003-11-01 19:13:48+00:00","small fix: if one specifies fullscreen=true in the 'scummvm' config section but fullscreen=false in the game specific config section, ScummVM now properly disables fullscreen mode; also, don't use setvbuf with a NULL bufer and a non-zero size param, that's not portable -> use setlinebuf instead

svn-id: r11029
"
"3e267ba5f969606cf7ebfb3a7f4ec8fb8205d86a","2003-11-01 20:44:53+00:00","make doxygen happy

svn-id: r11030
"
"885fd48a6663b014924e858720b349d432ad1709","2003-11-01 20:45:45+00:00","rename Queen::GameSettings to Queen::GameConfig

svn-id: r11031
"
"e6eb3e234d4188a6753bfa3bf0cf637e6c716316","2003-11-01 20:46:35+00:00","don't do dynalum if palette scroll is disabled

svn-id: r11032
"
"f7ab7f62075107a8afbc071555b25612320664b9","2003-11-01 20:52:41+00:00","cleanup: new MessageDialog subclass TimedMessageDialog

svn-id: r11033
"
"72bee75297bb42703c5825027cd3a4c11dd9347a","2003-11-01 21:15:33+00:00","modified MessageDialog to allow for custom button texts

svn-id: r11034
"
"561d4c09d89986f010090c1893168611ba0774cf","2003-11-01 21:20:36+00:00","use input->delay instead of system->delay

svn-id: r11035
"
"adbaab7ef998608f19f6740658e4911f1ca16a73","2003-11-01 21:23:48+00:00","added doxygen comment

svn-id: r11036
"
"186125ffb66964204c9b840c173f7ac5dca1a050","2003-11-01 22:11:33+00:00","fix potential crash

svn-id: r11037
"
"17597164b91517ed3c2c551b43208f455d83b54a","2003-11-01 22:18:17+00:00","amiga checkbox is obsolete (will be replaced by a platform popup

svn-id: r11038
"
"c62e33b10aacd874cdcd025978095078edb86cc6","2003-11-01 22:19:24+00:00","amiga checkbox is pointless in the in-game settings dialog (you should set this option either in the launcher or directly in the config file); got rid of queryCustomString/string_map_table_custom: we only used them in a very few spots anyway, and until we actually decide to localize ScummVM, they don't gain us anything

svn-id: r11039
"
"2d7eef223ea16f0b7d87446e41a426cb953fc47c","2003-11-01 22:20:14+00:00","renamed 'timer' to duration; minimal doxygen comments

svn-id: r11040
"
"72699c3d2b600ad2f9f36f6eb111074b91e55ac3","2003-11-01 22:21:18+00:00","fixed Widget::draw for bordered items to adjust _h; removed unused label param from SliderWidget constructor; cleanup

svn-id: r11041
"
"4c2387639df9ca3301a81fe907216960fed5b801","2003-11-01 23:41:35+00:00","cleanup

svn-id: r11042
"
"31f64369ff02cdff2408247caab4359c708341a1","2003-11-01 23:45:39+00:00","merged detectGames() into LauncherDialog::handleCommand()

svn-id: r11043
"
"f2c4bbbdbfb06b5296eb3fcdcb7235292e6ac039","2003-11-02 02:14:51+00:00","TODOs

svn-id: r11044
"
"b27a871f870df854a6db0f4530d4596483927bb1","2003-11-02 02:18:16+00:00","turned NewGui into a singleton, and made OSystem a pseudo-singleton; added Widget::findWidget (preparing to add support for nested widgets, for the tab widget)

svn-id: r11045
"
"9588a6fd31a050f3284b326541c4eedb7c108d8c","2003-11-02 10:12:08+00:00","fixed warnings

svn-id: r11046
"
"e99983e12713cc71460d36f132be5ba2a6ca66a1","2003-11-02 10:15:00+00:00","updated

svn-id: r11047
"
"a7eb1b52074479dd09ac8568d01bbcf41e595f96","2003-11-02 10:18:10+00:00","forgot to commit this, sorry guys

svn-id: r11048
"
"81cca1b95ebd512cc31d5398dfa01230cff7a3c8","2003-11-02 10:22:27+00:00","updated

svn-id: r11049
"
"5c387a67ae4d2c14703f9f9d0c3251f529d0f7db","2003-11-02 11:32:18+00:00","ask before removing a game config

svn-id: r11050
"
"70a1d438154a2becf5f55224cb34ba44317c2e86","2003-11-02 14:49:51+00:00","add missing inventory functions

svn-id: r11051
"
"e9ae86bb76bf6087a1bb11f6158fd96676572866","2003-11-02 14:50:53+00:00","introduced common base class GuiObject for Dialog/Widget -> step towards making it possible to nest widgets (needed for TabWidget)

svn-id: r11052
"
"db9b8070f6750a204c5d6e95c60ecbbac7ef848c","2003-11-02 15:58:45+00:00","More moving of stuff into classes. I had to make a few changes/cleanups to
events.cpp, so there could be regressions.

svn-id: r11053
"
"3ed8601f6424b39af37e7526414bc30b6cdf0ae3","2003-11-02 16:46:12+00:00","fix locking verb crash

svn-id: r11054
"
"082bed69401235b3d8fe2ec63b14d9dc28badd80","2003-11-02 16:46:37+00:00","update

svn-id: r11055
"
"c4404baa45f67f2f5cf5241b1c77fc16d6b12585","2003-11-02 16:47:31+00:00","cleanup/remaining Walk cutaway calls

svn-id: r11056
"
"2adc1476000c43b66521f61b74f8659147ccb28a","2003-11-02 17:17:10+00:00","Moved some more 'homeless' functions into Sword2Engine. (Don't worry -- I
promise I will get rid of g_sword2 later.)

svn-id: r11057
"
"f0d2a1b91cee2c81a618b36cf58e2990153ddd00","2003-11-02 17:41:01+00:00","make coordinate calculation based on position of parent -> needed for nested widgets

svn-id: r11058
"
"c58b3819bb320bd3bd2fa023e6369fbbf0cae63b","2003-11-02 17:51:34+00:00","some TODOs

svn-id: r11059
"
"7ec257ae3f48275a911bc503aa7ed4591b06ceac","2003-11-02 18:50:09+00:00","Even more stuff moving into Sword2Engine. I'm tempted to make a new class
for the mouse stuff, but I need to think about that a bit more. I have a
feeling the code could be cleaned up a bit anyway...

svn-id: r11060
"
"ac4b9ccdb8f0d0491c80ec026d8ed510f729cabf","2003-11-02 18:57:20+00:00","refactored code in Dialog::findWidget to Widget::findWidgetInChain; changed NewGui::box() to take colors as param (instead of hard coding _color and _shadowColor)

svn-id: r11061
"
"af19319a246100cf1164538589389258f8409d43","2003-11-02 19:11:03+00:00","added initial TabWidget stub (if you want to try it, I added some testing code to launcher.cpp which you just have to un-#if). This is not yet finished, obviously, but enough to 'get the idea', I hope

svn-id: r11062
"
"3ca74e5d4a1a30b2fb38e8c7d12794ea3cb9c247","2003-11-02 20:42:36+00:00","Enable keys for panel commands.

svn-id: r11063
"
"495bba6751d4846e8b8ce1a254e8ad530befca33","2003-11-02 20:56:33+00:00","Match new[] with delete[].

svn-id: r11064
"
"17db9a91f38fc38e70b4e3b3707df604d6ff5eb7","2003-11-02 21:37:20+00:00","change inventory browsing to match original

svn-id: r11065
"
"6abd397bf4f9aac107de6a6b4a23afbf9f392413","2003-11-02 21:40:41+00:00","fix compile error

svn-id: r11066
"
"95db1c18dbefaa691174ffe80b8282f0b922eb74","2003-11-02 21:44:31+00:00","Remove old FIXME

svn-id: r11067
"
"1d9ac7b91b86973a298acdc8e29659343e41c5dc","2003-11-02 22:31:20+00:00","more changes to allow widget nesting to fully work

svn-id: r11068
"
"99447628ac7920b178904eaa49283830897d0a6d","2003-11-02 22:38:04+00:00","fixed warning

svn-id: r11069
"
"1fd0ecdccefb4f248a87bca9751959dff10d9125","2003-11-02 22:40:29+00:00","update

svn-id: r11070
"
"56bc7370862a0c7c21bc0f27b03da103cc33ffae","2003-11-03 00:17:12+00:00","Widget::handleCommand delegates unhandled commands to the boss

svn-id: r11071
"
"528c9f45137b8e6b51421f0218e762d14af44129","2003-11-03 00:18:33+00:00","automatically compute tab width

svn-id: r11072
"
"af71b2f309a07eba9f1554858da2fe37bd1f3897","2003-11-03 00:24:04+00:00","use TabWidget for GlobalOptionsDialog

svn-id: r11073
"
"be560b6ec6014cd1c31964c442eca49b8c21913d","2003-11-03 00:27:18+00:00","oops

svn-id: r11074
"
"cfd658cd299bb10474b164cc4b453dddfc2e0e2a","2003-11-03 00:43:29+00:00","added built-in label for SliderWidget

svn-id: r11075
"
"9f3edb11c5369094c2c3af8ad72adfb2e396abdc","2003-11-03 01:00:26+00:00","added a builtin label to PopUpWidget

svn-id: r11076
"
"83813767ea1904caac68eed29b143fbf3c6fc747","2003-11-03 01:01:49+00:00","Add note about kanji versions

svn-id: r11077
"
"4581cdfe6cc32f302006d66a69824912cdca59ea","2003-11-03 01:04:55+00:00","tiny position tweaks

svn-id: r11078
"
"7724d9a340c8a0641b77526f487cad732f19bbbc","2003-11-03 01:14:40+00:00","distinguish selected tab by size, too (not just by color)

svn-id: r11079
"
"79068761f2c3ae6fa3effcb5c34004206ae0ebe3","2003-11-03 01:16:29+00:00","make light gray slightly lighter, for better contrast

svn-id: r11080
"
"30c29e7dece97e6260697fec8af46419c5085b04","2003-11-03 01:30:47+00:00","typo / examples

svn-id: r11081
"
"5a91cb4287e3dab066a829a3c5d85b27d8755888","2003-11-03 01:32:26+00:00","alternate scroll bar look

svn-id: r11082
"
"8735f1eff7c53a0e06142e5de273b326f4556470","2003-11-03 02:43:10+00:00","Look for towns font rom in game directory then current directory instead of just current directory

svn-id: r11083
"
"1cc656412c2de1702c1101125a37ea3abdc3b657","2003-11-03 02:54:11+00:00","allow the towns version of loom to do something besides incorrectly error out. This check should really check for a pc version not checking the negation of the existence of other versions

svn-id: r11084
"
"c4d5445b007c072446ae52f78e53e67bc9709c9e","2003-11-03 03:42:20+00:00","Add partial roomname enum

svn-id: r11085
"
"a331a298a231b43309aa61ff1f6c5bbef3add460","2003-11-03 05:27:53+00:00","Fiddling with new tab widget

svn-id: r11086
"
"0ece8aab8b03e0aead5f18e33797ec85294bf158","2003-11-03 06:19:43+00:00","Default to first tab

svn-id: r11087
"
"b3b0118292df23a5d4bf0e9b32a56fb4ddfba1ea","2003-11-03 07:47:42+00:00","The resource and memory managers are now created dynamically.

Renamed the resource manager's open/close methods openResource() and
closeResource() to avoid confusion. (It was I who originally shortened
their names to open() and close(), but I've changed my mind now.)

Moved more stuff into Sword2Engine.

svn-id: r11088
"
"b6d8e8187bb9011dd4501adf8ba2fe2e905f96da","2003-11-03 14:47:05+00:00","enable room switching

svn-id: r11089
"
"ac47dbeee8508a18bc062117ddd7ece5a1d699a6","2003-11-03 14:47:22+00:00","cleanup / enable cutaway calls

svn-id: r11090
"
"f9b7856afbd6ebc96a878707a1de5fcfdd61f070","2003-11-03 14:48:07+00:00","init Walk::_joeMoveBlock at the right place

svn-id: r11091
"
"e050421bc21c2940da67b6ccea253a8ffde365c7","2003-11-03 14:55:36+00:00","Fixed compile error under codewarrior for PalmOS

svn-id: r11092
"
"fbeedfd438aac824d0b3f37e2a799be008edd28c","2003-11-03 15:38:37+00:00","Updated froms

svn-id: r11093
"
"be080cce0edcccae930ea96b3d0105adfb759c25","2003-11-03 15:47:07+00:00","Disable Queen for now

svn-id: r11094
"
"14c2ae7e360bc091f3188a63e455ee85d4082f80","2003-11-03 16:01:14+00:00","One form in one source file

svn-id: r11095
"
"2bfad6efced38d16ca4c0902d2c75131484c2a80","2003-11-03 16:04:06+00:00","Added snprintf function

svn-id: r11096
"
"b4c40ceb1240cc439817128c606f206b6a345280","2003-11-03 16:09:12+00:00","Read database only if it is opened

svn-id: r11097
"
"7defb5c9f435490ab7dc220a8c7754d12b048346","2003-11-03 16:10:35+00:00","One form in one source file

svn-id: r11098
"
"b9889593808ae340e4ee6e7ae0abfe6a94939a36","2003-11-03 16:13:00+00:00","New num pad

svn-id: r11099
"
"2045867796f539064ac6fdc31a2d3ce89edba8b5","2003-11-03 16:14:58+00:00","ScummVM launcher in its own source file

svn-id: r11100
"
"3b0fcf063765509972b527b7a0d5a0e83fcb5f63","2003-11-03 16:16:57+00:00","Changed vars name

svn-id: r11101
"
"a5e443a332738c16c74aedf78b483fb0165f6164","2003-11-03 16:18:13+00:00","AppStart/AppStop functions

svn-id: r11102
"
"feb0678801eef8f132492f02c581567a5340414a","2003-11-03 16:21:19+00:00","Read database only if it is opened

svn-id: r11103
"
"0e23d7a30ebc7b7ad11abb8c7ae976832c71597b","2003-11-03 16:25:06+00:00","Use compiler option instead of this

svn-id: r11104
"
"5b436fc6e945b74b41845155df651c16d2854db0","2003-11-03 16:29:41+00:00","Updated to lastest CVS

svn-id: r11105
"
"57d55e2fcde822533d24b0b09dfb399d26faabc9","2003-11-03 16:32:28+00:00","New build options

svn-id: r11106
"
"6e60d7b827faa6e039a43f068cc0a1bc9a0f8663","2003-11-03 17:46:55+00:00","fix compile error

svn-id: r11107
"
"ca9638e4f6b5040d353e70ff2ba0773e9c67dff1","2003-11-03 19:52:14+00:00","cleanup

svn-id: r11108
"
"d2285e386fc555b0e2c02171e46eed8e4e120c0d","2003-11-03 20:13:04+00:00","added NumberingMode enum type

svn-id: r11109
"
"3f1476788406b0dba63c5c1f315c87206b89a50a","2003-11-03 20:16:23+00:00","Make ChooserDialog height & button label customizable; make its ListWidget available to the outside, to allow custom modifications (hack!); fixed bug where the cancel button didn't yield -1 as result

svn-id: r11110
"
"d85757987e893f53a34e08e6ef912dc86ffe619f","2003-11-03 20:48:27+00:00","oops

svn-id: r11111
"
"e55370e08db26a871d47405208e8f8e5852afcbc","2003-11-03 22:20:51+00:00","Use posix-fs on Dreamcast.

svn-id: r11112
"
"622be9702fa1af96da95deea53af97e259f26350","2003-11-03 22:21:55+00:00","Added math.h to include list (needed for atan2).

svn-id: r11113
"
"9c8543ffdd7e37aeed12326cc797dbadde430a45","2003-11-03 22:24:58+00:00","Reeordered EXEEXT and EXECUTABLE (define before use).

svn-id: r11114
"
"2ed4f2c7fb2dc495517ff9f0e214c99b2004d331","2003-11-03 22:26:01+00:00","Updated list of build directories to ignore.

svn-id: r11115
"
"caead57eb300c7e9cceabd17213426ac1e36c3d4","2003-11-03 22:26:25+00:00","Now compiles again...

svn-id: r11116
"
"ef5e193d5993db3a807580f473ea25128b09b7d8","2003-11-03 22:28:37+00:00","stdafx.h needs to be included first.

svn-id: r11117
"
"2ad5fcfb7d9e5859ce2f220ac7d8813ac0c29488","2003-11-03 23:14:21+00:00","cleanup

svn-id: r11118
"
"3456b6f50b8d1682f25ccf28e6f8e9752741f08b","2003-11-03 23:26:13+00:00","remade the in-game GUI/menu

svn-id: r11119
"
"8a8743a0428880dcad4ef52ab69c06b8da7ab3f7","2003-11-03 23:33:40+00:00","removed PushButtonWidget

svn-id: r11120
"
"93037c3fed09da2318469f6256a9e7d206285254","2003-11-03 23:34:27+00:00","oops this wasn't meant to be there

svn-id: r11121
"
"76e4cbe2cb298f5b5a87ffb0a8864ae3b517882d","2003-11-03 23:42:53+00:00","fix item positions

svn-id: r11122
"
"b674717fbcc962505ce61c453231a560b8f0dcde","2003-11-04 03:31:50+00:00","lec don't have copyright on all the SCUMM games, add broken sword while here. Maybe we should just say something like all copyrights and trademarks are owned by their respective owners instead of having this list and stick a bit about the GPL in that the TODO mentioned?

svn-id: r11123
"
"bfb8f9a0702735eb38e716d12e60ce27b79c0e25","2003-11-04 12:47:25+00:00","add some things...

svn-id: r11124
"
"b06e50dfa5588a0ad92515996c04477dd51da938","2003-11-04 13:51:36+00:00","preliminary R_MAP implementation

svn-id: r11125
"
"53fb7013244a8cee49a2084a54c9d4f93aab0fbb","2003-11-04 14:29:52+00:00","R_MAP define

svn-id: r11126
"
"f71d4e4df89c34193d3ecc7dd689c2f61d34bd80","2003-11-04 14:43:53+00:00","display PCGames splash screen for demo version

svn-id: r11127
"
"64ec1907c2d99e7ecc46e0a5d5605e474c548248","2003-11-04 17:26:59+00:00","More moving of stuff into classes.

svn-id: r11128
"
"ba098a3a5b27967c5e3f629cb6e8a0dc453aded8","2003-11-04 18:02:49+00:00","Create g_logic dynamically. More moving of stuff into classes.

svn-id: r11129
"
"5caf79c8e5124da88ca99881279591fbedf8ab61","2003-11-04 19:50:54+00:00","change white palette entry for cursor in order to avoid glitch when palFadeIn is called

svn-id: r11130
"
"6a6644bac8685cb448042bbc12c831bab61fa7de","2003-11-04 19:51:31+00:00","fix demo crash after introduction

svn-id: r11131
"
"74b496a0627517f0c4231c4f77209dbf331c9dcb","2003-11-04 20:46:20+00:00","added PROP_GET_GFX_MODE; removed PROP_SHOW_DEFAULT_CURSOR

svn-id: r11132
"
"1410c4a762536bb0edda24ae37565ab5ce6802ec","2003-11-04 21:11:14+00:00","typo

svn-id: r11133
"
"84efb90484233804ef27a54f46c902fddf2f27b1","2003-11-04 21:17:17+00:00","swap GFX_HQ2X & GFX_ADVMAME3X (purely cosmetic :-)

svn-id: r11134
"
"597ddcfa1706d2d3fcec898c42d258ab2dc087e4","2003-11-04 21:17:33+00:00","Added some more dummy checkboxes, functionality to be added

svn-id: r11135
"
"ee253d4c9075667de1c4977894d6dfef9c2d9a13","2003-11-04 22:00:36+00:00","modified NewGui::drawString to shorten strings which don't fit using ellipsis (disabled for the EditTextWidget for now)

svn-id: r11136
"
"2db3e37206296df06f3dd50b929e357e450f7707","2003-11-04 23:07:30+00:00","Switch to the *real* file - apologies to those who tried to compile the old one (but it seems nobody tried :p)

svn-id: r11137
"
"54fe614cdef7f40b89e480c61f795d7b1c65fbc1","2003-11-04 23:08:27+00:00","Project changed name

svn-id: r11138
"
"b65ac00de9d5ee262a62009ca2dd17f1cad48dce","2003-11-04 23:09:12+00:00","Update project files

svn-id: r11139
"
"d45b475b4800651fb334dd20a9c028925d825096","2003-11-05 00:57:00+00:00","added ConfigManager::removeKey

svn-id: r11140
"
"583ae6145350d798f3dd626229f362a1e58b4944","2003-11-05 00:58:02+00:00","export language list (so that it can be used by the GUI); added methods to convert a Platform/Language ID into a canonical string

svn-id: r11141
"
"ceef10b5b892590390deb5c94fdc812ca73d962f","2003-11-05 00:58:42+00:00","make it possible to query the tag of the selected item

svn-id: r11142
"
"25f2aafd7af0c9b03c06ce22daa6c007019aa67a","2003-11-05 00:59:03+00:00","added language/platform popup

svn-id: r11143
"
"4cff7c8b97d9d4fa1013c7c7637d571d10f14538","2003-11-05 01:15:10+00:00","save fullscreen/aspect ratio settings; fix midi driver selection (driver was set immediately when you choose it from popup; this made it impossible to 'Cancel' the change)

svn-id: r11144
"
"c207fe6a95205d58ac25e5ba2f8f95852b3d4898","2003-11-05 01:22:19+00:00","added multi_midi/native_mt32 settings (we *really* need to come up with a good way to share code between GlobalOptionsDialog and EditGameDialog)

svn-id: r11145
"
"829b4464fd97ff0239fb3723f20c0472adc17db0","2003-11-05 10:08:55+00:00","walking fixes (int16/uint16)

svn-id: r11146
"
"85c409dce95b7bf74f62ed8d71adba0df95fd7ff","2003-11-05 10:09:54+00:00","minor changes

svn-id: r11147
"
"086c8a50a46f7e5fe74c68d7f26801178d4570c3","2003-11-05 10:11:37+00:00","update

svn-id: r11148
"
"2c3b8c9b3046472e34f777588dcc8627cc32dd93","2003-11-05 11:24:37+00:00","minor tweaks

svn-id: r11149
"
"513fdae26189db34137bcf1bed239673d2b80c37","2003-11-05 11:37:04+00:00","check name we are trying to save with isn't null, still needs to be looked at at a higher level however

svn-id: r11150
"
"0dfd0e44148333257cf37e5e82ed902de3ac68a2","2003-11-05 12:16:14+00:00","changed the way get(key,domain) works for global domains (instead of defaulting to the empty string, it will now default to the registered default in this case)

svn-id: r11151
"
"297ddb370b450c925cbe9a04aefb575d57a34efa","2003-11-05 12:25:42+00:00","refactored common code into a new class OptionsDialog; various fixes and cleanup to the launcher/option dialogs

svn-id: r11152
"
"cfcee0f6736bb86f6fcb230bc40cf88b9bfcea97","2003-11-05 12:28:03+00:00","bumped version to 0.5.5 (since so many changes to the launcher/options dialogs were made -> this helps to verify whether users use ScummVM pre or post these changes)

svn-id: r11153
"
"e20bf2cd637facab1010fed6e29329b446eceb88","2003-11-05 12:48:42+00:00","fix for bug #836418 (Crash when saving with blank name): GUI now uses a default savegame name if non is given

svn-id: r11154
"
"5bf6e9afa0f949de6eb3f90a0639b2c884b9b3b4","2003-11-05 14:35:35+00:00","made menu buttons wider (looks nicer, IMO)

svn-id: r11155
"
"8ad1ec44532e7ac1d30c9579caeb34a0dfe4b4f7","2003-11-05 20:42:33+00:00","setup opcode table *before* using it to avoid crashes :-)

svn-id: r11156
"
"a576d6641e5bb0d49838c61a2e617722677b1f42","2003-11-05 20:47:32+00:00","fix bug #835953: Typo in key shortcut list

svn-id: r11157
"
"29d79d8197c73168187ec7369473c3d59b756b52","2003-11-05 22:06:07+00:00","make savepath settings persistent

svn-id: r11158
"
"d1ebb50c5b93906d69fe1359ac73b5cc0523df66","2003-11-05 22:34:00+00:00","updated TODO a bit

svn-id: r11159
"
"c524a58197f28d6ff54398a052ef391dac905148","2003-11-06 08:44:33+00:00","The more I implement, the more I need to implement.
- More cutaway code
- More dialogue code
Hint: Let the last intro cutaway finish if you don't want Joe to get stuck.

svn-id: r11160
"
"0f98be649b940a7b686aeebc7cd2fe3794486934","2003-11-06 08:53:09+00:00","Clean-up

svn-id: r11161
"
"d3936b616c751303ddada6cabab8fbd11eb770c9","2003-11-06 15:26:44+00:00","Validate room number

svn-id: r11162
"
"d03ff2a119dd379243030b2ebcbea6cac96c3b8f","2003-11-06 15:47:37+00:00","more enum stuff

svn-id: r11163
"
"bd23b7dce0d715bcbf238274378241cf4ad08274","2003-11-06 17:54:59+00:00","Do not allow invalid room numbers.

svn-id: r11164
"
"3769398474b8cd537b800b720c962e7190366b5e","2003-11-06 21:06:01+00:00","- Improved talking
- Lots of small fixes

svn-id: r11165
"
"92824087945d8a4c64492f64f081fa98876a38ca","2003-11-06 21:15:35+00:00","Bug fix for non-quittable cutaways.

svn-id: r11166
"
"0f54b65caca3a69c147ee165b19b3668f8258cfb","2003-11-06 22:57:33+00:00","cleanup

svn-id: r11167
"
"ba1cf0e957f027011e023f733a304c49cd7eac9b","2003-11-06 23:54:12+00:00","cut down dependencies a bit (so that I don't have to recompile hq2x/hq3x whenever common/scaler.h is changed :-)

svn-id: r11168
"
"82aac86edff8e35ed7c0c2560ef5cde8b3111fc6","2003-11-07 00:02:03+00:00","change (Const)String::c_str to never return 0 (rather return empty string) -> can be used to simplify code. Also don't use stricmp in </<=/>/>= operators, it is inconsisten with == and != operators

svn-id: r11169
"
"83a55fa7e87bdf75c824f068dd0b2e49468dc6d7","2003-11-07 00:02:47+00:00","Introduce Comperator template parameter to Map -> this allows more flexible use of Map (in particular, I can now use a StringMap in ConfigManager which ignores case)

svn-id: r11170
"
"105728adee99afecee850ae055600692a5de5c47","2003-11-07 00:03:55+00:00","Use the new capabilities of class Map to make the ConfigManager case insensitive when it comes to comparing config keys/domains

svn-id: r11171
"
"0bae086c7b2eecbb5b3a37f35f22579691f4bdc5","2003-11-07 00:45:54+00:00","typo, gnaw gnaw

svn-id: r11172
"
"709c3262766e41370710dc954ef68d5538da55ff","2003-11-07 00:54:41+00:00","Don't try to speak NULL strings, this fixes atleast 1 crash. (looking out the hotel window)

svn-id: r11173
"
"b8379d646a9689de98bb27f70529e7b7a54c9699","2003-11-07 01:24:39+00:00","<tsuteiuQ> 'gnaw gnaw'

svn-id: r11174
"
"9a1cfe838f6ad609b135170f95109d7b07adc5fa","2003-11-07 01:36:53+00:00","spelling fixes

svn-id: r11175
"
"7c97e7c2b9b69678b0e9c3f482a74df74b7f1ab5","2003-11-07 02:11:41+00:00","more spelling fixes

svn-id: r11176
"
"f6e1915b7744ca7b1b5c8c0ee76bead0fc60e08d","2003-11-07 02:14:56+00:00","missed one

svn-id: r11177
"
"239aea0ff01b1fc3f4a62c35f0362550de2f696c","2003-11-07 02:31:44+00:00","spelling fixes

svn-id: r11178
"
"e9581dda6e4191aa95a35776a4ac356e61fa982c","2003-11-07 02:33:20+00:00","Added partial playSong() implementation

svn-id: r11179
"
"b2e9b73c4c2a1ed86fffd8fd613d6db59d88e034","2003-11-07 02:43:47+00:00","spelling fixes

svn-id: r11180
"
"8ce682d330741dac2a2aabc938d1b5163359e4aa","2003-11-07 02:51:08+00:00","spelling fixes

svn-id: r11181
"
"d4a9c911ba2587fd28bb2c4c4b6710db0a32696c","2003-11-07 02:54:21+00:00","missed one

svn-id: r11182
"
"4c833ba23ee6ab9d75cdbd6edff585e23818b360","2003-11-07 09:38:06+00:00","fix invalid typo fixes ;-) (BTW did anybody get comit mails for khalek's changes? I didn't)

svn-id: r11183
"
"e01ab4599d0bcd96c506a75a3da6938e82ac7171","2003-11-07 10:38:45+00:00","Fixed warning. (I've only seen these warnings when compiling under MinGW,
and to be honest I never understood why the compiler wars for it.)

svn-id: r11184
"
"2a71ac0dc81331280a9b22f20db98cec006bd819","2003-11-07 10:57:21+00:00","Minor fixes.

svn-id: r11185
"
"a5498d210294024263586e24860a9eaa986a16ac","2003-11-07 11:11:06+00:00","Correct voc rate in DOTT demo

svn-id: r11186
"
"3433769bea8f352a812c2427bedd60cd2f6bf37d","2003-11-07 13:17:37+00:00","Removed some unnecessary whitespace

svn-id: r11187
"
"dc63e3882bedd39cab8b8e4e4b432bab119925b0","2003-11-07 14:00:33+00:00","adjust for recent string c_str changes so title is always shown again. Fixes bug #837868 probably not the best way of doing it but it'll do

svn-id: r11188
"
"e9eb92e201f8a4d214b2923243199142bff903bf","2003-11-07 14:05:45+00:00","Small fixes.

svn-id: r11189
"
"496d19d46176200c3d8486a202382b7016591f5c","2003-11-07 14:17:34+00:00","err, *strnlen(,,3)* used to check for empty strings? I think not :-)

svn-id: r11190
"
"767fc8714804f938de79ef7bc916d3df684f039c","2003-11-07 14:50:32+00:00","fixed memory leak in TabWidget

svn-id: r11191
"
"435fe749d773cb433e95fe97935fdd010c2f7cbb","2003-11-07 14:58:12+00:00","draw StaticTextWidget differently if disabled

svn-id: r11192
"
"fcf6d6613d92534321d28f9c1806ffeb21fcf9b8","2003-11-07 15:05:14+00:00","enable StaticTextWidget by default; make CheckboxWidget::handleMouseUp send the checkbox state along with its command

svn-id: r11193
"
"c0fe2a5da3cc84c8802517815d0822341e81cb0e","2003-11-07 15:34:51+00:00","Implement some special actions

svn-id: r11194
"
"ced5921ac08e0c352f0f4d41bbafcfa2282adb67","2003-11-07 15:57:36+00:00","change behaviour of ConfigManager::get once again -> now we *do* fall back to the registered defaults...

svn-id: r11195
"
"a93c9f49ba970fc9abaecbee99dc5ea96ec5a345","2003-11-07 16:01:51+00:00","added checkboxes to the 'Edit Game...' dialog which let the user determine whether to override global settings or not; besides other things, this fixes bug #837599 (Default volume is 0 for newly added games)

svn-id: r11196
"
"f4dc97783984d2008443a3b8292bbde059b9564a","2003-11-07 16:44:13+00:00","add bob parallax stuff for room 74 (carbam)

svn-id: r11197
"
"e042901695889aaa15d1141a953ff5f651f9045f","2003-11-07 16:47:07+00:00","oops

svn-id: r11198
"
"5c4e374d733db5db5713581dca00d8dd06d8b873","2003-11-07 16:54:58+00:00","fixed ConfigManager getInt/getBool

svn-id: r11199
"
"cec821630b6bde4b86870db04a64b0277ad169e7","2003-11-07 17:56:23+00:00","fix palette glitches occuring when Joe switches from his clothes to the dress

svn-id: r11200
"
"27bb10900e8053c0c988a256a1313bd1da8d7f2c","2003-11-08 03:33:21+00:00","Add missing opcode needed for Spanish version (And maybe others?) of Full Throttle, patch #838309

svn-id: r11201
"
"aa655b95e4d22036d30728cc4f16e91a79bdbc90","2003-11-08 11:00:36+00:00","Apparantly, this cast is not needed for it to work properly

svn-id: r11202
"
"90eff8a31d81935d201969b6bd867d3e19b41f67","2003-11-08 11:07:02+00:00","Added David and Gregory to the README

svn-id: r11203
"
"6e2b51233f0b0497d7f462c170e939d0a31766b2","2003-11-08 11:10:40+00:00","Use spaces instead of TABs

svn-id: r11204
"
"f243b50215c157a40d4ec3aada91efdb4762b73a","2003-11-08 11:32:32+00:00","Start/stop scenes - fixes missing panel.

svn-id: r11205
"
"b04ddef7506bfa08527da9e79040c583fb765b2e","2003-11-08 13:57:52+00:00","missing stuff for carbam scene

svn-id: r11206
"
"688c80b0620ae5765355a4048864bb3de84ebf74","2003-11-08 15:47:51+00:00","Moved more stuff into classes, changed some static allocation to dynamic,
and removed some of the references to global variables.

At this point I believe everything in the main game engine has been moved
into classes - not necessarily the correct ones, but still... However,
there is some stuff in the driver directory that need to be taken care of
as well.

svn-id: r11207
"
"31b514652807dd5682326a7121c85af51a15a3a2","2003-11-08 16:36:54+00:00","fix dufflebag problem

svn-id: r11208
"
"9106229bef6b5ecaa27bea6373c4c21b8c1affa0","2003-11-08 18:15:35+00:00","Removed some now redundant header files.

svn-id: r11209
"
"980ad7daba7f9a6682808a5b8f9d7b3f13638cb2","2003-11-08 18:41:44+00:00","This one can go as well

svn-id: r11210
"
"394c96b0337226f0668b04806b9037ec64d6936f","2003-11-08 19:16:39+00:00","update

svn-id: r11211
"
"409108df82789d462320da6b5280a3218d0c3ba7","2003-11-08 19:47:20+00:00","cleanup whitespaces

svn-id: r11212
"
"b99af18bd5df9d7fadceb5d517fc57a2f7e7db42","2003-11-08 20:27:27+00:00","cleanup whitespaces

svn-id: r11213
"
"7d6c5bc1dad3478b2b659bbd1f15ad552223f3bd","2003-11-08 20:54:31+00:00","cleanup whitespaces

svn-id: r11214
"
"0908b794ecd3068e78d30446fa9bc8108e80e101","2003-11-08 21:00:11+00:00","Show mouse cursor in dialogue.

svn-id: r11215
"
"9e7402e14b381030b0b09f4ba71e92132e192eff","2003-11-08 21:02:25+00:00","Enable pinnacle room

svn-id: r11216
"
"1f9e408e2fab0f11a648d113fd7e4a19f113f234","2003-11-08 21:59:32+00:00","cleanup whitespaces

svn-id: r11217
"
"bd972c97e57234dadd830fef118139c0bf9c71e4","2003-11-08 22:05:58+00:00","cleanup whitespaces

svn-id: r11218
"
"b5a7ef0822d336958682b3f9b8b1c4fc0d28af3c","2003-11-08 22:43:46+00:00","cleanup whitespaces

svn-id: r11219
"
"13c7acee9d57cc5d3134c9f5be0f7cb2614c33e7","2003-11-08 22:57:42+00:00","cleanup whitespaces

svn-id: r11220
"
"1f99fbe77c50b85afe124028be380d8b78bb6b61","2003-11-08 23:05:04+00:00","cleanup whitespaces

svn-id: r11221
"
"e01e3ae46373b8af39daab782a6642f12da8f937","2003-11-08 23:20:23+00:00","fix bad animation string at amazon entrance room

svn-id: r11222
"
"14b7d027a24391b39e29b7168b8d67b2b6ebffae","2003-11-08 23:22:16+00:00","cleanup whitespaces

svn-id: r11223
"
"8f130401a11905ba3c554aaa67437946d4ad7e1f","2003-11-08 23:45:45+00:00","cleanup whitespaces

svn-id: r11224
"
"1d3d581879eefc6cd7de7044e62988212a003a40","2003-11-09 12:19:47+00:00","- Fix cutaway bug that made Joe end up in the wrong location when the
cutaway was cancelled.
- Fix cutaway bugs that made it very bad to cancel the cutaway where Joe
looks out from the hotel window.

svn-id: r11225
"
"79f84425dd3abc7239531b1c9ef1ccc155703a8b","2003-11-09 14:16:46+00:00","Moved _talkSelected to Logic.

svn-id: r11226
"
"c9feb712bc0fa6fe51082eaf7b3c22ef1aa0b673","2003-11-09 20:50:03+00:00","enable (some of) the original debug passwords

svn-id: r11227
"
"a7aac363414c980dd4b27f5703890d0dea1caefc","2003-11-09 21:10:42+00:00","fix flipped faye issue in c3a.cut

svn-id: r11228
"
"1b6e9a9b0099774efb1a80baf29275cca1075ebe","2003-11-09 21:24:23+00:00","forgot to update comment

svn-id: r11229
"
"b64c6fcbfc0898f8eb881f551e55d6695cc5dfd7","2003-11-09 21:31:18+00:00","Added (quick-)Saving/Loading

svn-id: r11230
"
"357cfb8aeab8f3c6c0c5750c69c5ebae251291ae","2003-11-09 21:55:19+00:00","fix small leak

svn-id: r11231
"
"a657b8e7ba85a42c2c6da31a66b58cc57ab5db29","2003-11-09 22:12:16+00:00","renamed some opcodes and added sobopcode comments

svn-id: r11232
"
"69c4fd3595f8580e971102ac8fc29e1f21b60879","2003-11-09 22:22:56+00:00","update

svn-id: r11233
"
"b264f836fb976160d5cb998a8e35c0fb25a65e1b","2003-11-09 23:49:39+00:00","Enable intro again

svn-id: r11234
"
"d330de5f28b858d31ff4e3cd064d99f4a857178c","2003-11-09 23:50:40+00:00","comment out all the targets for newer humongous games until they start doing something useful

svn-id: r11235
"
"2b509bc0b6b184703cb7be5bdb9c2c14ddc3c98c","2003-11-10 00:05:17+00:00","renamed  opcode and added sobopcode comments

svn-id: r11236
"
"03f50231d26c2c7067a98061bf909574e47f76f5","2003-11-10 00:28:09+00:00","cleanup / some warnings (I'd like to know if and where those opcodes are used)

svn-id: r11237
"
"63c6944492ad4bfa0ffbc811e4d1bad9f8452008","2003-11-10 00:58:22+00:00","mark zak256 as a depreciated target, zakTowns will be used in future to be more consistent with the other target names. Config magic to automatically set a gameid=zak256 in config files not yet implemented.

svn-id: r11238
"
"e34f2b8b3321a576c2ae612470d07cb3e7bc91f5","2003-11-10 01:04:12+00:00","cut down on unnecessary GameDetector references

svn-id: r11239
"
"439bc8364d248293c1ba7b1d92d2b00b4a6fa609","2003-11-10 07:41:21+00:00","Fix warning

svn-id: r11240
"
"3d012651fd43d83ed67617ac0c5c0e32e6dd2ad4","2003-11-10 07:52:15+00:00","The script engine frequently needs to pass pointers to various structures
etc. to the different opcodes. Until now it has done so by casting the
pointer to an int32 (opcode parameters are represented as arrays of int32)
and then the opcode function casts it back to whatever pointer it needs.

At least in C there is no guarantee that a pointer can be represented as an
integer type (though apparently C99 may define such a type), so this has
struck me as unsafe ever since I first noticed it.

However, since all such pointers appear to point to the memory block owned
by the memory manager, we can easily convert them to integers by treating
them as offsets into the memory block. So that's what I have done. I hope I
caught all the occurences in the opcode functions, or we're going to have
some pretty interesting regressions on our hands...

svn-id: r11241
"
"514a9b5120435fc55eb0fde4952d63c60dd7980e","2003-11-10 08:00:55+00:00","renamed back to o6_ifclassofif and extended names for dim opcodes

svn-id: r11242
"
"aa848961b3f2ee663b3e65950b5391f7fc39a741","2003-11-10 08:46:40+00:00","changed opcode name to actorOps

svn-id: r11243
"
"a26f9872ac279555f192c7c2cc3f6919ecd51de8","2003-11-10 08:50:25+00:00","update

svn-id: r11244
"
"6727a31884ecb1d3c4070e5d9610b292c9633402","2003-11-10 09:16:41+00:00","added subopcode comments

svn-id: r11245
"
"6fec54b411824e778a0f5ec7dfd203d7c39d3802","2003-11-10 10:37:46+00:00","Forgot to commit this

svn-id: r11246
"
"cd4eb7deffbd72f3fc4a80a242f06b9dae5270a6","2003-11-10 12:21:10+00:00","Return mouse cursor and panel after cutaway.

svn-id: r11247
"
"ff07a453e386312ba3181067b89609025a7f8e24","2003-11-10 12:32:46+00:00","Make the fix like the original game instead.

svn-id: r11248
"
"72d91990227ed6e64f6358011bda3bd5493fdb86","2003-11-10 14:06:55+00:00","fix some bugs :
- bettle not disappearing when caught
- wrong Joe position when switching rooms
- bellboy dispappearing after spoken to him (partially fixed)

svn-id: r11249
"
"98d4b4cb311e5aa95f6b8db3771a1647bed1f545","2003-11-10 15:45:53+00:00","hack for special french character

svn-id: r11250
"
"23669de2f3238bbff1d52bfd2b0738c56fabb6be","2003-11-10 19:17:52+00:00","deprecated adj. Said of a program or feature that is considered
obsolescent and in the process of being phased out, usually in favor of
a specified replacement.

svn-id: r11251
"
"f71fe1316ec46d2fd673c9051d56b01c0b5e1cb1","2003-11-10 19:24:56+00:00","don't use tabs in README

svn-id: r11252
"
"deef1ef32b2f4dbfe87bd5a3b9268dc77beca7db","2003-11-10 21:29:28+00:00","get-rid-of-queencomp TODO

svn-id: r11253
"
"5c2a3da7f2f8f45e20b732defbaed7aa47af00c8","2003-11-10 23:17:11+00:00","fix for bug #833537 (Config manager saves 'save_slot')

svn-id: r11254
"
"22c22d1e81b25c103100b6c8347b154f16dafc5e","2003-11-10 23:40:48+00:00","added namespace GUI

svn-id: r11255
"
"b38995b288f2c5014ff1a9867d12807182ceb051","2003-11-11 00:26:38+00:00","cleanup (merged the two base set() methods)

svn-id: r11256
"
"0bcc7ce80eb6a8daa35bf2591281974cceff8078","2003-11-11 00:40:35+00:00","made Scumm::OptionsDialog subclass GUI::OptionsDialog (code reuse); replaced Sound::_sound_volume_master and friends by ConfMan.get() calls; some whitespace cleanup

svn-id: r11257
"
"446a01ba09192a132ee9b6e40129161a7ec09be0","2003-11-11 07:43:02+00:00","Moved low-level keyboard and mouse handling to a new Input class, and
renamed the Display class Graphics for no better reason than me liking the
phrase 'sound and graphics' better than 'sound and display'.

svn-id: r11258
"
"70bc5d15ec0af3dd6c009063816dac1e045067ef","2003-11-11 07:47:22+00:00","Removed redundant header files.

svn-id: r11259
"
"1f53624d88ac05bff0b4f408507eeca331cfdcd5","2003-11-11 10:30:25+00:00","Removed SVM_timeGetTime(). We may as well call get_msecs() directly.

svn-id: r11260
"
"5d863586dc1a431dd3d5ec86096140297886bf4d","2003-11-11 13:47:53+00:00","Disambiguate o6_jump execution (is _scriptPointer read before or after fetchScriptWordSigned() (which modifies _scriptPointer) is being called)

svn-id: r11261
"
"ce619b254ed2ff70c43e20006fc755b3c5eb785d","2003-11-11 15:07:35+00:00","Extended the 'res' debugger command to print information about where the
game expects to find the various cluster files. I plan to look into making
the game playable from CD, and this should help during the testing.

svn-id: r11262
"
"c16d20c72fd7f4ff801e1421488d3a41a6a6a4a6","2003-11-11 15:16:41+00:00","Slight refinement to the last patch. There are four different possibilities
for which CD to look for: 0 (both CDs - not used?), 1, 2 and 3 (not used?)

svn-id: r11263
"
"18c28863a2f67ca272920796c76fbb0d27c79782","2003-11-11 19:54:24+00:00","update and added mad lib by default

svn-id: r11264
"
"97c78cc37693a5780ad2243d736c835d7f1a23ef","2003-11-12 07:05:52+00:00","changed getting position of bundle song to ms

svn-id: r11265
"
"beed02807f4d2ebc58e6490c38fecb6a9695fb9d","2003-11-12 08:21:18+00:00","cleanup

svn-id: r11266
"
"d5a28b43de859ec493031064b5137625b25cb431","2003-11-12 10:50:05+00:00","fix some bugs :
- panel not grayed when playing a cutaway
- command text still displayed when playing a cutaway
- panel drawing glitch on pinnacle room exit
- text color on the dialogue choices not updated

svn-id: r11267
"
"0be0f0122693ae442a42a1139cf8512ad30327f0","2003-11-12 12:36:36+00:00","Use GUI namespace

svn-id: r11268
"
"de1e3baf41f60df4afe1d3b7eef2eb2fca00f3a2","2003-11-12 16:00:11+00:00","Preliminary support of Simon games on PalmOS

svn-id: r11269
"
"9d89fe2b499cf8df9a1d8456d2d9b0bab7a46412","2003-11-12 21:22:14+00:00","fix the skipped initial talk to floda receptionist

svn-id: r11270
"
"3a355e0763d1b966efc81d0255b8b3522afb2c00","2003-11-13 00:00:49+00:00","fix compilation

svn-id: r11271
"
"80d60f29415fe781d3b13141c0315ce35d977200","2003-11-13 01:25:21+00:00","zak256 -> zaktowns in docs

svn-id: r11272
"
"66d9b4315a7dc84e9fe14cc6a464f4563b014661","2003-11-13 07:59:52+00:00","Re-enabled the CD swapping code, after rewriting it a bit.

If a cluster file isn't found the resource manager will first check if it's
one of the files that it expects to find on the hard disk. If so, it's
considered a fatal error.

Otherwise it will present the user with an 'Insert CD1' or 'Insert CD2'
message, just like the original did. Unlike the original, the user will
have to press a button or click the mouse to indicate when he's done. I
don't know if we even can detect the CD automatically in any portable way.

As far as I can see, we'll need at least two separate path settings for
this to actually work: one for the HD install directory, and one or two for
the CDs. The file that are supposed to be found on the HD are only on one
of the CDs, so the amount of CD swapping would probably be unbearable
otherwise.

As a consequence, I haven't actually tried running the game from CD yet.

By the way, the old caching code has been removed completely now. All it
did was to copy the cluster file to HD for faster access. ScummVM never did
that, but so far no one has complained.

svn-id: r11273
"
"6e8d22db352434682bc337708dfbe70b0e5bf051","2003-11-13 08:17:40+00:00","Clear command text before talking.

svn-id: r11274
"
"91f422776bde2dc400561750f1774704ccce6bac","2003-11-13 08:18:05+00:00","Added another variable.

svn-id: r11275
"
"ae75f49b46b387c599d321e3e778b4387fec5abd","2003-11-13 08:18:52+00:00","Use constant for pinnacle room number.

svn-id: r11276
"
"35cdf26ba618325055cfe56bd8937472313d5c6d","2003-11-13 09:30:49+00:00","fix some bugs :
- grayed panel disappearing during cutaway
- canceling joe walk before switching to another room

svn-id: r11277
"
"f6a9259ab3ae4ca268a32d6c84640295ece449af","2003-11-13 09:32:31+00:00","update

svn-id: r11278
"
"d655603005782469441b358ec538b5a5fcbce9e7","2003-11-13 09:51:49+00:00","Small talk fixes.
There is some bug with the body action.

svn-id: r11279
"
"3a51c5b702e4bdb43552c13c7cf55a7a6f334010","2003-11-13 10:44:31+00:00","fix amazon/shower issue outside temple

svn-id: r11280
"
"313a912af22d03112919f967d4a00d7b086ee65e","2003-11-13 10:51:02+00:00","*** empty log message ***

svn-id: r11281
"
"428ebd65685d6b80800c467ab3d3f0445e4793e7","2003-11-13 11:47:04+00:00","Just debug messages and comment stuff

svn-id: r11282
"
"eae52af55985b96beadb68f09101350f98f1f694","2003-11-13 12:17:53+00:00","Fix crashing demos: the demos have no song parameter in cutaway animations.

svn-id: r11283
"
"df34f99ef921a91672e8ce8b81e611262ce0839f","2003-11-13 12:27:48+00:00","Fix needed for demos too.

svn-id: r11284
"
"892492022f7d9ac31b3daf532ed8f0d5e12d9e54","2003-11-13 12:39:37+00:00","According to the original source code, the journal has a different ID in
the demos, but when actually running the demos I get a banana instead of
a journal... so let's use the same ID as in the real game.

svn-id: r11285
"
"2f6a249970c7fad3e80b2d48425a21155ee7dbbf","2003-11-13 14:10:15+00:00","fix 'Skip handing over the comic to Joe' issue

svn-id: r11286
"
"ef1595b2a9e6bab5e2f5caeacd1264b1bca07a6d","2003-11-13 16:17:11+00:00","fix a problem in talk/command interaction (maybe that also fix the floda receptionist crash...)

svn-id: r11287
"
"2d3f4ef8311946af98db30d61c785611466ff311","2003-11-14 00:45:44+00:00","Play all sfx now, instead of only amiga ones + some music preparation

svn-id: r11288
"
"7b9575678d7b68629d3c3046a7bfce4f4a7e7219","2003-11-14 07:41:04+00:00","update

svn-id: r11289
"
"30670deb2c4650467bfa697f14d8eb0708689468","2003-11-14 07:41:22+00:00","cleanup

svn-id: r11290
"
"e26bc1750514c48a8647df8d7e6b4647fa754a21","2003-11-14 07:41:46+00:00","Updated Broken Sword II section

svn-id: r11291
"
"f5a1e9e7bb6ad86870895691b913b3f7102448f1","2003-11-14 08:06:58+00:00","update imuse digital

svn-id: r11292
"
"0c6eabe4a3def06f74a5e77421eda42e0c183b8e","2003-11-14 10:19:28+00:00","Kanji support only seems to work in scumm5 games

svn-id: r11293
"
"2658021292926056029e993b308c16c2b4afadbc","2003-11-14 10:55:24+00:00","Fixed regression introduced in revision 1.206 that broke parameter handling
in o5_matrixOps(). This fixes bug #841885.

svn-id: r11294
"
"183b82262954055c9ace945cb055965261a9793d","2003-11-14 11:26:18+00:00","Another try at zak copy protection bypass.

svn-id: r11295
"
"730fd27a19315234166dfb1dec324d433b1ffef3","2003-11-14 14:35:52+00:00","rewitten fullscreen/panel switching code

svn-id: r11296
"
"2312111a3a5519c2c4d36733c204e85b4f4b5557","2003-11-14 16:16:55+00:00","fix 'wrong background when talking to Faye inside the plane' issue

svn-id: r11297
"
"aaa5631a9963b02a96d5f82187465433c6b2dd13","2003-11-15 09:38:00+00:00","Mostly cleanup. Also prevented what would probably have been an infinite
loop if ScummVM failed to find a file in the demo. (Now it should error out
instead, which is marginally preferable.)

svn-id: r11298
"
"308b5de8a67295418f3d870fb69083e60cc2b3f5","2003-11-15 15:44:50+00:00","fix some bugs :
- right-clicking on inventory item doesn't execute default action
- unapplied room light level when Joe enters a room
- updated comment in roomDisplay on palette fading problem
- during dialogue, invalid mouse-overs (added enum for joeWalk flag too)

preparing Journal stuff :
- add a (almost useless) useJournal method to Logic
- removed useless code in Graphics, as it should (and could) be easily re-written in a more OO way

svn-id: r11299
"
"952f11fabc2aa6698b5c886a344a4e547a7e3a89","2003-11-15 15:55:43+00:00","forget to update this

svn-id: r11300
"
"4f97603c9c75e6796479b85d1198da844dc0ce05","2003-11-15 20:04:59+00:00","Correctly set hasTalkedTo.

svn-id: r11301
"
"b938b63ddf4bd09db1bd1d36408a217d6d13b3f8","2003-11-15 21:16:01+00:00","- Talk clean-up
- Make it possible to quit a dialogue

svn-id: r11302
"
"f979f185af997c5f11ca57854a1874088477a898","2003-11-15 21:33:04+00:00","- Enabled missing calls to _sound->playSong, now it should *really* play all SFX
- Moved sound/music related toggle variables to Sound class
- Changed 'Couldn't find file..' warning() to debug(7, ..)

svn-id: r11303
"
"0a8c06f17e7d25940dfbbb0fb5ac5f6e00246775","2003-11-15 21:58:44+00:00","Play correct sound for initial talk second time we talk to someone.

svn-id: r11304
"
"aed2a56e0c008966a8d9e5ce39d3b69eb50e4029","2003-11-16 04:03:31+00:00","Patch #842988 (sev) - fix bugs in sdl-config detection

svn-id: r11305
"
"74d8b6ef2831625ac6c84082b0a345fe5e8e711c","2003-11-16 10:47:31+00:00","fix some bugs :
- Joe being unable to grab oil during carbam scene (walking bug, when dest_pt == orig_pt)
- wrong Joe facing direction when opening plane door

updated handlePinnacleRoom() comment

svn-id: r11306
"
"587f2d7177fa5b8b5c302ab23fe42fb04b0c9ae9","2003-11-16 11:17:35+00:00","fix song playafter/playbefore type issue

svn-id: r11307
"
"ab066c41e0a42320137bc6cb79d77720f932af0e","2003-11-16 14:12:53+00:00","Fixed warning

svn-id: r11308
"
"fa2b8ba8de31f5659c675b507553a2b0a1ebd841","2003-11-16 14:18:29+00:00","More cleanup. I've eliminated all the temporary global variables I've added
over the past few weeks, except for g_sword2. (Of course, this doesn't
necessarily make the code any prettier, but we can work on that later.)

svn-id: r11309
"
"643b61d729d9ea7cb78cd74c430dbfd41807ad0a","2003-11-16 17:28:26+00:00","update

svn-id: r11310
"
"bef4496b7e308b085136abd1df2cbfb7679c7dd6","2003-11-16 17:49:27+00:00","fixed warning

svn-id: r11311
"
"501c77fc7a6b6d67ecd684f3a57aaa02932dccd9","2003-11-16 18:34:33+00:00","replaced constans with names

svn-id: r11312
"
"ba50b42c36d54e5f37987ae13621d2108ae873b9","2003-11-16 19:55:04+00:00","fix 'wrong Joe position when switching from hotel basement to lobby' issue

svn-id: r11313
"
"a169876a2f450eb022fb35ad16f3546ee4003f38","2003-11-16 20:31:14+00:00","Apparently, my previous fix (joe position when switching room) causes trouble when returning from a cutaway with initialRoom != currentRoom. I added a condition, but that's not exactly like the original. Maybe one effect of the missing SETUP_ROOM call in cutaway code.

svn-id: r11314
"
"d5eddef057f1e39c2685304502a7cf2753d5bb65","2003-11-16 20:52:57+00:00","changed some shift operators to *, /

svn-id: r11315
"
"b19119e89f06227ee60f7a715b20bffb25b6b459","2003-11-16 21:26:10+00:00","ops

svn-id: r11316
"
"20672bd904a364860b6cdc172569ea2e8b0b88a6","2003-11-16 21:53:22+00:00","codec1 is not bomp codec

svn-id: r11317
"
"b5d3add003b8aa8abac1a9a3c1c06dd8690d3195","2003-11-16 23:35:00+00:00","fix compilation on big endian systems

svn-id: r11318
"
"a15a065cba1fcb421efa9983a076e6e2c6df6655","2003-11-16 23:53:00+00:00","whitespace

svn-id: r11319
"
"f0f0b0143b2e2d5fc4ac24681534d153a33ab132","2003-11-17 09:19:36+00:00","fix 'chasing car disappearing for a frame' issue

svn-id: r11320
"
"f15f8d29bf92fbbcd1c25004671cc9a1f3490d84","2003-11-17 10:18:57+00:00","Added note about BS2 'pyramid bug'.

svn-id: r11321
"
"eed9a5d9ce1b0ee65f37a54d25b1fa0e582c7ecc","2003-11-17 13:31:00+00:00","restart person animations at the end of a cutaway (this enables Sparky to animate again after giving Joe his file)

svn-id: r11322
"
"8272b46b12bb6a7dd101a9801b099d210faeef89","2003-11-17 18:59:26+00:00","added music hacks for cmi demo, please test it

svn-id: r11323
"
"25414d0f2ddf0999dffb68186e2429b2354d2431","2003-11-17 19:07:45+00:00","added comi and dig demo

svn-id: r11324
"
"1b77e5c41f6a5d7f45deac6f308b8841e8c40b24","2003-11-17 19:55:17+00:00","fix some demo-related bugs :
- lola disappearing under the shower
- wrong frame used when Joe uses the sheet rope (changed some conditions to match the ones in the original source)

the english demo versions (PCGames & normal) seem now to be completable without any graphical glitches ; only the sound/music and 'end message' are missing

svn-id: r11325
"
"185395ca36af5851d6b59b00ab70ad5a74d32664","2003-11-17 21:16:43+00:00","replaced demo GIDs wth GF_DEMO

svn-id: r11326
"
"798ffd694b90dc37f8b10e7d5c8b1780c1dab958","2003-11-17 21:33:25+00:00","fixed 'if' at load nut smush files for comi

svn-id: r11327
"
"a79b7af3e17d7031eea4d2040f883cf618f71976","2003-11-17 21:43:09+00:00","ft pc demo don't need nut file in smush

svn-id: r11328
"
"5334ce49a884158c4f228f94a4a8fd05bf9eab12","2003-11-17 22:21:59+00:00","added voice support in dig demo

svn-id: r11329
"
"3ec24507ca70a925c2063ae87e5e9e41d8648e4f","2003-11-17 22:52:21+00:00","added voice support for mac dig demo

svn-id: r11330
"
"c830c0b21c973c06821f98c052f9133adda648e6","2003-11-18 00:35:04+00:00","added music support for dig demo

svn-id: r11331
"
"71a658f28d6c6de1a66158fc176329f8b33fabd1","2003-11-18 00:48:17+00:00","Music correction for dig demo

svn-id: r11332
"
"6c814c4864a06281070e184dd04f81395ae4bba2","2003-11-18 00:55:40+00:00","Add extra directory checks for Macintosh versions of indy3/loom

svn-id: r11333
"
"c743ef9830deb82b3d28e4273373f6ed8a48cab7","2003-11-18 01:23:17+00:00","added experimental handle for comi demo music

svn-id: r11334
"
"632e88459b35760f97ed758d412c990d54941062","2003-11-18 01:33:41+00:00","Music correction

svn-id: r11335
"
"3ce3b33c62c5572ed482fc0df3914d8d516f613e","2003-11-18 01:57:00+00:00","COMI demos only have 3 fonts files.
Don't do CD checks for COMI demos

svn-id: r11336
"
"50506eb7b65c8c72060d63cc8c6f436df5a803bf","2003-11-18 02:05:45+00:00","added rest comi demo imuse music states

svn-id: r11337
"
"3147d75a4d30d0480395451a34c0a2887af996d4","2003-11-18 02:09:51+00:00","Missed one check

svn-id: r11338
"
"5edd70fe3e8b36c50b63495044f485c924b17ef0","2003-11-18 02:20:12+00:00","Add back full throttle pc demo target

svn-id: r11339
"
"5589cdc10cc4389ea010b1362f51b6b907bc9ded","2003-11-18 04:05:06+00:00","Fix object names in dig demo

svn-id: r11340
"
"c90d4c4e08e8946589c84a1281ca582e84946f8f","2003-11-18 05:14:18+00:00","Alter old demo check
Stop crash on exit with comi demo

svn-id: r11341
"
"50be85ac4293cc3d35655a71e02a689a0c8e8524","2003-11-18 08:17:36+00:00","The readFile() function was only used once, for creating the debugger start
menu, and wasn't even necessary there so I've removed it. That means the
tony_gsdk.cpp file is no longer necessary. Sorry Tony, but at least you
still have your own debugger command! ;-)

svn-id: r11342
"
"022facfbceddcabbf390cd2f365a0299a4311a5e","2003-11-18 08:29:01+00:00","Removed unused file.

svn-id: r11343
"
"a35ce0f5ae4766c20e5c11949a7fd89da9b05dca","2003-11-18 09:44:58+00:00","Add PC game feature flag, to match others.

svn-id: r11344
"
"151a2dcc44fd0f58d66b58c53693eac1fbf3e7f6","2003-11-18 10:16:49+00:00","revert use of GF_DEMO in Humongous games fixing several problems

svn-id: r11345
"
"7d0fcb71a893a86d4297230e6fa473e35cdaa6a0","2003-11-18 23:44:28+00:00","cleanup; fixed return/enter in ListWidget when not in editing mode

svn-id: r11346
"
"f40d0433bf544ea35dd5e3c53d70170452a8028c","2003-11-18 23:47:08+00:00","return/enter key in the launcher now starts the selected target

svn-id: r11347
"
"80e335e0c453d52c7e167df485acdeb858eb7c3f","2003-11-18 23:49:33+00:00","oops

svn-id: r11348
"
"083c3280775a0589763c109bf5241f617cc9df54","2003-11-19 18:40:53+00:00","Eliminated some more references to g_sword2. I think the only thing that
still uses it are the engine's global variables which, on the other hand,
are used *everywhere*.

I'll have to think some more about those. I guess I should take a closer
look at how the other engines handle them. (That goes for a lot of things
by the way.)

svn-id: r11349
"
"b8c0fbf06ef0624ed1e9f1a5af82b7a15165af22","2003-11-19 23:46:39+00:00","new font code (currently disabled by default), which allows using 'arbitrary' BDF fonts (via convbdf)

svn-id: r11350
"
"4d4ba9ea558dafd67e198065b8fe7b05dfc6acfa","2003-11-20 04:27:46+00:00","Ooops

svn-id: r11351
"
"5c04293c93daf1e30a0c88a0802f64f9a51a5e36","2003-11-20 09:38:54+00:00","fix 'gorilla becoming invisible' issue (this was due to the missing CLEAR_COMMAND call in SPEAK/TALK ; for now, added a Command::clear before each 'sensible' Talk::* call)

svn-id: r11352
"
"484edca7a5f88642252164023a7a627122322142","2003-11-20 09:39:29+00:00","use constants instead of plain integers for room numbers

svn-id: r11353
"
"c4882e8f881746ebf520a26ebea458fb7dd4c63a","2003-11-22 20:42:37+00:00","update

svn-id: r11354
"
"8ddc52e9b545bdbeb2f904fed7bae2c85b7c527f","2003-11-23 07:59:45+00:00","fix / hack for actor costume gfx glitches in scumm v1 games

svn-id: r11355
"
"9e176e5828d0118de1ffd152f2e2a18016356a99","2003-11-23 09:56:19+00:00","added ugly hack for maniac v1, it fix redrawing last 8 lines of gfx room layer after change room

svn-id: r11356
"
"778786d8e547796dc46feea45beb8ce1835eb19d","2003-11-23 10:08:46+00:00","Update issues

svn-id: r11357
"
"cc0da575530d0b873d6fd0c2ee125f0373a37b42","2003-11-23 10:21:24+00:00","Ooops should have left thatone

svn-id: r11358
"
"509235e176837799ee86cf58302f4f9b48c60cbb","2003-11-23 13:40:24+00:00","Added experimental (i.e. not tested) resource dumping code.

Added tentative workaround for the bug (a script bug, I think) that causes
the game to hang when examining the lift at the top of the pyramid.

And, of course, some misc. cleanup.

svn-id: r11359
"
"1fc58a5ca08fb34074d4b3f3f7a5405997dd246c","2003-11-24 07:34:07+00:00","Removed redundant information from the opcode list. I thought having the
number of parameters to a function would be useful for debugging, but that
information is already available in the script data itself.

svn-id: r11360
"
"dad1131be1f3c85ce20d657c7a34144a5cf0b134","2003-11-24 14:18:49+00:00","cleanup/update + make Display::palCustomScroll matching exactly the original source

svn-id: r11361
"
"07a9638d77503132deeddd8d36ce32cb229e7d3c","2003-11-24 19:22:52+00:00","fix 'anderson replying twice the same sentence before taking off' issue

svn-id: r11362
"
"a1e80765f58e8d8624e7e24b1fb796114605d16c","2003-11-25 07:35:52+00:00","More cleanup. Another unused file bites the dust.

svn-id: r11363
"
"5eb38cb380b244ccede544ab28557f9fed41a5e9","2003-11-25 09:05:10+00:00","cleanup

svn-id: r11364
"
"5c14fb3597c7f0e17207e8ff3197d91f8efba40a","2003-11-25 15:18:47+00:00","Removed extra bars/node stuff since it was never used. From what I
understand the idea was to allow moving objects to take up space in the
scene, thus forcing actors to move around them, or something like that.

However, the number of extra bars/nodes was always zero.

svn-id: r11365
"
"3f115ba95db995305fab02f95edb9ac3800db66e","2003-11-25 17:08:46+00:00","Removed some spurious semi-colons pointed out in patch #847464

svn-id: r11366
"
"f1a8b7841847a62a8b31d161c52eeda398620016","2003-11-25 17:14:01+00:00","update

svn-id: r11367
"
"4b797730cdd5deb70334f0dafe98f8a3fda7251f","2003-11-26 08:53:53+00:00","This is how original version handled bypass.

svn-id: r11368
"
"71ddb90f84afb9cef382c852d3e34c3852603454","2003-11-26 08:58:00+00:00","Update commeny

svn-id: r11369
"
"7cbb4859070a9f764755796c341a49d53a29dc97","2003-11-26 13:53:17+00:00","preliminary journal implementation ; this should allow to save/load game state and somewhat configure sound/speech stuff

svn-id: r11370
"
"f406b1b090bdd5039f9c773fcec5659a0d2322ea","2003-11-26 17:40:57+00:00","Attempt to add standard CVS header. Let's see if this works...

svn-id: r11371
"
"a5d8cacdad4930a12e380ddaaf1b6a9108efae87","2003-11-26 17:48:07+00:00","More $Header$ stuff

svn-id: r11372
"
"871c4f8342ed4063a18a5ed4cb1f2e8b78b9dee2","2003-11-26 20:40:43+00:00","rename some methods (purely cosmetic) and fix some walking problems when closing Journal screen

svn-id: r11373
"
"ddc2e736fb02438ee31ea55177f154114bd59882","2003-11-26 20:41:54+00:00","use enum instead of define (purely cosmetic)

svn-id: r11374
"
"efcf86e68fff358440f538b36d345e0c1e2cf2b1","2003-11-26 20:43:17+00:00","no need to be mentionned 2 times

svn-id: r11375
"
"a29789950800f18f972d4b454edfd0165aae6864","2003-11-26 21:08:36+00:00","clear current command *in* Command class (not logic)

svn-id: r11376
"
"02bc1da9b43df3508bf6229ef5be5ece7a0ecaae","2003-11-26 21:26:35+00:00","GUI now has its own namespace, use it.

svn-id: r11377
"
"584760fc707eafde1119fecf4b12fe105dad3cf8","2003-11-26 21:44:58+00:00","Use standard functions (itoa => sprintf).

svn-id: r11378
"
"28ac3d653dfdf80b44b1085641480678e1f5b388","2003-11-26 21:46:29+00:00","add a wrapper for Talk::speak in Logic that clears current command

svn-id: r11379
"
"2f444d2a076bdbe7c5b805c9e923c9c75b7a630f","2003-11-26 23:03:21+00:00","fix some animation issues

svn-id: r11380
"
"e72a17c67823d088a6bf139e49f25db745f005de","2003-11-26 23:06:34+00:00","oops

svn-id: r11381
"
"6f23e2c2117925aa743155c3fd515144177efbbf","2003-11-27 07:34:19+00:00","Mostly whitespace changes, but also a few modifications to the still
experimental resource dumping code.

svn-id: r11382
"
"9c6e5ce50ad9e1e7994ceaef5e7e5be10ec996f4","2003-11-27 13:49:00+00:00","- speak correct sentence when object is not usable
- some hardcoded stuff for rooms 69 & 108
- handle CUTJOEF

svn-id: r11383
"
"9fdaf04a21259ee5fdcf2fef88078934981b6bbe","2003-11-28 07:55:25+00:00","Some formatting changes, and a few debug message corrections.

svn-id: r11384
"
"ee28076c1bc1f240c938b8c69cd9c2e89cbde4cf","2003-11-28 09:07:11+00:00","This is now part of the main PalmOS project

svn-id: r11385
"
"2ad75f5dd2a12f8e616f2ccb124d64046f9e9fc0","2003-11-28 09:12:36+00:00","New Misc Options form + HiRes MS+info icons + stack size option + updated Game Manager form

svn-id: r11386
"
"801c9adb1558d544f8030a99e2f5bba3cd1c94d8","2003-11-28 09:14:07+00:00","Resource file for Builder

svn-id: r11387
"
"95aff6d5b9486334dca5b29c887c6c539c78733f","2003-11-28 09:18:32+00:00","Correct handling of screen size and pitch

svn-id: r11388
"
"3cfeebdb1fd69939cdc97f05cf97d90674e12fe8","2003-11-28 09:20:08+00:00","Simon games are now supported

svn-id: r11389
"
"fa2abbf4556d079695d127400d8dbe74b57d7d0e","2003-11-28 09:21:45+00:00","Process new games database version

svn-id: r11390
"
"c061270e89e15bc7662f2afcad7ff9828e0bb357","2003-11-28 09:24:35+00:00","Better DIA support

svn-id: r11391
"
"474cc0ad6289e43a612feb599690d8cd3f92326d","2003-11-28 09:25:52+00:00","Save few bytes...

svn-id: r11392
"
"f15cd37bc82353c81168210ee6047aeb94ef9439","2003-11-28 09:30:46+00:00","Better DIA support, use EVENT_QUIT, reset the device if OSystem failed to quit (Simon 1 & 2)

svn-id: r11393
"
"eb7666efb38efd488dbba7d81f7e072fc2a87737","2003-11-28 09:32:02+00:00","Added Simon data

svn-id: r11394
"
"1b2bfea7101eb4eac0b5bc4e910d12d0e2396982","2003-11-28 09:33:11+00:00","Moved to another file, now used by ScummVM and Builder

svn-id: r11395
"
"abeded8ab8d6001f829f686345e990e411f0d863","2003-11-28 09:35:09+00:00","Fixed little display bug, better DIA support

svn-id: r11396
"
"56fa76c2ba0f5e8e79b0b9395fb5549bf0f2111e","2003-11-28 09:37:48+00:00","Better DIA and orientation support

svn-id: r11397
"
"4fa5882181f060a07d055c8577f40836dc35d3a2","2003-11-28 09:54:55+00:00","Builder files

svn-id: r11398
"
"adf03c85d60619b1b780bfd4688851e2b30fbf48","2003-11-28 09:57:58+00:00","Oops

svn-id: r11399
"
"461e8d19bf5ad917df239600c78a1d5bc82069b7","2003-11-28 09:59:52+00:00","Fixed list position + set focus on new entry

svn-id: r11400
"
"048e404cf12d067945f498b8480ec9a1a204774a","2003-11-28 10:00:53+00:00","New Misc Options form + stack pref option

svn-id: r11401
"
"d44942b4f57a4062bc13da9595965ccfdf14e944","2003-11-28 10:01:51+00:00","Added stack size

svn-id: r11402
"
"134ae181f4f541ff8b6949fd4bfcdd6f9f78640e","2003-11-28 10:02:59+00:00","Don't overflow the event queue

svn-id: r11403
"
"49b1fc4c850654c2c948b2425e1c8cdb1a978d44","2003-11-28 10:03:42+00:00","Fixed localtime function

svn-id: r11404
"
"defa1feb75bb04a29f327e62be02d45a539f4c17","2003-11-28 10:04:23+00:00","...

svn-id: r11405
"
"a1d778a18e94518b7c42c561786fac11f383ec81","2003-11-28 10:07:09+00:00","Cannot add mutiple files with the same name on CodeWarrior :(

svn-id: r11406
"
"9da541f6577b63638000b79569b98e3075ed920c","2003-11-28 10:08:36+00:00","This is no more needed

svn-id: r11407
"
"7d5551e50715f2eff52fb3f5ce1b6da0a07f8780","2003-11-28 10:11:04+00:00","Don't overflow the stack

svn-id: r11408
"
"651beb46accdde3593d9f82ec297e4efc7f4c38d","2003-11-28 10:11:56+00:00","Can't do this like that

svn-id: r11409
"
"c4ad4dc5560208dfed8df3cba9650a4b29d31d03","2003-11-28 10:14:36+00:00","Stack pref

svn-id: r11410
"
"49aa5e93406365d7beb739ae4c8f1480fc553d91","2003-11-28 10:23:40+00:00","New project file (include : Builder, PNO, Simon)

svn-id: r11411
"
"392af5eab9eab8be6a171e72b9082af530ebe02e","2003-11-28 15:18:14+00:00","Fixed error using NEW_FONT_CODE with PalmOS port

svn-id: r11412
"
"d7e0e4b01a490c73b66fe10272b142d84c859238","2003-11-28 15:23:13+00:00","Added font.cpp and font.h to the project

svn-id: r11413
"
"8a6b0e2e1837711d06e0ed66913f340d8d923bb3","2003-11-28 16:18:43+00:00","cleanup

svn-id: r11414
"
"54aa33310d1dbd9f04e2ede970d8e17200798000","2003-11-28 21:56:14+00:00","reuse SaveLoadChooser in main dialog -> this means the SaveLoadChooser remembers the scroll position -> improved user experience

svn-id: r11415
"
"3944eb4494b59749e88e449c8856521b2a4a3672","2003-11-28 22:08:52+00:00","cleanup

svn-id: r11416
"
"d099759279711c1afd0a646390eb85f294cba1c6","2003-11-28 22:29:56+00:00","game targets can now have a base filename different from the target name; misc tweaks

svn-id: r11417
"
"d636ee7855593a4d6342b48fa9ac13e75b231710","2003-11-29 10:12:47+00:00","var value were different in simon1dos

svn-id: r11418
"
"d98479ee5dd0b70c88c37ea2c405694bf070ea88","2003-11-29 11:56:24+00:00","cleanup; fix some memory leaks; more memory leaks remaining

svn-id: r11419
"
"493d64d91b9944cd91da6539cb41ee561ddafd92","2003-11-29 12:10:23+00:00","cleanup / added Engine::getGameDataPath()

svn-id: r11420
"
"f00cd05b331cb5db1dfee140608d6189385950a4","2003-11-29 12:11:01+00:00","moved Audio CD (emulation) code from scumm/sound.cpp to sound/, so that it may be reused by other engines in the future

svn-id: r11421
"
"e68ac71155bf775a32742335a1d8690aad17ecee","2003-11-29 13:56:33+00:00","added API to query CD playback status; renamed AudioCDManager methods

svn-id: r11422
"
"eeb3cdebf10a85364f47b2df3bb59c3c212d9d91","2003-11-29 13:58:17+00:00","new savegame version: store actor pan data; store Audio CD playback status (and when loading, resume playing of tracks which are meant to loop forever)

svn-id: r11423
"
"6882f2886ad837433305c3da8c4225a23e76531d","2003-11-29 13:59:33+00:00","startCDTimer() is already being invoked by pauseSounds(false)

svn-id: r11424
"
"747a6347965ca2f3536f3a2eb1d694ae3416983b","2003-11-29 14:36:55+00:00","cleanup

svn-id: r11425
"
"9cca17b3beb681ac482e96331e7444ae851d1741","2003-11-29 14:37:47+00:00","don't see why we shouldn't just always call Sound::stopAllSounds just before loading... if anybody knows more, if you observe regressions, please document this in the source code (and/or file bug reports)

svn-id: r11426
"
"67c75a35c66a2535b6f9e9fcc89f0e1aa5fef49b","2003-11-29 17:05:30+00:00","Clarified comment about the elevator script bug and added a workaround for
the dreaded Pyramid Bug.

svn-id: r11427
"
"1cf5c121263d445d9db2162654e1602531df0932","2003-11-29 17:06:29+00:00","Remove TODO item about BS2 pyramid bug. It should be fixed now.

svn-id: r11428
"
"a8036ed17ba4ee4ae4a1fd0d35501360a58955a0","2003-11-29 19:48:53+00:00","update

svn-id: r11429
"
"f1d0219067789780f570feb097ce1c5af338bacc","2003-11-29 19:49:49+00:00","fixed warning

svn-id: r11430
"
"bbc03e144c7c86f44986e753e791769dee93e894","2003-11-29 23:40:21+00:00","cleanup

svn-id: r11431
"
"81f210544a1996f33905f6b8840d218239529cfb","2003-11-30 00:06:27+00:00","cleanup

svn-id: r11432
"
"3612dc54dcc1fbf9f863127bd919c7921fe11988","2003-11-30 00:35:12+00:00","cleanup; added (currently commented out) zlib/gzip code

svn-id: r11433
"
"93f58abde7e9fe9b28a336db609c884afd0fec6a","2003-11-30 00:41:19+00:00","oops forgot to commit this one, it seems

svn-id: r11434
"
"5120eddb540a2812f1a8be7184fef3a78387781d","2003-11-30 00:43:01+00:00","zlib compression works *very* well, factor 3-6 in my test cases. Personally I'd make zlib support the default...

svn-id: r11435
"
"c40c44dd879307efd6e24b4858b90e67c91865b0","2003-11-30 00:52:35+00:00","Enabled zlib support

svn-id: r11436
"
"785da90067a6b7689804e5573b2b392ee953014a","2003-11-30 00:59:09+00:00","Leave it as option

svn-id: r11437
"
"577aad5eddf9bf9c3df67a92da1f34446e20d6e5","2003-11-30 20:41:02+00:00","cleanup

svn-id: r11438
"
"242efda7fb8260fbd2120e2e7fc22de2b12bb371","2003-12-01 00:45:16+00:00","cleanup

svn-id: r11439
"
"28f9c34f8c111cf3841b50feb88669ce29e73076","2003-12-01 00:54:50+00:00","Might as well combine these two.

svn-id: r11440
"
"82a6f9704703f7525129364e89b80cf7dc41ea64","2003-12-01 05:22:04+00:00","cleanup

svn-id: r11441
"
"a008022b30e3585231cd316251b9fc39625e40f3","2003-12-01 05:47:57+00:00","Missed some

svn-id: r11442
"
"7c9d46765beeaed45971b98f5df0193688e37eab","2003-12-01 07:47:54+00:00","Removed some unnecessary / commented out code, and initialized the debug
console a bit earlier so that error messages about missing files will be
more obvious to the user. (If an error happens that early, some of the
debugger commands will cause ScummVM to crash. I might look into that
later.)

svn-id: r11443
"
"81a5d0e1f32b8084bf0773d0fbfb9579d2bff399","2003-12-01 09:53:03+00:00","Add correct values for F1 - F3 text speed keys in simon1

svn-id: r11444
"
"72eb8ccb8934b0032a3f53a9ffc0e21bce4bdf23","2003-12-01 09:58:55+00:00","Patch #847464: Remove spurious semicolons

svn-id: r11445
"
"b39836306028af7454fc545987f952934613217e","2003-12-01 10:23:51+00:00","Simon2 background sfx can be disabled in scripts

svn-id: r11446
"
"b0037e29e24eca4a75891522612318acaae6d3c5","2003-12-01 10:24:02+00:00","Removed semi-colon after REGISTER_PLUGIN() to be consistent with the other
game engines.

svn-id: r11447
"
"53b2f75215b6e5fc2ac1b2b762ac3d8374a4f216","2003-12-01 12:18:57+00:00","Revert last change, ScummVM handles it better than original.

svn-id: r11448
"
"3befded40237972e846f5b0d6fa67797133e714e","2003-12-01 20:48:41+00:00","cleanup header includes

svn-id: r11449
"
"e04d8576cbd698fc24ac3e5761c9f454f72112ca","2003-12-01 21:16:18+00:00","explicitly specify namespace in g_gui helper macro

svn-id: r11450
"
"57efe0438f25e57d58498ab225b6025033218a59","2003-12-01 22:16:29+00:00","don't do a global import of namespace GUI

svn-id: r11451
"
"03e70632b2511eeb760bc8c2e9e5f0202c795233","2003-12-01 22:16:31+00:00","fix bug in command code, letting a failed command being executed

svn-id: r11452
"
"1706fefb6e4d54bf18eda47cb07840e47ea229de","2003-12-01 22:36:39+00:00","cleanup

svn-id: r11453
"
"528fd63a0754e06b3f5c52159d5423ff96a501b5","2003-12-02 05:12:49+00:00","Only used in simon1win

svn-id: r11454
"
"bde45d4335063b12aa5c3de6aaf4951c031662a6","2003-12-02 05:53:32+00:00","This screen update causes delay and doesn't seem to be required.
Remove old debug message

svn-id: r11455
"
"13db38223cf2d9eb9292d2bda1fcf6b8df13552a","2003-12-02 06:23:05+00:00","Cleanup

svn-id: r11456
"
"af02beefd950eeb931fab78b91fe9c518d55c476","2003-12-02 07:41:04+00:00","cleanup

svn-id: r11457
"
"c793e4c9df8a241869f94cc50deca24685597298","2003-12-02 08:09:14+00:00","Switch nosubtitles option to subtitles, to match others and help with Simon2 issue.

svn-id: r11458
"
"3774c09dbef62cc24e17586197c5c69701003795","2003-12-02 08:12:39+00:00","Backwards compatbility

svn-id: r11459
"
"dad0d55042d42b81a4a2a26d074999d25f5c2737","2003-12-02 08:26:32+00:00","Ooops

svn-id: r11460
"
"3cb4a1180e1724f0f17f85236e28eae720b3e87f","2003-12-02 08:28:54+00:00","Cleanup

svn-id: r11461
"
"d77b11aef6e514591e22196ac1cc63c91eb12eb2","2003-12-02 08:43:54+00:00","Add back some missing code

svn-id: r11462
"
"e8ad4cc00937dee56e722743be803c98ec6f7217","2003-12-02 09:53:26+00:00","Coorect class name

svn-id: r11463
"
"6d3c760ffdaacbc9657e09f26b3ca78223ffa996","2003-12-02 10:25:12+00:00","Since all other engines have been changed to use 'subtitles' instead of
'nosubtitles', let's change this one as well. Of course, it does break
compatibility with old config files, but I guess the worst that can happen
is that we have an unused 'nosubtitles' line in addition to the used
'subtitles' line...

svn-id: r11464
"
"567994eec391fefa7030a5d94736781d301b02f7","2003-12-02 11:01:51+00:00","No more needed

svn-id: r11465
"
"3386c10e4dcf1f29255ac46d9edbb624433e4832","2003-12-02 11:03:20+00:00","Unneeded stuffs

svn-id: r11466
"
"b49cda48e35de9541d61beb3e955bfdd80419d7d","2003-12-02 11:04:34+00:00","Updated with new data from simon.cpp

svn-id: r11467
"
"08422d2fe51a461991d3613221117a1ffd6a7c87","2003-12-02 11:08:07+00:00","Switch nosubtitles option to subtitles

svn-id: r11468
"
"d903721eb5098aea185e5f3314f85c24dac343aa","2003-12-02 11:12:03+00:00","Make this function global

svn-id: r11469
"
"3c3ca2b2bdde8491ffd4992b7675f071f50926c6","2003-12-02 11:12:52+00:00","Removed unneeded stuffs

svn-id: r11470
"
"182285508d04ac581bd5255c8df17db6a30b6ef0","2003-12-02 11:14:17+00:00","Added memory auto-configuration

svn-id: r11471
"
"cf682ed8f7fb4325897b1692f40bbb9d073ed70e","2003-12-02 11:17:21+00:00","Added memory auto-configuration on PalmOS for better speed and compatibility

svn-id: r11472
"
"f3f1c3b7cee8b957b838d2cdc2ff65188753de7e","2003-12-02 11:19:31+00:00","Switch nosubtitles option to subtitles

svn-id: r11473
"
"dfec3bba7f99864183eba534eb26dfe85ca93208","2003-12-02 11:22:30+00:00","No more needed

svn-id: r11474
"
"c80767271b0c9592d2cb6013a3521e75a700566f","2003-12-02 11:24:13+00:00","Updated with new vorbis/mp3 files

svn-id: r11475
"
"4f418c3aa99e8ccea3273300073a9dfecb21ca7f","2003-12-02 13:10:41+00:00","Typo

svn-id: r11476
"
"25921847885051963adb4f0f1c81e9f7dfd52def","2003-12-02 16:49:56+00:00","- some Command code refactoring (removed unused code, splitted some methods)
- game is now playable up to floda basement (at least)

svn-id: r11477
"
"a15fa0302aa935b28e6b4b9dcad43fb2f3e631ac","2003-12-02 19:58:31+00:00","fix a potiental journal issue

svn-id: r11478
"
"d78ccc55a481d4d363f396156ae3edd4db8330f9","2003-12-03 01:04:54+00:00","Change Broken Sword 2 default to no subtitles
To match original version and other games.

svn-id: r11479
"
"1799a7f307937be3b771bb7d8cc572941194e102","2003-12-03 05:52:21+00:00","simon1cd32 regression

svn-id: r11480
"
"6f567b480f4db5b1ac1092ad070d7f03228b9de8","2003-12-03 06:34:45+00:00","Add fix for annoying costume warning in FT, part of patch #853099

svn-id: r11481
"
"910c4ccb141e19aaba1a47b420df7e71ea8e90b9","2003-12-03 09:12:58+00:00","Added compressed speech / music clusters as a BS2 item. I've started
looking into compressing the files, but I don't have anything that's ready
to commit yet.

svn-id: r11482
"
"3ccce8da350c2da34afdaece33e17fa741334998","2003-12-03 10:32:12+00:00","new room/gamestate constants

svn-id: r11483
"
"402b700a133b151ec88b343134947aaad0ed81e1","2003-12-03 10:33:01+00:00","removed unused stuff

svn-id: r11484
"
"07ba3cfabcb1f1496845b0b962d6b016c2dab179","2003-12-03 10:33:14+00:00","fix problem in opening/closing doors

svn-id: r11485
"
"894360920bc5596570eedc039de0116513d26225","2003-12-03 13:00:56+00:00","fix klunk scene glitches

svn-id: r11486
"
"5bfbb9e954076cc9782121f4e8a490de9ce3019d","2003-12-03 14:09:37+00:00","remaining stuff for Azura/Floda

svn-id: r11487
"
"d8d369a086cbd2e3c13ccdeb045a54978a6705b3","2003-12-03 14:51:16+00:00","fix walking person issue (noticeable when Azura is escaping from Floda)

svn-id: r11488
"
"62e1d88fef59fd9e1fc658a0ef99799a62c232d0","2003-12-03 14:52:05+00:00","whitespaces/tab

svn-id: r11489
"
"77770ea7fe2f94527060d264d4950e5d05e1247f","2003-12-03 15:14:30+00:00","be consistent with animateJoe

svn-id: r11490
"
"b6c01b8c739575f80a45b843bf9292326c52e502","2003-12-03 20:53:59+00:00","- hard coded cutaway stuff for boat room
- hard coded cutaway and talk oracle stuff
- scale Joe during cutaway when changing rooms
- special moves 20 & 24 (temple room 100)
- special move 15 (valley room 67)
- special move 26 (c69g.CUT)
- (game is now completable up to final fight scene)

svn-id: r11491
"
"8c330b712398f80cf69b1e544fb5ff6fd6f437e3","2003-12-04 10:54:26+00:00","in original DOS version, characters *can* walk in last room

svn-id: r11492
"
"5b83ecbf671b4c55b104ff073f7608acfc35c360","2003-12-04 10:54:43+00:00","special moves 14, 25, 27, 29, 30, 33

svn-id: r11493
"
"498260f06377bab7c942eaee60c4b69c91da0e81","2003-12-04 13:21:26+00:00","cleanup

svn-id: r11494
"
"98b5f371430439e9f072adf3b13b6834c21cc658","2003-12-04 13:21:43+00:00","handle 'talking heads' slighlty differently

svn-id: r11495
"
"83bf2e25932ca991af8a190bbd4c6d7a8b410107","2003-12-05 00:02:01+00:00","Add keyboard support for derby in FT and cannon battle in COMI, patch #853099

svn-id: r11496
"
"76f92b41ef772342f48fdac316c4b34cea3d08bb","2003-12-05 00:45:28+00:00","Update news

svn-id: r11497
"
"b23801d87342e4172cba4027e6c003b823123230","2003-12-05 05:57:28+00:00","Amiga Zak McKracken sound update from tsuteiuQ

svn-id: r11498
"
"d807976c8cde18c8a8fb46f93f7b3ded2332ec7d","2003-12-05 08:27:29+00:00","Project files update

svn-id: r11499
"
"d671496567535350dc4886189d6319b5b7977f30","2003-12-05 08:33:55+00:00","For those who like new bug^H^H^H development environments

svn-id: r11500
"
"e19909d3e394682b1610a9b0326b449a7f288099","2003-12-05 13:56:07+00:00","cleanup, s/abs/ABS/g

svn-id: r11501
"
"472045d578bdd4488da0aec54516881f8616ec7b","2003-12-05 20:16:32+00:00","- fix Joe scaling issue when switching from room 51 to 47 (temple)
- add remaining fadein() call in cutaway, pinnacle room is ok now
- add 2 macros to 'clarify' some room tests
- some cleanup

svn-id: r11502
"
"60b9538104090c88a352bb6d8ff090350d13f2b7","2003-12-05 23:14:01+00:00","Define HAS_ALTIVEC on OS X (should do a proper test here, in case we are run on Darwin/x86, but for now I am lazy)

svn-id: r11503
"
"a12b6606cc5c0efd0d2b0f8750c0e1c330ed7a70","2003-12-05 23:27:01+00:00","rewrote hq2x/hq3x code so that we can compile both the altivec and plain C version; on OSX, this will only use the altivec code if altivec is actually present

svn-id: r11504
"
"0b0580e242e0509cd5f9b26df774c8f8a23ebd9d","2003-12-06 02:08:51+00:00","Cleanup

svn-id: r11505
"
"e600b3081f7393a9ca7669763b7931b9181f1fd9","2003-12-06 04:18:48+00:00","This checks should be simon1win only, just to be on safe side.

svn-id: r11506
"
"578d2efa773267b52768f8d8fed8020df0a194e3","2003-12-06 05:47:24+00:00","Preliminary support for FT INSANE is added. To enable the code define
INSANE in config.h. But only non-interactive parts work and there is no
insane scene skip. Only one choice during those scenes is Ctrl+X.

svn-id: r11507
"
"5973fc01a9a3495f5198c0512bff10432f6c89cc","2003-12-06 06:15:23+00:00","Fixed potential bug in field separation shell variable. For some reason
tab character got substituted by spaces.

svn-id: r11508
"
"1e90cfa50830558b5f1c5b61bcfd917c6c43ff9c","2003-12-06 06:53:14+00:00","Make FT DOS demo happy with INSANE precompiled.
To escape within INSANE scene only option is to exit scummvm with Alt+X.

svn-id: r11509
"
"5e1cc1969bedd4d7522a73abaa5f5b314f16136b","2003-12-06 07:02:43+00:00","oops.

svn-id: r11510
"
"aafbd0dc2668fbc8931f81e701b396914c191dd5","2003-12-06 07:14:03+00:00","Added myself.

svn-id: r11511
"
"ac294dc96c16952c15099ca99942fb24b2abb289","2003-12-06 07:30:22+00:00","change sev's line from a tab to spaces, move erik up to engine section, add sword2 to engine credits

svn-id: r11512
"
"e640759ecd3a7c8ca9cde5eee388581d1a265f8d","2003-12-06 07:54:29+00:00","update

svn-id: r11513
"
"256ce60b1bde3bc6e1d54999245ec769fa145e61","2003-12-06 07:55:47+00:00","update

svn-id: r11514
"
"4a42abd5f983d5281803952e6912760d95fba436","2003-12-06 08:14:30+00:00","cleanup

svn-id: r11515
"
"2cf7ff1e4d4a2ee3e007ece1c015eef860ffb3c8","2003-12-06 08:36:07+00:00","cleanup

svn-id: r11516
"
"4c5072b6b96d5731390b1ac7af77aa5508f7d30f","2003-12-06 08:39:37+00:00","fix alloc/free

svn-id: r11517
"
"e943ee3785517462e12baf732a35d34892c1852d","2003-12-06 13:12:52+00:00","make Joe say something when trying to speak to a mute object/person

svn-id: r11518
"
"31411c9fc23f6c03c472dce627297bf3b161a652","2003-12-06 13:13:13+00:00","minor cleanup, reuse some data from intervie.exe

svn-id: r11519
"
"a17c49d9a7e1522c5f259d7e89eb15ed81f326c3","2003-12-06 13:15:17+00:00","- handle person bank number hack slighlty differently (fix it when loading, not in personSetData)
- remove some useless checks as there are no invalid bob numbers in actor data
- minor cleanups in Area

svn-id: r11520
"
"1b127480af81d0725cbeef96606fce41e4302fd4","2003-12-06 13:55:50+00:00","erik's patch for bug #854470

svn-id: r11521
"
"a189699f31d5b37a1279b927a62827f961121ca6","2003-12-06 14:17:07+00:00","Fix for bug #795937 (MI1demo: plank behind the kitchen); cleanup

svn-id: r11522
"
"c9559ef0d5262a32900140d3a36bc876e3afed2f","2003-12-06 14:19:34+00:00","Fix for bug #853874 (ZAK: Can't Give Club in 5.5 build); this may cause regressions, and/or fix other bugs. However, I believe this is the right thing (TM) to do anyway :-)

svn-id: r11523
"
"d483e58a9999afd3a0027abcc65921f5c67d337d","2003-12-06 15:59:17+00:00","regression fix (bug #855313)

svn-id: r11524
"
"4afcd1747c4c86afe0d35b6456476a57122d5743","2003-12-06 16:12:14+00:00","potential fix for bug #830106 (ugly)

svn-id: r11525
"
"671b98b0cf9267c9d5ca070e6b6f306eba6b7cae","2003-12-07 15:19:00+00:00","(temporary) fix for cutaway_41f / command_0x178 graphical glitches

svn-id: r11526
"
"2047e6c01c67cc6f82f0da9b8945f6c7a2685bdc","2003-12-08 04:16:41+00:00","First INSANE scene started to show up things. Actually you can control
Ben by keyboard and crash. Video looping is still buggy and may crash
scummvm. Also whole scene looping is disabled and you get forwarded to
next scene.

Graphics glitches, Ben has just corpse and opponent is not drawn at all.

Smush player was extended with video seeking methods, although incomplete.

svn-id: r11527
"
"5c539040e426e915a6834d72f8521376a2e965ac","2003-12-08 07:30:22+00:00","Shut up Valgrind warnings.

svn-id: r11528
"
"aa6fee4bbd00363f73fa135df09d360a4f378246","2003-12-08 08:47:21+00:00","fixed warnings

svn-id: r11529
"
"fba90701985a230fdf2e0d94bd02a3e630b1142d","2003-12-08 16:14:00+00:00","Version bump, small NEWS tweakage

svn-id: r11530
"
"50f497b0f404fc44c75db86070d476838c906834","2003-12-08 23:21:04+00:00","Now Ben is visible, but kicking animation because of some bug is not visible
at speed = +3.

To reach first insane scene press ESC during non-interactive scene to skip
seek error.

svn-id: r11531
"
"bb560c4a875328edbd00533c9964489ff5880f4c","2003-12-09 01:44:46+00:00","Changed path from bs2 to sword2

svn-id: r11532
"
"9a0bbbeee18744b5e43ad87e1b0caef35f41bb0d","2003-12-09 01:45:42+00:00","Added new FOTAQ modules

svn-id: r11533
"
"bcbd29aa4c38b3ce2ebdba0bf7dd74d230068a71","2003-12-09 01:46:18+00:00","Added new modules

svn-id: r11534
"
"f8192d9ce556c7823af90a3e85f12a59014963d1","2003-12-09 03:33:30+00:00","Add simon update

svn-id: r11535
"
"1a0134aba30f03ea23add94e91d350c630df2070","2003-12-09 04:08:31+00:00","Add preliminary support for Mac FT demo insane.

svn-id: r11536
"
"c8fb34d02117297e075acc99af779bf224c6956c","2003-12-09 05:09:48+00:00","Fixed bug with Ben's animation disappearing at max horizontal speed.

svn-id: r11537
"
"7d8839ab527987478c41891617b54e226ff6f1d7","2003-12-09 08:09:18+00:00","I've played through the whole game, and I've scanned through the cluster
files with a primitive and incomplete tool to present resource information.
(It may evolve into something useful and/or presentable later. Much later.)

I've found no evidence whatsoever that the mysterious blend & 0x02 case is
ever used. Since the code makes no sense to me, I've removed it.

svn-id: r11538
"
"9e1cac4caa71128a87fe2800cfec650a65659916","2003-12-09 08:55:32+00:00","Changed notation involving more than one set of double colons ::
MSVC6 can't handle such notation, so simplification or
notation tricks must be employed to keep it happy.

svn-id: r11539
"
"e6d176bc67ad78046ff345870e3c69a586252ee4","2003-12-09 10:19:27+00:00","Added support for Simon 2's native MT-32 music tracks

svn-id: r11540
"
"8edcf3f1caf7dd40b2f89271ea4fcaf766896acd","2003-12-09 23:01:36+00:00","small tweak/fix (?)

svn-id: r11541
"
"c67d2b5f553f776b449a9e1545daa31a227dbfc6","2003-12-09 23:17:04+00:00","we haven't agreed on using zlib compressed savegames by default yet. Do NOT enable it for now!

svn-id: r11542
"
"0f7f124de231b465e00a97b1f1a68a11ccafd7d5","2003-12-10 00:12:20+00:00","slightly altered singleton implemention, might help MSVC6, or might screw it even more :-)

svn-id: r11543
"
"bb760a5b735944794ae2d14f5b839bd98b290ca4","2003-12-10 00:15:20+00:00","detect zlib in configure script; use it by default, if available

svn-id: r11544
"
"2347409dd13a25f977cf639987ddf17d0604bbd6","2003-12-10 00:54:53+00:00","Add puase option for simon games.

svn-id: r11545
"
"ac237909ffcac60a9d4f91277521146af1d75d8a","2003-12-10 01:05:21+00:00","Pause music and background sfx. too

svn-id: r11546
"
"059e672e7f295f4ff32a7def7c9f53eae050565a","2003-12-10 01:13:31+00:00","Add simon pause key

svn-id: r11547
"
"2ea6f815aad86de6a6ab92f31ab1761916eedfd1","2003-12-10 06:02:14+00:00","o Cleanup
o Enemies' bikes started to show

svn-id: r11548
"
"f89739b8f3243b5bdadb1ecaf3dabb8b6091cc30","2003-12-10 07:59:45+00:00","Cleaned up keyboard handling. The old code would misinterpret some keys,
e.g. it's 'C' or 'c' to display the credits, not some random function key.

svn-id: r11549
"
"a2221c88e9f993cad4493ad8cd521ede581c266d","2003-12-10 08:01:58+00:00","Sprite surfaces (as opposed to standard sprites) are always display
aligned, never flipped and never RLE16-compressed. Simplified the code
accordingly. (Displaying the restore dialog when specifying an unused save
slot from the command-line works again now.)

Plus some minor cleanups.

svn-id: r11550
"
"7153d77024e7b0091046aa27f02864824c694e60","2003-12-10 13:14:50+00:00","Restored some relevant information to a comment that was removed by my
previous commit.

svn-id: r11551
"
"d947a6ea778e6d1544ba905d89c84fb2d4b8dc9d","2003-12-10 14:19:04+00:00","cleanup, split Cutaway::specialMove() into several methods ; this should allow us minor changes in order to support different/other special moves (demo, interview)

svn-id: r11552
"
"ed2baf283e7181799f6e27176c0cb02851e4897c","2003-12-10 15:36:44+00:00","- moved QueenEngine::roomChanged to Logic and enabled call from Cutaway code (this fixes the 2 irons bars being displayed at the end of c39a.cut)
- moved my 'panel being hidden after the head room display' fix
- fix problem in joeCutFacing / joeFacing in cutaway code

svn-id: r11553
"
"191e7ae6211a212ffcd6375faaae4cbc1361e161","2003-12-10 15:37:57+00:00","oops

svn-id: r11554
"
"a53d2c99f560cbc3bfb6b5637b7c3946976c5858","2003-12-10 20:13:25+00:00","get rid of GameConfig, use ConfigurationManager

svn-id: r11555
"
"0667bd69cd6d9d3ee05e0d21a61c77f36ef94e10","2003-12-10 21:36:56+00:00","oops

svn-id: r11556
"
"425126fa61f238802bd7a55572770b9430ca92c5","2003-12-10 23:44:25+00:00","Removed #include 'midiparser.h'. It was only there for the early Humongeous XMIDI hacks.

svn-id: r11557
"
"c95e9d12a2dab1e49eaf8febaf063a76c0fc1d64","2003-12-10 23:52:29+00:00","Endian-safe read-and-advance helper functions are
now based on the READ_LE_* and READ_BE_* macros.
Very slight performance gain, woo hoo.

svn-id: r11558
"
"f82a23771c95a7e70b4bc85c48d515853e289516","2003-12-11 00:51:51+00:00","Expanded the Doxygen docs for the MidiParser class.
Painfully detailed in its description of how to
get a MidiParser object hooked up and running.

Hope this helps ya, Joost! ;)

svn-id: r11559
"
"44eadc398c175c1f167cecaadd7349b46146021a","2003-12-11 02:09:18+00:00","Add some WIP quick load/save keys code for simon 1/2. currently disabled.

svn-id: r11560
"
"c3f23cbd4873b8bed93636c9b60b3de738b74618","2003-12-11 02:13:42+00:00","Oops

svn-id: r11561
"
"5154790733fcca6a9fd0209c3174a4d8640c142b","2003-12-11 02:43:28+00:00","Fix and enabble quick load/save keys in simon 1/2.

svn-id: r11562
"
"46f00d079c63d58b4d59e922bfdd3049a4ec6caa","2003-12-11 03:23:07+00:00","Remove comment

svn-id: r11563
"
"324da16de276806239697c2846b862e18567da49","2003-12-11 03:50:25+00:00","Add dialog for quick load/save in simon1/2.

svn-id: r11564
"
"064dad5c0c48bb02226b2dd41bbb93698a786abc","2003-12-11 03:51:32+00:00","An 'Cancel' button is pointless for errors.

svn-id: r11565
"
"879486e377b4677da71186b57881afe895d3dccd","2003-12-11 03:54:33+00:00","Update readme

svn-id: r11566
"
"8c1cf30b6bbe6c6a26c900887c7eeb350af7091f","2003-12-11 04:41:42+00:00","Add About option

svn-id: r11567
"
"1e90d540eb55387dcac94293053c6917b11de74e","2003-12-11 05:20:01+00:00","Correct filename

svn-id: r11568
"
"e11c741e825883f0771bef889fb73c03b9c47d32","2003-12-11 05:32:27+00:00","Drop OpenGL backend, since it has no maintainer and is too buggy.

svn-id: r11569
"
"2ef887fd445b5226da99bf2a0e1917d02806325c","2003-12-11 05:36:07+00:00","Missed one spot.

svn-id: r11570
"
"3d6461d30f9ec9a1be822a426304360b372f650a","2003-12-11 06:08:43+00:00","Add option to enable copy protection in SCUMM games, which ScummVM disable it by default.

svn-id: r11571
"
"110d0b08da7228558ee393c9f00dcb5e09634d2e","2003-12-11 06:18:35+00:00","Add new option to readme

svn-id: r11572
"
"813e8fbdab4af97e484a710e2a9abdb4054e47b1","2003-12-11 08:18:51+00:00","Emergency bugfixes:

Initialise _cd.playing to false. Otherwise ScummVM may create a savegame
where a CD track appears to be playing, but everything about it is
undefined, causing ScummVM to crash when loading it.

Initialise _track_info[] with NULLs, otherwise ScummVM crashes for me when
I start the CD version of MI1.

There's probably a lot more that *should* be properly initialised, but this
seems to take care of the most serious issues, and is all I have the time
to do now anyway.

svn-id: r11573
"
"bc00922990e6f51c43d0bc396e1d2841fa017424","2003-12-11 09:14:10+00:00","Change another debug define to key
Dump options should now work on non-win32

svn-id: r11574
"
"898d5f2647084c65cd0df1bc50e661031a8bf87d","2003-12-11 09:29:56+00:00","No need for buffers that large.

svn-id: r11575
"
"3c9c652f13912020fd3d0c90cd2820ae18508f16","2003-12-11 09:56:21+00:00","fix compilation on non-win32 systems

svn-id: r11576
"
"ae338068025ec17d952af996267a6cad59b5187e","2003-12-11 10:03:35+00:00","centralize all State related stuff

svn-id: r11577
"
"507a7057c1d5db20a1a6f44b6cb3dd611c8dec71","2003-12-11 10:05:46+00:00","Ooops

svn-id: r11578
"
"577ea51c1070fdbb0759b9ecf6a48747b523a017","2003-12-11 10:24:27+00:00","cleanup

svn-id: r11579
"
"232fe2889a02ca87ba988da049b00247a1617a25","2003-12-11 11:07:43+00:00","Remove comment------

svn-id: r11580
"
"9f465dab04138478ab143a3d7ab46550a701f06e","2003-12-11 13:08:36+00:00","cleanup

svn-id: r11581
"
"3174cef1273fb3ff266e8a06f3f89cdd7751855d","2003-12-11 13:26:13+00:00","merged Logic::joeGrab & Logic::joeGrabDirection and removed speed argument as it always equals 0

svn-id: r11582
"
"7c320d63de7032886f6c8022805501359ffec66e","2003-12-11 14:38:43+00:00","add config file parameter to specify the desired port when using the ALSA music driver

svn-id: r11583
"
"7cbd9a113d1d3489d96caae612a08ea20cf4af17","2003-12-11 15:05:10+00:00","Sync man page with README a bit. Remove mention of OpenGL backend in game keys.

svn-id: r11584
"
"84247d9797ecee43205a5f64c1d5f555e8c69f3d","2003-12-11 15:17:53+00:00","A few updates, mostly replacing examples that still used -n to disable subtitles.

To prevent confusion I think we should simply use a different switch character instead of reversing the behavior of -n for 0.6.0... Any suggestions on a good letter that's free? :)

svn-id: r11585
"
"cbafc3c8c05ef9f2427b9a3e35c07b58271bded0","2003-12-11 15:21:49+00:00","Oops, thanks khalek :)

svn-id: r11586
"
"3080be97e0567efa78fbcbe8d2daa9906523eb8f","2003-12-11 20:11:14+00:00","Fix for bug #858262 (Note: casting to GUI::OptionsDialog* is wrong, it leads to incorrect vtable access

svn-id: r11587
"
"38c4321f5965c5872e2d4e73d0a9e6ec05a35a2e","2003-12-11 21:04:02+00:00","cleanup

svn-id: r11588
"
"c2be8ed45dccc04528869bece0ef3f9ff6c9d743","2003-12-11 22:16:35+00:00","constructors cleanup

svn-id: r11589
"
"c37dd7a192152eee7287055ad541dd351c485331","2003-12-12 00:05:28+00:00","Don't update screen manually, as original didn't.

svn-id: r11590
"
"48440c369770552f80a5f1adf14f756819dbaa56","2003-12-12 01:31:02+00:00","Prevent quick load/save during copy protection or conversation.

svn-id: r11591
"
"dbc5d8c3ee65664fe5cf395ab3297304f8315f21","2003-12-12 03:19:39+00:00","Add work around for bug in original simon1.

svn-id: r11592
"
"d7411615b89972917bd0da6a08c9ebcbe6c66c53","2003-12-12 05:02:04+00:00","Added state.*

svn-id: r11593
"
"fef457ed0e63e0cf8df9fa7d724f4ea624d7cc5d","2003-12-12 10:33:34+00:00","get rid of Verb class

svn-id: r11594
"
"baf2fd3900348202fba59f91898c5c91f5104b56","2003-12-12 14:29:59+00:00","o Fixed playback. Now you see Ben falling
o Next batch of enemy code implemented
o Cleanup

svn-id: r11595
"
"9008abc7ea34e21d5be2ef9c8a3132d18b8f9374","2003-12-12 14:40:40+00:00","cleanup: no need to access detector->_game.midi, since the value is fixed anyway

svn-id: r11596
"
"0ee89a32774585a36c6e6d739c7aee8ffcbd1de3","2003-12-12 15:05:33+00:00","init some more member vars

svn-id: r11597
"
"0b22651494f506ce53c250b7d1c1e6a81e9f4e1d","2003-12-12 15:28:44+00:00","avoid accessing detector->_game.midi

svn-id: r11598
"
"8f5c14aebe0ca423ede54e36d16d626bfab110ed","2003-12-12 15:29:58+00:00","get rid of queencomp target (rather simply always check for both queen.1 and queen.1c); this allows some code simplification and gets rid of the last access to detector->_game in queen

svn-id: r11599
"
"c3c55a457c00525a9eaaad48c04c30aa374b4075","2003-12-12 20:26:20+00:00","cleanup

svn-id: r11600
"
"b02edd2fa135b2f9293ef27684c4d6adaf02f638","2003-12-12 21:52:35+00:00","update

svn-id: r11601
"
"dd33ae0f0ffebdd8dde2e15c50a89b02e5e36506","2003-12-13 00:06:00+00:00","added MD5 code to CVS

svn-id: r11602
"
"35b62c294de5f4114b1b413c46e7ec3136e5b2fd","2003-12-13 00:20:01+00:00","removed GameSettings::detectname and GameSettings::midi; renamed GameSettings::gameName to name; added temporary experimental MD5 hack

svn-id: r11603
"
"1ac989586d7a18150edb3ee64c5bbcb609937aae","2003-12-13 01:18:31+00:00","Add slow motion option

svn-id: r11604
"
"643ef29f35ca472ff1223121c2e435827463339d","2003-12-13 01:21:18+00:00","A new si,mon key

svn-id: r11605
"
"ca9d9128ba325afae45b41f3431cd547927aa661","2003-12-13 01:22:31+00:00","Ooops

svn-id: r11606
"
"c7a6458849fac8db44c05eb74209ad33afc0812c","2003-12-13 01:26:40+00:00","Thereis no save slot 0 in simon games.

svn-id: r11607
"
"3d04b69cbd3ab86b480eab124404c086b03cbbbc","2003-12-13 01:54:17+00:00","Don't switch voice file in simon2mac unless needed.

svn-id: r11608
"
"73f3c3bdd44cfb26b46809b374f00e3817782f77","2003-12-13 01:54:53+00:00","Remove warning.

svn-id: r11609
"
"a2a1b7de1fa4a2766c97149875580657167e66ba","2003-12-13 03:40:54+00:00","o first scene is completable, although it seems to me that enemy moving
is wrong, as he never approaches Ben
o fix warnings
o more correct names to some procedures
o cleanup

svn-id: r11610
"
"ef55ec6582f5a7c0031a9a8810e7717db542ca9c","2003-12-13 04:11:42+00:00","o Fix bug which crashed scummvm in some cases

svn-id: r11611
"
"b952462d3ceee592208fad854cb7a6abefc0beb5","2003-12-13 07:27:09+00:00","update

svn-id: r11612
"
"270d1d2ca81eae057c4a9e68e28f5e403ffb90ea","2003-12-13 07:30:58+00:00","fixed warnings

svn-id: r11613
"
"c976e7fda021bf4cc67d877a2d60571b8f62593f","2003-12-13 13:46:58+00:00","quick load/save isn't possible for simon1dmeo

svn-id: r11614
"
"9b99adf7faeacf6e8b9760db28af57e4199bee5c","2003-12-13 15:41:32+00:00","Fix regressions.

svn-id: r11615
"
"fe05c6fb4dee1b7b4db1f91b8750a7c76cafa022","2003-12-13 17:10:47+00:00","patch #858731 to work around MSVC6 compiler bugs

svn-id: r11616
"
"5ff7c1d1532663eb8a00bbf60c39ba560a50a67f","2003-12-13 17:33:21+00:00","small fix for hexdump()

svn-id: r11617
"
"35c481fd61439864892b2b6c72fffe5af6592720","2003-12-13 20:01:35+00:00","* don't call a variable 'bit' which stores a byte'
* fix off-by-one loop length
* loopStart seems to be specified in samples, not bytes, fixing that (but I don't know of any place where I could test it...)
* Indy3Towns uses sound type 255, not 1, for Euphony music, it seems empirically
* print a warning if we encounter an unknown/unsupported sound sub-type

svn-id: r11618
"
"32d044d30219918eb7bb3c91a1b9910f9b2f86ed","2003-12-13 20:05:28+00:00","some refactoring in Command code (removed/commented unused code, renamed some methods)

svn-id: r11619
"
"80aac33327181ae281ea0d85bfec326583f3b55a","2003-12-13 21:06:47+00:00","cleanup

svn-id: r11620
"
"1de28a2931b9f48f7af12595d4e04554d25de578","2003-12-14 00:33:21+00:00","Initial (Roland) Music support; a lot of stuff is still missing and/or incomplete.

svn-id: r11621
"
"7efafcca536773fa28ad4d38d2be34f30a076758","2003-12-14 01:04:07+00:00","Get rid of unused variable

svn-id: r11622
"
"6f2217dcb2e8e51f32f56dcf2cb8444d16634638","2003-12-14 03:36:47+00:00","Fixproblem of fotaq attempting to play sfx as music, when sfx are disabled.

svn-id: r11623
"
"97f1b78905d10498770b49d29c8a4504ac0508c9","2003-12-14 04:07:22+00:00","Make music_mute take effect.

svn-id: r11624
"
"3b2f7000cd0f84f0a93588a08644c51e40194b3f","2003-12-14 04:43:04+00:00","Set vars to 0 on startup.

svn-id: r11625
"
"e717703b653d2f180585b6af18f1d603a69277c2","2003-12-14 06:03:18+00:00","Full Thorttle should stop all music when changing rooms.

svn-id: r11626
"
"12f556b704d5eac891ff1933e5ccce3a3a7d7e76","2003-12-14 06:29:09+00:00","o Mouse support added
o Fix bug with enemy not approaching Ben

svn-id: r11627
"
"ce9cd4157d223e7413fb374afd7fd7da850ead7a","2003-12-14 06:47:22+00:00","o Made mouse more responsive
o Cleanup

svn-id: r11628
"
"00bc1d241f525f7164addd06e83da0876e077fa9","2003-12-14 08:57:53+00:00","More Amiga sound updates from tsuteiuQ:
Adds another sound effect for zak
Cleans up end-of-song handling in v3 games

svn-id: r11629
"
"ab05c3fe729a9f01938ac6051bcaf5ccef63535d","2003-12-14 10:46:08+00:00","WinCE GUI fixes

svn-id: r11630
"
"470ca24df565e97b201ae23cc92de14922fbe6a0","2003-12-14 10:49:46+00:00","Update project files

svn-id: r11631
"
"9d1f4842a59133a7f3be2e57b1c74d6e4ac1f86c","2003-12-14 14:19:43+00:00","Reset actors in restart()

svn-id: r11632
"
"d4191c73912ab4b11a76759098430b2ed15144cc","2003-12-14 14:32:12+00:00","Enable restart key in later games.
We could use a confirmation dialog.

svn-id: r11633
"
"cbcca65d067e576d46bd15b1240138524516bfb4","2003-12-14 14:47:00+00:00","add check before accessing ObjectData (only for safety)

svn-id: r11634
"
"2556f9b77ad4b210e19c403e1270f9d3393e27ff","2003-12-14 15:04:05+00:00","Always confirm restart

svn-id: r11635
"
"7400910907609b412d74ed194569098c5f039948","2003-12-14 15:23:43+00:00","Ooops

svn-id: r11636
"
"ce04dd9f7e77fe1c31eb14aebde2f69c16d33684","2003-12-14 16:32:21+00:00","Fixed a potential crash bug where an audio buffer would be freed at the end
of an animated cutscene while the mixer was still using it. Oddly enough, I
didn't encounter this bug when I played through the game recently, but
today it happened every time at the end of the cutscene where Nico finds
the jaguar stone.

svn-id: r11637
"
"4420b15d9f59227cc57bb60d5b38c73639437a62","2003-12-14 16:33:27+00:00","Mostly cleanups, but I believe this also fixes an endian problem in the
'restart script' opcode. To actually verify this, though, I'd need to find
a case where any other script than script 0 at offset 0 is restarted...

svn-id: r11638
"
"e1c21c2d8c3ba05ba32bf86f2fa66e5786264f52","2003-12-14 20:24:29+00:00","don't call Command::changeObjectState() on items

svn-id: r11639
"
"5e000ec43f771155f9ecc605c60d39511661d908","2003-12-14 20:36:37+00:00","Let's spell it out: c-o-d-e r-e-u-s-e :-)

svn-id: r11640
"
"8b2f43f2bd70e3808a6ef0caddef6709dafb6494","2003-12-14 21:39:52+00:00","re-enable keyboard commands

svn-id: r11641
"
"c4a6ff353f8c002d79bef5cdccdeb9cab437aa54","2003-12-15 00:16:35+00:00","two audio TODOs

svn-id: r11642
"
"f056924fda64d6549a21d9e1339ed9882b705e30","2003-12-15 00:40:24+00:00","o Outstanding seeking bug is fixed
o Killed many bugs in actors' handlers
o Implemented rest of the actors

svn-id: r11643
"
"572cb26390adac17faf7dc630996b003657d295e","2003-12-15 00:54:35+00:00","update

svn-id: r11644
"
"41f09c6b52b04e8e94524a83d3e20616d3f2a8d5","2003-12-15 00:57:48+00:00","added temporally INSANE define

svn-id: r11645
"
"4e54e4d0c7754b1619fee3bcf397b5ac65fd5637","2003-12-15 00:58:45+00:00","fixed warning

svn-id: r11646
"
"4179f389ccb336746c9b51f6b8cd4d2d804c011b","2003-12-15 01:07:06+00:00","removed no needed anymore defines

svn-id: r11647
"
"60682d0598688988179761c2969a96af992b3b81","2003-12-15 05:16:34+00:00","Detect restart key in v1-v2 games and use confirmation.

svn-id: r11648
"
"4e736a66029891232b0c1dd24fbb573dfde76653","2003-12-15 07:31:22+00:00","Tiny whitespace change. (No, as a matter of fact I don't have anything
better to do. :-)

svn-id: r11649
"
"09495a7fc9ee4554c996c7ed159f7781664a0bbe","2003-12-15 11:06:41+00:00","Small color table correction for demo mode of v1 maniac

svn-id: r11650
"
"eb090ed5a682099fd45bacaa10a588cad656d800","2003-12-15 12:59:43+00:00","cleanup

svn-id: r11651
"
"aa2173868b387edb82e2409b3e15005e83fc07ce","2003-12-15 13:00:48+00:00","clear command text in pinnacle room when there is no valid place under the cursor

svn-id: r11652
"
"bee21ec3f8d04511c46e898542f1153ccba2dc8b","2003-12-15 14:54:35+00:00","Add extra color table entry for v1 games, for inventory/sentence color.

svn-id: r11653
"
"a284d93fe01c10f903f9db2c74e557244472716e","2003-12-15 14:59:24+00:00","Stops zak losing his body.

svn-id: r11654
"
"de1a8fdafaba42bcb3affa5f87cfcac4d681e640","2003-12-15 15:11:58+00:00","Correct name

svn-id: r11655
"
"db2bf22b35fa25daf0f8acf573eb30c31ab9381e","2003-12-15 15:13:36+00:00","Removed 'fullscreen' option (PalmOS)

svn-id: r11656
"
"5d1a198db0fd5cd5a2fa412b6ed9eef50c5ccc89","2003-12-15 15:16:01+00:00","Removed obsolete stuffs

svn-id: r11657
"
"6a9972c5f5009cd334ead9f7b566f95a28a8548f","2003-12-15 15:17:06+00:00","No stat.h on PalmOS

svn-id: r11658
"
"c6737ee5c8215716e3de70ee7c0c76ba1b1798c1","2003-12-15 16:04:31+00:00","Add comment

svn-id: r11659
"
"278484bed7c5672e9b5a25f9e9380644484bc71b","2003-12-15 16:05:40+00:00","Ooops, wrong bug id.

svn-id: r11660
"
"7fcfd00d1cbb54e54556d11d8946584f1628456e","2003-12-15 16:11:43+00:00","Add comment

svn-id: r11661
"
"e2f851c8501f4ff8643ca6693cd0e3b103597ccb","2003-12-15 20:33:40+00:00","Fix for bug #751670, thanks to MadMoose (I am not quite happy with the situation, but hey, at least this helps :-)

svn-id: r11662
"
"c3a9b2df6789055325b7fea6dd591cea1d419682","2003-12-15 20:53:16+00:00","indention

svn-id: r11663
"
"189e08bc7985fc5664e7ab95195bbade07488f48","2003-12-16 02:10:15+00:00","Broken Sword 1: initial import

svn-id: r11664
"
"5756a41ba69394aaf9f24f3ade825e397786a63b","2003-12-16 02:11:04+00:00","added mixer flag for little endian samples

svn-id: r11665
"
"cbe5c34f979849dccba6a72f57b721c7621d2b5a","2003-12-16 02:24:30+00:00","Add sword1 makefile changes

svn-id: r11666
"
"850b679bd7a11c6114804c46152dd132b0a13776","2003-12-16 02:25:04+00:00","Add sworrd 1 makefile changes

svn-id: r11667
"
"0b0f5d0b7aa432f8d68d2a13915a8cbdf9de412f","2003-12-16 02:27:53+00:00","newlines

svn-id: r11668
"
"e2843f3e07b9774c7cd85a2d69bdd1746bd86648","2003-12-16 05:02:34+00:00","revert one of kirben's changes

svn-id: r11669
"
"0b61a4c3a86e0583a74f6a53835e90c484a196e0","2003-12-16 05:04:39+00:00","Add some additional simon1 amiga code from tsuteiuQ, not working right yet.

svn-id: r11670
"
"af6c68faf73bb0006ac1525cdaddfb500135dfd0","2003-12-16 05:08:26+00:00","Remove old hack

svn-id: r11671
"
"48735af676373904e8634e499edfaf687735ed55","2003-12-16 05:19:33+00:00","ignore deps

svn-id: r11672
"
"b3e6c54b64c4d8e08b466b53fc5f0324a9733e53","2003-12-16 05:29:26+00:00","Update for simon1

svn-id: r11673
"
"28331ab2ac2050ab69691193b41e63dd495f8c87","2003-12-16 05:34:00+00:00","Add sword1

svn-id: r11674
"
"a8eae425101e71c18e3ed6d2d3d00870552ee970","2003-12-16 06:20:16+00:00","o FreeBSD specifix fix. I am not sure it is applicable to every Unix

svn-id: r11675
"
"1cf3accb14bbd9b52aaf0d1f5ac2a9e67dce25c2","2003-12-16 06:37:12+00:00","there is allready definitions for MIN/MAX

svn-id: r11676
"
"362a37266dabd63d95e347e00191add976d7193c","2003-12-16 06:40:37+00:00","updated for sword1

svn-id: r11677
"
"9673833d97135fd9b5af5f3457f11babcba59d72","2003-12-16 08:03:14+00:00","Fix for bug #856624, 'FT: '.' key wipes out conversation responses'.

svn-id: r11678
"
"83e9c59327d695b4bf2e0d8ae6661b25042ff750","2003-12-16 09:43:08+00:00","compilation fixes

svn-id: r11679
"
"6f6675ed8bb22f0deb37fde8c1b999b14818b907","2003-12-16 09:58:21+00:00","Add capture mouse option, patch #860831
Uses Ctrl m to toggle, since that is closest to original games.
Disabled by default.

svn-id: r11680
"
"298d008deff174458b1f46a3019d0a76fe8bbcb7","2003-12-16 10:08:27+00:00","use specified language setting instead of hardcoding german

svn-id: r11681
"
"5937b169885cbf0922be9ebc8ac21f26d2e6b0bf","2003-12-16 10:30:41+00:00","check speech subdirectory for speech.clu as well

svn-id: r11682
"
"0e8a1b7278b6c198524447813d9a950cc25b868e","2003-12-16 10:41:59+00:00","Look in MUSIC folder, not MUSIC1, there should be no conflicting music files.

svn-id: r11683
"
"4884461011f571be809495c846b28ae86d93d2f2","2003-12-16 12:04:47+00:00","Typo

svn-id: r11684
"
"0c681181b80d77f11963ec7b5705db6364e403ae","2003-12-16 14:59:29+00:00","fix compilation on BE systems

svn-id: r11685
"
"de51f631be939a9da9ef0dd2e5f33fc605bdd01b","2003-12-16 15:34:17+00:00","cleanup

svn-id: r11686
"
"0cf52df6510cbb06b6b8489beac829d58687542d","2003-12-16 18:23:15+00:00","copied the SwordRouter from the original BS1 sources.
It doesn't fit to our coding guidelines but at least it's working, so please bear with it for now. :)

svn-id: r11687
"
"5edaa87d68e7669da4c2b67e88a7f70603878882","2003-12-16 19:31:12+00:00","fix sprite drawing bugs

svn-id: r11688
"
"082120ef65518430bb77ffe7f7a47c29c2fc5120","2003-12-16 19:50:18+00:00","fix speech logic bug (policeman scene works now...)

svn-id: r11689
"
"166ba1b38504264dafc295e3630333eff2bc136f","2003-12-16 19:55:59+00:00","fix speech animations

svn-id: r11690
"
"36cb1ed6b5e204ef72b8c134007b7bb1cb9cfb97","2003-12-16 21:35:30+00:00","o Another batch of proper variables naming
o Implemented support functions for every scene
o Started work on IACT containing scenes

IACT for insane would be INSANE Action rater that IMUSE Action

svn-id: r11691
"
"b4f33afb8587ea1a53a7772cc95819f2f5b4e13d","2003-12-17 01:17:12+00:00","simplified game detection code etc.

svn-id: r11692
"
"d1c9caa127ee115ca01d534130c845f31386d81f","2003-12-17 01:18:03+00:00","fix various warnings; whatTarget()'s paramters shadowed member vars, but it can just b e turned into a pure function (sidenote: the chaotic mix of spaces and tabs in router.cpp doesn't help readability :-)

svn-id: r11693
"
"d81746ada8e7013759eafd7154dd81d488910d22","2003-12-17 01:32:00+00:00","some cleanup

svn-id: r11694
"
"34d1751fe402936455fc8b57b28cb6c3eda11285","2003-12-17 01:47:47+00:00","fixed resMan bug about closing of sections and started adding menu support

svn-id: r11695
"
"4343567458cefe5de8f3493040c79af9f4cdd50a","2003-12-17 01:50:50+00:00","changed the way 'streams' are handled: the finalization logic is now in the WrappedAudioInputStream; this allows further streamlining of the channel/mixer code (can you already guess what I am working towards? :-)

svn-id: r11696
"
"91997026a0d60d0c66a098f5b653945892eb203b","2003-12-17 01:57:37+00:00","cleanup

svn-id: r11697
"
"4da0b08b90b08baa988ad11adfb5f7952384f04d","2003-12-17 02:19:03+00:00","fixed warning

svn-id: r11698
"
"e7bf167428968ac894a8be035a38985c08c0d7c3","2003-12-17 02:19:24+00:00","Made sure that *all* AudioInputStream 'know' their sample rate; removed pointless MusicStream class; removed various specific Channel subclasses and instead generalized the base class some more

svn-id: r11699
"
"6b3429c4bbfea21096ae2de520579e99bf3fd3d4","2003-12-17 02:23:30+00:00","Fix restart key in fm towns games

svn-id: r11700
"
"7f5df14e7d5a4b4c560fa8697994fa5b512f8971","2003-12-17 05:16:37+00:00","menu, sound and mouse fixes.

svn-id: r11701
"
"4077b92c0263760643f81253ed06a24c5c488225","2003-12-17 06:24:18+00:00","Fix compile for now, I hope this is right.

svn-id: r11702
"
"5fdff2824c7cf45edb0dc2fb6f0bdbe150e3a20f","2003-12-17 07:33:00+00:00","fixed text output and logic bug. changed scrolling code.
hey, sword is running really nice already. :)

svn-id: r11703
"
"8b12be81e52334a1267469052ad61061e6a5e087","2003-12-17 08:01:59+00:00","cleanup

svn-id: r11704
"
"7f03b140d465b1d5bff351fe1d955f9e402ce679","2003-12-17 08:36:09+00:00","fixed warning

svn-id: r11705
"
"f926ae108cd0816487eceac3c253149897a525cb","2003-12-17 09:17:59+00:00","enable music

svn-id: r11706
"
"a739f3ae3b34044915d09ddb954fead713779850","2003-12-17 11:07:40+00:00","The mixer handles little-endian samples now. Take advantage of that.

svn-id: r11707
"
"9f8b022fd410d828140b1a6a1644e9170ede098f","2003-12-17 11:11:03+00:00","big endian fix

svn-id: r11708
"
"eeb15c04330e84c5280f3edef38c8f2743050a95","2003-12-17 11:23:12+00:00","big endian fix

svn-id: r11709
"
"215c8e3fc60b96bc6455c9543004592bc452f43e","2003-12-17 11:39:19+00:00","big endian fix

svn-id: r11710
"
"9a1bbb361bc62ef95f02317f25e7aa3f1d2da723","2003-12-17 11:52:05+00:00","My last commit didn't work on big-endian. Maybe this one does...

svn-id: r11711
"
"6d1fba28d510526de568fa7354fa6327fd81d74d","2003-12-17 11:54:48+00:00","initial boot param support, will do the rest of the bootparams next

svn-id: r11712
"
"56b831293d4a3d96a71564777d8f75185539a83c","2003-12-17 14:33:34+00:00","add all of the paris boot params, 80 in particular is quite useful as it activates all sections of the map including the ability to travel outside of paris

svn-id: r11713
"
"f704b12eeb8483c2151a576fa91722669b1717fe","2003-12-17 14:36:52+00:00","Enable subtitles if the 'subtitles' option is set in the config manager.

svn-id: r11714
"
"9b70f6d9225508f854a6ff8321cb49868adc0914","2003-12-17 15:27:41+00:00","add boot params for ireland, everyone's favourite puzzle can be found via 24

svn-id: r11715
"
"a1896926fd2dadf77d05551d5df41e0077c660cd","2003-12-17 15:32:09+00:00","Updated dists/debian so it's able to build a working package from current CVS.

svn-id: r11716
"
"3661c7f06cb4ba4af8b9dc5f44267a48ddb0ad83","2003-12-17 16:57:10+00:00","add note on right mouse button on Mac

svn-id: r11717
"
"3364949c82cec9330d95d6e5399ed46f370681e8","2003-12-17 17:12:09+00:00","Patch #861716: palManipulateInit for V6 games (I modified the patch a bit)

svn-id: r11718
"
"8d5d770092b4092dffdbfda5f33cfbe4b3956295","2003-12-17 17:35:40+00:00","Fix for bug #860823 (ZAK: Actors not updating)

svn-id: r11719
"
"b38acd10e768b535aa2b5f38cd94b8b1d7e86322","2003-12-17 17:36:04+00:00","cleanup

svn-id: r11720
"
"f7f97d7ebb7766ac58a1509608c7a2c131875c8a","2003-12-17 23:41:14+00:00","add the rest of the boot params

svn-id: r11721
"
"b5dde7b3f906a998b809fcf0f7e396edf1ca949f","2003-12-17 23:49:26+00:00","changed fnEnterSection to fix crash at startup.

svn-id: r11722
"
"1698437409d8e15c9653256156a5d50d92f474ac","2003-12-17 23:49:57+00:00","TODOs added and removed some completed TODOs

svn-id: r11723
"
"8b0ab955803b8a452d05152edcc99ef38c15f5a6","2003-12-18 00:31:37+00:00","fixed stupid palette bugs

svn-id: r11724
"
"5d2c2acf905115e33a48a5fc5855075b6f287d11","2003-12-18 00:36:42+00:00","one more big endian fix

svn-id: r11725
"
"5f4c9cbeeb6a32a96cff1357fb565843417dc051","2003-12-18 01:00:24+00:00","resolve an inconsistency in the FROM_* helper macros: now they *always* cast their argument to unsigned (previously, the LE funcs would do this when used on BE machines, and vice versa; but using a FROM_LE macro on a LE machine wouldn't cause a cast to unsigned; this potentially leads to endian bugs!)

svn-id: r11726
"
"aa6e1ba76045f9be0965b05b0aea9b2f23a852cd","2003-12-18 01:00:42+00:00","big endian typecasts for FROM_LE_xx

svn-id: r11727
"
"127e5ce5f94e2526a41c802c1adbe6480790c796","2003-12-18 01:15:15+00:00","changed endian conversion for compact data

svn-id: r11728
"
"a458da989bbe77d798f68f253ee63a68c925b6c0","2003-12-18 01:22:28+00:00","cleanup

svn-id: r11729
"
"d89eea3ac3f3f93a92039dd99f539224b49fb681","2003-12-18 04:19:38+00:00","Missed one spot when switching subtitle options.

svn-id: r11730
"
"18d1bc3d9913bd5fdd8f39b3db1314e272eb6289","2003-12-18 06:22:33+00:00","Adjust load/key for FM Towns games, since values have changed.

svn-id: r11731
"
"1a4ede14c63c3f7cd479bc98bed441698bc1c2f4","2003-12-18 08:28:14+00:00","pack WalkData struct to fix some endian issues

svn-id: r11732
"
"592822fbe551a7ade0de51a1e30dedc0d3b73f04","2003-12-18 09:04:13+00:00","Don't use bug work around on simon1dos, since copy protection screen causes odd effects.

svn-id: r11733
"
"d0da61f8aad834fa58f61fff0aa86c0f927f0707","2003-12-18 09:10:47+00:00","Revert fade change

svn-id: r11734
"
"22c865791a7d753aa941f36b4121c6475cb11d7a","2003-12-18 09:36:17+00:00","Remove slow motion option.
Add slow_down option for config file instead for now.

svn-id: r11735
"
"1f4e54f93066b6ecd793b1a70cc6036530023a7f","2003-12-18 10:47:12+00:00","Make fade a config optiom
Make sure non-English/German versions of simon1talkie start with subtitles enabled.

svn-id: r11736
"
"77bf6491cc01cde2cf3f3af7634c11628b55af02","2003-12-18 10:48:48+00:00","C&P typo.

svn-id: r11737
"
"c10eace9e383169468778c0d0d8c892d3b249add","2003-12-18 11:04:02+00:00","Add speech config option, to allow subtitles only in Simon2 again.

svn-id: r11738
"
"ffc068734d5df485ef63d6f81cab467921d2bd26","2003-12-18 11:16:10+00:00","Safetly check

svn-id: r11739
"
"3f1d66cf11f4f369e007af95a9eb5aabf07b3939","2003-12-18 11:47:58+00:00","PalmOS sound API cannot access globals or functions out of the first segment

svn-id: r11740
"
"26fdb102bb499ddad131d44e8953d7e06fbdc6c6","2003-12-18 11:49:53+00:00","This is now supported on PalmOS

svn-id: r11741
"
"3644176c43b70303e6ed4b241de751291cbe784a","2003-12-18 11:51:58+00:00","PalmOS sound API cannot access globals data, StackLock constructor use g_system

svn-id: r11742
"
"312abd748668ffca8122799993af438394df4826","2003-12-18 12:15:59+00:00","endian fix for router.

svn-id: r11743
"
"65583e28da225d6fc0e52f5525c0c81fa9e1117a","2003-12-18 12:45:40+00:00","SwordText big endian fixes

svn-id: r11744
"
"461abf1b9ef136a40ed83142eb062f4debd87b07","2003-12-18 12:52:04+00:00","another big endian

svn-id: r11745
"
"a74f8eb717471d3a1c479eead150391a0aca03d6","2003-12-18 13:17:33+00:00","endian conversion for music system

svn-id: r11746
"
"501b7d687a376ed42c44ebd8c12d00b73bb9bdd6","2003-12-18 14:16:08+00:00","fixed endian bug in animDriver()

svn-id: r11747
"
"ee2c8b2ddb9bb444b67643017928e32c8bbe3411","2003-12-18 14:38:17+00:00","fix mouse cursor animations

svn-id: r11748
"
"d8fb44ffc561657047c899617e68215cc1ea72b1","2003-12-18 20:20:01+00:00","Patch #862283 (Help X11 backend to compile on FreeBSD)

svn-id: r11749
"
"d93d450f7b4e906289101524379d46f06aa55a76","2003-12-18 23:00:10+00:00","o Merged some variables into array, so simplifying the code
o Fix bugs
o Some mineroad support

svn-id: r11750
"
"e58514f87dc6e7c9ce1d5868a8f5ac752c1936a7","2003-12-18 23:58:50+00:00","o Fix warnings

svn-id: r11751
"
"32dd4cc0061de24c804bd7a9be9dfc6576dd19a1","2003-12-19 00:09:34+00:00","fix for recent audio stream regression

svn-id: r11752
"
"97ee61963c896e48a0acc5b4169ce96163e76b06","2003-12-19 00:27:09+00:00","I am going to remove the default implementation of readBuffer() (AudioInputStream subclasses really really should implement readBuffer() for good performance)

svn-id: r11753
"
"d21fc5845dc77dd977df22fd9ddc3206bf23a920","2003-12-19 00:32:47+00:00","o Moved MP3 and Vorbis input streams to mp3.* resp. vorbis.*
o Added SoundMixer::playInputStream and made some of the other play* methods use it
o Added ProcInputStream stub (not working yet) which one day may allow us to replace the premix code, and allow other fancy stuff
o Remove AudioInputStream::readBuffer default implementation (subclasses should always provide it for max. performance)
o Some minor cleanup

svn-id: r11754
"
"0cddca5f43c5b85d28f2977d783a6cd5cec0d540","2003-12-19 01:08:30+00:00","unregister the premix proc when you go away

svn-id: r11755
"
"d8903123b0bd4265de03f40eaaf6bb1d2b160c3f","2003-12-19 01:30:19+00:00","distinguish between end of stream and end of data

svn-id: r11756
"
"a3310a5de932095809e21b63ee593efe213a3080","2003-12-19 06:51:32+00:00","Make sure that playSample() gets a pointer to the original QueueElement
instead of a copy of it. Otherwise the sound engine will never notice when
a sample finishes playing since it's looking at the wrong sound handle.

For whatever reason, this also seems to fix the 'game crashes occasionally
on startup with completely useless stack trace' bug for me. The crash was
easily repeatable in Valgrind for me, but the messages it produced were
just as unhelpful as the stack trace. These messages are also gone now.

svn-id: r11757
"
"dae474e86da67330fa0d0fd7a4637d6bedff43e6","2003-12-19 09:21:02+00:00","handle mouse wheel in Journal screen

svn-id: r11758
"
"b7a5d9720791bd112730d1384c7c7cf94a40e381","2003-12-19 09:22:20+00:00","put all 'bam' related stuff in a class and allow load/save during a 'bam' scene

svn-id: r11759
"
"b179e8f6ec6d24f6b46a1b9e14e46ad777374d94","2003-12-19 14:07:12+00:00","Whitespace changes

svn-id: r11760
"
"34433d87bbf378430ad6ea523787616c748a7d43","2003-12-19 14:16:31+00:00","Changed abs() to ABS(), and changed a sorting function to use SWAP()

svn-id: r11761
"
"dc0c7bf845be37df7a069f3f1610ab5c42f4bff4","2003-12-19 16:50:03+00:00","Implemented scroll wheel handling for save/load dialogs. (This turned up a
few other hitherto harmless bugs, which I've hopefully managed to fix.)

svn-id: r11762
"
"c2c250edc1b98b63cd73254a446d84cb12b23527","2003-12-19 17:07:37+00:00","Fixed bug with looping music. It must have been there all along, but maybe
the recent mixer changes made it more audible. Or maybe I just didn't
listen until now.

svn-id: r11763
"
"9e1dda1f682c5e3b3f3c34fccce5caf7095ecbbe","2003-12-20 01:17:02+00:00","Make VC6/EVC happier

svn-id: r11764
"
"158755382bc734337b80da1958c0be68e9336446","2003-12-20 04:20:22+00:00","Fix iventory arrowsin some versions of Simon1.

svn-id: r11765
"
"bcb5ea16b3cc06064104a302853f16e98974bb4c","2003-12-20 04:23:44+00:00","Update simon1 issues

svn-id: r11766
"
"cc4716c8310e5d73d70ac8b4579c0bef9849853c","2003-12-20 04:25:01+00:00","Remove warning.

svn-id: r11767
"
"20a6ad7572a9cb58503d9320817d7a7ccd4f63bd","2003-12-20 04:29:17+00:00","*** empty log message ***

svn-id: r11768
"
"19fe4c947a7ac035eb3b8f670090f97b1821db5b","2003-12-20 04:34:24+00:00","Simpler check

svn-id: r11769
"
"fb89d1a32e6e1b0ce084b12e483634ec8302b600","2003-12-20 06:00:55+00:00","Revert bug work around, still can't detect conversation will enough yet.

svn-id: r11770
"
"6effdfac9ff960e9a9495b1750860b9200316fdb","2003-12-20 06:39:24+00:00","Enable vgascript dump option.

svn-id: r11771
"
"ff55c1ae4b5c3bd4cd37b33606d157c44f73bc5a","2003-12-20 07:59:42+00:00","Correction

svn-id: r11772
"
"50c2dc9b25a0cce128f1df7e59dd0f03078d2e65","2003-12-20 08:23:31+00:00","Correction

svn-id: r11773
"
"aceafcbb484f18aedda914bf321585a9c113016a","2003-12-20 09:05:25+00:00","Add correction solution for missing song in dwarf mines of Simon1.

svn-id: r11774
"
"59654b17191b99c23486f6a41076b9ed05a1c38f","2003-12-20 09:12:54+00:00","added SwordControl (the control panel). Not yet finished.

svn-id: r11775
"
"da3eed35b5817303170e42c21132b29f20183d71","2003-12-20 09:18:43+00:00","forgot these. :)

svn-id: r11776
"
"030236fe62537559fac2f4a852259a57d7d55737","2003-12-20 09:20:14+00:00","Add new object

svn-id: r11777
"
"fe324f1cdf057a3a7908d3387322762918c74aa1","2003-12-20 09:44:35+00:00","Ipdate

svn-id: r11778
"
"437489473379837090573fd7e66d3645bd243982","2003-12-20 10:21:32+00:00","Correction

svn-id: r11779
"
"456f01b8fd8fe844b58c829d25d793adfbc33f3a","2003-12-20 13:35:00+00:00","A comment in decompressRLE0() said that the images are vertically flipped,
but I'm not so sure. I've changed the code to assume that they're not, and
this fixes both the drawing of the worker in the background of the first
room, and of the fan at the police station.

svn-id: r11780
"
"8789ca10e306eddce62bcc2fea0734af3aea51fa","2003-12-20 13:43:40+00:00","Modified the calculation of where to draw parallaxes to be more like the
one in Broken Sword II. At least the first room appears to behave like the
original now. (Except for a masking bug, which is almost certainly
unrelated to parallaxes.)

svn-id: r11781
"
"c2128b55fd10791af496baa6c234be2575f5f51e","2003-12-20 13:54:34+00:00","Ooops

svn-id: r11782
"
"c2b9debd31af640970b9ab89c86d9637d6be5147","2003-12-20 13:58:08+00:00","Add mouse capture key

svn-id: r11783
"
"f533de72e48fa909240ecf3c0fffa5bfd895753b","2003-12-20 15:26:44+00:00","sprites should now be rendered correctly.

svn-id: r11784
"
"2c19e18fc85becb52fceab42c7bddf19a0913459","2003-12-20 16:30:58+00:00","I hope this fixes the control panel for other BS1 versions.

svn-id: r11785
"
"33ca6ecfa5d97db0e63092268eca4e94c0851fa3","2003-12-20 16:54:46+00:00","some code to play the 'room background sfx' (equivalent to sfxplay(NULLstr))

svn-id: r11786
"
"be120d1289c199675e8ec9e4a1eb1466d86b62a6","2003-12-20 17:55:09+00:00","fix recently introduced mouse bugs.

svn-id: r11787
"
"1007e8256f0d17a2e797f9ae6028651e06f33ea3","2003-12-20 19:19:42+00:00","fix memory leak

svn-id: r11788
"
"2554ced5e970301e46f1b8035975762447b900f2","2003-12-20 20:20:53+00:00","fixed crashes after restoring a savegame, added fnSetPaletteToFade and changed speech code to distinguish between CD1 and CD2. (now needs SPEECH1.CLU and SPEECH2.CLU)

svn-id: r11789
"
"ff83b4cb24456ef6775a7e87b8ec9eb842debf8c","2003-12-20 21:56:48+00:00","fix warning

svn-id: r11790
"
"45e9fb575db58992cce2ec30b10e26859c88542a","2003-12-20 22:03:07+00:00","Added last chunk of code. Now here are just the bugs to kill.

svn-id: r11791
"
"d0b74e81a624f97f41618a7a3a895dd58424d519","2003-12-21 00:00:19+00:00","cleanup

svn-id: r11792
"
"fb61c8404283f65b11675e5b6949cc24b806ff94","2003-12-21 00:03:15+00:00","Enable more debugging output

svn-id: r11793
"
"dafca64f36646ab2909b7ce61bc52639daefa2a6","2003-12-21 00:05:00+00:00","don't use sound/mixer index, rather use the sound handle!

svn-id: r11794
"
"9a994bf2f21a6e5a577c9c629846b3704214d711","2003-12-21 00:07:16+00:00","cleanup

svn-id: r11795
"
"f8de1021eb4d189331adf161b67383b4d709a732","2003-12-21 00:10:04+00:00","Typo

svn-id: r11796
"
"815b12fe79d47167c5a507d4d61ddbdbc3b772b1","2003-12-21 00:20:36+00:00","automatically update the date in the README (not pretty, but works)

svn-id: r11797
"
"c55652d4a60ee51dde381417c590fff9a59ecb0d","2003-12-21 00:26:36+00:00","Rewrote make*Stream factory functions to work around bug in MSVC6 (see bug report #860067); added some comments; LinearMemoryStream now can auto-dispose the data passed to it

svn-id: r11798
"
"fbcca630582d141d9bca1b2fad053ae089f096f0","2003-12-21 00:40:42+00:00","Incorrect use of stopChannel (must be stopHandle); replaced single remaining use of stopChannel by a hack (note: the code in question is a hack in itself already)

svn-id: r11799
"
"676bf4d68326751eb3f1b487eb1d0265684c840d","2003-12-21 00:41:59+00:00","incorrect use of pauseChannel (replaced by correct pauseID)

svn-id: r11800
"
"ec0ebf5380d0f77715e40586243226676480deeb","2003-12-21 00:44:31+00:00","o Make use of the new LinearMemoryStream feature which allows auto-disposing the sound data
o This allows us to get rid of the ChannelRaw class
o Removed the sound index return value from several methods
o Removed all methods dealing with sound indices (i.e. stopChannel and pauseChannel)

svn-id: r11801
"
"2bbaff0890b2f5920052257d7297daa72bb09606","2003-12-21 00:52:11+00:00","changed wording in NEWS a bit

svn-id: r11802
"
"7fbb3e05597e88d0421af2f720ec7d136605836e","2003-12-21 01:17:03+00:00","Cleaned up SoundMixer::newStream() a bit (I plan to replace all usages of this by playInputStream(), this cleanup eases this a bit)

svn-id: r11803
"
"a7201f0dac9aaf763b95cba343b4b4f6e2bc63d3","2003-12-21 06:36:29+00:00","Might as well merge, not need for larger sizes.

svn-id: r11804
"
"e6e3a81b37e4c26e8ec6692f3db9bbb370087dda","2003-12-21 08:44:01+00:00","update and fix depedences

svn-id: r11805
"
"419e6d6cecec087fbeefa04e7c328c72c313d207","2003-12-21 08:46:32+00:00","ops

svn-id: r11806
"
"eb8af1c05f54f68bd0b3f58469760adf6e646f07","2003-12-21 09:01:58+00:00","Revert for now, breaks VC.

svn-id: r11807
"
"8f999c7266474ad99420568a81d2d7dd582a21f2","2003-12-21 13:44:23+00:00","Fix for bug #847805 (FOA: Assertion failed crash at lava pit)

svn-id: r11808
"
"585689a836055245749a08b4f69fd72078933615","2003-12-21 14:02:12+00:00","yet another place were 'nosubtitles' wasn't properly changed to 'subtitles'

svn-id: r11809
"
"7b498fe7db91fa3e52d2c69bc9980f4609acc288","2003-12-21 14:42:19+00:00","Switch speech config option to speech_mute config options, for Simon 1/2 games. In order to match other engines.

svn-id: r11810
"
"f19f73eb5069b4f092714535e77efc0d6881c612","2003-12-21 15:29:52+00:00","Make it possible for game detection functions to detect language/platform (not yet done by any detector, but will come with the MD5 detection code)

svn-id: r11811
"
"e439eb51290082f204c10feaea2d5a72e3747879","2003-12-21 15:47:52+00:00","added convenience SoundMixer::playVorbis variant which calls through to playSfxSound_Vorbis; made scumm/queen engines use it

svn-id: r11812
"
"4fa0d93dfb7dec8c63ab50a86ae8ae5dbc6af9d9","2003-12-21 15:53:38+00:00","Use of stat() is not portable...

svn-id: r11813
"
"e7cf0557f83d1e93621d1d9830d8a5e4d3fbeabb","2003-12-21 15:54:26+00:00","stdafx.h first, please.

svn-id: r11814
"
"71057255eac588e04fb611ecd423ceb9bc17d045","2003-12-21 15:55:55+00:00","changed speech code, should now play all waves correctly

svn-id: r11815
"
"5eef5d4e15ddd4c99ff1234a969651572c8e0812","2003-12-21 16:01:36+00:00","add purely experimental & untested Ogg Vorbis support to Simon

svn-id: r11816
"
"7757d7accfa5436b0732dd0dffd5d8dd04ca0c15","2003-12-21 16:01:38+00:00","cleanup

svn-id: r11817
"
"38bb448d7010bf53a1e24304999cc9f56423bdd8","2003-12-21 16:01:52+00:00","Renames.

svn-id: r11818
"
"53950b89de78e010b4385b0aa80a925c826686dd","2003-12-21 16:15:37+00:00","Leave set to false for now, due to Simon2.

svn-id: r11819
"
"72788c1eab29a21c18782d725a78a9050a396dfb","2003-12-21 16:17:27+00:00","stdafx.h first, please.

svn-id: r11820
"
"b3406461cd1923816919d259ebbdd4bcfb12a450","2003-12-21 16:39:20+00:00","Add fotaq config options

svn-id: r11821
"
"7c09bd869b920bac34ec49938af7fee4ecaafdbc","2003-12-21 16:45:16+00:00","Require stdafx.h to have been included.

svn-id: r11822
"
"5d8516f2ec76bdfe4f255601d8b47b345794cbb3","2003-12-21 16:50:02+00:00","now two inventory items can be combined

svn-id: r11823
"
"522938f7fad976edd4fe9cdb166ba821baaf9340","2003-12-21 16:51:31+00:00","Add sfx_mute to simon

svn-id: r11824
"
"fdbceaf5e3292beaf2b70ff5ea46845d06b447d0","2003-12-21 16:55:50+00:00","Add music_mute config option to Simon 1/2

svn-id: r11825
"
"cd46aba223e6491fe318ab1de89cdefb1c471859","2003-12-21 17:07:07+00:00","Add header

svn-id: r11826
"
"ed991734a32e4d484fee81be6efeab0b4747926e","2003-12-21 17:16:07+00:00","warning fix

svn-id: r11827
"
"44887cc33d3ac01a846526ec56cb0559d2f6b45b","2003-12-21 17:34:44+00:00","fixed parallax drawing for room 54

svn-id: r11828
"
"21ab8e496e6eb64b73ede399e84122f38c916b1d","2003-12-21 17:35:44+00:00","include stdafx.h

svn-id: r11829
"
"6df4db88cd9f95cb7112d1d27236c870ea09447d","2003-12-21 17:45:15+00:00","fixed scrolling

svn-id: r11830
"
"a5eca2df040234e11421351524b305f671b9fdf7","2003-12-21 17:55:40+00:00","Highlight the correct (I hope!) menu icon during conversation, and do the
cheesy menu fade-in/fade-out.

svn-id: r11831
"
"5b1783d15475d70c30dda81f517dc9762b0c0a33","2003-12-21 18:26:56+00:00","Make sure plugins are loaded when the selector is running.

svn-id: r11832
"
"2be2cb6d3e843111a4c862e084510b5a811d699b","2003-12-21 18:36:20+00:00","The rewritten Timer class actually allows us to get rid of several evil hacks in the SMUSH code (which were previously needed to avoid various race conditions/crashes/hangups)

svn-id: r11833
"
"e342d624d0fb9bbdc9c2a90a0ec1afcf8065dcec","2003-12-21 18:50:05+00:00","fix mouse bugs (fixes chess puzzle)

svn-id: r11834
"
"dfa5e09aece8eefd582c51822214b3a207316bfa","2003-12-21 18:50:44+00:00","cleanup; fix endian bug which caused the dreaded Simon1 hang on MacOS (_palette_color_count was treated as a 32 bit int when it is only 16 bit -> once again proves that one should be really really carefully with pointer cast hacks!)

svn-id: r11835
"
"4cc5f3cd2a6f3404ee86151f6304ea86685d0789","2003-12-21 18:58:25+00:00","Avoid duplicate entries due to case.

svn-id: r11836
"
"927964c588470f99c957d4b3b5853c94a2dd6653","2003-12-21 19:01:39+00:00","tiny cleanup

svn-id: r11837
"
"9c9ee18ff8f95b79e89c69767fafbbf9a69caa4e","2003-12-21 19:06:57+00:00","Avoid Loom dupes.

svn-id: r11838
"
"2e99e3f1f9de9e8a5da3b30d4acf7294f6b67689","2003-12-21 19:24:14+00:00","disable custom new/delete/free by default (only keep it around in case it comes in handy again in the future)

svn-id: r11839
"
"d2bfdd81163dcafc67f9c9eab0eda24a10d318bc","2003-12-21 19:36:21+00:00","Invisible mouse pointer fix.

svn-id: r11840
"
"7def9b7efb88e5b87546b57ba3f0e55ede6ba72b","2003-12-21 21:58:36+00:00","added workaround for scriptbug (fixes ending sequence).
Sword1 is completable now with some graphical glitches left to fix.

svn-id: r11841
"
"bb38b7f75fc686bb215b0ca56fc034949f2e43e5","2003-12-22 00:10:43+00:00","changed some stuff with track_flags param in IACT handle smush code

svn-id: r11842
"
"6b0fb6585cf31bbd341a7da8fa60be5f09eb2381","2003-12-22 00:34:02+00:00","work around a GCC bug.

svn-id: r11843
"
"fd4417e6bbe0a571e51c1cb82e9941c455b9ce76","2003-12-22 01:20:47+00:00","changed the way the control panel is started

svn-id: r11844
"
"44f1ed75fd76fd9842acd5784a31672a37536996","2003-12-22 02:47:43+00:00","added code for non-looping music and implemented fading

svn-id: r11845
"
"1e5496b2c8fc998e9210d90e05ff006e0409918a","2003-12-22 08:22:04+00:00","Moved bundle music code from class Sound to IMuseDigital (seems more natural; and allows for various cleanup)

svn-id: r11846
"
"d668694d667413df77f51955e18dd96245486f7e","2003-12-22 11:08:35+00:00","Switch back to older method (Used in Hebrew version) of combined speech and subtitles for Simon2.

svn-id: r11847
"
"03d9d233aa9e4926b7af8f89df61702932e85f20","2003-12-22 11:16:10+00:00","Add queen

svn-id: r11848
"
"4ae44e1e0442b7b4af4292fa1a88e6bd9df0e97b","2003-12-22 11:22:06+00:00","Namespace fix

svn-id: r11849
"
"a6fb0fd5538a3c04806772df051c0103206fad42","2003-12-22 11:22:51+00:00","Added abort

svn-id: r11850
"
"42cea0975a39b570a2e0a463530a0dc0534db8b3","2003-12-22 11:23:40+00:00","added fnSetPaletteToFade/fnSetPaletteToCut

svn-id: r11851
"
"7ab78ea26a7d42ea208df7057cefe65128731a02","2003-12-22 11:25:51+00:00","Preliminary support for queen in the old codebase ...

svn-id: r11852
"
"7fec7cc1aeb3bcbdfb6c2d3dcbc614bb17742eb3","2003-12-22 11:51:27+00:00","another change to verticalMask(). this should fix the remaining sprite priority issues

svn-id: r11853
"
"1605103a066ae458b95c5a7ad130ca7b130a32ce","2003-12-22 17:38:49+00:00","Change to arrow cursor when displaying the inventory menu

svn-id: r11854
"
"73f10cd5900b2544aa46d3a7b810b7b6bb2ba2a5","2003-12-22 19:03:32+00:00","fix for bug #864478 (Smush audio streaming); cleanup

svn-id: r11855
"
"c57402160d900e134c3fcb1d03de73d4278a2e26","2003-12-22 19:05:49+00:00","Subtitles in the FT/Dig intros should be working again. At least until
INSANE is enabled. Could anyone explain to me what's supposed to happen in
the 'if (_insanity)' case?

svn-id: r11856
"
"e01c3e1b1d04188e4aca270d3e5fd715fdffba2c","2003-12-22 19:08:19+00:00","o Got rid of Channel::destroy() method (no more evil 'delete this', plus
slightly more efficient)
o Fixed potential memory leak in SoundMixer::playRaw
o Channel not anymore friend class of SoundMixer
o misc cleanup

svn-id: r11857
"
"cb782764b40fd15c5234e33faf0747e5ebf995b3","2003-12-22 19:19:04+00:00","Fix warning generated by the incomprehensibly picky MinGW GCC compiler.

svn-id: r11858
"
"cc241c52ccd0ffe7de42e1ba172fe8d42d602649","2003-12-22 20:28:27+00:00","actually, converting a sound handle to a sound index is an evil hack, too... :-)

svn-id: r11859
"
"5b38b9ccbe7ec5c622af89ad64165949c2755572","2003-12-22 22:39:16+00:00","some changes in imuse digital (synced with local sources)

svn-id: r11860
"
"2df01e0abbbf9612a9ded5ac41cd3536ae4d7ff6","2003-12-22 23:21:28+00:00","fixed screen and music fading

svn-id: r11861
"
"e9ff3a114614eff35f5bfe0a8bb59a11a9df5e36","2003-12-22 23:38:23+00:00","fixed some animation bugs

svn-id: r11862
"
"13d057101893c34911701e6dfd538c7ca4f15dc4","2003-12-22 23:45:55+00:00","fix warnings

svn-id: r11863
"
"47d744428b79a7f88710c35cbf4e74c2040b6657","2003-12-23 00:10:08+00:00","must use pauseHandle, not pauseID

svn-id: r11864
"
"4abee143106cf5732e16e0b57f2474a5174bf27c","2003-12-23 00:17:29+00:00","cleanup

svn-id: r11865
"
"a1831ee4fb19f9ad2f02005ad8e4425e26ea8cc1","2003-12-23 00:59:18+00:00","Microsoft Compilers : Which part of the standard do you want to break today ?

svn-id: r11866
"
"10bdda505c1f166de4997fdb06fb58c375eae4eb","2003-12-23 06:35:17+00:00","simon2dos/talkie used different expire_vga_timers() code.
Solves several bugs.
Using simon1 timer_proc() seciton as work out for speed issue at the moment.

svn-id: r11867
"
"fcbc612afe5057a28f396253308ec9536f6b851a","2003-12-23 06:48:08+00:00","Update Simon2 issues.

svn-id: r11868
"
"f68194619298c06b72a016bbfb1486154ccdfd26","2003-12-23 06:55:26+00:00","Add comment

svn-id: r11869
"
"35be4ef55437cdf80396568eadd8a98741e6e389","2003-12-23 08:59:30+00:00","Add var to track current subroutine been used.
Add work around to display one section of Simon the Sorcerer 1 introduction in lower half of screen.

svn-id: r11870
"
"96012738245743c8e020076ca09a5386637445aa","2003-12-23 09:03:29+00:00","Ooops

svn-id: r11871
"
"0727697db00b778cb4985b24d8a3848b10771597","2003-12-23 09:08:11+00:00","Add correct value from simon2dos disasm.
Last value was guess for smooth scrolling.

svn-id: r11872
"
"2ab86ff62a37f9f4094c0b1fa64e19f1a3f315a9","2003-12-23 10:00:51+00:00","Fix inventory flashing when using F10 in Simon1 after conversation.

svn-id: r11873
"
"94750df7ee5255e8983514cdafdda9a67b330cf5","2003-12-23 10:08:54+00:00","Ooops

svn-id: r11874
"
"10579f2e75f34efce0cc114697996d87d8d3a1ee","2003-12-23 10:47:36+00:00","Add delay to help reduce cpu usage in some sections.

svn-id: r11875
"
"5c33399f055987362960f77990feefabfdc60eb7","2003-12-23 13:10:46+00:00","Update Simon1/2 compression details
Remove mention of backups, we don't alter the source files at all.

svn-id: r11876
"
"e35a7a2b9073e29273ff53ce1158a977b3428e52","2003-12-23 16:58:06+00:00","control panel changes

svn-id: r11877
"
"88d7cd586d49aa9133383d95833e7129f1ae22ee","2003-12-23 17:34:23+00:00","fix control panel bug

svn-id: r11878
"
"43875b42fcefae5e0f009acd87407e8d545623c6","2003-12-23 19:14:57+00:00","Allow sound ID for MP3/Vorbis sounds, too; cleaned up Vorbis playback code a bit

svn-id: r11879
"
"3f77642948a824e6e198c93a455fbf3fbab7e507","2003-12-23 19:18:20+00:00","Replace the DOTT/SAM hack (which ensures that only one SFX is being played at a time for them) with proper code: instead of hacking the sound handle, we assign a fake sound ID to the SFX, thus ensuring only one is playing at a time

svn-id: r11880
"
"e9269257f3da947eca3fb167b279fbe91650157a","2003-12-24 00:25:18+00:00","turned PlayingSoundHandle into an 'opaque' (well not really :-) data type, mainly because people kept (accidentally and sometimes on purpose :-) misusing them

svn-id: r11881
"
"3cd69b641f9de8a4e7a8d1358c4aa49e18dd7559","2003-12-24 00:26:52+00:00","Should apply to all Simon1 versions

svn-id: r11882
"
"e9b193f2e5237fe7521951f33003183715f3d1ef","2003-12-24 02:25:59+00:00","fix drum channel

svn-id: r11883
"
"032d8ad52e82de5f171de1abf751ae5a5bb122f7","2003-12-24 12:53:07+00:00","fix various buglets (like, only 15 of the 16 channels were being inited; also, the 'All note off' code caused odd problems, not yet sure why. I am disabling it for now)

svn-id: r11884
"
"3472e930513cce9268d99bee7a69aa29ee9720af","2003-12-24 12:54:33+00:00","explicitly turn off all active sounds -> not all MIDI devices support the 'All note off' event, at least according to http://crystal.apana.org.au/ghansper/midi_introduction/midi_channel_mode.html ; and now, the quicktime MIDI code doesn't support it anymore, too ;-)

svn-id: r11885
"
"1af37210a6d402680c7ede3cd96126e6ed7a2634","2003-12-24 16:16:00+00:00","simple unit tests for List/Map/String classes

svn-id: r11886
"
"c76d86c68f6dd89e90687dff3559b32ad99dfc89","2003-12-24 16:17:13+00:00","added test target to Makefile (so you can do 'make test' now, provided you have cxxtest installed)

svn-id: r11887
"
"03677b2d65e7e80f12832694cfb7b656fc45433a","2003-12-24 16:27:10+00:00","test is a PHONY target

svn-id: r11888
"
"289877a5f0b6e9a95e82a00525d2abeaf0f5ecdb","2003-12-24 16:52:57+00:00","cleanup (code should be 100% equivalent)

svn-id: r11889
"
"43b8312c80595dc8c4444c425fda972aeadd91d8","2003-12-24 17:03:42+00:00","muse use even size when pushing data into a mixerstream

svn-id: r11890
"
"88cdcc9193a4326558cee17c9c6ba775b516e813","2003-12-24 17:29:07+00:00","fixed compilation

svn-id: r11891
"
"5665d137f6bae488ac19539acdcfe441f514a9d6","2003-12-24 17:30:47+00:00","fixed ft sounds channels initialization

svn-id: r11892
"
"859a9c01290dc6022f99c7fd99ff91d62a3153dc","2003-12-24 17:42:22+00:00","o Added SoundMixer::isReady()
o Removed SoundMixer::bindToSystem()
o In scumm, replaced _silentMixer, _silentDigitalImuse and _noDigitalSamples by SoundMixer::isReady()

svn-id: r11893
"
"8c4b9bd8d683e862ae8e35d0c53d99b261961ad0","2003-12-24 17:47:43+00:00","fix memory leak

svn-id: r11894
"
"3fe9778b04c7c65db30300d598ee0e90df8e524e","2003-12-24 17:47:51+00:00","cleanup

svn-id: r11895
"
"3c53d00fe6b65157ad5b64048b1f506d1539d7eb","2003-12-24 18:07:44+00:00","removed usage auto free flag, and fixed stupid bug related with sample size

svn-id: r11896
"
"d701edbb3171f7ce9c36783ea3a2c4c9755a9ee7","2003-12-25 00:18:41+00:00","Fixed bug when Ben disappeared after some battles.
Fixed bug with correct scene ending behaviour, now FT Mac Demo is completable.
Fixed some bugs with cavefish actor.
Cleanup.

svn-id: r11897
"
"b241e31e04cc7524e0e8176373744ce054ce4d83","2003-12-25 02:46:04+00:00","cleanup

svn-id: r11898
"
"01c4fd955c80ac2d0009911d3fe1a1f590d7369d","2003-12-25 02:55:00+00:00","Fix pause mode during video/smush playback

svn-id: r11899
"
"c8d0708d93c38c44a7b88a3ce7c7a5badc56bd97","2003-12-25 05:30:23+00:00","Updates: Full Throttle INSANE, Simon thing stuff, FOTAQ/BS1/BS2 should be completable apart from cutscenes in the Swords.

svn-id: r11900
"
"278d32c6070e897c46d06a5093054dc1edbce540","2003-12-25 05:53:29+00:00","Enable INSANE by default.
Later #ifdef INSANE may go away at all

svn-id: r11901
"
"b8b67276673021ff770bb5409f67444742d2ab04","2003-12-25 06:34:13+00:00","Enable INSANE by default.

svn-id: r11902
"
"55276f7c19dceb46df429fbae5b130e6570005f2","2003-12-25 08:25:04+00:00","added support for start play ft smush audio from middle of san file

svn-id: r11903
"
"7384fce368e1f961b72da2b00e6affca81229236","2003-12-25 08:48:51+00:00","Spelling. Yes, I'm a hypocrite :)

svn-id: r11904
"
"9482d3b5a2c6516867011cf22ce07d83df8be1f9","2003-12-25 10:38:55+00:00","Fix compile

svn-id: r11905
"
"1abfe5d63f11d954278b9d987bde78770629fe78","2003-12-25 11:14:05+00:00","start sound call directly digital imuse, only script part handled by mainloop of scumm script

svn-id: r11906
"
"35cbe8d3a008363a008012d897dea087d5641547","2003-12-25 13:56:22+00:00","some changes to digital imuse

svn-id: r11907
"
"964b34e7218d7c6c297e0b3af19625319a0f7f50","2003-12-25 14:01:38+00:00","ops

svn-id: r11908
"
"e274286952c329180b6de5b8b04d495101bc3116","2003-12-25 14:03:04+00:00","cleanup (TODO: reduce code duplication)

svn-id: r11909
"
"491f319dc77eab925910860b426bada2e77c0ebd","2003-12-25 14:24:17+00:00","Patch #863997:  Build Script for Slackware

svn-id: r11910
"
"509ce7c4dbdba6979527066df33d23e453a241d1","2003-12-25 15:09:23+00:00","cleanup; fix File::open usage (do not hardocde constant values, rather use the symbolic namescvs diff | bbeditcvs diff | bbedit

svn-id: r11911
"
"8fae7be2fc285805e7906d0e2e9c88e5aab29d54","2003-12-25 15:19:49+00:00","workaround crash on Intel systems (and it was *not* caused by me, mind you! :-)

svn-id: r11912
"
"505914754fc6daffbc49b00d5c2564e0b6773f84","2003-12-25 15:27:19+00:00","cleanup

svn-id: r11913
"
"bd4ac34b1d98b2628361d3274c841312137a4390","2003-12-25 15:46:07+00:00","cleanup

svn-id: r11914
"
"f0b412debcac15dfc794ccb1789865ff38b581d2","2003-12-25 15:47:15+00:00","don't pause imuse digital anymore

svn-id: r11915
"
"664af894bbf9b35ae2a624f7b625e819941adfab","2003-12-25 16:13:51+00:00","disable FT imuse sequence, sound table is broken

svn-id: r11916
"
"67dcc6e1ba9e0637bd44e8154c15902bfc907d0d","2003-12-25 16:52:31+00:00","fix some buglets

svn-id: r11917
"
"c07a290d8c147b7adf649dcd3943728437379738","2003-12-25 17:23:49+00:00","disable the reverb hack for now; at hacked in sound font support (specify 'soundfont' config option with path to a .SF2 file); simplify code a bit by using OpenDefaultComponent; allow usage of any music device, not just the DLSSynth (this may or may not help people with real MIDI devices)

svn-id: r11918
"
"88873d5b319457f9c92139d9da7828517a71ed9b","2003-12-25 17:52:25+00:00","be stricter about File::open params

svn-id: r11919
"
"feb39c5b05c6c0a101fb81b5740140c0a4cc5f30","2003-12-25 17:59:10+00:00","updated kernelSetFunctions opcode 20

svn-id: r11920
"
"6a318fcdfee08730042154507bd5a89b02f52f16","2003-12-25 18:00:30+00:00","cleanup

svn-id: r11921
"
"aeb3bd33c22af075438ef2c9ff5bab43172dff75","2003-12-25 18:21:03+00:00","Fix for bug #809942 (COMI: Guybrush disappears before Hotel on Blood)

svn-id: r11922
"
"7a7548c1a86e886c61daf51fa59f2313798e5b8e","2003-12-25 21:27:45+00:00","cleanup

svn-id: r11923
"
"3d7945e3314a80ee5be69cbc4740890b6b4b18ca","2003-12-25 21:33:30+00:00","cleanup

svn-id: r11924
"
"b5db74b2ac52d6d15ac8a5f2405a49c9310eb83f","2003-12-25 21:56:12+00:00","_inventory was sometimes accessed one-based and sometimes zero-based -> always use zero-base, for consistency

svn-id: r11925
"
"232722b5ab7d9241a6353b2466ed7b1ec7a25a66","2003-12-25 21:59:51+00:00","two COMI TODOs

svn-id: r11926
"
"dc116a34af507cc13fc9a9cd71057c5b23029804","2003-12-25 22:03:46+00:00","yet another TODO

svn-id: r11927
"
"3959b96c9a84829e931a53a99846c04f0b1c792a","2003-12-25 22:05:02+00:00","Fix for bug #734154 (DIG: Savegame/Island names)

svn-id: r11928
"
"cb628da846d37fc275e69a1a264c146fc59da0b9","2003-12-25 22:36:55+00:00","fix indirect palette cycling

svn-id: r11929
"
"27e32a7b4223dd45370c45f5a4cd9bd279fed36a","2003-12-25 22:49:10+00:00","fix debugger

svn-id: r11930
"
"b7efa3f137cba94ead814d43387ab49dfac62d2b","2003-12-26 00:44:01+00:00","I got some buffer overflow warnings, seems 200KB isn't quite enough...

svn-id: r11931
"
"91f5f1687cc40f1385c62655973c3dd65266e250","2003-12-26 01:32:29+00:00","logic fix: we must do wrap around *before* read, not after. otherwise eosIntern will in some border cases return wrong results; some cleanup

svn-id: r11932
"
"2755d9c00af078e610160c6a976b331170970a80","2003-12-26 02:19:31+00:00","add param to playInputStream which makes it possible to retain an input stream even after it has been given to the mixer for playback

svn-id: r11933
"
"a3b09e7313c5bb937b45513e8e7024ea1e76d226","2003-12-26 03:07:01+00:00","look for data/speech1/2.clu and data/speech/speech.clu, instead of data/speech1/2.clu and data/speech/speech1/2.clu fixes running from cd or using the same layout as the cd

svn-id: r11934
"
"084429acfd71527ad1e60f43c195d50d61d6e0a2","2003-12-26 06:31:36+00:00","Update help

svn-id: r11935
"
"74b64fdf839d014ee51cbc0f3a692bd0f6d160a2","2003-12-26 06:38:45+00:00","Update help

svn-id: r11936
"
"61be90c418934a988b1ee284312df92b80dcd656","2003-12-26 07:31:39+00:00","Use digital sfx for HE games

svn-id: r11937
"
"908fbe2ac563f41b039da0392baa60207331d64d","2003-12-26 07:59:55+00:00","Set _sfxMode in HE games.

svn-id: r11938
"
"a45e92efed3715b3bb0b1191b718207b191ab1ae","2003-12-26 12:15:23+00:00","passthrought v7+ sound voices by imuse digital

svn-id: r11939
"
"ffbfe8922a3cfa2d2750fca3a2cb2d953fd1e4ca","2003-12-26 12:58:27+00:00","new debugging code, using Common::Debugger

svn-id: r11940
"
"aa26fa0681ebd871ff976e6aec4d112eb9b21a19","2003-12-26 13:13:56+00:00","when introducing a constant used throughout multiple files, best assign a *name* to it, else you're digging your own grave on the long run :-)

svn-id: r11941
"
"692fca88c2564d78b364ed13d98e8e9d4b3a424e","2003-12-26 13:14:03+00:00","fix warning, add TODO comment

svn-id: r11942
"
"802ebb584fdaaa6ac4315f8f12c2b2ddb9b81bf5","2003-12-26 13:36:12+00:00","it should be _voiceVocData

svn-id: r11943
"
"e05e079116cd9d63ebd06688a67264abe1aadb9b","2003-12-26 14:49:49+00:00","enable original screen blankers

svn-id: r11944
"
"5da05a84cb7b56233bfeb663a48d2b2515999752","2003-12-26 14:52:07+00:00","oops

svn-id: r11945
"
"749b5d4ca52c4af402dab8727f752234ff9396b7","2003-12-26 15:36:28+00:00","cleanup

svn-id: r11946
"
"612266d8a514a15a8ccf91956908a8b742587df2","2003-12-26 15:48:41+00:00","forgot this

svn-id: r11947
"
"23f03b4ad0ca459bebba8f73f15fd2d83cbff800","2003-12-26 16:44:25+00:00","corrections for pan control

svn-id: r11948
"
"7c6e720a82bfcc9d7be669ddbabb2dcf96d99c1c","2003-12-26 20:16:34+00:00","some fixes to imuse digital

svn-id: r11949
"
"ec56e09af6a56e7d90bf97ed5723b21e7f2fcb26","2003-12-26 21:40:30+00:00","change IMuseDigital to 'own' the AudioInputStream (the idea is that eventually it can use a custom AudioInputStream, and thus implement a pull interface instead of push one)

svn-id: r11950
"
"160b94fdaaa585f0af5a9d6dde3b2a839109d663","2003-12-26 22:53:30+00:00","added handing voc loops

svn-id: r11951
"
"706d2f1e5a978c507666f6669aa3e21fc095a82a","2003-12-26 22:55:48+00:00","ops

svn-id: r11952
"
"e3e6bb3191f57179874447b4f264721a2bc8a128","2003-12-26 23:11:35+00:00","got rid of those _maxFOO macros, replaced them by access to the equivalent _numFOO variables

svn-id: r11953
"
"8ef9dda8cc89dee770f2e4ec93a1bb3096592c9a","2003-12-26 23:49:46+00:00","cleanup

svn-id: r11954
"
"eeb541850496c674663b9fe75c834977f5646284","2003-12-27 00:10:20+00:00","more robust resource saving; also save resources with idx 0; renamed Serializer::saveWord/loadWord to saveUint16/loadUint16

svn-id: r11955
"
"864015333146f3a94deb82003837e0cfa295595f","2003-12-27 05:43:03+00:00","Search additional folder for BS1

svn-id: r11956
"
"cc736194dc505918b2bcdf4de065621f76fc2364","2003-12-27 06:53:22+00:00","Add a few more Simon todos

svn-id: r11957
"
"9bb75693b0f95bba536a5db931d7d583f1c5c866","2003-12-27 11:34:54+00:00","Typo

svn-id: r11958
"
"5bbb3be15957d664ec67d9ed7efc5cc02f750b75","2003-12-27 12:58:26+00:00","enable alternative introduction

svn-id: r11959
"
"ed41771d1fb07350ed5ea1a49e0c457e43e245be","2003-12-27 13:52:48+00:00","spelling

svn-id: r11960
"
"d0ceed85a5f74b10d29f1295dd5642fdef4c5a3f","2003-12-27 14:03:07+00:00","cleanup

svn-id: r11961
"
"0aa79932183eefdbfc512f73469ccdca4ddde0fe","2003-12-27 14:10:45+00:00","renamed VOC functions

svn-id: r11962
"
"436b5c5f7db0c4e18f3c86206c234ef1fab1f02b","2003-12-27 14:11:03+00:00","Use VOC reader from voc.h

svn-id: r11963
"
"8c219c54277695184eae0c501da4c712141ce692","2003-12-27 14:21:24+00:00","TODO update

svn-id: r11964
"
"a567b741e7f0711909bbcaf001b4adaa7ebc54b6","2003-12-27 14:27:30+00:00","fix subtitles option

svn-id: r11965
"
"17c189d1f9c40e79ccddcea1a1d972b2642abe99","2003-12-27 15:22:59+00:00","get rid of _noSubtitles, use ConfigManager directly instead; clean up some IMuseDigital oddities

svn-id: r11966
"
"87a168bc1b11df058ea32ced414ee8fd74313d70","2003-12-27 15:24:49+00:00","proper error instead of silent (and fatal) failure

svn-id: r11967
"
"cfaa5ee357e2ac1d43fa0b7bd79457bebd81a295","2003-12-27 15:26:04+00:00","nicer error

svn-id: r11968
"
"49af58a0318ec5484c52fe21ad925792b972a25b","2003-12-27 15:39:18+00:00","add some comments; convert tabs inside table to spaces (otherwise the table is not really readable unless you have the precise same tab settings as the table author)

svn-id: r11969
"
"d3224918e53becc575ddbbaac1035591c6eaa626","2003-12-27 15:41:46+00:00","oops

svn-id: r11970
"
"1d2e7f7e38e89cd6abd52617b89799f8ed98fe45","2003-12-27 16:11:05+00:00","no need to convert data to stereo, the mixer can handle mono data just fine

svn-id: r11971
"
"16971b582bccd013a9b9887a14583bbf47432235","2003-12-27 16:19:06+00:00","fix VOC playback; create AudioInputStream earlier

svn-id: r11972
"
"811a6d4bb8581204a465bc00c66fdb00b3475bb3","2003-12-27 16:32:16+00:00","append more data the first time around (this avoids a stutter problem, which was caused by an underrun of the audio stream; note that all this is just a temporary fix, once we switch to a 'pull' strategy as opposed to the current push, the problem will go away automatically, due to design :-)

svn-id: r11973
"
"c0cc941ea4be1190f7a046c7c36b55918e907c31","2003-12-27 16:40:01+00:00","try to make it more obvious how certain timer freqs are derived

svn-id: r11974
"
"f6ff11509ccc3494e5160865b8f7fe38c6a75581","2003-12-27 16:49:58+00:00","update bundle music every 1/10th of a sec (there was a very noticable delay before music started playing at e.g. the chapter 1 screen in COMI

svn-id: r11975
"
"25a7b9ef3330fe04894eb954e297c85be9e102c8","2003-12-27 18:29:21+00:00","fixed compilation

svn-id: r11976
"
"8621ee3b117daa14590b4ed5106cc677796c0bec","2003-12-27 19:16:03+00:00","cleanup

svn-id: r11977
"
"f8dac71c8faeb08fb52e606d47e8cb9f03961351","2003-12-27 20:52:20+00:00","more cleanup

svn-id: r11978
"
"af2d9b9a163fa9d8d3f35e692f73c12872886f52","2003-12-27 21:14:57+00:00","fix volume problems (I think...)

svn-id: r11979
"
"fabcb25a68fca9ec4444adafc008eccf226069a8","2003-12-27 21:31:41+00:00","paranoia

svn-id: r11980
"
"d52280ab016ddf10ee2a88924a952423b5c0fce6","2003-12-27 21:31:49+00:00","cleanup

svn-id: r11981
"
"6f6b0885b47a449677c8ea5f71fd16a3e415bfc9","2003-12-27 21:32:37+00:00","fixed a crash-on-exit

svn-id: r11982
"
"12aea7c0da2ac9be311efc6b8307881ce67c6ee1","2003-12-27 21:33:34+00:00","fixed another potential crash-on-exit

svn-id: r11983
"
"bcba9807358b3b121cc97d282a093afaefe623da","2003-12-28 00:19:56+00:00","don't do double-free

svn-id: r11984
"
"effc207b694c3d2a60fc364e3ea919dea1de9a50","2003-12-28 01:17:29+00:00","- added 'song' debugger command
- restore music after loading game
- fix for bug in Roland Floda Corridor music
- added LE struct reading methods (and renamed the old BE ones) for future compatibility with original DOS savegames

svn-id: r11985
"
"dd7fc9f8ef5095d3ee731758978a0cf22ba9d36d","2003-12-28 01:47:37+00:00","Cope with song '0' (old savegames used to use this 'dummy' value)

svn-id: r11986
"
"e8cddcbda0fafb09806814568b7e68aa3f6c13a6","2003-12-28 02:08:13+00:00","Fix for bug #866453 (MI1EGA: Background pushed to side at end of game)

svn-id: r11987
"
"dbe01121eb387ee6696e196a3187d3f7675adfb0","2003-12-28 03:31:05+00:00","Improved music code a bit. still has 'hanging notes' when stopping music, though.

svn-id: r11988
"
"e76c4c9ebe0961b0dbef37c8bfd317a116e94dc5","2003-12-28 03:56:13+00:00","Need to call this as well to properly stop music

svn-id: r11989
"
"e91224589f740e52bc5788b9e1e90cbe4d22dc28","2003-12-28 05:52:52+00:00","Add additional case for putt putt games

svn-id: r11990
"
"47c698c8b8453b6762f2752cc2e8e41f8472f81e","2003-12-28 07:57:36+00:00","Proper FLU files seeking. No more seek crashes

svn-id: r11991
"
"7bf0cc2a98f05429f6504573dad22496160086d8","2003-12-28 09:14:00+00:00","FT sounds have loops in voc data: 65536, that could be max loops or unfinite loops

svn-id: r11992
"
"28199bc8401dbadab9c0d9ab14dcc8559ddc6bbe","2003-12-28 10:39:39+00:00","Putt Putt games use old calculation

svn-id: r11993
"
"6c3e0134c26947d6a7f53a731ae2a1a5f27ad815","2003-12-28 12:51:18+00:00","Putt Putt games use old calculation

svn-id: r11994
"
"db5a2ba1c8ee7ec43f80aa24a60b3a9fe2afd4d7","2003-12-28 15:01:44+00:00","Not all sound effects are mono, so we need to check.

svn-id: r11995
"
"302c9f72fcf76cde76a3ee467b0fe5771a5faa3f","2003-12-28 15:02:21+00:00","I believe this is the evil bug that's been corrupting my SAVEGAME.INF. (I
can't reproduce the problem under Windows though.)

svn-id: r11996
"
"6ae8218d537a2b627a0abad597d5084c796d1de8","2003-12-28 15:08:12+00:00","Hopefully the last big renaming. Now the datatypes have names like
'StandardHeader' instead of '_standardHeader'.

svn-id: r11997
"
"67159d453998c3aae395f4fba943111884ea03e7","2003-12-28 15:29:05+00:00","cleanup Resource class a bit :
- re-use some methods to read the resource table (normal / compressed)
- removed _gameVersion member as we can do without it (and is mostly
useless in case of a compressed data file) ; now, we use the
'JAS version string' as it is sufficient to detect if the game is
a floppy version / demo etc.
- const'ness
- tweaked checkJASVersion() for interview mini game

removed (useless) dirty hack in Logic::changeRoom() to setup initial
scene in demos (pclogo.cut doesn't exist at all !)

svn-id: r11998
"
"584f76ada6135b145d75247c0092001aac356252","2003-12-28 15:50:10+00:00","This could be wrong so feel free to revert, but it does seem to fix crashes
in the Mine Road sequence of Full Throttle for me.

The crashes were always in proc64(), with 'en' being some ridiculously
large value. The function, as it was written, did not make any sense to me
so I rewrote it with the assumption that it's there to remove the 'en'th
element of the _val216d[] (remaining enemies?) array.

I don't know how well it will work from proc63() if there's more than one
element to remove - at least if the elements to remove are neighbours - but
maybe that case never happens.

svn-id: r11999
"
"1efa471292e6ac1321e587af8c59bd09eb98c4f9","2003-12-28 15:59:31+00:00","Removed incomplete sentence. If anyone knows what it was supposed to say,
feel free to put it back. The revision before that section was rewritten
didn't provide me with any clues.

svn-id: r12000
"
"d8b0a3871841b90d3d6dbb1d0f0cf5ddee2b1299","2003-12-28 18:10:18+00:00","When showMenu() redraws the menu, redraw the empty slots as well. This
fixes the 'ghost' items left behind when combining two inventory objects in
such a way that one of them is used up.

svn-id: r12001
"
"85deabed70b2f0dc96c8cd3f5025a424a30ac85a","2003-12-28 19:03:35+00:00","Indentation fixes: changed spaces to tabs. (These tend to really stick out
in my editor, since it shows tabs as eight spaces, not four.)

svn-id: r12002
"
"2548df9cf8ae51a55a7959ca24741a9f8ceb8414","2003-12-28 21:18:03+00:00","cleanup

svn-id: r12003
"
"e9766658b666dfe5065ccb5f27549f0719b16cda","2003-12-28 23:24:03+00:00","this fixes the remaining glitches

svn-id: r12004
"
"7e388f2237a9ad22214374bac3ffbb2a9d14f21a","2003-12-29 08:19:57+00:00","Add support for mp3 or ogg musics tracks for Monkey Island 1 for Amiga.

svn-id: r12005
"
"14cfaf88520e45205689d35ce14aaa40d2a4368a","2003-12-29 13:18:24+00:00","- hack to read patched .dog files (french & italian versions) from game data path instead of data file
- cleanup Resource a bit (add an accessor for ResourceEntry in order to avoid multiple calls to resourceIndex)

svn-id: r12006
"
"6fe24ad40a93fe508d4e42954e24963a78976128","2003-12-29 13:41:20+00:00","Emergency bugfix to keep Full Throttle from crashing as soon as someone
tries to speak. I don't know this code well enough to know if there is a
more appropriate way of fixing this...

svn-id: r12007
"
"e559a32323b6a3503aa5b2b301303773267e8c7d","2003-12-29 14:04:57+00:00","Changed spaces to tabs

svn-id: r12008
"
"ea39ef6d7dbc70198e7312770abe5ffd2000c530","2003-12-29 15:30:10+00:00","The game sets its own DEMO variable, so we might as well check that one as
checking the GF_DEMO flag. (There's still one 'unnecessary' reference to
GF_DEMO in functions.cpp, but I plan on rewriting that function soon so I
don't want to touch it right now.)

svn-id: r12009
"
"1c06aebe3993e1484b6f0479a254325e5f32df80","2003-12-29 15:38:16+00:00","made control panel use the correct fonts

svn-id: r12010
"
"9e78d9e14e923a33c9eeb630f65262ca291d1244","2003-12-29 15:50:17+00:00","Demo uses different file for music (and disable it for now)

svn-id: r12011
"
"ba44d8e98901e4c24d219811227b5fe0ed44687d","2003-12-29 15:54:06+00:00","fix resource references for soldout version

svn-id: r12012
"
"4e1e77b0a5748a1a2f763a1b8a9d5df5d66c12f3","2003-12-29 16:01:47+00:00","use correct sprite for text-on/off

svn-id: r12013
"
"0c7b09fc5e7b8b5c6fb63568c469003e99897fdd","2003-12-29 16:08:05+00:00","another reference fix for soldout version

svn-id: r12014
"
"cf7adca772da7e61400a96be10f553ed15e8f6f4","2003-12-29 16:33:03+00:00","fix for 'Klunk sentence repeated 2 times' bug (noticeable in french talkie version)

svn-id: r12015
"
"df1ba69e4ff3870c5a50b7fca93e9655157ca7f1","2003-12-29 16:35:08+00:00","more 'preparation' for interview and minor tweaks for demo

svn-id: r12016
"
"40419b1aeed7f3f51b2e24911bf8c30562e349ae","2003-12-29 17:26:56+00:00","tiny cleanup

svn-id: r12017
"
"865797cbeec0678a3042314875a0ea0f2c07994c","2003-12-29 20:17:43+00:00","- revise the way special moves are handled (demo and interview don't need a table)
- slighlty modified some asm funcs which could let the game in fast mode
- minor cleanup

svn-id: r12018
"
"bd23a44f495e32aef7e920896848cc6ad3c4bb68","2003-12-29 20:18:31+00:00","cleanup & follow code conventions

svn-id: r12019
"
"84c18f4bf1d975cbf5e81707aaccd845bd32b29f","2003-12-29 20:51:28+00:00","cleanup & use BobSlot::curPos() when possible

svn-id: r12020
"
"5d9b72ad7d7ad596c912dd5ba7cf7bf33c2b0fb0","2003-12-29 21:05:33+00:00","mass debuglevel change for less verbosity (0 -> 6)
importance/relevance has to be decided on an individual basis, if needed, later on

svn-id: r12021
"
"0dd61a56b496dc77b08a3fa7e60d65f73178b5fc","2003-12-29 21:15:01+00:00","invalidate previous dynalum value on re-init (this fixes room <-> journal issues)

svn-id: r12022
"
"bb77917c7f97e1ddd304704a237a11c314706454","2003-12-29 21:31:02+00:00","only call Logic::executeSpecialMove if asm > 0

svn-id: r12023
"
"0ea94e63a7368be39b3be21a36ccc24dad1c992c","2003-12-29 21:51:50+00:00","cleanup

svn-id: r12024
"
"b51d271cc63a9c67703b6f2404a6b20ee88b82ea","2003-12-30 00:37:00+00:00","Fix regression

svn-id: r12025
"
"55e02b5b54fc498ebbb56b3294163fe5b1a27238","2003-12-30 05:39:57+00:00","Give HE games their own IDs.
Add hack to allow puttputt to work for now.
Increase _drawObjectQue[] for law mower mini game in puttputt

svn-id: r12026
"
"d8f657adc0190c5cb388594530e9be9e97fc30b2","2003-12-30 06:24:47+00:00","Add correct solution for drawObjectQue[] overflow in lawn mower mini games of puttputt

svn-id: r12027
"
"f0c9f690e0d826fd64527cedca5a9663345381aa","2003-12-30 06:26:52+00:00","Ooops, duplicate code.

svn-id: r12028
"
"6d8d7518e94fb0c9fe133c66bb549d477c0c457d","2003-12-30 06:43:15+00:00","This is dummy opcode in tentacle

svn-id: r12029
"
"195fcb0f465f92ea40f6fd4145e04c23622fb119","2003-12-30 07:34:15+00:00","Add missing case for HE games.

svn-id: r12030
"
"d91b30c9336abc3640551855056635092f2f322f","2003-12-30 10:46:05+00:00","minor cleanup & add playSong() calls in Logic::handlePinnacleRoom

svn-id: r12031
"
"1567e39469f80b55d105057332d04fd0983ceace","2003-12-30 16:19:30+00:00","fixed fnFace() and added workaround for missing animation on train roof

svn-id: r12032
"
"9cb5cc07ff917c2ad7fb6363aa4e7223baa37056","2003-12-30 16:53:28+00:00","added generated MD5 table (not yet used)

svn-id: r12033
"
"24fcd71e8474f05462a99704ff2f7c18e1ee73f2","2003-12-30 19:07:55+00:00","cleanup for language/platform functions

svn-id: r12034
"
"cca644796ef72d12a049152f4777fb819d74b3da","2003-12-30 19:08:45+00:00","hook up MD5 database (this is still kind of a hack, but at least it shows that the approach works :-)

svn-id: r12035
"
"5593a635db1d82a1c75258809854f966dbb9ad31","2003-12-30 20:31:41+00:00","updated MD5 table

svn-id: r12036
"
"42c5524a02a61a13fcefdc5a7d3f187c5b048bee","2003-12-30 21:06:22+00:00","interview mini-game support

svn-id: r12037
"
"3230a203e480079c34ea94d1f016d81533a92792","2003-12-30 21:18:29+00:00","cleanup

svn-id: r12038
"
"5e947dab38c1238b5ac03294cdafcea50a6cda1e","2003-12-30 21:32:50+00:00","implemented mouse luggage stuff

svn-id: r12039
"
"985f24729ab1dcc827ea4082117ef5d92620fcc3","2003-12-30 21:48:10+00:00","forgot these...

svn-id: r12040
"
"80b4510da16e76fb843b69b5e2d0c969271159bd","2003-12-30 22:01:16+00:00","remove hack from original code, this was apparently only needed for SELECT_VERB (from what I understood, bob 16 was supposed to highlight the current selected verb ; but the original doesn't use it at all)

svn-id: r12041
"
"f23d990fda16e1a6db13ca089340c9b90f3b5b61","2003-12-30 22:50:55+00:00","improved box drawing in debugger (now also draws boxes of height 0

svn-id: r12042
"
"436834750d220b2bbd1f5f42c43126d699774140","2003-12-30 22:57:52+00:00","cd changing code and checking for savegames on startup

svn-id: r12043
"
"c06b1af619dbdf8e6ead166b3059447d82c5438d","2003-12-30 23:05:34+00:00","be a bit more gentle to people typing in invalid box IDs :-)

svn-id: r12044
"
"e669103b5d20a4983250f8e10ed67925d989a549","2003-12-30 23:08:51+00:00","removed old, useless stuff

svn-id: r12045
"
"49c67f4d200283dbf8a4baca136cf2ef35f02fa1","2003-12-30 23:32:51+00:00","acessing _numGraphics'th element of GraphicData array is safe

svn-id: r12046
"
"71c20c698cc84081723686fcee38170a115cea0a","2003-12-31 02:03:17+00:00","Add some md5 checksums of files for Simon1/2 games.

svn-id: r12047
"
"23fd50715fe23bf1bba2b4bc04f700cab6ae178c","2003-12-31 02:43:51+00:00","Add better detection of simon2mac

svn-id: r12048
"
"de014ec97178b36a2aa2f8e6fe958bd7211620c7","2003-12-31 12:32:34+00:00","fix segfault

svn-id: r12049
"
"edf6386a65c9d94265b2ec1306790cc7b51f3af9","2003-12-31 12:53:43+00:00","There's that incomprehensible MinGW GCC warning again!

svn-id: r12050
"
"bfd457d913117b5bc5a9d53eb81bd33c7b834f9a","2003-12-31 12:54:41+00:00","Enable the line that increases _gameCycle. There's a debugger command that
will display it, and it's so much more interesting this way. :-)

svn-id: r12051
"
"28eb8c4b76f5eb72569f7ab4138e59092ec8f15c","2003-12-31 12:58:18+00:00","Don't allow the credits to be displayed while in conversation mode.

svn-id: r12052
"
"6899aa23cb49adcddb905adcac2e9ade475e4be6","2003-12-31 13:14:07+00:00","I still don't know how to draw the credits like the original did, but at
least the credits text is showing now.

svn-id: r12053
"
"cde55eb4fadd6fec5b5b288de106fda66f24809e","2003-12-31 13:14:37+00:00","Update BS2 credits issue to reflect that the credits are at least partially
implemented now.

svn-id: r12054
"
"c85301b2a979efd0807945800f2fadd50a898158","2003-12-31 14:05:53+00:00","When saving the music state, remember the name of the music file that was
open so that it can be re-opened afterwards. It's not so much that it may
have changed, but it may have been closed.

This should fix a crash when escaping the credits.

svn-id: r12055
"
"2687402c6b754dbdce3a4b92efa1ccc8f3359969","2003-12-31 14:10:42+00:00","oops, forgot one case

svn-id: r12056
"
"15559f6646cc040a928fc011d7559054ea8492d8","2003-12-31 15:41:17+00:00","Draw the luggage first, then the mouse pointer.

svn-id: r12057
"
"d176a6a6e1b807c0f6c5ae100fd2ed0977210dd3","2003-12-31 15:52:48+00:00","Don't lose the luggage when entering the inventory menu.

svn-id: r12058
"
"1194bc9d5eb14fda4e5a44a9ced64fd5d578bb47","2003-12-31 16:15:46+00:00","use compressed data file instead of original one if both are available

svn-id: r12059
"
"9a064972c22984d06b1927395b92c3d60e5e051b","2003-12-31 16:56:16+00:00","fixed language strings

svn-id: r12060
"
"0aeae5a9b567ad825e78ef3b4f2875b3eca63f7f","2003-12-31 17:38:27+00:00","Use uint8 instead of char to avoid crashes with some accented characters.

svn-id: r12061
"
"0d327b3b79287a28974334a0b1e2408d0fb1f54a","2003-12-31 23:32:40+00:00","Some tweaking of the new credits code. It is no longer necessary to have
to have the credits.bmp file, though if you don't you won't see the
'Smacker' logo. (Whether or not this is a feature is open to debate.)

Happy New Year!

svn-id: r12062
"
"0392f86001ef84963fb950068f53b114e1d62a7e","2004-01-01 05:13:17+00:00","Add hack to stop invalid opcode in French version of Simon the Sorcerer 1.
This was a bug in original game and causes several bad effects.

svn-id: r12063
"
"7dbf520f6771f8ef81a2373025ea4e63ddfe56d4","2004-01-01 06:29:27+00:00","Subtitles check wasn't quite right.

svn-id: r12064
"
"262514958457e1dd36fba016bcfb597b4b5116ae","2004-01-01 08:42:49+00:00","Avoid memory corruption

svn-id: r12065
"
"9b4f73b8ef9c8d89dd5b0d8da2639a1156dbaf47","2004-01-01 08:55:26+00:00","compilation fix

svn-id: r12066
"
"dcbbb04d3cb7f21d654f7098ab4dc3deb814fd6f","2004-01-01 09:00:40+00:00","Reduce some buffers to more reasonable sizes.

svn-id: r12067
"
"f84500897200ad1825301286c8b1bfaeecf3a8ab","2004-01-01 10:42:10+00:00","Add work around for bug in French version of Simon the Sorcerer 1

svn-id: r12068
"
"033a847e7769ce46a13fbcdd58230d22623600f7","2004-01-01 15:15:47+00:00","Oops, that was the wrong data type. (Not that it should matter, but...)

svn-id: r12069
"
"18f8916c3aef4b0dec659a0c053517bb9c7aa880","2004-01-01 15:22:15+00:00","Rewrote the music code. It now follows the same basic idea as the one in
BS2, which has worked pretty well so far. I haven't implemented pausing and
volume since the code I replaced didn't have it either, as far as I could
tell.

svn-id: r12070
"
"cf12a5846fc6a164ad46b79c2e12c54128a69ab8","2004-01-01 16:56:00+00:00","changed music fading duration and made music system fade down the tracks on startMusic(0)

svn-id: r12071
"
"bd5ec2612b5123b87d3ef9b3ad6c9d033dba63b5","2004-01-01 17:10:08+00:00","added workaround for missing music file.

svn-id: r12072
"
"a55c9976e2758e65d3ae518d64df637877bce828","2004-01-01 17:11:43+00:00","whoops.

svn-id: r12073
"
"82ef464a69e7e8f8b0f06f1649af2507bc2b5d8c","2004-01-01 17:18:00+00:00","fixed savename drawing.

svn-id: r12074
"
"2b3d8a42dd1b15b55940d9c16d0b55e6a9e3a9f5","2004-01-01 18:00:34+00:00","implemented examining inventory items

svn-id: r12075
"
"01427a2d76e6c76b765a81890c96b9206bd81acf","2004-01-01 23:42:46+00:00","Bypass Monkey Island 1 CD copy protection on restart.

svn-id: r12076
"
"635239d9668b49dea9414b26db78c36a12e4c063","2004-01-02 00:36:20+00:00","Can be used for The Dig too, lander mini-games works again.

svn-id: r12077
"
"315dc0238ce60f1c5216ecd3622bd10d093a8656","2004-01-02 02:38:01+00:00","another change in the clicking checks

svn-id: r12078
"
"ae4b45952133cdbc76df707b549321a96acf9c89","2004-01-02 03:20:07+00:00","Fix for bug #869045 (DIG: Crash in bundle decoder); t'was a buffer overflow

svn-id: r12079
"
"4043db7d631ccd096e938e9e4eea005921644ef2","2004-01-02 04:29:04+00:00","Fix some masking issue in Putt Putt games

svn-id: r12080
"
"dfc9ac50dfb21d7021e3edbd63140ed4c177167c","2004-01-02 04:58:39+00:00","Fix missing sfx in puttputt

svn-id: r12081
"
"f1a9a86a147b383108322de7615afa44bf62ac8a","2004-01-02 07:57:27+00:00","update

svn-id: r12082
"
"750e18eab3beb692350cbe8e545646fc866f1090","2004-01-02 11:15:35+00:00","Moved the menu refreshing to a separate function so that it can be easily
accessed even when checkMenuClick() returns before reaching the end of the
function.

Used this to fix a menu highlighting regression.

svn-id: r12083
"
"bfd8549739a2c68b2589b1880341d547aabaf747","2004-01-02 13:21:13+00:00","Add another HE games opcode and case.

svn-id: r12084
"
"f7642601fe7b708a593e1aa644d315c0429f46f4","2004-01-02 13:30:03+00:00","Ooops

svn-id: r12085
"
"c7965a7a04d73f6b86cb1ef6bcdde7a4a531413c","2004-01-02 14:15:45+00:00","minor rewrite of screenblanker code

svn-id: r12086
"
"5cc0191417219a1455a6db98008b9793800ee705","2004-01-02 14:17:25+00:00","some debugger commands for bobs

svn-id: r12087
"
"5b97c9308d197b90581f9072dc87c112c5af6e1c","2004-01-02 14:17:42+00:00","minor rewrite of some asm funcs

svn-id: r12088
"
"e5ba3b172e6cb467978263e9646ba145b2dbc25d","2004-01-02 14:21:14+00:00","Tell adlib people they won't hear music

svn-id: r12089
"
"539002e23a8a368ac6d54bfe1c11f36cd514e6db","2004-01-02 14:26:39+00:00","spelling mistake

svn-id: r12090
"
"6a25db94dc011f0ed49612385590a41b7cfd5048","2004-01-02 15:07:14+00:00","Add comments for HE specific opcodes
Update hack for PuttPutt
Add another small fix.

svn-id: r12091
"
"bf23fe5fea5713a38954b43c4d13abb8320938b4","2004-01-02 16:02:49+00:00","sync with data

svn-id: r12092
"
"8bd9ce2949ca7e607da2aa18d3af7cd8e8d25a09","2004-01-02 20:05:18+00:00","- added missing MOVE_SPEAK code (only CHEF.DOG seems to use that)
- clear Talk::_dialogueTree[0] to avoid problems when accessing oldLevel / level 0

svn-id: r12093
"
"d335bce62df47217546639b8816f8203f0137d37","2004-01-03 00:33:14+00:00","added makeVOCStream() (convenience function)

svn-id: r12094
"
"96e2c239c4bc2a6f91d3fb141551eac06187b076","2004-01-03 00:55:28+00:00","removed SoundMixer::playMP3CDTrack; simplified makeMP3Stream (special variant with mad_timer_t was really only needed for MP3TrackInfo class)

svn-id: r12095
"
"56eae68e8bafde62e28af1cf5302d52424362684","2004-01-03 00:55:40+00:00","re-enabled .sog and .so3 support for FT

svn-id: r12096
"
"81481ad6da949340fc0e886b08d404b7cd3d7b77","2004-01-03 01:25:45+00:00","more MAD MP3 / Ogg Vorbis cleanup: try not to expose anything about the libs used for MP3/Vorbis support -> this eases changing the implementations, and reduces header dependencies (and thus compile time) :-)

svn-id: r12097
"
"b1d729d6dd23c093b18d9093a195a399d44d69ce","2004-01-03 01:28:00+00:00","renamed SimonSound class back to just Sound (now that we use namespaces that is just fine)

svn-id: r12098
"
"b0e23e35ee7f0b7c080e821fd521e007dcd80a18","2004-01-03 01:58:58+00:00","Introduce namespace 'Sky'

svn-id: r12099
"
"5f85df5ed6d28efb7f5327de8e09287ebe576662","2004-01-03 02:08:04+00:00","Allow queen to use adlib driver as well (that was surprisingly easy :))

svn-id: r12100
"
"1b706d35649cac533d9899edc172855fc88bafd9","2004-01-03 02:20:01+00:00","Update

svn-id: r12101
"
"d212b2c2e1bc6aba370fa5e0ae4d122cd19a2466","2004-01-03 02:29:48+00:00","replace read() by readBuffer() in CopyRateConverter

svn-id: r12102
"
"1805b07a4871d7fe704200d7a1a8f135220a0258","2004-01-03 02:30:34+00:00","simplification (possible since read() doesn't have to be efficient anymore)

svn-id: r12103
"
"8d9d0fed3f92a1ad930dde47f40d6bc0df76a2cf","2004-01-03 02:30:35+00:00","Add last few

svn-id: r12104
"
"74f958fdf141dfb08d076e5aadc82b917ddd1c22","2004-01-03 06:38:34+00:00","Should be enabled for all GF_NEW_COSTUMES games.
Fixes missing actors in craters section of puttmoon

svn-id: r12105
"
"edea972b4be9dbeb8ff500a07e3fa58d301b5e36","2004-01-03 10:49:08+00:00","eriktorbjorn's fix for a crash when sprite were completely outside of the screen

svn-id: r12106
"
"e73363bd095005e9b849a50f97cd1a9ff04e5ba1","2004-01-03 11:12:35+00:00","Delete the mutex when we're done with it.

svn-id: r12107
"
"bb8ff0cd904c89cf70c4419e068f5b0621799006","2004-01-03 11:24:39+00:00","Made the music code more like the one in BS1, i.e. the fade time is longer
and it now fades both up and down.

Plenty of cleanups, simplifications and just moving code around to group it
in what I hope is a more logical fashion.

Fixed a long-standing bug where spot effects would eventually use up all
available sound effect handles. (I may have introduced this when I removed
the expiration of sound effects from FxServer().)

svn-id: r12108
"
"2a6745a9862fc067a7b529feec0943ec56c79c7c","2004-01-03 12:29:21+00:00","changed screen drawing code to only redraw blocks that changed.

svn-id: r12109
"
"bfea71b0c46ea93b80ee2f6f08ba29ba8768171a","2004-01-03 14:10:13+00:00","renamed AudioInputStream ->  AudioStream

svn-id: r12110
"
"069c21310f411ff8987573e450c473068bb9528e","2004-01-03 14:11:11+00:00","oops

svn-id: r12111
"
"fa523f7f7ecbe844901d3b3f08456cea2541f0bc","2004-01-03 14:49:52+00:00","It was pointed out to me that we can't use the DEMO variable here, because
the missing file may be the one with the resource for the global variables.

svn-id: r12112
"
"c1cddedca88a3a5c7ea01b81ecef5fc869717d5c","2004-01-03 15:52:05+00:00","Fixed bug that made ScummVM crash when loading a savegame where the main
character was walking. (I had missed a case where pointers were cast to
integers.)

svn-id: r12113
"
"14f28d58f1094321b60a9f43b4a7988f71cdb239","2004-01-03 15:57:57+00:00","remove 'Sky' name prefix for most stuff (not needed anymore since we are in namespace 'Sky' now)

svn-id: r12114
"
"ee3558b748cfe205110bf8cb5090999916a2780b","2004-01-03 19:02:18+00:00","fix for BE systems

svn-id: r12115
"
"cf6a5c0a04a23ac4b8044710f94dc224a1538a45","2004-01-03 19:12:23+00:00","cleanup

svn-id: r12116
"
"d49082065a1cbcecffb9069e449ce5c8686ea23d","2004-01-03 20:42:18+00:00","TODO

svn-id: r12117
"
"34db2e793a22fc12b6f30289297aeead967e4f26","2004-01-03 21:22:07+00:00","added & renamed some constants; fixed & added some doxygen comments; cleaned up the dirty screen code a bit (this should also fix a bug in V1/V2 games where part of the screen was not redrawn properly)

svn-id: r12118
"
"22248a548f3794c66534d70ae297c9f25e5673da","2004-01-03 21:26:44+00:00","removed unused param in initScreens

svn-id: r12119
"
"acc4aa0fc286474d1145ba59715c0dd2b1b8f760","2004-01-03 21:29:17+00:00","oops

svn-id: r12120
"
"105895da46818a2e440fa419aab7fb1bc5818f47","2004-01-03 22:21:56+00:00","cleanup

svn-id: r12121
"
"bceb48f5e0df08dc4288de4b16b4f21c6e403fc0","2004-01-03 22:45:23+00:00","renamed updateDirtyRect to markRectAsDirty (because that's what it really does); used virtual screen id constants in more places

svn-id: r12122
"
"b9292bafe135b05503093d685f932caa54a0a30f","2004-01-04 00:44:40+00:00","cleanup (mostly moved stuff around, and replaced the fadeOut call)

svn-id: r12123
"
"87abee70c1b51258c783eeaa2e3c08d15fdbb1ed","2004-01-04 01:11:23+00:00","remove this HACK workaround - I think I may have fixed the true cause (we'll see)

svn-id: r12124
"
"1ac275e20baa3784e401ef548f7bfe6ca4137601","2004-01-04 01:20:26+00:00","I don't see why this would be needed (my guess is that the hack in initVirtScreen (to use _roomHeight) already covers this, and more)

svn-id: r12125
"
"7cc972791683c232338f01818b8ccef1fccae62d","2004-01-04 03:37:12+00:00","respond to 'alter'-type overrides

svn-id: r12126
"
"f0d0e4d4b337a9d39e384634d6ef1d1b23e329f3","2004-01-04 05:21:22+00:00","removed speed button from control panel and made the game do a full screen refresh after leaving the control panel

svn-id: r12127
"
"a9a84aee229149e1ba195ada1ce0e719a9b20e41","2004-01-04 06:31:29+00:00","added control panel confirmation dialog.

svn-id: r12128
"
"cfcb22939fc306863ccfe418e310f852173355f9","2004-01-04 06:38:14+00:00","nothing.

svn-id: r12129
"
"14cf65c0abefeebca080ec1a689af8294453597b","2004-01-04 12:35:51+00:00","uhm? I don't see why VC 2003 would complain about this, but not about the many equal instances of this code (which, BTW, is perfectly valid C...)

svn-id: r12130
"
"805f5124529dc3c1faf1eaae23d797b1c5eed1eb","2004-01-04 13:09:02+00:00","replaced many instances of _screenWidth by VirtScreen::width, where approriate (there are cases, like when dealing with the camera, where _screenWidth is correct; in other places we still use it, because the VirtScreen is not available in that place at this time, will be fixed later). Reason for all this: eventually a clean seperation will allow us to use a main screen which is wider than the real screen width -> useful for V7+ smooth scrolling

svn-id: r12131
"
"b8a260c967ad10c1fbd5ff434113c2d71ae4f044","2004-01-04 13:46:53+00:00","removed setFeatures (not needed anymore)

svn-id: r12132
"
"d16ac3e88f19dbfcad6937be2624f7983a906a5e","2004-01-04 13:49:03+00:00","turns out we always had VirtScreen::backBuf but didn't use it... change that (helps readability of the code, IMO); added Gdi::getMaskBuffer (again, helps understanding the code, I think); regrouped some functions in gfx.cpp

svn-id: r12133
"
"d1e6c6059ef41cc913ae6c80bebde1fdf044e500","2004-01-04 14:00:58+00:00","renamed global var _debugLevel to g_debugLevel; let Engine constructor init it (this way all engines get it for free, allows further cleanup); removed some useless/duplicate member vars in SwordEngine

svn-id: r12134
"
"e049e24a2c15543dd20bfb76976f3eea892b7949","2004-01-04 14:06:06+00:00","no need to specify game data path here: File::setDefaultDirectory() took care of that

svn-id: r12135
"
"dacbe84029cd69303c500b8ac502b8e6ffa4af9c","2004-01-04 14:10:06+00:00","Fix a few subtitles glitches in loomcd during cutscenes.

svn-id: r12136
"
"694f02155cba6b7f8ed5cd5d4170eba935e9dcc6","2004-01-04 14:32:26+00:00","Allow subtitles to be disabled in games using imuse digital again.

svn-id: r12137
"
"2ce4d13c048ec5b2cec8fd78071a39d14888af63","2004-01-04 14:35:46+00:00","split out cursor/palette code into separate source files

svn-id: r12138
"
"1081c789a2f4e0651b1be1f7ea577de20185a30c","2004-01-04 14:49:14+00:00","cleanup

svn-id: r12139
"
"14acddb1678c54425f7425578623e8d7220813eb","2004-01-04 14:59:36+00:00","Update a comment to reflect that some functions have different names now.

svn-id: r12140
"
"5607f41e2d842bb753a51105e474a06cb6668f6b","2004-01-04 15:05:54+00:00","Some cleanup and Valgrind warning fixes.

svn-id: r12141
"
"8a91ae32575128897c3e8be44992a2444034cd3f","2004-01-04 15:11:30+00:00","Adapted LavosSpawn's idea for more efficient screen updating. It still
renders the entire screen every frame, but it tries to update (i.e. copy to
the backend) only the parts of the screen that actually changed. At least
approximately so.

svn-id: r12142
"
"1e6512d2d2729414cbfaecfd33fbf1a38c31c5e1","2004-01-04 15:31:34+00:00","Add comment

svn-id: r12143
"
"92561301ac3886fc75f8fc287b4878f98733d9eb","2004-01-04 16:19:15+00:00","Deal gracefully with missing music files.

svn-id: r12144
"
"4ca49386ed933533efaed857ee4a94ce0570494b","2004-01-04 17:19:17+00:00","fixed cd changing code

svn-id: r12145
"
"9d547b183bfd56d94ec0b644f3ae12b668fd864e","2004-01-04 17:40:51+00:00","fixed screen updating

svn-id: r12146
"
"143b5bea80762464b4d29040b101ec606703a73f","2004-01-04 20:25:21+00:00","- added code to only redraw changed blocks in order to avoid full screen refresh
- minor code cleanup in Graphics/Display

svn-id: r12147
"
"181bb0baa521066ef2a896e22083ede5a63ff8bb","2004-01-05 00:03:18+00:00","fix bug #870433 (DIG: Scrolling regression with the lander game)

svn-id: r12148
"
"5a3aa023b66c444e7aabe0da92a934a78a655e5d","2004-01-05 00:45:17+00:00","'proper' fix for V1 MM problem; added a FIXME

svn-id: r12149
"
"b65ca3db3d828e53b97b856c67529bdd823f1dba","2004-01-05 06:53:03+00:00","Add partial support for ignoreTurns, fixes some glitches in putt putt games.

svn-id: r12150
"
"5f9cfba5485e3cd05e1f7a60356952d608e2675d","2004-01-05 11:00:12+00:00","Slowed down the credits slightly. With the recent optimizations, the music
lasted longer than the text. Now the text lasts longer than the music.

svn-id: r12151
"
"9ea89568da85d8325c88d291eb8e2bc63f41a96c","2004-01-05 11:01:12+00:00","Fixed some debugging messages so they refer to the correct function.

svn-id: r12152
"
"55167e392e54f5194a88dd61555ff113a04ab1eb","2004-01-05 11:02:00+00:00","Tiny cleanup.

svn-id: r12153
"
"8dabcaaef10227cc87c62a84598df87e814357dc","2004-01-05 11:09:33+00:00","Changed some memmove()s to memcpy(), since the memory areas were not
overlapping.

Enabled some sanity-checking code.

Fixed clearWalkGridList() so that it clears the entire walk grid list. That
was a really stupid bug of mine, and I hope it had at least some bearing on
the rare (for me, at least) walk problems I've seen.

svn-id: r12154
"
"c21e5d797cbcd19a949eed9a94ebee283af90a24","2004-01-05 11:58:20+00:00","At last - credits!

svn-id: r12155
"
"fbc4168a8e4f4ccd400f435fa4307472decfac33","2004-01-05 12:15:26+00:00","add a few things

svn-id: r12156
"
"232a709fd4bf22a0daff99b97eb5e4cc854e44f3","2004-01-05 13:40:28+00:00","added a class to manage banks, Queen::Graphics cleanup

svn-id: r12157
"
"be09d4dddc276a836e02a18f8e330e09b53a233b","2004-01-05 14:39:44+00:00","Had checks wrong way around, seems to work now.

svn-id: r12158
"
"6a7cf6d6cfb4be5d212a8d27304e11820125679e","2004-01-05 14:46:12+00:00","Marked some more structs as packed. I don't know if it makes any
difference, as they contain only 32-bit integers, but I also believe it
does no harm.

svn-id: r12159
"
"a469559d134822121b2268aebc9ca733985c2146","2004-01-05 16:19:14+00:00","added Actor::getElevation and Actor::setElevation; cleaned up costume API a bit; some minor cleanup/tweaks

svn-id: r12160
"
"f506056c3b0fee25445133aa9763fced5a131330","2004-01-05 16:30:00+00:00","more cleanup

svn-id: r12161
"
"d834bd9684c6b3f7dc8979086d467446f59ba41b","2004-01-05 16:49:14+00:00","replace more usages of _screenWidth by more appropriate variables/values

svn-id: r12162
"
"5e413ceb5c5a319d540d5c7a328509ee69a627f1","2004-01-05 20:46:37+00:00","- enabled debugger in QueenEngine::errorString
- initialise Cutaway::_personCount* when the Cutaway starts
- minor tweaks in BankManager

svn-id: r12163
"
"1e0c78d9a2f2fde032f5dd9e65c3ba710980ea53","2004-01-06 06:50:36+00:00","Add check

svn-id: r12164
"
"d62d44d29cd4a437c0caf061239a7da542c33918","2004-01-06 09:29:33+00:00","simplified room switching code a bit

svn-id: r12165
"
"55eb22fd3a4f596d35962c95775acc14973e7d85","2004-01-06 09:49:08+00:00","Made o8_getActorZPlane return the same z value as Actor::drawActorCostume computes - this *might* cause regressions, or might fix bugs, or might have no visible effect at all :-). Somebody feel free to verify this against assembly

svn-id: r12166
"
"3b20850a8906d1be6bd2eb8f2a1f506975ae17df","2004-01-06 11:45:28+00:00","no need to save information which we can (and do) recompute

svn-id: r12167
"
"cc67301791cd46bc6e81bb76ef30c45d692a7547","2004-01-06 11:47:34+00:00","renamed VirtScreen::alloctwobuffers to hasTwoBuffers; added lots of doxygen comments to VirtScreen; cleanup

svn-id: r12168
"
"e34d7b6c41054fb1093a1967639d2a328eabd5f8","2004-01-06 11:48:30+00:00","get volume from gamedetector

svn-id: r12169
"
"01c29eabf3a56e70a1262281f8435e1c5887163e","2004-01-06 11:52:12+00:00","typo

svn-id: r12170
"
"0133e40d1118eb58e89613f3e3e0d2e97a891fb3","2004-01-06 12:02:18+00:00","This one (_blitAlso) is very odd, I can't quite figure out where it is needed. Please report any regressions to me

svn-id: r12171
"
"f5f357498f27e63b2ca5dee6513f6af41087d64d","2004-01-06 12:08:35+00:00","just always call updateDirtyScreen(kTextVirtScreen) - it won't do any harm for games not using that virt screen, but fixes the Indy part of the PASS demo

svn-id: r12172
"
"2ecf66d5610df289b9d936e59c153c81a64ebef5","2004-01-06 12:16:28+00:00","get rid of VirtScreen::scrollable

svn-id: r12173
"
"7b86116a5dedbed0687ddf431be4ec727389bc42","2004-01-06 12:19:02+00:00","fixed cd changing code

svn-id: r12174
"
"2be1b4d68acb322a20eae5c4cb1bb3b7045e7871","2004-01-06 12:28:24+00:00","start work on czech subtitle support, not finished

svn-id: r12175
"
"033ff78ae97e2ef8580abe6abe8e11a32e5287c9","2004-01-06 12:45:34+00:00","updated copyright notice

svn-id: r12176
"
"1356d4c35415c09830a15c9689087a7a3336149d","2004-01-06 12:52:08+00:00","add missing comma to ensure all directories are checked

svn-id: r12177
"
"a50c228ae4bb846441182dd2a4a6619fecef107b","2004-01-06 13:06:20+00:00","updated MD5 table

svn-id: r12178
"
"dd1eb2a4b4b0eef3a771ba67d24e737f4f016e8d","2004-01-06 13:28:19+00:00","Fix subtitles glitch when subtitles are shown during room scroll in pass.

svn-id: r12179
"
"eb5c4a14499f09050ec1b9868c1eacbad93422d1","2004-01-06 13:33:28+00:00","Made sure the screen is really cleared when drawing a dialog window, plus
some other cleanups. (This was a regression caused by the less stupid
screen updates implemented recently.)

svn-id: r12180
"
"065f2bb9eb0ac7b7d7b56ef1f8e76c2638cb484e","2004-01-06 13:44:17+00:00","It's a new year in BS2 land, too!

svn-id: r12181
"
"ceda8aec0250ccc9be6ed98eae9679bb0c387cba","2004-01-06 14:21:50+00:00","moved animation stuff to Graphics class

svn-id: r12182
"
"cda20b4125725c83670ab6cc68c68b85717954e6","2004-01-06 15:56:27+00:00","Restrict to scumm7, caused invalid opcode errors when skipping cutscenes in comi sometimes and comi demo always.

svn-id: r12183
"
"60b59de181befcebc3515d54d8c18a7b05383bb7","2004-01-06 16:49:04+00:00","Never call _system->quit() directly. Let ScummVM handle that so that the
engine can be properly deleted first. Apart from being the nice thing to
do, this should make it easier to Valgrind for memory leaks.

svn-id: r12184
"
"e90f846df9f1d0e31b933d1cd0a8c28c0fbb7d1f","2004-01-06 16:53:35+00:00","- enabled debugger in QueenEngine::errorString
- initialise Cutaway::_personCount* when the Cutaway starts
- minor tweaks in BankManager

svn-id: r12185
"
"2c2ae5f59ff309950fe5ffabbdb309b89f7531b8","2004-01-06 17:23:19+00:00","fixed warning

svn-id: r12186
"
"8fd123992d746a3afa683b60790668757d0c9437","2004-01-06 17:28:29+00:00","synced imuse digital with local tree

svn-id: r12187
"
"fee145413cd6351c72b4f0a6b9114664ecf287f8","2004-01-06 17:29:36+00:00","update this too

svn-id: r12188
"
"b975f37043a338cedcc56dbfbaaf64793ef13417","2004-01-06 17:45:08+00:00","update

svn-id: r12189
"
"db5f44a8740d17f7a06f4a6e31313537e0cf94e9","2004-01-06 17:47:45+00:00","increased debug level

svn-id: r12190
"
"88303d9fe91aabec58f465451b5fdefd0ac657a5","2004-01-06 19:16:48+00:00","fix compilation on unix like systems

svn-id: r12191
"
"6c280c96f412bdee412b57646d6e3cee9e4f1905","2004-01-06 19:17:01+00:00","proper fix

svn-id: r12192
"
"c5a4022e20b10bd295f532af60c9b92f9ed23d4f","2004-01-06 19:47:23+00:00","fixed tons of warnings

svn-id: r12193
"
"d2544a28e2131874b8f343f7aeb661c370ca741b","2004-01-06 19:55:44+00:00","fix mutex usage some. IMuseDigital currently is still unusable on my system, though (it takes 100% CPU time just on the difficulty selection screen of COMI, playing a single bundle music... uhm)

svn-id: r12194
"
"74e588b854aa36728b4d8bc525887986b717488d","2004-01-06 20:00:46+00:00","- minor cleanup in Person/Actor stuff
- minor tweak in Graphics::bobSetText()
from previous commit (message was erroneous) :
- moved config stuff to QueenEngine
- added 3 Logic subclasses to handle the specific parts of each game version (demo, intv...)

svn-id: r12195
"
"465515c898bf2a81f1d3d9717aac4fbfe1b2d5df","2004-01-06 20:04:33+00:00","forgot to commit this

svn-id: r12196
"
"d5ccceddfa242c2b6cf68fcf7e78a886c4926ee5","2004-01-06 20:08:00+00:00","forgot to commit this, too <sigh>

svn-id: r12197
"
"eb32f751f725c708fa746c4fe0fafa3510c387cf","2004-01-07 01:07:37+00:00","add FIXME comments at the two worst spots, speed wise (about 80% processor time or more are spent in these places for me, waiting for disk I/O)

svn-id: r12198
"
"329fd80efd7f693baf02dacfff9f33a2b953b70e","2004-01-07 03:34:41+00:00","optimized i/o access in bundle manager

svn-id: r12199
"
"e5d70abc242ec14a81b1ee541290402fd34acf3e","2004-01-07 03:39:33+00:00","proper name

svn-id: r12200
"
"aaf54b0a14ce072e18189042c0dc5bed8201ee27","2004-01-07 03:53:36+00:00","less memory usage

svn-id: r12201
"
"c9c3a83d347a2727e7374a189d344670a0dce02d","2004-01-07 04:50:38+00:00","better bundle dir cache

svn-id: r12202
"
"5f665202d11e5fc8cca9da9d29f0a0e5251e7a0d","2004-01-07 05:08:46+00:00","Add missing break

svn-id: r12203
"
"761371cc66b4b7064f83c075a68efa925d52061c","2004-01-07 05:17:51+00:00","added code for ms track position

svn-id: r12204
"
"ad8cd22de01e2d26cc75540645e0035948d8ef6e","2004-01-07 05:28:56+00:00","Add missing break

svn-id: r12205
"
"ae4cd2291fdd13bdaa83225f2f90856e8d2eb23b","2004-01-07 05:51:56+00:00","These two subops are the same, checked dig/ft disasm.

svn-id: r12206
"
"1e2ff5a469a0ffef36a871a47439e382764c202d","2004-01-07 05:58:12+00:00","handle jumps

svn-id: r12207
"
"3577dad9492e8b12f7ed389e2dc40f58d386b3c9","2004-01-07 06:08:33+00:00","comment unused vars

svn-id: r12208
"
"97cb72885ae4751036fe6aa6a6cb091b6fc86464","2004-01-07 06:08:54+00:00","Add another check for ignoreTurns, ignoreTurns.
Should be complete for scumm7 games

svn-id: r12209
"
"9fc9e6be20bd9b81ba77e8fd503880417ed10d07","2004-01-07 06:51:45+00:00","changed lipsync func param

svn-id: r12210
"
"6d0dd6aee8abc6fbf032f925cd77a46528158646","2004-01-07 07:42:00+00:00","Valgrind fixes. Mostly about memory not being freed when the engine is
deleted.

svn-id: r12211
"
"a2fbba2e4e9a241464fc2b64de3d963e692fa2d6","2004-01-07 10:34:53+00:00","Actor flip should be reset, fixes some glitches in putt putt games

svn-id: r12212
"
"2e1026f8fea74e413e85ea5f83ee8d9e681af811","2004-01-07 13:29:12+00:00","malloc/new are relatively slow operations; avoid doing them in tight loops, if possible

svn-id: r12213
"
"9a191d2c43982f541dca8d3e697e34adbaf78165","2004-01-07 13:29:30+00:00","do clipping somewhat more efficiently

svn-id: r12214
"
"a04b2fc020c48bc4731fca9bdc5fc6647e903745","2004-01-07 13:40:54+00:00","Temporarly enabling this buffer underrun hack until aquadran looks at it. (See bug 872339)

svn-id: r12215
"
"d2a56c01d6b31dbe125a3d108699d6572c9d82f3","2004-01-07 14:03:40+00:00","is this discrepancy here intended?

svn-id: r12216
"
"cb609b4cf544cc369b6b38ad685a939d73a79ffa","2004-01-07 14:09:43+00:00","Testing stuff.

svn-id: r12217
"
"272eb212878e90285f21a6b3d4ab655a9e59b0b3","2004-01-07 15:45:24+00:00","- moved some Person/Anim code to Graphics
- some renaming

svn-id: r12218
"
"c46d2f05304b1b871df549bba9b2aed0656b7c44","2004-01-07 15:46:45+00:00","fix 'panel still displayed during dialogue' bug (this was noticeable when trying to bypass the floda receptionist)

svn-id: r12219
"
"8030f1b1483da8a96b7b8ff6bab246ffd3faad38","2004-01-07 17:47:46+00:00","implemented volume control panel

svn-id: r12220
"
"8e30afd4386ad13730e9697959515a1bab3cf975","2004-01-07 18:08:24+00:00","some changes for Czech version

svn-id: r12221
"
"821bbed1e052205746d9bc2118120a7d31a2a2a1","2004-01-07 19:03:30+00:00","Tried to make the menus behave a bit more like the original. Perhaps most
noticeably:

* It no longer matters where you release the mouse button when talking to
someone. It uses whatever topic you selected on mouse-down.

* The inventory menu doesn't vanish if you're holding an object, even if
you move the pointer away from it.

* When using an object on a character (to talk to him about it), the top
menu fades away, rather than vanishing instantly.

Ok, that last change is rather non-obvious, but it does obsolete the
clearMenu() function, which has therefore been removed.

svn-id: r12222
"
"63fbde359adfae8a545977f7a5092216b696368a","2004-01-07 19:08:59+00:00","implemented drawing of additional scrolling frames

svn-id: r12223
"
"81c8c722f585d34d553535c5331501e6d6fd8c02","2004-01-07 19:38:37+00:00","fixed size result related bug in imuse digi

svn-id: r12224
"
"0a93e978c5d3e9a69116f9e0e010e4e76292f6ce","2004-01-07 20:17:51+00:00","some cleanup

svn-id: r12225
"
"d1b1cbf94845c1320c4766e52fa5f6121feee96f","2004-01-07 21:02:48+00:00","some cleanup

svn-id: r12226
"
"7698782979a9725a639556ffe143f3c77edefba4","2004-01-07 22:12:45+00:00","fixed uninitialized warning

svn-id: r12227
"
"467861917d11bc200412655a0676095c527cc188","2004-01-08 00:48:37+00:00","various fixes for vertical scrolling rooms: fixed, screen updates (and made them more efficient), fixed transitionEffect() for 'high' rooms, documented drawStripToScreen() params a little (we really should start documenting for each function which takes coordinates in which coordinate system they are). Please test all vertical scrolling rooms (and others, too) for regressions

svn-id: r12228
"
"a65552794924ce2c86ad017854c56b6a926573d0","2004-01-08 01:43:32+00:00","fix maskpos (I think... needs testing)

svn-id: r12229
"
"f224da09f4ae85ededff2b63734d375b20451dcc","2004-01-08 01:59:11+00:00","fix a memory leak; re-add assert, just to be sure

svn-id: r12230
"
"619e6b43c4afe433a9f81e1de948ff4eb40fe020","2004-01-08 02:16:27+00:00","Fix for bug #803381 (COMI: Text cut off)

svn-id: r12231
"
"d852e2855a837c0c686ad9cbe0810577e0c2ff6a","2004-01-08 03:10:16+00:00","cleanup (make some more use of class Common::Rect)

svn-id: r12232
"
"ab2192761d77b1acfc7da2038d65c151ab048a70","2004-01-08 03:24:01+00:00","useful convenience method

svn-id: r12233
"
"6222d6e643ed1a2c73ae9037bcd6b677c917f420","2004-01-08 03:24:41+00:00","more cleanup

svn-id: r12234
"
"d9e67812e8764cc0e8fac568ed9c699436a1b564","2004-01-08 08:29:55+00:00","Changed spaces to tabs.

svn-id: r12235
"
"201902bfefd1b70232e863d0515f290fd47bf5b7","2004-01-08 08:39:25+00:00","jumps only for the same hookid and ignore jumps for music for now. added sound names for checks if some sounds are really have a lot jumps and regions(it's posssible), in bundle loop size can be 0 and after that loops should be ended

svn-id: r12236
"
"9931fe9a34b634a9d4dbb962e5bc4b546d6d4696","2004-01-08 08:43:15+00:00","or maybe not :)

svn-id: r12237
"
"e0545d6dca17502e814c123ef65163b44d15fff8","2004-01-08 08:47:09+00:00","forgot about this

svn-id: r12238
"
"8c2da44b971a6adda806fac050cf5c8cd48f4690","2004-01-08 09:00:29+00:00","add name here too

svn-id: r12239
"
"74829245d9f05fe51414e26c13c8b18db89b9e2a","2004-01-08 10:25:18+00:00","mostly cleanup :
- moved main update() method to QueenEngine
- merged update() & checkPlayer()
- added a method in Logic class to handle the CUTAWAY_SPECIAL stuff
- Journal remembers last seen page
- no need to call loadPanel() to restore panel palette, use palSetPanel() instead

svn-id: r12240
"
"ba34439ef9d1301175b30339e5c536a6dd5c9b68","2004-01-08 12:02:33+00:00","Moved and renamed

svn-id: r12241
"
"984f4663cba7421b51a5ccb241e55b9a55a56812","2004-01-08 12:04:11+00:00","Lastest Simon changes

svn-id: r12242
"
"bda4d687f4f627984d64c699f39103f37c273308","2004-01-08 12:05:48+00:00","More iterations

svn-id: r12243
"
"1fab23ad20033353b1063fbc6ccce14eeaa46ab9","2004-01-08 12:07:38+00:00","Renamed functions + a missing one

svn-id: r12244
"
"a6f378aee2a4678a42143d43b74dc893bc9c9521","2004-01-08 12:12:46+00:00","No more needed

svn-id: r12245
"
"ac801f9828133b04d078eea21bcd0323905ecddc","2004-01-08 12:14:48+00:00","Save more memory on PalmOS

svn-id: r12246
"
"12cd552cab94537735aa6d89ce1ec1fd5dfa899e","2004-01-08 13:03:50+00:00","Allow quitting during cutscenes and credits again. This is getting a bit
hackish...

svn-id: r12247
"
"150805b18c33ad91e087522515e763b547b3d38b","2004-01-08 13:05:32+00:00","Merged read() and readBuffer(), like in BS2.

svn-id: r12248
"
"ea154852b7f4fd6b3d6d068c18b02b988948110c","2004-01-08 13:36:26+00:00","add newlines to end of files

svn-id: r12249
"
"85f8b442f212e4eb1b044cc7ed23747a4ca4e76b","2004-01-08 14:10:32+00:00","- new Grid class to handle all zones / areas stuff
- adapted Logic/Walk code to use it

svn-id: r12250
"
"2e8d4e2d9ec6c4a46a20418c8831e1d4b1eabab5","2004-01-08 14:41:14+00:00","Workaround for bug #770049

svn-id: r12251
"
"38a7f018b2106d0d4a858625f0a505590482e3d9","2004-01-08 15:07:44+00:00","Need for loomcd too.

svn-id: r12252
"
"0711b52e96489cf22f6b2903d822d24f0e0f1532","2004-01-08 15:41:41+00:00","update

svn-id: r12253
"
"7396b99f384815ddc1b8809c02976a64e82ed3ea","2004-01-08 15:48:41+00:00","fixed comi bundle codec output_size and related stuff. also propably strange hang/100% cpu usage

svn-id: r12254
"
"afc254fa7671dba525d9c97ddc53eb2694eadd6b","2004-01-08 16:30:37+00:00","tuned max number

svn-id: r12255
"
"370589dde52b4419e7d1412e9b5cc74a331f980d","2004-01-08 16:41:03+00:00","cleanup, xref update

svn-id: r12256
"
"6d8c2d0461181521174a9b553136f6518ba08bb6","2004-01-08 17:07:21+00:00","synced with local sources

svn-id: r12257
"
"c2b7531c56a01b973f52f12b9a2922068ec79725","2004-01-08 17:30:36+00:00","cleanup

svn-id: r12258
"
"d1a80a659bdb6ad928f75291e7a5d824b3f05eed","2004-01-08 17:41:11+00:00","cleanup

svn-id: r12259
"
"7169da6ee18b90dd5f1a24d686fbabef0ef4e66a","2004-01-08 18:25:30+00:00","jumps are now better handled

svn-id: r12260
"
"e68a3650594fc3a62a26aece5705eb3602b6d1ad","2004-01-08 18:32:29+00:00","ops

svn-id: r12261
"
"ebecf1dbaa0284f22a053e5b2e9510d6e6db4fdf","2004-01-08 20:37:26+00:00","unify _vm / _scumm usage

svn-id: r12262
"
"04b002bbaaef75f45c2fb962dbbce23db53116e7","2004-01-08 21:21:40+00:00","move the charset mask to the charset renderer class; some other related changes

svn-id: r12263
"
"84f4a137307f06562a6adbb0c735287ecc2771b5","2004-01-08 21:44:03+00:00","more cleanup

svn-id: r12264
"
"65bfcb71fe7910e16b5e4e0e6665fa3b9e77510e","2004-01-08 21:58:46+00:00","oops

svn-id: r12265
"
"1b1ce1faf71f1e7fca9cf030e08bffd343a2bf79","2004-01-08 22:46:42+00:00","moved the remaining 'graphics' stuff from Logic to Graphics

svn-id: r12266
"
"9d21fd44f0e980114ce7f8391a3e07279ef696b8","2004-01-08 22:54:06+00:00","fix memleak

svn-id: r12267
"
"67dff87a92e0358218763d6212a7dd18db1ccb3d","2004-01-08 23:17:54+00:00","revert - comp_input can be more than 0x2000 size

svn-id: r12268
"
"2bc4c1e9cd10bc5a42026f1e0450dd6d39276e09","2004-01-08 23:22:51+00:00","moved malloc and free

svn-id: r12269
"
"c4e9d55acbcab499cd8b76fcbbacb907a758a05f","2004-01-08 23:28:29+00:00","minor Logic::initPerson() tweak

svn-id: r12270
"
"ce3855f02bc3f6e049216f87892e8a9ab2992770","2004-01-09 05:11:10+00:00","fix for bug #872916: BS1 scrolling glitch

svn-id: r12271
"
"58c46a2b92bd9b6de04076d53c4ef9d66cc10062","2004-01-09 07:53:08+00:00","Fix a harmless clipping bug (block surfaces were drawn even when their
width or height was 0), and use consistent naming for clip rect parameters.

svn-id: r12272
"
"638231cc59c964106de917a376de9ffb6b7d6784","2004-01-09 07:54:16+00:00","Make it possible to quit while showing in-game dialogs. (Regression fix.)

svn-id: r12273
"
"ee53fb439171c4e2f9c2c76d6c654bd781207921","2004-01-09 13:14:59+00:00","Fix for bug #873688

svn-id: r12274
"
"93f3c0df348b77d284d66309e36d775df4765c99","2004-01-09 13:16:06+00:00","commit on aquadran's behalf that fixes music distortion

svn-id: r12275
"
"634df6923d644a5de603beb14c5f9720b5ff44fb","2004-01-09 13:36:37+00:00","renamed some methods and moved some code to Display

svn-id: r12276
"
"f97819b1af166e16226565683eb55992672d251b","2004-01-09 13:50:10+00:00","another commit on aquadran's behalf; remove old hack

svn-id: r12277
"
"b85248aa135671e6e84db2299cd44f4a5a704398","2004-01-09 14:00:36+00:00","fixed V8 camera var location (verified against assembly)

svn-id: r12278
"
"b9c3b7b008a0deb80d30f3ac622c50535be5a52a","2004-01-09 14:52:39+00:00","Removed redundant comments.

svn-id: r12279
"
"722de1e04a85c0050fa54ef3de76b88b858d3ca9","2004-01-09 15:13:56+00:00","Regression fix from aquadran

svn-id: r12280
"
"657333aaf0cce4439d4a0a14d8f86029b6e23ac8","2004-01-09 15:14:15+00:00","fix mouse pointer glitch occuring when exiting Debugger

svn-id: r12281
"
"06caf87bdcf27cf40f25351c0a264ca9c602aca8","2004-01-09 15:58:21+00:00","Removed redundant comment.

svn-id: r12282
"
"25854050deb1a7780c545946753b66fec3f64c66","2004-01-09 20:20:01+00:00","added loading Sync datas

svn-id: r12283
"
"7ab3348329ee395cd72a6279517a738a3fe86fbd","2004-01-09 22:10:32+00:00","added lipSync code

svn-id: r12284
"
"d96ec8672b10fdebe11f6bdca3284773a6b4fdc4","2004-01-09 22:11:38+00:00","forgot this

svn-id: r12285
"
"9d7d23a7c6c938b9b205d7237ed21433a38a5914","2004-01-09 22:36:40+00:00","some changes to sync stuff

svn-id: r12286
"
"1f04d5a7cdddb06b6e28ddc6938b15424f210528","2004-01-09 23:33:46+00:00","handle volume and pan by SoundMixer not SmushMixer

svn-id: r12287
"
"ab7db8fb045d36dfcd1d5eb709c0ccc64298512d","2004-01-10 03:58:22+00:00","remove unused vars

svn-id: r12288
"
"1778b01d765b8290c47324d6befebb9130353973","2004-01-10 05:20:15+00:00","Start of debug channel support. TODO: Move this to the common Debugger system?

svn-id: r12289
"
"4654bab07625aa33d05745263dbf5a69dec3c160","2004-01-10 07:07:19+00:00","removed stackLock and added locking tracks to prevent removed

svn-id: r12290
"
"d2a7bf396d738e9141c88b6c59c38ee19e554020","2004-01-10 09:29:34+00:00","added two opcodes

svn-id: r12291
"
"158acbb70c49a7bdbf721c928e8b2ad353d2a52b","2004-01-10 09:44:22+00:00","added one opcode

svn-id: r12292
"
"c4528ac022d13fde66a4d494110da4e97d2660c0","2004-01-10 11:01:47+00:00","More conversion to debug channels

svn-id: r12293
"
"9439e09e45d9e14b9d5bc297a7c618ee3f948f9e","2004-01-10 12:56:07+00:00","this should fix :
- minor sound glitch in room 50 (temple zombies)
- panel undisplayed at the end of cutaway c62c
- wrong dirty blocks in room 76
- Cutaway::_cutAnim is now a 21x30 elements array. This is needed for cutaway c69g, where we setup
frames for bob num 20 (the original game uses the same value)
- Credits::_list is now a 18 elements array (that's what credits2.crd need)

svn-id: r12294
"
"f2e8f65cb08462f6f80769f456eabed6692cdf7e","2004-01-10 15:46:02+00:00","Add test for CD-ROM version

svn-id: r12295
"
"c13a04f57034064578d269865ecd48a8ee0fee81","2004-01-10 15:48:13+00:00","- Must have either subtitles or speech
- Should not be possible to disable text on non-CD-ROM versions

svn-id: r12296
"
"102cf0254aac784ff0941f4f3f99951705ec6fa0","2004-01-10 15:52:00+00:00","- Honor speech and subtitle toggles
- Make text stay on screen longer

svn-id: r12297
"
"2f82a5c573f27ad3ea41346fe4d1b712204c89a4","2004-01-10 15:53:51+00:00","Honor speech and subtitle toggles

svn-id: r12298
"
"c27915b46d74c2d04695c4f3124f7f18a0bf505b","2004-01-10 16:03:08+00:00","Correct comment

svn-id: r12299
"
"5d50f01b2f9e5f9bea99dab066e5f0551fb93ac0","2004-01-10 16:03:41+00:00","Text position for talking heads.

svn-id: r12300
"
"aab4e7a011b6e35821b83348538564527957a959","2004-01-10 16:13:21+00:00","Correct previous fix :-)

svn-id: r12301
"
"3d1c883970d1315b1bd8b8dbcec9686340cce9cd","2004-01-10 16:23:34+00:00","workaround for final room sound issues

svn-id: r12302
"
"72d54f173ec175a93618a00c4828af3f06fe96ff","2004-01-10 16:54:00+00:00","Never mind.

svn-id: r12304
"
"3589c2f776a3b4716f6855403ed7ed6b7626ed65","2004-01-10 17:46:26+00:00","added stopSfx() method

svn-id: r12305
"
"615e0df8da215eebb85de1064e2d7a44a38ffb3e","2004-01-10 19:55:54+00:00","enabled arrows in dialogue (non english versions)

svn-id: r12306
"
"40651928dc7fdd71bd25edd1110ac26b30102132","2004-01-10 19:59:11+00:00","removed some debug() calls

svn-id: r12307
"
"3e8a551d8b3cef47a96270d402d784a4cda6fb61","2004-01-10 20:33:05+00:00","removed old hack to prevent speaking sentence 0

svn-id: r12308
"
"1db3b65825a1d6efa333edb59cdc7c54d0f9b953","2004-01-10 21:21:20+00:00","cleanup

svn-id: r12309
"
"5616955701657cd71462ae880bd25e1b4f3e31c1","2004-01-10 21:56:47+00:00","new Talk::splitOption() code (same value for text margins, word width is computed without the ending space char)

svn-id: r12310
"
"a7fe335c82de60a776bf2131c1451acd6f48d435","2004-01-10 21:56:59+00:00","I forgot this in the previous cleanup.

svn-id: r12311
"
"3be8219bd9929b47a8a309d94fa50214c049b6eb","2004-01-10 22:31:41+00:00","cleanup

svn-id: r12312
"
"f00ec302b8a6737324b3699bff53f3565f97e75b","2004-01-11 01:01:27+00:00","Enable subtitles toggle key 't' in Humongous Games.

svn-id: r12313
"
"9cd7d7959638336b4424ccb50231dd466199ba61","2004-01-11 01:36:00+00:00","- stop voice when skipping dialogue
- scroll 4 inventory items when right-clicking

svn-id: r12314
"
"b3e44d8f00b763b09ab8979b98a5024cf802343d","2004-01-11 08:39:39+00:00","This make HE games actor clipping code closer to disasm.
Add some missing code for akos games.

svn-id: r12315
"
"a578817f98d6f26decee2cfd12fbbc535c12616e","2004-01-11 08:59:51+00:00","Ooops

svn-id: r12316
"
"f2874733b0cee77307ef7abd59af9b5c4ac43c9f","2004-01-11 14:08:07+00:00","tweaked a bit dirty blocks display code, this fixes the minor glitch in interview intro

svn-id: r12317
"
"6dc8407297fc11301c8abe6c7e0801f046567449","2004-01-11 14:11:36+00:00","cleanup

svn-id: r12318
"
"563d95c576c817a63ec64302e67b2ee5daa97c6e","2004-01-11 15:42:11+00:00","fix silly bug

svn-id: r12319
"
"cf0a73f913174599c7c28d910ecd87229fd62afd","2004-01-11 15:47:41+00:00","Introduced new namespace, Sword1, removing the 'Sword' and 'Bs' prefixes in
the process, except for SwordEngine.

Some minor cleanups along the wa, e.g. stdafx.h already includes <stdio.h>,
<stdlib.h> and <math.h> so there shouldn't be any need to do it elsewhere.

svn-id: r12320
"
"efb03e002407a452577c7838ca3074abe1b07b24","2004-01-11 16:27:36+00:00","Changed dumpRes() to use the File class. (Untested.)

svn-id: r12321
"
"7309705db5e6994563d348f67e79f4b42bdff13f","2004-01-11 16:53:33+00:00","cleanup

svn-id: r12322
"
"df985747e125739f180d857ddfd1ab0ec301dfe6","2004-01-11 17:20:29+00:00","minor display code changes

svn-id: r12323
"
"6574feefb1714f72809754e055d36b7b98e3f369","2004-01-11 19:58:29+00:00","fix loading of old COMI savegames (which are based on the bad old camera var locations; note that COMI savegames made between this change and my previous change to vars.cpp may be 'lost' due to this, however that should be minor compared to loosing all previous COMI savegames ;-)

svn-id: r12324
"
"0712cb95af1bbadb99aea44a53addc48c3f9a6ce","2004-01-11 20:15:05+00:00","renamed removeObjectFromRoom to forceObjectRedraw

svn-id: r12325
"
"7237b6a2ec6a83d2a421d8c990848dbadaa947f9","2004-01-11 20:42:40+00:00","changed the name of the former removeObjectFromRoom yet again, to markObjectRectAsDirty  - that describes its functionality more accurately, I hope :-)

svn-id: r12326
"
"c1f34030f9a0ded0ad4a7848121a73f82a69f333","2004-01-11 21:48:31+00:00","cleanup

svn-id: r12327
"
"c67d25cfb9c861ae7c11b06c844a8c16419aa236","2004-01-11 21:52:24+00:00","Fix for bug #738352 (DIG: Cursor image appears in upper left corner): don't draw flObjects in drawRoomObject(); this may cause regressions (I think it would be helpful to compile a list of some/many/all flObjects in all games, that would really help with debugging them :-)

svn-id: r12328
"
"87e8ccd8c164c76ff37853ec1d7929348422581c","2004-01-11 21:55:26+00:00","stupid me shouldn't write fixes, then in the last minute decide to put them into another place, then commit it before recompiling once more <sigh>

svn-id: r12329
"
"c55d5d6465f15afc7648c196a3100800002e1737","2004-01-11 21:57:24+00:00","pedantic corrections

svn-id: r12330
"
"14eeb574d3eb0a2ad236eeb43fdeeadcba41cd1f","2004-01-12 00:34:27+00:00","fixes compilation for our *cough* favourite *cough**cough* compiler: MSVC!

svn-id: r12331
"
"441fc1a0d7e2244fa98875fdd18eb2afaf37dfab","2004-01-12 07:48:39+00:00","some changes to ft music sequences

svn-id: r12332
"
"e792b1c715af482e2907d8cdfa3c84f0e04cbd31","2004-01-12 07:51:34+00:00","update

svn-id: r12333
"
"c75f5efd2f1b5fc6addcd67bc4865c2caeab8a6c","2004-01-12 08:01:25+00:00","Sync the credits so that the text scroll and music will last for about the
same amount of time. I don't think the original did this, but it turned out
to be pretty easy.

svn-id: r12334
"
"48eb63d29a33b1b28a32c01b54618e3a18c7189c","2004-01-12 09:00:31+00:00","Add missing case.
Add another HE games specific.

svn-id: r12335
"
"a6d1540d49d53dd7b0d6810c4e442ec8602ad938","2004-01-12 09:40:57+00:00","turned Logic::useJournal() into a virtual method

svn-id: r12336
"
"bbf32c0076ec53a3df9416419b901c9ef3659884","2004-01-12 09:43:06+00:00","oops

svn-id: r12337
"
"a685422a138c99af7f95f8deaf787425af356f9b","2004-01-12 11:11:19+00:00","Initial libmpeg2 cutscene support based on patch #874510.
Pre-converted cutscenes w/ palette files available - ask LeChuck about Cutscenes :)

svn-id: r12338
"
"95de2117a20da3b9828a385b4a6713e4d9524aa8","2004-01-12 13:40:02+00:00","New save/load code, this *breaks* compatiblity with the previous
savefile format. Use the 'qsc' tool to convert your old files
(http://0x.7fc1.org/fotaq/qsc.[cpp|exe]).

svn-id: r12339
"
"31808345496fa66dd56407ffe17a0b32855bf277","2004-01-12 14:09:39+00:00","Add skipLimb actor var, which is used by puttmoon.
Use forceClip for actorOps case 218, since it should have same effect.

svn-id: r12340
"
"5552b628a6498ffc650b7c58b39978eb3eea5647","2004-01-12 15:52:58+00:00","Wrong SO_*

svn-id: r12341
"
"cc67c137114c299e444ba597a4cc0143da8d8bc1","2004-01-12 16:36:01+00:00","Don't hog the CPU when playing cutscenes.

svn-id: r12342
"
"e4628fbb07c034362d4e46f9939bb49e8fb74dbb","2004-01-12 18:51:15+00:00","- indent
- fix for compilation, is it proper ?

svn-id: r12343
"
"b8e3dda84cd39f7bbd67c818acb42e7614bf7d02","2004-01-12 19:08:04+00:00","- whitespaces
- fix for compilation at MAX, at include types
- changed to our types

svn-id: r12344
"
"0058057d4124af1a185d005bf7ad21440b95ae47","2004-01-12 19:15:07+00:00","- added delay at stopAllsounds
- changes some struct names
- improved hadling FT music tables(seqence, cue point, ...)
- moved some music part into seperate file
- added fadeOut music for FT

svn-id: r12345
"
"278ea4808e5576d3a89a97689ccc36f6a0b5e622","2004-01-12 19:18:24+00:00","forgot this one

svn-id: r12346
"
"a60c66564b1a1a52f31769f9f24d9a8571468e24","2004-01-12 19:32:44+00:00","- fix - proper place for stopallsound
- fix - correct fade value

svn-id: r12347
"
"d7944886451426818ac8d82a644a12596de9de70","2004-01-12 20:04:22+00:00","fixed bug that was causing lots of havoc on BE machines. Thanks eriktorbjorn

svn-id: r12348
"
"b4655ff7f9f49bf267e5a83cef54ce5772cf3103","2004-01-12 20:20:33+00:00","- fix: correct range

svn-id: r12349
"
"9471d58720a41cfa0ba8b526b4c479b3a3d74af0","2004-01-12 23:41:05+00:00","Add mpeg2 option to mingw makefile
Fix compile on mingw

svn-id: r12350
"
"b04dac03f2d0029ca9675a6489296773523afedc","2004-01-13 01:26:18+00:00","added legal header; fixed incorrect fscanf use; C++ification (the code still is quite Cish, though :-)

svn-id: r12351
"
"9f6cdccc845362f0a27410a9bd18ac1d0c77110e","2004-01-13 02:23:37+00:00","add autodetection for libmpeg2, while it checks for 0.4.0 and up it doesn't warn the user to upgrade if they have an older version just disables

svn-id: r12352
"
"a57810c854a6825ca778867da36883998b410ab7","2004-01-13 04:57:31+00:00","Fix #775662, actor frame should always be reset to 0 for tentacle.

svn-id: r12353
"
"d758f12fcc988a886b708dedaaedf913fee237df","2004-01-13 04:59:40+00:00","Typo

svn-id: r12354
"
"73d73982afb9ab2f879c7bf00fe6e216137c3328","2004-01-13 05:30:46+00:00","Revert last change, misread code.

svn-id: r12355
"
"8a66ba33cf44600ccc4e2a3267359d2ac952c586","2004-01-13 10:09:53+00:00","Moved the rest of the MoviePlayer class into animation.cpp/.h, plus some
minor cleanups. (Mostly spacing and indentation).

Unfortunately the Ogg Vorbis playback causes ScummVM to crash for me, so I
can't say for certain that I didn't break anything.

svn-id: r12356
"
"13481b82c45247656b2c453f9e753db9501e4a58","2004-01-13 10:27:13+00:00","As an experiment, I've added a delay of 0 milliseconds when drawing
interpolation frames. It shouldn't delay anything, but I'm hoping it will
allow the other threads some breathing room, which might help bug #875683.

Or not. We'll see.

svn-id: r12357
"
"dca14d953204b1d2edb647bac7d4849cc9340a34","2004-01-13 13:12:40+00:00","Some more formatting cleanups. Made the Ogg file handle part of the
animation state so that it can be deleted in doneAnimation().

svn-id: r12358
"
"34960cf375d2c7a5ea3b4c044a3479f9c88b48c2","2004-01-13 14:16:40+00:00","Moved some methods into class AnimationState (where they really belong - nicely shown by the fact that now all member vars of AnimationState are private)

svn-id: r12359
"
"c39aa04c318b991337daecf7e348ad6044656b36","2004-01-13 14:22:29+00:00","cut down pointless header interdependencies

svn-id: r12360
"
"2f85714c605dfbe722d7e2b3d797aebd7808f3e1","2004-01-13 14:43:13+00:00","- wrong sentence was spoken when Joe was trying to 'pick up' a person
- clear command before switching rooms
- clear texts at the end of cutaway (fix minor glitch in interview intro)

svn-id: r12361
"
"51434558f4ed62280457d03245cf2a3aec5b6916","2004-01-13 17:29:01+00:00","Updated BS2 issues. (I'm too tired to fix the cutscene lead-out music
right now, but I don't want to forget it.)

svn-id: r12362
"
"1fa4231c47491a68d5272b62b2904a7892859ad9","2004-01-14 01:41:44+00:00","Remove INSANE define.

svn-id: r12363
"
"9db5e229862d97c80b5a69b0dbf0f8711131a3b4","2004-01-14 01:42:31+00:00","Missed one.

svn-id: r12364
"
"683a1561a25133841db1f2ee1a65907dfabf2523","2004-01-14 01:54:04+00:00","Slight change to match disasm. exactly.

svn-id: r12365
"
"05b9f4ddf6d519b467280a1dd129054d83075242","2004-01-14 02:29:49+00:00","Fix libmpeg2 version check. FreeBSD ports collection usually lags with
newer package version, so current one has libmpeg2 0.3.1. Although it
got passed by configure script. Now it is fixed.

svn-id: r12366
"
"e3a28ad4b7d1b73d83a660f1a0535f957f42dbfd","2004-01-14 03:07:29+00:00","... and so we are back at precisely my original code, wasn't it fun? :-)

svn-id: r12367
"
"a1e39b988d3e85d5a4acc0b2ab0b470ac9dbeac7","2004-01-14 03:50:58+00:00","Implemented o6_localizeArray for HE games

svn-id: r12368
"
"718bdd18295002bb3d4bf882612f7919b928d80a","2004-01-14 04:24:57+00:00","Add back missing line.

svn-id: r12369
"
"d48891b9cde85eee02cf31301ca14ad5c9be036e","2004-01-14 06:27:28+00:00","number implies version

svn-id: r12370
"
"4746920c74887c9fff9910e6d39881db3879dd52","2004-01-14 06:47:23+00:00","fix path specifiers

svn-id: r12371
"
"b17d77eae9a90a160727935eabdca162823cdc10","2004-01-14 08:06:56+00:00","Changed the music fading so that volume is increased when ABS(_fading)
grows larger, both when fading up or down. This fixes the problem where the
volume would 'jump' when changing the fading 'direction' of a stream.

Also changed the logic for deciding which music stream to stop if both
streams are playing and a third stream is started. Before it always tried
to pick the one that was fading down. Now it will pick the one with the
lowest volume, assuming that the more faded a stream is the lower its
volume.

Together, this should fix some abrupt music changes at the watchman's hut,
where it would sometimes start two music streams in rapid succession.

svn-id: r12372
"
"2fb7d4c553e01cebc5a3f30485db015fd884ff80","2004-01-14 08:09:03+00:00","Changed the music fading so that the volume is increased when ABS(_fading)
grows larger, both when fading up and down. This fixes the problem where
the volume would 'jump' when changing the fading 'direction' of a stream.

svn-id: r12373
"
"15738c13d3ebab0c34152669a9752f6c3b773096","2004-01-14 08:14:25+00:00","I wanted to Valgrind the cutscene code, so I had to fix the warnings about
uninitialized values. Now the only warnings I got were from libmpeg2
itself, and I don't know how serious that is.

I've also added some code - disabled by default - to allow the cutscenes to
run with libmpeg 0.3.1, since that's what I've got on my Linux box. It
appears to work on that one, though I only have the 'eye' cutscene on it
yet.

Ogg Vorbis playback is still broken for me under Windows, though. I wonder
if it is because I don't have the very latest Ogg Vorbis libraries on it
(since I didn't manage to compile them under MinGW). But surely the file
format hasn't changed in any important way...?

svn-id: r12374
"
"f6f3ea8da32ff5eaa09a012f815111738d06c033","2004-01-14 09:54:45+00:00","Add missing code for samnmax screen saver, fixes bug #781683

svn-id: r12375
"
"7bd3a5004988e10ff9e44ba09083a3cd8d82bfe9","2004-01-14 10:01:39+00:00","Add better method.

svn-id: r12376
"
"8cc0b7163cd6b5beb08568aef7caf02836b4b317","2004-01-14 10:02:33+00:00","Move SCUMM debugger init later on. With this _numVariables is set, so theoretically the Debugger's scumm_vars[] array should work again. Although it
doesn't, for some reason I have yet to look into.

svn-id: r12377
"
"b218cb93fe3eabdcce32af012bf257e3cda34e32","2004-01-14 10:40:25+00:00","cleanup

svn-id: r12378
"
"d1d5d984948f824767b2b882ddf42f854e25402a","2004-01-14 10:40:54+00:00","
Valgrind warning fix from Endy

svn-id: r12379
"
"d295d8bc210ac01b2863a256e76a590f444d2927","2004-01-14 10:48:36+00:00","??ZZ
ZZZZ

Fix another valgrind warning, I hope this is right spot.

svn-id: r12380
"
"f75c122b941d6240cc57721b6f81f7a351cd476e","2004-01-14 10:58:09+00:00","Increased the delay I added to interpolation frames from 0 to 10. This will
probably make the scrolling less smooth (I don't yet know how much), but it
does seem to fix bug #875683.

svn-id: r12381
"
"f496e49815d5f585b8183e32df52402991017cf9","2004-01-14 13:23:16+00:00","* /execute/ the binary too. don't only compile it
* actually 0.3.2 is sufficient. no need for 0.4.0

svn-id: r12382
"
"1230c0b083d4352f1f7dd5a5f19321bd8b88442b","2004-01-14 13:41:15+00:00","No code is missing in this case.

svn-id: r12383
"
"9f8caa6889c5504edb279cacc524c142eb5829d1","2004-01-14 13:44:31+00:00","These two case are the same, checked samnmax disasm.

svn-id: r12384
"
"6c78f2a6b801ae8a8efb7f9db9bf0213ce3eb759","2004-01-14 14:34:05+00:00","- tweaked a bit walking functions to make persons stop walking when a cutaway is canceled
- removed unpack to bob frame 2 (as it is never used)
- changed some error() calls to assert()
- minor cleanups

svn-id: r12385
"
"d66de098fc5ed72e954a2352d10f969245e86fe6","2004-01-14 14:36:19+00:00","Add/update comments

svn-id: r12386
"
"4bc769c33b7e246bb149d5f9958e646d771818c7","2004-01-14 15:20:07+00:00","Confirmed a few vars from disasm, good gusses.

svn-id: r12387
"
"b1141ae71718d4693c637d4c169bef37ae1cc036","2004-01-14 15:51:54+00:00","bumped Cutaway::_personFace array size, as during intro Cutaway::_personFaceCount max value is 12

svn-id: r12388
"
"dd2262b1875e6c01222abea2252baa3a94677897","2004-01-14 16:00:24+00:00","fixed crash on exit when using imuse digital

svn-id: r12389
"
"ee3c5122773aa6c14fbfefd160825a5b23af6cdb","2004-01-14 16:46:19+00:00","fix - stop played song when new
hack - for completable comi song scene

svn-id: r12390
"
"6ca6f13c6d3d9b8ecdd3c92c6c24ad6dee9d14f4","2004-01-14 16:47:49+00:00","forgot it

svn-id: r12391
"
"4980331ecf1f78124af8e1f09e174c0f25fea778","2004-01-14 18:33:30+00:00","I accidentally introduced a bug when I changed the fading that would cause
fading-up music to distort and eventually deteriorate into white noise.

This was because I allowed _fade to be set on channels that weren't playing
and because I only checked _fade for equality when deciding when to stop
the fading. It should work much better now, I think.

svn-id: r12392
"
"9b13e872b3c381e37fe05c4778260315f8bf2340","2004-01-14 18:39:24+00:00","I found and fixed a nasty fade-up bug in BS2. I don't know if the same
situation could happen in BS1, but it's better to be safe than sorry, so
here are the same changes, as applied to the BS1 music code.

svn-id: r12393
"
"89318f10fee4fd13812619a6c0f8c651bab3bbeb","2004-01-14 21:46:58+00:00","fixed bundle decompression for some case

svn-id: r12394
"
"6a85ab6af5dbfbc1b3e9c3563ead53bcf4fa536e","2004-01-14 22:07:24+00:00","synced with local sources:
- comi music implementation(not finished),
- reorganized comi tables,
- some fixes for handling hookId

svn-id: r12395
"
"b99db7695845efa59cdb02f01159d7c1b87a612c","2004-01-14 23:51:22+00:00","Need to know where this occurs

svn-id: r12396
"
"6752f57473d9bbfdcd2acd66f2c70ce2c6e76e0b","2004-01-15 02:59:51+00:00","Use simpler checks
HE games used old directions style

svn-id: r12397
"
"19707c748fd46620027ac50a01236cfa880af29e","2004-01-15 03:03:00+00:00","Only stop walkScript if it is been used.

svn-id: r12398
"
"ea0b9e54340308c78300d52f1204dc5ea0729efa","2004-01-15 04:46:07+00:00","Hack only needs to check for insane values now.

svn-id: r12399
"
"5a876510e76fe4b968aed583350284591e6306f9","2004-01-15 04:47:55+00:00","*** empty log message ***

svn-id: r12400
"
"9854ab9344b8113a6308b4be8d125b707177f12f","2004-01-15 06:25:57+00:00","Add correct fix for puttputt

svn-id: r12401
"
"d09aea93181cfd6cde9bf3333d9dfefe834bc698","2004-01-15 06:36:58+00:00","This should be zeroed too.

svn-id: r12402
"
"5d9c4bfd1ea215eaa69228e7dbab8356ea665edd","2004-01-15 06:37:00+00:00","position should be based on data offset

svn-id: r12403
"
"feb0b79e081f6ba13c31b256f54077925c7081f9","2004-01-15 06:46:31+00:00","or rather like that

svn-id: r12404
"
"ea69029982551ebfdedb37e91ef57971ada88c01","2004-01-15 07:02:29+00:00","song scene now works better

svn-id: r12405
"
"69c935a26e54d6339f75d4a960e3b79ccd88be6c","2004-01-15 08:01:28+00:00","fix overload algo position music

svn-id: r12406
"
"4c4968839a50b4c62ecce66cab744245c9bab5a1","2004-01-15 10:14:17+00:00","Set these to zero just to be safe.

svn-id: r12407
"
"ffe08547344e2349b97359fecac511e14c4808ad","2004-01-15 10:54:47+00:00","Update issues

svn-id: r12408
"
"391f4e92e5ae84c4270eb1ce998c4b13dd3293a4","2004-01-15 13:08:24+00:00","reset _lastSoundIndex in car animation too

svn-id: r12409
"
"445c79dbe931b8f7f979c1c1ebd97ee631e37c05","2004-01-15 13:45:57+00:00","pedantic correction

svn-id: r12410
"
"7a148743f18e3cf5af850f9526e44f508d42e3ec","2004-01-15 14:01:57+00:00","Fiddling.

svn-id: r12411
"
"d45682f7c50a558ff6609e443ed70f786567ff72","2004-01-15 14:53:11+00:00","fix clearBit

svn-id: r12412
"
"ac8243d22919a9da621daef429058d75b504c264","2004-01-15 19:25:17+00:00","use Rect in struct VerbSlot

svn-id: r12413
"
"c14e7a02594c1842942108ea8425980638ea9320","2004-01-15 20:37:26+00:00","pedantic change

svn-id: r12414
"
"b38f773e0f01604aba7a8c2750a5c3c2b2fd4a2b","2004-01-15 20:39:24+00:00","fixed COMI speech behaviour

svn-id: r12415
"
"968436767c946ff41e4631861014d275a4787b86","2004-01-15 21:07:17+00:00","got rid of timer stuff to handle display sync

svn-id: r12416
"
"11425a0cdd9393b37a5e8dc17aa89060d03d87d1","2004-01-15 22:37:48+00:00","do a better job at charset clipping; some reengineering. However, to properly fix text drawing in COMI, we need to do some major changes

svn-id: r12417
"
"34e1dca97e246e73742c0107b88600c7fed9ccac","2004-01-15 22:41:23+00:00","added COMI text TODO

svn-id: r12418
"
"555caf225131389d878ba35f484b00bb1d1ba2f1","2004-01-16 01:52:49+00:00","Add correct actor palette color changing for HE games.

svn-id: r12419
"
"bafbdc57e6497a4bbc856d106a2e81b23741b6e8","2004-01-16 04:55:49+00:00","Add some stubs for Fatty Bear.

svn-id: r12420
"
"2c7057fdf418ad894bdafa1c2e7607878b83c03f","2004-01-16 06:16:38+00:00","Checks were a bit too strict, makes fatty bear completable.

svn-id: r12421
"
"2d79f5b208bf9f7d0bca291c80c7994e53943474","2004-01-16 07:33:23+00:00","Don't segfault-on-exit when the game data files are missing.

svn-id: r12422
"
"006ef5e01fd6104b2db574d87be835d81864f0a9","2004-01-16 07:58:55+00:00","Fix bug #815853 - Cannot load during intro SMUSH movies

svn-id: r12423
"
"673862dbfd8d17166000cdf5bd68dd9a90092034","2004-01-16 08:16:23+00:00","Made a separate function out of the code that retrieves information about
an in-memory WAV file. At the moment it's only used in one place, which is
a bit silly, but I hope to use it for the cutscene player to figure out
when to start the lead-out music.

(To do that I'll need to know how long the cutscene is, though. I haven't
looked into how to find that out yet.)

svn-id: r12424
"
"d300c79c1a3aedff8f2acd814076c03470639c19","2004-01-16 08:23:46+00:00","Revert Fix for bug #738352 (DIG: Cursor image appears in upper left corner) - Fingolfin's commit and revision 1.162. Causes regressions such as Sam and Max bug #877798 (Inventory display glitches).

Max - Sam and Max has the most complex usage of flObjects of most games, so if you want to test for regressions with these kind of changes it's your best bet :)

svn-id: r12425
"
"984ce55aa44b89a8d5e9d8faf2b929c0fe1a4a0d","2004-01-16 08:34:42+00:00","Just hide a few noisy warnings.

svn-id: r12426
"
"fac00567314ee0d736607fb1070a87608fd87833","2004-01-16 08:53:43+00:00","Readme tweaks - clean up supported games section, add note about Sword cutscenes.

svn-id: r12427
"
"6b923d306b456d99aef27b4b16c27855ed524d9a","2004-01-16 09:05:57+00:00","Hack for infinite loop in walkbox code - hacks around Maniac bug #862245 (fixes is a strong word for a breakout counter hack :)

svn-id: r12428
"
"bd3f51dfdfd563532a7cc228139dd60d8f6451a4","2004-01-16 10:20:43+00:00","Fix verbs regression.

svn-id: r12429
"
"ac5b7036c28a4137d4b7af7385d97e6e485f0767","2004-01-16 10:45:56+00:00","Fix for bug #862263 - Maniac actors never stop talking. I know this could probably be neater :)

svn-id: r12430
"
"9a8aac9e63144f9f2658b925c98c901ad0d842d3","2004-01-16 10:51:48+00:00","Only needed for V1 Maniac.

svn-id: r12431
"
"11411767758dda1b7341c28e085064ee13c32c7b","2004-01-16 13:01:33+00:00","Revert last array change, until they can be verified.

svn-id: r12432
"
"899843443f6ff6f92ea86fd0ddfbe682abf04b01","2004-01-16 14:15:44+00:00","it seems entryObj can be <0, check for it

svn-id: r12433
"
"3c521dc28858ef845ae0f0deae8f708fd1320421","2004-01-16 15:03:52+00:00","rewritten Logic::setupJoeInRoom(), in order to only get objectData(_entryObj) when necessary

svn-id: r12434
"
"770d94b6071d5cd4ba0f4db7127b032c72c02a47","2004-01-16 15:51:23+00:00","some assert() calls

svn-id: r12435
"
"eeab2bb3bf2b014cdc2a87824dcecc93f341e11c","2004-01-16 16:28:56+00:00","Hack for Launcher Scaler dropdown. Backends using the Launcher will need to implement the OSystem HAS_SCALER property. The global options dialog still needs doing.

svn-id: r12436
"
"864274478863c8241419b4c946c44cee5381ab50","2004-01-16 16:54:37+00:00","Also mention FOTAQ

svn-id: r12437
"
"8f4a6f7bda7d11f30b3a47dfeac42368dc105f9f","2004-01-16 16:56:37+00:00","fix sentence

svn-id: r12438
"
"e9ca5a1b6de350cedeb58268f5e3157f6fe35a72","2004-01-16 16:57:51+00:00","Forgot this :)

svn-id: r12439
"
"19ad2d0120def7bd22ee8e37630c4d1e5fc1c65c","2004-01-16 16:58:36+00:00","weeeeeeee. now the Q from FOTAQ fits on the same line as the rest.

svn-id: r12440
"
"99500a0112e05ad73a67dc51e6fdfb59b1bf4f1f","2004-01-16 20:26:30+00:00","- removed noisy warning in talk code
- set _entryObj only if verb is WALK_TO
- changed setConditions code in Command::openOrCloseAssociatedObject to be
consistent with Command::setConditions ; this isn't like the original, but
more logical to me.

svn-id: r12441
"
"05c71be222e68a0e0752f3c59b81d76be5d6a518","2004-01-16 20:48:08+00:00","redundant check

svn-id: r12442
"
"171c7d438733e45800e2a8e78cd0fe065dc7e560","2004-01-16 22:11:45+00:00","Moved FT INSANE to a separate directory

svn-id: r12443
"
"4b0ad9fe134438e8d68ec271c10264b3974af133","2004-01-16 22:18:54+00:00","Moved FT INSANE to a separate directory and splitted it to multiple files.

svn-id: r12444
"
"3a4ee39448e0ecdb9db5e3ad2ca2f8c6ee563659","2004-01-17 08:34:54+00:00","added code for dig music

svn-id: r12445
"
"ee0928847c2ba5e9d4e6785a1bc12d80d98b8da0","2004-01-17 08:42:29+00:00","update

svn-id: r12446
"
"4270eebbb408140a06c23d5b44600373c6cdfdc4","2004-01-17 09:15:42+00:00","fix compilation for msvc when libmpeg2 enabled

svn-id: r12447
"
"fb32b6ae8efb48935a56177091a3b7f62944a9c0","2004-01-17 09:19:21+00:00","enabled some stuff by default: zlib, vorbis, libmpeg2

svn-id: r12448
"
"16cd0cfc2f3c1dc8ac7c7e62c63bd46d5a1bde26","2004-01-17 09:31:31+00:00","use static vorbis lib instead dynamic

svn-id: r12449
"
"d211d671f82107d30934866ad83f637c190bcc57","2004-01-17 10:37:34+00:00","Small difference in HE games, fixes radio still moving after speech ends.

svn-id: r12450
"
"351502d37ae945a3eab2d0c1f40aad7b09ea82e9","2004-01-17 11:05:57+00:00","disabled opcode warning

svn-id: r12451
"
"051d5fe2d84523b7880ac1f68c778595aa67ed04","2004-01-17 11:15:38+00:00","Yet Another EVC fix

svn-id: r12452
"
"21eff1eef2e7a56c1a54b566423f64ee37bda53f","2004-01-17 11:16:38+00:00","And again ... guess who fails compiling this ?

svn-id: r12453
"
"63afd5fe0c29b79bf8d07a84c7051672ed49d995","2004-01-17 13:21:15+00:00","Launcher subtitles checkbox (is Sound the right place for this? I dunno..)

svn-id: r12454
"
"ccd5f0842fbc540dda21dbefd6dab34da804107b","2004-01-17 14:03:19+00:00","Thanks to Endy, I now know a bit more about the BS2 cutscene lead-outs.
Unfortunately, we currently have no way of finding out how many frames
there are in a cutscene.

svn-id: r12455
"
"04f2bc0276aa10f083ed1fca64b2da705311ae67","2004-01-17 14:20:32+00:00","Update BS2 cutscene player with changes from roever: overlay support (default, 8bit backends should define BACKEND_8BIT for fast colour remapping) and sound syncronisation.

svn-id: r12456
"
"9fd8466546460004a5cafb61762f71cf4427e7aa","2004-01-17 14:32:22+00:00","Cleaner virtual keyboard support for the new CE backend, coming soon

svn-id: r12457
"
"a2c0980aab5d3495ab7089f2d71501177aa452d4","2004-01-17 21:55:06+00:00","fixed stupid bug

svn-id: r12458
"
"76298a9cec9d8c3eba02afee32b22c2a67861a2b","2004-01-17 23:40:36+00:00","Implements TOGGLE_VIRTUAL_KEYBOARD

svn-id: r12459
"
"14126cde006f4cc055d60cb1b8fdf93e74c5bc6f","2004-01-17 23:42:15+00:00","add_dirty_rect turned to virtual method for new CE backend

svn-id: r12460
"
"568913784a6ba965bfe46d0eb6930995fadf9658","2004-01-17 23:43:23+00:00","CE backend specific tweaks

svn-id: r12461
"
"335bf94d5fdbdfbeb57c42f23d947301b00ce47d","2004-01-18 02:31:53+00:00","Add back checks for invalid left/right values, fixes regressions for now.

svn-id: r12462
"
"758922026a256ad09334b55bf7aef06712ed92cd","2004-01-18 02:44:57+00:00","No longer required.

svn-id: r12463
"
"a95818d29a706095517ada079f316ad74f20a86d","2004-01-18 03:24:52+00:00","Avoid assert in PC version of FT demo.

svn-id: r12464
"
"ad46828d1c8fb68c3c44c5c38c5ac9b2031a2fc9","2004-01-18 05:52:04+00:00","BS1 cutscene support. Also bugfixes (don't crash if cutscene ogg unavailable)

svn-id: r12465
"
"8a6641826b0f464509159cbdc2a3e19b1d5d20f5","2004-01-18 05:55:28+00:00","Copy mpeg2 status to BS1 as well.

svn-id: r12466
"
"ef9732f1f5343f6eb2b95ee0872e10252d9da97f","2004-01-18 07:21:10+00:00","fix compilation

svn-id: r12467
"
"1386af2daf8ec9dfd651eabe902b7e6fac9794ad","2004-01-18 07:29:34+00:00","update

svn-id: r12468
"
"06de6f1dfb7e6baba27e321735b89e9bf95e2876","2004-01-18 09:33:25+00:00","change output to be consistent

svn-id: r12469
"
"f27e6a27d6a234dfdb1482566369d12b3d62db91","2004-01-18 09:35:05+00:00","cleanup

svn-id: r12470
"
"4a0ec9638eab991e9f74731e0f2bc8e1956af20d","2004-01-18 11:18:46+00:00","cleanup

svn-id: r12471
"
"b9e93634fb3c8d046ad4e6c9c2fdd02328bf3d04","2004-01-18 11:39:29+00:00","next cleanup

svn-id: r12472
"
"6b377e6587b2f9954bb701065515f343ba570667","2004-01-18 11:52:54+00:00","change at linking

svn-id: r12473
"
"5a4c5e1485938afc854d3bc30fecde3094ffd507","2004-01-18 12:07:21+00:00","Don't allow overlapping voice in cutscenes. Fixes crash in carib cutscene.

svn-id: r12474
"
"f58962043f90d6cbae71ab7726972c675e2a4bc1","2004-01-18 12:17:41+00:00","next cleanup

svn-id: r12475
"
"e795eb06395df37d3688502d8a1dbb22f7b3ce74","2004-01-18 12:19:22+00:00","revert last change

svn-id: r12476
"
"4866b4fd0e8cda83010af837882441da22a35496","2004-01-18 13:05:49+00:00","Correct name.

svn-id: r12477
"
"f2f77cbfdffdd9399506b513721933bb170f9185","2004-01-18 13:50:50+00:00","Small tweak for the checkbox control on CE

svn-id: r12478
"
"2e27e9bca7404761cbd3c89ef652a20bba96b43a","2004-01-18 14:29:05+00:00","Renamed startSound1 & startSound2 to correct names due to complete iMUSE
digital implementation.

svn-id: r12479
"
"3e4cc82c137931c46000f5c36ab4766a06b77091","2004-01-18 14:48:04+00:00","Revert last change

svn-id: r12480
"
"8c8b1ab4c2f9dbe8150d7b9875a63b7d6d29e2cb","2004-01-18 15:46:44+00:00","cleanup

svn-id: r12481
"
"446a96da3a2f409967efae38cb6c2652794e720b","2004-01-18 15:49:30+00:00",".

svn-id: r12482
"
"a376ef6c0f3485b998dae4c12edc49ee162bfc75","2004-01-18 15:56:43+00:00","a little updated for msvc

svn-id: r12483
"
"78d1aa42f6d8d87290a6b4c66164f6b11b144c4c","2004-01-18 15:58:30+00:00","updated

svn-id: r12484
"
"130abce642cf7e76e1f5a657b3e4bd1f886a194a","2004-01-18 16:02:10+00:00","Fixed PalmOS stuffs

svn-id: r12485
"
"5f2d92340e23288a581e52a023b4b9603ab5b878","2004-01-18 16:07:49+00:00","removed no needed call

svn-id: r12486
"
"fa354638c6f6701efee600fdb107baa3309a003e","2004-01-18 16:32:30+00:00","optimized tables a little

svn-id: r12487
"
"287491770134423f588332d9471f2a4e2e73a4fa","2004-01-18 16:43:16+00:00","optimized types for tables

svn-id: r12488
"
"f7a92ad02d94a76bc27ca8541b61a11bd28e6a89","2004-01-18 16:44:58+00:00","volumes vars too

svn-id: r12489
"
"b3c00e71ba51898a79825ae629a728ca7d355206","2004-01-18 16:59:54+00:00","removed markers

svn-id: r12490
"
"14f80f9d6b65e583129b2926d860ebe40c5bb945","2004-01-18 17:01:03+00:00","this too

svn-id: r12491
"
"8f465b96bb0e0c66fae403519ca9a8344cb6dfed","2004-01-18 18:04:41+00:00","fixed debug params

svn-id: r12492
"
"c44bdf033e5a8460fb8aa1312bf8cc0866f60c8e","2004-01-18 18:42:44+00:00","I recommend turning on signedness warnings, and honoring them :-)

svn-id: r12493
"
"e67b734fd2fe9109b1b748eed14222944e99d78d","2004-01-18 18:42:58+00:00","fixed warning

svn-id: r12494
"
"c7a66d4498127adbb13311cf2cf23dd4459965de","2004-01-18 19:00:44+00:00","right it should be signed :)

svn-id: r12495
"
"4b40dc8b403b1f650fa9130cfc5af0596ee69dc1","2004-01-18 19:42:55+00:00","Add newline to the last line to shut up GCC warning.

svn-id: r12496
"
"4ff60e231d238dcfa27f1a4a375f5ccdb000ad50","2004-01-18 19:50:59+00:00","I know we're not supposed to make cleanup commits at this point, but surely
we can make an exception for removing self-described hacks and utterly
misleading comments? :-)

svn-id: r12497
"
"ce3e6d7fd850be428eb4ded4668920b57e61dc82","2004-01-18 20:11:52+00:00","fix warning

svn-id: r12498
"
"856b2dd825228a9577c52d4d2750894f0f97ec77","2004-01-18 20:22:32+00:00","fix warning

svn-id: r12499
"
"afa3ceb07f1b19bd823719f22162bcbf9676a62b","2004-01-18 20:29:00+00:00","fix warning

svn-id: r12500
"
"e578aeec44a7c27a3d24cb3425db7c21ccc47c9f","2004-01-18 20:46:11+00:00","don't use bit 31

svn-id: r12501
"
"c5f9a566da191daed888fd99ccc97c06a9a36582","2004-01-18 20:47:17+00:00","undo this change (proper warning fix was applied to gameDetector.h)

svn-id: r12502
"
"aa0ad9b491362f06ee2f09318a9f0003d8ca4d2a","2004-01-18 20:57:45+00:00","Patch #878883: Fix for Ogg Vorbis playback

svn-id: r12503
"
"2c3dd03d266d4cd81097ad5d4b712aeadd753333","2004-01-18 20:57:46+00:00","fix warnings

svn-id: r12504
"
"57420fe8699364641d9389b89b7c3e05fa80fe22","2004-01-18 21:01:44+00:00","increased warning level to 4 and disable some warnings difficult to fix

svn-id: r12505
"
"4b9602615c33c0c67c9a9d414bb9ff2e298602cb","2004-01-18 21:09:57+00:00","This should make subtitles work again in 'overlay' cutscene mode.

svn-id: r12506
"
"cd045460cc221e5918a0e650948b41cb1e1d7162","2004-01-18 21:41:38+00:00","improved rect clipping & verification

svn-id: r12507
"
"409c182b4ae3fe7d1b26204b5f8329834de1c9d9","2004-01-19 17:37:15+00:00","added continue play state song after sequence song finished

svn-id: r12508
"
"18799981aa8cba6e2fc5a1ed3127daeeb1881505","2004-01-19 17:44:04+00:00","fix mp3 and vorbis specific bug in which sound files could have been read
as zero-byte files in the case that two following offsets pointed to the
same file.

svn-id: r12509
"
"7080232de0cbc40f4300d125db0e39c7a8dace02","2004-01-19 17:46:08+00:00","fix memory leak

svn-id: r12510
"
"a9f8a9ca1875be33d6bb63c6c31d00082f5b6d4a","2004-01-19 17:50:38+00:00","oops

svn-id: r12511
"
"f94373b570ecfb276052b9d3061f4545ecd2a2f3","2004-01-19 18:57:06+00:00","this is not necessary anymore

svn-id: r12512
"
"7e42cd74afd4f989425944a1357200c67dfc1945","2004-01-19 19:09:08+00:00","found a place where _blitAlso is used in Sam&Max

svn-id: r12513
"
"bb8f1568820a4cf7385627d360876c88a0001fcf","2004-01-19 19:25:11+00:00","improved fade param for dig demo

svn-id: r12514
"
"4ad9da8b757aba2e6c1b53430a1f539be306b62c","2004-01-19 19:30:58+00:00","fix build system / dep checking

svn-id: r12515
"
"d094989ae24bfba1cbff2f7a230d3b68e51c68bb","2004-01-19 19:34:48+00:00","smush and insane only work with V6 (this will allow moving some stuff from ScummEngine to ScummEngine_v6)

svn-id: r12516
"
"e8164dfb705ef94dcc237bbd2a6bafd8d772d617","2004-01-19 19:47:47+00:00","moved some V6-only scumm vars to ScummEngine_v6

svn-id: r12517
"
"67d4e3153a136f1c82531f96aee97f6100f8a0db","2004-01-19 19:51:13+00:00","updated MD5 data

svn-id: r12518
"
"bcf805234115b0fc38e494672883919ed94e6cb6","2004-01-19 20:14:29+00:00","forgot to remove this :-)

svn-id: r12519
"
"8e89f7d060ca5fac1efc7c244df91b678f7e2c9d","2004-01-19 20:23:27+00:00","moved the sam&max inventory hack into o6_setOwner

svn-id: r12520
"
"923adce4562897a6df4f023622f1770d0eac4c15","2004-01-19 20:27:31+00:00","fix endian bug when dealing with ArrayHeader's; added a hack to permit save games broken due to this to still work; moved the whole 'Array' stuff into ScummEngine_v6

svn-id: r12521
"
"9f3515be30b43327521b097caf39e2d651d9cafc","2004-01-19 20:34:54+00:00","Add comment for checkbox CE tweak

svn-id: r12522
"
"7a53d9ba7bd3b48a382161ed809e2088e5945ddc","2004-01-19 21:23:42+00:00","Added MusicPlayer class (MidiDriver derivate) for greater flexibility

svn-id: r12523
"
"993fba68f15733c7ac5c4b423833999574d182cd","2004-01-19 21:38:07+00:00","prevents bank re-loading (cutaways animations)

svn-id: r12524
"
"3de67205c3caa287d17b7a54c200f3930a33a94d","2004-01-19 21:46:02+00:00","increase Credits::_list size to match the German version requirements (thanks Alexander Holler)

svn-id: r12525
"
"392940e7dd396c932dfba946642f0e567f656dc9","2004-01-19 21:47:20+00:00","re-use BobFrame

svn-id: r12526
"
"95891f95c728cdcf8bbd66d42a4c2b08c735b4fc","2004-01-19 22:31:21+00:00","*temporary* fix for LineReader to handle files not terminated by an empty string (*.crd)

svn-id: r12527
"
"2f7198a3acabe4db57a001817686abe397c96e3f","2004-01-19 22:55:42+00:00","cleanup

svn-id: r12528
"
"698eefae58b5ff065fc777b28530a3d77e5f9933","2004-01-19 23:54:50+00:00","- Enable music queueing (I don't really like the levels of indirection, but it'll do for now)
- Handle special music type '2000' (restart previously queued music)

svn-id: r12529
"
"b8e739ae3d6d6e3ee61b5c1e67e29ee13c60410c","2004-01-20 00:21:24+00:00","Add newline
Prevent overlapping speech in dig.

svn-id: r12530
"
"c78bab1c6288603f82a04bf4296b32e2b1d97a8c","2004-01-20 01:13:07+00:00","AFAICT this is only used for caching in the original, which we don't care much about - seeing how rarely it's used.

svn-id: r12531
"
"cba7fab326edd210607356eb87763569c5608157","2004-01-20 10:33:02+00:00","_blitAlso is also used by the DOTT intro. Updated comment to reflect that.

svn-id: r12532
"
"11c8ff9544a048e51548bb3f0e3fd18b7ee96118","2004-01-20 10:51:53+00:00","Handle command 0xD0 (queen uses this) - thanks aholler.

svn-id: r12533
"
"0d8566c0b67a0f0714fe464d79364e32ad4774e4","2004-01-20 11:16:17+00:00","Update comment

svn-id: r12534
"
"4ea5f7225d24adc4c3fd68fb82f1c188931f2b68","2004-01-20 12:44:00+00:00","initialise _channel array

svn-id: r12535
"
"255e1f9036dcbc0976c3eab9c29d9eb6b826c857","2004-01-20 13:26:00+00:00","Some minor cleanups (comments and spacing), and fixed CPU usage in synced
cutscene playback.

svn-id: r12536
"
"bd34655abb894f37b467aae0fd6b29d360bfdedf","2004-01-20 13:27:17+00:00","I assume this fixes CPU usage in synced cutscene playback, but since I
don't have said cutscenes I can't really check. (I did the same change for
BS2 though.)

svn-id: r12537
"
"61c37c97c7ea95e6d4c3c0e837d649b7754789e2","2004-01-20 13:28:49+00:00","Changed printf() to warning()

svn-id: r12538
"
"4679ac1f05e2bfbbf1594e596e5ec362f5e6fb0d","2004-01-20 13:44:20+00:00","Hack a bit MD5 to make it work on PalmOS

svn-id: r12539
"
"a579418d78c0b7e79b59fa9c1a10d44d35fda7f9","2004-01-20 13:50:43+00:00","Dont use full_screen on PalmOS, use ConfMan instead

svn-id: r12540
"
"26483ce660764501aa89195afc1edcb7cf60b018","2004-01-20 13:52:44+00:00","Updated resource files

svn-id: r12541
"
"7955e4ce72c47b38973b487f234d65494172ffed","2004-01-20 13:54:46+00:00","Missing stdafx.h

svn-id: r12542
"
"ef14c7907b0744a68e1e8183bfa6387d65c92938","2004-01-20 13:59:04+00:00","Removed unused stuffs, added ARM init functions

svn-id: r12543
"
"89ae755bdcecf09e04543c920e8b7b27e0d0715a","2004-01-20 14:01:45+00:00","Disable tapwave code for now

svn-id: r12544
"
"79db0a1853f368e8413f51f6e28a77f9d2b2fc94","2004-01-20 14:03:50+00:00","Fixed GamUnselect function, added GamJumpTo

svn-id: r12545
"
"ebc71349dbe9b491610c0578fa1f1a141c6b9583","2004-01-20 14:08:31+00:00","More PalmOS options + macros

svn-id: r12546
"
"b2437592077c494a5ca9aa5e3af8fb06393f76d6","2004-01-20 14:10:23+00:00","Always create the log file, more ScummVM options supported

svn-id: r12547
"
"b90139eae7fe1bf8db45d50130431c07670b2787","2004-01-20 14:16:10+00:00","Missing stdafx.h

svn-id: r12548
"
"cc123e7e28f977c336b0c6d73e291e84f5941e02","2004-01-20 14:18:08+00:00","Updated with lastest CVS changes

svn-id: r12549
"
"2c60f5f3bc3625af7075296507518bd3bd0cf896","2004-01-20 14:22:42+00:00","Fixed list positioning, tapwave related stuffs

svn-id: r12550
"
"f86271e04cd141301ce36269266e86e0eea56b21","2004-01-20 14:24:30+00:00","Moved MainForm stuffs to its own file

svn-id: r12551
"
"1b968f657ab148a8a4c8eecb5265103106fedda1","2004-01-20 14:25:43+00:00","Chenged max stack size

svn-id: r12552
"
"80ed622e64bb52eb35adb1088de612f08386263b","2004-01-20 14:29:08+00:00","Added FtSeqNames

svn-id: r12553
"
"747685521fb2f9e744517ff1b533de35ac2d687e","2004-01-20 14:30:35+00:00","Added copy protection and aspect ratio options

svn-id: r12554
"
"6f525a42e50922f61b2451dd23f19f724764d0ab","2004-01-20 14:32:01+00:00","Added DrawStatus function

svn-id: r12555
"
"3bf6ddaa7bfc4182f1a5171655cce47ac472d06c","2004-01-20 14:33:03+00:00","Added abort() function

svn-id: r12556
"
"59cddfc6386b002e923243d51a046a764dd3878e","2004-01-20 14:35:37+00:00","Missing stdafx.h

svn-id: r12557
"
"65d2e4e718be1a9e4d7355a506e38d317f0f16ab","2004-01-20 14:38:15+00:00","Enable those drivers (still no sound on PalmOS)

svn-id: r12558
"
"f05654662ce6f0ef40bc378ec0032d77e50a5db8","2004-01-20 14:39:38+00:00","No more needed

svn-id: r12559
"
"941f99dc38366a2bb53c438c43979642d983c3eb","2004-01-20 18:51:32+00:00","Added latex-files. To make the readme.ps type 'latex readme.tex&&dvips readme.dvi -o readme.ps' If someone wants a Makefile, please post it to the scmmvm-devel-list.

svn-id: r12560
"
"8734619d3a3cd08e12bd899e0a594f3c155cd79d","2004-01-20 19:49:13+00:00",".cvsignore

svn-id: r12561
"
"6972064e34cc6614103db1aec475d2aaa7bba30a","2004-01-20 20:38:17+00:00","save 8 pages by using a smaller font, reducing the page margins, and keeping the TOC on the first page; also make use of hyperref so that we get a nice hypertext TOC

svn-id: r12562
"
"d26fd46cd013459c37d208a8e7cda08e4e434073","2004-01-20 21:49:46+00:00","slightly less hackish LaTeX code

svn-id: r12563
"
"ff43b1f8d52412441123d70f18309a6770976f7c","2004-01-20 21:58:26+00:00","- fixed bug #880415 (only setup bam scene after all _vm->update() calls)
- constness

svn-id: r12564
"
"15a5fd20a3e3d7328512fe64102ed75f3c50fc87","2004-01-20 22:35:53+00:00","fix 'conversation options still displayed after hitting esc' bug (noticeable in plane when speaking to Sparky)

svn-id: r12565
"
"33d7e5a093e807e0e3b127342609471f3a903404","2004-01-21 08:50:15+00:00","Don't crash if unable to play cutscene music.

svn-id: r12566
"
"5bc6d14e339eca6829a2c48b9dde3aa5b0e67498","2004-01-21 13:35:27+00:00","Prevent getPlatformDescription(...) from returing NULL pointer using kPlatformUnknown

svn-id: r12567
"
"2d7f1b9d0f12176730c1074d0b6c4756ba27a321","2004-01-21 22:04:39+00:00","clear user input before entering Journal (no more load problems occuring when journal is started as joe is about to do sthg)

svn-id: r12568
"
"b982864a8d37407f7a91ffc233ece55cc46b8def","2004-01-22 00:00:31+00:00","fixed bug #881141

svn-id: r12569
"
"1f7a74099a5b534ccbe5d9853cdb7830b13448bb","2004-01-22 02:37:41+00:00","Remove a few old warnings.

svn-id: r12570
"
"45739906a573b5e246f581512efed2d935b05336","2004-01-22 03:22:01+00:00","actor ignoreTurns is complete for scumm6

svn-id: r12571
"
"978ba89095927d8471c10d6c9bdb050f7dc33c56","2004-01-22 04:31:31+00:00","patch #878551 from Gael Le Mignot, adds key mappings for yopy PDAs, a host option to the configure script for cross compilation and sdl prefix option.  Also remove obsolete sdlgl option from configure script and change the --disable-bs options to be --disable-sword to be consistent while I'm here

svn-id: r12572
"
"ed6aed43bf03b9aefcc9d4fb8a81f1455a0c1003","2004-01-22 04:46:34+00:00","Not needed for puttdemo.

svn-id: r12573
"
"747cbef8d7fa5dffab1a21d56726bf207211b80e","2004-01-22 19:43:36+00:00","Fix for bug #882081

svn-id: r12574
"
"90b96a94abeb8ee02d5468f9088a23174a0ccc60","2004-01-22 21:02:29+00:00","whitespaces

svn-id: r12575
"
"99e3175d548d5dce704aaedab9ed291a4b365dae","2004-01-22 22:28:57+00:00","(slightly) less hackish bounding box code

svn-id: r12576
"
"0bece175e485b4456cb966052662b38fe2147647","2004-01-22 23:10:05+00:00","- Some refactoring/clean-up.
- Handle special music types (> 1000)
- Implemented random looping (untested)

svn-id: r12577
"
"46f25d440fa4388dceab62616a0156e89a9d901a","2004-01-23 10:27:30+00:00","use BobSlot::clear instead of Graphics::clearBob

svn-id: r12578
"
"28b365803b3e1dbffb453bb53b23dfa7db9e7277","2004-01-23 10:28:20+00:00","MSVC warnings

svn-id: r12579
"
"82e005fe5ad3803745b47f15fe8463b7709bf1a3","2004-01-23 10:34:57+00:00","use BobSlot::clear instead of Graphics::clearBob

svn-id: r12580
"
"7401421b1dcfa2df98738e4c5be875976070cbd8","2004-01-23 10:40:32+00:00","update

svn-id: r12581
"
"7bd31d615c0ee1509ca95401e5656449050aca42","2004-01-23 16:58:13+00:00","change sscanf() calls to atoi() to please PalmOS :)

svn-id: r12582
"
"6c8111bac92db1193489642d4ddbc04b52aafa5e","2004-01-24 18:20:21+00:00","fix OSX COMI cd changing hack

svn-id: r12583
"
"d40d9b7f0d2145b231538227b08ba20d8ba890a7","2004-01-24 22:55:09+00:00","- Added MT32 -> GM mapping, this fixes the wrong sound for the clock in the beginning as well as various tunes.
- Don't try to play invalid music (list probably is incomplete)
- Work around annoying notes bug in 2 pieces of Floda music
- Stop music when loading savegames

svn-id: r12584
"
"f4e26c9412b4edaf50602091f29a1c2362147107","2004-01-25 05:03:35+00:00","Add support for music in fotaq demos

svn-id: r12585
"
"87730caa0298fca70c609c5d589620ea04df8830","2004-01-25 05:25:50+00:00","Fixed plenty of bugs:
o Seek error. Now it seems to cover all cases
o Shadows in tunnels on mineroad
o Renamed some function to match functionality
o bug #867555 (Problems between Mink Farm and Poyhoga)
o Ben disappearing in car chase

svn-id: r12586
"
"10a37c8c2507afab94d29a0fd3d7eb47d53cb2c8","2004-01-25 07:53:03+00:00","Small correction to my last commit.

svn-id: r12587
"
"5fa9dfa87e990157afa3869a67b1706ddce904bf","2004-01-25 11:47:22+00:00","The Floppy version has speech in the intro. (it doesn't hurt if speechToggle is set for the floppy version)

svn-id: r12588
"
"32a58b360386c96a7aebecb585d92683145d81b1","2004-01-25 12:20:59+00:00","get rid of ScummEngine::_insaneState (I think we should eventually stop calling processKbd() from inside smush and replace it with special code there)

svn-id: r12589
"
"b3a9071118f9007597e5a53f81f6fa5c49d754b7","2004-01-25 12:50:29+00:00","- Cope better with invalid music (fixes 100% CPU usage)
- Some const'ness

svn-id: r12590
"
"2bd86191a0a789b7d0c5962dabf0c82610a70d05","2004-01-25 14:10:29+00:00","demos never have speech

svn-id: r12591
"
"6dbd03acea2e4dd5d84a23df2d70c72ea399f782","2004-01-25 14:18:14+00:00","Remove old debug msg.

svn-id: r12592
"
"a5f45c0323aaeb2dc871fe4472a31c3eb9edf58a","2004-01-25 14:21:37+00:00","Change debug level

svn-id: r12593
"
"8d89162d8f641f423cf77faffc97cf3ad1894515","2004-01-25 15:08:41+00:00","Updated comment

svn-id: r12594
"
"3f757058f6815e6d9cff706f573e24d8f3d6a515","2004-01-25 16:29:19+00:00","A music table from original demo exes.

svn-id: r12595
"
"04bb7fff2d09663d27c12e3391514ff305b1ef64","2004-01-25 16:48:06+00:00","Check for demo version.

svn-id: r12596
"
"fde0a08cc91aebfe6449f7ce609204a9842153d1","2004-01-25 16:57:05+00:00","Song 17 should be silence in demos.

svn-id: r12597
"
"b106eb1e43e8f5a3c3fd78e547b2f7945969375b","2004-01-25 18:41:26+00:00","Fix missing song at airport. Thanks for investigating, Kirben!

svn-id: r12598
"
"0d974b9daa4df60a87255cc6f477c9696034c24f","2004-01-25 22:10:23+00:00","Seperate SFX and Speech.
this fixes the 'pauses' in the car-chase scene and other scene which use
speech and sfx simultaneously.

svn-id: r12599
"
"663b81a4d7a7e261bb10f7a2b21e00b0254a1583","2004-01-26 01:07:17+00:00","fix compile

svn-id: r12600
"
"8ea92dedabb467abf07b3e24e1f324e71c03e47b","2004-01-26 07:32:25+00:00","Support for new CE backend launcher

svn-id: r12601
"
"e17ae4de3ab98558e59f96057a0c696df3eecf82","2004-01-26 07:34:53+00:00","addGame made virtual (temporarily ?) for CE backend launcher

svn-id: r12602
"
"bb3a9e4cb308c8353f77b424445b5df23040340a","2004-01-26 07:35:31+00:00","Undo old tweak not necessary anymore

svn-id: r12603
"
"387860213ea987ee192cdac3fc1b1d1a91057ceb","2004-01-26 07:36:47+00:00","Hide unnecessary options for CE in the main options dialog

svn-id: r12604
"
"1cbefa8e21e386a28386a9cd4e67ede115e3815b","2004-01-26 07:37:41+00:00","Revert old change - proper fix is to avoid playing in portrait mode :)

svn-id: r12605
"
"a2038809b2e0c455717e5cb24b54b53251d4efa5","2004-01-26 07:38:26+00:00","Yet another stupid EVC fix

svn-id: r12606
"
"240a599758d531a1d8cd73bd8bca59a768741f1a","2004-01-26 07:40:14+00:00","CE Keys dialog moved to new backend

svn-id: r12607
"
"5606ec3f45e435e8effb3b34295db2fd9f37d090","2004-01-26 07:42:16+00:00","Come back of your favorite stupid EVC fix

svn-id: r12608
"
"9b09669143a2fef7fca7b655348b58bc7610ebaa","2004-01-26 07:42:58+00:00","One forgotten PROP_TOGGLE_VIRTUAL_KEYBOARD

svn-id: r12609
"
"d5e2c21f562d23b8ef4c37b21e9d8fee90a03a3f","2004-01-26 07:47:32+00:00","Early spring cleanup

svn-id: r12610
"
"70d2673f4e38032c873cd146800bedb7062af36c","2004-01-26 07:57:25+00:00","Add SAMPLES_PER_SEC for CE in order to compile sdl-common

svn-id: r12611
"
"523e43188aa43ef57d03484670d200be113969a2","2004-01-26 08:10:06+00:00","Initial CE GUI classes commit

svn-id: r12612
"
"bf70b6de8ac73e02427b27afa8b5ca5d5318c66a","2004-01-26 08:14:04+00:00","Initial CE virtual keys classes commit

svn-id: r12614
"
"ee9f8d928cf8bf06214a8998e497d272a37c468a","2004-01-26 08:14:51+00:00","This VCC file doesn't seem to be useful

svn-id: r12615
"
"5802ceb9754b7e779b6a5bfad6bde4ac68b0d78b","2004-01-26 08:15:50+00:00","New resources files

svn-id: r12616
"
"cccecd0ee3dd4ef155aa21f75c364355f746ea13","2004-01-26 08:17:37+00:00","Add GUI icons

svn-id: r12617
"
"bf88c1eae54b3b90e1ca39f1547332bb8fc17fb7","2004-01-26 08:20:26+00:00","New CE backend initial commit

svn-id: r12618
"
"694ead7c0ef3758dfc36a17d84d1437c87b1a162","2004-01-26 08:21:25+00:00","Added Multi-CD Section to 'Running ScummVM'

svn-id: r12619
"
"ee6842c9d171e7d91c232b815582d08f9bc66ffd","2004-01-26 09:42:32+00:00","Update project files

svn-id: r12620
"
"e9e7ded89f7a7b5734795edcdd131c14f22e7bf4","2004-01-26 10:51:57+00:00","Ooops

svn-id: r12621
"
"64a99ea13dc044ede1a41650b97357f124ebd060","2004-01-26 11:39:10+00:00","Not needed

svn-id: r12622
"
"7a7cb7e02b6cebdeeaf17eb7a30646813c322d01","2004-01-26 15:41:30+00:00","o Fixed bug with lost inventory
o Gave meaningful names to many variables
o Eliminated some slipped debug output
o Fixed vista-ranch scenes transition
o Now it is possible to equip goggles

svn-id: r12623
"
"29f87fb011fe1550b0896baae95e74127bc3b2fb","2004-01-26 16:52:19+00:00","Return default description string

svn-id: r12624
"
"24721e8b0e923e32e9ce7fa33ed5086a4108e38f","2004-01-26 20:14:09+00:00","updated MD5 data (from Forum thread; not all data included yet)

svn-id: r12625
"
"a5aba18abf750ce81724cba41cc2c7d2e544a1d3","2004-01-26 20:28:35+00:00","Remove old CE tweak

svn-id: r12626
"
"511e8ded4ed26cea2011393c7bc0ce1841f79401","2004-01-26 20:32:29+00:00","Fix ItemAction

svn-id: r12627
"
"3edfebd7535b313c0eead2e5889b072cad697932","2004-01-26 22:30:50+00:00","updated MD5 data

svn-id: r12628
"
"74901527146fef1de6f26f5e28152cf0f2c59917","2004-01-26 22:38:08+00:00","Fix Ogg Vorbis, Zak and low sample rate

svn-id: r12629
"
"498e0f4d6f088a77ad450ed782befc4a799cdf24","2004-01-26 22:44:47+00:00","o Implemented TRS handling
o Now you can succesfully reach the cave so FT is completable, but it crashes
now in some particularly situations, so you should avoid them.

svn-id: r12630
"
"b1274d70d9fba33b20088e87e3271077e39491c2","2004-01-27 00:13:25+00:00","const'ness fixes

svn-id: r12631
"
"86d5cb7204c9afd378edce0cc83d0aa5d0697d25","2004-01-27 01:29:30+00:00","Fix 640x480, part 1, perfect fix tomorrow probably :p

svn-id: r12632
"
"0b344350704c4a7ccb0010c643adc7ef3a2e1785","2004-01-27 13:33:21+00:00","Avoid glitch if Simon1 introduction is skipped when showing Simon' room segment.

svn-id: r12633
"
"832155b8cfbe2c99c704bae5b01dd2303c8b7763","2004-01-27 16:28:39+00:00","add in-game debugger

svn-id: r12634
"
"33e613b5c79a9960a5ba3af71c285d28b4623b0a","2004-01-27 16:56:11+00:00","Proper fix for bug #884712

svn-id: r12635
"
"e6a7360d06adff5db538a178b9d897bb0509627c","2004-01-27 17:13:43+00:00","Add help
Add music option for Simon1

svn-id: r12636
"
"33bf57c1e7df4e54a64cafd2a4d8a0eece6b7f2e","2004-01-27 17:18:06+00:00","Ooops

svn-id: r12637
"
"8f80241571167d0bc120f1c278527b69ae2b15ef","2004-01-27 17:22:08+00:00","Add safety check.

svn-id: r12638
"
"f00f911f398161f2595a9170ea3e132a6c82f677","2004-01-27 20:05:23+00:00","Fix compile on Embedded Visual Csomething

svn-id: r12639
"
"829df83f79ce9af815ee4c9a208e2404c5ab9903","2004-01-27 21:28:17+00:00","minor cleanup

svn-id: r12640
"
"63be7c1323061db7f30897886c92b899814e0247","2004-01-27 23:05:02+00:00","Allow using a real MT-32 (can someone with one please test this?)

svn-id: r12641
"
"7b05525823416ee1dd95022a666933dba2d01f41","2004-01-28 01:05:22+00:00","640x480 changes

svn-id: r12642
"
"4793b48326a111e05deb76d61b5bbbcc965d861d","2004-01-28 01:06:29+00:00","Add needsHideToolbarMapping

svn-id: r12643
"
"2ff396d7e8682ae5b06c54a57f3ceefed01e20e3","2004-01-28 01:09:08+00:00","640x480 toolbar fixes, don't draw an invisible toolbar

svn-id: r12644
"
"d7b6160cd27f90e13b76cfc2a2a25f69e740a3b6","2004-01-28 01:12:48+00:00","Fix toolbar, add hide toolbar request

svn-id: r12645
"
"dbe4fae5b90fb3662629667047b3d42bc4e139d5","2004-01-28 01:19:15+00:00","Add some feedback.

svn-id: r12646
"
"1eb7723492995d1f74ab888c7b906a671adec58d","2004-01-28 01:33:49+00:00","Update

svn-id: r12647
"
"a72e72696834924835449f8b20103cfb776ecd4a","2004-01-28 02:27:09+00:00","Add some more commands to debugger.

svn-id: r12648
"
"7dd78f11d3cc5f50b1684b9e03fa13ab04908a68","2004-01-28 02:42:23+00:00","Use a few form scumm

svn-id: r12649
"
"d417394a25ccdca6b0ce44f33eef9c45b15082a3","2004-01-28 02:45:00+00:00","Ooops

svn-id: r12650
"
"0e9e75da9d80fe124116d661b793f91781f6cbfb","2004-01-28 03:01:28+00:00","music works on Simon2

svn-id: r12651
"
"4c430c9b4ae7e834968e7eef5c52649ae63d5c92","2004-01-28 03:08:42+00:00","Another safety check.

svn-id: r12652
"
"ece80a4a1f82abcef5c5aa0c12f665a89d7c85e2","2004-01-28 04:07:54+00:00","Partial fix for bug #885488 (Some INSANE trouble)

o Finally fixed seek error. Now I never encounter it, though there are weird
SAUD errors in some cases.
o Started to hunt cave-dude-only bug

svn-id: r12653
"
"96e0a747f9ce7d9abf4409967d7af2a8c6de5080","2004-01-28 04:11:06+00:00","Add fix from eriktorbjorn to make sure screen is always updated during cutscnes.

svn-id: r12654
"
"f5b5d863c018be504c8251db76c4c5c21cebe670","2004-01-28 09:10:07+00:00","Interview has no speech iether.

svn-id: r12655
"
"22e3a4b31d94186143353280b6ef8c865f22933f","2004-01-28 11:10:58+00:00","Update

svn-id: r12656
"
"c99ed51800cbbb514cfa23d37766b41040b99041","2004-01-28 11:58:24+00:00","TODO update

svn-id: r12657
"
"239275c608e0b5ebec98b93db593cebd863e4666","2004-01-28 13:13:58+00:00","remove outdated TODOs

svn-id: r12658
"
"8c84dbd35eab4bb824189e823776fb794240379f","2004-01-28 15:44:15+00:00","Added Change in Credits

svn-id: r12659
"
"505a61cc7f308974cb597be8bb84212bce708553","2004-01-29 00:35:16+00:00","corrected MD5 table entry

svn-id: r12660
"
"2c4aac375bb6244dd6c2f4d42f1857c5dab5b5fa","2004-01-29 15:21:40+00:00","The README file no longer lists the pirate song as a problem, so I guess
this file shouldn't either.

svn-id: r12661
"
"d61ecae6bad9ccc4f2c5e6798e08aafc325ca624","2004-01-29 15:25:13+00:00","Broken Sword doesn't do auto-saving either, as far as I know.

svn-id: r12662
"
"45cded8b6c0603420e4a2fa2206e107a2e8bb07d","2004-01-29 15:37:17+00:00","Updated the Hot Keys section. Still more work needed, and since I don't
have LaTeX installed on this computer I can't check whether or not I made
any syntax errors.

svn-id: r12663
"
"bcedf44957cf0a688ad1a6a455f5f095d3ebd7d3","2004-01-29 16:14:17+00:00","fix syntax errors

svn-id: r12664
"
"176aa74827decbeb3efee979b34599e109a863a2","2004-01-29 18:15:27+00:00","Renamed the 'pan' effect of the mixer to 'balance', since that is what we actually do; applied patch #886786 which corrects a bug in the balance code

svn-id: r12665
"
"dc1e4699ee84ac3cf1e35d69f8d85a18acaedd9b","2004-01-29 19:37:59+00:00","fixed warning

svn-id: r12666
"
"3f61dcafc16212373b47bb5e37bcd1d6b92fcc6b","2004-01-29 19:38:19+00:00","update

svn-id: r12667
"
"fbab0e9984864917e6eab90fcf2c713f705ede73","2004-01-29 19:59:00+00:00","fix for bug 886201 or rather revert back to hack

svn-id: r12668
"
"81ff879a9daf101a51be72c838ca6885f93746d9","2004-01-29 21:54:03+00:00","Add the super-ultra-mega-secret --savepath option (and it's not just secret because I am too lame to write a help entry, add it to the README, and add it to the TeX files. *cough* No, that's not at all the reason... :-)

svn-id: r12669
"
"6dec294de5cc77cbdd7f341d3b6db6735a2669c0","2004-01-30 02:14:29+00:00","o Renamed more variables/structures to reflect their functionality
o Fixed bug with only caveman approaching
o Extended smush player to process FT-specific overlays in videos.
They're used to draw broken truck & car approaching and opponents on the
mineroad

svn-id: r12670
"
"3758815c095ec870f3dd45e1ba0821210a574b69","2004-01-30 02:37:18+00:00","o Fix crash in FT intro

svn-id: r12671
"
"d1ac15e23c333c9c3297c9f1bee5b398f66b3284","2004-01-30 02:38:45+00:00","oops

svn-id: r12672
"
"519437aab119d1a93ee372d002fc51e9af6ecb24","2004-01-30 03:26:47+00:00","Add better work around for inventory arrows issue in some Simon1 versions.
Remove seom debugging output.

svn-id: r12673
"
"d9cb0b1e791ae93426d3b0bd7064763d751d5623","2004-01-30 16:01:08+00:00","DOTT should save sound state if _saveLoadSlot is true when doing a temporary save. It doesn't set flag via get/setkernal like later games.

svn-id: r12674
"
"8bd19dab0b5da51f28e80f8550c50527e0801252","2004-01-30 17:30:06+00:00","Fix for bug #887167 (FT: Sound/Music/speech (almost) mute)

svn-id: r12675
"
"4dab40f1233eba825aa9c5834b135403f922c8c4","2004-01-30 20:47:21+00:00","fix whitespaces (we should eventually try to remove this code duplication again, folks. maybe add a 'video' global module or so...)

svn-id: r12676
"
"c7424312c32d6cc27c3b052720ad252e94f28c37","2004-01-30 20:49:26+00:00","improved debug message; code simplification

svn-id: r12677
"
"2f8d19d0046b6aa4c2229d081fc44fc7ae55a8ed","2004-01-30 20:57:23+00:00","avoid using huge static structs - they can't be stripped, and increase the exe size (in this case, 16 MB...)

svn-id: r12678
"
"671be90c74e991087a38f236431e0532f83c77e6","2004-01-30 21:03:17+00:00","add MPEG2 to the static-link-hack

svn-id: r12679
"
"da76ac5890ee662cb8026ea07a0566c61889df4a","2004-01-30 21:54:28+00:00","Various changes to the build system which allow building ScummVM in an external directory (and as such, allow you to have a debug, a profiling, and a release build from the same set of source files in parallel). Work in progress

svn-id: r12680
"
"6c86f714686a1ca0f3967b772a8b8a4b399c61a8","2004-01-30 23:39:56+00:00","Removed references to build.rules; updated Mac OS X build instructions (though they still could be improved a lot; same for the general build instructions)

svn-id: r12681
"
"9dda30c30859696538bc22dc85b31a7365acbdb7","2004-01-30 23:59:13+00:00","Add a proposal for a revised documentation structure. Comments are welcome

svn-id: r12682
"
"42a3206e6fbfe9cdb879053b4e965cb82f24c36c","2004-01-31 00:05:08+00:00","Removed 'builddir' again (not really needed for now); fixed 'bundle' rule for external build dirs

svn-id: r12683
"
"5c2cb28c5ad7a2772618bf6cd5821490a149c663","2004-01-31 01:58:14+00:00","Update mingw Makefile.

svn-id: r12684
"
"21f7b4633aebe80a2bf243448610b0ab66a14533","2004-01-31 12:28:38+00:00","Fix bug #887536 FT: Intro crash (regression).

svn-id: r12685
"
"9b2e69fe2f9c4bd431ed51da3e45072551e91bab","2004-01-31 16:07:11+00:00","Patch #886058 - Don't stop music when loading certain temporary states.

svn-id: r12686
"
"f58e13fe4d614935aeddebf6267041241fe82cb7","2004-01-31 16:10:21+00:00","Add TODO about naming of _saveLoadCompatible

svn-id: r12687
"
"41230fa999b40b6ecaa42e133f468e23effaaba1","2004-01-31 16:49:52+00:00","cleanup (len == size)

svn-id: r12688
"
"47819c9d49a0bd165f3c47948efce72c782a6422","2004-01-31 20:15:37+00:00","Set $(srcdir).

svn-id: r12689
"
"a67aca5b19b45bee2dd27b1186248bc9acf79684","2004-01-31 20:34:32+00:00","Cleanup.

svn-id: r12690
"
"9fe1aaa9215e2ca540c859f2647629453a9f70d6","2004-01-31 22:12:35+00:00","renamed _saveLoadCompatible to _saveTemporaryState; make use of requestLoad/requestSave

svn-id: r12691
"
"28f8f4d0918db1fd71f80cc9b0b02bb04cda6e48","2004-02-01 01:31:50+00:00","Added FilesystemNode::getNodeForPath, but right now only for Mac OS X

svn-id: r12692
"
"cd369ebad26f8c5f50b920160deda2695bcdba87","2004-02-01 01:32:43+00:00","cleanup

svn-id: r12693
"
"51733fbe3e44db6283aef733bd1e3fcd0c5adb48","2004-02-01 02:03:01+00:00","native directory browser on Mac OS X

svn-id: r12694
"
"84d8e4dca45f73a82dbb68121d46cf4de277508d","2004-02-01 05:44:18+00:00","o Major debug of all actors code
o Road signs aligned to match original
o Fixed bug with Ben's velocity not reset with scene switch
o Removed some unused code
o Debug level increased, so console is not flooded anymore
o Rearranged those huge switch statements

I succesfully passed by all insane scenes, so FT should be completable now with
some SAUD related crashes which are easy to avoid.

svn-id: r12695
"
"9f2e4a92f040a1f15bf489be19c40e6e64fef4e7","2004-02-01 05:56:34+00:00","Update TODO list

svn-id: r12696
"
"7e875dc55ae4f2f01950143c233357533a44769f","2004-02-01 13:47:15+00:00","fix valgrind warning. (pressing ESC like mad at startup could cause it to check against uninitialised value)

svn-id: r12697
"
"c3a5b9abf7cd8a37c4d9f5be8f8891e9c74369b4","2004-02-01 13:50:44+00:00","Match new[] with delete[]

svn-id: r12698
"
"579d7bef2438e8c9d4105b902bca060a1ee9dd4f","2004-02-01 14:03:00+00:00","forgot to commit configure

svn-id: r12699
"
"39824cb47bbf03bf96c5d251932dc34a5e5d0b81","2004-02-01 14:41:23+00:00","another valgrind fix

svn-id: r12700
"
"2daf5fda6bfbff189d4775e24319a9983df8e9ad","2004-02-01 15:02:16+00:00","init _joe.walk (valgrind warning)

svn-id: r12701
"
"ccca1147bca2743c3ebfeee5f9740d0dc61f4946","2004-02-01 16:27:12+00:00","Ignore sword1 build dir.

svn-id: r12702
"
"a79b9060bf6e35b83d52e84f3a613046115763a9","2004-02-01 16:31:28+00:00","More old cruft removed.

svn-id: r12703
"
"5b7cd91cd0a746709f2f6c3f0fda32553ac562bd","2004-02-01 16:36:47+00:00","Added missing definition of RM_REC.

svn-id: r12704
"
"3da532f38807677679721ac22aa9f64e4f599f0c","2004-02-01 16:43:46+00:00","The cleanup goes on...

svn-id: r12705
"
"13b93b8bbab156ba3ac8a07029459544c73c5490","2004-02-01 16:46:32+00:00","This doesn't seem to be needed anymore either...

svn-id: r12706
"
"38ddd865e56f94770286f4afec0e2e160dfd48ff","2004-02-01 17:07:23+00:00","Depfiles are not generated in $(srcdir), so don't include them from there...

svn-id: r12707
"
"dc167ac4d118c4148bfde57a303bed189b827bab","2004-02-01 17:09:35+00:00","Include . in MODULE_DIRS to get dependencies for this dir.

svn-id: r12708
"
"7b69cbc82767d8e3334e4696121734c9ace80921","2004-02-01 20:00:44+00:00","No need to explicitly include posix-fs.o.

svn-id: r12709
"
"0176e4de25e7d1348f866408eeaadd9ccd714d0a","2004-02-01 21:08:46+00:00","Fix for bug #880418 (COMI: Subtitle problems)

svn-id: r12710
"
"25e2688b4d984421b9fb8a2bf97ef1b8c0d8a947","2004-02-01 21:10:26+00:00","help poor VC7

svn-id: r12711
"
"110707da49a3da956f4e115feadecfeb1ef72c2f","2004-02-02 07:25:08+00:00","Add a few more HE target for future reference (Commented out)

svn-id: r12712
"
"3694bcde1b0d99fca4be3d4ea3635efd3da40dde","2004-02-02 07:32:02+00:00","Update

svn-id: r12713
"
"02ba3dd201b41ee6a7f9fc25ddb93524dabfc179","2004-02-02 07:53:55+00:00","Remove md5 checksum, too many conflicting checksums.

svn-id: r12714
"
"caffafa99b69dfbd4c283dec36a3889cc4c4a783","2004-02-02 08:37:31+00:00","Fixed initialization order warning.

svn-id: r12715
"
"c40474322fba82e9715d1f4b5453c7bd03012eb6","2004-02-02 13:54:36+00:00","Added issue about always using RandomSource for random numbers.

svn-id: r12716
"
"8a2496d6c5b11db615ab4d44a04b19e7dd9fef4c","2004-02-02 22:40:20+00:00","Fixed most bugs, so only cosmetic visual things left.

o Support transparency for characters. Needed for cockpit rendering
o Fixed bug in NUT renderer which drawed transparent characters garbled
o Fixed long-standing (and outstanding) bug with SAUD error
o Previous fix fixed music in some cases (scene transitions)
o Fixed bug with palette being reset when smush video is rewind
o Made debug level for insane adjustable at compile time (maybe I will remove it later)

svn-id: r12717
"
"43efc8bed0d908357c2bb0d0c626cdaba9cb35a8","2004-02-03 08:47:38+00:00","Patch #889552: Possible fix for bug #884171

svn-id: r12718
"
"f36710f8b4e5d28517fdcb35ac4fefbd15734be7","2004-02-03 08:53:13+00:00","Act more gracefully when failing to load a (VOC) sound (should help bug #889442)

svn-id: r12719
"
"e5f194d3646972e415f21f6b2bc540d8640dd412","2004-02-03 09:04:38+00:00","Fix compile.

svn-id: r12720
"
"dc852177fb27b83620f0a4296cde0e1a8dec1f62","2004-02-04 08:08:56+00:00","No longer required.

svn-id: r12721
"
"f59eb3b2194826c73f56161497f4004b2313efa2","2004-02-05 00:19:57+00:00","renamed (Const)Iterator to (const_)iterator; changed size() to return an uint

svn-id: r12722
"
"180778b524ac5df924b8f94ecd8ba5449b37b3bc","2004-02-05 03:18:49+00:00","Update arguments, could these be enabled now ?

svn-id: r12723
"
"d3eefc060e12ef9aa663b982720c64b4a32805ea","2004-02-05 07:27:30+00:00","Enable and adjust for FT.

svn-id: r12724
"
"898cc3b64a57f084d403148448a00bba0268a04b","2004-02-05 07:39:35+00:00","Merge EVC 3 and EVC 4 project files

svn-id: r12725
"
"6e688e818bab72b04e78b9422d2560218f14f83b","2004-02-05 07:40:48+00:00","Remove EVC 3 project, merged with EVC 4

svn-id: r12726
"
"a11ca26915bad6f3e249ae29ca658fa2f80cb6e2","2004-02-05 07:47:16+00:00","Just in case somebody is shocked ...

svn-id: r12727
"
"b2e7d9ed0076eafe498c69dcbad00a6fe91188e1","2004-02-05 08:00:59+00:00","Forgot to remove those

svn-id: r12728
"
"407c489cc4bd3f5849bdda47d95783d6af5d1b61","2004-02-05 11:59:06+00:00","removed obsolete #include's

svn-id: r12729
"
"86d02cfbb2ca1bf4c20549c665f9f54d0377498c","2004-02-05 13:38:54+00:00","Updated resource files (prepare zodiac support)

svn-id: r12730
"
"47796cb4640883d03404fc80c79bf60e52136cf4","2004-02-05 13:40:37+00:00","Prepare ARM support

svn-id: r12731
"
"39055e40c589f57d90738ed3be143be5bd70e5e0","2004-02-05 13:44:48+00:00","Fixed Hi-res detection, Added OPTIONS_x macros, More screen detection features

svn-id: r12732
"
"acbb4b98b62833dbc7bedc0f226aada8523cccab","2004-02-05 13:46:28+00:00","Fixed memory card import

svn-id: r12733
"
"2420bf29003bd9ea07337638c233333776423758","2004-02-05 13:56:39+00:00","Prepare Zodiac MIDI support

svn-id: r12734
"
"ef1b06d8b36997e8572557d112cbd452c1136b96","2004-02-05 14:00:03+00:00","Prepare Zodiac wide display support

svn-id: r12735
"
"6830942213e4ad02ab895f34d1f547341c3aa81c","2004-02-05 14:02:24+00:00","Prepare ARM support

svn-id: r12736
"
"a4d5e5966958b1aa5ac90fe7fd6b02b670986a13","2004-02-05 14:05:07+00:00","Added direct ScummVM launcher mode

svn-id: r12737
"
"c9d252640cc955fbee27d9a702d080f778c22bdb","2004-02-05 14:06:46+00:00","Updated with lastest changes

svn-id: r12738
"
"802a301a16ff3f9fe7f25a5a6c337319e27ce7b3","2004-02-05 14:19:07+00:00","Removed some of the #includes from sword2.h

svn-id: r12739
"
"b3a12d51e6ab7b6337b3a21e6b6cb8d40ddadbf9","2004-02-05 14:20:51+00:00","formMain

svn-id: r12740
"
"dfee3c63f745ee5b6495f340f140d1e7c5d4da78","2004-02-05 14:25:34+00:00","More wide display support, 5way navigator support, prepare zodiac, arm and sound support, and many more stuffs...

svn-id: r12741
"
"6a6d69254de45d972ecd57a38d2a2793a3177811","2004-02-05 14:49:24+00:00","Updated project file

svn-id: r12742
"
"f98cc6f02eb2143a1267fd8cc2b6a8c949b79833","2004-02-05 19:26:00+00:00","o Fix for bug #889751. Bump sound on the highway keeps playing
o Fix for bug #888639. Mine road female biker loop

svn-id: r12743
"
"7038f2f6cf02671beb02bc00b86fef2219ad828a","2004-02-05 22:39:13+00:00","Fix for bug #882083 (COMI: CD change cancel button)

svn-id: r12744
"
"c29e0d2dd0144b1f0c23bafa0d3cca7d9b9893be","2004-02-06 00:58:24+00:00","Add extra paths for international version of Simon the Sorcerer 1, so game can be played from CD.

svn-id: r12745
"
"7ae1cc0f967a0859dc9c81db815d08ab760c21b1","2004-02-06 08:35:24+00:00","Fixed 'no newline at end of file' warning.

svn-id: r12746
"
"2f290914699b743889bb62d0789d6a41c4066371","2004-02-06 14:16:14+00:00","Used wrong check, might have caused regressions.

svn-id: r12747
"
"d0b9bb118e3f3e05ca2f690451824c597dfa703b","2004-02-06 14:37:55+00:00","cleanup

svn-id: r12748
"
"afd45ef2e16bb0219ebf5746ec6f6aa50d81979d","2004-02-06 15:17:12+00:00","some corrections

svn-id: r12749
"
"7b26a609f7c9e410c7a5930fa333901a09055bde","2004-02-06 16:19:43+00:00","Update comment

svn-id: r12750
"
"8411a8ade175a9d35af22d108a67ff542d4441ad","2004-02-06 21:05:58+00:00","o Now Long TRS messages get wrapped
o Approaching enemy animation fixed
o Renames some vars and struct members
o Fixed dosdemo. It didn't run
o Correct Mac demo INSANE skipping behaviour

svn-id: r12751
"
"82564def69af77c2c22237f90eb5a9d5b22aff35","2004-02-07 02:23:24+00:00","Add separate class for Humongous Entertainment games.

svn-id: r12752
"
"3a8bfbeeb159b7c1230c46d4b3d5371c256ac65d","2004-02-07 02:28:24+00:00","*** empty log message ***

svn-id: r12753
"
"86394f45427ebe346c3ec46dd2a5deb4373985f8","2004-02-07 02:52:27+00:00","Clean up last commit.

svn-id: r12754
"
"ea3be081b7039d505c52ad453a6dbeabe5f56f36","2004-02-07 03:00:01+00:00","Only used in HE games.

svn-id: r12755
"
"33dcab8d6c2113d64e26882488a1b48651285476","2004-02-07 03:10:22+00:00","Add stub

svn-id: r12756
"
"a2039576fb698d50c6459d7f2ea66804dcbd33d6","2004-02-07 04:11:40+00:00","More stubs

svn-id: r12757
"
"9b97d851fe7caef9c6c87ec5a073f44060112b9c","2004-02-07 04:53:59+00:00","Add -c/--config option to specific alternate configuration file. Sorry Max, but it's damn useful for coverdiscs :)

svn-id: r12758
"
"54c6e4cc55847f81883d462697ba600054b19a12","2004-02-07 11:22:55+00:00","Ooops

svn-id: r12759
"
"364277dad0308c13eb4fa1e8882c00469a5a6682","2004-02-07 12:30:44+00:00","new auto-dirty-rect checksum algorithm (not so well tested but uses the standard adler32 checksum algorithm)

svn-id: r12760
"
"91f201af29cff3b731bd84a0f6f10d131b693330","2004-02-07 15:09:13+00:00","Patch #874510 from roever, fixes BS2 demo cutscene problems (bug #884568)

svn-id: r12761
"
"a3f7753e9a0a147100ce23c07ebfb0c7451c95ea","2004-02-07 15:54:03+00:00","Demos includes a few ROL tracks

svn-id: r12762
"
"d06316244e46f23948f809158b3051fb1411ebbd","2004-02-07 16:01:00+00:00","Added FM-TOWNS to platforms list

svn-id: r12763
"
"e0f29c995144542f5fdf25e24d6b6e220e9ad8e3","2004-02-07 16:15:00+00:00","sync

svn-id: r12764
"
"9302e7d88879e1b64069774ea18a28370ccdabc6","2004-02-07 17:10:48+00:00","Make g_platforms global, so that the alauncher can iterate over the list of supported platforms

svn-id: r12765
"
"be73a85297c428616652521090017b143f9499a7","2004-02-07 17:12:10+00:00","Make use of the MD5-based game detection in the launcher

svn-id: r12766
"
"3c2883c177e0be05ce62077a7d18ffeca3cd741b","2004-02-07 17:23:31+00:00","cleaned up the target list a bit; it would be really nice to unify some of them (like, for example, all the FOA and Sam targets)

svn-id: r12767
"
"ba50e9d0b30096262725d55fb77d879ab29dacb0","2004-02-07 22:16:43+00:00","Oops. I left debug mode so made insane scenes incompletable. Fixed

svn-id: r12768
"
"9877a5bd2ef1eb3ef9862bb0333abfc85a91141f","2004-02-07 22:23:17+00:00","o Add russian to lang options, fix spacing
o Made all tables with same width for more consistent look

svn-id: r12769
"
"e913817cdfdd8628bd7ef5d989bcb4741f1559a6","2004-02-07 22:25:01+00:00","Add Russian to language option

svn-id: r12770
"
"7333ad3d5fe88dcd105bca11548d8e6395353ee3","2004-02-08 05:12:18+00:00","Fix valgrind warning

svn-id: r12771
"
"30189c2a2033cd0b28ac8583fbca3152c370177d","2004-02-08 05:50:57+00:00","Valgrind warning fix for Simon engine (From olki)

svn-id: r12772
"
"a745b3a7d0fe1080e421e3ed3ef26cbdc7919fb6","2004-02-08 14:02:43+00:00","More cutscene fixes from roever

svn-id: r12773
"
"587622d664777c3670c9222424e379726b88bb81","2004-02-08 14:11:11+00:00","More cutscene fixes from roever

svn-id: r12774
"
"9301f0b0ff7f77e919c409e446fffd1fd2f95903","2004-02-08 17:19:09+00:00","Change AppendableMemoryStream overflows to debug messages, so people stop believing them to be the cause of errors in bug reports :P

svn-id: r12775
"
"ebfe44d226be48e28c797e7f1efa3167994635e0","2004-02-08 21:24:43+00:00","fix some warnings

svn-id: r12776
"
"1f8784e5de146803a1d41e048e442c41795b6f55","2004-02-08 22:52:53+00:00","Write URLs using hyperref command, so that they end up as hyperlinks in PDF/HTML

svn-id: r12777
"
"e67c169cd9d85a25163e036038fa7e122f93e346","2004-02-08 23:01:15+00:00","fix var initialisation when both Vorbis and MP3 support are disabled

svn-id: r12778
"
"13e4799b9153dbf50d7ef4278d7624283a2cc134","2004-02-09 01:20:45+00:00","update TODO list

svn-id: r12779
"
"1141ff1ac2f0c125fa4d18cbd64dcd9cc71bf383","2004-02-09 01:27:27+00:00","Modified version of patch #892795 (Let scumvm -v show supported libs)

svn-id: r12780
"
"fbd83ab27ebc94fd91f51080af478964cf1bf4aa","2004-02-09 01:37:20+00:00","cleanup

svn-id: r12781
"
"95552e6ee3f6539d4d3d475bf6c54510e449a531","2004-02-09 05:11:54+00:00","Switch method used for combined speech and subtitles in Simon2 (Non - Hebrew versions) again.

svn-id: r12782
"
"d73431ff585b6fe4a844067ec610abfb911da127","2004-02-09 05:23:08+00:00","Update Simon2 issues

svn-id: r12783
"
"5d1b244b8d114df69f3dc6a18143033d9849d696","2004-02-09 05:42:10+00:00","More updates

svn-id: r12784
"
"1268070f4d155a78265e7ea2b06ad7322d9c371d","2004-02-09 06:22:13+00:00","Sync (Hope this is right).

svn-id: r12785
"
"e0896046a5c2c4eee2e0b1d8eadd9ae5df428b6d","2004-02-09 06:51:04+00:00","Sync (Hope this is right).

svn-id: r12786
"
"6e1f74c06151887a15e5fe53376f6aad579e7f4c","2004-02-09 07:09:06+00:00","update

svn-id: r12787
"
"bf4e0a872a4127542d8d0f19eabe179903c4d76c","2004-02-09 07:13:57+00:00","Use same game order throughout docs.

svn-id: r12788
"
"bbc9d84e2917951e12d0f78d61e03744681ad4f6","2004-02-09 07:52:21+00:00","fixed compilation

svn-id: r12789
"
"d1b74aa7ccb607975d26ea2a4b5914e1777bfc0d","2004-02-09 08:05:23+00:00","added talkVolume, and changed talkPan call method

svn-id: r12790
"
"cf42ac69bbb06bcbde8abfae4d948b2ca213ff44","2004-02-09 09:53:03+00:00","fix various LaTeX warnings; consistent spelling of FM-TOWNS

svn-id: r12791
"
"f621afbeb6cfb5bc70b4410664a8aa728be12fea","2004-02-09 09:53:59+00:00","consistent spelling of FM-TOWNS

svn-id: r12792
"
"404db07a3f6d4641aa13ec4d569de32c78960df4","2004-02-09 11:24:00+00:00","Missed one

svn-id: r12793
"
"e98d5983da0ef68c53366a9433dfdb181933bf79","2004-02-09 14:11:44+00:00","Add comment

svn-id: r12794
"
"36c9dc8b5b6c4b8d1654f08e068d7c758f34fa25","2004-02-09 14:53:13+00:00","Add opcode

svn-id: r12795
"
"b85e7e77bc3ed817a4c7ea833d1d590210ea4498","2004-02-09 14:59:55+00:00","Not unique

svn-id: r12796
"
"8de55dcbca68f5c90fa596f43f9fecd057f26bac","2004-02-09 15:22:31+00:00","Cleanup

svn-id: r12797
"
"fbd9b36e03f9d101b566b09af7136d2e929bf73a","2004-02-09 15:22:31+00:00","Cleanup

svn-id: r12798
"
"6d356e340cf73279c7cb9d7df7a89431adb56c53","2004-02-09 18:57:05+00:00","o Fix bug #892909 (Unable to get Hover Lift at Gorge)
o Fix bug with transition from vista to ranch

svn-id: r12799
"
"5bd6dc62b3fc95176bab6aa4fc1b7a39a4752a0d","2004-02-10 00:25:02+00:00","Remove unneeded #include

svn-id: r12800
"
"8fb7541aa345d1fd89305e0766838d5450b1922e","2004-02-10 01:23:24+00:00","Added Russian Dig

svn-id: r12801
"
"260fd5a3964025752f565b539e9132f9d854d251","2004-02-10 04:02:34+00:00","Use RandomSource instead of rand() in INSANE

svn-id: r12802
"
"98ffd24d6914f0fefa4f720453f540d356ec6647","2004-02-10 04:15:36+00:00","Fix warnings which spotted bugs at the same time

svn-id: r12803
"
"7e74bedc1f116eb6333d833a27af963c7fb22b51","2004-02-10 04:35:07+00:00","Correct names

svn-id: r12804
"
"8a440a84961bd4f2e511e01582ddbd40a3afe000","2004-02-10 04:59:02+00:00","Add languages
Sync md5
Correct another name

svn-id: r12805
"
"fdf55a67b0afa6eae987bf24ec0974f2ebda0190","2004-02-10 05:25:51+00:00","Ooops

svn-id: r12806
"
"215f1f94d1ba8fac7eb40cf4aa0f0a2161e422c0","2004-02-10 05:36:51+00:00","Change to define

svn-id: r12807
"
"2c6330197dc2ba8f69efef8b0bf54b0f8871d8a8","2004-02-10 06:22:07+00:00","Sync

svn-id: r12808
"
"6626a53e65b7ffb0d08961824664a20385f327da","2004-02-10 07:18:58+00:00","Fixed spelling of my own name. :-)

svn-id: r12809
"
"9271ca5233dd097661fe6c9353425da8dc9d1f42","2004-02-10 10:56:16+00:00","Previous method wouldn't work, since each langague is in different directory.

svn-id: r12810
"
"514347c899f42e1aa8709be1cba0d65a5a7eaf67","2004-02-10 12:15:45+00:00","Revert var name.

svn-id: r12811
"
"705df95a6121684626f215ca65e568d3fb1a5fab","2004-02-10 12:36:15+00:00","Ooops

svn-id: r12812
"
"d4a71d8eecccd78bee51c872128884c12f6a5878","2004-02-10 12:37:40+00:00","NL = NetherLands, NederLanden, NiederLande - NO is Norway

svn-id: r12813
"
"71edb7ed6558913225505ba978671075b21c4574","2004-02-10 13:15:46+00:00","Patch #893813 (Fix to compile when no USE_* flag is specified)

svn-id: r12814
"
"343037f0ec236d4ef23b7dc799943982f7d46cc1","2004-02-10 13:24:12+00:00","Correct hberew

svn-id: r12815
"
"6bbbc2eb02f2a8df29650ead99b534f2616e5d0a","2004-02-10 16:06:47+00:00","Alternative intro. is only in CD versions.

svn-id: r12816
"
"e69c822c28e88f8f9c0cb8ba4125c870e47176ed","2004-02-10 22:09:38+00:00","Dig md5 is not only for English version

svn-id: r12817
"
"054edc1591a26eb178f7befb30d0cb8f3979c6ba","2004-02-11 03:21:21+00:00","Hack no longer required.
Add stub for HE games.

svn-id: r12818
"
"76fc86f02847daf94b8b699a32974362f9ff4937","2004-02-11 03:21:50+00:00","Implementation of ScummEngine_v6he::unknownEA_func

svn-id: r12819
"
"e451c498ac0af11d69ee2a973434fc1a1782a92c","2004-02-11 03:36:27+00:00","Rename as requested.

svn-id: r12820
"
"ac31a3ffe8a5c15c1c314e532b1c3fa2ab5ad126","2004-02-11 05:38:15+00:00","Ignore initial setting of VAR_NOSUBTITLES

svn-id: r12821
"
"deb1d40cc0dc910e89bcb7ae4716e731c4efd9c4","2004-02-11 08:16:08+00:00","This is not a test, I repeat, this is not a test!

svn-id: r12822
"
"76fb3ba5c70bce4fcff2e2d61e38bc947313b659","2004-02-11 13:31:16+00:00","fix OSX nav dialog in fullscreen mode

svn-id: r12823
"
"b20f9fcea821fefbe4b8c90726555efd57a7e5e8","2004-02-11 15:59:25+00:00","VAR_CAMERA_FAST_X is used in all scumm6 games, verfied via disasm. of all.

svn-id: r12824
"
"d21b5455c6e09ff4f56e873990ebd789a232586e","2004-02-11 18:01:26+00:00","Fixed bug #870890.

svn-id: r12825
"
"f4b3100b35fa31067766e15ce41a21d624fa00aa","2004-02-11 21:07:39+00:00","add support for the hebrew talkie version and warn the user if s/he's using an old version of the tbl file

svn-id: r12826
"
"c1c01bcc0e6209afe0e15cbc3a3c3e8b037c8510","2004-02-11 21:13:16+00:00","Don't do unnecessary checks

svn-id: r12827
"
"322266106124af70a0f1c1fb91f77766917c57e0","2004-02-12 13:33:01+00:00","Check sfx/music status before pause.

svn-id: r12828
"
"9003dbbcb325cdf30b15822bc9bbf29c04884579","2004-02-12 16:25:28+00:00","With no comments from fingolfin, and a go-ahead from ender, I've committed
patch #892455 ('getElapsedTime() for sounds') despite its current
shortcomings. It should be good enough for the Broken Sword cutscenes
anyway, which is what I'll be looking at next.

svn-id: r12829
"
"5447cd09b589990d7ffaf4df23725614420e48d4","2004-02-12 16:55:18+00:00","Changed the playback code to use the new 'elapsed time' function instead.
This fixes bug #880484 for me, but may need some fine-tuning.

svn-id: r12830
"
"447e8d93869a614dd521644a2df62bf96859007e","2004-02-12 17:16:38+00:00","Updated the cutscene playback code to use the new 'elapsed time' mixer
function.

svn-id: r12831
"
"a8f8ceee0f14d2dd2c8e2eaf49a6f627b3353adc","2004-02-12 17:31:33+00:00","Removed now obsolete getSamplesPlayed() function. It was only ever used for
the Broken Sword cutscenes, where it didn't work very well, and was never
fully implemented.

svn-id: r12832
"
"733ecef560f667a4d02b81520cc0a17ee8653038","2004-02-12 22:57:49+00:00","Fixed HE demos. Most of them have same data both for Mac and PC

svn-id: r12833
"
"660a24aafb1a6823a161b1317d929e84091601f8","2004-02-13 00:43:00+00:00","Fix more HE demos md5

svn-id: r12834
"
"88deb72ba6998846a83fd520a402c29c6dd9e477","2004-02-13 00:44:30+00:00","patch #896094, Some X11 backend fixes from Gregor Jasny

svn-id: r12835
"
"85e417bb11be57f48820454da8f47d34b43c0b46","2004-02-13 00:53:56+00:00","add some information on used environment variables, descriptions taken from autoconf generated configure script

svn-id: r12836
"
"3c6114bd9cf2ff5655879688ad06a19e5bef3a9f","2004-02-13 00:54:58+00:00","Check for MP3 file in Broken Sword cutscenes - useful for WinCE backend as Tremor crashes for no specific reason (help appreciated :p) here

svn-id: r12837
"
"7511f1e44e718ee329b309b37f629f721c677293","2004-02-13 01:01:23+00:00","Fix potential bug, depended on compiler.

svn-id: r12838
"
"acce2b3c006fce0bff472c3deba3f2b4b99c2e91","2004-02-13 01:06:31+00:00","oops. this clearly demonstrates what bug was here :)

svn-id: r12839
"
"e5d9adea0248ec2d96e6dd9808db997bb23dc1b9","2004-02-13 06:06:29+00:00","Remove delay

svn-id: r12840
"
"d474ccf7569ae1e660e9af0474671a25f9fcb6ad","2004-02-13 06:43:10+00:00","proper usage actor talkVolume

svn-id: r12841
"
"13084ac0aa8212ff49bd25cf723221fe274caf68","2004-02-13 06:43:53+00:00","add talkVolume to savegame

svn-id: r12842
"
"0e24cabec85c797d2e2d2edf7d3102457bac1b54","2004-02-13 10:26:40+00:00","Remove debug printf()

svn-id: r12843
"
"adaeb61054fa9fb451da6be46fb451f5ab9c4c32","2004-02-13 10:51:33+00:00","Add Change --floppy-intro to --alt-intro patch (#896311)

svn-id: r12844
"
"f02f786b3f1e0c55a4d72c30ae12194e7e3d7e88","2004-02-13 11:00:37+00:00","Switch warnings to debug.
Remove old commented out Simon code.

svn-id: r12845
"
"154bd9e3c59ace5712ea5475d8142c69db387826","2004-02-13 11:04:15+00:00","Fix for valgrind warning (From LavosSpawn)

svn-id: r12846
"
"2e672086da5cdd8e1c0c457fdde5218565243c22","2004-02-13 11:11:16+00:00","Switch warnings to debug

svn-id: r12847
"
"21a70efc36517cfaefa0fd9fc4866c46bcc007ca","2004-02-13 11:25:13+00:00","Added Dutch/FM-Towns options

svn-id: r12848
"
"ab60763bd1a1e5fc5bc16f95582b53d35834e87f","2004-02-13 11:26:33+00:00","version.h

svn-id: r12849
"
"c7a14eb93508005c5a433899c05341ba62f17755","2004-02-13 11:36:44+00:00","Add EGA palette range correction (#896434)

svn-id: r12850
"
"28e49293f0ec37bb451bfb46a7c2168aa8e86940","2004-02-13 11:39:19+00:00","Added version.h script_v6he.cpp

svn-id: r12851
"
"b5dc90acda87927c225619724b49e34d38aee6f7","2004-02-13 11:41:06+00:00","No Queen for now

svn-id: r12852
"
"eaff620ca0af9f7bf9f812f2936e3c98511eab3e","2004-02-13 12:11:14+00:00","Proper DLL termination

svn-id: r12853
"
"ffb7aeebf6ada1fb44b99cfbfa2a4851123d46ce","2004-02-13 12:13:02+00:00","Update project files

svn-id: r12854
"
"71c9d5c3542ea1e5bd806caa2032b1ab0c9f7786","2004-02-13 12:27:26+00:00","Fix compile and 555 display mode

svn-id: r12855
"
"d17df8b7ab5337bc1ed1c2aadc5eed047d75d0b5","2004-02-13 14:18:24+00:00","Oops, I forgot that I was using a Microsoft Compiler (c)(tm) ...

svn-id: r12856
"
"906fbfeb13c85e9a5989fcf211c347706cdbfb81","2004-02-13 14:46:56+00:00","add --disable-debug help text

svn-id: r12857
"
"110443fb639102fd58de9fa38e356b6fb5459389","2004-02-13 16:27:36+00:00","Add hebrew font data

svn-id: r12858
"
"a4df55fbc1e474f9dad0ff3fa3fb8f89123a8d51","2004-02-13 16:52:20+00:00","Added the section about multi-CD games. (It's been in the doc directory for
some time, and was probably the last major piece that kept them the README
out of sync.)

svn-id: r12859
"
"bf0d58fe8942bfc4fd38b751c922e88af5e3124d","2004-02-13 22:33:21+00:00","Applied patch #896726 (reversed hebrew text) and reduced overhead a little by introducing an _isReversed boolean

svn-id: r12860
"
"9b764920a192a80a6d0fe2d91b45f3508a71c692","2004-02-14 00:37:44+00:00","fix yet another piece of broken music

svn-id: r12861
"
"e83e8c012f60a09aecc27b84ded864316ab3123c","2004-02-14 01:09:43+00:00","Fix valgrind warning

svn-id: r12862
"
"324ce1f4ef134934e308a492165cd0ded780ffb4","2004-02-14 01:12:02+00:00","Init the correct way

svn-id: r12863
"
"1e18364e5c34f578eaea359e709160d708f79b52","2004-02-14 01:12:35+00:00","Fix for bug #896506 (GUI: Invalid read)

svn-id: r12864
"
"5f4641d8a1a299ecba52897f0f576cbfc7a0316a","2004-02-14 01:39:09+00:00","Use correct order, to prevent mingw warnings.

svn-id: r12865
"
"e12c29f9561179f2a659f3764680e93bfe5db8ac","2004-02-14 02:36:58+00:00","update todo a bit

svn-id: r12866
"
"29b21ca8f85a17ce89999a20f1b241da1d0f3353","2004-02-14 04:12:22+00:00","Fix FUNPACK: puzzle blocks regression

svn-id: r12867
"
"b924e502b13eb80deb5b0135cd38b60257793794","2004-02-14 05:39:18+00:00","Fix valgrind warning in PC version of FT demo

svn-id: r12868
"
"6731606837debcc5aafa8b1680db9dae4a3e5887","2004-02-14 08:01:55+00:00","updated TODO

svn-id: r12869
"
"5ee96b4625a2bfa64ba2b06dc37527bf3238d851","2004-02-14 08:56:26+00:00","Add mutex tracking to make it easier to debug imuse deadlocks

svn-id: r12870
"
"7d9105b7ba6d5eb37149b07659ff596c715b612a","2004-02-14 10:37:21+00:00","Paint the overlay black at the end of the movie. Not all movies fade out on
their own, and sometimes the cutscene player will have to wait for the lead
out to finish before returning to the game. (This will probably be true
even after we fix the timing of the lead-outs.)

svn-id: r12871
"
"d660faa2311b8fc82109da6434d8a9ca21953b7a","2004-02-14 10:43:55+00:00","Reverted patch #889552. Kirben confirmed it was wrong for DOTT, and it was
causing regressions in FOA. See bug #884171 and #893500 for details.

svn-id: r12872
"
"a690c17bb242694af59c073d4a48e359a06b8295","2004-02-14 10:52:08+00:00","fix for bug #896525, it align pull data and freq to 25 calls per sec.

svn-id: r12873
"
"99551bd74622bbf5c8a9dc15749140b24613e322","2004-02-14 11:15:48+00:00","const correctness!

svn-id: r12874
"
"e38193f4dd4e632ed82e43cd4a710bd9401e818d","2004-02-14 12:24:39+00:00","Create branch-0-6-0

svn-id: r12877
"
"8676f1441679effdfebaf8fca03c71b39a960ffd","2004-02-14 13:29:02+00:00","changed numbers to 0.6.0

svn-id: r12878
"
"1022775024171f2bf967f5d604a02fe633f41d35","2004-02-14 13:35:13+00:00","changed to 0.6.0pre

svn-id: r12879
"
"05a89577b033b9d024b4092a0911584da3c58af0","2004-02-14 13:37:17+00:00","missed one

svn-id: r12880
"
"6e99ff2e46b50431b132ef8b3c65f2bf5521ef8f","2004-02-14 13:37:45+00:00","missed one

svn-id: r12881
"
"e4fcffa20044bd0c848fd3918aa0ab2b379a3944","2004-02-14 13:40:13+00:00","ops

svn-id: r12882
"
"a0bf3dad6863351a36b2901a162bd7c01ea5c801","2004-02-15 00:42:36+00:00","versions of ALSA newer than 0.9 are ok as well

svn-id: r12892
"
"e249c2862cdeda4bfc3f229ac27627ce00804729","2004-02-15 03:57:22+00:00","Propagate fbear fixes from current branch

svn-id: r12900
"
"c06c8f5377668fa5b86efa6ac205ba65a7b3e40f","2004-02-15 04:04:39+00:00","Add fix for akos colorKey issue in fbear

svn-id: r12901
"
"ec954a0ee8e8806895cd8e8a735731405a083db9","2004-02-15 06:30:48+00:00","synced with HEAD - fix for FT sounds loop

svn-id: r12902
"
"e07a4969b8cc398445dafbbb73f1bd308117e47a","2004-02-15 14:16:34+00:00","Added proper handling of BS2 cutscene lead-outs, plus some other minor
fixes.

svn-id: r12906
"
"b5edb80067dd075de6e3300be494a5890f3cc6a1","2004-02-15 15:20:31+00:00","BS2 cutscene lead-outs have been fixed.

svn-id: r12908
"
"8a59bb6c989c0463d199f5483a130eb81d8c8874","2004-02-16 16:43:29+00:00","Workaround for BASS bug #897775. As far as I can tell, there is not proper
way of fixing this. Please prove me wrong.

svn-id: r12915
"
"41f6802aa302e7675a3a3f2acb07ae44a8fb9e1a","2004-02-17 00:44:12+00:00","save talkVolume

svn-id: r12920
"
"fc15ec222cdef4b98dd4f28c56453d902819328f","2004-02-18 11:45:19+00:00","Change debug back to warning (As requested)

svn-id: r12930
"
"bd95634c7d6d36748db69140b8088d9e330f4da8","2004-02-19 10:01:02+00:00","Add recent fbear fixes.

svn-id: r12934
"
"4bc99d1b8ff6c81c28ce5cae984c060806d8fb29","2004-02-19 21:12:06+00:00","forgot to remove the MD5 hack in the 0.6.0 branch :-)

svn-id: r12935
"
"11cd22d701a8c6e05ba0d8305aef0d7e0a5efa5b","2004-02-20 06:35:01+00:00","Add back fix for bug #738352 and restrict to needed games only (Checked against disasm.)

svn-id: r12941
"
"e48d6d5c71a61206862171fa2e86bf96855e5392","2004-02-20 22:17:39+00:00","EVC ... no ... comments ... please :)

svn-id: r12946
"
"a132f50d4fdcecc282b41d13e90e642304b0ba59","2004-02-20 23:05:50+00:00","Oops

svn-id: r12948
"
"7b1b69a8136e5edfe61fd3ae683a1112e715a7f4","2004-02-21 08:29:17+00:00","Use unsigned characters when drawing the text for the control panel etc.
This is consistent with how in-game text is drawn, and might possibly fix
the control panel in the Spanish version (though I have no way of actually
testing this).

svn-id: r12956
"
"6a5b7861221cdbec799706c2b0b39795606a6a89","2004-02-21 08:51:07+00:00","Fixed arrow dialogue glitches (partial display) in non-english versions. This was due to a (wrong) blitting order of the bobs, arrows are now the last ones.

svn-id: r12958
"
"f447fecee66dbf2e331984b82e79b356d187ea1e","2004-02-21 09:42:52+00:00","Fix HandheldPC/PalmSizePC compile

svn-id: r12960
"
"102082589cf7106a36f6da899f938671d7812941","2004-02-21 15:31:23+00:00","Sync with main

svn-id: r12971
"
"3b3935d8a12d8c88cd850d1e20431deb603de286","2004-02-21 20:51:32+00:00","Fix bug #899881 in 0-6-0 branch as well

svn-id: r12977
"
"bb2bda333a51c794794246cbf8003d57e4aaf3cf","2004-02-22 08:04:33+00:00","Restrict hack to COMI

svn-id: r12982
"
"d2e5f5092e8d9bd679fff19532b20894121d0f0f","2004-02-22 16:01:51+00:00","Free _screenBuf and _screenGrid before allocating new ones.

svn-id: r12988
"
"6ffd1054fa016e5dff7939ae4dd3d60c0dbc0f53","2004-02-22 18:04:26+00:00","Avoid deadlock in MPEG-2 cutscenes + slow devices

svn-id: r12994
"
"1d3e534767e55998adefe9723abbae2c3d13a7f7","2004-02-22 18:09:44+00:00","Fix tabs

svn-id: r12995
"
"812caf32687472289047e190f67705aff0b35b14","2004-02-23 11:34:38+00:00","Allow the cursor to reach the bottom of the screen when using the keyboard
to control it and aspect-ratio correction is activated.

svn-id: r13008
"
"8b4a905430096efc8d6d29425a6c01fc26ce439f","2004-02-24 00:44:16+00:00","Add some recent HE game fixes from _sev

svn-id: r13012
"
"8a59a148094fb6743752f0aa3427cd3e926c7386","2004-02-24 04:54:02+00:00","Full Throttle INSANE support is not initial anymore

svn-id: r13017
"
"d9a05540155c11e71debc224e9eef5192c404f24","2004-02-24 11:00:49+00:00","Reset more for a restart
Prevent assert after x amount of restarts in some games
Make sure demo mode of maniac v1 is restart correctly.

svn-id: r13023
"
"873a49ebdc97b7129bfed740a0d2c7baa3c10f3a","2004-02-24 21:09:57+00:00","Fix Simon detection

svn-id: r13026
"
"b8baa8aa73e80a67725af11fcea3ff2101d19541","2004-02-24 21:25:58+00:00","Fix hide toolbar

svn-id: r13028
"
"c248cd206290fce904f43c5b9488b75d25de65b9","2004-02-24 21:54:09+00:00","Fix graphic options on WinCE

svn-id: r13030
"
"bfff58261728d9ff54b491928beeeea6c7d39512","2004-02-24 22:04:37+00:00","Fix monkey detection

svn-id: r13032
"
"48b7c5a27ee586861c813b1ad40f7b4626d0c5f8","2004-02-24 22:15:54+00:00","Random 640x480 tweaks

svn-id: r13034
"
"7f6a19841e880cef4d1c02ed3da94220c158ebfe","2004-02-25 04:24:50+00:00","OpenGL backend no longer exists.

svn-id: r13038
"
"b43f99d80b585c966f3767b497234c2a45ae7fca","2004-02-25 04:30:30+00:00","OpenGL libs no longer required

svn-id: r13039
"
"204296eba6aed7521e5771be370eb9a4b7476048","2004-02-25 04:37:28+00:00","Remove warnings, they were dummy warnings in originals.

svn-id: r13041
"
"6cd94ccc799883be6feed42f147efcb994152aa6","2004-02-25 10:00:07+00:00","Ooops

svn-id: r13046
"
"7a9bf06b695057a02278e900251c400a8d696085","2004-02-26 12:08:22+00:00","------------------------------------
Fix crashes in French version of Simon2

svn-id: r13063
"
"fa4c8c1054349d3a7d286c2a3383a883b110861d","2004-02-26 19:14:20+00:00","workaround for bugs: 902568, 903655, 904664

svn-id: r13064
"
"a85c0d2bc57e00867f74cb28285c00b8ed84c184","2004-02-27 02:07:28+00:00","Handle 'compressed' songs

svn-id: r13065
"
"202af95c2c2f1f7d317f6e0b0783be41d4ca46f1","2004-02-27 23:52:46+00:00","Handle comic book case, enable music toggle and some minor cleanup.

svn-id: r13073
"
"ad7784ad809534d6c137bdda1dd57aa4b2d5e9f1","2004-02-28 00:00:53+00:00","Forgot to add this to xref.txt

svn-id: r13075
"
"165626bbf159301d81e2f9a8cb7248a49cc31029","2004-02-28 00:25:12+00:00","Sync with HEAD

svn-id: r13078
"
"c1581c6e3553b907c7a7bd2b7ad442284fc48612","2004-02-28 06:34:17+00:00","removed hack from loading code

svn-id: r13079
"
"628b2eee490d43f8794d6e255200405f78875e4f","2004-02-28 07:33:45+00:00","simplified alt_intro check

svn-id: r13081
"
"74b696bf664119401fca317c23a1ba78abde06df","2004-02-28 08:51:38+00:00","dropped the 'always' verb feature, as it is more confusing than useful

svn-id: r13083
"
"66cde22def95f7872a57fc05e55e3fb5661c0f4e","2004-02-28 09:02:10+00:00","forgot to change that, too

svn-id: r13085
"
"c0059d046dc0e540b45bd6e6d466f09917f9e35a","2004-02-28 13:01:43+00:00","fix mouse redraw issue when toggling fullscreen mode (visible if one mode is 555 and the other 565)

svn-id: r13089
"
"cd16a1f3076481042c5e58c57f7332ffea8f44da","2004-02-29 00:30:03+00:00","add support for the standalone maniac mansion demo

svn-id: r13091
"
"bf2f3c5f8c045d1b96e32dcaaf26bca95c0eeb60","2004-02-29 01:08:17+00:00","Enable insane subtitles in Mac. version of FT demo

svn-id: r13093
"
"fb29d94957b484880c06e82c51554369f572d1c9","2004-02-29 07:19:30+00:00","Update

svn-id: r13096
"
"1880139586d20bacb33f77b2a24b89ea15544bd9","2004-02-29 13:45:49+00:00","Correct incorrect smush filename in Macintosh FT demo

svn-id: r13099
"
"48f6aa532f8e93b9e29aaf1a23c2960f26255a38","2004-03-01 00:19:50+00:00","Add fix for error at end of sword2demo (From eriktorbjorn)
Prevent false warnings in demo.

svn-id: r13100
"
"7fd4d18a7d080ddfd2c5599c5ed778ca6eb7400e","2004-03-01 00:27:22+00:00","Ooops

svn-id: r13101
"
"6120d3143c774aebac7d59419a02ac90c0575926","2004-03-01 04:03:31+00:00","Add patch from roever to fix Broken Sword 1/2 cutscene crashes under Windows.

svn-id: r13106
"
"fc5a3ab9f416d21a5f318adda293f908ea5928c5","2004-03-01 07:53:35+00:00","When scrolling, force a full redraw not only when the scroll offset changes
but also on the first frame where it doesn't. This is necessary because
parallax layers may be drawn on the *old* scroll offset (for reasons
unknown to me).

To see the bug, walk right from the first screen until you reach the tree.
Notice how the part of the tree you walk behind gets redrawn slightly to
the left.

svn-id: r13117
"
"a1b6cc68e3eec82660f660f27b8b1b04e7aa8e49","2004-03-01 07:57:34+00:00","Display keyboard when saving

svn-id: r13119
"
"5cac7923c335ef9541d9a33cd6e48d3b411ebbdc","2004-03-02 07:00:40+00:00","Removed the test for non-existing demo cutscenes: param[0] is an offset
into the chunk of memory handled by the memory manager, not a well-defined
value. Also, it introduced a theoretical memory leak as fnPlaySequence()
wouldn't get to clean up after itself.

The correct place for this check is probably in MoviePlayer::play(), where
you can test the name of the cutscene. On the other hand, the original demo
will gladly play eye.smk if there is one, so why shouldn't we?

svn-id: r13138
"
"11999fc53aa2c4edf9d691ee7873277ecc8d152c","2004-03-02 12:19:33+00:00","Add recent Sam & Max inventory changes.

svn-id: r13143
"
"684ad48220fc85bcb2801b603885d44c99e2cb15","2004-03-02 19:41:04+00:00","Fix toolbar for 640x480 games - Fix potential not initialized variable - Add error message if a crash occurs

svn-id: r13148
"
"c272c87715a4f519a81eaff5d07f8250fb8b30d1","2004-03-02 19:41:32+00:00","No options in Broken Sword 2

svn-id: r13149
"
"fc44cc430e988873a9896515646a45f6cb91a0c3","2004-03-02 19:43:00+00:00","Display keyboard when saving

svn-id: r13150
"
"8d953b0d15ae39af12d973d6b62caf977598a4c4","2004-03-02 20:03:15+00:00","Disable serial for release.

svn-id: r13152
"
"c6838d06d940cab011ca0a94e00a5b5e0ceca250","2004-03-02 20:57:33+00:00","Now with -O3 (requires gcc 3.3.3).

svn-id: r13154
"
"7c8e2d638699e596969fcf0aca11d1622286573a","2004-03-02 21:12:22+00:00","Display keyboard when saving

svn-id: r13155
"
"fef189919aaea69fc99783779456023d0866d900","2004-03-02 23:24:21+00:00","Features detection fixes

svn-id: r13158
"
"bf0a05180cc86ef9ebc82cc3a1c6ec876adbc8df","2004-03-02 23:24:54+00:00","Fix auto-switch to Landscape mode

svn-id: r13159
"
"b878298123cfc69410697c2d137890851a4ed0b3","2004-03-03 03:13:47+00:00","djustments for Enchanced Maniac Mansion demo.

svn-id: r13162
"
"96b75a3710fa8b0ebb75b068f07e580cdb89304e","2004-03-03 07:38:20+00:00","Set the wantFade variable in initialize() as well. Otherwise it'll be false
if you use the start-up dialog to restore an old savegame.

svn-id: r13165
"
"4664276ddb70d90354db5824cbd9194f75c10340","2004-03-03 22:27:47+00:00","Add SDL information to track driver problems

svn-id: r13169
"
"ac9165552e76c75e0866636aec413c07cb56fe62","2004-03-03 22:29:18+00:00","It's better to have stdout open when there are some printf lost in the code - hi resource_v2.cpp :p

svn-id: r13170
"
"fd2d04d3de16eb4277393d8f592e8c71d18b5c8d","2004-03-04 08:02:49+00:00","If the user has any previous savegames, display a restart/restore dialog
when the game starts. (I know it could look prettier, but I don't have much
to work with here...)

svn-id: r13177
"
"b0fddf0f9e5447275f43ec9beeb15cc7f493864e","2004-03-04 08:31:28+00:00","Update project files - note to self, it'd be great to get rid of the dependencies when commiting, especially when they keep changing for no reason ...

svn-id: r13179
"
"7a65d6ddd91d9f52cf316ac1c2a7ba75a8bb3e82","2004-03-04 18:56:39+00:00","Apply patch #907359 : Broken Sword videos improved frameskip

svn-id: r13181
"
"dd2f8702cd194bcfccf0a8f2250f021ca38f0fa4","2004-03-04 20:53:04+00:00","allow ctrl-m on OSX, too

svn-id: r13182
"
"ba20757ca2caebd6d489528666a498efa66b8981","2004-03-04 21:13:38+00:00","Avoid flooding CE files since stdin and stderr exist now

svn-id: r13183
"
"dbd8096aad31c2b41db08352c9e37187e395e409","2004-03-04 21:16:45+00:00","Be extra-safe with stderr too

svn-id: r13185
"
"491313384da5b761ccea70d5abe7034ae447659c","2004-03-04 21:21:33+00:00","Let's say I just want to boost the stats :p

svn-id: r13186
"
"df15244b9f40469c422d0796c65050005d60bd30","2004-03-04 21:51:33+00:00","Patch #893817: VC6 - Project/Workspace Files Update (Completely untested, but I figure it can't get worse than it already is :-)

svn-id: r13187
"
"8bb66165feecf48bfc0d52ea71913c0e0b7c3a18","2004-03-05 07:39:08+00:00","Removed obsolete warning message from fnPlaySequence().

svn-id: r13194
"
"473da248005cb3a43aeb4a5c63fbd7b2ce98a6ba","2004-03-05 08:49:53+00:00","Fix the famous Landscape Monkey

svn-id: r13196
"
"931ee629c9107f1fcc9cb728424c0bbc8e2cd5d9","2004-03-05 08:50:31+00:00","Fix 640x240 detection - remove useless function

svn-id: r13197
"
"c7ccbe828a649b9d42cbd1de98cf0f8f895e4fa2","2004-03-05 08:52:25+00:00","Yearly CE BASS intro synch fix

svn-id: r13198
"
"8c883a022229fcfcc7f450eb7dc7814583fd91f9","2004-03-05 11:13:56+00:00","Added the same out-of-bounds checking to the 'get pixel' kernel function
as on the trunk, minus the scary (and, above all, verbose) warning message.

svn-id: r13201
"
"50c8bc2b71c0f0b5a8dd4884ea03664813a5be54","2004-03-06 01:12:25+00:00","Change CFBundleName to 'CFBundleName'

svn-id: r13205
"
"6fbb930c65082167a31d1535a629235b70ef47ff","2004-03-07 10:44:43+00:00","cleanup (removed irrevelant comments and useless XXX'ed code)

svn-id: r13213
"
"485311f952353f7682531fb03dd340009a65042c","2004-03-08 02:42:37+00:00","Allow --demo-mode with maniac (Enchanced)

svn-id: r13217
"
"2025131ee0eb1f98d87a3fef9a6779511e36ca36","2004-03-08 02:46:42+00:00","Missed one bit

svn-id: r13218
"
"2024b81c529fa02feb4b61c8e78e51a69a87d773","2004-03-08 13:08:18+00:00","Seems to be corrupted ...

svn-id: r13219
"
"234eefc5a55e3ba2492e82fa88f32b20ef5a180b","2004-03-08 13:10:52+00:00","Not supported

svn-id: r13220
"
"a250e4320cbed17d53ab1bebce20190300d39b49","2004-03-08 13:13:46+00:00","Updated

svn-id: r13221
"
"c40a66769b250f9772cc18e7e57f62c20c0fff6e","2004-03-09 00:58:57+00:00","Enable music volume slider in Journal

svn-id: r13223
"
"86084225242e85487146ff863c7e4328323dbee9","2004-03-09 01:36:59+00:00","Respond to volume-altering songs

svn-id: r13224
"
"fdec5bc844ad4cbb3dbc9bc2a1a33adbd45b2ece","2004-03-11 03:37:43+00:00","Meep

svn-id: r13227
"
"db7c83084aab624e7f68dc1006a15f849476f7f1","2004-03-12 08:19:21+00:00","Always start the 'current music' when restoring a game, even if it's 0. If
it is, all that will happen is that it silences the music. This prevents
the current music that was running before restoring the game from playing
afterwards.

svn-id: r13229
"
"cf7281f390018d421be4c5a18ba69f0d2cd01353","2004-03-13 12:00:24+00:00","When both music channels are playing, and a third piece of music starts,
silence the channel that appears to be closest to silence already. Not
simply the one that happens to be fading down.

This is the same method as I used in BS2, and it might fix some music
glitches I heard at Club Alamut.

svn-id: r13232
"
"496d0f1606ab02703980edd3886b4ad8a62f1da1","2004-03-13 12:01:09+00:00","Fix a logical error in the music fading code. It should check if a stream
is fading, not the direction. (Also cleaned it up slightly.)

svn-id: r13233
"
"37534097edf0d7357c8c6dc85a2d35fc09ef7088","2004-03-13 12:12:13+00:00","Applied Lavosspawn's bugfix for #911508 (that caused ScummVM to crash on
loading certain savegames in Ireland) that was applied to the trunk
recently.

svn-id: r13236
"
"583bae6bd8466fc36edbde7fef7e2a6bf0a64a22","2004-03-13 12:38:12+00:00","Applied Lavosspawn's bugfix for the graphics glitch when climbing down the
hay cart in Ireland.

svn-id: r13238
"
"54117a0221bd42df6ecd9df605765c10f731df3b","2004-03-13 12:39:14+00:00","Trust the checksum.

svn-id: r13239
"
"6147062499e99465bb2bc31f5ee16ac988d6578e","2004-03-13 12:53:43+00:00","Hack around Maniac bug

svn-id: r13241
"
"31752e0fe0a9cc762e7056b80c9a3c8033b0ff1e","2004-03-13 14:11:45+00:00","Added FotAQ to 'About' window, after some discussion with Endy about the
exact wording.

svn-id: r13247
"
"e25f4cfd741151bcfe371b29267135787575773b","2004-03-13 17:31:02+00:00","fix for voice bundle bug in german version comi

svn-id: r13258
"
"8d1952b2cc9fb64b6e05c5fc6d7514447c8f3d65","2004-03-14 00:52:53+00:00","fixed inventory scrolling using keyboard

svn-id: r13264
"
"f4167b215e4b50916850c8f185f813ee4ae553f3","2004-03-14 02:47:37+00:00","There is no song 176/177, and from the looks of it's not a modifier either.
Just remove it for now to avoid a warning in the console.

svn-id: r13266
"
"db5bff2f80f608141b05d38936028c4a961c5879","2004-03-14 03:23:03+00:00","Disabling this for now, as there needs to be special handling for loading of savegames and cutaways initiated from rooms which use this feature.

svn-id: r13267
"
"796f03ae7e2a0318b86d88f9e0760fe2f408ab45","2004-03-14 13:23:55+00:00","prevent journal from reappearing when F1 is pressed more than once

svn-id: r13271
"
"2c16ced3edb771a4d2894cae603e8857532a226a","2004-03-14 13:45:12+00:00","changed versions for release

svn-id: r13273
"
"392f678e64fa8179f31a8f92e0e0a8bbe19d900e","2004-03-14 13:50:38+00:00","Rebuild BS lookup tables on screen change events. Switch .pal format to binary, and use File class.

svn-id: r13274
"
"ebb5df21c3f0e441c87f9eba61105c4e1dabe915","2004-03-14 13:59:53+00:00","Few last minute documentation updates. Tagging in 10 minutes...

svn-id: r13275
"
"4d2c3b512dc9a29216fab95092e6619a8b1a6dfb","2004-03-15 10:03:00+00:00","Update WinCE backend and retag 0.6.0

svn-id: r13305
"
