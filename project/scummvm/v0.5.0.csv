"commit id","commit date","commit message"
"d3e5e479842543f4cf35a010ebc0e40c640d3b34","2003-05-05 15:18:43+00:00","-> version 0.4.1cvs

svn-id: r7352
"
"9e53f965996ce429fb528abda4bed7ac5a266582","2003-05-05 15:24:05+00:00","updated NEWS

svn-id: r7354
"
"fe1576152e5a3bd0476d52dc92898f3605642e7b","2003-05-05 16:00:50+00:00","Add indy3ega to supported list
Add separate builds option for mingw

svn-id: r7357
"
"a0c98d1f145c7e4b4d558673fc67b7635b94eacc","2003-05-05 16:07:10+00:00","Interim fix for Bug [712042] FOA: Lockup.
Final fix will require a savegame format mod.

svn-id: r7358
"
"898387e1ac906af80f7ee459306e75743c37a75a","2003-05-05 16:10:19+00:00","Patch #732707: EditTextWidget: long string support

svn-id: r7359
"
"3468e2caab01027da3743dd1a49fb9bdbd9462fd","2003-05-05 16:12:45+00:00","Patch #732725: EditTextWidget: handleMouseDown positions caret

svn-id: r7360
"
"1ba420a9e24d8e3db620dcb1b8d6b78d8ccf9f9f","2003-05-06 01:03:33+00:00","remove uneeded fixme

svn-id: r7362
"
"5a735f825d059c21849fc9884549cd2a57b527cd","2003-05-06 01:20:09+00:00","can get up to zak sleeping bit now...

svn-id: r7363
"
"831a3ae279a1ec98d0846c612b1cf5165442442e","2003-05-06 06:27:30+00:00","fixed warning

svn-id: r7364
"
"c8eb0a9878f22c641c773379b6f67b077c2f9793","2003-05-06 06:31:57+00:00","updated rc file

svn-id: r7365
"
"ba7e13262c2140fe55b4e1451036fe490a38fa06","2003-05-06 08:24:21+00:00","Cleanup

svn-id: r7366
"
"dcf7f81d368f3431a2839b76c6e6fdf5658e0858","2003-05-06 08:31:26+00:00","Updated

svn-id: r7367
"
"f5caac359d496414f86b2b42affbca41c011f2c0","2003-05-06 08:55:49+00:00","Fix a bug with PalmOS

svn-id: r7368
"
"dea2b80472b1d7c90d992161403715cf41ad17ea","2003-05-06 23:29:16+00:00","updated vc6 files

svn-id: r7378
"
"67a7474c4f3e05c50ef638b6d25a26809cddffe0","2003-05-07 02:57:33+00:00","Add some more game issues

svn-id: r7380
"
"2cfbd5fcd62f0b2e411fa5203ce2322b4a9ecbe7","2003-05-07 03:02:07+00:00","Ooops

svn-id: r7381
"
"15bf5ba88549134220f4c4bf9f45e7b5a4c73d94","2003-05-07 19:24:14+00:00","..\..\msg.txt

svn-id: r7382
"
"8188d946b3bad230de092782fa2c78223428dca6","2003-05-07 22:50:15+00:00","fixed warning

svn-id: r7383
"
"b1145090f6b2dab6a249508bf17238bfa898681a","2003-05-07 22:56:06+00:00","Patch #733099: DIG: Experimental camera fix (should fix bugs #716350 and #659158)

svn-id: r7384
"
"e6c8c462916d3a9885058913b212a3aa9639cc33","2003-05-07 23:09:04+00:00","fixed bug #734057

svn-id: r7386
"
"f0f955ab1586903adb3c5e2292f308ad2b0576b8","2003-05-08 00:28:05+00:00","experimental fix for Zak256 (see bug #733964)

svn-id: r7387
"
"68f821c67d910a2662bc87b3648022dbd95c307c","2003-05-08 06:17:30+00:00","Hack: Turn on ignore walkboxes in V2 to stop intro freezing. Remove when we have V2 walkbox support (ugh...)

svn-id: r7388
"
"86e28c807e1375d6e9b5a1b6995a870200fb2913","2003-05-08 10:48:29+00:00","oops that was an accidental change

svn-id: r7390
"
"07bbeb31e962aa8ab8c69683fccd14e21f7f38f3","2003-05-08 14:14:37+00:00","fixed o2_resourceRoutines

svn-id: r7391
"
"6ab104cc3ca433b672318b3e9bde26f7e882940c","2003-05-08 14:32:25+00:00","some V2 fixes (we really really need to revise the _vars handling!)

svn-id: r7392
"
"98881c3a6a513c27a06e596c29e0b40b355844f6","2003-05-08 15:48:50+00:00","init all VAR_* variables to 0xFF; replaced access to _vars in the form _vars[VAR_*] by VARS(VAR_*) which performs a validity checK; renamed _vars to _scummVars to make sure I updated all places; fixed two places where V6 and newer games would access V5 vars (but there are still some left, it seems); checked VAR access for now only generates a warning

svn-id: r7393
"
"0461222181d648c90e9dbd493909a2ff9b0e800b","2003-05-08 15:58:30+00:00","fixed various cases of bad var access

svn-id: r7394
"
"6d2c0de5f2a1fba9398d4a72e56fbead920b82de","2003-05-08 20:37:06+00:00","more v2 var access fixes

svn-id: r7395
"
"af14dabc75d23ea1bec9bffecbd5de2756ad561a","2003-05-08 21:02:46+00:00","more v2 var fixes

svn-id: r7396
"
"4d7f7a8c80fdf78cf29f8517546a5a2a89694bab","2003-05-08 21:14:21+00:00","yet more v2 var fixes

svn-id: r7397
"
"c63ec9d0084f341c39118cfe8d5a01434bc9bbf5","2003-05-08 22:44:46+00:00","added a v2 charset rendered (with a hardcoded font take from german zak); enabled verbs in zak (well, they are drawn at least :-)

svn-id: r7398
"
"bb4f80695495246d4feb4d5f48c495d22cc2704c","2003-05-09 00:57:10+00:00","cleanup

svn-id: r7399
"
"88c1f3ac1878a1ff82c631060c469457fe839d0b","2003-05-09 01:01:53+00:00","fixed V2 drawObject

svn-id: r7400
"
"15bddf437b04efd0815f824085602424fa5e1a7d","2003-05-09 01:17:31+00:00","updated my FIXME comment

svn-id: r7401
"
"8c8406cf503d721c4d28b149ab7caf683cb60b6b","2003-05-09 03:02:49+00:00","zakstdemo now finishes properly and loops etc, this check seems to be wrong for v2 games at least

svn-id: r7402
"
"c126cf2df83ee9ab4882c3e3387d5e73f8f12870","2003-05-09 05:55:11+00:00","Fix intro room transition. Seems correct, so the fixme is really just explanitory.

svn-id: r7403
"
"ff3429ddab51d3a01de68e362bb54d833075815f","2003-05-09 06:03:48+00:00","V2 Vars Fix

svn-id: r7404
"
"3ae28b3f5b8e0fdc304413841e5e812452baebb3","2003-05-09 17:11:47+00:00","use huffman trees instead of that spaghetti code

svn-id: r7405
"
"3a9d8cd8f48b7392614ff91d3e90932f86f1e2b4","2003-05-09 21:46:34+00:00","implemented v2 walkboxes (at least the debugger output looks right now, though I might have overlooked something)

svn-id: r7406
"
"18e1c5a80ad4f653fb597f948235ea8bfd77bb4f","2003-05-09 22:06:37+00:00","no need for inheritance anymore

svn-id: r7407
"
"54a9ad3204140aba204474d186058db627b2584d","2003-05-09 22:26:00+00:00","super hackish mouse click support for Zak (doesn't do anything useful in MM yet; and in Zak, all clicks are for the scene, i.e. no verb clicks etc.)

svn-id: r7408
"
"37724d929721836821065b2a177ae2f298bd1ed5","2003-05-09 22:44:16+00:00","Patch #735294: AdvMame3x scaler

svn-id: r7409
"
"34456cf63e3296405cc96aa7ba93e798e199bc71","2003-05-10 05:20:56+00:00","Rename two unknown function

svn-id: r7410
"
"97197f95ea5159e3b8caa5cc7f92fdbf0523a9ed","2003-05-10 12:23:02+00:00","cleanup

svn-id: r7411
"
"114af3159e7c4fc552972a460f845e982fbc6ef5","2003-05-10 12:59:32+00:00","added a 'width' parameter to drawBitmap (contrary to 'numstrips', it specifies the full width of the image passed in, not how much we shoul draw of it) - this will be used for the new V2 drawBitmap code; renamed drawBitmap parameter 'h' to 'height'

svn-id: r7412
"
"c4741d89a3a5e17f5312100e9f9280e055eb5e31","2003-05-10 14:30:58+00:00","new V2 drawBitmap implementation which handles object drawing, too; no masking implemented yet. Once it fully works, will remove all the _egaStrip* stuff

svn-id: r7413
"
"7f0b853ca7108cf2597c982e35feb3c2f794ff50","2003-05-10 14:40:09+00:00","fix variable acces

svn-id: r7414
"
"76b75371497652897908ada7196b50845e2a48cd","2003-05-10 16:57:04+00:00","implemented v2 masking (at least I get no negative effects, but anybody feel free to valgrind this :-)

svn-id: r7415
"
"f740959216a89a6e88cf47830d19662a8c488b1e","2003-05-10 17:09:21+00:00","removed obsolete code; cleanup for my V2 drawBitmap 'hack', which got rid of most of the duplicate code

svn-id: r7416
"
"c490ba525386525d8228086cab4bb2aa42f64cfd","2003-05-10 18:31:00+00:00","oops

svn-id: r7417
"
"4c6cb1d7c9d94a7e49906a22dfa5e1808511e591","2003-05-10 18:33:04+00:00","removed obsolete check

svn-id: r7418
"
"6bf0b6cb0d0c49cd3763852e89db3f4f937a0d1e","2003-05-10 18:38:59+00:00","fixed script dumping for flobject script in V6/V7 games

svn-id: r7419
"
"9401435b6f6c270eb068b7b9e0b32949ea3b74ac","2003-05-10 21:23:17+00:00","fixed operator precedence (thanks MadMoose)

svn-id: r7420
"
"08a9a07c400ca734c3a2b001576947a7ba392d86","2003-05-10 21:33:28+00:00","fixed the way redrawBGStrip invokes drawBitmap -> this makes the office scene in the Zak intro show up correctly (again thanks to MadMoose for the clue that lead to the right solution :-)

svn-id: r7421
"
"e5fe73726a554d312f30682508d2474c8734b0ef","2003-05-10 21:35:06+00:00","cleaned up / fixed some V2 state stuff

svn-id: r7422
"
"acb35fc915284cb3b194ba8864eb24e39fff992e","2003-05-10 21:49:59+00:00","renamed _scrWidth/_scrHeight -> _roomWidht/_roomHeight, and _realWidth/_realHeight -> _screenWidth/_screenHeight (inspired by MadMoose, but I'll take the blame - still this seems much more logical & intuitive)

svn-id: r7423
"
"f412952667e36a023b239b8ee62994635ca375a5","2003-05-10 22:12:23+00:00","fixed object drawing state handling for V2 games (this shouldn't cause any regressions in newer games)

svn-id: r7424
"
"5be0ce7adc9952ff065c7ec04cab4b87eb7b0e28","2003-05-10 22:35:12+00:00","work around some illegal var access' in COMI/V8 - there are more, but I am not always sure if avoiding the access is the proper fix; maybe in some cases we should just define that var for V8 to the proper value?

svn-id: r7425
"
"bf270d92432e44648d93598b8153b094e16ece3e","2003-05-10 23:47:39+00:00","walkbox & putActor coords in V2 are in 'character coordinates' - x has to multiplied by 8 and y by 2

svn-id: r7426
"
"79d3863db4f358432279a8ee74114f78225f9502","2003-05-11 00:03:03+00:00","more V2 'char coord' fixes

svn-id: r7427
"
"134c32bc989a06d52e3f63fe786e28961571eb19","2003-05-11 00:28:43+00:00","cleanup

svn-id: r7428
"
"e5f8056d88247eb095890c8fa050fc406cbf0abb","2003-05-11 11:13:24+00:00","cleanup / tweaks (V2 masking, at least in Zakdemo, seems not to work properly, though)

svn-id: r7429
"
"b2f22cabf788e0ae8b75130988347c1d2043848a","2003-05-11 11:27:19+00:00","correction: V2 mask decompression works 100% correct. We just ignore it.

svn-id: r7430
"
"614f51bbf29ed2591d5b8589bc2b34f36a5aa347","2003-05-11 12:22:08+00:00","Alt is the save-key, not shift

svn-id: r7435
"
"36e58e1d57aca7e8bd40abf740f999ac5d92139d","2003-05-11 12:53:12+00:00","missing period

svn-id: r7436
"
"d2d578ddd3b94f22f393613ce535ccefe6f2beb1","2003-05-11 12:59:06+00:00","clarification

svn-id: r7438
"
"b0198c611e631480d46f16e9e0a308064f19ca2a","2003-05-11 13:07:58+00:00","no tabs please

svn-id: r7440
"
"e5edc562e281e7031525147bc5803260688c4a7a","2003-05-11 14:02:14+00:00","got permission from Endy ;)

svn-id: r7449
"
"690872eca26d56526c414148db97a4158eaf64f6","2003-05-11 14:02:44+00:00","Update missing functions for HPC builds

svn-id: r7450
"
"8a562464c52c0baf0fde2be5b22605024778c4f7","2003-05-11 14:03:33+00:00","Rewrite GDI rendering for Jornada 820, COMI fxes

svn-id: r7451
"
"e223985e139c099fa4272bd2d4e85b020c21f216","2003-05-11 14:04:08+00:00","Update build revision and help file

svn-id: r7453
"
"001dc622cdb0cf1050cb63dbae8c8a6d4a460471","2003-05-11 14:05:00+00:00","COMI and Jornada 820 fixes

svn-id: r7454
"
"ab520960fef0805a17484a2c8fe818196103a030","2003-05-11 14:05:38+00:00","Fix icon path

svn-id: r7455
"
"f82de25bff5cd406c681edc199d4b7344271388f","2003-05-11 14:11:32+00:00","Fix key mapping bug (hello SF mail server)

svn-id: r7456
"
"d5e75dd3a6e85e5156fcbb6082ed916909b5ae33","2003-05-11 14:22:31+00:00","correct version

svn-id: r7457
"
"9f3558397c77917addd838b06680f5c8a2aecb53","2003-05-11 17:42:02+00:00","The new (Jornada 820 inspired) GDI rendering crashes on a Jornada 680 - further investigation needed. For the moment I'll leave both, define NEW_GAPI_CODE if you want to compile a version (HPC ARM) for the Jornada 820

svn-id: r7460
"
"27cbb5cb45f5e7b714826d7a1907b55d8b8ba6e1","2003-05-11 18:08:13+00:00","match rest

svn-id: r7461
"
"3449b0e1430d8b4d732af2772c477cd2ef9ebaf8","2003-05-12 00:00:49+00:00","Rewrite

svn-id: r7464
"
"441fccbb029c0ea8b9d02dc1a5e0fad91b5b4490","2003-05-12 04:43:09+00:00","make subsections of credits ordered alphabetically

svn-id: r7465
"
"31a78816308a903e2c159f0be3b2718410d9ab25","2003-05-12 05:22:46+00:00","make x11 backend actually compile again, seems to cry about xshmputimage when I try to run it however

svn-id: r7466
"
"a6d2d311a7540252bbd52babf4c80bb433ea7209","2003-05-12 12:13:27+00:00","Cleanup

svn-id: r7467
"
"37abdaf4270db5729b0c2b5a5a5a85d7523cd9ed","2003-05-12 12:14:13+00:00","Cleanup, add CTRL+q shortcut

svn-id: r7468
"
"ee71652af27c455495d6dd0c84df4fa2e1a3646c","2003-05-12 12:18:55+00:00","Add Auto reset option

svn-id: r7469
"
"14d9728499404de92655d9296144e43bf5b6d899","2003-05-12 12:24:09+00:00","Add Auto reset option

svn-id: r7470
"
"8ddfcf7087cbfff0aac6c5e2d9deb0f553875067","2003-05-12 12:27:06+00:00","Updated code segmentation

svn-id: r7471
"
"12f7d71bf28e2a29311ae228de66da59d0c7735b","2003-05-12 16:57:04+00:00","fix regression in MI1 (and possibly others)

svn-id: r7472
"
"f4be51cd683961c79145da93227c5c3b2349d587","2003-05-12 17:50:09+00:00","modified akos / 'old' costume (charset) masking code to a) match each other; also, the costume.cpp code looks again checks _zbuf != 0 even for non-SMALL_HEADER games, as it used to 1 year ago ;-)  (note: this change is kinda experimental; might fix some bugs, might introduce some regressions)

svn-id: r7473
"
"d5a906928545544b47897143fbb7ad0d344fe339","2003-05-12 17:55:44+00:00","synced with release

svn-id: r7474
"
"b43ea06a8041b55553f28f5b44166d820c31ab5d","2003-05-12 19:53:18+00:00","fixed illegal var access in V7/V8 games

svn-id: r7475
"
"3f798a92b6b94d0b3304d69e1a101540cab5cfe1","2003-05-12 20:33:47+00:00","added a hack to draw z masks onto the screen (useful to debug potential z masking bugs, like bug #724685)

svn-id: r7476
"
"7848ce64ea3af438bb7254b5e4a768fa8fdf93e0","2003-05-12 20:50:59+00:00","m$vc++ gave hundreds of constant-truncation-warnings because of this one...

svn-id: r7477
"
"b2d7f502f6d2ce3564d2cf25b65bc98964866370","2003-05-12 21:35:56+00:00","made hasCharsetMask return a bool (fixes VC compilation warnings)

svn-id: r7478
"
"0e226588f11d9a122b5ba09b5b577a3c46e735d3","2003-05-12 21:50:28+00:00","fixed another VC warning

svn-id: r7479
"
"47227fdf77f52dfb392dfd4fa26c3e76d8f6e523","2003-05-12 21:53:36+00:00","cleanup (fixes another VC warning, too ;-)

svn-id: r7480
"
"81bfe8cd5116e99f794ddfa105378aa1d9a3f401","2003-05-12 22:08:39+00:00","swapped talkPosX and talkPosY (they were misnamed); factored out some duplicate code in string.cpp; VC warning fix in smush_player.cpp

svn-id: r7481
"
"299a1a451fdbde6f7c8bed40596dc3a6786a6c3b","2003-05-12 23:21:35+00:00","added method to detect which midi driver will be created

svn-id: r7482
"
"4162a22121bcf2845b5f3b206f516a1bf6754a3c","2003-05-12 23:25:54+00:00","changed some internal structures, added support for true MT32 (though not yet used by main prog)

svn-id: r7483
"
"cb8d07fd62a185e73b726baebd749f4bcb8872fb","2003-05-13 15:58:27+00:00","Patch #736861: SDL/GL: AdvMame3x

svn-id: r7484
"
"2838aae2f4e9f94ef5a81770ba5cb7297e8cb3e9","2003-05-13 17:51:56+00:00","renamed VAR_UNK_SCRIPT to VAR_SAVELOAD_SCRIPT; fixed V8 save/load (no (known) VAR_SAVELOAD_SCRIPT value for V8)

svn-id: r7485
"
"fea9aed00ae4b542cac7a78d097c70e3613f9c7a","2003-05-13 17:55:24+00:00","fixed more illegal var access in COMI

svn-id: r7486
"
"796fa748062564b4bf1993b6a150ce1d2da91259","2003-05-13 23:03:18+00:00","cleanup

svn-id: r7487
"
"0ee0e7f6347def3b9b32f62f37584a3a19131913","2003-05-13 23:33:01+00:00","cleanup

svn-id: r7488
"
"08f7ec192ea6694e2fc0ab0efb6bec5ef5a4b5d2","2003-05-13 23:42:41+00:00","NUM_ACTORS -> _numActors (for consistency)

svn-id: r7489
"
"f618744799ee9147019b349d7a51a3c21f2aa066","2003-05-13 23:56:30+00:00","make it possible to use stdio for the debugger, instead of the console dialog (useful because the console is very narrow, which is annoying when using e.g. the 'box' command

svn-id: r7490
"
"395b11b26c2d024dd840cd5d88d0beaa344c8458","2003-05-14 00:35:08+00:00","added box drawing code from the old debugger to the new debugger (and cleaned it up + fixed it for rooms wider than one screen)

svn-id: r7491
"
"4ab566af90e9adb585ace64eaf52418a929c6b6d","2003-05-14 00:44:44+00:00","handle EOF (Ctrl-D) a little bit better

svn-id: r7492
"
"bb3e596951ad2140092ab01977ac1b2e54567d1b","2003-05-14 06:53:19+00:00","updated vc6 file

svn-id: r7493
"
"05c44e606ecda344801adb957aebee5160a35f2e","2003-05-14 09:47:53+00:00","various V8 tweaks

svn-id: r7494
"
"afe038d6dd03ff8b4028b3c95cb9a7c873dd8b65","2003-05-14 09:49:44+00:00","Patch #737497 / Bug #737387

svn-id: r7495
"
"86b916b76237e2787c822ed67f81a829c4307526","2003-05-14 10:14:05+00:00","V8 fix

svn-id: r7496
"
"feee7422687e5a0e3252b793cef383f78cd03808","2003-05-14 10:16:57+00:00","added opcode 0xf7 (getActorZPlane)

svn-id: r7497
"
"0106191abd1362b7c19d21f258bd56be12dbd552","2003-05-14 11:08:57+00:00","Some Zak input stuff

svn-id: r7498
"
"45ae0f0d61544376248996f8395ba4801aa6b90e","2003-05-14 12:12:55+00:00","force fixed width font in V2 games (our font data is proportional, hence this looks odd for now; proper fix will be to get proper font data)

svn-id: r7499
"
"d8048837f396cebafc9cf5474dc9d358a2a3a349","2003-05-14 12:26:23+00:00","fixed v2 verb handling

svn-id: r7500
"
"50a857a40694daec8c63d4ba480d298d65c71445","2003-05-14 12:32:40+00:00","make gcc with extra extra warnings happy

svn-id: r7501
"
"bc99915aa50dd58a4ab37f810e1df2c40acd4086","2003-05-14 13:30:52+00:00","V2 text drawing

svn-id: r7502
"
"45b2698b247de6d021effefa68ca51314cf0e6e8","2003-05-14 13:32:43+00:00","cleanup

svn-id: r7503
"
"1da2ef8de3f1eff3d8fd1eda7cee0111e0659ba8","2003-05-14 13:38:58+00:00","always draw walkboxes into virtScreen 0

svn-id: r7504
"
"d80f9e34e0ca1bdfb083443766a562b14ff50631","2003-05-14 13:50:28+00:00","v2 text output tweak

svn-id: r7505
"
"a4915a330468e35baadfcea2e2f6c27b09deb34b","2003-05-14 14:00:29+00:00","default text color light blue instead of pink

svn-id: r7506
"
"23fd68d2b67e7d49c92149f8429630e25284cc40","2003-05-14 14:07:11+00:00","fixed light blue EGA palette entry

svn-id: r7507
"
"d7352e8e1933f21ee76122a2daec3c083356dc7d","2003-05-14 14:22:15+00:00","fixed V2 decodeParseString

svn-id: r7508
"
"d4841c91972027c230b3941699a138cf427f652e","2003-05-14 16:38:55+00:00","new V2 font (taken from german zak.exe)

svn-id: r7509
"
"fae5ab677c1c3d3042c48f73a34f66ce3f2fdba4","2003-05-14 19:44:41+00:00","fixed bug where SDL_CreateMutex was being called before SDL_Init; restructured code a little

svn-id: r7510
"
"af8cb44727c4cc7a00a0c652c661386c9c715775","2003-05-14 19:47:57+00:00","ouch

svn-id: r7511
"
"eb22ea3b96b4e76b6ac717490d33abbb314acb62","2003-05-14 20:14:03+00:00","additional readArray protection (might cause regression in FT, but then we should fix FT!)

svn-id: r7512
"
"f495c14d84e77ea1e6c38b4844c68b4f2cb915ab","2003-05-14 20:37:53+00:00","opcodes are just one byte

svn-id: r7513
"
"e9d5de3a7e7cd4c5bfb05100d5675d84c0b4c387","2003-05-14 20:51:30+00:00","rm library file before running ar (otherwise ar might add to the existing .a file, which can cause issues if files are added/renamed/removed)

svn-id: r7514
"
"5f7e8231ca0cadfb8da93dd75f7ac7665092dee7","2003-05-14 21:25:03+00:00","some renaming (consistency)

svn-id: r7515
"
"d0e5d1f44c35bdcefaff60d3dd74d8256c3e3f5b","2003-05-14 22:33:39+00:00","restructured some things (mainly the screen routines), moved things out from SkyState. (not yet complete)

svn-id: r7516
"
"10443a0fdbb4782733818bcf5c47b414f3427750","2003-05-14 22:45:49+00:00","removed timer.o

svn-id: r7517
"
"885f28b6aed2229c48cc1f08ba4ed59df596fb0a","2003-05-14 23:28:56+00:00","cleanup

svn-id: r7518
"
"f3a5fc79c1d22338a8ed60a63b9571162a5dd581","2003-05-15 00:03:49+00:00","bounds check; made data static

svn-id: r7519
"
"979b4654152e0b8ac2a6282844700d1d098a3dbf","2003-05-15 00:05:32+00:00","Added rudimentary Adlib percussion support.
Semantic fixes -- Adlib 'MIDI Channels' are now 'Voices'
Miscellaneous cleanup/streamlining.

svn-id: r7520
"
"94f07fd342856a211edce0ee0d4ecb05c83fb0cb","2003-05-15 00:27:19+00:00","Changed custom MT-32 instrument warning to debug output

svn-id: r7521
"
"cb5d44bc124cceb2e8e8b92258eee6541ecf4806","2003-05-15 01:17:33+00:00","Fixed tambourine percussion patch

svn-id: r7522
"
"a2b67a9df3b9cb940470f211d4977cc0fb707df9","2003-05-15 05:22:03+00:00","updated vc6 file

svn-id: r7523
"
"33c8c2fae831c7ff6af61a7d9575ab2dd5af5d57","2003-05-15 13:56:41+00:00","Fixed panning issue

svn-id: r7524
"
"7e7719fd16fe5b4e753f3e6930d739edb8d8da3e","2003-05-15 14:16:12+00:00","Possible fix for Windows SysEx transmissions

svn-id: r7525
"
"6fa0114eee817b0ac9ad5f3c7388830b63fb0643","2003-05-15 17:53:23+00:00","adding some asserts (e.g. against that evil COMI crasher)

svn-id: r7526
"
"c1c9510ae8521691f19d5c187d9580e7d9803672","2003-05-15 17:57:52+00:00","fixed the evil, evil COMI crash on Mac OS X (and memory corrupter elsewhere, maybe?). The last part of this change is the crucial one, computing the correct value for right_strip

svn-id: r7527
"
"00857367f36de07df0ac4dc4785ed24636f9b4c8","2003-05-15 18:24:59+00:00","Fixed S&M regression in World of Fish music.
Stripped out a bunch of deprecated stuff.

svn-id: r7529
"
"2a7ae09b192cc01ea2f96701b6bdb20b76754b8e","2003-05-15 18:56:15+00:00","added incrementation of key velocity.

svn-id: r7530
"
"7fb5bd3a3dcd70212f950c98bcc877143c0de225","2003-05-15 19:14:40+00:00","reordered some intro commands, made fade-in look nicer

svn-id: r7531
"
"c13591816ab5c32a6dfc028ff8533d988f891586","2003-05-15 19:39:10+00:00","More streamlining

svn-id: r7532
"
"420095e1f34e57b7b6137ad12910ddc8e02f3ebd","2003-05-15 19:40:10+00:00","Whoops, disable debug

svn-id: r7533
"
"2c3ee5aed031e748e98769798f9ef6a689a68876","2003-05-15 20:34:42+00:00","Fixed main timing loop

svn-id: r7534
"
"cc8da4538d750d31ca515b7416c3fa819e8e1e39","2003-05-15 20:47:31+00:00","added comment

svn-id: r7535
"
"095aff34d55c5c5dd819739d5ce1f5d4a63759f0","2003-05-15 21:09:55+00:00","cleanup / added FIXME

svn-id: r7536
"
"6cbfc1e3427bf74d124c0050f8169b9f5415be02","2003-05-15 21:25:35+00:00","cleanup (rect.h is not used anywhere but I plan to change that...)

svn-id: r7537
"
"82e2d852f15dea9fb75a4accee3f65f9bc5e3040","2003-05-15 21:31:03+00:00","cleanup

svn-id: r7538
"
"c0e8eb0cb77807236897a764f4414cb5e33e7ba9","2003-05-15 21:33:39+00:00","let it compile

svn-id: r7539
"
"128f793be03e389891a0fe92373269bfb8b39114","2003-05-15 21:40:36+00:00","make SWAP a template function, so that it works for swapping non-int stuff, too; 'int16' should be sufficient for points/rects

svn-id: r7540
"
"f695aa388550a3cfb2a0e09811b6d16e3a5686ea","2003-05-15 21:52:10+00:00","renamed isInside() to contains() (this is more intuitive, because r.isInside(p) actually meant 'p is inside r', which was confusing; now it's r.contains(p) which means 'r contains p')

svn-id: r7541
"
"73e086fe625663a04f1b34c372ec93de440231d1","2003-05-15 21:55:13+00:00","_saveSound implementation

svn-id: r7542
"
"8b419944eee013fe45909b15e0375531383dd25b","2003-05-15 21:57:38+00:00","ScummPoint -> ScummVM::Point

svn-id: r7543
"
"b34318ca5577aee75f0c86a783a11a45de4886e5","2003-05-15 22:15:24+00:00","add method to grow a rect

svn-id: r7544
"
"050358bc7fcaab2ba2821b0fd5b28e02bac2a0e6","2003-05-15 22:27:09+00:00","oops

svn-id: r7545
"
"f4c7f3774318668a18814ebaac9922ad5f86062f","2003-05-15 22:30:32+00:00","Make use of ScummVM::Rect

svn-id: r7546
"
"69c118a43e3480828a5c447aa296e82fdcce27dc","2003-05-15 22:31:56+00:00","Some more streamlining

svn-id: r7547
"
"a8603e5bfc286dc286d20831ae3f025be0a4940c","2003-05-15 22:36:43+00:00","some more ScummVM::Rect

svn-id: r7548
"
"7baef4ad4eb5768e3222cfe85d3b716cd65f4705","2003-05-15 22:41:35+00:00","make some more use of ScummVM::Point; cleanup

svn-id: r7549
"
"5e756aa8b8d4d20f2c0c1c559868e07d64d6bd5e","2003-05-15 22:48:06+00:00","cleanup

svn-id: r7550
"
"4b82ea54cb8d19defa8c8b82a4829a0a5359e8ae","2003-05-15 22:57:53+00:00","output a warning if ignoreTurns is set (so that we can find out where it is used)

svn-id: r7551
"
"9f6b1bf3a1fbae4497a8c68cb2aec9d3c6f819cd","2003-05-15 23:08:03+00:00","Removed deprecated _program.
Miscellaneous cleanup.

svn-id: r7552
"
"27c093a3a660fb259198961203d01a2694c8d414","2003-05-15 23:44:46+00:00","fixed / cleaned up drawBox

svn-id: r7553
"
"9018be6cb327dcb2508855cc46765cd829192af0","2003-05-15 23:50:16+00:00","moved drawBox to gfx.cpp (seems to be the more logical location)

svn-id: r7554
"
"9d7cd48dcc7b51bcb405c7e7574d5a94236a7af5","2003-05-16 00:07:47+00:00","Fixed VC++ warnings

svn-id: r7555
"
"d7ef626b42d2e669cac337dcf4e4c53cccdfad42","2003-05-16 00:11:35+00:00","fix advmame scaler ('flickering', observable in e.g. Sam&Max, and the left-screen-border-black bug). Note: this change might look fishy to you but is perfectly legal because our frame buffers put a border around the screen data to accomodate for this

svn-id: r7556
"
"1482ab1c4282c271fccae45b02d847eafe5076ee","2003-05-16 00:17:23+00:00","obsolete

svn-id: r7557
"
"319cbc1c8c1341c022dc5379df0cba7aa022588f","2003-05-16 00:19:30+00:00","Reset sounds on room load

svn-id: r7558
"
"26d840e4fc0350d12176a552a0237a776af9a040","2003-05-16 01:52:45+00:00","IMuseDriver functionality absorbed into IMuseInternal.
Initial structural support for multiple MidiDriver's.

svn-id: r7559
"
"e1652fedead9dd8c8b6f6eb709cbd1a1fdf237e6","2003-05-16 01:56:06+00:00","hackish partial doSentence support

svn-id: r7560
"
"bfb68f513a2133760b922ded3f5cf4c4f1bcc424","2003-05-16 02:13:21+00:00","Fixed game load crash

svn-id: r7561
"
"7d08aea4cc1f39462e5195da641fe876f4c9c8ad","2003-05-16 02:16:59+00:00","SentenceTab unk4/unk3 are the sentence objects (think of: 'Use objectA with objectB' or 'Give objectA to objectB' etc.); added a little more V2 sentence hackery; added a FIXME regarding some strange sentence code (accessing objectB before it is set) in script.cpp

svn-id: r7562
"
"08e0fcbda4d8d8db184b67138b532815f9ed66fa","2003-05-16 02:20:34+00:00","Disable NATIVE_MT32 by default

svn-id: r7563
"
"9f272a2acf17cb96a358a6be5dfd6869ab0abb94","2003-05-16 02:33:08+00:00","fixed o2_getActorX / o2_getActorY (thanks MadMoose)

svn-id: r7564
"
"2c77fc14aa1d3b8233c038f8bd86846de9f9141d","2003-05-16 04:02:33+00:00","Fixed SysEx parse error, misc. cleanup

svn-id: r7565
"
"7c1ca29ece5597c363325046b1c02371741a54c6","2003-05-16 08:05:06+00:00","add config option basename to override base file name for games of the form foo.xxx to basename.xxx, useful when used together with gameid to test games not yet added to version list

svn-id: r7566
"
"f69df41c71fa835940046ea64dd7013e3a62975e","2003-05-16 09:47:52+00:00","Add comment to fixme

svn-id: r7567
"
"61fdee0b426b0a64674d8780f7bf1719604b21a7","2003-05-16 09:51:59+00:00","Typo

svn-id: r7568
"
"30d31f6d0354a571aa1e5f43d3a9978f0e149a44","2003-05-16 10:00:03+00:00","print some useful info, too

svn-id: r7569
"
"9e5f46e635a8cb6366398f3c4082ee08c1aacde1","2003-05-16 10:35:15+00:00","fixed V2 verb scripts

svn-id: r7570
"
"0d7184aa0099ebff12a6c95d879d4e958b2db032","2003-05-16 11:29:16+00:00","GF_AFTER_HEV7

svn-id: r7571
"
"ce6e5993c366ea95a7479a9f2137d6ad9a8d12a6","2003-05-16 11:45:05+00:00","add hev7 target to test with

svn-id: r7572
"
"914d8867692eea52373c74d0afa80bde6a1fa7b8","2003-05-16 12:58:49+00:00","test stuff

svn-id: r7573
"
"50bbfe03721a2f9d4aa69f67b51632daa40d5eb2","2003-05-16 15:33:18+00:00","added SFX support

svn-id: r7574
"
"e503df12a62a7bcf2fef9ff84b089213fba70e02","2003-05-16 15:48:01+00:00","Corrected overly aggressive MIDI channel reallocation

svn-id: r7575
"
"52832cc954d16e11db37af4053b2cc04ca25adfc","2003-05-16 16:09:16+00:00","some updates that get us up to the bootscripts of he v7 games before erroring out on unimplemented opcodes

svn-id: r7576
"
"0ece527a694439666fa039dcc7995b97ce84ad65","2003-05-16 19:16:43+00:00","FINALLY got MI2 Woodtick music working!

svn-id: r7577
"
"053e7cb71edb02abc9e260ff750a57ce337f7089","2003-05-16 20:38:04+00:00","More IMuse cleanup

svn-id: r7578
"
"954049726374bd49ec226904268e8b8360eb0617","2003-05-16 21:05:58+00:00","Added SysEx hooks

svn-id: r7579
"
"3533843ac8997e9426712af007cf29f03e25cfa0","2003-05-16 21:06:54+00:00","And yet more cleanup

svn-id: r7580
"
"a4550829965bb23eb42aee205648e621e0336473","2003-05-16 21:31:15+00:00","added roomobj dumping for bundle games (was trivial it turns out :-)

svn-id: r7581
"
"5a15ce808a61b29dc902e3cb039b8ebb515409b3","2003-05-16 22:00:33+00:00","Feature [557411] Adlib sound effects with GM drivers.
Support for simultaneous drivers is based on a
#define in imuse.cpp, and is disabled by default.

svn-id: r7582
"
"64d9c75c2d53715645178b18624248c365f13d06","2003-05-16 22:11:49+00:00","cleanup

svn-id: r7583
"
"48f73469e02bba652b60e912cffae0946252b8d8","2003-05-16 22:28:33+00:00","Redesigned -t option

svn-id: r7584
"
"124a34f72a1fd915332b1cdfa64dff7c0f10c027","2003-05-16 23:13:47+00:00","Fixed volume fader problem under multiple MIDI drivers

svn-id: r7585
"
"92a71eed1003368e70f2f4ffa3ac73120db06bd6","2003-05-16 23:50:56+00:00","fixed o2_drawObject (thx MadMoose)

svn-id: r7586
"
"3244a79d4675cc50b1e7b4ac05687a9acfcffaf1","2003-05-16 23:54:58+00:00","V2 camera fix (again thanks MadMoose)

svn-id: r7587
"
"21264fa23ada7b4cc645792d8bbb4eaae0e16b1f","2003-05-17 00:15:52+00:00","newline to make gcc happy

svn-id: r7588
"
"58ab6d50395b8f31ba29b452593b21d80435f95a","2003-05-17 00:33:29+00:00","proper walk animation in Zak (at the expense of Zak's head, for now ;-)

svn-id: r7589
"
"6ed1d415b5da1830ead0fa91760751b78893628a","2003-05-17 00:37:53+00:00","for v2 games, make space the pause key

svn-id: r7590
"
"56d6443b1956151df2fb6e815221deb4d348c85b","2003-05-17 00:59:47+00:00","fixed object walk_x/walk_y for V2 games

svn-id: r7591
"
"3a145f50e720a0fe6120b071ae37c15c2dff90d3","2003-05-17 01:01:05+00:00","disable assert in o2_putActor for now (is triggered in Zak intro); cleanup

svn-id: r7592
"
"1f7ebc70d8d72d081f52392dd1adeb273156ed68","2003-05-17 01:57:54+00:00","add stub for a hev7 op

svn-id: r7593
"
"5a1e994d02c9e47ba15f327248f410d88a90d841","2003-05-17 03:06:16+00:00","Added command line options for
native MT-32 support and
combination Adilb/native MIDI drivers.

svn-id: r7594
"
"d203a5f5017175f8fdaf034a404576464105333b","2003-05-17 03:10:51+00:00","Removed debugrl modules

svn-id: r7595
"
"72186895b4a725c0cc7662310581768631e029da","2003-05-17 05:57:19+00:00","Some stuff that's happened.

svn-id: r7596
"
"99b26a5684382cfaa135d76a0d54074a30306f0e","2003-05-17 06:04:22+00:00","Name some vars

svn-id: r7597
"
"2813d48e929890cdb38001555e07751ccc5d95a9","2003-05-17 06:14:08+00:00","Cleanup

svn-id: r7598
"
"6db28696e44e4a81c54cf4b8e1813ecdb8e5036d","2003-05-17 06:18:34+00:00","Fix invalid variable

svn-id: r7599
"
"e5d7459d98acd6b7487914df92b59ce8176af72a","2003-05-17 06:33:34+00:00","Move some hacks around

svn-id: r7600
"
"0b3d9df5b2a2db1facc19f6b666e46b667215865","2003-05-17 06:34:24+00:00","Oops, remove debug crapola

svn-id: r7601
"
"a91b28848c5336b7395fab7fb0083d2cd05ff6fb","2003-05-17 08:54:46+00:00","Add simon1amiga to debug

svn-id: r7602
"
"4cc3a466d0d7e3cbb7ab0b80195030b2b7d12359","2003-05-17 10:04:30+00:00","init vars to 255 if they are not defined for all Scumm versions

svn-id: r7603
"
"61c2430a98f992a740a84fdc737dc3f3450249a7","2003-05-17 14:24:19+00:00","Moved SEQ to its own file

svn-id: r7604
"
"66cbaa1df73087ac40e4cfb9f3cc89e2ee19119e","2003-05-17 14:26:58+00:00","Moved SEQ driver to its own file

svn-id: r7605
"
"e880007175532658c4e6a3c18509982d94de1c75","2003-05-17 14:27:58+00:00","Absorbed last tidbits of mididrv.cpp into other files

svn-id: r7606
"
"ccac1ab8038819344fbb9e5a574d8cf13a1f209c","2003-05-17 14:29:08+00:00","New seq.cpp, deprecated mididrv.cpp, removed non-Windows MIDI drivers from project

svn-id: r7607
"
"d157b488760d3f47dba99732ae63e2604ae0d03d","2003-05-17 14:31:21+00:00","Removed mididrv.cpp, added seq.cpp

svn-id: r7608
"
"a6d1c3e15123d8092108f92a5bd3a6c057588783","2003-05-17 15:51:11+00:00","no no, bad hack be gone :-)

svn-id: r7609
"
"c88e0b5301d49c916b1cb90d61d877cb6d67c162","2003-05-17 17:20:27+00:00","Fixed Adlib sound problem on old (small header) games. Thanks for eriktorbjorn for the material that led to the solution.

svn-id: r7610
"
"33abb1f04a41cba7a67af1f6e98cd865f0345f9c","2003-05-17 18:07:07+00:00","V2 actor heads fixed (to their shoulders, ha-ha... errm ... I thought it was funny when I wrote it 8-)

svn-id: r7611
"
"30271732bef9c7292b750d94705d4927ff876996","2003-05-17 18:30:47+00:00","some sentence fixes

svn-id: r7612
"
"3576b8e16882f0e8f033679bf293bc3b3a3ab618","2003-05-17 18:42:31+00:00","yet another V2 sentence fix (now clicking on objects in Zak causes Zak to talk to it - but he gets stuck after some time)

svn-id: r7613
"
"fcc11d19fa22a8c559d53c3d1e5b9b63b7be975c","2003-05-17 19:03:25+00:00","Added imuse_multimidi to debugger

svn-id: r7614
"
"93825ff9481ca17ef6735de966578c8462ff76a5","2003-05-17 19:07:45+00:00","Fixed program change msgs being sent under Adlib

svn-id: r7615
"
"d85abe173761fa502e3eafa3c5ea1b18c9aa92d1","2003-05-17 19:11:59+00:00","I thought it would be clear from the comments that this was needed for the atari st zak demo, which seems to still be the case

svn-id: r7616
"
"c79d40e1e336f94cd65496b7428fcacb95392691","2003-05-17 20:04:05+00:00","small fix and added skyText destructor

svn-id: r7617
"
"a5607d3fa279988880ba7b17e7935fb26e3dbc45","2003-05-17 23:36:47+00:00","make ARRAYSIZE 'return' an int

svn-id: r7618
"
"740d1150f51149908b194a27e23a019c803b4615","2003-05-17 23:46:03+00:00","make gcc 3.3 happy. a->scalex and a->scaley are of type char and cannot be greater 255

svn-id: r7619
"
"a95e860c104d125a89c6d5b9d2a079af88183bd9","2003-05-17 23:47:50+00:00","_gameId is of type char so it does not make sense to have 299 GIDs. reduce to 199

svn-id: r7620
"
"0a8cdad264ee3208d16b09c970f66a8cf1f9c568","2003-05-17 23:48:32+00:00","make gcc 3.3 happy

svn-id: r7621
"
"1156abd532f1e3439e4f81e32aa05a558858c44c","2003-05-18 02:22:26+00:00","wow, now this is a stupid bug... fixes various issues in Zak256 at the very least

svn-id: r7622
"
"e91bf4df2f8312858686269ad2f93dc88b301a31","2003-05-18 02:40:54+00:00","fixed my wrong fix for move_screen

svn-id: r7623
"
"61a1368a7d678f707ff7e29544e1eb592690d5c2","2003-05-18 05:43:52+00:00","add checking for libs, help, options to disable engines

svn-id: r7624
"
"068a5eda7184bdd8d011e1f7ad861579d3c9df51","2003-05-18 09:54:28+00:00","make configure script output a config.mak

svn-id: r7625
"
"c3b5fce26220217c7a2f7b1a7a4add10e0684400","2003-05-18 11:21:31+00:00","number of actors in maniac is even 25 (according to the MM script-1)

svn-id: r7626
"
"48d642dea6eb11d74502faa29db638fd60afe96b","2003-05-18 11:23:12+00:00","make less broken

svn-id: r7627
"
"6174bb7c6b67cb703e89abba785002343bb2d9b8","2003-05-18 11:27:35+00:00","rm -f

svn-id: r7628
"
"9dc0a6d3c8381da5de061b9f43a171aef7c383e7","2003-05-18 11:46:14+00:00","remove ldd use

svn-id: r7629
"
"a38c3599ce915424c3add0725546cc850dcd2684","2003-05-18 12:02:17+00:00","fixed opcode 0x47

svn-id: r7630
"
"657c8ca2e3960346a601aaf16e7d3b4068820bed","2003-05-18 12:52:27+00:00","more V2 sentence cleanup

svn-id: r7631
"
"cf54a636396002c268404b8ba4f11a84fc99a127","2003-05-18 13:39:02+00:00","HAVE_CONFIG_H

svn-id: r7632
"
"2cd2cc83b299313c0a4f92758381382845058ba0","2003-05-18 14:03:47+00:00","adlib fix for Simon games from Jamieson630

svn-id: r7633
"
"02e5463f6f9bf3d89dfe7cc1bae70efbd1f63439","2003-05-18 14:06:13+00:00","comment UNIX defines for now

svn-id: r7634
"
"fa82ad65f9abd4256717c28e5def45e2b5dbfb47","2003-05-18 14:13:21+00:00","typo

svn-id: r7635
"
"79be84af363a6e39b813e539cfd9e525861cd8bc","2003-05-18 14:25:33+00:00","New plug-in MIDI parser modules, INCOMPLETE.

svn-id: r7636
"
"d9dd0c5300f0e03bc5c903068aefeaefd5189e95","2003-05-18 14:43:50+00:00","update

svn-id: r7637
"
"ad548faeb61419d117d8a409176844f8f085af4b","2003-05-18 14:50:10+00:00","MIDI Meta event Tx for virtual MidiDriver's

svn-id: r7638
"
"8b4c663e12d393d5926086c6805a89d9e68e3957","2003-05-18 18:36:14+00:00","Patch #738859: Experimental costume.cpp cleanup

svn-id: r7639
"
"c9048e046b4427112e9c7996fa2c6a3a1618d3b3","2003-05-18 18:56:04+00:00","update vc6 file

svn-id: r7640
"
"8f7f22aeae822a123627c6f7e27e6f397129bd70","2003-05-18 19:44:22+00:00","implemented proper 'invalid walkbox' handling in older games (in newer games, box 0 is used as invalid box, while in older games this is a legal box and box 255 is the 'invalid' box); removed lots of FIXME's which were needed to cope with ScummVM not implementing the invalid walkbox stuff properly in the past; removed other actor FIXMEs.

svn-id: r7642
"
"7ec709e35f513702c65ec9abae4f1eea9e5fe906","2003-05-18 19:51:50+00:00","Part of patch #739119 (attempt to fix bug #651077 at least partially)

svn-id: r7643
"
"988ec14c5f56e015aeaabebbc62cbd108855f31f","2003-05-18 20:33:22+00:00","fixed debugger 'scripts' command

svn-id: r7644
"
"6b7484f320ddcdf197c8b863bb60ef9aad8f72ae","2003-05-18 20:57:32+00:00","consistently index script slots with index 0 (not 1); this fixes bug #739463; made stopScriptNr match stopObjectScript more closely (we could merge them into one function one day)

svn-id: r7645
"
"7171c5bcd4063be192c94be93555b15f9eb59622","2003-05-18 21:03:57+00:00","cleanup

svn-id: r7646
"
"5ac005860c3444ee881a2a448aa7481bdc37851b","2003-05-18 21:14:50+00:00","warning() automatically outputs a newline after the warning message; adding a newline into the format string adds another newline (which contains the single char '!')

svn-id: r7647
"
"1f8d481acbcd0eac2c3b4165bc1fd01afe1d056b","2003-05-18 23:14:21+00:00","fix for various regressions (not quite sure if the check for V2/v3 is right, but seems to work so far)

svn-id: r7648
"
"f6d1e711945718261a298904ba6012dd7c119346","2003-05-18 23:19:43+00:00","oops

svn-id: r7649
"
"febf19cb3f8fab19e280eda0392f0a3cc010a4a7","2003-05-18 23:36:38+00:00","SMF/GMF implementation of MidiParser

svn-id: r7650
"
"1f616edfcde33d43c5b8fd7edfbd54dae60fcead","2003-05-18 23:37:44+00:00","VAR_CHARCOUNT is a V2 only variable, so I moved its declaration to the other V2 only vars

svn-id: r7651
"
"ac9a392a5beed682d0d6f6d975ee2076f58671f8","2003-05-18 23:45:34+00:00","Fixed VC++ warnings

svn-id: r7652
"
"b43bca21cbea217d980887eabbfc73e92fce4c71","2003-05-18 23:46:30+00:00","more cleanup

svn-id: r7653
"
"c81b58d38eb8ca38e8614152000bceb7b2c012ad","2003-05-18 23:55:53+00:00","Implemented new Simon MIDI module, switching from MidiStreamer to MidiParser. Restructuring enables XMIDI support and vc_72 implementation. Various cleanup on MidiParser's and MidiDriver's.

svn-id: r7654
"
"1b410c50ddb7a90d35e35f9598f2e848aadb18a7","2003-05-19 00:02:50+00:00","remove dup object

svn-id: r7655
"
"9cbc6904a0c6a6fc750ab600b7adeb2143abf110","2003-05-19 00:12:16+00:00","Fixed gcc warnings, virtual destructor problem

svn-id: r7656
"
"33d1f15f97a53371aa2d2ecfca694d9ca600780b","2003-05-19 00:17:34+00:00","V2 walkbox matrix fixes

svn-id: r7657
"
"a9445ab8d6f3d53714e9f1c1a10bb80f2f443562","2003-05-19 00:22:37+00:00","Update simon 2 issues

svn-id: r7658
"
"bd326e83f7525b7d1daccbc4d3a940a4f63cc5e0","2003-05-19 00:24:11+00:00","Fixed virtual destructor problem

svn-id: r7659
"
"cf500b2450186ef3c9f34d651ca9ba5c0bb4c880","2003-05-19 00:25:26+00:00","enable box'ed walking in V2 games

svn-id: r7660
"
"b66f4416cb1f8b177ecc01fadb673564d5b6a473","2003-05-19 00:38:35+00:00","playMusic streamlining, comments cleanup

svn-id: r7661
"
"3b7270a9c65854edb0faaa7270feab5a04c2c63f","2003-05-19 00:45:30+00:00","Minor correction

svn-id: r7662
"
"40ce9cdcc34492dc9972fd6c3c111756f8c9fba8","2003-05-19 00:50:30+00:00","MidiStreamer goes away, replaced by MidiParser

svn-id: r7663
"
"a2ce5b6383882c2cd61aec241630dfce591c4945","2003-05-19 01:27:30+00:00","don't touch untouchable objects in V2 games

svn-id: r7664
"
"b8d241edb2d748209b0d6b9bf8caafdd30435f43","2003-05-19 01:29:00+00:00","*** empty log message ***

svn-id: r7665
"
"4a87f8191f383b058f18653a4710ebde324ab5b0","2003-05-19 01:36:04+00:00","Minor cleanup

svn-id: r7666
"
"f6d745a03b5a913525a19175d0e0117d260f49c8","2003-05-19 03:29:39+00:00","Music fix from Jamieson630

svn-id: r7667
"
"243bcc74d3f44868d5e0e9805a390efb690d8e73","2003-05-19 04:29:41+00:00","sync local changes, fix pickOneOf

svn-id: r7668
"
"ff418964800f14c6041b072c8d510005929c19f2","2003-05-19 05:00:13+00:00","Fixed Simon 1 music regression.
SMF parser now supports malformed Simon pitch bend events.
Implemented SMF parser jump method.

svn-id: r7669
"
"417dc08484c6ecfc0b3aa64a18decfc85f2b95d4","2003-05-19 05:04:38+00:00","Proof of concept for XMIDI parser in Humongous games.
You must still uncomment the VAR_SOUNDPARAM setting for this to work...?

svn-id: r7670
"
"e088227e3b903319f873f4de4468fdea780bbd62","2003-05-19 05:14:18+00:00","Removed annoying debug output

svn-id: r7671
"
"29fb3e308f32c853155c9400bc9df7d850c9b9b2","2003-05-19 05:40:27+00:00","Fixed music looping problem in simon1win

svn-id: r7672
"
"6cb61537f4749e83b7bbdd2294a28f07eb6eeb15","2003-05-19 08:04:47+00:00","enable midi for non puttdemo humongous games. need to properly return the result of whether music is running though...

svn-id: r7673
"
"714cd3503d053e65aaaf721d91a0729bf18990d3","2003-05-19 08:42:10+00:00","make gui work if the requested string vars don't exist

svn-id: r7674
"
"682d88cf71e392a84327c1854845b2268c2ce10b","2003-05-19 09:01:25+00:00","fix shadow warning

svn-id: r7675
"
"12ff6c4f992034c1a59f935d8882c9d41e37d0b4","2003-05-19 09:02:16+00:00","correct transparency colour for humongous games when using akos16

svn-id: r7676
"
"3d14e5305e7b87c3394dbd9ffee80186adbe70bb","2003-05-19 09:04:50+00:00","fix shadow warning; removed unused var

svn-id: r7677
"
"7091080e7da0fd7f62343a2fef19bc2091baa162","2003-05-19 09:41:28+00:00","Try and make some sense ot of simon 2 midi systems

svn-id: r7678
"
"aa1ddc6a5a13012ef93bfcf8a8e870aed165e997","2003-05-19 09:47:33+00:00","Minor correction to last commit

svn-id: r7679
"
"770a0f1d3b91877a1d8136ca11ca703eec928336","2003-05-19 09:59:23+00:00","music_unk isn't needed in playmusic, it is always set to 999

svn-id: r7680
"
"1e49486e43d9e0023b15eea92e6badf6caebbdac","2003-05-19 10:24:51+00:00","Correction from diasm.

svn-id: r7681
"
"6363881854934ff365a870d6195fcc0e67b03bd0","2003-05-19 10:49:25+00:00","Cleanup, add memory panel, change tempo option to fit the new version

svn-id: r7682
"
"48f575f4cab96e235153a9ac032421ab12893e01","2003-05-19 10:57:50+00:00","Cleanup, add memory panel, change tempo option to fit the new version

svn-id: r7683
"
"fae9289a416f071ef46fb90be8fa780df0d2dad2","2003-05-19 10:59:24+00:00","Updated with lastest changes

svn-id: r7684
"
"1fa5bb769e6bed5663071224255d5b241bc4edb3","2003-05-19 11:00:49+00:00","for new midi parser

svn-id: r7685
"
"f0d9aebe17416b035a621b7de9de5d15e86b8b61","2003-05-19 11:02:59+00:00","add virtual numpad, change state of draKeyState

svn-id: r7686
"
"8f2c1e203c6b52ed03753b783b6eab80e460b2d9","2003-05-19 11:06:16+00:00","Change 'exit' function

svn-id: r7687
"
"18a6b5dcc1215902ccd9313f2a0a827e27107061","2003-05-19 11:31:35+00:00","renamed ScriptSlot::unk1/unk2  to freezeResistant/recursive

svn-id: r7688
"
"ec4cc7d774450b1877b18b2e13a6ff7e8f19d25d","2003-05-19 11:34:13+00:00","more special palette fixes by erik

svn-id: r7689
"
"5a89820f0deb8bdee8677bd82304acd355d05597","2003-05-19 15:40:34+00:00","Fixed VC++ warnings

svn-id: r7690
"
"e8771e7684048690e39d3e76f71bdea193f3d1f3","2003-05-19 17:45:21+00:00","Fixed problem updating callback

svn-id: r7691
"
"3dc788da63520b8baad2b5c0726f34168ab55356","2003-05-19 18:48:18+00:00","Moved common parsing logic into MidiParser base class.
Added auto-loop capability.

svn-id: r7692
"
"ad39f15e055bef65c07630130c87db7b7c6e4c62","2003-05-19 18:49:16+00:00","Auto loop for non-puttdemo games

svn-id: r7693
"
"a8627b1da6001ba7182439de098ffab8e08e845c","2003-05-19 19:04:39+00:00","Fixed Adlib priorities for non-SCUMM games

svn-id: r7694
"
"d6cf47dfaacedaaea15dd019ce2c826c0720e942","2003-05-19 19:19:32+00:00","Patch #739911: Fix for undefined behaviour in fopenNoCase()

svn-id: r7695
"
"996614936a4146a62b824123fb388e0dae009b95","2003-05-19 19:24:22+00:00","Fixed anonymous structs warning.

svn-id: r7696
"
"7bf95c0cf02e976ad796eef3a3e9bf2f9d81950b","2003-05-19 19:50:28+00:00","Fixed silence in older games under native MIDI drivers

svn-id: r7697
"
"1e7f246755434683453d4bd6340eafec7493be33","2003-05-19 19:52:08+00:00","fix assert for mi_demo2

svn-id: r7698
"
"d50b070168e386516c637e1a11c66056525a3b9f","2003-05-19 20:09:30+00:00","fix for bug #739661

svn-id: r7699
"
"3703ed51dca1450eb7c6c70ffdaffb34728d8ba5","2003-05-19 20:34:41+00:00","Oops....

svn-id: r7700
"
"bc73fcf386bdf58a87f2c8bb36759a173a1ba866","2003-05-19 20:36:39+00:00","cleanup

svn-id: r7701
"
"881e127298f55e6252763fc1f6f5c2ac967a15e5","2003-05-19 20:40:54+00:00","new date (post-0.4.0)

svn-id: r7702
"
"f1982ec9d609693542dbc3522288f911d20d7136","2003-05-19 22:29:35+00:00","Updated doCommand(14) with new information.
Fixed music bug introduced with fix [712042].
Improved iMuse debug output.

svn-id: r7703
"
"db8256df8a2b28e546cd0eba8b95b26f937a5d01","2003-05-20 01:12:40+00:00","More thorough parameterFade and deferredCommand implementation.
Lot of guesswork. parameterFade STILL NEEDS A LOT OF WORK!
These additions at least partially correct the music behavior
in the Tunnel of Love when shorting the controls.

svn-id: r7704
"
"b5e54031967fbe31fa7a3468e2f83c41b5b16139","2003-05-20 02:33:28+00:00","vc_69 update from Jamieson630

svn-id: r7705
"
"46a0be5ae817d9757630c55d0ef1954b5b634068","2003-05-20 03:27:45+00:00","Fixed regression in XMIDI parsing.

svn-id: r7706
"
"dad6d27b83231c8ade3611d02a1222e52d945b02","2003-05-20 04:03:21+00:00","Revert music play change for Simon 2, since it caused brief tunes between location changes on main map area.
Clean up midi_play

svn-id: r7707
"
"16c2fe1436f83eca6fa88fcbf2b17668bcc964af","2003-05-20 04:09:14+00:00","Opps, that delay change should not have been commited

svn-id: r7708
"
"6b07f4f3973d7b31b200fdd7c9983564432b1e70","2003-05-20 07:26:19+00:00","I broke simon, so revert my last change and added fixmes instead.

svn-id: r7709
"
"99ea509008187eee0c4a36878d9186f225565230","2003-05-20 08:39:03+00:00","output which engines we are building

svn-id: r7710
"
"c2f8a72ccece7c0ef0f2713b5e654bf34d53fdab","2003-05-20 08:49:13+00:00","Add better support for realizePalette_unk(), patch #740321

svn-id: r7711
"
"7e8c4f2660bb37edbb9bd0bce0a752322ad7af0f","2003-05-20 09:25:45+00:00","Update opcode 134, although it never seems to be used

svn-id: r7712
"
"50bcac3a0426c19f19d7330ca1dfb4ebd5c32c44","2003-05-20 09:43:33+00:00","add makefile to test configure with make -f Makefile.new after running configure

svn-id: r7713
"
"ad92ffa06daf023d175a69cd93840b31e33f883a","2003-05-20 10:15:38+00:00","move writing config.h to end of file

svn-id: r7714
"
"79cc9c6a2f4ebd4f0c94a09a5db256c7fa4a9409","2003-05-20 10:24:24+00:00","let config.mak overwrite the default values (defensive coding style :-)

svn-id: r7715
"
"2e8ff540cf75b7096bbdede4a7800a003143b4ac","2003-05-20 10:49:05+00:00","init _paletteDirtyStart/_paletteDirtyEnd to 0

svn-id: r7716
"
"e420517d027ad7d961088a27272eef939bb9e103","2003-05-20 10:56:04+00:00","fixed charset id check

svn-id: r7717
"
"8d1110bfee983ad8e28f67564688eea872d8d4c1","2003-05-20 11:56:36+00:00","init all Bundle members properly; make _voiceFile/_musicFile protected

svn-id: r7718
"
"0f64347b35430390e4a75d6d9d117e7924f800d3","2003-05-20 12:25:11+00:00","replace our 'nice' new which sets memory to 0 with a nasty one which sets it to 0xE7. This should help finding any remaining places where we don't init member variables as we should.

svn-id: r7719
"
"46abb7998f20f857631851ede9505a674fd61d66","2003-05-20 12:25:47+00:00","merged common code

svn-id: r7720
"
"c8169afe2b888ab900a8a9c12822e09998d0c587","2003-05-20 12:54:04+00:00","proper fix for getPathToDestBox

svn-id: r7721
"
"19f77c0381a708ebf53e216312782b6aa44a35bd","2003-05-20 13:05:14+00:00","init member vars

svn-id: r7722
"
"bb9c82ed839a45925349cd67332d03515b2a6976","2003-05-20 13:20:18+00:00","init some member vars

svn-id: r7723
"
"c35ff13a6d9ae2335a3ef82ed7303f0600642024","2003-05-20 13:46:53+00:00","some simon init fixes (needs more)

svn-id: r7724
"
"fc7806b80d7dcae7a58b01d28e272369ef83f6d7","2003-05-20 14:08:33+00:00","more memoy init fixes

svn-id: r7725
"
"d68de1d5e5fcdf226417b0ed6d93392473ad7e06","2003-05-20 14:12:57+00:00","init more simon member vars

svn-id: r7726
"
"7d4442fca5378bc4c813d85f7114885ebe1c8352","2003-05-20 14:17:18+00:00","yet more memoy init fixes

svn-id: r7727
"
"5f068688e92d3429e7a824e29f29fa4f4b67a0ee","2003-05-20 14:34:07+00:00","init even more simon member vars

svn-id: r7728
"
"a67d45249d1182fc34bb16772f527dbdb74c8872","2003-05-20 14:43:22+00:00","and more simon member vars

svn-id: r7729
"
"5e746a188b53b526eeebd802ddd604242609e630","2003-05-20 14:48:24+00:00","init MidiPlayer fully

svn-id: r7730
"
"b2c823b1e10c71328399614ba8724047a5cdb9ff","2003-05-20 14:53:45+00:00","oops

svn-id: r7731
"
"d1391702ea5c8a72ba5935a5c402a64454edc7a9","2003-05-20 14:55:47+00:00","init member vars to 0

svn-id: r7732
"
"9517305332fd6ae9deff3c97895446e19acbbaa4","2003-05-20 15:03:47+00:00","warning -> debug message

svn-id: r7733
"
"5fe08b91910e63450b448689ec2fc733a8b66422","2003-05-20 15:12:33+00:00","init charset data

svn-id: r7734
"
"684cd9c4318dcf6b101cbe68b2b1dbecfb52c1db","2003-05-20 15:13:18+00:00","fixed warning output

svn-id: r7735
"
"22320e8271b99ffb9d7187b52c0c57b554e56d38","2003-05-20 15:17:21+00:00","init SimonSound members

svn-id: r7736
"
"c20a5f8c06278157534a175e2304a5d1319dfd70","2003-05-20 15:37:03+00:00","Minor midi change for Jamieson630

svn-id: r7737
"
"93d29f2f9aa3c951aab75a0ce71af714aebbc54e","2003-05-20 15:41:07+00:00","cleanup

svn-id: r7738
"
"3e3d6f1360332d9bed9fc28a1930b1d033f58138","2003-05-20 16:13:34+00:00","renamed o2_matrixOps -> o2_setBoxFlags; V2 'objY' fixes; cleanup

svn-id: r7739
"
"d60c78c4eb5d28d062618abd93e93ffedde2dedf","2003-05-20 16:24:31+00:00","Switch to ints

svn-id: r7740
"
"fe57d155f876071f395b5476d365d02033b7ff55","2003-05-20 16:36:26+00:00","remove this obsolete FIXME (code is fine as it is)

svn-id: r7741
"
"733326b7275aea3e08afe7604eb8761c11e76d1a","2003-05-20 16:42:25+00:00","Fixed file scan alignment problem

svn-id: r7742
"
"dab0e4308e137e1a82856a9b25575b720d4bd2bb","2003-05-20 16:43:28+00:00","memory init

svn-id: r7743
"
"a768deb83fe38ce879e46339431a8a49d9cf8c73","2003-05-20 16:43:53+00:00","Simon music fixes

svn-id: r7744
"
"e2e23affcf73f8f8186090f0db06fafb29d8fc69","2003-05-20 16:50:16+00:00","Fixed memory overrun problem

svn-id: r7745
"
"c420166f4682027c73966acc886b1f99d03568d3","2003-05-20 17:10:15+00:00","Fix for simon2win music

svn-id: r7746
"
"87c686df5b30a9fa6ea530a1e00eff469762a211","2003-05-20 17:11:39+00:00","-1

svn-id: r7747
"
"14273bad5e82f4af70e1352f3d0f7681ccd2f8d1","2003-05-20 17:23:15+00:00","Fixed buffer allocation problem for GMF resources.
Thanks for wjp for tracking this one down.

svn-id: r7748
"
"1f859e592f278f3fd4746ce4b65b5a12ea0453d5","2003-05-20 17:50:43+00:00","this is 100% equivalent to the old walkActorOld() code - I just made an equivalence transformation (anybody who doesn't believe that, I can show you step by step how to transform the code :-)

svn-id: r7749
"
"ffadd452a91a379c4fc64b2516f20088c056893a","2003-05-20 19:35:40+00:00","got rid of the evil locked-box hack in adjustXYToBeInBox; instead check for locked boxes in walkActorOld, which seems to work just as well (and hopefully better)

svn-id: r7750
"
"b4fd14f2d0482ab4549e3c282048d9830857ef03","2003-05-20 19:37:17+00:00","fixed prefetching bug

svn-id: r7751
"
"410f8b48264ed9fd02f0d18d462d74a67688f9fa","2003-05-20 19:39:32+00:00","a few small changes

svn-id: r7752
"
"1a394aa3c764c8a50def5bb9d8aa1342d962fbdd","2003-05-20 20:42:28+00:00","added enum's for the known actor/object claasses; extended putClass/getClass to translate the X/Y flip classes; made code use the new enum's; some other cleanup

svn-id: r7753
"
"49e7f7564a6d33e0079898cc9584fb69c0fcdcfd","2003-05-20 20:58:26+00:00","renamed various things for clarity

svn-id: r7754
"
"4584cb9616ffa78324544c140ef7fc0ad71744a1","2003-05-20 20:58:59+00:00","Corrections to SMF Type 1 compression to Type 0.
Fixes simon2win title music.

svn-id: r7755
"
"34eee8b33bb1295f1872b8752d904df68133ad4c","2003-05-20 23:05:34+00:00","cleanup

svn-id: r7756
"
"9780fc9c3e5b5866ed131f70ce4146207e910433","2003-05-21 00:40:08+00:00","Fixed thread problem that causes occassional crashes

svn-id: r7757
"
"8860625e4661f9ff5fce469f80144c61a1a26427","2003-05-21 00:44:37+00:00","Various cleanup of Simon music code

svn-id: r7758
"
"27b7c1287e2c712e444b643b46f092c94c42ae58","2003-05-21 00:45:31+00:00","Whoops....

svn-id: r7759
"
"ec46d2f8538aa58eb646f5a543de11072493d3ac","2003-05-21 04:09:20+00:00","Add Zak v2 doSentence fix, patch #740878

svn-id: r7760
"
"9c4a1cf65738863a7f52d7741ccc250bf7975ee8","2003-05-21 04:36:09+00:00","More Simon music fixes

svn-id: r7761
"
"1227a837ec7636fedc3033c890fe8a705b9c8020","2003-05-21 05:03:08+00:00","Update simon 2 issues

svn-id: r7762
"
"98186e59ff483aa7962ee88a80fd071a2c7c0e20","2003-05-21 05:12:04+00:00","Renamed opcodes whose functions are now known.
Cleaned up unused script variables.
Miscellaneous semantic changes.

svn-id: r7763
"
"f964fc1861b7bab1f9e3512b4eaa7f57ea6800f1","2003-05-21 05:17:48+00:00","Credit Stuart Caie

svn-id: r7764
"
"ff79f10160213ec8ebcee6bf34ac9c53c1260db3","2003-05-21 05:26:29+00:00","Fixed Simon 1 sound effects.
More semantic fixes.

svn-id: r7765
"
"336e661c36bbf292f18ad1580fe9f422a16fc7f9","2003-05-21 06:00:16+00:00","Hacky zak sentence/inventory drawing (rewrite later on)

svn-id: r7766
"
"9986605c4652ef36d655d8d548e9927a86794a11","2003-05-21 06:13:47+00:00","More Simon music fixes.

svn-id: r7767
"
"a318beaa180bb98b49b9023e3eb0ed83fb3e7800","2003-05-21 06:14:02+00:00","Attempt to fix some stuff

svn-id: r7768
"
"622e3578b4e21927c03311c67d6bdbcbba17e9a6","2003-05-21 06:14:14+00:00","More Simon music fixes

svn-id: r7769
"
"510fcf5d8838cbad2629cde40974c69e2cf3717e","2003-05-21 06:18:30+00:00","Hack more stuff in :P

svn-id: r7770
"
"b6dcd5cfae37304c2aff15acf320a0ac0d69a876","2003-05-21 07:13:52+00:00","don't error out here to prevent a crash, is the check in softUserputon actually valid here?

svn-id: r7771
"
"c3803009b42e79c3f72f4abaf0b5e3ed668f75d2","2003-05-21 07:22:43+00:00","Fix this damn userface stuff properly :)

svn-id: r7772
"
"5fae10f57375f0506e47fa6a739c46c880c9307d","2003-05-21 07:39:41+00:00","add midiparser, rearrange segments

svn-id: r7773
"
"0096df9737affd13269693a9f54659299771e252","2003-05-21 07:49:41+00:00","Remove warning

svn-id: r7774
"
"0c0cb618769afe273f9935ae4404d6a4ca08723d","2003-05-21 09:29:24+00:00","Move stuff around

svn-id: r7775
"
"60ac300bf3982d3f7ae34521e93918215fb7f4a8","2003-05-21 10:13:06+00:00","Work on V2 inventory hack a little more

svn-id: r7776
"
"280e8a0741a473c1b9a881d5ee9e4d4854d24742","2003-05-21 10:38:45+00:00","make fingolfin happy :)

svn-id: r7777
"
"1d916f2056b3bc27ad9c78f970b4f2f959bd0401","2003-05-21 11:22:03+00:00","fix warnings

svn-id: r7778
"
"c062b734222587763f2a84754006a4ba77421c66","2003-05-21 11:23:53+00:00","fixed warning

svn-id: r7779
"
"1294eb35c773c195633474dc2fbb8812f4b949a6","2003-05-21 11:49:41+00:00","Set midi vars to -1 by default to prevent simon2dos trying to load music during copy protection
Correct vc_62 so it is closer to diasm.

svn-id: r7780
"
"e21604663fa71426bef8fad528626a4ef17d131a","2003-05-21 14:00:19+00:00","added v2 cutscene support (not quite complete; and crashes at some point in maniac because VAR_EGO contains a bogus value); cleanup

svn-id: r7781
"
"743d9da78d1cc5f0b4b1fdb2d83fec91e8616913","2003-05-21 14:25:14+00:00","evil bug in V2 bitvar code fixed -> no more MM cutscene skip crash

svn-id: r7782
"
"9615441ded6f2df4ca789a078512acfa70da3758","2003-05-21 14:25:50+00:00","uhm... less noisy, please :-)

svn-id: r7783
"
"f0b12ebfa99e093150a1e02709f4ce5ca4204fff","2003-05-21 15:47:51+00:00","more Simon member var init (that should be all now, I hope)

svn-id: r7784
"
"9fb601cd3fa5c869a50c2e7ac8fca1a450e8487c","2003-05-21 16:07:39+00:00","silence 'Unknown MIDI effect' warning in Simon2

svn-id: r7785
"
"4fb4626ac99eed69c86afd94371c5784f2ede61a","2003-05-21 16:18:41+00:00","Variable initializations in SliderWidget

svn-id: r7786
"
"8a82e59065433e679958feb864208db0bba0f354","2003-05-21 16:28:02+00:00","constness fixes

svn-id: r7787
"
"72d6179c470fc99a05942110fe5338f7b42181dc","2003-05-21 16:48:25+00:00","fixed ltrim/rtrim

svn-id: r7788
"
"24005adfd0aa31373332cdd7d0a45c8a0627e3d7","2003-05-21 16:59:51+00:00","pedantic fixes

svn-id: r7789
"
"1a6d64675455fcadee61297cebcf6083c3a76b84","2003-05-21 17:00:00+00:00","more pedantic changes

svn-id: r7790
"
"ffac2da5aa824fb67ffa48957a5aedae919bce92","2003-05-21 17:29:51+00:00","added fixme comment

svn-id: r7791
"
"b4c94e4aee28fe46165bf3b153e85b78a487ef9b","2003-05-21 17:33:32+00:00","pedantic warning fix

svn-id: r7792
"
"c24df81f782a4d9c5651df3e2fe4bd302e1e4d5b","2003-05-21 17:34:01+00:00","Fixed VC++ warning

svn-id: r7793
"
"11d29b71ab4400e6e732ba7cd49a343150360eaf","2003-05-21 17:49:33+00:00","pedantic warning fixes

svn-id: r7794
"
"86d57f3c7af8fd0d4c6a4d1751ccdaac77c3b2e8","2003-05-21 18:09:49+00:00","many pedantic warning fixes (and some actual potential buglets fixed, too)

svn-id: r7795
"
"cc2f0e634345ccc67792c825904695635336c8bb","2003-05-21 18:16:01+00:00","yet more pedantic warning fixes

svn-id: r7796
"
"c78230bf47fb0b4151e4f394fc28ef3957d3ded5","2003-05-21 18:45:58+00:00","pedantic fixes (little endian version)

svn-id: r7798
"
"e5152405da0ff6facd7b59004b835d88f88d4025","2003-05-21 18:53:00+00:00","fixed V2 entry script dumping

svn-id: r7799
"
"48a27e94e6212233f9eb9a2197b1fa51f8c11839","2003-05-21 18:58:29+00:00","fix verb 250 is mapped to 253 in V2, with the 'recursive' flag set

svn-id: r7800
"
"2dcd2531cf836f6896d0faa0cdae3d27286a0720","2003-05-21 19:33:50+00:00","Integrated VolumeFader into each Player

svn-id: r7801
"
"2f01855ed5e110299c03e8d36a3485cc53f5727f","2003-05-21 20:20:20+00:00","pedantic warning fixes

svn-id: r7802
"
"38fc644cf69a99c216599e337ae4855f27666be9","2003-05-21 20:23:01+00:00","Replaced VolumeFader with more generic ParameterFader

svn-id: r7803
"
"4a322125fd3ef8a120f7a71c29eee680c2ec3708","2003-05-21 20:34:21+00:00","turn off lots of silly debug output ;-)

svn-id: r7804
"
"373679473724d9497bfaef6082883ea855176335","2003-05-21 20:35:48+00:00","don't inline free_check to make debugging easier

svn-id: r7805
"
"d61ee38b235a71b7ec91350bbce18cd3a1dfcd85","2003-05-21 20:45:59+00:00","fix #define

svn-id: r7806
"
"c394046d663ead797007fc5096bb5c6306db6e2e","2003-05-21 21:01:12+00:00","initialise some vars

svn-id: r7807
"
"2612a8f8170bb38e86e44b6ec67d1e064bc53dea","2003-05-21 21:38:03+00:00","Added ParameterFader into savegame format.
Savegames are now version 17 (VER_V17).

svn-id: r7808
"
"85e92f4fae6393b62824496edbcb7ddfee639246","2003-05-21 21:41:27+00:00","cutscene override fix for V3 games (bug #731985)

svn-id: r7809
"
"b958c0a0024e449ed897e22d37b670ddfb1f61da","2003-05-21 23:46:02+00:00","add in preposition to dual verbs (e.g. 'give'); put in hard coded key codes for V2 verbs

svn-id: r7810
"
"b12d741ac118eabbdbe7e38383933e0337fc002a","2003-05-21 23:54:39+00:00","cleaned up V2 input code

svn-id: r7811
"
"3b08208879e8abfd138bae444668d288b5b2b89a","2003-05-22 00:00:42+00:00","Fixed premature music load in Simon 2

svn-id: r7812
"
"b2f4c34c01f15d8f0c1f95fd3c80993757c0e64d","2003-05-22 00:06:24+00:00","Reset channel volumes on load

svn-id: r7813
"
"340f3a650e9188217f827e7282eb6c9cc8664c8f","2003-05-22 00:14:28+00:00","fix o2_getObjUnknown -> fixes 'use' verb

svn-id: r7814
"
"f43fb0dab8c9f91d9490ab742c1e65015d5bf00e","2003-05-22 00:51:42+00:00","freeze scripts & hide mouse during cutscenes; addde Actor::isPlayer method that should work in V2, too; fixed o2_walkActorToObject

svn-id: r7815
"
"19bbee78433f41bf01db2e894d8a04b117ffb4c5","2003-05-22 05:21:48+00:00","Fix V2 userface stuff in savestate

svn-id: r7816
"
"573678abc02ff9684a364e50134d23cd231105d2","2003-05-22 05:44:18+00:00","V2 Inventory scrolling, etc

svn-id: r7817
"
"061228688e32d2f25bb2960eebb6f8163f19631b","2003-05-22 09:52:21+00:00","fix V2 actor initial mouth's (they were missing)

svn-id: r7818
"
"c78664cbc9086ed19b89b5e2810e9457ef473894","2003-05-22 09:58:33+00:00","renamed talkFrame1/talkFrame2 to talkStartFrame/talkStopFrame

svn-id: r7819
"
"478b62ce45898ba9d156ead91bb90dd3a757d864","2003-05-22 10:06:39+00:00","Simon debug output name update

svn-id: r7820
"
"a7a063bd737ecd316bded99bb895d7c543584207","2003-05-22 10:21:05+00:00","MAke debug output a little easier to read, a few corrections

svn-id: r7821
"
"a5be83b3529aab3cd9d73cb1f50f27f4029de668","2003-05-22 10:40:49+00:00","fixed meteor animation in MM (and probably others in MM and Zak)

svn-id: r7822
"
"aafa8c072217cfe5cef3f8dda25e8812780b49be","2003-05-22 11:40:20+00:00","make drawSentence not crash on us

svn-id: r7823
"
"766b7856afb3b673f4c8f7a76847f855d66e9e8c","2003-05-22 12:30:19+00:00","Fix sentence building

svn-id: r7824
"
"552f9fad615ba5019b8e0a9d1728bb7561ee5cc2","2003-05-22 13:18:54+00:00","small V2 doSentence tweak

svn-id: r7825
"
"711c6989480d76c1d9ca3e2139e3afca68561ca8","2003-05-22 13:57:34+00:00","fixed o2_ifClassOfIs

svn-id: r7826
"
"a9788c771a58d0e1f3093d56a0fde7b9e7844164","2003-05-22 14:10:20+00:00","from the MM/Zak scripts, the code etc. it's clear that unk2 is the sentence preposition

svn-id: r7827
"
"a6c8b58045e4f2de019fcadc951a344b5b2c5a99","2003-05-22 14:22:35+00:00","endian fix

svn-id: r7828
"
"871df7fb57d18ec72e787cf3cbb9c719a386eaee","2003-05-22 15:27:44+00:00","restricted getObjectIndex to only search thru _objs, not _inventory(to avoid future confusion), this might cause regressions, though; fixed o2_getObjPreposition; adapted some code to the changed getObjectIndex

svn-id: r7829
"
"10fad2635a88db971dfac9d22961e2a99e890f20","2003-05-22 15:30:27+00:00","not needed anymore since we read the preposition flag directly from the obcd data again

svn-id: r7830
"
"1918dc555f122cb21e6e158b1377e19c5e84ab13","2003-05-22 15:34:30+00:00","Added 'smart-jump' capability to MidiParser.

svn-id: r7831
"
"3c0fdf99172b084f750e2ce4405a5725b6e275ef","2003-05-22 16:15:48+00:00","Separated IMuse Player into its own file

svn-id: r7832
"
"789d904c4c9b423fc862b64af8bba0687844b844","2003-05-22 16:23:05+00:00","Added new module to project files

svn-id: r7833
"
"c152233f80e90e2f54b8a5a558be9d777046f152","2003-05-22 21:24:36+00:00","get rid of some tables

svn-id: r7834
"
"1383ccbdbe0de2a7777c9d8b5d786d7b8a48b67e","2003-05-22 21:34:20+00:00","make sure that the mutex protects everything that affects the buffer

svn-id: r7835
"
"2b13ad92e4f21f5d91c2bb711b8ec12aea3ca5da","2003-05-22 22:42:44+00:00","fixed Zak cashcard

svn-id: r7836
"
"b084e13431e1d4da95b8501dea1d9d6a6ddf3b64","2003-05-22 23:01:25+00:00","fixed more V2 clear/set state opcodes

svn-id: r7837
"
"beb42d72818055044c14e7345df2d19ab47583c5","2003-05-22 23:45:34+00:00","oops, swapped set/clear state 2

svn-id: r7838
"
"47246c35b316adcdba95ec98b0552a895a988eb4","2003-05-23 00:04:17+00:00","this fixme doesn't seem to be needed anymore

svn-id: r7839
"
"edf5946c408efebda37d37b4814822fb9578b141","2003-05-23 00:22:41+00:00","some well placed asserts (triggering any of those means with 99% a bug in some other place; so don't just remove the asserts if you trigger one of 'em!

svn-id: r7840
"
"4fc70168b44a5703b56302fd62cf09d3e668ba7b","2003-05-23 00:52:31+00:00","o5_walkActorToActor cleanup, and fixed for V2

svn-id: r7841
"
"9e588830097e7a1c3d5371296885094a8ac5107c","2003-05-23 00:59:46+00:00","added two more redrawV2Inventory invocations; removed calls to runHook (it does nothing in V2)

svn-id: r7842
"
"ddd0b6aa69f3ab8c24e9cd8ea31ac967b0118fda","2003-05-23 01:14:29+00:00","fixed butterknife + cashcard

svn-id: r7843
"
"1740bfcee3be5c796a6fd1fdaf848686602c09f3","2003-05-23 01:32:15+00:00","added tons of asserts; added warnings for other cases where we so far silently ignored invalid actors; replaced a few of such warnings with asserts (if they are needed somewhere, feel free to re-add them, but this time with a comment explaining *why* - i.e. bug id, or explanation on how to reproduce the problem)

svn-id: r7844
"
"cafb78a83cd2a943b71f05638b682dfa8bc31a66","2003-05-23 01:33:43+00:00","v2 fix for o5_getDist (thx segra)

svn-id: r7845
"
"a0a096e2e8f5e308ce30fc05398d5a6ce889e37a","2003-05-23 02:58:34+00:00","added support in the save/load system for 2 dimensional arrays; used this for save/load of localvars -> this fixes many old save games, and allows us to be future compatible

svn-id: r7846
"
"bb1894e3b7965d76782b090ba9a253e4905a0cbc","2003-05-23 03:34:18+00:00","Fixed VC++ warnings

svn-id: r7847
"
"006d0a5ff81771f8387f13187675601fd52e2668","2003-05-23 04:16:37+00:00","Removed invalid timer rate

svn-id: r7848
"
"c6568530bd6d558045c912c6318d1d7d8a60a39d","2003-05-23 04:19:47+00:00","Revamped iMuse and Player classes. Player now uses MidiParser to parse its data, which will allow it to parse other MIDI formats. To receive parsed data, Player now derives from MidiDriver to act as a 'fake MIDI driver'.

Miscellaneous upgrades and fixes to MidiParser, including the Smart Jump (which could not be tested before iMuse started making use of the MidiParser).

*** THIS IS A BIG UPGRADE! EXTENSIVE REGRESSION TESTING IS NEEDED! ***

This has been tested through the intros and a number of other scenes from MI2, FOA and S&M.

NOTE! This upgrade introduces savegame format version V19. Earlier version savegames will load, but the music will simply start over from the beginning. Only V19 and later games will properly restore the position of the music! Don't say you weren't warned....

svn-id: r7849
"
"08b5337b207599cff6214cc5a61196583a7c7434","2003-05-23 04:30:50+00:00","Fixed gcc warning

svn-id: r7850
"
"0be2b4673c27910fd1bbb0e25bf6179b4f0a9a10","2003-05-23 04:35:50+00:00","Removed annoying warning

svn-id: r7851
"
"c9e5988e43913e347a5fe800b460161d0ec865ec","2003-05-23 04:47:47+00:00","Fixed PPQN for old 'AD' music resources

svn-id: r7852
"
"7bcdf0d5688d55cfebbc464bace906cc10fb4d03","2003-05-23 04:54:45+00:00","Fixed tempo problems in Simon games

svn-id: r7853
"
"73c6cf8bc9601347ec364e6549fa1794925748e5","2003-05-23 06:35:47+00:00","Patch #742132: o2_setobjectname script overwrite fix

svn-id: r7854
"
"ade97e9fe2272c8b094adf4c253f934db8b08b86","2003-05-23 11:06:19+00:00","_lock_counter controls seems to control whether mouse cursor should be shown but not sure what the default value should be

svn-id: r7855
"
"bdaefa6727c645db5e64d5b32db29321d2b0b010","2003-05-23 12:07:36+00:00","don't hardcode 9 but rather use the default actor talk color as given in the (v2) bootscript

svn-id: r7856
"
"f802c2a7ba65e5625d9946aa8c42dd40127c2fee","2003-05-23 12:08:36+00:00","clarified / tightened the o5_actorSet hack for actor 0 (it seems to be there for the same reasons as in V2: only to set a default actor talk color)

svn-id: r7857
"
"28eade1da4e1811a230feb6c30d3abcf31deb0c2","2003-05-23 12:48:50+00:00","when iterating from 1 to _numActors over all actors, use _actors[] directly instead of derefActor() (unnecessary overhead); added range check to derefActor, and error out if invalid actor is accessed

svn-id: r7858
"
"c333b6d6ecb062ec18a36c09ef94c1098b38905d","2003-05-23 13:24:41+00:00","replaced many unsafe uses of derefActorSafe by derefActor; replaced derefActorSafe/assert pairs by derefActor (gives better error message); replaced various derefActorSafe/if(a!=0) pairs by derefActor (in cases where the deref should never fail, ever, except due to a bug in ScummVM)

svn-id: r7859
"
"94f0b7f4a72a3d6439f752bb893de74dbada9119","2003-05-23 13:42:12+00:00","some more derefActorSafe -> derefActor changes; found out why in COMI o6_getActorRoom is called with param 0

svn-id: r7860
"
"4c531d373b4db5f84932da3a9958fd101874579c","2003-05-23 13:45:45+00:00","Fixed VC++ warning

svn-id: r7861
"
"4c0f8eda9ac1256920fec5794230c447402af11c","2003-05-23 14:27:53+00:00","I must have been drunk when I coded this....

svn-id: r7862
"
"982883c6371133dca8c861391a07920a9a96c2ff","2003-05-23 15:04:41+00:00","Fixed problem with hanging notes on some synth modules.
Various little MidiParser fixes.

svn-id: r7863
"
"790b2e1e9a9b4b63fcf63b19428661d08fddd998","2003-05-23 15:14:44+00:00","Fixed problem with Simon music playing even when paused.

svn-id: r7864
"
"e52ca34bb4d4448ecaddda95a6241da877023e67","2003-05-23 15:27:08+00:00","Fixed hanging notes when toggling SFX mode in Simon 1

svn-id: r7865
"
"8feba0dfaffc86140e03e2c6f8e633d3f74c9a33","2003-05-23 15:48:07+00:00","cleanup

svn-id: r7866
"
"0439e0fe5873f746e6dd7f942d9a6be1a209db30","2003-05-23 16:47:45+00:00","fixed nasty deadlock I recently introduced

svn-id: r7867
"
"ad4eb360930972a00b8648173045b5d25def0883","2003-05-23 17:01:35+00:00","oops, fixed ScummVM::Rect constructor (this fixes various string redraw bugs)

svn-id: r7868
"
"eb09051517e61b986f8d879e66e6f907a705729e","2003-05-23 18:35:53+00:00","Added XMIDI support to IMuse. IMuse now plays music from Humongous games.

Added some IMuse property options to support some assumptions that seem to be made by Humongous games.

This is still preliminary. It will play music, and it will switch between songs. But I don't know if it's switching to the right song at the right time.

svn-id: r7869
"
"0361f5a6c0d039b3ec179644781e2532ef749267","2003-05-23 23:24:48+00:00","bypass for Zak256 copy protection (can't test this right now, though)

svn-id: r7870
"
"c8276b46842197b8d0abccc5713d76fc128df57f","2003-05-24 01:20:50+00:00","returning 1 instead of the id is the correct behaviour I believe, but the scripts check for a 0 result so either will work. I'm just picky :)

svn-id: r7871
"
"aacbaac131af433234c4b73fe95446d208eca9df","2003-05-24 01:26:05+00:00","Added support for simultaneous music and MIDI sound effects to simon1dos.
Note that 's' still toggles MIDI sound effects on and off.

svn-id: r7872
"
"bcdf2286f8d877efbb2f7d5434b5e228e150d808","2003-05-24 01:42:57+00:00","Fixed problem with hanging notes when switching music tracks

svn-id: r7873
"
"1b4b6030fedf0fde1431e2e53d03a97caade4005","2003-05-24 03:10:14+00:00","Added support for GMF loop specifier

svn-id: r7874
"
"e23f76b74277dd625ca67048c5ad95095d495cdd","2003-05-24 03:26:12+00:00","Hack to prevent bad music looping at end of simon1win

svn-id: r7875
"
"cd37b391b2a9c46c5cecb4f1b9662b4fb7f8bbb7","2003-05-24 03:51:33+00:00","Correct fixme comment

svn-id: r7876
"
"807f3e1e865162b43a991967c2aca0b14c7fd8a5","2003-05-24 03:55:37+00:00","Fixed MIDI channel conflict between music and MIDI sound effects in simon1dos.
Also added notes about the GMF header for posterity's sake.

svn-id: r7877
"
"bc5511c51447f5d1122adc0016aa8d8bced73ea6","2003-05-24 04:39:47+00:00","Fixed hanging notes when switching tracks

svn-id: r7878
"
"3fbae51dc06d60e453fa90b79c0af8eb983bc5c9","2003-05-24 07:55:53+00:00","Small cleanup

svn-id: r7879
"
"7febca050b407c4d35dcdfcfd6b68ff973f1bb59","2003-05-24 09:05:25+00:00","Remove a few old asserts and xxx which was not needed

svn-id: r7880
"
"fa33a173ac6ddcb0ffe3123fb3c721138af183b9","2003-05-24 10:01:24+00:00","Missed one line

svn-id: r7881
"
"9b0e0d14dbcc1dde7b39ae19402ac7ba1d3da20a","2003-05-24 10:39:13+00:00","we want a word not a byte for object numbers, bug pointed out by Hoenicke

svn-id: r7882
"
"e95d717fb16ad880d631b796e12c658377b54323","2003-05-24 12:13:23+00:00","A few function renames

svn-id: r7883
"
"13739f18ef6c637799fc5f466f7d3f132268c0df","2003-05-24 12:26:28+00:00","More renames

svn-id: r7884
"
"cf290567688813a41efdff79807b6dc072820929","2003-05-24 12:28:56+00:00","Typo

svn-id: r7885
"
"84195fe444fefcc115dcbe30f6f382f36a190e2f","2003-05-24 13:05:56+00:00","Add some extra code for simon1dos/talkie, doesn't seem to function yet though

svn-id: r7886
"
"0ffc4fe7da881e2bbe7b99103f253ff1fd102ada","2003-05-24 16:00:18+00:00","Fix for bug [742688] FOA: Missing music at Sophia's lecture.
Added check for 0-length parameter fades, just in case.

svn-id: r7887
"
"ac3f8719105d32d8b63eb501a9eda98b36df5212","2003-05-24 16:02:07+00:00","some more debug output

svn-id: r7888
"
"41df21ed6b898286759510c9b5239213b48abf41","2003-05-24 16:09:29+00:00","temporary work around for bug #742676 (game won't exit anymore, but behaviour is incorrect)

svn-id: r7889
"
"07df5bd181efe00c6a7341bd3fdc74239080b057","2003-05-24 16:11:47+00:00","cleanup / minor tweak

svn-id: r7890
"
"f75c148c8ca02ddd176c5251cc2b06ca0844ac85","2003-05-24 16:45:49+00:00","corrected FIXME

svn-id: r7891
"
"2efa2e1c6712b8b848e4066af6da760756d31d43","2003-05-24 17:04:54+00:00","cleanup

svn-id: r7892
"
"7bc1399e007b3c9f81d0cebaa7eb7e8bb4b8e407","2003-05-24 17:07:50+00:00","this change seems to be 'logical', but could be wrong; would be nice to check the assembly...

svn-id: r7893
"
"9d95b025cd5ad3e6b187fa08b2433b3962e13304","2003-05-24 17:18:23+00:00","fixed roomOps:1 (thanks to Hoenicke)

svn-id: r7894
"
"d7573468aaabd2fd396542442e05c0df8004d97e","2003-05-24 18:24:39+00:00","off by one. *sigh*

svn-id: r7895
"
"afda37693f0ca8a764c8ea80aef29ca2e83b0ebb","2003-05-24 18:25:09+00:00","fix compact

svn-id: r7896
"
"14dd35b9763a9bbee4470825ee871179cd4e8493","2003-05-24 18:48:43+00:00","added some more functions

svn-id: r7897
"
"d7bc94e810942fc50fcafed74a9610754644576c","2003-05-24 18:56:19+00:00","add fnInteract

svn-id: r7898
"
"f8e9e55fba537f587b4e756ae2eb5b2c16601957","2003-05-24 19:11:49+00:00","allNotesOff() now sends to all 16 channels, not just the first 15. Duh.

svn-id: r7899
"
"30affb5fbc846925952be07ce12617b4e825d36d","2003-05-24 19:20:52+00:00","Various iMuse cleanup

svn-id: r7900
"
"34162afd9e27d6d8d9bbf9b1131fa987283b7bba","2003-05-24 19:43:20+00:00","Removed more unnecessary code

svn-id: r7901
"
"66c253368132d6623205aedfb4c65ae2d9d055a3","2003-05-24 19:50:34+00:00","Possible fix for hanging notes in iMuse

svn-id: r7902
"
"0768f103ea820e3d24787ef95906a2e44559456a","2003-05-24 19:51:29+00:00","Put the comment back on IMUSE_DEBUG. Duh.

svn-id: r7903
"
"41a9cd8ac4f6f70d8957cb845a55c3104cc57575","2003-05-24 21:33:54+00:00","fixed flashlight oddities in Zak256

svn-id: r7904
"
"24d9eb4ddb55c2876583f2e66b1c35234c59deea","2003-05-24 21:40:17+00:00","fix EVIL bug

svn-id: r7905
"
"1457f95ec8c8151f4e2a8cbd1d4ef64b42fc01b6","2003-05-24 21:52:35+00:00","add some more functions

svn-id: r7906
"
"4cda099c575e15ff68239746f3b2076b1aad432f","2003-05-24 22:13:01+00:00","don't use _gameDataPath directly; minor cleanup

svn-id: r7907
"
"0384d27e83f2943279b8350bef8ddc82619b1eee","2003-05-24 22:17:45+00:00","(somewhat hackish) support for COMI CD changing on Mac OS X; reordered stuff in scumm.h

svn-id: r7908
"
"3fda1e4a7c179f08982e3ff1f082bbece7cee988","2003-05-24 22:22:23+00:00","and some more functions

svn-id: r7909
"
"684b7288f3bda1b8193fbabb11ef53fe2db34111","2003-05-24 22:42:26+00:00","change behaviour for loading save games from the command line so that if you load a COMI save game from disk 2, you don't have to first insert disk 1

svn-id: r7910
"
"fcb5cf36c98655b7c02d00c4aa68cf89f0928198","2003-05-24 22:56:24+00:00","updated NEWS a bit

svn-id: r7911
"
"0d2ddf238103a1bc8948900c75e77bf444414207","2003-05-24 23:08:03+00:00","work around for comi script calling o6_getActorRoom(255)

svn-id: r7912
"
"35b362495e75abaf28825ef9e3f19f7b00c2680c","2003-05-24 23:17:12+00:00","and a little bit more...

svn-id: r7913
"
"0bd1f1d958933966b5923baa2e20a3abaa8d6ac0","2003-05-24 23:21:08+00:00","er oops

svn-id: r7914
"
"9fe94049f31d93ad6f1f4c91f88eb9bd1499b1a5","2003-05-24 23:27:24+00:00","fix VC warnings

svn-id: r7915
"
"8bcdbed35a604fe7fcde6bad598249b2a0aadc3f","2003-05-24 23:32:09+00:00","corrected NEWS

svn-id: r7916
"
"d356ba445271de59d91559e1abebe7a80907db36","2003-05-24 23:39:40+00:00","simplified addIntToStack a bit *cough*; added experimental code for the message opcode 7 in V2 codes (see also patch #742851)

svn-id: r7917
"
"cb76f85ca608a6071b13e327ab458d8ef64f7dc9","2003-05-24 23:51:57+00:00","correction for zak256 SFX

svn-id: r7918
"
"95b7e01548640629736294d72c3ccc90be1c54e0","2003-05-25 00:04:16+00:00","cleanup

svn-id: r7919
"
"54835862fbeccbd17cfb768e2a53d9b13efffa8f","2003-05-25 00:30:48+00:00","cleanup

svn-id: r7920
"
"9ba6f4b43238f8f24f7fbbdf3545d16e9447553b","2003-05-25 00:47:36+00:00","made more stuff protected

svn-id: r7921
"
"45a2148d98e7aa13b1ad2bd61ec86ea908cc9f64","2003-05-25 01:42:53+00:00","Possible fix for [742962] MI1VGA - Crash at Scumm Bar.
Fixes End of Track that is rewritten from 'AD' resource.

svn-id: r7922
"
"4c09e5472f5dfde8947a62e8d8bc074655e2ecd6","2003-05-25 01:48:59+00:00","Finishing the fix

svn-id: r7923
"
"2824acd4edfe830b90a6030e80939837cca0cb17","2003-05-25 02:02:37+00:00","Corrected target loopback point for 'AD' conversion

svn-id: r7924
"
"6cb28e3d57b2dbcc88d0a0911ab21f15dab19738","2003-05-25 02:30:55+00:00","Add back simon2dos/talkie freeze bug

svn-id: r7925
"
"be93277b65f38563f03fa9cc1cb8e6e33385c19e","2003-05-25 03:03:40+00:00","Add a few warnings and todos to simon1cd32

svn-id: r7926
"
"6cb01ce15c5cd120c041d607e17fddaba769c759","2003-05-25 03:19:21+00:00","Added music support for simon1demo

svn-id: r7927
"
"64e66a4500c7a15fb785b8e1db7fda9f09c24d67","2003-05-25 03:28:10+00:00","Added new Simon module

svn-id: r7928
"
"3e6cf177444452e0504ce1c5d846b3ae13aa6ea8","2003-05-25 03:31:01+00:00","Small midi cleanup

svn-id: r7929
"
"d81f7ce7598109067d0d0f3221f9b499f35bacaa","2003-05-25 03:35:20+00:00","Add newloine at EOF

svn-id: r7930
"
"9151ff2636642253e6bdd5fb496a9bf1d18b90b4","2003-05-25 10:14:21+00:00","fixed format string

svn-id: r7931
"
"8d7fe6febc802997b2e531040fba1c6e69f34a36","2003-05-25 11:02:39+00:00","Split charset functions into separate file

svn-id: r7932
"
"35877f0d30b4846e6633ffae8035467c3e7af9f2","2003-05-25 11:18:57+00:00","workaround bug #742979

svn-id: r7933
"
"467666d0fd2b21c1883d89c7a3ffba04feb12203","2003-05-25 11:36:11+00:00","not sure if this is right, but the original code doesn't exclude the possibility

svn-id: r7934
"
"80df4a8a00e7c42edfff351c5e793a3498453ec2","2003-05-25 11:39:08+00:00","renamed ContChunk -> MemoryChunk; avoid code duplication by introducing BaseChunk

svn-id: r7935
"
"d3acda91f637346a878a5ccf3e3936604e9ebe2b","2003-05-25 11:45:04+00:00","add one more function. now it runs for minutes and minutes...

svn-id: r7936
"
"6bcf19b62d537945adcbf9069904942e0e13d913","2003-05-25 11:52:30+00:00","brutally remove all o6_kernelSetFunctions subop stubs - we need to find out the places where they are actually called, and with how many params, if we ever want to implement them

svn-id: r7937
"
"e827a569d2cb7936bd01b349e788fabd5c244f41","2003-05-25 11:53:42+00:00","some sane default values for speedx/speedy (shouldn't matter, though, as script usually set those early)

svn-id: r7938
"
"9b70fee5f39d02b3ea99c9aef4519f00ea433a58","2003-05-25 12:08:01+00:00","changed scaler proc signature so that srcPtr is const (this can help optimizer by simplifying aliasing detection; thanks to Bertrand Augereau for pointing this out)

svn-id: r7939
"
"835b4e9476bb70e0cedc0a7c26e993302be34e3a","2003-05-25 12:28:38+00:00","cvs going to 0.4.2cvs

svn-id: r7946
"
"19a01c3e848ee165abf33b6bef696d88c6c59321","2003-05-25 12:29:29+00:00","Fixed VC++ warning

svn-id: r7947
"
"e932e54b785086565359d6cebc38b8bd7cf8bac5","2003-05-25 12:35:17+00:00","Split charset functions into separate file

svn-id: r7948
"
"95b33c422c04c27ffb313f0c830981e095c50372","2003-05-25 12:40:53+00:00","oops

svn-id: r7950
"
"b8eb799862eada7ccef22327983fbe80ba744b17","2003-05-25 13:02:44+00:00","typo

svn-id: r7951
"
"6212e21d03e7fc9d10238d94c66a88e8fb2c8528","2003-05-25 13:07:22+00:00","alpha order

svn-id: r7953
"
"7d8729874f2d3cc4a3553b4389b577652a991039","2003-05-25 14:36:33+00:00","add some stuff/cleanup

svn-id: r7955
"
"eba043584b29049014333020ea709513f7c8322c","2003-05-25 15:11:01+00:00","small corrections

svn-id: r7956
"
"48f277e65d42c725163aa7516aae529fd94255f0","2003-05-25 15:41:48+00:00","cleanup/prevent _compact from being overwritten by possible recalls of the interpreter

svn-id: r7958
"
"11e59488ef4dcdd5931e926e45fcaaec4624793f","2003-05-25 15:47:06+00:00","Fixed occassional music crashes when loading games.
Thanks to eriktorbjorn for finding this issue.

svn-id: r7959
"
"cd1493447dc02baa3148ff412f070e6e65e6161d","2003-05-25 16:09:26+00:00","Some additional warnings

svn-id: r7960
"
"9d53046039c38d8c562a8f211929a01eb771d054","2003-05-25 16:21:55+00:00","Fixed music starting at incorrect location when loading game

svn-id: r7961
"
"991b2997d4600bf6fa4c564733bbabd9cea50716","2003-05-25 16:40:17+00:00","More cleanup, plus more crash-aversion fixes.
Restored the -t command line option that had gotten lost in the revamp.

svn-id: r7962
"
"0a7d73d15b370b1a880a693daa955948bcbc190c","2003-05-25 18:46:46+00:00","update spec to match tarball dir naming conventions

svn-id: r7965
"
"30d9dde76cc76df58b63be12c299e0ab0738c419","2003-05-25 18:56:20+00:00","preparations for multi-language V2 supports

svn-id: r7966
"
"b797a34526d3bb021b07b74b5881b7279cec8dca","2003-05-25 20:21:28+00:00","fixed V2 font decoder; added french V2 font

svn-id: r7967
"
"829c666a8ade1df1db67db4e869ff6eb52b0aefd","2003-05-25 20:32:29+00:00","implement some random functions

svn-id: r7968
"
"fb0b37c69bfd2c4525e0bd092355dda6643ac51a","2003-05-25 20:37:19+00:00","fix last commit

svn-id: r7969
"
"80eab4c3c48a4291b68918838d543ed98b13ea9c","2003-05-25 20:38:44+00:00","hook language command switch to V2 font / prepositions

svn-id: r7970
"
"0eb2d798d476d2832a605f04de729e7835019bde","2003-05-25 21:32:11+00:00","Fixed undefined file read operation

svn-id: r7971
"
"6e94d895be47b7f11732286190d5b0db117ebe63","2003-05-25 21:38:51+00:00","added some more random functions

svn-id: r7972
"
"deb5e04a8725dedc5d29d256ea0f18d2ad9f377f","2003-05-25 21:43:16+00:00","removed obsolete code

svn-id: r7973
"
"867e42c6fa58c55da6e16f04db4741f2e821123e","2003-05-25 21:54:01+00:00","optimized GetResult, based on code by Bertrand Augereau

svn-id: r7974
"
"35f8c2202f6118b092fc8cde3251a6ff6b74aca2","2003-05-25 22:01:19+00:00","cleanup / added some more const qualifiers

svn-id: r7975
"
"a9b85bf468dc87183b06576dc70909180df30a1d","2003-05-25 22:03:27+00:00","Fixed VC++ warning

svn-id: r7976
"
"6cc06cb103a4fc97a626d3bbc24c947f6b1a0d08","2003-05-25 22:05:09+00:00","add some more random functions

svn-id: r7977
"
"910bdb5068e010dc12daeb13a5b2829e44a37d62","2003-05-25 22:19:00+00:00","fix last commit

svn-id: r7978
"
"c5ea0839ef3672f92c088ab3db9853eeebd88fa3","2003-05-25 23:33:24+00:00","as Bertrand points out, using && introduces unnecessary branching, so & is better

svn-id: r7979
"
"c70713ea4adca4601746c14097cb725461f22dc3","2003-05-26 01:01:47+00:00","workaround for bug #743363

svn-id: r7980
"
"0856fba592e9a8427071affe3d172b8414bdbb38","2003-05-26 01:32:02+00:00","output script offsets, too (very handy to debug script lockups)

svn-id: r7981
"
"c55a7e32daa22b49feebd206ced12ddb7e79ae43","2003-05-26 01:33:02+00:00","script numbers can have up to 5 digits

svn-id: r7982
"
"62bb380b5933eb2deb222cc748e5bc4fe1b7c6df","2003-05-26 01:43:48+00:00","move spec file to dists/redhat

svn-id: r7983
"
"9b9f457ba74e62be605132aa21eaf46d52bb4c21","2003-05-26 01:48:53+00:00","offset can be 5 digits

svn-id: r7984
"
"c49cad32ddf34afd593b342034135e6deb4564cd","2003-05-26 01:56:34+00:00","hmm

svn-id: r7985
"
"b94c3265dbc67640371e19a39a23959db116be5c","2003-05-26 01:56:37+00:00","Add italian font set

svn-id: r7986
"
"c2d065d896a13f810ec9c4d484d1e2ec3713f3c2","2003-05-26 02:06:14+00:00","Missed space font

svn-id: r7987
"
"2f9ff35badc889a8b2480c0a34442b42763efc39","2003-05-26 02:26:13+00:00","moved Actor SaveLoadEntry definition to actor.cpp; made findPathTowards/findPathTowardsOld members of Actor; cleanup

svn-id: r7988
"
"2a9e09f33fcf5f3d62c289d6bca0e23d5768c562","2003-05-26 04:03:26+00:00","A few more hebrew fonts fixes

svn-id: r7989
"
"2f72a470893e13bd2e63ffe0342664bfad9904cb","2003-05-26 04:25:29+00:00","Ooops, added a few too many

svn-id: r7990
"
"645aa837e79fb7189ec2b2a7fd83ddf07cdc02af","2003-05-26 05:18:40+00:00","add ability to choose backend from configure script, doesn't validate user input at the moment

svn-id: r7991
"
"689ca53c8cd3bcbf42e895e57a9643566a94fb2a","2003-05-26 07:35:33+00:00","Error out if unsupport language option is used

svn-id: r7992
"
"055d49f77f57e3f4b73cb547024c5d91b3283dfb","2003-05-26 07:37:29+00:00","Japanese option is jp and not ja

svn-id: r7993
"
"01b900e028e2683d10beae62ecec0c0625507791","2003-05-26 08:24:34+00:00","No more needed

svn-id: r7994
"
"b959d9d64e0f08b178e25489d86f3eab59bf2a3f","2003-05-26 08:45:31+00:00","Commit hack to allow simon1amiga to run, for experimenting

svn-id: r7995
"
"4ca99c1c8966da5d37dcb51fffe561b68fc8f6c5","2003-05-26 10:21:22+00:00","Add / remove warning

svn-id: r7996
"
"ad874a4fd5cec586fef2f2755013864112b25e9b","2003-05-26 12:26:15+00:00","make lethalwp happy

svn-id: r7997
"
"bf565613b2daaf7b3e3a75ab4715517265ddadf8","2003-05-26 12:59:16+00:00","Prepare support for wide display on HiRes+ device

svn-id: r8001
"
"8eec984eb7aecf0afeff116e82acaefcdd377d3b","2003-05-26 13:14:57+00:00","more const qualifiers

svn-id: r8002
"
"a93917e4c5eaa8dbf849710f239e15b793a6f197","2003-05-26 13:28:43+00:00","some random additions

svn-id: r8003
"
"b7de7081a134f1def4aeb87d71790fe36af8f348","2003-05-26 14:19:24+00:00","Fixed VC++ warning

svn-id: r8004
"
"7f40e593edcafa203fa19fdb7b6710e3e4bf3831","2003-05-26 14:20:05+00:00","SaveLoadEntry is a struct, not a class.
Fixes a VC++ warning.

svn-id: r8005
"
"6ec53131aa5e2ef4fe9935072fca13e6030710f8","2003-05-26 14:43:02+00:00","work around bug #743615

svn-id: r8006
"
"c5dbd8355f6c188325c8053ed3fbf4b477019504","2003-05-26 14:44:03+00:00","cleanup

svn-id: r8007
"
"dce77eb79bd2ea7b0cb5e2b05b5cbfd18b7e1ce2","2003-05-26 14:45:10+00:00","add more stuff/cleanup

svn-id: r8008
"
"b19a6d8574e3d79540644f1c80d17ed82b955ce1","2003-05-26 14:51:13+00:00","Fixes possible crashes during music shutdown

svn-id: r8009
"
"4554cd1b195c56a7aac2bea095e85ba3aa03e085","2003-05-26 17:41:19+00:00","some additions

svn-id: r8010
"
"11902dcb5092cc603504707dd1e26e122b87f692","2003-05-26 17:56:17+00:00","slight cleanup

svn-id: r8011
"
"d95832d732821cdea215ab157cb666af40a3c2ec","2003-05-26 19:04:04+00:00","cleanup

svn-id: r8012
"
"d08a06ea88d640acf2f8e7cbf6a92b7cbb25e19a","2003-05-26 19:25:24+00:00","cleanup (add supportive function getSub() )

svn-id: r8013
"
"1124e8e432b6b3219816889e1294939a927d865b","2003-05-26 19:38:49+00:00","cleanup (add supportive function getMegaSet() )

svn-id: r8014
"
"304f89540b7cc4adb6ee7768569a70595dadb0ef","2003-05-26 19:55:28+00:00","cleanup (add supportive function getTurnTable() )

svn-id: r8015
"
"c2ea35fe07fd568487f669e1d57941fb1bc5bc4e","2003-05-26 19:57:00+00:00","Make _smushProcessFrame volatile (for multi thread access)

svn-id: r8016
"
"4baf74d6a074bd383eb92b30da7fe93490ed6bbe","2003-05-26 19:59:38+00:00","*sigh*

svn-id: r8017
"
"9357a99e00decef46def55baaaac1c53121c5a4d","2003-05-26 20:05:38+00:00","forgot one

svn-id: r8018
"
"ebedd3b41c2751ee084247fd04785216fcd37e4f","2003-05-26 20:42:25+00:00","Fixed a MORONIC oob memory write. Now back to remedial C++ class

svn-id: r8019
"
"b6a424a1df06810a3bb0a3ed7601c9b5d8dbd834","2003-05-26 20:48:10+00:00","scumm vars are 32 bit, not 16

svn-id: r8020
"
"170444836cb524eea5c18c8e171344e5e903fc1c","2003-05-26 20:49:18+00:00","script index starts at 0

svn-id: r8021
"
"5757ec8fc4c77733050aa0c50ac8cb5e7e4ffa32","2003-05-26 20:54:58+00:00","change return type of fn* functions to bool

svn-id: r8022
"
"dbad55e532ccd86085f7cb52aabedf5561f38c4b","2003-05-26 22:03:04+00:00","Added Hoenicke's PC-speaker waveform generator
and script interpreter for GF_OLD_BUNDLE music resources.

We'll try to get the waveform generator into a
MidiDriver wrapper for use with the 'SPK' resources
of later games, but this is usable for now.

Great work, Hoenicke!

svn-id: r8023
"
"0cd4e3c6c04f868fa3dafae5eaf02e1e845d51e8","2003-05-26 22:03:25+00:00","Added PC speaker emulator

svn-id: r8024
"
"b47d76222f66e86165bdae0ba0eb8ccd7f0340bd","2003-05-26 22:19:12+00:00","Fixed shadow variable

svn-id: r8025
"
"18eca52743fb85f12a35d1d6f7644584499fa721","2003-05-26 22:37:18+00:00","added FIXME comment

svn-id: r8026
"
"2885a8a84e01e3e074f86615487e8cd34390aea6","2003-05-26 22:37:36+00:00","tightened hack condition a bit

svn-id: r8027
"
"bd61a1298ef92ce47607a923262caee004c0d54d","2003-05-26 23:16:24+00:00","Added 'mmamiga' game ID to disable PC speaker emulator

svn-id: r8028
"
"a871dfafafa9e81fabf027c07c99b6eab0da3394","2003-05-26 23:23:44+00:00","don't attempt to play sound on amiga versions of zak/maniac

svn-id: r8029
"
"baf0175a761aa0b68157c3e3695e7a60085681f4","2003-05-26 23:28:59+00:00","Fixed MSVC warnings

svn-id: r8030
"
"adf3892a091e9edce279cb38fbb4022389fd1c41","2003-05-26 23:34:06+00:00","remove uneeded target

svn-id: r8031
"
"2564ad64f727d8b146ccb83c711800d97c9aa6e4","2003-05-27 10:05:26+00:00","A whim, just a whim. :)

svn-id: r8032
"
"1543a7d5396730df627f6d653df7f0b25dc64bf4","2003-05-27 10:07:27+00:00","Oops, fix alphabetical order

svn-id: r8033
"
"052a482f4083d70f009cc0cd6c126fb4b8c92134","2003-05-27 15:31:13+00:00","increased nut font debug level to 8

svn-id: r8034
"
"af2574c02d23e220010bc727b3488a1aeaed78d1","2003-05-27 15:33:38+00:00","fixed o8_getStringWidth (should fix bug #741625)

svn-id: r8035
"
"bc290162bd01acfad205d91175a727d21e032fbe","2003-05-27 16:42:20+00:00","implemented screen.asm and sprites.asm (not yet working)

svn-id: r8036
"
"21b41a5456f65203cdde8619703e3452de645e49","2003-05-27 23:18:03+00:00","cleanup

svn-id: r8037
"
"73db1d6f51d7332e98a2a407c2d2f5038a67b1d8","2003-05-27 23:23:26+00:00","Patch #744448: ALL: restoreBG() doesn't always completely remove the mask

svn-id: r8038
"
"29a25f66f219a50d97c24fc7e1bcabdc4b8b0263","2003-05-27 23:28:41+00:00","italian V2 prepositions

svn-id: r8039
"
"27f2f5801074742335fd2e94bb5f40bd137c5d88","2003-05-27 23:34:37+00:00","put in explicit unistd.h for getcwd (this helps BeOS)

svn-id: r8040
"
"05c11e0cca0ee87a2b84b4c9c5face8bf64d916a","2003-05-28 00:07:56+00:00","Fix for bug #744121: Indy3 'Save' button text

svn-id: r8041
"
"e9d422a39c57d02d122714800e1dfdba97a87c6a","2003-05-28 00:39:18+00:00","Add french font set

svn-id: r8042
"
"3fae6fbf464ed842ac022fb9e2202a1d18f3f455","2003-05-28 02:06:53+00:00","added some missing checks for file being open before reading/writing

svn-id: r8043
"
"a91f8451c56051791069aeb4573024576ad511d0","2003-05-28 02:08:31+00:00","cleanup

svn-id: r8044
"
"40c698ef20f60c8c61c4de52c14c795c46dda0f2","2003-05-28 02:09:18+00:00","Shorten Simon 1/2 title name to match others

svn-id: r8045
"
"383918313d06b60ce0dbee77fa3478fe2908bc97","2003-05-28 11:56:50+00:00","Treat AMI music resoucres in monkey2 for Amiga as ROL for now, to allow music playback

svn-id: r8046
"
"8d4b2bbf73867900db3bf767877bd7d6ea23f1ab","2003-05-28 13:28:43+00:00","fixed o2_waitForSentence

svn-id: r8047
"
"03609cc4655d5cfa548e22ce9bf630e1bb93bbc3","2003-05-28 14:01:54+00:00","cleanup; added hackish fix for bug #744441

svn-id: r8048
"
"b7fe6df587749e93b8ae93728724776de6e0ed53","2003-05-28 14:09:55+00:00","copy&paste mistake

svn-id: r8049
"
"1374e7c6b1b4a57149494f98cab2ab9d73d37e78","2003-05-28 18:13:30+00:00","Patch #743228: Storing mouse cursor info in savegames; Also, increased NUM_SCRIPT_SLOT to 80 (done at the same time so I only have to up the save game version once)

svn-id: r8050
"
"2bb68e12784f231a838da5d8ea15ca0842c188ab","2003-05-28 18:36:29+00:00","Braces

svn-id: r8051
"
"9ef343ad3382af269cac6eff5c83a97da76b12ae","2003-05-28 18:37:59+00:00","New stuff

svn-id: r8052
"
"628e81944c1230b3d0f31a897a1a29001deda3fe","2003-05-28 18:42:16+00:00","Experimental wide display support, new move_screen function

svn-id: r8053
"
"798d23c6a8dcb609de8920e84f3ee8bf76f5ebab","2003-05-28 18:44:24+00:00","Add new files

svn-id: r8054
"
"2dd2e99cabd70b4375cfae97771d340591956024","2003-05-28 19:03:12+00:00","the _encbyte code was evil, because it modified the memory passed to write(); worse, though, it incremented ptr2, which then was later passed to fwrite - hence if used to write something while _encbyte != 0, write() resulted in wrong data being written

svn-id: r8055
"
"b8e943a67eade212f2b5586f21951261b3dd4b81","2003-05-28 19:54:46+00:00","cleanup

svn-id: r8056
"
"01ac371c6afd94b4987528a49ee2bfe8c1cf84ea","2003-05-28 19:55:05+00:00","don't hardcode 50 here, use _numNewNames

svn-id: r8057
"
"1f70da01556164c5b39bb0e804e2c919dd7b3c83","2003-05-28 20:01:47+00:00","const as const can!

svn-id: r8058
"
"765366df6ce76a2687e672ec8cb55a70e6ebb7ba","2003-05-28 20:55:25+00:00","Screen *kinda* works now.
Though I wonder what the menu sprite is doing on the mainscreen, now. ;)

svn-id: r8059
"
"52723beaf08269e6722adae6fd3397a50e055bac","2003-05-28 21:08:56+00:00","some more akos/old costume code unification, and cleanup

svn-id: r8060
"
"d4ac1044baf35f6a883fda9e593a22dc3dab17f5","2003-05-28 21:09:52+00:00","fixes gcc compiler warning

svn-id: r8061
"
"34bf11b43f9192cb59e3a8072f8d257329053de9","2003-05-28 21:28:30+00:00","spelling

svn-id: r8062
"
"79ba8e7227abc752ae0c23cba4959496b00b6eea","2003-05-28 21:29:50+00:00","add screen update to main loop

svn-id: r8063
"
"78ef0ea5b5d336315b79f5afa9e91ffb52422fd7","2003-05-28 21:43:34+00:00","fix actor redraw problems in COMI (and possibly other AKOS games); might cause regressions, though. See also patch #699980

svn-id: r8064
"
"6a8bd23d025bbe7be7553ec95ccf88f1eb2a6cbb","2003-05-28 21:57:22+00:00","there used to be a black border at the top/left side with the 1x scaler: fixed!

svn-id: r8065
"
"2aaa13438a90543f35f98a233074878b63307cfe","2003-05-28 22:13:30+00:00","modify actor 5 to get kenny in COMI to draw properly

svn-id: r8066
"
"73c7e78f888f3e49e7b744ee68efeded21be0545","2003-05-28 22:19:11+00:00","fix for the crash in Sky when switching scalers

svn-id: r8067
"
"b4ee5004d71de2c8ee381d623b860fbff9383c27","2003-05-28 22:27:38+00:00","Patch #745022: More help in Debugger

svn-id: r8068
"
"2186ad138b1c6842c1ae2bf25cc55d75002cdb72","2003-05-28 23:31:43+00:00","moved music drivers into seperated directory, added music support for diskdemo's adlib driver version.
(maybe other sky versions also have this older adlib driver?)

svn-id: r8069
"
"06380e9ae9c06f2e4e7f33af2ef70304f6a2e12a","2003-05-28 23:37:04+00:00","cleanup; nasty fix for spanish/italian Dig (using encrypted language.bnd in a slightly different way than we previously supported)

svn-id: r8070
"
"1c3b7dc883628f9c37f59949b00102e5f7a48b69","2003-05-28 23:44:11+00:00","Fix compile

svn-id: r8071
"
"3da16e64044c7e6f52631ce75baf66993c2eb6fc","2003-05-29 01:27:16+00:00","cleanup

svn-id: r8072
"
"59acd18cee517101ad900c1522764350f198605b","2003-05-29 02:14:31+00:00","they are getting more and more similar :-)

svn-id: r8073
"
"0a6daf767f2647e5799dffa6af01047545445dc5","2003-05-29 02:46:06+00:00","more costume/akos changes

svn-id: r8074
"
"6f3d72e8b72bb719e32bed2a63c9d0028058d17a","2003-05-29 03:19:10+00:00","fixed wrong path

svn-id: r8075
"
"ee2bd920843b5e3541983c9cb31bd1572ae82f31","2003-05-29 03:19:46+00:00","still not what it should look like, but well......

svn-id: r8076
"
"859dd9315933beb85f3ee56de164b287e83f3311","2003-05-29 03:26:28+00:00","removed debugging stuff

svn-id: r8077
"
"46321eaf622a5d6d2c14dbb754d3437b253d2020","2003-05-29 03:51:05+00:00","argh. a missing recreate was the problem. foster is correctly animated now.

svn-id: r8078
"
"6416c7d25d5365c8af40854025c7dc7308900c61","2003-05-29 06:05:34+00:00","Use shutdown function before quiting

svn-id: r8079
"
"c4088b56e6e108d12d1f77d516fd0a2dda39c253","2003-05-29 06:06:32+00:00","Missed one section

svn-id: r8080
"
"1855dba9d366b0aca73d10556dc411692c6ce258","2003-05-29 06:36:52+00:00","Correct name

svn-id: r8081
"
"45a9ff6341804b1e7a78390909db7be44d6ccf23","2003-05-29 06:39:26+00:00","Missed a few sections

svn-id: r8082
"
"fd3d2ac8ad41555dfae977324f2bf710b3aeeabd","2003-05-29 07:02:14+00:00","More sprite renames

svn-id: r8083
"
"19684947dfd372a17a046ac6d94f7fef27f6b133","2003-05-29 07:59:21+00:00","Add some errors to check if these opcodes are actually used

svn-id: r8084
"
"aa919f35089dc5d6b20283da0e05bc1e6277ce6e","2003-05-29 08:05:20+00:00","A few small V2 detection/init changes

svn-id: r8085
"
"09546c2491717d09bc78a744b86e2a6267e4a4a7","2003-05-29 10:14:53+00:00","fixed V2 script freezing (bug #745421)

svn-id: r8086
"
"b69ea5bec88e534ae31a1e20511fe66dec18e44f","2003-05-29 10:16:00+00:00","more costume cleanup

svn-id: r8087
"
"c62c448a35c0c0b044b953c901ae4d47fe362957","2003-05-29 10:31:05+00:00","more costuem code merging

svn-id: r8088
"
"495dbcdff0cb4098ef1bfda94ef79435635295a4","2003-05-29 10:43:57+00:00","Fxi win32 compile

svn-id: r8089
"
"a415492f5dd642c79bfdbfc0a384adf4a4191126","2003-05-29 10:46:07+00:00","more costume cleanup; fixed small regression I introduced (copy & paste, sigh)

svn-id: r8090
"
"96fd0ef6711fac5fba35a4841000c3d7d76e0478","2003-05-29 10:55:22+00:00","make poor GCC 2.95 uses happy

svn-id: r8091
"
"fbf2dff5457a4de8879a1bfb944bb85bdc0c419e","2003-05-29 11:07:54+00:00","merged all AKOS codec 1 decoders into one

svn-id: r8092
"
"db43466ea20f8022825d9cab76ee9502e8e946a0","2003-05-29 11:15:32+00:00","removed cruft

svn-id: r8093
"
"b07927da3d49505326383740a7d9095d5a7ac65b","2003-05-29 11:40:48+00:00","added some doxygen (javadoc style) comments. yes I sure these function probably needed documentation the least, but I just wanted something simple to test this on :-)

svn-id: r8094
"
"89a6ebb86773fbbead264c4c452ef36cb28d9f36","2003-05-29 11:48:44+00:00","removed obsolete

svn-id: r8095
"
"b31ff8d6d50cf6600b57adc753c4b8c481574abd","2003-05-29 12:02:41+00:00","make GCC3 happy by default, too <sigh>

svn-id: r8096
"
"6054d1c5176ca3e9600142baf6798618214c1dfc","2003-05-29 12:09:33+00:00","Fix a sound problem on exit

svn-id: r8097
"
"48ccc623ac2666177f67f03b039633b28ff827c3","2003-05-29 12:34:14+00:00","removed obsolete

svn-id: r8098
"
"1db0f749ca94598ec9a352a84a2ea0e4a248d375","2003-05-29 12:55:28+00:00","moved camera stuff to own file

svn-id: r8099
"
"de6fd7c7469f3aed460ff303322f4d43dd5a9523","2003-05-29 14:03:37+00:00","fixing crash

svn-id: r8100
"
"a8d6ac05da168ab69d2cf02faf403e26dfe2419b","2003-05-29 14:06:01+00:00","whoops

svn-id: r8101
"
"007352ce6b6cdad8342834b51b04b87a500c22df","2003-05-29 14:34:40+00:00","fixes layer order

svn-id: r8102
"
"36f6b0e20fba97d6e1bf6ca4d78aafcb7c8977d6","2003-05-29 15:02:36+00:00","should be uint16** and not uint16*

svn-id: r8103
"
"ae73d6d7bf7f1b981c77e00a5852cec5fcbfaeeb","2003-05-29 15:40:46+00:00","some minor cleanup

svn-id: r8104
"
"e62091f008f5849f8e5a4c4a9b8a2cb6599cacd1","2003-05-29 15:50:36+00:00","renamed variable

svn-id: r8105
"
"d0320a6ff0fa888c19c12d2c7c46a2502ab8e556","2003-05-29 16:05:56+00:00","cleanup

svn-id: r8106
"
"c991d40c583dfeb315c44e342aefc36113abb634","2003-05-29 16:37:49+00:00","fixed doc comment

svn-id: r8107
"
"74bc20597c20b151a405cdf931c05a71c2a61983","2003-05-29 16:47:14+00:00","fixed sound driver.

svn-id: r8108
"
"d8844871f5127a80b72d89802b81e50d9475d7f3","2003-05-29 17:14:47+00:00","cleanup

svn-id: r8109
"
"ccb12eaad25c7326b2c6fdc6f4b3c36f1f9e3a01","2003-05-29 18:09:16+00:00","cleanup

svn-id: r8110
"
"5a7e9b4b9cd874c2cbb45394a5e9df402f48b17a","2003-05-29 18:27:18+00:00","update vc6 file

svn-id: r8111
"
"f0c0b5f4f8bb308900747bc206399dbf9375904c","2003-05-29 18:30:40+00:00","fixed compilation

svn-id: r8112
"
"746b0bdc5b77f82bdb83b88eb1513b7abd595cdb","2003-05-29 18:45:58+00:00","cleanup; fixed crashes that occured when an actor was drawn partly offscreen

svn-id: r8113
"
"cc2ecbd7254ecff250eb7f9c7e45dfb2c666231c","2003-05-29 19:36:02+00:00","some fixes (still one bug left)

svn-id: r8114
"
"417ec3a58816cbfd6c880b84474581a8e07bc40e","2003-05-29 21:29:54+00:00","added TODO: get rid of create_thread

svn-id: r8115
"
"f0a9f4fb2c5203fbd97130a8198d7ef9e1ce713a","2003-05-29 21:45:26+00:00","added some doxygen comments to common/system.h; cleaned up the OSystem interface a bit

svn-id: r8116
"
"54b8fd8ce1488c82a8e123586dfce9000e3ba6c7","2003-05-29 22:26:45+00:00","Some sky CD versions have an image replaced. This includes the original sky01.gif into ScummVM. Disabled by default, though.

svn-id: r8117
"
"e08d4f072e0939e97b3e6b7e1b2dd7cbaf51d939","2003-05-29 22:34:35+00:00","more OSystem docs & cleanup

svn-id: r8118
"
"06ab068a4190595d186cbb00bb6af9dfba731d28","2003-05-29 23:13:15+00:00","added some front matter text for doxygen

svn-id: r8119
"
"c1dfd566d5c579cb4a58deec2e1e0b2791e45bfd","2003-05-29 23:15:36+00:00","stop sounds when escaping intro

svn-id: r8120
"
"d0b2e561947b24455b71c9686240bdaa63427b7c","2003-05-29 23:44:24+00:00","more camera spliting

svn-id: r8121
"
"864fbb1d9978d21b41f393e2a7b8afb536d0caed","2003-05-30 00:00:49+00:00","Fix compile

svn-id: r8122
"
"5557ec719eb20de718edff582fe4861c28b683ae","2003-05-30 00:40:58+00:00","work around nexus crash (only in old savegames?)

svn-id: r8123
"
"94a404899a94e831fa39d3296d39a710007caaa1","2003-05-30 00:41:58+00:00","fix The Dig 'hang' regression

svn-id: r8124
"
"5ea6cbe51d09435d4eb17b33bdb618903f09e2b6","2003-05-30 00:48:35+00:00","this clip is bad: it's not needed (we clip later anyway), and it clips too much

svn-id: r8125
"
"691e1f390aae2c797cd0f5ed04ff1136cf8c8f19","2003-05-30 00:55:21+00:00","rewrote Actor::needBgReset related code (this could cause regressions...)

svn-id: r8126
"
"997f6564c6b1ebb9e1c489a83be45ed1a77aeb47","2003-05-30 00:56:32+00:00","removed debug output (checked that in by accident)

svn-id: r8127
"
"9f301f16e611c1b67ba3fca6508c3d11224c8df8","2003-05-30 01:37:50+00:00","removed more harmful clipping

svn-id: r8128
"
"37fa2df49acf2991c24c6b7e271ed4431f8dc5c5","2003-05-30 02:01:45+00:00","cleanup; removed last horizontal bound check from updateDirtyRect -> now all the various 'offscreen actor redraw' problems should be fixed (at least I can't reproduce them in COMI anymore), while The Dig should still work just fine (at least it does in my test cases)

svn-id: r8129
"
"0324ae9145bb64db87b0f5171ab63ce789fb9537","2003-05-30 05:39:14+00:00","Correct simon2 timing
Remove unused function

svn-id: r8130
"
"fb5bd02b40cfa1accfcfdf60e20f4e985852a70a","2003-05-30 07:46:45+00:00","Rename two unknown functions

svn-id: r8131
"
"a5b2774685c08b2ba9de79856f3d96a5de26bd4c","2003-05-30 09:39:21+00:00","Small cleanup

svn-id: r8132
"
"4458704250ce168ed06875cf6c69116a6108ddbd","2003-05-30 09:57:52+00:00","Broke simon

svn-id: r8133
"
"ab3e5f8d4032c25a997f7a9f977d6b9bdc40d4e5","2003-05-30 11:07:30+00:00","add sound effects

svn-id: r8134
"
"7dc20e84fe002da024bcbdf7da1cde38f8cfdabb","2003-05-30 12:55:20+00:00","added talk animations

svn-id: r8135
"
"f88dc73bb3b91bfcf1a209abea90c064f5c57c61","2003-05-30 13:07:27+00:00","fixed bug

svn-id: r8136
"
"a7c5dbf7aa1573029897f7744192e5326472d8f2","2003-05-30 13:08:13+00:00","bugfix

svn-id: r8137
"
"9c98000f25b391281f5d4ab90ea0d8ce698cf3d9","2003-05-30 13:35:34+00:00","cleanup

svn-id: r8138
"
"4e3e0aac3a09d091f6bb4bba64be696dc6335122","2003-05-30 13:47:33+00:00","added fnSpeak* functions

svn-id: r8139
"
"498a30f0b7c5cb3b1f6cce47e79c6f7e25a7d6dd","2003-05-30 14:06:28+00:00","V2 verb highlighting (good one, erik :-)

svn-id: r8140
"
"60df623feef422415cc1ffa886534d55dcf92790","2003-05-30 14:20:32+00:00","stdSpeak() - buggy

svn-id: r8141
"
"61de12d3a158a998345ac1ac363b1eb04d64ebab","2003-05-30 14:29:07+00:00","Modified version of erik's patch #745986: Experimental V2 mouseover stuff

svn-id: r8142
"
"238e75963002093418121321a4abd51e0cb4edf8","2003-05-30 14:33:05+00:00","modified o5_getClosestObjActor to find actors/objects more than 255 pixels away

svn-id: r8143
"
"6eca1c98c785f8226a3df8c63431f19df07dbc0c","2003-05-30 14:48:09+00:00","fixed stupid bug

svn-id: r8144
"
"3d28cfaf82f0e82acbe647595f30b7610908c572","2003-05-30 15:06:29+00:00","cleanup

svn-id: r8145
"
"5725ee392a90d2ea18e55e37dd0b6b48ca53372b","2003-05-30 15:39:06+00:00","code unification

svn-id: r8146
"
"32e4e1aa5165275d4e0bc40606662f4c18f1c621","2003-05-30 16:01:07+00:00","fix bug

svn-id: r8147
"
"68a2e52889bb08ce493ee2b977b288b4c0454d3e","2003-05-30 16:06:43+00:00","some temporary debug cleanup

svn-id: r8148
"
"693b7126d6ced69a8a46fc62d5587afc05e0ea48","2003-05-30 16:08:21+00:00","add .cvsignore

svn-id: r8149
"
"90468ea46e3cd96feedd93bc1a2980402e7f0a4f","2003-05-30 17:52:17+00:00","cleanup

svn-id: r8150
"
"c6b35e15a0d541ba0ca89f983743cafa4e082cd2","2003-05-30 19:00:33+00:00","moved bomp stuff into own files; removed some of our 6 (!) bomp decoders

svn-id: r8151
"
"fd6dd176850b28ef650f180904c457e496cb1c4e","2003-05-30 19:09:41+00:00","made decompressBomp use bompDecodeLine

svn-id: r8152
"
"1f38765c16a02cd369255a37c97a48c735a8c73d","2003-05-30 19:28:52+00:00","use decompressBomp instead of smush_decode_codec1

svn-id: r8153
"
"eb039ec554ad178f15c377b4c7c5f715d84b1900","2003-05-30 20:13:29+00:00","some cheap doxygen docs; cleanup

svn-id: r8154
"
"1076838501fdb367b1aa1d0e4891bffee424a1af","2003-05-30 21:37:58+00:00","more costume cleanup. soone we should be able to merger AKOS codec1 and the old costume code

svn-id: r8155
"
"32b6333b744496ee6a47547aca1b02464cfa03dd","2003-05-30 22:14:29+00:00","update vc6

svn-id: r8156
"
"877ca1b8597a10e22808b65768b0fec7ee54be62","2003-05-30 22:22:51+00:00","Workaround for bug #746349

svn-id: r8157
"
"3efdd3ad6b86694dfdcca701e5ec968395a28ff1","2003-05-30 22:57:19+00:00","continously opening and closing the language.bnd file is rather inefficient. It's about 400k, though...

svn-id: r8158
"
"9b8f49e9007abac85630d77d2bfdf202f7c86539","2003-05-30 23:24:29+00:00","Use language index for The Dig, too

svn-id: r8159
"
"41ca372ef37dca149f4e0c1c9e7503d3f4c2fc09","2003-05-30 23:32:02+00:00","oops

svn-id: r8160
"
"e2ffbc1f8f4e0769190f90cba5509d55192dce22","2003-05-31 00:02:59+00:00","make some stuff private

svn-id: r8161
"
"17a9c49dce6aee8d64b1c0ed24e4906fffa0f9fe","2003-05-31 00:18:22+00:00","fixed bug #739560: COMI: crash at start of part III

svn-id: r8162
"
"c26389164fef4066635762dfc27ba7534f2645a0","2003-05-31 07:39:39+00:00","Fix simon1dos regression

svn-id: r8163
"
"f5758f3f49e0ff27300de176e1815c27e41b7a3b","2003-05-31 10:33:25+00:00","A few notes, correction and a few more errors

svn-id: r8164
"
"7a37232aae37fabe6594cd3d60d99e6d5e257576","2003-05-31 11:01:16+00:00","Cleaned up the sample generator.
Added support for new opcodes as they are in Loom.
I didn't enable Loom sound, as there are some issues (indyega, loomdemo) that
need to be resolved first.

svn-id: r8165
"
"6f41b17fcd36b13b9b2beaf39671fd9a744a90f8","2003-05-31 11:23:25+00:00","Added missing random freqmod entries (water doesn't beep anymore :)
Removed extra newlines from debugging output.

svn-id: r8166
"
"719b34f36b0b147981cfbe180fffa53628851db5","2003-05-31 11:40:32+00:00","Add german font set

svn-id: r8167
"
"945dacb247789d59764d9389f16d684ae05bd50d","2003-05-31 11:53:28+00:00","cleanup endlines

svn-id: r8168
"
"d5d0440e8ceb295dfd67c4993c205e268b3ba6d7","2003-05-31 11:57:18+00:00","cleanup

svn-id: r8169
"
"320c34f01776f86cd88328e9ac46d0ce041c4f7c","2003-05-31 12:16:49+00:00","FIXME comment added

svn-id: r8170
"
"5202a59c6351f03704113b7410f37f4a7d329b6d","2003-05-31 12:17:58+00:00","some setObjectName changes. I'd really like to switch V2-V5 to use rtObjectName resources, too

svn-id: r8171
"
"8cb9796d97be9c1c3f121b4803595b16a3c9e2fa","2003-05-31 13:38:41+00:00","fixed mismatch between declaration and implementation

svn-id: r8172
"
"98986713d1c313057f63f656731f9de43ed25233","2003-05-31 13:43:05+00:00","Set the 'machine speed' variable for V2 games. I think it's safe to assume
that modern hardware will handle the more elaborate version of the EGA Zak
intro without any problems.

svn-id: r8173
"
"3a64beb9048685d63ff447f1359b25351bcdc0df","2003-05-31 13:45:45+00:00","Fix typo in previous commit

svn-id: r8174
"
"b0b9c354d1347d7b35b156408ac67e7bf3305ad8","2003-05-31 13:53:25+00:00","Amiga specific code is only require for Amiga versions of indy4 and monkey2

svn-id: r8175
"
"7b96eb0c2afae21c24d4c601401bd6f67c3042f7","2003-05-31 14:20:24+00:00","fixed debugger command params bug

svn-id: r8176
"
"6762073acd4982708fd00677f676c2d07c5ead3a","2003-05-31 14:24:06+00:00","perform y ciping for box polygons, too (avoids crashes)

svn-id: r8177
"
"f8e64d7134c80aafe92b1f4aca0a4a2e92c29a71","2003-05-31 14:27:47+00:00","renamed walk_script/talk_script -> walkScript/talkScript

svn-id: r8178
"
"6c92fc12c0b253ec6f9b9e53ce251903797a4748","2003-05-31 14:32:35+00:00","added box matrix debug command

svn-id: r8179
"
"da6ca85dfc7be716cd62f89d1476d24a48c59543","2003-05-31 15:04:51+00:00","don't be so verbose on low debug levels

svn-id: r8180
"
"2fd98601f720b8fa5296f8e8e06c09388c40c3a7","2003-05-31 16:09:09+00:00","ah well. just get rid of this again. this fixes some actor freezes in The Dig statue room, and shouldn't be necessary anymore anyway

svn-id: r8181
"
"83e1815a726375ca44603feb20950a955d250cf2","2003-05-31 16:20:20+00:00","some box debugging code

svn-id: r8182
"
"33030f7bedc9aae06ca89bc35d6a535627f029e8","2003-05-31 16:24:01+00:00","fix for part of bug #630570

svn-id: r8183
"
"749782873437a7fcd86ef7c6489ea1914830f665","2003-05-31 16:25:15+00:00","cleanup, add some doxygen docs

svn-id: r8184
"
"3290d618d62f71b5c77e303ab7dcddc9d489cc85","2003-05-31 16:54:46+00:00","Made thread-safe.
PCjr support.
Rewrote the generator, so I can reuse more code between PCjr and speaker output.
Added function to set master volume and to switch between PCjr and speaker.

svn-id: r8185
"
"1c0da0a89ca0006b43e35863e7efbbfb749b2191","2003-05-31 17:18:41+00:00","apply V6 elevation change to V8, too

svn-id: r8186
"
"9a56d08fe81479d0a380238570fdc4fa569df210","2003-05-31 17:19:42+00:00","forgot to commit this file earlier

svn-id: r8187
"
"1d47bfa7cdaf8355a3b51d31654e4f622c6cdfa9","2003-05-31 17:29:47+00:00","fixed warning

svn-id: r8188
"
"5d3bef9c57ea4a56e6df42121b1ae52a94531420","2003-05-31 17:58:15+00:00","added hack to make The Dig work again, tbus might break all sorts of other things (though I don't really see how, but that won't stop the bugs :-)

svn-id: r8189
"
"bd08b33f83f3db035f4a116d41a7208ef910a792","2003-05-31 20:45:41+00:00","begone, evil typo!

svn-id: r8190
"
"e1e7daa1c5ec583f55bbeeb0d38708b97f7e8922","2003-05-31 20:53:00+00:00","Some really cheap doxygen documentation

svn-id: r8191
"
"30b0702ef50cdcde59be7044ec38595579867926","2003-05-31 20:53:55+00:00","that wasn't meant to get commited

svn-id: r8192
"
"7ffb40e61b3ab0bb14d3315636710963fa406c4e","2003-05-31 21:25:14+00:00","cleanup

svn-id: r8193
"
"ac02e3d0d0d2fe2414e8e0cb5553ef835265c00a","2003-05-31 21:42:33+00:00","cleanup

svn-id: r8194
"
"6aba98450ba79682759e25dd7fbb22a053ae987f","2003-05-31 22:04:21+00:00","Some Doxygen documentation. Just to test.

svn-id: r8195
"
"ef198afd7cfc096e66fd99b5bcc9efa262bc08a3","2003-05-31 22:16:25+00:00","Possible fix for -eseq SysEx

svn-id: r8196
"
"5cfb556d676bf57e61bd69dca2614a1dee23275d","2003-05-31 23:14:36+00:00","EV_SYSEX based SysEx for -eseq

svn-id: r8197
"
"3323aa4212d33dc87bf02c2824e92e8b8a181ca7","2003-05-31 23:27:19+00:00","EV_SYSEX definition

svn-id: r8198
"
"6b64849acd337a3be4433bf79fe89f8bb2e30289","2003-05-31 23:42:23+00:00","fixed sillty mistakes - must've been on crack when I coded this..

svn-id: r8199
"
"69db2c0515138f78f47cdc66bbec3cc30e51063f","2003-06-01 00:02:51+00:00","oops. forgot this.

svn-id: r8200
"
"c5ecbf65cbe526aa46af04140c480d17c61300e2","2003-06-01 00:14:04+00:00","Another slight tweak to the EV_SYSEX code

svn-id: r8201
"
"5e46155d3add5bcfe1a8f9378f2e6d21abbe90e2","2003-06-01 00:42:01+00:00","Welcome message for MT-32 panels.
More for SysEx tests than anything.

svn-id: r8202
"
"24b5af6a0e22c4e1f1569714d61f3be47b575112","2003-06-01 00:45:08+00:00","cleanup

svn-id: r8203
"
"557be6cbfa46eaaa956878368705056ff32a96b1","2003-06-01 00:47:57+00:00","fixed screen coordinates bug for stdSpeak

svn-id: r8204
"
"3e2a7cc1cf71c8700079a54c7e1f5579fa385c0f","2003-06-01 01:00:44+00:00","same change as in the old costume code: just always mask

svn-id: r8205
"
"e63dec5f56b716a84db3b817a4d18e84a2883468","2003-06-01 01:02:35+00:00","clearUpperMask -> clearCharsetMask

svn-id: r8206
"
"7a2a739ea33dc6092417bf52cfaf12934bb34334","2003-06-01 01:13:00+00:00","Teaking the MT-32 welcome message.

svn-id: r8207
"
"f047955b0dcd4dd5dd477626bd3f7d5672a09f21","2003-06-01 01:45:08+00:00","Restored SEQ_MIDIPUTC SysEx approach

svn-id: r8208
"
"70e2b20c0b81e1ac1923f8817d5d063821812c69","2003-06-01 02:07:23+00:00","cleanup

svn-id: r8209
"
"8f4660fb5c85b3168b02ed3d5d53060209246cca","2003-06-01 02:08:47+00:00","hopefully add sysex support to alsa midi backend

svn-id: r8210
"
"e2b2f8cc64044fc581657c79b08e2c7b243e15e3","2003-06-01 02:25:07+00:00","Fixed stupid SysEx error

svn-id: r8211
"
"3103dfa1f3db7542084436eed282689e186506f1","2003-06-01 02:37:37+00:00","Fixed SysEx errors

svn-id: r8212
"
"0074641ab28d5a4c12da4c578e7ec89717d066d2","2003-06-01 02:47:06+00:00","Fixed potentially structure alignment problem

svn-id: r8213
"
"785118c63c526938f80fa1c0912f611e9dcaefae","2003-06-01 02:47:26+00:00","Removed debug output

svn-id: r8214
"
"6f9af8707e54fe594f44072ef71ce02d5b03c6bf","2003-06-01 02:59:58+00:00","More MT-32 SysEx tweaking

svn-id: r8215
"
"2ef36da81971f76a54a85bd620c7e07567cf5355","2003-06-01 03:06:10+00:00","Fixed checksum error

svn-id: r8216
"
"11e188c52084a05a915679f5129ae2f0dea66bcc","2003-06-01 03:13:08+00:00","More MT-32 SysEx tweaks

svn-id: r8217
"
"220c2f6389bd97014fb7c9a0c243f12ed6ca009e","2003-06-01 03:25:14+00:00","give alsa sysex more chance of working, still broken though

svn-id: r8218
"
"738497ef1413e8148d445389ab65144997652934","2003-06-01 03:39:44+00:00","actually sending the event helps too

svn-id: r8219
"
"d67c53d756a1706a9796acf258ab2d29ddf54939","2003-06-01 03:44:07+00:00","basic ingame speech support

svn-id: r8220
"
"22b5009a3515fca65263e3b66e52b80409cf6b06","2003-06-01 03:49:05+00:00","whoops

svn-id: r8221
"
"fa481d90e5735c079b12df1b3a8b17a8081ce644","2003-06-01 04:03:40+00:00","Enable loom sound patch, works in both loomega and indy3ega
Use Amiga flag for Amiga versions for now

svn-id: r8222
"
"452735e320894939283b9e10ae8ffb11a2811d93","2003-06-01 04:05:13+00:00","Some last SysEx cleanup.

svn-id: r8223
"
"86138eda44feab1f0c1c7d17d5f31eefe394600b","2003-06-01 04:06:24+00:00","Documentation corrections

svn-id: r8224
"
"65ca5485022e6548df57a1dab869fb46f522c34a","2003-06-01 04:15:10+00:00","Fixed MT-32 welcome message

svn-id: r8225
"
"20893a2d23a1c807fd3b7133e5497aa95a94bdfa","2003-06-01 04:34:11+00:00","fixed sprite animation bug. Door closes completely now.

svn-id: r8226
"
"b3e166897027246940f6b15d83404b39ffa6dd10","2003-06-01 05:02:14+00:00","I hope(!) SkyScreen is big endian compatible now.

svn-id: r8227
"
"771dcfaad7b88deb17f76dfa06ec4a3fb1c98271","2003-06-01 09:41:56+00:00","Rename SimonState to SimonEngine

svn-id: r8228
"
"8a531f3ca564b651ce472460bc0e5954da0e6d96","2003-06-01 09:48:37+00:00","Missed one

svn-id: r8229
"
"79a98164c0ca342e416d0e52150b13a59ad3c38b","2003-06-01 10:15:31+00:00","Bypass Sam & Max floppy copy protection

svn-id: r8230
"
"41e316ad6e48404c194353ee7e5228d99e841627","2003-06-01 10:28:45+00:00","Reversing for the time being

svn-id: r8231
"
"5c91b160f68947c77fe73314fc3a740a7c9aa660","2003-06-01 10:53:21+00:00","fix gcc compile

svn-id: r8232
"
"063c310917f981f5075c91097c46963d1fa9a94b","2003-06-01 12:49:39+00:00","added some buggy, incomplete mouse code

svn-id: r8233
"
"a29074ed0835372abe2e7779d3fd8ff54a365c57","2003-06-01 13:07:20+00:00","actually show mouse this time

svn-id: r8234
"
"9cbcde684b35df63693c0f72dd14a8173f4d5265","2003-06-01 13:09:30+00:00","cleanup / added comments / code unification

svn-id: r8235
"
"8b39e81afeb3e2e7ba0c4c9b403051ec82a7f3b3","2003-06-01 13:11:30+00:00","cleanup

svn-id: r8236
"
"41c1e94ea54f3665ce3cab555a5fb95b9051715a","2003-06-01 13:12:10+00:00","some VERY hacky SkyLogic::talk support

svn-id: r8237
"
"4cef98bf6d2a8ae0c1d9f0c90a581b2628a71db7","2003-06-01 13:20:55+00:00","add fnNormalMouse()

svn-id: r8238
"
"3e87539b5ca01132aa7396a985650475ae78d30c","2003-06-01 13:29:28+00:00","use FROM_LE_16, indentation cleanup

svn-id: r8239
"
"2591a4f018e3b884427f18f3fe1710b7f1c6fd1e","2003-06-01 14:07:14+00:00","This didn't look logical, and could (in theory) lead to mask being drawn but _hasMask not being set. I suspect it was a bug in the original commit adding this (back in the original string.cpp, rev. 1.5). Even if this change should turn out ot be incorrect, the original code most probably was incorrect anyway

svn-id: r8240
"
"cb5fb5d40381d76d6438a6eff882918de0d637a8","2003-06-01 14:30:26+00:00","added a getMaskBuffer method (makes it easier to read some of the code); merged setVirtscreenDirty() into updateDirtyRect(); made setDirtyRange a method of struct VirtScreen

svn-id: r8241
"
"ed0080e55b14b7f890449e5744633da46d41428a","2003-06-01 15:56:40+00:00","Added new note-lengths of indy3ega/loom. Fixed internote spacing.

svn-id: r8242
"
"7cfe07fdd301aa10a1e2f8009c2fb34067d88d04","2003-06-01 16:40:15+00:00","Reverted the recent o5_getClosestObjActor() change and fixed it by
measuring the distance in characters for V2 games instead. Now Edna won't
bring the same strange kid into the cell over and over again.

If necessary, we can still fix o5_getClosestActor() to handle larger
distances. It just takes a few more changes than I first thought.

svn-id: r8243
"
"3733667aa56ed50d1efea0734181e5c5b40a80b3","2003-06-01 16:41:25+00:00","Also call playerV2->set_master_volume when playerV2 exists.

svn-id: r8244
"
"ff5705b32c70406db97e64142472ae806f4b8413","2003-06-01 16:42:29+00:00","Added VAR_MUSIC_TIMER support to playerV2. Now Zak intro is synchronized.

svn-id: r8245
"
"f91de2ae1e731d3d02b55c33e52cd303b4ed2beb","2003-06-01 17:06:07+00:00","renamed&fixed contains(Rect) -> intersects(Rect); added extend() method

svn-id: r8246
"
"16b47e4f9537fcccd8b25ec8f561ef62b29287b6","2003-06-01 17:27:20+00:00","I forgot one note_length entry.

svn-id: r8247
"
"393e749785ffe11c6d5cbac3a74568950bcc07a1","2003-06-01 17:29:45+00:00","charset masking fixes, mostly for The Dig (hey I think I finally almost understand that part of the code :-)

svn-id: r8248
"
"3d77f7230e66438ace5a302d2154865acc3bd38d","2003-06-01 18:20:38+00:00","Enabled walk sounds in Indy3EGA/ZakEGA; cleanup (bug #747068)

svn-id: r8249
"
"42f6d1058164fc02c51949ad78ab183745dfbbe0","2003-06-01 18:24:10+00:00","Fixed hanging notes on Smart Jump when Note Off event cannot be found.
(I'm not sure why the Note Off would not be found,
but at least we're properly dealing with such notes now.)

svn-id: r8250
"
"26076b8841493ff174a3c71c2b153df0c8626966","2003-06-01 19:16:34+00:00","Hack to fix odd usage of the ParameterFader
in S&M around the dinosaurs.

svn-id: r8251
"
"674a34a3921dc084ae6050e3f2f930cd2a3909e3","2003-06-01 19:34:28+00:00","fixing sprite commit from yesterday

svn-id: r8252
"
"5bb59b47551c42e128e5270dd6407f375b4dd712","2003-06-01 21:21:10+00:00","cleaned code a bit, added SYSTEM_FLAGS and MOUSE_FLAG

svn-id: r8253
"
"17e6779b65dc864e6e239ff3c1d2cec90674ba3d","2003-06-01 21:52:53+00:00","Made some conversions explicit to prevent VC.NET 2003 from complaining

svn-id: r8254
"
"f8ead8a776cbb7326092820e21442d87feedb648","2003-06-01 22:53:44+00:00","remove useless screen updates, make non-seq intro parts escapable.

svn-id: r8255
"
"e95a72f7c42cbf53ff6e40813cab3d90b8e7e99a","2003-06-02 00:01:34+00:00","fix intro timing + text

svn-id: r8256
"
"281cce32b9241248a83137aaddabd1fbdc9b6029","2003-06-02 00:34:58+00:00","cleanup color cyclcing code; also perform color cycling on 'indirect' palettes like the shadow palette(s) (bug #706721)

svn-id: r8257
"
"1014c98fcbe61768e296beff3346a23768e53a6b","2003-06-02 00:53:31+00:00","screen combine rectangles now. even a bit less cpu usage.

svn-id: r8258
"
"88f1a4e27cc07302334799dad5526d5a9d18281a","2003-06-02 01:45:03+00:00","fix for indy3 VGA script bug (bug #743314)

svn-id: r8259
"
"4292d621afdc57b4e8640b51137d5700def9fd83","2003-06-02 02:25:24+00:00","cleaned up the restart/pause/shutdown situation a bit; added comment that explains how restart might be implemented

svn-id: r8260
"
"d811359226c5e8b9d4815d47ee0ef22f54909f8d","2003-06-02 03:01:22+00:00","add compiler version checking to configure script

svn-id: r8261
"
"ee886a6be29f1f9a6fca13c11b8b53b92b69c882","2003-06-02 03:30:41+00:00","fixed sprite animation bug in stdSpeak, cleaned fnTalk and made text timing in cd version depending on the end of the voc files being reached.

svn-id: r8262
"
"9be08a55f9e54f8cf7e49f2a202a8c373a113d3a","2003-06-02 05:38:45+00:00","Clean up debugger Restart function and move to SCUMM restart function

svn-id: r8263
"
"803d53dd4be77079d04ab205dac1d614533c54b8","2003-06-02 05:59:07+00:00","simon2dos uses different VGA_DELAY_BASE, fixes text disappearing in copy protection.

svn-id: r8264
"
"cee02068ca1285838ff07ded5021f59b9f303050","2003-06-02 06:39:54+00:00","Revert my last change, was correct according to disasm. but casued other problems.

svn-id: r8265
"
"3ac5b4ccfa2f394ce7d63c9bfe660fa02c4bf82a","2003-06-02 06:42:42+00:00","added some functions to SkyLogic, -Screen, -Talk and -Disk, moved SkyGrid out of SkyState

svn-id: r8266
"
"9a450413cd190c42f9e2be189132f7e7adb65106","2003-06-02 06:48:36+00:00","forgot to remove debug printfs and to make sequenceRunning volatile.

svn-id: r8267
"
"6c24f7dc4426a39d3d0059c1e2792e16e376ec3b","2003-06-02 09:35:08+00:00","fix disappearing foster bug

svn-id: r8268
"
"f8ab6ad8da72af5197a29684791a84543dc5bf67","2003-06-02 10:17:46+00:00","wtf is this doing here?!

svn-id: r8269
"
"2b1128acb5b1e681fa367a987759fddadccf4895","2003-06-02 11:20:07+00:00","working alignment check (but if alignment is needed it'll print out a 'Bus error' message which isn't nice...)

svn-id: r8270
"
"67c87824310efcd2174905f3f4037da0ec322973","2003-06-02 11:33:48+00:00","make V2 games use transition effects

svn-id: r8271
"
"fa93fe294fd7f6fd412cfa069aa26cdba5425cad","2003-06-02 12:17:51+00:00","alignment check extended to hopefully cover ARM, too

svn-id: r8272
"
"0bf6779189b0fd66b5ec1d12cd6446a4a2c52ecd","2003-06-02 17:32:13+00:00","added load directory support for v1 games

svn-id: r8273
"
"6dbd36d668f9e8fb08d3c9bc4da0ecfbad372a0e","2003-06-02 18:15:09+00:00","more v1 load directory ...

svn-id: r8274
"
"4729b52c3b15982bc23d22be57ce718b29080bc5","2003-06-02 21:22:54+00:00","revamped alignment test; don't delete config.log after configure run (after all it might be important to debug configure)

svn-id: r8275
"
"d4982a0b1d2cc21389029e071896216503719d64","2003-06-02 21:29:54+00:00","fixed compilation

svn-id: r8276
"
"bedd8c4d391635911602a43360040e78a6b4a8ba","2003-06-02 21:43:45+00:00","fixxed warning

svn-id: r8277
"
"06d340b47e0d52544ee0f6d5995cc137bf12ea7d","2003-06-02 21:54:55+00:00","added Jochen Hoenicke

svn-id: r8278
"
"c1dcc1a1ec7465d8366561dbfb9e33ed61f18610","2003-06-02 22:07:41+00:00","Korean is kr, not ko

svn-id: r8279
"
"3bc13178ffb202fe393f5c1a819f403929db6830","2003-06-02 22:43:08+00:00","experimental change: replaced drawDescString with enqueueText. fixes text-leftovers when scrolling the Dig (not tested in FT, though)

svn-id: r8280
"
"457d6b1484cf202f6a3fa1a1b54accfc5e6a5e18","2003-06-02 23:06:34+00:00","seems this breaks in FT; not yet sure why, but disabling this in FT till somebody has a chance to look at it

svn-id: r8281
"
"35f29951eb2a0ba3e97c10ee5e84007064221a02","2003-06-02 23:18:52+00:00","moved blast text code to string.cpp

svn-id: r8282
"
"cb9c64aae2fc19ce21b6d47670c8fe80abda9f29","2003-06-02 23:23:45+00:00","cleanup

svn-id: r8283
"
"3baff34226e276546e645faf85fe02d1bd067d92","2003-06-02 23:54:52+00:00","use enqueueText for FT, too

svn-id: r8284
"
"333f0d15fd26d0c7ff892ebcff110b0462d989e0","2003-06-03 15:27:11+00:00","fix flashlight in MM

svn-id: r8285
"
"5d70cc1b103822528fae062cce541abe7ffde737","2003-06-03 18:10:32+00:00","reduced number of copy_rects() during sequences.

svn-id: r8286
"
"fc350e6be6df0d5aa12e98495fc7b5e483553a5a","2003-06-03 18:35:18+00:00","some more inits to make compiler happy.

svn-id: r8287
"
"0bb87879c8d817f3db15fb3ae2ba0a9384e3566a","2003-06-04 06:34:14+00:00","V2 mouse cursor, for that extra retro feel

svn-id: r8288
"
"4e2eb20935a8660124541e91135326926a0353e9","2003-06-04 09:33:01+00:00","Save a bit of space for PalmOS

svn-id: r8289
"
"d61cd493af5f84ee3f4ed09e290c246c2dc6535a","2003-06-04 12:48:50+00:00","readClassicIndexFile updates from aquadran

svn-id: r8290
"
"bc9a04b0cf4a9bce8c1cec63f222a8c671d29b66","2003-06-04 13:15:06+00:00","Add MANIAC64 to these two MANIAC checks

svn-id: r8291
"
"97aaab94108c3ddbac82a130ddb4f4050867a880","2003-06-04 13:33:50+00:00","Don't attempt to play music/sfx on v1 games

svn-id: r8292
"
"6fd0e4a07f7502cf88e0d65a7030836196c15852","2003-06-04 14:37:43+00:00","Patch #747021: DIG&CMI 2 byte charset support (very heavily modified by me; still needs more cleanup but already works well enough)

svn-id: r8293
"
"ac57e79ca27222ffc1868e2515d6a07eff3a87a2","2003-06-04 15:04:00+00:00","cleanup

svn-id: r8294
"
"d496cecc982f13c8010d577236d6c133497af532","2003-06-04 17:13:24+00:00","some more mouse stuff..

svn-id: r8295
"
"0845c0adf01371771a158d3b91e249e58224e803","2003-06-04 18:02:41+00:00","fixed two mouse bugs

svn-id: r8296
"
"10b31ba7f05ef30c0eefaa7d779a56c0f889bbf9","2003-06-04 20:06:55+00:00","init _CJKMode properly, in all cases

svn-id: r8297
"
"ad04b310bc255a75997e97584aa02ec62c7daf4d","2003-06-04 20:13:16+00:00","fix warning

svn-id: r8298
"
"55abd7d5ec9bf279464dd5f7f9b3935050335b6f","2003-06-04 20:20:50+00:00","fixed compilation for vc6

svn-id: r8299
"
"ffef453d1a34bc29604fd4339db0b8a317c267d4","2003-06-04 21:45:29+00:00","cache room strip offsets (this should help performance on PalmOS)

svn-id: r8300
"
"69b55ea45f11b8a11b23d9092a706355b06b617a","2003-06-04 23:03:23+00:00","put a setFeatures member that allows to precompute game-wide stuff, such as CostumeRenderer, when features change, ie extremely rarely

svn-id: r8301
"
"d84c5de8e8f5c630bdf5f7d1d9a85a4f52f3e9cd","2003-06-04 23:15:42+00:00","looks like a glitch?

svn-id: r8302
"
"565a100c831fa76c634d210d636065042e96e49a","2003-06-04 23:32:09+00:00","some cleanup & refactoring (CJK fonts have proper shadows now, for example); preparations to merge NutRenderer and SmushFont

svn-id: r8303
"
"b4da713bfd0b3959932745390e61bc7398b40a05","2003-06-04 23:51:25+00:00","some more cleanup

svn-id: r8304
"
"c898d6117e0cdd6f38f803f9af7c01fdfaabfbe1","2003-06-05 00:12:23+00:00","finished my drawBitmap optimisations

svn-id: r8305
"
"870572ca49c39c25dc0d8c77cfe015cdab05ee05","2003-06-05 00:18:15+00:00","there are a few places in maniac and zakdemo where we *do* have to store the run & color <grmbl>

svn-id: r8306
"
"23196c1257772d3aa109ae735a48ac0356b92153","2003-06-05 02:44:18+00:00","added a global CostumeRenderer in the VM, to avoid actors reinstancing it every time

svn-id: r8307
"
"3bbaa8edb55614111891e7530af8d196a77a3496","2003-06-05 02:46:08+00:00","converted from struc to class and added a function to update _numStrips, needed since we don't reinstantiate BCR all the time anymore

svn-id: r8308
"
"cf8d8617c97da441e016de5a8d523fed7d33ba30","2003-06-05 02:47:12+00:00","use the global BaseCostumeRenderer instead of reinstancing it every time

svn-id: r8309
"
"0aff2d3461396a0957bf5cc5a7ab87520e8d1b7d","2003-06-05 03:19:07+00:00","did a bit of cleaning and added TODOs ;)

svn-id: r8310
"
"91a3d553e4aa9d31d73fa3607a659a2d33aa1a91","2003-06-05 03:28:35+00:00","unmacro-ed and templated ABS, MIN & MAX

svn-id: r8311
"
"1cbd8b55ed98df5ba8ad0900bc153509d3a5b69a","2003-06-05 05:03:57+00:00","fixed compilation for vc6

svn-id: r8312
"
"b542fad7d422ef9756c091c755c9fbb25e2876dd","2003-06-05 06:59:53+00:00","Fix the ugly striped shadows in AKOS codec 1 when drawing scaled actors.
This was noticeable in Full Throttle and Curse of Monkey Island, at least.
I don't remember seeing it in The Dig.

svn-id: r8313
"
"b8080605cc2dc225255b91abd46af6ac4367c3f9","2003-06-05 07:05:37+00:00","Inverse iris transition effect for V2 games. Also, some transition effects
weren't working properly unless the entire screen was first marked as not
dirty. I hope fixing that didn't break anything else.

svn-id: r8314
"
"fa6b0b6736f6618ebfcc77d9fd67fced048a5b70","2003-06-05 07:17:57+00:00","cleanup

svn-id: r8315
"
"bd23bcd12827d2ba2e9695d30bc2b056306746e2","2003-06-05 07:25:36+00:00","The Full Throttle end credits (press 'W' to skip to them) look much nicer
if the blast texts are drawn before the blast objects. This may cause
regressions, but if so perhaps we can fix them by conditionally making
blast texts produce a charset mask? Blast objects already honors the
charset mask, so the end result should be the same as if the object was
drawn first and the text afterwards.

svn-id: r8316
"
"d510447d0505915bd11535137b8382db72a5c460","2003-06-05 07:52:50+00:00","optimisation to blit rects in one shot when width=pitch=screenwidth

svn-id: r8317
"
"9533f5605aa9203dc3f10d3f638685a74f347795","2003-06-05 08:45:24+00:00","Synchronize channels playing the same frequency.  This prevents
interference effects.

svn-id: r8318
"
"6c35550334c7d5ff8e6c18d7aff7ec02c90d6448","2003-06-05 09:54:57+00:00","proper const cast

svn-id: r8319
"
"c7d87b8a671bd0b1b01a4ad474883ea995758db5","2003-06-05 10:22:16+00:00","fix for bug #749355

svn-id: r8320
"
"c73ffd366ab98b01f2db9b4287a7896b0e1822fb","2003-06-05 10:27:15+00:00","Regenerate strip table when loading

svn-id: r8321
"
"a61e8453132d8f6c16c66ee89c1cfa95cd1f5ecf","2003-06-05 10:28:48+00:00","modified comment

svn-id: r8322
"
"740e7cc0ff523ec4d238f6872f8c96e3cb9a1bc5","2003-06-05 10:33:13+00:00","restricted check to V2, stupid mistake

svn-id: r8323
"
"33dceea47702608512f9fb993187d64d43c9a74e","2003-06-05 12:20:05+00:00","Commit combined speech and subtitles patch
Add support for nosubtitles config option

svn-id: r8324
"
"ceb1a34b057ddfad91bd71daafceb4af6d4c509e","2003-06-05 13:21:03+00:00","Last commit should have been made simon1 only

svn-id: r8325
"
"e97b91161cf2ab408cbe0fb6aeb4d994070fe916","2003-06-05 13:47:07+00:00","Adjust default _subtitle values

svn-id: r8326
"
"bec113014805f79507b0cdde38689f5dac40e791","2003-06-05 14:05:48+00:00","Typo

svn-id: r8327
"
"41c03fa082353423692fb7c84e5a46ab5f1fbdc5","2003-06-05 15:31:34+00:00","clarified comment

svn-id: r8328
"
"94bbf1b9a09d87728e1be4f4122cad938da1e21f","2003-06-05 17:22:15+00:00","added v1 gfx codec, (not working)

svn-id: r8329
"
"44e76b4da66b5805e12312f8061a97a33a0ee0b5","2003-06-05 18:30:29+00:00","fixed my last commit

svn-id: r8330
"
"da6ac080af95ed7a0a2e3a5d691ef6af0b6732f3","2003-06-05 18:37:11+00:00","disabled mask for now

svn-id: r8331
"
"8e253b1937377151dcaa66b6931a5ad6b8938122","2003-06-05 18:54:26+00:00","fixed sprite drawing, added some mouse support and some logic routines.

svn-id: r8332
"
"5e18dc19ff186634e37e824d9006de394827398b","2003-06-05 19:26:43+00:00","a little better

svn-id: r8333
"
"98b37121630df40210cac231867c6b0799692930","2003-06-05 19:45:27+00:00","fixed caching routines

svn-id: r8334
"
"4a934a5519484031c4d9a644837ca6ad3d7a753c","2003-06-05 20:37:52+00:00","make mouse move to middle of screen at start and let skystate initialize its _objectList

svn-id: r8335
"
"717bdd92239a65923d9a96b5e59bef325e46ac6c","2003-06-05 21:46:59+00:00","fixed mouse cursor/transparency

svn-id: r8336
"
"1200d5997ed7b9611c1695ee46c5c828584ef22b","2003-06-05 22:26:06+00:00","fixed switch opcode

svn-id: r8337
"
"ba81aa9f769881176bf49cbd68e3813e40804b71","2003-06-05 23:18:10+00:00","proper mouse transparancy fix, should work for all cursors now

svn-id: r8338
"
"6f9b34df1e7897f490e24f768e7e942cb105193a","2003-06-05 23:55:57+00:00","unified some code

svn-id: r8339
"
"74110342157470ce4fda159b6f9327077da783ab","2003-06-05 23:56:32+00:00","make code use our coding conventions

svn-id: r8340
"
"067609c83231904ae2268cc373a2ba924b539c0a","2003-06-06 00:16:34+00:00","cleanup

svn-id: r8341
"
"ddf44b02757cb270f0dbdfd414e7cb3792251f21","2003-06-06 00:56:59+00:00","small bugfix, menu still doesn't work. -_-

svn-id: r8342
"
"8e8c702e65ec4170bd8c4c8b6d89d4c97db1a5e1","2003-06-06 01:14:17+00:00","forgot to implement right mousebutton. :)

svn-id: r8343
"
"1f846b55dce6c66b169d033dc0d8ab4a46616c37","2003-06-06 04:20:41+00:00","changed height of virtscreen for v1 games

svn-id: r8344
"
"00288b07f8463b61a39ab57eec415f149c333fb1","2003-06-06 05:27:45+00:00","fixed almost object drawing for v1 games, (ugly hack for drawBitmap)

svn-id: r8345
"
"620762b46626593fe768aa7a4ca2c1f2b0a84d78","2003-06-06 07:35:19+00:00","v1 object drawing updates from aquadran

svn-id: r8346
"
"560c03f6ab658122fae30a86494d988538c87ce2","2003-06-06 10:01:26+00:00","Hack to fix the placement of the green transparency on the tank in the Hall
of Oddities in Sam & Max. As far as I can tell, this was a bug in the
original game as well, so this is one of the rare cases where I think a
hack is ok even as a long-term solution.

svn-id: r8347
"
"c89b04488d16e878dcf2f9775bd2a388d4bee0f8","2003-06-06 10:47:12+00:00","Get rid of *64 targets, use 'maniac' and 'zak' autodetection for the AFTER_V1 flag instead.

svn-id: r8348
"
"62e3a110ddf059ac636717d4259e7615a4740472","2003-06-06 11:59:29+00:00","added a currently disabled hack that can be used to get costumes used in V1 games (currently crashes since we don't support that custome format yet)

svn-id: r8349
"
"6e0a3ec6fa89015f3ca8983d7d4af440362d8be7","2003-06-06 12:27:33+00:00","Order matters! Inverse iris is transition effect 5 and nothing else.

svn-id: r8350
"
"d813deb5e801aaa74e06b27643542c7ae36ec545","2003-06-06 13:44:49+00:00","changed warning() to error(), this is how it is in the original, and this seems to happen when you try to exit the underground-bar currently, don't know why yet.

svn-id: r8351
"
"e02875be67940a879ed35359747c229f9e0dcade","2003-06-06 13:55:16+00:00","fix logic script bugs.

svn-id: r8352
"
"1326772037669ea54637f06f06348622de9aa434","2003-06-06 14:04:16+00:00","whoops.

svn-id: r8353
"
"64ffbe6021aa9dadd7a19770d296a42148db071b","2003-06-06 14:40:46+00:00","add some (mouse) stubs

svn-id: r8354
"
"09b1baf73151d1f0de6b547bf918dada2395d10c","2003-06-06 16:40:44+00:00","misc fixes

svn-id: r8355
"
"1fcbdf792b8aa3ed9adfe3d0bfe1ac7a110ac399","2003-06-06 17:02:10+00:00","forgot to activate that code again

svn-id: r8356
"
"4d5a2847040fa7fba58640ad17738e3e18f0c90f","2003-06-06 17:59:22+00:00","changed sprite priority, changed some errors to warnings and added hack to get past the first scene

svn-id: r8357
"
"89c6d29c95df0767e6068337ec0e77cf5170cdf5","2003-06-06 18:08:16+00:00","forgot to remove that

svn-id: r8358
"
"0f9d447bd450ad65727c925371773be0519e3d2a","2003-06-06 20:54:52+00:00","add fnRandom()

svn-id: r8359
"
"1cae280e79ded4bf68b5692f74de9c1f47644a5c","2003-06-06 20:55:39+00:00","rewrite code a bit: personally I find it much easier to understand what the code does this way (the &6 trick is cute, but obfuscates the meaning of the code)

svn-id: r8360
"
"ce0352eab224df2b2710ec40918f9b2dbd203fc6","2003-06-06 21:56:37+00:00","Added a fix for music_timer in V3 games.

svn-id: r8361
"
"2d74732afbca13be231ce1da9b83561df8788b00","2003-06-06 21:59:56+00:00","Always reset the VAR_GAME_LOADED variable (if it's available). This seems
to fix bug #740148, at least partially.

svn-id: r8362
"
"15d58d9f52d4e410b4aa1578bce549d21c9c25f3","2003-06-06 22:35:23+00:00","hook for V2 costumes (based on a brief glimpse at the costume resources; however I haven't yet looked at the rest of the format, so this would just crash if you enabled it right now)

svn-id: r8363
"
"4b227da824c984fca082d2c6f90ed13cfaa0dd09","2003-06-06 22:51:33+00:00","Preparations for removing GF_AFTER_V? flags

svn-id: r8364
"
"229c5bb3284847db07295de705282f6f66e9d919","2003-06-06 23:22:59+00:00","I have no idea if this is right, but at least sound seems to be working
again in Maniac Mansion, Zak and EGA Loom.

svn-id: r8365
"
"04db5c12ab3593c3bdc9f7a5a516815f5c46f4ca","2003-06-06 23:55:00+00:00","make version public

svn-id: r8366
"
"00b53b5e81730bc9f952307390b29a652a7309db","2003-06-06 23:56:56+00:00","set _version to detector value

svn-id: r8367
"
"9f4d675eba509d0a1343215a1928f54ff5c58e6b","2003-06-06 23:57:59+00:00","remove version column

svn-id: r8368
"
"badfdeedd344a7e5a20e6071113f41b4722d34d5","2003-06-06 23:58:39+00:00","added to new feature flags

svn-id: r8369
"
"5f5b0e6c7e9402ed8db9b4d0aa014e0f2ad2b5d7","2003-06-07 00:01:18+00:00","use _version

svn-id: r8370
"
"f22171f934c0a9e62a9c21a0d2aa1c23a753dabc","2003-06-07 00:08:47+00:00","compilation fix

svn-id: r8371
"
"86df3537b9339fbb72251a688c49cffc85f51034","2003-06-07 00:13:26+00:00","replaced GF_AFTER with _version

svn-id: r8372
"
"033c264ea53bba5532be745d8180b2c677f61ef5","2003-06-07 00:16:22+00:00","Loom unification

svn-id: r8373
"
"6f0943e9c8e36523c95d931d26f5bb55044e1853","2003-06-07 00:16:54+00:00","removed GF_AFTER flags (except GF_AFTER_HEV7)

svn-id: r8374
"
"4303edcbbd6f6073be8c7f2ec00b1e92d19ecb62","2003-06-07 00:33:46+00:00","make SmushFont inherit from NutRenderer (TODO: drawChar stuff should be unified, too)

svn-id: r8375
"
"55d3168c59d9e8244705e44e82602c69b2b8d7f2","2003-06-07 00:45:32+00:00","adhere to our coding style conventions; removed some unneccessary code

svn-id: r8376
"
"49b9a8fc9d999b82c3e694a6da672b259089fe97","2003-06-07 00:49:36+00:00","follow our coding conventions

svn-id: r8377
"
"0c85e713ac01c991d9155683340e0dd5e7caf750","2003-06-07 04:24:57+00:00","init costumes for v1 games

svn-id: r8378
"
"f1b3e170e9905967c72eb052e45bb6787b4e1516","2003-06-07 09:48:10+00:00","This should be the right check for header_len.
I first thought that old games did not have GF_SMALL_HEADER.

svn-id: r8379
"
"395ab54ea976817d5c1ea304968561d4014ddf2a","2003-06-07 10:44:54+00:00","some changes for v1 costumes

svn-id: r8380
"
"b6b6fb52e50e62b2ea7143d28c52adab53363b7e","2003-06-07 11:59:56+00:00","CD Loom and EGA Loom should not use the same dissolve effect, so I've
reverted that part of the Loom unification and clarified the comments
slightly.

I also slowed down the CD Loom dissolve a bit. It's still faster than the
default behaviour, but I think it looks better this way. (Feel free to
change that back again if you don't agree.)

svn-id: r8381
"
"70210d5d3af231a6d3ed1735ce5658fb5fe15997","2003-06-07 14:02:07+00:00","fix set costumes for v1

svn-id: r8382
"
"fedc3b7e62e11dc119d4ec80b7e25e7a11d4f43e","2003-06-07 18:26:51+00:00","Fix for bug #654286: ZAK256: Ending credits are illegible

svn-id: r8383
"
"209cd912cfdfc6fd5b69c9c3b77b227f6b6324aa","2003-06-07 22:56:47+00:00","cleanup

svn-id: r8384
"
"15d5ceffbd73e63380d8c72a507c27315fbfeebf","2003-06-07 22:57:27+00:00","case 9 was drawStringCentered but should have been drawStringWrapCentered; cleanup

svn-id: r8385
"
"3f39f7d90965a939062228935b46c08022622f16","2003-06-07 22:58:29+00:00","cleanup and a few fixes for text positioning (but am not sure if it's fully correct now either; will have to compare smush subtitles we generate with those from the LEC engine)

svn-id: r8386
"
"f273c4195b77ce699520071cdec410fcfa54bdb8","2003-06-07 23:12:46+00:00","cleanup

svn-id: r8387
"
"faadbcafa70365bf3ee1b48efff5b94d62fcece2","2003-06-08 00:39:08+00:00","cleanup; got rid of the split function and rather work in place (so instead of allocating dozens of small goblets of memory, we only need to duplicate the string once); fixed some text positioning bugs (but again, to get a real accurate implementation, I'll need to study screen shots of the Dig/FT/COMI videos and compare them to our results)

svn-id: r8388
"
"e37f0b76e5ae66094ad41a794c20194e81a70af4","2003-06-08 09:15:37+00:00","New Memory Card dialog

svn-id: r8389
"
"076d55418946db6a63c45b1e9a8fed0dc0985498","2003-06-08 09:17:03+00:00",".

svn-id: r8390
"
"5333c8a2db793aa67339533a6448782362c538b6","2003-06-08 09:18:21+00:00","MP3 support for audio tracks

svn-id: r8391
"
"8cc50d2460e8eda4c77c7aa49c8ef83090492c86","2003-06-08 09:26:22+00:00","New memory card dialog, option to move games list to memory card

svn-id: r8392
"
"2600628339853a6734c5ebfd44c849c31e3f321c","2003-06-08 09:28:18+00:00","Cleanup, add qsort function

svn-id: r8393
"
"ea5bdbde417765befc42b2e8f8cd3e72123bfda7","2003-06-08 09:29:53+00:00","Reminder for future %c implementation

svn-id: r8394
"
"f23deb409e25e1d0c77b66eb7f26dff9f530921a","2003-06-08 09:37:49+00:00","Updated with new files

svn-id: r8395
"
"b3126658f5656009387efd63b7b3c1bde1f7ce50","2003-06-08 09:40:55+00:00","Add V2 charset

svn-id: r8396
"
"083f4c48455d2bdeb84877c7f3ce2b0169bff94e","2003-06-08 11:54:35+00:00","never call exit(), always go thrugh OSystem::quit()

svn-id: r8397
"
"be9e6e85db6ecbaaefcc8fe46066e0ac34bf1201","2003-06-08 12:11:14+00:00","added quit event

svn-id: r8398
"
"f8ec8a99035eb8b13f2537b182d8d5c2e913bbe2","2003-06-08 12:49:34+00:00","cleanup

svn-id: r8399
"
"a1caf1f9f94cb001ae1aff35fb10a0950de8901c","2003-06-08 12:56:42+00:00","forgot to check this one in

svn-id: r8400
"
"8ab745de662d1f58284a72b2db84ec69319d3491","2003-06-08 14:55:21+00:00","Finally fixed a slight bug in the CoMI cannon behaviour.

svn-id: r8401
"
"ab7f8b337869b367a7a18d6235a9b481f9d05cfb","2003-06-08 15:17:14+00:00","Fixed recent regression (too many blast texts) in The Dig's end credits and
made the text scroll off the screen instead of just vanishing at the top.
(The latter also applies to Full Throttle's end credits.)

svn-id: r8402
"
"f034b339cd5251fc2017973939e6c5bf980a0fe3","2003-06-08 17:59:09+00:00","reimplemented createBoxMatrix; this is much cleaner and easier to understand than the original code (IMHO); in a few cases it gives slightly different results (because the old code didn't always find the shortest path), but that shouldn't cause any problems

svn-id: r8403
"
"cc41d96b772343fb126b08e881b9cf143f5db14b","2003-06-09 00:35:32+00:00","cleanup

svn-id: r8404
"
"18a4fc7df69e63d1015841a013b22b6980bd1a87","2003-06-09 00:40:53+00:00","Fix for bug #746850 (this change was originally meant to 'fix' turning of subtitles in V7/8 games; however this is a totally wrong way to achieve that)

svn-id: r8405
"
"c04f39304b2a45ed645b9a9a9151c7d278bebaab","2003-06-09 00:46:32+00:00","don't incorrectly treat SO_PRINT_WRAP like SO_PRINT_MUMBLE; rather just ignore it

svn-id: r8406
"
"54e4ac9746f97dc311ae2001c70a38c10d68bc7d","2003-06-09 00:51:09+00:00","better (proper? hm...) code to deal with turning of subtitles in V7/V8 games

svn-id: r8407
"
"35ef32cf4bb23139ff32e6a445fffb6ab639acde","2003-06-09 01:06:29+00:00","cleanup

svn-id: r8408
"
"82af035f91077551b4bbf3a284d49b50e36bc88d","2003-06-09 01:19:25+00:00","added clear_sound_proc method to backend API (this requires all backends to be modified, but can't help it)

svn-id: r8409
"
"f7e85af55273ad9d2d342d5cc36e92beaa23186d","2003-06-09 01:19:44+00:00","use clear_sound_proc to properly deinit the mixer (this fixes a crash-on-exit)

svn-id: r8410
"
"b7ddc7bc5765328f81628bb6b5e7083a0101971e","2003-06-09 01:32:36+00:00","allow quit during smush playback; cleanup

svn-id: r8411
"
"68bb844d638b654d37c7f03ebc55a351de5229ff","2003-06-09 02:33:27+00:00","some talk-related bugs fixed

svn-id: r8412
"
"0eac9a00cf84656981c6f1fc247d3fbeba0a16b5","2003-06-09 02:53:00+00:00","whoops.

svn-id: r8413
"
"5ab796c4de25da84b564bd9a486cfeb5f8c5cbb3","2003-06-09 09:48:53+00:00","clear_sound_proc

svn-id: r8414
"
"5813724a33ab4228530d8cd9c34b52673bb03b53","2003-06-09 12:24:05+00:00","Fixed text-positioning regressions in the Full Throttle intro and in The
Dig's 'Spacetime Six' movie.

Also rewrote drawStringCentered() to be more like drawStringAbsolute(). It
makes sense to me, but let me know if it causes any new regressions.

svn-id: r8415
"
"0fabcc6571132291d8f58153c2e97a920b17a03e","2003-06-09 14:31:38+00:00","fixed SkyLogic bug and made font highlightning finally correct.

svn-id: r8416
"
"839cb1c4f76502352f56fe102116f2d8625df32b","2003-06-09 16:38:47+00:00","Fixed VC++ warnings

svn-id: r8417
"
"d398b818f82c3d8d6e467c6e1ffbf13edc3e8d9c","2003-06-09 18:15:02+00:00","added fnLookAt()

svn-id: r8418
"
"74bacc470f9442edad227cb9163abda6f7ba4f10","2003-06-09 18:58:37+00:00","mouse-fixes, note that: buttonPressed() keeping track of a repeated push DOES NOT WORK YET, _bMouseB gets cleared elsewhere, so we obviously need to come up with something else. and we still need a wait_relative equivalent to have a proper fnLookAt() ...hmm...this commit message is starting to look like a todo list. oh, well. :)

svn-id: r8419
"
"d899de98ba7e61337058f19d8dbc5fa8f9bb3326","2003-06-09 20:38:26+00:00","fixed compact data

svn-id: r8420
"
"1f6a8b4fb8f4b6a2ecaec0785684dd3c75feed30","2003-06-09 20:41:08+00:00","fixed issue about file decompression.

svn-id: r8421
"
"d95e9d09ddfd7ac157831c3dbc69631be6b14d4c","2003-06-09 20:45:00+00:00","whoops.

svn-id: r8422
"
"797eaee43385ddd438bc08fcf9e4dbae625fb978","2003-06-09 23:02:56+00:00","removed debugging leftovers, fixed one more sprite clipping issue.

svn-id: r8423
"
"4c5501d0c33107439fe9ad4ae7b4d40b434a657e","2003-06-09 23:21:31+00:00","fixed warning

svn-id: r8424
"
"8f0bdc4657fde52407b2d094c9a0222aa8a2f210","2003-06-09 23:27:31+00:00","Sky shouldn't error() if no speech file exists for a sentence

svn-id: r8425
"
"70fa08ab524c93c9217881bd05a3e2a62a2be2aa","2003-06-09 23:37:51+00:00","Sky shouldn't error() if no speech file exists for a sentence

svn-id: r8426
"
"c2ef3a1afb70394bcee69503762ebe9fc88599da","2003-06-10 06:41:16+00:00","CHARSET_1() should only care about talk sound effects, not ordinary ones,
when deciding whether or not to call stopTalk(). Otherwise some looping
sound effects can keep an actor talking forever.

This should fix bug #645976 ('SAM: Sam talks forever inside BOTs diner')

svn-id: r8427
"
"cff68f81fd7315f14f3159ff9732f8efbd6e6b73","2003-06-10 11:19:00+00:00","Updated comment.

svn-id: r8428
"
"f36459f8ba1493cf440a51098cc5c0dc4be3df0c","2003-06-10 16:25:49+00:00","cleanup

svn-id: r8429
"
"a26c74c108c2b1c7458ab05d6f85484dda47b827","2003-06-11 05:06:22+00:00","Added MSVC6 truncation warning to #pragma

svn-id: r8430
"
"167ad2575a68ec09e6b855c8d3eb3cbc4cdcfeef","2003-06-11 05:08:41+00:00","Fixed MSVC warning

svn-id: r8431
"
"d2c952b3154523a718c49df9b5a01318c4dc709c","2003-06-11 05:54:46+00:00","Fixed race condition in MPU401 shutdown

svn-id: r8432
"
"01ba60ccef360f81460900154f9e35265fb40618","2003-06-11 06:43:24+00:00","Fixed post-mortem attempts to transmit MIDI data

svn-id: r8433
"
"c117ef1e5082bdd831c2412b20ddeb3b2056ff63","2003-06-11 06:49:47+00:00","Fix for bug [741592] GUI: Switching music driver mixes up music
Implement true music driver selection from the GUI options dialog.

This implementation depends on a new, transient config domain called
'user-overrides'. Probably any other config changes made from the
options dialog will need to go into this domain, which is now
loaded after the game settings are loaded.

I hope this is the right way to do it. I'm still a little fuzzy
about our game settings architecture. If anybody suddenly gets
a '[user-overrides]' section showing up in their scummvm.ini or
scummvm.rc files, you'll know why.

svn-id: r8434
"
"6f50feb359c9e6e4aaef8a5985eef5f38cd6c5fa","2003-06-11 07:14:39+00:00","fixed cast warnings

svn-id: r8435
"
"eb23eb1cd78e4a5bc2c81ae0cc631e0e7c613c08","2003-06-11 18:30:28+00:00","Removed unnecessary warning.

svn-id: r8436
"
"fdf69876ae458426c83ebbffa500b589590b255b","2003-06-11 18:34:37+00:00","Fixed command line options being ignored when the launcher is used.

Again, I hope I'm manipulating the domain-based config architecture
correctly. I've created yet another transient domain called
'_COMMAND_LINE', so that after game-specific options are loaded,
the command line options can be loaded and override the config
file. GUI options are then loaded so as to override command line
options.

svn-id: r8437
"
"17a5a69c0447f8b8f4cd47c99e5cf76ab288f75b","2003-06-11 21:34:34+00:00","fixed createBoxMatrix for small header games (bug #752844)

svn-id: r8438
"
"0503b553dfddc736a14a1b7d894308929e8b0ef5","2003-06-11 21:45:47+00:00","some walk fixes

svn-id: r8439
"
"f504809b87ea5a3e879513051385049964af86a1","2003-06-12 06:45:48+00:00","Applied Jamieson630's race condition fix to the ALSA driver as well.

svn-id: r8440
"
"a8b61e464f6184f0d4e2b964a77fab1d461ef164","2003-06-12 06:53:05+00:00","The compressed box matrix would sometimes refer to the box after the last
one. This was probably harmless, but the fix seems to be trivial. I hope.

svn-id: r8441
"
"a06a3130ea2418046858f81a352b38915b0eadbc","2003-06-12 07:26:21+00:00","Update indy3ega/loomega issues

svn-id: r8442
"
"ce9faadf86e65facb8765ec00af7ac0fd9876a45","2003-06-12 07:30:38+00:00","maniac/zak are working now

svn-id: r8443
"
"6dd9f8c00364085ae24456cc28446fa6ea0129d3","2003-06-12 07:46:48+00:00","This was missing

svn-id: r8444
"
"15d029cb194477da6836ca420efe7f57d7a0675d","2003-06-12 09:33:13+00:00","make readable on standard terminal without wrapping (80 char)

svn-id: r8445
"
"c26bdae2071aa510290ee61a366aee8e0aab715e","2003-06-12 12:22:57+00:00","hook subtitle variable up to f9 for loomcd

svn-id: r8446
"
"01cb6e2ab9aa8270b7116782898a386f13b67036","2003-06-12 15:20:58+00:00","indention

svn-id: r8447
"
"aabfc254c1ad35b796b2780e76280508882df98c","2003-06-12 16:38:43+00:00","rework loom subtitle option handing

svn-id: r8448
"
"d7b7abd93ff40d85ffa531d643a6f28987c6f0e6","2003-06-12 17:33:45+00:00","Fixed MSVC warning

svn-id: r8449
"
"66af2e98616288165a9093e139fa6cf8bd901ad9","2003-06-12 17:34:34+00:00","Added MPU401 crash fix

svn-id: r8450
"
"5054e10573a73f17b4f2891eb1e3bd8b379a527a","2003-06-12 18:18:58+00:00","this camera movement check seems to be new in V4 (or even V5 ?)

svn-id: r8451
"
"baaf6502ec5dc06d362fd2b6be80caaecfad6b43","2003-06-12 18:46:37+00:00","Made notation of transient config domains consistent.
Now all transient config domains use a name
in the form _TRANSIENT_DOMAIN

svn-id: r8452
"
"c6f7c504836d40823e288d3ec8284e78f9119fd2","2003-06-12 19:06:52+00:00","Removed S&M Bumpusville hack made unnecessary by
another fix (presumably the BOT Diner fix).

svn-id: r8453
"
"fd931291d12f5932df1d31481d6f3c50d526a9e2","2003-06-12 19:22:40+00:00","Fixed problem with variant game IDs (e.g. 'tentaclea')

svn-id: r8454
"
"9d76540e75581126676f5e9aa71ddc21d9bbbdd1","2003-06-12 20:35:13+00:00","remove unnecessary newline

svn-id: r8455
"
"70f3302a88fefba098b145c08ad867ee7c41036c","2003-06-13 06:45:05+00:00","Added comment on how Sam & Max uses one of the current unimplemented
opcodes.

svn-id: r8456
"
"36c50f10f3816aaad247b179da39971246162539","2003-06-13 09:11:31+00:00","fix for bug #752860 (based on patch #748675)

svn-id: r8457
"
"77aa2fe000ef28f05480ad6f927fd17fc61156f9","2003-06-13 09:24:00+00:00","fix for bug #752843 (based on patch #748675)

svn-id: r8458
"
"6bce6b4069cb9ca92d7837be44a5a7751e6ad878","2003-06-13 10:13:41+00:00","make -z output align nicely

svn-id: r8459
"
"423ccef9a2ba885c5888856e2e031d4883c8460b","2003-06-13 17:35:44+00:00","Hack to avoid bad actor crash in o5_walkActorToActor() when using the camel
in the FOA 'wits' path. We have a number of these hacks now...

svn-id: r8460
"
"6c1a5573afe06f5725bfcf0cf4a4ebe1b1387dcf","2003-06-13 18:09:18+00:00","Cast %c error() parameters to byte before printing, like we do elsewhere.

svn-id: r8461
"
"51abf2fcc3eb8792452faa2e0293f846e4323769","2003-06-14 08:16:10+00:00","add support for strange beos gcc version strings

svn-id: r8462
"
"c1880ad5224f6d3e0245b5c44ba2128ea816b68d","2003-06-14 08:57:56+00:00","Format string/argument mismatch fixes.

svn-id: r8463
"
"54453b64bf83cce0f1753c40045a917f118e00c1","2003-06-14 08:58:56+00:00","Format string/argument mismatch fix.

svn-id: r8464
"
"e1c655f10f98b848db2460c8fb0d3a62c43c5624","2003-06-14 10:14:28+00:00","fix 0.0368 text decoding bug

svn-id: r8465
"
"90b96f2e164115db20add0ad571d7ad2e6d0706e","2003-06-14 11:48:09+00:00","fix bug #754378 (I hope)

svn-id: r8466
"
"aa83d4fd3175b62bbf272c38513d177cb0f1d5b0","2003-06-14 11:52:34+00:00","cleanup

svn-id: r8467
"
"f4a31da51362034d7abe5699f9c7e2096060dfad","2003-06-14 12:23:30+00:00","runHook -> runInventoryScript, VAR_HOOK_SCRIPT -> VAR_INVENTORY_SCRIPT

svn-id: r8468
"
"e5d02f1774f4e2d5e5da268c4cc02effa9ce46b3","2003-06-14 12:24:42+00:00","init _2byteFontPtr

svn-id: r8469
"
"ab40e0cfc90e4747760b4a11f7ae373770860e11","2003-06-14 12:50:14+00:00","fix leaks

svn-id: r8470
"
"3fc2d76452a9a610862a4ea1f1893744e6362496","2003-06-14 13:13:17+00:00","another leak

svn-id: r8471
"
"af979a4a7abc1fc2b09511c39aa69c9da6b52108","2003-06-14 13:26:11+00:00","oops

svn-id: r8472
"
"4e57157cda3e627381d0e3d7e83e46c2c5ab96dc","2003-06-14 13:38:22+00:00","renamed _bcr -> _costumeRenderer

svn-id: r8473
"
"9555bff0997c78bf4088d3f543da9c2de0f149a6","2003-06-14 13:39:03+00:00","small fix

svn-id: r8474
"
"12edf335f38d24995298d7d4df1cf26329b340bf","2003-06-14 13:49:47+00:00","init actor things to make valgrind happy

svn-id: r8475
"
"eb808a8d4c5484e79c573485a1e2819275082eee","2003-06-14 14:58:08+00:00","make file objects stack based where possible, fixes a bunch of leaks

svn-id: r8476
"
"e3b2ca8e2fccb3d47e4fd6c87a88aec7dc72b2c6","2003-06-14 15:19:41+00:00","revert some changes as simon uses dynamic file objects for sound objects later on

svn-id: r8477
"
"a42fa9e25ce7d0a35016e483b0cf98e3512e98ea","2003-06-14 16:45:38+00:00","fix for bug #749249, related with path of game data placed on root drive under win98

svn-id: r8478
"
"67d1a48efc75eb34ff56f5baa85d55ea02cacde7","2003-06-14 16:59:20+00:00","Fixed o6_band() to be 'logical AND' instead of 'logical OR'. I've forgotten
who pointed this out, and I don't know which games use it.

svn-id: r8479
"
"a4edad02b6da4c41410ec045b592a51bba5f581c","2003-06-14 18:15:14+00:00","cleanup

svn-id: r8480
"
"9658dd6ea367ce71e1928003236c1801c5e3b1ee","2003-06-14 18:20:56+00:00","fixed aquadran's Windows fix (a pointer is const for good reasons; simply casting it to something non-const is bad, and undermines the compilers aliasing detection

svn-id: r8481
"
"f7a8cbf7c73479ff086276ef04b0fea15085a13a","2003-06-14 18:52:30+00:00","Patch #754151: Removed READ_*_UNALIGNED and always read stuff bytewise; augmented by some more changes of mine

svn-id: r8482
"
"08e772dcf06b4f31645461bb0bda44d5a0a58927","2003-06-14 20:55:09+00:00","Fix for bug #751782 (Quitting during SMUSH movies doesn't always work)

svn-id: r8483
"
"9f8338503aabee8f2c4bc44d33d6266d573009e9","2003-06-14 21:16:22+00:00","added tilda (~) character to GUI font

svn-id: r8484
"
"b8e32a5b6fb07424b5dc6329ee72a83c710a11fb","2003-06-14 21:18:14+00:00","Patch #745843: Help Dialog; in addition, I moved the 'About' dialog button from the options dialog to the main save/load dialog and enlarged & rearranged that dialog

svn-id: r8485
"
"e316699f7b1ea7a8edb73fecfc5fd5eafeb49e97","2003-06-14 21:19:08+00:00","added help.cpp / help.h

svn-id: r8486
"
"5c56edc26f2c1b82f97f37b60f8f75bd16c3fdb4","2003-06-14 22:42:14+00:00","fix for LE systems

svn-id: r8487
"
"f51caefbe0ff987df32bb4fd89ddcf27166c7db1","2003-06-14 23:05:40+00:00","some more cleanup

svn-id: r8488
"
"4f6573794be43fbe66c5f0e03ed22ac3aa07a53b","2003-06-15 00:07:24+00:00","fix leak

svn-id: r8489
"
"7d75334826fae998435a79591f0dc5b537fe195b","2003-06-15 00:18:19+00:00","fix leak

svn-id: r8490
"
"cff3cab692fd33a289e8912988e02ac228e371a1","2003-06-15 00:31:58+00:00","fixed leaks

svn-id: r8491
"
"6ece4cfbdaca67440b24bb387e66402d5d638ae1","2003-06-15 00:33:16+00:00","cleanup

svn-id: r8492
"
"f1fc68773d32783eea28d9ae711a26dd461cea1a","2003-06-15 00:54:14+00:00","made stuff in class Sound protected where possible; moved readCreativeVocFile to imuse_digi.cpp and turned it into a static function; put the DigitalTrackInfo stuff into sound.cpp (keeping it private); removed #includes from sound.h (this cuts down interdependencies a little)

svn-id: r8493
"
"acec45a4834c4254a3e43427a204690414e8d6c8","2003-06-15 01:00:43+00:00","cleanup

svn-id: r8494
"
"9ce9ce620f5210e4293c7c0452509d48fecd0b69","2003-06-15 01:05:03+00:00","fix typo

svn-id: r8495
"
"101df28e0b196201ab924cdbb771ba95426ff42d","2003-06-15 01:42:19+00:00","moved GameId declaration to common/engine.h (more logical); moved scumm specific stuff from gameDetector.h to scumm.h; cleaned up some #includes (ideally, never #include something in a header file if you can avoid it - this cuts down interdepencies)

svn-id: r8496
"
"fcc46ac8913383c05469a4521987ef456b0f33d6","2003-06-15 01:56:47+00:00","more cleanup

svn-id: r8497
"
"4cd1927ee072025ca772401b416e670677a5fa1f","2003-06-15 02:02:36+00:00","remove scumm.h dependency

svn-id: r8498
"
"46e8ed44c0d31ec4a5612f1ce6c3ebc0232312cb","2003-06-15 02:31:48+00:00","ctrl z quits not ctrl q

svn-id: r8499
"
"346e697f40c83d26b4037467b86e8a7726855b40","2003-06-15 05:04:17+00:00","Small cleanup

svn-id: r8500
"
"16e5c50bad251132bca851ffb6f6c68c936d8336","2003-06-15 05:19:00+00:00","Small cleanup
Fix small memory leak

svn-id: r8501
"
"4d5db88535feb690b5968b23af26163389c5f563","2003-06-15 09:55:10+00:00","cleanup

svn-id: r8502
"
"ce51902d7accd0dbe01d7de4cb4713ed57136658","2003-06-15 10:30:08+00:00","fix for simon2

svn-id: r8503
"
"8446d7d67ec6205aa51f748beeb141b1367532b4","2003-06-15 10:48:21+00:00","Stop simon1win crashing on loading of save game

svn-id: r8504
"
"b8b80805c17b5865f63394659f9907cf5b1690ec","2003-06-15 11:32:14+00:00","fixed 'quit' entry in help for Mac OS X; disabled Alt-X/Ctrl-Z on OS X (Cmd-Q is the one and only true way to quit here :-)

svn-id: r8505
"
"0d85cd1ee6af891d4ef33a355324b36c13ca02c3","2003-06-15 11:48:04+00:00","small reorg (keep private classes out of header files, if possible -> decreases compile times a bit); fixed a small memory leak for Simon2mac; don't delete _file twice in Sound subclasses

svn-id: r8506
"
"7f7ce14d5e704ad6423d850333b7e234f7688f35","2003-06-15 11:52:42+00:00","cleanup

svn-id: r8507
"
"9ef0657c5c71a40b2a78ce1ad2138b0ae13d226c","2003-06-15 12:22:19+00:00","renamed Sound -> BaseSound to avoid conflicts with the scumm class of the same name (we really should start to put all the Scumm/Simon/Sky code into namespaces

svn-id: r8508
"
"e6455a9dd28c59d6d61ab7db214175be96eb811e","2003-06-15 13:07:06+00:00","cleanup

svn-id: r8509
"
"81eeff479d57671c4400b47a508a99b88736f111","2003-06-15 14:07:53+00:00","Change GF_AMIGAS back to GF_AMIGA

svn-id: r8510
"
"e175f75e7da0ee3195cc1d6b4567ff1d09be26ef","2003-06-15 15:19:22+00:00","Made CharsetRendererNut::printChar() take the shadow into consideration
when calculating the dimensions of a printed message and when deciding
which parts of the screen to dirty.

I imagine this will fix most of the minor text-drawing glitches that have
been plaguing CoMI. Unfortunately, it fixes none of the major ones.

svn-id: r8511
"
"dd5bd03dc99cf9cd540f7c6b107eb3469fb12c7e","2003-06-15 18:56:41+00:00","Parentheses didn't compile on WIN32

svn-id: r8512
"
"2d8bb4a6f6143075e8a47482226a43bd87c99955","2003-06-16 06:18:30+00:00","The code to bypass the EGA Loom copy protection (which is necessary since
LucasArts have been selling cracked copies themselves) turned out to be
interfering with the ability to learn the fourth note under certain
conditions.

I've deviced an alternative bypass which should be a great deal safer,
though it won't do anything to salvage older savegames.

Ironically, Endy told me recently that he didn't like the idea of basing
the copy protection bypasses on the value of _currentRoom, but in this case
I really don't have any better idea.

svn-id: r8513
"
"b95ad2784988b6bfa8f89fb865cb052dc806576e","2003-06-16 08:28:15+00:00","misc.

svn-id: r8514
"
"f339140776e801366289bcc9f2564ef5c3611054","2003-06-16 11:37:08+00:00","After some consideration, I've reverted to the old Loom bypassing scheme
since I now believe that the variable is used to indicate that the game is
running in 'demo' mode. This way, old savegames will still work.

The new bypassing scheme is still in the file, but commented out. If this
works, we can remove it completely later.

svn-id: r8515
"
"a5a72ef3f8daca815b527d7881b57cafd2e57634","2003-06-16 11:52:04+00:00","V2 inventory arrow tweaks - closes cosmetic bug #751659

svn-id: r8516
"
"4abfb1f73c2a2f5653c775ddc25abe6e8cb83a0d","2003-06-16 14:45:23+00:00","Bypass the Maniac Mansion copy protection by making the security door stay
open at all times, like some original versions did. This still leaves the
player the option of blowing the mansion up by entering the wrong code.

I still don't know if it has any unforseen side-effects.

svn-id: r8517
"
"c3af6fbe04f8452c3a1cab29e675b35ef7dc9a74","2003-06-16 14:47:25+00:00","Added section on copy protection, and why we bypass it for some games. Feel
free to rewrite this in a better way, but I think we should say *something*
about it at least.

svn-id: r8518
"
"9917c08f69dc466e0c0a57f9d2f996aaccd495d4","2003-06-16 15:11:24+00:00","Comitted the partial (but seemintly good enough) actorHit implementation
from patch #754895.

Ship-to-ship combat is still rather glitchy, but there are probably other
reasons for that.

svn-id: r8519
"
"7c06cf7ceb4f37c95d78ffbe70dcc2d6af1b17c7","2003-06-17 05:20:18+00:00","give man page much needed updating

svn-id: r8520
"
"94e88917da39257849fdc66f385c51d4723eaa2d","2003-06-17 06:13:57+00:00","Make OpenGL specific scaler use other keys so all normal scaler canbe made available.

svn-id: r8521
"
"cc55265ecdc8d631dfc62e82a21fcea0359d774a","2003-06-17 06:18:56+00:00","Use OpenGL backend by default for mingw builds

svn-id: r8522
"
"5a2678b72a43a1f86287ed1623c3d33180aacbac","2003-06-17 07:11:58+00:00","Make the mouse-over hilight work again on the inventory arrows in V2 games.

svn-id: r8523
"
"33791b7929ad1db53e09498cff0fa5026c6f55fc","2003-06-17 07:14:39+00:00","ega palette changes, correct colour used for sentence line and use amiga colour for colour normally used for skin colours, sarien does something similiar...

svn-id: r8524
"
"d2bb0149d3462c184e0759091d7190865c315758","2003-06-17 08:21:46+00:00","tweak ega palette a bit more

svn-id: r8525
"
"d120ea093f27c58f5bd6b66aff32aa0eac1bb236","2003-06-17 08:50:15+00:00","I will add a wrapper for that (currently NULL driver)

svn-id: r8526
"
"3764908eb320b0a73c7577abcc6e66c1d4daaf0f","2003-06-17 08:58:50+00:00","Adlib

svn-id: r8527
"
"61491fb295647462611f49752942834b3afb0273","2003-06-17 12:26:25+00:00","don't restart music if the same track is already playing

svn-id: r8528
"
"81b7b265b9c5a9106de73424cde7cf8bf6ece2c4","2003-06-17 12:27:03+00:00","fixed grid position calculation

svn-id: r8529
"
"7f20bdfeba0dda8c6c47b5df162759ac786119c2","2003-06-17 12:34:56+00:00","removed send(0) command.

svn-id: r8530
"
"6e5471029df3b38f09103742d629297e1dbe2a45","2003-06-17 13:06:40+00:00","Revert Amiga specific changes to EGA palette.
An option for C64 and Amiga palette should be added in future

svn-id: r8531
"
"90b8e7615d357e7b8a47930f847b647fd38e28cb","2003-06-17 14:52:23+00:00","Tweaks to colours 10, 11, 13 and 14 in the EGA palette. They don't make
much difference visually, but this way I understand where the colours come
from. (Except for colour 6 which seems to be some sort of exception.)

svn-id: r8532
"
"327b63ee96fc6eb650630cbbc74b3ca7eb46ce41","2003-06-17 15:32:45+00:00","Cleanup.

svn-id: r8533
"
"c7b19406cdb68f103588feec931edecc67471806","2003-06-17 15:33:17+00:00","temporary & nasty workaround for crash-on-exit in OS X + SDL/GL backend

svn-id: r8534
"
"a09e7a56151de136f221aa87b820d906c977c4ac","2003-06-17 16:03:12+00:00","Update backend with recent changes, hope this is right.

svn-id: r8535
"
"d5d61a5e053205c9c6bdfbd1401ff7bfced88540","2003-06-17 16:06:17+00:00","Missed one

svn-id: r8536
"
"a0028d51d1f3ab6b66fbbc610653dc0c49311c8c","2003-06-17 17:34:52+00:00","OpenGL working right now

svn-id: r8537
"
"f0a39d718ae7aed246c91fb55a58a773553c6eca","2003-06-18 12:33:46+00:00","fix for o5_walkActorToActor; this seems to be more like what V3 games expect (and fixes bug #755113); but I don't know for sure about V5 games (and I have to wonder if the corresponding code for V6 isn't maybe wrong, too...?)

svn-id: r8538
"
"ac23e56e85c909996c6facee902da7d65db81306","2003-06-18 13:14:17+00:00","cleanup; tiny bug fix (file was opened, then opened again - not good)

svn-id: r8539
"
"7d6717eaa7f25da077722a7d48c7237b20a6c5f1","2003-06-18 21:06:03+00:00","Added some missing methods and a constructor.

svn-id: r8540
"
"2aed2d92845ebc04c70767feacffc5febb8d95ef","2003-06-18 21:10:05+00:00","Use stdafx.h instead of manually including system headers.

svn-id: r8541
"
"be0bdf687ab5687dca0716b430c2539c45fa199d","2003-06-18 21:13:58+00:00","Added casts to EventCode.

svn-id: r8542
"
"e985c33dab328e2a31f5cf9f5d0d378d40b76740","2003-06-18 21:15:08+00:00","Moved include of stdafx.h to top.

svn-id: r8543
"
"9e519241666d1c2a433f79026e49e6c6778496cf","2003-06-18 22:35:03+00:00","Fixed MSVC warnings

svn-id: r8544
"
"3567c13361b7dfb28c9a2eaf915d5cbbae2516f3","2003-06-18 22:39:17+00:00","Fix for bug [756559] ALL: 'multi_midi=true' in scummvm.ini does not work.

Fix properly propogates previously encountered value of multi_midi
and native_mt32 so follow-on config domains that don't include
multi_midi or native_mt32 won't reset the settings.

svn-id: r8545
"
"f83a32464c99f577ad5ef13198d95a0ee1709037","2003-06-18 22:46:17+00:00","Fix for bug [756555] ALL: With '-ewindows' notes don't stop at quit
and bug [755176] SIMON2: Hanging notes

More cleanup of the thread issues associated with iMuse and MidiParser
shutdown. Untested.

svn-id: r8546
"
"d659aa153a0f1345c474a087f435b4fbdd7acf3b","2003-06-19 10:02:34+00:00","spelling

svn-id: r8547
"
"8e5702590a6caef607d1fc9a43459293f57cf9d5","2003-06-19 10:14:58+00:00","added italian & english V2 font

svn-id: r8548
"
"0bee591ae6471bb0dee3545652defe734ea8c221","2003-06-19 10:29:38+00:00","added spanish font & prepositions; removed some trailing spaces

svn-id: r8549
"
"2b522f8f6c697a14323cd76d754bcc1591091e58","2003-06-19 10:38:30+00:00","PalmOS changes

svn-id: r8550
"
"788bcb26b5e963f71865975026cda1dc1c5e710d","2003-06-19 10:45:21+00:00","added initial form of v1 costume codec (NOT WORKING, i think)

svn-id: r8551
"
"08beeb942b8c5b5ee5e2354893ebde2412557e10","2003-06-19 11:13:11+00:00","re-applying my changes (chrilith undid them by accident)

svn-id: r8552
"
"ab7b941999e3ddd99f6bc904e6badcb076807db6","2003-06-19 11:29:15+00:00","fixed warning (but the code is definitely incorrect ;-)

svn-id: r8553
"
"773ee445d0bc27e820ebbf7e0f0baabfe1d04ce4","2003-06-19 12:08:10+00:00","fix for len variable in v1 costume codec

svn-id: r8554
"
"20b3ba1d28889146a84300b7a1b4d4c264e45e8f","2003-06-19 12:29:13+00:00","add id for segacd monkey island and don't attempt to play sbl sounds for now

svn-id: r8555
"
"9f55203302dc08c89465c07a0318597e08ee9001","2003-06-19 12:41:28+00:00","use default scale table for bomb codec

svn-id: r8556
"
"8b567ddaf884de9e850ce6f21a286e8c2e00e4b6","2003-06-19 15:14:17+00:00","cleanup

svn-id: r8557
"
"1cca50b7436d246217fc9a5b39e1f5b2204fe9dc","2003-06-19 15:52:17+00:00","fixed costume header for v1

svn-id: r8558
"
"440100606c60124ad7beb0b3195fc8669498d1bc","2003-06-19 16:03:12+00:00","made scale table const again; some cleanup in setupBompScale

svn-id: r8559
"
"ed43323597f6d2b7896033e9cece5a0e87f3f30e","2003-06-19 16:16:35+00:00","some fixes for the GL backend - but there are still many things broken, e.g. Ctrl-B only acts on the second (of two) GL textures (which makes the black vertical line stand out even more)

svn-id: r8560
"
"7403492aeafcd601609036f1037c2a352209cdc5","2003-06-19 16:33:46+00:00","fixed non-bilinear mode (no black line in that anymore; fixing the bilinear case will be challenging, at the least...); some cleanup

svn-id: r8561
"
"ada2d7c226752cc53cbc34f83cfc8bd81a288198","2003-06-19 17:50:10+00:00","converted scale table to hex (looks a bit nicer and makes it easier to see the structure inherent to the table data)

svn-id: r8562
"
"2421128e8e3f399e96f9ce179604bbe09db043e6","2003-06-19 17:50:18+00:00","the _bompBitsTable really tells the number of 1 bits in a given byte

svn-id: r8563
"
"a3feb4608087ed6ec65edcf116dc0926dab4f014","2003-06-19 18:08:39+00:00","instead of casting to byte, rather allow offsets > 255

svn-id: r8564
"
"c841ee636dcabd6a41846387248ddbc1f9c42dd8","2003-06-19 21:09:51+00:00","again fix for v1 costume header

svn-id: r8565
"
"5cd8bc2942a74c64f5671ac1122987d2669ac81a","2003-06-20 00:48:17+00:00","cleanup

svn-id: r8566
"
"2a1b3d633d2ed96a9d51a517c67e95575296502e","2003-06-20 01:12:34+00:00","oops

svn-id: r8567
"
"f301d1fa47f1218b7d2817ada2c70fc91b49e7fb","2003-06-20 10:53:06+00:00","fixed Zak256 (and possibly other V3 games); Not quite sure if the behaviour is correct for V4 games, that needs testing

svn-id: r8568
"
"3014adf1755db4f5305fd4ed2160f26ea22ca6e7","2003-06-20 10:59:22+00:00","some changes for the 320x256 code - the new code *might* work (can't test since it's not supported here), while the old code for it simply was bogus :-)

svn-id: r8569
"
"cafe61b76852d1b5e4869d7698c47da9f0dde8e3","2003-06-20 11:05:57+00:00","uhm - dunno how that slipped in =)

svn-id: r8570
"
"fc8e12444a74381fd3c67e49f266a689196691f5","2003-06-20 11:14:18+00:00","seems monkeyega & monkeyvga have byte values for the object name offset, too

svn-id: r8571
"
"b62e3c942fea6bda1299a27c22def1d4e8cc3ca1","2003-06-20 11:21:53+00:00","init _base to 0

svn-id: r8572
"
"0832c1f662592990c9e8c2e5a6d7e5301e1d541b","2003-06-20 12:25:37+00:00","reuse file, remove file2 usage

svn-id: r8573
"
"2b3ad36791c865482615d9b6e07ac125e52e8eb1","2003-06-20 23:21:06+00:00","typo

svn-id: r8574
"
"5477d0831b77ff89b6f1bef61573df35ab3e9310","2003-06-21 01:44:47+00:00","turn error in o2_saveLoadGame into warning

svn-id: r8575
"
"b81cbb930f4efe9e407d5fa38641f2ca8d931fda","2003-06-21 01:45:38+00:00","support F-keys in V2 games

svn-id: r8576
"
"445a805238fc667177d6fc0cc8bc9694cf4aa2d8","2003-06-21 15:10:30+00:00","Fixed bug #758167. Cleanup.

svn-id: r8577
"
"ece6f28fd7a0678af09984239e39ced2fa265875","2003-06-21 15:32:25+00:00","fix (?) for an invalid read report in valgrin

svn-id: r8578
"
"0cb2053d9d4a2e9f44edc36e4a87a34962dd3606","2003-06-21 15:32:35+00:00","init some member vars previously not inited

svn-id: r8579
"
"3de24123e737a0bc4584b3a59db553d74a2dfdf0","2003-06-21 15:36:19+00:00","fix some memory leaks

svn-id: r8580
"
"ceb1005f6cc4ff1860167810aacf51ae94d2d187","2003-06-21 15:42:20+00:00","some more memory inits; cleanup

svn-id: r8581
"
"2b580871c2ab89e2116a384dfb12f6a4758dac38","2003-06-21 15:53:27+00:00","delete _sound when SimonState is destroyed; fix leak & enian bug in playSting (but somebody please test that, I don't have simon1dos)

svn-id: r8582
"
"2ba86fd0e5fddef3c067d310a92a0a19a3e68b2e","2003-06-21 15:55:08+00:00","make gcc happy

svn-id: r8583
"
"11b2961fdb99c4fec78bc63f93b745b7ec42b860","2003-06-21 19:52:12+00:00","cleanup

svn-id: r8584
"
"9548531b1c9f0aa978822a98cc59de9fd04bb45c","2003-06-21 19:57:56+00:00","TODO: improved smush sound quality whenever 11khz sound is used

svn-id: r8585
"
"720837abd92da3ac95debbf71619275245bc3a89","2003-06-21 19:58:38+00:00","reduce code duplication a bit

svn-id: r8586
"
"2db275b1096cd00c61498dc5c264149e6e6c9458","2003-06-21 20:21:40+00:00","make File constructor virtual to allow subclassing; made seek default to SEEK_SET mode for conveniance

svn-id: r8587
"
"1465598aad62650d904652b367ad4fe7157252f1","2003-06-21 20:27:48+00:00","finally implemented this TODO: using class File instead of fopen

svn-id: r8588
"
"ace2fff564f46091c26065481669d23026cb8ce4","2003-06-21 20:33:46+00:00","cleanup

svn-id: r8589
"
"55e9f4ecbefb93e9726b5b6bccbeca93d595587e","2003-06-21 20:40:34+00:00","got rid of member var 'first'

svn-id: r8590
"
"1733bafbda15665dad525eb1d0be8ae4a71efd21","2003-06-21 20:57:01+00:00","get rid of 11025 Hz special case (I hope this is correct; only case I know of where 11025 Hz are used is during the Dig intro

svn-id: r8591
"
"7c332d7fdb8ae0356ab21368c4903aea4b9b8640","2003-06-21 21:17:08+00:00","modified & cleaned up the playStream/append code a bit; but this API really could stand some refinement

svn-id: r8592
"
"7281ac690732a93e9407f56e61976ea4b7c54fad","2003-06-21 22:04:20+00:00","undo this change again - proper fix would be to correct the MP3 playback code

svn-id: r8593
"
"bd4370c25166ad0e49c78d9e4407d39358e17b91","2003-06-21 23:29:34+00:00","lots of mixer cleanup / refactoring / reengineering

svn-id: r8594
"
"046dd1cfc8733c3a4c1de1e898a371499cc49416","2003-06-22 01:33:03+00:00","fix regression I just introduced (voices in smush movies were cut off way too early)

svn-id: r8595
"
"573a1e3e9907d228d4826cfb26a99d27ca15676d","2003-06-22 01:34:28+00:00","remove the realDestroy methods and instead use destructors; renamed insertAt to insertChannel and simplified/unified its usage; delete the mutex when exiting; cleanup

svn-id: r8596
"
"4ad5a183ce4c37ede13e88f3bc0d5b0c0c687026","2003-06-22 01:55:53+00:00","renamed SoundMixer::hasActiveChannel->hasActiveSFXChannel, and fixed the regression in it caused by removing _beginSlots (I hope); added isActiveChannel method used by scumm/sound.cpp (this allowed me to move the Channel class from mixer.h into mixer.cpp); replaced Channel::soundFinished method by isActive

svn-id: r8597
"
"0a6b7ad6ace9677dcba2cab80f585304f25ee6fb","2003-06-22 03:54:43+00:00","fix compile when vorbis is enabled, loomcd is now broken with vorbis after recent changes :/

svn-id: r8598
"
"21aa812bf100fb705edd8913612f70efd55280b6","2003-06-22 06:27:32+00:00","fixed warning

svn-id: r8599
"
"81c1b74202eb76902af819496f3e06a11b78c328","2003-06-22 06:39:27+00:00","enable rtti for dynamic_cast

svn-id: r8600
"
"f002a6eee95186a8b37cfa535933e6d806481263","2003-06-22 06:53:28+00:00","don't try to delete malloc'd memory

svn-id: r8601
"
"9d9336492c23a56c5cbb26836f1452838b9a27b7","2003-06-22 07:15:00+00:00","don't try to delete calloc'd mem either

svn-id: r8602
"
"4ead10e4d5352e2fd0311ee09a5a99195d5fd97e","2003-06-22 11:47:03+00:00","Change names of the stream API in the mixer; added endStream method (stop() halts stream immediately; endStream() lets it first finish playing)

svn-id: r8603
"
"fa184730af2f2be094aa9f37cd3abf58d10f79ea","2003-06-22 11:52:40+00:00","Reduced the number of shifts in highly used functions in Super2xSaI and SuperEagle

svn-id: r8604
"
"11ff7fe9a347efe37e2bd8fefca7e8c130f81af0","2003-06-22 11:55:40+00:00","Patch #757827: Aspect-ratio correction

svn-id: r8605
"
"e7c3fae1e8ca04dacd8ef4aebd201c275a974d05","2003-06-22 12:03:24+00:00","no need to keep these regression tests: the changes are mathematically and operationally (read: taking into account side effects and special cases in computer arithmetics) equivalent to the old code

svn-id: r8606
"
"2a31d107c90190dfc21d2b0d7f2e727d739bb034","2003-06-22 12:30:58+00:00","Aspect ratio works with all sclaers in opengl backend

svn-id: r8607
"
"d2b61e9bef797bde839c665ce4867d939e52f37c","2003-06-22 13:48:47+00:00","properly init member vars instead of using memset

svn-id: r8608
"
"b4ce2163272a0141915ac17147c64548a880f669","2003-06-22 13:50:46+00:00","don't memset the output buffer to 0 if _eof_flag is set; rather, we should 'add 0' to every byte in the output buffer, i.e.: do nothing

svn-id: r8609
"
"c03fb13a0b070c605e031525b920d41e3ec8cf2a","2003-06-22 13:52:40+00:00","fixed Vorbis CD track code

svn-id: r8610
"
"3883de39a9ce3103503b37472aded49a80d6c194","2003-06-22 14:17:44+00:00","d'oh

svn-id: r8611
"
"5132ca1b2f454545ff3b3b3bb1b108391d7256c7","2003-06-22 14:18:33+00:00","Add opengl filter option
for opengl backend
Enable poll_event in opengl backend

svn-id: r8612
"
"9d09b77f2134b84bc989b2f2503297a8312d5e83","2003-06-22 14:30:32+00:00","fixed warnings

svn-id: r8613
"
"a700f90a5fc912b7ad3103e7e909e829dcc14b45","2003-06-22 14:31:17+00:00","Revert poll_event change

svn-id: r8614
"
"85d926fa66303467cee339535d4b991cffd29256","2003-06-22 14:34:30+00:00","Ooops

svn-id: r8615
"
"2aa0a860384fa653d22b1e5b3a4520117e79b7ce","2003-06-22 14:36:12+00:00","cleanup

svn-id: r8616
"
"4604b2600ecc2895e049868d3a6287c2fa0f9093","2003-06-22 14:39:55+00:00","use float instead of double

svn-id: r8617
"
"53d679bfb7bc26a7d697b6717500e0c2cea47c07","2003-06-22 14:41:09+00:00","Fix some graphics glitches that would sometimes be visible around the mouse
cursor in aspect-ratio correction mode.

svn-id: r8618
"
"8db7ff7796aaa835fb903ce6cd9fc9f7b486682a","2003-06-22 14:49:56+00:00","Add opengl filter option

svn-id: r8619
"
"7e86b215bbf0fd5e016bbc2fc340039690e682cd","2003-06-22 14:52:34+00:00","Rearranged logic in SuperEagle

svn-id: r8620
"
"160c4f910404dcfaad86b5ad238391c75a2d5182","2003-06-22 14:59:21+00:00","Fixed the last (?) glitches around the mouse cursor [*] in aspect-ratio
correction mode by making sure that dirty rects always start on a line
that won't have its colours changed by the stretching function. This was
probably only noticeable when using the 1x scaler.

[*] Actually, the glitches weren't specific to the mouse cursor, but it was
useful for triggering them.

svn-id: r8621
"
"87b5f750e7bf84ea592b19bbfd5ac91d827c8caf","2003-06-22 15:00:51+00:00","fixed warnings

svn-id: r8622
"
"288f101bc96ac318550fc57f8c65076bf7ad03e4","2003-06-22 15:06:48+00:00","fixed warning

svn-id: r8623
"
"0b6dee81c8bd959ab2d6e2545b25a3e3e9d8d600","2003-06-22 15:20:25+00:00","added opengl backend to vc6

svn-id: r8624
"
"098b60beeb8d45a15a57413fe66cb90fd0160b59","2003-06-22 16:08:10+00:00","build with mad by default, added opengl build

svn-id: r8625
"
"73f2ea0b94db86f1f6d6f4de29b145248c0e5527","2003-06-22 17:22:40+00:00","Special case for screen-wide blits

svn-id: r8626
"
"31bdf9f45001bb3d9aeb15ed714e3a4c898ff45d","2003-06-22 17:29:55+00:00","undoing this optimization: despite my initial sureness about this being correct - I was wrong :-) just plug in 0xFFFFFFFF to see it (roughly spoken, we can loose the uppermost bits if we shift after the addition instead of before it)

svn-id: r8627
"
"71ea8f7228eb21a5a9b552ed858f989a14bf6205","2003-06-22 17:32:50+00:00","fix the inaccurate version of interpolate5Line to work correctly for odd widths

svn-id: r8628
"
"10a18cdac3eaf9e1cd0d4a1311c09d1f8cbc6eff","2003-06-22 17:49:38+00:00","updated imuse digital tables

svn-id: r8629
"
"829e5a8825a9485943679a2c638b9ce5ca2e2178","2003-06-22 20:24:15+00:00","fixes for imuse digital table

svn-id: r8630
"
"8595f30740beb3ed9d975f895578b19e18d2c223","2003-06-22 20:54:28+00:00","fix for imuse map room table

svn-id: r8631
"
"f891aceee307fa614fcd312b6f567792f1b95ae1","2003-06-22 21:42:59+00:00","native mt32 support and basic control panel (incomplete)
doesn't work with all versions, probably file numbers were changed

svn-id: r8632
"
"a61fda9948d6fa8a91b7170ae7d80ce45882da1c","2003-06-22 22:00:56+00:00","whoops

svn-id: r8633
"
"dc29ed139d503b62d6192af533a3bfae24ed3bd7","2003-06-22 22:09:00+00:00","updated ft music tables

svn-id: r8634
"
"976e5c598b9fd41be1b080d67588955b19b4b5bb","2003-06-22 22:14:11+00:00","updated vc6 project file

svn-id: r8635
"
"2e634be4e969c74572e3147fcc23dcf2f2c86c9b","2003-06-22 22:34:25+00:00","fixed warnings

svn-id: r8636
"
"d3c7f26850c4546e9c8e8536b9137626cb3b6d79","2003-06-22 22:36:28+00:00","another warning

svn-id: r8637
"
"b85d2a9a2a9097b547c005ded6b91774623e4866","2003-06-22 23:01:06+00:00","fix for bug #755166 (clear click state after loading a game)

svn-id: r8638
"
"f108fe66fe6a3efd58f44d71e8f721843cc570ea","2003-06-22 23:09:56+00:00","make smush pausing while GUI is up reentrant

svn-id: r8639
"
"c848e724a4035fb2b4fb38a4e235072f832fe6e4","2003-06-23 00:02:55+00:00","update manpage for aspect ratio options

svn-id: r8640
"
"a1f760b9443e6622d269d0f51ae9dbfe951afbe3","2003-06-23 21:23:10+00:00","this should prevent changing music in some room in the DIG

svn-id: r8641
"
"c9d22c69a23d4cf3714e45d14a28280233f9362e","2003-06-24 11:56:43+00:00","fixed volume controller (compared to the core midi backend, volumes are now equal; plus this is the logical implementation :-)

svn-id: r8642
"
"22e979de216c99d72892c9b33177fdd639e38547","2003-06-24 17:31:35+00:00","still don't know how the o5_startMusic opcode works in Zak (if it is even music releated), but this way makes more sense (thanks to Hibernatus)

svn-id: r8643
"
"6ca8d634fd636f65ac3aab3775d78391c4c4923e","2003-06-24 21:52:52+00:00","only declare class MP3Sound if USE_MAD is #defined

svn-id: r8644
"
"0efc3b2adb67a358a988e72174995c53a7d18d82","2003-06-24 23:36:05+00:00","cleanup

svn-id: r8645
"
"5a6c3109a0034812077468c76858dfb6a4d4e33a","2003-06-25 03:24:02+00:00","note that we are missing decompress routines for codecs 8,9,10 and which games they occur in

svn-id: r8646
"
"3351f4257b56118a87901f491e74af4fd952c0b7","2003-06-25 20:16:47+00:00","cleanup

svn-id: r8647
"
"870ce2879e934a4bb559c2a9fb3ff14e9fb6be99","2003-06-25 23:25:52+00:00","added some const qualifiers; moved _bundle & _current_cd_sound from class Scumm to class Sound; some other tweaks

svn-id: r8648
"
"7f3118f8d864f6d0beec385cb5776979581d6e2a","2003-06-25 23:49:54+00:00","more const qualifiers

svn-id: r8649
"
"3c296b36b7a2cbf9bd049e65810f1d5c43fe6573","2003-06-26 00:47:39+00:00","added ResourceIterator, replacing two of the old findResource/findResourceSmall function - contraty to those, this approach is thread safe

svn-id: r8650
"
"7a79ef8f5f94d9523d9aa8fb1999cbc58512b389","2003-06-26 01:46:41+00:00","added getOBIMFromObject and getObjectImage methods; changed code to use those

svn-id: r8651
"
"8e0c6dfede866ef42a1d95666518c6051c72fa8e","2003-06-26 13:54:29+00:00","rearragned stuff

svn-id: r8652
"
"c1e08c27ce649d63358789843aac42c7c1a0d69e","2003-06-26 13:55:01+00:00","paranoia fix for getOBCDFromObject, in casegetResourceAddress returns 0

svn-id: r8653
"
"0f293acf96dde86ed9594905118a9500825cb48f","2003-06-26 14:04:08+00:00","implemented text shadow in Zak256 (also needed for Indy3-256, maybe?). (Partial) fix for bug #750779 (the shadow color is still wrong)

svn-id: r8654
"
"2f11bb5dd7d88bee1cb683ab4f78ceac8c7a7a93","2003-06-26 14:38:48+00:00","fix for 'default talk color' use of actorSet opcode (fix for bug #755888)

svn-id: r8655
"
"2aa2076cebe35ce4c53ada6f2b6528c1fecb1586","2003-06-26 15:25:06+00:00","Count CD tracks from the beginning, not the end... ^^;;

svn-id: r8656
"
"85270c8b36fbc26a63447df4ec218b6c970055b5","2003-06-26 15:47:44+00:00","fix double-load on startup (for -x option)

svn-id: r8657
"
"b23b9ee7b3729680218a66db5b322e5d9b64cd9b","2003-06-26 15:48:12+00:00","hm... this code for initCharset makes more sense, and also seems to match disassembly

svn-id: r8658
"
"eec095a72d290af44bc86a8fc8de35b9823e5ebb","2003-06-26 21:41:53+00:00","correct shadow color in Zak256

svn-id: r8659
"
"1ec54d032e65af70890c6d53209608deb409fae9","2003-06-26 22:50:01+00:00","Moved out akos_compare (no reason for it to be member of class Scumm)

svn-id: r8660
"
"aa19687a4c9affcdb03ae76e269766dd6237ca4c","2003-06-26 23:04:41+00:00","fixed memory leak when restarting

svn-id: r8661
"
"c10905b975a2bf929b1e053525907663879fdb7f","2003-06-27 00:10:17+00:00","cleanup

svn-id: r8662
"
"1785e0e30504f4cdaf29a31eec0f58de700ab8b1","2003-06-27 02:54:05+00:00","some more loading & saving work (still unfinished)

svn-id: r8663
"
"9385979376851b4696f6504785275fdb6624d46a","2003-06-27 05:02:01+00:00","fixed warning

svn-id: r8664
"
"b5e081f2ae00fe9df24852736eeb4a39473eb6cd","2003-06-27 05:03:38+00:00","updated vc6 file

svn-id: r8665
"
"0ccd872187946008d20e075ad95a8568175b7a65","2003-06-27 05:10:11+00:00","chenged ifdef to handle all win32 ports

svn-id: r8666
"
"91cf11e99cc7b194fc39d1e6f6a85063ee61e77b","2003-06-27 05:11:16+00:00","ops

svn-id: r8667
"
"ca0ebf3aef1ecdac8124a88eff1529416d3fda54","2003-06-27 12:11:50+00:00","fixed text decoding bug

svn-id: r8668
"
"9218b70b0c440c1a75cc2e6af125dca28da91912","2003-06-27 13:23:01+00:00","fixed warnings

svn-id: r8669
"
"1ba62a65982ec3cc02d8c9f18bc64c738b60951f","2003-06-27 14:42:45+00:00","bugfix. doesn't seem to affect anything, though.

svn-id: r8670
"
"4d5592cc5d9ea0f3bb3df36c1e5cf77055d4cdf8","2003-06-27 19:31:36+00:00","sync implementation with interface

svn-id: r8671
"
"7c8565fa65789576959e67d54e4032780dffc723","2003-06-30 02:38:56+00:00","Add OpenGL fixes, patch #762815

svn-id: r8672
"
"c7fb2c9bbf3a2f4227fd667c694b8377b6dda1b2","2003-06-30 10:22:04+00:00","fix for bug #743049; might cause regressions, but might also fix e.g. walk script issues

svn-id: r8673
"
"1f0c925c2b953c2832f478307ece40f9eb50058c","2003-06-30 14:31:09+00:00","Allow the 3x scaler in fullscreen mode. Since we have aspect ratio
correction now it can look quite different from 1x and 2x.

svn-id: r8674
"
"b421c9fde992191f61f324e9741875e3667a7a87","2003-06-30 16:59:41+00:00","finally fixed this stupid animation bug

svn-id: r8675
"
"36899b8200425a6781e21392f0e1598b4dc99d63","2003-06-30 20:12:34+00:00","fix for #740244 and #755863. This appears to have been a long standing bug in the original engine?

svn-id: r8676
"
"c52337b1287dd8728ab5ac8695f25ebfc89062fb","2003-06-30 20:50:52+00:00","fix for bug #755899 (thanks Hibernatus)

svn-id: r8677
"
"a610e14a11b58ded763da7009cff2f0067bcebec","2003-06-30 22:22:04+00:00","this FIXME is obsoleted by my recent fix for getMaskFromBox

svn-id: r8678
"
"67a1aa89dbba487243c276c352768bb0aec3ae5a","2003-06-30 22:25:08+00:00","Fixes as per bug #762593 (Zak256 Audio CD handling); some cleanup (e.g. renamed start/delay -> startFrame/endFrame)

svn-id: r8679
"
"095b68d74f91ebf72f8835aa21cc47ce281576a3","2003-06-30 23:18:20+00:00","partially implemented the Audio CD query opcode in Zak256 (see bug #762589); cleanup

svn-id: r8680
"
"ec64f23f22f7a0b74ffd180be99946afd5c10076","2003-07-01 01:27:50+00:00","fixed race condition when loading different sections

svn-id: r8681
"
"2c9a784be8fa44fdf250cf2abb541ea54436e91f","2003-07-01 01:29:29+00:00","finished loading and saving, fixed grid bugs (some debugging code not yet removed), implemented fnLincTextModule

svn-id: r8682
"
"00d5c5af89da9f1aa7fcec723756dc95ecbec63a","2003-07-01 04:20:41+00:00","Add a few more actor debugger subcommands, and correct V2 coordinate translation for
o2_(get/set)ActorElevation

svn-id: r8683
"
"b13c0bb201bb1afdb50eb8735e4c9ec1fed5ba89","2003-07-01 11:59:51+00:00","Fix for bug #743041: ZAK256: wrong color in costume (intro). Thanks to Hibernatus for providing the deciding clue

svn-id: r8684
"
"e1483a6eac96c0ae93e7302eb9baa42b6f94a2ef","2003-07-01 12:08:22+00:00","Fix for bug #763709: DIG: Recent walk regression

svn-id: r8685
"
"6e3cfa8a4edc77e0d642d54ec3a52910fcac051e","2003-07-01 13:04:00+00:00","bypassed copy protection, fixed crash when disconnecting from link space, fixed logix swing seqs

svn-id: r8686
"
"89be032afd6b26555ccfbb6735ff362321468a5a","2003-07-01 13:07:17+00:00","fixed warning

svn-id: r8687
"
"4f91c49836a16d3c5e6334a8a8ff60d62c67bc3e","2003-07-01 15:21:51+00:00","fix for when we scroll while text is being displayed (text used to leave traces behind in that case)

svn-id: r8688
"
"09e47bad3d6b7294c9dd494790c2c5a4bfeff0b0","2003-07-01 15:26:07+00:00","only adjust gdi._mask if _charset->_hasMask is set to true

svn-id: r8689
"
"ffaeb5424fca2eba2528f8c2d9db674d47f03395","2003-07-01 16:06:09+00:00","fixed mouse restore on savegame restore and bug in fnTheyStartSub

svn-id: r8690
"
"665ab4a8d9bcc5c4176351f208958449d0907b63","2003-07-01 22:21:20+00:00","bass is completable now.

svn-id: r8691
"
"b7f9b1a5d88a0872ff40d8d540bebd120632eebf","2003-07-01 22:51:49+00:00","fixed warnings

svn-id: r8692
"
"c66457664ed3a235d0dba9a8982055147b4945b4","2003-07-01 23:31:29+00:00","removed useless AR saving leftovers and implemented fnRestoreGame()

svn-id: r8693
"
"cff9817d443e59ff2ab4dc696793a4b17b274eec","2003-07-01 23:44:31+00:00","removed unnecessary variables

svn-id: r8694
"
"fe03de724304e9e1952cb7ce05579c820bdb0396","2003-07-01 23:50:36+00:00","fix for the 'invalid seeks' that sometimes occured at the end of smush playback (well I hope - at least now I can't reproduce the problem anymore with my testcases)

svn-id: r8695
"
"33c5c72e4c1752521f2a2df0e0ffcd45ffb5264b","2003-07-02 00:38:17+00:00","_talkChannel can legally be 0, too

svn-id: r8696
"
"2cb05bedb970d6c4fcda91f52a3c5beb722d7ada","2003-07-02 00:46:24+00:00","possible fix for bug #763714: DIG: 'Trying to append to a nonexistant stream 0'

svn-id: r8697
"
"e376f73a99c00797110e3c185713a2405a81c51a","2003-07-02 00:49:03+00:00","cleanup

svn-id: r8698
"
"1d2a68064e90a1d22ef971d01cb7620cd854c663","2003-07-02 00:51:25+00:00","oops

svn-id: r8699
"
"5062bb06faec93d13f1dc2aad24132de3114e676","2003-07-02 00:53:38+00:00","100 KB instead of 2 MB audio buffer should be sufficient

svn-id: r8700
"
"4248c0855511abe3dbf1ef90b4eed680e74d492e","2003-07-02 01:24:05+00:00","Control panel should be disabled for ALL demo versions

svn-id: r8701
"
"14cfa71ab76024941b0bfd99171045a07a6f018a","2003-07-02 01:31:35+00:00","oops

svn-id: r8702
"
"1b5ea45887d4c853603fd5dedb02b8cf56eeb458","2003-07-02 01:46:25+00:00","fixed save/restore grid problems

svn-id: r8703
"
"8715968b2c90499ef0a2a756abcc472ba496ea76","2003-07-02 03:29:05+00:00","Readme and News update. Can somebody verify 'known bugs', as I think some of the music issues have been resolved (?)

svn-id: r8704
"
"cd269445f53547ace60de132a9942ea485a86eec","2003-07-02 06:43:24+00:00","Initialize midiChannelNumber to 0. I don't know if this is always the right
thing to do, but leaving it unintialized isn't a good idea either since
that will cause stopMusic() to send bad commands to the MIDI driver in some
cases.

At least in the case of the ALSA driver, this will cause ScummVM to
terminate with an 'Unknown Command' error.

svn-id: r8705
"
"01f992db9bddf16c1d3a59a2a1a4354c4f4e7f7d","2003-07-02 10:50:04+00:00","cleanup (code easier to read; slightly less rounding errors for the volume; and on BE systems, READ_BE_UINT16 is actually faster ;-)

svn-id: r8706
"
"fe8719d7bd521316c5adbddab489c59fbba20512","2003-07-02 11:04:48+00:00","more cleanup

svn-id: r8707
"
"302f67e43f2d1f8a5755b77d0cc79daf4dec58c4","2003-07-02 11:26:13+00:00","fix for bug #752865: MM: Man-Eating Plant is invisible

svn-id: r8708
"
"4a3da1a2b74bf9b421ab78005887b33b6191d6ba","2003-07-02 11:32:32+00:00","cleaned up the actor ordering code a bit - it should be now somewhat clearer what it does exactly

svn-id: r8709
"
"92fd56f9f07a5cefc10f99cdec1e7f490ec2a7d6","2003-07-02 13:47:03+00:00","removed #include 'boxes.h' from scumm.h;  cleaned up AdjustBoxResult definition & usage; properly deal with larger box distances, thus partially fixing Zak on the airport (but original seems to have used a very different algorithm, so this really is only a partial fix)

svn-id: r8710
"
"3e902944eb5d386a86b79206347a92a88b945c34","2003-07-02 13:47:48+00:00","added .cvsignore

svn-id: r8711
"
"4efbf666af67c529b61e54f51f910da8fe156300","2003-07-02 14:09:00+00:00","Updates

svn-id: r8712
"
"a60998900840f48f00a793dd48c1f838368cb8b2","2003-07-02 14:21:13+00:00","fix o2_loadRoomWithEgo regression (this bug was uncovered by my previous adjustXYToBeInBox improvment)

svn-id: r8713
"
"f27b711e79a5cb96380dc9d39bd54acccbe60121","2003-07-02 14:23:45+00:00","fix for bug #753840 (actor placement in V2 games)

svn-id: r8714
"
"621e356b4257d89614b0f61b2dda7988bdb06119","2003-07-02 14:47:06+00:00","don't default to the slowest aspect ratio correcter; rather use the medium one (good quality with acceptable speed)

svn-id: r8715
"
"5b71113dcb4b87287417d0605c48fbc2a9eab451","2003-07-02 14:51:00+00:00","Finish a thought I started about the OpenGL filter

svn-id: r8716
"
"e1ca5552ddccf427cf1a0ca84e335b74b183d638","2003-07-02 15:08:46+00:00","cleanup; made mutex protection of graphics code a little bit tighter by protecting all of method property(); moved set_palette to OSystem_SDL_Common (it was identical in both normal and GL backend)

svn-id: r8717
"
"6598673ac3030ee5c1d0c9018a5c46749d244e57","2003-07-02 23:24:05+00:00","cleanup

svn-id: r8718
"
"a0133fdbc61fb54f5d5e373490ad53858faafb6f","2003-07-03 01:24:50+00:00","code transformation on setScaleItem: this shows that rtScaleTable's are actually (almost) the same as scale slots in V8.

svn-id: r8719
"
"cd04361fb7ddf9d86469d7151f2de619ec678705","2003-07-03 06:58:08+00:00","Removed the calls to SDL_SetGamma(). No one could understand what they were
doing there in the first place when it was discussed yesterday, and they
screw up the colours for me. (Possibly because I have the gamma correction
set even higher by default, so this attempt to brighten the image actually
made it *darker* for me.)

svn-id: r8720
"
"7404d5662d3f624f519ab540b52932f7b7630d93","2003-07-03 07:03:18+00:00","Made read() return the number of bytes that were actually read, rather than
the number that was requested. A lot of our code obviously assumes this
behaviour, and the MP3 file player depends on it because otherwise, when
reaching the end of the file, it will think it read a full buffer, when in
fact it only got part of it and the rest is the remains from the previous
read.

This would cause a brief note from earlier in the track at the end of the
MI1 chapter one screen. Probably other cases as well.

Of course, this may cause regressions but only - I think - if the code was
buggy to begin with.

svn-id: r8721
"
"8f0c739f87d2de8808f49da6f0abc9fcb6e220fc","2003-07-03 11:18:07+00:00","Timer now uses a mutex, which should make it thread safe (it wasn't before, particuarly bad if timers are implemented via threads), plus this should help in fixing race conditions in classes using class Timer

svn-id: r8722
"
"2ea85c6d4e5608beadcf77f1cb1ff6215f27d7ed","2003-07-03 17:17:32+00:00","Compact data for v. 0.0288, works as well as 0.0368 now.

svn-id: r8723
"
"6b7e12faedcd742892476911611e31b4ee769b57","2003-07-03 19:12:24+00:00","fix for bug #765402: no shaking with 1x scaler

svn-id: r8724
"
"30d985afb96c07766fd887fefbf06e892c204637","2003-07-03 21:45:04+00:00","const correctness

svn-id: r8725
"
"c60e1aeb86e61b9f29227b773ef98aeac6381f92","2003-07-03 22:05:22+00:00","cleanup for -Wundef

svn-id: r8726
"
"3ed9aae095b4ed2aab2c3d7a43600bd2bb31d53b","2003-07-03 22:06:13+00:00","const correctness

svn-id: r8727
"
"396c34d44bc2369953485de1b0d1dca4dd30337f","2003-07-03 22:32:18+00:00","fixed showGameQuitMsg() and temporarily disabled sfx looping

svn-id: r8728
"
"16031e1b00727efde1b06002adedacdb35d3759b","2003-07-03 22:36:45+00:00","whoops

svn-id: r8729
"
"097a2bc9d1a2fb0a774e48d833fe3fd8fc8ccfa3","2003-07-03 22:52:17+00:00","fixed warning

svn-id: r8730
"
"0e2767e354e4366aeb17f91d1b45daa7fc881301","2003-07-03 23:44:28+00:00","const

svn-id: r8731
"
"ea3b77e3a61ed15ecbbdeba4645a320253e6e253","2003-07-03 23:59:35+00:00","rewrote desaturatePalette using integer arithmetics only

svn-id: r8732
"
"f5f9061d86da319f4874d9d0f9f440367321375b","2003-07-04 06:54:47+00:00","Allow 'no-' prefix to long command-line options, e.g. --no-aspect-ratio,
to invert their meanings. This is useful for overriding settings in the
config file.

svn-id: r8733
"
"8d4c6d79999c5ade578c1d14a0c8d9c9424a8ed2","2003-07-04 10:19:39+00:00","show detected game version at startup. (hopefully this will stop the wave of 'how do I find out what version I have' questions. we still need to alter the detection to allow 0.0348 to be the detected since it can't be uniquely identified by the number of dnr-entries (i.e. it has the same amount as v0.0331)

svn-id: r8734
"
"fbb9bc78347dc1a465ac62ad2c7e02eb6a1ac0f7","2003-07-04 11:19:25+00:00","fixed warning regarding overloaded virtual methods

svn-id: r8735
"
"1d93949167c43861c6ed3ec605488658a4b873ce","2003-07-04 11:19:44+00:00","added some more warnings (taken from pentagram)

svn-id: r8736
"
"fb16fb3e24160ba2472661167eca671bd4f5848b","2003-07-04 12:34:09+00:00","added some very limited support for Mac Loom (text is now properly centered around x:160 instead of x:0); added (commented out) copyprot bypass (but since I am not sure if there was ever a Mac Loom w/o codes, am not sure if this ever should be enabled); added comment regarding the Mac Loom sound format

svn-id: r8737
"
"470b406587d21fc7322c36424da046497af5c8de","2003-07-04 12:35:08+00:00","oops

svn-id: r8738
"
"85c467c6a0185cc8aa6eea2fa9182ef9fd92b335","2003-07-04 13:16:48+00:00","fixed two leaks

svn-id: r8739
"
"0ed8e1ef36ae8d30edab9d4d74481ffac01f39b4","2003-07-04 13:17:56+00:00","prevent (or rather: make much less likely) some sound output related race conditions

svn-id: r8740
"
"093a31839beca7897032c245ca009da8de7a43d4","2003-07-04 14:10:44+00:00","Insert preliminary Zak256 sound looping support. It's not perfect, as some Zak256 sounds only loop a part of the sample - which our mixer API doesn't yet support.

svn-id: r8741
"
"a4b61ddaba3baab93a3bbf8307c44755cfe0885c","2003-07-04 14:49:51+00:00","Prevent apparantly possible race condition. I don't get this stuff, and I don't see why the next call to insertChannel is immune to the same theoretical problem :)

svn-id: r8742
"
"ca3eb3f9d08707dde817024baebbeb6af382dc9b","2003-07-04 15:03:54+00:00","Because I can.

svn-id: r8743
"
"bb267e719137c2dc879ea9d1cead24cce376ca01","2003-07-04 15:10:49+00:00","Remove homage to original's misspelling of pseudo. Honest.

svn-id: r8744
"
"c419e8d3dcee7aebe46f50273fae6546dbb1af58","2003-07-04 15:14:47+00:00","Make 80 column people happy. Sheesh, it's only an egg.

svn-id: r8745
"
"3aa048d710dce762c3f79167b04a48cc450056f9","2003-07-04 20:08:02+00:00","make SoundMixer::playRaw only check sound IDs if you actually pass one

svn-id: r8746
"
"484d0a84c56652d0dba314b0583c9b2fc74cb872","2003-07-04 20:14:11+00:00","SFX is working correctly now. also implemented queued fx and fx saving.
The bass version is now included in the savegames, too.

svn-id: r8747
"
"f24ca1fcdc649e78dba89192ed994a9b06a29fb8","2003-07-04 20:17:26+00:00","removed some useless lines

svn-id: r8748
"
"67ba28170f26080fed61ce97b4ae6bb5d81a9d03","2003-07-04 20:31:41+00:00","don't let user enter too long save names

svn-id: r8749
"
"a4bd31578b41bfd9fc33cf33d77cafed4de40013","2003-07-04 22:39:10+00:00","support text and speech at the same time

svn-id: r8750
"
"5854c6a7de6742fcbaeeb90ccd26906e755c47ee","2003-07-04 23:26:46+00:00","make sky detect v.0.0348 (even though not existing ;)

svn-id: r8751
"
"39509be92c4f21fb9883386f29e393133e4c1621","2003-07-05 00:29:16+00:00","fixed warning

svn-id: r8752
"
"934611c348a46d35132fd64a9922bbc6c0817165","2003-07-05 00:57:03+00:00","applied eriktorbjorn's floppy-intro-with-cd-version patch (#765885)

svn-id: r8753
"
"37bc0550007d29303db24b7bc2d7e754b81629c5","2003-07-05 01:45:28+00:00","add --floppy-intro option

svn-id: r8754
"
"989d67951c9171a77043244d0dccc768bcf84a78","2003-07-05 02:21:19+00:00","corrected all huffman trees and moved them out of text.cpp

svn-id: r8755
"
"2a33eb6cbe36759106affb77a763d3efa99600ba","2003-07-05 02:33:56+00:00","fixed control panel palette for v. 0.0348

svn-id: r8756
"
"a476409d816afe79fd5d8b5ade3433af5c4e9829","2003-07-05 02:52:11+00:00","added hufftext.o

svn-id: r8757
"
"2abe6a9126de98d0c78e5d222ae36aa680e0ad9f","2003-07-05 03:00:26+00:00","better mouse hotspot, seems the same as in the original now...only tested on first few scenes & control panel though

svn-id: r8758
"
"9f277f1ed001e5f36d46e1a4d0465941e7ed8680","2003-07-05 03:05:54+00:00","hope this fixes problems about cut-off speech.

svn-id: r8759
"
"e22e3438e2256e6b726cc4edf5c2ee99f97d5d52","2003-07-05 03:32:41+00:00","fixed cursor and allowed pressing enter for loading and saving, too.

svn-id: r8760
"
"d1fcc77a959803a705109eb3511fb6d097a33d05","2003-07-05 05:11:27+00:00","revert to previous targets

svn-id: r8761
"
"521cc8117b9489f71bf4dda81640094f551febf3","2003-07-05 05:23:54+00:00","updated file

svn-id: r8762
"
"1ed639aedb393d1a9b8923230078ccd28f989576","2003-07-05 05:31:04+00:00","hack for proper compile for vc6, why I need this ?

svn-id: r8763
"
"c1002b4ad22d6bff69291fff17c44c1386af32ab","2003-07-05 08:42:50+00:00","Fix multiple debug level messages, when debug level is set in the config file.

svn-id: r8764
"
"12a04c8e52013b21aed7c8c2feecdfaa53416779","2003-07-05 09:08:38+00:00","Implement new interface functions

svn-id: r8765
"
"d5aa3bd41c83f33a0038a0a48e90b98e411bc46f","2003-07-05 09:08:53+00:00","Fix sky fullscreen from launcher

svn-id: r8766
"
"6419cc80e7117f857f9dce36dcc6c2b42d52e92f","2003-07-05 09:40:18+00:00","Don
't attempt to play music/sfx in v1 games

svn-id: r8767
"
"843e18d45d6074efd85dc7c10da135bc7de9b91f","2003-07-05 09:44:13+00:00","make f5 menu work in > v2 16 colour games

svn-id: r8768
"
"6c2ac4b481bdcdf2ffebaaf2125d0a63d576d28f","2003-07-05 09:52:22+00:00","Put check it right place

svn-id: r8769
"
"1d22c76469458febabe29de7b131f573d3dc34dc","2003-07-05 10:57:38+00:00","Update about dialog. Will somebody please move the About dialog to Common so we can also display it from the launcher? :)

svn-id: r8770
"
"b3e30fc0ff71c5103d00a0ef7b384780f83aa085","2003-07-05 11:14:16+00:00","Fix irky old date. We need to autogenerate this somehow.

svn-id: r8771
"
"cbe71501f90610cd71270de965afe8540d03c793","2003-07-05 11:25:12+00:00","Note spare strings in the custom string resource table.

svn-id: r8772
"
"04abb69a843da20b3a8a8a3957966ec0f3ca1489","2003-07-05 11:45:18+00:00","Attempt some more V1 costume work. Not that it helps yet.

svn-id: r8773
"
"455eb4ea44c82f2e2c5d642b48567fe732d88746","2003-07-05 11:47:15+00:00","fix warning

svn-id: r8774
"
"39abb7cf0a36f348c2755197e18ae2d9edc59eda","2003-07-05 13:41:14+00:00","Add more OpenGL fixes, patch #762815

svn-id: r8775
"
"4611b12c0a84ec528f9f020dc85bf4e9a0108c82","2003-07-05 15:17:46+00:00","updated backends to use type MutexRef

svn-id: r8776
"
"d098334fe651616afa8b5314bcf580ae835185b2","2003-07-05 15:19:11+00:00","updated code to use type MutexRef; added class StackLock (from sdl backend, now in util.*)

svn-id: r8777
"
"8a7d540687abdc9a4d431612318bbe43ea0424c8","2003-07-05 15:20:16+00:00","enforce use of type MutexRef

svn-id: r8778
"
"ce9d154957d8843a07a32730e7fd3400948e164d","2003-07-05 15:28:28+00:00","fixed stack lock at startup

svn-id: r8779
"
"fcfe55f574ba6765e1818dece255c3209f1fca62","2003-07-05 15:37:23+00:00","gah. I am stupid

svn-id: r8780
"
"d3bdb565fc5da2c90f1517af0ebc24a37f5c5656","2003-07-05 15:47:45+00:00","Dont show cursor when restoring game
+ warn user when he tries loading an old savegame (not that pretty, yet)

svn-id: r8781
"
"e993f1d231d90f884760d53a261bc4d37e77d9fd","2003-07-05 16:01:55+00:00","protect calls to insertChannel with mutex, too (and switch to using StackLock)

svn-id: r8782
"
"bd160e09cf22ae720c78720795b7cdc0f8b266f1","2003-07-05 16:40:12+00:00","fixed bug #765892 (bottom bar in F5 menu not used)

svn-id: r8783
"
"0e9c6de1c48b112ec5749486e1cdc3e0d54c1c83","2003-07-06 01:41:34+00:00","increased SmushMixer stream size to 500K, this seems to help in Fullthrottle. Apparently, audio data is streamed faster than it's played, and in at least one case there's ~500KB being stream in quick successions (many packets, each 16KB), which is why 100K are not sufficient

svn-id: r8784
"
"5c17c0f7a7aeb752d4c9c4dd73108a93292c1b61","2003-07-06 01:43:40+00:00","cleanup to the mixer helper proc interface and to ChannelStream

svn-id: r8785
"
"8a3e17d69cd1fb47384e2c4d7cf19faa512d3cc3","2003-07-06 02:40:02+00:00","make Makefile.new not require build.rules

svn-id: r8786
"
"c0dee4b6649713f566252a33f25edba578b90436","2003-07-06 04:34:47+00:00","Add change from Hibernatus

svn-id: r8787
"
"714687eaf1da6d2fd9e3fb4819c4cb2916e4c035","2003-07-06 05:50:49+00:00","we want ldflags as well

svn-id: r8788
"
"fb6b42bb93353e45f917caf2f10f82e601452847","2003-07-06 05:51:41+00:00","make x11 backend compile again, still doesn't actually work though...

svn-id: r8789
"
"580e9ec770e3fd7ddc950e122f9ffd797bc205f7","2003-07-06 06:19:52+00:00","Add support for Amiga version of Monkey Island 1
Palette is still wrong

svn-id: r8790
"
"5f3d4c34356fc394624532e09e2f259631274c8e","2003-07-06 06:21:17+00:00","check through list of different sdl-configs, this should make fbsd work out of the box, still need to do an sdl code test though

svn-id: r8791
"
"817d600d8ef191e9bd8745f4eff23998b72f313d","2003-07-06 06:36:26+00:00","More fixes from Hibernatus

svn-id: r8792
"
"81871c5ad02cab6839a15dd4ea0822488b0e991c","2003-07-06 06:47:26+00:00","zak256 sound updates from Hibernatus

svn-id: r8793
"
"bdbd7c98bfc7b4475b26c2e71bb9bd57885ef621","2003-07-06 07:17:50+00:00","Add back change that got lost on last two commits

svn-id: r8795
"
"dc705c04e160ed5c5c92a08de996071079b065d7","2003-07-06 08:14:22+00:00","fix configure script

svn-id: r8796
"
"f12d23f84615c0c29f2cf4e57d6e883d0d533819","2003-07-06 10:01:23+00:00","correct palette on amiga version of mi, from Hibernatus

svn-id: r8797
"
"98027c207225fc2de1e400b88b325943e8278522","2003-07-06 10:39:02+00:00","the amiga check should be separate since the big FIXME comment does not apply to it at all

svn-id: r8798
"
"d27f45d35e850d47bf655f7869e400e6058f2a3b","2003-07-06 10:49:56+00:00","#define MACOSX on the command line, not in config.h; add TODO regarding TMP file names

svn-id: r8799
"
"064fcc5d839715dd04dd9785f6b496f7bec36d8a","2003-07-06 11:19:55+00:00","added TODO

svn-id: r8800
"
"28fa8fedd23c8272dfe7e1350147f78b6471f270","2003-07-06 12:04:37+00:00","recognise FMUS blcoks from 3DO humongous games and print out some debug info about them

svn-id: r8801
"
"5ab59a695c636276cee2ce4cd98e7e1a29c608fe","2003-07-06 14:46:12+00:00","Fixed parse error.

svn-id: r8802
"
"dfdebc39ae64b3c20eed35eafd71bfad19c245ec","2003-07-06 15:02:13+00:00","add support for MRAW/dmu files in 3DO humongous games, has the overlapping music problem again so will probably have to play music via digital imuse at some point

svn-id: r8803
"
"7de3870c130616c98526a8ee864d61a189fa7169","2003-07-06 15:56:13+00:00","This fixes the drawing order of the pillow and magazine in Reich's
apartment. Look out for regressions, though I haven't seen any yet myself.

svn-id: r8804
"
"77b9a4f61e523ce741614fdb102e4cc1dd026b28","2003-07-06 15:57:33+00:00","the mutex must be locked by everything which might access _channels while the mixer thread is running, because the mixer thread may modify _channels

svn-id: r8805
"
"290a974fcd3d1ddf66997aa1bcd792d10277d689","2003-07-06 16:14:35+00:00","added stub opcode 218 for o6_actorOps()

svn-id: r8806
"
"2e0235d898db494a2e3a06a08322302b2c5f4711","2003-07-06 16:51:22+00:00","added  GID_PUTTPUTT game id for puttputt games to prevent use samnmax hacks

svn-id: r8807
"
"b6c3d440b57aa792c5464babe0bb7ad4eb9b5f2c","2003-07-06 16:52:09+00:00","now that we mutex-protect everything properly, we can get rid of _toBeDestroyed; also, instead of keeping a global _handles array in the mixer, let each Channel manage its own handle

svn-id: r8808
"
"7e4fa4a1da468343fc5d5b9e2b62257611920cb2","2003-07-06 17:00:09+00:00","mix() is really a private method, only to be called by the audio thread; cover setupPremix by the mutex, too (that helps preventing race conditions upon exit)

svn-id: r8809
"
"bb756317b3d99265a8ed7e2ef48522c5acbec664","2003-07-06 17:15:42+00:00","added comment for missing puttputt actor opcode

svn-id: r8810
"
"36bf6e09d33189e4edeed5ab9419f6e91069cdbe","2003-07-06 17:46:04+00:00","'Better' fix...  (Die C++, die!)

svn-id: r8811
"
"98759833364d901bff01e08e1031a426d5cd88c1","2003-07-06 18:56:19+00:00","some backend fixes

svn-id: r8812
"
"8c9b152f31388b5da1298c899b3d50ebac5e0376","2003-07-06 19:31:44+00:00","const fix; expannded TODO comment a bit

svn-id: r8813
"
"c29d39fad7c1890f936365babbef4835f7407c5d","2003-07-06 20:19:54+00:00","fix compile

svn-id: r8814
"
"f13b228ac47dd61c0c3a7d541d3bb20914f28f76","2003-07-06 21:03:39+00:00","fixed decoding for special characters. 0.0303 is still incorrect, need joost's help for that.

svn-id: r8815
"
"8d4fea8c6d052f9f37f7d43c2db8b091a280936e","2003-07-06 21:18:34+00:00","tweaks

svn-id: r8816
"
"2061741bd5112e1fbb05c203d45737cbd7d00d80","2003-07-06 21:33:22+00:00","fix bug #766744 (BASS: Crash when quitting while quitting)

svn-id: r8817
"
"68ee2e9051a005373faab81cf98632731a971877","2003-07-06 22:50:37+00:00","add const qualifier

svn-id: r8818
"
"4e373ffb8eed72478f43f1f0415fa655b5dfb210","2003-07-06 22:52:15+00:00","endian fix, cleanup

svn-id: r8819
"
"297aaa9f4e9c991aa7923aa7c427e8585cf6aed2","2003-07-06 23:06:53+00:00","don't use FROM_LE_16 here since loadFile already convertes the header to the correct endianess

svn-id: r8820
"
"1ec23e5f3a9b5d287fcc98bd66217c50dd8a62f3","2003-07-06 23:19:03+00:00","implemented missing puttputt actor opcode 218. this opcode is strange (based of disassembly)

svn-id: r8821
"
"70973f69be738aff81fcc70bbecf7804812bad3c","2003-07-06 23:47:25+00:00","run mouse script on BE systems (not that it works)

svn-id: r8822
"
"3dca18c935682746545f219e715a46fd4cc10852","2003-07-06 23:48:17+00:00","cleanup this doxygen comment (li and arg are the same; we are using autobrief; don't mix the JavaDoc and Qt styles; don't duplicate the function signature, there is no need for that and it gets out of sync (as in this case)

svn-id: r8823
"
"41912bc68578b5e68805f01fc36e79d91691c8cd","2003-07-07 00:14:16+00:00","use our standard cast style

svn-id: r8824
"
"9091a516a28243a89a03e3ba17cb9bf6c1ab2b43","2003-07-07 00:22:41+00:00","don't convert to LE, dataFileHeader is in native endianess

svn-id: r8825
"
"0a511147089e2ac4ae58d12bb498b45a2bb8a47a","2003-07-07 00:27:31+00:00","naother dataFileHeader change

svn-id: r8826
"
"37ec2a14bb861d1976c9fe47c64f2181359a5c14","2003-07-07 00:39:22+00:00","undo this change after discussion with LavosSpawn (doesn't work in either case anyway :-)

svn-id: r8827
"
"e72f9e813bca683a6750ea988da240eb78896c46","2003-07-07 01:36:24+00:00","endian fix by LavosSpawn (helps a lot :-)

svn-id: r8828
"
"001e7bb7174e1f12958a2ca34831ecd1592e2678","2003-07-07 02:32:20+00:00","another fix kudos to LavosSpawn

svn-id: r8829
"
"2a334f176c0ecba48a44b6d66b6fa70591e152fb","2003-07-07 02:54:59+00:00","fixed M$VC++ warnings in text.cpp and added code to disk.cpp which may or may not fix graphics problems in hobbins' room on big endian systems (can't test that).

svn-id: r8830
"
"0fefe4602c29b71449d568a7478f8572ae7eb69c","2003-07-07 05:45:55+00:00","Fix for bug [761637] FOA: Music problems in endgame/credits.
Revision to the handle_maker() fix for bug #733401, since that
didn't seem to take care of the problem. This fix chomps marker
queue entries if it finds a matching marker not at the head of
the queue. This might cause inappropriate behavior elsewhere;
regression testing is advised.

svn-id: r8831
"
"c3150fea58a45d2e46c8be21f142e833cfaa51e1","2003-07-07 06:45:33+00:00","This seems to fix the inventory sprite for the glass, and is more
consistent with the rest of the loadFixedItems() function.

svn-id: r8832
"
"60a7b30b540ac99561756829431592eefae4e034","2003-07-07 08:42:45+00:00","More options

svn-id: r8833
"
"c4b942bfce3b5dff1d440ba8de8869362eac7d26","2003-07-07 08:45:20+00:00","MP3 and sound thread fixes

svn-id: r8834
"
"2b4210635e42f83a02d4d6fbd63afa0c5fdf753a","2003-07-07 08:49:27+00:00","Language option support + music and MP3 related options

svn-id: r8835
"
"7d03378fdc85c7385f2f9b653f8a39232907f689","2003-07-07 08:51:28+00:00","Fixed %c modifier

svn-id: r8836
"
"aba828400864760ab43fa21141ac328be7fb2c88","2003-07-07 08:53:05+00:00","New thread emu

svn-id: r8837
"
"8f13d7c31ed2ad193dd205aabdb362429945d58f","2003-07-07 09:00:44+00:00","Updated with new files

svn-id: r8838
"
"43c310924e88fed0886866812d153c8df2098b34","2003-07-07 09:08:04+00:00","More languages

svn-id: r8839
"
"2ad7b1e796c2b772762047d0ee86cb0382f9fc84","2003-07-07 14:58:53+00:00","applied patch #766979 (BASS: Possible fix for problem with cut-off speech).
added small change to SFX samplerate, sparky doesn't sound like a bird now, either.

svn-id: r8840
"
"5857979d67535295e16d4ca6b18f6e05b2c113e2","2003-07-07 15:12:21+00:00","Add missing bit of code, still hopelessly broken.

svn-id: r8841
"
"2e35b6b3304f961f293b10ccf0a5617fe75b17fa","2003-07-07 15:21:37+00:00","Fixed warning.

svn-id: r8842
"
"b53435dfce518d81e1c4590e7afeb5442734554b","2003-07-07 16:40:27+00:00","applied patch #766751 (BASS: Waiting for floppy intro music to finish) and fixed music bug (jukebox at St. James didn't stop playing)

svn-id: r8843
"
"d33d562ce598cf14af7cfc7cc75356e109dbfbad","2003-07-07 17:00:55+00:00","button text for save and restore doesn't disappear anymore.
+ fixed screen updates for swing seqs.

svn-id: r8844
"
"93f5eb049028271c77e2408a282b7f664d2625e7","2003-07-07 22:10:49+00:00","don't say 'saved/loaded' when the message is only displayed on saves anyway

svn-id: r8845
"
"74554d6e917bb361ee424b7a652c66997a72b594","2003-07-07 22:11:03+00:00","fix for bug #766532: MI2: look at coffin to Mojo

svn-id: r8846
"
"b5a42396e7d0807c41f6ae6475b40ac67177d775","2003-07-07 22:17:20+00:00","only move charset mask upon scrolling if tex is displayed in the game graphics, but not for games which have a seperate text display area (partial fix for bug #766109)

svn-id: r8847
"
"58486149a9e5beafc0b56e3f6c48d8a8bf3c7c78","2003-07-07 22:33:07+00:00","fix for bug #766119: help screen: '.' is listed incorrectly

svn-id: r8848
"
"d25041859dbf4a3e260aa130790ab2f05be90f3d","2003-07-07 23:11:09+00:00","#include scummsys.h so that our custome free() gets used

svn-id: r8849
"
"bf4e5742502098dda950ff10b75d8c18f45d7bb9","2003-07-07 23:11:19+00:00","check for odd addresses being free'd

svn-id: r8850
"
"7b017fcf7c9d81c3599226310b63b6bc2be85d70","2003-07-08 06:28:25+00:00","Use the correct size (I hope) for decoding _C64MaskChar (whatever that is).
This should improve ScummVM's chances of surviving long enough to crash in
the V1 costume renderer instead.

svn-id: r8851
"
"07bd98b27f4c7e9968ec225863cded3bd8bda6e8","2003-07-08 10:49:13+00:00","move V1_ignorePakCols to CostumeRenderer (it makes absolutely no sense to keep it in BaseCostumeRenderer), and renamed it to c64_ignorePakCols to avoid confusion (V1 in the context of costumes means the original costume format, as opposed to AKOS; and *not* the scumm version); added FIXME to cost_decodeData (have my doubts about it being correct)

svn-id: r8852
"
"1d69c338194fd080010f2cf434cb519a50016b14","2003-07-08 10:51:55+00:00","clarified comment

svn-id: r8853
"
"848cfb9378a54812d0164ec61350d02bede77ca1","2003-07-08 12:28:57+00:00","costume code cleanup & some more C64 tweaks

svn-id: r8854
"
"319233d75f314772cdc63a9cc5a9df17fb1edad5","2003-07-08 12:29:57+00:00","make more explicit :-)

svn-id: r8855
"
"588279dd4f6416f96512008b0e510eecbaae94c2","2003-07-08 13:11:42+00:00","some more cleanup / C64 tweaks

svn-id: r8856
"
"8dd90916e04b77bf34108ba97897412d24cd192f","2003-07-08 16:17:41+00:00","ok, thanks erik for pointing out to me where this occurs :-)

svn-id: r8857
"
"501e728d0240cd38e5ae797e756417c0daacea87","2003-07-08 16:31:01+00:00","again some code transformation (no functionality change; the V1 specific modifications now mostly have to be done in one spot, and it's now pretty obvious how things evolved towards AKOS

svn-id: r8858
"
"5428987a04703840c22796820c25ca4c504e6c0a","2003-07-08 16:47:15+00:00","_dataOffsets has the correct value now (based on comparisions of repeated offsets in the offsets tables, and matching them up between V1 and V2)

svn-id: r8859
"
"c1635b94bf85fed6a51d1248d7c6dacc4361f55c","2003-07-08 16:53:18+00:00","the 'mask' value is now also right; data at 'r' seems to match, too, and finally the same limbs are used in V1 MM as in V2 MM

svn-id: r8860
"
"d9a604a925542d34c500dd250f62def96a50c880","2003-07-08 17:08:44+00:00","turns out the +4 on _baseptr is needed everywhere - now _animCmds matches between V1 and V2 MM, too, as well as the frameptr

svn-id: r8861
"
"ebd5310473690de50016307c5ccb8ed426752ee1","2003-07-08 17:22:53+00:00","width has to be multiplied by 8; not sure about xmove, the values still look completely wrong compared to V2

svn-id: r8862
"
"00a87fda033d07e5ca45f1180ec91809f5929060","2003-07-08 17:42:11+00:00","made ignorePakCols exactly match CostumeRenderer::proc3 to make comparisions easier

svn-id: r8863
"
"66ec3f9c75d5e923063506bea666f9f8825517f5","2003-07-08 17:44:06+00:00","rewrote c64_ignorePakCols to what I *think* it should look like, base on my understanding of the code. so far completely untested :-)

svn-id: r8864
"
"48b16bd81925893cad793ab28b7758a4a339bd23","2003-07-08 18:09:22+00:00","fix warning

svn-id: r8865
"
"d5b1b68634bc949b08adedc34e3e420fa8e7d612","2003-07-08 18:09:57+00:00","each row has to be drawn 8 times (8x8 chars, after all), see also Gdi::drawStripC64Object etc.)

svn-id: r8866
"
"fe944219eb449234c207ee3987973695d3d9a0aa","2003-07-08 18:18:26+00:00","not sure which of the two variants is correct (but I am pretty sure the old one, with _height>>3, was wrong)

svn-id: r8867
"
"3d9b20bb86dc76ba7efa15bb90fa07fc6f1ea663","2003-07-08 22:08:29+00:00","fixed file loading bugs for v.0.0331, control panel works now

svn-id: r8868
"
"4fb3e9a448cb30e89e1de0e49bb83d32ef27c62d","2003-07-08 22:27:17+00:00","another fix for the swing seqs

svn-id: r8869
"
"61ab6933c55591d76dc5c1775f2dd6db5c62de2c","2003-07-08 22:44:45+00:00","Update to new virtual functions, protected members and so on, take one

svn-id: r8870
"
"5eaef69291976581b5556f5335157e5693dde170","2003-07-08 22:50:43+00:00","New BASS subproject

svn-id: r8871
"
"42f3887bac57befd7e2b84a0ecc2d8d7de49b39f","2003-07-08 22:51:36+00:00","Update projects

svn-id: r8872
"
"6c66bf2ee453a79f8d59b3c7eb495cf58b2a4220","2003-07-08 23:25:51+00:00","this is for letting BASS wait for the end of the ending theme before starting the next song. It's kinda hacky to put it into the music code, but I can't think of another way to do it while keeping the engine running like usual.

svn-id: r8873
"
"bae011dbd6c9cb599db7d6e6de6344929a1a6f10","2003-07-09 00:31:49+00:00","script data is the same for 0.0365, 0.0368 and 0.0372, so allow switching saved games.

svn-id: r8874
"
"6d84c679069ea1d56f3eb84406bd5a51d05556f9","2003-07-09 00:35:41+00:00","/me slaps himself

svn-id: r8875
"
"345c368cf0c6587473808f28313c29cf9cdcb9ce","2003-07-09 04:31:24+00:00","revert to last revision of musicbase that doesn't cause a segfault here anymore

svn-id: r8876
"
"2b127e74af715906c619f3a57d3b4de614a1df30","2003-07-09 07:02:57+00:00","The charSpacing values for _controlCharacterSet and _linkCharacterSet
appear to have been swapped. Now the LINC terminal texts should fit in
the screen area, and text in LINC space should look less 'squashed'.

svn-id: r8877
"
"eaddb394edf2ea097e570112088057c36f9737de","2003-07-09 08:50:00+00:00","Use the same capitalization of 'iMUSE' everywhere.

svn-id: r8878
"
"53b244f77fec0cff4f0e71b5353a8d7dcbda6b10","2003-07-09 13:23:16+00:00","Patch #768217: Apply Mankeli's 'object state' debugger command

svn-id: r8879
"
"90bac4a5ce5ebdc4b320b3cb2c26da3ea35416ed","2003-07-09 14:57:15+00:00","Fix compilation, V1 verb positions

svn-id: r8880
"
"f3a1aa73b33869302d14cc7148957a1270ffdf7a","2003-07-09 16:54:34+00:00","Fix character spacing for LINC terminals in v0.0288 as well. I've only
tested is a little on a borrowed copy of BASS, but I think it should look
the same as v0.0372 now.

svn-id: r8881
"
"a8b9b2a1804e7eb7a8283469178cb792c1d1b885","2003-07-09 17:22:45+00:00","SoundMixer::setMusicVolume() doesn't seem to do anything, so set music volume manually....

svn-id: r8882
"
"2c065bcffebed70b3e7e30b31b6dd22c1f441abc","2003-07-09 17:50:57+00:00","activated speed slider in SkyControl, fixed different charsets in control panel when entering from LINC terminal, etc.

svn-id: r8883
"
"5f9845b2cb3f3bbe2ac5eccc919139114a9edd3a","2003-07-09 18:12:58+00:00","added toggling music on/off

svn-id: r8884
"
"96f442923c70cdb57001ec141c25ff070587ffed","2003-07-10 00:08:07+00:00","implemented fnRestartGame() and skipping of 2nd intro part

svn-id: r8885
"
"5aba29ae2dde8a790a37e9b1af8bea21dbdef3bc","2003-07-10 01:55:48+00:00","this fixes bug #768724 (text width exceeded in LINC terminal).
I wonder though, if this isn't in fact a bug in the huffman tree.

svn-id: r8886
"
"1bedb9ebbf9793ca7ca751ca667f75f7a2da7f67","2003-07-10 02:13:53+00:00","forgot to allow restarting from control panel

svn-id: r8887
"
"e28e6de62075cca6316bd25ae4a6882d9799cc05","2003-07-10 04:04:59+00:00","Update news

svn-id: r8888
"
"da09621bd4e7555d41e2f32eb2bee6e3b9ad2097","2003-07-10 04:11:42+00:00","Typo

svn-id: r8889
"
"f2215b781331db0127215525022fdf7db8c58fae","2003-07-10 04:21:23+00:00","zak v1 doesn't start yet

svn-id: r8890
"
"5c543d56056d84e59aca03c2a7d596d81b6fd610","2003-07-10 04:32:00+00:00","Readd Zak. Unplayable means unplayable, you know.

svn-id: r8891
"
"4ac4d76718f5ca83b8648bc57278b2135773c2e7","2003-07-10 04:34:44+00:00","Fix for Bug [766426]: V5 Games: Adlib SFX not looped

Modified Smart Jump logic to deal with active notes
whose Note On and Note Off events BOTH occur OUTSIDE
the range of the jump. While this is not a thorough
way to deal with Note On events that occur outside
jump points, it at least deals with the issue of
long, unchanging Adlib SFX used by some earlier
SCUMM games.

svn-id: r8892
"
"b19055abe789e625e6b9b1d8584297b254a0d81b","2003-07-10 06:50:28+00:00","updated known BASS bugs

svn-id: r8893
"
"989b1550448c97799cb43f9c70ab643dbfdf6a13","2003-07-10 07:09:25+00:00","Slight cleanup. Fixes a few minor memory leaks, I believe.

svn-id: r8894
"
"6ae8144929194ff6fc29a0ca4750faefc78169a0","2003-07-10 07:56:35+00:00","whoops.

svn-id: r8895
"
"a9ae95a64e34b80826795eca28c456ac6bab620f","2003-07-10 08:24:16+00:00","implemented fnOpenHand/fnCloseHand, added debug cheats

svn-id: r8896
"
"6480a00855d88615ab8f19798d82dc93bdce46ae","2003-07-10 10:24:06+00:00","aspect ratio correction

svn-id: r8897
"
"71ca768c675ec1dc1700e5709bf5b7b55619023e","2003-07-10 10:36:24+00:00","abide by command line request for no subtitles if running the cd version

svn-id: r8898
"
"b3247c5e5f25eff2fda7b53068cb6a28d8ba79cf","2003-07-10 20:09:19+00:00","fixed endian specific palette bugs for restarting game and control panel

svn-id: r8899
"
"49cd3bdfff77babcb1d9ad2cf45c7e178a54b481","2003-07-10 20:15:11+00:00","forgot a #endif

svn-id: r8900
"
"85ef932330952a4e568bbd6ab171524eb9f530df","2003-07-10 20:22:26+00:00","fix compile

svn-id: r8901
"
"39b37df37a7fed6f5dd62d11fb10e4b8276f05c1","2003-07-11 06:25:37+00:00","Fix for Bug [766984]: FOA: Adlib sound distortion

Added check for OOB note numbers when instantiating
Adlib registers with frequency information. Must check
WHY exactly we're getting OOB note numbers (and *way*
OOB, at that).

svn-id: r8902
"
"8b8b964aadcf0f37cfb853c83857da7271af5ebc","2003-07-11 07:14:21+00:00","Reverted to 'old' YM3812 (FMOPL) emulator code.
Until specific information regarding the benefits
of migrating to the new emulator can be made
available, the 'old' code will remain in effect
for the benefit of slower hardware platforms such
as some WinCE-based devices.

svn-id: r8903
"
"4c6e10bfd6d65a7c8e83d9417fb114b1263e7558","2003-07-11 09:38:46+00:00","Add amiga pallete for Amiga versions

svn-id: r8904
"
"88c2ef94d2ce7569ebb5c85092602391703ea6d8","2003-07-11 10:13:42+00:00","Using Amiga palette with 16 color Amiga versions only

svn-id: r8905
"
"378856a693942f7a6fa71c951bcba003d2d5f0c0","2003-07-11 10:23:13+00:00","Post FMOPL-reversion cleanup.

svn-id: r8906
"
"c4455fc0fd44ee2ee236cf4dd955c6c925f50e26","2003-07-11 10:47:10+00:00","Fix for OOB Adlib frequencies

svn-id: r8907
"
"88550e5d21d8beaac3e412184ce542896c47c01e","2003-07-11 12:10:58+00:00","Restore correct value

svn-id: r8908
"
"fca93093059229500524af444d087b5365c2339c","2003-07-11 14:27:55+00:00","Missed one section

svn-id: r8909
"
"e74eddf6fa7e779d3f771bd0bb0a40c241c182b7","2003-07-11 14:54:16+00:00","Update the 16-colour palette if the user changes the Amiga setting from
the options dialog.

svn-id: r8910
"
"333ea0e300a6885636e46da64c54eb125c040446","2003-07-11 15:52:46+00:00","Avoid deadlock

svn-id: r8911
"
"226543582e5237d1fd45fa38ba38df8f827387bf","2003-07-11 18:56:57+00:00","big endian fix

svn-id: r8912
"
"693ea1d6f27d3d9f92a6379d1854c139541cb953","2003-07-11 19:41:37+00:00","fixed item descriptions

svn-id: r8913
"
"021aa93c6c0cfa37198de3a7a4158498a165e41c","2003-07-11 22:09:21+00:00","removed useless additional mapping tables and fixed crash in LINC section

svn-id: r8914
"
"f89c68c6f19d859a755741ddb0d66255b5f6b69c","2003-07-11 22:19:16+00:00","added autosaving every 5 minutes

svn-id: r8915
"
"fa921ad6d629937bb348a6296bee68ed5e9cee0e","2003-07-11 22:59:56+00:00","fixed screen blit during fnDrawScreen

svn-id: r8916
"
"24be1e168293a3681e06b9e6999cc6c33cbe50d6","2003-07-11 23:56:28+00:00","fix endian specific color palette bugs.

svn-id: r8917
"
"9c531b56090a094d5fb44aa1ad43478ff4f06097","2003-07-12 00:19:11+00:00","update sky

svn-id: r8918
"
"a857771521346eb29c5d2aa27e997f8f3ec058c8","2003-07-12 01:12:00+00:00","implemented dialog skipping and cleaned up mouse code

svn-id: r8919
"
"4dd927f1cf5cc9572f41a2e3d40d8f8aab8d1333","2003-07-12 02:07:37+00:00","added dialog skipping by pressing '.'

svn-id: r8920
"
"8b36d14696f2942d1446e641759e05a8089ee8d9","2003-07-12 03:40:44+00:00","added support for different languages and fixed memory leak and screen refreshes in load/save dialogs

svn-id: r8921
"
"3c604ee891d4e5332fd817cb32c4a93b6da4f1a9","2003-07-12 04:15:10+00:00","Update simon language options

svn-id: r8922
"
"b241be004d0a0a4c7ff65595def095a1939cc03f","2003-07-12 04:21:20+00:00","removed useless _backScreen from SkyScreen

svn-id: r8923
"
"809ffa3c83d55702d2522696e8a31857509d9826","2003-07-12 04:23:42+00:00","Add mansion/zak to language section, sort games by version

svn-id: r8924
"
"8cc3d5e39c5b7eafca87366f6d4b9f70be9967f4","2003-07-12 04:31:40+00:00","Add the dig language options, are there any others ?

svn-id: r8925
"
"cb48b4fca0b6a1fc816ba6cb49f497476ebcd534","2003-07-12 05:26:23+00:00","implemented -x command line option

svn-id: r8926
"
"67a760d10c18f4b0af37fa6a11ff817b2c318e87","2003-07-12 05:38:04+00:00","floppy versions don't seem to have all languages in their datafiles.

svn-id: r8927
"
"fbb0ddcc34e8e9682f4eaf6afe60fa10c4e9c76a","2003-07-12 05:52:28+00:00","keep virgin logo from flashing up when using -x

svn-id: r8928
"
"4e406387ad28bbf15b07dcd3caa55dd02de7af44","2003-07-12 05:57:53+00:00","one more small fix

svn-id: r8929
"
"3e578daa0144f40fe78e7f6baf90842be9c5b788","2003-07-12 06:12:54+00:00","get music volume from command line

svn-id: r8930
"
"8e776dea077d974181e6dff7e296a3a065a83274","2003-07-12 06:20:40+00:00","fixed mt32 key velocities

svn-id: r8931
"
"2ccaa6f1afb442a074feede8f3432972faa76639","2003-07-12 06:39:55+00:00","fix Swedish quit message

svn-id: r8932
"
"99cd9df6f7ff31984d05dde905b05dea479fc4b5","2003-07-12 08:55:23+00:00","add newline at end of file to make gcc happy

svn-id: r8933
"
"d71b335259a58e13c0975de292b84cc3371b8ee5","2003-07-12 09:14:25+00:00","Sky supports autosaving now

svn-id: r8934
"
"dabe8799a126362b6a59514252600b022729cae7","2003-07-12 09:45:10+00:00","Fix for bug 769896, update README a little

svn-id: r8935
"
"97b67117d3fc90a07f9c8f27cdcf73dc4c215c0e","2003-07-12 10:02:12+00:00","add some stuff for v0.0109

svn-id: r8936
"
"72c8e0d96b1fddd4cb009d9249027db4ca11a265","2003-07-12 10:12:41+00:00","Give sample rate to channel classes (WinCE downsampling) / Do not use dynamic cast with EVC 3 / Fix Tremor Ogg support

svn-id: r8937
"
"cc23b25cdecc63c41f67f56983ccacabe5709a97","2003-07-12 10:19:18+00:00","Fix fix for 769896

svn-id: r8938
"
"524991b07368c70a6b14ba713b0e27b9150f1b51","2003-07-12 10:35:38+00:00","Add KEY_ALL_SKIP for WinCE

svn-id: r8939
"
"1e0b7aaa16d6caeca1d67f383297f7ed619348f9","2003-07-12 11:33:13+00:00","verify chan != 0 even on WinCE

svn-id: r8940
"
"f383dc24c4aa17fd6a1b8c922f360db5baaf6c64","2003-07-12 12:16:17+00:00","fix existing ego actor change detection code

svn-id: r8941
"
"ee62678369742eca033378328649320d92e32f6b","2003-07-12 12:23:43+00:00","revert change made in rev 1.140 fixes bug 766109

svn-id: r8942
"
"b2f737888dfb28ca9d60685c8b433ab955be4ff7","2003-07-12 12:40:20+00:00","fix box coordinates for v1/v2 games (boxes are now contiguous)

svn-id: r8943
"
"ad66be2b57b2e972f7067f602f05aa3408f4fcf8","2003-07-12 13:15:12+00:00","Add WinCE virtual keyboard

svn-id: r8944
"
"5825d77e3746a9d11b940e9b0345eb53a60ea2bd","2003-07-12 15:21:34+00:00","added khalek's huffman tree for 0.0109

svn-id: r8945
"
"7c92fb40aec2a20c22bf889a46d3c3177b7a9cae","2003-07-12 15:26:07+00:00","try all languages, if selected one can't be found.

svn-id: r8946
"
"d50009b7c7191b82c32a8dde870e4edc6aac143e","2003-07-12 15:27:41+00:00","Preemptive code cleanup to prevent ear damage during certain Euphony tunes

svn-id: r8947
"
"fcc52b238bdf51969997c5ff4f93fbdfda8e2f52","2003-07-12 15:38:27+00:00","remove unused variable which is also incorrectly cast...

svn-id: r8948
"
"6ea1d54f5067da0e75717e5a7d97d046bf4591f6","2003-07-12 16:54:30+00:00","A few mino changes for pc gamer demo

svn-id: r8949
"
"9e8dcf879df06a0f6dd02d357839a36555bd191f","2003-07-12 17:07:53+00:00","Didn't help

svn-id: r8950
"
"8b27f60434cbf47a0362d6560d3cda745e076a6d","2003-07-12 17:43:39+00:00","Fixed RTTI warnings with PalmOS port

svn-id: r8951
"
"fd82895ff5e6ec3f43907c63b36b0ceeded4f478","2003-07-12 17:53:22+00:00","adjusted V2 actor position to match original (MM) interpreter; tweaked adjustXYToBeInBox mod for V2 (so it's clear why it is needed)

svn-id: r8952
"
"bc5dbf8e660607c1b512ba8365e68d1207a8122f","2003-07-12 18:46:33+00:00","undoing my last box change - with the last change in actor.cpp, this should make MM boxes work properly and fix one or multiple of the open MM bugs

svn-id: r8953
"
"be261b5d7ce11bfd5705d3c42787293db1315fb8","2003-07-12 19:13:25+00:00","moved to more warnings into the GCC 3.x only category

svn-id: r8954
"
"187b715306a7a1912e71a0854992a54115d1f751","2003-07-12 21:28:04+00:00","run script 5 in startScene (room transition script, it seems); don't invoke runInputScript(4) - it is not needed (runInputScript will be called by checkExecVerbs), and causes the buggy 'What is' command behavior); fixed V2 sentence line

svn-id: r8955
"
"d35c57a53f0b9427f41f8c0deef40ef9493e88a9","2003-07-12 22:00:59+00:00","fixes for cutscenes in V2 games

svn-id: r8956
"
"adf9331624ba5118af0351cd8892498b1b3ef11f","2003-07-12 22:33:03+00:00","properly show/hide verbs&inventory&sentence during cutscenes

svn-id: r8957
"
"66000eccbf7521122111d36d666a0e40ebbe54e7","2003-07-12 22:41:58+00:00","fix for bug #770308

svn-id: r8958
"
"7189b0a11ad8b93b40cb4200ee35becf36c07009","2003-07-12 22:46:23+00:00","fix for bug #770311 (at least for V2 games)

svn-id: r8959
"
"a87fd1011d0c17bade8a090826df4a9bded8e06b","2003-07-12 23:29:31+00:00","fix intro

svn-id: r8960
"
"8e94094c9db1c4a302fed40a30eee85eb7b1bf55","2003-07-13 02:25:36+00:00","consistent case statement options, and make warnings more useful

svn-id: r8961
"
"00615e4df7cb27cd45a7afd3053c3cdc683d860a","2003-07-13 02:45:31+00:00","fix x/y limb offsets and transparancy with C64 costume renderer

svn-id: r8962
"
"53ac8f62cf66edb45e69ab9bd8ad128c6741f806","2003-07-13 03:05:41+00:00","Commit fixme to prevent some issues on Amiga verison of MI2

svn-id: r8963
"
"61b8b227c07fc8e0dae6790e18d29098d58cd995","2003-07-13 04:26:55+00:00","fix set-volume crash.

svn-id: r8964
"
"22edb8c39b45ff2a97f72ceaa926be8132245d2d","2003-07-13 05:07:27+00:00","Revert my last change, made some in text text unreadable (black).
Could more palette change be required for 32 color Amiga versions ?

svn-id: r8965
"
"3b8a1461520b542a726da1894eb6555f58f4a235","2003-07-13 06:04:11+00:00","music support for BASS floppy demo v.0.0109.
adlib doesn't really work, but the rest of the game doesn't either... so who cares, anyway.

svn-id: r8966
"
"43ab7128928dfb8c7c029454f6bd702563848b91","2003-07-13 06:04:39+00:00","sound support for v.0.0109

svn-id: r8967
"
"39a088229a367b6429031c2eb349ed293745f2df","2003-07-13 06:29:49+00:00","Fix for Bug [768940] SIMON: Music in Swamp shouldn't loop

Fixed problem with how loop control was being handled
in the Simon 2 music queueing logic.

svn-id: r8968
"
"6949d49e690a54512db8afd946a66bffdfff97c5","2003-07-13 09:01:30+00:00","Simpler check

svn-id: r8969
"
"eb49053e08aaf041fe22dbf9bf5bea3a42ce92cc","2003-07-13 10:35:05+00:00","C64 costumes work now enough to be recognizable

svn-id: r8970
"
"2a6507d9c4990c23b614fd40dd2756c0fa126bd9","2003-07-13 11:03:33+00:00","Don't try to run the sound thread if not set

svn-id: r8971
"
"f73cd745f15d6cc44680d2c9ae9f4cd39a33f514","2003-07-13 11:13:50+00:00","reduce code duplication; theoretical masking implementation for C64 costumes, can't test since masking is disabled in gfx.cpp for C64/V1 games

svn-id: r8972
"
"c149af5b0716458c99ace3f0ccea3eb8489c760b","2003-07-13 11:40:19+00:00","fixed gdi._C64MaskChar decoding

svn-id: r8973
"
"beef7347e67e3b5ccd71d261589b7d6ebbb8b401","2003-07-13 11:54:31+00:00","added some FIXMEs

svn-id: r8974
"
"a2f2d4c40a3c7751a9d3f265c306979b47eae802","2003-07-13 12:15:43+00:00","Do not use free_check on WinCE

svn-id: r8975
"
"f163ae5ce5a02ee5ce1d899bdf653cff8dc033be","2003-07-13 12:24:36+00:00","Update WINDBG to WinCE

svn-id: r8976
"
"765e4a8d93a9f61f91a6025a018d9dbf295457a8","2003-07-13 12:28:01+00:00","Fix screen limit (Zak)

svn-id: r8977
"
"e41a18b7e4f8fde223e70248a9ec99631b818218","2003-07-13 12:29:24+00:00","Add Mac Simon, change Simon detection, update descriptions

svn-id: r8978
"
"6e57311011717f70092c4efe98c9ffa5e028dd43","2003-07-13 12:30:32+00:00","Add Free-Look key

svn-id: r8979
"
"22f2d9447032b9662838929b4a0252ff351d2950","2003-07-13 12:34:55+00:00","Update events - BASS & Simon updates - Fix keyboard (Simon quit works) - Fix save key (EGA games)

svn-id: r8980
"
"fb52d4da18227fa02ab9c85bc56259f9ff8c2298","2003-07-13 12:36:21+00:00","Fix keyboard (Simon quit works) - Fix save key (EGA games) - Add Free Look key

svn-id: r8981
"
"3e629bbd97ad98952936b57afcb39e27e7a2d136","2003-07-13 12:37:16+00:00","Fix save key (EGA games)

svn-id: r8982
"
"70866ef72f026bd92e6ec8c56a750676263cddf1","2003-07-13 12:38:04+00:00","Add Sky dependency

svn-id: r8983
"
"bc1120b67ac85447cbb3dae5402c86451f7d9103","2003-07-13 13:57:19+00:00","linux/mingw compilation fix pointed out by Jeroen Janssen

svn-id: r8984
"
"4a3f0b547df4f09cd8032ce746f06d5e8e805cfc","2003-07-13 15:11:09+00:00","Get rid of additional version #define

svn-id: r8985
"
"dce546c2410516ee29df8da3a62ee0569701cdcc","2003-07-13 15:11:48+00:00","Get rid of additional version #define, default is now to disable HPC GameX (does it even work ?)

svn-id: r8986
"
"8ba41ba5e050b4b90b6dc4ba23402eb67c1ac4e1","2003-07-13 15:12:46+00:00","Get rid of additional version #define, add dynamic key rates

svn-id: r8987
"
"ffddfd76d9fa7869304b02b5ef989f0c405956ae","2003-07-13 15:13:43+00:00","Add correct palette for pc versions of v1 games
Add some correct colors for v1 games

svn-id: r8988
"
"3304c40f26df9e38e29b2c693f477cc3aaa7b12d","2003-07-13 15:38:59+00:00","changed 'sprite not loaded' printfs to debug()s.

svn-id: r8989
"
"0642d2df98ed3b6c0251acf95b58674b1713bb9f","2003-07-13 15:58:48+00:00","Correct v1 games inventory positions

svn-id: r8990
"
"963ecad36275f338fffb1619a0e8535016352d61","2003-07-13 16:22:17+00:00","debug/warning/error all automatically output a newline

svn-id: r8991
"
"726718a60e944ef380fc02e9c490f81b17dc8830","2003-07-13 17:16:05+00:00","For some reason, changing the kSentenceLine color stops highlighting working.

svn-id: r8992
"
"a52a80d4f50f44ecfa11068700cfc647b1eaeae4","2003-07-13 19:50:35+00:00","workaround for bug #770351

svn-id: r8993
"
"27a1d8ab7b20ae74aa36c560304c33f597faa6e9","2003-07-13 20:03:18+00:00","fix for bug #770344 (INDY3EGA: Amiga - Biff's name not shown in fight); this fix is not only needed for IndyEGA, but also for Loom (according to disassembly; I am guessing that it might be needed for all 'V3' (in our internal notation) games, but that remains to be verified

svn-id: r8994
"
"59ac07dcd6db57e6a63739f78b09189759e9e921","2003-07-13 20:27:28+00:00","workaround for bug #770093 (Zak256 Crash inside of Sphinx)

svn-id: r8995
"
"9b55abbf49f3ea4d3cdbecb9898838283f59fcf1","2003-07-14 06:00:17+00:00","V1 Zak fixes and hacks. (Woo, it rhymes! :)

svn-id: r8996
"
"e6f3eb9aa53ace350d698ba444008b083deffd01","2003-07-14 06:14:49+00:00","A few color fixes for v1/v2

svn-id: r8997
"
"89cc9ede192d33eb7f57d8dccf2c65b367378510","2003-07-14 06:19:06+00:00","Ooops, was in reverse.

svn-id: r8998
"
"73365aa2c7e225fcc7558e1e8482e5c2fd4f3212","2003-07-14 06:44:47+00:00","Split the v1 palette, since there is a minor difference.

svn-id: r8999
"
"085d14a8c81b1324cba45e301fa44046f4daf29b","2003-07-14 07:26:57+00:00","Redraw screen when loading v1 saved game

svn-id: r9000
"
"74d3d914a93dd3914e74aed278eb8f9383f51783","2003-07-14 08:29:17+00:00","Feature [770161] SIMON: Remap instruments to GM

Apparently Simon 1 (all versions) uses MT32 instruments,
so now we map them to GM *unless* the --native-mt32
option was specified.

svn-id: r9001
"
"21266bfc79f3462537b182ffef1de40e2bfaddd8","2003-07-14 08:42:02+00:00","zak v1 uses same sound resources as zak v2

svn-id: r9002
"
"ae0bcfc2139de0f53c0f7d00867d569047443075","2003-07-14 08:44:02+00:00","Update readme a bit. Can someone please update the build instructions re: using Configure?

svn-id: r9003
"
"2980a78dffc968188de2633b2bd01c97b2fdd236","2003-07-14 08:48:38+00:00","We ARE in a cvs freeze, PLEASE at least test if your code compiles before commiting...
Jamieson, this isn't even a valid line of C! @toad Jamieson630

svn-id: r9004
"
"40eac8b182143586e4e336ff3a1412c6c27ec697","2003-07-14 09:02:12+00:00","Fixed typo. While I agree that this error should have
been caught before committing (compiler didn't detect
need to do incremental build, sorry), I think if something
this trivial is going to get such a reaction, I have to
agree with Fingolfin that a release or RC branch is
advisable regardless of how slow one predicts the CVS
traffic will be.

svn-id: r9005
"
"d971845fab4473e6e2f609cd9463993223f55f80","2003-07-14 09:16:12+00:00","fixed text drawing bug and made sure autosave doesn't save if engine is in logic_choose mode

svn-id: r9006
"
"e997d05b3c1e8e04acb7d11804aaf3880aa06dcf","2003-07-14 09:26:50+00:00","fixed toggling music on/off after savegame restore

svn-id: r9007
"
"dc9a153e1b7b7dcd82b34a7b63e89855cc7cba3c","2003-07-14 09:30:29+00:00","Inventory position is the same in both v1 and v2 games

svn-id: r9008
"
"4ae380102a533a8a332e46a4daea2a273f3930a1","2003-07-14 10:02:37+00:00","Fix for Bug [770838] SIMON1DOS: Fatal crashes with French version

Fix variable underflow for large subtitle strings with no
discernable whitespace. This fixes crashes for French subtitles
that do, in fact, have whitespace but perhaps not using the
same ASCII character that we scan for. Anyway, the text will
display, albeit with an extra blank line, and ScummVM no longer
blows up.

svn-id: r9009
"
"ffb65a9e042eee2a6c51988a237a36bee29e0497","2003-07-14 10:05:32+00:00","fix bug #770784: Talking characters stay at last frame

svn-id: r9010
"
"1f12612b9e5ddb7dd1fde94c70ed7a71e4f9be5e","2003-07-14 10:55:06+00:00","Allow debugger in full screen mode

svn-id: r9011
"
"e7913ad49aeae6772bb2c867440bde623fe42943","2003-07-14 11:35:09+00:00","Fix fixme

svn-id: r9012
"
"dc3e4ce46baa4a14d1fcbf9555cd82d00ccbba7e","2003-07-14 12:00:20+00:00","Fixed error that resulted in bad script tracking
when creating sprites during a savegame load
after having been at certain locations.

(If that sounds convoluted, it's because I don't
know why I fixed what I did, only that the code
we had was not quite constructed properly from
assembler references.)

svn-id: r9013
"
"eedeffac6a55ace2331b38447502e90a0ebde263","2003-07-14 12:15:17+00:00","Fixed behavior of 'm' key under simon1dos.
The 'm' key was turning off both music
AND MIDI sound effects. It now turns off
only the music.

svn-id: r9014
"
"9a8800bc2fcc59bf62cf9419a939777490ebf477","2003-07-14 12:32:41+00:00","Less simon bugs now

svn-id: r9015
"
"21ea778e5af20491c07d2fd5b3298dce3d86ac5b","2003-07-14 12:48:46+00:00","fix argument check

svn-id: r9016
"
"1c9a8569186a78a9031e13f99f57cfc7d79b921c","2003-07-14 17:36:27+00:00","this hack isn't necessary anymore (at least I found no cases where it would be needed)

svn-id: r9017
"
"5031b62871f1b9ae8bc28ca199bb6fddae0d4dd7","2003-07-14 18:20:20+00:00","proper fix for V1/Zak (and maybe V1/MM, too?) ActorSet-Color

svn-id: r9018
"
"3ce7459814d3da050d73c5da62357bfc8967faba","2003-07-14 19:24:34+00:00","fixed up c64_ignorePakCols (it's still a hack and not working properly, but at least it doesn't crash anymore; we probably should just remove it, and then handle the skiping inside proc64); determin which costume codec to use based on the costume format, not the scumm version

svn-id: r9019
"
"177d5d6b11e26a49fb1bfbab5ddf9e7d825adb4d","2003-07-14 19:57:44+00:00","Compares in V2 are unsigned (at least in Zak).
This fixes a problem with the parachute scene in Zak.

svn-id: r9020
"
"66823befe2bafb7bfbab9ec03c7981a3fda2c601","2003-07-14 20:01:54+00:00","maybe this fixed those random crashes...

svn-id: r9021
"
"33e6989944f23e2fd7d556a0b6b99c78ac5ac126","2003-07-14 20:09:14+00:00","removed whitespaces at line ends; added stopHandle

svn-id: r9022
"
"d31942c898435b3164aa4dbc630a447b6c3cf6a5","2003-07-14 20:45:33+00:00","oops

svn-id: r9023
"
"42d0b2e6f79378558832857b3f1ece4ea57164bf","2003-07-14 21:29:53+00:00","Skip the 'INSTALL' directory when looking for games (CoMI).

svn-id: r9024
"
"bb87787314d90487d5c4762f94abd944cca196bb","2003-07-14 21:37:45+00:00","fix for bug #769744 (COMI: Trying to append to a nonexistant stream)

svn-id: r9025
"
"28e6e05025a7ff4aba54e0d4bc1bcac4df875a03","2003-07-14 21:44:01+00:00","Hires mouse pointer (CoMI).

svn-id: r9026
"
"b88b7f338959638a99a349a633811b21b6b126b5","2003-07-14 22:21:11+00:00","reduced duplicate code

svn-id: r9027
"
"9e27fe9c9527bdc9236eb624d29968d3f3cff5a6","2003-07-14 22:24:18+00:00","temporarily changed this to an error to help track down what is causing the sound queue overflows(in particular, to figure out the room/script/offset where the bug occurs). Please report your findings to Fingolfin

svn-id: r9028
"
"6772b78f5f19d8a3e7095dbfa9ca0170ae2d8562","2003-07-15 00:20:04+00:00","Patch #768260: Help Dialog Update (with some tweaks by me to make the dialog a little smaller -> looks much better, IMO)

svn-id: r9029
"
"d0282843b5fd8f0f2558556a4b0a796b3a8bccba","2003-07-15 00:23:18+00:00","Patch #771154 (ZAK: yet another doSentence fix); this should fix bug #752293

svn-id: r9030
"
"cc8334638b5f3f79e23b5580282a753f65b75ad5","2003-07-15 00:54:33+00:00","put GID_MONKEY_SEGA in the correct place (has a micd/mi2 style interface)

svn-id: r9031
"
"b05e7de7bb7d59647356d63ccb10e53bbec61bcd","2003-07-15 02:16:33+00:00","replaced SCUMMVM_VERSION/SCUMMVM_CVS by gScummVMVersion/gScummVMBuildDate/gScummVMFullVersion; made engine.o depend on all other .o files, so that the build date in it is always up-to-date

svn-id: r9032
"
"eddf0754953cada22b0e299dca31513bb98bf694","2003-07-15 07:29:23+00:00","Remove warning in simon
Add INDY3EGA Amiga - experimental support for sound effects, patch #771355

svn-id: r9033
"
"c2dd5afb6abc308c0bf76d201c4014de0139faaf","2003-07-15 07:29:41+00:00","start of some segacd specific help

svn-id: r9034
"
"44bda652ee70941c7a6c2bbe6980808f20b74bb0","2003-07-15 10:16:45+00:00","Fix for Bug [766851] ALL: MIDI fragment repeats after close ups

Adjusted default _saveSound value used by S&M (whose
value is assumed by pre-S&M games). Corrected save/load
music behavior for non-temporary saves. (Until this default
value change, the incorrect behavior would almost never
manifest itself, so existing savegames should be fine.)

svn-id: r9035
"
"20601f33eb3e9724d53a7bc64b57aeec62998b32","2003-07-15 10:31:25+00:00","Check path before launching a game

svn-id: r9036
"
"c4a40a749b312cf374a7a3f6f8af686019b03f51","2003-07-15 10:32:00+00:00","Fixed

svn-id: r9037
"
"d0915c690c39b0fd6c6f71fc5e408fedbc3fd07b","2003-07-15 15:26:17+00:00","Remove unneeded warning

svn-id: r9038
"
"2b7227679a8f0c89d3ed10f749d9911d70e728de","2003-07-15 16:40:24+00:00","Use debug output instead of warnings for simon
Fix debug output in sky

svn-id: r9039
"
"60e5e16ae6348a1dfab4f7fe1625900ed9ef283a","2003-07-15 16:51:06+00:00","Check if voice file exists in simon2

svn-id: r9040
"
"2aa8cc496d3764206b393a892415650ac2e1064b","2003-07-15 18:18:29+00:00","fix for bug #771734

svn-id: r9041
"
"253e50b3e1f76476bb0c315154bc75fd9d13a2db","2003-07-15 19:09:11+00:00","Workaround for bug #770724

svn-id: r9042
"
"f60e8ff53e42efa564cdee5f5bc0e3d660e4b11b","2003-07-15 19:20:40+00:00","fix for bug #771803

svn-id: r9043
"
"83a3afab42c2fe8fa9bf6c0713cd09302060feb2","2003-07-15 20:51:18+00:00","temporary fix for bug #771562, I am working on a proper one now

svn-id: r9044
"
"c74e2eb4d713c2d6381ca7a15dc0eeb47cf4c935","2003-07-15 21:30:53+00:00","factored out some duplicate code into a new method translateTextAndPlaySpeech; removed some completely useless code (why compute 'pointer' when we then throw away the result?)

svn-id: r9045
"
"59346f5c9abb45182e408348f525c23a387f5eab","2003-07-15 21:33:57+00:00","oops, this was a serious bug: message referred to buf_output (and was used by buf_output[300],) even after buf_output was out of scope

svn-id: r9046
"
"8fbc3ed31bf6c8db9a1667779ffd88e4cba3c174","2003-07-15 22:21:30+00:00","proper fix for the small regression caused by my COMI fix last night; this also fixes bug #766382

svn-id: r9047
"
"a488dfe7330e93930ee989bc9dc5a1ebe2642cac","2003-07-16 07:16:34+00:00","Fix compile without USE_VORBIS

svn-id: r9048
"
"f91fb2980a9c23bd191e1455042a44f7d1b212a0","2003-07-16 12:21:09+00:00","This is actually needed

svn-id: r9049
"
"91ee8e1c10faa2052bec5489e940c93818fbcfb8","2003-07-16 13:55:18+00:00","Quick-Fix for the OOB access in RNC decoder.
Obviously this should be fixed in the decoder itself,
but for some reason I couldn't get it to work in a short period of time.
(before every offending READ_UINT16(), I had a call to function that was like this: 'if ((_srcPtr - _startPtr) >= _packLen) { _srcPtr -= 2; }', note that _srcPtr is the current position in the buffer, _startPos is the starting position of the buffer and _packLen is the (supposed?) size.
but I would still get 'Invalid Read of 2' with this in Valgrind ..maybe someone knows what I did wrong?)

svn-id: r9050
"
"6e7c37fb0a484eecfae20d871f92d985beb1763c","2003-07-16 20:36:38+00:00","disable some more warnings which cause problems with gcc 2.95 or with bad system headers

svn-id: r9051
"
"0c21927428457859730d7f3cca0d313a048d9603","2003-07-16 20:50:26+00:00","some comments

svn-id: r9052
"
"301f1cdf08bdfb393a945d9c268ed23f78f84f6b","2003-07-17 00:17:42+00:00","reprogrammed sky intros.

svn-id: r9053
"
"76de27e09719b9e92690ab9c909c396dbc29464e","2003-07-17 00:35:32+00:00","fix additional array read

svn-id: r9054
"
"d9ec75b249d453dfcabc7936452de41038dbf8a5","2003-07-17 05:06:59+00:00","Fix Amiga palette

svn-id: r9055
"
"7c5eca2797f0304889f5b6884cdc0ff104e02529","2003-07-17 07:37:00+00:00","Update project files

svn-id: r9056
"
"05b40887d9525ac7dd95fb0e11fca3830ba36ec0","2003-07-17 11:20:31+00:00","Make the Amiga option costumes/palette only again.

svn-id: r9057
"
"5a1dce2773e2d61497884e39305c40727b7117dc","2003-07-17 11:56:47+00:00","Ooops

svn-id: r9058
"
"09984089fb2bbe463c0a64255deff212b39310e7","2003-07-17 12:27:13+00:00","Revert part of last changes.
Caused indy3ega/loom to try to use amiga sound sometimes, when Amiga option was enabled.

svn-id: r9059
"
"af75c039813f2f927edad62ed5d23192ab77a929","2003-07-17 14:03:15+00:00","Fix from Hibernatus

svn-id: r9060
"
"0c47e125af56afb47c1eaa205ea7370fc2e4e747","2003-07-17 20:44:36+00:00","simplified code

svn-id: r9061
"
"f20c47bb216210ed681d3d24698de90821de2703","2003-07-18 05:49:21+00:00","Add Indy3 FM Towns support, patch #773434

svn-id: r9062
"
"8fbb8a6df898e2cfffe0007aadc001e14032121b","2003-07-18 05:59:32+00:00","Add 22KHz sounds effect support for fm towns games, patch #773434

svn-id: r9063
"
"fd685c4b38dab95c96e7cb4de29f8c1b56773ab5","2003-07-18 06:38:00+00:00","Add new target and notes

svn-id: r9064
"
"a490b4644ee065cb335b0af636bc16c750072ca3","2003-07-18 06:40:41+00:00","Grammer

svn-id: r9065
"
"9c026748f394eb0b085ee363ba8c1299be325806","2003-07-18 14:48:18+00:00","Another fix from Hibernatus

svn-id: r9066
"
"dc25058c3e633cf5ac4a369833224d878a05bac4","2003-07-18 15:37:06+00:00","Add game specific scaler override to sky
Add game specific scaler and full screen override to simon

svn-id: r9067
"
"077b643ea04188b60c5107610328619cc7f00001","2003-07-18 18:55:04+00:00","Fix recursive calls of object scripts.  In V2 for each object two script
can be active at the same time:  One 253 script and one normal script.
We misuse the recursive flag to mark 253 scripts.  When starting a 253
script we stop a script that has recursive flag set and when starting
a normal script we stop the script that doesn't.

svn-id: r9068
"
"fdb79e01cce8adaa1aec60d9419b2fea80460df5","2003-07-19 03:54:33+00:00","More fix from Hibernatus

svn-id: r9069
"
"b887fd708e2466034451d3393d6667540a4e8c33","2003-07-19 04:32:35+00:00","Another fix from Hibernatus

svn-id: r9070
"
"e4b598fb5db9fd536211c0393c4896bb8793a0c9","2003-07-19 07:32:26+00:00","Change back to warning

svn-id: r9071
"
"b295340912248d1ace387b87ee751b446ed0e773","2003-07-19 07:42:01+00:00","Restore size hack properly

svn-id: r9072
"
"be4446f945218204f0bf653f05d8befe11d53299","2003-07-19 07:43:13+00:00","Ignore me, I'm a carrot.

svn-id: r9073
"
"dcbd40267089add128a8394f74bb0ec179e10c8a","2003-07-19 11:35:01+00:00","added TODOs; made switching between asepct modes a bit nice; made scale a template parameter to help compile optimizations

svn-id: r9074
"
"8db98ac1d9916edf4b5064b74130f0af0c4d77f7","2003-07-19 11:49:05+00:00","typo

svn-id: r9075
"
"e68d371e6238972ab8aae6715ee01dec94f72861","2003-07-19 14:10:02+00:00","update VC6 files

svn-id: r9076
"
"2d48186c038191febc30d3a0b3c652a31484212b","2003-07-19 14:26:25+00:00","added vc7 files and fixed warnings. vc6 is no longer supported by me

svn-id: r9077
"
"da4d3ec03234d36d27e733f3ef9a407cdd4b6d1d","2003-07-19 14:35:18+00:00","added this file too

svn-id: r9078
"
"bd8482c356eefc51014abf8b1ee5588c733d29f3","2003-07-19 14:55:58+00:00","added vc7 files to dist

svn-id: r9079
"
"dca669759398c9661f4c8453d4016753210d2532","2003-07-19 15:30:59+00:00","Added Revolution Software to the credits (as discussed on the mailing list)

svn-id: r9080
"
"d3f303bb46664053e1f2ef0bc35bfc4c6db41533","2003-07-19 16:07:33+00:00","Small update to Amogs sfx support for indy3/loom, patch #771355

svn-id: r9081
"
"d516f3467cde8fa05ef26732a58e289cd13444e6","2003-07-19 16:10:15+00:00","updated opcode 'Actor Set Color' in o2_ActorSet func, it's based on dissassembly, why it was 'i = 3' ?

svn-id: r9082
"
"2fbf782c05bf5ff06e2817e487e152e8739be9ee","2003-07-19 18:18:01+00:00","moved some functions out of scummvm.cpp into more appropriate files; rearranged stuff inside scummvm.cpp to be grouped a bit more logical

svn-id: r9083
"
"2056a62f98ee2fe43e71a12ba74f69cacbbddcae","2003-07-19 20:10:40+00:00","moved up code for v1 setActorPalette func

svn-id: r9084
"
"c7958d8d8b0fe2766a981d2d4905290d8378fa98","2003-07-20 00:02:24+00:00","merged checkKeyHit/convertKeysToClicks/getKeyInput into processKbd - their separation served no purpose but made it much harder to understand the code. Also, this opens up possibilities to cleanup the code

svn-id: r9085
"
"7e92048a6bf29fc170cce02352c67c2273f077ee","2003-07-20 01:00:16+00:00","typo

svn-id: r9086
"
"2ec582535fa77daca28e9c1359b438dc082ed1bd","2003-07-20 01:01:47+00:00","removed a whitespace

svn-id: r9087
"
"a6afa09161939430a872fda58f2580a2f74d7d08","2003-07-20 01:09:42+00:00","fix for bug #758542

svn-id: r9088
"
"a0545a22ae557b8bc01718677faa98bd00a5f316","2003-07-20 01:39:08+00:00","whitespace

svn-id: r9089
"
"2583f4e629d07e23a56291598279f449aa50688d","2003-07-20 07:27:28+00:00","Remove comment

svn-id: r9090
"
"1b646cd845bca812dec5d6dcc25300a4be6875c6","2003-07-20 09:39:01+00:00","Reorder segements to make it compile again

svn-id: r9091
"
"82f90bb6cf061159e5d86ef408c5e1d657088b81","2003-07-20 15:17:11+00:00","Fix regression
Switch erros to warnings

svn-id: r9092
"
"a4b5891dd15b85fbdca322e88cea19cddf652cdc","2003-07-20 15:31:47+00:00","Use automatic dirty rect code for simon games for now to reduce CPU usage

svn-id: r9093
"
"43ba55e30898ec931f987cabb1a21923c7559612","2003-07-20 16:02:17+00:00","Revert my bad code

svn-id: r9094
"
"594c1f542d18fe5414c5ddf5fd730fdd032e3007","2003-07-20 18:53:27+00:00","Fixed mishandling of _mode_flags that prevented the Simon games from using
the DF_WANT_RECT_OPTIM flag.

svn-id: r9095
"
"b54dee99a5dcd8772d01de8e516254ec9f923264","2003-07-20 19:19:45+00:00","fixed warnings

svn-id: r9096
"
"e25be8327ae124b5ada06e1fa20cf0b4ee1e1356","2003-07-20 19:50:32+00:00","fixed regression caused by me

svn-id: r9097
"
"25dbf529ab7e83c0e07eb92843e47d18bac7bafd","2003-07-20 20:42:58+00:00","some changes for stampObject opcode to be more similiar dissassembly

svn-id: r9098
"
"ec2b0cca0467b9611e6d0c547a26f83a02cc4e78","2003-07-20 21:01:06+00:00","improved stampObject opcode for FT mine field, still layers? problem

svn-id: r9099
"
"d62959bfd9ff787055f8e7e829f354bf11694fbe","2003-07-20 22:27:17+00:00","Compile with new version string

svn-id: r9100
"
"6a8078b2fbccbf019e4789346122c4d6b5e6bdb3","2003-07-20 23:47:39+00:00","Bass skip fix

svn-id: r9101
"
"88810dc9bd66e561e48752149302f0b8bc49d566","2003-07-21 00:01:05+00:00","part of patch #774556: fix for aspect mode + shaking

svn-id: r9102
"
"a7391d0a9aa58e92cfe6eed80911bec9486d519b","2003-07-21 00:07:27+00:00","Rest of patch #774556 (small optimization for aspect ratio correction)

svn-id: r9103
"
"2929a90d17a81b285f8041f24993023ab3cc35e6","2003-07-21 01:11:20+00:00","update, fix compilation

svn-id: r9104
"
"2b5cc772d71a15622dc970793fbb6f9c03763772","2003-07-21 04:00:04+00:00","Add sfx/voice support for simon1cd32, thanks to olki.
Adjust a few debugs
Add hack to allow load/save in simon1cd32 via keyboard

svn-id: r9105
"
"93cb369da7d251d55661b108dca633ff47412b84","2003-07-21 09:11:21+00:00","Rename variable

svn-id: r9106
"
"0bb6f3497d0f011458823b369f6d6cb84a914c36","2003-07-21 12:50:20+00:00","Fix 774982

svn-id: r9107
"
"760bfb2245c1296d94c36c63f843968143f7d831","2003-07-21 16:25:16+00:00","Rename function, update comments

svn-id: r9108
"
"0b1b753797f00df4f685ebefd8745f7462623c15","2003-07-21 21:28:47+00:00","added getResourceSize method

svn-id: r9109
"
"0a334bf269254033c969ba1c18068f091f91633f","2003-07-21 21:59:07+00:00","Fix for bug #770690 and bug #774783

svn-id: r9110
"
"743ad2aaa6d051d4a39448dd2ac3de3c88943511","2003-07-21 22:08:39+00:00","really fix #774783 in IndyEGA (while the value '1' is not strictly correct, and in IndyVGA it is 0, and 0 is the logical value - this *has* to be 1 (and 1 is what the original returns, too, due to a bug)

svn-id: r9111
"
"9b02cb4cce7cef01c8a0af76cce5d655b2ed8ff2","2003-07-21 22:11:33+00:00","fixing bug #774783 for the VGA version, too - and I bet the FmTowns version will need this fix, too

svn-id: r9112
"
"b6b23c6352250534f2e4831908a1aaf917c09346","2003-07-21 22:28:23+00:00","Fix COMI detection - allow auto detection if only the main data file is present

svn-id: r9113
"
"d79ae6f1f28da20530ce9df61a9ce4cc5160d3cc","2003-07-21 22:30:15+00:00","Fix for #775275 : debugger support on WinCE

svn-id: r9114
"
"1ba701296920115d1b70b9e0d22810e1104dad65","2003-07-22 01:03:10+00:00","fix for bug #770704

svn-id: r9115
"
"2cee32864a8be752abf0a0680f833b270db91973","2003-07-22 01:14:09+00:00","fix spanish prepositions, see bug #772277. And BTW, does anybody know when and where the 'on/mit/sur/su/en' preposition is actually used?

svn-id: r9116
"
"6d9237509365f5d385e9c3fd80d44cac0bccfffe","2003-07-22 08:33:13+00:00","Fix for bug #775512

svn-id: r9117
"
"7d5214132910dceadf3de26f5dabc526c7b05056","2003-07-22 12:09:56+00:00","Fix simon1talkie regression

svn-id: r9118
"
"0e499b9a8019bf76d451d44f89b9bb037202c378","2003-07-22 12:16:56+00:00","That last change wasn't quite right

svn-id: r9119
"
"24c9cd937c55e17922be76083a410adff5a4f41d","2003-07-22 12:23:14+00:00","Use ScummVM version strings in about form

svn-id: r9120
"
"a62e49d0d486fe016fe7fe186fda726a3af78fad","2003-07-22 16:05:40+00:00","added a FIXME

svn-id: r9121
"
"bda0a18eeeb8e8c3f2bc6ba947878075a2f355bc","2003-07-22 16:05:51+00:00","made about dialog global (so that it can be used from the launcher and from sky/simon; also added our copyright to it

svn-id: r9122
"
"22a86e823cc6b2682ecfbe7a7a00541c71efa63f","2003-07-22 16:08:57+00:00","use kLineHeight constant (also strictly spoken it makes no sense: kLineHeight = 11, yet we only put 10 pixels between our lines :-)

svn-id: r9123
"
"78cabd46bb97ad36213a168c4ac4294032e7e240","2003-07-22 16:20:34+00:00","Add 'about' files

svn-id: r9124
"
"8c8f22f65ad195b0bf376d1182a4f8355cb28759","2003-07-22 16:26:12+00:00","whitespaces

svn-id: r9125
"
"ece1b83ac149d89a86cbd704024b9412251aa80a","2003-07-22 16:29:23+00:00","fixed key autorepeat when using button hot keys

svn-id: r9126
"
"660ca0f52657a633f7852019b6242cfabe319c70","2003-07-22 16:30:00+00:00","fixed button hotkeys in dialogs with a focused widget (e.g. the F5 save/load dialog)

svn-id: r9127
"
"655759a70da8017b59e504777c57a6df0e9bdf95","2003-07-22 16:34:52+00:00","fix for bug #775640

svn-id: r9128
"
"dce17ed7ac10135e7c52b3f1816741dff3a55adf","2003-07-22 19:01:38+00:00","fix for bug #775420; also properly implemented the 'box matrix truncated' workaround

svn-id: r9129
"
"9bd7cdbce04fafcd823c9aee31a00ee16235af81","2003-07-22 20:27:54+00:00","so it's not the endFrame, but the duration (in frames), after all! grmbl, took me long enough to figure this out, now I can fix up system.h, and then decide whom I can blame for this mess (yeah I know I renamed everything to endFrame in here, but it was named incorrectly in many other places already... ah well, at least now we know :-)

svn-id: r9130
"
"d15039d2e4f63a1c8c3cefe64bc8e8bb4364aa77","2003-07-22 20:29:06+00:00","fixed play_cdrom docs

svn-id: r9131
"
"73e7afaf180b28daa561c7c24908f104be44858e","2003-07-22 20:36:43+00:00","adjusted to play_cdrom parameter name change in common/system.h

svn-id: r9132
"
"7665890d9738b14180d03e0f6de34851b932b572","2003-07-22 20:38:01+00:00","forgot to commit this one

svn-id: r9133
"
"3b033956aa08b0e90ae6bb30b6ecd690926cc4ab","2003-07-22 20:53:01+00:00","Changed 'SCALLING' to 'SCALING'.

svn-id: r9134
"
"2becb78d8681ca6bf80ad50c8f669e07237ad36f","2003-07-22 22:14:14+00:00","fix for bug #762593 (ZAK256: Audio CD not handled properly)

svn-id: r9135
"
"5c9ebd053e3dfdbabb9e1e563570b4174b28126e","2003-07-22 22:30:16+00:00","Some MorphOS port fixes

svn-id: r9136
"
"b43125cd36c0c78c2ea352c683be77b96998feaf","2003-07-22 22:33:34+00:00","fix for bug #775839; unified the various Indy3 checks (this gets annoying, maybe we can merge the three GIDs after 0.5.0; any difference could be handled via _feature flags (e.g. added a GF_TOWNS flag)

svn-id: r9137
"
"77d50433be9ca21dde3d62ecbe7c6e0bebc341ac","2003-07-22 22:37:37+00:00","Some MorphOS port fixes

svn-id: r9138
"
"6f2324dc474ac9cfdbdf6f3b9767c854761118cd","2003-07-22 22:38:27+00:00","*** empty log message ***

svn-id: r9139
"
"88cf307273579ea0448844b7f79560a85f3b2db6","2003-07-22 23:27:41+00:00","start -> start_frame, to match backends (purely cosmetic :-)

svn-id: r9140
"
"13dae9b394dd9d7c8046b0771c6800d74b6f6ab9","2003-07-23 05:17:21+00:00","fm towns cd audio fix from Hibernatus

svn-id: r9141
"
"fc5080bfb2bd4d8e3ec656375cfbcb05700661b1","2003-07-23 05:18:47+00:00","Ooops that should not have been commmited

svn-id: r9142
"
"2b0e1b70001d4a502edff00f28401baba66d7299","2003-07-23 05:36:08+00:00","Small correction for mac loom

svn-id: r9143
"
"dad1586dafd07d290ec9036049273d702ea0d288","2003-07-23 09:41:21+00:00","reset some CD related vars when AudioCD is opened

svn-id: r9144
"
"a327f805acdb8bc6b9619c57bea09abc3fd360a6","2003-07-23 13:16:58+00:00","Fixed regression in clamped_add_16() that kept it from clamping. This was
quite noticeable in the BASS floppy intro.

Of course, if it turns out that 'int' is also only 16 bits it still won't
work, but in that case we run into problems even before this function is
called.

svn-id: r9145
"
"e66bdf91b962083abee31c6baf168ec8dcb3cda9","2003-07-23 14:33:57+00:00","Allow the sentence line to be 40 printable characters long. The verb part
is padded with '@', which should not be counted.

svn-id: r9146
"
"9db2d93614ea354155c2a0b0fdf50b306aed153a","2003-07-23 14:36:18+00:00","Slight cleanup of previous commit.

svn-id: r9147
"
"20dd02a833469aacf7e2e251f2a4a01853af1893","2003-07-23 16:44:15+00:00","Don't check for hotkeys when ascii is 0, since that is the default hotkey
for widgets that have none. (This means the Shift key words in text edit
widgets again, for instance.)

svn-id: r9148
"
"9a3fca462ebb8b6f37ff7622c6145c192f639140","2003-07-23 19:19:18+00:00","Quick hack to solve Simon problem

svn-id: r9149
"
"fa2d02ce6d0e70e6b8200d218da1cd031234582a","2003-07-23 19:33:34+00:00","applied eriktorbjorn's patch (#776225 - 'BASS CD intro fixes')

svn-id: r9150
"
"03e720dabee20a7eee2e9c1534ac0178d3d9dc43","2003-07-23 20:17:07+00:00","Fix a bug with checkMSA that let the last track play even if we exit to the launcher. Also enable to use MSALib if the lib is opened by another application

svn-id: r9151
"
"ba9d27433273ce202c21b196954c673ab5736267","2003-07-23 23:33:48+00:00","on the branch: upped some leftover 0.4.1 versions to 0.5.0pre-cvs

svn-id: r9154
"
"335ed9389da2ea63c100415c72eca5e2d9c708d8","2003-07-24 04:50:35+00:00","Fix for Bug [775534] 0.5.0 RC SIMON1DOS Random sfx notes during music

Corrected a problem with resource size computation for GMF sound
effect resources. Since GMF resources have no size info, we were
computing sizes with the assumption that each GMF appears in its
own file, so the file size becomes the resource size. This is true
for simon1dos music files but not for SFX files. This fix uses the
resource offset pointers at the beginning of SFX files to properly
compute the size of SFX resources.

svn-id: r9156
"
"89c1198d417a07370ac057d473beb79be3d1b139","2003-07-24 07:27:39+00:00","updated vc7 file

svn-id: r9158
"
"5eaa02211faa67438e9c3251ef2eefcbd8e015c0","2003-07-24 07:28:24+00:00","updated version

svn-id: r9159
"
"80217c78c0109b9d1e1d747e5717b8a347ebfb88","2003-07-24 10:21:17+00:00","Fix for simon2mac voices problem, bug #776803

svn-id: r9161
"
"fe4fbea92c7b26be2ccff244641e48a29a94e874","2003-07-24 12:03:56+00:00","Check before releasing memory

svn-id: r9162
"
"d260b75145b628fd8fe96503fc492185a3bbc51d","2003-07-24 12:31:59+00:00","Another leak

svn-id: r9164
"
"2f065bc3b79380d7c1cf9b4bbae955101a1f72bf","2003-07-24 14:21:23+00:00","Simon games shold only play one voice at a time.
Fixes many voice overlaps
Fixes subtitles been ot of sync with voice, with simon 1 versions that had combined speech/subtitles.

svn-id: r9166
"
"a8c53048c73fc51b23c797f2cbd1e81e3547a2c4","2003-07-24 16:53:38+00:00","Should be right now

svn-id: r9173
"
"42d6e4fc8615901d6697fa40879ae8e37821a069","2003-07-24 17:48:46+00:00","ambient sfx works fine again

svn-id: r9177
"
"3c5c0d5fe6144a07071c1958c7d31b552e8f4461","2003-07-25 06:54:13+00:00","Use correct frame rate value from disasm, fixes minor timing issue in simon 2 introduction.
Correct default _lock_counter value

svn-id: r9185
"
"e3a8dbd57d5c7643108a48578db8f8cda6000061","2003-07-25 08:49:22+00:00","Surprised this has not caused major problems

svn-id: r9187
"
"e2275f85c9867c09fdda70a5f4d429b05c3c0e06","2003-07-27 12:06:49+00:00","Count amount of save files available so load/save dialog works correctly.

svn-id: r9197
"
"2a3cdf9f2ccdd84e7b25b6a0030b64b2a696814c","2003-07-27 13:32:11+00:00","For for Bug [775654] DOTT: Hanging notes

Corrected active notes tracking when switching
between Type 2 SMF tracks. Although Note Off
events from the previous track are properly
simulated, those sustaining notes are cleared
from the active notes list so that jumps
within the new track will not attempt to
sustain them again.

svn-id: r9199
"
"7fbcc0386a2619d6c5c817106764db3768504491","2003-07-27 13:37:06+00:00","Fixed unit'd var in Adlib driver

svn-id: r9200
"
"1cbe5af83f212dc0889a17b518edea839d83b877","2003-07-27 17:33:34+00:00","fix inventory scrolling V1/V2 games (there were problems with an odd inventory count)

svn-id: r9202
"
"a97ffba68df52f6243d1b99d0cd7e7c19579cb3f","2003-07-27 23:45:43+00:00","init walkdata (fix for bug #770306); move Actor::Actor constructor from header to source file

svn-id: r9204
"
"c1581be462f753892fc85d938ccb23db9b253a02","2003-07-28 12:49:03+00:00","added asserts from trunk

svn-id: r9246
"
"2d5249ddfaab8f56cdf0b335c2189cee4b4ffa08","2003-07-28 16:27:38+00:00","Max's 'adjustment' was incomplete, fixed.

svn-id: r9250
"
"4d5bd5c982c38c3ae0c63901f648164863de5e9e","2003-07-28 16:53:00+00:00","<memory.h> is not a standard header file.

svn-id: r9251
"
"7414c60ef0a77477f16e13c79c2fe792fb1d6a86","2003-07-28 20:40:24+00:00","Changed sematics of X button to allow boxing in Indy (I hope...)

svn-id: r9260
"
"9ce58f71092ba8aa0835869e6df30cc73e8ec3c7","2003-07-28 22:25:12+00:00","Initialize shake_pos to 0 (fixes Sky, which never sets the shake_pos).

svn-id: r9264
"
"5a9bf9e4231ff2e9ec1a7a577d5347d9a1541e2f","2003-07-29 01:03:51+00:00","checkin for LavosSpawn: 'work around bug #778105 (line width exceeded)'

svn-id: r9267
"
"78f5a36a181ba13eb1e23385c6dcf86d38280beb","2003-07-29 01:09:51+00:00","fix for bug #776169

svn-id: r9268
"
"c7bf01c5fb581131df951f2b07a6ea2308122e25","2003-07-29 06:12:05+00:00","Some basic suport for reversed text for hebrew version.

svn-id: r9277
"
"ccc75c721cf07e0f6a2d06d559b7f48ebbb720f7","2003-07-30 00:08:51+00:00","merge fix from trunk

svn-id: r9284
"
"a2f3f7fd7133b7d4f792288a71e34405d07b6beb","2003-07-30 01:43:58+00:00","Fix unit'd array and variable in simon

svn-id: r9286
"
"7553d6777dbd20b08417796559420a494240b60e","2003-07-30 08:14:28+00:00","Disable launcher Options dialog (RC 747984), add hack for camera bug in ZakV2 (RC 770699)

svn-id: r9287
"
"b9a896a1ab6159e80b5b72d24337530724abb709","2003-07-30 16:29:27+00:00","Fix Golum Ring causes graphic glitches, bug #777966

svn-id: r9295
"
"573cb05d946b6848f3e7fbc5fa8d555389270186","2003-07-30 16:41:02+00:00","Update simon1

svn-id: r9297
"
"21bc5bb9ed1dadd0e802c80d2768620f24d5e257","2003-07-30 21:38:46+00:00","GCC bug workaround...

svn-id: r9306
"
"74067aebe70e53e6052c547da820e7a594cc6b56","2003-07-30 21:48:14+00:00","Remove serial debug for release.

svn-id: r9308
"
"d089e2260c496908bfcd9abfeeb01c5d3f057131","2003-07-31 09:44:41+00:00","backport to 0.5.0 branch of the fix for RC bug #780675

svn-id: r9323
"
"71bd67177c6255087eb331583a0879b2f01d2fd2","2003-07-31 10:21:23+00:00","Correct name

svn-id: r9325
"
"6cf7a9134e7a676090d7d5664c685b3fbe7097d9","2003-07-31 15:00:06+00:00","Applied LavosSpawn's save/autosave fixes.

svn-id: r9329
"
"453811d004c7992703e529d4da59e04562f0c77d","2003-07-31 15:26:45+00:00","Evil nasty hack for RC #771499 (ZakV2 Lotto bug)

svn-id: r9331
"
"ee4f285c0d1ebe87487995b0677337fa008a0368","2003-07-31 15:41:52+00:00","Document workaround for bug #771483, and a few minor tweaks

svn-id: r9333
"
"496df02453d460eca4b56f2c8518e239ac8153f5","2003-07-31 16:07:02+00:00","A port is a terrible thing to waste (document PalmOS/Dreamcast limitations)

svn-id: r9334
"
"4b37d487682f6433a83dc3dd6b2146c60fa778d0","2003-07-31 16:13:46+00:00","Be consistant with capitalisation of Dreamcast. Someone backport this Readme stuff to HEAD for me :)

svn-id: r9335
"
"fcd0d8542a67f1d926e49e3971bc685e02858b20","2003-07-31 18:45:55+00:00","Added about dialog box

svn-id: r9340
"
"57b3d51fb9214aa733b537751717a9b46a49eeea","2003-07-31 18:55:33+00:00","spelling (bug #781028)

svn-id: r9343
"
"220ed3c199e678285f3925531de07a20240bc687","2003-07-31 21:59:10+00:00","add patched messages to release branch, too.

svn-id: r9350
"
"0067b3d910bf51c144ad06e912713478e1b86513","2003-08-01 14:24:23+00:00","Update Dreamcast/PalmOS game support exclusions

svn-id: r9365
"
"d490938c04d6dda2344821598c404d59f71b4478","2003-08-01 14:48:03+00:00","Add config file format documentation update, part of patch #750001

svn-id: r9367
"
"0c54aa08bca228fa1b6243910a5fb4e5be6b700c","2003-08-01 15:00:43+00:00","Add a few missing config file options

svn-id: r9369
"
"908e9e342692b9fe6af8363563de77416e9d59ab","2003-08-01 15:03:24+00:00","Update/reorder NEWS, update RPM .spec with 0.5.0 news

svn-id: r9370
"
"81c14dfac51e886d39250bb5ceef085d6fbad8e6","2003-08-01 15:32:21+00:00","new sky loading/saving code.

svn-id: r9371
"
"2b3cab0a784c11755389c256fb0ecf6575171799","2003-08-01 15:45:01+00:00","update on BASS compatibility.

svn-id: r9372
"
"7163c0274951e6a37d5bd1f2dd11fd0934933d43","2003-08-01 15:48:20+00:00","applied eriktorbjorn's fixes for the LINC charset to branch, too.

svn-id: r9373
"
"05de976679420594989d37be79c8ea3dac209425","2003-08-01 15:51:52+00:00","Palm 'Dig' compatibility (did I spell it right? :) update, reword, mark
engine maintainers in credits.

svn-id: r9374
"
"b557cf1d4c7aed336ec080a7e2d1b6607df6a1b4","2003-08-01 15:53:08+00:00","oops.

svn-id: r9375
"
"6138621b9aa61dbf592457e752cdf5cde2d6eaf9","2003-08-01 16:26:51+00:00","Tagging - final version bumps

svn-id: r9377
"
"33313b557f79a173f573306a2df7c32a682295f2","2003-08-01 16:29:03+00:00","Tagging, version number / date bump

svn-id: r9378
"
"0c3aaf6eca2cb83f943881a8d1206915fdd12467","2003-08-01 16:33:13+00:00","Remove warning per request of LavosSpawn

svn-id: r9380
"
