"commit id","commit date","commit message"
"4ccec7c25ade6cb3c98c96ea7850d897b592fe16","2007-08-18 11:10:41+00:00","Making DS port build again

svn-id: r28654
"
"d862dc430d81d963dd5297fdffb6f3eecfe239cf","2007-08-18 12:41:24+00:00","Added support for playing Apple IIGS samples. The code's not very pretty at the moment (Work in progress). Apple IIGS MIDI sound probably broken somehow at the moment.

svn-id: r28656
"
"a777b3e64f6b29f313b8a66a98c58dac62f70c78","2007-08-18 15:54:29+00:00","Changed Apple IIGS sample playing frequency multiplier from 1076.0 to C6 (i.e. about 1046.5). Commented out a warning that comes too often.

svn-id: r28657
"
"92c6a25695447eae55fc6be8677296055dae1769","2007-08-19 10:21:51+00:00","Fixed some - not all - warnings.

svn-id: r28661
"
"0918f1d014f2d0ce3eb55c999fa4db22c2fd3303","2007-08-19 11:48:19+00:00","Fixed two more warnings

svn-id: r28662
"
"5103e92410e92aff9eebd6d7fc7ed3203ebba1e7","2007-08-19 11:50:13+00:00","Patch #1776858: README: some fixes

svn-id: r28663
"
"2d15e4af78cf70fbc5063824b25b84af587b7d9b","2007-08-19 17:26:06+00:00","Checking in patch #1777241 by Uwe Ryssel (GOB: Some optimizations for slow computers)

svn-id: r28664
"
"2e70246e3c5b9be922217f2608584c06d28ccb62","2007-08-19 18:39:49+00:00","Fixing code formatting

svn-id: r28665
"
"dd215f3e9fa3fecc32d84fe499123745734de00b","2007-08-19 19:05:41+00:00","Fixed bug #1777058.

svn-id: r28666
"
"b6017da9e24cf05db01217c83e24e0a313b36233","2007-08-19 19:07:31+00:00","Always update the video's position, even if it's already been loaded, because
it won't necessarily be played at the same position every time. For instance,
in Lost in Time you can look at the captain's chair several times. The position
of the video seems to depend on exactly where on the screen you clicked.

svn-id: r28668
"
"df9414c9a194625c9423478a895a412e1f30aeda","2007-08-19 20:31:15+00:00","Fixed warning about global symbol 'chn' being shadowed by local declaration 'chn' (note: naming a global var 'chn' is probably a bad idea. And using a class would be far better anyway ;)

svn-id: r28669
"
"07586c378e42dcfa3d1024c19f9e8b3997bbd5c6","2007-08-19 20:31:48+00:00","Small correction

svn-id: r28670
"
"5b711795d06d9f8dc2dada2e6e41e25a625de502","2007-08-19 20:48:11+00:00","Some cleanup / const correctness / OOfication

svn-id: r28671
"
"72fd923cf5b714f5905b9f01547dc421ce7a1eb4","2007-08-19 23:28:38+00:00","Fixes previously crashing sound. Crash happened because of PCjr 4-channel mixing code trying to use uninitialized values (phase, ins etc) when mixSound was called before anything was playing.

svn-id: r28672
"
"42e257b08d5bfec8a3f132135117f680dbef5683","2007-08-19 23:33:22+00:00","Removed superfluous variable checkings. Made it so that Apple IIGS mixing code doesn't try to mix MIDI sounds yet as mixing them isn't yet supported.

svn-id: r28673
"
"ef0bd468a2d53d3865685944c089ab260266d99f","2007-08-19 23:57:12+00:00","Made Apple IIGS MIDI file parsing work (They aren't completely standard MIDI files). Enables playing the MIDI files (No sound! Only stepping through). Speed's probably not correct.

svn-id: r28674
"
"ef1fca15f05c631b6b716e688c9eb1f3cdee76e3","2007-08-20 10:43:07+00:00","Removed extra commas from lookup-tables' ends.

svn-id: r28676
"
"a6171ec34928af401a8b4549519fd28828195b57","2007-08-20 19:14:22+00:00","Fix for bug #1776993 - 'ITE: Cannot exit a room (regression)'

svn-id: r28679
"
"c50c20b2c2e74f138f19fe141e468b0941dbdea1","2007-08-20 20:00:40+00:00","Cleanup: Removed obsolete TODOs

svn-id: r28682
"
"5155d8df626b31634a3256a0ddb9b08bdd32b6e4","2007-08-20 20:18:06+00:00","64bit AGOS fix by Mark Weaver

svn-id: r28683
"
"55896e7584f00a4e04653971d6c655dbde01bf51","2007-08-21 09:12:00+00:00","Added note of clarification on enum AgiSoundType's different values.

svn-id: r28684
"
"96e0eeb94d54374152603d5992595226e9e07e8c","2007-08-21 12:46:21+00:00","Updated some comments

svn-id: r28685
"
"44f73a1b7cab5b145c5c74347f8b761d6fdfe2be","2007-08-21 14:59:02+00:00","Simplified blackToPal

svn-id: r28686
"
"cd8a3066bd5518f072fbc5da073b7faec91210ae","2007-08-21 15:03:58+00:00","Whoops!  Integer division was making audio output silent at anything less than full volume for the FilteringRateConverter.

svn-id: r28687
"
"c2c9ab9a224147d6d347180c9d255bdabd560ae7","2007-08-21 15:51:28+00:00","An encountered zero in an Apple IIGS sample stream turns off looping for that stream. Implemented this.

svn-id: r28688
"
"bf1f23d378c6ef37d019eecb576aedace79b2893","2007-08-21 18:04:47+00:00","Fixed the position of some widgets in the option dialogs of IHNM

svn-id: r28689
"
"296080e44fc97ad9f3f199517708061afeb39fcb","2007-08-21 18:07:17+00:00","The button sprites of the warnings dialogs of IHNM are loaded correctly now. Also, the save file slider is shown correctly now (although it still needs some tweaking, as its virtual height is still the same as in ITE)

svn-id: r28690
"
"bd4a289493fce8315ad323379df44545bcbb2001","2007-08-21 18:23:48+00:00","The height of the save file list slider is calculated correctly now for IHNM

svn-id: r28691
"
"3778d8619f7cef27f400a550b75547b0968467a7","2007-08-21 20:44:32+00:00","Fixed the cutscenes in the CD version of Lost in Time
(There's still something wrong with the second one, the one with the agent, though. Probably has to do with the sound key command 10)

svn-id: r28693
"
"9a9e42a1f6a25a1db56e2ccf00160277ccd83309","2007-08-22 11:11:33+00:00","Sprite priorities are now calculated correctly for IHNM

svn-id: r28694
"
"02e0d144e8564401fa5797978e91a2494d42ea79","2007-08-22 11:28:11+00:00","Implemented Music::stop

svn-id: r28695
"
"532c8c4230f6e9dcea58642094b893da0f0f75a5","2007-08-22 12:20:21+00:00","Detach the player callback handler when the music is being unloaded. Fixes bug #1734416 - 'AUDIO: ITE: Random crashes with the MIDI parser'

svn-id: r28696
"
"cd3f8577c1c75fba1b8aabf7d7c8447f945e5d65","2007-08-22 15:28:31+00:00","Mutexes are now used in the MIDI music playing code

svn-id: r28697
"
"d4d255cd6d60100ba3f44561009b1e90c3d0d3cf","2007-08-22 16:00:45+00:00","Implemented music pause and resume

svn-id: r28698
"
"99a554570278672d7153b6719df8dffdb5e226d0","2007-08-22 22:43:47+00:00","Reverted commit #28696, as the cause for it was different and has been fixed with commit #28697

svn-id: r28699
"
"2c0317ec617fa9052903b4005e83b61bfb251338","2007-08-23 10:58:09+00:00","The Lost in Time demo uses Adlib.

svn-id: r28700
"
"300ea0184a9b7f7ceca3e6e842d71fbc05a05a16","2007-08-23 13:34:28+00:00","The colors of the input text widgets are correct now in IHNM

svn-id: r28701
"
"1c065b1e1479e1320e936d9df5f95af0ae2ac20d","2007-08-23 13:56:25+00:00","Added skeleton code for sfScriptFade. Work is still needed in Gfx::palFade though, so it still doesn't work

svn-id: r28702
"
"3b276f0973f9128cc452c22604aece7f36e9e3ab","2007-08-24 11:23:57+00:00","Clean-up of event ops

svn-id: r28703
"
"65c390cbfc10b1bf524a4dbc047bcc6130f3c82b","2007-08-24 11:35:59+00:00","Clearcutaway now sets the scene's palette. Removed two workarounds for the IHNM demo

svn-id: r28704
"
"f48ce0d82111e9b209e7a2a069df472b46dfc687","2007-08-24 11:37:58+00:00","Some more updates to Gfx::palFade (not finished yet, though)

svn-id: r28705
"
"ef7c66893a28e24bf10ec63e86dcd91f4b380061","2007-08-24 11:44:18+00:00","Updated some comments

svn-id: r28706
"
"84d2dda5ed95ccadd99a56b664e12ced6219da41","2007-08-24 12:05:05+00:00","Code cleanup for the IHNM demo

svn-id: r28707
"
"3a761c8acd843e9410ac0a3b98971bd37c4911e3","2007-08-24 12:43:56+00:00","Oops, fixed a regression introduced with the latest code cleanup

svn-id: r28708
"
"e156f0ff8771e1e25e042117a3fe1b09c7f47b25","2007-08-24 13:40:03+00:00","The frame count needs to be updated for cutaways without an animation bit as well. Removed a hack for the nightfall scene in Benny's chapter

svn-id: r28709
"
"2bfc4466df238fea2162466cca06de88c773e6c5","2007-08-24 15:32:05+00:00","Some more fixes to Gfx::palFade

svn-id: r28710
"
"37cdd1c69ad4a1750c3041d5cceeed676da9061f","2007-08-24 20:14:51+00:00","First step in restructuring engine code:
- code has been consolidated in fewer files
- new table-driven parsers/execution
- some functions has been pushed down the engine hierarchy
- Parallaction_br now inherits from Parallaction_ns

svn-id: r28711
"
"234c2a5770a78e5044b8fe2fb86d42fe0dee3c83","2007-08-25 06:03:24+00:00","Fixed up several sound system script methods

svn-id: r28712
"
"5fd1bf64f24ead49799627b39e305a684f738e9c","2007-08-25 06:06:18+00:00","Bugfix to prevent animations nuking the GUI element palette entries

svn-id: r28713
"
"ca96ba431c5fd95852464ab13bcb78d2c5ad4682","2007-08-25 06:08:02+00:00","Completed the restart/restore dialog screen and functionality

svn-id: r28714
"
"50d0b8501f50505f31d687c4ef399839941b1777","2007-08-25 08:02:15+00:00","- reformatting AdvancedDetector engines (looks like what the gob engine uses now)
- add entry for Kyrandia 1 Mac

svn-id: r28715
"
"9dba16022e5a935c506a4c0201a5ec26436c043d","2007-08-25 08:19:54+00:00","Fixes end scene in Kyrandia 1 Macintosh.

svn-id: r28716
"
"487f22d8c32b4095b153562c13773f33bcaa1bfa","2007-08-25 11:40:59+00:00","Updated the parallaction MSVC8 project file for commit #28711

svn-id: r28717
"
"1e8ebaa7bda5becdb9c89604a6abacf7be69dfb0","2007-08-25 11:45:05+00:00","Cleanup script routines.

svn-id: r28718
"
"41ee6937108801b5212e3eba67fd2f199107246a","2007-08-25 12:38:35+00:00","Inventory arrows scroll the inventory correctly now

svn-id: r28719
"
"b68f2532c5383e20a010d503e3a9cafee9689b6a","2007-08-25 12:49:03+00:00","Converse arrows scroll the conversation options correctly now

svn-id: r28720
"
"05ba86577eea6697c36123c0dd09b91709db33c3","2007-08-25 13:01:22+00:00","Added a note on mouse right button action for IHNM

svn-id: r28721
"
"433105141b820c40db0561d22e7f69c0257eaf49","2007-08-25 13:13:03+00:00","Some more fixes to Gfx::palFade. Benny's nightfall scene is shown correctly now

svn-id: r28722
"
"4afe739687c216ed0808c581460a5f154a90aca3","2007-08-25 16:00:50+00:00","The intro of IHNM is shown correctly now

svn-id: r28723
"
"5ec8ee1907fd7381b528140ba8fe671959a4b30f","2007-08-25 16:01:42+00:00","Added skeleton code for kActorEvent

svn-id: r28724
"
"57ee1e15bee847dee6ba4d12311d1e7757264d20","2007-08-25 16:02:48+00:00","Stop showing actors before a scene's background is shown. Removed a relevant hack

svn-id: r28725
"
"c6292050a594644e2cc125fa4d8eb9cba593134c","2007-08-25 16:44:44+00:00","Only close patch files for ITE, not IHNM

svn-id: r28726
"
"8f2e60060168c33b81bd910616e7230a8434a2a3","2007-08-25 16:45:06+00:00","Merged most parser contexts into a single structure, added some new fields to support BRA.

svn-id: r28727
"
"3d823b250b0194d1bb08b194c4037081a48828ba","2007-08-25 17:10:31+00:00","Properly limit the save title size in IHNM

svn-id: r28728
"
"f6322b698e50f01ea32564167626f5d5cb025196","2007-08-25 17:20:58+00:00","Fix build.

svn-id: r28729
"
"79eb157fef249f7c27dd6097f6816cf967a0487d","2007-08-25 18:24:32+00:00","The palette is set correctly now when chapter points change and a cutaway is up

svn-id: r28730
"
"30a82f1879b60887bcdc0f6e21e4493aba363776","2007-08-25 19:21:43+00:00","When sfMainMode is set, overwrite the stored panel mode

svn-id: r28731
"
"71ce45faa0005d8b0293547de7619bc6a0fbce5a","2007-08-25 19:33:25+00:00","Reset the protagonist's portrait when a chapter ends

svn-id: r28732
"
"9f8b0884fa2814b04567a86596cdae7953d8eb1e","2007-08-25 19:59:07+00:00","Fixed a regression

svn-id: r28733
"
"39e4a9b180d37f2fef108391d5f04a3c7e3b2ea0","2007-08-25 20:34:10+00:00","Added an abstract base class for representing multiple-frames for animations. Changed user code to rely on the new interface. Cnv has been turned into an implementation of the new interface, and it is now known as a concrete class only to Disk and Font code for Nippon Safes.

svn-id: r28734
"
"6928087999c531164f957f074d1cc233c6286e81","2007-08-25 20:37:41+00:00","Added implementation for most parser and exec opcodes in BRA.

svn-id: r28735
"
"7534944c832212169f67af63e73f57b0c0abce20","2007-08-25 23:19:55+00:00","Removed the showactors flag and substituted it with RF_DISABLE_ACTORS

svn-id: r28736
"
"8493c06d1dcc2ce0b7327f188a31a71a7e69316e","2007-08-25 23:29:53+00:00","Always reset an animation when it's done playing

svn-id: r28737
"
"40ec12f64e95ed324003d032cbea9ca78717aa59","2007-08-25 23:46:04+00:00","Added a temporary workaround for an issue with animations

svn-id: r28738
"
"b7f7c8683f219d2e1b613b839d41d07c123a5bec","2007-08-26 00:45:07+00:00","Games saved in the character selection screen should work correctly now

svn-id: r28739
"
"f7439d884e00254a05542ad3a69a3f137027b662","2007-08-26 01:29:35+00:00","Implemented some differences of IHNM in sfScriptDoAction. Now, some actions on objects (like using the sarcophagus in Ellen's chapter) are done correctly

svn-id: r28740
"
"d5e5477737208f6f235f1eea2aff6ea0ba28c7fb","2007-08-26 01:36:01+00:00","Updated the parallaction MSVC8 project file for commit #28735

svn-id: r28741
"
"5e8a4a1425f08388dd44787a50da445caf00301a","2007-08-26 03:22:52+00:00","The character selection screen shown when all the 5 protagonist chapters are completed is now functional

svn-id: r28742
"
"c51fb71f05db52735e6133915a875de8d2f6e1b2","2007-08-26 03:24:39+00:00","The music table loaded for chapter 6 (final chapter) in IHNM is problematic, so don't load any music for that chapter until the cause is found

svn-id: r28743
"
"a6048447fc29cd271f8ea3b0a3e209c77786aa78","2007-08-26 03:32:18+00:00","Don't play a music track when loading a saved game from chapter 6 in IHNM for now either, until the cause for the incorrect music table for that chapter is found

svn-id: r28744
"
"6358d6bb07e12a7f16b2fa9eae7d7a706d638859","2007-08-26 05:03:59+00:00","One more place where music for chapter 6 shouldn't be played for now

svn-id: r28745
"
"9c608fcacbfe099f5c23fd457dfe139380e71bf5","2007-08-26 09:01:19+00:00","Implemented more opcodes.

svn-id: r28746
"
"d282f32604b563ae51cccd2f49f135753f4dfc62","2007-08-26 15:08:44+00:00","Cleanup

svn-id: r28747
"
"3ce737eb2a1f8477b389f68b81eb01f6a7280a57","2007-08-26 15:57:30+00:00","Cleanup

svn-id: r28748
"
"30148e505d6f3603e3da03762fbcc3b8124a9381","2007-08-26 19:14:18+00:00","Compressed digital music in the ITE demo versions is played correctly now

svn-id: r28752
"
"4e5d81973242c5f8e3040a57bebd6952106a658c","2007-08-27 09:30:23+00:00","IHNM's ending is shown correctly now (but the credits still aren't). Slight update on the music of chapter 6

svn-id: r28753
"
"1e4045007480faeb3f6953d033efd9b382e407c9","2007-08-27 10:03:23+00:00","Some more test code for dynamically loading the introduction cutaway list

svn-id: r28754
"
"ef53c924a2eb238c68a9dfde0a84c272df453188","2007-08-27 10:04:49+00:00","typo

svn-id: r28755
"
"b9be60c0cd2341e6ddba3ac7a3c4dcc7fab2600a","2007-08-27 10:14:13+00:00","Updated some comments

svn-id: r28756
"
"b39c4cbdbabac991cfafbcf7a007f7a7493221ba","2007-08-27 13:04:35+00:00","Added some skeleton code for the IHNM credits movie. Also, changed the location of the RF_DISABLE_ACTORS is set from loadScene to endScene

svn-id: r28757
"
"a8149227bfb9306df212a0754e046cc62382fa54","2007-08-27 14:22:24+00:00","The actors in Nimdok's part of the IHNM demo are shown correctly now

svn-id: r28758
"
"a4780a8f823ea0ca0cf68f7b7b7b86d7e3b32eb4","2007-08-28 10:41:25+00:00","Fix relative pitch handling (It's signed, was interpreted as unsigned before).

svn-id: r28759
"
"771f3e5306703f6c83b042bd5839908de6377aa1","2007-08-28 14:30:17+00:00","Enforced use of character's feet coordinates throughout the walk code.

svn-id: r28760
"
"2d443f7b09015ddb7d7101527f1e4a9e831c17f6","2007-08-29 16:04:43+00:00","Update create_kyradat for latest main.exe from ITA CD fan translation.

svn-id: r28761
"
"66ccbb97d1487c6a7aaa8a095df6d2942f778067","2007-08-30 17:55:19+00:00","Proper implementation of intro and credits in IHNM

svn-id: r28763
"
"fedb69dd6b9b77f2dbbc3dc615500d6a2ccf4c02","2007-08-30 18:49:02+00:00","Remove debug leftover

svn-id: r28764
"
"4be77cb45eaf0a864295acac50eac7bd2ee1c2f4","2007-08-30 18:59:05+00:00","Make checkKey() test for EVENT_QUIT as well, so that we can quit the IHNM intro
even without using the keyboard shortcut.

svn-id: r28765
"
"dd3157614f7babab5ac970d764cf32ff784548f8","2007-08-31 07:20:57+00:00","Some cleanup for the IHNM demo

svn-id: r28766
"
"50cbf7b154be3676abfa563a2fb3e799a3c9716c","2007-08-31 07:22:45+00:00","Fix regression: the volume after the start credits was set to 0, so the IHNM demo music couldn't be heard

svn-id: r28767
"
"2fa39d8ce70259c7a7db01d925ae349edf68dfa0","2007-08-31 07:24:41+00:00","The IHNM credits sequence is shown now. However, only half of the sequence is played at the moment

svn-id: r28768
"
"f398f99b75d0bc2216c091bba8aca3ed7b78a422","2007-08-31 08:20:41+00:00","Some slight updates to palette fadeout/fadein before a cutaway starts (still not working, though)

svn-id: r28769
"
"091ef596d11641cd5908882a59888ecf0b778a77","2007-08-31 10:10:11+00:00","Fix warning

svn-id: r28770
"
"dc0088f8fd2f168a38042678f7e0f3a2c083f47f","2007-08-31 10:59:33+00:00","Fix end credits in IHNM. Now video length is determined properly.

svn-id: r28771
"
"89e10f450fa29513e01941b49ca80826322ff380","2007-08-31 11:14:32+00:00","Simplify fading code a bit.

svn-id: r28772
"
"318c8a1d472ad329f352c39fd87c6cfb376ec4fb","2007-08-31 13:11:26+00:00","Fix for bug #1784937 ('KYRA: Wrong path for Brandon in starting location').

svn-id: r28773
"
"490586a0ae7157c62ce15d5f945577a8fb763569","2007-08-31 18:13:16+00:00","Initialise _chapterNumber to fix Valgrind warning.

svn-id: r28774
"
"bc44745011435e6558308f6480d2dde8f3ba71c0","2007-08-31 18:34:46+00:00","Pushed current save/load code from Parallaction down to Parallaction_ns.

svn-id: r28775
"
"c7e6db919ed93137f24c52a2e1aabad44b6f5fe5","2007-08-31 20:18:07+00:00","Slight simplification.

svn-id: r28776
"
"809f022be4a21daa996b50c2bf1e2a00f98ca878","2007-09-01 10:48:05+00:00","Proper height for Chinese characters, also remove obsolete hack for computing
character base.

svn-id: r28779
"
"557558974aabf67978f87a584f485d5ee7dde080","2007-09-01 10:49:28+00:00","Fix intro in German and Spanish IHNM.

svn-id: r28780
"
"e3b6d81e8288d6558ad2021b3a8aa5f5cca69154","2007-09-01 10:51:11+00:00","This is a pseudo-commit. Previous commit log message for this file should read
as follows:
Fix recent regression crash in IHNM intro.

svn-id: r28781
"
"ee2b33376fe6493a7e77bd63cd4d3542b9315852","2007-09-01 11:04:34+00:00","Don't go out of bounds when filling anim->frameOffsets[].

svn-id: r28782
"
"c51430f1d126cf689ec6454d022b3aa2d889ad84","2007-09-01 11:13:57+00:00","Remove the timer callback when the Music object is deleted.

svn-id: r28783
"
"ce71254b9ff42e94ce381c5373b8fe46b04d31df","2007-09-01 11:39:51+00:00","Add older picture formats parsers

svn-id: r28784
"
"9329f9a8c68bedb1a40e936405ddbba10eb7dc72","2007-09-01 12:43:22+00:00","Modified the workaround for the IHNM end credits animation

svn-id: r28785
"
"e7e9f17ced504e6b81d9a5c1b484bf302181016f","2007-09-01 13:55:13+00:00","The music of chapter 6 in IHNM is loaded correctly now

svn-id: r28786
"
"7f08865ec5f6ff350282a219cdccd26714f33f59","2007-09-01 14:58:46+00:00","An early WIP of PreAGI (TrollVM) support

svn-id: r28787
"
"2d729927c59f6a380a6671b21d5809ff321467da","2007-09-01 15:03:44+00:00","Do not decode frames beyond maxFrames to avoid any potential issues

svn-id: r28788
"
"db8b8a0c5fe9e3fc436818a1b5eaf02a133bc7a4","2007-09-01 16:32:00+00:00","Fix the crash in the IHNM intro

svn-id: r28789
"
"8ef7480b2620508b34fcfebb6dd132e7cb1c65d5","2007-09-01 17:18:17+00:00","Fix MSVC8's project file after addition of the WIP PreAGI engine.

svn-id: r28790
"
"554cff03842cac95af50d6eee7bf6be7dcc2bd33","2007-09-01 17:28:15+00:00","GIve some files more logical names

svn-id: r28791
"
"d2ab08d1c0840679384042a24391f0f85363702f","2007-09-01 17:31:01+00:00","Some key related cleanup

svn-id: r28792
"
"9e83ee75b304a966605e1e97d602e60082700db5","2007-09-01 17:32:13+00:00","Removed obsolete code

svn-id: r28793
"
"88abfcdad850cc66dec63808f0dff02cda496c1a","2007-09-01 17:32:39+00:00","Fixed compilation

svn-id: r28794
"
"c499dca50382b859d265219db193dcf6d2e60c03","2007-09-01 17:38:59+00:00","Updated the agi MSVC8 project file for commit #28791

svn-id: r28795
"
"4d7f64e37fba050e437caff204c88cf4ec9a8697","2007-09-01 17:47:48+00:00","Prevent orientation change

svn-id: r28796
"
"25db410ca56ec18d11b083d09dcaaecff29fd546","2007-09-01 17:49:16+00:00","Prepare Drascula support

svn-id: r28797
"
"31acae50778e0b8419a7d9a6391da49b8f0ec6de","2007-09-01 17:50:13+00:00","Added ARM optimzed code

svn-id: r28798
"
"9644a764b82c3ac07c900b481a1aad94baf6e6ef","2007-09-01 17:54:41+00:00","Prepare Drascula support

svn-id: r28799
"
"9db1525e50e76760cf4b5500de50514c08871886","2007-09-01 18:46:55+00:00","Added WIP logic code for Mickey's Space Adventure

svn-id: r28800
"
"19fde8da20afcdad723622bb6258090913bfdcf8","2007-09-01 19:03:22+00:00","Fix compilation and warnings.

svn-id: r28801
"
"88b74c5c91478ea017fa247a2f92fab957257122","2007-09-01 19:08:16+00:00","Cleanup:remove obsolete files related to old 68k version not supported anymore

svn-id: r28802
"
"500481c4ec684bc943ea5e4c30786bec49871629","2007-09-01 19:13:04+00:00","Cleanup: remove obsolete code (PalmOS 68K version not supported anymore)

svn-id: r28803
"
"f2aea09cbb40765ded391f20b3f1b78533b714eb","2007-09-01 19:21:29+00:00","Cleanup: remove obsolete files related to old 68k version not supported anymore

svn-id: r28804
"
"9b1cf99cbe6453561e06e5008ba240356cb7a5df","2007-09-01 19:24:23+00:00","Cleanup: more 68K related files

svn-id: r28805
"
"19078098ebf932f16ec96e136b8dde9cb0572b1b","2007-09-01 19:40:35+00:00","CW doesn't support ASM source file, this bat is required to execute an external compiler and add object code to CW project

svn-id: r28806
"
"bcabdc6caab957463dfe1eae0a3b02f17175cc2b","2007-09-01 19:41:53+00:00","Updated project files: added Drascula, ASM object files, ...

svn-id: r28807
"
"41e72bfaaff114ceb68e3f377ea70ac75874f92f","2007-09-01 21:22:26+00:00","Fix fallback detector

svn-id: r28808
"
"fae7dcadbd4bf6bbbdf024d2762fb3228e7b2c1c","2007-09-01 23:02:36+00:00","Fix regression

svn-id: r28809
"
"1a85c98598f5c6388485b8fbcd941e8f4524ed7d","2007-09-01 23:30:37+00:00","Implemented the rnd() function. Some cleanup to remove unneeded functionality

svn-id: r28810
"
"38c21d65393690c1a392587ab4fbdd226bc32d6a","2007-09-02 00:49:03+00:00","Merged all the different picture decoding functions

svn-id: r28811
"
"2182d758d07432d990b0e18beb569d539b901e00","2007-09-02 01:45:59+00:00","Initial implementation of preagi string drawing functions. They still need work, though

svn-id: r28812
"
"afac94340a4d71e352b5c17556557b290d8508e0","2007-09-02 02:25:13+00:00","Some more updates to preagi string drawing function

svn-id: r28813
"
"ae007b49e08f65435da5a7bdea8bb53af36251e2","2007-09-02 02:37:18+00:00","Fix compile.

svn-id: r28814
"
"fab0eb16fbd367d4d3482f9c3516c9ddc929c024","2007-09-02 09:52:06+00:00","Merging trunk changes into the branch (revisions 28163:28814)

svn-id: r28815
"
"02c153bdefcd5df249b2949e9e8442824cf4cd3a","2007-09-02 11:18:36+00:00","Added caching of filters, since it seems that in practice only a few different ones are actually needed.

svn-id: r28816
"
"762aaca73bfb1d3119b6708f65340f8e644a70bc","2007-09-02 12:56:55+00:00","The picture files in Mickey have a different width

svn-id: r28818
"
"b4d77e60cfc4c8b0f49b4b06a79e85e64af10602","2007-09-02 13:23:07+00:00","The dimensions of the picture resources in preagi games is different for each game. Mickey's pictures are shown correctly now

svn-id: r28819
"
"f3ae0182e09f3d15f4d0a6a896f5d39ba8ac8dfc","2007-09-02 13:44:23+00:00","fix a warning and some code formatting

svn-id: r28820
"
"7c92d3b02b77eb411f6fdf4671c732caa03abbe2","2007-09-02 13:44:37+00:00","Slight update on Mickey's drawPic

svn-id: r28821
"
"957e421bfa98ca634f83f0744e22c5ef5001e1d2","2007-09-02 13:50:26+00:00","fix more warnings

svn-id: r28822
"
"192430202eea743311355a9722660fa9d92e2161","2007-09-02 14:25:03+00:00","Filter coefficients are now reordered when the filter's first created rather than when performing the actual filtering.  This keeps filter coefficients cached nicely.

svn-id: r28823
"
"60a6d5aa539f4182a1b39616626d0f74615f791e","2007-09-02 15:17:41+00:00","Jobs are now members of the engine and are handled with a table, instead of being external functions.

svn-id: r28824
"
"7909ce3986d3804ed9d7e1596a2ad750fbc397c9","2007-09-02 15:19:20+00:00","Removed rand() and substituted it with Common::RandomSource

svn-id: r28825
"
"af72280fb93115b694f87ab71a5feeb35c85ff3f","2007-09-02 15:27:25+00:00","Cleanup: removed unneeded references to engine (_vm).

svn-id: r28826
"
"f1f324cee424cb97da1a14789db2806002ba3f6e","2007-09-02 17:28:00+00:00","fixed some warnings

svn-id: r28827
"
"21e4f4f1760e204de6e8d0a413f8e8f8987dd083","2007-09-02 18:34:11+00:00","Simplified global label management and added subtitles for BRA.

svn-id: r28828
"
"b819ae3e788061722913773cc69fd7d6916e6e4c","2007-09-02 19:00:22+00:00","More support for subtitles in BRA.

svn-id: r28829
"
"0f34da6d26d97e9c06403443b5a80f77d03c07d7","2007-09-02 19:07:33+00:00","patch #1779606 (README: more fixes)

svn-id: r28830
"
"f50bdd1aa819b90c9b5eea94222374c2d3c18282","2007-09-02 21:31:51+00:00","Moved preagi common code to a more appropriate place (commit 1 of 2)

svn-id: r28831
"
"cb2ce512363622fe1aafcf46e33aa18d3488e4e7","2007-09-02 21:36:43+00:00","Renamed preagi_input.cpp to preagi_common.cpp, as it now contains the code that all preagi games share (commit 2 of 2)

svn-id: r28832
"
"243a48138d2a8a8311a9ae36b41a4629494b7584","2007-09-02 21:40:09+00:00","I believe this fixes part of the music fading glitch in IHNM, but there's still
a slight problem when the intro fades the music down. Just before starting the
new music, the old music is briefly set back to normal volume again. This could
be a script bug, but I haven't investigated it any further.

svn-id: r28833
"
"f075661221cb661c9a726c2094cc96cbcba40b12","2007-09-02 22:45:02+00:00","Image placement in Mickey is correct now

svn-id: r28834
"
"2dd4f61b5e4ebbe3a4c33a8c8994b3fafdf75642","2007-09-02 22:47:53+00:00","Text in Mickey is shown correctly now. Also, removed an obsolete function declaration of PutPixel()

svn-id: r28835
"
"f761ba6d074f72902ddc166e0d38ba0f542782a2","2007-09-02 22:59:56+00:00","Fixed circular buffer indexing for stereo streams.

svn-id: r28836
"
"314d7c1736d9a99a367bfa213d15c4bd20afd05f","2007-09-02 23:25:39+00:00","Implemented clearScreen() for preagi games

svn-id: r28837
"
"39de6091e22ec821e98f82dae1cbe59c8361e6d4","2007-09-03 00:47:51+00:00","Implemented clearRow for preagi games. Mickey save games should work now. Some code cleanup

svn-id: r28838
"
"339e9cf173ba66bc7fdd0f220e0acbf5eaa38b19","2007-09-03 01:29:10+00:00","fix flashScreen

svn-id: r28839
"
"7faa38952514f2de013ce50090b33b1cf49ff116","2007-09-03 01:33:17+00:00","Some updates to Mickey's sound system and code cleanup

svn-id: r28840
"
"d2d8ab7d18d97c6fc1d3f4d35a25f2c7bcfaa25d","2007-09-03 01:36:55+00:00","fix warning

svn-id: r28841
"
"30c479a7e460f035d85313a91ae6fc6be4cfe565","2007-09-03 01:49:24+00:00","Cleanup

svn-id: r28842
"
"5a5e994e4fdcfd1c509fdedeae5c4d8157996627","2007-09-03 01:55:56+00:00","make Mickey use the SaveFileManager for saving/loading

svn-id: r28843
"
"51554b6f20e68d801dff96feb95d5faa0966f8cf","2007-09-03 09:39:15+00:00","Some updates to preagi's sound system and code cleanup

svn-id: r28844
"
"5e1a10c0707ee464339a28b3cd6e167236b7a50a","2007-09-03 10:25:48+00:00","Some more updates to Mickey's sound system

svn-id: r28845
"
"3c2994f72bbf8976390e63d7169981b89be253a9","2007-09-03 12:23:19+00:00","Make static data tables const (helps the optimizer a bit)

svn-id: r28846
"
"750ad32030f3343ded3ad7ac942993da43de68b0","2007-09-03 12:23:50+00:00","Fix warning about unused static function

svn-id: r28847
"
"b555a1569794b9d72803cd6207f70434cc83ed72","2007-09-03 15:03:50+00:00","Some updates for Mickey: objects are shown now (though still incorrectly), implemented some incomplete code for the ship's blinking lights, implemented the scene animation function

svn-id: r28848
"
"7389396a7f8ceb54c65370f80a23e04a59181d71","2007-09-04 06:54:40+00:00","The mouse cursor is now visible in Mickey. Also, the enter key on the keypad works now. Some cleanup

svn-id: r28849
"
"0d279e8de07fc5137266fb8793dba05e14fccd0b","2007-09-04 11:20:42+00:00","- Replace plotPattern() function with one based on specs.
- Add PreAGI differences to plotPattern function.
- This effectively fixes Mickey title.

svn-id: r28850
"
"6391965d3b6b232b95c4ecb1228acdafcb82a6fb","2007-09-04 17:26:38+00:00","next part of merge

svn-id: r28851
"
"4d30763ab91a450db439440897e45757b87e1352","2007-09-04 19:39:35+00:00","Fixed some warnings.

svn-id: r28852
"
"5a97b3d9be9c92624fc319abf4fb39105f8e7757","2007-09-05 15:43:56+00:00","Some updates for Mickey:
- Click to move functionality (improvement over the original game). It's now possible to navigate around using the mouse as well, together with the menu commands. The mouse cursor changes when the player hovers it at the picture's edges, towards a direction where Mickey is able to move to (north, south, east or west)
- waitAnyKey has been moved into Mickey's code (because of the animation part)
- Implemented the circle flag for AGI picture decoding

svn-id: r28853
"
"7b1d069ae4b7646b26304e629cce015fd8230719","2007-09-05 18:08:20+00:00","If the p2_a.iaf/p2_a.voc patch files are located in ITE's root folder instead of inside the sound subfolder, they're treated as uncompressed. Fixes bug #1751344 - 'ITE: p2_a.iaf not played correctly'

svn-id: r28854
"
"c5d18bf0209375cbb3087d586b5d2ddbc40fb759","2007-09-05 19:35:30+00:00","Move static variables to class.

svn-id: r28855
"
"677947ed398801a13c9951264e5ea971773d0111","2007-09-05 19:36:13+00:00","Make blinking lights work

svn-id: r28856
"
"94a96881ae3cf824b728fc1a7e3ae1ec1218d4c2","2007-09-05 19:47:32+00:00","clear the screen after using printStory() so the text does not remain on in the background

svn-id: r28857
"
"fece7cc1bb357831bfb808a990e0a13c36263cf1","2007-09-05 20:30:27+00:00","Make debug level 11 magic. It turns on all special debug level messages.

svn-id: r28858
"
"8ac039243076fb504349415aa88130e771ac3522","2007-09-05 20:45:47+00:00","last part merged

svn-id: r28859
"
"8ccd247a749772e4ee5df8de8da17983baf3094d","2007-09-05 21:57:57+00:00","Only change the cursor palette when the mouse hovers over a hotspot in Mickey, not the whole cursor. This is a much faster operation, which also gives better results

svn-id: r28860
"
"1aa4e0e8d0485fae4465cbc78977a5ca5f6ddb8a","2007-09-05 22:38:08+00:00","Changed several #ifdef _DEBUG code parts in Mickey with #if 0 (and commented them as debug). For some reason, _DEBUG seems to be set, causing all those code parts to be ran (which lead to all sorts of unexpected behavior)

svn-id: r28861
"
"2d974a22d439404b35b69f2e87dbd4923dbfafed","2007-09-06 01:18:13+00:00","Objects in Mickey are shown correctly now. Also, reduced the places where the screen gets updated

svn-id: r28862
"
"e7ec7acd267d16f1d8d4e31a3e4555885730dbd2","2007-09-06 06:07:22+00:00","formatting code

svn-id: r28863
"
"f8a9c41a8cae10d372814d2944d03b5a4cd70bb3","2007-09-06 08:35:08+00:00","Simplified the check for the uncompressed sound data in patch files p2_a.iaf/p2_a.voc in ITE, when compressed sound files are used

svn-id: r28864
"
"cea837ef7d5d772d9f1785fd87a07780e527edb3","2007-09-06 10:48:00+00:00","WIP Winnie the Pooh code (PreAGI). Shows only the intro currently

svn-id: r28865
"
"be93d3fe8d87d46e737cb9d7c1848a401d388e4f","2007-09-06 13:19:30+00:00","update

svn-id: r28866
"
"898043d967e12cad2952ac44295a13d6ae382df7","2007-09-06 20:51:40+00:00","Winnie now enters the main loop and allows for movement (via the menu)

svn-id: r28867
"
"843c35f3a4a4c93ee2b02adf63416a5c810218fb","2007-09-06 21:48:33+00:00","room strings now work in Winnie

svn-id: r28868
"
"6964db45920de24b8f24384777363fe35782c4c1","2007-09-06 21:58:57+00:00","Some updates for decoding Disney's BCG logo in Mickey

svn-id: r28869
"
"9db43997f71e3665bbba54a42514a57dd49e633f","2007-09-06 22:13:33+00:00","Temporary workaround for crashes occurring in Winnie when a room's picture resource is unloaded

svn-id: r28870
"
"4a467ee492e857a19b6fcc8eb75dc83683cde913","2007-09-06 23:32:08+00:00","This fixes images in Winnie (for me at least)

svn-id: r28871
"
"ae0ff88bda70b492e60fd476419baee7fd2c2a48","2007-09-06 23:45:32+00:00","enable inventory in Winnie

svn-id: r28872
"
"ff52e39620e6dd996d161d9cd2a83662bbe9a2e3","2007-09-07 16:22:31+00:00","Some updates on the mouse cursor in Winnie: the mouse cursor is shown now, and it changes when it hovers over the screen edges, but mouse clicking is still not functioning correctly

svn-id: r28873
"
"50c05eab6d8401855a44d4bda0479e0f73f43391","2007-09-07 20:09:00+00:00","objects now work in Winnie

svn-id: r28874
"
"a3422785c18e3c4134941eca659aef8c85c00067","2007-09-07 20:30:10+00:00","saving and loading games now works in Winnie

svn-id: r28875
"
"89bbbe53ac9adc19bc33e7895ca1eb32f75607fe","2007-09-07 20:47:31+00:00","wind and owl's help works in Winnie

svn-id: r28876
"
"0cccbb29d63a03582b7c3cd89265296a46530414","2007-09-08 11:15:27+00:00","Some cleanup (yay for whomever had the brilliant idea to let SVN work over HTTPS and hence through proxies&firewalls :)

svn-id: r28877
"
"97ca535b7809ed679ae8f90a87fc687295badec4","2007-09-08 11:16:40+00:00","Fixed various warnings, and added some serious FIXMEs

svn-id: r28878
"
"127900b33c8e7c817e9b676064e832192d8e7bc7","2007-09-08 11:17:13+00:00","Fixed various warnings

svn-id: r28879
"
"efbef7880b147678f2bf76624988a32a06c1c449","2007-09-08 11:18:35+00:00","Fixed code formatting (hanging braces); added static/const keywords to data tables; merged Hotspot::doLookAt and doLookThrough code

svn-id: r28880
"
"25cea17c0b39ae6ce76205ebace6a55c8faae3fe","2007-09-09 15:28:26+00:00","Silence some MSVC8 warnings

svn-id: r28881
"
"c5989f098dc1717b30c02db097cc584fe882eb87","2007-09-09 15:33:00+00:00","Mouse is working now in Winnie. Click to move functionality still not completed, though

svn-id: r28882
"
"a86ad9688a450b98686d6c643e3d28d047da867b","2007-09-09 23:13:35+00:00","It's now possible to move around in Winnie using the mouse, by clicking on the appropriate direction (north, south, east or west)

svn-id: r28883
"
"2b643875aee54a0dc8647109d2c07994e33d32e2","2007-09-09 23:14:29+00:00","Some updates for the BCG Disney logo in Mickey

svn-id: r28884
"
"a8767a421da39db7eeb716772e33f8358e00390d","2007-09-10 13:15:40+00:00","Fix compilation / warnings

svn-id: r28885
"
"6419311a2e361c5e265ae3796ef425700694801f","2007-09-10 13:16:06+00:00","Added some comments

svn-id: r28886
"
"4a302b25adb34e6357506a25cbfba6e182ac9209","2007-09-10 13:17:20+00:00","Lots of source code formatting corrections

svn-id: r28887
"
"669309776a4318a331e5007eb7bd19c8a18b5819","2007-09-10 16:03:12+00:00","fixes after merges, more will come

svn-id: r28888
"
"4a4fc235f22351331c7c5f33b83303d84622641b","2007-09-11 09:19:23+00:00","Change SAGA engine to properly use KeyState structs for handling keyboard input

svn-id: r28889
"
"4cc9d17c345883d4a764dd182d5a76167040c888","2007-09-11 09:20:39+00:00","Adding various FIXME comments to bogus (non-self-explanatory) existing FIXME comments; and some other related cleanup

svn-id: r28890
"
"541b68e0e432aefa583cc4777439b86be75fd982","2007-09-11 11:10:23+00:00","Removed an obsolete FIXME. The code in that part matches the original, so there doesn't seem to be any obvious reason for that FIXME

svn-id: r28891
"
"35d68621171128c885f5064fb1a3deccb984d95b","2007-09-11 15:49:19+00:00","Remove/clarify several FIXMEs

svn-id: r28892
"
"c1c7b5f563194822b89656396dd0f3c3b8724b20","2007-09-11 20:09:39+00:00","PreAGI does not need an AGI resource loader, as it only needs to load pictures and doesn't use directories. So, this allows Winnie to decode pictures without using the loader

svn-id: r28893
"
"be013e6c45c7547ac8c57d9061293eb5e82602e2","2007-09-11 20:17:36+00:00","fix regression: free the picture data after decoding a PreAGI picture

svn-id: r28894
"
"f4414ac084f08ed4e1e8b2b4cbd649588ef33820","2007-09-11 21:39:16+00:00","remove the rest of the PreAGI loader

svn-id: r28895
"
"8158f3f35340b44bc437142a1a21ba6b6162ae39","2007-09-12 22:17:08+00:00","cleanup the intro of Winnie

svn-id: r28896
"
"84393ab95e7d72484f5c612cee298f91e90221bd","2007-09-13 11:21:23+00:00","The early ITE demos were not interactive

svn-id: r28897
"
"afb3c693bef2b4146c906362fdc49f0da85a96cb","2007-09-13 15:49:40+00:00","Added debug commands for the global flags in IHNM

svn-id: r28898
"
"9d85371aa08c45f9c98e5b4b8de86e7763861326","2007-09-13 17:55:00+00:00","Cleanup and simplification of several of the script opcodes used in ITE and IHNM

svn-id: r28899
"
"5f1232a744c807839ce39c1062bc941b832624a1","2007-09-14 05:45:50+00:00","update project file

svn-id: r28900
"
"c84ff65720f62810d54253ddf232d2e5d33a843f","2007-09-14 12:42:47+00:00","Removed the RF_PLACARD flag. Also, simplified sfPlaceActor and removed a non needed check

svn-id: r28901
"
"1fa1b64984312844a34c742ea5a1cc3304736878","2007-09-14 12:49:09+00:00","Some more opcode simplifications

svn-id: r28902
"
"fef707a2dd9755d25161a5dfa0db70b463bc7b08","2007-09-15 03:08:58+00:00","The right button verb in IHNM will no longer be invalid for some hitzones (e.g. 'Quit game the door')

svn-id: r28903
"
"5fa2b1a3c5b63ddee8a7e3d5dcf4efc8cf9e04ef","2007-09-15 12:09:56+00:00","Palette fade in when a cutaway starts in IHNM is working now. Also, the fade mode is properly set in all cases where palette fadeout is used. Some code formatting

svn-id: r28904
"
"c22784449f4cb3a54b37beb2d6660ae89ffe7bfb","2007-09-15 12:16:43+00:00","Fixed BRA parser table for scripts.

svn-id: r28905
"
"e0659805811ff86fb1c795c44418d62a7892c6de","2007-09-15 12:57:11+00:00","The sales info video for the IHNM demo is now shown when quitting the demo

svn-id: r28906
"
"fd6ca3b7acc0c3b73479d4ef139fe6954250800a","2007-09-15 14:53:21+00:00","- added PC-98 platform entry
- added Kyrandia 1 PC-98 detection entries

svn-id: r28907
"
"22ce3aa9e1ab6428484e90fdf51178ba895e150f","2007-09-15 15:02:40+00:00","Slight cleanup of the actor class: moved all of the actor walk code in a new file and removed many unneeded includes

svn-id: r28908
"
"ac0bae3b30d5b2f54fa2a0276c99199f80c49678","2007-09-15 15:04:34+00:00","Updated the SAGA MSVC8 project file for the last commit

svn-id: r28909
"
"0bb109d59df1c9b263d861a7c6512c3e1c4e7b17","2007-09-15 16:54:22+00:00","Stop the intro music after the intro in ITE/IHNM is finished

svn-id: r28911
"
"ec4503efde47d00e1f0aaa9dd1733cea98431b41","2007-09-16 01:38:23+00:00","Don't draw the scene background when actors are disabled

svn-id: r28912
"
"bd454d0c796092ce745b1ce32aeb7d022b853216","2007-09-16 03:20:10+00:00","Fixed regression with save games that have an inset and an outset scene

svn-id: r28913
"
"a19f337a0c9e120b0f6101e6df71e2ebfc3a9b9d","2007-09-16 04:03:50+00:00","Changed ManagedList to make it more thread safe

svn-id: r28914
"
"f1e9fa1f5eb7c83ec9cd577ca018f29f77447575","2007-09-16 04:04:49+00:00","Tweaked animation frame delay to better match original game

svn-id: r28915
"
"041bb546c652d301bc68630f309b623d89471bab","2007-09-16 04:05:56+00:00","Bugfix to keep language strings in memory across restarts

svn-id: r28916
"
"b2e97060adf93760f7e4bce97e691e34fc258922","2007-09-16 04:06:49+00:00","Initial sound implementation

svn-id: r28917
"
"990e9a782891ce5510aa04f7d3b93f1b79504ac0","2007-09-16 04:22:52+00:00","Script modules are now unloaded correctly when changing chapters in IHNM

svn-id: r28918
"
"0a7a1f42838117defd6062ab8aa251a4ba80eab2","2007-09-16 04:31:15+00:00","Bugfix to prevent actions being paused sometimes

svn-id: r28919
"
"e4c51dfe7527f05a169e9df0af036a865336a726","2007-09-16 08:03:18+00:00","Fix to make characters face upwards initially, and to stand straight when not actively moving

svn-id: r28920
"
"c37de0131b9f1ed5d8c9c21291d34b5858bc1727","2007-09-16 08:43:34+00:00","Revised debug levels and added many debug strings for parsers.

svn-id: r28921
"
"04c323a19f0984f605fc4049fd51ef91d262e29c","2007-09-16 09:26:03+00:00","Split code from parseZoneTypeBlock in specialized parser functions.

svn-id: r28922
"
"dfde70d218302016bb050d2dde97d0c3643adb4f","2007-09-16 11:08:52+00:00","Fix warning

svn-id: r28923
"
"9778bec4192b8fd557fb8fbd14017645d2a9c701","2007-09-16 11:37:14+00:00","Fix bug when some animations were playing too fast.

svn-id: r28924
"
"80386fbb02725f922834863c2ac722b9159b9379","2007-09-16 12:16:28+00:00","Turn off unused code (fixing a compiler warning)

svn-id: r28925
"
"390066d0a389691d99a27997149b3b6135889d81","2007-09-16 12:42:25+00:00","Save games from the character selection screen are loaded correctly from the command line now

svn-id: r28926
"
"e3f1a1ced8fdcb2585481b3bf895cf79fd77d4b8","2007-09-16 13:51:57+00:00","Yet again another update for Italian CD fan translation.

svn-id: r28927
"
"c4aa4fe644a13d381a9140db6c7b93db7eb1f30c","2007-09-16 15:15:15+00:00","Fixed a little graphics glitch, where sometimes parts of the interface were cleared.

svn-id: r28932
"
"ef0df159f14ffae39860801db1c6c7f5c7872137","2007-09-17 18:22:52+00:00","* moved Table handling to objects.cpp
* added helper functions to load tables from files
* fixed occasional lock-ups on location change because of broken Table deallocation

svn-id: r28933
"
"86b3c8ddeb2d01718e8c8053ae31b50716c38160","2007-09-17 22:56:28+00:00","Character with ASCII code 9 is tab

svn-id: r28934
"
"5f05e7b64bd87510ccf941d27182828dd7bec535","2007-09-17 23:32:25+00:00","Added a debug command for font mapping

svn-id: r28935
"
"d582e1c7a572ce5d0313e47ec6a0e03260995f26","2007-09-18 09:26:03+00:00","Fix for bug #1796045 - 'IHNM: Spanish font wrong'

svn-id: r28936
"
"57bbed151116c76c2db99a8489fcb499f22b9602","2007-09-18 10:19:03+00:00","Gfx::palFade is implemented properly now

svn-id: r28937
"
"9b528826f89beb69caf7484719c64000d824c7ed","2007-09-18 14:56:42+00:00","Fixed Ellen's state when loading a saved game in her chapter

svn-id: r28938
"
"13a73a70b6309323e5d5efc8f417c679e630ba9a","2007-09-18 16:20:44+00:00","WIP for Troll's Tale

svn-id: r28939
"
"bf75630b425e358dfe9fe4b32492595ce4528494","2007-09-18 16:46:32+00:00","Fixed the font height of the text in the help screens of the IHNM demo. Clean-up of some opcodes

svn-id: r28940
"
"34ceaf208fc03ac738be1ef022177815f78a9a2c","2007-09-18 17:01:45+00:00","Fix menu and tutorial it Troll's Tale

svn-id: r28941
"
"55b19a1fd410d45ba677c186746d68e697bf7890","2007-09-18 19:06:05+00:00","First room is shown.

svn-id: r28942
"
"5c08cb1bcf84828cc93114fadbc89dd6f9909d06","2007-09-18 19:33:05+00:00","Fix compiler warning

svn-id: r28943
"
"c3d3aebe87d16d4fc3b7ac8581b99fb97241c9ac","2007-09-18 20:02:04+00:00","Patch #1768757: Merge fsnode-gsoc into trunk (MAJOR change, will break compilation on some ports)

svn-id: r28944
"
"3abc11611e1d1d93f1cf794df28879de3571bd01","2007-09-18 20:16:33+00:00","Code formatting fixes

svn-id: r28945
"
"a8751e4d732aa8290d8f4388398bedacd943822d","2007-09-18 20:23:06+00:00","Fix picture drawing in Troll's Tale. Implement room navigation.

svn-id: r28946
"
"90399fbf9cb99288f2bd2b7b9e7d3d39707a1609","2007-09-18 20:46:22+00:00","Fix some warnings

svn-id: r28947
"
"664446f5d82d9712cf91db78f629af6a8a3eb070","2007-09-18 20:48:42+00:00","Fixed some more warnings

svn-id: r28948
"
"162460d18ab91c213e4e57c3deea4b591b60a966","2007-09-18 21:23:22+00:00","Must include stdafx.h before scummsys.h

svn-id: r28949
"
"ab8997f64d069d28c33aca830a6b0574bf6fcda3","2007-09-18 21:34:57+00:00","Fix linker issues when doing a plugin build, and (hopefully) also on Windows

svn-id: r28950
"
"d6dbb98bc9770fc3af3fc0ef3c4792047f3c689c","2007-09-18 23:05:33+00:00","Fixed compilation under MSVC8

svn-id: r28951
"
"2ed777d64137226cd0ccc5a13b10f9ab9ea14965","2007-09-18 23:07:27+00:00","Fixes Common::File::exists. Please see the added FIXME comment about the real problem.

svn-id: r28952
"
"f1091ec8bb7b0f1a9892ade6c04fa445b6d52391","2007-09-18 23:15:48+00:00","Fixed some glitches which occured when closing the psychic profile in IHNM

svn-id: r28953
"
"d5a2010197df1017e49f1b52072d440b8c02c67b","2007-09-18 23:15:53+00:00","Clarified the FIXME in Common::File::exists a bit.

svn-id: r28954
"
"9f4e4f9771972cf533eba7d2e1fa07977e9a501f","2007-09-18 23:17:37+00:00","Updated the MSVC8 SCUMMVM project file with the latest changes to fsnode

svn-id: r28955
"
"5831459859818a3d434b0f2ceabc9e3be616c587","2007-09-18 23:19:51+00:00","Fixed a typo. (Thanks to our Doctor for spotting it)

svn-id: r28956
"
"d455146e993eefd9e43baa2cf3eb922089e24e44","2007-09-18 23:37:31+00:00","More comment fixing :P

svn-id: r28957
"
"67c33713aa54f8ecd79fe64ccb0db14a4369f0d1","2007-09-19 01:43:10+00:00","Fixed regression: The ITE intro is shown correctly again

svn-id: r28958
"
"7538fcbaef2672b29186280497772d9aa48e1cbb","2007-09-19 01:43:49+00:00","Removed a variable initialization out of a while loop

svn-id: r28959
"
"928f279626b18dfe6cc1e77a998f9c328e109e4d","2007-09-19 01:45:29+00:00","Updated the MSVC8 AGI project file with the latest changes to the engine

svn-id: r28960
"
"8f729ddea0f8adb6c46c67d8192763952b19ff10","2007-09-19 02:10:44+00:00","Updated information about some global flags in IHNM

svn-id: r28961
"
"55d7f0b132a98dabfd7e31d68bc8095de61838f1","2007-09-19 08:14:20+00:00","_displayName now contains the last path component, not the full path

svn-id: r28962
"
"59f36957e839ca710c2619e9a73c609445aea2b1","2007-09-19 08:16:37+00:00","rename psp_fs.cpp to psp-fs.cpp (as per the naming convention)

svn-id: r28963
"
"85b1bc594d96bbb1fb9aec3f8e085f219bb52a89","2007-09-19 08:21:42+00:00","Don't free the picture buffer inside decodePicture(). The buffer should (and is) freed from the functions that decodePicture() is being called from

svn-id: r28964
"
"a89694c0d61a75a960f5bec6c498659c988401cc","2007-09-19 08:27:32+00:00","Moved some keyboard code from Winnie together with the other keyboard functions

svn-id: r28965
"
"258901bab96f0050385a9912c8ea0fe2a41b2d6f","2007-09-19 08:40:12+00:00","Merged common/stdafx.h into common/scummsys.h. All referencing files have been updated.

svn-id: r28966
"
"2254028365cf5f162bd41cf0011b4475ec608f4c","2007-09-19 09:54:42+00:00","Merge several choice-related functions

svn-id: r28967
"
"77eea722afe175003baba3ed5341bfbf8cf988f6","2007-09-19 13:55:05+00:00","Modified patch #1738058: 'Action recorder'.

svn-id: r28968
"
"7668ac231fa3f2db6b72b5913f42cf5f213f476c","2007-09-19 19:26:12+00:00","Include <graphics/surface.h> for Graphics::Surface.

svn-id: r28969
"
"14efdd187345706df854ddad7c58a06433efa8e5","2007-09-19 19:28:05+00:00","Fixed fallout from keycode being made an enum.

svn-id: r28970
"
"2ef85c9bf6a8bf0131438ba26a80a5ee50c6e049","2007-09-19 19:42:10+00:00","displayName() -> getDisplayName()
path() -> getPath()
listDir() -> getChildren()

svn-id: r28971
"
"01ae76adeae4aad77e77daa590735089f8be3469","2007-09-19 19:43:03+00:00","KEYCODE_ENTER should be KEYCODE_RETURN, actually...

svn-id: r28972
"
"f04ba3ac7cb98753912ca7428b57533eaaad3ae0","2007-09-19 20:01:42+00:00","Added copyright notice to existing files.

svn-id: r28973
"
"fb97e09e9390352fc7f9b36cdf0256f73258a0cf","2007-09-19 21:24:27+00:00","show the cursor in Troll after the first intro screen

svn-id: r28974
"
"f5511b3102ec57385d74aee99311a642ae621fc8","2007-09-19 22:29:14+00:00","some cleanup using malloc and with readObj

svn-id: r28975
"
"8c4bc03446b04b6235d3eeec4d17d740e7a789f7","2007-09-19 22:55:55+00:00","Enable Lure engine by default.

svn-id: r28976
"
"0fc3ee26f92c47ee32d0cb6b95c3050e53db38e2","2007-09-20 01:38:07+00:00","Some updates to Mickey's BCG logo drawing function

svn-id: r28977
"
"4c4d4e7b15901a9610b08048c32a1254f367e8aa","2007-09-20 04:09:55+00:00","Fixed out-of-bounds writing in killSounds().

svn-id: r28978
"
"828158a82a08f3ed769196c76a303f340fda133f","2007-09-20 04:13:37+00:00","I'm probably being overly paranoid, but I'm nervous about initializing an array
of boolean with memset(). Maybe it's perfectly fine and healthy, but using a
loop is consistent with how we do it in killSounds() anyway.

svn-id: r28979
"
"aa034c4e4d6cb024c29a166bfba46a8cdc7c324d","2007-09-20 08:47:13+00:00","This workaround is no longer needed

svn-id: r28980
"
"3cbf4ad98f83c8bd456ece03d626be8776857148","2007-09-20 08:50:46+00:00","Remove superfluous trailing dot (and that error message really is a lie, the docs don't mention lure.dat :)

svn-id: r28981
"
"9593ff3e486a750b1deb5e43fe95ff8a20155d4c","2007-09-20 09:28:52+00:00","FIxed some warnings, cleanup

svn-id: r28982
"
"c2de32292900675d2fda0cb9d4948daa55e593a8","2007-09-20 09:30:47+00:00","Hook up create_lure tool to the regular build system

svn-id: r28983
"
"6bf0df51a145835f1a290a70fd06630f890fcee7","2007-09-20 12:47:04+00:00","Don't use clock().  Don't busy-wait.

svn-id: r28985
"
"af8feb03a026241b7f2c1d34ec72f65978a391b9","2007-09-20 12:59:31+00:00","Eliminated circular indexing of the input buffer during the FilteringRateConverter's main filter loop.  This has a tradeoff of doubling the input buffer length.

svn-id: r28986
"
"14b89bcf466acc2c4c9267f4986082c7dcf7ac1f","2007-09-20 18:18:10+00:00","Implement inventory in Troll's Tale

svn-id: r28987
"
"f3175861ba23318520a9044d8c35c33a083847cc","2007-09-20 20:50:38+00:00","implement o72_debugInput (with some help from Kirben)

svn-id: r28988
"
"78cd63c491e55ddf260f9249522a2109868ef4ce","2007-09-20 21:21:32+00:00","adding myself to the credits for AGI

svn-id: r28989
"
"341b8f1e67610d7843a75f37fe915f9354fc1188","2007-09-20 21:55:15+00:00","Last pieces of Troll's Tale. Only missing thing is sound

svn-id: r28992
"
"9ae47673e0bbaf2e16d1c2ddb69e58dcb2a5bcf3","2007-09-20 21:55:37+00:00","cleanup to readObj and readRoom

svn-id: r28993
"
"b07d3419d79552e703dbffa84815181e42ef8d90","2007-09-20 22:05:37+00:00","add stub for playSound in Winnie

svn-id: r28994
"
"3d4f10a302e1e6729b5ba913a17e2f7879780ca9","2007-09-20 22:15:09+00:00","cleanup with updating the screen; mostly moved to gameLoop

svn-id: r28995
"
"4436433cf676c1c1b8b1f0e0f482a2a32bebefc0","2007-09-20 22:44:48+00:00","allow for using up/down in menus

svn-id: r28996
"
"22c009ee457705277104fac5f4d267e640434b98","2007-09-21 01:20:22+00:00","Fix regression, when loading levels in mustard.

svn-id: r28997
"
"bcbf127b390af57579d8e8ada15fdbebb53e68fa","2007-09-21 01:35:07+00:00","Silenced signed<->unsigned comparison warning

svn-id: r29000
"
"6b639c6b214534c0e1c49b5a37a658948b086760","2007-09-21 05:27:33+00:00","Rename file removal functions, to avoid conflicts. Add save game path, when removing files via SaveFileManager.

svn-id: r29001
"
"d042f82a8a8968cdbea969bd427c50794b43738d","2007-09-21 07:54:43+00:00","Minimize changes to the mouse cursor's palette

svn-id: r29002
"
"381fba98c571e460c1e01d8adf951f5b0aa70ce3","2007-09-21 08:41:27+00:00","The animation of the crystals in Mickey is shown correctly now

svn-id: r29003
"
"7212d004548e96c29cd1bac58e5218cb572c334e","2007-09-21 08:55:26+00:00","Removed an unnecessary picture update when drawing crystal objects in Mickey

svn-id: r29004
"
"e9bd71f725aaf3ef7700afe3630531892fcaea99","2007-09-21 13:07:15+00:00","Another simplification to the main filter loop in the FilteringRateConverter.

svn-id: r29005
"
"fd1dbd86680bf37cb7c285ecb131511a6c67dd15","2007-09-21 18:50:53+00:00","Small font-related correction

svn-id: r29006
"
"dc4c06e954ee0d09f8227e6cf3bf4f083a43eedf","2007-09-21 19:12:53+00:00","Several bug fixes for Mickey's Space Adventure:
- Fixed a logic bug, where it was possible that the planets were not initialized properly when flipping XL30's switch without holding any crystal. Note that this breaks older Mickey saved games
- Fixed a bug with the initialization of the planet data, where the random number assigned to each planet could go out of logical bounds
- Save games are saved with the correct extension now (e.g. mickey.s01 instead of mickey.s 1)
- Some save game messages which were not shown are shown now
- Disabled two problematic objects (the scale in Mickey's house and the rock in Jupiter) so they are not shown for now, as our current picture showing algorithm crashes when trying to display them

svn-id: r29007
"
"2310d1f62a1f1124b493d9d7d6a3a3574217b5e6","2007-09-21 19:35:26+00:00","Simplified Mickey::randomize()

svn-id: r29008
"
"8663e5a39fdd8b65011a396b1ec029559c87e331","2007-09-21 20:06:57+00:00","Cleanup

svn-id: r29009
"
"e35221f4cabba9213766862f81049a2d86d782a3","2007-09-21 20:08:42+00:00","Oops

svn-id: r29010
"
"47b8dbbf525ecc90ca869dca7219e3c22e6f79b5","2007-09-21 20:19:12+00:00","Fix regression caused by the latest cleanups

svn-id: r29011
"
"79e323d6dd7a6270331068a9871b18902321ba0b","2007-09-22 07:32:28+00:00","Added create_kyradat to our regular build system, too; fixed some warnings (and added a FIXME about ambiguious code)

svn-id: r29012
"
"924a9074fbedadd9b1d402d71899c6bc9d45bcb1","2007-09-22 07:49:51+00:00","Set svn:keywords

svn-id: r29013
"
"893c42c3d8cf4bd5ba0564267f8d9b704b01441f","2007-09-22 09:51:33+00:00","Added legal headers, fixed various warnings

svn-id: r29014
"
"dc43ca779fb59fbae5c52d81f6d3fa2bca1c4c4d","2007-09-22 09:53:13+00:00","Added skycpt and qtable to the regular build system

svn-id: r29015
"
"366b65486f84840be52b5a6f04be64f3a51f57d9","2007-09-22 10:10:01+00:00","Code simplification. Removed IDI_MSA_MAX_STR and fRmTxt - oRmTxt is used instead, as the two arrays contained non-null values for the same rooms. Also, room object indices are no longer read from the original executable

svn-id: r29016
"
"665a34861b64d82f7d8e7058991fcfc859b2e4a2","2007-09-22 10:19:07+00:00","Fixed compilation.

svn-id: r29017
"
"00298204e730137b0cb56e242d5ce0d8f3cb51ae","2007-09-22 10:36:20+00:00","Replaced room indexes with their corresponding enums

svn-id: r29018
"
"dfb6080e1a859c696e5c16c4f6a4e298867ceaca","2007-09-22 10:53:53+00:00","Simplified item handling code in Mickey

svn-id: r29019
"
"2f412c17e061bb98538f5e95a136d654a8302c41","2007-09-22 11:31:46+00:00","Code simplification

svn-id: r29020
"
"b0fe8332082ede92c4c61a8131dd04489da637e1","2007-09-22 11:47:51+00:00","Fixed const warning

svn-id: r29021
"
"63f4e23ffacbe03d9039d1fc87a0e0fdd67071f4","2007-09-22 13:27:10+00:00","Code cleanup and simplification

svn-id: r29022
"
"f371e98f98641552757cb987c8b515c5cd75ca25","2007-09-22 17:56:23+00:00","allow Winnie Amiga to show the intro

svn-id: r29023
"
"7524244581bcec8d95da2fc65455704a31c3a517","2007-09-22 17:57:45+00:00","Added a workaround for a bug with Gorrister's heart, which exists in the original game scripts of IHNM

svn-id: r29024
"
"d7ae40b65d9e6b8f30c071fb3327f39484eae898","2007-09-22 18:45:43+00:00","Refactored a lot of Character-related code and put it into the Character class.

svn-id: r29025
"
"50fb8b2734aa1b73f9956643b18599a2168c097a","2007-09-22 19:31:24+00:00","Fixed broken compile on MSVC.

svn-id: r29026
"
"b4ed83166697a7a70a8ff83c64368753023cecd5","2007-09-22 20:16:24+00:00","some cleanup involving Winnie Amiga, however it still only shows the intro

svn-id: r29027
"
"04feab16897e3af3d5689f262b957999e477a35f","2007-09-22 20:19:55+00:00","Switch Troll's Tale to booter image

svn-id: r29028
"
"2115e5d181697da99fd962a16690f44678cbfc2c","2007-09-22 20:47:41+00:00","Hopefully fix amigos4 fs implementation.

svn-id: r29029
"
"b93e906285c1bba1ee70aebe23cd225b28cfeeb5","2007-09-22 20:51:34+00:00","oops.

svn-id: r29030
"
"4333fafe76ecbb1a53bcfeba108b6d9e3d626b9f","2007-09-22 22:37:20+00:00","Fix for bug #1800276 - 'IHNM: Problem in saving'. A bug in the logic of the save slot allocation algorithm became apparent with the FS node merge. It should be working correctly now

svn-id: r29031
"
"998d43df30683ae40f7fde92e453e36a67682176","2007-09-22 23:36:00+00:00","allow Winnie Amiga to show room images, still not playable

svn-id: r29032
"
"62f69cff8a86598242ec08bf150633b920ff105a","2007-09-22 23:39:47+00:00","fix possible Endian issue

svn-id: r29033
"
"cee2a605698a14845de182aa7e3442015d4ae4e6","2007-09-22 23:56:08+00:00","Make sure that picture fill doesn't go out of the picture's bounds, since pre-AGI pictures have different dimensions

svn-id: r29034
"
"110da1b1cf5fbfdb71685135cf57f43a6a21ed72","2007-09-23 00:12:07+00:00","readRoom is now Endian-safe

svn-id: r29035
"
"f45cf700d80e2bc4d1c9ad5c4dc3591959782e00","2007-09-23 00:27:36+00:00","randomize() can no longer create 'object 41' -- there is no object 41, and when we attempt to draw it, it can cause crashes

svn-id: r29036
"
"352566ee646e3a6b9399bc928d4c10a4f5a8fcc8","2007-09-23 02:15:48+00:00","allow Winnie C64 to start, although there are problems with the images (probably wrong offset) and logo.pic/intro.pic are not working, so the intro is skipped

svn-id: r29037
"
"9a9e9d21a8a0d80982f38d561275051bf5108f40","2007-09-23 09:59:10+00:00","Moved MemoryStreamEndian from Saga to Common.

svn-id: r29038
"
"eb96cdc6ad46d8b848f60f6703a41317a70e610a","2007-09-23 10:05:50+00:00","Troll's Tale support was added

svn-id: r29039
"
"d19624d3f67b3d849002c3a2591fb907dc1dfaba","2007-09-23 10:33:30+00:00","Fix 64 bit issue

svn-id: r29042
"
"474c3ef9155edcacbb0c88b66f87a06b8b7f2f81","2007-09-23 11:10:11+00:00","Updated the MSVC8 SAGA project file for commit #29038

svn-id: r29043
"
"d82fa2a65bc391df8730bd528e04287043b2a1af","2007-09-23 11:20:44+00:00","Fixed some platform checks

svn-id: r29044
"
"f260e47512b6b28ade66fa0ba79a15efa3f3d26c","2007-09-23 11:54:26+00:00","Portability fix

svn-id: r29045
"
"67d728a2585930580cf5045bec8c565ebe19fa58","2007-09-23 12:02:34+00:00","Make readRoom() truly alignment- and endian-safe

svn-id: r29046
"
"f7590de0aaee21158c4860fdfa5c797b7b45cc66","2007-09-23 12:11:05+00:00","Fix endian bug

svn-id: r29047
"
"fe2f83efcef8f70dd7a4c61ba0434a84e5830afb","2007-09-23 12:25:44+00:00","More endianness and alignment fixes

svn-id: r29048
"
"4e0913b19f4599bcf44dc0c27856356d0f1ad5b7","2007-09-23 12:31:21+00:00","changes for Winnie Amiga (now playable) and C64

svn-id: r29049
"
"9d26f30929df7f2c5fbe2025de0d8034fd3ac8c1","2007-09-23 13:40:28+00:00","Fix regression

svn-id: r29050
"
"35a3f9c9ac0f13ea89a7b43c9df71e194042008c","2007-09-23 13:47:50+00:00","objects now work in Winnie Amiga

svn-id: r29051
"
"c4ad96b91e5e64cf74875d5af6dcb905e07361ea","2007-09-23 15:09:48+00:00","Add Tigger and Mist events implementation

svn-id: r29052
"
"f50e162c252813dfe020143101427ecb266fbb26","2007-09-23 15:53:49+00:00","remove _saveMarks from SAGA load and save implementation

svn-id: r29053
"
"4a8dc7aa68f8e4c5a057bf61e8c6fd072606130e","2007-09-23 16:32:03+00:00","Cleanup. Also, changed isBigEndian to be a boolean

svn-id: r29054
"
"b138ff45fc716aefc58bcd402919a2d5e53fefdf","2007-09-23 16:41:15+00:00","Added Elvira 1, Elvira 2 and I Have no Mouth and moved Troll's Tale to the 'New games' section

svn-id: r29055
"
"38d8105e4e7c29f0794dee87f908081e77aa0962","2007-09-23 16:43:43+00:00","Add support for Russian versions of AGI games

svn-id: r29056
"
"f4507e71d39545f82e4cd8ce061c852ab11c10d7","2007-09-23 16:48:33+00:00","Indentation.

svn-id: r29057
"
"173eb059db01a4ff542b7adc0451c6072cea044e","2007-09-23 16:52:53+00:00","Rename class variables to conform our code conventions

svn-id: r29058
"
"7da28f6129cf8b0fb06bbbc0f9d5e848c1695e9c","2007-09-23 17:00:35+00:00","Rename class variables to conform our coding guidelines.

svn-id: r29059
"
"05abbf49a2990fb16070682ab177aa88e823a382","2007-09-23 20:17:50+00:00","Moved most of inventory-related code inside classes Inventory and InventoryRenderer. Shift is not completed, as new code doesn't handle selections yet (falling back to existent code).

svn-id: r29060
"
"19e9161a205920d613d07460c3a34d363537c21e","2007-09-23 20:23:49+00:00","Oops. Some debug code was committed.

svn-id: r29061
"
"4d73619c8f325716a78ca8d2f01445934568f5d6","2007-09-23 22:05:50+00:00","Added support for multiple languages, with added resources for Italian version, added extra needed resources for internationalisation

svn-id: r29063
"
"f0f813b824dfe4fb3dd3d04dcd9a46ae30121cbd","2007-09-23 22:09:25+00:00","Added support for original copy protection, in any anyone ever wants to see it

svn-id: r29065
"
"9d07c3a4c5e1522d9d91a65a0d146734ca31d3ae","2007-09-23 22:10:29+00:00","Shifted string decoder list to a resource, since it varies from language to language

svn-id: r29066
"
"59e9e25a5fa2754037363756e08a7a63ce83f9b5","2007-09-23 22:11:14+00:00","Added support for original copy protection, in any anyone ever wants to see it

svn-id: r29067
"
"532ae68aa2f1df5a0dfd900d594c3a3ca684e04f","2007-09-23 22:12:37+00:00","Tweaked the colour fading code so that room 4 will display correctly

svn-id: r29068
"
"155d85b3b647378ef0b315e069de8b46ab61a11a","2007-09-23 22:13:41+00:00","Removed some old redundant code and moved some string constants to the resource file

svn-id: r29069
"
"01bfaaa76544856f476c928f11448831de43f6d0","2007-09-23 22:14:45+00:00","Split up the interruptableDelay method into two methods, making the version in events.cpp more generic

svn-id: r29070
"
"ffa264b9f747a539c898d38a8b944326291b255a","2007-09-23 22:15:22+00:00","Added support for the lure.dat file now containing multiple language versions

svn-id: r29071
"
"8685b1b45648ffb89468537e8154afbc074a2e4d","2007-09-23 22:16:46+00:00","Added vaildation of new lure.dat file, and added MD5 for Italian version of game

svn-id: r29072
"
"b4cff6b9bdda3c1d30af9f919a3698b57172522c","2007-09-23 22:17:57+00:00","Converted fields in data that were originally offsets (such as tick proc offsets) to use indexes, allowing for more generic handling of different language versions

svn-id: r29073
"
"ef986e2222f5e64f47eae392ecdc6aa8fdf8a98d","2007-09-23 22:29:05+00:00","Init _screen for kyra3. Menu + Intro should be working again.

svn-id: r29074
"
"df827970a13a0996f90e397b1d53aeb98ca42955","2007-09-23 22:43:46+00:00","Fix for kyra3 crashes while playing WSA files.

svn-id: r29075
"
"a8112e385779e2243d5290c6a60c4436e902b16d","2007-09-23 22:47:49+00:00","- mention kyra macintosh support
- some consistency fixes

svn-id: r29076
"
"3c5d8c40314f34f870384e3d72108a8ac2061d10","2007-09-23 23:00:54+00:00","Added debugger command to list the birthstone gems.

svn-id: r29077
"
"41e4a7b1564183c0e93cc4087ee24301b2015891","2007-09-23 23:37:01+00:00","Added command to enable screen debug functionallity. (instead of the old compile time enabling)

svn-id: r29078
"
"6ee45acf9e529efe9eb51e327d4c212d0ffc9293","2007-09-23 23:37:55+00:00","Fixed comment for grabPalette.

svn-id: r29079
"
"89edc3c7ebb44f0c46b336e8db21840d1514b61a","2007-09-24 00:07:28+00:00","Adds Common::set_to which sets elements from the range [first, last) to value.

svn-id: r29080
"
"63d59b2ee6fc178d79be342e5b417193254983f5","2007-09-24 00:08:18+00:00","Changes some code to use Common::set_to instead of loops. (as an example on how to use Common::set_to)

svn-id: r29081
"
"6107a9f8241630fadfd1a0d1f89621d563ff0d4d","2007-09-24 00:32:24+00:00","Added missing endian wrappers from Room Exit structure loading

svn-id: r29082
"
"e37049cd2f75455e927dcea10ceea1847d87c9bc","2007-09-24 01:27:22+00:00","ok, really get rid of 'object 41' now -- didn't realize that the rnd function in preagi already adds 1... (DrMcCoy: I guess there was an object 42 before as well)

svn-id: r29083
"
"e1213945d6ea6c5def84e2f748f1c05f3ebe2b16","2007-09-24 01:46:42+00:00","fix regression in the inventory from r28995

svn-id: r29084
"
"e95bc92824f48d18a81e89b311e48f684cd6f76b","2007-09-24 01:46:45+00:00","Silenced the compiler warnings

svn-id: r29085
"
"88da0d4d0095827cef5c9fc07ec7c29bd44e465f","2007-09-24 17:14:56+00:00","Silence some warnings.

svn-id: r29086
"
"28ef622faa5f3f4bc01f8a3967064e6c0116604f","2007-09-24 17:15:21+00:00","Silence warning.

svn-id: r29087
"
"fb912f95392ab258fed621cd5605f48243f8d15d","2007-09-24 17:23:34+00:00","Silence warnings on 64bit systems.

svn-id: r29088
"
"b50844197295fa6f5418580b296182e4a5ce0a59","2007-09-24 17:44:47+00:00","Patch #1800767: 'Sort the list of engines'

svn-id: r29089
"
"5788598f10dea65de3a9bd27831f817cf11bf166","2007-09-24 19:37:57+00:00","allow Winnie Apple II to start up, however room images are slightly distorted and the intro is not shown; other cleanup

svn-id: r29090
"
"8e1e4b9079a96d5b48bc445fabd01c4067ba9635","2007-09-24 19:45:18+00:00","Fixed inventory regression introduced with yesterday's commit.

svn-id: r29091
"
"287bf608d4e387f7d5c802a0afe635d85398135f","2007-09-24 20:02:08+00:00","Added debugger support for kyra2.

svn-id: r29092
"
"d65140d6b58330e8c00c5bdd1360186b5657e868","2007-09-24 20:26:27+00:00","- reworked input handling
- implement changing movement destination while moving

svn-id: r29093
"
"a03c829ace222e2dc00965cbd2c877b8b99e59fb","2007-09-24 21:58:11+00:00","- added a new generic debugger command 'facings'
- added a few new kyra2 specific debugger commands

svn-id: r29094
"
"d5f83fbcde14b68b953354d9998fe8f3eca3d03d","2007-09-24 23:28:23+00:00","objects now work in Winnie C64

svn-id: r29095
"
"212d4ed9135a15c08b98bc2e370f289513e80274","2007-09-25 15:58:44+00:00","Changed InventoryRenderer to draw inventory over a Surface, thus removing useless drawing routines.

svn-id: r29097
"
"730852548980d9bba805c3307354f0693069e8c8","2007-09-26 18:17:16+00:00","Some code formatting corrections

svn-id: r29099
"
"c89ef6060daf64603b74ec49fc9f87b2c5c4e64b","2007-09-26 18:23:31+00:00","Endian fix

svn-id: r29100
"
"af9abde7dd29e9098a4b784da651eabfe4318663","2007-09-26 19:11:19+00:00","_currentObjectNum should also be set in text only talk mode

svn-id: r29103
"
"ca0d93a1d2de65f122f0b9466f15225a26ac65ed","2007-09-26 19:12:17+00:00","Compile fixes for WinCE build

* wince-sdl.h: sdl-common.h is now sdl.h. Also, copied in definition of
DF_UPDATE_EXPAND_1_PIXEL as this was no longer offered by sdl.h

* CELauncherDialog.cpp: Updated to use modified FilingSystemNode.

svn-id: r29104
"
"8d84e9add18f71897e90cf6dd4ba8e253a7eaae5","2007-09-26 19:18:47+00:00","add polish version (bug report #1800500)

svn-id: r29106
"
"72d0be841f3b671fa6379034e4d3c597170f7f62","2007-09-26 19:20:59+00:00","no need to assert here, just don't start playing the stream if read failed

svn-id: r29107
"
"3d2485ca9722f88a2a3ee8b971e59989633991d8","2007-09-26 19:26:12+00:00","rename ui.cpp to menu.cpp for consistency with other engines

svn-id: r29108
"
"20498f7b1abd4a09cdba0773061f93a7453232a5","2007-09-27 15:43:21+00:00","Updated the MSVC8 touche project file for commit #29108

svn-id: r29109
"
"885b16f2f07286745ab90baa49817441de12ac43","2007-09-27 17:27:53+00:00","Key and certificate that is valid for the next 30 years.

svn-id: r29110
"
"c1eacc03571b9afbedd188fbf26ff115dbf8e393","2007-09-27 20:38:04+00:00","simplified queen savegame listing (removed marks array etc.)

svn-id: r29111
"
"d8831b44da24c16eef5fcc368d8d54953f0c60b5","2007-09-27 20:38:23+00:00","simplified touche savegame listing

svn-id: r29112
"
"61a642b1ccd8afc9bffc50ef1ed934f1706b6ce8","2007-09-27 20:39:06+00:00","fixed savepath files listing under win32

svn-id: r29113
"
"c5edcaa2ef09467aa3d46fd40491ca9cdf6dc2c8","2007-09-28 07:55:02+00:00","Wrapped access to the playing sounds list in a mutex

svn-id: r29114
"
"ef30bc06f6e453500896901a83c738fd8eec4ed8","2007-09-28 07:57:09+00:00","Bugfix to extract correct hotspot offsets list for Italian version

svn-id: r29115
"
"f490db074b6a5d9cdfb59cdf0db796f73c8b6388","2007-09-28 07:58:11+00:00","Fix to correctly reset action sequence list between languages

svn-id: r29116
"
"9262b47dd2bf4e5e524c0d343cf48848a541861f","2007-09-28 09:38:08+00:00","Add PALMOS sections to ARM rate conversion sound code to preserve r10
for calls back into C/C++.

svn-id: r29117
"
"cd3e35103cf9ff355c96e10d2165f1da46e740dc","2007-09-28 20:36:54+00:00","Symbian OS does not have ELOOP defined as an error, so #ifdef around those two cases.

svn-id: r29118
"
"c6905d56a90e74e1bd5e82313020f85d80ab112b","2007-09-28 20:41:22+00:00","Don't include windows.h for Symbian emulator builds

svn-id: r29119
"
"7b3fe1d12f25dc6bd7503980618afd523f94a189","2007-09-28 20:54:11+00:00","Updated include order and H file naming

svn-id: r29120
"
"2ca3d105f398cfcabbb148830a7e6ed666ae42eb","2007-09-28 20:54:58+00:00","Updated actions (compared with PocketPC)

svn-id: r29121
"
"a5e8e7ff8bf61195ef8b4ce09bca3606f5ac31d4","2007-09-28 20:55:43+00:00","Updated with Drascula and new ARM asm opts.

svn-id: r29122
"
"b011f533f4bc8363fee19864b1a25f48267d55be","2007-09-28 20:57:04+00:00","Added support for Drascula and new system files

svn-id: r29123
"
"7751ad5f4ba8cd3c5eb53524bf3d67b6c62fe0a9","2007-09-28 21:03:45+00:00","Updated README for some small build details

svn-id: r29124
"
"d61d9c432ad1ffec73e131b4c75ec2a9a5e2f415","2007-09-28 21:29:06+00:00","sadfUpdated version number in installation files

svn-id: r29125
"
"387f8345cd91924dd43ba32f2a7e50a621b0e8ff","2007-09-28 21:30:05+00:00","Updated version number in installation files

svn-id: r29126
"
"74ce7c620b2ced5d4a6fe1a541657567b2314513","2007-09-29 05:46:57+00:00","Allow the user to change scalers, fullscreen mode, etc. without terminating the
IHNM intro. In other words, don't terminate the intro just because the user
presses a modifier key. The original didn't either.

svn-id: r29127
"
"bccf69bfe103a7f061bdbd30ec2dff4d133da360","2007-09-29 06:19:02+00:00","As far as I can tell, there's no point in setting sceneSkipTarget to true here.
There are no other scenes before it.

svn-id: r29128
"
"44746d74a4cc27498814656f26c248fad73325f7","2007-09-29 06:26:22+00:00","When skipping the IHNM intro, skip all the way to the character selection
screen.

svn-id: r29129
"
"41fb38e05e977749d26220a1ecc1c4b6abedd023","2007-09-29 11:20:07+00:00","Fix bug #1803020: Oddity in Makefile.common

svn-id: r29130
"
"94cd7dd04a061f0c256ae3ade78bfe3cb5507dcf","2007-09-29 11:40:31+00:00","Added a hack for the tools to allow building on MinGW with SDL backend. (see bug #1800764 'TOOLS: MinGW tools building broken')

svn-id: r29131
"
"bdffcca128d8114fe50c0726b72dd149d9b0a815","2007-09-29 19:13:04+00:00","workaround for original game glitch (bug #1751170)

svn-id: r29132
"
"7ca277d2525da7a28b8fe6949970ccbbfd28b1f4","2007-09-29 19:14:38+00:00","don't update the screen directly after a gamestate load ; keychars and room background are now redrawn on the same frame (bug #1751226)

svn-id: r29133
"
"939948766b1afbd6437eb5d77563eb3362f62c3c","2007-09-30 01:29:12+00:00","Fixed bug #1804805 - 'IHNM: crash/glitch with italian fan patch'
Added the Italian fan translation of IHNM, created a workaround for invalid string data in the Italian fan translation and added some hard coded strings which are changed in the original game executable with the Italian fan translation patch

svn-id: r29134
"
"182eef40daa4c0eb6794efa7a0c46e6b803e3721","2007-09-30 10:36:27+00:00","Remove target 'tools' from the deps of target 'all'

svn-id: r29135
"
"b7c7623930eb430bfc330e4a3827ba46446574c5","2007-09-30 10:51:33+00:00","Added cross-language handling for the top menu

svn-id: r29136
"
"106b7eb83975f3f982d9ded1fa3b691b4f59e832","2007-09-30 10:53:40+00:00","Fix load offset for straw fire, and added proper cross-language handling of initial talks to strangers

svn-id: r29137
"
"b767eb771b56f48a1e971e1d5fc3ab97c4ae9a14","2007-09-30 11:16:01+00:00","fix incomplete savestate prefix

svn-id: r29138
"
"28c1f3fbb36ee2febe9f7eb8d289ceae809e5f93","2007-09-30 11:16:25+00:00","removed unused function, simplified handlePattern

svn-id: r29139
"
"341a392de29bd1f881e0051d98f67caf9f21b98a","2007-09-30 11:50:45+00:00","Bugfix to italian tick handler offsets

svn-id: r29140
"
"5a07c3c552133c0802520ba69c3b4ae0353cee33","2007-09-30 12:12:22+00:00","Patch #1804801: DMedia MIDI driver for IRIX

svn-id: r29142
"
"23c38f0b6222aec6ff3c79b145f555d4239e84be","2007-09-30 12:13:30+00:00","Mention DMedia MIDI driver in NEWS

svn-id: r29143
"
"cb2f6ce0928f013087ef130ad9f7abcb19e15d8a","2007-09-30 12:35:37+00:00","Fixed action lists to sort correctly for non-English languages

svn-id: r29144
"
"f002fcf98af5942563112008c180fcbb183c20a2","2007-09-30 13:19:31+00:00","IHNM does not have excuse texts

svn-id: r29145
"
"93a31a7b6b428f92ac9061d05c55c2004bbb5037","2007-09-30 13:37:05+00:00","Removed all the unneeded hard coded strings from the Italian fan translation of IHNM, added the hard coded strings of the Spanish version of IHNM

svn-id: r29146
"
"0175cf13b2cab1404af79f6c1cbed2ae9061c91b","2007-09-30 13:47:09+00:00","Fixed the placement of the save game reminder icon in IHNM

svn-id: r29147
"
"1717ab8ccd371048993ad7f7fed7eb69eb409fc0","2007-09-30 14:24:06+00:00","Some updates to the hard coded strings of the Spanish version of IHNM (thanks jvprat)

svn-id: r29148
"
"44216e2837ced21fd48612280a382b20ea5527a8","2007-09-30 14:31:47+00:00","Terminate the string used to hold the save slot number, or strange things may
happen. (In my case, it was looking for slot 10, 20, 30, ... instead of the
correct 1, 2, 3...)

svn-id: r29149
"
"6cd700f7768e1bd7b2808043a663a8fa971f9af8","2007-09-30 14:32:21+00:00","Of course, that also means that 'slot' should be 3 characters, not 2.

svn-id: r29150
"
"8ced5d58dfa05f8903337297d962ad24ca46cf53","2007-09-30 14:46:49+00:00","Show the cursor when opening the options screen. Also, fixed a regression with some strings in the game interface

svn-id: r29151
"
"151e0cfa050b0ecfa7ff60f3bc1a99cc9ebef401","2007-10-03 21:50:20+00:00","Provide dummy remove() function for DC...

svn-id: r29152
"
"9e8167b10ce21d8286bcdd39a2de30f0da6d3aee","2007-10-03 22:04:36+00:00","* Added removeSavefile()
* New style listSavefiles() using a glob

svn-id: r29153
"
"51f082dcde8c6f1b5036f81ae7b504bcc291bced","2007-10-04 08:04:18+00:00","Patch #1805208: move matchString to Common::Util

svn-id: r29154
"
"439c6e1d5310a40a4525620efb66ebb9ae142f4c","2007-10-04 16:19:42+00:00","Fixed bug #1803287. The inner block was changing the test condition causing unwanted behavior.

svn-id: r29155
"
"abed92e2fac41d3e866d56ba84e213646871187f","2007-10-06 18:53:47+00:00","Removed the MD5 check of sfx.res for the English version of IHNM, since there are two English versions of the game with a different sfx.res file. Closes bug #1800226 - 'IHNM: unsupported version'

svn-id: r29156
"
"9280c25a3617d5a60257f11c3f6864ef4fff99dd","2007-10-06 20:56:17+00:00","Fixed bug #1808620. The original Inventory::addItem routine relied on a trick that went undetected until r29060 actually broke it. Not all regression is bad, after all.

svn-id: r29157
"
"0fab64817fd027a8321e047c1007d0e7e9e135fc","2007-10-06 21:15:53+00:00","Fixed bug #1808615. An unexpected (but harmless) 'ENDCOMMANDS' statement was spotted in the game scripts by the new stricter parser.

svn-id: r29158
"
"aba30d7ea8541f7260ec7b96a8d33dd7dc06ed74","2007-10-07 00:28:38+00:00","Commit of patch #1804861. It implements a static lastPathComponent() function in each backend, used to extract the last path component of a given path, returned by getName().

svn-id: r29159
"
"5ad7870775ef8eb1122e22fa5f12383536e7a01d","2007-10-07 00:35:22+00:00","- little bit more input handling
- implemented item pickup

svn-id: r29160
"
"6351ed53790806bfb685311a1b91376e830e312a","2007-10-07 07:11:09+00:00","Fixed bug #1808529. One must use memmove() when copying overlapping blocks of memory (blush).

svn-id: r29161
"
"fbd356f98e7b7d243a13117999fe4811a5541f0d","2007-10-07 11:02:25+00:00","Changed predefined records to be at the start of the animation list so indexes can be hardcoded, added a dynamic list of Give talk Id responses, and corrected the fight segment data

svn-id: r29162
"
"199e60b9a0e2b355c96cada2b9bf0c0c26c2db04","2007-10-07 11:05:09+00:00","Finally tracked down a bug that sometimes caused word wrapping to fail

svn-id: r29164
"
"d0d454c5dad04ccaec5e42d8999bd72150c0e544","2007-10-07 11:06:48+00:00","Added new string Ids used for inventory display

svn-id: r29165
"
"8ff665c58f0c49fcd3b21b6858f64221095ec2df","2007-10-07 11:07:45+00:00","Replaced incorrect key constants being used for fight commands

svn-id: r29166
"
"09d706481b411ac6298a44b0709e59ee05712650","2007-10-07 11:09:20+00:00","Added loading of new give talk Id list

svn-id: r29167
"
"d817f530e8321f32d76f44e23d51ce84aa568387","2007-10-07 11:11:06+00:00","Changed string constant name to avoid clashing with inventory display constants

svn-id: r29168
"
"8ec0e447c22d18c77b25090c4313b904f167f0ee","2007-10-07 11:12:46+00:00","Added support for setting animations by their index rather than their offset, allowing for easier multi-language support. Also fixed translation of inventory window

svn-id: r29169
"
"205b65ba115581b54e38c1ae8aef10c76fbdab65","2007-10-07 12:35:30+00:00","cleanup

svn-id: r29170
"
"8a73ce38bbc2c205fb67e274d0c3304b460b9a53","2007-10-07 19:18:41+00:00","Added beep sound to Nippon Safes for Amiga.

svn-id: r29171
"
"9cdb195df79141675b17ae5529cb141d437e07ac","2007-10-07 20:42:46+00:00","Fixed a missing return value in the lastPathComponent function. Thanks to Raziel_AOne :)

svn-id: r29172
"
"521f0a298795f79bd3f41f303384bc9093867040","2007-10-07 22:00:43+00:00","fixes after merges, more will come

svn-id: r29173
"
"8db35c8a6227764bf95c2acf28d0fe778537509e","2007-10-08 09:37:57+00:00","fixes after merges

svn-id: r29174
"
"cf3fd283bb9aaa9f1040e7bb76ee25ac0b53fa1b","2007-10-09 04:47:41+00:00","HoF:
- added support for dropping items into scenes
- added const to some static data
- implemented opcode 0x55 o2_setLayerFlag
- fixed a bug in Screen_v2::drawShape

svn-id: r29175
"
"3ecc0bfda75e930c796e934c8c4e8ad59bf56a9a","2007-10-09 05:40:20+00:00","HoF:
- now uses 'FILEDATA.FDT' to detect what PAK files have to be loaded for ingame use

svn-id: r29176
"
"d73ffa3b03ba4f67aed82466951709e970141e8a","2007-10-09 05:42:52+00:00","HoF:
- make sure we really got uppercase filenames in FILEDATA.FDT
- (and silently removed a leftover debug oops)

svn-id: r29177
"
"dd1b43a5a91da0051a32938807d7a7fa157caa2a","2007-10-09 08:44:45+00:00","HoF:
- More input handling (should be rather complete now, not finished but nearlly)
- Implemented the following opcodes:
-> o2_trySceneChange 0x0d
-> o2_setHandItem 0x2a
-> o2_handItemSet 0x2c
-> o2_setCharPalEntry 0x3c
-> o2_drawSceneShape 0x3e
-> o2_update 0x4b
-> o2_fadeScenePal 0x4d
-> o2_enterNewSceneEx 0x50
-> o2_setZanthiaPos 0x56
-> o2_runTemporaryScript 0x6e
-> o2t_defineNewShape 0x00
-> o2t_setCurrentFrame 0x01
-> o2t_setShapeFlag 0x04

svn-id: r29178
"
"99efa084fe26a52fbcf1b9105eef0b39afe21924","2007-10-09 09:03:57+00:00","HoF
- fixed o2_runTemporaryScript
- fixed trySceneChange, now stopping movement should work correctly

svn-id: r29179
"
"ca0161b76ad3f90e0fd340ecdfbeb75bee7db467","2007-10-09 09:15:12+00:00","HoF
- Implemented opcodes
-> o2_switchScene 0x51
-> o2_getShapeFlag1 0x52

svn-id: r29180
"
"004dab11c5ba042f4557a7e23042fb53b5c17a6e","2007-10-09 09:17:07+00:00","Oops forgot to add o2_delay to the opcode list.

svn-id: r29181
"
"598e35bab8b6ea6dc96fa7355f578f0c07acab52","2007-10-10 05:22:29+00:00","Fixed bug in o2_addSpecialExit.

svn-id: r29182
"
"d896894631c8996d2e232ff56e0791ff5564f096","2007-10-10 09:06:15+00:00","- Made some sound functions a bit more generic for use with Kyra1 and Kyra2

HoF:
- Added sound support (sfx sound wrong currently though)
- Implemented opcodes:
-> o2_loadMusicTrack
-> o2_playWanderScoreViaMap
-> o2_playSoundEffect
-> o2t_playSoundEffect

svn-id: r29183
"
"b44531dae6ba35ac7c3c2940d61e1d66d01489fd","2007-10-11 07:44:22+00:00","fixed braces and changed vez() all references to int

svn-id: r29184
"
"dd661390baf9d6ef80de8cded941b3d8606c717b","2007-10-11 18:24:21+00:00","disable spanish version for now

svn-id: r29185
"
"1764f165a72f05cae4690d956c83a75e07fe8b82","2007-10-12 00:58:59+00:00","HoF:
- Subclassed TextDisplayer for use with Kyra2
- Implemented opcodes:
-> o2_zanthiaChat 169
-> o2_customChat 152
-> o2_customChatFinish 153

svn-id: r29187
"
"d1a3af446ab7d3794121e34503dda3716d7510df","2007-10-12 01:26:27+00:00","HoF:
- added some _skipFlag and _quitFlag handling
- extended Screen::fadePal to take an functor for update purposes
- changed KyraEngine_v2::fadeScenePal to use Screen::fadePal with a functor

svn-id: r29188
"
"9c528b6cb9e26419f3ef2d1557554fe1c4e0fcd8","2007-10-12 19:57:43+00:00","Fix typo

svn-id: r29195
"
"85f157e94012aa526c432022e5dd3b0e4764e88e","2007-10-12 19:59:11+00:00","Updated the MSVC8 kyra project file for commit #29187

svn-id: r29196
"
"efcc80dffaf1dcdd4d02cf4417085f9b8a37a4f9","2007-10-12 21:57:56+00:00","Fix warning

svn-id: r29197
"
"da9479dfb80d1849a75ed106564360e6978e48bb","2007-10-13 06:57:47+00:00","- moved some voice functionallity from KyraEngine_v1 to KyraEngine
HoF:
- added voice support
- implemented opcodes
-> o2_setVocHigh 167
-> o2_getVocHigh 168
-> o2_isVoiceEnabled 170
-> o2_isVoicePlaying 171
-> o2_stopVoicePlaying 172
-> o2_getGameLanguage 173

svn-id: r29201
"
"0b1933a51d9f69d563839578b8a8bb03a2bb654c","2007-10-13 12:42:32+00:00","few more fixes

svn-id: r29202
"
"4deb3f1b4fd1b5fc0dd80e7e86273a1d4be0b3e4","2007-10-13 15:40:11+00:00","Fixed a huge number of compile errors, moved over features from 0.10.0 branch.

svn-id: r29203
"
"688f074ea549dc84fe5e477d0ee8ce85b26f1b2c","2007-10-13 15:41:34+00:00","Fixed a load of compile errors, reverted additions to lastPathComponent() which were clearly in error.

svn-id: r29204
"
"5ddb1b00574b22b821c9affed050186fc33cbdea","2007-10-13 15:44:56+00:00","Added extra includes for the DS port now that stdafx.h is no longer included

svn-id: r29205
"
"1e65cdd8964a7c74dfc14f4bf5c8be3f6844c061","2007-10-13 18:15:03+00:00","Cleanup.

svn-id: r29206
"
"3f7b4e62ccb9ee97d75aecc773ff7a125903c4bd","2007-10-13 18:36:19+00:00","Cleanup.

svn-id: r29207
"
"4f93e96d5ff321ad051f0cee9c6083fe85ad1686","2007-10-13 18:47:52+00:00","Implemented the o2_setCharacterAnimFrame opcode and made sure o2_delay does game updates during the delay

svn-id: r29208
"
"7f7b08b42ee8aa99d121ade8b8055d74c76f5fbc","2007-10-13 18:53:02+00:00","Forgot to rename a variable

svn-id: r29209
"
"8d678b8705849b405d0180ad960da24d84f3e9aa","2007-10-13 18:53:49+00:00","HoF:
- implemented opcode
-> o2_setCharacterPos 1

svn-id: r29210
"
"706888358dc3086e8c96f6f8b88b06e969427151","2007-10-13 19:17:58+00:00","HoF:
- implemented opcodes
-> o2_checkForItem 32
-> o2_countItemInInventory 37
-> o2_setMousePos 47
-> o2_countItemInstances 136

svn-id: r29211
"
"16175cf368622102d6ff18e2581618ed8c5c27a5","2007-10-13 21:20:24+00:00","fixed walking bug in execute wrong animation function and fix previous warning cast types

svn-id: r29212
"
"1c52ea0562f9c4d93c3505a57593efc45c9104c1","2007-10-13 21:49:38+00:00","Decoupled password request from actual rendering of the dialogue screen, thus making it possible to fix bug #1765300. This bug was present in the original game, causing garbled text to appear when asking for password (only in the English version).

svn-id: r29213
"
"86b6429e9766d1f9b43734ea89314d9561bc85c7","2007-10-13 21:54:37+00:00","clear ald after release

svn-id: r29214
"
"a08b6606a68eebbb89b6e7adf7c04dafeb968442","2007-10-13 23:48:59+00:00","Add a debug console in Winnie (patch by clone2727)

svn-id: r29215
"
"a84c9504e95894c8df83cd43eec016730f164355","2007-10-13 23:51:08+00:00","Fixing compilation

svn-id: r29216
"
"af3b84c29746a2f38de8d009b8e7149470564726","2007-10-14 16:58:11+00:00","TIM file loading/unloading for HoF

svn-id: r29217
"
"979121ae12997df0b3d282e6421d25fca2638a72","2007-10-14 17:00:44+00:00","A change got lost while resolving a conflict

svn-id: r29218
"
"0e693cbbfb4b115490fb503e9b28eb1248879c8d","2007-10-14 18:44:50+00:00","Fixed a struct size issue

svn-id: r29219
"
"652069f1a639cac69d5c4fd87149f1f068251c38","2007-10-14 20:59:46+00:00","Made location parser more fault-tolerant, in that it prints out a warning message instead of exiting ScummVM when it encounters an unexpected keywords in the scripts.

svn-id: r29220
"
"963e63d985a7ffe9c1ae8907470c764202e947fc","2007-10-14 21:32:43+00:00","Integrated low-level routines into the Script class, turning it into a self-contained parser for location, program and table scripts.

svn-id: r29221
"
"f9b8c8a0d42b03662c9cb7dcada89af1d832239b","2007-10-14 21:35:02+00:00","Turned the 'unexpected keyword' warning into a debug message and added a nifty line number to aid debugging.

svn-id: r29222
"
"913ef56024bd67e81e06129603314cfc40954f05","2007-10-15 09:21:13+00:00","Now correctly disposing of audio data only when it was allocated on the heap, thus fixing bug #1813367.

svn-id: r29223
"
"652866117afe5ad3cc8c3fd06455f97a6cd52ba4","2007-10-15 18:59:32+00:00","Fixed bug #1814061. Special effect routine was overflowing palette size.

svn-id: r29224
"
"db19310ad106db774f752383fea54c8c3af26ebb","2007-10-15 19:00:46+00:00","Cut down screen updates when palette is not animated: should lead to performance increase on systems with low resources

svn-id: r29225
"
"485b70b2b004d2683e31920b8f33053b46fb811d","2007-10-15 20:20:50+00:00","* Changed IFF/8SVX audio to use signed data (int8), and modified Parallaction accordingly.
* Implemented proper beep in Parallaction for Amiga.

svn-id: r29226
"
"6bf925cb6ec7a1cec547cb0eaf4facd52c4a5b0f","2007-10-16 20:03:23+00:00","Make the exists() method take into account default directories. This makes the method more robust, since previously it checked absolute paths only.

svn-id: r29227
"
"ec38b85a4493994271ae1188a15a1f845e6cc09d","2007-10-16 20:24:39+00:00","Committing the set of patches #1814434, thanks to jvprat. They improve the documentation and parameter naming of the lookFile methods inside Common::FS.

svn-id: r29228
"
"281767f19ecfc585162c145c5cb3318a431bc826","2007-10-17 19:45:23+00:00","fix compile after recent fs code rename

svn-id: r29229
"
"ef14311c99ceab8680aae8faa7bcf4fc59cbdf2d","2007-10-19 20:27:10+00:00","Added new debugger command 'localflags' and changed Table object to provide debug info for it.

svn-id: r29230
"
"e45f4c25afb4eed8b1b44fc201dae7833125cb1d","2007-10-19 21:26:05+00:00","Fixed loadgame bug: old game state wasn't fully wiped out before loading, thus creating bogus game states in memory. As a result, most savefiles should be ditched. A savefile is sure to be safe if it was *never* loaded from in-game, but nothing can be said in the opposite case.

svn-id: r29231
"
"359efa4f283ede8e8ade82d5cf5bb7d6034ed1dd","2007-10-19 21:26:35+00:00","Fixed formatting of debug command output.

svn-id: r29232
"
"41d67964b1c267447e769dcc724d841a8154bd9e","2007-10-19 22:16:00+00:00","Committing [ 1816080 ] KYRA: Intro Patch for HoF, from Florian, with some cleanup and a minor fix

svn-id: r29233
"
"dd5be6826a081742c91ce8e9c36bf623b7754300","2007-10-19 23:00:43+00:00","Fixing the Gob3 CD crash on ARM systems/ports

svn-id: r29235
"
"1aab730e6b28ee5f574c0fd91ce02b7d2fad2899","2007-10-20 22:35:23+00:00","Finally got the room layering to work correctly

svn-id: r29236
"
"f1958a2218d1e8f21ec8425c398c531892221309","2007-10-21 05:13:44+00:00","Removed deprecated YNKeyStruct structure

svn-id: r29237
"
"78bc71e6f58da855155d04579db2dd31fbd955a3","2007-10-21 13:09:53+00:00","Cleanup.

svn-id: r29238
"
"c68871860ab58ebb8cdb5f31615a39caa79c1c6f","2007-10-21 13:10:36+00:00","Added new debug level for inventory routines.

svn-id: r29239
"
"03d5111a74c7ab92c07b469ca6945544265fea12","2007-10-21 15:26:07+00:00","Fixed parseLocation, so that it only tries to parse scripts when they aren't already loaded. This fixes bugs like #1816899, caused by the wrong data archive being selected in the Disk object.

svn-id: r29240
"
"aa01449f297dd4c49bd5b852bf27142f28b826ac","2007-10-21 15:41:21+00:00","Relaxed freeZones policy for deciding which zones to preserve across location switches. Special zones are now never deleted even if strictly not needed. This will fix some occasional crashes related to inventory management.

svn-id: r29241
"
"14160083e8b418375198552f3d8954696cb4c46a","2007-10-21 19:27:15+00:00","Now stopping music when loading a game in Amiga versions of Nippon Safes.

svn-id: r29242
"
"ee43757e8642cb81e891b6dd51a41204d00483bb","2007-10-21 19:49:01+00:00","Fix warning

svn-id: r29243
"
"00f349a52f5cda80dbff9fedd8082f3a45d7a577","2007-10-21 20:28:50+00:00","Patch #1817080: Scumm savegame thumbnail loading patch

svn-id: r29244
"
"80045e966189a2899c2feb1d86ff7ed6f62277a3","2007-10-21 21:38:23+00:00","Fixes timers in Kyra1. (Initialized them twice oops...)

svn-id: r29245
"
"a152ded458cc0be64326a6d93bdbce8c893415ff","2007-10-22 16:03:42+00:00","When skipping a video from the introduction of IHNM, the screen fades out before skipping, like in the original

svn-id: r29246
"
"cc76fbee56917238f5e4f69d1df55e7a2f324762","2007-10-22 20:41:58+00:00","Added a workaround for a script bug in IHNM, which occurs in the original as well. An invisible note will no longer be created in the top left corner of the screen, when the note in the first screen of Gorrister's chapter is read

svn-id: r29247
"
"380e8fe99bd90ed268dc6b852aa103bd8b6ed5a9","2007-10-22 20:53:10+00:00","Fixed SFX in intro of FM-Towns/PC98 versions of Kyrandia 1 (Thanks to Florian Kagerer for the patch).

svn-id: r29248
"
"ff92f77607919716bd029a1e7bfb83fb01137825","2007-10-24 09:39:32+00:00","Added missing tickmarks from Slow/Fast text speed menu items

svn-id: r29249
"
"6faff895c31ec9ac3b2878bd46a826b39fc20b52","2007-10-24 10:01:55+00:00","Changed text speed flag, and added saving of it to savegames

svn-id: r29250
"
"5635256f308c8687ceea0e8f6280e4e575c90fed","2007-10-24 10:03:11+00:00","Implemented gradual display of text in talk dialogs

svn-id: r29251
"
"9a1b13e9653dcafaaa9cc33cb4d4e4639364de25","2007-10-24 10:04:24+00:00","Changed startSpeakingToNoone to pause the speaking character

svn-id: r29252
"
"a0fce0c5a174c76891e4128fef43bdb794c16fb3","2007-10-24 10:07:38+00:00","Fixed MinGW compilation warning

svn-id: r29253
"
"547716a0dfd671461a5df85535be40f650c3aa17","2007-10-24 10:09:06+00:00","Added a talkerId field to hotspots to better handle characters being talked to

svn-id: r29254
"
"c9d06136bc8ca7d6f80f0db49cf3743de7b7a422","2007-10-24 10:16:19+00:00","Removed unused field

svn-id: r29255
"
"c0f285693c72a4e1fbfb75720ee5ff76e4db15a1","2007-10-25 10:37:23+00:00","Added saving of NPC direction, and bugfix for closing talk dialogs

svn-id: r29256
"
"864ed910fa3cf56abb3ec3907d4bac226cc03490","2007-10-25 10:39:19+00:00","Bugfix to make sound toggle work correctly, and added flag state to savegames

svn-id: r29257
"
"a48d2d3ff348681806d935af1c7859f9c71df802","2007-10-25 10:40:26+00:00","Talk dialogs can now only be closed early if it's the player talking, or an NPC is talking directly to the player

svn-id: r29258
"
"c22e823f97a7add04219b899ab92ca814112adfa","2007-10-26 12:39:50+00:00","svn-id: r29259
"
"1e32d188f91de248fd3ac9d8e9521eec71430925","2007-10-26 13:11:01+00:00","Updated credits file (hint: use 'make credits' in a full checkout of ScummVM)

svn-id: r29260
"
"22c4aa0602afd9ea792773770fd919aeea0112ce","2007-10-26 20:35:06+00:00","Parallaction will now consume all the short-lived jobs in the queue before a location switch. These jobs only live for 1 or 2 engine loops, and can refer to items in the location being dropped. This situation used to lead to segfaults like the one reported in report #1762797 (that should be now fixed).

svn-id: r29263
"
"b225f01d14f87f8bb2f10209fdc82811a9c2ea96","2007-10-27 11:42:17+00:00","Added a workaround for an incorrect hitzone in IHNM,  (Gorrister's chapter). Now, the graffiti to the left in the toilet screen can be examined correctly. Also, performed some clean-up

svn-id: r29264
"
"102764da6e86e261bce755c10b5289c2c9c5343a","2007-10-27 16:10:50+00:00","Add fast forward mode

svn-id: r29265
"
"01e88f1fbf1f456d74990cd0a0b8950c056c06f4","2007-10-27 17:55:50+00:00","The options panel in IHNM is now shown and functioning correctly when it's opened during a character's speech

svn-id: r29266
"
"cc9b0844b922aa62ba6086f3829a28a7de1a130b","2007-10-27 18:15:38+00:00","Hooked inputs
Cleanup & fix in input management code

svn-id: r29267
"
"e76bf9c29314ec376b18a5c3b4b9f3349c577672","2007-10-27 18:23:13+00:00","Muting GCC warnings

svn-id: r29268
"
"9998620379bbf681afd85ae9732594d6cee4daa0","2007-10-27 18:51:37+00:00","Added support for more ROM versions, see FR #1820331

svn-id: r29269
"
"9d14d74e8d763806afc7019ab5cdda4eab113a44","2007-10-27 21:29:38+00:00","Temporarily force quits when user presses exit key combination. A TODO comment has been added to places where behavior should be changed to allow the engine to exit gracefully.

svn-id: r29270
"
"5f1ef918209682bb7affb9f0c288b56163d3bc5f","2007-10-28 03:32:13+00:00","Added storing of playing sounds to savegame (note: only sounds flagged as restorable are restarted after loading a savegame)

svn-id: r29271
"
"641ff5e9b744922f2631689df19a62d9fad5af08","2007-10-28 03:34:10+00:00","Sound is now paused when displaying menu dialogs

svn-id: r29272
"
"59f2a90a6fac7b30441770e498dc2dbd818021d0","2007-10-28 04:12:01+00:00","Cleanup of the engine detection code. Possibly fixes bug #1804403 - 'IHNM/ITE: Error loading Game resources (fs-node regression)'

svn-id: r29273
"
"fc8568509932b5903b5367c066a07603d3d438ea","2007-10-28 04:14:52+00:00","Cleanup

svn-id: r29274
"
"7e4ebb9d8ec1336c548e282d4493264b4e2ae77c","2007-10-28 04:16:48+00:00","Cleanup

svn-id: r29275
"
"3dd40b390cdb68c62e875e8abbe2e138984bfeb0","2007-10-28 04:23:51+00:00","Fixed typo

svn-id: r29276
"
"cb302b244b303a378528c8b24bbfe5f349062541","2007-10-28 04:27:18+00:00","Room fades now correctly fade out any active talk dialog

svn-id: r29277
"
"e4125a0368e78f7918c6bdee91686965fe96207f","2007-10-28 04:28:27+00:00","Current room is now correctly refreshed after showing credits

svn-id: r29278
"
"00e9ed51d9e39ad9c07e3dcd53053bc9a6c5a22e","2007-10-28 04:42:22+00:00","The palette of the boss screen (F9 key) in IHNM is set correctly now

svn-id: r29279
"
"ddb39090bc9c7a046805fc8f92ec127a42d6d022","2007-10-28 11:27:00+00:00","Implement FR #1775044: 'set extrapath from commandline'

svn-id: r29280
"
"48f7c47013697000ff514a7ee38a6a7039170b77","2007-10-28 11:34:54+00:00","Oops. Sync with --help output.

svn-id: r29281
"
"4073e7f8f8b3a9af6e302c062362c5004ba8bcba","2007-10-28 12:02:09+00:00","Proper implementation of '.enabled' theme widget property.

svn-id: r29282
"
"61c96353cf0cc5b418ad64af2c607309221409d4","2007-10-28 12:04:38+00:00","Patch v5.2 from #1752243: 'backends lib patches'

svn-id: r29283
"
"3f958711a28eaa843642c06c3e5e94cdfffd024a","2007-10-28 12:57:25+00:00","Refactored ScummEngine*::checkExecVerbs method

svn-id: r29284
"
"c664dbcca81291443a46a4a0cefbfa2fdc714866","2007-10-28 13:14:23+00:00","Patch #1821100: make cross-compiling sane out of the box; blackfin support

svn-id: r29285
"
"7860b90051bfb034874d5b5a3d574d718f89bc03","2007-10-28 13:21:01+00:00","Implement cursors

svn-id: r29286
"
"fefc228cd27096889fad1839f978f35d50ab3b45","2007-10-28 13:34:57+00:00","Cleanup.

svn-id: r29287
"
"4556690cc0d6cc4beb57ba7e323bfe6665ad6950","2007-10-28 13:37:06+00:00","Implement cursor by object
Fix walk cursor

svn-id: r29288
"
"4630f49f485f9b9f4f6b38d29d48b97b4b167e48","2007-10-28 13:55:16+00:00","Patch #1800085: small 'unknown control change byte 32' patch

svn-id: r29289
"
"30b11df046134935133e788fffe6180c9600d199","2007-10-28 13:57:43+00:00","Fix warning & code formatting

svn-id: r29290
"
"fc961908c59790840008049a1d97e675376312f9","2007-10-28 14:41:37+00:00","Find object fix
Walk fix

svn-id: r29291
"
"3b005ab88fd974e453a752b3ece26e2b9538bede","2007-10-28 16:10:05+00:00","Fix potential MSVC warning

svn-id: r29292
"
"ef23e9b0af9422bf90d36b41cec8beda1e9f118c","2007-10-28 16:29:31+00:00","Patch #1814831: 'Unify the way to report unknown versions of games'

svn-id: r29293
"
"31e0ca4ea07ec02631286a25894d98a774b0b55b","2007-10-28 16:57:49+00:00","Print list of skipped engines too.

svn-id: r29294
"
"f4f897393cd546131ba17929034353580c55a05a","2007-10-28 17:07:39+00:00","Fix compatibility with bash

svn-id: r29295
"
"0d2d2339fb668b98095b13274395eb1281ac6fae","2007-10-28 17:40:04+00:00","Early implementation of object menu

svn-id: r29296
"
"31b77a48eee84d0943d31d806b51f2ed868ae9b9","2007-10-28 17:45:34+00:00","some source formatting fixes

svn-id: r29297
"
"b93f68405b3c2b3c0aa20d265749d070045d387f","2007-10-28 17:50:08+00:00","work around ce's lack of posix errno

svn-id: r29298
"
"10462134804bae828d98b79872bbe4648fdff3ed","2007-10-28 17:53:52+00:00","unicod-ify syscalls for ce backend

svn-id: r29299
"
"371cc6dedaae10a528db2f74434518211929006a","2007-10-28 17:59:14+00:00","make sure our GetCurrentDirectory is used (non existant in ce api)

svn-id: r29300
"
"5a77a2624f34a198acbd2dff19d27ad2502c66b7","2007-10-28 18:04:32+00:00","drop unneeded define

svn-id: r29301
"
"bb8ad040a5fa9d6cfbef10de2bdfa00c51dfe446","2007-10-28 18:09:34+00:00","formatting fixes

svn-id: r29302
"
"b93cf70d4fd7c67ce4ae0afe1229f06d338c1d1e","2007-10-28 18:36:04+00:00","Rollup commit to improve & bring the port up to speed. More specificallyi for this file:
- adding support for plugins
- fixing regressions and changes related to the framebuffer api
- improved and fixed dirty rects
- fixed Fingolfin's name in a comment :-P

svn-id: r29303
"
"e4feebe3f736a39ea40967504e44a4fb9aaaf74a","2007-10-28 18:38:27+00:00","announce compiler change \& support for plugins

svn-id: r29304
"
"507b60f5b42b34aeca25e7171b37c79f331110de","2007-10-28 18:40:03+00:00","entry point for plugin builds

svn-id: r29305
"
"887ce76a1e9ad897b6c262255c301a2382b03dd4","2007-10-28 18:46:48+00:00","fix formatting & typo

svn-id: r29306
"
"0e026d2b995eadd6c13c92eeb6b6b033eab01ffe","2007-10-28 18:48:07+00:00","cleanup after framebuffer api changes

svn-id: r29307
"
"065145ef2dd9ce1820332ab465480ffea8cc580e","2007-10-28 18:51:05+00:00","new stuff to support the FS api and fixes for the new compiler

svn-id: r29308
"
"0c532c28f6e86e1d7d8eb479da1e9b90f3983bb2","2007-10-28 19:02:03+00:00","(mainly) adding plugin support

svn-id: r29309
"
"1fcbeda5fe8e7cda4397f27917aa5b5feb75f09a","2007-10-28 19:14:12+00:00","various assorted things required by the new compiler and codebase changes

svn-id: r29310
"
"234024f19ed075522fcdd7e9754e86350f0ec294","2007-10-29 20:56:19+00:00","Add more object menu controls

svn-id: r29312
"
"2e1ffb91f58215930f2e17c2f572a80bec8c194b","2007-10-29 21:04:41+00:00","Add missing vars

svn-id: r29313
"
"6e4cf615a36a83e609cf4d8b6de758c9eb853b52","2007-10-29 21:06:58+00:00","Commenting out the unused variables x and y to mute GCC :P

svn-id: r29314
"
"41481df20c82af69062bb4356eb7c93f5f1f5342","2007-10-29 21:40:38+00:00","More readable code, and another format of engine build list as suggeested
by Fingolfin

svn-id: r29315
"
"1bf448ac372174ceb162586cf33adc9d8fdd9c5c","2007-10-29 21:41:50+00:00","Add DMedia MIDI driver just to the list of MIDI drivers if on IRIX, since at least the code for it is just build on IRIX and not on every UNIX system.

svn-id: r29316
"
"caa451f5d2b471fc207739815638056f86fc8dce","2007-10-29 22:03:55+00:00","Implement more object input

svn-id: r29317
"
"6c6e8657b68ebc075871031ee8c662f349c4ab77","2007-10-29 23:35:50+00:00","added 'igor' engine for the game 'Igor: Objective Uikokahonia'

svn-id: r29318
"
"7c227055a465f54dd2d562833a1d244a5c113ace","2007-10-29 23:55:13+00:00","Fix compile warning, looks like this memcpy should be a memset.

svn-id: r29319
"
"dfa90a7973a75a196f52a7014ece767c3bbd5031","2007-10-29 23:58:14+00:00","Add msvc8 project file for igor.

svn-id: r29320
"
"dfa0d4ca64d6afadc0bc49b3fdffed975c9c5e21","2007-10-30 00:09:16+00:00","Fix compile warning.

svn-id: r29321
"
"22cdf4f85cbf96ca7ec0275075d34a4de12686db","2007-10-30 06:00:23+00:00","Patch #1822459: 'configure fix for shells not supporting unary negation'

svn-id: r29322
"
"1f80f1f47e0f9c97e506ff9f72479aa548387965","2007-10-30 10:47:24+00:00","Fixing the scenery/overlay redrawing in Woodruff

svn-id: r29324
"
"ea644a036b1db25436ae088d8e83352d30b9ade7","2007-10-30 17:21:38+00:00","Renamed a variable which is declared twice

svn-id: r29325
"
"ecbd31160e99cf7ee5e49fd2eddf510dd57f94e6","2007-10-30 19:41:55+00:00","Fix for bug #1822680.

svn-id: r29326
"
"5b9e6a47fc9b7e4e75db3675092363cbb5a1f6d5","2007-10-30 21:31:39+00:00","Implement the AmigaOSFilesystemNode::exists() method.

svn-id: r29327
"
"bc0c8afc399d1ffdefe6ee7c73ce776b5dacf7be","2007-10-30 21:35:26+00:00","Added a missing variable to the AmigaOSFilesystem::exists() method. Hopefully it's complete now :)

svn-id: r29328
"
"0f741540d08f7d73e05e6ae25c0ea4a07fd9e768","2007-10-30 21:37:00+00:00","Fixed a typo in the AmigaOSFilesystemNode::exists() method.

svn-id: r29329
"
"e7e0532e1b31b5b125265fae8e39e0e9e8698b36","2007-10-30 21:57:41+00:00","- free fib object in AmigaOSFilesystemNode::exists
- cleanup

svn-id: r29330
"
"bb0bbdef57265d3bbf729399f80cd00759cd82d1","2007-10-30 22:20:02+00:00","The cause for bug #1804403 - 'IHNM/ITE: Error loading Game resources (fs-node regression)' was fixed with commits #29327, #29328, #29329. Removed unneeded Amiga-specific code, which should finally fix this bug

svn-id: r29331
"
"2a1c68b8a683333616a6373b01adb71b17aab8eb","2007-10-30 22:35:10+00:00","- added detection of second demo version
- moved the resource entries tables to an external file (IGOR.TBL)
- added tool to build IGOR.TBL

svn-id: r29332
"
"bdacda3d7090f6bdaaf0c256d283b2b8572c2bb8","2007-10-30 22:57:26+00:00","Adding special amigaos to host_os check. This makes ScummVM use scummvm.ini instead of .scummvmrc on AmigaOS again.

svn-id: r29333
"
"53ee37ada5b7e3b833ae806c619bdb026cafcd12","2007-10-30 23:08:18+00:00","Update msvc8 project files for r29332.

svn-id: r29334
"
"ff55553c728d4f42c2a84ce74a1c25e7a8acb06d","2007-10-31 03:14:12+00:00","Fix for bug #1745950 (GR: Birds stuck in opening screen (Amiga version)).

svn-id: r29335
"
"b4f23c84f577d844a6ee45a22483b78469e6b56c","2007-10-31 08:56:32+00:00","Added a FIXME-comment and a warning to the unknown test command 19.

svn-id: r29336
"
"2ac075e5692f45b2ca3a3ceac98e3bba290a45a0","2007-10-31 13:59:59+00:00","Removed the Common::File::removeFile() methods, and moved their implementation to the Common::DefaultSaveFileManager::removeSavefile() method, as per Marcus' appraisal and Max's approval.

svn-id: r29337
"
"b5653141fa3c0aa7692d3e299f89a17b93f4e1ee","2007-10-31 17:43:40+00:00","Properly implemented the isReadable() and isWritable() methods for the AmigaOSFilesystemNode backend.
Thanks a lot to Raziel_One on this one :)

svn-id: r29339
"
"94499005cf29dd29d6a6e3c5fb4d9761f414b361","2007-10-31 18:51:11+00:00","Fixed compilation under Windows

svn-id: r29340
"
"dc29c25b715a8bde4eb0e0a19529f656c5b5123e","2007-10-31 19:09:23+00:00","Fixed a long due typo in the error messages inside the DefaultSaveFileManager.

svn-id: r29341
"
"6afbcc89a7cd5df7e4dc15448efbc2d2fbabc74b","2007-10-31 19:37:34+00:00","Factorize most of the common code in the isReadable() and isWritable() methods for the AmigaOS backend, via the getFibProtection() method.

svn-id: r29342
"
"f96f934215bb16c0352cce199c8b6cce690fdc7b","2007-10-31 19:38:09+00:00","Patch #1822349: 'Refactor engines handling in configure script'

svn-id: r29343
"
"47a2c28b6ed314a8099f1b9eabf63fd4c3fcafea","2007-10-31 20:02:38+00:00","- minor changes to detection code
- reverted gameState.counter type to int16
- cleanup/removed deadcode

svn-id: r29344
"
"5add473048289ed235d69825cfc44a84a24118af","2007-10-31 20:26:57+00:00","Fix for bug #1800147 - 'ITE: Scummvm exits with Audio warnings'

svn-id: r29345
"
"39da7deefb0b55412d871165c563d0a11dcfe61f","2007-10-31 21:28:33+00:00","Fix for bug #1751483 - 'AGI: The -x command-line option appears to be broken'

svn-id: r29346
"
"3318c4b47487674aaf19bec9f9db9ac36e1cae96","2007-10-31 21:37:40+00:00","Slighly modified patch #1709219: 'DXA Player: double size scaling option'

svn-id: r29347
"
"34a9e5bc046bbd7316b34ec167ca143cccd51236","2007-10-31 22:44:08+00:00","Indentation.

svn-id: r29348
"
"87e2f43273f53b5956c5b850271baab4dbe2efbc","2007-11-01 00:33:12+00:00","It's now possible to exit the screens with Gorrister's heart in IHNM normally (i.e by walking to the exit, not using it) - like the original

svn-id: r29349
"
"5b134184c541b21acf7de56446a01325ab361447","2007-11-01 02:10:55+00:00","Fix play back of OmniTV videos in The Feeble Files for now.

svn-id: r29350
"
"9aa0a47846774fe24b413e3156fdb7df22f07bdf","2007-11-01 06:00:16+00:00","Revert patch #1709219 - DXA Player: double size scaling option.

svn-id: r29351
"
"4521634286268f45087c6d0cdaa09cafeda88b4e","2007-11-01 11:22:11+00:00","Small cleanups

svn-id: r29352
"
"512e57c69017578e9cbf2d623467933d93cf4aaf","2007-11-01 13:47:18+00:00","Added new LocationName class to simplify handling of location switches.

svn-id: r29353
"
"288f47e0341bd80302ef5585f6ef0da67d2738f5","2007-11-01 14:08:55+00:00","* Merged object Menu into Parallaction_ns.
* Some preliminary refactoring of ex-menu code.

svn-id: r29354
"
"7c8bf86a45ec09275484813803df5370d7867d20","2007-11-01 14:47:33+00:00","More refactoring for gui code.

svn-id: r29355
"
"c7f315b32c27f3956707e21e66dde9c7b12b7e23","2007-11-01 15:15:43+00:00","Fix regression introduced in revision 29355. First loadgame performed was destroying the game flags.

svn-id: r29356
"
"06f38474a587104f8aac0a3f0c55a19c05b03005","2007-11-01 15:58:33+00:00","Consolidated game data cleanup in a single routine to location switches more reliable, especially on savegames and on game start.

svn-id: r29357
"
"f8e9ee1e2b603fe41d1b15d351b077d1b71e972e","2007-11-01 16:40:46+00:00","Updated the MSVC8 parallaction project file for commit #29354

svn-id: r29358
"
"a20ad01075a4387bc9731859db1a74f90a144d0d","2007-11-01 17:02:28+00:00","Add Greek to the list of ScummVM supported languages, for FR #1723255 - 'FOTAQ code modifications (mostly for greek translation)'

svn-id: r29359
"
"60c6720441ae107b93a92e1e691f0a31a95e40c3","2007-11-01 17:06:03+00:00","Some changes to FOTAQ for the work in progress Greek translation in FR #1723255 - 'FOTAQ code modifications (mostly for greek translation)':
- Added Greek font to FOTAQ
- When the verb is 'Go to' in the Greek version, there won't be a space after the verb and the item (as per the translator's request)
- The strings in the journal are not cut off in the Greek version

svn-id: r29360
"
"555336cebeffb7a3796c08880ed037d2d86ee968","2007-11-01 17:39:58+00:00","Fix for bug #1822819. Donna now changes her look into Suzy after makeup.

svn-id: r29361
"
"93ebcffcacb5adabfa4813e1c8aa1383febab54d","2007-11-01 17:40:25+00:00","Added new debug command.

svn-id: r29362
"
"e6e144d494a7f85a62dcc79ad96ddebc5aa34789","2007-11-01 18:15:25+00:00","use mod operator directly

svn-id: r29363
"
"d9d15f9e7ec845dfbf21d2dff191dfe4d19b6726","2007-11-01 18:16:02+00:00","added bootparam handling, minor cleanup

svn-id: r29364
"
"bd3767068db440322b9846dfb47102233ae80efc","2007-11-01 18:16:52+00:00","dont call trim(), which relies on isspace(), with specific game charset strings

svn-id: r29365
"
"f1f08ce0086d27fb6e1435f1432ae4d1dcba0388","2007-11-01 18:21:15+00:00","warning, minor simplification

svn-id: r29366
"
"36a372ecd1a8c04399cb4ba996ac0bfbb0f907aa","2007-11-01 18:42:22+00:00","fix previous commit

svn-id: r29367
"
"ad64b3728adf0fc764398312a8f232b650db7953","2007-11-01 20:11:54+00:00","Fixed compilation

svn-id: r29368
"
"25e4547434285b5c1411b2874113d21a696fbbe9","2007-11-01 21:03:16+00:00","Patch #1824292: 'fix spaces->tabs indentation in configure'

svn-id: r29369
"
"793553c1b443921e7a5272fff60971d017024b60","2007-11-01 21:23:48+00:00","Made debug console available when displaying slides (like intermissions and menu).

svn-id: r29370
"
"10c0f9de8667844ff25d24d7a1c813346c0b5991","2007-11-01 21:24:43+00:00","Refactored some gui code.

svn-id: r29371
"
"1ea0b305a533b1ad8cbab9489f1ae1b6247b860b","2007-11-01 21:56:14+00:00","Added color-inversion effect in character selection screen. The effect doesn't exactly work like the original yet (Amiga only).

svn-id: r29372
"
"ca1b941d02b0bf331dbb535196a305fa9d497f37","2007-11-01 23:31:28+00:00","Donna now returns to her normal outfit after swimming.

svn-id: r29373
"
"610d9a2ce7831fd18e1917fd2131a14f31cfe1b2","2007-11-02 08:34:56+00:00","Fixed overflow after fadeout in the last game location (bug #1824026).

svn-id: r29374
"
"41a8cb934ce11f22a28af5869dd5861dec37ce93","2007-11-02 13:00:21+00:00","Removed now obsolete workarounds

svn-id: r29375
"
"231a7875bdae36a9e17ae8a51b870e37244fa02e","2007-11-02 15:59:09+00:00","Added create_igortbl to 'tools' make target

svn-id: r29376
"
"8eb73f269492e5123e86236f5398a14e6aa991b5","2007-11-02 16:01:52+00:00","Patch #1815526: Add TiMidity++ MIDI server support

svn-id: r29377
"
"02b929e06e082c116f22aea9a502364ec6a6d3cf","2007-11-02 16:10:53+00:00","Patch #1816901: MT-32 emu: Low volume

svn-id: r29378
"
"ceffb6d2beaa7ff2361f9c691093e44d32548b94","2007-11-02 16:55:09+00:00","Changed 'if( ... )' to 'if ( ... )' and 'while( ... )' to 'while ( ... )', and
removed an unnecessary \n.

svn-id: r29379
"
"c1472d97acb315c3e2e3e34083087f67d9df3a48","2007-11-02 21:56:32+00:00","Format fix.

svn-id: r29380
"
"01de17b063926071ea05886e950279da4d9fbdb7","2007-11-03 11:27:34+00:00","Whitespace fixes

svn-id: r29382
"
"3e3cfca83e7f11425349a61567dc0e672726cafe","2007-11-03 12:30:02+00:00","Early polygon rewrite

svn-id: r29383
"
"7cce6c8c430135efb516fcd73355a810bc7c33d3","2007-11-03 13:23:36+00:00","More whitespace fixes

svn-id: r29384
"
"c06905149286c3fbd803d3ca7522bbe66a6ad129","2007-11-03 13:46:45+00:00","Unleashing the polygon virus! (I.e. fixing a compiler warning and a, what I think is a, logical error. Also changing swaps to use the template SWAP.)

svn-id: r29385
"
"c640d1c604f219a5be5412d6c5ea8a85f44ec4b4","2007-11-03 21:06:58+00:00","Patch #1825276: 'DETECTION: advanced detector engine simplification'

svn-id: r29386
"
"b6165d32806c6f8ec0acaf7fa4cdb4c2089bca8a","2007-11-03 21:17:40+00:00","work around lack of errno in ce

svn-id: r29387
"
"b3f331668f1c5f90ffdfc5e4fe9b07d2a5e063e9","2007-11-03 21:18:49+00:00","update for the new igor engine

svn-id: r29388
"
"2e6b14539a9e5674fbb91002b619aecbf2e664c8","2007-11-03 21:25:37+00:00","Cleanup.

svn-id: r29389
"
"121fc7d5691a3409f7501e3e8e2ae6ecff7abf94","2007-11-03 22:44:27+00:00","More polygon fix

svn-id: r29390
"
"3620b19b214796ff7fce11bf54fca9db8ee673cb","2007-11-03 22:47:19+00:00","Fix build

svn-id: r29391
"
"287e79d47740c1fa8d232e0c5e3586a995683915","2007-11-03 23:32:15+00:00","Documenting the sound code a bit.

svn-id: r29392
"
"3fa3afb1fb9b1dca656d79e9568f31df54670027","2007-11-03 23:59:54+00:00","More polygon fix (nearly pixel perfect...)

svn-id: r29393
"
"75a5c41ab4570538a4ccf74fabef637ace12682b","2007-11-04 00:30:53+00:00","- starting to document the theme renderer
- Theme::closeDialog -> Theme::closeAllDialogs, since it would remove every dialog currently

svn-id: r29394
"
"dcc71a36eb444723d8c645db32ea068b3e706f53","2007-11-04 00:31:52+00:00","Click on polygon detection
Object menu fix for doors

svn-id: r29395
"
"034eb920d2e3c869ed16a011886ec1e69d50001c","2007-11-04 01:07:47+00:00","- cleanup
- consistency fix in modern.ini
- increased THEME_VERSION

svn-id: r29396
"
"6e4037165d49ed4ba1a6e76656eab2d03851eeda","2007-11-04 01:11:39+00:00","Fix a few script issues

svn-id: r29397
"
"5fb95212feaa7a5af5810fb2c46b59d5a7ab25de","2007-11-04 01:49:42+00:00","Typos :P

svn-id: r29398
"
"52b18c9ae6e95f96587dfb480cdce9f9d291b3ac","2007-11-04 03:02:32+00:00","simplification, increased game state filenames

svn-id: r29399
"
"74bb325a7ea5b19e6048466c9071a44d3a7cbb63","2007-11-04 03:04:37+00:00","switched igor detection code to AdvancedDetector

svn-id: r29400
"
"9f84af06d62715d07bffa05967205d01d5a3239e","2007-11-04 03:07:03+00:00","added saveload code, fixed calls to debugC

svn-id: r29401
"
"7cf5a578275f97f490c85e25409562718e23482f","2007-11-04 03:16:56+00:00","fix buffer overflow (globalVars is int16 -> index/=2)

svn-id: r29402
"
"0ec41a2d8022f5af042bffec7513e8f2d5e36a1b","2007-11-04 03:38:30+00:00","- made Widget::_flags private
- reworked state (enabled/disabled/highlighted) handling of widgets
- cleanup in ModernTheme.cpp

svn-id: r29403
"
"f3850bc33265696fa49d9e344e5e21ecedac5790","2007-11-04 06:55:45+00:00","Patch #1825378: 'More work for engines on configure'

svn-id: r29404
"
"b8cd6451a55163f50df28abfd6d1be73e3a22f0e","2007-11-04 06:57:32+00:00","Patch #1825403: 'More MSVC7.1 (.NET 2003) project file updates'

svn-id: r29405
"
"06d537ab1d2d24ff5bf5a4ba1f287351958223de","2007-11-04 09:10:53+00:00","Updated the MSVC8 igor project file for commit #29401

svn-id: r29406
"
"684db15b34ad1fcbdf95106145751da4dbbbea9f","2007-11-04 10:45:10+00:00","* Pushed specific code from base class down to Nippon Safes.
* Some refactoring of the main loop.

svn-id: r29407
"
"fa15952f09129b0bfcbc2d1ba45f5a4094c4d86c","2007-11-04 12:57:57+00:00","Some more script functions

svn-id: r29408
"
"906a423fa7767c5100a1269cc90231840eb5e728","2007-11-04 13:01:41+00:00","Some code formating fixes

svn-id: r29409
"
"64f88225e124a8841bc03356d2117120b87d7de4","2007-11-04 13:03:40+00:00","Muting the compiler

svn-id: r29410
"
"5ab148c0433b7a09ce2b949f16c27e8ec9074ad2","2007-11-04 16:47:42+00:00","Added igor project for MSVC7.1, as provided by _Q.

svn-id: r29411
"
"904dcb4a7b96c2541841f894aa52d99d48e1358d","2007-11-04 17:00:10+00:00","Minor tweak to Wince makefile; 'all' target now depends on whether we are
building with plugins or not. These means that weak minded programmers (like
me) no longer need to remember to do 'make dist-plugins' instead of
'make dist'.

svn-id: r29412
"
"c1760e2aae3c9c791496cceaacb6f92abca04617","2007-11-04 18:03:18+00:00","Mark the end of the Cine namespace.

svn-id: r29413
"
"6f4e622e1872ddf78ede6ab36b4697eada171fb0","2007-11-04 19:13:00+00:00","New 'deploy' targets for the WinCE makefile to automatically copy
built files across to a target device attached with ActiveSync. Hopefully
will avoid hours of comedy when trying to debug mismatching plugins/exes.

svn-id: r29414
"
"975dbcd23176dfd5850975aa9670e169adcf3b9a","2007-11-04 20:30:42+00:00","Dumb typo in earlier commit.

svn-id: r29415
"
"eb42e8271e047c14dcee6b1389b530baec151d95","2007-11-05 08:23:57+00:00","Committing '[ 1824376 ] KYRA: more sequence player code' from Florian, with a couple of warnings fixed

svn-id: r29417
"
"ea7429018ec80f45c9f6100b4a8b799fcd872ae6","2007-11-05 16:33:40+00:00","Fix warning

svn-id: r29418
"
"bc391e48f02124789e6f7aaf8a917420bacd902d","2007-11-05 17:10:32+00:00","Updated the check for the language byte of the JAS Version String to be 'g' for the Greek fan translation and 'R' for the Russian fan translation (according to the Queen engine page in the ScummVM wiki)

svn-id: r29419
"
"70aa7d3f742d0a0803593ef488b51044e5a59a79","2007-11-05 17:11:47+00:00","Don't show a space after the 'give' command in the Greek fan translated version of FOTAQ

svn-id: r29420
"
"f7c6189c1ee2e9c19ce879b1a6d357b370190c39","2007-11-05 17:17:35+00:00","Sort the language ID bytes of the JAS Version String alphabetically, like they are in the queen page of the ScummVM wiki

svn-id: r29421
"
"e2260d8afdbd28a74436c4f2001791f8fc816c3f","2007-11-05 20:24:20+00:00","Implement polygon and sprite masking

svn-id: r29422
"
"773d0dc3c6b42909273432f12bb8d9d367314c5f","2007-11-05 20:51:23+00:00","Fix some 256color version issues

svn-id: r29423
"
"20b3ee2057daeb076f57545d2e5b99a7bbc1d257","2007-11-05 20:53:30+00:00","made CmdText a virtual class, so that language tweaks can be handled in subclasses.

svn-id: r29424
"
"780cb2f2743f4c9b188cadafc527469cf064137a","2007-11-05 21:06:10+00:00","Muting the compiler :P

svn-id: r29425
"
"37aaee3593806ac45bd5965ce772dcf29c3e1175","2007-11-05 21:07:36+00:00","WinCE Makefile: make deploy was copying plugins to the wrong directory.

svn-id: r29426
"
"83802f795b042113ea564f7f6ff964b7d030f3e5","2007-11-05 23:40:30+00:00","Several subtitles-related IHNM fixes. Still not perfect.

svn-id: r29427
"
"3598192859797d8b7cc33a22af21f04bd45af01a","2007-11-06 10:52:47+00:00","Patch #1825132: SAVEFILEMAN: renameSavefile implementation

svn-id: r29433
"
"443dff5285f0654be4a6f843b8262bd07bb95036","2007-11-06 12:22:52+00:00","Add support for original load/save system in HE games.

svn-id: r29434
"
"b820b661c7b691cfcb86408954cde6f71da5654e","2007-11-06 17:23:33+00:00","Patch #1826459: Make: reconfigure on configure change (saving environment)

svn-id: r29435
"
"9038ee91154c1a9377e596c1c0a44ccbc111e7a1","2007-11-06 20:49:50+00:00","Fixed regression: loading from the start screens was messing up game flags.

svn-id: r29439
"
"377ed4b1b4fc4817eb23c0ae31768b37ca3455d2","2007-11-06 22:34:55+00:00","Removed unnecessary extern.

svn-id: r29440
"
"3592690b7865bfc0b86dae0841ff5fbae972b685","2007-11-06 22:40:29+00:00","Cleanup.

svn-id: r29441
"
"616c8357b428c5109e882262c2d87edada3c0cdc","2007-11-06 23:03:19+00:00","- little bit more cleanup
- added fixme about Surface::move

svn-id: r29442
"
"b198e11f8ae6215b4ef1f0627bc7a9496049c84d","2007-11-06 23:31:00+00:00","Muting the compiler :P

svn-id: r29443
"
"1a82b2630d09f4df024e71dc85e294687b8c042d","2007-11-07 09:36:49+00:00","Removed reference to KyraEngine that shouldn't be there

svn-id: r29444
"
"9fc974209badbbae8508ccf05c2b9d3aeeeab75a","2007-11-07 09:39:48+00:00","Bugfix for NPC conversations so they'll only stand still when they should, and pause correctly during scripted animations

svn-id: r29445
"
"604be3107e4d0d1a13ae37adbc95afa9893c4ecd","2007-11-07 22:28:01+00:00","Patches #1773489: 'FW: Fixes for German Amiga Version'

svn-id: r29446
"
"cc4311f10f874ab46673fb26cd9298c3f1f25db5","2007-11-07 22:29:20+00:00","One more fix from Patch #1773489

svn-id: r29447
"
"ea19791de5fa24ea51eee2b82d18b5943eb5c808","2007-11-08 10:50:26+00:00","Bugfix for approaching Ratpouch, and have him properly stand still until he's received instructions

svn-id: r29449
"
"cafc46fc8f369eba28031b949326733b6f89754e","2007-11-08 10:51:47+00:00","Bugfix for correct use of article prefixes on character names embedded in talk messages

svn-id: r29450
"
"27a1f388629ab9afa444d9de354cd9529366f83a","2007-11-08 11:06:24+00:00","Added sound to animation of falling down the chute

svn-id: r29451
"
"c2594cb3f2675021537008b9501291004316802f","2007-11-08 11:55:51+00:00","Reordered construction of game instance so that the sounds played in the introduction can properly check the sound flag status

svn-id: r29452
"
"783a0bf67d7319f291202a739bfaf82b77295448","2007-11-08 22:59:29+00:00","Cleanup load savegame from original interpreter

svn-id: r29453
"
"422e88aa20089bcf675335d4e012f8c848c80ac4","2007-11-08 23:35:46+00:00","Slight fix for off screen path calculation

svn-id: r29454
"
"398a26c6c49caecdac40df7e76b776e81fe53822","2007-11-08 23:39:58+00:00","Some tweaks to actorWalkTo() and actorEndWalk(). Also, moved all the actor pathfinding calculation code to a new file

svn-id: r29455
"
"435a71a5b54bace554b2ae77b251314be054b4f8","2007-11-08 23:40:51+00:00","Updated the MSVC8 SAGA project file for the last commit

svn-id: r29456
"
"870ec35291fea0161e6ff9fe8f51a35dd0111384","2007-11-08 23:53:59+00:00","Fixing compilation for me by giving that file a closing newline

svn-id: r29457
"
"25d22b2b42dbae61c7b951b2633e5e664c4b8000","2007-11-09 08:21:15+00:00","Check to prevent Ratpouch saying 'Excuse me' redundantly

svn-id: r29458
"
"5f6cb432fb485e981b2b4be66e1e701aee6e51a0","2007-11-09 08:22:09+00:00","Restoring a game now correctly fades out the current room like the original

svn-id: r29459
"
"b29486e3de3f757df5a45be91f747587bf6e3293","2007-11-09 16:52:39+00:00","Implemented idle script handling.

svn-id: r29460
"
"e375e983ba9d8a29ac20fc948d4e105afd956b8e","2007-11-09 17:06:22+00:00","Added a workaround for a bug in the original game scripts of IHNM with Edna, when the knife is used with her. Fixes bug #1826871 - 'IHNM: Edna's got two hearts but loves to be on the hook'

svn-id: r29461
"
"83eec141c8da24fa710c304e0b18ec42381a2b58","2007-11-10 14:51:18+00:00","- added some code to runLoop (currently commented out)
- little fix in handleInputUnkSub

svn-id: r29466
"
"faf78d582a2b2e9245f17ab86a3cc326de5c37cf","2007-11-10 17:15:48+00:00","-Cleanup strings
-Fix load saves from original interpreter
-Add all background merge functions

svn-id: r29467
"
"d624add74243152fa6639ba43cd04f6cfd816447","2007-11-10 18:24:23+00:00","Muting the compiler :P

svn-id: r29468
"
"34a696662a434fe8afdbee21d7986a88b49208ec","2007-11-10 19:47:07+00:00","Fix boggus object state

svn-id: r29469
"
"5908728d4cf02cf4ff5a38496d45e7b8d1fde839","2007-11-10 19:51:06+00:00","Muting the compiler :P

svn-id: r29470
"
"24303fb953a41f42cf312a69c1152e4ea56e4f94","2007-11-10 22:47:11+00:00","Expanded talk routines so that characters now properly stand still only when they're meant to

svn-id: r29471
"
"31d04d98dcfe9113b39520568bde07737a718f09","2007-11-10 23:20:47+00:00","Fix relocation of objects relations

svn-id: r29472
"
"1bae92f2e1ba13a57239024942676cf33fec82b0","2007-11-11 01:04:40+00:00","Implement dialogues
Detect french 256 colors version

svn-id: r29473
"
"2387a642e50d5fb39ae370dd29cbee0083529813","2007-11-11 08:08:40+00:00","Committed patch #1829748 'Fix for memory leaks in File::exists'.

svn-id: r29474
"
"2f062ff61678934aef2a1252bbd08ed0c191b170","2007-11-11 11:08:58+00:00","Fixed memory leaking of TabWidget. (thanks to jvprat for pointing out)

svn-id: r29475
"
"a783c45d9e6064bf7d9e884fbf6857f2de1b7fc5","2007-11-11 11:39:59+00:00","Cleanup.

svn-id: r29476
"
"6e6a864c17403a99ee866c2330061d6e31506bbe","2007-11-11 18:12:55+00:00","Don't draw objects with negative x/y values. Now, 'ghost' objects are no longer created in the top left corner of the screen when picked up/used. The creation of such ghost objects is a script bug which exists in the original interpreter of IHNM as well. Also, removed a relevant workaround for the note in the first screen of Gorrister's chapter, as it's no longer needed

svn-id: r29477
"
"43437e6d749e3a95f6f23a265b399e08f86203ad","2007-11-11 19:33:25+00:00","Menu display fix
Linked objects implementation (barman)
The gameplay is now kind of working and it is possible to play at least the first part of the game

svn-id: r29478
"
"d2ee52abbae4c7346d1a24c1c1d3c01c452d267c","2007-11-11 20:17:13+00:00","Silencing some warnings

svn-id: r29479
"
"6ccbfcf611e98e688ceae6947f9c4c06ca6336c9","2007-11-12 09:16:00+00:00","Correction to delay when two NPCs are talking together

svn-id: r29480
"
"705cf3cc87e6a6ef30a686d5aa65fad1510da61d","2007-11-12 09:53:10+00:00","Adjustments to the talk state machine so information dialogs (if any) correctly occur at the end of a conversation (such as giving the bar to Ewan)

svn-id: r29481
"
"7bf1b77f3c700cd6b791adf8e10173f889af47fa","2007-11-12 10:09:33+00:00","removeSounds was being called too early - it was setting the current area to that of the room being left, rather than the one being entered

svn-id: r29482
"
"16a4708adc7a3606984c362ba5ca516286336e2b","2007-11-12 10:30:23+00:00","Set Catriona to her correct rocking speed

svn-id: r29483
"
"65c57841bd0a42188e4add5d504f8475fb0e3e80","2007-11-12 16:35:46+00:00","Fixes regression introduced with r29218.

svn-id: r29484
"
"2e46b741a350716eb674a3ea18938ef23329f43f","2007-11-12 17:56:49+00:00","- Implemented opcodes:
-> o2_removeHandItem 43
-> o2_makeBookOrCauldronAppear 42
- Implemented inventory WSA functionality

svn-id: r29485
"
"71d54d1d3648c081629a6a13e2b3bc44919e09f0","2007-11-12 19:49:42+00:00","Added a workaround for a problematic object in Gorrister's chapter (Edna's key)

svn-id: r29486
"
"c908a8a73fe5d908c23208fc259d16b647c09d56","2007-11-12 20:04:44+00:00","Implemented all timer handlers. (Cauldron animations work now)

svn-id: r29487
"
"05b5a493f85350ec5df86dc95045fee6e193ed27","2007-11-13 08:06:15+00:00","Initial commit of the iPhone/iPod Touch backend

svn-id: r29488
"
"3d796f4b53ab7bc34fa912855a7eb9ea62f65e51","2007-11-13 08:47:25+00:00","Tweak to object walk to position calculations - NPCs will no longer get stuck in doors they close

svn-id: r29489
"
"d665b808ae7ab7dd65e2b054abf527bc200e787b","2007-11-13 09:42:42+00:00","Slightly extended/clarified two OSystem doxygen comments

svn-id: r29490
"
"e8771aab0c2f5c3a7e8764b600471bb9cb1e6602","2007-11-13 09:47:04+00:00","When automatically (re)configuring, print the command we execute (it is often useful to know what the 'last specified parameters' actually *were* :)

svn-id: r29491
"
"149e87ecfbc115daafe35febecf2cd9a44b81fdd","2007-11-13 09:49:43+00:00","Added guard to prevent one character's talk dialog interrupting another one that's already in-progress

svn-id: r29492
"
"be01daccdbcb14f4558b7faf7e4d91c3f52bc9a3","2007-11-13 15:49:21+00:00","- implemented opcodes:
-> o2_setHiddenItemsEntry 147
-> o2_getHiddenItemsEntry 148
-> o2t_fadeScenePal 3
- added o2t_playSoundEffect to the temporary opcode list

svn-id: r29494
"
"323cb4827f1a51ce92d2bc3479420104db144e82","2007-11-13 19:41:35+00:00","Moving the vitual keyboard show/hide hints during the copy protection screens to the scumm engine.
As the original code is slightly cryptic, there may be something wrong with MI1 (as commented)

svn-id: r29495
"
"2ae1c3c4965ff157f9f3232eec8173b0acddf3a3","2007-11-13 19:42:52+00:00","somewhat more verbose debug msgs

svn-id: r29496
"
"d66e4901ed5a04a3328e72f76546a7d3fbd807eb","2007-11-13 19:46:21+00:00","don't trash the registry if proper startup has failed

svn-id: r29497
"
"4993a2cb75c60e0080db7ad169f01aadfe57802f","2007-11-13 19:49:01+00:00","got rid of the /evil/ monkeykeyboard code :-) (see also rev. 29495)

svn-id: r29498
"
"fdafe925e9ee07cdef4f27a472b4afb908485bb6","2007-11-13 21:21:17+00:00","Added sound support for the iPhone

svn-id: r29499
"
"2a24ecaf9b95b7282eb2aa0f2ee73c4a84f2a07b","2007-11-14 11:46:55+00:00","Fixed clipping issues that were still occurring in some rooms

svn-id: r29500
"
"254369540c6a39f47220739522ab2de35ea416a3","2007-11-14 13:34:47+00:00","small fixes

svn-id: r29501
"
"1beb50f03e3e1e75065955cf88dde45c0b145c92","2007-11-14 19:23:20+00:00","When reconfiguring, quote env var values in case they contain whitespaces

svn-id: r29502
"
"193e59151ceef423633214c6d744c87282c7d02b","2007-11-14 19:27:08+00:00","Improved the game desc naming in the drascula detection code

svn-id: r29503
"
"10caba35628d148cc9539d72d08ca38915484d0e","2007-11-14 22:24:26+00:00","* centralized kEngineChangeLocation flag handling
* simplified runGame, moving flags testing into called routines

svn-id: r29504
"
"0dc9a12db9377d233182dbe079934815c8d74e87","2007-11-14 22:31:53+00:00","Removed an unclear (paranoid?) continue statement from the original engine. We are just doing a screen update more than the original this way. If this is bad, then we can go back, but for now, let the execution flow.

svn-id: r29505
"
"41456707d64228c4271a53c4928647419574ee57","2007-11-14 23:19:09+00:00","iPhone: Implemented timers, and disabled mutexes (was causing deadlocks in SnM and COMI, for some reason

svn-id: r29506
"
"61e8ad7a32e5a50296d2f30c01422399445b8d73","2007-11-15 10:07:46+00:00","Bugfix to prevent characters occasionally facing one way whilst walking in another direction

svn-id: r29507
"
"b95a10201168a2b2bb59008822bcd3d8eb6c43fb","2007-11-15 11:33:16+00:00","Fixes to parameters of script methods

svn-id: r29508
"
"de750efced41c3b1b0040d418a215b9546f78dd6","2007-11-15 20:21:33+00:00","added support for Adlib tracks

svn-id: r29509
"
"e13e247612265ba4a0549c1414640bff9853453e","2007-11-15 23:42:00+00:00","Some dirty rects handling, and fixed a off-by-one blitting bug

svn-id: r29510
"
"3cb8d404b5440d6d4deff7085c61699f505e60a6","2007-11-16 03:37:15+00:00","Fix loading common sample data for modules in Waxworks.

svn-id: r29511
"
"ced8d602a74951dbc96fa399da6c090d308b357f","2007-11-16 06:53:18+00:00","Bugfix to have NPC stand still during showMessage talk actions

svn-id: r29512
"
"4bfa4378874ce4d20b6eb689f81d3d9f38ce461b","2007-11-16 07:32:03+00:00","Bugfix to make player walk over to Goewin when talking to her

svn-id: r29513
"
"6f23a38c127ecfe2e5445ba4e12e66da9b69e7b0","2007-11-16 07:47:43+00:00","Added guard to prevent a character being reset to a default direction frame after a call to SetDirection if they're already facing in that direction - fixes some characters alternating frames

svn-id: r29514
"
"fe690d56889964465a70c482d41c1448e5de34f2","2007-11-16 08:54:38+00:00","Bugfix for talk dialog not closing if the same character talks twice in immediate succession

svn-id: r29515
"
"ca2641b70f96f879352ab49b5d4f90909d4f75de","2007-11-16 08:59:18+00:00","Changed conversation guards so that the player talking will only be paused if there's another active conversation that's in the same room

svn-id: r29516
"
"c8ce5b1865c3854eca79843e12493453c7566d0b","2007-11-16 10:05:18+00:00","Changed Audio::makeADPCMStream so that the stream passed to it can automatically be disposed

svn-id: r29517
"
"058009a1136172af6d0cc87c0bd7ea123c0806cf","2007-11-16 22:03:39+00:00","Refactored language selection code.

svn-id: r29518
"
"85be70f65b775753d95ccd0a0898a07286c9bde7","2007-11-16 22:59:40+00:00","Fixed a direct access causing endian problems

svn-id: r29519
"
"7b43ba576cf34d43e57e4f1aea4b2ece754b9145","2007-11-16 23:08:17+00:00","Added const to static data.

svn-id: r29520
"
"4985e35b385fab0e2794aac9fada040b19ea7ff7","2007-11-16 23:34:58+00:00","Typo.

svn-id: r29521
"
"31180e79813f5e654a7b2ca7d740074d8e99d1d2","2007-11-16 23:39:14+00:00","Added assert for bit depth in Surface::move.

svn-id: r29522
"
"cec8b9820158d7769898f07f3202adfdcd1e1af6","2007-11-17 00:19:27+00:00","Added 'specialized' versions of set_to for char*, signed char* and unsigned char* 'In' parameters.

svn-id: r29523
"
"d5dc2e075a1e19ecdb9b7f0791704c1c7d2cafd3","2007-11-17 00:19:45+00:00","Bugfixes to restoring or restarting a game from the Restore/Restart dialog

svn-id: r29524
"
"1002a58f011db47fc74fe23dd5dc5b802f4960de","2007-11-17 06:52:35+00:00","Cleaned up the logic of the activateHotspot method

svn-id: r29525
"
"ca10a4db08c3a3344034def39f8599a1ed14db4b","2007-11-17 06:53:13+00:00","Bugfixes to the fighting animations and proper reset of fight data between save sessions

svn-id: r29526
"
"4987cde3a13cb08c299928dd001a77d6bbef83a8","2007-11-17 08:42:23+00:00","Changed default value of _walkFlag in Hotspot constructor

svn-id: r29527
"
"75382bdadccb2abfb39cecbeb94d63912f82c32e","2007-11-17 08:44:38+00:00","Added saving of the current hotspot animation record to savegames

svn-id: r29528
"
"4ed5fc5acdbc97757c8264196da973abd240980e","2007-11-17 08:45:35+00:00","Added missing animation for player operating rack

svn-id: r29529
"
"eaee457431fb2b3d78eb4daadef3f8e40cdcf613","2007-11-17 08:58:31+00:00","Added missing destructor and sounds to barrel animation sequence

svn-id: r29531
"
"a3abaaa70973f7ca0567a2b3b9b9eb2c0dd13fee","2007-11-17 09:39:20+00:00","Refactored main input code.

svn-id: r29532
"
"2e3866b6f4717212a61c79b3ff368b937405336e","2007-11-17 10:21:27+00:00","Identified some more Endian issues (thanks to Max)

svn-id: r29533
"
"f10f40aff00e2a5758349ef246098c4c9f2ed06d","2007-11-17 10:27:31+00:00","Fix bug #1759850 - ELVIRA2: Restart state file causes crash. The itemStore data needed to be adjusting, when loading or saving in the AtariST and Amiga versions.

svn-id: r29534
"
"14ac86abe0b00f6b8cbbaac38d41339f50427693","2007-11-17 10:47:37+00:00","Fixed sluggish mouse cursor during palette fade ins/outs.

svn-id: r29535
"
"813ca5cf39633851451b9aac779003f9ed5c4c45","2007-11-17 10:49:14+00:00","Added missing code to deactivate animations that have finished

svn-id: r29536
"
"9a07589de815ce0e05a5a3398f084a37a3e56c57","2007-11-17 11:03:18+00:00","Bugfix to properly clear previous room layers and fade in the screen when restoring a game

svn-id: r29537
"
"1d9523d439c4c894ae9386cfd1cf0481f5419a4e","2007-11-17 12:11:50+00:00","Merging trunk changes into the branch (revisions 28814:29537).  Removed stdafx.h references.

svn-id: r29538
"
"877d376acf65535339e2f2c3e2f6b9de74ffd61e","2007-11-17 13:27:43+00:00","Fixed metadata that I missed in a conflict.

svn-id: r29540
"
