"commit id","commit date","commit message"
"2a72bba7ce93bf81548a9c05b06a13c96101544b","2012-06-22 21:05:01+01:00","Initial source

This is just the source generated by the android tool
"
"127c5b3ab3b3019e0895e4ce83d16480e9a66a45","2012-06-24 23:06:58+01:00","Start a tool to generate the database

This just contains the autotools foo.
"
"0c0f51023cb44f2472cd73e38e390d8ec1d3b2c9","2012-06-25 21:38:33+01:00","prevodb: Add code to load the list of languages

This extracts the cfg/lingvoj.xml file directly from the zip file and
parses the xml to build up a list of languages.
"
"b37c70c8a625f3c081173e92bb47daccc817bf34","2012-06-25 22:47:46+01:00","revo: Add a function to list files

This adds a function to list files matching a glob pattern in the revo
zip file.
"
"a8cbf7feff11ebc4b58d47ad832fde2d761969bf","2012-06-25 22:57:00+01:00","Import the trie builder code from Amagramanam

The trie builder code will be used to create the indices for all of
the languages.
"
"6a424b35708a9d588f58aec36b823f3cdc51dbd5","2012-06-26 08:34:22+01:00","revo: Fix the g_poll usage

I misunderstood g_poll (and poll) and thought that it wrote only into
the first few entries of the array depending on the number of fds that
had events. Actually it only replaces the revents field of the GPollFD
struct and leaves everything else in place.
"
"d3104d08c83888af185e7f106869d9aa171b6d64","2012-06-26 08:36:10+01:00","lang: Add a trie builder for each language

The PdbLangEntry struct now has a PdbTrieBuilder member so that the
index for each language could be built up there. There is a hash table
to index the languages based on the language code.
"
"ebcdb51cba0ba29cc06c5eb0c10d805823baa8c5","2012-06-26 08:38:22+01:00","Add the start of a struct to represent the entire database

PdbDb will parse all of the XML documents from ReVo and store the list
of articles in memory with the indices. Currently this just generates
an HTML segment for each article with <span> tags instead of the
document's own tags.
"
"238897e02cc8d5921db94186ce8fff87eca6961e","2012-06-26 09:27:10+01:00","Add wrapper functions for all of the Expat API used

The idea is that the parser wrapper can transparently handle external
entity references however currently it is just a direct wrapper around
Expat.
"
"3be7d27e830abf4f57ff2b29f87c32e0be582c13","2012-06-26 17:00:47+01:00","revo: Expand filenames with ../ sequences

The unzip glob matcher doesn't cope with ../ directory sequences so we
should expand them out before passing them to unzip.
"
"c9df7de3bd7106419e12d4984389ababf8961f89","2012-06-26 17:14:48+01:00","xml: Automatically parse external entity references

PdbXml now automatically handles a stack of external reference parsers
so the upper layers will see the events as if its a single document.

The stack keeps track of the filenames which can now be directly
queried from the xml parser object.

The pdb_xml_stop_parser mechanism has been replaced with an abort
function that explicitly takes a GError object to pass up.
"
"41d494a85c3baade9280611bfdddb65c4cd16df9","2012-06-26 20:26:14+01:00","db: Add a stack for parser handlers

There is now a stack to maintain a temporary change to the callbacks
from the xml parser. That way it will be possible for example to start
skipping elements until the closing tag for that element is reached.
"
"ada20f17e27745fc342609b117096bf2fcf13acf","2012-06-26 20:39:09+01:00","db: Replace <tld> tags with the contents of the <rad> tag

Whenever a <rad> tag is encountered its contents are copied into a
GString. Any <tld> tags are then replaced with the value of this
string.
"
"9bd9af8004c9616251091019e0e4a0128a06b1ba","2012-06-26 20:43:03+01:00","db: Don't add tags for elements we don't care about
"
"821d63c5787430954d76eca77ff9c530f7c54127","2012-06-26 22:30:21+01:00","trie: Switch to storing an article number and a mark number

Instead of storing the 'word level' (a concept from Amagramanam) the
trie builder now stores the article and mark numbers that the word is
contained in. The compression doesn't work yet.
"
"8b36ac4fead0a1ab2e897738ae899021a8425cb0","2012-06-26 22:30:54+01:00","xml: Add the current line number to pdb_xml_abort messages
"
"c164b7b6aa5cf36b5d17767d393a6372b783ae6e","2012-06-26 22:31:56+01:00","db: More work on the article generator

• Some more tags are handled

• The kap words are added to the index
"
"199877e8fd79417e8a5105103766c499c1084458","2012-06-27 00:18:38+01:00","trie: Support compression

This replaces the old trie compression code from Amagramanam to
directly compressed the data into a byte buffer. The characters are
encoded in UTF-8 and the article and mark numbers are also stored.
"
"8917ac839ada1623683766ecd79f2abb156a3020","2012-06-27 00:19:51+01:00","prevodb: Add support for saving the results

The program now takes an extra parameter as a directory to store the
results in. The indices and articles are written to subdirectories of
that.
"
"8cf9bca0cf85589c049bf3518026dd70b755a369","2012-06-27 00:21:11+01:00","prevodb: Add a test program to dump an indices file
"
"17e49732b6784e4ee75a6f211d4e9ee8aea652ef","2012-06-27 10:42:04+01:00","Store the trie nodes in sorted order

That way it will be possible to get a sorted list of words beginning
with a prefix.
"
"5dee9fb5cac9ed4c1cfa218dd79e35523cd5f47a","2012-06-27 10:42:26+01:00","lang: Also save the language list

The language list is dumped to an XML file.
"
"30d2674b915c22ac992abf63bacac25192d98a16","2012-06-29 11:19:29+01:00","Add the initial 'select language' activity

This changes the main activity to be a list view that shows all of the
languages. The languages are loaded from an XML file generated by
prevodb. The 'main languages' will eventually be retrieved from an
SQLite database by counting the usage but for now they are just
hardcoded.
"
"b244a7ce203bafe7abb0b4066cad8be845bcec46","2012-06-29 11:40:38+01:00","prevodb: Write the files to a dir hierarchy suitable for the package

The indices are now written to assets/indices/

Articles are now in assets/articles/

and the language list is now stored as an XML resource in
res/xml/languages.xml.
"
"22f51495666876ec7ccbe0cffa91baca718edc48","2012-06-29 19:24:28+01:00","Store the languages in the list view as an object along with the code

Instead of storing the languages as a list of Strings, they are now
stored in a Language object which has the language code so that we
will be able to determine which index to use once the item as clicked.
"
"d2c2f0e0f2b9c82437ab0b719c28d22a8d0800ac","2012-06-29 22:12:12+01:00","Add a filter for keyboard searches in the language list

LanguagesAdapter now implements Filterable so that the user can type
to search within the list.
"
"748a985a36cd557b26837845cb8516faa660c7c2","2012-06-29 22:45:04+01:00","Support the x-system in the filter search

X's in the filter string are now replaced with hats according to the
'x-sistem'.
"
"9d8d4ed6e7a46d17bfccdb999dcab3e54967481c","2012-06-30 02:45:36+01:00","Add a class for searching in the Trie struct

This adds a class to handle an in-memory representation of the trie
structure generated by prevodb. The trie can be queried for words
beginning with a prefix. The results are filled into an existing
array.

The class also includes a main function so that it can be compiled
outside of the Android SDK for testing.
"
"b90282aab08c372ade38adf9d31391a4a51022bc","2012-06-30 11:38:15+01:00","prevodb: Strip spaces around headwords

Some of the <kap> entries have extra whitespace around the name which
was getting into the index.
"
"a33c1a118f003f43cad805d01ffe18d139ac1d94","2012-06-30 11:40:33+01:00","Add a view for searching a trie

This adds a new ListActivity which gets launched whenever a language
is clicked in the language activity. It loads the trie for the
corresponding language passed down from the intent and sets up a list
adapter to filter the results.
"
"6296bd9adf583b5804419fdfda50ce39db3a35d4","2012-06-30 13:29:53+01:00","Rename LanguageActivity to LanguagesActivity

so that it matches LanguagesAdapter
"
"88ab1645ad613970e31295e2ca9a6707e8677b52","2012-06-30 13:42:15+01:00","Add a GPLv2 notice to all of the source files

This adds a copyright notice for GPLv2 to all of the source files.

Only GPLv2 is used (not later versions) because that is the license of
ReVo itself so it's potentially a derived work and should probably
have the same license.
"
"12f14934013a487c49b45a70f9c9b586b7a3b88f","2012-06-30 13:45:09+01:00","Add the missing search.xml file

This got left out in d57afff51cc
"
"62627925e4029f9f731b4ca31eeab74e68619dce","2012-06-30 19:03:39+01:00","pdb-db: Just copy the XML instead of trying to convert to HTML

It looks like the WebView in Android doesn't work very well so it will
probably be easier to parse the XML in the application. prevodb now
mostly just copies the tags across except it still replaces the <tld>
references, expands entities, removes repeated whitespace and replaces
the marks with an integer.
"
"789e4f097c15d7e94370f62e0b3e46a2ce6a472d","2012-06-30 19:58:12+01:00","pdb-db: Resolve references to an article and mark number

Any 'cel' attributes in the article are now marked in a list instead
of writing out the value to the article buffer. While the article is
saved all of the references are resolved using the hash table so that
it can instead store the article and mark number to make it easier for
the Android application to find the right reference.
"
"b84e672f443ffc75c05c56543e2f3b135525e674","2012-06-30 21:35:16+01:00","Change the trie format to allow multiple articles for a keyword

When a valid word is encountered in a tree it is now followed by a
list of articles and marks instead of just one. Also an article can
have an optional alternative name to display instead of the one stored
in the index. That way it is possible to have 'Britujo' be listed
under the index 'britujo'. PdbDb now always converts the index name to
lowercase before passing it on to the trie and will use the optional
display name if that caused the name to change.
"
"ac369d9a3df28156c8dd58d998e734375d8a9a2e","2012-06-30 21:38:18+01:00","Support the 'lit' attribute of the <tld> tag

The lit attribute gives an alternate character to use for the first
character of the root word. This is usually used to capitalise it.
"
"2db0d9b455fcf309c788ab841abd2b19d9495f3b","2012-06-30 22:42:55+01:00","pdb-db: Skip 'fnt' and 'adm' tags
"
"de8ce2dd9fc6ed592caf9244be39ab55813f3b76","2012-06-30 22:44:07+01:00","Add a view for the article

Currently this just dumps the article into a WebView with no styling.
This ends up just displaying unreadable text.
"
"8182683c33f7b1ab2afaa2815ecd85056e946e8f","2012-06-30 22:48:46+01:00","Add the files generated by prevodb to the .gitignore
"
"56577f812205af8e8fe271d30c238896ac4facb0","2012-06-30 23:58:11+01:00","db: Add translations to the trie indices
"
"72e2de39699a944311ef48b2adbadf5e6b366a88","2012-07-01 00:16:30+01:00","prevodb: Ignore translations of examples
"
"057daa8121019b8f231587a0c8bd5a72de580c0c","2012-07-01 00:17:06+01:00","prevodb: Skip pictures
"
"d07b6faf9ee4003089fb74bc7231d1ea25a9fd59","2012-07-01 00:54:50+01:00","lang: Skip languages that don't have any translations

The cfg/linvgoj.xml file from ReVo seems to list a lot of languages
that aren't actually used. To make the language list smaller we might
as well skip these out.
"
"b598ea249ae62bdcd14ea363db100e1a9670854b","2012-07-01 00:59:04+01:00","Rename PdbTrieBuilder to PdbTrie

The code used to have a distinction between an object representing the
tree as it was built up and an object to represent the final
compressed tree but this is no longer the case. We might as well
rename it to make it a bit easier to use.
"
"98c9a26bc6b9eb9099a2bdb596406b34f5044213","2012-07-01 01:09:12+01:00","db: Coalesce spaces in the index entries

All groups of space characters are replaced with a single space as
well as trimming the beginning and end of the index entry.
"
"07f2611f4f0cbaa126ee1c670e726fc3b2ee013a","2012-07-01 01:11:57+01:00","dump-index: Fix the displayed article number

The article number was including the flags.
"
"927be75962fda9e35c6c35d9f551b378edc292ab","2012-07-09 20:26:51+01:00","pdb-revo: Change API to directly pull data instead of a callback

Instead of having a single function to read a file from the zip file
with a callback whenever data is encountered, there is now a struct to
represent an open file and the caller and directly call a function to
read the next chunk of data.
"
"754071e62c63207d0fc3048135d846468471f356","2012-07-09 21:14:09+01:00","pdb-db: Don't forget to free the PdbDbArticle structs
"
"5786ccd34e316f7cb9b2feaff1d8ae0962365de7","2012-07-09 21:14:38+01:00","pdb-db: Fix the terminator for pdb_try_mkdir

error was being passed at the end instead of passing the NULL
terminator.
"
"28e82c724c66f1c3ebe5a61aa30eb78ca63982fd","2012-07-09 21:15:17+01:00","pdb-revo: Initialise in_list

Valgrind was picking this up as uninitialised data.
"
"0ba10a682d5ca85939388d2c5ddf70d9b29fc402","2012-07-01 23:28:21+01:00","Trie: Mask off bit 31 of the file size

It looks like the French index was somehow ending up with the empty
string as being a valid word so that total file size would end up
negative.
"
"e884b7dfaca80b5bb444bdbe1b64af438749beba","2012-07-10 23:28:20+01:00","prevodb: Add an object to represent a mini DOM tree of an XML file

This adds a PdbDoc struct which represents a tree of an XML file. The
DOM is build up using a PdbXmlParser. The theory is that it will be a
lot simpler to build the articles from a DOM model than trying to use
SAX.
"
"2b0fd3be9b25bedeaaf1bf8b54d79ffc6e69571b","2012-07-10 23:31:19+01:00","prevodb: Add a small unit test to check PdbDoc

This checks loading all of the XML files from a ReVo zip file and
verifies the integrity of the generated PdbDoc.
"
"645872e63e9acfe4ea903cf986137d7c71ade58b","2012-07-09 20:26:44+01:00","pdb-db: Write out a binary file containing the sections of each article

Instead of dumping out the XML and getting the app to do process it,
the plan is now to write out a binary file with a list of
SpannableStrings for the app to display directly. This changes prevodb
to start building the array of strings. The XML document is now parsed
using a PdbDoc instead of trying to parse the data directly from
Expat. This makes the code a lot easier to maintain because it doesn't
have to manage a separate stack for the state and certain branches of
the tree can be handled multiple times.

Although the framework is setup to add spans to the strings all of the
strings are currently just output directly with no spans.

This patch breaks the translation indices and the marks for all of the
sections are zero. These will be fixed in later patches.
"
"33af769aaed6f84b68f50a7538b3575a61a6999d","2012-07-09 20:25:33+01:00","ArticleActivity: Start of code to load the SpannableStrings

Instead of a WebView the ArticleActivity now just creates a
LinearLayout with a TextView for each of the strings from the binary
dump of the article. The spans are currently skipped over instead of
being applied to the string.
"
"6f963d537f8f0cc536157ec090a18c44b057e61b","2012-07-12 09:44:15+01:00","ArticleActivity: Fix the maybeReadAll method

It looks like InputStream.read can return less bytes than requested if
there aren't enough immediately available.
"
"115fb9cb718678f1a1ef283c53385b705e1e7df8","2012-07-17 11:12:20+01:00","prevodb: Resolve the article and section numbers later

Instead of directly storing the article and mark number in the index
when the reference is first encountered, the PdbDb now just stores a
pointer to the article and section. The numbers are calculated later
once all of the articles and sections have been generated. That way
the article and section doesn't need to be added to the arrays
immediately to know its number.

The PdbTrie now stores a data pointer for each word and has a callback
function to calculate the article and mark number from that data
pointer while the trie is being compressed.
"
"4a71452fa2aec709f24230e3a64b470fc42b0854","2012-07-17 23:16:23+01:00","search: Add an EditText to the top of the search view

With a soft keyboard it's not possible to make the keyboard appear
unless an EditText is activated so we can't just use the default
filtering mechanism to search. This adds an edit control which sets
the filter text whenever it is changed so that the user has something
to click on to bring up the keyboard.
"
"ec70e063f692368958e90ea43f12580a72173d22","2012-07-18 23:32:34+01:00","ArticleActivity: Style the section headers as list separators

This adds a layout resource with uses the listSeparatorTextViewStyle
for a TextView. Each alternate string from the article (ie, the
section headers) is created by inflating this layout instead of a new
TextView.
"
"07a5a9fef24150195498bdcf8e13c78e1b06798a","2012-07-19 09:57:11+01:00","pdb-db: Add spans for the <ofc> and <ekz> tags

The ofc tags are marked with a superscript span and the ekz tags are
marked with an italic span.

The offsets and lengths for the spans have been converted to represent
the length of the string if it was encoded in UTF-16. This makes it
easier to handle in the Java side.

When a span is started a closing marker is added to the processing
stack so that it knows to store the end of the span after all of the
children are processed.
"
"529c645b650f482fe08b1ecf524a9bfbb0565be6","2012-07-19 09:58:32+01:00","ArticleActivity: Support superscript and italic spans

The maybeReadSpannableString method now processes the spans in the
document and sets the spans on the SpannableString. Currently it only
understands italic and superscript.
"
"203d4095f5c360c7daafc733a11701540e013a23","2012-07-19 20:30:44+01:00","pdb-db: Split the sences into separate paragraphs

The parser for spannable strings has been split up so that it stores
its state in a separate struct. There is a separate function to handle
parsing a stack entry pointing to a node. The stack entries can now be
one of three types; a node entry, a close span entry and a paragraph
marker entry. The paragraph marker entry is used to break a paragraph
after the tag is closed. The paragraph separators are inserted by
setting a flag on the parser state. The next time any text is added
the paragraph marker will be inserted. That way it won't duplicate
paragraph markers or add redundant ones at the end of the string. The
array of element types now also has an optional callback to do
additional processing for that element. This is used for the 'snc' tag
to start the paragraph and insert the sence number.
"
"350e078f154e32cd6d7e08ea9e85be55738f7b49","2012-07-19 22:57:45+01:00","prevodb: Handle <ref> tags and mrk attributes

Whenever a <drv> is parsed the child nodes are scanned for mrk
attributes and a mark is added for each.

The <ref> tags now cause a reference span to be added with the
corresponding PdbDbReference. The list of references is now stored
against the PdbDb instead of against each article because there is no
reason not to and it means the handler for the ref tag doesn't need a
pointer to the article.
"
"a6d651683037360b42230e2026a163fdf863f4be","2012-07-19 23:00:47+01:00","ArticleActivity: Handle reference spans

Reference spans are now converted to a ClickableSpan. The onClick
method either launches a new activity with an intent for the given
article and span or just directly scrolls to the right section if it
is within the same article. The section number from the intent when
the activity is started still doesn't cause it to scroll because I
think this would need something to wait until the layouting has
occurred.
"
"df796290999141e952349fa8207566c09eeb42e7","2012-07-20 00:12:06+01:00","Add styles for rim, em and aut tags

The <aut> tag needs to add [ and ] arround the span so there is now a
new stack entry type for adding a character after all of the children
have been processed.

The <rim> tag forms a paragraph and has a span. The span needs to be
applied after the paragraph separator. To make this easier there is
now a 'paragraph' field in the span descriptions to make a paragraph
around the span. pdb_db_parse_node makes sure to handle the paragraph
before the span is started.
"
"6ceb420ec969982ad876b99b883ed4d1eb2d3d87","2012-07-20 00:14:06+01:00","Fix the name of pdb_doc_parse_spannable_string
"
"f79488274595d936bdba53662a565c69a78433bf","2012-07-20 09:26:59+01:00","pdb-db: Flush the paragraph before expanding a <tld>

This was causing the paragraph to be inserted after the expansion of
the <tld> if that was the first thing.
"
"2f2d43fe09d8ef758b51af134a1a74ba7f55cb9a","2012-07-20 11:13:18+01:00","pdb-db: Add icons to the references

This adds icons next to the references depending on the type. The
icons are implemented using Unicode symbols instead of actually using
pictures so that it will scale properly and use the right colours.
"
"d6137ca43b4a056c7885dcbb7f984a4918a1141f","2012-07-22 23:05:11+01:00","Add a small test program to dump an article

This adds a little noinst test program to read a processed article
file and dump the string along with the numbers for the spans.
"
"7b7813b6484acecda9ef3827c6f3c27a44ee5448","2012-07-22 23:16:51+01:00","pdb-db: Skips spans with zero length

Sometimes PdbDb will end up creating a span with zero length for
example because of the empty <ekz> tag in al.xml. This ends up being
processed as the end of the list of spans which makes it interpret the
remaining spans as an invalid string.
"
"a17ee1e4d9c76cad7215a2485566f315da77de76","2012-07-24 10:45:40+01:00","pdb-lang: Add a function to get the name of a language given the code

The hash table of language codes now points to the PdbLangEntry
instead of directly to the trie for the lang. That way
pdb_lang_get_name can also return the real language name.
"
"fd911aee2730af0b456dc3214f4ba5df65d6e36d","2012-07-24 10:48:11+01:00","pdb-doc: Fix pdb_doc_get_element_text for empty elements

The function was always adding the first child of an element to the
stack even if the element doesn't have a child so it would crash for
empty elements.
"
"9de4baaf62ddc31648f42a01f385d14209be3acc","2012-07-24 10:49:42+01:00","pdb-doc: Added pdb_doc_append_element_text

This is similar to pdb_doc_get_element_text except that it appends the
data to an existing GString. pdb_doc_get_element_text has been changed
to use the new function.
"
"0391cd0851cf3ffb16e5cc14c5e878b20ca89cba","2012-07-24 10:50:36+01:00","pdb-doc: Add pdb_doc_get_attribute

This gets the value of an attribute from an element or NULL if it's
not set.
"
"975fef63e2150af29e749213953a0c47c299cf48","2012-07-24 10:53:31+01:00","pdb-db: Add translations

The <trd> and <trdgrp> tags are separately searched for after
processing each article. The translations for each language are added
as a separate section.
"
"871437b91a997a308d3c1d5713c510de62356ead","2012-07-25 09:04:20+01:00","dump-article: Validate the UTF-8 and the span lengths

This adds checks to dump-article to validate the UTF-8 strings and
that the span indices are all in range.
"
"827daaa15470ef8ae290edd2afad8c9d9663f899","2012-07-25 09:06:19+01:00","ArticleActivity: Log invalid spans

This adds a 'WTF' Log for invalid spans when building a SpannableString.
"
"4df7e6931316d8df838517eb2dcc0d9315fdf914","2012-07-28 16:27:41+02:00","pdb-db: Add index entries for the translations

This adds an index entry to the corresponding language for each <trd>
tag. The index entries have been replaced with a union that can either
represent a direct pointer to a section or a mark to indirectly
reference the section. That way the entries for the translations can
be added without knowing the section number.
"
"f364d8b26bb74c6b54f8e43fbcc5ad2d826c7000","2012-07-28 16:30:33+02:00","pdb-db: Fix the unitialised db->references list

This was picked up by valgrind
"
"1e41676de040c6659b27e0382f372e79c7cfa8fb","2012-07-28 16:37:55+02:00","SearchAdapter: Convert the search string to lower case

If the user types something to search for with upper case letters then
it should convert it to lower case because all of the index entries
are in lower case.
"
"205afcf056c0febf479145cfa55707dd7257dc9d","2012-07-28 17:52:44+02:00","Automatically guess the main languages based on the ones used

There is now an SQLite database containing the list of languages used
along with a usage count. Whenever a language is selected from the
langauge activity the usage count is updated. The top two most used
languages are shown along with Esperanto as the main languages.
"
"cf48b83d7812940dfaac90b331a97ff5f92a007b","2012-07-29 15:07:15+02:00","pdb-revo: Allow the revo zip file to actually be a directory

Instead of requiring the zip file to be passed directly to pdb-revo,
it can now also accept the unzipped directory. This is a lot faster
than launching a separate process to unzip each file.

All of the functions in pdb-revo now have two implementations
depending on whether the data is in a zip file or a directory.

Anything that was using pdb-revo now gives paths relative to the revo/
directory instead of including revo/.
"
"6396fd91e029fe377b5ae9c7bc27a1c6d1c46c0f","2012-07-29 16:34:33+02:00","pdb-doc: Add pdb_doc_append_element_text_with_ignore

This is an alternate version of pdb_doc_append_element which has a
va_arg list of tag names to ignore. The original function now works in
terms of the new function.
"
"0a513afcc0302e30157ff90d2d33edc1e44d0682","2012-07-29 16:35:39+02:00","pdb-doc: Add pdb_doc_element_has_child_element

This just returns TRUE if the element has an element type child node.
"
"b6552275025844b8f6e4c410b7414fb88abb0de3","2012-07-29 16:36:34+02:00","pdb-trie: Ignore display names that are identical to the real name

The display name is now strcmp'd with the real name when an index
entry is added. If they match then the display name will be ignored in
order to avoid redundantly storing extra data.
"
"5de64c37682d1bb211c1993a98605483b3be34df","2012-07-29 15:46:25+02:00","pdb-db: Don't add klr and ofc tags to index entries for translations

The text in the <klr> and <ofc> tags is now stripped out of index
entries for translations. The <klr> tags are however retained in the
display name.
"
"a5a023b79b7ec0393808225feb6ce2ae1150dbc7","2012-07-30 06:52:32+02:00","pdb-db: Skip the leading '-' for index entries in Esperanto

The esperanto suffixes have a leading '-' which should probably be
ignored for the ordering in the index.
"
"f38df48805cdfd1152bbb1e30669d6e1f4a40f9a","2012-07-30 07:15:28+02:00","pdb-db: Ignore empty translations

For some reason some of the articles have empty <trd> tags. These were
messing up the indices so we should ignore them.
"
"700ea096d498d7295e4262830dec5f386c6900cb","2012-07-30 07:44:23+02:00","SearchActivity: Try to show the keyboard

Whenever the activity is started it will now try to give focus to the
search entry and ask Android to show the keyboard.
"
"50fccf816a99bd4a244cfba480c5d72e69f29cc9","2012-07-30 08:45:14+02:00","ArticleActivity: Scroll to the right section on initial create

The scroll view for the article is now implemented as a subclass so
that it can override the onLayout function. This is used to delay
scrolling to the right widget until after the initial layout in order
to ensure the views all have the right position.

The article activity now uses this to scroll to the right section on
onCreate.
"
"78ef0f258e1c5fb530afb3ed14de3e478f28444b","2012-07-30 20:25:50+01:00","prevodb: Add a utility to convert an ordinal to roman numerals

Roman numerals will be needed for the sub article headers. The code
for the utility is taken from Mozilla.
"
"ac5bb4e873d26f999087f7ed2260e5b14c629f51","2012-07-30 20:26:44+01:00","pdb-db: Handle subsnc and subdrv

These are now enumerated instead of just weirdly joining together the
paragraphs.
"
"416748ce8b7b5b407c148272e322d318a694c87f","2012-07-30 20:34:11+01:00","pdb-db: Enumerate sub-articles

The sub-articles now get a separate section header with a roman
numeral. The sub-article is assumed to either contain a separate list
of <dif> tags or a single spannable string.
"
"b638bffa40158a372e529b4cf9d41bd38c05b771","2012-07-30 21:03:24+01:00","pdb-db: Support variations for headwords

Some <kap> tags contain <var> tags for a variation of the word with
exactly the same meaning. The <var> tags were being ignored so only
the first word would appear with a load of commas after it. This patch
makes it strip the commas and recursively add the headword from the
embedded <var> tags to the index. The embedded <kap> tags are no
longer ignored if they have a parent <kap> tag.
"
"81a7550145fa0cc6419ff0cecf055103bbf5bbfd","2012-07-30 21:39:30+01:00","pdb-db: Support references to the filename

Some <ref> tags just use the filename of the article instead of an
actual mrk attribute. To support this prevodb now adds a mark to the
first section in every file based on the filename.
"
"7523f13b1eccfdc9c77c54b82fc7575304c4fc32","2012-07-31 21:02:56+01:00","pdb-db: Search for the translations directly after creating a section

Instead of searching for all of the translations after creating the
article, then are now searched for after creating each section. That
way the translation references can directly point to the right
section. This is necessary because some translations are not under a
section with a mrk attribute.

There are now two ways to search for translations; either recursively
or by just looking at the direct children of a given node. The first
is used when processing an entire drv or a spannable string and the
second is used when processing a container element whose children may
generate other sections.

The references, links and marks have been renamed and reorganised.
There are now comments to explain what they are used for.
"
"f460baeb4349c1607c90db0403ca2f95fcc9c764","2012-08-01 02:17:09+01:00","gitignore: Fix the pattern for the article files
"
"fd2a79170623cc06622d0e22fa9d7780f9373c21","2012-08-01 02:28:23+01:00","pdb-db: Don't look for the innermost mark when processing translations

The mark isn't used anymore so this was just dead code.
"
"2d98456b23b4297d8aae8b506caa202bbb0a8a56","2012-08-01 10:58:36+01:00","pdb-db: Add marks while looking for translations

Previously the marks were only added while processing <drv> tags. That
meant that marks on the <subart>s and other tags would not be found.
Adding them while looking for translations is a convenient place
because the functions to find them are passed the section pointer
directly.
"
"21796d1948ee5d930ce1db4947fd52b8e21a213a","2012-08-01 15:41:52+01:00","Increase the minimum SDK version to 10

Instead of just picking a number out of the air, this updates the
number to 10 (Honeycomb / 2.3.3) which seems to support the app at
least in the emulator.
"
"5dcc4e13bbeb14449dc127c33cdefec4d0fbcf67","2012-08-01 22:27:41+01:00","Add an about dialog

This contains the copyright and version information.

There is now an information icon on the main activity to display
dialog.
"
"c7f0bd3ebde9af06765f85bb390e218ef61616e4","2012-08-01 23:57:27+01:00","Prepare for release
"
