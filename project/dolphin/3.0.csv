"commit id","commit date","commit message"
"d0c65b610c91531ff80298834bc866cf6b016fcd","2010-06-03 02:36:41+00:00","move njoy to /tags on behalf of Falcon4Ever

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5578 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"e4085f0f049c0f681e3feaa97f7f0842c017ae8e","2010-06-03 04:55:39+00:00","Merge GCPadNew into Dolphin. This takes place in three segments: Core, InputCommon, and InputUICommon. From now on it can be referred to just as 'GCPad'.
Switch to Billiard's IniFile implementation throughout Dolphin (it's faster!!).

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5579 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"edabeffaafeaef1418fc80c4fb97bb9188a67a15","2010-06-03 04:58:36+00:00","trying to fix issue 2670


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5580 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"a34ad4051719830bdac91c0447f58ef0be4dca0d","2010-06-03 05:59:58+00:00","An almost linux/osx compile fix beside some undefined references


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5581 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"89aeda83a36c7d4594c4d666433e6a0957a89291","2010-06-03 06:13:09+00:00","Compile fix


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5582 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"360b8427fd91789e615bd8e004f51de6d7e5888a","2010-06-03 06:34:54+00:00","aaand compile fix on windows :p

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5583 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"450aefdd01d87f659c0a83406b04d58362fedef8","2010-06-03 06:51:34+00:00","A few minor nits to fix building on OS X.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5584 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"2c8e96d857fab8cd790bc65ac3fabc876573d331","2010-06-03 07:04:07+00:00","Duck session!
Rabbit session!


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5585 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"a281430b6bdc18651e87e409693dadfa895d2f90","2010-06-03 07:49:30+00:00","Have lint mean -Werror at least until the issue with
-Warray-bounds and -Wunused-result can be resolved.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5586 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"acd2b03afeab33ce4caf0046f0a760697619ede0","2010-06-03 07:50:37+00:00","Avoid producing empty object files:

CoreRecording.cpp is not configured through the build system,
so just give it a dummy symbol when it's not compiled in.
ChunkFile.cpp and DSPBreakpoints.cpp are no longer used.
ExtendedTrace.cpp is Windows-only.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5587 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"3236aa9e73cf6d0bc798cce6f5224cff40eb6955","2010-06-03 13:20:30+00:00","Fixed pointer and nunchuk issues in new WiimotePlugin. Removed ir hack.
Details: Issue consisted of IR data overflowing extension data on IR report change e.g. mode 3 to 1, which happens for instance when changing data report mode from 0x33 to 0x37.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5588 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"a3c96ac42c4c2ce4a4cf2f5ca09a5ae9dd4bd303","2010-06-03 18:05:08+00:00","Warp back to 5578.  Sorry for the lost changes, please re-apply.  Reason: 5579 is a complete disaster.

Not only does it change tons of files to switch to a new and non-working (it doesn't parse my ini files, at least) ini parser, it also reshuffles a lot of code and removes a plugin. The latter part is fine, but doing these two major switches in one revision, one of which is broken, is completely unacceptable. I said to merge tiny changes, not massive reworkings.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5589 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"863c70561d5e05de184a9aabbab012497400d659","2010-06-03 18:42:49+00:00","Reapply 5588 : new wiimote plugin fix.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5590 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"c6cba79eb0f0ffe1afd51b836ca268f7d83afb75","2010-06-03 18:46:19+00:00","Reapply 5580 : trying to fix issue 2670

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5591 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"4a18908c573c22e06e4c14444edbd1507786b0f7","2010-06-03 18:49:35+00:00","Reapply r5586 and r5587:

Have lint mean -Werror at least until the issue with
-Warray-bounds and -Wunused-result can be resolved.

Avoid producing empty object files:

CoreRecording.cpp is not configured through the build system,
so just give it a dummy symbol when it's not compiled in.
ChunkFile.cpp and DSPBreakpoints.cpp are no longer used.
ExtendedTrace.cpp is Windows-only.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5592 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"49bbbe099dcd47971eb0f7d22187b13269123a44","2010-06-03 19:15:15+00:00","Cleanup.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5593 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"5539dd4e8b45c48136d35e822168e09292f1f52d","2010-06-03 20:37:32+00:00","Gamelist loading speedup: Be lazy about parsing the file system - it's not necessary for Wii games since the banners are external (in savegames). Also make it possible for the gamelist code to create cache entries for GC images without banners.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5595 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"ad8232010777dc757fc38bd85527082cc824f982","2010-06-03 20:59:55+00:00","Make gcc happy.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5596 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"84c55c3e4e8e4c0d0180b40ceac747cbcba4fab8","2010-06-04 02:58:35+00:00","Deprecate nowx on OS X (but keep it building for sanity checking).


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5598 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"3ab27a7d873a5500037978306d721c63e570c692","2010-06-04 04:59:07+00:00","Revert parts of r5576 and r5598 for Sonicadvance1's sake.
This reenables the option for building without wx on OS X,
but still leaves wxgl as the default.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5599 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"1fa79f1f99e4122a49567f458336dbcd03fdd371","2010-06-04 05:00:37+00:00","Revert parts of r5576 and r5598 for Sonicadvance1's sake.
This reenables the option for building without wx on OS X,
but still leaves wxgl as the default.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5600 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"1435c2527add244b7e1590b20e1e4db56b9e0108","2010-06-04 05:21:46+00:00","After party


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5601 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"05c418ebe2da24a8df4ef2c1d1d7864eb2d806e3","2010-06-04 19:56:34+00:00","Refactor the original and much more compatible IniFile implementation to work more like Billiard's, with a public Section interface, but keep the old interface as well.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5603 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"12a4c25e9fed936c6244ff4b42fce1af2597a0bf","2010-06-04 20:03:03+00:00","Port InputPluginCommon to use the original IniFile code, get rid of Billiard's.

a few minor warning/compile fixes.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5604 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"2d6011859a2a650bb815d521316059864d6c0806","2010-06-04 20:33:53+00:00","fix fix

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5605 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"b6a281eaff5e0118b9841ab0bfdc0f59afbf994f","2010-06-04 20:54:13+00:00","Nits.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5606 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"63dbcf4f97c89819f61b8709d77546e525769bed","2010-06-04 21:00:39+00:00","Check that the libraries claimed by wx-config can actually be linked
with. This avoids having wx problems show up as a problem with a
subsequent dependency, namely Cg.

See issue #2175.

Also add explicit depdendency on zlib.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5607 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"c98f8a96d2d504d6d383a4dec6ec44c254ba41f0","2010-06-05 00:01:18+00:00","HUGE commit :)
in general cleanup and bugfix disable pierre  patch for the moment as it causes problem in some games and hopefully fix the remaining missing textures for nvidia users in opengl.
make the code in pixelshadergen looks nice and readable.
D3D: this is a ultra experimental commit please check for regressions or error.
make the efb Scale / super sampling level customizable to improve the output quality and let the user configure quality according to his hardware.
is everyone likes this change will translate it to opengl
please test


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5612 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"2e783d976902ea1ce8d6558d3c49282dc644301a","2010-06-05 01:38:22+00:00","space changes, merge #defines, language fix, and code reorder/cleanup :P

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5614 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"44f14b2ecec88ccab6b4e9f088618445c61c806a","2010-06-05 02:03:16+00:00","forgot just one thing (again) >.>

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5615 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"eb6fabdb00f7467ad70c184f91eec98749525048","2010-06-05 02:15:13+00:00","apply  Wagnard28 patch for nvidia cards texture problems

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5616 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"9ed6d98e2c00f540a9d8a71c961d27d1991560d2","2010-06-05 03:03:01+00:00","wx 2.9 pasto and a few nits.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5617 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"6b872bb81cd2297a3d59ceebb2a75266bf1370af","2010-06-05 03:09:44+00:00","Satisfy the dynamic loader function presence check again.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5618 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"656ff26ed8fd2e47ff68e78dcf0bb588ef627865","2010-06-05 05:30:23+00:00","New GCPad/Wiimote: Enabled SDL 1.2 on the Windows build to support some gamepads that weren't working with DirectInput. Made DirectInput use (and prefer) buffered data rather than polled data (some gamepads should work better). In GUI: Changed all numeric wxChoice to wxSpinCtrl (config dialog opens much faster), removed '+' buttons, made UI more compact. Fixed a few problems that were introduced with the IniFile change. Made minor changes to IniFile.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5619 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"53f9858b94973fdaa1699278b3805fe489aaabdc","2010-06-05 16:42:04+00:00","Don't open a tty to display progress.  It is unnecessary and may not be available on some systems.  This breaks builds in clean root environments which do not have /dev/tty.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5620 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"7d0f03cb61686f3e82eb0850bf8633484928d6dd","2010-06-05 18:52:56+00:00","Don't store the absolute pathname of plugins in the configuration file,
just the basename like libPlugin_foo.dylib. Dolphin then loads the
plugins relative to the compiled-in plugins directory.

This means that you won't have to reselect the plugins when running
different builds (in different directories) and is most obviously
beneficial on OS X where application bundles are not (should not) be
expected to stay in the place where they are first installed.

This is tested on OS X and Linux with local/global build options, but
not Windows. I don't anticipate any problems on Windows, but that OS
does have slightly different semantics with regard to path component
separators and file suffixes, so it's something to watch out for.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5621 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"5c335a8c85c2d24247d9c0510014982dee00d49f","2010-06-05 19:03:37+00:00","Fixed WXKeyToString which had several problems, mostly just to get
hotkey configuration working with wx 2.9, but it turned out to be
too tempting to use it to hack up OS X keyboard support using wx
key events in the 'old' input plugins.

It was with some reluctance that I used PAD_Input (and copied it
for Wiimote as well) as that is clearly a deprecated interface,
but this way the hack is contained within the old plugins for when
the switchover to ControllerInterface happens.

The idea is to provide stable keyboard support on OS X for both
GCPad and Wiimote while we debug HID keyboard and real 'mote code.

It works pretty well, although the wx approach does impose a few
limitations like no arrow keys and left/right side modifier keys
are considered equivalent.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5622 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"c130aa7a3628e563b7ac572e0ce8530b83f250dc","2010-06-05 19:17:17+00:00","Accept more special keys in previous.
Still doesn't make arrow keys work, though.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5623 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"1aac546185b82f42b44f474297ee09785bb70cbc","2010-06-05 21:48:38+00:00","Plugins build fix

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5624 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"5341bbad3acb3f52d0151083c243913f00061e7c","2010-06-06 03:52:11+00:00","Made new Wiimote plugin not deinit SDL on shutdown. (Hacks, same thing old wiimote does, fixes the crash on emulation stop, refresh button still causes crash (damn SDL)) Minor new input plugin GUI changes. (left-click on rumble button opens control config dialog) Made NetPlay save/load settings to Dolphin.ini. Allow NetPlay host to adjust which/how many pads will be used in game. (more than one gamepad per Dolphin instance can be used on NetPlay) Worked on wiimote NetPlay a bit. (still nonfunctional) Improved SDL device numbering. Added some major hacks to ControllerInterface/SDL so XInput(360 controller) devices do not have their SDL interface shown in the device list on windows. (caused confusion for users)

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5625 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"9c3c7c544324f91b6ffbeab8daa56070e3929d10","2010-06-06 04:02:16+00:00","Implement pulseaudio output.  It is rather crude but seems to work.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5626 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"08636392b6e33d5fb1fb5d5d2b9a56537fa2c2a9","2010-06-06 05:24:26+00:00","compile fix


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5627 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"0af55bd85bda4b978a3ae000258dfe6e72a63139","2010-06-06 06:28:18+00:00","Improve the SDL/XInput hackery of my last commit. Fixes the device refresh button crash.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5628 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"b20c04aa4553cc04bdc7bec8c2ed97e581c5fc29","2010-06-06 14:44:35+00:00","git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5629 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"f4abbdf6b154c8f6cab2a4ac8be04a5e39bead55","2010-06-06 21:06:58+00:00","Fix nowx build.

We really should integrate the nowx functionality into the main build,
removing nowx and HAVE_WX checks and turning USE_WX into a variable
that defaults to GUI use but can be overridden at the command line.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5630 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"f78332a2595ab6c26301914bd87a8f8c27e87a01","2010-06-06 21:14:56+00:00","The openal and noao parameters are no longer necessary.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5631 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"3603f05398469a9c04b2fad707deb43312366b37","2010-06-07 16:02:25+00:00","Shift-JIS is not available on most linux platforms as it is not unicode compliant.  Substitute EUC-JP instead.  Should fix issue 2736


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5632 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"91e1d053d3e6f96322febcb07286c903ea8ad246","2010-06-08 02:03:44+00:00","Missed one instance of the Shift-JIS font.  Hopefully this fixes issue 2736?


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5633 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"e6810baa6f507fbec4536a694213f0018c8f6d30","2010-06-08 02:56:00+00:00","small fix for a bug introduced in 5614

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5634 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"79b20494be82b7847df14ad708ab3dc69371a000","2010-06-08 13:28:12+00:00","Fixes a crash in the DirectSound back-end.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5635 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"dacd557f57c73043155c06c060370df9789eb98c","2010-06-08 18:46:02+00:00","dsplle - cleaning

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5636 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"4a0c8fc0c9b6666e7933683260e2befbc81917ff","2010-06-09 01:37:08+00:00","Hg:
enable newline normalization
get revision number via `hg svn info` for svnrev.h
ignore incremental/generated binary files (windows/VS at least)
leave a comment if some files need native eol set in svnprops

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5637 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"b3046be7ad38203e1f96d04ecaad42ab67c3bf50","2010-06-09 12:05:00+00:00","Aligned ARAM DMA to 32 byte boundaries and multiples of 4 bytes in length

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5638 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"9d792d4673c537c7a0cea80fcfe6b2252d89e23b","2010-06-09 15:33:01+00:00","added ssaa and efb scale as separate configurations:
efb scale :
auto fractional: the original scaling way, will grant a 1:1 pixel mapping between efb and screen giving the best image quality even in non standard resolutions
at the cost of glitches in some games.
auto integral: automatic but only int values for the scale, no glitches but only the correct pixel scaling when using some resolutions.
the rest are the fixed scales.
enjoy.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5639 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"e648c6d68b4bc37af591a03d94ec2cb3099ea59a","2010-06-09 19:36:08+00:00","Overhaul of OS X real Wiimote support.

Fixes a number of problems, including unreliable connection setup,
frequent disconnections, busy-waiting and shutdown deadlocks.

Motion Plus and nunchuk hot swapping now work and Wiiuse does a small
amount of queueing to prevent occasional dropped packets. The OS X
bluetooth stack has no internal input buffering and while a worker
thread can easily keep up with data coming from the Wiimote, the rest
of Dolphin can easily get behind if it is blocked by disk I/O or
similar. Mostly the Wiimote protocol recovers from dropped packets,
but sometimes the Wiimote would get out of sync and send a disconnect.
I wonder if the other platforms might benefit from a bit of queueing
at this layer as well.

Still doesn't support multiple devices, as I kept changing my mind
about how best to do it. I only have one Wiimote anyway..

One improvement to the Wiimote plugin that would be really nice would
be for the scan for new devices to operate continuously or periodically
like on a real Wii rather than just for 5 seconds at startup..


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5640 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"9016c90d470bf3382b8f65faad48d583edf43730","2010-06-09 19:41:17+00:00","Test linking with libsdl as part of its configure test to verify that
the library is of the correct binary format and such.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5641 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"c05c9fa1f4a188c757bd387ded736bdec1328466","2010-06-09 20:03:37+00:00","Use 10.5 compatible API's to get list of display resolutions on OS X.
Patch from user gamepromcompany on the MacOSX_Build wiki page.

Add support for the Mac command key as a hotkey modifier in
WXKeyToString but present it as Control. WXKeyToString is used for
both hotkeys and menu accelerators, the latter only supporting
Shift/Alt/Control with wxWidgets.

wxSpinCtrl on wx 2.9 has a very small default size, so give the
window size ones a reasonable size.

Use wxFULLSCREEN_ALL when switching to fullscreen, which gets rid
of window decorations like the title bar. Note that to actually
be rid of it with wx 2.9 on OS X, you'll need this patch:
http://trac.wxwidgets.org/ticket/11701

Also remove a couple of files I had accidentally duplicated.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5642 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"5845ff6728fbdd945230608ed660bdf4132c9787","2010-06-09 21:19:23+00:00","build fixin', warning fixin'.
Thanks soren for the macosx fixes, this fixes the windows build and eliminates some warning from the same.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5643 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"de45e015cdecd94a601573d37afbdf5b6f19efa9","2010-06-10 10:30:41+00:00","Fixed a silly math bug from r5638.  Thanks ector!

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5644 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"404c625622c4e706dfed9a62b5480ee4d7a33544","2010-06-10 14:18:21+00:00","Simplify the SCons build:

On OS X, build all code as Objective-C(++).

Centralize framework handling.

Cleanup.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5645 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"ce82c43bb7b71087518395de434f1ef49468df48","2010-06-10 14:39:08+00:00","Disable the Wiiuse banner and instead credit Michael Laforest,
the original author, in the About dialog. Ok'ed with him.

WX doesn't reflow text terribly well, so format it manually.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5646 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"0b00faa378451721301d4b0741fc754b7b281c1d","2010-06-10 15:33:51+00:00","Oops, how did this happen?


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5647 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"b7c2e523b35bca5ba0a4a361780a58aa74552bbc","2010-06-11 08:39:03+00:00","Treat strings from external sources as 8-bit so FromAscii doesn't barf.
Ideally we should be more character set aware, but at the moment we
use anonymous 7/8-bit strings in too many places.

Fix use of AddGrowable{Col,Row}. Any (non-zero) rows/columns must
have been created first by adding an item to it.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5648 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"e7f7eff2b6c93fbe50b2bb389d9a3ad3bffdbf07","2010-06-11 08:51:46+00:00","Remove a few unused HAVE_FOO's and make the SDL check global.

ulong is not a standard type.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5649 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"d937b73d9c3bc6919ebdcbf40065fbb5309d2dd9","2010-06-11 15:18:36+00:00","Cure some bit rot and allow building the standaline memcard manager on OS X.
The app appears broken though.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5650 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"ff5081942ad26557a5c6eddfb44d19fd99964ad5","2010-06-12 02:08:01+00:00","New GCPad/Wiimote: Hopefully fixed lock up issues with DirectInput devices. Wiimote tilt should work with keyboard keys/gamepad buttons now as well as IR Forward/Backward(which was added). Made input detection buttons display '[ waiting ]' while waiting for input. minor fixes/cleanups.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5651 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"7efbc879e544cba7f205b3eeaeff050f46fd9607","2010-06-12 02:27:51+00:00","apply svn:eol-style native to all of Source/*

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5652 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"ce3c2700e7fd4226905b2ed652aded96d44eebd2","2010-06-12 12:36:33+00:00","This commit is separate in two parts:
Fix: fix for lighting equations , that must improve lighting in a lot of games (  test smg :) )
experimental speedup: implemented alpha pass using stencil buffer instead of a duplicate shader. i recommend to test this well as i dono if will work the same way in all the systems. i my system it gives a nice 2-5 fps improvement. if it brings problems in any system or game will revert asap.
enjoy

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5653 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"a82adcd5d36a61abcf06d3b7de335002c4f0bea4","2010-06-12 12:57:28+00:00","Made GCPadNew load the same defaults as old GCPad if GCPadNew.ini doesn't exist. (haven't tested Linux/OS X)

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5654 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"6a942c1090d11da798b7c9ffe33603226a8ebdd3","2010-06-12 13:19:26+00:00","Fixed 'Mode' problem of my last commit.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5655 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"ebbe2d905cd13dee04828400d8aa0beb96452377","2010-06-12 13:50:24+00:00","Delete the old GCPad plugin. GCPadNew should now be better in pretty much every way, so it's time.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5656 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"b336617cbf2b2e0e40d68d0f10012e589f596752","2010-06-12 14:05:12+00:00","Convert xlib keynames to uppercase to be consistent with Billiard's defaults and keep the GUI pretty.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5657 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"f0d178122ed33972360ba9c268b0f814e45e0536","2010-06-12 15:38:42+00:00","revert my last change to vertex manager as the performance difference is negligible an causes performance drop in higher definitions

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5658 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"a6ebc8234f4e5aef62fb0ccf55dcf83211168896","2010-06-12 15:49:21+00:00","Preparing stuff for DX11:
- be more strict with the input signature of generated pixel shaders
- replace the D3D parameter with an API_TYPE one, so that we can further distinguish between DX9 and DX11
- for what it's worth dx11 (using vs_4_0) doesn't support D3DCOLORtoUBYTE4; added a workaround for this
- add a 'dx9-' prefix to the shader cache files to avoid conflicts with dx11 shaders

Apart from that we're calling CommandProcessor::Shutdown() in main.cpp,Shutdown() now.
Delete all files in User/ShaderCache if you want to save a few KB disk space :P


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5659 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"3e3aa2364e4ed6c3fe3be9331b7d0827adf9042f","2010-06-12 17:15:16+00:00","(cleanup) add some missing license headers

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5660 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"1cd25e2406ea370cacfb82ec6dc164153052ca9d","2010-06-12 17:39:33+00:00","(cleanup) InputPluginCommon is dead. Long live InputCommon and InputUICommon.

I hope I didn't break the mac+linux builds - if i did, fixing it should be a simple matter of adjusting the sconscripts.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5661 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"393aa36fc22826d00e4bca6f5ba5a8ae02bc114d","2010-06-12 17:55:21+00:00","unbreak build.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5662 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"caab5f62adbc396596907fe555246c586eeb8d00","2010-06-12 18:45:39+00:00","(cleanup) Delete an awful global variable (g_plugin in ConfigDiag). Rename the Plugin class in InputConfig to InputPlugin, which is better but not ideal.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5663 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"5c7bda49d4c416f4f8707b4372f03daec35d1e02","2010-06-12 19:42:39+00:00","(cleanup) RIP EventHandler, now unused.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5664 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"7c103fbc4ebd556f520a7bc22d42e9967f3b1d51","2010-06-12 19:58:02+00:00","(cleanup) Move WXInputBase into InputUICommon. Delete some leftovers from the last change.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5665 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"5fe57452afeb787b43902ba64c36f650da94364c","2010-06-12 20:13:58+00:00","Remove old silly code that pretended to support loading multiple pad plugins and multiple wiimote plugins, but actually didn't.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5666 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"193677272528b3ebcf30afd2aca6e4dec6a9f7db","2010-06-12 20:33:29+00:00","Linux build fix


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5667 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"ca39437b787f2a6bca57b60c562070795c5e375e","2010-06-12 20:34:58+00:00","(cleanup) oops.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5668 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"615d4e1df85921615b7b5958c8028fc9996cd33d","2010-06-12 23:27:39+00:00","Fix OS X build.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5669 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"8cae2fee56c56fdd87c8b3c11aa6614c6aec7651","2010-06-13 09:14:40+00:00","Merge the pad plugin into Dolphin. Since there's only one plugin left under active development, and it's awesome, we no longer have a need for a pad plugin mechanism.

In the future if we merge wiimote too, this will bring the advantage that the two will be able to cooperate, to no longer fight over control of input devices which can sometimes cause problems.

Thanks shuffle2 for the patience.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5670 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"7c47cd2ae585cbda208c4796b5e1acc1cdba7c7e","2010-06-13 09:26:00+00:00","Rename pluginspecs_pad.h to GCPadStatus.h, and move it into InputCommon.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5671 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"ecffc03e9e1d78eae8525a516adec18320fbac14","2010-06-13 09:34:17+00:00","Typo.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5672 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"a7b8cfc5d0ad81ed95be4364fd16daa780daff40","2010-06-13 09:56:16+00:00","forgotten file, sorry :/

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5673 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"53a86c5d192c51a08ec3cfb8e518d1e94a5ab69e","2010-06-13 10:14:53+00:00","probable linux build fix, thanks cnu.

also remove an unnecessary logging line.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5674 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"6d5da6b9be81e0e15b63c818b595cd338622c068","2010-06-13 12:54:11+00:00","Build fix win32.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5675 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"9123ae323037b93f15dd19682c88804de229c1ef","2010-06-13 14:49:49+00:00","Fix pad configuration dialog on linux


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5676 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"43076bdb91c4582bc272fbc05301d39b40182d7a","2010-06-13 14:52:11+00:00","Oops, that wasn't supposed to be in there.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5677 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"a524cecfabbd4e321485e0cbac9325efde2123ef","2010-06-13 17:23:08+00:00","apply svn:eol-style native to recently added files. please try to remember to do this :)

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5678 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"20e39190332a3b51d6680a9e8dc90eb54cefce72","2010-06-13 19:41:07+00:00","apply James333 patch to make dx9 plugin use wxwidgets.
some other minor warning fixes.
thanks to James333 nice patch :)

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5679 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"3ea2a1387c373b1d8fa186cfe5c0706393b18ede","2010-06-13 19:50:06+00:00","Add a DX11 video plugin.
Might or might not work for you, yet.
Anyway, read the soon to be created forum thread on this plugin before asking any questions.

Huge thanks to rodolfoosvaldobogado for helping me out in various areas.
Also, thanks to everyone on IRC who supported me during development ;)


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5680 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"f7a91ff3cdd258450ce7747d8d5c9fe896770e63","2010-06-13 20:06:29+00:00","Unleash the beast.
Improved dual core mode for 'Metroid Prime 2', 'Star Fox Adventures', etc.

I should have committed this long time ago, but I don't have every game to test compatibility... Any way, better late than never.

PS: If any regression observed, feel free to revert this rev.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5681 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"9255481882a00520adb1eeba6f79bbaed2af9569","2010-06-13 20:08:20+00:00","little build fix for my last commit

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5682 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"9713b8df7d227b7c9a7b8d9c0c68b662ab12b966","2010-06-13 20:19:53+00:00","DX11: Workaround for the default settings:
EFB copying is enabled but set to 'to RAM', which isn't supported, yet.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5683 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"841311a77f2480f39d52328d636ff3cb7c3b6d5f","2010-06-13 22:47:46+00:00","more buildfixing x32/x64 release/debug/debugfast [dolphinwx/dx11]

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5684 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"7e27914b45737117e9ce204330e12f10f79f4e21","2010-06-13 23:26:22+00:00","Revert r5681

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5685 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"c759f7b3be87c8bb83647ae1a18ec7a591908028","2010-06-14 00:13:49+00:00","fixed blending and PC_TEX_FMT_I8 and  PC_TEX_FMT_I4_AS_I8 texture loading in dx11
enjoy

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5686 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"41266b5ed03fb1ea5a48152c6cf85aba4080d6ea","2010-06-14 03:09:44+00:00","fast fix for pixel shader compilation in dx11

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5687 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"4ff200eccc8bd7800763635427a6fa5ca8c37b69","2010-06-14 05:38:39+00:00","Emulated the extra BAT's that the Wii has in the MMU.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5688 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"a0f1797e46014c4134930895d873727fcc117d66","2010-06-14 09:05:47+00:00","Revert even more stuff from r5681.
I have no idea how all this stuff works, but this fixes at least some (if not all) games which worked before r5681.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5689 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"ff50fd188fa82004bea7550fbf1b78903254190d","2010-06-14 12:18:01+00:00","Reverted even more of r5681. Now games don't hang

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5690 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"fc12291806c5f6eb6ba06f0f533d8723808bd129","2010-06-14 14:36:01+00:00","some fixes to my last commit and ....
modify shader generator to produce native sm 4.0 code.
eliminate compatibility mode in dx11 so now all shader must work much better.
please test.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5691 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"857f1f4d38c18cf069f9ffe8b8996d7dbb799f92","2010-06-14 16:32:40+00:00","Fixed GPFifo out of bounds by 32 bytes
Fixed incorrect FIFO out of bounds check
plus a bit optimization of CheckPipe()

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5692 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"b560d2456e5d96335e7bb530054ead7c9b2f5eef","2010-06-14 18:07:29+00:00","Integrate the standalone memcard manager into the main build.

Use 10.5 SDK header files in an attempt to keep us honest and
10.5 compatible. I'd do the same with system libraries, but
the linker gives strange errors when I try that. We also link
against third party libraries from Macports that haven't had
any magic 10.5 compat dust sprinkled over them, so maybe it
isn't very important anyway.

Move the OS X variable section in SConstruct upwards a bit to
have the settings apply to more of the config tests. SCons'
ParseConfig causes problems for the -arch tuples, though, so
the SDL check still isn't quite as comprehensive as it should
be.

Put the XCode project out of its misery.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5693 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"ab7302d2e1496ae6eb97263a5a2efcdf62f5f9fe","2010-06-14 18:10:55+00:00","Garbage collect a few more XCode files.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5694 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"9a76be6edc53bb6ebfb6eb5a8258b086069a8921","2010-06-14 19:20:41+00:00","Add proper adapter enumeration in the DX11 plugin.
Set default video mode format to DXGI_FORMAT_R8G8B8A8_UNORM. This might fix FRAPS recording, but also decrease FPS; test both, please.
Add numerous TODOs


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5695 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"c1ca3ae96c586d3607bb78f2826bd4bb17a73742","2010-06-14 20:08:31+00:00","Optimized FIFO gather a tiny bit.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5696 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"67283e54fcfe663622035d9d0fab616c5f9d89c4","2010-06-14 21:31:23+00:00","D3D11:
Hardcode the backbuffer size again.
Fix R5G6B5 texture converting, textures should be perfect now.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5697 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"6c164cd1619fd447f87d1d707bc72a9c35fc1e24","2010-06-14 21:45:31+00:00","some fixes to dx11, now efb access should work well (smg pulling stars)

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5698 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"673b9ac1791e74449635d5d5e4c32c85c958f33f","2010-06-14 21:55:40+00:00","Implemented accurate BP and accurate Watermark, this should eventually retire FAKE_Watchdog.
AbortFrame is not implemented yet.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5699 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"31e442f11d5461edd10edb4142071ee3967a5379","2010-06-14 22:01:10+00:00","Restore the look of the details/banner tab and limit the size of
the properties window so that a large ISO directory doesn't cause
the window to take up the full height of the display.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5700 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"76a2172ceee62b08a0abb2080344150c9e3831d0","2010-06-14 22:06:12+00:00","more fixes: fixed line and point rendering

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5701 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"0ec6a91477bdfd7070451f6ca273adb5a94b9d72","2010-06-14 22:38:47+00:00","Fail initializing if the D3D11 runtime is installed but no at least D3D 10.0 capable video card is used.
Remove some superfluous checks in the shader caches.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5702 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"bd163db74fb84272b89004a2a24cad4a7ec4cd99","2010-06-14 23:41:17+00:00","DX11: Fix window resizing.
Still some aspect ratio problems though...

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5703 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"cab62472b868c50eeecbd43043f2a76b0983906a","2010-06-15 01:01:34+00:00","Confirmed the ARAM DMA alignment by testing the real hardware.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5704 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"64299206d19938f74caaa5a0a0e1df571c376502","2010-06-15 09:58:43+00:00","I was wrong on the CPEnd issue, which reveals CPBreakpoint > CPEnd is possible and that explains why some BPs could never be achieved before.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5705 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"105f64359a0594dd74144c10c0890a6fd33451ba","2010-06-15 10:58:14+00:00","Games like 'Star Fox Adventures' which were enabled in r5681 are now InGame, though the watermark slows the emulator a bit.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5706 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"40d87e0f8f351fb9bdb1ddd1ff9919f7ddbd7d1a","2010-06-15 11:20:05+00:00","Oops, the HiWatermark interrupt latency is too long for game to react.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5707 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"af9c26ff415abeb3da0764f68ffd68469f11996e","2010-06-15 13:34:39+00:00","DX11: Fix some corruption caused by passing the wrong pitch to UpdateSubresource.
Fix calculation of miplevels in TextureCache::Load.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5708 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"4464c114571a63350da94774733e939d93eee4ea","2010-06-15 14:24:01+00:00","Sorry, I forgot to implement LoWatermark code for SC, now both SC & DC are working.
By now I'm pretty sure some games are written in multi-thread, and they depend on Watermark to suspend/resume their threads.
So without Watermark, they will never work.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5709 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"cb1694252ba3ba1bdc7ad7341e5ffb541e70e580","2010-06-15 21:19:09+00:00","more bug fix in dx11:
fixed screen clearing and simplify drawClearQuad a little
put some nice code from dx11 that i like in dx9.
modify plugin spec preparing for implementing efb poke (is not used often but is a missing functionality so..)
please test.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5710 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"2db54798d7ab1330f3a19914984f7d07e0c3341b","2010-06-15 23:31:13+00:00","Import SDL 1.2.14 and GLEW 1.5.4.

I am not replacing the following header files used by the Windows build,
as I don't have a Windows build setup to test. Please point the Windows
build at the header files inside these clean distribution packages and
garbage collect the duplicates: GLew/*.h and SDL/Include_1.2.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5711 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"391312641c47a52ddf2b0e81840929df6baa3c84","2010-06-16 00:07:52+00:00","Build GLEW, SDL and zlib as static libraries from Externals as with
LZO/SFML/SOIL and subject to the same shared_foo exception options.

This makes building a self-contained distribution package much easier.

TBD: Cg and wxWidgets 2.9.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5712 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"8d2a23e43bbe9fb9e941a5e131ba4242c74367d9","2010-06-16 00:09:33+00:00","Target the desired frame rate exactly rather than n plus one.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5713 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"f8cf2aaa3e637d6e3ff1da99ab1674b10319e388","2010-06-16 00:15:58+00:00","Only call wiiuse with the number of slots we have configured for real
wiimotes, so that wiiuse_find has a chance to return early when that
number is found rather than wait for the 5 second timeout always.

Hide the auto-(re)connect UI elements on non-Windows so as not to
confuse users until that functionality is implemented generally.

Empty strings are not allowed in wxChoice lists.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5714 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"494ba1eba27e353c76d2ae42016a98f5aa2a9343","2010-06-16 00:58:34+00:00","Lint.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5716 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"b0dff2853945c91212d526985293bcc21efc903f","2010-06-16 01:14:18+00:00","Attempt to resolve the conflict between SDL/include and SDL/Include.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5717 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"cefc0b2c6f3d4e72c5122b5495f63ba4aa159b52","2010-06-16 02:57:50+00:00","GCPad/WiimoteNew: Hopefully fixed a problem where devices with extended ascii characters in their names didn't work.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5718 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"9b6ccb4d77efebf6c1db0116b0f3ad346f744899","2010-06-16 07:22:47+00:00","Alleviate FIFO overflown situation a bit.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5719 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"980a2680be7a809f369d4ce978c0d1ce3bb377cb","2010-06-16 09:11:29+00:00","Trim down the SDL and GLEW libraries to just those files we use.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5720 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"4f8a6a1573ef82c5000d8e44ce7d563c4a03ba17","2010-06-16 10:12:57+00:00","apply some speedup to dx11 plugin + some minor stuff

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5721 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"d24e5a37a6c81129df257bc5f07b388942b7373a","2010-06-16 11:39:23+00:00","Build with shared libraries whenever possible on Linux;
on OS X, always build with static libraries from Externals.

XXX LZO/SFML/SOIL are currently static only on Linux as well,
as they have been all along, because of a conflict between
CheckPKG('FOO') and the SHARED_FOO conditionals - on the second
build run with static version of these libraries, CheckPKG picks
them up, negating SHARED_FOO and making the code try to include
the canonical locations for these packages. The easiest fix is
probably to adjust the relative pathnames for those header files
in Externals, so that the same ones are included in the shared
and static cases.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5722 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"ce3eb2a13be7f062d926cf0e068f5e689c7a5bab","2010-06-16 12:42:49+00:00","Automatically detect and use shared library packages for
LZO/SFML/SOIL as already done for GLEW/SDL/zlib.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5723 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"762ce28977725bedb87af3e2ced49aa3563b541a","2010-06-16 13:36:40+00:00","DX11:
Disable D3D10_SHADER_ENABLE_BACKWARDS_COMPATIBILITY when compiling pixel shaders in Debug configurations as well.
Properly support centered text drawing, even though it's not used, yet. Credits go to xsacha for this one.
Found an awesome hacky way to free the buffer memory used by ReplaceTexture2D. At least it gets freed at all now...
Various other tweaks to texture conversion.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5724 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"221e722284decd25eec561ebe29b9d3314b1cae9","2010-06-16 14:22:17+00:00","Linux build fix.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5725 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"05915922c5ec95f40f29a6a3051dfa7007dc80aa","2010-06-16 14:55:21+00:00","Hopefully fix Windows build.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5726 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"b63e15e412804288f679c3a577b994050f3956cc","2010-06-16 16:35:19+00:00","Don't try to link with dynamic versions of the LZO/SFML/SOIL libraries
on Linux when building a release image to make it more general.

OpenCL is new in OS X 10.6, so we can't restrict ourselves to the 10.5
compatibility SDK when OpenCL is enabled.

OpenCL really should be a runtime option (and weakly linked on OS X).


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5727 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"4f339ebc822085394234ff3a4c4288b6de8abe02","2010-06-16 23:25:19+00:00","DX11: Introduce a D3DBlob class.
Advantages:
- easier to use
- drops our dependence on d3d10.lib, without depending on the June 2010 DX SDK
- makes finding unreleased buffers easier
- possibly more ;P


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5728 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"49674400e0c3c9f71aa4aa198ea6f188a22d6ba8","2010-06-17 01:18:22+00:00","On linux make the build default to autodetection of glew, sdl, zlib, lzo, sfml-network, and soil, with an option to override the autodetection to force a static build.

MaxOSX will always use a static builds of those libraries as per soren's wishes.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5729 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"91d540ad67e4d8daadf78da91490f6161df4d664","2010-06-17 10:42:57+00:00","DX11:
Fix all remaining window resizing issues.
Implement screenshot functionality (doesn't seem to work completely, yet).
Assign debug names to (hopefully) all remaining device objects.
Flush the GPU's command buffer in Close() to make the ReportLiveDeviceObjects output clearer.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5730 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"e26634716026ba0860a93c644b16f320c3312a48","2010-06-17 12:09:56+00:00","DX11: Use D3DX11FilterTexture instead of ID3D11Context::GenerateMips.
Test if performance changed in any games by this change, please.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5731 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"0a46dead9c2a00e2c1c1bc9a700916f14230f113","2010-06-17 14:21:31+00:00","DX11:
Implement safe texture cache.
Fix screenshot functionality.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5732 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"0649bf2a00b9ac25febd4d743b9d0d013b6776b2","2010-06-18 14:14:13+00:00","Improve the CHECK macro used in DX9 and DX11 to allow more flexible error messages.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5733 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"ca1a5e922814752b7596772c7145ed8bbeee8e39","2010-06-18 14:18:09+00:00","Actually make use of the new CHECK functionality in DX9.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5734 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"3f633f96bd7504a140d68776a0b8f86e8700f513","2010-06-18 14:51:40+00:00","DSPLLE: some changes i had lying around, get rid of the shifting and make popExtValueToReg do the same as its int counterpart applyWriteBackLog (that is, OR'ing the result of both ops, rather than overwriting the main op result with the ext op result)

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5735 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"1d1af913a851d35f4f32eb613a2513fc62604dcf","2010-06-18 14:55:18+00:00","DX11: Fix flickering when resizing the emulator window.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5736 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"866859493a0bec5bec56ccd14fd54fe6f9137977","2010-06-18 15:41:30+00:00","DSPLLE: jit increment/decrement_addr_reg to match int (TODO: increase/decrease).
revert the OR back to MOV, since it never happens (according to nakee)

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5737 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"bf36f171a63de208f9d9e0a919828b8e23e04a8a","2010-06-18 18:40:58+00:00","DX11: Add error checking to about any device object creation. Since we aren't handling creation errors that well right now we should at least output an error message.
Remove superfluous _WIN32 checks in DX11 and DX9. Meant to port that code over to Linux or what? :P


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5738 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"b4f5a4d89e575a6d54188d55992643b93bde559d","2010-06-18 18:50:04+00:00","Compile fix.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5739 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"5cfdb2d0c8aba7f7bc07a3c1f3ffec3e66cc20cb","2010-06-18 23:33:07+00:00","DX11: Introduce a StateManager class, might improve performance a little.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5740 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"7b58e0b4e72c18624494730996c29848bafe54ea","2010-06-18 23:45:16+00:00","DX11: Add the two files which I meant to include in r5740 already.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5741 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"08d7861578da48b07286cf80be5d84fbebe52cb7","2010-06-18 23:55:28+00:00","Include the two files added in r5741 in the VC project file as well.
Improve the way we're saving screenshots, thanks to Billiard for spotting that ;)


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5742 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"d7bbddcbd34590b07a060d5bbe7df5d680893933","2010-06-19 01:02:43+00:00","DX11: Prefer DXGI_FORMAT_R8G8B8A8 to DXGI_FORMAT_B8G8R8A8 wherever appropriate.
Slightly modify the way we're doing screenshots once again, thanks to Orphis this time ;)


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5743 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"ab1e5f853703a34f251134ae2da2260a161bd3f3","2010-06-19 07:59:53+00:00","apply a patch done by xsacha :) + some minor stuff :p

what changes do: cmpr decoding is fixed and rgb5a3 is re-enabled

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5744 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"64ffe0039a5ab0b40c6ea1157f4b2f0fc191a598","2010-06-19 12:48:09+00:00","DX11:
Fix StateManager usage in ResetAPIState/RestoreAPIState.
Fix screenshots (finally).


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5745 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"8c6ae1f6f40ec65a1646583a29bbff6bab209821","2010-06-19 13:31:40+00:00","add a path to texture decoder to produce only rgba textures, this will make texture loading in dx11 a lot easier and give a little performance boost to.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5746 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"ccbc1feb0bc7c63cb6c06434d4d0620bef3ac67e","2010-06-19 16:22:24+00:00","D3D9: Fix issue where the shader caches were lost whenever the render window was resized. Add some error logging to LinearDiskCache. + some minor cleanup.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5747 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"208c33f09c6e2ea3810cf89e84aac86bf2496b37","2010-06-19 18:14:05+00:00","Use the new texture decoder path to speed up texture loading in DX11.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5748 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"4ab0e4b8a06f9261d858bbd637780cc7ff1a527d","2010-06-19 21:12:09+00:00","fix for rbga8 decoding that causes problems in nsmbw
fix for screen clearing in opengl and d3d

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5749 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"6e83fe241698b477540267608172b237a3d24bf1","2010-06-20 02:17:53+00:00","win32: Some more work on real wiimote automatic ingame pairup (automatic paired up wiimotes get connected now ingame as well, but it's not completely working yet, we're almost there tho:P) and changed the automatic unpair real wiimotes routine, so it won't get loaded via dll_detach anymore.
minor code changes and adding comments.
And issue fix 2792 with credits to Karloathian for finding and fixing it.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5750 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"be3c06f326bbf783d1fb11d836c685712063d1e3","2010-06-20 05:02:26+00:00","Some more OCL changes : Gives 10x speedup for RGB5A3 on pre-DX11 hardware. Minor speedup for CMPR. (code by xsacha)

plus a segfault fix for issue 2779

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5751 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"c51bb0b010eb32a9de08edff292f9c57c90eb79f","2010-06-20 14:53:29+00:00","ppc: remove an assert and update some comments. Fixes games that would keep complaining about dcbtst not implemented (i've seen one, crash bandicoot for wii)

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5752 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"783390539dfd770b5794114d4e8130b8f5603186","2010-06-20 16:43:21+00:00","Hi! This is my first commit so be nice :)

New OpenCL updates:
- OpenCL bug with ATI SDK (GPU or CPU) fixed.
- IA4 texture loop unrolled. 12x speed up on 4xxx series.
- Completed rewriting RGB5A3 texture decode. 20% faster.
- Redundant code removed from CMPR and RGB5A3 (Alpha, shift).
- Made use of optimised OpenCL functions (upsample, bitselect).
- Cleaner code.

Tested and working with DX9 plugin. DX11 plugin will NOT work due to a recent commit affecting VideoCommon. You can use this file with an older DX11 plugin (~r5730), however.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5753 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"6a88241e64c429fcb9312eb4b1425c34884bb8a0","2010-06-20 22:23:34+00:00","D3D9: Delete some long dead code. Also add one more statistic: number of compiled shaders that actually have unique code (not accurate unless you delete the shader cache before running). This stat clearly shows that in f-zero we create 5x as many pixel shaders as we should, so there's clearly a problem with the shader ID generation.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5754 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"a450fd45d83dda4109c16000933a69361667fcc9","2010-06-20 23:10:55+00:00","DX11:
Make font rendering a lot prettier.
Fix constant buffers in EmuGfxState::ApplyState() to really have a size which is a multiple of 16 instead of 65536.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5755 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"fde15c1bc633792bead817b2f87faf54477765b5","2010-06-21 02:40:09+00:00","some fixes to depth test and screen clearing in dx11, now a lot of the remaining graphic errors should be fixed

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5756 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"9e3b65368873fd26f21e2568b2c67d00ec96d6a5","2010-06-21 03:12:16+00:00","GCPad/New Wiimote Plugin: Individual keyboard and mouse devices are now listed on Windows(2 player with 2 keyboards possible). Improved the ability to map multiple inputs to the same control. Inputs from different devices can be mapped to the same button (example: Mouse Left and XInput A). More advanced mappings such as 'Button 1 or 2 and NOT button 3' are possible. I hope the GUI after right clicking a button isn't too confusing(may change it to be a bit more user friendly). Hopefully, I didn't break OSX stuff by 'const'ing a few functions.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5757 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"11ac672730198322b65e6a5bdbad865c4982e360","2010-06-21 12:29:32+00:00","Revert a hack that snzgoo committed that should not have been commited.  That hack prevents the X loop in GLUtil.cpp from properly detecting events that it should detect.
I don't know if issue 2792 is a valid issue for dolphin.  I think that is a bug in the X server implementation on those distributions of those affected.  I can not replicate it.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5758 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"92c98ac5fa99ab9ef52e67f0dfc3ea404b0d9a18","2010-06-21 13:09:25+00:00","A new update for OpenCL.h.

Changes:
- Strict casting as required by NVidia. Now NVidia cards should work.
- Fixed Alpha CMPR bug.

Please tell me if you find any bugs. Current known bug is the 'Press' texture in Paper Mario that is meant to flash rainbow colours appears black. Other than that, everything should work on every videocard.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5759 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"3650ee2fc52a5d53bfdc6cb2292229c4b04c8578","2010-06-21 17:15:42+00:00","OSX build fix

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5760 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"d0f00cedffc1666a55dbf55f436d3d20ac1d0d57","2010-06-21 17:54:13+00:00","DX11:
Cleanups, documentation, ...
Theoretically enable anisotropic filtering if selected in the config, not sure if it works though.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5761 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"1b5b57bff38868eaa181ebeeb52df9ca0dff6e3f","2010-06-21 18:25:49+00:00","Windows/Linux/whatever build fix.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5762 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"1198ae1c977deb8b653a0bb9350bd85092ed3157","2010-06-21 22:21:06+00:00","Fix color precision problems when decoding CMPR and RGB5A3 textures with OpenCL

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5763 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"c2e32371f6ecda152efe5ec579bea9dd77b0a2ff","2010-06-22 00:52:17+00:00","Refactor and prepare the OpenCL texture decoder for decoding textures to RGBA format required by DX11.
Fix the decoder codepath when OpenCL is enabled and the DX11 plugin is used.
Added the DX11 plugin to the Dolphin project dependencies.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5764 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"2cc5b98f07d7269d8150956a52e1a9a4d94670b2","2010-06-22 03:10:43+00:00","Added OpenCL texture decoding to RGBA usable by DX11 for formats RGB565, RGBA8, RGB5A3 and CMPR

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5765 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"1b670a982594672a6590b45728f2a1d59e6d7959","2010-06-22 06:09:21+00:00","New OpenCL update for DX11
Changes:
- IA4: 2x Speed up for all hardware and ATI glitch fixed (blocky text)
- IA8: 2x Speed up for all hardware
- New DX11 OCL Textures: I4, I8, IA4, IA8

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5766 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"25aca8cc4a7bfa764d1381dd57fd6e75d7039c26","2010-06-22 08:30:33+00:00","GCPad/New Wiimote: Fixed issue 2848 (profiles not saving). Renamed DInput mouse axes to 'Axis [XYZ][-+]' from 'Mouse XYZ...'. Minor cleanup/warning removal.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5767 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"21fb4cb96c7503068b95936b311cef55f818870b","2010-06-22 13:17:01+00:00","Add a toggle option for OpenCL in Config (in Advanced Settings). Default is off.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5768 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"454de392d72d78379a81a887f29f0e39c73f9fc8","2010-06-22 15:10:25+00:00","compile fix


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5769 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"58f42414ba14a847b118f8df4c373aaa67d0405e","2010-06-22 19:35:54+00:00","Fix a copy+paste bug from r5768 (Fixes Issue 2853)

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5770 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"5e81298ef0147bf36c4aaafa35accc2700777bd3","2010-06-22 23:45:56+00:00","boring svn:eol-style native again...

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5771 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"5cf491af642de67342842580ebb8297e284af305","2010-06-23 03:02:15+00:00","VideoCommon: A minor speed up.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5772 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"e706ccc5d063c00bcbafe7d0bddf6c086af7c775","2010-06-23 12:57:59+00:00","Hide OpenCL GUI option for non-OpenCL builds.

From now on if you create a GUI option specific to a particular build, do not gray it out.  Instead do as I have done here and make it not present on those builds.  It may add a few precompiler conditionals that developers have to look at, but that is considerably better than a completely useless option that the end user has to look at.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5774 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"2faae384b3c265d1538be08e785f9f6ac73257de","2010-06-24 04:06:03+00:00","Changes:
- RGBA8 (DX9/OGL): 10x speed up on Radeon 5450, 2x speed up on other cards due to swizzle registers.
- RGB565: 2-3x speed up on all hardware
- Removed OpenCL compiler warnings (eg. redefine).
OpenCL is now optimally complete for DX9/OGL. The code is very fast on all supported hardware. No more updates are needed unless the spec changes or drivers improve. When I started, the OpenCL code was as slow or slower than CPU. Now, using the lowest end radeon that supports the code: a Radeon 45xx mobility, I experience a substantial 2-10x speedup over CPU. The benefits are more pronounced with modern hardware. A Radeon 5870 runs this code 20x faster than a 4550. Even ignoring speedups, the code benefits users by not using CPU for intermittent texture loads (unless GPU is your bottleneck). Instead, the CPU is able to do more important tasks.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5775 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"10b5d2371c97c63cf12b3d88bdd40b341c4fa8ac","2010-06-24 13:28:54+00:00","My first commit :D
Dual Core sync fix.
When the FIFO is processing data we must not advance the cpu cycles in CoreTiming because in this way the VI will be desynchronized. So, We are waiting until the FIFO finish and while we process only the events required by the FIFO.
This should fix Issue 2072 .
This affect to all games in dual core mode.
Please, You can test all games with VPS limiter auto, 60, 50 depending of the game and compare with prev revision.
For example now NSMB in the video Intro has 60 fps (prev 30 fps) :D or SMG does't need anymore FPS Limitter Hack to get 55-60 fps
Beside the slowdowns now are more softly and the fps more stables because the VI sync is almost perfect.
The Core Timing and Fifo modifications are delicated. Please report if this hang any game. Don't forget check with prev revision.
Enjoy it! Thanks to Rodolfo for teach me all about dolphin.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5777 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"3435c0f64791022cff210fe40e39de8e7a6a598c","2010-06-24 15:58:06+00:00","fixed blending in dx9 and dx11
fixed fps counter in all the plugins
enjoy

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5778 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"1133c02660e3228336fb7432df8c2891046416a9","2010-06-24 20:54:03+00:00","Build fix.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5780 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"09af93f84b08bf0dacefae6dab0c6bdc5eb13f2f","2010-06-24 22:53:13+00:00","git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5781 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"72efd56389a13e9c21527ce51384c37b0500757a","2010-06-25 00:00:04+00:00","Set eol-style native on remaining text files.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5783 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"f94eed887bf102123d19f32145cc5162bb9a6bcf","2010-06-25 00:13:06+00:00","Uncomment Ayuanx patch, this was commented in my last commit by error, My apologize...

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5784 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"cd83b44a453dd3ef73d03ed41ef49bff19f7d1e0","2010-06-25 00:35:43+00:00","remove svn:eol-style native from Data/User/Wii/shared2/wc24/mbox/Readme.txt in case it matters.
note the other changed file in Data/User/Wii is a dolphin-unique file (which probably doesn't need to exist anymore), so its properties don't really matter.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5785 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"5abc698000bfd653619bfe2850c0eea851329ee9","2010-06-25 01:20:25+00:00","Build fix fix.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5786 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"434e6b1198edd76a7fb99dbc030e55a04cb62699","2010-06-25 19:31:26+00:00","Small update to fix some cmpr alpha issues with games that use linear filtering. Apparently the colour values matter even though alpha = 0.
Also, remove redundant ANDs.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5787 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"f6d844dac155fe2becfb28054e90f177a45772c9","2010-06-26 02:08:30+00:00","MAJOR and long ago overdue wiiuse and real wiimote sourcecode cleanup. Removed 'recording' in old wiimote plugin and other not necessary functions(EEPROM reading, we 'll just do a reconnect instead to use default accel calibration data etc). Recording is not needed anymore(playback of recorded moves should be still working). Everything the recording feature offered, the new wiimote plugin does as well and even more. The cleanup will ease the port of the real wiimote feature into new wiimote plugin, which is still only offering emulated wiimote support. Billiard said he's now on it.:)
Wiimotes are now slighty more responsive and multiple wiimotes should harmonize now slighty better. This clean up was requested/inevitable and should have be done way more earlier. This 'might' break osx/linux builds, so please test. If your aware of any 'real wiimote' issues please post it in the comments as well(dont forget to state your OS).

Known wiimote issues:
1.) Possible wiimote disconnect on pressing the home button
2.) 1-2 Possible wiimote disconnects directly after starting a game
3.) Rumble causes lag. I don't think this is a wiimote plugin issue itself, I'm not sure tho. It would be interesting to know whether the lag still happens on emulated wiimotes as well, when the game tries to rumble.
4.) Connecting(pairing up and refreshing) a 2nd/3rd/4th real wiimote while having a game running/paused, might swap player slots and cause disconnects at that moment.
If u have more issues, feel free to post them, to have them all here collected once more to get a brief overview.
Apart from that, increase the wiimote read timeout @settings(20-200). If your  expecting frequent disconnects, restart dolphin, and don't open the wiimote gui before playing instead directly start games.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5788 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"ebb49c28f70b595ddf50870a4c0d67e51650ba42","2010-06-26 03:02:57+00:00","Fix scons build.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5789 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"e07a9b107a5f8dcd185512762521821daa3ae29c","2010-06-26 03:07:07+00:00","JIT fix.  Brings back the speed lost in r5378.  The memmap function was incorrectly marking virtual memory as real memory.  Fixes issue 2653.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5790 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"67d5d89388feed96f0c30f91e26c079c94496858","2010-06-26 10:46:13+00:00","Starfox Adventures DTK audio loop fix (thanx to James333)

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5791 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"ebbfba62a0259602feecaf3a1ecb3e2992880b3c","2010-06-26 12:52:57+00:00","On OS X, add autorelease pools to the cpu and emu threads to avoid
leaking memory. This is necessary because the wxgl code called from
those threads relies on deferred release.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5792 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"a53d0cb6d5eef410a07679c9f7741f0cef853ba1","2010-06-26 13:03:25+00:00","The ControllerInterface API has the notion of an 'id' which is presumably
meant as a ideally persistent device instance number.

In a dynamic environment such as when dealing with USB/bluetooth HID's,
I am not sure how much sense such an id can make and it would probably
be better to identify devices by an opaque blob (and a printable string).

In any case, the OS X HID manager does not offer the illusion of a
persistent integer instance identifier.

A string in the form of the device's own name is not sufficient as on
e.g. my Macbook Pro, there are three HID devices all bearing the name
'Apple Internal Keyboard / Trackpad'.

For now, hijack the ControllerInterface id to mean the the HID usage
page number. This at least separates keyboards and pointing devices,
allowing the keyboard to be selected in the configuration dialog.

Also some minor cleanup.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5793 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"2be444965a4c03ca29e0219ed98f40a5068af724","2010-06-26 13:07:33+00:00","When checking to see if the rendering window has focus, there are a
few different variations that can be true depending on circumstances.

This would likely cover the _WIN32 case as well, but since I don't
pretend to fully understand just what is going on with wxWidgets
here, I can't really call this any less of a hack..


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5794 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"7ce5e5d1bd0282d40d7b79f12018cb178051643c","2010-06-26 13:11:34+00:00","Config.h should never be included directly, but rather through Common.h
for portability.

(It is a bit unfortunate that some of the plugins have a Config.h of
their own, which can confuse this matter.)


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5795 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"8c3ed5dc46de6ef36ebd241af3600848a56a36ca","2010-06-26 13:12:28+00:00","Lint.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5796 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"10b76db391cffa7863efd06d394670a20c0fdc6f","2010-06-26 13:29:44+00:00","Link the OpenCL framework weakly on OS X, so that a binary built on 10.6
with OpenCL will also run on 10.5 without OpenCL.

Build with OpenCL by default now, but keep the opencl build option around
until Linux also links OpenCL weakly, at which point it can go away.

Start to merge in the actions required to make the OS X application bundle
redistributable into the main build and let bundle=true be concerned only
with the optional step of creating a dmg.

Some people are building binary snapshots for OS X without applying the
install_name_tool fixups and besides, osx_make_dmg.sh doesn't fully handle
the internal dependencies between the wx libraries, so we need to be rid
of any external dependencies by the time 'scons bundle=false .' finishes.

Ideally we should just use static builds of the wx libraries, but the flat
namespace used by Objective-C for anything other than normally linked
dylibs (sadly not dlopen'ed dylibs) makes that difficult because both the
main binary and the plugins have wx linked in without any symbol ordering.

TBD: Either do automatic install_name_tool fixups for both the main binary
and the wx dylibs or find a workaround for the flat namespace problem.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5797 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"958e9bd1e096c002a154f217c084041d1ad436d0","2010-06-26 13:56:29+00:00","Oops.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5798 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"20fd23752fbe3cd50a4ded454e35db2a8ba1bf4a","2010-06-26 14:10:02+00:00","Put back the store removed in r5790. JIT on OS X crashes without it.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5799 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"79992ca7e088ccd59f777c06a1e68a52f2620176","2010-06-26 14:16:19+00:00","Make OpenCL builds 'not' the default for linux and OSX.   If OSX wants OpenCL to be part of the default build you can change this specifically for your platform.  At this point there is no standard OpenCL library for linux.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5800 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"8bfb17bba198f19031d23bed8b71e1d004ad6f0b","2010-06-26 14:54:43+00:00","Config.h needs to be included in CommonPaths.h because CommonPaths.h is included in Common.h before Config.h is.  If you want to find an alternate way to fix this so that Config.h is only included in Common.h watch for circular inclusions next time.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5801 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"b372fe43292d0a4ee86921e29435000c2b86bb69","2010-06-26 16:48:57+00:00","Set g_Config.bNumberRealWiimotes as volatile.  Otherwise connected real wiimotes are not acted on.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5802 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"9de9ec1fb69f5e93fc3b7fe30cc16e1032e3a4ae","2010-06-26 18:50:22+00:00","It would appear that FindFocus() is (differently) broken on Windows.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5803 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"d18085c3adaa3e1724a19bf6f058fda21c7fc3be","2010-06-26 19:17:43+00:00","Don't bother using autoconfiguration to find the OpenCL and Cg
frameworks on OS X.

Try to be a little clearer about which configuration options apply
to which platform(s). Should pave the way slightly for win32 scons.

We have accidentally been using LUA_USE_LINUX on OS X all along.
Turns out that LUA_USE_MACOSX is for an ancient version of OS X and
LUA_USE_LINUX is a reasonable set of defaults for modern Unices, so
just keep using that.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5804 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"18ccffdb64a36a9eaf1e7e282efe19e7ef67afb2","2010-06-27 14:04:49+00:00","Load the d3dx11 dll at runtime instead of linking directly against it. Should make DX11 usuable again if the DX SDK used for compiling is newer than the runtime dlls used.
Various little tweaks and fixes, mostly to fix D3D11 debug layer warnings.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5805 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"d256dd2083e10b6a4e8ca2b85d201a3930a0f9d2","2010-06-27 16:08:54+00:00","Drop d3dcompiler_xx.dll dependence, using D3DX11CompileFromMemory instead.
Hopefully solves the remaining issues from r5805.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5806 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"374999d750dc91838aea9feedf8b28871d66623f","2010-06-27 17:52:02+00:00","Use the int/wxString[] ctor for empty wxChoice instead of the wxArrayList& one (which is probably a bad idea when passing NULL).

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5807 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"685bae34e511aa2632807c7e7ae6bfd37b4c60d8","2010-06-29 02:23:09+00:00","Dynamically load OpenCL on Windows with CLRun. There shouldn't be the need to make a separate build now or download a big SDK to link Dolphin.
If compilation fails, rebuild the whole solution as Visual Studio struggles with the not so complex project dependencies.
ATI users still need to install the Stream SDK as it's the only way to have an OpenCL driver.
NVidia users just have to install a recent driver (version 197 is tested and working).

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5808 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"8315aa143274d4ddaabceeaa681294b239a62adb","2010-06-29 09:15:29+00:00","Fix some projects to include CLRun/include to find the OpenCL headers.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5809 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"aa43f0a575001a84228b88efc130a719fd0b3023","2010-06-29 10:23:15+00:00","Fix DebugFast/win32 build configuration

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5810 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"4afe48a0fb2975dfc2bae58b115725bf94aa6d20","2010-06-29 10:23:40+00:00","Check for weakly linked OpenCL.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5811 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"d511b506120ccc8030b8773e73583365fd38de36","2010-06-29 14:40:37+00:00","this commit is divided in 4 parts:
1 - Optimize pixelshadergen to avoid redundant register overflow math, with this if a game don't need this will be not applied.
this must bring some fill rate back and improve speed a little in fill rate limited systems.
2- some corrections to vertexshadergen to avoid uninitialized texture coordinates, dono if is the correct way to fix it but t least it will make house of the dead overkill playable in dx11.
the bad thing: still missing geometri in dx9, in dx11 it works exactly as on opengl.
3 - some optimization made to improve fps a little wih the latests changes made to fifo.
* back to the original code in beginfield as now it will work right.
* check for efb access more often as a lot of time is lost waiting for efb access
4 - apply a little fix for missing textures in nvidia opengl tanks to  Wagnard28 for finding that nvidia does not like invalid shader id :)
please test for any regression

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5812 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"a52d2f0cccca25febbc19af5ebfa5d04d6d7519e","2010-06-29 16:54:15+00:00","little fix for may last commit

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5813 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"46b70bbaaeeb6a180c522a7d6a9e6fe95cdafed1","2010-06-29 22:44:09+00:00","eolz

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5814 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"599a4c974d949ef5fc587f3084f5c88ac23539e5","2010-06-29 22:51:40+00:00","add some patterns to hgignore

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5815 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"89c4068663ca961cd9cec40c94eac4bf0f2d6583","2010-06-30 16:17:20+00:00","Fix a bug in DSP Jit where branches had a blockSize of zero.
Add some useful checking to J_CC/SetJumpTarget.
Refactor increment/decrement and reuse code with increase/decrease.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5816 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"2455037d26fc954d2201da42b9cc5245c80778b4","2010-07-01 12:51:55+00:00","little fix for an error introduced in my last commit, thanks to Soren for pointing the error

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5817 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"6cacc52ebfd9881eead9c5abd7bac3b2ce01007c","2010-07-02 15:48:42+00:00","Fix a bug in wiiuse that prevented a wiimote from being disconnected properly in linux.  Also fixed a bug in wiiuse_set_leds on all platforms.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5819 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"12a676c27372c8707453d22fd7bda9d0f9318a43","2010-07-02 17:09:53+00:00","this is a pure optimization commit:
return to the  old values in constants in pixelshader, the old values give mi 3 or 4 fps more,(maybe some kind of compiler optimization) in some games and with the current algorithm i notice no difference with this values, please report any problem.
optimizes SSAA to make it a little faster and, the quality should be the same but with a little speedup.
change the way the frame is processed depending is xfb is enabled or not to make this a little faster.
please test and report any problem

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5820 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"0dc8833396ab26377b4cd1ba952371e74b94e739","2010-07-03 04:56:37+00:00","A multi-interface listener, threaded approach to UDPWii

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5821 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"0bf3dfda036f1da0cb26e1f266ea500fbe74f872","2010-07-03 08:04:10+00:00","New Wiimote Plugin: Added real wiimote support.(only tested on Windows, still a few probs: after refresh alt+F{5..8} x2 is needed) New Wiimote/GCPad: Re-merged Keyboard+Mouse for easier kb+mouse configuration, like before.(DirectInput doesn't support individual kb/mice anymore like I thought it did) Fixed some bugs and maybe leaks in GUI.(got rid of evil dynamic_cast) Renamed stuff from DirectInput to DInput, cause it's shorter and rhymes with XInput, I guess. (I remembered eol-style native, shuffle lost his job :P)

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5822 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"2a3aa881fdf62713e3e8aa81e53ace20f6ea977a","2010-07-03 10:24:55+00:00","Rename the /e command line option to exec. Caused some confusion in Issue 2891 since it is not limited to ELF only.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5823 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"10e625a11a23a8fb7397dec3412d64cb95d7a8ce","2010-07-03 10:34:13+00:00","PluginWiimoteNew now needs libwiiuse.

Treat external data (configuration file and device names) as 8-bit data.
Character set mapping is not ideal, but at least such names can be used.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5824 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"dc8778e2d9bd03a1520ac718c55730e8c6da10b9","2010-07-03 10:54:55+00:00","On Windows, wiiuse_find implicitly does the equivalent of wiiuse_connect
as an accident of implementation. On other platforms, an explicit call
to wiiuse_connect is required.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5825 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"a054cc71b676f79088026b722ed244beabfade98","2010-07-03 11:20:38+00:00","Fix some fail logic and a lil prob with UI when changing source and clicking 'Refresh'.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5826 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"2ed8a4331efc61c0cd2e3228e8e125a417d16400","2010-07-03 13:05:55+00:00","Fixing delayed input issues in new and old wiimote plugin for real wiimotes. Having more than 1 real wiimote connected but not connected all of them also ingame it, caused heavy delays of active wiimote input.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5827 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"e34a8baa82a41bf3926b700b87ad8f65aa15a76a","2010-07-03 16:47:49+00:00","Fix a segmentation fault when attempting to load an invalid plugin.
Removed an erroneous fprintf.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5828 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"2074b2ef8e3ba04fe84f59c2ea5b089c23749919","2010-07-03 17:08:41+00:00","Fix the undefined symbol in the new wiimote plugin on linux.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5829 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"6cc3e4ba14e7028c9f9dd0edc94d90d3164c0dfb","2010-07-03 19:10:23+00:00","Add the patch from Dragonlord for broken Cg 2.1 on Linux with ATI cards (Fixes Issue 2508). Shouldn't affect anything else than Linux, please test it there.

Update Issue 2508
This should take care about the black screen. Please open a new issue for other problems that may arise.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5830 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"2e6a9f98059c95898bba6ea6ce1039ad71998988","2010-07-03 20:14:57+00:00","New Wiimote/GCPad: Fix segfault prob in Linux.(thanks glennrics) Some minor changes to real wiimote: force continuous reporting off, since only the last data report is used currently.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5831 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"8e4ef9b9e560909876c3860ce4aae1c4e66d8874","2010-07-03 21:21:28+00:00","Slightly change my last commit with sorens idea of using CG_VERSION_NUM instead.

For everyone having black screens on Windows: Try switching off MSAA, it seems to be broken (at least for me)

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5832 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"f158ca82af7c94323c0d7093e9e24b3d4f15f897","2010-07-05 02:05:47+00:00","Debugger enhancements:
* Added JIT breakpoints functionality
* Added a menu option to disable the JIT block cache
* Enabled single stepping in JIT mode as a run-time option (automatically enabled when the debugger is used)
* Enabled the missing JIT Off menu options
* Removed the JIT Unlimited Cache hack



git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5833 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"fccacd7f62e6bfcf945b23e5e14c857b762fa9a8","2010-07-05 03:58:59+00:00","Build fix

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5834 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"ca827b99309b0aea15df07a176ab3cf3c5840d95","2010-07-05 10:46:32+00:00","Added UDPWii support to the new plugin. Hopefully I didn't made a mess... Nunchuck support not implemented yet. I want to make it a separate extension.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5835 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"c8ddcb9df151ed68fe5cc0a60b16754f9390a837","2010-07-05 13:51:01+00:00","Added nunchuck through UDP support in the new plugin.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5836 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"bd4d583ea91d9fc3eee6af1d194934061be9ff86","2010-07-05 14:57:25+00:00","Non-intrusive nunchuk stick. The received stick only kicks in when the stick configured in settings is untouched.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5837 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"f3901b6b43f31db0675a9bdf9b3f68edea549b40","2010-07-05 18:31:57+00:00","Fixed linux buid... hopefully. Sorry it took this long.... I had to do a complete rebuild :p

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5838 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"19cdaaae89b23865980f27aa4f8ef71272319328","2010-07-05 19:27:08+00:00","little fx to solve issue 2897

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5839 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"3e08208f42a2a881d91cb9eb5f691feb3e4024c3","2010-07-06 01:37:34+00:00","Linux build fix, code cleanup, and compiler warning removal.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5840 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"5133793c6c1b5d1ffe25d8c285bcdab5cb858407","2010-07-06 07:21:35+00:00","Swapped out UNLIMITED_ICACHE for FAST_ICACHE in both the JIT and JITIL recompilers.  The ICACHE is the instruction cache emulation of the CPU.  In my testing, FAST_ICACHE was more compatible than UNLIMITED_ICACHE.  This also means the icache emulation will be consistent between the PPC recompilers and the interpreter.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5841 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"e9e12ff100b0f92e6a6acb39d9d8574b75658428","2010-07-06 13:14:51+00:00","cleanup + some eolz

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5842 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"0e2b4d83068d9cef6b16025ea8ba649fb821045c","2010-07-06 16:16:07+00:00","Implement proper thread naming on linux.  This fixes a segmentation fault with thte wiimote new configuration dialog when a thread was named without first calling ThreadInit.

Also take care of some more eols.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5843 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"0f5998d3584b4785c0981c77a9bb51c5396d9372","2010-07-06 17:21:24+00:00","little fix for error introduced in shader generator in R5842

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5844 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"464bac82ffbf6bab5aa5cd3410694650a16ea84a","2010-07-06 22:10:15+00:00","somo improvements in vertex manager in dx11, may spedd up things a little.
i made this changes trying to found the origin of the sps in zww and sms but no look so far.
the code is looking nice so commit it

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5845 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"539f63b58b2be74d5d50323d3acc1a62f4cdd11e","2010-07-06 22:27:13+00:00","ok, here goes a really experimental commit:
replace efb to ram implementation by a hybrid approach.
explanation:
when copying from efb to texture, instead of make a copy to a texture or to the ram, copy the data to both, in hi quality to the texture and in native quality to the ram.
then instead of re-decoding the data from ram (very slow) use the data in the texture.
to improve this even more, test if the cpu has modified the data in the ram copy, if so, update the texture in memory and mark it as dynamic to avoid redundant work in future frames.
having all this implemented this is what is archived:
sms: full quality with scaled efb copies and fully functional goop cleaning :)
ztp: efb to texture speed with full map support.
nsmbw: this is a hard to emulate game, as it make a lot of shading and texture modification in cpu. it only have 35 fps in my system with new efb to ram but is 10 fps faster than normal efb to ram.
this game also show me another unimplemented feature, copy efb to multiple textures at the same time (is used to animate coins and other things in the world).
this is a remaining todo in efb to texture.
a lot of games should improve, so please test and let me know any regresion caused by this commit.
if everyone likes this the next step is, implement efb to multilpe textures and merge efb to ram and efb to texture.
then port to the other plugins.
enjoy.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5846 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"c37bca75b656a6ecded15f7a6ab55856ff4f382a","2010-07-07 02:19:16+00:00","Make the refresh button on the Wiimote New plugin add new wiimotes in linux, instead of disconnecting and reconnecting those that were already connected.  This makes it possible to connect new wiimotes during a game by openning the wiimote configuration dialog and refreshing.  You still need to tell dolphin that a new wiimote is connected using Ctrl+F5-F8 or the corresponding menu entries.

Also fixed a segmentation fault caused by the UDP Wiimote stuff when a thread was not properly ended.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5847 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"0ad71eda6bc435cfec41a44f2d792f6cb95a240a","2010-07-07 19:47:45+00:00","Revise the way that cdrom and dvd rom drives are identified in linux to remove reduntant drive listings.  Also no longer checking mount points (in fstap and mtab).  This can give redundant listings, and GC/Wii backup discs can not be mounted anyway.  This prevents multiple listings from appearing in the GameListCtrl when 'Show Drives' is selected.

Some general code cleanup, and removed a PanicAlert (made it a NOTICE_LOG instead) so that only one panic alert is shown when attempting to load from dvd/cdrom drives, and none are shown when 'Show Drives' is selected from the menu.

Also removed the hack introduced in revision 5564 that prevents the GameListCtrl from being properly updated when a game is loaded from the command line or via the autostart feature of the debugger.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5848 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"0a47e12b18cf7309f3becb8a83790e90e56a732f","2010-07-07 22:00:41+00:00","Add back AfterInit which essentially does such actions that would
normally (on a fresh install) be triggered by the user clicking on
the GUI.

This notably includes refreshing the game list. The progress dialog
used in the course of updating the game list relies on wxWidgets
being able to yield to its event handler which isn't started until
after OnInit.

In fact, we might want to consider just moving all the initialization
currently triggered by OnInit into AfterInit so that we can rely on
the event handler running there. This would mean that we don't have to
worry about whether those code paths are triggered by a user click or
run at init time. This will require some more testing, though.

For now just move automatic booting along as this requires the game
list initialization to be done.

We also could instead choose to special-case cases like updating the
game list and simply not use a progress dialog there if the event
handler isn't running, but this approach is clearly cleaner.

See thread at http://code.google.com/p/dolphin-emu/source/detail?r=5848 .


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5849 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"0cdfef4056da463750d778236dfb03d3028b7d11","2010-07-07 22:09:52+00:00","fix for msaa in opengl

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5850 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"75be9ce40de47417b9af6fb6a7cbf1b428dc902d","2010-07-08 00:52:46+00:00","Fix the nowx build.  Do we still want to keep the nowx build?  If you do speak up now because soren wants to remove it.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5851 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"39ae36398f38cf7b05b4e508f46f28074369556b","2010-07-08 15:25:01+00:00","Copy the version string obtained from svnversion at runtime instead of
using it as a constant in several places. Saves a few bytes and the time
it takes to recompile a bunch of files whenever svnversion twitches.

Using the SVN version string as an integer is not portable as the Unix
svnversion always includes e.g. the 'M' suffix for a modified tree.

Windows people, please check my change to Plugin_VideoDX9/Src/main.cpp
as I don't really understand how _T() and the %hs format string work.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5852 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"1d535c9e5096960e2c822bc2d6ee6a6ef8558713","2010-07-08 15:44:39+00:00","Forgot to add Version.cpp in previous.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5853 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"a4a61ae95c2184a2de49c00829c56c3a16c6adf2","2010-07-08 15:56:09+00:00","Restore a line deleted by accident.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5854 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"17e6c16bf1caed4e2167bed5a80af23b7d006095","2010-07-08 17:25:20+00:00","When running a game from the command line, exit after emulation stops.

This 'run once' behavior is more in line with expectations of a command
line invocation and matches what the nowx build does.

Personally, this makes the main build do everything the nowx build does
and more.

However, if you feel that the main build still doesn't have feature parity
with nowx, please say so now, so we can fix it and kill off nowx.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5855 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"f1154f91463c23f8d4160b69cc992317960b91a2","2010-07-08 17:27:17+00:00","A few more Readme updates.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5856 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"75871dab653353dabd860c26e8c6243969363be8","2010-07-08 17:46:32+00:00","Fix wii iso name and comment loading for linux.  You will have to delete your cache files to get your existing iso's information to be updated.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5857 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"543bb3ae4cd45d910b507ce70620f1dfac469173","2010-07-08 17:59:56+00:00","Glenn's iconv code seems to work fine on OS X.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5858 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"07973f726ee1a7e1b6504e7a18e6d0de0c006ee4","2010-07-08 23:27:51+00:00","Fix a segfault when the debugger is used and dolphin exits.
Put the filename back into the 'Saving settings ...' notice log (soren don't remove this again.)
Added a 'batch' mode command line option.  Now dolphin will not exit with the emulator if a file is run from the command line unless you also use the 'batch' option.  For example in linux 'dolphin-emu -b -e filename'.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5859 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"0284a7a1dfed25476d044c341d6372403a99b336","2010-07-09 01:26:53+00:00","Some more attempts at cleaning up the scons build and more clearly
identifying which options and parameters go with which platforms etc.

OS X, like Windows, now no longer uses Config.h. Configure() is still
used for the wx-config parameters, but that is a temporary measure.

Globals.cpp has never been used.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5860 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"df32603ba4065ce2cb1f8a2e6790a40aff7c0d11","2010-07-09 04:02:36+00:00","When refreshing real wiimotes in linux, make sure that real wiimotes have been initialized first.  Thanks Billiard.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5861 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"d0c9a38681654319d4bcefed14a23e7252d8c229","2010-07-09 20:56:16+00:00","2 commits in one:
fix frame dumping and screenshots in d3d9 and opengl
some improvements to the new efb to ram
please test to see if the issues introduced by the new efb to ram are solved by this commit

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5862 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"1e4f3c589d9a9f348c6162341d5b646c4fe498cd","2010-07-09 22:11:12+00:00","New Wiimote Plugin: Made UDPWiimote use the regular 'Nunchuk' extension setting. Having a separate 'UDPNunchuk' was really ugly. -some other minor changes.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5863 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"2bcdf4f5a476decb416a4947acc5472f9c011223","2010-07-09 22:31:04+00:00","Remove NSAutoreleasePools that are no longer necessary now that pools
are properly declared at thread entry/exit. I am leaving the ones in
Wiiuse while there's still a small hope that it may be used outside of
Dolphin, though.

Move the fixed MAP_32BIT definition for OS X to Common.h.

UDPNunchuk.cpp was deleted, so update the scons build.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5864 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"a0aa506453195d99d8b7e1c0297bb1e285428d0c","2010-07-10 06:48:24+00:00","GCPad/Wiimote New: Added a set defaults button to the config dialog. (gave new wiimote plugin a few default buttons, not done) Moved MSWindows cursor position code to ControllerInterface/DInput (plan on moving Linux's cursor code to Xlib as well). IR Up,Down,L,R now must have Cursor X/Y/-+ mapped for regular mouse control on Windows. (hopefully this isn't too confusing, the reset to default button automatically sets this up). Renamed One,Two,Minus,Plus to 12-+ (you will have to reconfigure these buttons, sorry). Added text labels for the button and trigger preview bitmaps. -other minor stuff.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5865 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"91dafccd27a60aba2d21c57631be9c5aaceb41a5","2010-07-10 06:54:42+00:00","Oops, I disabled tilting.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5866 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"379706b25ad952749d400da2bd45b0b4b370e259","2010-07-10 12:35:16+00:00","On linux check to see if the xrandr extension is present and don't use it if not.
This fixes issue 2920.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5867 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"addb89fecca1630e47433aacb0ef953602a56927","2010-07-10 21:17:08+00:00","Allow full-length Unix pathnames.

Move bits of HAVE_OPENCL/HAVE_WX for OS X from SConstruct to header files.

Use /usr/lib/libz on OS X now that we no longer have -L/opt/local/lib in
the library path. It is still possible that we could pick up a libz in
/usr/local/lib that would make the application non-redistributable, but
the danger is much less than previously.

Also bits of minor portability cleanup.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5868 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"3997243143b4fdec0c6e1c7347896fa7c196927c","2010-07-11 03:16:52+00:00","[Core] Added a wait before a spin wait.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5869 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"ff917cb0c93354deb08ffa32a37ffdf3b90610ff","2010-07-11 16:26:46+00:00","DX9/DX11: Workaround the viewpoint/EFB creation issues in e.g. SMG2 on NVIDIA hardware or when using HD. Will most likely cause glitches, but prevents crashing. Correct behavior can't be implemented in Direct3D, so this is the best option we have.

Also two little changes which don't affect functionality or performance:
Change an IUnknown* cast to a T* cast.
Improve some error messages.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5870 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"dcc51e0ef8fece409f093ea4d9124903562aedcd","2010-07-12 15:10:27+00:00","DX9/DX11, improvement to r5870: Instead of skipping SetViewport(), fix the viewport to match the old EFB dimensions.
Should reduce or even fix most graphical glitches caused by huge viewports in HD resolutions.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5873 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"9cb41e7c70af37af9f4ea7a097f73b5f240c6203","2010-07-12 19:30:25+00:00","hopefully fixed zww issue with new efb to ram.
implemented new efb to ram in opengl
modified TextureConversionShader preparing the implementation of new efb to ram in dx11
please test for regressions

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5874 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"61bd545f80cd699e8fe1c872f3185dea04f81fd6","2010-07-12 20:11:19+00:00","A little iterator bug and a compiler warning in the OpenGL code.

Use -fvisibility-inlines-hidden on OS X as well.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5875 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"bbb48603be1081363d9f839f3eee362a82b8d423","2010-07-14 17:33:14+00:00","Added nunchuck acceleration support to UDPWii . Moved some UDPWii stuff to the nunchuck attachment because I needed calibration data for the nunchuck...

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5878 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"f4385328798fb7c241105e6154da69522ba785d9","2010-07-14 20:20:25+00:00","Added back the 3rd argument on the Set() calls

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5879 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"deffc957948dd86306a6845c24db42fca7d71288","2010-07-16 03:43:11+00:00","New Wiimote Plugin: Moved Linux cursor position code into ControllerInterface/Xlib. (absolute cursor position can be mapped to something other than IR camera) (code fixed by Glennrics) Put the UDP Wiimote dialog's Update Buttons,Update IR,Update Nunchuk... checkboxes in an 'Update' group box. Fixed some Linux config dialog problems. (thanks Glennrics again) Some other minor cleanup in ControllerInterface. (changed some std::string/stringstream to char[] where possible) Removed a warning in DX11 plugin.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5880 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"ddaf442e9e3577e4eb40434dfc686e656f475483","2010-07-16 06:16:03+00:00","DX11: fix mem leak on closing a game (Fixes issue #2836, thanks to aavindra)

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5881 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"c2ee89b1709b1684cc6a9577e06a1085702270d7","2010-07-16 09:22:53+00:00","include the MP compiler option, which will allow for faster compiling + some minorly stuff :p

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5882 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"665d83ed4501407323164877ace5b5b167f081ad","2010-07-16 12:36:55+00:00","some more minor optimizations introduced by  aavindraa, i only corrected evaluation order using some ().

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5883 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"02ce753b7672b9447601173536313ed9fc4ad7e9","2010-07-16 14:14:57+00:00","This is basicall linux code cleanup.  We don not need to pass the X display handle from the video plugin anymore.  The wiimote plugins now open their own display handles, and the GUI uses the display handle of the main window frame.  Only the window handle from the video plugin is needed.  The pWindowHandle variable now passes this instead of the display handle.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5884 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"aa998896aceaafe3b8d7e518af5bb8beedfa20c9","2010-07-16 19:08:26+00:00","Allow C code to use the Dolphin log manager so that Wiiuse text output
can go to the log window like with other subsystems.

Remove a Wiiuse dependency on libm from when it was a shared library.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5885 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"697480f5cc747c8777c6c3f97de032f6586fbd2c","2010-07-16 19:17:35+00:00","Remove long-rotted vestiges of SDL video output.

Use SDL for input devices only on Windows and Linux.
(Still globally enabled for the legacy Wiimote plugin.)


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5886 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"ec9871e2bcf4c1051bb0005a8eca52fa160d37c7","2010-07-16 20:08:38+00:00","Fix an undefined symbol in the WiimoteNew plugin on linux.  The inputuicommon lib must be earlier in the list than inputcommon and common.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5887 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"aa88d8b790c8fcc8cf0a4e6f7497a3b36eb129c1","2010-07-16 21:51:35+00:00","Since apparently no one feels like fixing SMG FIFO overflows, commit iceman4love77's fix. No idea if it works or what it does, he seemed pretty confident that it works though.

Only fail once if EFB pokes are requested in DX9/DX11.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5888 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"25efe443eae400a216fb4e2e1695446e344a4001","2010-07-16 21:56:40+00:00","Fix an issue that made it so that the emulator could not be resized in the nowx build on linux.  Also some code cleanup in the OpenGL and Software plugins.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5889 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"5abed9d5a43cb5246d6c5958188c35517004ea5b","2010-07-17 11:42:28+00:00","Dependency cleanup in DX9.
Dynamically load a d3dx9 dll at runtime (I tested Dolphin with the first d3dx9 dll and it even worked fine there).
Should fix the flood of users asking why they can't select the DX9 plugin :P

Compilers should be able to stop bundling cgD3D9.dll now.

Minor changes in DX11.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5890 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"15eb779c010d5f8967eabc80aa18c23392e8d93b","2010-07-17 15:18:52+00:00","Move sampler state setting outside the drawQuad utility functions.
Use linear filtering for various buffer copies, improves visual quality a lot.

Some other tiny changes as well.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5891 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"11d34fa964202fd8d1c76469a244aa7416835501","2010-07-17 16:13:37+00:00","Fix issue 2836: static local variables are evil.

If you want to celebrate this commit, what about playing _TWO_ rounds smg or something? ;P


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5892 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"3e383aa8eb6a83f67d7f2e3f8d5c3a709ce97253","2010-07-17 19:43:26+00:00","Maintaining Leopard binary compatibility turns out be a a bit cumbersome.

For a typical OS X app, one only needs to specify the SDK version and the
target OS version range.

Because we use OpenCL which is new in 10.6, however, we must be somewhat
more verbose in order to make use of the forward compatibility facilities.

Unfortunately, the critical bit that is required to have binaries built
on 10.6 work on 10.5, namely disabling the new compact __LINKEDIT format,
causes stack alignment crashes at emulation time on 10.6, so for now
Leopard users still have to build Dolphin themselves.

Hopefully, this stack alignment problem will turn out to be coincident
with lingering alignment issues.

Include the OS X version of the Cg framework in Externals as with the
Windows one. The header files appear to be the same in the Windows and the
OS X builds of the February 2.2 Cg toolkit, although they are differently
munged by what appears to be some automatic process, so no new duplicates.

Any upgrades to the Cg libraries will of course need to be done in sync.

I do hope that Sonicadvance1's GLSL work will enable us to get rid of Cg.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5893 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"4e7682f50761cfaed2bc59067d96d3d978e2214b","2010-07-17 21:12:24+00:00","wxNEEDS_CHARPP has been set automatically since at least wxWidgets 2.8.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5894 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"4b1a3152b6d0de5baf59771c3ad32ebf6c818864","2010-07-17 23:36:03+00:00","Plugin_VideoOGL has been using an old duplicate of VertexLoaderManager.cpp.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5895 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"f78133f261f45dced11142cb546feba7a389d416","2010-07-18 00:18:31+00:00","big changes here:
- Eliminate the useless check for cpu modifications option from efb to ram as it must be enabled always
- use constant names in dx11 for buffer length calculation instead to simplify code reading
- implemented scaled efb copy in opengl, still bugy in some games, the option is not in the gui but will add it when it works perfect
- Change the depth calculation behavior:
if the game use z textures is exactly the same as before.
if the game do not use z texture calculate z values in the vertex shader. the advantage id this approach is that early z culling is applied,
improving fill rate. this mus speed up things, even with ssaa and msaa enabled.
please test for regression and enjoy.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5896 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"60e3a17d0dbec252526d7996907e495f9f1cb214","2010-07-18 00:49:08+00:00","little bug fix for my last commit

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5897 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"8208903fedda1ea8d040c51efc01e89d5ed62ea4","2010-07-18 04:13:16+00:00","Added a 'Cheat Search' tab to the 'Tools->Action Replay Manager' dialog.(issue 8) You can currently search for values in memory and create AR codes from a found address/value. The code where a new ARCode is created/added to the gameini is a bit hacky, but the cheat searching works decently. There currently isn't any way to remove ARCodes or create codes with multiple commands, other than stopping the game and opening the game properties.(needs improvement) Made the AR Manager dialog a bit less ugly as well.(it resizes better)

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5898 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"caeabf8bea3addaf1e6320bb729b55e7063d3a1a","2010-07-18 05:15:16+00:00","Slightly cleanup of mmap(2) flags:

Move MAP_32BIT to MemoryUtil.h.
MAP_VARIABLE is simply the absence of MAP_FIXED.
Replace MAP_ANONYMOUS with the more traditional MAP_ANON - Linux is compatible.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5899 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"2c419382c97c30e68c0cc60c8df9f98d5cf9ed80","2010-07-18 05:17:09+00:00","Slightly cleanup of mmap(2) flags:

Move MAP_32BIT to MemoryUtil.h.
MAP_VARIABLE is simply the absence of MAP_FIXED.
Replace MAP_ANONYMOUS with the more traditional MAP_ANON - Linux is compatible.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5900 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"faf586e8f1b1f9dc08840ae6003a334ff2f310d4","2010-07-18 05:31:51+00:00","Because we only ever call Pos_ReadDirect (and through that, DataRead<T>)
from JIT generated code, the compiler may not get the heads-up to properly
prepare for run-time instantiation of those template functions.

Explicitly instantiating Pos_ReadDirect gets around that issue.

Also force DataRead* inline as gcc didn't always do that itself when the
DataRead functions in turn were called from (other) template functions.

I am far from a C++ language lawyer, so I cannot speak learnedly about the
correctness of this solution, but it works.

Dolphin.app built on OS X 10.6 now actually works on 10.5 as well.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5901 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"b0041f00a3d1a7a13485bd6b83d94d22981ac8ac","2010-07-18 08:30:40+00:00","I missed some cases in r5901:

Because we only ever call Pos_ReadDirect (and through that, DataRead<T>)
from JIT generated code, the compiler may not get the heads-up to properly
prepare for run-time instantiation of those template functions.

Explicitly instantiating Pos_ReadDirect gets around that issue.

Also force DataRead* inline as gcc didn't always do that itself when the
DataRead functions in turn were called from (other) template functions.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5902 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"da4c3a5f2905a8331a00e9ffd0b3dd8cc52f6d0d","2010-07-18 10:11:34+00:00","Committing some cleanups by avindra:
- fix numerous warnings
- make some variables unsigned
- remove redundant code and header inclusions
- make code more compact in lots of cases

Committing some additional changes by myself:
- additional header cleanups
- cleanup DX11 initialization/shutdown process (hinted at by avindra)
- Remove the cgD3D9 stuff from Externals since it's no longer needed

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5903 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"a96b00a16ea32db7d3c5a11fca3dbcfda29a6cd4","2010-07-18 10:36:20+00:00","Bitfields of sub-int size are promoted to (signed) ints even if unsigned.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5904 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"961bac32b32331bb1b4a09e01b87df5ca91e6638","2010-07-18 14:18:37+00:00","Use the correct calling convention for OpenCL function pointers.
Fixes issue 2927, thanks to dimitri_le_bon_pilote for the patch ;)


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5905 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"e8ed50854afb19fa48fa3fe153d0d0df84d3635a","2010-07-18 15:19:24+00:00","Remove code which got obsoleted by r5890.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5906 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"378d3aaa52cc383600c3273433cebd9987dbe76c","2010-07-18 15:47:28+00:00","Make FIFO watermark tightness configurable instead of hardcoding it.
To change it, right click the affected game in the iso list, select Properties, and enter some constant for 'Watermark tightness'. Reasonable values range from 20 to 200.

FIFO seems unoverflowable on my computer no matter what I set this value to, so test whether tuning the value helps you ;P


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5907 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"a2e39a84f365999327cf450d5f2b32b9bf1c6bc1","2010-07-18 16:15:43+00:00","Delete various unused files.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5909 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"66d2bc477af1dcf2243c5342b96ee18b396b3bcc","2010-07-18 16:53:49+00:00","Plugin_VideoSoftware fix

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5910 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"e1cc37d8259f4eaf7be750af1141101a112a1d44","2010-07-18 20:06:24+00:00","Workaround a bug on Mac OS in witch dolphin would crash whenthe OpenGL config window would be opened. It seems that wxDialog::Center() is completely useless on Mac OS X, and not only useless, but it crashes when the window is bigger than the screen.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5911 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"3457ead88041fe01d3e9ea88dbd6ab9afce2665d","2010-07-19 02:08:34+00:00","A bunch of cleanup and some fixes to ActionReplay: Fixes crashes with certain conditional codes.(such as the Wind Waker test rooms) When these conditions fail, they should skip all lines until a '00000000 40000000'(endif) line is reached.(the endif line was being handled as a regular code) There are still some codes which crash the emu, such as most of the Melee unlock codes. These Melee codes seem to have a bogus first line which tells AR to write .5 MB of zeros.(without this line they work) Codes from the net do not have this line. (The game inis seem to have some bad codes)

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5912 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"b175397cb7c7c236e3e35e2eb57b769af8c9808d","2010-07-19 02:09:34+00:00","Some work on cleaning up the FrameAui code.  Primarily this fixes the debugger windows for the audio and video plugins.  They are now all subclasses of a wxPanel, instead of a mix of wxFrames and wxDialogs.  This makes them work correctly in linux, windows (they really didn't before), and most likely on MacOSX too!


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5913 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"4ecfa3b7a214288bee6524a72171360d85b261e5","2010-07-19 03:32:50+00:00","Specify union members of new ARAddr type when printing it.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5914 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"a2b1f829cb1064ff57ee0a3f6d41a7fd1b672dab","2010-07-19 03:42:37+00:00","Get rid of a number of unnecessary env.Clones.

Use SCons' convenient # shorthand for the root of our tree.

Also various minor cleanup of SConscripts.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5915 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"9074df896a18d288632a2e45bbee2d5f70c0d773","2010-07-19 10:36:30+00:00","UDPWii: Broadcasting it's presence on IPv4 to 255.255.255.255 once every 1.5 seconds. 3-arg Set()-s only worked on strings and doubles :P . Added int and bool variants.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5916 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"b08230512b6b15b7c4001cd15d504226bbcd13e0","2010-07-19 12:34:11+00:00","dsphle - small mail protocol fix for zelda light type

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5917 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"8c57ef548e588ab37a5f2ecf103fd045d8623269","2010-07-19 13:00:40+00:00","Fixed windows build...

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5918 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"c9855f2c22456018ad004a5c32cb2643d56cc5dd","2010-07-19 15:07:19+00:00","JitIL: Implemented linear scan algorithm for register allocation. This is for speed improvement.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5919 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"6813a75ab24d9795469b267db1841c7e69a69300","2010-07-20 02:45:31+00:00","Some pathnames are used both by SCons and cpp which can be a bit tricky.
Should revisit and make the distinction more explicit.

Put the Data and Sys directories under Resources in the OS X app bundle.

Construct config.h (now lower-case to avoid confusion with other Config.h
instances in the tree) in the root. One tiny step towards a read-only
and cross-buildable source tree.

Some minor bits of non-Linux Unix portability.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5921 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"244448014af2b5524c0cc4306cf18185d48d6c2b","2010-07-20 03:23:25+00:00","Prevent double inclusion of CommonPaths.h as pointed out by Glenn.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5922 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"8c7bdebf1efbd31da8df344bae45697db5e22a06","2010-07-20 04:19:25+00:00","Fix the global build on linux.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5923 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"4ffea2c8b9511e1ab20a06750a8f0bcc78b91dee","2010-07-20 04:50:43+00:00","Less confused about absolute/relative/symbolic pathnames now.
Fixes Linux global build.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5924 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"16c765dc9c7ad5a4ba10210c633f002540787854","2010-07-20 04:57:04+00:00","Merge-o.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5925 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"9f3e2ac2cc0dc2605221fcb8d1dd71feb4d6f6d5","2010-07-21 02:23:55+00:00","JitIL: Added operand folding rules for speed improvement.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5927 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"666ff28f806d283c09bd2f525f5d907807a516f7","2010-07-21 02:34:59+00:00","fix for mii faces in mkwii. efb scaled copy still not fixed. working on it.
please test

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5928 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"a103576a54f87acdbcef6a410935e22aa4254085","2010-07-21 12:07:24+00:00","Add an option for EFB scaled copy to the OpenGL configuration dialog.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5929 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"fb36de2338e83b1bcff9137609014dceca8e8f30","2010-07-22 01:48:48+00:00","WIP Gecko(ocarina) code support: There are a bunch code types that need coding/fixing/cleanup, but many codes should be functional. The game properties and 'Cheats Manager'(formally Action Replay Manager) dialogs now have a 'Gecko Codes' tab to view/enable/disable codes. Currently, you must click 'Edit Config' and manually add your codes to the [Gecko] inifile section of your gameinis for them to be displayed.(same format as the AR codes) I'm going to add Add/Edit dialogs similar to the AR codes and support codes with modifiers. I added the new files to scons as best as I could without testing :p.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5930 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"3859a7dce2d2ed688a3c00b91422d49f1e3427d9","2010-07-22 02:05:28+00:00","Lots more work on making the frame aui stuff functional.

Also added a DSPCORE_STOP state.  The DSP-LLE debugger window segmentation faults if it is openned when a game is not running.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5931 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"b4ce9c90b6a32e0cccfec528e74fae5e92f21776","2010-07-22 02:46:11+00:00","make generation of svnrev.h slightly more sane, by using vbscript instead of just batch script.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5932 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"cdce0ec3221fae0987b3f34f16be6371b8bac3cd","2010-07-22 02:46:15+00:00","Build fix on linux.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5933 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"83883cee450846b59f136f53843106337526b2a5","2010-07-22 03:29:35+00:00","Port to *BSD. It runs but isn't terribly useful without Cg.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5934 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"75dbad36107854413e5f0232b8109d95ae7931bb","2010-07-22 03:38:32+00:00","Build but don't install the dsptool/tester/MemcardManager tools
which aren't really useful to typical users.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5935 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"48abd9411308a9cecd713423d604bfab3826a9cf","2010-07-22 04:11:28+00:00","small fix for svnrev.h generation: now (again) dolphinwx project will cause the build number to be updated as well.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5936 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"35395366bd4dddd231799a745d019ba76ef5876b","2010-07-22 04:15:11+00:00","Revert to using ftime() on Windows which doesn't have gettimeofday(). Untested.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5937 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"0d7e4703fbff6c7cd136f66b8846c72a629969ec","2010-07-22 04:16:51+00:00","I *think* this is how XK envisioned the DTM structs...let us know if it is or isn't...

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5938 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"4230c2501e8bf0f496b2ba7ef6ab66f22357a368","2010-07-22 04:21:10+00:00","Fix small copy-paste error in Timer.cpp

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5939 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"987832cbb01fa52fc91b08b680854285dabd28f2","2010-07-22 04:31:36+00:00","External/wiiuse clean up, part 2.
- More removal of unnecessary code
- Windows: Modification of Wiiuse_Find under windows,
instead of always deleting and recreating the whole wiimote_t struct, we do maintain the old one,
adding/removing new wiimotes to/from it
- some wiimote bugfixes, see below for details

Windows related stuff:
Fixed most of the disconnection issues (single and mulitple real wiimotes, both wiimote plugins) (I haven't had a disconnect msg in hours anymore(ms stack)).
Rumble bug should be fixed now(both plugins,pls verify).
Fixed some pair up issues( sometimes you had to press the pair up button up to 3 times, till it paired up your wiimote).
More dongles might be now supported via ms stack, pls try and report back!
Fixed a problem where multiple wiimotes would swap slots on pair-up/addition of a real wiimote (2-4 real wiimotes) (both plugins, but not integrated into new plugin).
Improved ingame auto-pairup for real wiimotes(thx to the new wiiuse_find routine).
Fixed a bug on setting wiimote timeouts, which means changing the timeout was just a dummy earlier.
Most of the stuff concerns stuff in the old wiimote plugin, dont worry, in the end it's important for both plugins. It will get ported to the new plugin sooner or later.:')
Some minor stuff.
This might break osx/linux build and maybe the new plugin realwiimote-wise only. Thx to glennrics to pointing me to some breakings on linux, I didn't fix them all.
PS I hope i haven't forgotten anything, enjoy.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5940 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"6795551a8cb032eb7fbea4ad4afd4284b1c7eaad","2010-07-22 04:38:45+00:00","Linux build fix ... again.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5941 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"41f5379c8cfc288e5647bdc958dd9f567b987392","2010-07-22 05:28:24+00:00","A slightly modified(fixed a memleak and sizer spacing) version of avindra's patch to improve the layout of the new 'Cheat Search' dialog.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5942 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"637e5e542aafeb0c71cf7a5fe58c9fa5d299f5e1","2010-07-22 05:39:57+00:00","Double warning fix! Thanks to Nakeeeee and BhaaL! :p

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5943 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"6c7e666a75eaaddf0aae3ce70f664c18e1e05377","2010-07-22 06:05:08+00:00","Report on the bluetooth queue depth watermark to help diagnose cases
where Dolphin blocks long enough to lose packets.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5944 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"09b5dfbd5391429d2eb217855125b06b2226f32f","2010-07-22 07:55:35+00:00","Prevent Python from stripping off the final newline of the main(){}
autoconfiguration tests. Some versions of gcc care enough about ANSI C
to complain about this.

Use the Linux install hierarchy conventions on other Unices as well.

XKeysymToString returns NULL on unknown keysyms, which is not a valid
std::string initializer.

There appears to be some disagreement regarding the second parameter
to iconv(). Some versions/installations have it as const, others don't.
Unfortunately, due to wonderful C++ brain damage, implicit conversion
from const to non-const doesn't work here.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5945 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"8d2ed5975ed0875c125fc280c2f68e4b575db591","2010-07-22 08:09:14+00:00","Use the Linux install hierarchy conventions on other Unices as well.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5946 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"ba67333053c5a1249ca556e635814a1ccad742bd","2010-07-22 08:58:23+00:00","Hopefully fix Windows build.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5947 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"2e6c5b36ab895fcdb5d62d3a04ac895d1797bb05","2010-07-23 03:53:18+00:00","Fix a segmentation fault when changing perspectives.
Some general code clean up.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5948 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"a3e31556787c87fd708dfd4a6a194a5d62a60c59","2010-07-23 05:22:12+00:00","Added a button to the 'Gecko Codes' panel to download/parse codes from geckocodes.org. Codes that require modifiers (the XXXX business) will still not work properly, though they should load/save fine. A few more code types should work now. (All non-ASM type codes should at least attempt to run :p) Hacked a param into IniFile::GetLines to disable removal of text after # chars, so codes with # in the name/notes should load fine.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5949 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"04da34ceb7dbde0fbba2b6d51e0281a679be2c40","2010-07-23 06:39:07+00:00","Lil fix for Gecko code endifs. ((CT7 CST1) error messages)

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5950 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"27665e5bbd3d208a4151836e83d305173587d8c3","2010-07-23 15:03:49+00:00","Buildfix for wiiuse/windows (broken since r5944) and more wiiuse clean up, plus merging external and internal wiiuse.h as requested.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5951 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"919ccb469af0e1d6ef0f812226097dff2bf6c5ec","2010-07-23 18:19:38+00:00","Merging Externals/WiiUse/Src and Externals/WiiUseSrc as requested.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5952 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"c72b5c8bdc63ce3f72dd6c0ca26daa96ed2a639e","2010-07-23 18:29:10+00:00","Remove references to dead 'io.h'.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5953 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"f8ce075ab136d033d9400eaf98d6d9de6a6456ae","2010-07-23 19:30:00+00:00","Commit patch submitted in issue 2951 (PowerPC JIT optimizations)

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5954 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"4000df2c6677c259abbd44cca72572b3677d5797","2010-07-23 23:16:28+00:00","Simplify SConstruct.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5955 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"669de4890a75440eef95f51f9655b8d7d9d85d53","2010-07-23 23:48:04+00:00","abs() works on ints, not floats. Use fabsf() to avoid the double conversions.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5956 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"2d06b4114b11e637a735e919e622c46b261766fd","2010-07-23 23:50:09+00:00","Some cases where where uses of wxFileSelector with
wxFileSelectorDefaultWildcardStr had been copy-pasted and
changed to use specific filetypes had retained the extranous
format arguments to wxString::Format.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5957 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"949b873dc8164a9cbfdb48d687263da95b4bfc66","2010-07-23 23:51:34+00:00","Further *BSD portability.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5958 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"43cbff64b5c5041815ada20e384a0e601c32dbf5","2010-07-24 02:36:22+00:00","More FrameAui work.  Some more segmentation faults resolved.  And a little more code clean up.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5959 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"7828a689e716bb3f1165b6f2d4d7f4d39e05a4fc","2010-07-24 07:31:48+00:00","Hopefully fix string concatenation on unicode builds.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5960 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"53f5bc682d5347e2771dc857fcb29c59f9b77c62","2010-07-24 10:24:16+00:00","Make Cg conditional on those platforms for which it is available.
Of course, this doesn't do much good without another shader compiler..

WIP of OS X application bundle building.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5961 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"d906dcee27330bffb87a90cd39b2ce50598147b0","2010-07-24 13:10:54+00:00","More SConstruct cleanup.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5962 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"840334ad97e01dcf5fb72361ac2cd5c479e49658","2010-07-24 14:20:50+00:00","Fixes issue 2958 / 2960
Removed wiiuse linkage to common.lib and removed inclusion of log.h(r5944) under windows, since it's obviously causing problems.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5963 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"bd3f837ebf3292997f38fbb543d7b45d4767c133","2010-07-24 14:21:05+00:00","Fix scons stuff broken in revision 5962.  The prefix must be conditional on whether the build is global or local.  Help should be shown after tests are performed so that the actual values reported are not just an echo of the default values.  The bundle is separate from the destdir option.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5964 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"ad99d2a4eb2c858b49c6726731603a875274defe","2010-07-24 17:00:31+00:00","Just a small thing that I forgot to change earlier.
The new default wiiuse wiimote read timeout of 30ms has been overridden previously by the default 10ms from the wiimoteplugin.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5965 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"f99a36ccfa92bd63ec7cf4ad13e0c93180db9361","2010-07-24 17:39:17+00:00","Some refinements to (r5955+r5962+r5964):

Don't rely on trailing /'s in directory names.

Destdir only works for global builds.

Only tar up global builds if they are in a destdir to
avoid SCons eating all available memory indexing /usr.

Print current status of shared_foo in 'scons -h'.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5966 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"2d3b9860f7c610e5a52fecbcae17b67a9fab666a","2010-07-24 23:09:43+00:00","Produce usable global+destdir tarballs with pathnames relative to / .
This is a bit hacky as SCons' built-in tar handling basically makes
this impossible. I should just write a 'relative path' tarball Builder.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5967 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"1cf17111490a95b6802be6897eb8a897a8100e00","2010-07-25 03:28:52+00:00","JitIL: Added operand folding rules to increase speed.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5968 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"15b741706dfd6fc9c58dd2b235acdbf8cf4c5506","2010-07-25 09:56:39+00:00","JitIL: Fixed the code which were pointed out in r5968.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5969 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"cbc66f9467ecb1ac2d555e3fa844b858ccfa0d00","2010-07-25 15:37:56+00:00","More performance work on the PowerPC JIT compiler:

* Merge some loops in PPCAnalyst::Flatten()
* Put ppcState.cr and ppcState.cr_fast[] into a single C++ union. This allows quick access to the whole CR register without needing to merge the cr_fast array. The implemented solution assumes the host system is little-endian, but it seems to be already assumed in many places in the code...
* Inline the call to computeCR: it now costs a few more memory bytes per JITed instruction but it removes the CPU overhead of the CALL. This allowed to remove some unneeded MOV as well.
* Jit64::GenerateCarry() don't need a temporary register anymore
* Fix what seems to be a bug in PowerPC instruction RFI: the wrong bit was cleared in MSR

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5970 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"fa2cfcd0895dfe4dfb896a6f502ad76f1aa488df","2010-07-25 17:54:03+00:00","Revert r5970 before committing again part by part (except modifications about CR union)

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5971 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"68c8f345d7de2411b39528acd1ddd6a4e5562512","2010-07-25 18:03:14+00:00","Commit r5970 part #1: Fix what seems to be a bug in PowerPC instruction RFI: the wrong bit was cleared in MSR

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5972 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"cba42fab1d3042ffb568a3143301e6c65e77fcd5","2010-07-25 18:14:48+00:00","Commit r5970 part #2: Jit64::GenerateCarry() don't need a temporary register anymore

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5973 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"c7b4df19d743948ac8a12a7f1d0201c1887c9c8e","2010-07-25 18:44:34+00:00","Commit r5970 part #3: Inline the call to computeCR: it now costs a few more memory bytes per JITed instruction but it removes the CPU overhead of the CALL. This allowed to remove some unneeded MOV as well.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5974 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"16129f6f6d26aca0abe5d9a7cee5790070dcdef6","2010-07-25 18:52:02+00:00","Commit r5970 part #3.1: Forgot to remove code unused since r5974

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5975 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"673f18837ba2b0a5d953d229d8110dde276db30e","2010-07-25 19:01:32+00:00","Commit r5970 part #4: Merge some loops in PPCAnalyst::Flatten()

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5976 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"d340b9497ec95d0da66fb914566e6ba5c18e901a","2010-07-25 19:10:50+00:00","Commit r5970 part #5: Removed unneeded MOV in branch instructions

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5977 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"37217d78574363ebc9e511ae1a35bab0e2cbb103","2010-07-25 20:56:48+00:00","Fixes a crash in the new wiimote plugin when using real wiimotes plus making real wiimotes work again.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5978 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"0eaa7352fd26ac2bd8ee72678e38e76093e8daf2","2010-07-26 03:46:14+00:00","More work on the FrameAui:
Added a default perspective for the debugger.
Save all perspectives, and not just the active one.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5979 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"5be58c6772c131cecbc1786a14f5265a9d99e159","2010-07-26 05:30:50+00:00","Gecko codes: Added parenthesis where they were needed.(thanks to glennrics and soren) Fixed a copy paste error with write & fill 8bit codes. Also forgot to remove a return false;.(some more codes should work (fixed issue 2968)) New Wiimote Plugin: Added emulated swinging.(seems to work) Changed the emulated calibration data to some nice values. ControllerInterface: moved and constified some stuff.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5980 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"ce3eb85d96b63dda6e0ecf58c53e280888075bdf","2010-07-26 13:22:42+00:00","Fix an issue introduced in my last commit.  When the debugger is not used and the log or console windows are closed from the menu the notebook is not closed.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5981 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"99ffecd6754c1217c71efa084291a4da1057a1d2","2010-07-26 23:06:34+00:00","Merge JIT instructions when loading 32-bits immediate values :
PowerPC needs 2 instructions to load a 32-bits immediate value in a register (lis + addi; lis + ori). We can merge both instructions into a single SetImmediate().
This commit shares code with r5799, so to prevent another flame war on OSX vs Windows, I added #ifdef around the 'bad' lines...


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5982 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"586f24645ac913071ca8c8415f16f531f3353972","2010-07-27 02:39:12+00:00","Fix an issue using render to main in combination with the log window or console window, in which the renderer was not resized when the panes were resized.
Also refresh the log window at that time so artifacts are cleared.
A little more code cleanup of the debugger windows.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5983 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"67e6ae5faccbcfe62bc0d16384f9ca29b6a741b9","2010-07-27 10:29:34+00:00","BPHack option removed (it was not used anymore)

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5984 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"9fea384ed34cc634eefde4d17283eef6f67b0173","2010-07-27 22:12:19+00:00","Fix some more resizing and saving of such.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5985 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"688fda1a0e844743053e3c6108d8236af2fc4838","2010-07-28 02:57:17+00:00","When the new FIFO is being attached We make sure there wont be SetFinish event pending if so reset this. This protection fix Eternal Darkness booting, because the second SetFinish event when it is booting seems invalid or has a bug and hang the game.
This is EXPERIMENTAL, in theory don't break any game but if so Revert this commit immediately please.
Note: Beside Eternal Darkness needs DirectX 11 or DirectX 9 with Zelda Hack to works fine.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5986 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"a122a4dc2c370555e6a5b385fac0c4962d3a76d7","2010-07-28 10:24:54+00:00","Sory, I've forgot to delete my logs in my last commit. :)

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5987 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"71d4ece44e552f977a419464ab275b83b9c50ead","2010-07-28 15:22:27+00:00","Fix an issue that caused the DSP-LLE window to be openned twice in windows. (Thanks shuffle2).
Fix an issue that prevented the code window settings from taking effect on application start.  (Thanks shuffle2, skid_au, and sanchez).
Fix a potential segmentation fault with the DSP-LLE debugger window.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5988 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"1f119d5e732b7ea1a88f6be37cbfe54b56f243f3","2010-07-28 15:54:22+00:00","Revert the conversion from u32 to size_t from my last commit to reduce compiler warnings in windows.
Fix an issue that made it impossible to close the console and log windows in windows.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5989 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"f09c5ad6c14f9b8685ee50b3cccd27b277dc8eb6","2010-07-28 21:21:30+00:00","Work on JIT branches part #1/2:
Try to merge cmpXX with all types of conditional branches (not only bcx)

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5990 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"a72339b086f33cec42a7a5c01b04de3f3e0645d4","2010-07-28 21:24:23+00:00","Work on JIT branches part #2/2:
* Code cleanup
* Reduce the cost of RFI instruction (heavily used on PowerPC)
* Implement missing cases in bclrx

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5991 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"25accdec237e35b37710b514c52953f069547b56","2010-07-29 04:02:45+00:00","I add a CriticalSection in RemoveThreadsafeEvent for safety

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5992 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"b70f134c8842356006835e9a78ebc006ca9a986e","2010-07-29 10:21:48+00:00","New Wiimote Plugin: Added a real wiimote io_write queue like the old plugin. A combination of locks and lack of a write queue were the cause of the real wiimote slowdown. - new plugin should work as good as the old one with real wiimotes now.(but still lacking a pairup button) Other stuff: Disabled execution of Gecko Codes when Dolphin has cheats disabled.(fixes issue 2971) Allow the range of an input to be increased to 500% (will make ps3 controller's tilt more usable)

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5993 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"9ff5e836eb89f52026e6ff71428ba3512010239e","2010-07-29 12:17:47+00:00","Implemented MMU Demand Paging
* Emulated correct behaviour of DSI and ISI exceptions
* Added memory exception checks
* Added fast TLB cache implementation (written by booto)
* Added 'Enable MMU' option in the game properties
* Renamed old TLBHack to 'MMU speed hack'

Thanks to booto (PowerPC) and nash (testing) who spent many weeks of their time helping me make this work.  Also thanks to shuffle2 for finding and converting the map file of the original target.

There are two options for MMU emulation found under the game properties.  'Enable MMU' is the accurate emulation option.  'MMU speed hack' is the old TLBHack renamed. Most games will work with one or the other.  Some games can work with both options ticked.

Only the JIT recompiler and Interpreter work with the MMU code.  JITIL is not supported (too hard for me to add).

The speed optimised code still needs a lot more work and is disabled for now.

Fixes issue 2546
Fixes issue 2583
Fixes issue 2704



git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5994 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"24fdf942a4d08545121f9977ff6f8352a4a1d1de","2010-07-29 13:29:15+00:00","Use .cpp suffix when detecting libraries. On some systems, g++
is required to correctly link with C++ libraries like wxw.

Tell OS X that the user is doing something when using the wiimote
so that the screensaver doesn't come on when playing a Wii game.

Replace unnecessary floating point with integer math.

Remove unnecessary <sys/stat.h>'s.

Correct a few type nits.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5995 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"f0817108001cb8c7636df7355597e2abf830ef5e","2010-07-29 17:52:43+00:00","Oops, removed one <sys/stat.h> too many.

No need to autoconf for libusbhid - all USB-capable BSD's have it.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5996 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"8223dcd32c67aad62a9226fb27e00a7bba58b07d","2010-07-29 20:11:55+00:00","New Wiimote Plugin: Keep track of the io_write report sizes instead of just sending MAX_PAYLOAD bytes. (Should fix the issues of my last commit)

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5997 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"75bd5ed6453d905002d2b2b793ed2398c81cc167","2010-07-30 00:35:33+00:00","Add fifoWait property of Event Object to SaveStates.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5998 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"06fb0c292a8bfa392f6dced5ae0da6d1f34c8a9a","2010-07-30 03:51:49+00:00","Removed the hackery that was being done with the plugin configuration dialogs on windows.  That was unnecessary and ugly.  The HWND type is dead for non windows.  Also cleaned up the gui a little.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@5999 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"bae8c6ed9cc31c94bc1dd3b2cd68bfa05e17468d","2010-07-30 09:24:23+00:00","Fixed the crash that occurred while loading and saving states.  This change freezes the system while a save state is being made or loaded, ensuring that the sub-systems (e.g. CPU and GPU) is in a consistent state when the save-state is created.  Removed the clearing of the JIT cache as invalidated memory would sometimes be jumped to from the block descriptors, causing the crash.  Removed the saving of the old JIT unlimited icache from the state as this now serves only as transient data to track what has been compiled in the JIT (and it took up a lot of space).  The icache is now saved inside the PPCState.

Fixes issue 2964.  (I hope)

HAPPY 6000th!!!

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6000 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"72494a03634d16c7c91d4a5de214bfe09befbf40","2010-07-30 11:58:18+00:00","Use the portable SLEEP() macro in place of Sleep().

r5998 fixes the Center() problem in plugins on OS X.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6001 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"2d108f8d57163ad7dda1218701f1583c39a747ed","2010-07-30 12:52:35+00:00","Fix a mistake in the menu from revision 5999.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6002 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"1fb47e6393f466ddad5d03a4ec3eb23770141d77","2010-07-30 13:14:53+00:00","Modal windows must be closed with EndModal(), not just Destroy()'ed.

wxFD_FILE_MUST_EXIST cannot be used with wxFD_SAVE.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6003 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"84b5824670c16d2323ef81c9fe00001580f3a3aa","2010-07-30 16:54:16+00:00","Quick fix to get Monster Hunter Tri working.
Minor changes resulting from code review comments.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6004 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"1d2f4283d1da9fb221d52ebf54f203a83bb64b5c","2010-07-30 17:12:59+00:00","Added a self modifying code option in the game properties.  Turn this on for Monster House and other games that hang or show memory errors.  Turn it off for everything else.  This fixes Legends of Wrestling.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6005 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"6ed3357066c1434e623331ae76585b67d7bed61a","2010-07-30 17:51:05+00:00","Experimental: Implement skid's MMU Demand Paging in JitIL.
This one needs a lot of testing, since I don't have any games that need it, except Rogue Leader (GSWP64) - and I didn't do more 'testing' than watching the stormtroopers dance due to speed reasons (altho it seems twice as fast as JIT for me; it does spit out a lot more warnings too)

btw, ITS OVER 6000!!111

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6006 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"87043879f88173f7a3b7f1ab4be44012a833fb1a","2010-07-30 18:55:36+00:00","Fix a hang in linux with the wiimote new plugin caused by a critical section not being exited.  Also removed the original wiiuse_find function and replaced it with my wiiuse_find_more function with a little tweak to speed up wiimote discovery.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6007 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"12be9952ab3fe454c79d87d1856dab2594dd6ab7","2010-07-30 21:28:20+00:00","Implemented more JIT instructions

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6008 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"432335cda59a655b8383b6aa99666e0b442fe333","2010-07-31 02:29:11+00:00","Fixed some boundary issues in PPCAnalyst.  This fixes Rogue Leader and other MMU games.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6009 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"aaa083f8f0a8131cdcaed048ad12e0ad353eb86f","2010-07-31 03:26:25+00:00","JitIL: Added instruction combining rules for speed up.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6010 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"d5a698f188b587d2dcc00e47e0936d586c1f66fd","2010-07-31 10:12:11+00:00","JitIL: Removed unused variables reviewed in r6010.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6011 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"c88689381f666953468c1227dc2eedd2a441a13a","2010-07-31 10:29:08+00:00","Merged JIT crXXX instructions (thanks XTra.KrazzY)

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6012 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"840bd3613f43534c8697b6cef771edc08dbd266c","2010-07-31 14:14:01+00:00","Use GetClientRect in the GameListCtrl OnSize function, but removed the +5 padding.  This seems to look best on windows and linux.  Unfortunately wxWidgets on linux doesn't account for visibility of the vertical scrollbar in this or any calculation I have found.
Also fixed an issue with the saving of the log/console window size.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6013 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"824b509d2e1b1d9964b7011174d6de0375eb350f","2010-07-31 14:40:01+00:00","Make the SSE3.1 VideoCommon code available in GCC builds.

The GCC model for extended instructions like these is that you compile
with -msse3 etc. These affect code generation for whole compilation units,
so the idea is that you have a separate .c file for each instruction set
class and then indirect to the desired one at runtime.

Without e.g. -msse4.1, the GCC built-ins used by <foointrin.h> are not
available. However, in our specific case of compiling with -msse2 and
wanting to use SSE3.1 code, enough built-ins are available that we only
need to provide a little hack for pshufb.

Upgrading this to also use SSE4.1 instructions doesn't appear feasible
without a lot of undesirable duplication of GCC built-in functions and
headers, so we'd probably have to move to the GCC model of separate
source files for that.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6014 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"4d27ecf736470c05815888d062b93f0218f00681","2010-07-31 14:45:35+00:00","MaxOSX build fix.  Thanks soren.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6015 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"453f7c67cde5a56c8c95386cb7047495cefb2eca","2010-07-31 15:26:46+00:00","Newer versions of GCC's <tmmintrin.h> check for __SSSE3__ (-mssse3).
No matter. We don't actually need it for our purposes.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6016 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"2213d423bf242b55ad1830ac30c65ef777fbd04f","2010-07-31 15:32:02+00:00","JitIL: Commented out the code which cause bugs in STGJAF OP movie.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6017 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"0e83d523827ce7acb074e02b31d9c2d14bd6d280","2010-07-31 15:43:54+00:00","JitIL: Added 'lbzu' instruction and 'crXX' instructions. 'crXX' are ported from Jit_SystemRegisteres.cpp. 'lbzu' may cause crush in GFZP01 (F-Zero GX PAL). I could not test with GFZP01 because I don't have it. I tested 'lbzu' with other games, though.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6018 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"3d25197a1c154ec05ce16ef5d0367e96143dae1c","2010-07-31 19:06:44+00:00","Avoid always-true and signed/unsigned comparisons.

Make empty while loops a little more obvious with a {} suffix.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6019 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"76ca439bdffce8d45d47e081c7201dcecaf6e69d","2010-08-01 00:47:14+00:00","fix small bug with dsp lle debugger: now it will highlight regs which just changed, instead of the ones which changed last step.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6021 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"f79eff00e4be87062bf1750a1005b2eb70ec6876","2010-08-01 01:23:14+00:00","JitIL: Fixed comment out style reviewed in r6017.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6022 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"949fec41ca0b4e4ea06d36f8bbc22de15fa759dc","2010-08-01 02:17:52+00:00","JitIL: Reverted 'lbzu' added in r6018.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6023 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"2c6f851bbaea134d850636eed35535334f5a305a","2010-08-01 04:09:59+00:00","Clean up and fix some issues with the dialogs for compression and decompression of iso and gcm images.  Also added a confirmation to overwrite existing files.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6024 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"910d543536f8b976e0e9b8a7243c151f8c0d4288","2010-08-01 14:20:50+00:00","DX9: Create textures needed for CPU->EFB access even if it's disabled.
That way, one can toggle that option during emulation.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6025 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"d411924eeecdc0de3bb23b1a0340e47ee6a83c9a","2010-08-01 14:43:07+00:00","Marginally improve FPS counting logic in the video plugins.
Should fix DX11 peaking at 59 FPS instead of 60 FPS.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6026 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"c765127f0d1a632fcbe588c145dd830904ef2ffb","2010-08-01 14:46:10+00:00","Spelling fixes, etc
Fixes issue 2954.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6027 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"4bef335632b7742734b6b2f264ce6f37b014a4b7","2010-08-01 15:48:11+00:00","Remove duplicate instantiation of PNG wxImage handler.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6028 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"fad075351c55d8121417fd0c952c0ba80ce0a5d8","2010-08-01 16:14:35+00:00","Silence some compiler warnings.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6029 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"52d3137598be98a0c41598324f8cc4dd0e83ccc5","2010-08-01 16:30:22+00:00","Build with -msse3 on OS X. The first Intel Macs were Core Duo/Solo, which
had SSE3. Keep -msse2 on other platforms. Not sure if there are actually
any Dolphin-capable machines out there without SSE3, but..

Use -search_paths_first to give our statically linked libraries precedence
over /usr/local/lib.

Some work-in-progress changes to facilitate a more easily redistributable
application bundle on OS X.

Group compiler/preprocessor/linker flags together to make the full set
more intuitively apparent.

The various libraries in Externals have rather inconsistent conventions
for include paths. Best to encapsulate that knowledge in foo/SConscript.

Re-use utils.GenerateRevFile for all three places in the build system
where we need the SVN revision number.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6030 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"26aee8ff7612228757d95acb1e0580d718009aa6","2010-08-02 01:52:00+00:00","Create the log window after the menus.  This fixes the font ugliness on windows.
Fix modality for the config dialogs on windows.
Fix the compress/decompress dialog wxString issues for MacOSX (hopefully).
Fix the DSP-LLE debugger for linux.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6031 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"9c36f0bc88a0fa9a7b23a2224798190af43251b7","2010-08-02 04:22:04+00:00","MMU Speed Optimisations:

* Added memory exception checking to JIT instructions
* Cleaned up Load/Store code (thanks dok.slade)
* Consolidated memory access routines
* Fixed graphics corruption in some games (dcbz instruction)
* F-Zero GX in 32bit JIT mode now works
* Removed temporary slow hack in JITIL (introduced in r4839)


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6032 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"7b83640a28010a8a6d5d3aab4da20fe75f3f94b2","2010-08-02 05:30:38+00:00","make 'show pc' in dsp lle debugger actually work again
code cleanup in Hash.cpp

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6033 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"fcf2fb2b9bbf13748b560f96d276798d40f8e1fd","2010-08-02 10:28:37+00:00","MMU Speed Optimisations:

* Un-cleaned the Load/Store code.  I think this will fix the stability issues from r6032
* Added memory exception checking to a couple more JIT FPU instructions
* Optimised the 64bit fast memory access slightly
* Optimised the MMU speed hack.

The rest of the speed optimisations from r6032 have been retained.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6034 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"bbc69a64ad1dfe1075b228018ddd51cf56229f6e","2010-08-02 10:36:33+00:00","Revert parts of r6032 that break OS X and probably other non-Windows
platforms as well. It would seem that ABI_PARAMx will have to be
used more consistently elsewhere to match up with a change to use
them here.

Not sure yet why I still need the final section of Jit64::stX.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6035 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"f7c4670c9fe8bc2348c5bb156d9c4a0fd0f9c058","2010-08-02 14:06:27+00:00","* Fixed a careless mistake of mine with SetJumpTarget
* Changed ABI_PARAM back to ECX/EDX.  Thanks for the tip, Soren
* Reverted r6035

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6036 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"22872b383cf4bcfbf0322f10702f2eea94a25571","2010-08-03 03:20:44+00:00","Make toggling of word wrap for the log window nicer for linux.  Unfortunately this method is only implemented for wxGTK (what not wxMSW?  Shocker!).
Made it so that Source/Core/DolphinWX/Globals.h is only used for the wxWidgets build, and a little other file inclusion clean up.
Fix an issue where a user runs a game from the open menu or toolbar items with a clean user directory, and henceforth double clicking on the empty game list (where it says double click to browse for games), that game is run again.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6037 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"ffef6affff9c6a2924fc157a968de0481ce1411a","2010-08-03 09:41:26+00:00","Explicitly designate VB script engine, as it might not have been linked to any script host due to security concerns.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6038 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"c76ba17ff4c394986684a9d5cc0779fd37ea769b","2010-08-03 10:48:49+00:00","Stub out glGetError() calls from the release build of the OpenGL plug-in (found by ector, code by LordMark).  Gives a speed-up in the OpenGL plug-in.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6039 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"fe0f25c737b2f270b40efcd09b6852fe208d4eb9","2010-08-03 10:52:02+00:00","MMMU Speed Optimisations:

* Optimised the memory bounds check in MMU and MMU speed hack games.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6040 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"340912dc1e8efa7f4d1bbedc3366115c87f47466","2010-08-03 15:30:33+00:00","DSP HLE
* Some fixes to linear interpolation
* Adds interpolation to ADPCM samples
* Relaxed a volume limit in ADPCM_Vol






Fixed:
- Frac rolls over one iteration before samplePos advances. Can introduce noise similar to flipping samples (1234 => 1214). Introduced oldFrac to fix this. This isn't as noticeable as it probably should be because of below.

- When samplePos doesn't advance it interpolates between two copies of the same sample which actually does nothing. Changed it to always use the current and next sample.

- When frac is 0 you should get 100% of yn2 instead of ~99% added a +yn2 to balance it.


Other changes:
- Added linear interpolation for ADPCM. Sounds like a good idea.

- Set ADPCM_Vol to clamp to x8000 instead of x4e20. Some games will play some sounds at x8000 volume anyways since the volume is applied before this. Lower limit can result in quiet music (x4e20) but some loud ambient sounds (0x8000).


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6041 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"552a535f6da523399cddc519a44e8fbe31464bce","2010-08-03 18:57:59+00:00","Fix issue 2694.
Fix another dramatic spelling 'mistake' in DX9 which I forgot to commit last time.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6042 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"5ebd001d877fd8cfeb3e61bd4bc53dad3587e4df","2010-08-03 21:33:50+00:00","Fix the debug build on linux.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6043 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"f5d48a46ee51b4b2aba49c9091c6addfc74389d5","2010-08-03 21:44:14+00:00","Oops.  Fix scons indentation mistake from my last commit.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6044 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"dc0a67b53a824825ebf56bc9d9d7fe721552e87d","2010-08-04 11:07:40+00:00","Brings back any speed lost from r6040 while maintaining all speed gains.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6045 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"0a3c150f69d2708856c9094de571f8d6af17a12f","2010-08-04 11:44:06+00:00","allow 'swapping' of hle'd ucodes
hle the gba ucode

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6046 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"3c3228b6ddaf912a61101f32a975f0478e6276c0","2010-08-04 11:46:49+00:00","I said DEBUG_LOG!!

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6047 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"46bd0db43dd140a6e90d5e1dd5d1c7df88edc86f","2010-08-04 11:56:25+00:00","small scons fix


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6048 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"e9424bcafaa5e0991c0aa8aa8320640ed2fe5cc6","2010-08-04 13:22:29+00:00","small optimization for gba ucode hle
hopefully quiet gcc about IUCode ctor...

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6049 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"7ddf0aa711d01d0ea03fcfc89e9dfdcf7726d5f0","2010-08-04 14:00:59+00:00","Silence gcc warnings about empty statements and out-of-order initializers.

Increase ISO properties window size to make room for the new Gecko codes.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6050 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"3312435ae2a0d3a01318dbc24573d96b70709dc9","2010-08-04 14:41:27+00:00","Fix the linux debug build in a better way so that wxWidgets debugging is still enabled.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6051 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"a8f6904ec773a99f38aa170d8e29faeb6f07bb2a","2010-08-04 16:50:52+00:00","dsphle - improved ax/axwii hle ucode switching (needed for Nintendo Puzzle Collection <-> GBA, ...)

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6052 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"9b6180ab277fffb9428b85b9c445230e21029b46","2010-08-04 19:34:47+00:00","Fixed JIT register allocator.
Now it only writes back dirty registers when flushed
* Fixed KillImmediate
* Renamed LoadToX64 and StoreFromX64 to BindToRegister and StoreFromRegister respectively (as suggested by ector)
* Code cleanup in calls to the reg allocator


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6053 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"e5f629da3769caf71011312e7be95c640d2073c1","2010-08-04 21:02:32+00:00","Fix saving states on mesa3d and clean up the handling of asynchronous requests
(those originating from a thread other than the gpu thread)

glxMakeCurrent is supposed to error out when the context is
still current in another thread. NVIDIA handles that, but mesa3d errors.



git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6054 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"7a80e8e409ce8fc392cb62ba9c4490504bf77113","2010-08-04 23:30:47+00:00","Added missing unlocks from r6053 (thanks mylek4)

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6055 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"9e4ff175ec31d761613e385156c3131e09bc4578","2010-08-05 00:09:33+00:00","Set z-position for opengl, too


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6056 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"040a6e1eb33ceccccf3e4c7d790e46657288c9fe","2010-08-05 03:24:13+00:00","This commit addresses the Hyrule field slowdown issue in Zelda: Twilight Princess, as discussed in Xtreme2damax's thread: http://forums.dolphin-emu.com/thread-10638.html. It can be activated in the DX9, DX11, and OpenGL plugin GUI's. Enabling the hack while playing other games besides ZTP will likely have either an undesirable or no(more likely) effect.

The code changes disable the usual pipeline flush for certain BP Writes that occur while the minimap is being drawn in Zelda: twilight princess. This significantly increases speed while in hyrule field. The way this is accomplished is described more in depth on page 42 of Xtreme's thread. Big thanks to Xtreme for doing a great job hosting that thread, and Kiesel-stein for initial work on the hack

Also, I used the resource editor in Visual studio to generate the GUI code for the DX11 plugin, and some code appeared to be removed, although the behavior of the GUI did not seem to change. Hopefully someone more experienced with resource files (forms?) can double check that no code was damaged


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6057 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"ca9c174450a9bc5313784a087c9cefd361a3ab9f","2010-08-05 10:01:27+00:00","Stability fix for JIT load/stores

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6058 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"8dc01b685fbd0d0d0820a0d0399a9f1f0e842e43","2010-08-05 17:00:32+00:00","dsp stuff - the same ucode hash under lle and hle now (had to rename couple of dissasms), ucode dumping under hle (debug only), small dsp:read32 change (needed for some homebrew)

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6059 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"d5d7beb6c708b019f30c20f9d62c0f72423d151d","2010-08-05 18:41:02+00:00","Move the ZTP hack to the game properties (reverted all changes from r6057 to the video plugins) due to some obvious reasons. Also some fixes to the coding style.

Remove a member variable which I introduced in r5907 although it never actually got used. Restores binary compatibility (at least in that regard) to pre-r5907 video plugins, but breaks any binaries after that :P

Update FIFO watermark tightness recommendations. 1000 is quite a high value I guess, but some people seem to need it.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6060 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"92b180b71fa73713208627f741e8dce32d8650db","2010-08-05 23:04:34+00:00","Opengl and D3D are doing the perspective division differently

Thanks to glennricster for catching this.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6061 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"05401aeb0eb9ba9f6494153746de6813a79ad669","2010-08-06 02:53:09+00:00","Fixes NeobrainX's new method for toggling the ZTP Hack. The game properties is a much more appropriate place for the hack (I didn't even know about that menu:) ) Thanks to NeobrainX for the code cleanup, and to Mandrix999 for the fix. Also noticed a minor typo.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6062 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"1faff6aeb71ff1eb36b29a97c2f35ce5be4ee42a","2010-08-06 19:35:40+00:00","JIT compiler:
* Improved constant folding/propagation in integer instructions
* Merged boolean instructions

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6063 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"b2791b2d79c8c48fef008df2cd04987e38e87a9c","2010-08-07 13:26:53+00:00","Added code to unlock the reg in lwzux.  Fixes issue 3017 (thanks j4ck.fr0st).

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6064 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"521c7558bc007604024520a50c2705d12aa82cd7","2010-08-07 21:22:15+00:00","Change make_svnrev.h.vbs so that it won't cause svnrev.h to be regenerated if it's already at the current revision (saves re-linking all the time)

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6065 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"105c05bb7eb4f5394bcbd1dbe9845e952c830df3","2010-08-07 23:18:43+00:00","make_svnrev.h.vbs: look for 'Last committed at revision [0-9]+' instead of 'Updated to revision [0-9]+' for svn

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6066 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"957e7c415e6db8eabbf31f5b2a7ca5b62b436c24","2010-08-08 00:13:05+00:00","Several little things:
Clean up of the input selected for the opengl x window in linux.
Fix a potential segfault when taking a screenshot (happens consistently when using 'Save Targets' from the video debugger window).
Fix a memory corruption error that results from the wrong image size being passed when dumping textures.
Make the screenshot hotkey configurable.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6067 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"7b8863dc9c50c2c0d45070a1519bacc287d27113","2010-08-08 00:54:04+00:00","r6066, part two: learning to count

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6068 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"208ecd698ef073b772750f88e3c11f7badaec215","2010-08-08 06:00:22+00:00","Debugger enhancements:
* Added working Step Over function.
* Added hard-coded hotkeys for step into (F11), step over (F10) and toggle breakpoint (F9).  The hotkeys are only active when the debugger is enabled.  They function as before when the debugger is disabled.
* Added Debug menu item.
* Removed obsolete NotifyBreakpoint function from JIT and JITIL.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6069 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"7823eddd4e45515a9d96ce7519e91c350128cdf3","2010-08-08 15:21:29+00:00","kill that annoying relinking once and for all!

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6070 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"78add0ca9b0f8624edabf013dc2de3489e92f102","2010-08-08 15:22:25+00:00","must've gotten too excited, forgot a file

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6071 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"4ae77b2d7098ef598e526727855e611a9a7a31b0","2010-08-08 15:37:18+00:00","revert last two commits. screw it.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6072 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"ecec048f0f8b0522fc762be85cd5ffccf7a2cb17","2010-08-08 16:28:03+00:00","DX9/OGL: Remove some superfluous checks (this is already done in VideoCommon).

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6073 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"2ac869191132b492ed054366199f75925cb9ba64","2010-08-08 16:34:32+00:00","ok...svnrev crap finally under control? please?

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6074 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"95b0abb73709b23cf7fde37169420e4c22bd7f55","2010-08-08 16:35:10+00:00","dsplle - another small fix

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6075 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"5a248b46a134e21aa1ad4a6bd3861b84c14232b7","2010-08-08 18:12:58+00:00","JIT compiler:
* Improved constants folding in load instructions
* Merged load instructions
* Fixed the register allocator so that it can restore the registers state after jumping to the dispatcher (in case of a conditional jump)

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6076 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"244191f18fb486c05e88ce76a36936a29c89afdf","2010-08-08 18:53:00+00:00","Fixed some mistakes from r6076:
* Fixed missing UnlockAllX
* Fixed 64-bits compilation

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6077 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"468b9bfe68ed5531cc64b521746f34a05290dfce","2010-08-08 22:27:35+00:00","Fix the OpenGL depth buffer values from the vertex shader.

I am not sure i am understanding what the pipeline really does, and more so what
the GC/WII expects here. If my comments are incorrect, please let me know.

This was tested with MP2:E, ZWW on r6075.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6078 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"55d7f93e0c26874e69768ac8bd0de0c3a9383a66","2010-08-09 19:00:24+00:00","Revert r6076 and r6077 since they broke x64 builds

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6080 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"a1daa636c267eceba1c0d4ea199f72ab4a455f81","2010-08-10 01:08:22+00:00","Take care of some compiler warnings from unused variables, and a little code cleanup.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6081 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"2b45e87b3ed270f130dc3263b009af6df9cb0e90","2010-08-10 04:12:32+00:00","New Wiimote Plugin: Added a 'Hybrid Wiimote' input source type. This allows a real wiimote to be used with an emulated extension.(and in the future, real wiimote with emulated motion plus) If the emulated extension is set to 'None', a real extension can be used. Real/Emulated buttons are combined. Real acceleration data is used. Currently, emulated IR data is used.(might change this to allow both) Switching between an emulated and a real extension in-game is a bit testy right now, but if you switch the emu-extension to 'None' before connecting a real extension, it usually works.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6082 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"3b7a6ce33686ad91b68dae455cb023c769514b9d","2010-08-10 07:25:35+00:00","I've observed that 'FIFO is overflown by GatherPipe' is not real overflow.
Really that happens because the fifo.CPReadWriteDistance is negative.
Example: CPReadWriteDistance: -864 CPEnd: 10092672 fifo.CPBase: 9568416
In SMG this is because  PI_FIFO_RESET is writing and after fifo.CPReadWriteDistance will be setted to 0.
To Prevent that, I've Implemented AbortFrame function in the CommmandProcessor. It should fix overflown because of that.
Note: There is other issue (Issue 2846) where the fifo.CPReadWriteDistance is negative too but the effect is different.
I'm working to solve this.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6083 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"db072e1986b3cec84a3bcd4314fa617e449f697b","2010-08-10 08:29:15+00:00","Add Common::AtomicDecrement for gcc to match win32.

Use the debug option for conf.CheckWXConfig on OS X as on Unix.

Take care of a few compiler warnings.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6084 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"1afcf4cc692e18e3d120279bb82155b2431b067c","2010-08-10 08:30:04+00:00","Use the debug option for conf.CheckWXConfig on OS X as on Unix.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6085 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"97f894ffbdcb3fd8cf8a24ac98960d70575b4830","2010-08-11 02:28:40+00:00","Fix a problem in the old wiimote plugin in which a bitmap could be created with size 0x0.  This fails an assertion in wxWidgets.  wxWidgets complains about it in the debug build.
Also cleaned that file up.  That is probably an exercise in futility though.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6086 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"9f57345c11d369d9f10f1c58d5bc8481e9a9b794","2010-08-11 04:00:27+00:00","Fix the wiimote refresh button in the new wiimote plugin on linux.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6087 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"6918a9e1d6f30aa43c3bbeabcd27dfe2a3c6527c","2010-08-11 10:45:27+00:00","Added support for multiboot dols.  This allows demo discs, bonus discs etc to be played.

* Flushed the JIT cache on 'ICFI' (Flush Instruction Cache)
* Made all instructions one cycle in duration

Fixes issue 233

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6088 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"e82c128043fe487b68a868253490f47eeef45735","2010-08-11 11:15:59+00:00","Applied the multiboot dol fix to JITIL too.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6089 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"df8ffa69bb95975b749b654574b9749ac1c91b25","2010-08-11 12:49:38+00:00","Used a less hacked way of making the multiboot games work.  Instructions are now executed at their proper number of cycles.  The timeslice has instead been increased to compensate.  Increases VPS in some games.

Thanks to BhaaL for the tip.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6090 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"a26f744c983a601be5e9e4176ba0325d4aaf8200","2010-08-11 20:53:19+00:00","UpdateSystemActivity() is defined in OSServices/Power.h which is
erroneously #ifndef _LP64 in the 10.5 SDK. Since OSServices is a
sub-framework of the CoreServices, Power.h cannot be included
directly without specifying the long and messy path to it.
Just declare it extern here as well instead.

Don't disable dynamic updating of the bluetooth device name as it
would then be printed as (null) on the first pairing of a wiimote.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6091 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"0c1977dc455f9fd5d3cd67a138da2fa4b516a2e2","2010-08-12 12:31:15+00:00","JitIL: Added code which deal with psq_st/psq_l in the case of inst.W == 1.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6092 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"1f9dbb5afe17845d45d1bb6365f41d0879ccb1d0","2010-08-13 19:07:59+00:00","Warning fixes and some cleanups.
Correct me if I was wrong when changing those 0s to '\0's.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6093 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"5cef906467217d308dd0d8224dea3d3feeb0d2fa","2010-08-14 08:53:05+00:00","dspspy working again

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6094 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"0a606d73565963fcdc4f5d7f209c61853e5bf1d0","2010-08-14 09:07:28+00:00","fixes for my previous commits

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6095 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"7c7257b8252df13e33d22f91254c40c6b592c285","2010-08-15 20:33:07+00:00","New Wiimote Plugin: Give each real wiimote an individual thread.(eliminates multi-wiimote delay)(fixes issue 3037 for the new plugin) Fix a mem-leak in the input config dialog.(GCPad/NewWiimote)

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6096 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"dac266623609a6b54df36ea36aebe43b324979fe","2010-08-15 23:03:15+00:00","New Wiimote Plugin: Fix hang on close issue of my last commit.(thanks to glennrics) Made profile saving/deleting a bit more user friendly.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6097 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"b83d3e897069d926cabec120e1086d29ef50e1d3","2010-08-16 00:13:23+00:00","make memory breakpoints log the PC when hit.
if the PC makes no sense, it's probably because some HLE has done the access.
perhaps we should wrap accesses from IOS HLE, so that we can trace it? dunno if it presents that much of a problem anymore.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6098 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"fec9234aca11d18108a1531e6d2cffcca2c458ef","2010-08-16 00:14:08+00:00","IPC HLE: don't automatically make all addresses the cached one, leave them as however they have been written.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6099 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"fd5f7ba6b4c7d55bd5c57a7d64fdf777bf5948d7","2010-08-16 15:22:53+00:00","Hy, this is my first commit, and i hope it is not bad xD.

- First change is for Mixer.cpp, I've just re-added the functionality lost in r4724, so, if you disable audio throttle, games like donkey kong jungle beat, will work properly.

- Second change points to a doubt comment on UCode_Zelda_Voice.cpp, where it did not know here PB.NeedsReset came from. Well, the answer is it came from line 03b2 of the dumped Ucode, so when PB.IsBlanck equals to zero, PB.NeedsReset is zero too.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6100 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"56d916bf93837d6fa7b1df461100fac370fc7f3e","2010-08-16 15:45:18+00:00","Corrected writing error on previous commit :). Now should compile correctly. Thanks God for the advise
'
/trunk/Source/Core/AudioCommon/Src/Mixer.cpp   r6100   line 145:
145: 	{
oops, wrong brace? '

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6101 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"963ece2017bbbd8a8148e9f368cc3432dd988868","2010-08-16 15:48:46+00:00","Remove unnecessary casting bloat. Since AMD Stream 2.2 this is no longer a requirement.
Stream 2.2 is minimum requirement for OpenCL 1.1 and binary kernels as well (I hope to implement these soon).Remove unnecessary casting bloat. Since AMD Stream 2.2 this is no longer a requirement.

Sidenote: Stream 2.2/Catalyst 10.7b is minimum requirement for OpenCL 1.1 and binary kernels as well. I hope to implement these soon.

For the latest ATI Drivers and SDK:
http://support.amd.com/us/kbarticles/Pages/OpenCL11ATICat107UpdateDriver.aspx

http://support.amd.com/us/kbarticles/Pages/OpenCL11ATICat107UpdateDriver.aspx

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6102 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"fb1c14e2ccd147a17ebaac2d162ce063cd0ca756","2010-08-16 22:37:04+00:00","long time no commits :).
fixed one of the last graphic problems in smg, now the glow in the plants and planets must be correct.
the error was caused by a error in lighting calculations. so it must affect other games.
please test and let me know the results.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6103 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"7866fade02b507f76971beb74f63707ac5ba18c6","2010-08-17 02:14:04+00:00","Add volume control for the pulse audio backend.  Unfortunately that can not be done with the pulse-simple api, so I had to switch to the asynchronous pulse api.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6104 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"9080e09a45eeaa58c788659416b97523562ba59a","2010-08-17 12:42:14+00:00","dsplle - small mulx.. regression fix

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6105 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"cf078067e7caf3568d7f10efe79892c5a835c445","2010-08-17 15:45:12+00:00","Reverted change from r6100 to previous version. That thing broke some games audios. With audio throttle off, possessing audio was disabled. Now I'm working on a workaround, stay tunned.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6106 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"84152919dc88f74f4fded6dec9d1b84b4b59453c","2010-08-18 00:22:08+00:00","Wiiuse: Hopefully fix the Windows real wiimote connecting issues caused by r5940. An 'index = 0;' line was accidentally removed.(uninitialized value being used) Hopefully this fixes issue 3067, issue 3058, issue 3057, issue 3054, issue 3012, and issue 2975. Some other minor cleanup to Wiiuse.(recreated the vcprog because it had hard coded include paths and it sucked)

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6107 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"4a61432f14e547bb9a3f4d4189d33c13c4b602c2","2010-08-18 02:24:02+00:00","Fix the shared data dir for the global build on linux.
Also silence some compiler warnings.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6108 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"7703ae047751cf01859c99711b7d7635ce7ae3d9","2010-08-18 09:02:44+00:00","Fixes a couple of issues, like wiimotes not found ingame(not all of them of course) and wiimote plugin not accessible under xp (old wiimote plugin).
sorry for that inconvenience.
BTW Im gonna take a break for a few weeks for health reasons, cya.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6109 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"7b9d0dbedc5c9d8c94d8a300eec6af8358d1cb27","2010-08-19 14:10:22+00:00","JitIL: Added some instruction handlers. They were ported from Jit64.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6110 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"168136a219bf819657ca5b223da8d501b04e30a3","2010-08-20 05:05:11+00:00","JitIL: Implemented some instructions.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6111 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"d5647ce997b2fdb5cbc7c468107fff1a1c89d0fa","2010-08-20 14:14:27+00:00","Just got my iPhone back from repairs and noticed something was not quite right... The Z axis from UDPWii were inverted... oops... X_X ...hopefully I got it right this time... Homebrew doesn't work and I don't have any way to test it... I did some improvements on the IR pointer math, but they are on my desktop and I'm away on vacation for a few weeks... X_X ... next time... WOL

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6112 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"20704fca3da12cd280c7865ed5717f9fd8cb509d","2010-08-20 14:57:26+00:00","Low level emulate the GC IPL (BIOS screen).  The GC BIOS now correctly launches the game.  JIT the IPL instead of interpreting it.  Made LLE BIOS the default (which silently fails to HLE).  Relabelled the 'HLE the IPL' option to 'Skip GC BIOS'.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6113 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"62c4d439ce58a64282a8772a9824ffd405b2f4e0","2010-08-21 06:29:47+00:00","JitIL: Modified psq_l implementation. Reverted psq_st. Removed compile warnings.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6114 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"10a14d17d3f31c9f4a8487bf293524ae1f6240cc","2010-08-21 10:53:17+00:00","JitIL: Fixed a wrong implementation reported in r6111.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6115 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"43dc70eace95522833b5482aeaa9f1f35c583ae3","2010-08-22 08:27:43+00:00","JitIL: Omitted some extra MOVs when a next program counter is in a register.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6116 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"e740c4caa8c23ada89c92bfd3b5388dd84296960","2010-08-22 08:38:56+00:00","JitIL: Omitted extra SUBs when js.downcountAmount == 0. (Though it is not very often.)

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6117 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"bab7721124e194d6918e7609cffaa7ad738a15e7","2010-08-23 00:36:59+00:00","JitIL: Reverted r6117 because I could not find the case js.downcountAmount == 0.  I'm sorry for confusion.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6118 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"430380eac64bef858b39c890ef6e960319529948","2010-08-23 19:19:10+00:00","Reverted r6112... The iPhone client was submitted to Cydia with the apropiate patches

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6119 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"cf5088c37e5cd486b031faa6fdfc4f4ff7b28082","2010-08-23 22:26:00+00:00","JIT compiler:
* Improved constants folding in load/store instructions
* Merged load instructions

This is almost the same commit as r6076/r6077 but x64 build has been fixed.
Thanks a lot to skidau and BHaaL!!


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6120 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"b7ecd01686fedb5a4c5b41aa833edeb98b7d85d9","2010-08-24 08:48:09+00:00","9/10-bit accelerometer data interleaved with buttons
some useless IR pointer math... It still doesn't make rotation work
a sign fix when tilting along y axis (twisting the wiimote)

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6121 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"153b019fcd62f4a74933cf44cbc8fc02337db863","2010-08-24 08:51:54+00:00","small number mistake

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6122 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"0f56f5076c77f7f5096e23c2f69ce7ada941cdb9","2010-08-25 01:45:23+00:00","Changed WII IPC HLE to continue execution after the game attempts to open unknown devices.
The allows Prince of Persia: The Forgotten Sands to be played.
Fixes issue 2684

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6123 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"3b30019fcb6e47cf4ca4e853bd5924dcca5c9e0c","2010-08-25 03:42:57+00:00","some experiments with lighting, please test an let me know if is a  improvement or make things worst

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6124 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"8e4df073535f6d580267c7635a3706f894cc79d1","2010-08-25 11:18:46+00:00","sorry for the last one, please test this one :)

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6125 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"752afe178be897525dbd7f17231177aa4ec58ed4","2010-08-25 11:44:01+00:00","Fixed wiimote shaking

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6126 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"c32cad999c6ca490fe5a91d62d06ba06bc27fc23","2010-08-25 12:55:21+00:00","JitIL: Improved the register usage of some IL instructions (SExt8, ICmp*, DupSingleToMReg, InsertDoubleInMReg) for the speed improvement.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6127 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"9c98d0ab856ad161f8fdc878c1b5029d7d3f1fb0","2010-08-26 01:56:30+00:00","JitIL: Extracted local variables to prevent calling regLocForInst()/fregLocForInst() many times. It was pointed out in r6127.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6128 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"ea7004ffa7b912a7b8040463a0ca0fac4b51a92f","2010-08-26 11:06:47+00:00","Optimised the JIT cache lookup in JIT and JITIL.  Gives a <5% speed-up in GameCube games.  Wii games and GC games+MMU get a smaller speed-up.
Cleaned up some code in the JIT and memory functions.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6129 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"60696ffe30b2df9fae6d9f4fe1664d3bac201ae1","2010-08-26 11:32:30+00:00","JitIL: Commented out folding rules which are not tested. This commit is for the check of the bug reported in Issue 3097. The bug was introduced in r6110 by myself. In r6110, I added a function to convert andx, nandx, andcx, orx, norx, orcx, xorx, and eqvx into IRs. It is clear that the function has the bug. However I could not find the bug in the function. Then I thought there may be bugs in folding rules in IRBuilder because there are some untested folding rules which fold and, or, xor, etc. (This is also written by myself. I'm sorry.) I tested some folding rules and commented out the other untested rules.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6130 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"46e8ea80949a31a902a50b3fdc7d97a403540897","2010-08-26 12:52:35+00:00","JitIL: Partially reverted r6110 (andcx, norx, orcx, nandx, and eqvx) to fix the bug reported in Issue 3097.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6131 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"d082f50c3444594c61cc9b6146fdfd95eeaa3313","2010-08-26 17:44:13+00:00","My first commit!
Done some refactoring around the PowerPC stuff. Main changes:

* Declared CPUCoreBase class
* Wrapped the interpreter into a class and made both it and JitBase inherit from CPUCoreBase
* Avoided reinitializing interpreter's and Jit's tables

A great deal of this work was done by nodchip, so kudos to him :-)
To finish, please forgive me for my not-so-great english.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6132 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"aae0e966826cffa37501e6dfc648d8617fbe618b","2010-08-26 19:24:47+00:00","Fix RTC to report the correct system time in Wii and GC titles as reported in Issue 1817

Modify GetLocalTimeSinceJan1970 to account for DST.
GetGCTime() returns only GC epoch time(used by most Wii titles.)
IPL-DEV subtracts Wii bias before copying to m_RTC(mostly used by homebrew.)

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6133 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"47fa91250b6633c5b9e830073d9e716634f6a602","2010-08-27 07:25:31+00:00","JitIL: Fixed the wrong implementation of 'mtcrf'. (The bit order was reverse...) This commit may fix the bugs reported in Issue 3097 and r6127. (I could not test them because I don't have the games which are reported.)

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6134 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"d5bae7e0adc4c4c495cfaeef240831175a45c27e","2010-08-27 07:40:22+00:00","JitIL: Restored some instruction handlers reverted in r6131. If this revision does not introduce the bugs reported in Issue 3097 and r6127, the cause of the bugs is the wrong implementation of 'mtcrf' which was fixed in r6134. If not, there are other bugs. I will revert again. Any way, they were my fault. I'm sorry for all.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6135 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"eaa3371f92fd1b2cc8a8fd19413317a904927689","2010-08-27 09:41:48+00:00","Further optimised the JIT cache lookup.  Attempted to fix the Wii games in ICC builds.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6136 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"f8e8f25408d105c9b8414eb88a152a5a55930196","2010-08-27 11:17:58+00:00","JitIL: Reverted r6135 again. Please refer r6110, r6131, r6135, and Issue 3097 about the problem. I will check the problem after I get MP2.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6137 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"eb40f765c2bf42a1b57c964262dfff439b6dbaa6","2010-08-28 00:37:27+00:00","Bugfix for the TLB cache used by the MMU. Thanks to drkIIRaziel for spotting it.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6138 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"9b0357b5e2fd1d25a26718f64bc345b053848261","2010-08-28 15:09:42+00:00","sometimes to advance  you have to make a step back.
use plain vertex arrays instead of VBOs to render in Opengl plugin as the nature of the data make VBOs slower. This must bring, depending on the implementation, a good speedup in opengl.
in my system now opengl and d3d9 have a difference of 1 to 5 fps depending of the game.
some cleanup and a little work pointing to future improvements in the way of rendering.
please test and check for any errors.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6139 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"ae802f0403d30ab8512c6d49db9893ec1045c950","2010-08-28 15:40:45+00:00","JitIL: Disabled the jitting of psq_l when inst.W == 1. This is a test commit to check Issue 3114.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6140 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"1d05290be7f884eade268b3317a31c32028e08df","2010-08-28 15:53:01+00:00","Include 'Hash.h' rather than 'hash.h' for case-sensitive file systems.

Fix some compiler warnings.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6141 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"6f6acf3970b819027db0db98af22f7ea5a83bb9c","2010-08-29 02:18:06+00:00","JitIL: Improved the register usage and remove extra MOVAPD instructions. This is for the speed optimization.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6142 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"4e81cb40129790625fd30670321036e9b21d9369","2010-08-29 03:45:56+00:00","GCPad/Wiimote New: (OS X Config Dialog) Temporarily fix a crash when selecting an item in the device list (a current bug in wxWidgets with wxTE_PROCESS_ENTER). (Windows DirectInput) Hopefully made axis enumeration and the fall back to polled data(for drivers which don't support buffered data) simpler and more foolproof (a few users were having issues with a few specific gamepads).

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6143 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"e1d1a1eba0cfc03ef27364a7693c80182836591b","2010-08-29 04:56:53+00:00","Fix EFB Scaled Copy in OpenGL plugin.

It no longer uses the TEXTURE_RECTANGLE extension for GameCube textures. Since GameCube always uses normalized texture coordinates, it's an unnecessary burden.

Please test hi-res textures.

Wow, it's been a while.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6144 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"a3df65bd027f504a7c948a5076280f9b22555ef4","2010-08-29 08:00:51+00:00","JitIL: Added a new IR instruction, MulHighUnsigned, which computes the upper 32-bit of the multiplication of two unsigned 32-bit integers. Rewrote mulhwux with MulHighUnsigned.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6145 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"ad6ddfa18c7c6596e702b4756957ffbc3f5ac1d7","2010-08-29 17:51:55+00:00","IR pointer rotation finally working... Added a low-pass filter over sin and cos, but I still get some jittering... I suspect it's the numeric values... Billiard? Can you please help me on this?

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6146 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"3058a926cfca089c65701b2902273b0e37467ca1","2010-08-29 17:53:55+00:00","Implemented missing lswx and stswx instructions. Tested with Wii PES 2008 (PAL), which now works (OpenGL devs please take a look at this game).
Changed the scope of some variables introduced in my previous commit (r6132).

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6147 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"4229d9e01ec062714f9c784930ba60d0f0967456","2010-08-29 19:34:54+00:00","Remove a bunch of freshly-obsolete code

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6148 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"3e7dafbbd7708f574059bc4722c260b4f6edd6cb","2010-08-29 23:08:56+00:00","fully implemented display list cache with vertex data included and added in all the plugins.
still experimental, not totally optimized but must bring a nice speed up
please test for regressions an error. an please Linux people fix scons :)

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6149 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"e4f9b6a5f8a92d838f54d0693a53ec70a1bc9a86","2010-08-30 00:00:14+00:00","I'm an 100% scons noob but I think this fixes r6149, although it seems that the repository revision isn't appearing correctly (only happening with me?).

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6150 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"baba7f54dc73c2c73ce9b7e3324f93dd02c882af","2010-08-30 01:24:14+00:00","JitIL: Fixed the Issue 3114. The bug was introduced because the usage of MOVSD/MOVSS was wrong. MOVSD/MOVSS don't clear the upper bits when they are used to transfer between registers. But they clear the upper bits when they are used to transfer between a register and memory.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6151 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"014e87157cd090a01ebbe01eef0400992551136e","2010-08-30 02:07:09+00:00","JitIL: Modified 'LoadDouble' with SSSE3 to improve the performance. The code is ported from Jit64.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6152 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"6a695eff4970e450b4d17b9d20d7ea03f7ec0fea","2010-08-30 04:05:06+00:00","Remove more obsolete code

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6153 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"c1cac331a0f0d740a3485719d9625383d33aaeb6","2010-08-30 07:05:47+00:00","Major overhaul to input recording, including fixing major desyncs during playback and a small bug in the .DTM file format. Like netplay, some emulator options (specifically dual core and idle skipping) can cause desyncs, and the more your plugin options are similar to the ones used during recording, the more likely playback will sync.

Also, input movies are now linked to savestates instead of just selecting a file to save to and running a game and are exported at a later time. This allows you to easily continue a recording across sessions and makes rerecording possible.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6154 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"c9dd11c80333238e567d50818d8e2762ca1de0ba","2010-08-30 15:18:43+00:00","some fixes for dlist, now is configurable in the video config section, still not in the gui,
disabled by default till a fix for segfaults in linux and geometry problems in some games

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6155 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"625d78fb59b806f0c36aca47425b527047389d22","2010-08-30 15:33:37+00:00","fix for my last commit

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6156 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"8d6f98439e9ce3c245e18fe5a61605264cbe63fd","2010-09-01 22:03:51+00:00","Fixed some race conditions with PPC exceptions and external interrupts.
This may help fixing issues related to video interrupts handling.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6157 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"9e17007c90817c6605e55dfb3b3b143a0f786007","2010-09-01 23:44:03+00:00","- Fixed TimeBase and Decrementer registers so that they are updated only when needed
- Fixed RTC for GC homebrews

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6158 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"7afd393acbe1aa9298b1003fbaaf3300616dce33","2010-09-02 00:03:25+00:00","GCPad/Wiimote New (ControllerInterface): Some tweaks to the DirectInput code. (fix for a random gamepad which didn't work)

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6159 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"ab56cf9c1cbeebd4554c7b95abe279e7bea3cd98","2010-09-02 01:20:27+00:00","stop trying to patch out OSProtectRange calls

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6160 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"743641965a2193e1d0849f611bc6978c301e9130","2010-09-02 01:21:26+00:00","DVD Interface forces alignment, and rejects writes to DICFG

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6161 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"9220ca1afc8bfa2e29c62bab65fd58243269f0bb","2010-09-02 01:23:28+00:00","fake /dev/stm/eventhook ... makes libogc shutup a bit

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6162 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"baf82a0849fb420c9e84af0ba46294497f0123d0","2010-09-02 01:36:45+00:00","hackfix dsp reset: fixes zelda collector's edition and some other games which reset and hang (...are there any others?)
the problem was that the streaming audio interrupts were still being triggered, causing the game to try and jump to an invalid interrupt handler. The code for dsp lle looks like a hack :( (but it works)

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6163 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"efd9bae44958e01984824058f3194b4697b1a4a2","2010-09-02 04:17:23+00:00","improve ios hle error handling.
remove stubbed devices. they now fall back to the base device class, which reports the device as not available.
fixes issue 3137.
start ios fd counting at 0 instead of 0x13370000. I know it's sad, but it fixes homebrew booting and such.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6164 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"26eac5d22a7581f406130056ba5f85d4b5635b26","2010-09-02 09:36:19+00:00","JitIL: Fixed a bug (hack?) that NaN is considered as -0.0 in fcmpx. Implemented Nan check routine in FDCmpCR.
The bug (hack?) was introduced in r3312. I could not determine whether it was a hack or not.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6165 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"38d6d539d2d5b20cae4bbfc7c5b28ab17e5ee1ae","2010-09-02 11:12:45+00:00","JitIL: Fixed the compile error reported in r6165. Sorry for inconvenience.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6166 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"c08144f89320bc602d5864eee4e4f6e47bfb04b3","2010-09-02 15:10:12+00:00","Fixed F-Zero GX in JITIL 32bit builds by using a vmem mask for memory loads.
Enabled the lbzu instruction in JITIL.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6167 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"76a5ca84d10ad82807aacb4dc60c2466bab8a223","2010-09-03 09:08:33+00:00","Removed the check on video plugin change in PluginManager::GetVideo() (Profiling shows lots of strings compare from this function).
Since plugins can't be changed when emulation is started, it's a waste of time to check if it has changed.

There may be cases where this check is needed. If so, the check should be done in another function (because GetVideo() is called very often while emulating).

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6168 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"c92ae1c9158d62019a47a65e9e58e8645a0ecf59","2010-09-03 14:06:34+00:00","I think it should be addr there, not address. Plus code-formatting.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6169 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"9935fe254662b8fc3c9449e2db29fbf4fa33a851","2010-09-03 17:03:06+00:00","Create a stub device for ios hle, and use it for /dev/usb/hid. 'Fixes' monster hunter tri, which was broken by r6164

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6170 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"ae309405a50082b698860caba6f0d60c2f36d7b4","2010-09-03 22:31:52+00:00","DX9/DX11: Missing breaks are just as evil as static variables.
This commit might fix some issues when colors were drawn slightly wrong in the DX plugins but correct in OpenGL. So please test this ;)
Thanks to Billiard for spotting.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6171 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"f4a6e585bea1176b2518bdd381e4bb44b30a23e7","2010-09-04 01:04:37+00:00","Rollback on a DSI exception, for the instructions that need it.
Not a good thing to say, but this isn't properly tested, since I don't know of any game that generates a DSI exception. I'll try to write some homebrew to test this, but I'm pretty confident it's ok. Anyway, please take a look at it and tell me if you find some mistake :-)


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6172 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"6dc16b74160a49bac66b1c0f9afdc31f85d9e363","2010-09-04 14:25:39+00:00","JitIL: Improved the compilation speed by fixing the bug that getNumberOfOperands() initializes the table each time it is called.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6173 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"80a9116c0de5531703f95f5ef9ede735c6f70e93","2010-09-04 14:51:24+00:00","Fixed plugin selection/config dialogs (broken in r6168).

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6174 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"9e3dd4d2d4208d85bf04a473717aea8a884ea4ab","2010-09-05 07:36:10+00:00","Work towards implementing ES_LAUNCH
returning to installed wii menu from a disc based game is working
however wiimote does not work
launching title from the wii menu has a similar issue
only tested photo channel 1.1, channel loads but wiimote does not work
as before launching channels requires sysmenu < 3.0
and you can change between sys menus via extracted wads by installing any version
IE if 4.2 is installed, right click on 2.0 wad in the gamelist and install to wiimenu
and right click on 4.2 wad and install to go back to menu 4.2



git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6175 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"197202798dfcb2cfe30e916a932d993b8c39a467","2010-09-05 07:38:26+00:00","oops, left in some code and typo with the attempted ios reload fix

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6176 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"92eedc9cd3e07dd4d11532dad8ab41c12fa54770","2010-09-05 20:18:13+00:00","Fix wiimote in homebrew
Marginally speed up old wiimote plugin by doing less memcpys
A lot of changes went into the bt dongle emulation, so please test for regressions :)

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6177 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"eda6b2a23ce703478c953cc3374ed714d368aabc","2010-09-05 20:49:04+00:00","remove an ERROR_LOG that was left in from r6177 which could be annoying

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6178 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"43c11a491a8060ad6bdb7a1c1f9f8affc15fbe28","2010-09-05 20:54:24+00:00","remove frivolous comments in WII_IPC_HLE_Device_usb.cpp which must've been there since the code was copy-pasta created ;p

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6179 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"58ac6e541f0854723d49b5bafb4871ddb3e0aed2","2010-09-06 03:03:33+00:00","Added PSRLD/PSRLQ/PSLLD/PSLLQ support to x64Emitter

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6180 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"402b1d83e2e5ea059a8ccd3dba558180b83178e6","2010-09-06 03:09:12+00:00","JitIL: Implemented 64-bit access in StoreDouble for speed up.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6181 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"3bdeb923ef78eccd1efeae694d774d696a6da5d3","2010-09-06 04:36:58+00:00","Some work towards launching by titleid rather than content path,
update some var names in WII_IPC_HLE_Device_fs, filter out some spam logs from VolumeCommon

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6182 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"34aebffff92e8f3357dea14082f3ac0973243599","2010-09-06 10:27:33+00:00","Added an option 'Alternate RFI' to the Game Properties to enable alternate interrupt timing.  Try enabling this option if a game hangs, works only in the Interpreter or Dolphin crashes.  This option fixes Die Hard: Vendetta and Medabots Infinity.

Fixed the interpreter to execute instructions in the right number of cycles.  It used to execute all instructions in one cycle.

Added a trace function to the interpreter making it easier to determine differences between the interpreter and the recompilers.

Removed the 'Enable self modifying code check' as it was not useful.

Fixes issue 2407.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6183 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"d02dd6d3facb114a099e67f65801a45ac955cad1","2010-09-06 12:14:18+00:00","std::string needs <string> rather than <string.h>.

Also some minor cleanup.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6184 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"c551a2ee51b6e336daa5198c20f3e4aab32f11b5","2010-09-06 13:38:22+00:00","Linux build fix.
Also fixed a couple of compiler warnings (one in SystemTimers.cpp that was an actual bug too!).


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6185 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"5948865bcc0ff079889bd21a69af1f5e73abd3a9","2010-09-06 13:47:18+00:00","jiggle includes in hci.h/l2cap.h: msvc <= 9 doesn't provide stdint.h

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6186 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"c710ae752966aa9440b91cbea5b3f908d872945b","2010-09-06 14:43:28+00:00","Added a speed hack for the MMU games.  The speed hack is enabled by default.  'Enable BAT' in the game properties enables the old accurate emulation behaviour.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6187 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"dee24e56956f16d852fc3be51628c1dc2e4477ac","2010-09-06 21:41:01+00:00","Added support for recording multiple GameCube controllers at once.

Fixed recording playback to automatically enable/disable the correct controllers.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6188 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"e0383634d33194812ab7ee1440d0796dc12abea2","2010-09-07 06:06:08+00:00","Implement parts of DIVerify that can be useful. (copy tmd to emulated nand for disc titles)
correct some parts of uid.sys as disc title ids are included
title in uid + tmd on nand is how the sysmenu knows which save files to look for.
IE games that are displayed in the disc channel at least once and have a save file will be
viewable in the sysmenu save manager

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6189 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"d422039f0ae9a48ac9b1a6a1c3664d0b8920e1af","2010-09-08 00:20:19+00:00","call DIVerify when a wii game is launched directly by dolphin (adds tmd+uid)
after this revision, wii save manager (< 3.0) should show any saves on the emulated nand

fixes an old issue with GetTitleID
fixes issue 1716.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6190 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"a20483eedd6b40a06630a7ded0456461320fb007","2010-09-08 06:23:37+00:00","Hackfix launching pal games from discchannel (cause was missing tik for ios required by game)
when sysmenu asks for tik of a ios give it its own tik

Update issue 3186
it should work now :)

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6191 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"bf4a18e08c87526630fa6de87b495ce8938f1ba4","2010-09-08 17:08:01+00:00","Fix a few things in ES I had lying around.
Booting newer SysMenu versions still doesn't work, tho.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6192 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"ccb96be9b3735e30934128190ad71c071ba3e9e4","2010-09-09 02:14:03+00:00","Jit64/JitIL: Enabled block merging to improved the performance. This improves the fps 4-5 faster in some games. However it decreases the fps 10 slower in other games, MP2 and etc. In this commit, the actual block merging is disabled. If you want to try block merging, please set FUNCTION_FOLLOWING_THRESHOLD to a positive integer.
Increased the size of code buffer to prevent cache clearing with block merging.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6193 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"a1de442ed886d55f97e6dd7cc9065a83f273f9a6","2010-09-09 13:25:43+00:00","Update the Cg framework for OS X to version 3.0.17.

Tested with ATI 2600 and NVidia 9400 graphics.

I have not updated the header files. There doesn't appear to be any
obvious interface changes for OS X, but the same might not be true
for Windows.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6194 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"00327b0494677e6ff8ccab6f6f13a68bbdebf4bf","2010-09-09 17:11:51+00:00","Update Cg for windows to 3.0.0007

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6195 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"65975e212ed08c73b333ca8b6a6f93c100730a02","2010-09-09 17:48:52+00:00","update GLEW on windows to 1.5.6 (and any platform that builds from source)
remove glx stuff that we weren't using

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6196 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"ecb4d6d2f8a7032aeb993f3d0f7be1e9bb9d547b","2010-09-09 17:52:52+00:00","addendum to last commit: forgot files outside the /Externals/GLew directory...

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6197 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"18123251d14be1419e9c87d9baa70ebc6fdaedd9","2010-09-10 21:06:59+00:00","allow multiple titles on sysmenu versions > 3.0

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6198 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"9d57903065a30ad261bfbd8005e4dd81927eb023","2010-09-11 02:34:51+00:00","Emulation accuracy improvements

* Implemented HID4.SBE flag
* Implemented but disabled MSR[IR] and MSR[DR]
* In-lined ISI exception calls
* Fixed and verified exception handling according to docs
* Code clean-up in the memory functions


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6199 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"51cd032af3168aed08e50a37d7d5582dcf554016","2010-09-11 10:41:57+00:00","Clear m_TitleIDs when opening Device_ES (Fixes Issue 3205)

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6200 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"5c4c8ec07a89b906ffa53ea763a9b2aa39d68b97","2010-09-12 13:27:37+00:00","bs2emu: load 32bytes of the disc header to memory instead of just 10bytes.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6201 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"4ec8f9715412da740d3b57923182cc905c532721","2010-09-14 12:32:02+00:00","Fixed channel loading from the System Menu.  Also gave the menu a speed up by increasing the IPC_HLE_PERIOD.

After launching a channel, the wiimote has to be disconnected and reconnected for it to work.  The same also has to be done when returning back to the menu.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6202 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"412ce56f8333376add665fffced77561f5c51ade","2010-09-14 13:50:25+00:00","Added options to enable/disable Block Merging and DList Cache into game specific settings.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6203 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"08b999dbfa554ecfdb7566283e77c5d4fdb3bec0","2010-09-14 13:52:17+00:00","VideoCommon: A minor optimization.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6204 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"73adab0ce1f5e6f9648e4c7107ec4c33c46edb54","2010-09-14 22:48:22+00:00","Dlist Cache step 2:
include referenced array data in the hash to avoid problems in some games.
this version is a slower than the last version but is more stable, still much work to do but so little time to do it :)
Added Dlist Caching Option to the plugin configuration so anyone can compare the performance change.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6205 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"a3b59f684575086f233233fbae04fb7eabfd1f46","2010-09-15 12:30:56+00:00","Change Disc functionality:
* Fixed the 'Change disc...' command.  The filename of the disc was being lost between functions.
* Split the ChangeDisc function into two functions: EjectDisc and InsertDisc
* Moved the 'Change disc...' command to the File menu.
* Removed some log messages that caused the debug build to crash when loaded with release build plug-ins.

Fixes issue 3036.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6206 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"26ab958ffbbddbbeacb01608ea78550b0189c152","2010-09-16 01:58:02+00:00","Jit64/JitIL: Corrected address information used for speed hack. This commit will prevent slow down with block merging in some games.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6207 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"b7ba3ffc8487c9184ea7604ee6ab5af5f085dfa6","2010-09-16 02:12:00+00:00","Fix a segmentation fault if 'Change Disc...' is selected and then the file chooser is cancelled.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6208 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"2774d4ffd4dc744d8451eda15e9b90690a8e74f1","2010-09-16 02:38:28+00:00","Fxied the build error in r6207.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6209 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"72af7b3e5e5953ebbb3b4f543fbaa0c667779987","2010-09-16 03:46:23+00:00","Jit64/JitIL: Fixed the constant value used to control block merging.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6210 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"7824855116a802c75dbfaf156dc30abc448bd980","2010-09-16 04:22:27+00:00","Silence some compiler warnings that have accumulated.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6211 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"2cddf48cdebda1a6da4fcb9c8cb1e99ec83e5b82","2010-09-16 05:09:29+00:00","ControllerInterface: DirectInput: Added support for Ramp and various Periodic force types. Only Constant forces were supported prior. (only partially tested due to lack of hardware) This may improve performance for those experiencing emulated wiimote slowdowns when using DInput rumble.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6212 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"19a50b3c51c46a2ed903c501c583600fa3f69eeb","2010-09-16 22:50:18+00:00","New Wiimote Plugin: Added a real wiimote 'Pair Up' button on Windows for the Microsoft bluetooth stack, like the old plugin. The PairUp function was copied from the old plugin and cleaned up. (Mostly untested because I'm not using the MS stack) Please test. Other minor changes to emu-wiimote and DInput. (Perhaps the 'Refresh' button should call PairUp() followed by Refresh() to make the dialog simpler.)

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6213 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"bac3eac6298ff192daafc18a68910bc59dbde065","2010-09-17 00:27:37+00:00","New Wiimote Plugin: buildfix and minor tweak.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6214 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"7216699fc420e96f4420169932d5abbb975b687a","2010-09-17 20:01:09+00:00","Seems like I broke something in r6127. I'll fix it asap but for now l'll just revert it. Sorry :-(

This closes issue 3180.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6215 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"eda652b7a07a8df57b5953a51c1eb96246778d64","2010-09-18 16:43:43+00:00","New Wiimote Plugin: Fix Emulated Wiimote Problem.(fixes issue 3230) Made the 'Connected to X Wiimotes' text update on all tabs when clicking 'Refresh'/'Pair Up'. Some other cleanup.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6216 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"236f75aac3e3fb09bbebdd1bc01c2191cdd7b029","2010-09-19 20:01:17+00:00","Make shader for copying from depth buffer to texture more resilent against precision loss.

The theoretical result is slightly different to the original shader because the
final adjustment is to the range [0/255..255/255] instead of
[0/16777215..16777215/16777215].

The real result is vastly different on some gpus that were giving incorrect results
of bits 23..16 (y-component) wrapping around while bits 31..24 (z-component)
stayed the same, and bits 31..24 changing while in the middle of the value range
for bits 23..16 for large depth values.

This should fix issue #3123.



git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6217 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"6583a3f1e207cd0655a66fdddcfb8ed4e752c321","2010-09-19 23:40:03+00:00","Plugin_VideoOGL: X11: Add another display connection to keep the two threads from
eating each others events.

Manifests itself in GPU thread waiting forever for a reply in GL library code(and thus
a frozen emulation). Most of the time, this can be resolved by creating more events
(clicking, changing focus), but sometimes it stays stuck.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6218 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"194493cc042be5dffbac08fe315c2ce42014bf50","2010-09-20 21:45:47+00:00","Some work on merging the video plugins: Added a new plugin to the solution(shouldn't build by default) which combines the DX9, DX11, and OGL plugins with their common code merged (and some things temporarily removed). In it's current state the plugin is hardly usable. Perhaps someone with knowledge of the video plugins will be able to fix the things I have broken more easily than me(or point me in the right direction). I will continue to work on it as well.

Main Issues:
DX11 is functional with a ~2MB/s mem leak.
OpenGL/DirectX9 have a black display while game runs. (DirectX 9 flashes good display on emulation stop)
Too many virtual function calls. (once everything is working, I will work on removing them)
Won't build on non-Windows in its current state. (mainly EmuWindow will need changes for Linux/OS X)
Probably other stuff.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6219 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"32143f945759c74ff91dd30c8b6fd3af84f32e66","2010-09-20 22:53:32+00:00","Fix 'Plugin_VideoMerge' dependencies.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6220 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"073899cb2620d350b503437aeaf332bd5b4c889f","2010-09-20 23:24:05+00:00","Forget about something. :p

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6221 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"97a9c375f99071ce953edd25d48c734ce7390796","2010-09-22 02:42:17+00:00","JitIL/Jit64: Removed std::vector for speed up.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6222 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"5e806eb7b27db99510fd565505587b7d7c246cb6","2010-09-23 02:05:04+00:00","Jit64/JitIL: Implemented simple function inlining for speedup.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6223 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"e641323de2bd262fbc6bd4adf2299f5c0c7b33c0","2010-09-23 02:17:48+00:00","i know still a lot to fix and much work to do but sometimes experiments are fun :)
for all the plugins implemented per pixel lighting, this will make games that uses lighting  a lot nice. (just look at mario sunshine and compare :))
for dx9: implemented temporal anaglyph stereo: just grab your red-cyan glasses  and enjoy.
stereo calibration: use stereo separation ( distance of the point from you are looking) and Focal Angle: the angle necessary to focus in one particular object.
this settings are different in every games as they use different depth ranges.
please for any regression and bug introduced by this commit.
if you ask why i did not implement stereo in dx11 and opengl the reason is one: they don't work right when i have more time will try to find a way to make them work.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6224 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"91036ae160b82bd58a6c93fe80f8ace9226428d2","2010-09-23 19:38:49+00:00","Slightly adjust z-values calculated in the vertex shader so OGL does not clip the
final rendering of (at least) Sonic Unleashed.

This should be (nearly) invisible in Z16 depth copies and in games, but there is
some chance that it collides with other such border cases. There probably is some
room to decrease the adjustment but 9999999/10000000 is not enough. A static offset
may be an option, too. I don't know if the game can/does set something like that.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6225 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"e011b4a6a6dc2170204e0b7c91d7b67fddee242c","2010-09-26 04:50:12+00:00","Jit64/JitIL: Removed a redundant MOV instruction. This commit suppresses alert windows of debug binary in windows.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6226 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"436a927566d48c2511001e4367c3aa599ee1e535","2010-09-26 06:31:45+00:00","Gecko codes: Implemented CT6 CST1 code type (insert asm code in the game). This function may need many tests.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6227 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"2f44464eef83f6323ef76db841b5e7abf9f5149a","2010-09-26 06:58:21+00:00","Fixed the build error in r6227.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6228 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"bc1e0c24e896e3cad4a1d3338c12d5888904b590","2010-09-26 19:37:30+00:00","Add an PanicAlert in case we try to do an >32 bit displacement

If you see this alert, dolphin will probably crash in a few moments.

Found in the course of fiddling with DSPLLEs JIT, which puts its data
structures and static code somewhere above 0x7fff00000000 on my machine, making
it unreachable via 32bit displacements from the created code at ~ 0x40000000.

Fixed all the offending places in DSPLLEs JIT to emit register indirect accesses,
only to find out that the generated code is slower than the interpreter and does
work just as good(or bad). Oh well, back to DSPHLE it is then.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6229 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"a5333f80d13852634499bc932b043230c5835240","2010-09-27 01:18:25+00:00","Gecko code: Fixed the thread-safe problem reported in r6227.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6230 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"6cf51dbd66d9f95767f807f71b9a889090befb2a","2010-09-27 02:22:53+00:00","Allow SI AM_Baseboard to be selected correctly in GUI.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6231 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"18be8ffa6eeaf3ec50db1379fab7bd7aedf2d247","2010-09-27 04:29:51+00:00","Replace all bitfields which were only declared with '(un)signed' with their actual types. Let me know if I missed any. It would also be a good idea to test this commit in both x64 and x86.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6232 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"986939f31aa268731a572a636d3fb2f9c0f868de","2010-09-27 04:30:23+00:00","Make the memcheck log INFO level.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6233 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"73f4bc45980398ee8244f4e5ad20ec538da6e814","2010-09-27 05:16:11+00:00","Some more cleanup which should've been in r6232. Thanks Billiard.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6234 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"88cd9f3df1f1856439c4186e2174a5ba7c5e5982","2010-09-28 02:15:02+00:00","Minor code formatting:
First step to bring a level of consistency between the video plug-ins - variable names, spacing, function names, function order, comments, file names.  This will help us identify common code for VideoMerge.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6235 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"4f534594cd19d0c96223d3f0d0e93d8555c99781","2010-09-28 04:25:49+00:00","add 'asm' test to testsuite's sln

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6236 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"543c8926cc1db6b25093bab2ecc61dcc14b51348","2010-09-28 04:26:45+00:00","would help to have a vcproj for that.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6237 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"7eb99b908893df3a1e2e35c992c196e3773fe956","2010-09-28 21:28:49+00:00","Fixed r6235 for the Mac and Linux builds.  Thanks, glennricster.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6238 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"ce1057f17d3b57e9a54e7da0e8ad7e441dca1897","2010-09-28 21:43:38+00:00","Core/AudioCommon: Feed bigger audio chunks to the output devices in case of underrun.

This should eliminate the crackling with alsa and pulseaudio backends and replace it
with much nicer pauses. This is only interesting for audio backends that do not
respect Mixer::GetNumSamples() and should not impact users able to run the DSPLLE at
full speed.

The cost of this is an added LLE audio latency of about 0.06 s in the continuous
playback case. If that is too much, lower the low watermark.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6239 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"719521eeeba24f5a6324975208b6d8d52f6386cb","2010-09-30 15:24:34+00:00","Added EFB Scale option to the OpenGL plug-in.
Renamed EFB Scale to Internal Resolution.
Removed Auto Scale option (it is now always on).
Added on-the-fly changing of the Internal Resolution in the OpenGL and Direct3D9 plug-ins.
Further consolidated the code in the video plug-ins.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6240 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"1450385a53d3d1d0b641d24e6af3ecf8d2c23895","2010-09-30 16:11:31+00:00","Undid the merges made to the OpenGL plug-in's Init and Shutdown functions as these changes broke non-Windows builds.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6241 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"2a64643fdc06531ff463377c9451633d72bb3723","2010-09-30 17:17:13+00:00","Apply u-ra's patch to speed up CriticalSection on systems that use POSIX-threads (that is, not windows).

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6242 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"23f8da4bf72be80ea66293f7facca87fe7a4e2c7","2010-10-01 11:03:37+00:00","Fixed the glitches when an internal resolution other than Native was used in the OpenGL plug-in.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6243 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"c8c805f720dab8d43a40ebabf52616d86ebae845","2010-10-01 12:38:31+00:00","Remove unnecessary shadow variables and signed/unsigned comparisons.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6244 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"b80e207a8aec7ec7c0a97e1a14889ba41f07dcd0","2010-10-01 23:23:13+00:00","Core/DSPCore: Make JIT work on 64 bit hosts

This is the safe variant that does not assume other
functions use R11 for &g_dsp.r, which they actually do.
So there is a lot unnecessary reloading of the register
getting emitted.

There are a few small changes exploiting pointers known
at emission time and making use of MComplex math.

Also renames m_LLEplaying to m_AIplaying in Core/AudioCommon.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6245 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"26c7a5303d576e5d565c40f72911e28df6683d02","2010-10-02 02:04:44+00:00","Fixed a bug in JIT/JITIL.  The size_of_merged_addresses variable was being used before it was initialised in certain cases (Rogue Leader).

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6246 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"c0e90d4b39e33248c392efa2304d7430e0a98ca2","2010-10-02 11:50:50+00:00","DX11: Clean up AccessEFB and fix a crash. Thanks to pico554 for hinting at the wrong part ;)

Should fix SMG for NVIDIA users. Slightly changes behavior of the AccessEFB function, so test this for regressions, please (esp. in HD resolutions).

I tried to apply the same changes to Video_DX9, but for some reason EFB access didn't work anymore then. Might look into that later.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6247 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"aaeb21fe3b60ac98a6e283d13d0228dada9055df","2010-10-02 20:04:03+00:00","Core/Common: Automatically emit a MOV in ABI_CallFunction* when the function
pointer cannot be reached by 32bit displacement.

RAX is caller save and non-parameter in all 64 bit ABIs, so it should be safe
to clobber it on function call.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6248 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"841583b8f3b0664fef24305928a0f26eae5c6b29","2010-10-03 00:41:06+00:00","Merged identical VertexManager code from DX9/DX11/OGL plugins into VideoCommon. Still need to merge VertexManager::Flush (will be easier after TextureCache is merged). Purposely using a class/virtualfuncs rather than a namespace so multiple VertexManager can be in one plugin (VideoMergeNew? :p).

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6249 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"aae0fa79098382bc44d2b5241783cca60d60188a","2010-10-03 04:29:34+00:00","InputCommon(GCPad/WiimoteNew): Fixed issue when inifile didn't exist, defaults were loaded, and input didn't work. Fixed prob in DirectInput(hopefully doesn't break any other gamepads): buffered data wasn't ever being used. WiimoteNew: Hopefully made emulated swinging better(please comment). Added (completely untested) incomplete emulated turntable(DJ Hero) extension support :p. Deleted some files that I meant to delete in my last commit.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6250 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"c6fa5804de070361f8aab89b1fa4435d5fd4ef54","2010-10-03 06:10:14+00:00","Added support for PAL-R (Russia) ISO detection.  Fixes issue 2575.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6251 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"4b5b9ad05c10d95c9af43502ecc6877d6e680c4d","2010-10-03 08:20:24+00:00","Add Turntable.cpp to SCons build.

Set native eol-style on recently added files.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6252 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"ec648ed22158653a38c9068628923cd18c7ea512","2010-10-03 22:50:57+00:00","Fixes issue 3295.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6253 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"d57b0a14d063e0e29433d477269794b46e29284a","2010-10-04 01:54:51+00:00","Fixed hires textures not scaling. Also increased max size of custom textures to 2048x2048.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6254 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"4907e6b6d28327a9efdf9395ba865bed5c08ee80","2010-10-04 11:02:35+00:00","DX11: Add texture dumping and hires texture loading support.

Not sure if hires textures are working perfectly, yet, so test this, please.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6255 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"9ffc071e34d232e0ed38b6ed0d52c68f8236324f","2010-10-04 11:09:32+00:00","Some stuff which was still lying around on my hard disk:
- Add a sanity check in CRenderFrame::MSWWindowProc. Possibly reduces the risk of a crash when starting a game and immediately closing the emulation window when using the DX9 plugin.
- DX11: Add the resource usage as a parameter to CreateQuadVertexBuffer, possibly to be used in the future.
- reduce the size of the EFB access buffers from 4x4 to 1x1 since they needn't be bigger anymore
- some fixes to the recent hires commit.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6256 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"6c8fc66698ad659fc994637383bad02f494335fe","2010-10-04 12:50:16+00:00","small HandleLoop() optimization for dsplle-int

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6257 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"4153e6eee1c3e8678b50083354f660912f6f677c","2010-10-05 18:10:06+00:00","Fix building with --as-needed.
Fixes issue 3301.
Patch by Christian.Morales.Vega, thanks ;)

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6258 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"0830e74d55ee6713ad23db113c452b3b98641ad2","2010-10-05 18:15:10+00:00","Only need one copy of Turntable.o.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6259 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"bfd04e380ed2920c61be9455e91a44a8391d965a","2010-10-05 21:43:51+00:00","WiimoteNew: Added button mappings for tables and crossfade slider on emulated turntable extension.(completely untested in game)

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6260 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"31c7fb7a331970d2df9eb7ee72a8481a4a6e9a35","2010-10-06 02:28:52+00:00","Fix wiimotes.(fixes issue 3195)

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6261 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"c203cd5dae1145f453893f8560a26a7a1c4256cd","2010-10-06 18:03:31+00:00","little commit for developers:
patch/hack to make dolphin work under virtual box using Linux guest
tested under gentoo and virtualbox 3.2.8 with 3d acceleration on

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6262 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"f3b144d5636d4cdf49c00f9c7317100d356a61d8","2010-10-07 18:36:08+00:00","Core/DSPCore: Fix register use in two (currently) unused functions, correct the
IsSameMemArea check in the rest of the file.

Looks like this is simply a copy-paste error, that i dutifully 'fixed' for 64 bits.

No idea if this fixes anything, but it brings JIT more in line with the interpreter.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6263 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"cf5639af5459c9c964ba7cf94bcc8fad5c779757","2010-10-09 07:24:33+00:00","GCPad/WiimoteNew: Reordered some stuff in DirectInput device enumeration.(makes certain gamepads work now, hopfully doesn't break other pads) (Thanks to YoD for helping debug) Also fixed something ridiculous in the input config dialog. :p

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6264 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"ccb4645f24bd8ea4f995d4babb13cc41fb8b3552","2010-10-09 13:47:56+00:00","Fix a bug introduced by r6240.
Fixes issue 3320.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6265 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"34909ecebc28c470c89ca2c33cd975c0af9635f4","2010-10-09 21:43:57+00:00","Core/DSPCore: Make the JIT blocks return the number of cycles executed.

The block_size seems to be not reliable, even after trying to more closely match
the interpreter by looking at the analysis for (addr+opcode->size-1) for detecting
the end of the block.

Since we need to 'calculate' this number shortly before returning to
RunForCycles, it seemed logical to use the (up to now) unused return value
of the blocks.

Improves SMG2 here.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6266 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"7797b9d753401871570d0993dff4e90ab0f1d126","2010-10-10 14:35:31+00:00","a little bugfix and a small optimization.
this should fix issue 3313 but i can't test it


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6267 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"7733b84bc134e3aeeeb47a89521dd00e8b122754","2010-10-11 12:38:17+00:00","Added a game option to emulate the disc transfer rate.  This is needed for some games like Mario Golf and Fire Emblem: Path of Radiance.

Fixes issue 1992.
Fixes issue 2519.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6268 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"de3ad372998f3c0c7fb4fb47fde8d3b2edd79759","2010-10-11 22:19:47+00:00","WiimoteNew: Made emulated wiimote return read error when motion plus register area is read.(Fixes 'Sonic the Hedgehog 4' input, perhaps others) GCPad/WiimoteNew: Made DirectInput use the Dolphin window hwnd for SetCoopLevel instead of GetForegroundWindow.(attempt to fix issue where gamepads sometimes don't work until 'Refresh' is pressed)

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6269 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"7e08fc19fc58413bf432f6b9e0e29deb4213d0e6","2010-10-12 19:42:29+00:00","Moved WiimoteNew into Dolphin and eliminated the old wiimote plugin. Removed wiimote plugin support. Moved input dialog related InputUICommon stuff into DolphinWX. Removed now unused InputCommon files. UDPWiimote stuff is temporarily disabled until it is reorganized so Core won't depend on wx. Real wiimotes are now initialized on first need(wiimote diag open or game start) and left initialized until Dolphin exit.(maybe this will work better for Linux/OS X) (scons probably needs some fixes)

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6270 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"a89b8f4a7dd15ce5ee38bb68b877150f36cadfe8","2010-10-12 20:14:09+00:00","Fix scons build.

OS X real wiimote support not yet tested post-merge.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6271 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"e81a10fb44047ab727dc686e66f18ca783795a50","2010-10-12 22:26:30+00:00","Temporarily re-enable SDL pad input on OS X.

Placeholder SConscript for VideoMerge plugin.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6272 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"739c9eb2dfb10501c91ce2d621ef85faba7e2674","2010-10-12 23:39:16+00:00","Allow building without bluetooth support.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6273 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"f862ed4782e68173728e78e3296e625a2f51ea22","2010-10-13 00:19:10+00:00","The --wiimote_plugin command-line option is no longer relevant.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6274 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"f8d84458056d1d9d761d31fe19b65cc481d1e823","2010-10-13 03:07:58+00:00","buildfix for debug/debugfast x64

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6275 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"77a3a5078e30bf1a41450a0f78252c8789aa0420","2010-10-13 09:57:13+00:00","Fix building on Linux without bluetooth headers.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6276 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"7c0cae9e8bf44f5a1556530d7e64f74d41d6f60f","2010-10-13 13:18:17+00:00","Get the htonl/htons prototypes on all Unix-likes.

Clean up a few remnants of the --wiimote_plugin command-line option.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6277 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"e9d91fb9f336164aa1430a901fa2cf05a2ef850a","2010-10-13 21:07:16+00:00","Core/DSPCore: Initialise all of the code blocks

It is pure luck that we did get a fresh (thus zeroed) memory area when not putting DSPLLE on thread. ClearIRAM() is supposed to only clear the non-static part.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6278 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"6e6a0be8c4778a7f49c8ed90bd2cc10315391170","2010-10-14 04:07:04+00:00","allow dumping of mem2 as well as aram. thanks Treeki

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6279 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"47eb5c3416780007318247757a688528df5141ea","2010-10-14 11:37:59+00:00","Core/DSPCore: Only check for internal exceptions in DSPEmitter::checkException, but
call it for every instruction, like in DSPInterpreter::Step. Fix the analysis lookups
for DSP_IDLE_SKIP and DSP_LOOP_END.

After this patch, the block_size and the return value from the block always match,
except when an internal exception is detected. This will change in a later patch,
so we actually get some benefits from checking if we need to call HandleLoop().


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6280 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"6d2c35a332e06c31bdbfdb2eabe147e8e947d9b2","2010-10-14 13:17:38+00:00","Core/DSPCore: Jit: only end emitting the current block when hitting an
unconditional branch(or idle skip), emit check g_dsp.pc and return when
hitting a conditional branch.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6281 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"59381f834314f4637bc78dbb95bb7651833a6e2e","2010-10-15 00:45:45+00:00","JitIL: Added an IR instruction. Fixed the NSMBW bug reported in Issue 3097.
In Issue 3097, two bugs are reported (The bad collision checking in NSMBW and MP2 collision issue). In this commit, the bug in NSMBW is fixed.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6282 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"8e6a866a5bb52abb30d85ff8e85e6d69776c81dc","2010-10-15 07:48:20+00:00","JitIL: Fixed the folding rules. This was the underlying bug of the bad collision checking bug reported in Issue 3097.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6283 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"c4c56d3146d9fe101358204306401ebd951a8699","2010-10-15 21:46:51+00:00","Added Wii disc speed emulation
Added disc access time emulation
Enabled the disc transfer speed by default
Changed the system timing back to the pre-r6090 default (thanks to tsilibourditsas for testing)
Changed the game property to 'Speed up disc transfer rate'.  Leave this disabled for the most compatible setting.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6284 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"f444dd551b8dacf4da1dbfc6a19d91c97828f1e0","2010-10-16 10:16:05+00:00","Quick FIFO fix to get NBA JAM working.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6285 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"8b49d5cccac07ac2a3f1e2a6cfaee9b6e3b80f3e","2010-10-17 12:42:04+00:00","Don't store Render window size when the window is minimized (Fixes Issue 2940)

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6286 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"16ff21b0d543fbf4e89e43faf9b48acdbf6e84b7","2010-10-19 13:35:25+00:00","display fprs in the registerview as hex, and allow editing of the values

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6287 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"cf05cca7a69a1c61f60e781700642111150d5d4b","2010-10-19 22:24:27+00:00","Merged common texture cache code from video plugins into VideoCommon. (DX11 native mipmaps currently broken, disabled) Hopefully everything else should still be working.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6288 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"7b45ac6e01fd6b817cec19a277241888a60e50dc","2010-10-19 23:11:22+00:00","Made it easer to use mouse/keyboard and a gamepad together on the same emulated wiimote. Renamed mouse buttons from 'Button N' to 'Click N' so they do not conflict with gamepad buttons.(hopefully not too ugly, mouse buttons will need to be reconfigured) (Fixes issue 3363)

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6289 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"9a03484d64a310525265757fa04f0c17d5d44be7","2010-10-20 00:12:41+00:00","Goto'ing past variable initializations is undefined behavior.

Work around different gcc versions giving conflicting warnings
about signed/unsigned comparisons involving bit fields.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6290 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"0e534dd033e7dd0b2e40be63ad7ab6849c8ee525","2010-10-20 00:39:45+00:00","Clarify texture cache code. Previously, there were THREE sets of texture dimensions, and it was hard to tell which set was for what purpose.
Now, there are two:
Real dimensions: Width and height of the original GameCube texture
Virtual dimensions: Width and height of the texture used by dolphin-emu's renderer

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6291 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"b1d6417f13080f07179bd4eb84c27a3ff7bd8981","2010-10-20 02:17:16+00:00","DX11 plugin: Use a better mechanism to load vertex and index buffers; prevent a potential bug where triangles, lines, and points could fight over the same buffers

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6292 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"479eea6ad248ecfef83968f84ca1c6659e37fe6b","2010-10-20 02:29:20+00:00","DX11 plugin: Fix numerous Metroid Prime glitches. The 'techno energy ball lighting' glitch is remains, however.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6293 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"cb453a0fb3209bc7753bc0dbbc36d4e07b7964e6","2010-10-20 03:11:22+00:00","DX11 plugin: Do destination-alpha in a single pass. No more drawing the same geometry twice! SMG is faster now because it uses destination-alpha extensively. This uses dual-source color blending, a DirectX 10-level feature. The equivalent OpenGL function comes from the GL_ARB_blend_func_extended extension, which was made core in OpenGL 3.3.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6294 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"0b7e90f0de6a3ff001cfd6a0b34164f8a072d03b","2010-10-20 20:56:09+00:00","Quick fix for Issue 2820 - build works on my system with or without this patch, but it doesn't hurt.
Thanks Karloathian for the solution!


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6295 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"95cfca08e2c3f549613c5ea73836e04ee56a21a1","2010-10-21 05:22:18+00:00","Put infrastructure in place so that other plugins may support dual-source blending.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6296 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"e9734084ee1058e8c76d5c39d686bae728adbcb9","2010-10-21 14:50:42+00:00","VideoInterface and Progressive Scan fixes
The 'Enable Progressive Scan' option in the Wii menu now controls whether the Wii/GC will detect a progressive scan display.  This affects the timing of some games (both GC and Wii).  Usually, the checkbox should be unticked as progressive scan displays require higher bandwidth.

This fixes the slow speed in NBA JAM.  This also fixes the hang in Megaman Network Transmission.  This should fix Deadly Creatures (turn off progressive scan).

Fixes issue 3314.
Fixes issue 3066.
Fixes issue 2571.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6297 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"4c4348a0a7cb777fee51408debc732f399df2fa4","2010-10-21 15:06:01+00:00","Applied the change from r6297 to the DX11 plug-in.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6298 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"e9d115a8b178b851b14b35e356437afe1ccc59af","2010-10-22 03:50:44+00:00","VideoCommon: Fixed the crash when the code cache of DLCache is full.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6299 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"ef75d9665548d1096f50e6a106a926e2f3994f5d","2010-10-22 19:40:05+00:00","Main change: Implemented EFB pokes in DX9/DX11.
Games affected by this change: Mario Smash Football, Mario Strikers Charged Football, Monster Hunter Tri.
Other games possibly affected: Shaun White Snowboarding, Resident Evil Code: Veronica, Baten Kaitos.
This implementation will decrease performance if the game uses this feature, but the glitches will be gone. I'll add an option for this in a later commit. EFB pokes are somewhat slow in DX11 right now, speed should be okayish in DX9 though.

Other changes:
- SOMEWHAT cleaned up the EFB access code in DX9
- Fixed incompatible parameter list of AccessEFB and TVideo_AccessEFB.
- Fixed a theoretical bug in ReplaceRGBATexture2D, add support for STAGING textures
- Removed unused parameters in various DX9 functions


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6300 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"f9187ab5085db5eb2607350b00a021ccfdf16cd9","2010-10-22 20:48:20+00:00","DX11: Use a ring buffer in the utility functions for speedup.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6301 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"ae07f24b98fd452dbfded47768774fc8f892eb87","2010-10-22 20:58:42+00:00","Fix a small but severe and stupid bug introduced by r6301...

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6302 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"5ebc9c97db246c9897702ecc9de0f30829c0a392","2010-10-23 09:59:33+00:00","Fix another bug introduced by r6301: Using observer variables now to check for ring buffer wraps.
Small performance improvements by increasing the ring buffer size and using a better offset algorithm.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6303 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"7410056536e67044b7d0defd7809d8d8b89ae3c8","2010-10-23 12:26:57+00:00","Added the wait/sync back in the video thread on XFB swaps.  Fixes issue 3391.
Changed the VI interrupts to occur on writes instead of reads.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6304 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"91186d2b8a714da4ddaa10b85a4d0165b615c4de","2010-10-23 18:44:01+00:00","DX11: If the virtual XFB list overflows, replace the oldest XFB with a new one instead of just failing.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6305 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"2ec3db44edd83ef4d8a6b9db6ac9092f45b63acc","2010-10-23 19:55:19+00:00","OpenGL plugin: Support for dual-source blending, CURRENTLY DISABLED. It doesn't work yet. To fix it, we may need to convert all our shaders to GLSL so that we can use glBindFragDataLocation.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6306 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"56e79aa87da99172896844d891102193f323fc5c","2010-10-24 04:17:36+00:00","Added a safer OpenCL shutdown procedure.

Fixes issue 3015.
Fixes issue 3089.
Fixes issue 3099.
Fixes issue 3360.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6307 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"52cd3aee95b80d5c81c319f2c089c24ee05a0d30","2010-10-24 15:16:31+00:00","Fix a major speed regression from r6288:
Upon texture reloading, the cache entry hash wasn't updated and thus we effectively disabled any texture caching in that case.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6308 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"5cdda901820b89b0926d001bd635b1ae0c3308db","2010-10-24 16:53:33+00:00","DX11: Fix ClearScreen properly this time. Should fix quite a few games (or break them :P)
Fixes issue 3399.

Also remove unnecessary stateman/gfxstate applies:
- gfxstate->ApplyState/Reset only need to be called by VertexManager
- stateman->Apply only needs to be called before any Draw/DrawIndexed call

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6309 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"5be617c129c10ca1f787785cc5bb4fd792dbd153","2010-10-24 17:04:20+00:00","Fix an off-by-one error introduced in r6309.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6310 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"61c6d4fe5925aa6e1bbb5f320d6ef99a08544dc9","2010-10-24 18:26:28+00:00","OpenGL plugin: Should fix building with earlier versions of GLEW. You'll still need the latest GLEW if you want to try dual-source blending.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6311 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"b71cd5f3832b3b426d71af84f6c6baffeea193ef","2010-10-24 19:41:10+00:00","A couple minor things I have left over

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6312 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"ab53c84dcf7fa791c778a868866dd006e5dfa50d","2010-10-24 19:52:52+00:00","Properly emulate the alpha read pixel engine register function (used for EFB peeks).


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6313 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"78ab1c0f3fd2649210c584fab33790b19917fd19","2010-10-24 20:07:12+00:00","More robust way of building on 10.6 for a 10.5+ target.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6314 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"8ba671f84981fa51a1e34807208dfe6d17218637","2010-10-26 12:08:14+00:00","The wxProgressDialog delay bug has been fixed since 2.9.1.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6315 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"0dc50d283d2f0eb3c29cddf759671a8b1fac45c4","2010-10-26 13:53:13+00:00","Only link with libdl on Linux.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6316 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"a1312da859075570542ec7ca0a50b8a39af2cd06","2010-10-28 17:00:59+00:00","Re-establish /usr/lib priority over /usr/local/lib using -Z instead
of -search_paths_first which doesn't play well with --sysroot.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6317 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"6edb5f48471454b2bee0045e5a7dddd9a7736290","2010-10-28 17:10:49+00:00","Gah, need _both_ -search_paths_first and -Z.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6318 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"f7d1184d873fdc2a5eb7ae74c3bb59e01c078d05","2010-10-29 21:37:20+00:00","VideoCommon: Properly upscale the mantissa of some fog params.
Might fix games with minor gfx glitches, try e.g. Super Mario Sunshine or Super Mario Galaxy 2.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6319 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"c015811d4d256d807f345fb63316f00682de32af","2010-10-30 07:30:32+00:00","remove standalone MemcardManager, now has its own repo
(http://code.google.com/p/gcn-memcard-manager/)
add some svn:ignores (windows build dirs)

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6320 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"922bb419f46c43d46be5617e6760bbbdb8261f2e","2010-10-30 10:54:41+00:00","Remove vestiges of standalone memcard manager build.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6321 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"6b0ac026bc73ac6460f00b0ae574c435667cbbcd","2010-10-31 11:38:06+00:00","DX9, Debugger: Implement pixel/vertex shader and texture dumping.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6322 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"765d1823fb61220b58462724eb744f4ff85410c6","2010-10-31 15:32:04+00:00","Only enable shader dumping in Debug/DebugFast builds since the required information isn't available in Release builds due to performance reasons.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6323 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"2f2a76b28a0f612c2b2550d25cdae775de0614f5","2010-10-31 19:22:31+00:00","Attempt to fix real wiimote delay issues experienced by some. (Issue 3428)

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6324 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"4b9831cdce7ffa1fcb0fc5eda5e5686130096eb2","2010-10-31 23:26:18+00:00","Core/DSPCore: Extended opcode handling fixes

* Make writeToBackLog private to DSPIntExtOps.cpp
(JIT variants of 'l and 'ln are disabled and broken as is)
* Make zeroing of the backlog conditional on doing an interpreter fallback and
do it at a few more places
* Fix selection of cleanup for extended opcodes.
* Fix the DSP unit tests to correctly emit the function prolog/epilog
(else EBX wouldn't be saved)
* Add a few more DSP unit tests


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6325 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"b75a805859507b99b39a77bdeae102b5721d3a45","2010-11-01 15:47:02+00:00","Add an experimental CMake build system as a possible replacement for SCons. Only tested on Linux, should work on OS X and Windows in the future as well though.

Some notes about this:
- config.h doesn't get written yet, so you'll have to use one generated by SCons
- dependency checking isn't really implemented, yet. Just some basic checks for OpenGL or ALSA, we need something more sophisticated though.
- the OpenGL plugin fails to load for some reason which I can't debug right now due to the libc debuginfo package version in openSUSE not matching the runtime packages
- there's even some support for generating install packages (rpm/deb/.. packages, NSIS installer, etc). It doesn't work properly right now though, since some paths seem to be hardcoded into Dolphin's source
- probably lots of other stuff I forgot... Just take a look at all the TODOs in the CMakeLists.txt files for more information ;P

Additionally, I added various files to the svn:ignore list.

tl;dr: Unless you are a dev or you're building binary packages, this commit shouldn't bother you :P


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6326 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"48859da6e3f80c5eac04f9c1cd9b367b68a84baa","2010-11-01 19:13:50+00:00","DX9/DX11: Fix and simplify ClearScreen. At least fixes a small glitch in Super Mario Sunshine with DX11, might fix several other things as well in both plugins though (so test this, please!)
Explanation of this commit: We only have to care about four BP registers in ClearScreen, the remaining API state should be reset. The colorEnable and alphaEnable parameters are obsolete, for some reason directly using them caused the SMS glitch with DX11 (because of that bpmem.zcontrol.pixel_format == PIXELFMT_RGBA6_Z24 check in BPFunctions.cpp, is this one actually correct?)

The comment in BPFunctions.cpp was at least misleading (if not even wrong), so I removed it.

For what it's worth, someone needs to port this to the OpenGL and Software plugins (unless they're doing this properly already)


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6327 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"13dda7494629bff0f81c1f66f7836908841ecdd7","2010-11-01 23:41:20+00:00","Allow the game to set the DSP sample rate.  Fixes Bomberman Generation.

Fixes issue 2523.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6328 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"0af0929a88728151390a0ffb8e8e83807d3d1d26","2010-11-02 00:16:49+00:00","Re-implemented the NullSound back-end.  Allows Dolphin to be used on hosts with no sound hardware.  Emulates strict DSP timing in the DSP HLE plugin.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6329 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"61c847eecc439910840564d9cad9ac5a75082013","2010-11-02 00:39:52+00:00","Added NullSound to CMake

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6330 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"d5c941a3ba26fd32782bbc4f16129a803398f74b","2010-11-02 03:35:44+00:00","Added NullSound to CMake without typo

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6331 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"785154b89fb21f47a217356bfc47f9b5c9dcddc1","2010-11-02 10:27:57+00:00","JIT fix for the lfs instruction in x64 builds.  Fixes Ultimate Spider-man.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6332 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"95d9cb3a0f5d9dc4d26fd88e9af9411ef1662b30","2010-11-03 01:52:09+00:00","unbreak japanese rom font, broken by r6297

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6333 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"381f92b15184641b8e1921148020b0a0e309f9ff","2010-11-03 04:13:36+00:00","Fix some linkage issues with the cmake build system.
Also X11 is required on *nix systems.
GTK2 is required for building the wxWidgets builds on *nix systems.
Added a check for pulseaudio.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6334 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"9df772ed8958b7fa8e9e53d0cf7befa8f9e47d9c","2010-11-03 06:28:47+00:00","Make NTSC-J setting an option. This allows games which use Japanese ROM fonts to work correctly. Unfortunately trying to autodetect when to enable this setting is not good enough.
Also move Progressive Scan option to main display settings, since it affects both GC and Wii.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6335 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"e1549658a23f0a1075c18ae16821d9c85cf4ecae","2010-11-03 07:16:03+00:00","gray out ntsc-j option during emulation

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6336 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"7b23bf666f1ec39b6b2716d08baf1551f8bea72b","2010-11-03 07:37:13+00:00","hackfix for per-game settings overriding the main settings. This quick and dirty hack goes out to billiard in return for his own generous hacks. fixes issue 3004. it's a hack, so it should be replaced with a more sane method...
also: hacks.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6337 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"4b0d4ded98522ca29c5f245ac653bbd225c086b1","2010-11-04 02:01:07+00:00","More cmake work.
Added autodetection of shared libraries.
Added a check for Xrandr.
Fix OpenAL linkage.
Copy User and Sys directories to lower case in the binary directory.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6338 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"de62a190f1e78a429568a42881699ccce5d2ec0f","2010-11-04 11:43:44+00:00","Removed one of the extraneous conditions from JIT64 UnsafeLoadToEAX.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6339 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"45c92d27f22757e1e9ec9cc3c679121b4175f1db","2010-11-04 12:50:44+00:00","fix for r6337: don't restore cached settings if a gameconfig was not used.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6340 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"4ac40687ead2b2f4bece3f84eed076cb02619c43","2010-11-04 13:47:17+00:00","Okay.  Big (possible controversial changes) to the cmake build system.
I am officially killing the local/global build crap.  The 'local' build thing should never have existed.  There is now only one build that is essentially what the 'global' build was before.  This is the way a proper build system should work.  I will soon write a wiki page to describe how to properly use the cmake build system, and how you can still set things up to get the 'local' build from before.  However, that type of build should be considered a developer tool, and not the way that dolphin-emu should be built.
Briefly, to use cmake now do the following from the toplevel of dolphin's source:
mkdir Builddir
cd Builddir
cmake ..
make
make install (you may need superuser privileges)

Note that the scons build is still building dolphin in the old way.



git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6341 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"3aff478b3a14ba6eb033162641bd9045c5ac2db5","2010-11-04 20:33:45+00:00","Add the c++ definition HAVE_CONFIG_H in the scons build and check it before including config.h so the cmake build system doesn't need to worry about conflicts from that file if it exists.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6342 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"49a9efb0101fc17444611824d2efec94401a9809","2010-11-04 21:27:03+00:00","config.h is only created on Unix.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6343 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"2383e2b0f57ebad3eecab885d433341f2dbbfe20","2010-11-05 02:23:24+00:00","Improve the compiler flags for the cmake build system.  -fPIC only needs to be specified for static libraries that are linked into shared libraries.  cmake automatically uses -fPIC for shared libraries.  Also ported several other needed compiler flags from the scons build.  Set up the debug build, enabled with '-D CMAKE_BUILD_TYPE=Release', to work with wxWidgets debugging.
Note that most users will want to use the release build to get a -O3 optimized build.  This can be enabled by adding '-D CMAKE_BUILD_TYPE=Release'.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6344 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"eb167e3ca872b1c0ebb375aef5b95adedc477978","2010-11-05 04:19:22+00:00","Set 'Release' as the default build type.  Also cleaned up the CMakeLists.txt file a bit.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6346 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"5436bef30b5939eb87d44096a4a5758eff338689","2010-11-05 11:24:46+00:00","Added NVIDIA 3D Vision support.  Patch by Uhyve.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6347 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"f2f0f373a6c22d0e522be783afa111306861e189","2010-11-05 20:58:27+00:00","Fixed GeckoCodes.org retrieval for WiiWare.

Fixes issue 3438.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6348 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"7864f3c0871f49c6ee74582ead8768badd44bebf","2010-11-05 23:38:37+00:00","Missed a needed -fPIC.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6350 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"d0afc20596413cc02b58bf23e960c29bd2b3e9de","2010-11-06 03:49:18+00:00","Added checks for portaudio and opencl to the cmake build system.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6351 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"8775abacc6776fe2f8b65e04402d783b19da79fa","2010-11-06 04:46:44+00:00","Optimised EFB copy to RAM.

The finding was that 99% of the time, textures are static in memory. However, Dolphin would pessimistically continue to decode and copy the same texture every time.  The optimisation is to check if the texture matches what is in the cache, and if it does, Dolphin should early exit.

The result is the speed in New Super Mario Bros Wii increased 35% with spinning coins.  Still not as fast as EFB copy to texture though.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6352 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"6666b400a32249752815a33ac78e9fd1557f3bca","2010-11-07 04:28:33+00:00","Updated with a less aggressive optimisation to EFB copy to RAM.  The destination texture now does not get invalidated if its hash is found in the texture cache.  Fixes Metroid Prime 3.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6353 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"58c8e7cb4881a1111db3f81812886beacebf4401","2010-11-07 10:11:58+00:00","DX9/DX11: Remove some dead or obsolete code.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6354 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"e96943c1211235dff56d94606ee779ed2a3dfa73","2010-11-07 17:45:35+00:00","Added an option in the cmake build to disable wxWidgets.  To use add '-DDISABLE_WX=1' to the cmake configuration command.  Also fixed the nowx build.
Set scons build to autodetect OpenCL by checking for both the library and header instead of having an option.  Unfortunately there probably needs to be a path variable that can be set to the location to look for the headers.  For example on Ubuntu with nvidia, the headers are located in /usr/include/nvidia-current instead of /usr/include, and hence not found by scons.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6355 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"874dab37f893ccd6d22b6dcc750e665405c0b755","2010-11-07 23:15:31+00:00","Core/DSPCore: Make Jit read from coefficient ROM when told to do so,
change the unit test to catch this bug if it turns up again and two more
zeroWriteBackLog() calls.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6356 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"2e0274dd1f42e070d08edfbbf683aa8f4e4dc849","2010-11-07 23:43:26+00:00","Core/DSPCore: Implement Jit emitters for all extended operations.

May break things, although my testing didn't reveal any regressions.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6357 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"57f01776ef5c5967f0c270e98be3c92cec21ee4a","2010-11-08 02:51:31+00:00","Fix cmake so it is possible to build without bluetooth support, and the typo that tells you bluetooth is enabled when it is not.
Fixes issue 3464.
Also make the check for portaudio really check the version of portaudio.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6359 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"b565618442cb75fc686d99a9113d1824d591008a","2010-11-08 08:51:30+00:00","Removed the wait for swap when XFB is used.  This fixes flickering in 'Fragile Dreams' and 'Another Code R'.

Fixes issue 3466.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6360 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"4782a8fc5a655cebcc6f2e0b246bf7c79c064c39","2010-11-08 14:04:56+00:00","More CMake work:
- various fixes for using CMake on Windows
- support building external SDL, zlib, CLRun, wxWidgets
- support using precompiled GLew and WiiUse libs on Windows

For what it's worth, I'm not quite sure if I got all the wx files right...
Building with MSVC2008 still doesn't work yet, but is a lot closer now.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6361 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"15d74b7461850b8debc199197cd8a70153245d00","2010-11-08 22:17:51+00:00","General cleanup to 3D Vision hack, fits in more with the Dolphin coding style now. Also, fixed the crash that would occur when using a mouse button with 3D Vision enabled.

Not sure how to fix Dolphins hotkeys when 3D Vision is enabled (I do know a way, but it's messy and I don't want 3D Vision messing with Dolphin's cleanliness).

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6362 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"e72ae04e5cbef1b582b894be177ff5b00ff7dbd2","2010-11-09 00:29:07+00:00","Setup opencl to work like most of the other externals.  Autodetect native shared libraries and if not found fall back to the static libs built from the externals.
Also some general clean up of the main CMakeLists.txt file.  I think it is nice to keep the checks and analysis of the results together.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6363 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"bee873a30c4612bd6e698bc0a8347ff349fa5cf4","2010-11-09 03:08:20+00:00","Fix the annoying gap in the OpenGL configuration dialog in the 'General' tab between 'Use Real XFB' and 'Wide screen hack'.
Also link the dolphin-emu executable against GL in the cmake build.  Why?  This seems to fix the segmentation fault on stop issue.  Although curiously enough, linking the dolhpin executable against the system shared library SOIL fixes the problem too.  It doesn't work with the static version of SOIL build in the externals.  The reason the problem disappeared with the scons build is that the executable is implicitly linked against GL since the linker flags are set up to be thrown in everywhere.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6364 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"7dd7bd2b0399505cd44d47a8b0d546afc990259c","2010-11-09 20:46:11+00:00","Write bluetooth packets asynchronously to prevent blocking on
commands that take some time to complete in the wiimote.

From <matthew.powersfreeling>. Fixes issue 3437.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6365 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"7b34def0fc7c386c9f10f68c816cf8fd5a7073f7","2010-11-10 01:59:53+00:00","A couple of changes to the cmake build system.
First:  Added a DESTDIR option for package building.
Second:  Change the OpenCL setup.  On both linux and windows use CLRun.  I completely removed the option here.  If CLRun works on MacOSX this should be done there as well, and this change implemented in the scons build also.  Then we could remove the HAVE_OPENCL and the new USE_CLRUN definitions.  Then we will finally have the dynamic detection of opencl set up cross platform.
On a side note, it doesn't seem that the program loaded from TextureDecoder.cl compiles or runs.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6366 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"26f84c1e74bd4df5c64edd675c8f89ab252cb052","2010-11-10 04:12:31+00:00","StringUtil cleanup. Nothing seems broken.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6367 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"92a5b72b42c2880381826253048a252ef1dad9e1","2010-11-10 04:44:25+00:00","Linux build fix.  stricmp does not exist on linux.  Also a small tweak to the StringFromFormat routine.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6368 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"895f1500a5c6c455753ec66fc0d007c6abae9289","2010-11-10 05:18:20+00:00","Fix for my tweak in the last commit.  I knew I had that working at one point.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6369 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"6ece147568bdea67929a85444d052fef2099bcf5","2010-11-10 06:10:43+00:00","StringUtil fix

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6370 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"1991a4f3a547010a38177754d8d71bdd1fa5d16c","2010-11-10 08:28:26+00:00","Added XAudio2 backend.

Windows audio backend with lower latency.

Audio never glitches on my machine but the number of buffers may be set too aggressively. If you run into problems try turning up NUM_BUFFERS in the h file and leave some feedback.

From my tests games seem to prefer filling the buffer with smaller chunks. For this to work the callback that fills the buffer needs to either spin or run async so I went with async.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6371 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"a4d06f4b713e2938d266b2f5be8740de214aaecd","2010-11-10 08:41:10+00:00","Missed one file.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6372 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"38d06e76d673a20b3de1854a4dd31f1b94a109f1","2010-11-10 16:43:27+00:00","DX11: Add an option to choose the internal resolution.
DX9: When clearing the back buffer in Renderer::Swap(), use IDirect3DDevice9::Clear instead of a clear quad if possible. Should improve performance marginally.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6373 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"072a6988564f297bf4b0f7f5d638ef6f6f04b197","2010-11-10 23:23:12+00:00","The change to StringFromFormat was overwriting the last character with the NULL terminating character.
Also update a deprecated function call.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6374 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"5078f430c3277a00e0a7ba42f449bf6e4f74072b","2010-11-11 00:55:06+00:00","Make gui panic alerts thread safe in linux.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6375 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"ce7c5099c76ff267f5edc51fea591ec1b226d4cd","2010-11-11 01:00:01+00:00","make projection hack and emustate settings default to none/not set instead of -1

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6376 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"33421457d68ea90377dd861fc1e23d11de499c64","2010-11-11 01:12:01+00:00","Quietly log writes to 0xc0003030. Written to only by bs1, and we don't seem to really care about it.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6377 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"36d43365e6f079b60864d2f709afac1d9dbedbb1","2010-11-11 01:48:08+00:00","Windows build fix

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6378 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"adbd7fbd4ac7e7ae5fe38014f6f9fa62032d0218","2010-11-11 04:59:50+00:00","Fix StringFromFormat hopefully for the last time.  This should be more efficient than before.  Thanks to shuffle2 for the windows code.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6379 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"45f1948d33a2589ece828abaf568b7edcb863a9b","2010-11-11 09:17:57+00:00","Fixed double game entries in the game list.  This occurs when there are two or more games of the same name in different folders.  Fix by Lostmoment.

Fixes issue 2857.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6380 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"d4b72eaae57d1d797e19e5558fb93eb8cfc914c0","2010-11-11 09:22:19+00:00","Added a projection hack for Metroid: Other M.  This fixes the black screens that occur in cut-scenes.  Patch by Trevor002.

Fixes issue 3477.
Fixes issue 3127.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6381 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"c6d95c90876ed03768092a0385821b7d47135fea","2010-11-11 15:50:52+00:00","Remove my DESTDIR hack from the cmake build.  It turns out this is built into cmake and works in the same way it does with the gnu autotools.  Use it in the standard way with 'make DESTDIR=/desired/location install'.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6382 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"67f850dd37893de6ef1544b024ea298033047dfd","2010-11-12 03:39:07+00:00","DSPHLE: Added an option for 48khz output and supporting upsampling code.

Games that have higher frequency sounds and music should sound a bit better using 48k.

I don't have any games that use DTKMusic so that upsampling code untested. If you get strange sounds only at 48k try toggling dtk music to see if that isolates the problem and let me know.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6383 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"7800d68feed7cde8927a4f576471f9c3d8363462","2010-11-12 04:20:00+00:00","add ProcessorInterface::Read16. wii64 uses this (by accident), but real hardware supports it, so why not.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6384 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"c0bdf4de81576f0371782e01a755429971dfad5c","2010-11-12 05:05:27+00:00","Several little things.
The C version of the GenericLog was being used in both C and C++ branches of the code.
Parent panic alerts by the main_frame so that those windows get the icon too.
Fix a couple of compiler warnings.
Added some checks for libraries in the cmake build.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6385 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"ae8c9436697d80c41ffc416f49c7c6495a063ff2","2010-11-12 17:53:54+00:00","build wiiuse as a static lib on windows.
make wiiuse log via Common lib on windows.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6386 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"2a7886322d82b2ab8b247ff33bfc78b0147d84e4","2010-11-12 17:58:40+00:00","windows: don't bother trying to copy a wiiuse dll since it isn't created anymore

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6387 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"820c0022a5ab79cab7e4606a6cf02506f35b7e62","2010-11-12 19:00:21+00:00","Windows: Link debug build against debug wiiuse. Can't keep linking to the release wiiuse as it does not use the same crt.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6388 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"3d866bd35dc7a58135b1e9894003e365d9c538c2","2010-11-13 00:05:14+00:00","DX11 plugin: Fix a small oversight

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6389 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"146ddff550a46022da89557833146496ac2d21e0","2010-11-13 00:10:00+00:00","Simplify GenericLog() for C/C++.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6391 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"02d1321bcb902edd822ffb7dd4f68e22f2c0d5ba","2010-11-13 00:24:34+00:00","windows: update wiiuse libs, since logging functions were changed in common...

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6392 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"8eb1fe883163423528499b7c1e9af858385eeffc","2010-11-13 13:17:48+00:00","proper .libs fixing building problems under vs2008, x32 and x64. Please dont use vs2010 for buildings those static libs next time to keep compatibility under vs2008 atm.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6393 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"7ad7acd248e73dfa60f28767dc6373c5df571ccd","2010-11-13 19:15:43+00:00","move wiiuse to Source/Core and add to the main dolphin solution
make wiiuse link dynamically with hid.dll, removing the need for WDK
compile wiiuse as c++

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6394 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"e79fcce1d48e0101697b75e03b975b6cb4557e0d","2010-11-13 19:36:33+00:00","Fix compiling wiiuse on with CMake and SCons
Also fix confusing formatting in a SConscript file

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6395 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"79aae239fcd072580533dbefe912d8d4208f0c30","2010-11-13 19:44:19+00:00","Don't add wiiuse to CPPPATH in the main SConstruct file since it's already done in the SConscript file for wiiuse

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6396 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"a913295d701477c299c49c135e60f0b8fd25646c","2010-11-13 19:53:24+00:00","Apparently, that SConstruct file was correct already...

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6397 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"02edf66b4990f57e253bfe1f98a2002272762713","2010-11-13 20:02:01+00:00","Simplify OpenCL compile-time detection on OS X.

Turn wiiuse io_osx.m into Objective-C++.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6398 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"17662d4ac67bfb7e82b528b3f83c2768db82562a","2010-11-13 22:07:27+00:00","Change the cmake check_lib routine to use REQUIRED/OPTIONAL instead of TRUE/FALSE.
Add a check to see if -Wno-unused-result is supported by the compiler.
Fix some compiler warnings in the wiiuse code.
Fix a bug in the wxGTK panic alert code.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6399 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"9b12ad6c94ed11356b253677cb4fd724c4619922","2010-11-14 03:10:11+00:00","Allow building on OS X with static wx libs.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6400 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"d888f13bb955b1f0f116d9bc3559fccb4cd14fff","2010-11-14 04:29:20+00:00","VideoCommon: An experimental fix for Issue 3493. Changed _mm_load_si128 to _mm_loadu_si128. I could not test the bug because I don't have Sonic Colors.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6402 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"8b9b66911f5aa04e1955729189f3b1dda73b9719","2010-11-14 06:02:44+00:00","Clean up OS X wx library handling a bit.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6403 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"6fe343df61f2358ce228f3e50c12367759132644","2010-11-14 13:11:28+00:00","Silently remove Plugin_VideoMerge again...

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6404 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"01ac354e9782d7e781625cfd7f3b843ca2938163","2010-11-14 13:30:57+00:00","Move UDPConfigDiag into Dolphin, to allow building of UDP Wiimote again.
Please test this, I don't have any phones or whatever capable of communicating with it.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6405 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"100ab9274f04df672539bbccd907c8824534d9f6","2010-11-14 13:34:41+00:00","...and the SCons/cmake stuff :)

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6406 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"43778ac920f496a0fb9749fe09efcaa3940c71a8","2010-11-14 13:36:21+00:00","update wiiuse vcproj

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6407 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"b2e1ea327951c787ae67403f49b044ac6d1c6dbb","2010-11-14 14:02:16+00:00","UDPWiimote.cpp and UDPWrapper.cpp are now used again.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6408 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"c21f804c48ad0bf857ed9b5171f6e0cc704f609a","2010-11-14 14:42:11+00:00","more work on dlist caching now should be a little faster
a little bugfix in vertex loading and some fixes.
not much time to work these days but  at least i can spend a little time fixing thing.
please test for regressions.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6409 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"b5e4f7f6229fcf9024b6d714ce433c0533ea6a66","2010-11-14 15:12:07+00:00","OSX buildfix

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6410 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"d6d907f49cdba53f88a29d7f05fbd870a1e5e5e9","2010-11-14 15:13:04+00:00","Linux needs the -fvisibility=hidden flags.  The font selection of the debugger segmentation faults without it.  Since the font is selected when the application begins the debugger is rendered inoperable.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6411 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"c1cc742c6b04099c5977e544d416a999df56fc95","2010-11-14 15:31:10+00:00","Damn scons.  Fix a indentation issue.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6412 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"a4fe774528ca08ccc881eb802995a57c2395e4ea","2010-11-14 18:25:01+00:00","little bug fix for my last commit

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6413 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"50882c8d30f8f1f4cd0b80e916697acd843aceb6","2010-11-14 21:14:26+00:00","On linux encode frame dumps in MPG format instead of writing raw frames.  To enable this portion of the code you must have libavcodec-dev and libswscale-dev installed (package names for Ubuntu).


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6414 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"2378b443c109f2052c5608ddcbef9dc5d581bd70","2010-11-14 22:07:52+00:00","Build fix for windows.
Also a correction to the frame rate for the mpg encoding.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6416 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"0da42fcca7fb51966794608d51ee7cbb3bc7913b","2010-11-14 23:31:53+00:00","Merged some FramebufferManager code into VideoCommon.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6417 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"62a7f101a775acfaf17dd4214f8816632d10fd05","2010-11-14 23:56:26+00:00","Some compiler warnings and eol-style.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6418 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"b0257521929246188b1ea067db398a5770d766ba","2010-11-15 04:06:55+00:00","JitIL: Fixed the wrong constant value. It was lower than the actual number of registers.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6419 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"b4ffd640b7a5f66309bcf22e9008e0059f66ca98","2010-11-15 05:22:03+00:00","Made LinearDiskCache a template class. Keys are now some POD type (fixed size). Eliminates casting and key size checking.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6420 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"73ed235fd19c4c19c3b6d56ce6d9631980487b0d","2010-11-15 05:29:10+00:00","Changed macro for disallowing copy-ctor and =operator into an inheritable class. Removed IrPointer.ini (no longer used)

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6421 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"db35fe4100f47c8bc569352658c9269e7bceaae9","2010-11-15 09:54:07+00:00","Made the graphics plugins use a shared configuration dialog. There are a few minor issues: unsupported settings are shown, dx9 3d settings are missing, tabs/groups could be organized better, could use tooltips, cmake and scons need to be fixed.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6422 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"0c5ccf7156020df3324b88af716a91e81f67ffda","2010-11-15 11:32:30+00:00","Tweaked the VBeam logic enough to fix Endless Ocean 2.  This might also fix a few other games that have been black screening on boot recently.

Fixes issue 3472.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6423 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"d0e8d8a509270102ff514ba8e79c68020176cac4","2010-11-16 00:13:33+00:00","Linux cmake build fix.  I fixed the scons build as well, so this might fix the macosx build also.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6424 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"71f842e8c0b2d30944a025a3071ef908ac0770b6","2010-11-16 01:55:29+00:00","Cleaned up NetPlay a bit, fixed some UI text.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6425 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"4f81997c14a5bc48f8412e4bdcd086127c765159","2010-11-16 04:34:52+00:00","Fix the no gui cmake build.
Add a version check for avcodec and swscale libraries.
Fix a bug in the xlib wiimote emulation button configuration.  If you are using a mouse button for wiimote emulation you may need to adjust your settings.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6426 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"9dd60c6115d5b0cc5bf73268b5a8d2f114c9f4f2","2010-11-16 20:36:57+00:00","make Audio Interface more clear. Should have no behavioral changes. The comment block in AudioInterface.cpp lays out how real hardware is...

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6427 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"0644295f3dcc96be2076fecd0d4cc52a2ab030fc","2010-11-16 21:14:19+00:00","Build fix.  Remove some obsolete code.  Fix some compiler warnings.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6428 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"a279b391ccc1487bb3f06579515c27d5497385f1","2010-11-17 01:03:39+00:00","Make Linux/MacOSX system checks correct in the cmake build.  UNIX is true on both linux and osx.  The cmake build probably still doesn't work on MacOSX though.
Also added an option to explicitly disable building with MPG framedumps.  To use it add -DENCODE_FRAMEDUMPS=OFF to cmake on the command line.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6429 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"993b40dfa46d7a77ba21d15247d778d2f3003d92","2010-11-17 05:34:55+00:00","Make it possible to build even if the source no longer contains svn versioning information.  To use it add '-DDOLPHIN_WC_REVISION=exported' to the cmake command line.  Of course you can replace 'exported' with whatever you like.  Fixes issue 3517.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6430 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"c56b1bffcf03a60dc80508dfe3f9476c6f2bd37b","2010-11-18 02:13:05+00:00","Add the video software plugin to the cmake build system.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6431 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"054358380e578c6f33fc1dd343fad552d0c47256","2010-11-18 02:14:12+00:00","Oops.  Forgot the primary file.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6432 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"159ed43f677ed62097569244882c0a9ddffa7a67","2010-11-18 02:21:26+00:00","Move some shared gfx plugin code into VideoCommon. Changed 'Renderer' class to use virtual functions. (setting stuff up for video plugin merging)

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6433 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"bcad22f266a3d104cdbaa497a6a2a3f2d4826842","2010-11-18 03:05:52+00:00","cmake build fix.  Don't blame Billiard for this one.  He asked me to test his patch and I missed this.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6434 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"0816fa2629b38c783a88ef65c23d356147724826","2010-11-18 03:50:50+00:00","Fixed RealXFB being enabled when XFB box is unchecked. Moved some shared code into VideoCommon. Renamed EFBCopyDisable setting to EFBCopy'Enable' in the code and inifile. Fix DX11 settings not loading. Fixed Issue 3378.(graphics settings dialog displaying gameini settings in game)

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6435 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"08124713bda32932a0ac1aa7ea74bb40440de01a","2010-11-18 04:01:16+00:00","The usual linux build fix.  I am starting to sound like a broken record.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6436 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"e1e43fa2a619e72db74ef0702d3037cbdd99d9b9","2010-11-18 15:12:12+00:00","Fix some opengl errors.  Thanks to rodolfo for telling me how to fix it.  He is at work or he would do it.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6437 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"f8fbcecad6569817516052b8f97c4061846a2f32","2010-11-18 16:46:17+00:00","Encode framedumps in AVI format on linux as on windows.  This adds the additional dependency of libavformat-dev.  Remember if you want raw framedumps as before add -DENCODE_FRAMEDUMPS=OFF to the cmake command line.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6438 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"63aae7e5e04a29be48c1ad6f75d32df558d24dac","2010-11-18 23:25:40+00:00","Build missing BPFunctions.cpp with SCons.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6440 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"7632a5abd47e4a228291d18a5f9ebef8a1ca38f6","2010-11-18 23:27:27+00:00","Fix for issue 3507. Compile with old GLEW versions, support user-specified CFLAGS and link plugins to all the used libs.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6441 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"13370ca6ca9bc4c97f2118c843574c4958fedbdc","2010-11-19 06:24:59+00:00","JitIL: Implemented a simple time profiler. Unfortunately, this is currently for windows only. Please fix it.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6442 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"96cdb1ad07e8503d4e0a7f9f217f95e7ef1028c6","2010-11-19 07:48:48+00:00","JitIL: Removed ENABLE_JITIL_PROFILING macro and added an entry in setting file.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6443 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"b0c20fe643006ebdb2c26bac1f02ea0192ef05e6","2010-11-19 15:17:26+00:00","JitIL: Improved the speed of JitIL time profiler.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6444 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"c93aaae1d8b622d69d6e6ab1be1d66c394ff3cce","2010-11-19 17:35:01+00:00","Linux build fix.  When I have time later I will implement nodchip's JitIL profiling on linux.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6445 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"d1264b3258afa36473c37a3db08001a30c4cf9cb","2010-11-19 17:43:12+00:00","JitIL Profiler needs time.h

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6446 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"ef55177ed6a6509d725cae39739c1bd68e6c4b30","2010-11-20 00:22:56+00:00","Implement JitIL profiling on linux.  I also tried implementing __rdtsc using assembly and didn't really see a speed improvement so went with clock_gettime.
Also changed other gettimeofday calls to clock_gettime, which is supposedly more accurate.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6447 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"7788bac40c9a422a1081913f83b9b0328eca121c","2010-11-20 03:24:51+00:00","Fix ogl screenshots for windows.
Fix the macosx build (perhaps).
This changes the JitIL timed profiling to using assembly language to obtain the time.  It does seem to be faster.  Not sure if it will work on macosx, but if it does it has the necessary precision that gettimeofday does not have.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6448 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"86dc8d09fe322755874f58bd454c5fca4abd4c94","2010-11-20 20:20:12+00:00","For the cmake write generate the svnrev.h file in the build directory instead of in the source so that a proper out-of-source build can be done.  Fixes issue 3528.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6449 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"ee21237d6a562f2d9ab439427467443ce86f8379","2010-11-21 14:47:28+00:00","Polish, fix and otherwise improve the video plugin configuration dialog:
- Add some info about a backend's feature set (MSAA, Real XFB, EFB to RAM, ..) to VideoConfig
- Gray out options if they aren't supported by the backend or if changing them doesn't affect anything (e.g. changing STC mode if STC is disabled)
- Allow signed bytes for D3D11. Not sure if this causes glitches, but it should work
- Call wxEvent.Skip() in the event function handlers, not sure if this fixes any bugs but the old code definitely caused bugs during development of this patch
- Fix a memory leak in the configuration dialog if D3D11 is used
- Other minor stuff that doesn't need to be mentioned or which I forgot

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6450 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"5ef4167c559a4df98d2346135567f6b92bb46188","2010-11-21 15:34:04+00:00","DX11: Dynamically load dxgi.dll and d3d11.dll.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6451 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"b8218726aa523bcfce42e3835c1fcb4e313c6275","2010-11-21 15:44:50+00:00","DX9: Dynamically load d3d9.dll.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6452 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"39a4781a5fba29f51f8c0354ea041528767e183a","2010-11-21 19:13:55+00:00","Check if CLOCK_MONOTONIC is supported before using clock_gettime.
Fix the cmake check to see if -Wno-unused-result is supported by the compiler.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6453 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"92fe490270927f2b0aab605cb1f80ed06dbfc17b","2010-11-21 20:45:42+00:00","POSIX feature symbols can be defined even if not implemented.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6454 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"222c2d129783e8bce820117d5c16edba9cae14e1","2010-11-21 21:31:37+00:00","Revert revision 6464.  _POSIX_MONOTONIC_CLOCK is not used in that way.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6455 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"63c35bf14ab652144c173b12d993daf138c0afd7","2010-11-21 21:45:38+00:00","Fix for OpenGL's 'Overlay Information' options not working. Fixes issue 3535.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6456 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"a3c46990f617c803e552d71d5e08429a600cc993","2010-11-22 02:42:53+00:00","Revert to gettimeofday on posix systems.  I give up.
Temporary fix for OSX in JitIL.cpp
This revision should build on OSX again.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6457 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"3ebd09efc97a3631872953f34c68730010813060","2010-11-22 10:39:24+00:00","Fix 'Virtual XFB' always being set when opening video config dialog. (Fixes issue 3537)

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6458 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"cefaa393e6c4e4bfd297efb12d435412be802849","2010-11-22 15:25:59+00:00","Layout should not be called until after a sizer is inserted into its parent.  This fixes the 'gtk_widget_size_allocate(): attempt to allocate widget with width -5 and height 17' type console warnings that are annoying on linux.  If there are issues with this on other platforms let me know, but there shouldn't be.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6459 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"49120d113fa9ea1a6d04148ee95670f1c0f41d1a","2010-11-22 22:17:35+00:00","Reorganized some video config dialog related code. Deleted remnants of the old DX11 config window.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6460 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"1830342d66d1b819133e7de6f80a3d8035892d68","2010-11-23 10:51:14+00:00","Quick FIFO fix for Donkey Kong Country Returns.  Added a FIFO breakpoint check in the main FIFO loop.  Aligned some of the FIFO registers to 32 byte boundaries, matching the VideoSoftware plug-in code.

Fixes issue 3536.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6461 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"b0c94a47f97e4233cd12574db0b5f9680a588b26","2010-11-23 13:35:44+00:00","JitIL: Implemented JitIL IR Disassembler. If you want to use it, add 'OutputIR = True' in the 'Core' section of Dolphin.ini.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6462 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"4267adbd5e6f79d1ce5804c7a32dbf3ce65f0531","2010-11-23 13:57:01+00:00","Related FOG changes:

* revert back to proper upscale mantissa of parameters A and C
* properly downscale magnitude to 0.24 bits instead than 0.23
* Z Eyespace conversion for projection by original patent concept

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6463 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"f915509fffd6ffae019a25eb302d855103c543d1","2010-11-23 14:00:40+00:00","Linux build fix.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6464 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"5647bcd869ae33c92e1207f315efd1294b132178","2010-11-23 14:50:25+00:00","JitIL: Fixed the compile error in r6462.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6465 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"b197f8600c0c31e11e493d5d07adeaca64a487c2","2010-11-23 15:51:08+00:00","* Updating Linear DiskCache version in reflection with changes introduced in r6463

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6466 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"6d93a6b6981cd4edfc70c884cca5592b88d9f9f1","2010-11-23 15:52:42+00:00","Linux build fix for the windows build fix in r6465.  I tested this on both windows and linux.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6467 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"d36ede020c122ec79fdf9872bf078f83a1b5621e","2010-11-23 19:58:02+00:00","DX11:
Add multisampling support.
EFB access doesn't work with MSAA enabled, yet.

Additionally clean up some stuff, fix a memory leak, ...


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6468 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"2808f75f74a7344c3fd74052d02fc154f523dca7","2010-11-24 06:02:03+00:00","Corrected the FIFO breakpoint clause in the FIFO loop.  This fixes Super Monkey Ball: Banana Blitz, Super Monkey Ball: Step & Roll and Pokemon XD.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6470 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"ebe5472e1d28d2fe144ac683958ccfb60b0a0f2a","2010-11-24 17:13:12+00:00","Tiny commit. Just re-added 3D Vision to the config dialog. Hope nobody minds, I made sure it gets greyed out and all that. Sorry about my lack of commits, got another ongoing project that's gotten me a bit hooked.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6471 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"84a72e90b0771380c1478a9985c454f50109235c","2010-11-24 17:30:04+00:00","Migrate the opencl setting completely to the gfx config dialog.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6472 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"76b9e975d51284b80fe035096d7dc8ef9735b494","2010-11-24 19:13:19+00:00","DX11: Fix mipmaps. Someone forgot creating them at the proper time ;P
DX11: Fix a DX11 debug runtime error caused by the vertex shader output signature and the pixel shader input signature not matching if per-pixel lighting is disabled. Someone forgot disabling those pixel shader parameters ;P
DX11: Enable use of dynamic textures wherever possible.
DX9: Remove two unnecessary TODOs. Someone forgot removing those since they've been obsolete for a long time ;P

Anyway, at least working mipmaps and dynamic textures should increase DX11 performance a bit. And 'a bit' is more than my usual 'marginally' ;)

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6473 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"181f03551c24aafbcfe7b88ea64c2e449878235f","2010-11-24 23:05:50+00:00","Even tinier commit. I hope nobody around here has a problem with those.... :P

Just hiding the 3D Vision option for DX11 and OGL instead of greying it out.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6474 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"f0ac60935c6f1acefdce2d93967b4f400cdef790","2010-11-25 02:19:06+00:00","Renamed the 'Disable Copy to EFB' option in the game properties(and game ini) to 'Enable Copy to EFB', as it is named in the global video settings. (fixes issue 3556)

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6475 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"7fe6a0b45103e5d3df034e5e1d42e3533997e588","2010-11-25 02:25:27+00:00","Corrected the FIFO breakpoint clause in Single Core mode too. That fix Pokemon XD (Only single core mode) Dual core mode suffer distances problems like RE0.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6476 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"fae12f43c23fbfe492db1b2b68144b500b86e685","2010-11-25 02:26:46+00:00","Inhibit the screensaver while the emulator is running on linux.  Fixes issue 3279.  Uses the xdg-screensaver method suggested in that issue.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6477 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"2e59d26133956b0479251beabc32175a7ea08fa9","2010-11-25 20:39:54+00:00","Related to Texture's glitches:

* fixed a bug on QUAD-Vertex generator

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6478 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"e6658d5339882961f49161db33da5b1b76b7a3ac","2010-11-26 09:25:08+00:00","Minor change to ease video plugin merging. Made static NativeVertexFormat::Create function into a virtual function of VertexManager. I believe this is the last bit of code which is only declared in VideoCommon and defined in each of the plugins.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6479 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"5340b4cb9524990badefe40c71c7b3e1a8b746bd","2010-11-26 15:04:35+00:00","DSPHLE Should fix Issue 3543

Restricts 'ssbm' loop detection to PBs with valid loop pred_scale values.
Masked coef_idx in the adpcm code so it can't fault on invalid values.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6480 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"7698d85a8ef19cf5a6ea830b3909bcd9db4b5b5f","2010-11-27 11:11:05+00:00","DX11:
- Speed up MSAA by using custom resolve shaders instead of ID3D11DeviceContext::ResolveSubresource().
- Fix EFB access when MSAA is enabled.
- Implement the 'force linear filtering' option.
- Compile shaders using shader model 4.1 or 5.0 if available.
- Some minor cleanups.

Who cares about DX9 and OGL anyway :P

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6481 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"5ae1b65388f1c76ffeab3a11057242f4944bbb20","2010-11-27 11:37:57+00:00","DX11: Fix stuff if MSAA is disabled.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6482 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"762563a02673b10f8c448aec6240a95e6a3d3696","2010-11-27 19:36:18+00:00","If there is a SetBreakPoint and the actual distance is enough to achieve the BP, we wait for the FIFO Loop in dual core mode. That fix Pokemon XD in game in dual core mode (also maybe this  fix Issue 3452) and hopefully others FIFO hangs related with BP. I test games like SMG and don't produce slowdowns. If you have any slowdown about this commit. Please report it.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6483 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"91eb729aafb4a8bb6503c7e29ad6582e590fe769","2010-11-27 23:40:09+00:00","Core/DSPCore: Implement jit emitters for lris and mrr.
Also add the mask for ADPCM predictor, like r6480 does.

Tested 64 bit linux/windows. At least compiles for 32 bit windows, but
with these binaries most of my guest software fails with
DSPLLE(interpreted and jit) when it gets to do actual work.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6484 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"88916a61daf0768c8e6ab8453c249e6b24d7ab81","2010-11-28 03:20:20+00:00","In the command processor when FIFO_READ_POINTER is reading Is better return fifo.CPWritePointer instead fifo.CPReadPointer.
In this way it prevents wrong fifo.CPReadWriteDistance in the future. That should fix RE0 Issue 2846 and others 'Warning: GFX FIFO: Unknown Opcode (0x4d)' in dual core mode.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6485 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"6a6fb9cce94d3c4474553eb078297439e6ea1586","2010-11-28 05:28:21+00:00","LLE JIT: Added an ASM dispatcher. Should help pave the way for future optimisation.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6486 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"ae2c9347954217fe006a5e6b208ca6243e6bfb7d","2010-11-28 09:49:41+00:00","minor fix for r6486

Return values from RunCycles isn't consistent/meaningful at the moment so assuming it runs as many cycles as asked.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6487 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"9c1fb241c7b314fed444a828481b96bf608897d2","2010-11-28 11:04:50+00:00","LLE JIT: Speed up the idle skip detection by moving the logic into the block and removing it from the dispatcher.  This works because we can detect the idle skip blocks at compile time.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6488 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"93a901dd1de7f95b1ddb0cb059b23863e4841d06","2010-11-28 12:28:03+00:00","LLE JIT: Speed up the dispatcher by removing one of the cycle checks.  This results in the DSP executing cycles slightly above what it is supposed to.  This is not a problem currently but might be later on.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6489 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"c79f41d114801486304dc705708ac39a65c308f6","2010-11-28 13:06:52+00:00","LLE JIT: Speed up the dispatcher by removing the compiled block check.  Initialised the blocks with a stub which calls the compiler.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6490 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"fa5f206797b9ecb6847f303b08bf5773ac415450","2010-11-28 15:23:51+00:00","DX11: Disable MSAA when using a GPU which only supports D3D 10.0.

10.0 level hardware can't create multisampled depth buffers which can be bound as shader resources as well, but we need that for e.g. EFB access or EFB copies.
Only multisampling the color buffer doesn't work either since color and depth targets must be using the same sample count.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6491 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"f370650660c56a4dbc48493848420e42a4df2718","2010-11-28 16:29:58+00:00","Fix the ASM dispatcher to work with linux 64

ESI is not available as callee save register on linux 64, so use R12, which
is available on windows 64, too. The only callee save register still available on
all platforms is EBP, but i guess we don't want to fiddle with that one.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6492 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"fb9387a38e5429f509b6e042461217f0d41712ef","2010-11-28 17:23:13+00:00","Fix for linux screensaver inhibit caused by a misinterpretation of the window id.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6493 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"c5409951938cd109fc3fce14dd8f851d572e415c","2010-11-28 17:25:19+00:00","DX11: Fix two crashes. One occured when trying to run a game with D3D 10.0 level hardware, the other one when closing a game when MSAA was disabled.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6494 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"40c4e5f9a7813cd39802b4a730941f9aec4cae57","2010-11-28 20:12:41+00:00","More FIFO work. I've implemented intelligent mechanism in GatherPipeBursted to prevent 'FIFO is overflown by GatherPipe!'. I commented HiWatermark_Tighter parameter. If Hopefully this patch fix this issue. I will delete this definitely. I tested StarFox for 20 minutes and works really fine. :) This patch also can help when the CPU go ahead the GPU and sync in better way.
Plus: I added a _assert_msg_ in FIFO loop when the WriteDistance is negative. Please if that happens report it, this can help to solve strange issues with wrong WriteDistances.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6495 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"8d123adf6403510a7ab7e63f62e85117ef6b4eea","2010-11-29 16:16:48+00:00","DX9 debugger improvements:
- Fix 'Pause at next' functionality for pixel/vertex shader changes, finished frames and texture changes.
- Implement dumping vertex declaration and vertex/index data.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6496 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"eda716b16496ec339da5640325b3d418cd872f1a","2010-11-30 01:20:05+00:00","Fix some linkage issues with the cmake build.  This should fix issue 3596.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6497 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"b5863da915b5dd62d8ae38cb7bef858d8c3c879e","2010-11-30 02:56:44+00:00","Possible fix for the rdtsc call in JitIL.cpp on macosx (issue 3531).  This also fixes issue 3595 (although that issue was invalid -- we don't suport scons on linux anymore).


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6498 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"2ac9accc85e2cb988f424c5b603a34586ec5ee17","2010-11-30 05:20:36+00:00","More linkage fixing.  Fixes issue 3596.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6499 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"63ec59f6c2fa06112a65d89865f26d3005aafc3f","2010-11-30 14:25:15+00:00","Fix a typo in the last revision.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6500 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"28216fc7f25740b7554f864ed7d5ea792b76c3e7","2010-11-30 15:03:49+00:00","possible fix for issue 3014
thanks to iceman4love77 for tracking the error

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6501 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"cb58eb45f0c766729aff820026650a8f566c2072","2010-11-30 21:44:54+00:00","posible fix for issues 2850 and 3407
thanks to tapcio for the info

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6502 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"0718e1bd772e641cfad180b42d800f5fb49b46d7","2010-12-01 03:04:36+00:00","More fifo work and the Pokemon teaching us ;)
* I've fixed concurrency problem with fifo.bFF_GPReadEnable when the breakpoint is achieved
* I modified when fifo.bFF_Breakpoint is turn off to prevent that the  interruption happens
* I reverted r6483
* I improved the commit r6495 adding another protection when the GPRead is enabled in CTRL_REGISTER

You can test Pokemon XD in dual core mode is more estable now :P This commit could solve others hangs fifo related in DKC, Sport Resorts, etc. I dont have these games.



git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6503 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"1f660de7e53eb3675bc258dc57dfff99d779fc55","2010-12-01 04:26:21+00:00","Avoid repeatedly asserting in SWG plugin when matrix indices don't match. Small change to the transform unit to avoid some unnecessary work. Check if Q is zero before dividing UV coordinates by it. Fixes issue 3454.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6504 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"f91ac928953084e558403c2fb6bce840b0fcf738","2010-12-01 04:50:25+00:00","Change comparison in specular light function. Fixes issue 1258.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6505 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"8f035ae40a39bba6e7ab4c65077b97806d535c7c","2010-12-02 05:38:48+00:00","Create a config dialog. Add dumping TEV texture fetches. Better TEV stage dumping. Byteswap indexed XF loading. Remove scaling texture coordinates in the HW rasterizer because that has already been done by the time they reach the rasterizer. Increase storage for clipper.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6506 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"9f6dd239b62078a70f3c472cc2cae6c287781b8c","2010-12-03 01:29:43+00:00","Possible FIX to randoms hangs, this correction in the clause fifo.bFF_Breakpoint=false fix hangs in WII Music, I don't have WII sport resort, etc. Please test games with fifo hangs (FPS:0 VPS:99) in yours PC again. :D

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6507 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"ad8248cedd737c6adbb79a6a7ac052c669882686","2010-12-03 04:58:28+00:00","The STATUS_REGISTER should return the actual status HI (Overflow) and LO (underflow) watermark because this register can be polled by the game.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6508 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"08a3b60f8c52a88de31070e1cb4f8e5dadab47e8","2010-12-03 06:08:12+00:00","I reverted my last commit 6508. I was wrong, sorry about that. It is 3am maybe need to rest of the FIFO for while. My Apologies.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6509 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"3d441febda6a22a6e35168f5f5f4218275cf8295","2010-12-03 12:42:01+00:00","Attempt to fix issue r3458. I don't have a 32bit linux install, however I know it will at least fix compressing. Please test if uncompressed games run.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6510 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"44285c2b30bd723f594be945862dcae0ac8cc84b","2010-12-03 13:59:14+00:00","LLE JIT: Implemented some of the DSP multiplier functions in the JIT compiler.  Only the x64 version has been implemented so far.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6511 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"63d690e94cb30fdd4d694887b69ae60e6d7dc91b","2010-12-03 14:56:55+00:00","4.4BSD derived OS'es always have 64-bit file sizes.

XXX This should probably be in CommonFuncs.h or something.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6512 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"f5a28aecb7edf3182e02c51f75c1c3a20d55e774","2010-12-03 23:12:27+00:00","Rodolfo and Me fixed ProcessFifoWaitEvents() in CoreTiming, now process the all events and not only the first :P

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6513 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"97e3a3ea6fda441b2b342f795aa0afd9de2d8e14","2010-12-04 03:44:56+00:00","remove fifowait flag, is not needed now as we execute all events that need to be executed even if the cpu is waiting for the fifo.
this way fifo will not avid other thread events to bi executed.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6514 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"e70e6236248aebe8740a3369e613d07f351c9546","2010-12-04 03:50:55+00:00","Second attempt at issue 3458. Fixes issue 3458.
Replaces all occurrences of ftell and fseek with ftello and fseeko, respectively. This matters on non-win32 where only these names are altered by the _FILE_OFFSET_BITS define. Win32 still just maps the funcs to ftelli64/fseeki64.
Also add some File::GetSize I had skipped in my last commit.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6515 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"7901e74f0095760f826bf2522810a82e96028e08","2010-12-04 15:19:04+00:00","Reestablish *BSD build using CMake.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6516 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"c8305a7b7d9803737bbb426e2cecd095b76b4d2c","2010-12-04 17:58:33+00:00","two fixes in this commit:
first fix for issues introduced in sms in r6501, please test for a regressions in The Calling
Second Fix for Issue 3539, by making pixel Dept calculation an option. in games with this issue Enabling pixel depth will solve the issue, in other games disabling the option will not cause speed lost
some cleanup in dlist cache

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6517 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"379fa47b6a8471e32d01ca59afb1fbf4f0f9107f","2010-12-04 22:04:46+00:00","little fix for r6513 thank to metatheos for finding the error

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6518 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"85d36e38c31c6ccc8d89f59fdb05ddeeabd03acd","2010-12-04 23:20:31+00:00","LLE JIT: Jitted another 8 DSP multiplier instructions (x64 only)

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6519 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"6df84ddc31262ac5267fc984609ae0a84cd7a040","2010-12-05 03:36:37+00:00","little fix for r6517

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6520 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"3e4aa2060185d6122b838d166a3c3cb254ba8844","2010-12-05 04:07:44+00:00","fix a crash that could occur in CompressedBlob.cpp

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6521 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"9da4fe086b3f7c0c2e310c3b6438ed131fb13ff2","2010-12-05 09:04:34+00:00","allow gcc to check the format of args being passed to MsgAlert and GenericLog. Fixed nearly all warnings that arose from this, as well as some preexisting ones (some were actually crashes and/or bugs...)

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6522 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"7854bd71098fe556ddc9839ad08d27fab7ecba33","2010-12-05 14:15:36+00:00","Merged the D3D9 debugger into VideoCommon/VideoUICommon:
Separated UI from debugger functionality. Generally cleaned up that stuff.
Most functionality needs to be reimplemented now, but will be available to D3D9, D3D11 as well as OpenGL then.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6523 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"f3d6b42e839013d1c4f8cf1b5c9f74e2821bd459","2010-12-05 14:31:00+00:00","Fix VideoCommon build configuration for DebugFast/x64.

VertexLoader: Align bounding box registers properly, the hardware reads them in 2x2 blocks.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6524 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"9dae1e9674a1da829221646f29cd7e1b4324a588","2010-12-05 14:37:21+00:00","VideoUICommon: Add descriptive tooltips to many options, part 1.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6525 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"a754f8e703706678757a24fcee4285ef796db39b","2010-12-05 15:28:31+00:00","We effectively only have a single namespace for private header files,
so the recent addition of VideoCommon/Src/Debugger.h clashed with
DebuggerWX/Src/Debugger.h.

The latter had atrophied anyway, so just get rid of it to resolve the
conflict.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6526 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"e5311460a9324bd69b49cd9879755526a869ee83","2010-12-05 15:36:08+00:00","Earlier versions of wxWidgets do not implicitly include <wx/wx.h>.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6527 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"f169def36f5dcba69b7ce7e382ea1230d03f5433","2010-12-05 15:59:11+00:00","First pass at dealing with different size_t/off_t sizes in C90 environments.

Most of the code dealing with the LogTypes namespace was C which lead to a
lot of nonsensical casting, so I have dumbed LOG_TYPE and LOG_LEVEL down to
plain C even though the move of wiiuse into Source means we don't currently
call GenericLog from C.

Set logging threshold to MAX_LOGLEVEL at startup so debug builds will also
p  rint debugging messages before the GUI is running.

For some reason the way we use SetDefaultStyle doesn't play nice with wx 2.9
so we just get the default black text on a black background. Using a gray
background works around that problem, but I found it to also be much easier
on the eyes so I have switched the background color on all versions.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6528 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"0ecf88c300a4aa52bc58819002c806a286d22e84","2010-12-05 16:03:48+00:00","LUA_USE_LINUX is suitable for everything but Win32 really.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6529 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"5910ef259c427e62c72fbe24cc7db0da87244b3a","2010-12-05 16:15:01+00:00","Fix building with BBOX_SUPPORT enabled.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6530 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"4934cd29b30b06fbe6f583660316e6713126d9ed","2010-12-05 16:18:09+00:00","Move NSAutoreleasePool handling into the proper entry/exit points
for the real wiimote thread as for the other threads.

Turns out we use OS X bluetooth API's that were introduced in 10.5.4.

Remove vestiges of previously removed wiiuse_set_bluetooth_stack().

XXX We should probably have a Common equivalent of htonl and friends.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6531 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"c2f84fdccb1106bbd0ab2b640aefaf413d03871d","2010-12-05 16:57:32+00:00","CLRun is now used everywhere but OS X.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6532 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"8d9e1f2dd1d3499c639f8acef2958b24c2ec9a87","2010-12-05 17:39:42+00:00","DX11: Remove some dead code.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6533 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"d171f7277b37da3603930e625231a053b21ea1c4","2010-12-05 18:10:13+00:00","Fix the nogui build on linux.  The software plugin config dialog should not be built.
Fix the default wiimote emulation mouse button settings on linux.
Fix a little c++ operator precedence issue.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6534 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"738e5e55ee5a699d1a781d993fdb6915f9d74ad4","2010-12-05 18:22:41+00:00","Cast size_t to unsigned long for printf to deal with (32-bit)
systems where size_t is typedef int.

It's either this or use the C99 %zu but while we can probably
safely assume C99 compilers, I am not at all sure that that's the
case for stdio libraries and this solution is fairly low-impact.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6535 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"e2543689b810c4b93b9a44cbd5ba6a018cc4a917","2010-12-05 22:28:46+00:00","DX11: Fix a crash when accessing the EFB.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6536 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"2caa685c7f6335465f262a818a75a20c191aba24","2010-12-06 13:06:54+00:00","Fix a few more linkage issues in the cmake build.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6537 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"908273d5f4dc3ccfb1d56a63bbd7f158b76b6821","2010-12-07 05:59:18+00:00","Just rephrase something :)

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6538 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"ef093a4d3552044f3e249540c5dfc7d50adc4188","2010-12-07 22:38:03+00:00","Use the proper type for printing the OpenAL default device name.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6540 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"8fd825c18ccb4041ada2a08c0750a6089883fa85","2010-12-08 06:46:59+00:00","change filename of isocache to always include extension and filesize.
Fixes issue 3669.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6541 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"f353f80302f0383eb2689c44504cf6eba2f9ff73","2010-12-09 11:52:31+00:00","LLE JIT: Implemented the addr, lsl and lsl16 instructions in the JIT (x64 only).

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6542 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"c718d2e630224d817fcf2f91ebf5ad9e91591773","2010-12-09 12:04:03+00:00","Fixed an issue where the emulator would remain paused when attempting to load a non-existent save-state.

Fixes issue 3665.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6543 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"06013d5eec9a906f9d64df4de50a1ca2cc3adeea","2010-12-10 02:00:05+00:00","Make the cmake check_lib macro more versatile.  It first tries pkg-config, and if that fails it then check for libraries and required headers.  Also cleaned up the output a little bit.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6544 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"2ae7f7f01f96c3a4d07e22525fcfda12c83e070b","2010-12-10 03:47:00+00:00","Replace characters that NTFS and HFS can't handle with '-'. Should fix issue 3443.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6545 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"1e0b0bf84dd98be78182a06ef7819e4100c54994","2010-12-10 07:11:05+00:00","Fixes/Cleanup for the MemcardManager.
Notable Changes:
Fixes right click menu in linux.
Fixes Issue 2412.
sram.raw file is no longer required to format a memcard
Update to use new ini sections, automatically remove default settings from ini file
enable pages setting no longer requires memcard manager to be reopened to take effect
it is no longer possible to switch to a negative page number

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6546 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"7473a0cf9813cd8db2169b332d9dd7ceeb395d90","2010-12-10 15:54:14+00:00","VideoCommon: Use integer arithmetic instead of floating point arithmetic when dealing with EFB scales.
Should fix problems caused by EFB scales other than Native (excluding fractional!). Test whether this fixes games which work fine with native EFB resolution but show glitches with higher internal resolutions.

Also fixed numerous warnings.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6549 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"01de16df1c27d6f3dee2f4591e5f019158f8980f","2010-12-10 16:03:01+00:00","DX9: Build fix. Also removed the Renderer::SetLineWidth implementation since it wasn't really useful.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6550 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"1021ba0406ccd9f461223b64a12cceeb38eabadf","2010-12-10 16:13:43+00:00","DX9: Fix Renderer::SetLineWidth like hrydgard suggested ;)

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6551 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"0447abef365491bd200cc792f5112b75f5986f21","2010-12-10 21:24:25+00:00","Changed the GC controller timer from a host based one to one based on the emulated hardware.  This helps the emulator become more deterministic.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6552 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"24569aca3dc54755c3bc37da6546688b32268a78","2010-12-11 01:09:28+00:00","Fix a linkage issue on newer linux distributions created in revision 6544.
Also update the menu link to dolphin-emulator.com


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6553 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"a9ca9cfd9bc8cf26cca58cb86bbc20066bde94fc","2010-12-11 12:42:55+00:00","BIG FIFO Commit PART 1! Sometimes you need to write everything from 0, so 10 days later Ive rewrited some parts of the FIFO in Dual Core mode. Is pending use the same code for SC mode.
- Improved the GP Register Status: now this is all the time from the fifo loop.
- Improved the Interrupts manage:
1) Removed All UpdateInturrupts from CommandProcessor Writes and Read.
2) now the CP interrupts are schedule from the video thread and the fifo loop waiting until this happens
3) considering Inmediate mode for the CP interrupts
3) Implemented Interrupt CP Cache State
4) Implemented only Overflow interrupt in GatherPipeCheck because this need to be detected quickly.
- Implemented Overflow handling like a real HW, when Hiwatermark interrupt happens this write ClearRegister with True en HI and False in LO (FifoIntReset) after that a Control Register is writed and the FIFO is processed  to LO Watermark.
- Removed all ugly code from LO and HI watermark manage
- Removed all ugly code from BP manage
- Change >= by == in the BP clauses
- Removed speed hack (1024 chunk) for better GP Status Control.
- Commented GXSetGPFifo very soon hack
- Commented FackWatchDog hack
- Commented FIFO_RW_DISTANCE = WritePointer hack

This is the beginning and the base for the future., If this broke your favorite game my apologize, only report this and will try solve it. If you have a Overflown don't worry, I've implemented the real solution code using the Overflow Interruption only need continue working for a perfect protection. Why I did it? Because is preferable a accurate and clean fifo instead hack y fifo for improve that. Thanks to DONKO for you awesome Video Plug in and skid for the chatting. PD: I have 7-10 fps more in the star fox video. bye :P


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6554 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"3528629d9aa31ffad928d97658938f39693f09e0","2010-12-11 20:51:48+00:00","Use the /sys/replace file for defining char to replace and their corresponding replacement strings.
Method suggested by pune for compatibility across filesystems and nand tools.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6557 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"c7b736bb562fb35c107b54fde2458651e5b9275f","2010-12-11 20:53:10+00:00","Remove some debug stuff

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6558 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"3b6b8b718c54cd6f40aca22807ce6917b99d6025","2010-12-11 21:07:07+00:00","Fix some off-by-one errors in the EFB scaling stuff.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6559 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"5d16185cf95159fcd4f60fad22d1cde40b31a468","2010-12-11 21:19:25+00:00","Fix some other off-by-one errors in DX9/DX11.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6560 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"188aef2f885ad519aa0c9f5d8538c2a3a2fa96ea","2010-12-11 21:56:04+00:00","DX9: Fix drawShadedTexSubQuad vertex positions, this fixes at least Mario's texture in Super Mario Sunshine when EFB->Ram is enabled.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6561 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"077c101579147125fb177b9ba8e8c8e7b969b007","2010-12-11 22:06:20+00:00","Revert r6561... (yep, it was actually right before)

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6562 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"ad82dd59b97c5c02838ea18d95ff0e26e0d14446","2010-12-11 22:47:04+00:00","Disabled the paired single multiply instruction (ps_mul) in JIT as it is causing the black screen in Sonic Colours.  JITIL has a different bug as disabling ps_mul in JITIL did not help the issue.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6563 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"8e38b1a8a7b5ae66c7b2b329e0387f7f38a2f881","2010-12-12 00:38:36+00:00","HLE_IPC_BuildFilename was actually ignoring the size argument. Fixes '/tmp/sys' error.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6564 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"b926cb426ea03c56b100782ca4e43feb735e7788","2010-12-12 04:53:18+00:00","Disabled the paired single sum instruction (ps_sum) as it is causing
the black screen in Sonic Colours. Both JIT and JITIL have this work-around.

Re-enabled ps_mul as that instruction was not the root cause.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6565 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"38b3187e8add39f37f01d7416e6c5b0566551eb1","2010-12-12 05:38:37+00:00","Changed the LogWindow background colour back to black for Linux and Windows.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6566 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"3d0ec2f2f1d53b2762e661a1095301f7e56f0eef","2010-12-12 10:59:06+00:00","Remove the watermark tightness option since it's obsolete now.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6567 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"73da637a42bc4b2707bacdb8c14863b45e44c6f6","2010-12-12 15:25:03+00:00","Rename wii wc24 system files to lower case as on the wii itself.  These files are not detected on linux unless the case matches.  This fixes an issue when Mario Kart Wii (and possible other games) is run with a clean user directory that renders the game unplayable.
Also fix some compiler warnings.
On linux don't install the license.txt file.  Most distributions handle license files via a package.  For example on debian based systems this gives a lintian warning.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6568 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"b56dd2ad6e97685b4a1a3f0d595d26927cbc0db8","2010-12-12 17:09:40+00:00","DSPLLE-int AR increase, decrease finally 100% (code by kiesel-stein/dolphin-forum, great work btw!!)

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6569 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"dde2d1a117c3867252a57a1569f35e5b9eb3295b","2010-12-13 04:44:33+00:00","Before my second part, little fixes :D 1) I was wrong the games can use also BP and BP int in multi buffer mode or or at least Pokemon XD can hehehe. Pokemon is booting again but this game also need accurate AbortFrame dont care about 'GFX FIFO: Unknown Opcode' in this case 2) Fixed a stupid error in UpdateInterrupts (CUT&PASTE mistake)

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6570 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"3d3411f3a083ac61afa835ee6282bb19756547cc","2010-12-13 05:29:13+00:00","Added a FASTLOG option for the cmake build to enable all logs.
Also make sure all necessary include directories are added in the check_lib macro.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6571 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"5fd99516499f186c697f0cf2b7a043e215d18b76","2010-12-13 07:56:54+00:00","- I've implemented cache of interrupt states for PEFINISH and PETOKEN
- I've implemented calling to ProcessFifoEvents when is there is a pending event in the main queue from CP, PE & GP
- I've implemented FifoIntReset(TRUE, TRUE) in write Clear Register.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6572 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"7cf3ef6ddc593dace4f88569cd99d629c1de4222","2010-12-13 17:49:21+00:00","DX9: Write a detailed description of the vertex position offset magic in drawShadedTexQuad. I hope this makes at least a bit sense to anyone but me, it's better than no documentation at all though.
DX9: Revert to the old EFB coordinate scaling. Glitches caused by higher EFB scales probably can't even be fixed properly in DX9, so let's not even mess with it...

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6573 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"4f4f5325f6d355785741a1bd9a26b692c41cc177","2010-12-13 18:51:08+00:00","DX9: Added another comment to further elaborate what drawShadedTexQuad is doing.

This comment should give a great speed increase, numerous games (SMG, NSMBW, DKCR, ...) which I tested are at least 20% faster now!


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6574 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"b5ba9b3479b177dc8e5dd617ae079ca89c4730d9","2010-12-13 23:04:13+00:00","I've fixed a beautiful bug in GPFifo the current Memory in some conditions was not assigned right. Pleaseee test again your games with FIFO hangs like WII music, WII sport, Wii resort, etc. May be this help :P

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6575 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"18e95ecdfa9c7e49e21fd09c087ea4ddc7b06c18","2010-12-14 01:25:50+00:00","EXI: grab the FlashID from the memory card headers and update sram to include correct id and chksum
allows using any (valid) memorycard.raw in any slot (including real memcard dumps)

Fixes issue 684.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6576 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"4780c8f6dd47b84d4826f2ebbf3056eecd37fcaf","2010-12-14 01:28:21+00:00","Remove LOGGING from the DSPCore vcproj. It isn't really used like that anymore. This commit doesn't really change anything...

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6577 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"e4ed7dab22ac3f9678c99edeb4615307f6988e04","2010-12-14 02:44:27+00:00","Build fix for case sensitive platforms.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6578 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"7c0e08b0e7dd6caf35db7368015903f9048af3dc","2010-12-14 09:20:02+00:00","Forced the video thread to the third core when 'Lock threads to cores' is enabled.  This should fix the slowdown that this option produced on CPU's with HyperThreading.  Thanks to NaturalViolence for the tip.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6579 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"35fef1f17300a26778eaa5588816239189ec453c","2010-12-14 17:52:01+00:00","Revert back to LogTypes.  Fixes issue 3668.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6580 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"76d9209ad4cbcccd076646c33be414abe07e01a7","2010-12-14 23:19:34+00:00","When the gfx debugger is saving shaders make sure the directory exists.
Make sure the gfx debugger unpauses when the emulator is stopped.
When a wad is installed make sure directories exist.
For the cmake build if a header is not provided in the check_lib macro don't check for it, and assume pkg-config was supposed to work.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6581 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"f67afb4fca561c9da006721a2bb842b27b9371d9","2010-12-15 01:42:32+00:00","LLE JIT:
* Optimised the updating of g_dsp.pc in the compile loop (code by kiesel-stein)
* Added JIT version of LRI (code by kiesel-stein)
* Added JIT versions of the branch instructions (code by Jack Frost)
* DSP_SendAIBuffer fix (code by Mylek)
* Marked instructions that update g_dsp.pc in the DSP table and updated PC based on the table (speed up)
* Fixed the signed bits not being set properly in the addr instruction
* Created a MainOpFallback function to use interpreted versions of the instructions if necessary (code by kiesel-stein)
* Disabled the jit versions of subarn and addarn as they are slowing down NSMBW

The above work in both x86 and x64 modes.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6582 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"85ec8d268d323a72c87cf47559cf1e1a16dc757f","2010-12-15 02:17:19+00:00","Linux build fix.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6583 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"e61133625acb138ea73f6e801c7e263dc96544f7","2010-12-15 02:29:06+00:00","Fixed the 'Locked threads to cores' option properly.  Thanks to ernesto and xenofears.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6584 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"c584bd533383ca6ec1fec35ff0b0794d6c64fe5e","2010-12-15 07:08:36+00:00","LLE JIT: Added simple block linking at immediate CALL's and JUMP's.  The code checks if the block being jump to has already been compiled and jumps there if it has, bypassing the dispatcher.  This results in a speed-up of around 7 - 10%.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6585 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"02a38baf7c087ee5e1786ba7ea28f818cdbde0e5","2010-12-15 11:02:58+00:00","Build fix for OSX.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6586 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"77837b803475b997d17e3bc5884a0c4ccfdf968a","2010-12-15 14:47:13+00:00","Make sure a few more directories exist when needed.  Most package builders (including cmake/cpack) do not install the empty directories in the shared data, and so the paths need to be created at runtime.
Also set up cmake/cpack to create prebuilt binary packages and source packages.
Also change the vertex shader dump file name in the gfx debugger to something that makes more sense.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6587 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"aee96e12c638853d57104d29349025ab85c14e85","2010-12-15 21:23:42+00:00","Rename variable in WiiSaveCrypted for icc.
Changes file dialog to show *.bin for wii save import instead of data.bin
Move Sram dumps to Sram.cpp and change default FlashID
Fixes issue 3711.
Fixes issue 3042.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6588 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"a90d0e898560082f2bd3f9f3249afc116e51ed5c","2010-12-15 22:13:31+00:00","LLE JIT: Used a reiterative approach to linking blocks.  The JIT flags blocks that have calls to blocks which have not yet been compiled.  After more blocks have been compiled, the JIT reattempts to link the flagged blocks.  This is repeated until the minimum number of unlinked blocks are left.  This increases the success rate of the block linker and resultant speed up.  Based on an idea by nakee.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6589 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"06784d28694758f6532dd85f054b28120c88c2e3","2010-12-15 23:18:08+00:00","sys menu now loads gamesettings from an ini file (as well as any other wad/nand title that does not have an ascii gamecode)

fixes system menu loading the ini file from the last run game

also check for all countries when setting bntsc for wad/nand titles

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6590 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"b20858adb355523e07a4d5053c11920733355763","2010-12-16 07:36:26+00:00","System Menu Region is now detected based on the Title Version in tmd
Title Version and region char of currently installed system menu are now listed in the menu as well

Which means disc channel will only show pal discs if it is a pal nand dump; ntsc nand dump will show ntsc discs, ntsc-j nand dump will show ntsc-j discs

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6591 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"aa226aaf415f19d02a923ac04c8ac15ce4139839","2010-12-16 17:40:45+00:00","Revert most stuff from r6517 and revert r6501.
PixelShaderGen changes broke Mario Kart Wii, ClearScreen changes broke Super Mario Sunshine.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6592 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"455369907732006c7244152366ac309505e5c82c","2010-12-16 18:21:14+00:00","Merge some state loading stuff to VideoCommon and fixed a crash on Linux system when trying to save a state.
Credits go to miquelmartos from the forums for the patch ;)

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6593 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"4295f2f008d0d84bbf7d8de48a5f176d48540fce","2010-12-16 18:39:57+00:00","Fix an omission from the last commit.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6594 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"a82a61c53a3f6b15980fcad31c1a0fe69be51f6f","2010-12-16 22:38:31+00:00","Core/DSPCore: Fix more memory accesses for linux x64
Core/Common: Add more asserts for too large displacements


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6595 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"93a09ee7b569d0edfa6967b947095e7c464160dc","2010-12-16 23:27:38+00:00","LLE JIT:
* Added jit versions of 5 DSP LoadStore instructions: srs, lrs, lr, sr, si
* Renamed MainOpFallback to Default for consistency in naming with JIT64
* Made ext_dmem_read and ext_dmem_write more generic for wider use
* Optimised dmem_read and dmem_write slightly
* Added dmem_read_imm and dmem_write_imm optimised versions


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6596 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"9afb1dab4130e9817adfee196ff72ffa312930a2","2010-12-16 23:37:58+00:00","Helps to add the new code to the repository.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6597 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"aecc4f67a126f4fb7a152966a93339d588854f57","2010-12-17 01:34:40+00:00","Fixed the throttle (Tab) key so that it takes effect when the frame-limiter is used.  Hold down Tab to run the emulator unthrottled (Windows only).

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6598 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"2a54c445a064eb678a7f9a10d9827991edda65d3","2010-12-17 03:34:50+00:00","LLE JIT: Added another 9 DSP Load/Store instructions to the JIT.  Fixed a couple bugs in the 32bit and Linux builds.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6599 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"77a36cf9cb66e05335528811b1407c161bd5ab17","2010-12-17 05:16:51+00:00","ABI fix for Linux x64.  ABI_CallFunctionCC16 was not calculating the jump distance on far calls.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6600 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"22f19f6fdbbbc9bafe43f8f98a9cc503ef1b29f6","2010-12-17 15:23:33+00:00","Fix a segmentation fault that occurs when 'Confirm on Stop' is enabled, the close button of the window is clicked, and the user answers No to the resulting confirmation.  Fixes issue 3716.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6601 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"d01542ee0a524d2da7dbbbf6da0b26f42bcc1e32","2010-12-17 22:13:58+00:00","Fix another part of issue 3716 missed in the last revision.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6602 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"42e40b46c0968affdcd9738a80fb98d6124686da","2010-12-18 04:54:16+00:00","OpenCL: Fix error reporting when the build log is too long

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6603 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"522746b2c223f37c45569ee7fd4a226b278cb6d9","2010-12-18 18:23:22+00:00","**Changes**

* More formats recognition for 'Clear Screen' step. Improved the ability handling the alpha channel (% color translucency).
* Related to CPUID detecting:
- Added support displaying correct SysInfo for recent multicore Intel CPUs x86-64 with HT/SMT (Core i3/i5/i7 and Xeon) based on Nehalem architecture.

+ minor and passive changes.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6604 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"7236f114ff3cbacd66f62b00ee80c10afc17d2d2","2010-12-19 03:46:01+00:00","git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6605 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"a91c86c4d91bcebacaccb48cd881432d6749c129","2010-12-19 03:46:20+00:00","git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6606 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"ef0762c6a5d36726ae1f658eb4378700928b0a37","2010-12-19 04:00:07+00:00","Apparently I missinterpreted that thing in tortoise svn.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6607 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"9114c96c784ae16e0c66d6016d489564be4319b4","2010-12-19 11:03:09+00:00","Cached the compiled OpenCL kernels to disk (User/OpenCL/kernel.bin).  This reduces the start up delay in OpenCL mode.  Added a 10 byte header to the file which contains the current svn rev string.  This will recompile the OpenCL kernels with every new revision.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6608 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"0b72d34f6dfc469ab400feb72ec5b19445f84602","2010-12-19 13:25:57+00:00","Build fix for Linux x86

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6609 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"d1631bec3f761f2af1a71702344c1cfed6e6cceb","2010-12-19 14:02:43+00:00","Build fix for linux.  svnrev.h was not found when compiling OCLTextureDecoder.cpp as that include directory was only used in Core/Common.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6610 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"05ad8d01d3677fd5f9d4417fa3a56ae249f0608b","2010-12-19 14:59:57+00:00","Fix TextureDecoder.cl to work on both NVidia and ATI video cards.
To do so I had to re-add the casting bloat removed in revision 6102.  Also, for some odd reason the NVidia OpenCL drivers don't like 8 bit rotations, but are okay with 2, 4 bit rotations.  These are apparently bugs in the NVidia drivers that are hopefully fixed in future versions.
Also, on linux make sure the TextureDecoder.cl file is copied from the shared data directory to the users directory.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6611 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"c68ae8e91e6e15ad89552975bf7664c39f314958","2010-12-19 15:06:30+00:00","Related to CPUID detecting:

* fixed a bug on display info for AMD CPUs.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6612 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"38a46ddf9443c4144cd176ea2fc8b7ae7e385fa0","2010-12-19 16:03:39+00:00","Avoid shadowing variables.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6613 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"fe9e72d6dcfc86bb75b14be9c1ea686e9e8205c2","2010-12-19 16:07:05+00:00","Lock emulation while saving state on all platforms.

Fixes issue 2805. Fixes issue 3235.

If this causes problems on Windows, just use this intead:

#if defined(HAVE_X11) && HAVE_X11 || defined __APPLE__


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6614 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"98e89c932920bea4411ca43f6eaab27b51512781","2010-12-19 16:11:55+00:00","OS X std::locale only supports the 'C' locale and will give an exception
on any other, including '' when a different one is specified through the
POSIX locale environment variables.

This is not normally a problem since these variables are stripped out from
the environment when an application is launched by the Finder. This is not
the case when running the binary directly from the command line, such as
when debugging.

I have temporarily disabled the use of std::locale('') on OS X while I try
to come up with a better solution.

Fixes issue 3598.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6615 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"aef7f6c3f57de0fbd229de742221923f106a5495","2010-12-19 19:43:18+00:00","Win32-only:
- Merge the EmuWindow class to VideoCommon.
- Implement free look in the D3D plugins. Seems like it had broken before though; only rotating the view works..


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6616 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"47454a4ed983f5a0c12b477c4eeb65ddf1f223fb","2010-12-19 20:30:23+00:00","Fix the unresolved symbol OSDChoice in the OpenGL plugin on linux.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6617 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"98fe8437ae7f6028a42a963ceadbeb74a74b25b0","2010-12-19 20:59:23+00:00","reduced frequency of dx9 ps_2_0 pixel generation errors, and made dx9 efb depth peek of 16-bit depth buffer not use 24-bit adjustment factor. shouldn't affect other the plugins.

(probably nobody else cares, but I need at least one video plugin that actually works on this computer)

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6618 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"60d2d42525be71a2a69c579cf37dda82aab86153","2010-12-19 21:05:41+00:00","made texture conversion shaders use less instructions

this is mainly so they fit within ps_2_0 limits, but I made this separate from my last checkin to make it easier to test separately in case it somehow causes problems

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6619 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"6492b84ca574240d10867eca09d9838082089b99","2010-12-19 21:09:29+00:00","this probably doesn't fix anything noticeable, but, it seems like a bug that C_COLORMATRIX+4 overlapped with C_PLIGHTS

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6620 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"670192e56862b01a95ad80d4f76280407505bccd","2010-12-19 22:00:25+00:00","* revert Clear Screen's stuff from r6604
reason : failure! (are needed more testing)

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6621 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"9d30d1348e1996ae55b992407ecc5d1e8a4b4b00","2010-12-19 22:24:19+00:00","fix Issue 3539

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6622 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"3749c3e57d8572a486245240c111ce88b9629ef4","2010-12-19 22:28:22+00:00","update shader cache version to force regeneration

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6623 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"bb8918a2ca40cbb8ff8fd66f837c5317f1752490","2010-12-20 09:17:21+00:00","added/changed some graphics plugin tooltips, added some low-res framebuffer options for getting a speedup (in pixel-shader-limited situations) at the cost of quality but without needing to make the window tiny, and fixed a little crash with closing the dx9 settings window at a bad time

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6624 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"60ed57b32adaf2337036d006ed9c6e58233df4ef","2010-12-20 14:48:46+00:00","Add an option to toggle caching EFB->RAM copies.
skid_au had implemented this in a previous revision and enabled it by default, but it caused glitches if STC wasn't set to 'safe' (which kinda defeated the purpose since it slowed down stuff again).

Also renamed the 'safe texture cache' to 'accurate texture cache', since setting the 'safe' texture cache to 'safe' sounds kind of silly..

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6625 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"83868566ea7bb53d9c16d9845340c46a7fd920b9","2010-12-20 15:57:26+00:00","Forgot committing the changes to VideoConfigDiag.h in r6625...

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6626 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"9ebf507a555ae597b57f513423fce81ae83346ce","2010-12-20 16:57:29+00:00","Various ClearScreen fixes.
Will fix some games and break some others.
Assist trophies in SSBB work fine now, Super Mario Sunshine is a little broken again.
Still needs some more work...

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6627 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"f09fd080fb14175dc1206158102a44e089121e67","2010-12-20 17:06:39+00:00","Avoid shadowing variables.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6628 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"a85e9f14558bbbd72e31acce046d1983890676dc","2010-12-20 17:20:31+00:00","Fix shadowing like in DX9..
Not sure if the previous commit broke anything, but better be safe..

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6629 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"0e466300dcc9212667187383aab89ff29f05e40f","2010-12-20 17:36:51+00:00","On OS X, we claim all keyboard events while emulation is running to
avoid wxWidgets sounding the system beep for unhandled key events
when receiving pad/wiimote keypresses separately from HID devices.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6630 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"d9701a74c5809681b5c03e76636a83ed075a3bb8","2010-12-21 01:04:53+00:00","* 2nd attempt to fix Alpha channel on ClearScreen

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6631 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"0030d5572590743525947a630797a1c11a885912","2010-12-21 04:39:39+00:00","More FIFO works, Hopefully this commit can fix randoms hangs in Wii Music, Wii Sports, maybe in Wii Resort, etc. Please test your games now. This commit is not related with FIFO Overflown and Fifo linked desync.
Good luck!

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6632 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"6cb78515c64101824d35ee7478d8d30e8dcc6879","2010-12-21 14:48:05+00:00","LLE JIT:
* Added 21 Arithmetic instructions to the JIT
* Used the DSPAnalyser to identify arithmetic/multiplier instructions that precede a conditional branch.  This allows the JIT to skip updating the SR when nothing would read from it.  Marked all arithmetic/multiplier instructions in the DSPTable for this purpose.
* Converted CheckExternalInterrupt into ASM
* Fixed a couple instructions in DSP Load/Store


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6633 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"38e80fe094ffea7d51b74960207750d5ae62eba8","2010-12-21 18:03:44+00:00","Fixes some file handling in IPC_HLE

* change File::GetSize to fetch the size directly from the open file instead
of stat'ing it when challed with a FILE*
* use changed File::GetSize(FILE *f) instead of calling with file name in two
places
* remove 'seek_pos % file_size' hack for ZTP, so one can seek to the end of
file again. Please check Zelda: Twilight Princess for regressions
* return error codes when reading or writing from/to a file

A lot of those changes are from j4ck.fr0st, so kudos to him.

I did not change the file open mode for ISFS_OPEN_WRITE to 'wb'. While that
would probably be more correct, it says in the comment that it might affect
Mario Kart Wii. I would prefer somebody with that game try that change
locally first.

Please check your games for regressions (or even improvement). Some games that
may be affected are Zelda - Twilight Princess and Metroid Prime 3.

Fixes issue 1749



git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6634 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"6087987f858febc4b9953d192b27034120bdd2a5","2010-12-21 22:18:40+00:00","ClearScreen fixes:
- Clear alpha channel to 0xFF instead of 0x00 whenever we (re-)create the EFB texture
- Disable color/alpha channels whenever the actual EFB format doesn't use them

Fixes issue 2826.
Fixes issue 1879.

Please check if issue 3014 is fixed now, as well as any other games which might have broken due to ClearScreen changes.
For what it's worth, Super Mario Sunshine still shows a small glitch even with these changes.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6635 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"e9e86abed6e233e01988e74b085b1f2be153af44","2010-12-21 22:27:38+00:00","remove the remaining parts of the hack from r1327
the original issue was fixed some time ago
no functionality changes

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6636 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"e4269dcd65cfdcd611d71b91e43e57729c849427","2010-12-21 22:49:35+00:00","AlphaMask and ColorMask were reversed.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6637 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"c1c1f54c59b97696ca373b460a90332675f42910","2010-12-21 23:58:25+00:00","Implement free look on linux.  Patch due to artart78.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6638 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"9584b5b3351ad4dc8a9d9826364a9a39572d26a3","2010-12-22 00:48:59+00:00","Update Wii save import / export to use the same replace list as FileIO
add a couple of country codes I found through redump.org database

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6640 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"0d5480073f0383cc15f9a168c58199b57516757f","2010-12-22 01:05:29+00:00","Added a game property for the 'Enable CPU Access' video option.  Patch by Link_to_the_past.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6641 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"9bbe7a9e1af8f0aa8d89c4d8b0182c0a52d1983a","2010-12-22 05:59:58+00:00","Allow control of BT.SENS and BT.MOT sysconf values. Thought BT.SENS would fix issue 3362, I don't think it did though...
Feel free to revert if the options seem unneeded.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6642 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"6c556786fbc3bc2071f1aa39c39969f737d2ab24","2010-12-22 06:00:36+00:00","Move AES to common lib
move pch includes to vcproj file for discio

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6643 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"4a5ac3aa54a2c9a237c706ccf07f3352b09aee1b","2010-12-22 06:21:07+00:00","data/user/wii/shared2/sys/readme.txt isn't really accurate or necessary anymore.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6644 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"3d68608024d395c415c59f8018e07d78511d50a9","2010-12-22 06:45:59+00:00","Fix Unix build.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6645 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"547c18fb5504b52fd851a61ae80bc73a86e39809","2010-12-22 08:00:08+00:00","Add the ability to Get / Set Array data from SysConf
wiimote bd's are now read from (or added to if < 4 exist) SysConf
in theory you should be able to use any valid sysconf file now,
but i would advise against using a dolphin edited SysConf on a wii

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6646 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"e059587c1a15c2f99212c53254911bd67dec8b9b","2010-12-22 17:32:17+00:00","Don't reset all of ARAM when DSPReset is sent. Fixes issue 3594

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6647 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"edbc06bd1804f6a379fd36719f5711d1dda7f38d","2010-12-22 20:24:25+00:00","Support for multiple wiimotes on OS X.

Fixes issue 3703.

Note that HLE wiimote activation is currently a little broken, so to
use multiple wiimotes you need to open the wiimote configuration window,
refresh (connect to) the real wiimotes, start the emulation and then
select Connect Wiimote 2/3/4 from the Tools menu or with hotkeys.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6648 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"055a056ddc8f5098ddbf269aa0f90afdbf3ecc7d","2010-12-22 20:25:24+00:00","Clarify comment about the use of event.Skip().


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6649 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"750515ea79e898544411c872ec8d329d3c7d314c","2010-12-23 06:00:17+00:00","some better default settings:
logging: turn off write to file
core: don't insert anything in memcard b slot
video: efb scale to integral, AF to 1x
audio: 100% volume, 48KHz sample rate

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6650 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"86c46a95300acaa8c092d64a1080d59a4fffee43","2010-12-23 10:36:00+00:00","More ClearScreen fixes for PIXELFMT_RGB565_Z16...


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6651 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"ef96ab7d4f88d5142aac34a834f7b8bc774c0c61","2010-12-23 15:27:49+00:00","LLE JIT:

* Completed the JIT versions of the DSP arithmetic instructions (28 instructions added).
* Added JIT versions of maddx and msubx (thanks to LM1234).

x64 only


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6652 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"b9d4534a351157c3f814645a2033a013409b9487","2010-12-23 22:42:10+00:00","LLE JIT: Fixed the shift direction of the lsrnrx, asrnrx, lsrnr and asrnr instructions.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6653 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"b5d482a0d37565e9a63dde16c148cbdd8270ca22","2010-12-24 02:21:09+00:00","Added support for a wider number of VID/PID reported by Wiimotes.  Patch by palsch.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6654 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"444854601caa1f1227c05194f3816ae6c5c0dbf2","2010-12-24 11:15:51+00:00","CMPR texel blocks are 8x8 in hardware, even though the source format says 4x4.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6655 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"9938f806f1df56197e3ce2b08d7a0c212b5eccd1","2010-12-25 00:25:15+00:00","Guess what, more ClearScreen fixes.
Additionally a small cleanup.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6656 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"f2e54074f1a986479b70d4a6dec5978240e16384","2010-12-26 03:12:29+00:00","LLE JIT:

* Completed the JIT versions of the DSP Multiplier instructions (5 instructions added).
* Bug fixed the dec and lsr16 instructions.
* Minor code clean-up.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6657 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"7c5b12c5bced517e6db4c5a2ed8d14e853d5c490","2010-12-26 06:23:33+00:00","Made the 'Download Gecko Codes' button not add already existing codes.(fixes issue 3732) Minor fix to gecko code handling. Added a 'Show Shader Errors' setting to video config dialog.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6658 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"963ca6f9632fd54811fb369dc4294061417a7947","2010-12-26 12:34:38+00:00","LLE JIT:  Added the loop instructions to the JIT.  Added ASM version of HandleLoop.  Both x86 and x64 versions have been added.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6659 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"b4e0fe53afd2a7d3bcd15cac6411da46f3b0df34","2010-12-26 22:54:02+00:00","Copied some emulated motion plus stuff over from the old wiimote plugin. Not at all functional currently.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6660 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"64d43211c9c03fa860c293d05a5214ef30cb7da0","2010-12-27 00:26:52+00:00","Use the same code for populating user data directories one by one
on OS X as on other Unices so OS X initial installs aren't so easily
broken by files being created in constructors.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6661 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"695010520ff004844c8137a75868dd8b046eb8f3","2010-12-27 02:55:35+00:00","More FIFO work, HACK Solution for extreme overflow on breakpoints.

1) What is the FIFO? The fifo is a ring queue for write (CPU) and read (GPU) the graphics commands.
2) What is the Brakpoints? The breakpoint is the FIFO mark to allow parallel work (CPU-GPU) When the GPU reached the breakpoint must stop read immediately until this Breakpoint will be removed for the CPU.
3) What is an overflow? The CPU write all room FIFO possible, and like a ring overwrite commands not processed yet.
4) Why you have an overflow? In theory should not have an overflow never because the fifo has another mark (High Watermark) When the CPU Write reach this mark raise a CP interruption and the FIFO CPU WRITES should stop write until distance between READ POINTER AND WRITE POINTER will be equal to another mark (LO Watemark to prevent and overflow.
5) So if impossible why you have overflows? Simple, the CP interruption is processed later and the Overflow happens. (there is a lot of theories about this)
6) Why is no so simple like when CPU WRITE POINTER is near to the end of the FIFO only process pending graphics command?
Because when this happens sometimes we are in BREAKPOINT and is IMPOSIBLE process the graphics commands.

- This HACK process the pending data when CPU WRITE POINTER is 32 bytes before the end of the fifo, and if there is a Breakpoint force the situation to process the commands and prevent an overflown.
In theory you have not see 'FIFO is overflown by GatherPipe nCPU thread is too fast!' anymore. But if you have a hang in game where you had this please read the NOTICE LOG in user\logs, I've added this message 'FIFO is almost in overflown, BreakPoint' when the hack is activated. (I will delete this message very soon)

Good Luck!! PD: Shuffle sorry for the large commit description :P

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6662 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"f3336a84a16e93dfd20595201a07fc9ba20a12b5","2010-12-27 03:09:11+00:00","First Experimental Commit:
make some changes to the Clear code. please test a lot , the point of this commit is to determine the correct behavior of the efb clearing so feedback is welcome

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6663 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"c2283ad6c04f8785013604d56bd2cf491e89f556","2010-12-27 03:18:01+00:00","Second Experimental commit:
corrected peek color and peek z to  correctly emulate real hardware formats.
implements native gamma correction.(i don't own any game that uses this functionality so i will appreciate feedback)
i need a lot of feedback in this changes please
enjoy

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6664 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"d59b1e5e7a10a5ff49d3bb267ed72f668d49af96","2010-12-27 03:46:17+00:00","Ops! Little fix for my prior commit.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6665 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"0e737235a86c12c5291973b4d2286b7fe148ab23","2010-12-27 10:49:14+00:00","little fix for my last commit

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6666 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"c33f46406e60fb2a0cf6613fdd062c6934e4914b","2010-12-27 15:05:18+00:00","Core/DSPCore: Improve Interpreter address register add/sub, convert to
assembler for JIT. Replace JIT ToMask() with a different variant. Remove
superfluous zeroWriteBackLog calls(added by me).
Core/Common: Don't bother creating a string and calling into a Logs trigger()
when there is noone listening. Change AtomicLoadAcquire for gcc to just
make the compiler not reorder memory accesses around it instead of doing
a full memory barrier, per the comment in the win32 variant.
Core/AudioCommon: Fix a use of uninitialized variable inside libalsa.

Microbenchmarking results for ToMask variants:(1 000 000 000 iterations):
cpu\variant| shifts | bit scan
intel mobile C2D@2.5GHz | 5.5s   | 4.0s
amd athlon64x2@3GHz     | 6.1s   | 6.4s
(including some constant overhead identical to both variants)



git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6667 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"6e8df50fffeb381523d40aeae31afa4f60df46a3","2010-12-27 18:09:03+00:00","Yet another ClearScreen fix, should be the last one now.
Should fix almost all regressions of the recent ClearScreen changes and keep the fixed stuff.
The Super Mario Sunshine glitch is caused by another issue and will be addressed in my next commit.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6668 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"a271bb81820b9e37942aa3d17dcfc10e467e008e","2010-12-27 21:56:20+00:00","Implement pixel data reinterpretation on EFB format change.
Whatever that means, it fixes that stupid Super Mario Sunshine glitch and possibly lots of other stuff, so test as many glitchy games as possible with this ;)


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6669 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"b21c361a1a687c3f275f64133d263007287a4ff3","2010-12-27 22:14:33+00:00","Make ARAM DMAs take time. Allows WWE Day of Reckoning 1 & 2 to go ingame...then they crash. Not entirely sure if the crash is related.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6670 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"33506f5bdc91c0f7f6122365589defb60201d899","2010-12-27 22:17:19+00:00","All 64-bit capable Macs have the SSSE3 extension.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6671 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"722b7db8f93e6b7c550f58d2a71ba8000c3d582d","2010-12-27 22:30:24+00:00","more WIP BBA crap...nothing nice to see.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6672 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"9553aa0100b831b30f99240d53e48676b5287e81","2010-12-27 22:51:20+00:00","linux buildfix

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6673 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"677fd7c052c8354d2f85f45418df81e9af3de8fd","2010-12-27 23:23:53+00:00","LLE JIT: Completed the JIT versions of the DSP Branch instructions (added ifcc, ret, rti and halt).

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6674 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"9cc19447a96941913973644aa941005bc99c20dd","2010-12-28 00:42:00+00:00","LLE JIT: Completed the remaining JIT DSP instructions (lrrn, srrn, ilrrn).

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6675 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"9bf2705c2d7198e7ee132d6ef5489d325d56168d","2010-12-28 01:10:40+00:00","Small fix in addition to r6669.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6676 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"7de67734838fa5d15d619c5729bfc0733aa73240","2010-12-28 12:46:00+00:00","Invalidate texture cache when the STC or native mipmaps options are changed.
Fixes minor graphical glitches in these cases.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6677 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"6cc146829279dc22d3dc785a800edf7100a0ba71","2010-12-28 16:16:27+00:00","Fix ClearScreen in OpenGL as well (uses clear quads instead of glClear now).
Thanks to kiesel and sl1nk3 for helping me out here ;)


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6678 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"0059b0f44f6af976fa1b17cea932b3d828d58e3c","2010-12-28 22:14:15+00:00","Made wiimotes automatically connect on start based on their selected 'Input Source' in the wiimote configuration.(fixes issue 2261) Made wiimotes 2-4 input source default to 'None'.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6679 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"fc1db5eaa0b6caf2797d6250fa7a7bce1cfe4dbe","2010-12-29 02:12:06+00:00","Core/DSPCore: Reorganize register layout for accessing accumulators
(acc and ax) and product register with one read/write.

Gives a minuscule speedup of not more than 4%. In exchange, breaks all
your out-of-tree changes to dsp. Tests are not building again, yet.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6680 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"8ccdba7273a4c837cbc5f186b96586947efb41b5","2010-12-29 04:34:33+00:00","LLE JIT:
* Fixed a bug in the JCC instruction.
* Changed the cycle count from u32 to u16.
* Added cycle counting to the block linker.
* Optimised the branch exit slightly.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6681 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"24eafcb342b1620733224f75df4e0dacabb8fc4a","2010-12-29 07:12:37+00:00","More FIFO work. This is an Experimental commit, Fixed 'Monopoly Wii' ('FIFOs linked but out of sync' problem in this game)  Re-sync the FIFO again when this is in immediate mode. Copy CP register values to PI register. Now this games is booting and ingame :)

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6682 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"603c99f64f3fd91bebe18cea0061bcbd22df7b8d","2010-12-29 13:05:42+00:00","Compile fix for Unittests.
A lot of tests are failing right now, not sure yet if this is caused by the recent reg changes or other stuff (at least broken according to tests: iar, subarn, addarn, 'ir, 'nr, 'l, 's, 'sn, 'ln, 'lsn, 'lsm, 'lsnm, 'sl etc - err, most/all that use increase/decrease)

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6683 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"07d947c8348022984219c56ae9cf8ee2ffc05ad3","2010-12-29 13:07:00+00:00","DX9/DX11: Fixing some maybe possible crashes if a game was started, the config dialog opened and the game closed again. Due to other issues this still happens quite often though...
Various warning fixes.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6684 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"642c7a437c70d628efb42831bc8ac38a7c075a51","2010-12-29 14:42:20+00:00","Add ciso support.
Thanks to dolphin.user839 for the patch ;)
Fixes issue 2708.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6685 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"765fb4bbe3c056088eb50882ed807d48f286082b","2010-12-29 15:23:02+00:00","Linux build fix.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6686 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"98752f2a1eef393cacc42e33bb4c66cbfde010ac","2010-12-29 20:20:52+00:00","Core/DSPCore: Changed g_dsp._r back to g_dsp.r. Removed the check*Exclude
functions accidentally added. Fixed the jitted ar register arithmetic.
Added a CMakeList.txt for the UnitTests, but did not add the subdirectory
to Source/CMakeLists.txt.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6687 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"469e81e2fd1a989d8764e7afed8b74d5fb540dd2","2010-12-30 00:10:18+00:00","LLE JIT:

* Optimised out the R11 ImmPtr instructions
* Made the whitespacing a little more consistent
* Disabled block linking while it is being reworked

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6688 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"613b0f4c519047b8bba1391a0a747ab811fbb33f","2010-12-30 02:43:50+00:00","Upgrade GLEW to version 1.5.7:

New extension:
GL_NVX_gpu_memory_info
Bug fixes:
Improved mingw32 build support
Improved cygwin build support
glGetPointervEXT fix
Add GLEW_VERSION_1_2_1

Fixes issue 3798.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6689 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"2c4f9825ca54d730cbeb2d860092b0d8aaae6bca","2010-12-30 07:32:16+00:00","Fix issue with LinearDiskCache where only new files could be written to, Append() would fail on previously existing cache files.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6690 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"6cf9b3688df632328b1fa223b9ade8d869cfade9","2010-12-30 15:36:28+00:00","LLE Int: (addr add/sub/inc/dec)

Adjusted the code work without ToMask.
This code should be functionally identical for all inputs to the previous code.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6691 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"b038df64bfad478c4e2605985809f58f351ec11c","2010-12-30 19:17:08+00:00","TextureDecoder.cpp: new SSE2 optimized GX_TF_I8 decoder. Probably not ultimately optimal SSE2 code, but provably better (on my machine) than the memset version. Tested with __rdtsc counts in an independent project. I get about 6-7 FPS more on average during the intro movie playback in Mario Kart Wii. Hope this compiles for GCC okay.
TextureDecoder.cpp: merged two functionally identical decode5A3RGBA and decode5A3rgba methods.
OpcodeDecoding.cpp and DLCache.cpp: optimization for GX_LOAD_XF_REG. The PSUHFB solution sounds better for SSSE3, but this is a small win for the default case.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6692 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"8e184171e794fc1c2d19550b8029a1a644181b6e","2010-12-31 02:10:07+00:00","Remove wiiuse, and use our own code.  Works on linux and windows.  On OSX it should compile, but I don't know about functionality.  Even on linux and windows I can't promise this is bug free (wiiuse certainly wasn't).  Please report issues as you find them for all platforms.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6693 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"0249d5fbaa250923ab3e2c9a6a1b8b4627d1df9f","2010-12-31 03:08:22+00:00","A few details missed in the last commit.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6694 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"bc3b43d1bd6114e2b426efcc2bdca46422f16f86","2010-12-31 04:52:20+00:00","Fix core dependencies for all windows builds.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6695 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"8a711eadaced8306490271c1b13c51007fe9fa67","2010-12-31 06:45:18+00:00","Video software:
Changed the EFB color order from RGBA to ABGR to emulate it correctly on little-endian platforms. Added some enumerations to clear up what components are which colors. Fixed the TEV alpha input LUT which would have caused problems if anything was doing alpha comparisons.
Changed box filter for EFB copies from 3x3 to 2x2 because that is probably correct. Also makes the math nicer.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6696 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"41c40bcd50ae2269ff27b0f0018539bb64c2ca3c","2010-12-31 07:06:53+00:00","Finish implementing gamma correction in DX9.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6697 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"343e3f7c751039ede8ba71d5a9d7a781de04bb19","2010-12-31 07:23:17+00:00","~80% speed improvement in decoding GX_TF_I8 textures. Yes, EIGHTY PERCENT. However, for MKWii movie playback I still can't break the fluffin' 48 FPS boundary on my machine! There's something else at play here because this decoder is ridonkulously fast.
~25% speed improvement in decoding GX_TF_RGB5A3 textures which aren't used very much. I thought it would help for movie playback but I misled myself. Video playback has nothing to do with this texture format.
Next I'll see if I can knock out some of these other texture decoders. Byte swizzling I'm sure can somehow be accomplished using _mm_unpacklo_epi8 trickery, so that'd be another big win I hope.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6698 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"134fca9b82436477cd8f2f7762da0a42f83b1b82","2010-12-31 10:20:43+00:00","~68% increase in GX_TF_IA8 decoding speed. Not an oft-used texture format. An example use is the Wii cursor in MKWii in the menus.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6699 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"a55925af794cdcee4cb65301927e7824a223d502","2010-12-31 10:40:49+00:00","fixed crash when compressing 4+gb isos on some builds

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6700 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"bc78a98cbcbf5b1fc2e31881ba10fe985d4724a9","2010-12-31 12:21:28+00:00","Removed left-overs from wiiuse, should fix the problems when building on windows.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6701 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"4b3a6a6d474a8cea3a00a10a92d684983b4e78d5","2010-12-31 15:47:42+00:00","This should fix wiimote extensions on linux.  Now to figure out the windows issue, and then OSX ...  Sigh!


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6702 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"71209d99c8702d6e321f8dd98e21182c04a6a975","2010-12-31 15:53:38+00:00","This may fix the extension issue on windows.  Please test.  Thanks BhaaL.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6703 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"72738bf2e722e67f613b4a6086570e7cf09226d4","2011-01-01 00:16:02+00:00","clamp OGL depth clear value, this might fix a problem some people reported with r6678

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6704 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"99c8ea7abb22dd48cd9102cb90d1dd38dd5e0cf8","2011-01-01 01:47:33+00:00","Initialize bluetooth input queue when creating wiimote object.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6705 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"60082853ec5a1779756c863f60ce0b06ad4af86c","2011-01-01 03:52:32+00:00","GX_TF_I4 texture decoder optimized with SSE2 producing a ~76% speed increase over reference C implementation.
GX_TF_RGBA8 texture decoder optimized with SSE2 producing a ~68% speed increase over reference C implementation.
TABified the entire document per NeoBrainX. :)

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6706 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"2f7da5d5d1d8226acb372d49c8346d8596ac2775","2011-01-01 13:19:07+00:00","LLE JIT:

Applied the logic from r6691 to the LLE dec/add/sub functions so they work without ToMask. This should give a modest speedup for these.

Pierre's AR inc was already perfect and I only adjusted its logic a bit for visual consistency between the interpreter and JIT code.

Also applied Pierre's optimization from the LLE inc to the Int inc.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6707 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"28ef121a93f829c1706fc40ce13500e519825755","2011-01-01 14:57:19+00:00","Revive io_osx.mm revision history and reapply the changes in r6693.

Avoid sending the Wii OS bluetooth packets with uninitialized data
past the nominal length of the report.

XXX IOWin.cpp still always returns MAX_PAYLOAD because I don't have
a Windows environment to test with.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6708 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"0732c337c523d00c6c37429639fd5a37e2659bd2","2011-01-01 16:11:44+00:00","OGL: Clean up ClearScreen

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6709 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"8b55eff33d369438c44303d5d8594b10e53c9bc1","2011-01-01 16:46:41+00:00","With the more aggressive polling by the per-wiimote threads,
additional input queueing in IOdarwin appears to be unnecessary.

IOBluetoothDeviceInquiry does not find already connected devices,
so no need to filter those out.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6710 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"4f2bfd181a4ca1bd285d77a0ec4b65c8929a2535","2011-01-01 19:55:03+00:00","Fix for r6707. Looks like I tried to do some invalid 16 bit addressing.

Also a small change to the mixer. This should fix audio throttling in cases where num_samples > RESERVED_SAMPLES. This seems to happen now with zelda ucode games, possibly others.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6711 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"527057cb277c399a5369474f6ca7c6478c5e46e9","2011-01-01 20:00:03+00:00","Avoid shadowing variables.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6712 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"d4ced9e9952394a52d3b68acf493189179f46a0b","2011-01-01 20:36:42+00:00","Patch applied from issue 3829, author admin@dasmetzelmaennchen.de.
Tweaked SetMultiVSConstant functions to prefer glProgramEnvParameters4fvEXT over glProgramEnvParameter4fvARB with fall-back for older harder.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6713 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"7703018632b54b767fbc20ef56dc530b6e8ed843","2011-01-01 20:54:15+00:00","Possibly fixed game crash issues by switching to unaligned SSE2 loads/stores.
Removed unnecessary work being done in the file system when logging is disabled.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6714 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"6ffdbe84826fb5c88161ef61a33da7468e483eca","2011-01-01 21:08:30+00:00","Use the public svn_rev_str for the kernel.bin header instead of
the private SVN_REV_STR which relies on finicky build mechanics.

With SCons, kill the old svnrev.h in Source if still present.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6715 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"8fca9a8e8d547653581ecb4aac12a09a4311eba3","2011-01-01 21:09:56+00:00","Set native eol-style on some recently added files.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6716 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"4bf07838a827cbc62f0d166b30763e7730cf8b4f","2011-01-01 22:47:29+00:00","Use abspath when deleting the old Source..svnrev.h.
Makes no difference for me with SCons 2.0.1,
but maybe it does with other versions.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6717 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"63115ca2ef440de77ab056b4577ba777b87f57e7","2011-01-02 00:01:19+00:00","Handle FileIO Read/Write more like real hardware.
Fixes Issue 3761.
Fixes Issue 1749.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6718 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"26a3a9400b67b1e964a4de45e7042c577d0670d8","2011-01-02 00:16:13+00:00","Core/Core/HW: Give small amounts of time to the dsp whenever the ppc
reads the high bits from the mailbox registers. It is probably waiting for
the dsp to read the data from the cpu-to-dsp mailbox or for the dsp to
write to the dsp-to-cpu mailbox.

This about removes DSP::Read16 from lle profiles where it previously used
up to 2% of all system time. Also speeds up games quiet a bit.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6719 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"c729b86c0045779f0020c17393a95e9c84722083","2011-01-02 02:49:30+00:00","Audio volume slider support for OS X.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6720 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"079bc67347826304a10c02113e3a5a173c904926","2011-01-02 02:50:51+00:00","Cast size_t to unsigned long for printing.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6721 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"75a8fa73401b48d26c2d819e747b38324d6369ef","2011-01-02 03:43:44+00:00","Fix an issue on windows where found wiimotes were not being reported as found.  This fixes issue 3832.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6722 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"638fa77954eac52a778cc2938c2a72164646cfdf","2011-01-02 12:27:33+00:00","ISFS_Seek: Turns out POSIX allows seek past EOF, the Wii does not.
Should fix Issue 3761 (really!), please test this.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6723 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"4b15325acdb6c8638ea07d349e17c2d4e7c5142b","2011-01-02 22:53:25+00:00","GX_TF_RGB565 texture decoder optimized with SSE2 producing a ~78% speed increase over reference C implementation.
Fixed crash in debugger when attempting to enable profiler before having run any game.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6724 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"ecf92f5c3c31ae6c1541469c338a5ad5a81acf73","2011-01-02 23:13:29+00:00","D3D9: Make sure to use powers of two as render target dimensions if it's needed by the device.
Some other cleanups.

Possibly fixes issue 3256.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6725 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"b7f7a248c5fb2e1e3a39a8ed3cedd007e356d5c8","2011-01-03 01:24:35+00:00","Fix for bit reduction regression in GX_TF_RGB565 textures from previous commit.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6726 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"fea85945dad15b471bce4fb7f7d2dc6d1eb81af2","2011-01-03 01:59:44+00:00","Warning fix for gcc ;)

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6727 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"a6637c257f3bdaa740b19ba4590ae42a3d45f62b","2011-01-03 10:39:48+00:00","LLE JIT: Reworked the block linking code.  It now keeps track of what each block is waiting on, minimising the amount of recompiling.  Both jumps and calls can now become linked.  The code also checks the cycle count before jumping to the linked block.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6728 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"ae71e63872dac1e8cfedccfc3529b86e67439270","2011-01-03 14:19:11+00:00","LLE JIT: Minimised exception checking.  Instructions which need to check for exceptions are now marked in the analyser.  Moved the checking for external interrupts to the point where the CPU writes to the control register.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6729 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"5cad834c96a5662dfc228b1dce88fd6846916d3f","2011-01-03 14:35:07+00:00","D3D9:
- Assign width and height to the actual powers of two rather than to the exponents...
- Clean up FramebufferManager()
- Make use of more depth buffer formats to prevent some devices from failing to create a depth buffer

Should fix issue 3256.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6730 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"825ceca9f1176ded8604adcf0f6897e2e17988e3","2011-01-03 18:00:15+00:00","Taking a random guess at what could possibly fix issue 3256...

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6731 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"4e97f835788e3cc7cc12905abdd1e4c398cc0566","2011-01-03 22:08:03+00:00","Fix a mistake... :P


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6733 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"daecceb42dac7a7c9d7febabefca0d362baca213","2011-01-04 02:04:52+00:00","Move the expected location of the DSP ROM files from Sys/GC to User/GC.

These files are acquired from the hardware ROM by the individual user,
who does not normally have write access to Sys on Linux and OS X.

If you currently have these files in Sys/GC, just move them to User/GC
(~/Library/Application\ Support/Dolphin/GC on OS X).


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6734 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"58f5140233963944341fdbd7d6d1b7f585003196","2011-01-04 02:07:17+00:00","Retire the workaround for wxWidgets using the Objective-C reserved
keyword 'id' in the public auibar.h header.

You now need at least r66546 of wxWidgets to build on OS X.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6735 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"efe555fc16ebc62ab667189e43908215d64bb754","2011-01-04 02:09:29+00:00","Some minor tidying of the OS X audio and wiimote code.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6736 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"599020ef994d434864c8ec1dbd0f053d455f8645","2011-01-04 12:56:52+00:00","D3D9: Fall back to just creating a depth surface instead of a depth texture if the latter one isn't supported by the hardware.

This is a workaround for issue 3256.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6737 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"293b5cb4c16b9da1c1d72b65ebf0e4fc23b3be84","2011-01-04 13:59:44+00:00","Look for the DSP ROM files in Sys/GC as before before trying User/GC
to allow both system-side (also Windows) and per-user installations.

The IPL ROM is another candidate for this, but I don't have an
image to test with.

Perhaps a more general solution would be to just phase out the Sys
directory. As used for data which would have been available in ROM
or flash on the real hardware, it really contains two classes of
files that are both read-only during emulation:

- Settings and font files, which can be freely distributed
- ROM files which must be obtained from the user's own GC or Wii

Since the two could be freely put together on Windows without any
problems and with the users of that platform being resistant to
change, it may be easiest to just treat Sys as another directory
to be copied from the application bundle into User/Sys at startup
on non-Windows.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6738 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"77346cc254484c12115abc89d9950930c75a775e","2011-01-04 14:49:54+00:00","small fix for lle-int

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6739 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"99b4f4703d286b405a6f7575c8f7599d584aaca2","2011-01-04 19:54:30+00:00","~40% speed improvement for decoding GX_TF_CMPR (S3TC) textures using SSE2 intrinsics.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6740 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"dd7d325453188578fc4fd8235fd5663c7d101e13","2011-01-04 22:30:58+00:00","Temporarily reverting to unoptimized until I can figure this out. Apologies for the SNAFU :)

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6741 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"1fbf53cbdf7b03d139107249fbe10a256f3d4897","2011-01-05 01:29:38+00:00","* By forcing resolution size to back-buffer size when the latter one is changed!

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6742 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"012939d1278db9565499f2dc33773b49d86f6058","2011-01-05 01:45:36+00:00","After removing the input queueing in IOdarwin.mm I was still seeing
the occasional HLE wiimote disconnection, although nowhere it was at
near the level before both the recent wiiuse integration and adding
the queue in the first place.

The callback-based bluetooth input method on OS X really requires
that packets be accepted immediately and the 1ms polling done by the
wiimote worker threads isn't quite good enough.

So just play along with the native OS X model and send the packet up
our stack directly from the callback. With our current API, this is
kind of a layering violation, but it seems less messy than either
putting back internal queueing in IOdarwin.mm or adding the platform
support for higher-frequency polling than what usleep(3) offers.

Perhaps we should just change our own API to a callback model. While
this makes no real difference right now, it would make it a fair bit
cleaner to accept new wiimotes at any time instead of having to click
Refresh, although with the recent realmote changes, that feature can
probably just be hacked in by looping around FindWiimotes().

For other platforms having problems with HLE disconnections caused by
dropped bluetooth packets, as a first stop I would suggest trying to
do more than just one wiimote->Read() per iteration in the thread.

This change also conveniently sidesteps another new IOdarwin.mm bug
where the discovery and I/O code would clash during a refresh because
they use the same default CFRunLoop, so if we switch back to using a
run loop for I/O, must remember to create a separate one.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6743 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"6eff71b89361784673066a4b04b514980294bbdf","2011-01-05 02:48:32+00:00","Fixed S3TC DXT1 decoder implementation. I see ~40% speed improvements running on x86 Intel hardware and 0% improvements running on x64 AMD hardware. Strange. More investigation to follow!

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6744 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"8f9f1b64ff5409185419c936be77d7b8de59fbe3","2011-01-05 03:19:53+00:00","Fixed Linux build.
Fixed small undiscovered bug in WII_IPC_HLE_Device_FileIO.cpp when looking at 0-length strings.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6745 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"0b46610d49a6d112be8ca196dbb6c6e78d1bd53c","2011-01-05 03:29:56+00:00","Changed order of operations in Profiler.cpp to calculate non-zero values for 'cost'. Integer division was too early. Credit to my brother, Joe, for figuring this one out.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6746 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"4f6d4f5ddd65840828faa1f47ba86cf27aea8d0e","2011-01-05 04:35:46+00:00","Add internationalization support.  There aren't really any translations yet other than a little French thanks to DavidVag.  So now the translators need to go to work.  See http://wiki.wxwidgets.org/Internationalization for directions.  The binary .mo files are generated at build time on linux.  They are provided in Data/Languages for windows.  I don't know where they need to go on OSX, but they should be able to be generated there at least.  I added a target to generate them on windows, but does not build by default as it requires that msgfmt.exe from the gnu gettext tools be installed and in the path.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6747 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"8e3af9c2a6a74634d1d83662d2de0e5e254d6bbe","2011-01-05 14:31:50+00:00","Disable the Languages target on windows 32 bit builds.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6748 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"9c2c083f306ada5fb12c99e73bf7aa3ca7b8a871","2011-01-05 16:33:44+00:00","Install .mo files on osx as well.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6749 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"44251404245cf17d1edf4315138ac7b4950218cd","2011-01-05 16:37:42+00:00","Oops, forgot to remove that line.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6750 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"d435fd8957a204479c7f045aa34e722de626b7d4","2011-01-05 17:16:52+00:00","corrected depth copy shader in dx9/dx11 to improve accuracy when doing efb to texture for depth formats

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6751 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"0a36663b01c87279cde2edb40159798c44f52c8c","2011-01-05 17:22:25+00:00","corrected a little error in my last commit

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6752 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"7219d185d90f7d0882959827e6e5a54ca1481be1","2011-01-05 17:56:08+00:00","Add some more translatable strings.  Thanks to DavidVag.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6753 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"809670611b7a48d559d8e8369aaa4a94029e8ba7","2011-01-05 20:50:51+00:00","improve z copy a little further in 4 bits copy,
fix and error introduced by my last commit in dx11 plugin

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6754 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"5ca3adde3c30d4f0563c425282f24450c7791859","2011-01-06 00:32:52+00:00","Enabled SSE2 optimization of GX_TF_CMPR decoder only for x86 builds. It can't compete with the x64 optimized reference C code.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6755 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"95b6d3f4453fa3fa02fffcb889cb8f5018a24263","2011-01-06 01:11:32+00:00","Kill HAVE_OPENCL.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6756 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"4f45b422a2ecf18fc45d2d60ac3afa5bae993c1b","2011-01-06 02:24:03+00:00","a little cleanup of dx9 depth conversion code that r6751 made unnecessary, and a question about D3DFMT_D24X8 checks, and (most importantly) spelled Stretch right in video config

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6757 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"de15cb2bc930bd06253dd6aecad927edbf43d316","2011-01-06 04:04:58+00:00","Add an English translation file (with no translations).  For some reason OSX seems to need it.  Shouldn't affect other platforms.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6758 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"80cee2528c6dbe1b1e847a02859c1892b8df6f78","2011-01-06 13:57:46+00:00","Localization:
- add some more strings for translation, change others for easier translation (in case anyone knows a better way than _('a') + wxString(wxT('b')), feel free to fix it).
- removed strings that shouldnt be translated.
- added gettextize script from glennrics to generate the .pot file; this excludes debugger-related strings which are usually not used by the end user anyways (again, less stuff to translate).

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6759 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"ca2628f89631eed9b8edfeb059ffe0963247c50e","2011-01-06 16:05:11+00:00","Changes:

* Fixed a bug on Texture Converter when Copy EFB to RAM's cache is disabled, so...

* ...accordingly, I revert my latest commit because now it becomes useless.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6760 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"2841d67ce314ae6ddc1f92828c928470d146c871","2011-01-06 16:41:20+00:00","Faster SSE2 optimized GX_TF_CMPR texture decoder which gets ~40% speed improvement on x64 and ~50% improvement on x86 as compared to reference C code.
The code now uses direct pointer access from C code to write the colors to the destination texture instead of trying to force them back up into an __m128i and a single write call. This is what produces the major speed-up.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6761 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"1671917472cc705f4603170c064965c9cd2dd8fe","2011-01-06 16:50:09+00:00","Missed one MSVC-ism. Should fix build for Linux. Last revision should still work for Windows. No functionality changes this time.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6762 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"49b7da6445013c33a89fa6d68b2b64bcd538c7eb","2011-01-06 18:08:16+00:00","Added a few translatable strings.
Added German language translations.  Thanks to JackyCola.
Added Italian language translations.  Thanks to RebuMan.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6763 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"d16357cd5ce810c74fcee602ed13028d397c6254","2011-01-07 04:57:59+00:00","Add anvideo config option to automatically resize the render window to the size of the game's output resolution. This avoids artifacts that appear when the render target is scaled to fit a window of a different size.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6764 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"b6a1e9376fe88d198c4f5f7d90e8836f1738c68c","2011-01-07 05:58:05+00:00","45% speed improvement in RGBA -> BGRA conversion over reference C code. This might turn out to be unnecessary once I refactor the CreateTexture2D/ReplaceTexture2D to call the texture decoder instead of vice-versa and have the SSE2 code convert directly to BGRA and write directly to the D3D allocated texture.
Need to investigate source texture alignment and where to introduce that, if it is possible.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6765 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"c4477f68e150766cd29a5609f2361b0ccd040bd0","2011-01-07 07:54:04+00:00","~93% speed improvement (over plain C++) in RGBA -> BGRA conversion for processors that support SSSE3 (Core or newer).
About 40% faster than the SSE2 implementation.

May not be required in future but good for reference.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6766 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"c02f56fca33b3ac3d6c889e0659803344fe1d49f","2011-01-07 09:42:44+00:00","Use CPUDetect.h and bSSSE3 to fix 'unknown machine instructions' on DX9 plugin.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6767 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"53474403e2c3125819db1bc98ab0cab4ba77a8b4","2011-01-07 13:40:32+00:00","An SSE4 implementation for I8 texture decode. Slightly faster than SSE2 version on my computer (SSE4: 60%, SSE2: 55% vs reference C on Core2 Duo).

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6768 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"a6acc99a896dcdcefaeea3e49e1fd3c44acf3bbd","2011-01-07 13:54:18+00:00","Last commit only requires SSSE3, not SSE4.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6769 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"dcbfd4ea4cabb1ca5ed3f2f138b0f8352a472f7b","2011-01-07 14:55:05+00:00","SSSE3 implementation of IA8 texture decode. Roughly 50% faster than SSE2 version on my computer (SSSE3: 77%, SSE2: 57% vs reference C on Core2 Duo). About half as many cycles.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6770 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"418357190bb0b0f78fd4c6ef688dcf802dd1a3b0","2011-01-07 15:18:00+00:00","Make the gui more accurately reflect connected wiimotes.  Also connect and disconnect wiimotes when settings are changed in the wiimote configuration dialog during emulation.
Fix the number of connected wiimotes in the configuration dialog so it works with translations, and update translations accordingly.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6771 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"9cb3340754f132347ded40200ef4380a1b692d88","2011-01-07 16:00:39+00:00","An extra 5-10% speedup for I4 texture decoding with SSE4.1 intrinsics.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6772 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"9efa62b0ed1cbb9d03c8bba1fe75c5535f8abafb","2011-01-07 17:17:26+00:00","Add SSSE3 implementation for RGBA8 texture decode. It is 25% faster (3/4 of the cycles) than the SSE2 version.

Remove a bit of redundancy in CMPR.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6773 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"5c1f30060ebe58ec64721a82cae438ac2f5bdcd9","2011-01-07 17:30:48+00:00","Fix a missing 'else' in last commit.

Remove more redundancy in CMPR (may make it faster - not tested).

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6774 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"87bd4dd4b92da501073f1729bae260ef30dc4db6","2011-01-07 17:52:53+00:00","Probably want to store the result for sse4.

Makes I4 textures appear again for SSE4 codepath.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6775 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"62b79028efdfcccb2886a02a9aba979df34c4727","2011-01-07 17:55:26+00:00","This needs to be in the right place to work for <sse4. Going to bed now :P.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6776 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"f869281301a9b638f4fdf1ab3f4168f12909be2c","2011-01-07 19:23:57+00:00","normalize the efb to texture process for color textures to make it work the same in all the plugins and with the same accuracy as real hardware (almost :))
please test for regressions and fixes.
some little changes to make pixel shader more dx9 sm2.0 friendly. the condition is not to use pixel lighting ( sorry no hardware support for the quantity of parameters needed).

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6777 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"bedc889a56a4a7e14b9bbb0d525bd0302fc1c469","2011-01-07 19:51:28+00:00","Fix alpha reads (hurray for the ZWW Pictograph quest and Killer 7)

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6778 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"f667c03d55f24891f385745cd06ed2eb6bd6103d","2011-01-08 02:52:07+00:00","New SSSE3 implementation of RGB5A3. About 40% improvement (less cycles) on the plain C version and 17% on the SSE2 version.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6779 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"807671e32f6b30096a7dc19ac796b6a0cafb9825","2011-01-08 03:41:28+00:00","fix for a error introduced in my last commit.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6780 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"3cf8003a55439a1c1a108d7fc67e9d2c26a508c3","2011-01-08 04:59:26+00:00","From my last commit: Fix build on Linux. Use SSSE3 instead of SSE3.

Remove some unused vars from the SSE2 CMPR.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6781 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"aac34f037ff4b37085b920fb1b39a9b584239af6","2011-01-08 05:27:18+00:00","Add profiling (via oprofile) to the cmake build.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6782 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"394534814b13dd7563511b408db145dd79a5a3fb","2011-01-08 08:07:45+00:00","New SSSE3 implementation for I4 texture decode. 14% speedup over the previous SSE4 implementation (so it was scrapped).

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6783 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"5c725262ba19c93574247d71734cab617fcca8df","2011-01-08 09:08:36+00:00","Refactor all the SSSE3 functions in TextureDecoder so that the cpu_info check isn't looped over. Speeds up most textures dramatically (where it has previously slowed them).

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6784 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"7c121dadcba0c0af0ca332f536f25a5c17f7905f","2011-01-08 15:05:59+00:00","Fixed language selection by adding English, leaving default as '<System>' language. Removed languages which don't have translations yet.
As side-effect, changed GameListCtrl sorting to use the configured IPL/GC language instead of the UI language, which is misleading with missing translations, and possibly wrong if we ever get translations that are not part of the GC ones.
In case we want the old behavior back, revert GameListCtrl.cpp and ISOProperties.cpp.

For translators: use either '<System>' if your operating system is the same language as the one you're translating for, or replace one of the others. Someone will add them to the list when they are committed.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6785 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"34732999a16deb7bdf58521c5c9540560e6f9c31","2011-01-08 17:35:34+00:00","Added some languages:
Added Norwegian Bokml thanks to KHRZ
Added Polish thanks to Baszta
Added Russian thanks to Kein

Also cleaned up the appearance of the GFX config dialog a bit, fixed a minor issue in the cmake build, and fixed the nowx build.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6786 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"05198a8e4ed882f19bcb13ba15e632df563ae5ae","2011-01-08 19:14:45+00:00","Go back to using FindGtk for the cmake build.  The module is fixed with later versions of cmake.  We may need to check the cmake version and fall back to pkg-config for those using older versions.  Please test.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6787 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"e633c7824f4ed1e2274afed79dcfea6f3da7aa9c","2011-01-08 20:49:26+00:00","Make langs in abc order
Playing a bit with hebrew


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6788 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"1a72beead0901440cacbd0cccaeff49c2a925856","2011-01-09 05:06:53+00:00","TextureDecoder: Some misc clean ups. Backport code to SSE2 version. Remove redundancy in RGBA8 (5% speedup).

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6789 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"fbd4487987bc6b99e12ca526103ebd21bb62a3e7","2011-01-09 05:47:04+00:00","Worked around the Norwegian Bokm(/aa)l issue.
Enhanced the gettextize script to update mo files for windows and osx.  This script should be run any time that a new language is added (don't for get to svn add the Data/Languages language subdirectory), and on occasion to update the language files with strings from the source code.
Added the Hebrew mo file for windows and osx (and update the others).


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6790 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"f634d5803586bdcc629b4a74527fd7b4a539cd40","2011-01-09 13:49:54+00:00","Changed the IOCTLV_READ_DIR function to use the replacements list.
It will now decode entities of unsupported FAT32/NTSC/etc characters in filenames to be returned, so that games such as HP:HBP won't fail to find files containing such unsupported characters.

Unless there are still parts of code waiting for file name replacements, this should completely fix issue 3443...

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6791 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"d4158f076a1a595bf057f406ed14d86113d5917d","2011-01-09 14:09:27+00:00","Allocate low executable memory on OS X as on Windows and Linux.

Even with LoadStorePaired accounted for, there are still some
niggling 64-bit cleanliness bugs left that are not practical
to weed out on a single platform. We should probably have an
option to use >2GB memory only on all platforms for debugging.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6792 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"b7767b63a35ea8ea65bb5510db1471e813194391","2011-01-09 14:11:46+00:00","Generalize some __linux__ ifdefs for Unix/X11.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6793 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"d47d2a05d23a569c0e99bda101d8f9139e284790","2011-01-09 14:13:24+00:00","some little optimizations and some cleaning.
now lighting should be fully functional again in SM 2.0 cards

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6794 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"e6c87cbe3dec3e5638415dbbd5da601fc840fde4","2011-01-09 15:20:35+00:00","Oops.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6795 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"81638396c03c524454e661df50f7e440c8bdcc79","2011-01-09 16:36:19+00:00","Some more work on CMake on Windows:
- add support for precompiled headers with MSVC
- compile with _FILE_OFFSET_BITS=64 and _LARGEFILE_SOURCE only for our sources, some dependencies seem to have problems with it enabled...
- disable -Wall for MSVC too prevent warning flood
- rename aes_cbc.c and aes_core.c to cpp files since it makes stuff a lot easier and there's really no reason not to do it since they had been compiled as C++ before anyway

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6797 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"26d0f58aecd32795b1421c9c6225d3df4f7eb258","2011-01-09 19:39:43+00:00","The r5799 workaround is no longer necessary with r6792 + r6795.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6798 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"70f4dd9df389d8e286e13806237060ff48c21f98","2011-01-09 21:05:34+00:00","Lipo the ppc fat out of Cg to save some space.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6799 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"a92fd2b4a1edb75ef712439fb87296fc79e01f65","2011-01-09 21:15:44+00:00","Add simplified Chinese translations thanks to thegfw.
Add Korean translations thanks to Siegfried.
Updated German translations from JackyCola, revised with suggestions from LucasX.
Updated Polish translations by Baszta.

Also updated the windows language target.  We seriously need to find a way to get that target working for general users.  Probably by importing parts of gettext in the externals.  That way we don't need the maintain the mo files in svn.  It should be easy to implement this on OSX as gettext is in MacPorts.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6800 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"f49efa8868ed7435c01f139b91a69b8538494454","2011-01-10 03:03:03+00:00","LLE JIT: The block linker will now recompile all blocks that it encounters immediately.  Gives a speed boost in some games.  Also removed an extraneous check for external exceptions.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6801 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"f9e4e73e428ea0ce594fb2017272fc47d447f2fa","2011-01-10 13:14:56+00:00","Use SSSE3 shuffle for DataReader's DataReadU32xN in VideoCommon. The function is used for reading up to 16 u32's at a time (512-bits) and then converting endianness.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6802 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"601eab79e177dad76fadd405ae6383ed4c093aef","2011-01-10 16:18:41+00:00","Properly resize the GL canvas on window changes with USE_WX and wx 2.9.

Fixes issue 2524.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6803 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"83eed624496fe2efc0f8c903210b4ebe5a678b35","2011-01-10 19:26:36+00:00","Build mo translation files on all platforms.  Had to import msgfmt executable in the Externals to do this on windows.
Save wxLanguage enumeration value in ini file so that users are not surprised when a language is added and dolphin-emu is suddenly translated in a different language.
Update Spanish, Korean, and Simplified Chinese translations.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6804 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"795a22559bae2c11be4abab35b0c0ab0b931c657","2011-01-10 21:28:02+00:00","Fix Z Read precision on DirectX9 plugin, this fixes some stuff in Killer7 such as the one hit kill, and the bullets effect.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6805 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"08b2e766d62bc575094d654265c58cb43010fe46","2011-01-10 23:12:22+00:00","Fix install location of mo files on windows.
Add Japanese translations thanks to DanbSky.
Add Greek translations thanks to Link_to_the_past and gpower2.
Add Dutch translations thanks to MADCreations.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6806 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"d7b6766fe2f0467594efe79954195ce9b340c41e","2011-01-10 23:48:59+00:00","Fix cocoaGL window resizing.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6807 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"687d6d2b7eede9cb1649b46f583e59c16c990bb3","2011-01-11 00:07:22+00:00","wxWidgets 2.9.2 works with _('') strings for command-line arguments.

Optimize the OS X build for Core 2 CPU's.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6808 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"de407655042d615c9d288f639728487e1805e6c7","2011-01-11 01:29:24+00:00","Quick fix for DataReadU32xN_SSSE3. Should fix crashes caused by r6802.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6809 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"9bbed569d913abaf2e09fe5fb1404690ae4f3245","2011-01-11 02:18:34+00:00","Add the last few languages added to the windows build.
Make pthreads linkage precise for the nowx build.  Fixes issue 3875.
Fall back to pkg-config for gtk+-2.0 if cmake is version 2.8.2.  That version has a bug that doesn't detect gdk-pixbuf-2.0.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6810 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"d78be40be98600eff9c4531942d46616d8f9079b","2011-01-11 04:09:11+00:00","Print the performance status in exactly one place.

Placing the render window at position 0,0 makes it unmovable on OS X.

Use the conventional r1234 format for SVN revision numbers.

Delete mis-copied .svn directories from the application bundle.

Only warn about a failed low-memory allocation if one was requested.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6811 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"3f5d1afc6a3da567c9e8c56fed84a850e1d9bfd0","2011-01-11 04:54:35+00:00","Use alignment for ReadDataU32XN. Revert james temp fix.
Should provide some form of a speedup.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6812 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"bb725858eaead1ffab722e431a9a8c1be7276858","2011-01-11 05:38:12+00:00","Forgot to commit the alignment for opcode last time.
Also, alignment fix for dlist (thx cotton).

Hopefully no crashes now :)

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6813 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"9c09500a13e0ef2fcc2d7c9fc0468f1e2f76b73f","2011-01-11 05:48:22+00:00","For some reason the wxGLCanvas loses keyboard focus whenever the
full-screen mode is toggled, so we just re-set it afterwards.

Didn't mean to include the version string in the status bar updates.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6814 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"299f163d38aa10360a073885e64d796316d8dc6c","2011-01-11 07:25:36+00:00","Simplify the SSSE3 code for better understanding.
The end result is unchanged.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6815 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"5a175c16c393476498c18745727e34371e98bd63","2011-01-11 16:09:39+00:00","Fix the cmake version check for gtk.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6816 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"6de6cf6d466ba90aadc2ee08f260011c11576ab1","2011-01-11 16:19:15+00:00","Don't bother quickly flashing the full pathname to the file loaded
in the title bar. It is more usefully displayed using the overlay
and long pathnames are not suitable for title bars and probably not
even safe depending on the underlying windowing system.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6817 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"c13ffddea0b41b268cde30676cf4019680b30d33","2011-01-11 16:43:37+00:00","Fix wx 2.8 build.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6818 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"493d92eb2538ea290e1f25f96cd4d5240ce9fcad","2011-01-11 21:46:58+00:00","Sneak in a quick fix for the sun effect in Wind Waker and Mario Sunshine before anyone notice it's broken !

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6819 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"78ec77106373407720d3fdfde5627e1a43681796","2011-01-12 01:03:49+00:00","wxCmdLineEntryDesc has switched to char string in 2.9.
Use wxS to get the right string type on either 2.8 or 2.9.

Default to cmd-f for the fullscreen toggle hotkey on OS X.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6820 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"22d66f51a8920603eb918d8ed901f3fd108a1127","2011-01-12 01:27:01+00:00","Have wxWidgets install signal handlers to catch crashes
and disconnect any wiimotes.

The Windows code has special handling of both exceptions
and bluetooth connection state, neither of which I really
understand, so this is enabled on the other platforms only.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6821 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"559fb7434e404e81bf2c742f076a630cc6999d78","2011-01-12 04:06:49+00:00","Used SSSE3 instructions to swap16 and memcpy the DSP DMA transfers for a speed up

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6822 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"5255c35a1d18c8f4392f7057f7d3a0987a36a334","2011-01-12 05:43:06+00:00","Switched the DSP DMA transfers to unaligned versions of the SSSE3 instructions

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6823 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"542078c447d18b58c97acd3e7996e7b43b3fd968","2011-01-12 07:08:35+00:00","Added a SSSE3 version of the swap16 and memcpy used by the mixer

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6824 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"49a89c1739401676e9b6450f6e22bc924bc66ca4","2011-01-12 09:34:53+00:00","Build fix for OSX

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6825 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"a4dd8c41a81b758d223bfc18944d6489f1246f85","2011-01-12 13:14:50+00:00","Add a little hack to make it so panic alerts and questions can be translated if they are in the wxWidgets portion of the code, as well as make a few strings in the config dialog translatable.
Add Hungarian translations by Delirious.
Update Italian translations by RebuMan.
Update German translations by JackyCola and LucasX.
Update Greek translations by Gpower2.
Update Frensh translations by Pascal.
Make sure the game list is refreshed when the GC language is changed.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6826 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"ad2e6c60bcaa3e83a738a882ede8acd546329015","2011-01-12 13:38:41+00:00","Fix unresolved symbol cpu_info in the DSP plugins on linux.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6827 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"d5b7c5802edf0331b59f281c2e297a938939fd26","2011-01-12 16:24:18+00:00","Fixes issue 3907.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6828 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"fcd72bdba93791246445ea2650279c236d597553","2011-01-12 18:09:16+00:00","Fix the panic alert hack for windows and osx.  The macro needed to be defined after HAVE_WX is defined.  That explains why windows accepted the string concatenation that I thought it wouldn't.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6829 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"6cc41ba96c1b3d1fa6ebf28bbfdba2378e8e323e","2011-01-12 18:59:52+00:00","Workaround for a weird bug on 32-bit Linux that makes the Open dialog crash.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6831 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"96403e7284341db3bd0857e308d4c16d71da2c3b","2011-01-12 19:28:47+00:00","PanicAlert now needs a string literal as the first argument.

Some more Mac-ish hotkeys and a placeholder for da.po.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6832 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"dc99e13f1f3e67dd82c187c07a14dd81da2d67c7","2011-01-12 20:49:38+00:00","* Second look (mine) to italian translation
- note: big update, but incomplete again


- fixed a compiling error introduced in the previous revision

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6833 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"b15efb4d03e8bd20776d1faf2ca520ea4d0646b9","2011-01-12 21:13:44+00:00","+ some orthographic and lexical corrections about italian translation.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6834 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"343771d3929998e35dad8a5a7b13bea5ef1a3ce5","2011-01-12 21:21:15+00:00","Audio Mixer: Corrects reversed stereo in LLE and reversed stereo from DMA audio in HLE.

Fixes Issue 3713

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6835 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"9ed3862c0a7387adbe80125741c1e76de90eff77","2011-01-12 21:25:33+00:00","Executable memory above 2GB is okay on a 32-bit machine.

Fixes issue 3913.

The underlying problem, however, is that PanicAlert GUI popups
are broken on 32-bit Linux. I haven't looked into why that is.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6836 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"be5c7322540c2d65ffe81141dfacbcfdef2d09bf","2011-01-13 01:29:34+00:00","Quick fifo commit:

* Change the process ProcessAllDistace to ClearRegister
* Fix a bug in ProcessFifoEvents() in commandProcessro (thanks Skid)
-- The last 2 items should be improve the speed lost in r6572 and maybe improve a little bit because ProcessFifoEvents() is right. (Test car selection in GxZero)
* Alliviate Fifo desyncs, In the meant time I still Researching for real solution. (This fix RE0 again and maybe others
'FIFOs linked but out of sync' and 'GFX FIFO: Unknown Opcode (0x%x).\n' games suffers these for desync.)


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6837 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"c6e0ea59b98f9484f8525badacd30cdef3857ba4","2011-01-13 02:05:58+00:00","Removed my previous PanicAlert translation hack.  Fixed with a better method suggested by BhaaL.  The translation is done by a callback in the MsgHandler routine that is set at program start.  Added macros PanicAlertT, SuccessAlertT, PanicYesNoT, and AskYesNoT that are identical to the non T versions except those strings will be added by gettext to the po files to be translated.  These can and should be used anywhere in the code for strings that should be translated.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6838 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"6b572ecfa4b7b247c87d02f949a068d3cb0b0b4e","2011-01-13 03:46:34+00:00","Check DSP ROM hashes. Fix the ROMs not actually being write protected.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6839 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"3a8290a8253ecb3c19b9b91faac620edabca6edb","2011-01-13 15:32:14+00:00","Fix panic alert translations.  Windows is going to have to use the wxMsgHandler if it wants things to work.  The default handler has issues with translated strings.
Also updated several translation files thanks to the Dolphin translation team.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6840 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"984b0d14d2f5008440dfdbe4fe3a52c6d5ecf353","2011-01-13 20:53:37+00:00","Translate PanicAlert captions too.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6841 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"a747cb548c176dc4f612dcd497e05024886815b9","2011-01-14 00:15:08+00:00","Clean up translator callback.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6842 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"d0de395a46a5ad32282a0969b187d31694dc957c","2011-01-14 03:05:02+00:00","Finally got the input common strings figured out.  That pretty much finishes translations.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6843 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"f292f6d5a7ca5948054f5a7c685ce0d434966ee1","2011-01-14 05:06:08+00:00","Accept arbitrary HID devices as gamepads instead of using SDL,
which has too narrow a view of what constitutes a joystick.

Now if only I could find my Apple IR Remote.. :-)


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6844 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"b0d2df0bad4d62f7d9977dfb1ac4358986e576df","2011-01-14 07:08:12+00:00","HLE jump to loader (homebrew)

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6845 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"3cba9afe7944fde767bbfae260ec6168b23e726c","2011-01-14 12:08:45+00:00","dsp cleaning

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6846 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"c99f0d03a43d383b0afc8b3a603c10f0c9f2d47c","2011-01-14 15:09:30+00:00","Make sure that configuration dialog titles for the plugins are translated and a few other missed strings.
Initialize locale in each of the plugins on windows so that the plugin configuration dialogs are translated and the translators will get off my back.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6847 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"fb1ebd80225fefc591583b8c70ac45f01bab3142","2011-01-14 18:00:25+00:00","Core/DSPCore: Consolidation of register accesses(except for the four hw
stacks), addition of a register cache(currently accumulators on 64bit only).

It feels a bit slower, but the numbers are about the same.
Caching accumulators doesn't change speed either.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6848 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"8ad402cddeca91aa2db4fe587f27b041b569f433","2011-01-14 18:25:25+00:00","Mark wiimote extension strings for translation.
Update French, Polish, and Korean languages thanks to Pascal, Baszta, and Siegfried, resp.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6849 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"2d1b84febe7722d58eb3f01bb3933448072b9669","2011-01-14 19:27:18+00:00","Fix tooltip translation in the Video config dialog.
Fix Pad 1-4 and Wiimote 1-4 translation in the input dialogs.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6850 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"8ef79e0af8b8d767ec31cd5b4454ffaf2e18a596","2011-01-15 02:30:36+00:00","Fix a few strings that weren't being translated properly.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6851 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"e429d75489b959e13fd7d15f0c9a30122e56a9fd","2011-01-15 10:33:07+00:00","Clean up nowx and stop cocoaApp busy-waiting in the main loop.

Set up an exit(3) task to shut down real wiimotes. This shouldn't
really be necessary, but we do currently handle a number of error
conditions by calling exit(3).

Retire the inputuicommon library.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6852 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"85db30554efef4a2783d1d6193cedfd385ef57d0","2011-01-15 11:05:22+00:00","Don't bother with a separate NSApplication thread.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6853 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"0c6e78fd7b0d8db627ae931366863833c019f936","2011-01-15 11:05:50+00:00","Gah, forgot another file.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6854 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"8c0f17eece43c4108cf0b7b0fa22eba4520a321c","2011-01-15 14:36:32+00:00","Fix OS X build.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6855 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"2add956cbad2a10ea736cefe21d139822ec94f01","2011-01-15 15:48:04+00:00","Make the 'IR Sensitivity' slider work on linux.  Also clean up the appearance of the Audio config dialogs on linux and OSX a bit.  It doesn't change the appearance on windows.
Mark a couple of strings for translation that were missed before.
Update some of the languages from the translators.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6856 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"2cb5a1aa565bdc31e50b216d3b7b13e92a16ed98","2011-01-15 21:16:13+00:00","HID reports can use negative numbers.

Use UTF-8 for input device names and profile filenames.
From8Bit->To8Bit is not transparent.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6857 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"7e9f02869ac7cfa412ed6ef866f5ebb233a84c6f","2011-01-16 06:24:48+00:00","LLE JIT: Changed the ASM dispatcher so that it jumps to the blocks instead of calling them.  This removes the need to push and pop all of the registers at each block, speeding up the JIT.  Changed the cycle counting to work off memory accesses instead of a register.  Removed the C++ JIT dispatcher because it will no longer work with this new format.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6858 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"f9f7629268f921a3414249162b5420ad26b14dbb","2011-01-16 10:47:29+00:00","Fixed the DSPLLE on thread option.  Works with DSP JIT, DSP Interpreter, AX and Zelda ucodes.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6859 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"e3d7e39b3e2ed43fc6820148c1a811d3c0b1deb6","2011-01-16 11:13:23+00:00","Added a critical section around the external_interrupt_waiting variable, to be safe.  Also, commit a file I missed in r6859.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6860 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"2911658d50b7921d54129347dacf518d6682ca4d","2011-01-16 12:18:34+00:00","Fixed the window size changing slightly each time the game window is maximised or changed to full-screen mode.  Fixes issue 3916.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6861 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"7e612a613a2c99501c4304562c5af698193231e3","2011-01-16 16:18:11+00:00","Added Brazilian Portuguese translations thanks to coffeeholic, Runo, and Thiagorowof.
Updated Polish translations by Baszta.
Updated Russian translations thanks to Firnis.
Updated French translations thanks to Pascal.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6862 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"4a7d3ee1c8f959558fabb0a014bed7b8d3105854","2011-01-16 17:00:17+00:00","Deal with 'hat' switches.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6863 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"4f5211cc3972e6eda369e1d225bf0ee77ffb9fd2","2011-01-16 17:56:26+00:00","Cast size_t to unsigned long for printing.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6864 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"bc3565341d7512a05d89f6e8e8ef74d439073a85","2011-01-16 20:04:06+00:00","Begin USBGecko. Kinda works already, need to make a checkpoint before making the socket stuff better.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6865 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"1b5c614d0e8897e6d65ef20234b715e98175cc39","2011-01-16 20:14:16+00:00","maintenance

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6866 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"254cb161f4bbbf0b51b75d42c511aa1550f6a9f1","2011-01-16 20:21:25+00:00","Update SConscript for osx too.  Also update some of the languages and add Brazilian Portuguese to the windows build.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6867 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"df3aecafef68d0c5857e05f7d17d90ab5281c6d2","2011-01-17 01:47:27+00:00","Remove some dead code.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6868 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"d89d73077887f2c263b5c5f2f1d40afd8b398bf2","2011-01-17 04:29:23+00:00","add tw/twi to Jit64

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6869 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"fdd56f46217c956b9bf001d9deaa862f3011ecc9","2011-01-17 07:44:21+00:00","commit some crappy threading code for usbgecko

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6870 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"d0805aef37fdd7a7ff7fd38f81911a7f00edb86a","2011-01-17 08:31:19+00:00","Fix calling thread::waitfordeath twice in usbgecko/gba

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6871 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"1a3cd2d34cb9f4127b1f1ae3e38f7563eed39a02","2011-01-18 00:04:29+00:00","Remove the __APPLE__ workaround for reading config files from a ctor.

'#' is a fairly accepted comment character for .ini files along with
the more official ';', but '//' isn't.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6872 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"c24cedc03baf815a79cba9760b91dd0622a67057","2011-01-18 05:59:38+00:00","fixes for jit64 twx

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6873 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"279664df7ba97d99a4e118f055e8b6fdcf776086","2011-01-18 14:14:10+00:00","some adjustments in Normal loading to improve lighting in dx9.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6874 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"974670e6bdc50dda2f6eb6b32ac7da88b30d0f83","2011-01-18 17:07:16+00:00","- Italian translation update

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6875 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"b1c6f959d95454762fb5b4453f76f3a6dee32cc6","2011-01-18 17:48:49+00:00","clean a little my last commit and improve accuracy.
thanks to hrydgard and neobrain for the comments

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6876 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"afebc0d1d3cf123e99e0d8c227de601399c17a7e","2011-01-19 02:17:11+00:00","Allow usbgecko to try a range of ports, such that multiple dolphin instances will setup their servers on consecutive ports starting at 55020.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6877 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"83cff0fa63e442ce05700559909f44312f4de4ff","2011-01-19 02:46:18+00:00","Compile fix.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6878 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"f4dc56d553a544bea25d1d3105bce9bddbfad4a0","2011-01-19 03:47:01+00:00","usbgecko:
add some nice messages for SE LED commands.
allow exi communication even if there is no tcp client.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6879 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"5aa34d04835f856ce1543c3a6942d275e2f8a328","2011-01-19 08:13:15+00:00","Added the fake decrementer to the save state.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6880 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"0416a1b5675a777b3db9b75952a1ec022d45605f","2011-01-19 13:57:15+00:00","rework the normal loading now it should be a accurate as real hardware.
more accurate means more slow so no complains about speed lost, will optimize later.
please test for regression, but i hope you will get a nice surprise about this commit :).

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6881 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"6de5f6c3d19849cac8a81fcd79d05cc87f014169","2011-01-19 15:32:33+00:00","little fix for my last commit

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6882 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"ff06b4c817a95ea3c7123faf17a280a1fba389cd","2011-01-20 03:02:51+00:00","Unmark a few strings that should not be translated.
Updated Greek, French, Japanese, Portuguese (Brazilian), Russian translations.
Added Turkish translations thanks to nlgzrgn.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6883 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"82422371f307c307f471147dd850b45175b7064d","2011-01-20 03:26:51+00:00","Allow opening a file and starting Dolphin on OS X by clicking
a document icon.

Don't bother creating the game list until after an automatic
start has finished and with the -b option, not at all.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6884 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"bf2bb00f63b8abd28b7ebea6ac377593c1d76486","2011-01-20 05:06:29+00:00","Disable the default PIC generation on OS X. This might make for a
minor performance improvement and also possibly make that platform a
little less prone to problems with ABI assumptions in the JIT code,
although I haven't measured the first or seen signs of the latter.

Only the GL context needs to be specifically freed when shutting
down OpenGL. The GL canvas is implicitly freed by wxWindow.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6885 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"7b3e58b6655c2281c0160aa8ab6c8e67293ff9ad","2011-01-20 05:29:18+00:00","Fix an issue where additional gamecube controllers were configured and not saved when dolphin is
translated.  Fixes issue 3936.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6886 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"58cb35fe0178ab2ede898f68672fbc99b2eb737e","2011-01-20 06:05:52+00:00","Fix for the error Cannot Convert from charset Windows Japanese cp 932

caused by logwindow initializing the sjisconv in its constructor on systems which do not have the codepage installed (vlite)
fixes issue 3659

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6887 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"12249296a1815d04d5353dd99d1c8ac7173546e4","2011-01-20 08:34:49+00:00","Added an option in the game properties to disable the VBeam speed hack.  This option may fix games which currently have an unusual FPS rate.  For example, this option fixes the crackly audio in Tales of Symphonia.  Leave this option turned off unless you're noticing problems related to the FPS rate because it might slow down the emulator.

Removed the Alternate RFI option as it is no longer needed.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6888 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"46844174090fb659228539e34cfdc95faed5963a","2011-01-20 21:37:00+00:00","Only update the game list when there may be changes to it.
When just starting and stopping emulation, just hide/show it,
but only if necessary because we are rendering to the main window.

Fixes issue 3460.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6889 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"7834880925f91d845283babece4a020bdb80d505","2011-01-21 02:56:54+00:00","Make sure the game list gets created with automatic starts.

When rendering to the main window, the wxGLCanvas should really
be owned by the DolphinWX code for it to be safely freed.
Hack around the problem by just hiding the canvas for now.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6890 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"f08563efd9ce016363cbe2e5e0b1e0cf8e38ea94","2011-01-21 16:54:37+00:00","wxHandleFatalExceptions is an optional wx feature.

Fixes issue 3962.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6891 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"17d9888f3ca51b0c682861ee20d1a912ac18ad4e","2011-01-21 17:40:53+00:00","Use the LLVM branch of gcc, which produces better code.

Suggested by celgilles.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6892 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"392a589092270cf75d2669f071fd9fd15b78613c","2011-01-22 02:18:25+00:00","Drop support for building on OS X 10.5. It is too much hassle to
work around the limitations of the no longer maintained Xcode 3.1.4
for Leopard. Running a 10.6-built app on 10.5 works fine through
through the use of the 10.5 SDK.

std::locale() seems to be the generally safer way to specify the
default locale and works on Linux and OS X at least. Thanks to
dasmetzelmaennchen for the pointer.

Remove some obsolete SCons related svn:ignores.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6893 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"fecf10173b12bd24ab896c02231f3bcc40665392","2011-01-22 03:57:03+00:00","Use std::locale() on OS X and std::locale('') elsewhere.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6894 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"1f722be0569057bd9337a7c91f17ba571ace144e","2011-01-22 18:19:42+00:00","Add a hack to match the *.* wildcard in a file search on non windows platforms.  This fixes Metroid Other M on linux, and probably other games.  Fixes issue 3966.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6895 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"a291fcca083357707c2f689187ffe7764d5f7e48","2011-01-23 01:07:53+00:00","- Trying to recover lost stability in DX9 plug-in

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6896 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"9749d617d054b12a3507eba88b3e466bb913c35c","2011-01-23 03:28:05+00:00","VBeam emulation

* Fixed audio sync
* Fixed frame-limiter
* Fixed the cursor not showing in SMG
* Reworded the option to 'Accurate VBeam emulation'


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6897 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"7cd7c2838be2266c598b60cb10638fb3679ae3fc","2011-01-23 15:29:57+00:00","2 fixes one for dx9 and one for software plugin.
some little optimization to normal loading.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6898 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"9f480124421ab66c2d6729e5393aa3891aa21c7e","2011-01-23 21:28:04+00:00","Inform SCons of the svnrev.h dependency so it isn't subject
to a race with the creation of Build/foo/Source/Common/Src.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6899 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"e53c8188c0dfd5b565d2d9696708a3a86660b06a","2011-01-24 00:26:39+00:00","Update Cg.framework to version 3.0.0015.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6900 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"a4e338b37999398dc2e07919bec9393be252de2d","2011-01-24 04:42:34+00:00","fixed a couple of problems with UpdateFPSDisplay (DX9) (though it's a trivial fix somebody else was probably about to make)

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6901 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"e0b757fe6ab56f95b4d8d884a204aad48d6ac823","2011-01-24 08:44:32+00:00","DX11 code maintenance, part 1:
Move sampler state/shader resource management from EmuGfxState to Renderer.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6902 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"50c1baf8de025a5f0c748868a968b859b29fd4fd","2011-01-24 09:10:35+00:00","DX11 code maintenance, part 2:
Move depth state management from EmuGfxState to Renderer.
Call stateman->Apply in Renderer::ApplyState instead of EmuGfxState::ApplyState.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6903 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"cd5a2e4cc5fafc85343da629b805dc9797008866","2011-01-24 09:27:16+00:00","DX11 code maintenance, part 3:
Move rasterizer state management from EmuGfxState to Renderer.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6904 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"e0c609272110d543941693e3ec6cd8fc0e0934f1","2011-01-24 10:42:43+00:00","DX11 code maintenance, part 4:
Move blend state management from EmuGfxState to Renderer.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6905 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"f33cd7cbbd3daefe8e12593d19e2eb310a10069f","2011-01-24 11:57:17+00:00","DX11 code maintenance, part 5:
Move shader and input layout management from EmuGfxState to Vertex/PixelShaderCache and D3DVertexFormat.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6906 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"d2544158df0fe190ab72f6e2b266c3ebe6d0f0c4","2011-01-24 17:27:04+00:00","Fix the 'Adjust window size' option on linux.  Previously this option caused flickering when using render to main, and an application hang when stopping emulation via the GUI Stop button.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6907 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"470ed118f5ea353bbdf011a6552848563d043034","2011-01-24 21:26:39+00:00","little fix for issue 3976.
some optimization for vertex color loading, please test  for any change in game color, this is a optimization so nothing should change :)

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6908 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"d3b8908a7cec54dc638564cbf40576dfc1a3fb93","2011-01-24 21:54:19+00:00","Make CDolLoader a bit more c++ish, make wii dols be detected by the presence of a mfspr x, HID4.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6909 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"3ce1f73f73894d17c418b83ccf7c4c45c693e39d","2011-01-25 03:30:12+00:00","Migrate the 'Adjust window size' option to the main configuration dialog (under the 'Display' tab, in 'Emulator Display Settings', after 'Window Size').  Also rework the way that the option works.  When using render to main and the auto resize option, the application window will be resized and then resized back when the emulator stops.  This looks much better than the box in the corner look before.  Also only resize when it would actually change the size of the window.  This fixes the hang on emulation stop on linux.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6910 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"4c47fd0d49dbc264384e81b20eda6f01b8e5f9ad","2011-01-25 03:45:44+00:00","revert my optimizations until i fix some errors and really fix issue 3976

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6911 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"efa9e81ca02816291e2d0dbff6fb4232b588b0bc","2011-01-25 05:57:49+00:00","buildfix

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6912 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"d2044a7a237f6d57c75893f7c7d3f5dc29b239d1","2011-01-25 11:14:11+00:00","Removed extra space character in 'Use FPS For Limiting'. Changed 'Frame Stepping' to 'Frame Advance'. Some minor preprocessor cleanup.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6913 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"81aebe5e9642fccccd6ed712d80d29ae2d0ddcee","2011-01-25 12:52:20+00:00","Fix the nogui build.  Don't show the Xrandr logs in release builds.  Fix flickering in fullscreen when using the auto window size option and not rendering to main.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6914 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"cd6f00a3e58ccb81b94a2d1415da75c212c44389","2011-01-25 15:08:30+00:00","DX11 code maintenance, part 6:
Move constant buffer management from EmuGfxState to Vertex/PixelShaderCache.
Finally remove the EmuGfxState class, cheers!

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6915 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"994913ce078edbabcd73bc03836c96fc325c99ad","2011-01-25 16:43:08+00:00","DX11 code maintenance, part 7:
Header cleanups. If anything, this will decrease compile time.. :P

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6916 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"4c704be0ed4fe51e90ab5d6bbcff611604b0c4b1","2011-01-25 22:30:15+00:00","second try, a compilable :) fix for issue 3976 and some  optimizations to color loading that will not mess with colors.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6917 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"5e814ff2cd1167d646077b7e9fe0330584a4dd00","2011-01-25 23:30:58+00:00","Enabled save-state support for the DSP LLE plug-in.

Disabled the SUBARN jitted instruction because it is causing issues with the NTSC IPL.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6918 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"926a4cee1728639072d9288075df372053001651","2011-01-25 23:44:06+00:00","fix wad loading (broken by r6909)

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6919 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"e153da1c9dbc64025f25ac3097a5b4ba3a59805b","2011-01-26 01:41:34+00:00","Disabled the JIT'd version of SUBARN

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6920 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"71d93bdbc82263e36aace25c117a570564b251a0","2011-01-26 03:00:00+00:00","little fix for my last commit

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6921 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"fd6711d82c0e9eae26c4424097b28e92dd09d105","2011-01-26 04:11:20+00:00","Added Traditional Chinese translations thanks to khiav.
Updated several of the other language translations thanks to the growing Dolphin translation team.
Make it easier for translators to deal with a few strings in the code by not concatenating strings.



git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6922 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"4856cbeace14523a033ddaf09384f29968a235ea","2011-01-26 04:15:43+00:00","Oops, forgot to add the Traditional Chinese translation file, and forgot to add it to the windows build.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6923 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"d7e877bb0badda5ad50fc2c6f54eda32d4e58ec1","2011-01-26 17:22:09+00:00","little fix for one piece unlimited cruise 2 and ju-on the grudge

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6924 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"48b7658c8aa49f5567dce0d4b0699761e206400c","2011-01-26 21:27:26+00:00","Detect cpu features AVX and AES, both are present on Sandy Bridge. For future use :P

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6925 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"c79195c4e468d0cb10b245ddd7d5920f3fa15ab8","2011-01-26 22:54:20+00:00","dsp: minor optimization.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6926 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"cbc520a70ab0f646988e4c5e3f06017eb92d4f80","2011-01-27 00:14:29+00:00","Committing Visual Studio 2010 solution/project files. (not switching from 2008 just yet, just making 2010 an option) Still need to add a 'DebugFast' config and change optimization settings.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6927 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"826e37a279648e2666132c14e443e07f3f0410b3","2011-01-27 01:05:24+00:00","Actually fix issue 3659.
check for cp932 using ::IsValidCodePage before creating the wxCSConv
if it is possible for linux distro or mac to remove the euc_jap cp from install a similar check may be added in WxUtils.cpp

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6928 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"0288742565d355e2968ace988f9b17a2a41703b1","2011-01-27 05:01:00+00:00","Various minor fixes to allow building with clang on OS X.

Fixes issue 3992.

wxWidgets patch at http://trac.wxwidgets.org/ticket/12332 .


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6929 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"622af438f77604060ba055eced58bbd96fa18d93","2011-01-27 10:17:13+00:00","Fixed the black (alpha) textures in the 8ing games like Tatsunoko vs Capcom and the Naruto series when using the OpenGL plug-in.  Thanks to jim.lee for the tip.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6930 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"66cd497dfe2e224d047ec375d0e3290a478890e8","2011-01-27 10:41:26+00:00","Added 'DebugFast' configs to vs2010 projects. Removed solution folders.(vs express doesn't like them)

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6931 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"0371f15c23bf9fb64941e3adbc72b80f955e2ff5","2011-01-27 17:01:24+00:00","DX9: Only enable dst alpha pass if the EFB format has an alpha channel.
Guess it would be better if we made bpmem.blendmode.alphaupdate private to prevent improper usage...

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6932 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"2c05c49a04aa838047417825c289958efb59ee3c","2011-01-27 20:47:58+00:00","Replaced Common::Thread with a partial implementation of std::thread. (rvalue references are used if available, <thread> is used if possible) Eliminates the need to use dynamic memory allocation for threads, so it's impossible to forget to delete a thread or set a pointer to NULL. Enables use of type-safe thread functions, no need to cast to and from void*. I've made sure the code compiles in vs08 and tested the functionality of 'StdThread.h' on Linux so I'm hoping everything will work :p. In the future 'StdThread.h' can be removed (maybe when OS X ships with gcc 4.4 and vs2015 is released :p).

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6933 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"0b90f720735c6596d8acc11d7fe5105b31b6313f","2011-01-27 21:34:37+00:00","Forgot about some Linux files using Common::Thread

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6934 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"955e3abe9e132786646fd9c4d5575ac0ff35c149","2011-01-27 21:57:36+00:00","Clean out the long since bit-rotted video profiling code.

Profiler.{cpp,h} also happened to be the only dupliated
filenames left in Source, the absence of which should make
link-time optimization easier to get working.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6935 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"7a80769640501b99c282bd3ebf88969687c0da07","2011-01-27 21:59:59+00:00","Missed a few files in previous.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6936 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"1c7ca86940ee4fc8862067376ddaafa2c56b3a94","2011-01-27 22:20:30+00:00","Gah, missed still more files.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6937 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"198dcccfb0281cf07333bda40535c0ae6603b1ba","2011-01-27 22:48:46+00:00","Linux build fix.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6938 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"ee6d20e83a22107148e3c6facba78abeac8e3fca","2011-01-27 22:52:17+00:00","build fixin'

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6939 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"179fb38716272e16cad1c0bcda852cced3ed6809","2011-01-27 23:00:29+00:00","Deleted a return that should not have been deleted.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6940 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"72d604d3f2cec5473eebbd40f5e903f8f6f2104b","2011-01-27 23:59:12+00:00","r6928 redux
removes memleak in exchange for 2 additional calls to ::IsValidCodePage

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6941 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"2a7f305d455f1c4c5ce655cff62089b428dabe67","2011-01-28 00:53:30+00:00","Some preliminary cleanup of the global namespace for LTO.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6942 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"cb91be81ed25bf3e504f40a7678996cdca69b18f","2011-01-28 03:48:53+00:00","Fix wiimote thread issues.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6943 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"fec3daf71354f96167aded6bb50e4b158a61aba7","2011-01-28 04:13:46+00:00","Create valid vertex shader when using emboss mapping and binormals and tangents are missing. Fixes issue 2867.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6944 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"f281eff9badb4fffd77e2f16502b0e42d74e4411","2011-01-28 05:24:47+00:00","Merge the real wiimote threads into the Wiimote class.  Put windows back to the crude Shutdown/Initialize refresh method so they can have the rumble on refresh and know their wiimotes are still connected.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6945 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"976420b9d5ac8fce3b3f46678d72df321eba1975","2011-01-28 09:39:28+00:00","Vertical sync on OS X.

Fixes issue 3996.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6946 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"419d6a244b8c059c447ce63c6e406de4b97dfc76","2011-01-28 18:39:30+00:00","DSP plugin merge - the two DSP plugins are now gone and all the code has been merged into Dolphin.
This WILL temporarily break the Linux and MacOSX builds but should be easy to fix.

Things left to do:
* The UI on the new Audio tab for the LLE/HLE choice is ugly
* At times the code still look 'plugin-y' and needs cleanup
* The two plugins should be merged further. DSPHLE should use the emulated memory etc of DSPLLE as much as possible, so that simply saving the DSPLLE state is enough. This would also bring the possibility of savestate compatibility between the two plugins.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6947 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"d61a79266a98b684dbf7ca38f466f946d2477c57","2011-01-28 19:31:46+00:00","dsphle cleanup: Get rid of now-useless 'DSPHandler' layer

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6948 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"0df636ca393d42a032736de0dba48410990c6b2d","2011-01-28 19:55:21+00:00","a little more cleanup.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6949 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"f28304197065d90bbb7fa787be7677c9089812e6","2011-01-28 20:07:32+00:00","Linux build fix.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6950 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"08b923a1639e5545a700e5cf231c362ae9906d9d","2011-01-28 21:27:49+00:00","Fix OS X build.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6951 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"46d00f211ffb183788fb9d38cc795e9734994601","2011-01-28 21:37:15+00:00","looks like soren forgot this

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6952 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"a63cfd033fbed3b2b26b6169adee767e6e088a5b","2011-01-28 21:39:23+00:00","delete more old stuff

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6953 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"a2959b96c22245be452cadd8c58d10f92f8fe746","2011-01-29 00:30:13+00:00","DSPLLE - JIT SUBARN is back on and should be fixed.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6954 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"a8e2e9ec5405d4df2a5c10221c5179765a8bb9e0","2011-01-29 04:16:05+00:00","Fix the Audio tab and merge the DSP config into one.
Unify the DSP settings into DSP.ini

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6955 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"64af8abcaebf48e183897908f434896f3432bb53","2011-01-29 04:23:52+00:00","Just the usual build fix.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6956 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"4c58c7ea031d518f3bbb936fc8f97fa2aad878a3","2011-01-29 04:31:56+00:00","initial implementation of fog range adjust, I don't think is correct or work right but is a start.
some tweaks and fixes.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6957 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"1bcad428eacd4931d62374f0f4ad349b2a6eff48","2011-01-29 04:52:19+00:00","Link the video plugin statically into the main binary on OS X.

This makes the OS X build more robust and should help pave the
way for the integration of the video plugins as well as LTO.

There are now no more global class level namespace conflicts left,
as evidenced by the fact that Dolphin can be linked with -all_load,
not that you would want to.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6958 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"d002a97575bee2daf4f64f1eb250c6bc25c50fab","2011-01-29 05:08:52+00:00","RTLD_SELF is a recent addition on Linux.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6959 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"779d434843d2fe31b60d933fad3cbd06b77fd920","2011-01-29 05:31:27+00:00","r6958 removes the need for the hackery in r6946.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6960 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"45024133e2aae56846bd19c3a584bac84044e467","2011-01-29 06:09:56+00:00","Remove vertex format converter from software plugin because it is not needed as of r6881. Maybe fix z range adjustment.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6961 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"9b3920d1a91e7d6c594ab8368d877fe1a3d8d1ca","2011-01-29 06:26:03+00:00","Explicit dependency on libvideo.

Back out r6960 for now. The wxGLCanvas may need to be persistent
and owned by DolphinWX in the rendertomain case.

Disambiguate SWVideoConfig.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6962 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"fa95b7d89fe06735f151a3335fa19e5a70cc0934","2011-01-29 08:11:49+00:00","The OS X build now requires a little less compiler/linker magic
to maintain 10.5 runtime compatibility.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6963 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"d5e5730fef5b3e0dbc650fbda31008625c53dd7a","2011-01-29 08:34:57+00:00","If perspective divide is enabled and texture coordinate Z is 0 then leave texture coordinates alone. Fixes issue 3676.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6964 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"1287a9bb9fcce6b62e5cf5bc4b3b18136c234893","2011-01-29 11:40:20+00:00","Be a little more careful about the use of SSE.

We really need to adopt the GCC model of one instruction set
per compilation unit.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6965 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"10675ba3c02295cb61f785840ac75e8e65cfb549","2011-01-29 13:26:49+00:00","Apply kostamarino's patch to let you select DSPHLE per game.

yeah we need something more generic for this, to make all options per-game somehow..

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6966 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"b3a183dffefc1cb1701ee2a8a2cbe0080774aced","2011-01-29 14:06:48+00:00","Core and DSPCore now have mutual dependencies, which breaks the
assumption on the part of many linkers that static libraries make
up a DAG, so merge libdspcore into libcore.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6967 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"a22d807bf0761a0309219022133208dc4c593b2e","2011-01-29 14:58:32+00:00","Try to fix Windows build.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6968 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"1f8a1f85608b35b0cba6b2b6e97fbf69de8008ca","2011-01-29 15:58:50+00:00","Build fixing plus some cleanup i had been doing

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6969 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"a767de8e09a918ea04391374b41d8d556b898b90","2011-01-29 17:04:09+00:00","some fixes to dlist caching, now most of the remaining glitches should be fixed

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6970 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"fb35a83d2c9b81a7c745e09e6c25a7770f80f442","2011-01-29 20:04:16+00:00","- Fixed Metroid Prime 2 'GFX FIFO: Unknown Opcode (0x%x).\n' This was happened because FIFO_RESET is executed, but at this moment the Write Gather Pipe is not empty. (maybe also fix the same problem reported in MP1, i dont have this game for testing)
- Reimplemented AbortFrame. Now the  Write Gather Pipe buffer is reseted and Read Write Distances is reseted before the game do it instead  the  process all GP CPRWDistance for prevent CP wrong pointers.
This fifo reset should be more accurate, efficient and smooth the FPS when happens. Please, test regresion of SMG1 and SMG2 or others games with FIFO RESETS.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6971 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"7f97ce79bbf11dfa9d28f8844c7567566aa9c7d4","2011-01-29 20:16:51+00:00","Put some stuff in the gfx plugins into namespaces, so that the symbols won't collide if someone decides to merge the gfx plugins into dolphin too. still more things left to do though.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6972 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"3078db08c7e5d8b176a3af9855d22f99d1e3f1bb","2011-01-29 21:13:56+00:00","* Changed the Projection Hack option in game properties to  'Custom Projection Hack'
- dislocating all sensible stuff related to 'values per game/pattern' outside the sourcecode.
- giving more control to end-users across the user-friendly interface.
- deleting/cleaning some dead variables.
- updating all gameconfig.ini data to reflect new PHack concept (pending upload).

* Updated Italian translation
- Includes corrections, a better strings translating and suggestions directly by Google Code's people.

+ Minor old pending changes...

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6973 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"c0571ae9de432654d79254922132ab12f09c8167","2011-01-29 21:26:46+00:00","Improve for my last commit, also reset the VideoBuffer and Forget turn on GPReadEnable. If this is not enoughs for GC games. I will replace CPReadWriteDistance = 0 for ProcessFifoAllDistance.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6974 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"043e32478924689aed232423e4f3dd0fa6bcba9a","2011-01-29 22:48:33+00:00","A few compiler warnings.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6975 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"d1e0b6b4ef7a19eb781e84695e91e90d4758612d","2011-01-29 22:53:00+00:00","little correction

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6976 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"2e4fae2b80f0abdff6258b3c9fd102bf943ca8b6","2011-01-29 23:40:55+00:00","- adjust alignment/spacing to 'Extra Parameter' checkbox in game properties

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6977 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"2de87423688423cb96d445ca358cde3c3593ca9a","2011-01-29 23:46:26+00:00","Equip any new threads with an NSAutoreleasePool.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6978 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"c23663620f8b8f8417d9b7b125272fd7d658e8e1","2011-01-30 00:05:00+00:00","- Projection Hack disabled internally because it breaks all games (tomorrow I check better my bad nonsense)

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6979 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"25af2ae9b8cd2334bfd9a16a9ef229d70d6bc898","2011-01-30 00:56:33+00:00","* All is fixed now about Custom Projection Hack (problem was inverted memmber)
- added support to DX11

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6980 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"f57cfc7c6fb59243cb80d9d1146e7a43f0ab9eac","2011-01-30 01:58:54+00:00","Virtual base classes should have a virtual destructor.

Build a libdolphinwx. Just fooling around with LTO..


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6981 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"25716f067c8dd17109fc158877f1e2d5e77f13f6","2011-01-30 02:27:44+00:00","Revert to Cg.framework 3.0.0007. 3.0.0015 has problems.

Fixes issue 4009.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6982 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"aa410c8eea7ca21d74ae43f6185145e7035418fe","2011-01-30 05:46:19+00:00","Enumerate identically named input devices.

Fixes issue 3929.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6984 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"f41e5b3b858d549d6a5aaea1684669eb81dd8587","2011-01-30 08:12:34+00:00","Guard against controller instances without any inputs.

Clean up OS X keyboard key names.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6985 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"2622f86eb6f61c03d66371ee0bf749aa9b9a836b","2011-01-30 14:20:20+00:00","Be more flexible about hotkey modifier permutations.

Open .ini files with TextEdit on OS X since wx has no binding.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6986 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"864d24a86e796ca53243786286d0dd8ec18d4733","2011-01-30 14:30:50+00:00","Oops.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6987 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"db1765c4256fc7990347870e0862bc764f7a7398","2011-01-30 16:40:38+00:00","Move async checking for pressed keys into Host_GetKeyState()
and use wxGetKeyState on platforms other than Windows.

I am not sure if wxGetKeyState is unreliable on Windows or if
the use of GetAsyncKeyState() is simply historical, but for now
I've left the Windows call in there just in case.

This does mean that Host_GetKeyState() is currently only valid
for the small set of keycodes that overlap between wx and Win32,
one of which is VK_TAB/WXK_TAB.

Anyway, please test wxGetKeyState on Windows and remove the
ifdef if it works, so we can extend it to the remaining hotkeys.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6988 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"cde1c5bd60dc738ce30b2ace5cdbadb264db2a34","2011-01-30 17:04:12+00:00","Remove the PIC linker flag for DSP on linux.
Fix some debugger issues.  Still need to get sound window working, but the invalid id panic alert is fixed.
Also, a ';' as a comment in an ini file is now only allowed at the beginning of a line.  The debugger has settings strings with semicolons in them.  That completely broke the debugger.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6989 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"76719bac45032dfc3b31f133cb9dbf011b201078","2011-01-30 17:58:02+00:00","Terminate a C string.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6990 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"4e74a58c2a5aad528255d26be92111657c6ae3a7","2011-01-30 19:27:46+00:00","Build fix: a bogus include was added in r6988.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6991 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"7a4c203f691f9d976edb81b872c0e7eab6969bfa","2011-01-30 21:20:33+00:00","Fixed a small threading issue introduced by r6933 causing savestates to always freeze, thanks to artart78 for pinpointing the issue.
Properly pause the core when saving/loading savestates, previously we used PowerPC::Pause() and Start() which only update the state but doesn't properly set m_StepEvent and caused random hangs.
Fixed hang when creating a savestate while the game was paused or in Frame Advance mode, now the thing works (just remember to press play duh).

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6992 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"274f84b2947f4d05bfa81c76a41f08984e05835e","2011-01-30 21:26:29+00:00","oops, Fix a wrong comment.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6993 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"216cf0fd6a1befae3cdf4c8e57eb15f415ffaf8a","2011-01-30 22:02:47+00:00","Update several of the translations.
Update pot file to reflect recent changes in strings in the code.
Make the Host_GetKeyState routine thread safe on linux.
Clean up config main, and migrate the plugin selection to the display tab.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6994 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"ae7c64ec134799183487adb5104c6908cf282240","2011-01-31 00:33:09+00:00","Clean some DSP code, Fixes issue 4011.
Move some GUI code around for no apparent reason.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6995 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"fbaf9659958cd6d8c0df6b0c217f6e60f57f9d77","2011-01-31 01:28:32+00:00","Eliminated the plugin interface. Merged DX9/DX11/OGL video plugins into Dolphin. It could still use a lot of cleanup. Lots of things are still named 'plugin'. Software renderer is temporarily disabled until it gets some namespaces. I only updated vs08/10, Linux/OSX builds are broken.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6996 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"18bb65b3002fb3ad3ba277f5207da8741b8fd089","2011-01-31 01:53:57+00:00","Fix OS X build.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6997 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"cb48f5969a177dcc197783baa1a11493b61fc7d2","2011-01-31 02:11:13+00:00","Fix DSP config button.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6998 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"f1e8da63ec8b5e0725b79ad63b635b2328a4e615","2011-01-31 02:13:10+00:00","Linux build fix.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@6999 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"1ee18ff146a889aea899434e68793b54d5572a68","2011-01-31 02:38:36+00:00","Added support for JIT multithreaded compilation in both CPU and DSP cores this gives up to 78% speedup in some scenarios such as when looking at a corner in Zelda or the menus in Super Puzzle Bobble.
Added SSE optimizations to JIT LLE, up to 136% speedup observed in Resident Evil games.
Rewrote the GUI to make it more user friendly, added a User friendly Setup.
Also Billiard please: learn to merge.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7000 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"fec5ed92ff123babcd0a3ab3e3c356bde71d9edc","2011-01-31 02:39:25+00:00","Revive the GFX debugger window.  Turns out to be considerably easier than the DSPLLE debugger window.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7001 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"8822674653141081bfc6697f572f2118a8081db3","2011-01-31 03:02:23+00:00","Fix *BSD build.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7002 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"1eac26e63f152a50787e4ef71c47ad8b5da27d5b","2011-01-31 03:15:14+00:00","Fix nowx build.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7003 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"1c8bd68a6a7b1d5fd914419025ea57a19af40e0a","2011-01-31 03:16:10+00:00","Linux build fix.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7004 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"7a6c9df8eafd79dcda5e888ce2799dd5e4695976","2011-01-31 03:30:24+00:00","Fix Windows build.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7005 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"424b8fd6b3e16a9bc404be7c85ff50cdf2f8c673","2011-01-31 03:58:18+00:00","Fix *BSD build.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7006 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"b6251ba674f3e70d777bc80075a8facd7859dc72","2011-01-31 04:36:49+00:00","Fix the DSPLLE debugger window.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7007 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"bbe8675923a853218e770521678822e4de5001d8","2011-01-31 04:44:08+00:00","Forgot a couple of things.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7008 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"5fb56318edeaaad0727c2c1f008b0e5980299cb6","2011-01-31 05:19:29+00:00","Revert 7008 until I have time to figure out how to do that without including wxWidgets in the core.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7009 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"0e91e5b23816def56daf699d6d07434d54fc5da3","2011-01-31 06:08:46+00:00","fix windows (vs2010) build

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7010 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"e0e4a3ae02e2419f4ea2a92393c9cc446515e5f6","2011-01-31 07:38:36+00:00","Allow changing the fullscreen resolution on OS X.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7011 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"7ae1340179e27d5f6853377eee653727104cd6e3","2011-01-31 07:51:37+00:00","vs2010 add filters for everything (...except wxw projects...). Try to fix SVNRevGen, but I'm not sure it's working...

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7012 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"3b36e0657140a8f54729f55f94ad108547362ed5","2011-01-31 07:58:59+00:00","svn eol-style:native on the filters...

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7013 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"67a4ac0bf67d9299fb19575ccf5fc2034a8da9fd","2011-01-31 08:14:28+00:00","VS2010: Actually make SVNRevGen be processed all the time. Had to add a dummy output file, or VS would ignore it.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7014 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"1de40588acd0bfa6d49e3d94fef2cbd6dc09f6e5","2011-01-31 08:19:27+00:00","Eliminate some trampoline functions.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7015 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"c5d61c0a9a5d164c6bbd19d1cc2947604f65315f","2011-01-31 08:53:08+00:00","vs2010: buildfix for debugfast, silence all C4996 warnings.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7016 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"5beb892d65f69686033d6092a243f43401d0cd43","2011-01-31 09:10:18+00:00","VS2008 build fix

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7017 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"84f26a1afc339102bb704e5d51663f0ded789fbc","2011-01-31 09:25:42+00:00","vs2010 wxw project filters, converted from vs08 projects.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7018 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"47d182657e56da0c708daf8bf2197ec6a1fefd4d","2011-01-31 13:17:57+00:00","D3D9: Fix anisotropic filtering.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7019 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"ad71303007767bb5f536406708c316de798db024","2011-01-31 14:25:50+00:00","Fix the DSPLLE debugger window refresh without including wxWidgets in the core.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7020 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"51eae3f41abeea9fdbdd2ad218b568d4412f3c8f","2011-01-31 14:34:46+00:00","Capture the display before switching the display resolution so other
windows under the fullscreen one won't get resized to fit a lower
fullscreen resolution.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7021 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"118d623a184b8573360450f5df58086bcaa4cd60","2011-01-31 15:53:54+00:00","vs2010:
fix all build targets (they've all built here - you may have to manually delete the intermediate directories if you have conflicts after this commit).
set the debug path to $(TargetDir)

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7022 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"044157be5f1e80c212c5b97e4634b31e008e2cd9","2011-01-31 17:15:21+00:00","Finally get tooltips in config main to work on linux.  When controls are contained in a wxStaticTextBox they must be created before the wxStaticTextBox is created, otherwise tooltips don't work.  This is probably a bug in wxWidgets.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7023 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"d92188a0f9969ca1ef1d0be50b859440a348f749","2011-01-31 17:52:46+00:00","Tooltips in the graphics config dialog now work on linux.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7024 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"d6e784121ffe0301067ca189d698054debe9d90a","2011-01-31 20:30:25+00:00","* Changes about recent Custom PHack implementation
- Usability enhancement: Added Presets



git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7025 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"d932bdf480b8e3d9a331b79de5a4dd45aeba864c","2011-01-31 22:19:30+00:00","Fix the rest of the tooltips for linux.
Also remove some unneeded linkage since the merge.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7026 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"27a3e533f4b4dde597302d9587a6099031f935e6","2011-02-01 01:42:30+00:00","Change the *totally estimated* aram dma latency to a value which doesn't cause pops in Metroid Prime, and yet still allows WWE:DoR to get ingame. I'm pretty sure I tried this value before, however it only started working since dsp was merged into core... :)
fixes issue 4025

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7027 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"1c6572faa7ed72ebae947933a0a03787b947f2bb","2011-02-01 02:22:15+00:00","Put the list of locales in the bundle plist to make wxLANGUAGE_DEFAULT work.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7028 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"1b288dcdde35ec985bf57c7ec9e2402144e6dbab","2011-02-01 02:50:19+00:00","Linux and windows build fix.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7029 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"53ae9e9e8fdb932e4f89aa3d6727e0d8231ffc5c","2011-02-01 04:20:51+00:00","Fixed vs2010 SVNRevGen project. (Also changed 'make_svnrev.h.vbs' to jscript and gave it some comments :p) Removed some old plugin stuff.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7030 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"0d426e3972731684fd194354fd8a41aef18d8363","2011-02-01 04:35:25+00:00","Fix the auto window resize option to take into account if the log/console window is open.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7031 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"af9ef060c042b23a349b76045c27844f3787a234","2011-02-01 04:45:29+00:00","vs2010: Enable LTCG only for release builds.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7032 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"8779ab06a8ee18060739f6dc0e07cb384050c8d3","2011-02-01 05:30:27+00:00","Add the translation files to the MSVC 2010 build.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7033 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"2542c8da6bc0211f420b9af4d09b114008cfa6fa","2011-02-01 07:05:30+00:00","buildfixin'

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7034 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"f2f9df90e12001a5b413d90aa50eaa0ce689394e","2011-02-01 07:34:08+00:00","VS2008 build fix

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7035 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"4223ebc8d2bd25c62e7823eea73749925f5fb84d","2011-02-01 20:21:24+00:00","Fix a hang on emulation shutdown on linux.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7036 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"0f0adb4aeeb7f61d86f16ff5bb675e2d4c703484","2011-02-02 02:05:57+00:00","* Quick CPUID fix
- this should fix a detecting problem related to some AMD CPU


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7037 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"ebc8f02885eeee26cbd62a0931fd94c141524ea0","2011-02-02 04:08:52+00:00","* Better fix for CPUID (and this time is the right time)

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7038 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"8b309e26dc00c354e0fc71fa6ac9b6990f79710a","2011-02-02 04:40:27+00:00","Remove PluginSpecs.h.  Merge the few needed enums from that file into Common.h for now.  I am up for suggestions on a better place for those.
Fix frame dumping on linux.
Make sure that on screen messages get cleared between games.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7039 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"6f93d771065a59513e90244f3256d18444b4ad25","2011-02-02 14:47:45+00:00","Fixed the DSP JIT timing when it is executing in a thread.  This allows the Zelda ucode games to run when the 'DSPLLE on thread' option has been enabled.  However, the DSP Interpreter still hangs when this option is enabled.

* Tightened the timing between the CPU and the DSP in thread mode so that it works closer to how the non-threaded mode works.  The CPU now waits for all of the DSP cycles to be exhausted before adding more cycles.
* DSP Idle skipping has been disabled as it messes up the timing when it is running in a thread.
* Checked for external interrupt requests before entering the dispatcher and inside the dispatcher loop
* Added a critical section around the mailbox read high function

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7040 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"5a800b765a8144289f1d05020b50c5815f281eca","2011-02-02 16:34:12+00:00","Some more work on renaming variables and files to reflect that the plugins are no longer plugins.
Fix another minor issue with frame dumping.
Add the graphics config dialog button back to the main config.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7041 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"9a975705bff532d3a81651145a08e056b0410f8d","2011-02-02 17:09:39+00:00","Fix nogui build, and fix a minor issue with the GFX config dialogs when backends are changed.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7042 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"9c21d003af3dc9654a9b302c3085253d55cab20e","2011-02-02 18:21:20+00:00","Remove the global namespace a bit and remove some dead code.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7043 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"39b1ade020157a8bbc9b51453c54a3faccf71495","2011-02-02 20:00:24+00:00","Hopefully fix Windows build.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7044 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"a3ba93d9ce31c96570bf0b80ac9728ef98e93e77","2011-02-02 21:52:43+00:00","Thread affinity on OS X and *BSD.

Keep building the software plugin to prevent rot.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7045 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"dc938548959a9129af65624bd7e0b6db81b91b0a","2011-02-03 06:01:34+00:00","log only when ::IsValidCodePage() fails (r6941)
fix debug/debugfast build on windows

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7046 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"109a1dcd662139b00e69fd7908594dfd18f5d84f","2011-02-03 06:03:31+00:00","really fix debug/debugfast build

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7047 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"d5550c19fd9b27b5fa4dbae3c7babe8b9dc0d29a","2011-02-03 08:12:47+00:00","Temporarily disable gecko codes when they fail to avoid infinite error messages.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7048 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"439baff4ccec3074d09da35897b87205b3990cac","2011-02-03 17:51:12+00:00","- Moving 'Custom Projection Hack' stuff toward a new modal dialog window

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7049 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"1619e176ff70ad8b47a6dd4fcb4b8721e0c528bf","2011-02-03 19:55:30+00:00","Use brute force to link the software plugin.

Not yet functional.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7050 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"dfe84ce0acf288157a867f0df1678930b281fd40","2011-02-03 20:41:23+00:00","Removed the Lua script console and Externals/Lua. The script console was incomplete and no one was working on it.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7051 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"435b25fa55b56e52508776672d8fee8d407f813b","2011-02-03 21:11:06+00:00","Fix the CMake build.

Prevent the PS3 HID crash until I can debug it.

AudioUnits are enabled by default.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7052 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"ac3f2d9c19a5cccb20ec53a39dbba0c803b15395","2011-02-03 21:35:26+00:00","Remove OpenAL for windows.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7053 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"10e2a7b66823d38e826a41816ee5826fd17a31be","2011-02-03 21:42:56+00:00","should fix build for legacy windows build system...

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7054 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"e2b3716760fbfa1b6141a7506d0fab4aa5723082","2011-02-03 21:55:29+00:00","vs2010: fix videosoftware build

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7055 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"6d70c14d12a5f60a94dce365f3ce911504de7b83","2011-02-04 00:46:56+00:00","In the SCons build, skip the generation of static libraries
and just operate on lists of object files instead.

This helps with LTO since LLVM/clang LTO is completely broken
by static libraries. It also helps identify symbol clashes
between components like the former plugins.

Many linkers also expect static libraries to form a strict DAG
which turns out be a difficult rule to uphold in practice,
especially since some of our platforms aren't picky about this.

LTO builds currently appears to crash at runtime because of
the static wx libs.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7056 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"cc289a05bb1a038a15b6ab2a1b62e9ca85875e1a","2011-02-04 01:02:06+00:00","Turn back on unit tests in SCons.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7057 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"9c1a182cca73b4dbb68ad1c401c737ce32602df0","2011-02-04 01:37:45+00:00","- Fixing Windows builds

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7058 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"d5f6d2bbae57e972d8ecc9b7a3d5684ca637dbb7","2011-02-04 04:54:25+00:00","Change the audio sample rate setting to a numerical value.  Fixes issue 4045.  You may have to change the setting once after this commit to update your ini file from the string that was saved there before.
Update translation pot file to reflect recent gui changes, and update a few of the languages.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7059 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"d698e022f5fc54376323333431aeaa00fd56b074","2011-02-04 08:37:58+00:00","Changed the hash algorithm to CRC32 utilising the SSE4.2 instruction.  The algorithm will automatically be used for the Accurate Texture Cache, EFB to RAM and texture id's when a SSE4.2 capable CPU is detected.  It will fallback to the old algorithm if SSE4.2 is not detected.  Using CRC32 speeds up the hash algorithm by around 2X.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7060 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"91ff420ed659195cc3e18575beb9dca611452432","2011-02-04 17:00:34+00:00","D3D11: Implement EFB format reinterpretation.
Now someone port this to OpenGL please, kthxbye.

Fix some warnings, fix a wrong string, ...

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7061 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"1339c06d6e1cb5cf0d2671440e3517f044efaccf","2011-02-04 17:31:58+00:00","D3D9: Some fixes to EFB format reinterpretation. Should be more correct now.
Might fix issue 3780.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7062 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"f7d757b46eaa271e7f58e1c61df4fb34b5ff47f9","2011-02-04 18:15:14+00:00","D3D9: Offset vertices used to copy textures by 0.5.

I __think__ this is the actually correct way to do it, but not sure. Someone please have a look at this...
Not sure if this changes anything anyway, since we're using scissor rects to clip this stuff anyway... Maybe the screen edges weren't cleaned properly before though.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7063 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"cd9e6a8d23a830d45f6f6b39c5ced27bb568dcfc","2011-02-04 22:51:17+00:00","Change the recent speedup to the hashing function to fall back to the old version for custom textures.

Re-fixed custom textures higher than 1024x1024. (It must have accidentally got reverted somewhere during the video plugin merge)

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7064 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"d5df148fc293d6587e9800c9cdbebcb51131e150","2011-02-04 23:12:29+00:00","vs2010: small fixups to vcxproj files.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7065 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"d29b3e612ae7f4e5025e67f26d4f8190e0a77b71","2011-02-04 23:44:11+00:00","* Italian translation update

+ some little GUI adjustements

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7066 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"253fc3a16ebdfa7af971b85c7e7c36b5c4180afa","2011-02-05 00:07:27+00:00","Ops I had forgotten...

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7067 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"40ac272691fe3f8cc02e566ee145327b5af1ce1e","2011-02-05 00:31:35+00:00","32-bit fix.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7068 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"f34aaf747181972867b159a829c43ab3e6fd17cb","2011-02-05 02:13:33+00:00","* fixed a GUI displaying bug for post processing shaders when switching between plugins

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7069 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"a46117219b422eb3aca7f38f5716dd1a287667cc","2011-02-05 03:20:31+00:00","vs2010: fix some linker warnings from wxw

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7070 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"9aa8af08dab7f871ef86073ce73f5f28526a1611","2011-02-05 03:54:59+00:00","vs2010: fix ogl build...

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7071 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"843e8b5f54e20277a29bb1f0ee5be93dd30360bd","2011-02-05 04:09:37+00:00","vs2010: fix videosoftware build by not requiring Cg dependency (through OGL...)

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7072 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"ce004d4db984cbc69d89e2ee8c870b74db18a4cd","2011-02-05 04:21:42+00:00","update GLew to 1.5.8 Fixes issue 4049

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7073 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"4a20647ab6c8fb230a938ea4e106b6d7198ca26b","2011-02-05 04:47:16+00:00","update libjpeg to 8c

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7074 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"0841be0feaf64db3f456c03f9571ea39be7ef06d","2011-02-05 04:59:33+00:00","Update miniLZO to 2.0.4. Apparently fixes a bug when used with gcc 4.5

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7075 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"2d3a7b41556d83e8fcac67c1b2c2d58d8879f7dd","2011-02-05 05:29:27+00:00","update zlib to 1.2.5
'Version 1.2.5 fixes bugs in gzseek() and gzeof() that were present in version 1.2.4 (March 2010). All users are encouraged to upgrade immediately.'
...

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7076 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"d6eb1bb97a7adc89e9ca1bb48a93fd45bbe0d2a6","2011-02-05 05:52:42+00:00","actually do what i said for the r7071 log, sorry about that...

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7077 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"7fc40de8c7384a93a4dd2be596a3a38eee3447fd","2011-02-05 05:55:12+00:00","update Cg on windows to 3.0 November 2010...I tested it and didn't see the problems mentioned in issue 4009.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7078 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"20e2046fe180acf5e8034c7ff035ecf4acbc9c34","2011-02-05 07:51:15+00:00","vs2010: get rid of some more wxw-related linker warnings.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7079 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"888cd787248839377c56a4d4db64bced3b3fa028","2011-02-05 10:08:06+00:00","Changes to hi-res textures. Textures now load correctly when loading/saving a savestate, and can be toggled on and off in game.

Changed non-hi-res textures to use MurmurHash3, which has better performance that the previous hash.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7080 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"04fcd9499a0e83b19c27c8b2b16830147d87714b","2011-02-05 10:14:05+00:00","Whoops, forgot to remove that.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7081 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"98e24f587368272e867fe09c39fb11d4550e7e3e","2011-02-05 16:06:05+00:00","The compiler need not obey the static keyword, so to avoid linker
problems, whole functions in .h files need to also be static in
case they are included in several .cpp files.

Also a few other minor LTO fixes.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7082 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"c36ed08cfcfdb94708d1b32081808f58eb87f1b1","2011-02-05 18:25:34+00:00","Rework XF register loading a bit and change how registers are arranged in memory. This removes the assumption that all data for a viewport or projection matrix will be available when index 0 is loaded. Fixes issue 3688 and probably breaks old save states (sorry).


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7083 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"3201b61b5285c4426b7f0ba8da19d1a1dfd4d20d","2011-02-05 20:14:23+00:00","LTCG (link time code gen) was off in some projects, so turn it off in all of them so that the linker doesn't have to restart halfway through.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7084 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"1f4206116327de8209174b216d70c2bbf3f0ec10","2011-02-05 20:28:23+00:00","fix silly string in CPUDetect

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7085 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"17e28a19cdf556cabc003baec87ec40e87305621","2011-02-05 21:43:04+00:00","* Keeping resolution aligned to back-buffer size if the latter one is changed (can give a huge performance boost... even until to 100% in some cases)

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7086 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"986cd817de58aa28547a20db3562dbcf3bf44e66","2011-02-05 22:32:20+00:00","D3D9: Fix 2x anisotropic filtering...

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7087 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"35edf1b2368afcfc55f597c1e207fcd84c035a05","2011-02-05 23:57:12+00:00","Split shader code generation for lighting into a separate file.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7088 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"0f7ff9c23efffdcbdbc1cd3e4584a68588dd8130","2011-02-06 01:56:45+00:00","Deal with some clang-inspired buglets.

Respect the initial fullscreen setting in nowx.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7089 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"89594b173111b1185babe65ea9b5d596cc443458","2011-02-06 05:42:58+00:00","Automatically disconnect and reconnect the Wiimotes after a save state has been loaded.  This makes the save states a bit more stable for Wii games.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7090 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"145559424c401dd0a083b61aa4a7fc5b9b925f81","2011-02-06 08:05:18+00:00","Fixed the new texture hashing functions to take samples into consideration. Fixes issue 4058

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7091 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"d93dc23e77b84b2e4a4cb31e7479b28c2bae1f88","2011-02-06 15:02:26+00:00","Modal dialogs must be closed with EndModal() or all kinds of weird
corruption can happen with wx 2.9.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7092 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"c7783fe01582ee88257b4432bb7d9ec26337863b","2011-02-06 15:15:00+00:00","Oops, remember to save plugin settings in both close cases.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7093 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"2b2f060cdf78f27e8c7bc3c30f476808fb292dd5","2011-02-06 18:29:01+00:00","OGL: Fix wireframe rendering.
Fixes issue 4062.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7094 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"6391393c06dff877efc6ec614ba7221709a63d0c","2011-02-06 18:43:56+00:00","D3D9: Fix wireframe rendering.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7095 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"9bbd5b9157339ef6c60636df3cc90c1c894da088","2011-02-07 15:51:38+00:00","Small fix for cmake on osx, more work left to be done


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7096 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"bba19bb36b47d1450829564a62fda3b1d2541427","2011-02-07 18:25:55+00:00","* CPUID changes:
- Added full ability to recognize true Intel HTT CPU capability (support to discriminate Intel Core 2 Duo...)
- Attempt to fix a register trashing (issue 4022 generally, linux and mac systems)

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7097 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"b1a63e3e8e467d8e5d05118edf04a9e414e8dea8","2011-02-07 18:35:01+00:00","- CPUID 2nd Attempt

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7098 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"a4754956cb6e04bae3626fe9dc40021efba09195","2011-02-07 19:08:19+00:00","- CPUID
restored inline assembly code

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7099 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"d373258517900511af1073479398d38a49437ee0","2011-02-07 20:14:22+00:00","- CPUID asm changes for x64 systems.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7100 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"05ef2c1337a2c38b99738074c83babf2dee9400b","2011-02-07 20:19:21+00:00","- again CPUID :D

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7101 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"795cf08bbfe64b2e2c441803559b585b764fcf00","2011-02-07 20:31:28+00:00","CPU... (yes)..ID  -.-'

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7102 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"f48c2832941d2568e1cb250890c83287dcaac094","2011-02-07 21:03:10+00:00","- CPUID

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7103 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"d83d129c38c7d38167f9bd3af0d08f6e7bf3ea85","2011-02-07 22:01:08+00:00","Reach over for Plugin_VideoOGL's copy of GLUtil.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7104 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"fa15389b174188c56c2a8471ecb8605dbaae1b4a","2011-02-07 22:35:46+00:00","some little fixes for dlist caching, maybe a little speed up but nothing great, please test for regressions.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7105 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"fc370c51364f459706e2c1157f789988fc182f3a","2011-02-08 00:28:28+00:00","Experimental commit: this is the base for a more complex dlist control code, is incomplete but i need some feedback.
whit this code hashing is completely disabled for the dlists content itself this must bring some fps more but i must know if this causes any glitches.
i suspect that no game modify the content of the dlist so hash is time wasted but the only way to test it is with this commit.
please test as many games s you can and give me feedback for any glitch.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7106 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"f0adc3adb46cb74b71bc2c95d82a4c0662f65d9a","2011-02-08 01:11:11+00:00","Speed back to dolpihn: - Revert Read16 CPRead fifo hack for fix RE0. This hack only solve RE0 but brings slowdown in games like RE Umbrella, etc. - Move isFifoBusy again in the fifo loop and use s_fifoIdleEvent for AbortFrame. Note: if you can play RE0 only deactivate PanicAlert. These opdecoding error seems harmless. Some day this wiil be fixed in right way.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7107 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"1f0663c1a870ccf3928bd24f27613a1e0f154abb","2011-02-08 03:47:59+00:00","Defer texture invalidation to the video thread from the video configuration dialog. Should fix issue 4069

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7108 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"a34b81cc01feca9fbec02bc765853f5c583cb9ad","2011-02-08 04:03:48+00:00","vs2010:
buildfix
move much of the build settings to .props files
-please use them as much as possible in the future, instead of changing individual projects
NOTE: to avoid left over blobs, clean your builds *before* applying these changes.
TODO: add DebugFast target for projects that are lacking it. Lack of DebugFast targets cause the linker to use LTCG when we don't want it.
please test for regressions which could be caused by being too happy with compiler flags :)

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7109 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"39d176adab0480789f9a81e75b89bd3870ba2343","2011-02-08 07:08:19+00:00","vs2010: quiet wxwidgets warnings

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7110 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"90bae5d57f7248f409e735dc41326c0ceda50c63","2011-02-08 07:45:46+00:00","A bit more cmake osx work


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7111 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"855f97841dffcc2bd75f8c0f6cdb48c2d42a8f08","2011-02-08 10:37:47+00:00","Paused the video thread while a save state was being created or loaded.  Performed the save state operation after the fifo became idle.  Saved the interrupt status of the video thread into the save state.  This helps stabilise the save states in dual core mode in games like Super Mario Galaxy.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7112 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"8c41d31651924e7cab5123eedfd5d994e672acbe","2011-02-08 11:02:34+00:00","Fix Plugin_VideoSoftware build.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7113 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"00c35451f607e479db47b25ddac50d0d18507a9d","2011-02-08 12:00:41+00:00","second step in dlist optimizations: test the hashes only when the cpu could change the contents of the dlist, this is after it been processed, or at frame finish.
this is marcos idea so the credits go to him.
please test the broken games in my last commits to see if this solve all the issues.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7114 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"c163237d6fc588b2b7fe5afd6e987254169e63c7","2011-02-08 12:26:47+00:00","Check for wxWidgets 2.9.2 (trunk really) which the OS X build now requires.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7115 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"b567e8fb31651800bc48d60e759b3afacb480c39","2011-02-08 12:35:43+00:00","Another OSX cmake fix (make openal compile)


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7116 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"1f1c9132a6bd69a94e6f4c280bd2e4cddb3dbf37","2011-02-08 14:51:53+00:00","revert some some of the soren changes to make dolphin compile in vs2008 again until sw plugin is completely fixed.
some correction to dlist caching

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7117 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"dbd381755b96568edfd56810ea8cd6be175062cf","2011-02-08 15:30:32+00:00","Externals build framework for wxWidgets 2.9.2+.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7118 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"42908c5b2eb4556a8fd058ef43b6cdf67d97444f","2011-02-08 15:36:15+00:00","Remove any wx-specific code from Core.
Move NetPlay code from DolphinWX to Core.
Even NetPlay with nowx should be possible now if anyone felt like implementing a CLI for it ;)


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7119 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"0c188bfcebb6f0ff6608bd7cf67c170a785c2536","2011-02-08 16:01:34+00:00","Fix wiimotes :P

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7120 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"edfb62a41fb0ca5eb6fff6365d34a9ca007ba663","2011-02-09 03:12:05+00:00","Change to the 1.3 part of the Xrandr api for fullscreen mode switching on linux to support multiple monitor setups.  There is probably some more work to be done, but at least it won't shut off one of your monitors anymore.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7121 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"464d352d46ac2cbf5cc16adc2556d2bff424d74c","2011-02-10 02:53:08+00:00","vs2010: add debugfast configs for all projects except wxw...will do those soon.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7122 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"86278642dcc80065297ba019d9adb60dbf11f868","2011-02-10 04:47:02+00:00","Experimental commit and one fix for my last commit.
I think that isFifoBusy bring better sync with VI (video interface) because the CPU emulated threads are waiting for DrawDone in BP Register. So, I do some modifications.
1) Rename 'IsFifoBusy' by 'isPossibleWaitingSetDrawDone'
2) Only activate isPossibleWaitingSetDrawDone when bFF_GPLinkEnable is true in fifo loop 'Inmediate mode' that is because in theory this drawsync function is using in this mode.
3) Deactivate isPossibleWaitingSetDrawDone also in SetFinish in PixelEngine, beside when 32 block is finish.

Please regression in yours games thats can bring some FPS more above all with VPS frame limiter ON (Auto, 60, 50, etc).

- Fix waiting in AbortFrame(), please test mp1/mp2 is fixed again.

Good look!

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7123 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"daf023f4a0e345efcd3d8fbb658f2ac9784475f7","2011-02-10 06:31:12+00:00","vs2010: add debugfast configs for wxw (now debugfast links faster!). clean up wxw projects a lot.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7124 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"af139f4661185ceb6d2c016e2ba3cdd1034a5aa7","2011-02-10 12:56:21+00:00","Used usleep(1) instead of _mm_pause on Linux and Mac OSX.  This reduces the CPU usage in the video thread's idle loop. Added YieldCPU to the DSP LLE loop.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7125 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"b8e6ea14e11866efbf14e3757a0c92c5cdad412f","2011-02-11 00:31:37+00:00","fix sd commands 0x40 and 0x41. thanks to tueidj for the test.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7126 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"8e911838972c8d4707ec563dfac04dadb590f90f","2011-02-11 02:38:23+00:00","Add Portuguese translations thanks to Zilaan.
Update several of the other languages.
Fix those pesky DSPIntUtil.h compiler errors.
Clean up some remnants of building the plugins in the primary CMakeLists.txt file.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7127 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"22553bd6251e889f5f6e2d1a5c89c86e44f66bce","2011-02-11 12:26:15+00:00","Added a frame counter while recording or playing back a TAS movie.  Forced the GC/Wii to poll from the inputs at regular intervals.  Disabled frame skip in record/playback mode.  This helps the emulator to be determinate.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7128 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"e480ab2b104b1f5b801e82c62c2011e90dbf2b6f","2011-02-11 15:43:05+00:00","drop vs2008 projects in favor of vs2010

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7129 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"ca78d3639ba621a99e325c919f6cbb2a46596990","2011-02-11 18:53:51+00:00","Implement Wii input recording.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7130 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"b0fa0a83f8a370e3661de3c06fce85e53973f189","2011-02-11 18:59:42+00:00","* Dump AVI output on every VI (fixes issue #4064).
* Add audio dumping (fixes issue #1638).


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7131 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"caad098b69dd0dc1118e87c4d80813eb1a2762e2","2011-02-11 19:09:46+00:00","Recordings store information about which Wiimotes are actually in use.  (Slight modification to a patch by Toad King.)


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7132 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"16c4ffd89bfc3fad9ec9fd9b6e71ad469d41eee3","2011-02-11 20:10:22+00:00","OGL plugin: Include AVIDump.h unconditionally in Render.h so that Linux builds without libav don't break.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7133 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"6cbaa360a1e8f3695a716173ac32e99a97d75fd4","2011-02-11 21:07:51+00:00","Fix frame dumping for linux.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7134 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"cb832f22989a0e92c1f68c3b0331f5cf3714dda2","2011-02-11 21:30:53+00:00","Make sure the audio dump directory exists when dumping audio.  Otherwise a segmentation fault ensues after several panic alerts.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7135 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"efd22d234f231c710e5a669dc1d836692214c07c","2011-02-11 21:37:52+00:00","Merge UI related projects into the main DolphinWX project.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7136 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"cf6632c0f1874623aaeab0c95381076ab22f5127","2011-02-11 21:47:18+00:00","Fix SCons build.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7137 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"c45a4306494da14cfeedab8d010874883a337c50","2011-02-11 21:49:29+00:00","Fix the cmake build.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7138 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"cecef62c8cd2a1f43447665012e2b8d900478fd3","2011-02-11 22:09:20+00:00","For non-win32 and with-libav conditions, add an option to frame dumping to use FFV1 codec for lossless video dumping.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7139 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"b9ace6d5010ecdebb3f657d938c36f4cb1b8a616","2011-02-11 22:27:50+00:00","windows: buildfix for non-release configs

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7140 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"6912f0a18c45522309f72c78465895af79321979","2011-02-12 00:06:58+00:00","Fix crash on loading savestate with an input movie attatched to it in Gamecube games.

Fixed Gamecube controllers being disconnected for a couple ingame seconds when loading a savestate with an input movie attatched.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7141 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"0d110c41d9d39c33589d7ea441c34c9deed0a71b","2011-02-12 02:14:20+00:00","Updates to rerecording behaviour:
* Frame counter is restored properly post-load.
* 'Read-only mode' menu option added.  Currently this either causes the movie file to be closed at the end of playback (if enabled) or continues recording past end of playback (if disabled).
* Can now properly resume recording from a state saved during movie playback.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7142 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"00daea0ec9437dfb74f956d09e6ad45803b1b9ab","2011-02-12 02:40:31+00:00","build fix for Win32 for previous commit (sorry guys)


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7143 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"4b69ef369015a9b9618d2a4284f7977a05b7417d","2011-02-12 03:01:54+00:00","add includes to OnFrame.cpp, also have it use the right file (ref previous two commits)


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7144 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"e867341e4fed91c33e003644f6c5ae3b8f75a51c","2011-02-12 06:46:33+00:00","Added hotkeys for most of the commands available in the File and Emulation menus.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7145 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"8895d6a2509b5283c0c31bd5ca0b36c008f0ff9c","2011-02-12 07:09:49+00:00","Make hotkey dialogue display in two columns.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7146 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"94d02a23de83f87cd57a5347c24addcec4eeaaf8","2011-02-12 08:25:09+00:00","Tweaks to Wii rerecording for general stability and reliability.
* Better control over which Wiimotes save/load input from input files (general sync improvement).
* Wiimote save stores the ACLQ, allowing maintaining control across save/load (thanks to skid for the idea).
* Wiimote reconnect on save/load now an option - enabled by default to preserve present behaviour.  Disabling this allows the above change to be effective.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7147 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"7753937e314fe00abbf1daf291a42a3fd3b9192d","2011-02-12 09:10:11+00:00","Integrate helper functions from VideoSoftware's VideoConfigDialog
into the shared VideoConfigDiag.

Clean up the list of hotkey defaults a little.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7148 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"642aa59b7e3953a3241b2b7643a486af4b15f99e","2011-02-12 09:45:33+00:00","Fix bug wherein the 'reconnect on load' checkbox wasn't actually connected to the core setting.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7149 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"94176c02a86e3bf623596ec2c5ffdce0c93318db","2011-02-12 16:07:40+00:00","Remove a few easily delineated components from the wx 2.9.2+ build.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7150 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"e81ccd7f33a3bac7453f63008c8343cc02ebaa57","2011-02-12 18:40:02+00:00","Common: Change cpuid code again

Looks like compilers tend to use EBX for parameters if not told otherwise and
don't bother to update SP in leaf functions, so PUSH/POP kill local variables.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7151 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"bc6f04adae92648e94f334ebf61fcdbcba249ccc","2011-02-12 21:25:49+00:00","Move BootManager.cpp to Core since it really doesn't do any wx-specific stuff.

This one is for NaturalViolence, since he was so eager to see it :P

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7152 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"ced7336d27fcf63d3f569d4517f4f418e2d6236e","2011-02-12 21:29:51+00:00","wx-less: This time WITH the files of awesomeness!

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7153 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"8b166a3c6a2e919a0d57915f4460b345e78bf0a7","2011-02-12 21:47:14+00:00","Fix scons build.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7154 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"5b75a59d2a84c5710b9a3f16076b70d6233ae793","2011-02-12 22:31:57+00:00","Allow building with wxgtk 2.9.2 in Externals.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7155 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"2eeaae576ce113bc754fe4fc9a562e6c794dc18a","2011-02-13 01:49:20+00:00","Fix for LLE audio dumping to report correct sample rate in output file.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7156 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"0bf25c91abefa14e94310b71556d5c21201ee850","2011-02-13 02:01:31+00:00","Have Wiimote update call Frame::SetPolledDevice() so that recordings can track lag frames.  (At present, the circumstances in which there actually would be a frame where input isn't polled elude me, but might as well be complete.)


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7157 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"05feabdb49cf4547cd016855a778ff3b2de5e40e","2011-02-13 02:21:11+00:00","- Reimplemented FifoReset in other way, only call to GPFifo::ResetGatherPipe() ResetVideoBuffer() in FIFO_RW_DISTANCE_LO when this is equal to '0'
- In the Command Processor Control Register when GPReadEnable is OFF, wait until the fifo lopp finish with thi actual 32 bytes block. This is necessary to have Safe Disabble GP Read in this way AbortFrame is performed by the software, beside this can help to have accurate GPReadEnable OFF.
Please test Metroid Prime 1/2, Guilty Gear XX, X men gc, SMG, and shuffle you can test Harry Potter Prince for WII. :)

PD: The fifo code need a clean very soon.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7158 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"cd9ec1805aba9475447c47d488029bd840e76e5a","2011-02-13 04:10:40+00:00","- Improve Fifo_Init() and Fifo_ExitLoop() for avoid Crashes when the emulation Start and Stop.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7159 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"675687bf3c8ebb5f82a72ab8f3c606406130f0ad","2011-02-13 04:37:14+00:00","windows debugfast buildfix

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7160 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"1ad211b3ad6f97bb17e060f13b51898fcc4ff659","2011-02-13 05:05:53+00:00","Audio logging: actually use the audio backend sample rate when dumping HLE audio; this means that both sample rate settings now dump audio properly.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7161 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"1d2c936f08798f4c6b1eee76e50bca6721061cfc","2011-02-13 05:52:09+00:00","- Delete FIFO CriticalSection sFifoCritical for SAVE STATES. With the skid_au last changes that is not necessary anymore.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7162 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"a8992b7960dd18a1e4d5d1b8cbc44145ae874a30","2011-02-13 06:06:32+00:00","Move debugger ui files into a subdirectory.  Primarily to make it easy to keep debugger strings out of translations, but also because it is more organized.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7163 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"c30859dae04ac7bec4548bb4be61ce36054486f8","2011-02-13 13:42:59+00:00","SOMEWHAT cleaned up the VideoConfigDiag code:
Also verify the validity of gfx configuration directly after loading rather than in the GUI code (which was kinda stupid anyway).

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7164 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"be193088cac02d969b5ea2124fde76148b0480e9","2011-02-13 15:08:37+00:00","- FIX RE0 GFX fifo errors :D
- This game read the CPRead pointer when the GP is processing data and after detach the fifo  and attach again an use this pointer for continue, so implement fifo.SafeCPReadPointer pointer.
- fifo.SafeCPReadPointer is updated when (FAKE_GetFifoEndPtr() - g_pVideoData) == 0) to have a pointer without GFX Commands Cut in the beginning of 32 block.
- Reset video buffer when the CPReadWriteDistance is written by the software.
- This commit is experimental please test a lot your games.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7165 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"7a7a71d3fa09faaab16d975a4ac8b61744e76e24","2011-02-13 19:05:24+00:00","VideoOGL: reinitialize some more global variables,
so VideoOGL always is in the same state when starting a guest program.

Also constify the RasterFont, while we are at it.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7166 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"b776ac3d6fab0f6beb9aceef15b8af9bb984ba4b","2011-02-13 22:36:12+00:00","Add per-game 'configuration profiles' for video backend configuration:
This allows ALL settings in the gfx configuration dialog to be adjusted _per game_ in a more user-friendly way than before.
Obsoletes the gfx related options in the ISO properties, but I kept those since the configuration profiles use different ini file keys (i.e. convert the game inis to the new naming, please!).


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7167 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"2c00384427b4b18a246967677bcfdae79e140b51","2011-02-13 23:44:55+00:00","Quick fix for the Pixel Lighting setting to appear in the DX9 backend.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7168 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"cd308e2358c57acafd6b834352cebdcdb0b9e45d","2011-02-14 01:18:01+00:00","* If a hotkey is pressed within the render window, pass it over to the main window properly; this means that e.g. the frame advance hotkey works from the render window (and that savestates aren't hard-bound to Fx / Shift+Fx therein).
* Update menu accelerators for all hotkeys, not just the ones in the original hotkey dialogue.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7169 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"0ae8d33149025435dd5eaf49f69abce2ad54887f","2011-02-14 02:18:03+00:00","Some work on changing comments, log messages, and variable and function names to reflect that the plugins are not plugins anymore.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7170 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"ae4c8c81ac20fcb4d574c78f5c8c6c1c049f3cfd","2011-02-14 18:53:54+00:00","Fix fullscreen switch being triggered twice on hotkey.  Should fix issue #4098.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7171 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"f00a90910350fb5cb2312406ec4d9888c2bb54d7","2011-02-14 21:25:08+00:00","Allow building with Externals/wxWidgets3 on Linux and import
libpng so it can be maintained independently of wxWidgets.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7172 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"c212548f8ef74e5e812ff355352da40dc418ec32","2011-02-14 21:58:53+00:00","Initialize all struct members.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7173 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"4867fb19474db38d24dbd81e3f7e01b1aa36f975","2011-02-15 00:21:57+00:00","Initial directory structure.
"
"51f49bea566b61512cc6d5b7e5bd023b4ff03c03","2011-02-15 00:37:27+00:00","Add existing po's
"
"cf212518021a82ca50aa39fb428a9327066a235c","2011-02-15 05:29:21+00:00","Fix gfx dialog configuration text on the advanced page, and alphebetize the
configuration selections.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7174 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"fb4c82fb48b756b348140993c36d3177a869aa52","2011-02-15 09:07:55+00:00","Added the feature to allow creating a TAS movie from a save state.  To activate this function, start the game and use the 'Start recording' command.  A save state will be created at that point in time and the emulator will start recording.  This results in two files, a .dtm containing the movie and a .dtm.sav which is the save state.

Changes:
* Allow events to be scheduled when the emulator is not running.  This allows the save state event to be added before the emulator starts.
* Removed the Audio back-end init flag from the save state.  This value should not be saved as it is not data relevant to guest machine.
* Allow a recording to be started at any time (apart from when a recording is already being made).
* Updated the status bar and title bar when an on-screen message is shown
* Removed the saving of PEToken from the save state as the FIFO will save this information
* Added a couple Pixel Engine interrupt states to the save state
* Added the copyright notice to the GCPadStatus.h file.

This function is preliminary.  Let us know of any bugs you find or any UI quirks.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7175 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"d7bda211fd3cc7ad8c93146ffaa2c8597b798800","2011-02-15 17:03:20+00:00","Have playback of input files stop upon reaching the frame count designated in the header, preventing that number from being tampered with and assisting in recording verifiability.  Adjusted the 'resume recording from end of playback' code to account for playback stopping in the middle of a movie as above.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7176 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"961ac547431ca4abb76cf563f8b8c4cee75ac47d","2011-02-15 20:18:50+00:00","Disable use of exceptions in the wxWidgets3 build.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7177 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"d19c97dbe178bee6c315933fdf94416fcd4b4d60","2011-02-15 21:27:15+00:00","The pkg-config name of libpng is 'libpng', not just 'png'.

Things break if both a shared and static libpng are linked
in, presumably because it has some global state. Several of
the gtk-ish libraries often, but not always, link in libpng
transitively, so it is important that we find it ourselves
first, even if it is not in the linker's search path.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7178 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"0cc0618e6d4865c814cdcbb215e47d92d7661c87","2011-02-15 23:38:44+00:00","GC input recording: Record the on/off state and the analogue state of the L/R triggers separately (gets rid of an arbitrary numeric constant of 230 which isn't elsewhere in the code and should solve some issues with Metroid Prime recordings).


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7179 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"3a718f04ab794f0b0f70a179b9e150745d17e925","2011-02-16 02:19:40+00:00","Clean up the hotkey dialog by separating into tabs.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7180 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"160f3304d256b3c28f49833e3523095e1e8401d7","2011-02-16 03:06:17+00:00","Added Czech translations thanks to Zbynk.  Updated Greek, French, Hungarian,
Portuguese, Turkish, and Chinese (Traditional) translations.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7181 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"e9f3d50eca60a162cadcbbbfe00d3dc373098953","2011-02-16 12:09:39+00:00","Fix nowx Debug build. Yes, people use that\!

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7182 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"38950e421b91299729a1c6a10d7dfacc5182b004","2011-02-16 13:36:41+00:00","Clean up shared_foo handling.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7183 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"f46c5ce63db824ee407d10ba77c3957e028d8085","2011-02-16 13:42:57+00:00","Oops, forgot the libwxpng case.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7184 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"c7ae0eb0d12ae828d02188ca611391c142be9762","2011-02-17 04:25:21+00:00","Big Fifo Commit Part2: Now the fifo is more stable than my first commit, so is time...

- ReImplementing Single Core Mode like Dual Core Mode Style.

- Stage 1: My goal is, we have the Fifo, CommandProccessor code the more clear, maintenible and documented possible. When I quit dolphin I want any developer can continue with the work only reading the code.

* Big Refactoring: A lot of functions was changed the names, and modularized.
Now the FifoLoop and CatchUpGPU does not exist, was replaced by RunGpu() and RunGpuLoop().
The general idea is modeling the code like the real HW. The fifo is only a buffer where the Write Gather Pipe write the commands and from the Graphic Processor read these.
* Big Clean UP a lot of obsolete code and comments was deleted, like DcFakeWachDog, 'Fifo very soon hack', etc.

In the stage 2, I will refactoring more code doing emphasis in the division of CommandProcessor, Fifo, Gpu Emulation. Beside I will comment all functions and variables in the code (Don't worry I will ask for English help for this part ;) )

Please test a lot SC mode and DC mode :)
Thank you so much for testing always and the patience. I don't like broke your favorite game but... you must believe me this part is very sensible, I only try to contribute for have a better and stable dolphin emulator.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7185 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"855bcfa40c9392d939018db2308288c8f2fd34e4","2011-02-17 09:12:36+00:00","Added an option for input display.  This option shows the controls read by the emulator at each frame.  GameCube controls in all four ports have been implemented.  Wii controls are todo.  The option can be found in the graphics settings.  This option is usually used for tool-assisted speed-runs (TAS).

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7186 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"fbcd2dbd5c62f44f551ee06730785480ea22b51a","2011-02-17 09:38:06+00:00","Linux build fix in response to r7185.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7187 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"fa80f4074d507496e287216bb12196d8534c4b8c","2011-02-17 17:51:18+00:00","OS X' IOBluetooth class requires that device discovery and device
connection establishment be done in the same thread, which caused
problems when the now persistent device connections could be
initiated by either opening the wiimote config dialog or starting
the emulation.

This same thread doesn't necessarily have to be the main (GUI)
thread, but it fits with the current other init case in the wiimote
config dialog and doing it in the main thread and would be required
if we should want to use the IOBluetoothUI framework in the future
for having the user input a pairing key for permanent syncing.

Also move a few other bits of code from the emu thread function
into Init() and Shutdown() so it only does those things that need
to be in that thread's context. I am not sure about video setup
so I have left that in EmuThread() for now.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7188 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"2ce4b29ae2b451d1edec2d21a976d800c47b3fcd","2011-02-17 19:13:44+00:00","Initialize video before HW as required by non-USE_WX platforms.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7189 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"21835880306c1a4557aaea258eb56dbb45e72029","2011-02-17 19:33:50+00:00","Also don't shut down the video plugin until after HW::Shutdown.

Not sure if this is necessary, but it matches the previous behavior.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7190 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"c2bc463fe7cdec7ea00338a58922bdb1a3864b3d","2011-02-18 12:34:24+00:00","Move the log window options from the log window into a separate dialog openned from an item in the options menu.  This gives the log window room to show logs.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7191 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"a51b99795e5a1878a5b0a391c287e2bb7a7ff218","2011-02-18 14:27:30+00:00","Also delay video plugin shutdown for the main thread in the non-dual core case.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7192 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"83dc3bf210138d02dbebb74e634cb1ebfa4f8ccc","2011-02-18 20:03:01+00:00","Make the log config dialog modeless.  Eventually I will make this a dockable window.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7193 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"198e29be07879aef8f79888572f5571c1b879624","2011-02-18 23:52:14+00:00","Call Video_Prepare() before starting the CPU thread.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7194 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"c6c0137df42407f8a69bb9a4bae546bcefb28dc6","2011-02-19 01:23:56+00:00","Combine the two halves of video backend initialization
in Initialize() and Video_Prepare(). Video_Prepare()
then becomes the entry point for associating the current
thread with the rendering context, which is currently
only known to be necessary for OpenGL.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7195 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"ad666d5e5c86bdf7bacc3e031e737a5bbf63dfc1","2011-02-19 04:43:51+00:00","Save and load the line wrap option of the log window from ini.
Add Portuguese translation to the windows build.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7198 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"050dcad9f8bec499f85aa0be34f3815586d33264","2011-02-19 07:06:26+00:00","Build fixes when using SDL 1.3 related to force feedback support, as suggested in issue #1338.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7199 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"1f5d54f5a68837685fd8f53b72991ad3afce630c","2011-02-19 09:56:54+00:00","Handle NaN in fselx. Fixes issue 4106.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7200 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"febd967907ef8cb12f3b35be9039e3616b85c3c0","2011-02-19 13:45:13+00:00","Back out r7195 pending a closer look at thread safety in the
video backends.

This would be considerably easier if there was a way for me to have
fully working video in some sort of VM. If anyone has achieved that,
preferably with Linux but failing that with Windows, I would
appreciate any tips on how to set it up. VideoSoftware used to more
or less work in a VM, but I've never been able to get OpenGL to do
much more than open the window and display OSD messages.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7201 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"e57406dbcc77b726a9437fc224c2fa447a73bdef","2011-02-19 14:20:52+00:00","Core/Common: Add support for low 8 bit parts of SI,DI,BP on 64 bit in x64Emitter

In addition protect against their use on 32 bit and the use of [ABCD]H
together with a REX prefix on 64 bit.

This assumes that the customOp parameter of WriteREX and operandReg of
OpArg always are registers, and thus needs to give something valid to
WriteREX when that is not the case (WriteShift).

In addition to the patch i sent to the ML, there are a few changes to the
error reporting(mostly whitespace).



git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7202 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"22dcfa445541f2ea9776356f3653df2a55446785","2011-02-19 20:11:51+00:00","Revert alphabetization of game profiles in the video config dialog until I (or someone) has time to do it right.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7203 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"d93a54898311be897d61ec5e2236a9a561ab42f0","2011-02-19 21:40:03+00:00","setup ios revision (makes some wii demos shutup)

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7204 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"d2910912a4b11c1bddd296de6ec7eb318a74ddf9","2011-02-19 21:53:53+00:00","XInitThreads() must be the very first Xlib function called or else
some X state will have initialized mutexes and some won't, leading
to unpredictable results depending on the feature set compiled into
wxWidgets and so on.

wxGTK starts by calling Xlib functions indirectly through gdk very
early on, so we must hook into wxApp::Initialize().

I believe this should properly fix issue 1540. In case of problems,
please reopen that issue. If you see XLockMutex in a backtrace,
that's a pretty good indication.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7205 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"9a9909a4d81554d73c6a8b383f28b6f63a854220","2011-02-19 21:55:14+00:00","Stop building some unused files.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7206 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"1795da46abff42d9ee648f0dcbb24b976d179f98","2011-02-19 22:06:29+00:00","std::locale('') seems to be broken not only on OS X, but also
on FreeBSD and Linux when building with clang.

I think it would be best to only use wxWidgets for localization.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7207 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"69a3e5f3c364418afaf2a015bde15bb7c15bc9b3","2011-02-19 22:56:51+00:00","wxConvCurrent in wxWidgets is not always initialized at startup
like it is supposed to and depending on the linking method used
this shows up as the inability to use it in an initializer.

I think this may be a wxWidgets bug (ticket #12927), but I haven't
fully debugged it yet.

For now, apply a workaround here.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7208 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"685d3c1f506c1eb6a1b3304265fd49aa7f3f4e3d","2011-02-20 02:04:14+00:00","windows: fix crash on close

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7209 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"fa7194b129a9fc3236943ee1febf231337ad1101","2011-02-20 18:03:14+00:00","Make game list tooltips work on linux.  The HitTest subitem parameter is not implemented on non wxMSW so just use the entire item.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7210 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"62cb8ebe46b5d42f4f2acf7873a23a927062dbdb","2011-02-20 18:08:20+00:00","Force dolphin to use the windows7.1sdk (the windows7.1sdk installer is silly and refuses to recognize that vs2010 exists).

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7212 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"b90a85da49e2da54dd28e47f0a89319f07b54cbd","2011-02-20 18:33:33+00:00","might as well add image/png mime-type for pngs in /trunk too

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7214 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"636af2ce673c2baa787b8ff582b5d5158973bd2c","2011-02-20 22:56:03+00:00","Fix the game list tooltips on linux in a better way.  Also activated them on OSX, but they still don't work the best there.
Fix a hang on emulation shutdown on linux.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7215 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"f9ccd6dfa1df2da1d7af96fd319b772ae2063f1d","2011-02-20 23:42:21+00:00","Sort configuration profiles in the video configuration dialog.  Instead of sorting alphabetically, sort them in the order they appear in the game list control.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7216 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"3b6f7644fdbf70dd1cca6233a71be87ae92fe8ec","2011-02-21 15:01:00+00:00","Make log options an AUI window instead of a dialog.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7217 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"6e4923399eb08d497574475e074b0fd18c4bcad3","2011-02-21 15:17:41+00:00","revert r7212 (express users must modify a single line, instead)

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7220 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"9bf8a58286ac8569f899230708ab7886e8f2c7d3","2011-02-21 16:50:55+00:00","Fix the segmentation fault users are having when opening the video config dialog with no games visible in the game list.  Although in that case there will also not be any game profiles listed in the dropdown.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7222 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"a1da2e0e4c495cc37a0c20856b36fe71db48f35e","2011-02-21 18:01:32+00:00","Some fixes for the 'Cheat Search' feature :
- Replace ToLong() with ToULong(), as to allow values in the [0x80000000..0xFFFFFFFF] range to be parsed correctly without failure.
- Remove the 'val_base' hack, as it breaks hexadecimal values beginning with '-'.
Simply passing 0 as the second parameter to ToULong() is enough, as mentioned on this page: http://msdn.microsoft.com/en-us/library/5k9xb7x1%28v=VS.100%29.aspx
- Changed the error message (and some of its translations) to reflect that octal values are now auto-detected ('supported') as well.

To users:
Note that values beginning with '0' (not '0x' nor '0X') are now interpreted as octal values instead of decimal values. So be careful when using those!

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7223 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"f2a086c44c1dca5e5ee7d4a9fa14685beb3e947b","2011-02-22 02:02:56+00:00","Time for a translation update.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7224 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"d92aad44309d5ac47ca260667372f80c199405b5","2011-02-22 12:48:35+00:00","Added Wiimote speaker support by hack patching out the IsBusyStream function using HLE.  DSP LLE is required to process the speaker data.  This commit works with real Wiimotes.  I have added the code to decode the audio from the emulated wiimotes but have not added the code to output their audio to the PC speakers.

* Added HLE function IsBusyStream which signals that the Wiimote is ready to accept speaker data.  This function is not a conversion from the real PPC code.  It a simple function that returns the 'ready' status after being polled.
* Added code to find and patch HLE functions on boot
* Added 4bit Yamaha ADPCM decoder from the ffmpeg project
* Removed some test code
* Added some copyright notices

Fixes issue 438.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7225 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"2b6a8c1cf829bdef03c102081c55cb0b89b5e35f","2011-02-22 14:06:06+00:00","Build Speaker.cpp.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7226 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"85227934d69da1e63cd47a4f8910638301e1cdbb","2011-02-22 15:07:38+00:00","unbreak OSPatches[]

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7227 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"39573ca9597be145bc9a6231ee50c3d98180748a","2011-02-22 16:18:43+00:00","Use HLE::Patch, so struct order doesn't matter. add a fun symbol :)

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7228 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"ceb03781dcf7cb3e1bfad551d37ce0e4df1c6e74","2011-02-23 03:06:16+00:00","Fix an issue when a wiimote source is changed to a real wiimote in the wiimote config dialog while a game is running, and the wiimote was disconnected from the CPU.  Only change the connection status when the dialog is closed.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7229 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"996ff62ad6a60990b583e53a7e047bd0c103381b","2011-02-23 05:23:21+00:00","fix the debugger flashing like crazy.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7230 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"9680d3ac95f733e9bf67fa778706771b8c1c746a","2011-02-23 10:01:04+00:00","Added an option to disable the Wiimote speaker.  The checkbox has 3 states:

Ticked = Clear sound but a bit unresponsive to controls
Filled = Same as r7225
Clear = Disable speaker

The option is in the Wii tab of the configuration.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7231 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"1eaad0966cb5e6ee70b146da9f6d5daeeeeab91c","2011-02-23 16:00:01+00:00","Still didn't quite have the wiimote connection stuff right.  This probably needs to be heavily revised.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7232 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"2f14598687a1ccf5668e3ff3a9486175011b7cd4","2011-02-24 05:05:25+00:00","Clean up the debugger gui a bit.  In general do not call SetSizeHints on a window unless it is a top level window.  It isn't supposed to do anything for non top level windows, but it causes glitches on linux.  Removing these calls does not affect the end result on windows.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7233 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"de25440bb3075a1a35244cd3aea19bc257de50a3","2011-02-24 05:59:46+00:00","debugger: don't make spacebar step the ppc.
don't call UpdateGUI() each time the statusbar is updated.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7234 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"ea008a82aecf3817cf631746c72214913120047c","2011-02-24 10:18:59+00:00","fixes issue 4147

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7235 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"18b85b9cd5b58218bba996cc0b0becebaf37549b","2011-02-24 15:04:24+00:00","Just a small accuracy fix for r6819, fixes the pixel line in the volumetric fog effect of Metroid Prime (closes issue 4162)

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7236 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"1f33fc1a48243bb9b4717196aaf71ff4ea645f11","2011-02-25 03:56:14+00:00","Fix a segmentation fault when the wiimote source is changed to a real wiimote in the config dialog.
A little clean up of the debugger code.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7237 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"ef63bccfc12cc17f2c104215717fbec204c8471a","2011-02-25 04:00:16+00:00","vs2010: make -d be passed to debugfast builds launched from vs
revert r7200. instead, wrap the Interpreter_FloatingPoint.cpp in fp:precise for msvc

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7238 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"7d3ad0b1fec119ecc0030e4e4c545dcce028a9a8","2011-02-25 05:19:59+00:00","Fix the hang on windows when wiimote refresh is used during a game.
Fixes issue 4161.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7239 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"d7a9dc7df830815171037b258e17fe9bf38c17f6","2011-02-25 09:35:56+00:00","debugger: better saving/loading of breakpoints/memchecks to file
no more softice style :(

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7240 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"1ea4b8045e99db2f3527a1e55f91afdbbd5fdc89","2011-02-25 10:07:24+00:00","memorycheckdlg: set the log, break, and range flags properly

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7241 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"832df18c0f2069f6cb5a4ffe2e62413a651ed70b","2011-02-25 11:03:49+00:00","more memcheck stuff

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7242 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"7c959d9655bc5d188b097a2d17b08547449dc588","2011-02-25 12:27:38+00:00","vector::erase needs a non-const iterator.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7243 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"7dc3a6cc9220598175a5a8641cf1dd445eb88816","2011-02-25 18:22:04+00:00","D3D9/11: Fix that 'Disable Dest. Alpha Pass' option...
Thanks to NaturalViolence for reporting ;)

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7244 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"c40ca6553f1e3bf9190afd5e6522be2065e16940","2011-02-25 20:24:48+00:00","little commit to dx9 add generation mode to RestoreAPIState to  avoid possible errors, don't know if this fix anything but now is more correct.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7245 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"ac6c18a5e4bfd8e98567d05ee76a09ed65848adc","2011-02-25 20:27:57+00:00","some cleaning in dlist cache, runvertices and runcompiledvertices

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7246 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"eef715b1cf8730174777000f94252d9adf92332b","2011-02-25 20:35:05+00:00","added the possibility to allocate aligned memory, an use it to allocate the buffer utilized in texture decoding, this will make a little easy to use aligned writes when possible in sse2/3 optimized algorithms.
some code additions for future use ;).
please gcc user test this as i don't have opportunity to test it myself i only use reference code to.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7247 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"992f8be5b0ac4c391e50bb2e18cb2f7df1b7dd26","2011-02-25 21:14:13+00:00","If video backend initialization fails, have the emulator die gracefully instead of crashing the application.  Also a little clean up of the passage of the video window handle to the backend and back.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7248 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"19524a8bb729a68334805dc7112173cf04d2df88","2011-02-25 23:15:53+00:00","change how the 'toolbar' of bp window is handled -> works correctly in release build.
code is still ugly, so if you feel like writing a shiny debugger...

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7249 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"960748b18414472034cb9d0d45322c0c99e7e264","2011-02-25 23:33:11+00:00","Added an option for opening up the wiki entry in the compatibility list.  The option is in the right click menu of the games list.  The game entries in the wiki are currently manually added by the administrator.

Based on an idea by JPeterson.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7250 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"565ab76e63cba22f0f3659513210d3de63db198f","2011-02-25 23:51:59+00:00","Linux build fix.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7251 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"8351177738857041bf87408d48a2efbc168e1c59","2011-02-26 21:30:49+00:00","Core/Core/Src/DSP: Drop the indirect addressing hackery from DSP Jit

Was made possible by the move of Core/DSPCommon to Core/Core.
This should not give a significant speed difference, but frees
another register for register allocator use on x64 and
generally simplifies the code.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7252 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"f0c5cc76a998b59ddb1dd720354db366b5e15e9b","2011-02-26 23:41:02+00:00","Add EFB encode-to-RAM support in DX11 backend. It could probably be simplified a lot, and not all the possible formats are implemented. I tried to use the dynamic-linking feature of shader model 5, but Microsoft's HLSL compiler is broken. 'Dynamic mode' is implemented, but disabled for now.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7253 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"47efe0fc82e52d19ffa67f0c0f125ee0b0f088d2","2011-02-27 00:13:28+00:00","add new files from r7253 to vs2010 projects.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7254 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"c07fb95821ddf45c17b09819d0b738955a9dd0b3","2011-02-27 00:15:26+00:00","PS3 controllers have some input elements with very large value fields
that cause IOHIDValueGetIntegerValue() to smash the stack when trying
to convert them.

In practice, all relevant axes seem to also be available as either
8 or 16-bit values, so just ignore anything that doesn't look like
that (or a button).

Fixes issue 3931.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7255 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"449e79aea51aff5549c321eb301cbf198f2c8ada","2011-02-27 01:51:03+00:00","Fix a brain-fart....

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7256 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"217ee430630aad61d6012d621134919173dc4559","2011-02-27 02:27:43+00:00","Fix a memory leak in the breakpoint window.
Parent message alerts by the active window.  This way if another window is open it isn't pushed behind the main window.  We probably should parent the message alerts by the calling window instead, but this may be good enough.
Make sure there is only one instance of some modeless windows (Cheats Manager and Net Play).


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7257 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"54078ef9cc738725e7ed949bbaae6abd0ff78679","2011-02-27 09:33:03+00:00","Improve DX11 efb-encoder shader code generation a little

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7258 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"ff62f492e63bac88017fcd91d919a6f09bdbaa1a","2011-02-27 14:43:52+00:00","Remove numerous video options from the ISO properties.
Use the new configuration profile system instead.
Thanks to kostamarino for migrating the game inis to the new system :)

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7259 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"d56390407f547ca52e2711339ce12ca63286249d","2011-02-27 18:04:35+00:00","Core/DSP: Access all registers except ST* through the regcache

No speed difference, probably because our basic blocks are
too small to contain more than one access to any register
or used too seldom for multiple accesses to make a difference.



git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7260 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"ccc12c695008e6d7c72fc651ac38f7ed70adab6e","2011-02-27 18:06:55+00:00","a little simplification for the dlist id and  a little correction to YieldProcessor in windows.
in windows sleep(0) behaves more like what is defined in the yield instruction so use it instead. In my amd 6 core system brings a nice 8% speedup so please test I'm interested in knowing the behavior in different systems.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7261 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"e926b28480259b106f9cf88e4aa0289415ff638e","2011-02-27 20:07:59+00:00","DX11: Improve efb-encode shader some more.

According to AMD's GPU ShaderAnalyzer, most combinations of shaders have about 1.5x-2x higher peak per-clock throughput after this commit. For those concerned about performance, I do intend to make this at least as fast as the other backends. This is one more step toward that goal.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7262 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"50c2f61d24540e636d20c08a19f7bf7b322e0313","2011-02-27 23:03:08+00:00","Make the break point window toolbar a real toolbar, and general debugger gui cleanup.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7263 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"1b8f4760247934e3bac649d45a887d304b5eb724","2011-02-27 23:13:28+00:00","Integer constants larger than int need a type suffix.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7264 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"ba54fac9eb74be6f73e20e2de953cf6f355be57f","2011-02-28 20:40:15+00:00","Convert GetUserPath to return a std::string instead of a const char *.  This simplifies its usage in most cases.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7265 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"a5b471f4903646e44d03ea8ca6a830002342198c","2011-03-01 03:06:14+00:00","More conversion from char * to std::string.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7266 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"7be1080dff1d0d20854a8e75e1b2a70877013746","2011-03-01 05:07:23+00:00","DX11: Implement the rest of the EFB encode formats, but beware: I don't have any games to test them.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7267 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"df809630c52f6d44346b180c89150b7b1a053ed5","2011-03-01 05:16:32+00:00","Pass std::string's by reference when possible.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7268 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"74f22a57d1ec3dd1ad4bde5a32542337b9b38664","2011-03-01 05:32:13+00:00","DX11: Simpler depth-fetch. All DX10+ cards should have enough float precision to make this safe.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7269 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"6073600084a1e5d4a180f502626bc44d4b7022f0","2011-03-01 20:20:04+00:00","DSP: implemented saturation in dsplle-int

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7270 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"3af93e8cf3dded348bce498776d9295da086783e","2011-03-02 05:16:49+00:00","If the DSP LLE can not find the needed ROM files exit the emulator without crashing the application.  Also reimplement soren's revision 7195 in a way that works on linux and windows.  (This makes it easier to clean up the video backend if the DSP emulator fails to initialize.)


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7271 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"a80429b0209391e1548db01696a72b411652b78a","2011-03-02 12:06:06+00:00","Fix the wiimote speaker problem in the core and remove the HLE patch for it.
Real wiimote tested on windows, untested but should work on linux, dunno about osx.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7272 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"a1055bf5bf18bd79a33d29f3c0db69f537f2e1d9","2011-03-02 13:01:01+00:00","add a slider to control the wiimote speaker volume which is stored in sysconf.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7273 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"3ffdcf1aecddd26ab1ef2b6cd84ca0150dd78ea5","2011-03-02 15:13:13+00:00","Put the video prepare code back, and use the existence of the g_renderer to determine if video prepare has been run or not.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7274 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"8cd477a5268977edc9b006c93bab529f47840243","2011-03-02 19:24:06+00:00","Add Czech.  Update others.
"
"12cd2d41ec5d45e9da53df139ac9413684f1c09a","2011-03-02 22:19:56+00:00","Change YieldCPU to sleep(0) like on windows.  Time trials show this to be the most effective.  Also, when using usleep(1) and dsp on thread the emulator is painfully slow.  With the old _mm_pause() the emulator hangs on shutdown.  With sleep(0) the emulator is faster, and doesn't hang on shutdown.
Also fix a possible undefined operation (according to gcc).


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7275 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"da4832ed7e05b2e2f3ee79b92a3331ece605d8d9","2011-03-02 22:47:21+00:00","Add Serbian translations thanks to nikolassj.  They are not very complete though.
Update most of the other translations thanks to the dolphin translation team.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7276 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"58d996281cbf07c9be5f7b7ad1d3b35268454c5e","2011-03-02 22:48:15+00:00","Add Serbian translations.  Update other languages.
"
"bda0794adb19a0c2c2b4a387d8b0ace133ae7a85","2011-03-03 00:07:33+00:00","Reload sysconf file on stop in order to preserve changes committed during emulation

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7277 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"1ae59b6dc39bd001805aea2293aaf78cf47f56b3","2011-03-03 01:15:25+00:00","When reloading the sysconf file make sure that the m_Entries vector is cleared.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7278 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"4b8ed4f2c8c25b2a833b11b3b41352f43ec6e6b4","2011-03-03 04:32:37+00:00","Remove a pointless cast. Name the DSP thread.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7279 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"540238cf79ae76a60585fcb5c6364279f820872e","2011-03-03 04:35:03+00:00","Prepare for the release of Xcode 4, which has working LTO
with static libraries.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7280 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"1e2d9223429e8bc52dab71fb2033f60dd72dea40","2011-03-03 11:37:12+00:00","Fixed channel loading from the Wii System Menu.  The DOL is not being loaded properly by the system probably due to caching.  Wiimotes will need to be manually reconnected after the channel loads.

Also fixed a small bug in the PowerPC ResetRegisters function (clearing CRFast).

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7281 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"05719ac81ab1e784c7aeb85af1e9b227b9cdbe83","2011-03-03 19:44:56+00:00","Move SConscript files out from the Src subdirectories to be
consistent with the other build systems.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7282 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"756c40163d48aadc3e2d42de30cb3a693188556d","2011-03-03 22:47:48+00:00","Merge the log window CreateGUIControls and LoadSettings methods.  This allows the settings from the ini file to be applied when the controls are created rather than setting a default, and then changing the settings later.  In particular word wrap is applied when the text control is created.  This works around the crash at application start that users are reporting in issue 4196.
Also change the for loops in SysConf to use iterators to placate godisgovernment and billiard. :P


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7283 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"c569b33829e77ab9a568198152e5eabe32fdcb8d","2011-03-04 22:48:54+00:00","First Revert my changes to VertexLoader.cpp, i don't own the games that get error so i revert the changes until i can test it myself.
Second:
A experiment. implemented parallelization in texture decoding using openmp. is most a experiment to test the performance in different os/plataforms. in my system (windows x64 amd 1055t) give a speedup in large textures, but i tested in in intel dual core and gives a slowdown. o i limited the use for large textures and cpus with more than 3 cores.
please test an let me know if it improves or degrades the speed.
please for linux and osx user. to enable this you will have to enable your compiler support for openmp to test this code.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7284 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"e8a1c04abf58fcc0fa28cb584f806d28f1607fd9","2011-03-04 23:14:21+00:00","Fix a typo in BPFunctions causing a PanicAlert in SW:RS2.
Really minor bugfix in DX9.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7285 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"7782b7c52d6215047212129b91b70a0cc8b2ab9b","2011-03-04 23:20:08+00:00","reconnect all wiimotes on eslaunch
same hack as r7090
update ES_GETSTOREDTMDSIZE, ES_GETSTOREDTMD to work when called with only 1 inbuffer and no outbuffer

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7286 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"1e367749bd28b9d2d7ea49073a8a11f370882112","2011-03-04 23:23:59+00:00","Minor cleanup.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7287 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"b8b81001bd41fccde6380a5a5adf8890a120c0c5","2011-03-05 02:32:09+00:00","Linux build fix.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7288 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"15ca7b72e6bab5b5c243bb813ea20f9f612ebd78","2011-03-05 03:57:09+00:00","some fixes for my last commit

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7289 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"708f6f7299f4ec8646d204236eb30939ddfc238e","2011-03-05 05:07:44+00:00","Replace install wii menu option tools to install wad
Add the option to clear a title from the NANDContentLoader and attempt to reload it
This allows the using the system menu immediately after installing rather than requiring a relaunch

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7290 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"3b1e7ac372f402e11f8737fb230322e52e8ebcd9","2011-03-05 05:10:28+00:00","Get rid of the annoying (and invalid issue creating) 3+ minutes to create cdb.vff
now creation is handled by the gui and takes < 1 second

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7291 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"278cb45eb94adc812b7e7879a6e7267c45276aad","2011-03-05 05:18:21+00:00","deleting a channel via the wii sysmenu works now
Implement ES_DELETETICKET & ES_DELETETITLECONTENT


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7292 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"a037ff23586c3dd16d394ae87783db0628335587","2011-03-05 05:47:16+00:00","Move the cdb.vff file creation out of the wx code

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7293 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"423018f811ce8c1682735d33a3790031b8c08576","2011-03-05 06:11:26+00:00","Replaced Common::CriticalSection with a std::mutex implementation. 64bit Windows builds now use SRWLocks and ConditionVariables(requires Vista/7, x64 builds will no longer work on Windows XP x64). Tell me if you hate that. Removed Common::EventEx. Common::Event now uses a std::condition_variable impl.(using ConditionVariables on Windows x64, Events on x86, or posix condition variables elsewhere). I experience slight speed improvements with these changes.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7294 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"e16e1771485c970861383cdc52fb8b59846e21b5","2011-03-05 12:05:58+00:00","Missed a critical section.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7295 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"d40e7f26a049d23247ad794e9a17bc30ad2b7fbe","2011-03-05 12:45:29+00:00","Build fix of linux build fix.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7296 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"7eade75476b01b0d66e3af1321f06274a6155369","2011-03-05 13:02:23+00:00","some fix of Chinese translation

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7297 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"f20731b1c3995762c37f33b27dacf8b82fcb93c0","2011-03-05 13:23:37+00:00","Fix OS X build.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7298 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"5eb99178dd6f9d500c6219b947ae0d376d139d5e","2011-03-05 15:03:36+00:00","more fixes for my openmp commit

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7299 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"25231f8007c17106637df83d760da0e11ffe02fa","2011-03-05 15:30:38+00:00","more fixes for opengl sing openmp, i hope is the last :)

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7300 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"fb4f31750372e51b96d2a690d2fdabf41bb0aa38","2011-03-05 16:12:06+00:00","Make OpenMP optional on linux.  For now it is on by default, but you can disable it by adding -DOPENMP=OFF to the cmake command line.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7301 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"4f0705fd70a15820162d4f338fb7a3cfa1648cdd","2011-03-05 16:36:47+00:00","* Italian translation update

+ minor GUI adjustements, CPUID Detect cleanup... video profile selection is disabled if a game is running

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7302 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"9abf449e7c3d6c2977662e75e2f418c5d8fa24d2","2011-03-05 20:40:17+00:00","DX11: Eliminate most int-to-float conversions and use float math in more places. GPUs are more efficient with float operations. This gives a slight speed-up.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7303 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"024a87af7ac6ddf0719e3c7fc0cac5bca3e8812d","2011-03-05 21:58:54+00:00","Fix the Host_GetKeyState deadlock caused by Billiard's latest changes.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7304 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"7bc2ae01f26a5396e3a7207170d6860c921b71a7","2011-03-05 22:17:28+00:00","Fix Common::Barrier and fix the deadlock by making Common::Event check to see if an event has already been set or not.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7305 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"9601bf72dfe159517ee2a8529bdd320e5c53c906","2011-03-05 22:47:01+00:00","Fix GCPad rumble. Fix issue 4212.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7306 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"9095dad00900034649d7f3ec78bd5e5558e97fb7","2011-03-06 00:52:04+00:00","Fix preprocessor prob.(recursive mutexes were being used where not necessary) Hopefully fix Common::Event to handle spurious wakeups since it uses condition variables now.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7307 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"ec7e160bdcf5b93aced2849473cbd9f22bdfe6a0","2011-03-06 04:31:43+00:00","Fix Host_GetKeyState in a more effective way.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7308 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"fe601f3ed5f33d06eef74a02d15f95b31b4a0019","2011-03-06 14:27:36+00:00","* Italian translation update
+ Overall and general inspection before...
+ ...removal all 'string-leashes' (now you should see 100%(?) of translated strings)

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7309 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"99e6c474978986b5e296b92f44648dabe128c464","2011-03-06 14:52:38+00:00","Use clang for compiling the few .c files, including minilzo-2.04
which appears to trigger a bug in the version of llvm-gcc included
with some releases of Xcode prior to 3.2.5.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7310 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"a734b3f057db948360122a7a4f427b3345879cff","2011-03-06 16:57:58+00:00","Somewhat experimental.  If the SYSCONF file is not found or is invalid then generate one.  For now ask the user if this should be done.  The generated SYSCONF file works for me with the games I have tested, but this needs further testing.  Unfortunately, most users will never use this as they will have the SYSCONF file anyway.  Eventually we could perhaps remove the distributed SYSCONF, and generate it the first time dolphin is run.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7311 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"3151618cb38db1205cfa1043784b33ed29d8e3ef","2011-03-07 00:12:55+00:00","Core/DSP/Jit: Fix register cache state tracking in bloop and loop emitters

Fixes dsp lle jit crashes with dkcr.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7312 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"5f87642f2339d2e3574e9b9e3ec386462f2634c7","2011-03-07 00:16:38+00:00","problem: TryAcquireSRWLockExclusive requires Windows 7 :/. solution kinda: use std::recursive_mutex (CriticalSection on windows) where try_lock is used. Dolphin should work on Vista x64 again.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7313 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"89f636cc08ae61712394d3309b919389a425d25e","2011-03-07 16:12:20+00:00","- Little fix on CPUDetect.cpp about the correct detection related to new AVX extensions (bug/fix reported&suggested by debian.micove)

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7314 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"bf9962c3f0014f9dc7d51b79c5971a455c161edf","2011-03-07 20:19:20+00:00","Check if we are just displaying the empty game list before assuming
that the ratings column is present.

Fixes issue 4183.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7315 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"6d93d473ad98e401af550e5fd7c3578b65bb7970","2011-03-07 20:23:04+00:00","Shut up recent versions of GCC about the OpenMP pragmas.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7316 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"e0df7d799a24ae5933b3cf7fab4af71a4204e632","2011-03-07 23:20:20+00:00","Fix the no gui build for the recent std event changes.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7317 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"a23fb0eef32023ddfcf6ffe580eefb85dae79d9e","2011-03-08 02:23:54+00:00","Fix a couple apparent typos. a) Don't pass ASCII string to Unicode function. b) If you type '(128 / 1000)' in C++, it will be treated as '0' because the integer division gets truncated. Fixed.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7318 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"6e348a27315347870791851522bf04562cddee9f","2011-03-08 07:39:36+00:00","DX11: Add real XFB mode support. May not work perfectly yet. I'm working on a set of fairly big VI-related changes. When I'm done, it should improve animation smoothness for all the backends, especially when virtual or real XFB mode is enabled.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7319 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"431f6b596adcc41bcbf3eaff3019f2fe143999c4","2011-03-08 22:43:44+00:00","Fix the default setting for the fullscreen resolution on linux.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7320 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"610df4ab78eefa79aca731768dd6f11d4564b34c","2011-03-08 23:25:37+00:00","Fix OS X nowx.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7321 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"83209b4afc7c6d968f4a8d5e318cb039a9e3a56b","2011-03-10 00:16:40+00:00","add an option to not eject/reinsert memcards on save/load state
when off certain games like ZTP ZWW maybe other cannot save to a different memory card after loading from a savestate, but for TAS the game will no longer think that the card was ejected
to use add
ReloadMemcardOnState = false
to dolphin.ini

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7323 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"1f42629112eb570b7915f25e1f0b0f2ea0a00857","2011-03-10 22:06:30+00:00","Fix OS X Lion build:

Lion no longer includes wxWidgets 2.8, so be prepared to fall back to
Externals/wxWidgets3 even when no wx-config command is found at all.

There are a few new and deprecated symbols in the 10.7 SDK that
conflict with wxWidgets/Dolphin, so just use the 10.6 SDK for now.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7325 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"4f69672b2b31581746aae907e7757981fc48db77","2011-03-11 00:37:37+00:00","Remove the need for the less than standard strnlen()/strndup().


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7326 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"59fd1008ca9cf4e9f75fdd6ee8ec53a2c7d7a13b","2011-03-11 10:21:46+00:00","Wrapped fopen/close/read/write functions inside a simple 'IOFile' class. Reading, writing, and error checking became simpler in most cases. It should be near impossible to forget to close a file now that the destructor takes care of it. (I hope this fixes Issue 3635) I have tested the functionality of most things, but it is possible I broke something. :p

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7328 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"5706abf4a13ef08ac0257765636b41655e98ef87","2011-03-11 12:56:26+00:00","Hack up hack number 7328, just to get things to compile.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7329 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"ccf3158da4e07824144141b6272b470df8adb9f4","2011-03-11 16:38:54+00:00","Make the non-HAVE_LIBAV case compile.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7330 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"e5f7c5c58a1362d7b94436892c3e8924be74c851","2011-03-11 18:04:42+00:00","Make sure the frame dumping file is closed when emulation stops as it should be for the non avi dump build.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7331 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"2a694edf93591c326f013470d4d657e895fa18dd","2011-03-11 18:13:08+00:00","Probably should use the IOFile built in mechanism to check if the file is open.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7332 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"1b583a0441320f6e73b932aaaed4bb5ec84eb6dd","2011-03-12 00:01:33+00:00","Fix things so that those who wish to compile with -std=c++0x can.  To active this with the cmake build add CXXFLAGS='-std=c++0x' before cmake on the command line, or export that variable.  This enables the experimental features like std::thread, std::mutex, etc., that are provided by g++ instead of using the implementation in dolphin.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7333 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"0cc8eda12449516a1e30d3c31c463ac26cccd9cf","2011-03-12 01:19:04+00:00","Re-enable the std::mutex try_lock on linux and use it for the Host_GetKeyState keystate_lock mutex.  This reduces the number of application crashes on linux during emulation.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7334 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"26b6a9af612b65aa31e249ae17cc68c13e43b4ba","2011-03-12 06:50:20+00:00","The data from strdup must be deallocated with free, not delete. I got rid of that ugly strdup and replaced the A though Z cdrom drive letter searching with Windows API stuffs.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7335 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"ca67d025e2cfd0d04adad7782c69cf37dcb4358f","2011-03-12 17:50:19+00:00","Core/DSP/Jit: Implement Saturation/Limiting when reading ACM* in 40 bit mode


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7336 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"344c4019db48c0edfb0d805d6b8c2f9211cb8ed1","2011-03-12 18:13:54+00:00","Attempt to fix issue 4234.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7337 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"37e31f2df60774a04627f12c157d000acfa6dd4b","2011-03-12 22:02:46+00:00","AudioCommon: Improve pad silence when ppc does not keep up with realtime

Uses the last sample from the ppc buffer to fill the samples the ppc
didn't deliver data for, avoids clicking on underruns.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7338 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"47288d3dcdf927ee5c5d7808acec086ff1458fcd","2011-03-13 15:58:59+00:00","Update Italian and traditional Chinese from dolphin-emu svn.
"
"8fedc3db383b8a39f756f4d1f037e0e45662d41a","2011-03-14 01:20:11+00:00","Clean up 'ControllerInterface' a bit.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7339 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"7c536b8f15f8e6652c060a9295ff952357092d67","2011-03-14 09:38:29+00:00","DX11: Support thick lines and large points with geometry shaders. Lines still aren't drawn with correct thickness, see Twilight Princess map. But the map corners are drawn with correct shadow 'blobs' for the first time!

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7340 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"580cd2539c53a134244a7fc259816c245e2495ff","2011-03-14 09:48:12+00:00","Yikes, I have no idea how this happened.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7341 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"5f0e073d1c6ec341f5c97040370465c6fa6fb3ff","2011-03-14 10:20:00+00:00","It seems like CoreTiming's 'external event' mutex is being used recursively. This fixes dsp lle jit on thread for me. YMMV

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7342 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"257a872e35323efc55a0b8a5435f9b27a13fc1ce","2011-03-14 12:20:04+00:00","Update strings for latest changes in the code.
"
"8a2ad47a41acc70f6dafd49278d6bf0ebf984c87","2011-03-14 13:30:08+00:00","Added Arabic translations thanks to mansoor.
"
"4ccb31e7af51695bde6d00c560dd201406ad5a07","2011-03-14 13:33:11+00:00","Move translation po files to an external svn repository.  The location is http://dolphin-emu-translations.googlecode.com/svn/trunk.  I have given some of the primary dolphin committers write access to that repository.  If you are a dolphin-emu committer, and I didn't give you access, and you want it, just let me know.
Now po files can be updated as often as we want without bumping up the svn revision numbers of dolphin itself.  I left the dolphin-emu.pot and primary build files in the primary dolphin-emu svn.  The dolphin-emu.pot file will still need to be updated on occasion to reflect changes to strings in the program.  The gettextize script will still work as before for this.
Also added Arabic translations to the build thanks to mansoor.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7343 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"e161f1ada04a3792fc57083b2d4474335ace8076","2011-03-14 14:00:51+00:00","Update several translations.
"
"4c6b0d0b36a35965207ac092d02fc3520df34c2d","2011-03-14 14:12:43+00:00","Update strings from code.
"
"fdae8fd1104600906a8db4b25b84bb28edbf9961","2011-03-17 04:45:35+00:00","Update Czech, Spanish, French, Turkish, and Traditional Chinese.
"
"9e0a888ce6fc5d890eef5b13c05e35dc2239b029","2011-03-17 12:55:57+00:00","Fix a minor mistake in the last commit.
"
"268397eb2c3d9c9dcb4122ea08e7a0dda5f30b47","2011-03-17 13:32:38+00:00","Update from primary pot.
"
"75ef949aa04313ae9e9028bca8a55d51e5f8679d","2011-03-18 13:55:07+00:00","Update Czech, Hungarian, and Greek translations.
"
"0d4087bc6ca2a9c5aef5921995ae07daf436a5c3","2011-03-18 14:02:10+00:00","Merge primary pot file into the Hungarian ang Greek po's.
"
"3b5c42936650108d76cb231e7421c1c2a1a2bad1","2011-03-27 05:24:41+00:00","Update French, Spanish, Portuguese, and Turkish translations.
"
"49d0781030ec822c510c64ce4b53f38eb58a7e36","2011-03-27 05:27:36+00:00","Minor fix.
"
"3914b2000ad1e20a5ececc250af8fb07625ed135","2011-04-03 03:52:20+00:00","Update Norwegian and Arabic translations.
"
"8645b3e263ef74a27eebf489fe18357f858acf1b","2011-04-05 10:04:09+00:00","Updated French translation (some minor fixes).
"
"b5798409eb687ede86d34578c698f8f13274a949","2011-04-06 13:54:19+00:00","Move primary pot file to this repository.
"
"9b9948ad99f4dd701c218005b25e839a37d3f736","2011-04-07 02:28:04+00:00","Update strings once again.
"
"f1d2cc9921e80c2e0a974e4768e4b587a37981c0","2011-04-07 09:16:56+00:00","French translation update, according to r20
"
"23f2e2cb8c5ef0a60e41e7ae87a2a508872e7ee1","2011-04-07 11:54:29+00:00","Update Czech, Korean, and Spanish translations.
"
"7e7f16a517c171f7f9af0ed10e4110268396d72d","2011-04-08 11:30:10+00:00","Update Spanish, Portuguese, Turkish, and Greek translations.
"
"276d3fd847ce4ccf512fea5b8b845670a35d84fe","2011-04-09 12:56:36+00:00","Update Arabic and Polish translations.
"
"35e058f26b36c0b0578d3c09015f99b632d2f46f","2011-04-18 01:11:59+00:00","Update pot to reflect additional strings in source.
"
"3b1e4731b4edca450a9365f62d09852dd7bb3e0b","2011-04-18 09:35:52+00:00","French translation update, according to r25. Portuguese (Brazilian) update too.
"
"a63329d62a43784d8e69d66b55c8acbf5de1b3de","2011-04-20 01:37:12+00:00","Update from translators.
"
"2bc12ddb2cfc38392a091ac3f0eaf2c798f14268","2011-04-20 01:38:55+00:00","Why does this string keep showing up back in the translation files?
"
"f4f1949277f05e819e7c0a052930f1aba1a766c1","2011-04-24 02:50:22+00:00","Update Spanish translation thanks to Valtiel.
"
"f6494cb68a82aea04507e8ce15528cd241135397","2011-04-27 01:08:15+00:00","Update Spanish and Japanese translations.  Add Catalan.  Update primary pot file.
"
"20916c9323957113ae245b5c693b9b4960f9b6dc","2011-05-22 14:11:06+00:00","Update primary pot file for recent changes in the code.
"
"7c0a174b8634a719d739d12fd2717eaa743d0f90","2011-05-23 03:24:05+00:00","Add a string that got missed in the video config dialog.
"
"af2366c912d96caba282c54428456c3c2b41f529","2011-05-23 08:53:47+00:00","French translation update, according to r32
"
"b6327d2129e434b24f48a7a5e858a197b5665cc5","2011-05-24 00:47:25+00:00","Update Czech and Korean translation.
"
"5e8d2f69ee3f34f40a6df8d3d8d5d07b80e07c17","2011-05-24 01:10:33+00:00","Update Spanish translation.  I have had that sitting around for too long.
"
"e6de9d4fc48941844be527f1a1e9bc4884204e46","2011-05-25 12:49:25+00:00","Update Greek and Turkish translations.
"
"4ca92e6674b2da8eb35ad99b038833ba2ca75242","2011-06-01 21:21:36+00:00","Update Portuguese BR Translation
"
"83a3a6ce3043ecc6066c3a4f4eb44daf57886b2f","2011-06-02 23:29:49+00:00","Update primary pot file.
"
"c7fe3113f4a8716fc4f17240c1d3687f62f34b92","2011-06-03 00:53:16+00:00","Update Arabic, Spanish, Hungarian, and Japanese languages.
"
"3361aa31467b053444ca4efe8295efab4b691c51","2011-06-03 00:57:07+00:00","Oops.  Forgot to do the usual header repair.
"
"5a89c7ca3cb805e5bd682e49a8a584655eeac367","2011-06-03 01:05:31+00:00","Update pot once more.  The code strings just changed.
"
"7ae25cdd28b9e92ea76ec1112cfc5e6cd81f0ccd","2011-06-03 22:44:45+00:00","French translation update, according to r41
"
"2a8026b922a3338fb7abdd16ede5c1aa8707ab42","2011-06-04 04:38:09+00:00","Add yet another string from the source.
"
"558a8d32b1904d1cd5eda8a244e07648dc48048b","2011-06-04 04:45:59+00:00","Update Czech, Spanish, Korean, and Polish translations.
"
"ed53824fd8088feefeb9d23d23146a6c92d15d94","2011-06-04 18:10:45+00:00","Update French translation, according to r43
"
"25c93bf3f35e19b9b80191bd26f24adf81129245","2011-06-07 12:05:17+00:00","Update Czech, Spanish, Hungarian, Portuguese, Japanese, and Greek translations.
"
"e90ed6b9c20cf71d7adf1fa99c026ae03cf77169","2011-06-09 18:02:11+00:00","Updated Portuguese Brazilian Translation
"
"7b88c46490187ab03336a6a2e937b2b1badeadd2","2011-06-09 20:41:19+00:00","Update Arabic, Turkish, and Norwegian Bokmaal translations
"
"4794727e59ab07f230553962dbfa701464add1c8","2011-06-15 00:49:05+00:00","Update Catalan translations.
"
"5b2794b2e382b540c03f5082b55e2ee595075e23","2011-06-16 12:53:13+00:00","Update Korean translation.
"
"21b8f238edc762d3b042723ce86b5e3f88db3415","2011-06-21 22:50:04+00:00","Update Catalan translation from roig.
"
"e0a61a23efab57a82389fd38a9f1fe4cb88ca813","2011-06-23 20:57:30+00:00","Update Korean translation.
"
"d599418c472cf75985ffba84553aab3ead16e612","2011-06-26 14:08:09+00:00","Set eol styles.
Delete the completely untranslated Danish file.
"
"5e78c31a8ea8bce8267d05aeb4ea6b5f4143268c","2011-07-03 03:51:58+00:00","Update pot file for a few strings that have changed in the code.
"
"c7b44f14887eab27187f75e72e66c620f5ae4cc1","2011-07-07 03:44:44+00:00","Update Czech, Spanish, Korean, Polish, Turkish, and Greek translations.
"
"43a817e512a1c91209aaa1da3d9582e6959c3e10","2011-07-09 09:03:38+00:00","Updated French translation
"
"dc87e3d9f1f53efcf5bd677dc63224ab0924783b","2011-07-10 00:11:31+00:00","Updated Portuguese Brazilian Translation
"
"da78d57197861ea7ac4acff31dc5d85c0f491d40","2011-07-15 01:36:57+00:00","Standardize pt_BR.po
"
"d90989301b95d95e68013c5c0ea975717d968d82","2011-07-28 13:18:45+00:00","Update Arabic and Portuguese translations.
"
"716fe65e9ea0549fd74cc5bacca4d4cb721aa020","2011-08-10 13:31:09+00:00","Update pot file.  Sorry it has been a while.
"
"f43898305e01a2b74d5665fb606ecbccd79b287f","2011-08-10 15:44:38+00:00","Updated French translation
"
"d93055a7ad3778bd44d7d93d20d250c10b137c69","2011-03-14 13:33:12+00:00","Merge dolphin-emu-translations
"
"bfe7b028ce5406df1f271b667e225725de1ea5db","2011-03-14 15:06:06+00:00","pthread_mutexattr_t's must be initialized before the type can be set.

Fixes issue 4243.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7344 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"a55e63c69713ecd297019fe26c28d35df947a419","2011-03-14 21:07:28+00:00","Fix DInput and SDL.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7345 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"c83e5ee35bf18156d36150969efb28edd3236e35","2011-03-15 03:51:31+00:00","DX11: Don't apply culling to lines and points. Fixes Metroid Prime beam-charging effects.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7346 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"3454ade05e5da8ff3b182e35ca9ff4fecd441ca8","2011-03-15 04:04:27+00:00","Fix DInput rumble.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7347 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"f43a8844a27f3b97202efba8107404c3165a89cb","2011-03-15 05:12:06+00:00","fix ppc 'jump to address' textbox and some symbol menu items

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7348 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"27142fafe06e55d87b19a3af14dbb23316528fd7","2011-03-15 12:50:58+00:00","Fix auto window size options when not rendering to main.
Switch gtk keystate_lock back to a recursive mutex.  Now that the mutex attributes are being initialized properly this doesn't seem to cause the segmentation faults anymore.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7349 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"1e46f069c2133b9e3f169bfd6be7f872f1459aed","2011-03-15 13:38:52+00:00","Make the hotkey dialog close when the escape key is pressed.  I commit this as an example of how all dialogs should be set up.  The buttons used to close the dialog should use wxID_OK or wxID_CANCEL.  Alternatively you can use SetEscapeId or SetAffirmativeId to set the escape id to the id you use.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7350 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"f26a7288a7a83fd3ec4ddeca52175dae7759b1e9","2011-03-15 14:37:04+00:00","The escape key should now work to close most of the dialogs in dolphin.  Let me know of any that I missed.  I am sure there are some.  I also notice that anytime a wxNotebook is used a page should be set to get proper focus on the dialog.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7351 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"e77059d30c57a688e6a353abbcdc89603b08e55e","2011-03-15 21:57:00+00:00","Some more work on making dialogs close when escape is pressed.  Also make sure dialog modality is ended properly so that they can be closed on OSX.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7352 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"41c98f982eb44e89416fcb9c0139b6a922e14b0f","2011-03-15 23:09:12+00:00","A bit of cleanup to Core Init/Stop, Frame, and Main. Cleanup XAudio2 to attempt to fix the crash on stop(didn't help :p). For some reason CFrame::DoStop is called twice.(might be the issue)

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7353 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"5027554beb04272f675d02c6e299b64130ece5f0","2011-03-16 01:12:27+00:00","Build fix for linux, and fix a deadlock when the core is initiated.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7354 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"da82d7e178fc25939b0b6d9f8f4d1c1005705811","2011-03-16 01:50:46+00:00","Reinstate AfterInit(), which is still needed for MacOpenFile()
to work properly and possibly also wxProgressDialog.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7355 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"1ee5e3a0e10114609aab2068748ea13f1317b58c","2011-03-16 01:59:24+00:00","Fix the nogui build.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7356 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"aa19fa97d9343ac789c988798d6f3d972cb1265d","2011-03-16 03:02:25+00:00","DX11: Preserve w coordinates of lines and points. Fixes glitches when a line is partially behind the camera.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7357 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"52cb7fd4cac8b6a905235736645e025a65900ed8","2011-03-16 12:59:05+00:00","Fix and issue with the escape button closing the hotkey dialog when trying to set a hotkey to escape.
Fix a few more dialogs to close with escape.
Fix an issue with the pulse audio sound backend when the dsp emulation method is changed, and the frequency setting was not respected.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7358 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"2692ba26977bc2c981e083b05870ae193f83f813","2011-03-16 21:08:20+00:00","Make 'GetLastErrorMsg' thread safe.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7359 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"bca4f94b47c13f6ddc9e00f451d32b1cc9cc54fb","2011-03-16 22:22:21+00:00","More work on making dialogs close when escape is pressed, and some general GUI code clean up.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7360 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"571013acd8a8cb93ef6c57df4189cf1469b0a270","2011-03-16 22:48:17+00:00","Fix the video software backend. (closes issue 4269)
Some warning fixes and cleanup.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7361 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"9198e83ae1bce49e872da04b5bb531c80ffde818","2011-03-16 22:58:24+00:00","Hack Misc.cpp into building on OS X.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7362 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"aabb542d474b4a92099aebceccc95bb47f66de9b","2011-03-16 23:57:13+00:00","Fix the framerate counter of the software graphic backend.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7363 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"cab5fdb44b47bb35c6a34cf14d7e84d2f6ebad0a","2011-03-17 01:42:13+00:00","Make sure that the video software backend doesn't get stuck in an infinite loop on shutdown.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7364 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"e4141c331e6aadd9ab9c8606eddf4dcaa722d2cc","2011-03-17 04:26:01+00:00","Finish making dialogs close when escape is pressed.  Fixes issue 4265.  At least I think I got them all.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7365 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"78d9f927e1ea051e30d808da965a2be2f14de5e3","2011-03-17 10:17:45+00:00","Eliminated memory leaks of the save state code and put it in a namespace. It is prettier than before, but it could be better (less global usage). Other minor stuff.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7366 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"88c8b891f7309b3a2254f529242ecb3ebef9c69d","2011-03-17 10:41:56+00:00","Changed the frame display to the number of polls. Changed frame counter to VI counter. Changed g_FrameCounter to u32.  Patch by bzb95.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7367 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"e26efc8561af8659bfc7b3a98cf8a9f67ece97a7","2011-03-17 12:46:54+00:00","Linux build fix.  Why would you swap with an empty temporary vector instead of clearing a vector?  What were you thinking?


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7368 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"a2159f38bde3833d7260cf5b7adc550d77e346ac","2011-03-17 13:32:25+00:00","Change VERSION back to STATE_VERSION.
Update dolphin-emu.pot file for recent changes to strings in code.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7369 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"ed6fa744ad052328831a01e8cb6a60ec02449987","2011-03-18 21:21:19+00:00","Core/DSP: Fix loop/loopi for Interpreter and JIT.

A repeat count of zero still executed the instruction once. Fixes Zelda Ucode
audio crackling.

Fixes DSPLLE audio in: Luigi Mansion, Pikmin, Super Mario Galaxy,
Zelda CE, Zelda Four Swords, Zelda WW, Zelda TP.
(Thanks LM for testing)



git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7370 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"7360bd0d88e8403a61f78699eac65b937b6cf0b4","2011-03-18 21:30:47+00:00","Missed a dialog before.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7371 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"3eb2196d27b682e3aa47bd82119acd904f662cec","2011-03-18 23:10:56+00:00","Build fix. :3

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7372 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"8cacd4d2d786d3c563de31ac11757086fcee1b1c","2011-03-19 00:21:59+00:00","Make sure to not do any XFB emulation at all if it's not enabled.
Should fix issue 4294.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7373 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"4079523346c4a48e06621a97d4227c31c124ad7d","2011-03-19 00:50:34+00:00","Game-specific video settings:

* Moved the config validity check to reflect the emulator enforced settings at the config dialog
* Removed some obsolete validity checks
* Corrected 'EnablePixelLighting' typo in the ini files

Fixes issue 4277.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7374 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"50c5dbdb096ebc340c8c40cd3b70c2ba865e0790","2011-03-19 01:55:57+00:00","Added a toggle switch for the OpenMP texture decoder in the graphics settings.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7375 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"aac297296069e5cb9487e58fe45339154bb106cd","2011-03-19 02:28:49+00:00","Fixed a memory leak that occurred while compiling the OpenCL kernels.
Reset the frame counter after loading a save.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7376 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"8b2eddf3f3b61c4b15436703952ac0a8d9632242","2011-03-19 04:06:46+00:00","Enabled OpenMP support in the Windows 32bit builds.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7377 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"3db702fe17ddac62b614587717ad8db693257008","2011-03-19 10:05:57+00:00","Removed the OpenMP option from the DolphinWX project.  It was causing a slowdown when the EFB to texture option was activated.  This means that the OpenMP texture decoder option will not be hidden for non-OpenMP builds.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7378 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"205637ccc31c82e48363a46c635e04f7a8d77e8e","2011-03-19 12:58:55+00:00","Hide DX11 on WinXP (fixes Issue 3719)

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7379 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"d14efe561bf8a6c57cbc15fc9e2c3b509c45c10e","2011-03-20 18:05:19+00:00","Import r67258 of the wxWidgets trunk, which I expect will before
long become wxWidgets 2.9.2, which in turn is expected to be the
last 2.9 release before the 3.0 stable release.

Since the full wxWidgets distribution is rather large, I have
imported only the parts that we use, on a subdirectory basis:

art
include/wx/*.*
include/wx/aui
include/wx/cocoa
include/wx/generic
include/wx/gtk
include/wx/meta
include/wx/msw
include/wx/osx
include/wx/persist
include/wx/private
include/wx/protocol
include/wx/unix
src/aui
src/common
src/generic
src/gtk
src/msw
src/osx
src/unix


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7380 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"215baff4c8524ec7aa2a084ab7323a57f3261f54","2011-03-20 18:35:07+00:00","Simplify the SCons build:

With wxWidgets 2.9.2 now in Externals, SCons was the only
external dependency other than Xcode and building just SCons
from Macports caused a fair mount of extra stuff to be built
unnecessarily, so just include a copy of scons-local.

Always build wxWidgets from Externals which allows us to get
rid of the home-grown autoconf machinery in SconsTests.

The main use case for args.cache was the wxconfig option,
which is no longer relevant after the above changes and
caching options has a lot of potential for confusion,
especially since other build systems don't tend to do this,
so we no longer do it now.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7381 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"010a60c56a0c929c05051dbadc69eebfc5c1b3d1","2011-03-20 23:30:24+00:00","Core/DSP/Jit: Fix instruction size retrieval in Branch emitters.

Reading the instruction from memory at the given address and using that
as index in the opTable leads to more correct results than using the
address as index into opTable.

Also assert when trying to execute a bad instruction instead of crashing
without warning.



git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7384 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"8eaed1c105d2ecd3c63cc728eee8bc1a493a27db","2011-03-21 03:39:28+00:00","Partial fix for 3D Vision.

It now works in the debug builds, but not in release builds for some reason. I'm not used to big projects like this so it's probably something obvious that I'm missing. Exclusive full screen mode seems to need the fullscreen resolution for the backbuffer when the DX device is created, so I used adapters[adapter].resolutions[f].xres and yres to get that, but in release builds, that gives me the windowed resolution (in debug it give me the fullscreen res, like I believe it's supposed to), which it reallly doesn't like.

It's not a difficult fix probably, but I've been staring at my monitor in confusion for too long now and need to get to bed. If anyone wants to test, you can still enable the 3D Vision option, it just wouldn't be 3D (obviously).

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7385 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"068855bbd641efd0d941c2005fb4f33459e32b03","2011-03-21 05:46:33+00:00","Moved per-game graphics configuration to the game-list right click menu. It will be too difficult to make the 'profiles' drop-down thing work with 3-state vs 2-state checkboxes. The per-game settings now have 'undetermined' states, except for the radio buttons(I'll fix that later). It's super hacky right now. Video config (probably all config stuff) could be redone.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7386 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"c87f5cbb73a457708f36658af224b4f2b2678ab7","2011-03-21 11:36:26+00:00","Linux build fix.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7387 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"0daacc04d3576a1942abadbd28c457a741b20e28","2011-03-21 14:37:33+00:00","*sigh*

I knew it would be something tiny. 3D Vision is fixed now, I'll make this 3D Vision specific if it causes any problems, but I've tested it and it seems fine.

For anyone interested, because fullscreen wasn't set for wx first, the menus and stuff were being included in the size of the frame (which is being used for the backbuffer size), so it was getting 1920x1062 or something weird like that (for 1080p). In the render function, it then checks to see if the frame resolution is equal to any supported resolution and if it isn't, bumps you down to 640x480, apparently an unsupported 3D Vision mode... though now I think about it, I'm not sure why it wasn't messing with regular fullscreen mode.

This would have been so much easier with a working mouse...
I'm not even joking, my replacement mouse just arrived at the door...

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7388 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"7f5da62d1c4360e5571ff457fe90d30f7b976d51","2011-03-21 15:54:16+00:00","Linux needs to have the wxWidgets window go to fullscreen after the display resolution is changed.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7389 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"d332cc342df2d960fb7e44b8c1c090212a72bb01","2011-03-21 16:06:40+00:00","OS X also needs to have the display resolution changed before
setting wxFULLSCREEN_ALL.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7390 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"017735b9ffdc7305f07b461a100f62c1d2fbe9ef","2011-03-21 19:57:31+00:00","* GUI Video-Settings changes:
- Removed recent ghanges about separate per-game Video Settings
- Added 'One Window 3-State Support' (very close to full implementation)

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7391 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"f8620fcd0b4dcc6006a6a228cd5cc79cc82a83fc","2011-03-22 07:27:23+00:00","Fixed some memory leaks. Only one was mine ;P

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7392 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"27f9faf7e60ddbd858e08d26f371fe3dfd908dcf","2011-03-22 09:40:47+00:00","Fix gcc build.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7393 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"1c847dd4215d60c36443985778adfe4aba96f7c6","2011-03-22 15:23:39+00:00","fix a memleak and quiet some warnings

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7394 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"e8f43238340fd6b7c733551e56957e415248432e","2011-03-22 15:37:34+00:00","Linux build fix, and silence some compiler warnings.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7395 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"cfd268073cf08abf853b80089168b437f9a10d91","2011-03-22 19:05:08+00:00","More 3D Vision related stuff. This is the last one I promise.

Hotkeys now work when running 3D Vision. You've just got to select the render window first (as in click on the fullscreen image), don't ask me why, it's something to do with RendererHasFocus in Frame.cpp. Annoyingly, escape crashes the emulator and the screenshot button doesn't do anything, though I guess any other hotkey should be working. I wouldn't usually commit this but I remember someone really wanting to be able to connect their Wiimote while in 3D, so I figured I might aswell.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7396 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"034d282ce04440bb2015739b67a75107512d2d56","2011-03-22 19:34:50+00:00","Sorry, apparently that last commit was pointless. Removing most of it. Best have as little 3D Vision mess in the code as possible.

But hey, at least somewhere along the line someone fixed hotkeys for us 3D Vision users.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7397 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"723c1158135428652a4af16b9b058f87f388ab03","2011-03-22 19:57:39+00:00","- Attempt to fix a little problem displaying games within Profile Selection in Video Properties

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7398 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"47c81bf0e884d6199c1208b40447362b50db3899","2011-03-22 20:32:17+00:00","dsplle - prevent crashing, if there is unknown opcode (interpreter, only important for tests and certain homebrew ucodes), more cleaning, removal of obsolete TODO-s

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7399 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"ae9de182f35f86ad1f192655d95614f3be08db5a","2011-03-23 00:54:31+00:00","* Added proper string conversion support to VideoSettings (now you should see list titles correctly)

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7400 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"c39e3c17e199ed8f421ed62a9457ad53ba5caebf","2011-03-23 02:06:40+00:00","Fix a few issues with the size of the logger pane.
Also some other general clean up issues.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7401 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"668d33518173e621c860197bbc87db83765f0d4a","2011-03-23 02:17:03+00:00","Linux build fix.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7402 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"c990f1293229f54fab44a9e151980d2fb2e8fee7","2011-03-23 04:31:00+00:00","Eliminate ini file loading in the paint, sort, and tooltip events.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7403 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"35508d7a998ab61228ebf980ffbe7dfbf93d84ea","2011-03-23 09:13:01+00:00","Update to wxWidgets r67291.

Fixes a wxFileSelector regression on OS X.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7404 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"66632f06455f0a08ba5ac7ada37c35103ee9ad7b","2011-03-23 19:43:04+00:00","VideoConfig revision:
+ increased VideoConfig integrity
+ fixed a clamorous fault, before completely forgotten, about handling parameters attached to RadioButtons controls

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7405 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"63ed047aef4879d7f82f59b25e64c7e466f6b651","2011-03-23 21:54:14+00:00","Only create a GameListItem cache if the image is valid.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7406 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"85f717c7c70134bceebff9be9255b2071a101f86","2011-03-24 04:20:46+00:00","only paint GameListItems if any exist

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7407 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"89798575c33897b132c465e9de9f908e995f2fbd","2011-03-24 04:26:21+00:00","vs2010: make sure minimal rebuild is turned off

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7408 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"bb90b7fcea644361e53f7131ce0360fac7cf5728","2011-03-24 11:59:39+00:00","DSP:
* LLE dspinit hax (demo disks, zelda collectors edition, ocarina of time working (again) with lle)
* LLE interpreter 'DSPonThread' working again

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7409 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"49a5fbef4f47e50fa25bc35805cb2006794c9bba","2011-03-24 16:51:37+00:00","Unfortunately, the changed fullscreen order in the fix for 3D Vision was causing some problems. I'm sure there's another way to do it but for now, 3D Vision users can always compile new builds with the fix.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7410 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"df9f614b58f373ffc2b03bb1039274528ba3a15d","2011-03-24 20:06:24+00:00","Have DX9 plugin also dump frames on every VI as opposed to every new frame (follow-up to r7131 and issue #4064).


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7411 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"c99c247ed598ff902221bf90b0972350f253bf4a","2011-03-25 18:12:40+00:00","When using the 'Start Renderer in Fullscreen' option, really start in fullscreen.  In other words this now switches to fullscreen before the renderer is initiated instead of after.  This is a partial fix for issue 4316.
Also, if the render window size changes while frame dumping, scale the resulting video to prevent clipping on linux.  This is a complete fix for issue 4316 on linux.  I don't know how to implement this on windows though.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7412 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"f8037e3ccf7723c2c02f7cfae74128561e304727","2011-03-25 22:28:18+00:00","Core/DSP: Split extended opcode 0xc0/mask 0xc0 to account for 0xc3/mask 0xc3 variant

In assembly, these are 'ld $ax0.d,$ax1.r,@$arS with their n,m and nm variants,
which have been special cased for S==3. The regular 'ld can be decomposed
into lrri $ax0.d,@$arS and lrri $ax1.r,@$ar3, while the S==3 case decomposes
to lrri $axR.h,@$arD and lrri $axR.l,@$ar3. The latter variant will be
disassembled to 'ldax $axR,@$arD after this change. The assembler recognizes
both the new 'ldax variant and the old 'ld with @$ar3 but the disassembler
only outputs 'ldax. Besides the readability, this allows for more correct
register use analysis(when it's done).


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7413 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"07c4da6084e6d87cf25f87868da10c068721c19f","2011-03-27 02:55:08+00:00","Add graphics FIFO recorder and player for debugging the graphics system.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7414 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"99e4a500dcd051277fe24705539ad1f4948b82ec","2011-03-27 09:28:51+00:00","Fix scons build.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7415 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"312c684fdccf8614a0bd26e9f93f9dc36da5780d","2011-03-27 22:23:44+00:00","VideoConfig GUI:

+ Added 'Reset To Default' functionality for per-game profiles.
- Solved a window centering problem that occured during switching between Default Profile and a Per-game Profile.
+ Added final & complete support to reflect changes on the fly and real-time in all cases (even when you edit Default profile).


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7416 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"975ce523b68229917703702b0e7f6722b3ced37d","2011-03-27 23:05:18+00:00","* fix crash for x64 and debug build

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7417 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"40b8db30e3e0499afa76e0299c0e7f8255bb4ce7","2011-03-28 05:42:21+00:00","DX11: Correct line width and point size by taking viewport rect into account. Twilight Princess map looks almost perfect except for the drop shadows around the borders: the lines are too skinny, but the corner points seem to be correct.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7418 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"beb6094708e2fc8821705d8f7fe6b0fe12a15ec7","2011-03-28 11:34:27+00:00","- Removed RTTI support

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7419 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"c316417a34c82fcf761f50890d8931840465ac20","2011-03-29 14:30:09+00:00","- Linux build fix

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7420 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"3d5d205c735d3877794a169338432bddf8abccad","2011-03-30 07:17:23+00:00","I think clean up DX11 code a bit. Used 'smart' pointers to avoid need to manually AddRef/Release in many places. Eliminated the D3DBlob class (replaced with just D3D10CreateBlob). Eliminated some Init/Shutdown functions (moved stuff into ctors/dtors). This should not affect behavior at all, only code maintainability.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7421 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"306c3570d1162a423ec12d08c8b8168e6f299c15","2011-03-30 10:46:27+00:00","Eliminated a memcpy in DX11's vertex shader disk cache loading. Maybe games will boot faster now, who knows?

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7422 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"3ef8a57da648f207e41b5997e5e0a552cd9b2b32","2011-03-30 16:01:03+00:00","DX11: Fix issue 4345

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7423 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"28c32fcbc793d1608050b5ded0e63bd5b28b36a7","2011-03-30 23:32:19+00:00","Set up some more emulated wiimote default keys. Enabled the nunchuk extension by default, with some key mappings.  Fixes Issue 4266.(mostly)

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7424 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"44b4198d17a9188e879ec9e29664178c72a8d165","2011-03-31 05:36:54+00:00","Fixed issue 4141.(key press beeping) Initializing the video backend in the GUI thread seemed to be the cause for whatever reason. Hopefully other platforms don't hate this change.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7425 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"7c9f836a282e4c061ea803a25ee0b0538b58edd1","2011-03-31 06:20:15+00:00","Fix issue 4267. (but not really)

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7426 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"bebd66078f1191889b16a57b70147a5953072e6c","2011-03-31 11:07:31+00:00","Create sys conf if it doesn't exists instead of asking questions


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7427 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"d141dd6509f52275325c8402b918072e35a65fe1","2011-03-31 17:18:37+00:00","Linux build fix.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7428 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"b75d5d1676f0534c9665ffa5500a8ed94df4894d","2011-03-31 20:33:11+00:00","Fix the segmentation faults on emulation start on linux.  The HW::Init() call needs to be before the video backend initialization.  This is the way it was before soren's change in revision 7188.  Now the emulator initialization sequence is pretty much back to the way it was before.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7429 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"783c89f108a6ddfbd80c6dfb90e51e01d74a6800","2011-03-31 20:41:59+00:00","videocommon depends on core for Fifo Recorder

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7430 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"15c51c37f3f806219f04c22897ac651d49ba2023","2011-04-01 01:35:07+00:00","Add a 'force no texture filter' option, useful for some 2D games (like Mega Man 10) and people who like their pixelated graphics.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7431 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"7a9a47376f9540d99393c0369c5f5c1a9188db53","2011-04-01 01:46:18+00:00","roll back r7431


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7432 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"021193b22f93bd77da407e79672a74f08b3eceba","2011-04-01 07:43:02+00:00","Use mutexes in LogManager to make it threadsafe, as suggested by beistin's patch. Change some LogManager function names to be consistent with Dolphin's naming conventions.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7433 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"0ed542206a34c3710d6e2c6e89e6512f285a96b8","2011-04-01 23:57:06+00:00","Fix SDL 1.3 support.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7434 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"c4cd8d84e4a172223d93ce6ccf320980947cb837","2011-04-02 11:38:29+00:00","Revert r7086.
Preferring the slow code until it gets optimized properly...


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7435 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"426f18764212a03bdf1a2261e5e8720bd50c0b36","2011-04-03 18:08:04+00:00","VideoCommon: Update color writing mask if pixel format changes.
Possibly fixes issue 4340.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7436 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"b6222a5b611432c614c47853782e0048da073596","2011-04-05 22:46:57+00:00","* One Window 3-State changes (VideoSettings GUI):
- Added final support to string type (planned implementation reaches 100%)
- Added support to post processing shaders (OpenGL backend)
- Code Maintenance:
- Reorganized the class hierarchy
- General polishing... deleted some redundant code

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7437 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"d5c4976532fc22f8d2e09e1d06cadb12336df17c","2011-04-06 13:58:03+00:00","Linux build fix.
Also move the primary translation pot file to the external repository to facilitate updating translations when strings in the code are changed.  Now the only time the primary dolphin repository needs to be changed for translations is when a new language is added.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7438 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"41915b2aff1a393060ce8debc9acb074840c2dbd","2011-04-06 15:51:55+00:00","- Mac build fix

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7439 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"fa0b0cb08f53b2bb3eb61f911a3816cbe4ebfaaa","2011-04-07 02:27:45+00:00","Fix some strings for translation in the video config dialog.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7440 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"6ca5d7c7c8230322e52bd3f08e8700c45f04d0c4","2011-04-08 21:05:19+00:00","Core/DSP/Jit: Fix accumulator limiting in several extended ops

Corrects some audio in Pikmin when using DSPLLE Jit.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7442 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"77a4a649093f8d14574a81e0cbfc7cbc097cb39e","2011-04-11 01:49:32+00:00","Fix an error introduced in r7083. In the pixel shader manager the farZ and zRange of the z bias were flipped. Switched to using the viewport struct rather than a raw float array to hopefully avoid such confusion in the future. Fixes issue 4060.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7446 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"37beef5a35f70fbcabb29dfa4473f879195b6ca1","2011-04-11 15:57:45+00:00","Fix sysconf generation.  Fixes issue 4348.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7449 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"4f603ef7303c5e79f6bdfaca1304b46e8684f7f0","2011-04-11 20:54:52+00:00","Core/DSP/Jit: Ensure aligned stack when pushing registers for ABI calls

This fixes issue 4378: DSP LLE Jit not working on OSX


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7450 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"a1882d251766f5cc2fa5c7d0ae322b3f4d0d7317","2011-04-12 01:06:45+00:00","GeckoCode float operations: Fixed Issue 4387. (hopefully)

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7451 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"325213d75fab17082b5a47e0f46a727f1d3213d9","2011-04-13 10:32:03+00:00","llejit/clrp - gbakey working now

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7456 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"92f200e87b70fd6bd9907e32ed9ed64e28ecff83","2011-04-13 16:47:13+00:00","llejit/addaxl - Fix issue 4257 (SSX On Tour crashing with llejit/64bit)

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7457 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"09042aa569f17445dffd5d81f5a08deeae1da00f","2011-04-14 10:14:04+00:00","llejit - shift instructions should be correct now

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7458 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"12c38d3afae66ad2f434e075098739478bb6a4b4","2011-04-15 13:04:20+00:00","llejit - fix for flag generation code + dspspy jit workaround

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7459 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"9fc12bcaa2e8586468e93c2e9822ca5ad83e91da","2011-04-15 22:32:40+00:00","DX11: Resolve multisampled EFB before encoding.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7460 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"9b697ed28f78ac01d87608f179a4d4f4d5b4de04","2011-04-15 22:34:54+00:00","DX11: I think I've figured out where the game enables texture offsets for lines and points.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7461 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"4e4a613b8bdfbf6980d45fa56fab5d5836f72a3b","2011-04-16 14:08:36+00:00","Core/PowerPC/JitCommon: Put the quantized paired/single load/store tables into the code memory.

This makes sure they are below 2G on 64bit systems,
allowing us to continue using the simpler 32bit accesses.

Fixes issue 4357 and issue 4397.



git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7465 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"3983a8d22f5a442a480a71da4626447c0b8bd24d","2011-04-17 00:42:56+00:00","DSPLLE - Donkey Kong Jungle Beat (WII) / Pikmin 2 (WII) audio fix

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7468 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"7f745d67cec8b445c8e29308c8a5e094430d4505","2011-04-17 16:44:42+00:00","small fix for previous commit (prevents startup crash, if GC game was started after WII game)

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7469 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"73031229f7b01eb2889b1dc93e5b60b44d23268c","2011-04-17 21:39:58+00:00","Fix a few strings for translation.
Fix a minor icon issue in the game properties dialog.
Use a little hack to deal with spaces in file names.  Need to find a better way to deal with this.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7470 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"58e1d90a3e5033d03773d7cc6abbac9efaef76f7","2011-04-18 15:12:56+00:00","llejit - asrnr fix and reverted Do_ARAM_DMA() change from my previous commit

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7471 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"24b0ef52a01db29c35e3126ec50f6c77c99f3ffb","2011-04-18 16:30:46+00:00","- fixed a bug on GameList's MenuPopups (Windows Seven/Vista platforms, issue 4403)
- fixed a problem/crash which occurs with some gcc versions (in general on Linux systems, issue 4400)
- other minor GUI changes

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7472 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"35c9c60b381c74cb9c513f5572c09c520388e97b","2011-04-18 17:35:03+00:00","- 'Sending' some changes of my previous commit to Windows build only

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7473 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"f7423ea91694d36eaab3c26cceb353526abadf56","2011-04-20 14:46:36+00:00","DSPLLE - 'Super mario all star 25th anniversary' audio fix

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7474 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"156c914185d1dca43d980e14462c9573ddda86aa","2011-04-20 15:25:21+00:00","- Time extended in which the tooltip remains visible. (Windows PTFs)
- Better fix/location (wxWidgets source) for the MenuPopup fix. (Windows PTFs)

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7475 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"67c0f67be9bd3230a7d3bd1a4fc4baf18006d251","2011-04-20 20:38:55+00:00","small WriteARAM() fix i forgot before

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7476 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"f777aca3a6ba20a11816eacb2620ed884883bc97","2011-04-21 22:02:09+00:00","minor correction to the tools menu, no longer uses uninitialized data when system menu is not installed

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7477 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"35026f9de1eb6e2128b87ac28588fe38d1f0f6fb","2011-04-22 15:51:40+00:00","Core/Common: Allow LEA(32,...) with M() OpArgs exceeding the 2G range.

Fixes JitIL in debug builds.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7478 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"af5d5b5bebb07aadb23a3c89b338e2dbabf06edb","2011-04-23 13:35:29+00:00","WriteARAM() revert, this should fix ssbb/u

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7481 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"02fa44e473a85bbd7300096be4e302ebd0bb0492","2011-04-23 17:25:29+00:00","this should fix ssbb/u (2nd try)

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7482 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"8ca38ef7b227bd578e4221c3aa5714c6ba4a9602","2011-04-24 11:14:53+00:00","dsphle - dkjb wii ( fixes issue 3415 )

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7483 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"a779b92a09dccfb411a1bee84b078c7b2877379a","2011-04-25 20:06:45+00:00","Remove configuration profile support.
I.e. revert most of the video configuration dialog changes since r7483.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7484 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"0429905d55e482dcda649fa0997ac190d0b424d9","2011-04-27 01:10:58+00:00","Add Catalan language thanks to (and at the urgent request of) Jordi Coma.  Also fix a few translation strings in the code.

Reminder:  Never mark the empty string for translation.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7485 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"d5e0d1d08fb58434ae4983012952d0064d8aa747","2011-04-29 14:37:47+00:00","New video configuration dialog design:
- added a 'Hacks' tab for everything which speeds up emulation
- regrouped stuff in a more sensible way
- Renamed some options to be less confusing.
- by disabling ALL checkboxes, you'll get the most accurate / recommended configuration now
- Merged the ATC options to a single slider with 4 values (with the rightmost being 'ATC off')

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7486 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"a86f79f44777e4dbca6a3f09802e707e44b67013","2011-04-29 23:02:06+00:00","Quick fix for Dolphin crashing when using 3D and clicking anywhere on screen. Basically just re-adding something that I removed a while ago... it wasn't needed anymore, apparently it is again.

Note: Newest nVidia drivers break Dolphins 3D (270.xx), not sure why yet, gonna ask around. It really confused me though when trying to fix this issue, spent at least an hour trying to figure out what the hell was going on. I eventually realised a build I knew worked in 3D was having issues...

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7487 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"b729fc8748fc519109b6960d7d3b7eb4cacb6796","2011-04-29 23:11:18+00:00","Video configuration dialog stuff:
- Introduced a description text field (!!)
- Fixed ALL setting descriptions
- Various other string changes
- Removed the projection statistics setting

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7488 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"770b0d4552422af2789bc27ca658949e3676803a","2011-04-29 23:43:37+00:00","- Do not parse numerous video options from the game inis, like:
Show FPS, Input Display, Statistics, Projection Statistics, EFB Copy Regions, Dump Textures, Dump EFB target, Dump Frames, Free Look, Use FFV1, Show Shader Errors, Texture Format Overlay, WireFrame, Hotkeys and Adapter
- Also removed various game ini config values which were still parsed from the Video section.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7489 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"fdc05bfe291ba2512dbc71745507fa0513979d74","2011-04-30 01:27:03+00:00","Fix IR pointer of emulated Wiimote if sensor bar position is set to bottom.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7490 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"6577a5deb6658149e4cfa50678fec56cd0a21f26","2011-04-30 12:58:03+00:00","Add a partial fix for 4xSSAA in D3D9 (issue 4090).


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7495 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"3e384cac7f97d7a577e54443711d8a436cc35ea5","2011-04-30 14:08:58+00:00","Fix EFB format change emulation in D3D11 if MSAA is enabled.
Fixes issue 4346.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7496 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"8791c1c372a10d2256143c69b1e3c6aad882b41c","2011-04-30 14:27:35+00:00","Use the recommended video settings as the default configuration:
- Fast Mipmaps enabled
- Safe Texture Cache enabled at 'fast'
- showing shader errors by default
- using Native as internal resolution
- using EFB to Texture by default
- ignoring EFB format changes by default (turns out r7436 made this in Super Mario Sunshine unnecessary anyway :P)
Any game which depends on other settings has that specified in the game ini, so I think this should be fine.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7497 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"fe2d09576d0e90eb1dac52bf54c0b8fef0697bcc","2011-04-30 17:34:08+00:00","Fix 'Disable Lighting' in D3D9 and D3D11.
Fixes issue 3185.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7498 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"b56417113d54d8bb799fcfcc7d493ad6270cd774","2011-05-01 13:41:06+00:00","Fix OS X build (hopefully).
Fix a small UI inconsistency.
Fix a warning about shadowed variables.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7501 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"09d9aab18a7dbf7be8b9afc9551faf94b030d1d8","2011-05-02 04:14:47+00:00","fixes issue 4388

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7502 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"d27753796e2085f0129818779b886f6c23cebdb2","2011-05-02 05:02:18+00:00","only create the data directory for a title, not data/nocopy. fixes issue 4453
fs::open does not need to create the data directory, es_diVerify does that.
change applied to CBoot::Boot_WiiWAD as well (es_diVerify isn't used for wads).

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7503 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"263fc19d6f72482c90ac56107ff4621d1b943846","2011-05-02 15:23:27+00:00","fixes AFC type 5 decoding

(At least for Super Mario Sunshine, from whose ucode it was derived - hopefully this won't break other games.)

Fixes Issue 4437.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7504 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"06013852711c18f7b8ce31b6b6bbe0162abe7c33","2011-05-03 00:06:44+00:00","Rewrite to parts of the DTM code to remove the need for temporary files. Should fix files occasionally getting corrupted. DTM export dialog now asks before overwriting a file.

Saving a state that is not recording over one that was will now delete the old recording. Fixes trying to record with the wrong savestate.

Fixed some compiler warnings.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7505 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"7144162f0fcf3f452751311e0bcf244ee8cfbfeb","2011-05-03 17:15:38+00:00","Fix bug with Dolphin crash on stop when recording.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7506 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"3d7a2b92d44e4478d32aa528af00caaeb141d787","2011-05-05 11:06:04+00:00","UpdateAudioDMA() fix/revert -> fixes Rayman 3/Smugglers Run with LLE, + small optimization for lleint/llejit32

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7510 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"ff63ef20c2bf33377c6c15aab5db08b2f8baad3b","2011-05-05 14:53:00+00:00","Trying to fix mixer problem when AIsrc is @48kHz, should fix games like All Star Baseball 2004/
XGRA Extreme-G Racing Association/Conduit 2... Enabled 48kHz output for LLE (before it was just 32kHz). I hope it works, if there are serious problems, it will be reverted.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7511 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"c88126233b34dd950efc0fff9f91d1ca21a455b0","2011-05-05 22:38:07+00:00","Update the country code in SysConf when wii system language is changed.
remove annoying assert for invalid loaders on disc titles.
Fixes issue 4287.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7514 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"c225f8b363744f21076722b6affe35f3defa3a4c","2011-05-06 20:26:54+00:00","small fix for 32bit dsp HW reads

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7518 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"9222a818ae01323278406e78e5514e89c9962c7e","2011-05-06 23:35:48+00:00","DX9: Pay attention to the pitch of a locked surface.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7519 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"69645d421b4e570ac017b9380c49682f23ec03e6","2011-05-07 03:48:27+00:00","Move the HLE hack of setting.txt file redirection to the BS2Emu
we already copy the file to memory here, now we also copy the file to
1/2/data/
This should really fix issue 4287.
Thanks to hosigumayuugi for finding the exact cause of the issue

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7521 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"423db843b78d9ab9b096f2d438a2021516eebf32","2011-05-07 03:52:32+00:00","typo/ put back a log that i removed

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7522 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"e29e3175803d95b1d9380d46f3953a3062e00c36","2011-05-07 22:00:05+00:00","OGL: Fix changing MSAA mode during emulation.
Fixes issue 4469.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7525 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"561b227b7794fbccec71dff368e892efbfa88ba4","2011-05-08 00:37:44+00:00","correctly decrypt the files when importing a wii save
fixes issue 4462.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7526 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"ffea55d42acb47e393bd631c1716b72a1791a847","2011-05-08 02:56:09+00:00","Consolidate wad installation to one function in the GUI
now if you install the sysmenu from a wad in the gamelist the menubar will be updated with the new sysmenu version

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7528 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"1236e584e0914b307016ac42143cf602e2e4cb23","2011-05-09 05:47:29+00:00","NAND:Consolidate Wad/Directory loading in CNANDContentLoader to one function
add ticket to CNANDContentLoader
move wad installer to CNANDContentManager
system menu can now be launched from a wad file without being installed first, (return to system menu from another title will still only work if system menu is installed)
cdb.vff: flushed to disc immediately, creates if the file exists but is too small, moved creation to Boot_WiiWad

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7530 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"8cb2443c2fe22196c26d6e15608273dbc9e6551f","2011-05-09 07:43:02+00:00","Fix non-Windows build.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7533 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"80247835020092c598fcee519f77e7d581b4d146","2011-05-12 02:14:45+00:00","Don't resize render target to handle out-of-bounds viewports. Instead, adjust the projection matrix.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7538 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"3acf0eb3af98009cc4e00bd9bcf43873dc26c4da","2011-05-12 10:17:47+00:00","Dynamically load bthprops.cpl during runtime.
Makes Dolphin run fine under Wine again.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7540 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"8c304d912a2b8a3b68420218280dbfd8a0820534","2011-05-15 17:36:22+00:00","To me, the Free Look option wasn't really broken; for quite a long time, it simply required the SHIFT key to be held before pressing any of the WASD/R/0/9 keys.

So, clarify this by rewriting the 'tooltip' for the Free Look option.  This should close issue 2882 and its duplicates.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7546 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"b5212821f886f803cf0ba06406099942b3362238","2011-05-16 22:46:35+00:00","Fix IOCTL_ES_GETVIEWCNT (uninitialized data)
GH5 Loads again
use the existing function instead of checking titleid each time a NANDLoader is needed

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7547 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"48b605df711ac2b442c0d221f71389eb9cf825a9","2011-05-18 02:03:56+00:00","Fix issue 4509

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7550 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"47135170d8be495cf9bbeb5b8549fd4b928a67d6","2011-05-19 14:26:03+00:00","Fix the cmake build for natty to find the glib libraries properly.  Yuck!
Fix a few minor compiler warnings.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7551 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"0ced20c1cf87866760be9bf59539638fd5b62356","2011-05-19 16:31:46+00:00","just a test for shfl2|bot

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7552 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"f86dcf9727edcd58477627bde444b8a84fd5b7b7","2011-05-20 11:55:51+00:00","dsplle-jit abs() fix

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7553 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"139a518e992f9b5512bd494f795e8a930bb067da","2011-05-23 03:20:42+00:00","Fix a minor translation issue in the video config dialog.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7554 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"e4fa493a2720719ef7adcc7110f0033f13943c09","2011-05-24 19:12:18+00:00","Adds the option to change the path to the wii nand root
when nand root is changed the current sysconf is saved,
and the sysconf in the new location is either loaded (if exists)
or the default sysconf is created
wii menu item is updated when the root changes
small fix to saving gamelist paths to .ini paths that are removed from the gui are now removed from the ini instead of simply changing the number of paths

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7555 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"fa7a52108629750a85d2746242442ca6f883a088","2011-05-25 02:05:48+00:00","A long time since my last commit but i have a lot of work. hope to find some time to fix more things.
some little corrections in dlist cache code, i thing they will not have effect in the remaining issues but now the code behaves more correctly in some situations.
i discover the solution for the remaining issues bur requires some changes in the vertex translator so will work on them after the upcoming Release.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7556 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"a9f7a0c284677611efd2c535f15b5c95f57048c7","2011-05-25 15:01:49+00:00","Added a game specific property to disable the speaker on real Wiimotes.

Fixes issue 4185.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7559 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"0e225a5ad19161618bc22df20f7ccbb140da2406","2011-05-25 18:14:29+00:00","some code cleanup i have left in my folder :)

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7560 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"5b5e8edb17304e411ffa5f7265c91cc0b0dd371a","2011-05-25 23:00:46+00:00","small dsp cleanup

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7561 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"3bcb406c4640fdd08f171b14dd1ef3245702182b","2011-05-27 19:55:07+00:00","Improve WII state saves by saving /tmp and IPC request/reply queues

mp3:c stores temporary files in /tmp and needs them restored to
resume properly.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7564 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"2bc3965c31cf2c55b6016fa0cf1d97d72619d381","2011-05-28 23:32:11+00:00","Since LLE can now output at 48kHz, adjust the audio dumper so that it will respect the set sample rate for LLE as well as HLE. This fixes audio dumping for LLE at 48kHz.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7567 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"a80f8c735ea301e812410bebb0549bf75f81a01d","2011-05-29 07:08:50+00:00","Always write connected wiimotes to sysconf. Ensures that they are in the slot (1-4) that they are expected to be.
Next time someone remind me to look at libogc before figuring it out myself :p
(http://devkitpro.svn.sourceforge.net/viewvc/devkitpro?view=revision&revision=3013)
Fixes issue 4368.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7568 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"5224a5a007099d46a0537f4af3098d09d1af9600","2011-05-29 13:51:42+00:00","Cleaned up, and added some error-checking to the CARCodeAddEdit::SaveCheatData() function which deals with the parsing (and decrypting whenever needed) of lines of codes entered in the Add/Edit AR code dialog.
I believe this makes Dolphin more reliable than GCNcrypt v1.1 which seems to add (prepend) a buggy line when decrypting...

- Split lines using SplitString() once more (as done with ' ' and '-' already), instead of relying on find() and substr() and the (size_t)line variable.
- Rename some variables, use a for() loop instead of a while() loop.

- Apply the StripSpaces() function to each line before attempting to parse them as encrypted/decrypted AR code lines.  Without this, lines such as 'B1PD-DXRQ-GTRKM ' (notice the unexpected space character) would be recognized neither as encrypted nor as decrypted, which could result in badly decrypted codes (a problem I had tried to explain here: http://forums.dolphin-emulator.com/showthread.php?pid=153532#pid153532).

- For the sake of error-checking, after pressing OK, throw a warning in the following situations:  when a line of code is not in a valid encrypted or decrypted format, and whenever the resulting decrypted code doesn't contain any lines.

(did I do any mistakes?)

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7569 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"75ec10b0be20eb36e40c71c562b1e0040080cc58","2011-05-29 14:08:54+00:00","dsphle - lets save some vars for ax/axwii and mailqueue - should improve savestates and fix issue 4542

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7570 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"65a2e000e97b81bfd5e7c92a4d3de27f686a753a","2011-05-29 16:59:23+00:00","correction to r7568. Correctly get the offset to the 10th wm struct in bdtinf
if you have a sysconf from r7568-this revision that was used for a wii game unfortunately it is corrupted, either delete it and start with a new one, or clear out the number of wiimotes in btdinf (change to 0) using a hex editor

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7571 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"3d676ac57e59d80b47294272996c4981f0cac8d4","2011-05-30 13:02:05+00:00","dspjit - iram/codespace reset fixed, decreased dspjit codespace to 2MB

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7572 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"39cbd73e02532159dfcde8155848a78ac9e3c061","2011-05-31 19:58:15+00:00","Fix build on openSUSE 11.4 (not sure why it worked fine everywhere else anyway).
Fixes issue 4537.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7573 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"84906edf61e66d9d6036c40f5489ff13d7e8dacf","2011-05-31 20:16:59+00:00","Fix applying anti-aliasing without having to open the gfx config. Thanks to skid for pointing out the VerifyValidity problem to me ;)
Fixes issue 4498.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7574 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"1fa17b7e290dd7c7d5f3fb6bd81c068d647ae84b","2011-06-02 07:04:26+00:00","Potential fix for errors related to 'Not enough free blocks'
changes fs getusage to return 1 additional inode to account for the directory itself
Fixes save creation for at least two games, R8XE52 (Jurassic: The Hunted), STEETR (Tetris Party Deluxe)
doesnt harm save creation in any games that i tested (about 25)

also it is now possible to boot a nand title by selecting the tmd file using File > Open

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7575 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"77a747fedb45ebc63377356afff1cb8e6f77ff38","2011-06-02 12:58:24+00:00","DSP analyzer workaround. Should fix DSPJIT on thread problems.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7576 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"837375a13dfb96051a6b370eb132c1e0c9f3f447","2011-06-02 19:32:34+00:00","Last major UI change before release.
- Moved display related options in the 'Display' tab from the general config to the gfx config, renamed the tab to 'Interface'
- Moved Wiimote related options in the 'Wii' tab from the general config to the wiimote config
- Moved various other options to more appropriate places ('Set Console as NTSC-J', 'Skip GC BIOS'
- Dropped 'Window Size' adjustment
- Now displaying a warning if one tries to enable software rendering
- Other minor changes

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7577 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"bad9fd1f1d9dfe7ada4ada47254a12e9ae360298","2011-06-02 23:28:47+00:00","Linux build fix.  Also take care of a few compiler warnings that have developed.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7578 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"7e2adf67144e636461dd43b46aabe908d6027626","2011-06-02 23:36:50+00:00","fix wxw errors:
sliders being unresponsive during emulation. Fixes issue 4496.
wxw complaining about non-stock menuitem without text (sysmenu menuitem).

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7579 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"77b8813e31c78246d940cd03553b57c5ff0da51d","2011-06-03 00:55:58+00:00","Change behavior of NTSC-J option:
Left unselected, dolphin defaults to nstc-u and sets ntsc-j if the iso is japanese (old behavior).
Selected, ntsc-j is forced.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7580 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"147e67703d9a19a1b1468a481f044328c6c75507","2011-06-03 12:26:32+00:00","Make use of wxStdDialogButtonSizer wherever appropriate.
This makes button spacing more consistent and uses the native button order of the OK/Cancel/... buttons.
(Mostly) fixes issue 4390.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7581 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"69718855b3668d75a114f7ad10204a112b62eb1c","2011-06-03 14:44:17+00:00","Fix the OSX Build, since noone else seems to care...

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7582 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"2d852f579c70b0c6e4758a6c7b2023c3a6c65cd8","2011-06-03 16:15:01+00:00","dsplle-jit - fix for 3 conditions + removed interpreter fallbacks

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7583 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"0e6bb4de3536efeeee07edafb9d6e8230ec30de1","2011-06-04 04:34:44+00:00","Fix a couple of strings for translation.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7584 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"db0c2bca5b2d81f79b2208fd54ef8dfe15c70a9f","2011-06-04 19:56:18+00:00","Allows DX9 shaders to be SM2 compatible again at the loss of accuracy. SM3 is recommended. Fixes issue 4546.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7585 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"450b5c9c3372e2e403ec54e2f351421d97216a45","2011-06-05 01:44:07+00:00","fix build

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7586 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"2c4bc6d94c3b74f2f1f2e79e678a9118ef6106c5","2011-06-05 06:30:01+00:00","fix a small oversight to changing NAND root, update locations of content.map and uid.sys

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7587 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"b808af1d7f2df9937a175e8cfd1a49c0bc41aebc","2011-06-05 07:42:40+00:00","fix infinitely recursive deletion from r7587 and actually update locations of content.map and uid.sys

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7588 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"81844b89555472d6faf55e98a2c811f578c6a951","2011-06-05 12:35:11+00:00","dsplle - small optimization for my previous commit + some cleaning

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7589 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"3fceffd8c0af89bd1aee7badf1a85d30933dc299","2011-06-08 03:09:07+00:00","We need to require at least shader 2.0a now

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7590 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"e5210de9d5da0cdbe5b8a8171b21d9ab9c5a8d5c","2011-06-10 19:16:09+00:00","just a little cleanup to maintain minimal interfaces

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7591 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"8244efcc02b1aed06214bc58e5503ca5d68b4e63","2011-06-11 19:37:21+00:00","Revert r7421 and r7422.
Should fix issue 4413.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7592 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"1d29204ae651c1d41b752914457904348319087c","2011-06-11 20:45:09+00:00","Windows: Sets the cwd to the folder that dolphin.exe resides in.
Removes the ugliness that was the portable file, and now creating a shortcut or file association is less of a pain
it is still necessary to modify the file association from '.../dolphin.exe' '%1' to '.../dolphin.exe' /e '%1'

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7593 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"880cd14710434989695e2896334b7f2d96b6a8f4","2011-06-11 23:38:39+00:00","Wiimote configuration dialog: Select first Wiimote tab by default.
Fixes issue 4587.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7594 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"c84cddc83af65b6cf33f45683663acde5dec81ed","2011-06-13 11:17:36+00:00","Revert r7078.
Downgrades Cg to 3.0.0007 again since the November release caused too much trouble for some users.
Fixes issue 4107.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7595 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"98536df915ef836a8225cb9698ca7d4790660b3f","2011-06-13 15:47:02+00:00","Make sure to reserve() exactly the right amount of elements for the std::vector before filling it with CheatSearchResult's, in order to prevent automatic re-allocations.

It turns out that this (somewhat) gets rid of memory-related exceptions which used to occur (especially) during 8-bit cheat searches.  At least this is the case with my computer that has 3GB of RAM (the issue didn't seem to be caused by 100% of RAM usage, however).

Hopefully you'll be able to perform the following steps without errors now:
1. Open any game in Dolphin;
2. Go to Tools->Cheats Manager, and open the 'Cheat Search' tab;
3. Preferably set the 'Data Size' to 8-bit (the smaller, the more initial search results);
4. Press the 'New Scan' button;
5. Use the 'Unknown' search filter (which won't narrow the results down at all);
6. Press the 'Next Scan' button.

(oh, and fix a typo in a comment I introduced in r6791 :p)

Anyway, make sure to tell me any eventual errors/regressions.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7596 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"5bdf27d159c131677ef64ba2760029288bcd24cd","2011-06-14 15:12:55+00:00","Adjusted the IPC_HLE timing to fix the stuck rumble problem in some games.  Fixes issue 4532.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7597 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"d4d7e2515ffbd34bf32f6a56bd5c69aa38f0a507","2011-06-15 12:50:47+00:00","Apply the simple NULL-checking patch from issue 4311.
Judging by the feedback provided by other OSX users, this appears to fix the crash when starting Dolphin on OSX with devices that have an empty name.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7598 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"0fcf1d6197ff13a9e88e11a07dbf8e87f8d29e81","2011-06-15 18:12:51+00:00","PPC/faddsx/jit - fix for Starfox Assault (invisible boss problem)

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7599 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"ced315f677e6deae4d371ae581be79d37b8881be","2011-06-17 09:19:13+00:00","Properly destroy cheat manager window when closed.
Fixes issue 4595.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7604 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"73744a991a8e8ca78bbb70a45baf0b6428b206b7","2011-06-17 09:35:03+00:00","Properly enable audio backend changes.
Fixes issue 4601.

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7605 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"b705b92075a6ae8a746b80556ba21d2a3931575c","2011-06-17 13:14:55+00:00","On linux don't check to see if the xdg-screensaver program is present at build time.  Just build in the code to call the program.  If the program does not exist it will silently fail, and the screensaver will not be inhibited.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7606 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"c2475f852e3a3b77db22e91d25fc913cd75dda32","2011-06-18 04:04:48+00:00","If hardware fails to initialize when emulation starts, die gracefully.  This should fix issue 4602.
Also don't try to save and load states when the emulator is not running.  This should fix most of issu 4600.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7607 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"bc416a552e8a80521cbb93aa674fcdc29b2cd400","2011-06-19 01:22:34+00:00","Make sure the play button is disabled while a game is starting when not rendering to main.  This should fully resolve issue 4602.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7608 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"693f276a68d7aae5977cc6704a095a573355e75a","2011-06-20 05:48:12+00:00","Small update for disabled Fog for older hardware that fails to divide by zero in shaders

git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7612 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"2d1fef29892720b72bd4c20098a46679d2f08474","2011-06-23 12:21:08+00:00","The user Config directory in the dolphin emu distributed files is now an empty directory (since the portable file has been removed).  Hence that directory should be created and not copied.  This fixes a downstream packaging issue.  Downstream packages strip empty directories from the install.  So users of those packages will find that their settings are not saved.


git-svn-id: https://dolphin-emu.googlecode.com/svn/trunk@7613 8ced0084-cf51-0410-be5f-012b33b47a6e
"
"35d1599724a4c41d0c93e4cbf05ba109feaa969c","2011-06-23 23:11:12+00:00","Tag Dolphin 3.0

git-svn-id: https://dolphin-emu.googlecode.com/svn/tags/3.0@7615 8ced0084-cf51-0410-be5f-012b33b47a6e

3.0: Removed SVNRevGen stuff; changed revision string to 3.0; Removed installer since it was vastly outdated; Bumped CMake major version to 3

git-svn-id: https://dolphin-emu.googlecode.com/svn/tags/3.0@7616 8ced0084-cf51-0410-be5f-012b33b47a6e

3.0: Add the languages which were chosen to be release-worthy.
Uhm, unless I forgot something important, I guess we can declare 3.0 as officially released now and stuff. Cheers ;)

git-svn-id: https://dolphin-emu.googlecode.com/svn/tags/3.0@7617 8ced0084-cf51-0410-be5f-012b33b47a6e

3.0: Fix SCons build

git-svn-id: https://dolphin-emu.googlecode.com/svn/tags/3.0@7627 8ced0084-cf51-0410-be5f-012b33b47a6e
"
